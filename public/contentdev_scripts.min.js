if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||e[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var i=t(this),n=i.data("bs.alert");n||i.data("bs.alert",n=new o(this)),"string"==typeof e&&n[e].call(i)})}var i='[data-dismiss="alert"]',o=function(e){t(e).on("click",i,this.close)};o.VERSION="3.3.7",o.TRANSITION_DURATION=150,o.prototype.close=function(e){function i(){a.detach().trigger("closed.bs.alert").remove()}var n=t(this),s=n.attr("data-target");s||(s=n.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,""));var a=t("#"===s?[]:s);e&&e.preventDefault(),a.length||(a=n.closest(".alert")),a.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(a.removeClass("in"),t.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",i).emulateTransitionEnd(o.TRANSITION_DURATION):i())};var n=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=o,t.fn.alert.noConflict=function(){return t.fn.alert=n,this},t(document).on("click.bs.alert.data-api",i,o.prototype.close)}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.button"),s="object"==typeof e&&e;n||o.data("bs.button",n=new i(this,s)),"toggle"==e?n.toggle():e&&n.setState(e)})}var i=function(e,o){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,o),this.isLoading=!1};i.VERSION="3.3.7",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",o=this.$element,n=o.is("input")?"val":"html",s=o.data();e+="Text",null==s.resetText&&o.data("resetText",o[n]()),setTimeout(t.proxy(function(){o[n](null==s[e]?this.options[e]:s[e]),"loadingText"==e?(this.isLoading=!0,o.addClass(i).attr(i,i).prop(i,!0)):this.isLoading&&(this.isLoading=!1,o.removeClass(i).removeAttr(i).prop(i,!1))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),t&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var o=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=o,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var o=t(i.target).closest(".btn");e.call(o,"toggle"),t(i.target).is('input[type="radio"], input[type="checkbox"]')||(i.preventDefault(),o.is("input,button")?o.trigger("focus"):o.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.carousel"),s=t.extend({},i.DEFAULTS,o.data(),"object"==typeof e&&e),a="string"==typeof e?e:s.slide;n||o.data("bs.carousel",n=new i(this,s)),"number"==typeof e?n.to(e):a?n[a]():s.interval&&n.pause().cycle()})}var i=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.3.7",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e);if(("prev"==t&&0===i||"next"==t&&i==this.$items.length-1)&&!this.options.wrap)return e;var n="prev"==t?-1:1,s=(i+n)%this.$items.length;return this.$items.eq(s)},i.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(e,o){var n=this.$element.find(".item.active"),s=o||this.getItemForDirection(e,n),a=this.interval,r="next"==e?"left":"right",l=this;if(s.hasClass("active"))return this.sliding=!1;var h=s[0],d=t.Event("slide.bs.carousel",{relatedTarget:h,direction:r});if(this.$element.trigger(d),!d.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var p=t(this.$indicators.children()[this.getItemIndex(s)]);p&&p.addClass("active")}var c=t.Event("slid.bs.carousel",{relatedTarget:h,direction:r});return t.support.transition&&this.$element.hasClass("slide")?(s.addClass(e),s[0].offsetWidth,n.addClass(r),s.addClass(r),n.one("bsTransitionEnd",function(){s.removeClass([e,r].join(" ")).addClass("active"),n.removeClass(["active",r].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(c)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(n.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(c)),a&&this.cycle(),this}};var o=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=o,this};var n=function(i){var o,n=t(this),s=t(n.attr("data-target")||(o=n.attr("href"))&&o.replace(/.*(?=#[^\s]+$)/,""));if(s.hasClass("carousel")){var a=t.extend({},s.data(),n.data()),r=n.attr("data-slide-to");r&&(a.interval=!1),e.call(s,a),r&&s.data("bs.carousel").to(r),i.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",n).on("click.bs.carousel.data-api","[data-slide-to]",n),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),function(t){"use strict";function e(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var o=i&&t(i);return o&&o.length?o:e.parent()}function i(i){i&&3===i.which||(t(n).remove(),t(s).each(function(){var o=t(this),n=e(o),s={relatedTarget:this};n.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&t.contains(n[0],i.target)||(n.trigger(i=t.Event("hide.bs.dropdown",s)),i.isDefaultPrevented()||(o.attr("aria-expanded","false"),n.removeClass("open").trigger(t.Event("hidden.bs.dropdown",s)))))}))}function o(e){return this.each(function(){var i=t(this),o=i.data("bs.dropdown");o||i.data("bs.dropdown",o=new a(this)),"string"==typeof e&&o[e].call(i)})}var n=".dropdown-backdrop",s='[data-toggle="dropdown"]',a=function(e){t(e).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.7",a.prototype.toggle=function(o){var n=t(this);if(!n.is(".disabled, :disabled")){var s=e(n),a=s.hasClass("open");if(i(),!a){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",i);var r={relatedTarget:this};if(s.trigger(o=t.Event("show.bs.dropdown",r)),o.isDefaultPrevented())return;n.trigger("focus").attr("aria-expanded","true"),s.toggleClass("open").trigger(t.Event("shown.bs.dropdown",r))}return!1}},a.prototype.keydown=function(i){if(/(38|40|27|32)/.test(i.which)&&!/input|textarea/i.test(i.target.tagName)){var o=t(this);if(i.preventDefault(),i.stopPropagation(),!o.is(".disabled, :disabled")){var n=e(o),a=n.hasClass("open");if(!a&&27!=i.which||a&&27==i.which)return 27==i.which&&n.find(s).trigger("focus"),o.trigger("click");var l=n.find(".dropdown-menu li:not(.disabled):visible a");if(l.length){var h=l.index(i.target);38==i.which&&h>0&&h--,40==i.which&&h<l.length-1&&h++,~h||(h=0),l.eq(h).trigger("focus")}}}};var r=t.fn.dropdown;t.fn.dropdown=o,t.fn.dropdown.Constructor=a,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=r,this},t(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",s,a.prototype.toggle).on("keydown.bs.dropdown.data-api",s,a.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",a.prototype.keydown)}(jQuery),function(t){"use strict";function e(e,o){return this.each(function(){var n=t(this),s=n.data("bs.modal"),a=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);s||n.data("bs.modal",s=new i(this,a)),"string"==typeof e?s[e](o):a.show&&s.show(o)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.7",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var o=this,n=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){o.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(o.$element)&&(o.ignoreBackdropClick=!0)})}),this.backdrop(function(){var n=t.support.transition&&o.$element.hasClass("fade");o.$element.parent().length||o.$element.appendTo(o.$body),o.$element.show().scrollTop(0),o.adjustDialog(),n&&o.$element[0].offsetWidth,o.$element.addClass("in"),o.enforceFocus();var s=t.Event("shown.bs.modal",{relatedTarget:e});n?o.$dialog.one("bsTransitionEnd",function(){o.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(i.TRANSITION_DURATION):o.$element.trigger("focus").trigger(s)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){document===t.target||this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var o=this,n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=t.support.transition&&n;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+n).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;s?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){o.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):a()}else e&&e()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var o=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=o,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var o=t(this),n=o.attr("href"),s=t(o.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),a=s.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(n)&&n},s.data(),o.data());o.is("a")&&i.preventDefault(),s.one("show.bs.modal",function(t){t.isDefaultPrevented()||s.one("hidden.bs.modal",function(){o.is(":visible")&&o.trigger("focus")})}),e.call(s,a,this)})}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.tooltip"),s="object"==typeof e&&e;!n&&/destroy|hide/.test(e)||(n||o.data("bs.tooltip",n=new i(this,s)),"string"==typeof e&&n[e]())})}var i=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};i.VERSION="3.3.7",i.TRANSITION_DURATION=150,i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,o){if(this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(o),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var n=this.options.trigger.split(" "),s=n.length;s--;){var a=n[s];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var r="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,o){i[t]!=o&&(e[t]=o)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusin"==e.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState?void(i.hoverState="in"):(clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},i.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},i.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusout"==e.type?"focus":"hover"]=!1),i.isInStateTrue()?void 0:(clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide())},i.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var o=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!o)return;var n=this,s=this.tip(),a=this.getUID(this.type);this.setContent(),s.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&s.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,h=l.test(r);h&&(r=r.replace(l,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var d=this.getPosition(),p=s[0].offsetWidth,c=s[0].offsetHeight;if(h){var f=r,u=this.getPosition(this.$viewport);r="bottom"==r&&d.bottom+c>u.bottom?"top":"top"==r&&d.top-c<u.top?"bottom":"right"==r&&d.right+p>u.width?"left":"left"==r&&d.left-p<u.left?"right":r,s.removeClass(f).addClass(r)}var g=this.getCalculatedOffset(r,d,p,c);this.applyPlacement(g,r);var v=function(){var t=n.hoverState;n.$element.trigger("shown.bs."+n.type),n.hoverState=null,"out"==t&&n.leave(n)};t.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",v).emulateTransitionEnd(i.TRANSITION_DURATION):v()}},i.prototype.applyPlacement=function(e,i){var o=this.tip(),n=o[0].offsetWidth,s=o[0].offsetHeight,a=parseInt(o.css("margin-top"),10),r=parseInt(o.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(r)&&(r=0),e.top+=a,e.left+=r,t.offset.setOffset(o[0],t.extend({using:function(t){o.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),o.addClass("in");var l=o[0].offsetWidth,h=o[0].offsetHeight;"top"==i&&h!=s&&(e.top=e.top+s-h);var d=this.getViewportAdjustedDelta(i,e,l,h);d.left?e.left+=d.left:e.top+=d.top;var p=/top|bottom/.test(i),c=p?2*d.left-n+l:2*d.top-s+h,f=p?"offsetWidth":"offsetHeight";o.offset(e),this.replaceArrow(c,o[0][f],p)},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(e){function o(){"in"!=n.hoverState&&s.detach(),n.$element&&n.$element.removeAttr("aria-describedby").trigger("hidden.bs."+n.type),e&&e()}var n=this,s=t(this.$tip),a=t.Event("hide.bs."+this.type);return this.$element.trigger(a),a.isDefaultPrevented()?void 0:(s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",o).emulateTransitionEnd(i.TRANSITION_DURATION):o(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],o="BODY"==i.tagName,n=i.getBoundingClientRect();null==n.width&&(n=t.extend({},n,{width:n.right-n.left,height:n.bottom-n.top}));var s=window.SVGElement&&i instanceof window.SVGElement,a=o?{top:0,left:0}:s?null:e.offset(),r={scroll:o?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},l=o?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},n,r,l,a)},i.prototype.getCalculatedOffset=function(t,e,i,o){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-o,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-o/2,left:e.left-i}:{top:e.top+e.height/2-o/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,o){var n={top:0,left:0};if(!this.$viewport)return n;var s=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var r=e.top-s-a.scroll,l=e.top+s-a.scroll+o;r<a.top?n.top=a.top-r:l>a.top+a.height&&(n.top=a.top+a.height-l)}else{var h=e.left-s,d=e.left+s+i;h<a.left?n.left=a.left-h:d>a.right&&(n.left=a.left+a.width-d)}return n},i.prototype.getTitle=function(){var e=this.$element,i=this.options;return e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},i.prototype.getUID=function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},i.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&((i=t(e.currentTarget).data("bs."+this.type))||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),e?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null})};var o=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=o,this}}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.popover"),s="object"==typeof e&&e;!n&&/destroy|hide/.test(e)||(n||o.data("bs.popover",n=new i(this,s)),"string"==typeof e&&n[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.3.7",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var o=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=o,this}}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.tab");n||o.data("bs.tab",n=new i(this)),"string"==typeof e&&n[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.3.7",i.TRANSITION_DURATION=150,i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),o=e.data("target");if(o||(o=e.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var n=i.find(".active:last a"),s=t.Event("hide.bs.tab",{relatedTarget:e[0]}),a=t.Event("show.bs.tab",{relatedTarget:n[0]});if(n.trigger(s),e.trigger(a),!a.isDefaultPrevented()&&!s.isDefaultPrevented()){var r=t(o);this.activate(e.closest("li"),i),this.activate(r,r.parent(),function(){n.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:n[0]})})}}},i.prototype.activate=function(e,o,n){function s(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),r?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),n&&n()}var a=o.find("> .active"),r=n&&t.support.transition&&(a.length&&a.hasClass("fade")||!!o.find("> .fade").length);a.length&&r?a.one("bsTransitionEnd",s).emulateTransitionEnd(i.TRANSITION_DURATION):s(),a.removeClass("in")};var o=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=o,this};var n=function(i){i.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',n).on("click.bs.tab.data-api",'[data-toggle="pill"]',n)}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.affix"),s="object"==typeof e&&e;n||o.data("bs.affix",n=new i(this,s)),"string"==typeof e&&n[e]()})}var i=function(e,o){this.options=t.extend({},i.DEFAULTS,o),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.7",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(t,e,i,o){var n=this.$target.scrollTop(),s=this.$element.offset(),a=this.$target.height();if(null!=i&&"top"==this.affixed)return i>n&&"top";if("bottom"==this.affixed)return null!=i?!(n+this.unpin<=s.top)&&"bottom":!(t-o>=n+a)&&"bottom";var r=null==this.affixed,l=r?n:s.top,h=r?a:e;return null!=i&&i>=n?"top":null!=o&&l+h>=t-o&&"bottom"},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),o=this.options.offset,n=o.top,s=o.bottom,a=Math.max(t(document).height(),t(document.body).height());"object"!=typeof o&&(s=n=o),"function"==typeof n&&(n=o.top(this.$element)),"function"==typeof s&&(s=o.bottom(this.$element));var r=this.getState(a,e,n,s);if(this.affixed!=r){null!=this.unpin&&this.$element.css("top","");var l="affix"+(r?"-"+r:""),h=t.Event(l+".bs.affix");if(this.$element.trigger(h),h.isDefaultPrevented())return;this.affixed=r,this.unpin="bottom"==r?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==r&&this.$element.offset({top:a-e-s})}};var o=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=o,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),o=i.data();o.offset=o.offset||{},null!=o.offsetBottom&&(o.offset.bottom=o.offsetBottom),null!=o.offsetTop&&(o.offset.top=o.offsetTop),e.call(i,o)})})}(jQuery),function(t){"use strict";function e(e){var i,o=e.attr("data-target")||(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return t(o)}function i(e){return this.each(function(){var i=t(this),n=i.data("bs.collapse"),s=t.extend({},o.DEFAULTS,i.data(),"object"==typeof e&&e);!n&&s.toggle&&/show|hide/.test(e)&&(s.toggle=!1),n||i.data("bs.collapse",n=new o(this,s)),"string"==typeof e&&n[e]()})}var o=function(e,i){this.$element=t(e),this.options=t.extend({},o.DEFAULTS,i),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};o.VERSION="3.3.7",o.TRANSITION_DURATION=350,o.DEFAULTS={toggle:!0},o.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},o.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,n=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(n&&n.length&&(e=n.data("bs.collapse"))&&e.transitioning)){var s=t.Event("show.bs.collapse");if(this.$element.trigger(s),!s.isDefaultPrevented()){n&&n.length&&(i.call(n,"hide"),e||n.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,
this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return r.call(this);var l=t.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",t.proxy(r,this)).emulateTransitionEnd(o.TRANSITION_DURATION)[a](this.$element[0][l])}}}},o.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var n=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[i](0).one("bsTransitionEnd",t.proxy(n,this)).emulateTransitionEnd(o.TRANSITION_DURATION):n.call(this)}}},o.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},o.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(i,o){var n=t(o);this.addAriaAndCollapsedClass(e(n),n)},this)).end()},o.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var n=t.fn.collapse;t.fn.collapse=i,t.fn.collapse.Constructor=o,t.fn.collapse.noConflict=function(){return t.fn.collapse=n,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(o){var n=t(this);n.attr("data-target")||o.preventDefault();var s=e(n),a=s.data("bs.collapse"),r=a?"toggle":n.data();i.call(s,r)})}(jQuery),function(t){"use strict";function e(i,o){this.$body=t(document.body),this.$scrollElement=t(t(i).is(document.body)?window:i),this.options=t.extend({},e.DEFAULTS,o),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each(function(){var o=t(this),n=o.data("bs.scrollspy"),s="object"==typeof i&&i;n||o.data("bs.scrollspy",n=new e(this,s)),"string"==typeof i&&n[i]()})}e.VERSION="3.3.7",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,i="offset",o=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(i="position",o=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),n=e.data("target")||e.attr("href"),s=/^#./.test(n)&&t(n);return s&&s.length&&s.is(":visible")&&[[s[i]().top+o,n]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),o=this.options.offset+i-this.$scrollElement.height(),n=this.offsets,s=this.targets,a=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=o)return a!=(t=s[s.length-1])&&this.activate(t);if(a&&e<n[0])return this.activeTarget=null,this.clear();for(t=n.length;t--;)a!=s[t]&&e>=n[t]&&(void 0===n[t+1]||e<n[t+1])&&this.activate(s[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',o=t(i).parents("li").addClass("active");o.parent(".dropdown-menu").length&&(o=o.closest("li.dropdown").addClass("active")),o.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var o=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=o,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery),function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,o=this;t(this).one("bsTransitionEnd",function(){i=!0});var n=function(){i||t(o).trigger(t.support.transition.end)};return setTimeout(n,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery);var Arrive=function(window,$,undefined){"use strict";function exposeUnbindApi(eventObj,exposeTo,funcName){utils.addMethod(exposeTo,funcName,eventObj.unbindEvent),utils.addMethod(exposeTo,funcName,eventObj.unbindEventWithSelectorOrCallback),utils.addMethod(exposeTo,funcName,eventObj.unbindEventWithSelectorAndCallback)}function exposeApi(exposeTo){exposeTo.arrive=arriveEvents.bindEvent,exposeUnbindApi(arriveEvents,exposeTo,"unbindArrive"),exposeTo.leave=leaveEvents.bindEvent,exposeUnbindApi(leaveEvents,exposeTo,"unbindLeave")}if(window.MutationObserver&&"undefined"!=typeof HTMLElement){var arriveUniqueId=0,utils=function(){var matches=HTMLElement.prototype.matches||HTMLElement.prototype.webkitMatchesSelector||HTMLElement.prototype.mozMatchesSelector||HTMLElement.prototype.msMatchesSelector;return{matchesSelector:function(elem,selector){return elem instanceof HTMLElement&&matches.call(elem,selector)},addMethod:function(object,name,fn){var old=object[name];object[name]=function(){return fn.length==arguments.length?fn.apply(this,arguments):"function"==typeof old?old.apply(this,arguments):void 0}},callCallbacks:function(callbacksToBeCalled){for(var cb,i=0;cb=callbacksToBeCalled[i];i++)cb.callback.call(cb.elem)},checkChildNodesRecursively:function(nodes,registrationData,matchFunc,callbacksToBeCalled){for(var node,i=0;node=nodes[i];i++)matchFunc(node,registrationData,callbacksToBeCalled)&&callbacksToBeCalled.push({callback:registrationData.callback,elem:node}),node.childNodes.length>0&&utils.checkChildNodesRecursively(node.childNodes,registrationData,matchFunc,callbacksToBeCalled)},mergeArrays:function(firstArr,secondArr){var attrName,options={};for(attrName in firstArr)options[attrName]=firstArr[attrName];for(attrName in secondArr)options[attrName]=secondArr[attrName];return options},toElementsArray:function(elements){return void 0===elements||"number"==typeof elements.length&&elements!==window||(elements=[elements]),elements}}}(),EventsBucket=function(){var EventsBucket=function(){this._eventsBucket=[],this._beforeAdding=null,this._beforeRemoving=null};return EventsBucket.prototype.addEvent=function(target,selector,options,callback){var newEvent={target:target,selector:selector,options:options,callback:callback,firedElems:[]};return this._beforeAdding&&this._beforeAdding(newEvent),this._eventsBucket.push(newEvent),newEvent},EventsBucket.prototype.removeEvent=function(compareFunction){for(var registeredEvent,i=this._eventsBucket.length-1;registeredEvent=this._eventsBucket[i];i--)compareFunction(registeredEvent)&&(this._beforeRemoving&&this._beforeRemoving(registeredEvent),this._eventsBucket.splice(i,1))},EventsBucket.prototype.beforeAdding=function(beforeAdding){this._beforeAdding=beforeAdding},EventsBucket.prototype.beforeRemoving=function(beforeRemoving){this._beforeRemoving=beforeRemoving},EventsBucket}(),MutationEvents=function(getObserverConfig,onMutation){var eventsBucket=new EventsBucket,me=this,defaultOptions={fireOnAttributesModification:!1};return eventsBucket.beforeAdding(function(registrationData){var observer,target=registrationData.target;registrationData.selector,registrationData.callback;target!==window.document&&target!==window||(target=document.getElementsByTagName("html")[0]),observer=new MutationObserver(function(e){onMutation.call(this,e,registrationData)});var config=getObserverConfig(registrationData.options);observer.observe(target,config),registrationData.observer=observer,registrationData.me=me}),eventsBucket.beforeRemoving(function(eventData){eventData.observer.disconnect()}),this.bindEvent=function(selector,options,callback){options=utils.mergeArrays(defaultOptions,options);for(var elements=utils.toElementsArray(this),i=0;i<elements.length;i++)eventsBucket.addEvent(elements[i],selector,options,callback)},this.unbindEvent=function(){var elements=utils.toElementsArray(this);eventsBucket.removeEvent(function(eventObj){for(var i=0;i<elements.length;i++)if(this===undefined||eventObj.target===elements[i])return!0;return!1})},this.unbindEventWithSelectorOrCallback=function(selector){var compareFunction,elements=utils.toElementsArray(this),callback=selector;compareFunction="function"==typeof selector?function(eventObj){for(var i=0;i<elements.length;i++)if((this===undefined||eventObj.target===elements[i])&&eventObj.callback===callback)return!0;return!1}:function(eventObj){for(var i=0;i<elements.length;i++)if((this===undefined||eventObj.target===elements[i])&&eventObj.selector===selector)return!0;return!1},eventsBucket.removeEvent(compareFunction)},this.unbindEventWithSelectorAndCallback=function(selector,callback){var elements=utils.toElementsArray(this);eventsBucket.removeEvent(function(eventObj){for(var i=0;i<elements.length;i++)if((this===undefined||eventObj.target===elements[i])&&eventObj.selector===selector&&eventObj.callback===callback)return!0;return!1})},this},ArriveEvents=function(){function getArriveObserverConfig(options){var config={attributes:!1,childList:!0,subtree:!0};return options.fireOnAttributesModification&&(config.attributes=!0),config}function onArriveMutation(mutations,registrationData){mutations.forEach(function(mutation){var newNodes=mutation.addedNodes,targetNode=mutation.target,callbacksToBeCalled=[];null!==newNodes&&newNodes.length>0?utils.checkChildNodesRecursively(newNodes,registrationData,nodeMatchFunc,callbacksToBeCalled):"attributes"===mutation.type&&nodeMatchFunc(targetNode,registrationData,callbacksToBeCalled)&&callbacksToBeCalled.push({callback:registrationData.callback,elem:node}),utils.callCallbacks(callbacksToBeCalled)})}function nodeMatchFunc(node,registrationData,callbacksToBeCalled){if(utils.matchesSelector(node,registrationData.selector)&&(node._id===undefined&&(node._id=arriveUniqueId++),registrationData.firedElems.indexOf(node._id)==-1)){if(registrationData.options.onceOnly){if(0!==registrationData.firedElems.length)return;registrationData.me.unbindEventWithSelectorAndCallback.call(registrationData.target,registrationData.selector,registrationData.callback)}registrationData.firedElems.push(node._id),callbacksToBeCalled.push({callback:registrationData.callback,elem:node})}}var arriveDefaultOptions={fireOnAttributesModification:!1,onceOnly:!1,existing:!1};arriveEvents=new MutationEvents(getArriveObserverConfig,onArriveMutation);var mutationBindEvent=arriveEvents.bindEvent;return arriveEvents.bindEvent=function(selector,options,callback){void 0===callback?(callback=options,options=arriveDefaultOptions):options=utils.mergeArrays(arriveDefaultOptions,options);var elements=utils.toElementsArray(this);if(options.existing){for(var existing=[],i=0;i<elements.length;i++)for(var nodes=elements[i].querySelectorAll(selector),j=0;j<nodes.length;j++)existing.push({callback:callback,elem:nodes[j]});if(options.onceOnly&&existing.length)return callback.call(existing[0].elem);utils.callCallbacks(existing)}mutationBindEvent.call(this,selector,options,callback)},arriveEvents},LeaveEvents=function(){function getLeaveObserverConfig(options){return{childList:!0,subtree:!0}}function onLeaveMutation(mutations,registrationData){mutations.forEach(function(mutation){var removedNodes=mutation.removedNodes,callbacksToBeCalled=(mutation.target,[]);null!==removedNodes&&removedNodes.length>0&&utils.checkChildNodesRecursively(removedNodes,registrationData,nodeMatchFunc,callbacksToBeCalled),utils.callCallbacks(callbacksToBeCalled)})}function nodeMatchFunc(node,registrationData){return utils.matchesSelector(node,registrationData.selector)}var leaveDefaultOptions={};leaveEvents=new MutationEvents(getLeaveObserverConfig,onLeaveMutation);var mutationBindEvent=leaveEvents.bindEvent;return leaveEvents.bindEvent=function(selector,options,callback){void 0===callback?(callback=options,options=leaveDefaultOptions):options=utils.mergeArrays(leaveDefaultOptions,options),mutationBindEvent.call(this,selector,options,callback)},leaveEvents},arriveEvents=new ArriveEvents,leaveEvents=new LeaveEvents;$&&exposeApi($.fn),exposeApi(HTMLElement.prototype),exposeApi(NodeList.prototype),exposeApi(HTMLCollection.prototype),exposeApi(HTMLDocument.prototype),exposeApi(Window.prototype);var Arrive={};return exposeUnbindApi(arriveEvents,Arrive,"unbindAllArrive"),exposeUnbindApi(leaveEvents,Arrive,"unbindAllLeave"),Arrive}}(this,"undefined"==typeof jQuery?null:jQuery,void 0);!function($){function _isChar(evt){return void 0===evt.which||"number"==typeof evt.which&&evt.which>0&&(!evt.ctrlKey&&!evt.metaKey&&!evt.altKey&&8!=evt.which&&9!=evt.which&&13!=evt.which&&16!=evt.which&&17!=evt.which&&20!=evt.which&&27!=evt.which)}function _addFormGroupFocus(element){var $element=$(element);$element.prop("disabled")||$element.closest(".form-group").addClass("is-focused")}function _toggleTypeFocus($input){$input.closest("label").hover(function(){var $i=$(this).find("input");$i.prop("disabled")||_addFormGroupFocus($i)},function(){_removeFormGroupFocus($(this).find("input"))})}function _removeFormGroupFocus(element){$(element).closest(".form-group").removeClass("is-focused")}$.expr[":"].notmdproc=function(obj){return!$(obj).data("mdproc")},$.material={options:{validate:!0,input:!0,ripples:!0,checkbox:!0,togglebutton:!0,radio:!0,arrive:!0,autofill:!1,withRipples:[".btn:not(.btn-link)",".card-image",".navbar a:not(.withoutripple)",".dropdown-menu a",".nav-tabs a:not(.withoutripple)",".withripple",".pagination li:not(.active):not(.disabled) a:not(.withoutripple)"].join(","),inputElements:"input.form-control, textarea.form-control, select.form-control",checkboxElements:".checkbox > label > input[type=checkbox]",togglebuttonElements:".togglebutton > label > input[type=checkbox]",radioElements:".radio > label > input[type=radio]"},checkbox:function(selector){_toggleTypeFocus($(selector?selector:this.options.checkboxElements).filter(":notmdproc").data("mdproc",!0).after("<span class='checkbox-material'><span class='check'></span></span>"))},togglebutton:function(selector){_toggleTypeFocus($(selector?selector:this.options.togglebuttonElements).filter(":notmdproc").data("mdproc",!0).after("<span class='toggle'></span>"))},radio:function(selector){_toggleTypeFocus($(selector?selector:this.options.radioElements).filter(":notmdproc").data("mdproc",!0).after("<span class='circle'></span><span class='check'></span>"))},input:function(selector){$(selector?selector:this.options.inputElements).filter(":notmdproc").data("mdproc",!0).each(function(){var $input=$(this),$formGroup=$input.closest(".form-group");0===$formGroup.length&&($input.wrap("<div class='form-group'></div>"),$formGroup=$input.closest(".form-group")),$input.attr("data-hint")&&($input.after("<p class='help-block'>"+$input.attr("data-hint")+"</p>"),$input.removeAttr("data-hint"));var legacySizes={"input-lg":"form-group-lg","input-sm":"form-group-sm"};if($.each(legacySizes,function(legacySize,standardSize){$input.hasClass(legacySize)&&($input.removeClass(legacySize),$formGroup.addClass(standardSize))}),$input.hasClass("floating-label")){var placeholder=$input.attr("placeholder");$input.attr("placeholder",null).removeClass("floating-label");var id=$input.attr("id"),forAttribute="";id&&(forAttribute="for='"+id+"'"),$formGroup.addClass("label-floating"),$input.after("<label "+forAttribute+"class='control-label'>"+placeholder+"</label>")}null!==$input.val()&&"undefined"!=$input.val()&&""!==$input.val()||$formGroup.addClass("is-empty"),$formGroup.append("<span class='material-input'></span>"),$formGroup.find("input[type=file]").length>0&&$formGroup.addClass("is-fileinput")})},attachInputEventHandlers:function(){var validate=this.options.validate;$(document).on("change",".checkbox input[type=checkbox]",function(){$(this).blur()}).on("keydown paste",".form-control",function(e){_isChar(e)&&$(this).closest(".form-group").removeClass("is-empty")}).on("keyup change",".form-control",function(){var $input=$(this),$formGroup=$input.closest(".form-group"),isValid=void 0===$input[0].checkValidity||$input[0].checkValidity();""===$input.val()?$formGroup.addClass("is-empty"):$formGroup.removeClass("is-empty"),validate&&(isValid?$formGroup.removeClass("has-error"):$formGroup.addClass("has-error"))}).on("focus",".form-control, .form-group.is-fileinput",function(){_addFormGroupFocus(this)}).on("blur",".form-control, .form-group.is-fileinput",function(){_removeFormGroupFocus(this)}).on("change",".form-group input",function(){var $input=$(this);if("file"!=$input.attr("type")){var $formGroup=$input.closest(".form-group");$input.val()?$formGroup.removeClass("is-empty"):$formGroup.addClass("is-empty")}}).on("change",".form-group.is-fileinput input[type='file']",function(){var $input=$(this),$formGroup=$input.closest(".form-group"),value="";$.each(this.files,function(i,file){value+=file.name+", "}),value=value.substring(0,value.length-2),value?$formGroup.removeClass("is-empty"):$formGroup.addClass("is-empty"),$formGroup.find("input.form-control[readonly]").val(value)})},ripples:function(selector){$(selector?selector:this.options.withRipples).ripples()},autofill:function(){var loading=setInterval(function(){$("input[type!=checkbox]").each(function(){var $this=$(this);$this.val()&&$this.val()!==$this.attr("value")&&$this.trigger("change")})},100);setTimeout(function(){clearInterval(loading)},1e4)},attachAutofillEventHandlers:function(){var focused;$(document).on("focus","input",function(){var $inputs=$(this).parents("form").find("input").not("[type=file]");focused=setInterval(function(){$inputs.each(function(){var $this=$(this);$this.val()!==$this.attr("value")&&$this.trigger("change")})},100)}).on("blur",".form-group input",function(){clearInterval(focused)})},init:function(options){this.options=$.extend({},this.options,options);var $document=$(document);$.fn.ripples&&this.options.ripples&&this.ripples(),this.options.input&&(this.input(),this.attachInputEventHandlers()),this.options.checkbox&&this.checkbox(),this.options.togglebutton&&this.togglebutton(),this.options.radio&&this.radio(),this.options.autofill&&(this.autofill(),this.attachAutofillEventHandlers()),document.arrive&&this.options.arrive&&($.fn.ripples&&this.options.ripples&&$document.arrive(this.options.withRipples,function(){$.material.ripples($(this))}),this.options.input&&$document.arrive(this.options.inputElements,function(){$.material.input($(this))}),this.options.checkbox&&$document.arrive(this.options.checkboxElements,function(){$.material.checkbox($(this))}),this.options.radio&&$document.arrive(this.options.radioElements,function(){$.material.radio($(this))}),this.options.togglebutton&&$document.arrive(this.options.togglebuttonElements,function(){$.material.togglebutton($(this))}))}}}(jQuery),function(a,b,c,d){"use strict";function e(b,c){g=this,this.element=a(b),this.options=a.extend({},h,c),this._defaults=h,this._name=f,this.init()}var f="ripples",g=null,h={};e.prototype.init=function(){var c=this.element;c.on("mousedown touchstart",function(d){if(!g.isTouch()||"mousedown"!==d.type){c.find(".ripple-container").length||c.append('<div class="ripple-container"></div>');var e=c.children(".ripple-container"),f=g.getRelY(e,d),h=g.getRelX(e,d);if(f||h){var i=g.getRipplesColor(c),j=a("<div></div>");j.addClass("ripple").css({left:h,top:f,"background-color":i}),e.append(j),function(){b.getComputedStyle(j[0]).opacity}(),g.rippleOn(c,j),setTimeout(function(){g.rippleEnd(j)},500),c.on("mouseup mouseleave touchend",function(){j.data("mousedown","off"),"off"===j.data("animating")&&g.rippleOut(j)})}}})},e.prototype.getNewSize=function(a,b){return Math.max(a.outerWidth(),a.outerHeight())/b.outerWidth()*2.5},e.prototype.getRelX=function(a,b){var c=a.offset();return g.isTouch()?(b=b.originalEvent,1===b.touches.length&&b.touches[0].pageX-c.left):b.pageX-c.left},e.prototype.getRelY=function(a,b){var c=a.offset();return g.isTouch()?(b=b.originalEvent,1===b.touches.length&&b.touches[0].pageY-c.top):b.pageY-c.top},e.prototype.getRipplesColor=function(a){return a.data("ripple-color")?a.data("ripple-color"):b.getComputedStyle(a[0]).color},e.prototype.hasTransitionSupport=function(){var a=c.body||c.documentElement,b=a.style;return b.transition!==d||b.WebkitTransition!==d||b.MozTransition!==d||b.MsTransition!==d||b.OTransition!==d},e.prototype.isTouch=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},e.prototype.rippleEnd=function(a){a.data("animating","off"),"off"===a.data("mousedown")&&g.rippleOut(a)},e.prototype.rippleOut=function(a){a.off(),g.hasTransitionSupport()?a.addClass("ripple-out"):a.animate({opacity:0},100,function(){a.trigger("transitionend")}),a.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){a.remove()})},e.prototype.rippleOn=function(a,b){var c=g.getNewSize(a,b);g.hasTransitionSupport()?b.css({"-ms-transform":"scale("+c+")","-moz-transform":"scale("+c+")","-webkit-transform":"scale("+c+")",transform:"scale("+c+")"}).addClass("ripple-on").data("animating","on").data("mousedown","on"):b.animate({width:2*Math.max(a.outerWidth(),a.outerHeight()),height:2*Math.max(a.outerWidth(),a.outerHeight()),"margin-left":-1*Math.max(a.outerWidth(),a.outerHeight()),"margin-top":-1*Math.max(a.outerWidth(),a.outerHeight()),opacity:.2},500,function(){b.trigger("transitionend")})},a.fn.ripples=function(b){return this.each(function(){a.data(this,"plugin_"+f)||a.data(this,"plugin_"+f,new e(this,b))})}}(jQuery,window,document),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?module.exports=factory(require("jquery")):factory(jQuery)}(function($){var methods={options:{optionClass:"",dropdownClass:"",autoinit:!1,callback:!1,onSelected:!1,dynamicOptLabel:"Add a new option..."},init:function(options){function initElement($select){if(!$select.data("dropdownjs")&&$select.is("select")){var multi=$select.attr("multiple"),dynamicOptions=$select.attr("data-dynamic-opts"),$dynamicInput=$(),$dropdown=$("<div></div>");$dropdown.addClass("dropdownjs").addClass(options.dropdownStyle),$dropdown.data("select",$select);var $input=$("<input type=text readonly class=fakeinput>");$.material&&$input.data("mdproc",!0),$dropdown.append($input);var $ul=$("<ul></ul>");$ul.data("select",$select),$dropdown.append($ul),$input.attr("placeholder",$select.attr("placeholder")),$select.find("option").each(function(){var $this=$(this);methods._addOption($ul,$this)}),dynamicOptions&&($dynamicInput=$("<li class=dropdownjs-add></li>"),$dynamicInput.append("<input>"),$dynamicInput.find("input").attr("placeholder",options.dynamicOptLabel),$ul.append($dynamicInput));$dropdown.find("li");if(multi){var selectors=[],val=$select.val();for(var i in val)selectors.push("li[value="+val[i]+"]");selectors.length>0&&methods._select($dropdown,$dropdown.find(selectors.join(",")))}else{var $selected;$selected=$select.find(":selected").length?$select.find(":selected").last():$select.find("option, li").first(),methods._select($dropdown,$selected)}$input.addClass($select[0].className),$select.hide().attr("data-dropdownjs",!0),$select.after($dropdown),options.callback&&options.callback($dropdown),$ul.on("click","li:not(.dropdownjs-add)",function(e){methods._select($dropdown,$(this)),$select.change()}),$ul.on("keydown","li:not(.dropdownjs-add)",function(e){return 27===e.which?($(".dropdownjs > ul > li").attr("tabindex",-1),$input.removeClass("focus").blur()):32!==e.which||$(e.target).is("input")?void 0:(methods._select($dropdown,$(this)),!1)}),$ul.on("focus","li:not(.dropdownjs-add)",function(){$select.is(":disabled")||$input.addClass("focus")}),dynamicOptions&&dynamicOptions.length&&$dynamicInput.on("keydown",function(e){if(13===e.which){var $option=$("<option>"),val=$dynamicInput.find("input").val();$dynamicInput.find("input").val(""),$option.attr("value",val),$option.text(val),$select.append($option)}}),$select.on("DOMNodeInserted",function(e){var $this=$(e.target);$this.val().length&&(methods._addOption($ul,$this),$ul.find("li").not(".dropdownjs-add").attr("tabindex",0))}),$input.on("click focus",function(e){if(e.stopPropagation(),!$select.is(":disabled")){$(".dropdownjs > ul > li").attr("tabindex",-1),$(".dropdownjs > input").not($(this)).removeClass("focus").blur(),$(".dropdownjs > ul > li").not(".dropdownjs-add").attr("tabindex",0);var coords={top:$(this).offset().top-$(document).scrollTop(),left:$(this).offset().left-$(document).scrollLeft(),bottom:$(window).height()-($(this).offset().top-$(document).scrollTop()),right:$(window).width()-($(this).offset().left-$(document).scrollLeft())},height=coords.bottom;height<200&&coords.top>coords.bottom?(height=coords.top,$ul.attr("placement","top-left")):$ul.attr("placement","bottom-left"),$(this).next("ul").css("max-height",height-20),$(this).addClass("focus")}}),$(document).on("click",function(e){multi&&$(e.target).parents(".dropdownjs").length||$(e.target).parents(".dropdownjs-add").length||$(e.target).is(".dropdownjs-add")||($(".dropdownjs > ul > li").attr("tabindex",-1),$input.removeClass("focus"))})}}options=options?$.extend(methods.options,options):methods.options,options.autoinit&&$(document).on("DOMNodeInserted",function(e){var $this=$(e.target);$this.is("select")||($this=$this.find("select")),$this.is(options.autoinit)&&initElement($this)}),$(this).each(function(){initElement($(this))})},select:function(target){var $target=$(this).find('[value="'+target+'"]');methods._select($(this),$target)},_select:function($dropdown,$target){if(!$target.is(".dropdownjs-add")){var $select=$dropdown.data("select"),$input=$dropdown.find("input.fakeinput"),multi=$select.attr("multiple"),selectOptions=$dropdown.find("li");if(multi){$target.toggleClass("selected"),$target.each(function(){$select.find('[value="'+$(this).attr("value")+'"]').prop("selected",$(this).hasClass("selected"))});var text=[];selectOptions.each(function(){$(this).hasClass("selected")&&text.push($(this).text())}),$input.val(text.join(", "))}multi||(selectOptions.not($target).removeClass("selected"),$target.addClass("selected"),$select.val($target.attr("value")),$input.val($target.text().trim())),$.material&&($input.val().trim()?$select.removeClass("empty"):$select.addClass("empty")),this.options.onSelected&&this.options.onSelected($target.attr("value"))}},_addOption:function($ul,$this){var $option=$("<li></li>");$option.addClass(this.options.optionStyle),$this.text()?$option.text($this.text()):$option.html("&nbsp;"),$option.attr("value",$this.val()),$ul.data("select").attr("data-dynamic-opts")&&($option.append("<span class=close></span>"),$option.find(".close").on("click",function(){$option.remove(),$this.remove()})),$this.prop("selected")&&$option.attr("selected",!0),$ul.find(".dropdownjs-add").length?$ul.find(".dropdownjs-add").before($option):$ul.append($option)}};$.fn.dropdown=function(params){return methods[params]?methods[params].apply(this,Array.prototype.slice.call(arguments,1)):"object"==typeof params|!params?methods.init.apply(this,arguments):void $.error("Method "+params+" does not exists on jQuery.dropdown")}}),angular.module("btford.socket-io",[]).provider("socketFactory",function(){"use strict";this.$get=["$rootScope","$timeout","global",function($rootScope,$timeout,global){var asyncAngularify=function(socket,callback){return callback?function(){var args=arguments;$timeout(function(){callback.apply(socket,args)},0)}:angular.noop};return function(options){options=options||{},options.host||(options.host=socketHost);var socket=options.ioSocket||io.connect(options.host),prefix=void 0===options.prefix?"socket:":options.prefix,defaultScope=options.scope||$rootScope,addListener=function(eventName,callback){socket.on(eventName,callback.__ng=asyncAngularify(socket,callback))};return{on:addListener,addListener:addListener,once:function(eventName,callback){socket.once(eventName,callback.__ng=asyncAngularify(socket,callback))},emit:function(eventName,data,callback){var lastIndex=arguments.length-1,callback=arguments[lastIndex];return"function"==typeof callback&&(callback=asyncAngularify(socket,callback),arguments[lastIndex]=callback),socket.emit.apply(socket,arguments)},removeListener:function(ev,fn){return fn&&fn.__ng&&(arguments[1]=fn.__ng),socket.removeListener.apply(socket,arguments)},removeAllListeners:function(){return socket.removeAllListeners.apply(socket,arguments)},disconnect:function(close){return socket.disconnect(close)},connect:function(){return socket.connect()},forward:function(events,scope){events instanceof Array==0&&(events=[events]),scope||(scope=defaultScope),events.forEach(function(eventName){var prefixedEvent=prefix+eventName,forwardBroadcast=asyncAngularify(socket,function(){Array.prototype.unshift.call(arguments,prefixedEvent),scope.$broadcast.apply(scope,arguments)});scope.$on("$destroy",function(){socket.removeListener(eventName,forwardBroadcast)}),socket.on(eventName,forwardBroadcast)})}}}}]}),function(window,angular,undefined){"use strict";angular.module("ngCookies",["ng"]).factory("$cookies",["$rootScope","$browser",function($rootScope,$browser){function push(){var name,value,browserCookies,updated;for(name in lastCookies)isUndefined(cookies[name])&&($browser.cookies(name,undefined),delete lastCookies[name]);for(name in cookies)value=cookies[name],angular.isString(value)||(value=""+value,cookies[name]=value),value!==lastCookies[name]&&($browser.cookies(name,value),lastCookies[name]=value,updated=!0);if(updated){browserCookies=$browser.cookies();for(name in cookies)cookies[name]!==browserCookies[name]&&(isUndefined(browserCookies[name])?(delete cookies[name],delete lastCookies[name]):cookies[name]=lastCookies[name]=browserCookies[name])}}var lastBrowserCookies,cookies={},lastCookies={},runEval=!1,copy=angular.copy,isUndefined=angular.isUndefined;return $browser.addPollFn(function(){var currentCookies=$browser.cookies();lastBrowserCookies!=currentCookies&&(lastBrowserCookies=currentCookies,copy(currentCookies,lastCookies),copy(currentCookies,cookies),runEval&&$rootScope.$apply())})(),runEval=!0,$rootScope.$watch(push),cookies}]).factory("$cookieStore",["$cookies",function($cookies){return{get:function(key){var value=$cookies[key];return value?angular.fromJson(value):value},put:function(key,value){$cookies[key]=angular.toJson(value)},remove:function(key){delete $cookies[key]}}}])}(window,window.angular),function(window,angular,undefined){"use strict";function makeSwipeDirective(directiveName,direction,eventName){ngTouch.directive(directiveName,["$parse","$swipe",function($parse,$swipe){return function(scope,element,attr){function validSwipe(coords){if(!startCoords)return!1;var deltaY=Math.abs(coords.y-startCoords.y),deltaX=(coords.x-startCoords.x)*direction;return valid&&deltaY<75&&deltaX>0&&deltaX>30&&deltaY/deltaX<.3}var startCoords,valid,swipeHandler=$parse(attr[directiveName]);$swipe.bind(element,{start:function(coords,event){startCoords=coords,valid=!0},cancel:function(event){valid=!1},end:function(coords,event){validSwipe(coords)&&scope.$apply(function(){element.triggerHandler(eventName),swipeHandler(scope,{$event:event})})}})}}])}var ngTouch=angular.module("ngTouch",[])
;ngTouch.factory("$swipe",[function(){function getCoordinates(event){var touches=event.touches&&event.touches.length?event.touches:[event],e=event.changedTouches&&event.changedTouches[0]||event.originalEvent&&event.originalEvent.changedTouches&&event.originalEvent.changedTouches[0]||touches[0].originalEvent||touches[0];return{x:e.clientX,y:e.clientY}}return{bind:function(element,eventHandlers){var totalX,totalY,startCoords,lastPos,active=!1;element.on("touchstart mousedown",function(event){startCoords=getCoordinates(event),active=!0,totalX=0,totalY=0,lastPos=startCoords,eventHandlers.start&&eventHandlers.start(startCoords,event)}),element.on("touchcancel",function(event){active=!1,eventHandlers.cancel&&eventHandlers.cancel(event)}),element.on("touchmove mousemove",function(event){if(active&&startCoords){var coords=getCoordinates(event);if(totalX+=Math.abs(coords.x-lastPos.x),totalY+=Math.abs(coords.y-lastPos.y),lastPos=coords,!(totalX<10&&totalY<10))return totalY>totalX?(active=!1,void(eventHandlers.cancel&&eventHandlers.cancel(event))):(event.preventDefault(),void(eventHandlers.move&&eventHandlers.move(coords,event)))}}),element.on("touchend mouseup",function(event){active&&(active=!1,eventHandlers.end&&eventHandlers.end(getCoordinates(event),event))})}}}]),ngTouch.config(["$provide",function($provide){$provide.decorator("ngClickDirective",["$delegate",function($delegate){return $delegate.shift(),$delegate}])}]),ngTouch.directive("ngClick",["$parse","$timeout","$rootElement",function($parse,$timeout,$rootElement){function hit(x1,y1,x2,y2){return Math.abs(x1-x2)<CLICKBUSTER_THRESHOLD&&Math.abs(y1-y2)<CLICKBUSTER_THRESHOLD}function checkAllowableRegions(touchCoordinates,x,y){for(var i=0;i<touchCoordinates.length;i+=2)if(hit(touchCoordinates[i],touchCoordinates[i+1],x,y))return touchCoordinates.splice(i,i+2),!0;return!1}function onClick(event){if(!(Date.now()-lastPreventedTime>PREVENT_DURATION)){var touches=event.touches&&event.touches.length?event.touches:[event],x=touches[0].clientX,y=touches[0].clientY;x<1&&y<1||lastLabelClickCoordinates&&lastLabelClickCoordinates[0]===x&&lastLabelClickCoordinates[1]===y||(lastLabelClickCoordinates&&(lastLabelClickCoordinates=null),"label"===event.target.tagName.toLowerCase()&&(lastLabelClickCoordinates=[x,y]),checkAllowableRegions(touchCoordinates,x,y)||(event.stopPropagation(),event.preventDefault(),event.target&&event.target.blur()))}}function onTouchStart(event){var touches=event.touches&&event.touches.length?event.touches:[event],x=touches[0].clientX,y=touches[0].clientY;touchCoordinates.push(x,y),$timeout(function(){for(var i=0;i<touchCoordinates.length;i+=2)if(touchCoordinates[i]==x&&touchCoordinates[i+1]==y)return void touchCoordinates.splice(i,i+2)},PREVENT_DURATION,!1)}function preventGhostClick(x,y){touchCoordinates||($rootElement[0].addEventListener("click",onClick,!0),$rootElement[0].addEventListener("touchstart",onTouchStart,!0),touchCoordinates=[]),lastPreventedTime=Date.now(),checkAllowableRegions(touchCoordinates,x,y)}var lastPreventedTime,touchCoordinates,lastLabelClickCoordinates,PREVENT_DURATION=2500,CLICKBUSTER_THRESHOLD=25,ACTIVE_CLASS_NAME="ng-click-active";return function(scope,element,attr){function resetState(){tapping=!1,element.removeClass(ACTIVE_CLASS_NAME)}var tapElement,startTime,touchStartX,touchStartY,clickHandler=$parse(attr.ngClick),tapping=!1;element.on("touchstart",function(event){tapping=!0,tapElement=event.target?event.target:event.srcElement,3==tapElement.nodeType&&(tapElement=tapElement.parentNode),element.addClass(ACTIVE_CLASS_NAME),startTime=Date.now();var touches=event.touches&&event.touches.length?event.touches:[event],e=touches[0].originalEvent||touches[0];touchStartX=e.clientX,touchStartY=e.clientY}),element.on("touchmove",function(event){resetState()}),element.on("touchcancel",function(event){resetState()}),element.on("touchend",function(event){var diff=Date.now()-startTime,touches=event.changedTouches&&event.changedTouches.length?event.changedTouches:event.touches&&event.touches.length?event.touches:[event],e=touches[0].originalEvent||touches[0],x=e.clientX,y=e.clientY,dist=Math.sqrt(Math.pow(x-touchStartX,2)+Math.pow(y-touchStartY,2));tapping&&diff<750&&dist<12&&(preventGhostClick(x,y),tapElement&&tapElement.blur(),angular.isDefined(attr.disabled)&&attr.disabled!==!1||element.triggerHandler("click",[event])),resetState()}),element.onclick=function(event){},element.on("click",function(event,touchend){scope.$apply(function(){clickHandler(scope,{$event:touchend||event})})}),element.on("mousedown",function(event){element.addClass(ACTIVE_CLASS_NAME)}),element.on("mousemove mouseup",function(event){element.removeClass(ACTIVE_CLASS_NAME)})}}]),makeSwipeDirective("ngSwipeLeft",-1,"swipeleft"),makeSwipeDirective("ngSwipeRight",1,"swiperight")}(window,window.angular),function(){"use strict";angular.module("ui.mask",[]).value("uiMaskConfig",{maskDefinitions:{9:/\d/,A:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/},clearOnBlur:!0,clearOnBlurPlaceholder:!1,escChar:"\\",eventsToHandle:["input","keyup","click","focus"],addDefaultPlaceholder:!0,allowInvalidValue:!1}).provider("uiMask.Config",function(){var e={};this.maskDefinitions=function(n){return e.maskDefinitions=n},this.clearOnBlur=function(n){return e.clearOnBlur=n},this.clearOnBlurPlaceholder=function(n){return e.clearOnBlurPlaceholder=n},this.eventsToHandle=function(n){return e.eventsToHandle=n},this.addDefaultPlaceholder=function(n){return e.addDefaultPlaceholder=n},this.allowInvalidValue=function(n){return e.allowInvalidValue=n},this.$get=["uiMaskConfig",function(n){var t=n;for(var a in e)angular.isObject(e[a])&&!angular.isArray(e[a])?angular.extend(t[a],e[a]):t[a]=e[a];return t}]}).directive("uiMask",["uiMask.Config",function(e){function n(e){return e===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(e.type||e.href||~e.tabIndex)}return{priority:100,require:"ngModel",restrict:"A",compile:function(){var t=angular.copy(e);return function(e,a,i,r){function l(e){return angular.isDefined(e)?(w(e),K?(h(),d(),!0):f()):f()}function u(e){e&&(T=e,!K||0===a.val().length&&angular.isDefined(i.placeholder)||a.val(m(p(a.val()))))}function o(){return l(i.uiMask)}function c(e){return K?(j=p(e||""),R=g(j),r.$setValidity("mask",R),j.length&&(R||Q.allowInvalidValue)?m(j):void 0):e}function s(e){return K?(j=p(e||""),R=g(j),r.$viewValue=j.length?m(j):"",r.$setValidity("mask",R),R||Q.allowInvalidValue?J?r.$viewValue:j:void 0):e}function f(){return K=!1,v(),angular.isDefined(q)?a.attr("placeholder",q):a.removeAttr("placeholder"),angular.isDefined(W)?a.attr("maxlength",W):a.removeAttr("maxlength"),a.val(r.$modelValue),r.$viewValue=r.$modelValue,!1}function h(){j=F=p(r.$modelValue||""),H=_=m(j),R=g(j),i.maxlength&&a.attr("maxlength",2*S[S.length-1]),!q&&Q.addDefaultPlaceholder&&a.attr("placeholder",T);for(var e=r.$modelValue,n=r.$formatters.length;n--;)e=r.$formatters[n](e);r.$viewValue=e||"",r.$render()}function d(){Z||(a.bind("blur",y),a.bind("mousedown mouseup",V),a.bind("keydown",M),a.bind(Q.eventsToHandle.join(" "),O),Z=!0)}function v(){Z&&(a.unbind("blur",y),a.unbind("mousedown",V),a.unbind("mouseup",V),a.unbind("keydown",M),a.unbind("input",O),a.unbind("keyup",O),a.unbind("click",O),a.unbind("focus",O),Z=!1)}function g(e){return!e.length||e.length>=I}function p(e){var n,t,i="",r=a[0],l=A.slice(),u=L,o=u+C(r),c="";return e=e.toString(),n=0,t=e.length-T.length,angular.forEach(B,function(a){var i=a.position;i>=u&&o>i||(i>=u&&(i+=t),e.substring(i,i+a.value.length)===a.value&&(c+=e.slice(n,i),n=i+a.value.length))}),e=c+e.slice(n),angular.forEach(e.split(""),function(e){l.length&&l[0].test(e)&&(i+=e,l.shift())}),i}function m(e){var n="",t=S.slice();return angular.forEach(T.split(""),function(a,i){e.length&&i===t[0]?(n+=e.charAt(0)||"_",e=e.substr(1),t.shift()):n+=a}),n}function b(e){var n,t=angular.isDefined(i.uiMaskPlaceholder)?i.uiMaskPlaceholder:i.placeholder;return angular.isDefined(t)&&t[e]?t[e]:(n=angular.isDefined(i.uiMaskPlaceholderChar)&&i.uiMaskPlaceholderChar?i.uiMaskPlaceholderChar:"_","space"===n.toLowerCase()?" ":n[0])}function k(){var e,n,t=T.split("");S&&!isNaN(S[0])&&angular.forEach(S,function(e){t[e]="_"}),e=t.join(""),n=e.replace(/[_]+/g,"_").split("_"),n=n.filter(function(e){return""!==e});var a=0;return n.map(function(n){var t=e.indexOf(n,a);return a=t+1,{value:n,position:t}})}function w(e){var n=0;if(S=[],A=[],T="",angular.isString(e)){I=0;var t=!1,a=0,i=e.split(""),r=!1;angular.forEach(i,function(e,i){r?(r=!1,T+=e,n++):Q.escChar===e?r=!0:Q.maskDefinitions[e]?(S.push(n),T+=b(i-a),A.push(Q.maskDefinitions[e]),n++,t||I++,t=!1):"?"===e?(t=!0,a++):(T+=e,n++)})}S.push(S.slice().pop()+1),B=k(),K=S.length>1}function y(){if((Q.clearOnBlur||Q.clearOnBlurPlaceholder&&0===j.length&&i.placeholder)&&(L=0,N=0,R&&0!==j.length||(H="",a.val(""),e.$apply(function(){r.$pristine||r.$setViewValue("")}))),j!==U){var n=a.val(),t=""===j&&n&&angular.isDefined(i.uiMaskPlaceholderChar)&&"space"===i.uiMaskPlaceholderChar;t&&a.val(""),$(a[0]),t&&a.val(n)}U=j}function $(e){var n;if(angular.isFunction(window.Event)&&!e.fireEvent)try{n=new Event("change",{view:window,bubbles:!0,cancelable:!1})}catch(t){n=document.createEvent("HTMLEvents"),n.initEvent("change",!1,!0)}finally{e.dispatchEvent(n)}else"createEvent"in document?(n=document.createEvent("HTMLEvents"),n.initEvent("change",!1,!0),e.dispatchEvent(n)):e.fireEvent&&e.fireEvent("onchange")}function V(e){"mousedown"===e.type?a.bind("mouseout",E):a.unbind("mouseout",E)}function E(){N=C(this),a.unbind("mouseout",E)}function M(e){var n=8===e.which,t=P(this)-1||0,i=90===e.which&&e.ctrlKey;if(n){for(;t>=0;){if(D(t)){x(this,t+1);break}t--}z=-1===t}i&&(a.val(""),e.preventDefault())}function O(n){n=n||{};var t=n.which,i=n.type;if(16!==t&&91!==t){var l,u=a.val(),o=_,c=!1,s=p(u),f=F,h=P(this)||0,d=L||0,v=h-d,g=S[0],b=S[s.length]||S.slice().shift(),k=N||0,w=C(this)>0,y=k>0,$=u.length>o.length||k&&u.length>o.length-k,V=u.length<o.length||k&&u.length===o.length-k,E=t>=37&&40>=t&&n.shiftKey,M=37===t,O=8===t||"keyup"!==i&&V&&-1===v,A=46===t||"keyup"!==i&&V&&0===v&&!y,B=(M||O||"click"===i)&&h>g;if(N=C(this),!E&&(!w||"click"!==i&&"keyup"!==i&&"focus"!==i)){if(O&&z)return a.val(T),e.$apply(function(){r.$setViewValue("")}),void x(this,d);if("input"===i&&V&&!y&&s===f){for(;O&&h>g&&!D(h);)h--;for(;A&&b>h&&-1===S.indexOf(h);)h++;var I=S.indexOf(h);(s=s.substring(0,I)+s.substring(I+1))!==f&&(c=!0)}for(l=m(s),_=l,F=s,!c&&u.length>l.length&&(c=!0),a.val(l),c&&e.$apply(function(){r.$setViewValue(l)}),$&&g>=h&&(h=g+1),B&&h--,h=h>b?b:g>h?g:h;!D(h)&&h>g&&b>h;)h+=B?-1:1;(B&&b>h||$&&!D(d))&&h++,L=h,x(this,h)}}}function D(e){return S.indexOf(e)>-1}function P(e){if(!e)return 0;if(void 0!==e.selectionStart)return e.selectionStart;if(document.selection&&n(a[0])){e.focus();var t=document.selection.createRange();return t.moveStart("character",e.value?-e.value.length:0),t.text.length}return 0}function x(e,t){if(!e)return 0;if(0!==e.offsetWidth&&0!==e.offsetHeight)if(e.setSelectionRange)n(a[0])&&(e.focus(),e.setSelectionRange(t,t));else if(e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",t),i.select()}}function C(e){return e?void 0!==e.selectionStart?e.selectionEnd-e.selectionStart:window.getSelection?window.getSelection().toString().length:document.selection?document.selection.createRange().text.length:0:0}var S,A,T,B,I,j,H,R,_,F,L,N,z,K=!1,Z=!1,q=i.placeholder,W=i.maxlength,G=r.$isEmpty;r.$isEmpty=function(e){return G(K?p(e||""):e)};var J=!1;i.$observe("modelViewValue",function(e){"true"===e&&(J=!0)}),i.$observe("allowInvalidValue",function(e){Q.allowInvalidValue=""===e||!!e,c(r.$modelValue)});var Q={};i.uiOptions?(Q=e.$eval("["+i.uiOptions+"]"),Q=angular.isObject(Q[0])?function(e,n){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(void 0===n[t]?n[t]=angular.copy(e[t]):angular.isObject(n[t])&&!angular.isArray(n[t])&&(n[t]=angular.extend({},e[t],n[t])));return n}(t,Q[0]):t):Q=t,i.$observe("uiMask",l),angular.isDefined(i.uiMaskPlaceholder)?i.$observe("uiMaskPlaceholder",u):i.$observe("placeholder",u),angular.isDefined(i.uiMaskPlaceholderChar)&&i.$observe("uiMaskPlaceholderChar",o),r.$formatters.unshift(c),r.$parsers.unshift(s);var U=a.val();a.bind("mousedown mouseup",V),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var n=Object(this),t=n.length>>>0;if(0===t)return-1;var a=0;if(arguments.length>1&&(a=Number(arguments[1]),a!==a?a=0:0!==a&&a!==1/0&&a!==-(1/0)&&(a=(a>0||-1)*Math.floor(Math.abs(a)))),a>=t)return-1;for(var i=a>=0?a:Math.max(t-Math.abs(a),0);t>i;i++)if(i in n&&n[i]===e)return i;return-1})}}}}])}(),function(){"use strict";angular.module("toaster",[]).constant("toasterConfig",{limit:0,"tap-to-dismiss":!0,"close-button":!1,"newest-on-top":!0,"time-out":5e3,"icon-classes":{error:"toast-error",info:"toast-info",wait:"toast-wait",success:"toast-success",warning:"toast-warning"},"body-output-type":"","body-template":"toasterBodyTmpl.html","icon-class":"toast-info","position-class":"toast-top-right","title-class":"toast-title","message-class":"toast-message","prevent-duplicates":!1,"mouseover-timer-stop":!0}).service("toaster",["$rootScope","toasterConfig",function(t,e){this.pop=function(e,o,s,i,a,n,r,c,l,u,d){if(angular.isObject(e)){var p=e;this.toast={type:p.type,title:p.title,body:p.body,timeout:p.timeout,bodyOutputType:p.bodyOutputType,clickHandler:p.clickHandler,showCloseButton:p.showCloseButton,uid:p.toastId,onHideCallback:p.onHideCallback,directiveData:p.directiveData},l=p.toastId,r=p.toasterId}else this.toast={type:e,title:o,body:s,timeout:i,bodyOutputType:a,clickHandler:n,showCloseButton:c,uid:l,onHideCallback:u,directiveData:d};t.$emit("toaster-newToast",r,l)},this.clear=function(e,o){t.$emit("toaster-clearToasts",e,o)};for(var s in e["icon-classes"])this[s]=function(t){return function(e,o,s,i,a,n,r,c,l,u){angular.isString(e)?this.pop(t,e,o,s,i,a,n,r,c,l,u):this.pop(angular.extend(e,{type:t}))}}(s)}]).factory("toasterEventRegistry",["$rootScope",function(t){var e,o=null,s=null,i=[],a=[];return e={setup:function(){o||(o=t.$on("toaster-newToast",function(t,e,o){for(var s=0,a=i.length;a>s;s++)i[s](t,e,o)})),s||(s=t.$on("toaster-clearToasts",function(t,e,o){for(var s=0,i=a.length;i>s;s++)a[s](t,e,o)}))},subscribeToNewToastEvent:function(t){i.push(t)},subscribeToClearToastsEvent:function(t){a.push(t)},unsubscribeToNewToastEvent:function(t){var e=i.indexOf(t);e>=0&&i.splice(e,1),0===i.length&&(o(),o=null)},unsubscribeToClearToastsEvent:function(t){var e=a.indexOf(t);e>=0&&a.splice(e,1),0===a.length&&(s(),s=null)}},{setup:e.setup,subscribeToNewToastEvent:e.subscribeToNewToastEvent,subscribeToClearToastsEvent:e.subscribeToClearToastsEvent,unsubscribeToNewToastEvent:e.unsubscribeToNewToastEvent,unsubscribeToClearToastsEvent:e.unsubscribeToClearToastsEvent}}]).directive("directiveTemplate",["$compile","$injector",function(t,e){return{restrict:"A",scope:{directiveName:"@directiveName",directiveData:"@directiveData"},replace:!0,link:function(o,s,i){o.$watch("directiveName",function(a){if(angular.isUndefined(a)||a.length<=0)throw new Error("A valid directive name must be provided via the toast body argument when using bodyOutputType: directive");if(!e.has(i.$normalize(a)+"Directive"))throw new Error(a+" could not be found.");o.directiveData&&(o.directiveData=angular.fromJson(o.directiveData));var r=t("<div "+a+"></div>")(o);s.append(r)})}}}]).directive("toasterContainer",["$parse","$rootScope","$interval","$sce","toasterConfig","toaster","toasterEventRegistry",function(t,e,o,s,i,a,n){return{replace:!0,restrict:"EA",scope:!0,link:function(e,r,c){function l(t,s){t.timeoutPromise=o(function(){e.removeToast(t.id)},s,1)}function u(o,i){if(o.type=m["icon-classes"][o.type],o.type||(o.type=m["icon-class"]),m["prevent-duplicates"]===!0)if(v(i)){if(e.toasters.length>0&&e.toasters[e.toasters.length-1].body===o.body)return}else{var a,n;for(a=0,n=e.toasters.length;n>a;a++)e.toasters[a].uid===i&&(d(a),a--,n=e.toasters.length)}o.id=++f,v(i)||(o.uid=i);var r=m["close-button"];if("boolean"==typeof o.showCloseButton);else if("boolean"==typeof r)o.showCloseButton=r;else if("object"==typeof r){var c=r[o.type];void 0!==c&&null!==c&&(o.showCloseButton=c)}else o.showCloseButton=!1;switch(o.bodyOutputType=o.bodyOutputType||m["body-output-type"],o.bodyOutputType){case"trustedHtml":o.html=s.trustAsHtml(o.body);break;case"template":o.bodyTemplate=o.body||m["body-template"];break;case"templateWithData":var l=t(o.body||m["body-template"]),u=l(e);o.bodyTemplate=u.template,o.data=u.data;break;case"directive":o.html=o.body}e.configureTimer(o),m["newest-on-top"]===!0?(e.toasters.unshift(o),m.limit>0&&e.toasters.length>m.limit&&e.toasters.pop()):(e.toasters.push(o),m.limit>0&&e.toasters.length>m.limit&&e.toasters.shift())}function d(t){var s=e.toasters[t];s&&(s.timeoutPromise&&o.cancel(s.timeoutPromise),e.toasters.splice(t,1),angular.isFunction(s.onHideCallback)&&s.onHideCallback())}function p(t){for(var o=e.toasters.length-1;o>=0;o--)v(t)?d(o):e.toasters[o].uid==t&&d(o)}function v(t){return angular.isUndefined(t)||null===t}var m,f=0;m=angular.extend({},i,e.$eval(c.toasterOptions)),e.config={toasterId:m["toaster-id"],position:m["position-class"],title:m["title-class"],message:m["message-class"],tap:m["tap-to-dismiss"],closeButton:m["close-button"],animation:m["animation-class"],mouseoverTimer:m["mouseover-timer-stop"]},e.$on("$destroy",function(){n.unsubscribeToNewToastEvent(e._onNewToast),n.unsubscribeToClearToastsEvent(e._onClearToasts)}),e.configureTimer=function(t){var e=angular.isNumber(t.timeout)?t.timeout:m["time-out"];"object"==typeof e&&(e=e[t.type]),e>0&&l(t,e)},e.removeToast=function(t){var o,s;for(o=0,s=e.toasters.length;s>o;o++)if(e.toasters[o].id===t){d(o);break}},e.toasters=[],e._onNewToast=function(t,o,s){(v(e.config.toasterId)&&v(o)||!v(e.config.toasterId)&&!v(o)&&e.config.toasterId==o)&&u(a.toast,s)},e._onClearToasts=function(t,o,s){("*"==o||v(e.config.toasterId)&&v(o)||!v(e.config.toasterId)&&!v(o)&&e.config.toasterId==o)&&p(s)},n.setup(),n.subscribeToNewToastEvent(e._onNewToast),n.subscribeToClearToastsEvent(e._onClearToasts)},controller:["$scope","$element","$attrs",function(t){t.stopTimer=function(e){t.config.mouseoverTimer===!0&&e.timeoutPromise&&(o.cancel(e.timeoutPromise),e.timeoutPromise=null)},t.restartTimer=function(e){t.config.mouseoverTimer===!0?e.timeoutPromise||t.configureTimer(e):null===e.timeoutPromise&&t.removeToast(e.id)},t.click=function(e,o){if(t.config.tap===!0||e.showCloseButton===!0&&o===!0){var s=!0;e.clickHandler&&(angular.isFunction(e.clickHandler)?s=e.clickHandler(e,o):angular.isFunction(t.$parent.$eval(e.clickHandler))?s=t.$parent.$eval(e.clickHandler)(e,o):console.log("TOAST-NOTE: Your click handler is not inside a parent scope of toaster-container.")),s&&t.removeToast(e.id)}}}],template:'<div id="toast-container" ng-class="[config.position, config.animation]"><div ng-repeat="toaster in toasters" class="toast" ng-class="toaster.type" ng-click="click(toaster)" ng-mouseover="stopTimer(toaster)" ng-mouseout="restartTimer(toaster)"><button type="button" class="toast-close-button" ng-show="toaster.showCloseButton" ng-click="click(toaster, true)">&times;</button><div ng-class="config.title">{{toaster.title}}</div><div ng-class="config.message" ng-switch on="toaster.bodyOutputType"><div ng-switch-when="trustedHtml" ng-bind-html="toaster.html"></div><div ng-switch-when="template"><div ng-include="toaster.bodyTemplate"></div></div><div ng-switch-when="templateWithData"><div ng-include="toaster.bodyTemplate"></div></div><div ng-switch-when="directive"><div directive-template directive-name="{{toaster.html}}" directive-data="{{toaster.directiveData}}"></div></div><div ng-switch-default >{{toaster.body}}</div></div></div></div>'}}])}(window,document),function(root,factory){if("function"==typeof define&&define.amd)define(["moment","jquery","exports"],function(momentjs,$,exports){root.daterangepicker=factory(root,exports,momentjs,$)});else if("undefined"!=typeof exports){var momentjs=require("moment"),jQuery="undefined"!=typeof window?window.jQuery:void 0;if(!jQuery)try{jQuery=require("jquery"),jQuery.fn||(jQuery.fn={})}catch(err){if(!jQuery)throw new Error("jQuery dependency not found")}factory(root,exports,momentjs,jQuery)}else root.daterangepicker=factory(root,{},root.moment||moment,root.jQuery||root.Zepto||root.ender||root.$)}(this||{},function(root,daterangepicker,moment,$){var DateRangePicker=function(element,options,cb){if(this.parentEl="body",this.element=$(element),this.startDate=moment().startOf("day"),this.endDate=moment().endOf("day"),this.minDate=!1,this.maxDate=!1,this.dateLimit=!1,this.autoApply=!1,this.singleDatePicker=!1,this.showDropdowns=!1,this.showWeekNumbers=!1,this.timePicker=!1,this.timePicker24Hour=!1,this.timePickerIncrement=1,this.timePickerSeconds=!1,this.linkedCalendars=!0,this.autoUpdateInput=!0,this.ranges={},this.opens="right",this.element.hasClass("pull-right")&&(this.opens="left"),this.drops="down",this.element.hasClass("dropup")&&(this.drops="up"),this.buttonClasses="btn btn-sm",this.applyClass="btn-success",this.cancelClass="btn-default",this.locale={format:"MM/DD/YYYY",separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:moment.weekdaysMin(),monthNames:moment.monthsShort(),firstDay:moment.localeData().firstDayOfWeek()},this.callback=function(){},this.isShowing=!1,this.leftCalendar={},this.rightCalendar={},"object"==typeof options&&null!==options||(options={}),options=$.extend(this.element.data(),options),"string"!=typeof options.template&&(options.template='<div class="daterangepicker dropdown-menu"><div class="calendar left"><div class="daterangepicker_input"><input class="input-mini" type="text" name="daterangepicker_start" value="" /><i class="fa fa-calendar glyphicon glyphicon-calendar"></i><div class="calendar-time"><div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div></div><div class="calendar right"><div class="daterangepicker_input"><input class="input-mini" type="text" name="daterangepicker_end" value="" /><i class="fa fa-calendar glyphicon glyphicon-calendar"></i><div class="calendar-time"><div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div></div><div class="ranges"><div class="range_inputs"><button class="applyBtn" disabled="disabled" type="button"></button> <button class="cancelBtn" type="button"></button></div></div></div>'),this.parentEl=$(options.parentEl&&$(options.parentEl).length?options.parentEl:this.parentEl),this.container=$(options.template).appendTo(this.parentEl),"object"==typeof options.locale&&("string"==typeof options.locale.format&&(this.locale.format=options.locale.format),"string"==typeof options.locale.separator&&(this.locale.separator=options.locale.separator),"object"==typeof options.locale.daysOfWeek&&(this.locale.daysOfWeek=options.locale.daysOfWeek.slice()),"object"==typeof options.locale.monthNames&&(this.locale.monthNames=options.locale.monthNames.slice()),"number"==typeof options.locale.firstDay&&(this.locale.firstDay=options.locale.firstDay),"string"==typeof options.locale.applyLabel&&(this.locale.applyLabel=options.locale.applyLabel),"string"==typeof options.locale.cancelLabel&&(this.locale.cancelLabel=options.locale.cancelLabel),"string"==typeof options.locale.weekLabel&&(this.locale.weekLabel=options.locale.weekLabel),"string"==typeof options.locale.customRangeLabel&&(this.locale.customRangeLabel=options.locale.customRangeLabel)),"string"==typeof options.startDate&&(this.startDate=moment(options.startDate,this.locale.format)),"string"==typeof options.endDate&&(this.endDate=moment(options.endDate,this.locale.format)),"string"==typeof options.minDate&&(this.minDate=moment(options.minDate,this.locale.format)),"string"==typeof options.maxDate&&(this.maxDate=moment(options.maxDate,this.locale.format)),"object"==typeof options.startDate&&(this.startDate=moment(options.startDate)),"object"==typeof options.endDate&&(this.endDate=moment(options.endDate)),"object"==typeof options.minDate&&(this.minDate=moment(options.minDate)),"object"==typeof options.maxDate&&(this.maxDate=moment(options.maxDate)),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone()),"string"==typeof options.applyClass&&(this.applyClass=options.applyClass),"string"==typeof options.cancelClass&&(this.cancelClass=options.cancelClass),"object"==typeof options.dateLimit&&(this.dateLimit=options.dateLimit),"string"==typeof options.opens&&(this.opens=options.opens),"string"==typeof options.drops&&(this.drops=options.drops),"boolean"==typeof options.showWeekNumbers&&(this.showWeekNumbers=options.showWeekNumbers),"string"==typeof options.buttonClasses&&(this.buttonClasses=options.buttonClasses),"object"==typeof options.buttonClasses&&(this.buttonClasses=options.buttonClasses.join(" ")),"boolean"==typeof options.showDropdowns&&(this.showDropdowns=options.showDropdowns),"boolean"==typeof options.singleDatePicker&&(this.singleDatePicker=options.singleDatePicker,this.singleDatePicker&&(this.endDate=this.startDate.clone())),"boolean"==typeof options.timePicker&&(this.timePicker=options.timePicker),"boolean"==typeof options.timePickerSeconds&&(this.timePickerSeconds=options.timePickerSeconds),"number"==typeof options.timePickerIncrement&&(this.timePickerIncrement=options.timePickerIncrement),"boolean"==typeof options.timePicker24Hour&&(this.timePicker24Hour=options.timePicker24Hour),"boolean"==typeof options.autoApply&&(this.autoApply=options.autoApply),"boolean"==typeof options.autoUpdateInput&&(this.autoUpdateInput=options.autoUpdateInput),"boolean"==typeof options.linkedCalendars&&(this.linkedCalendars=options.linkedCalendars),"function"==typeof options.isInvalidDate&&(this.isInvalidDate=options.isInvalidDate),0!=this.locale.firstDay)for(var iterator=this.locale.firstDay;iterator>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),iterator--;var start,end,range;if(void 0===options.startDate&&void 0===options.endDate&&$(this.element).is("input[type=text]")){var val=$(this.element).val(),split=val.split(this.locale.separator);start=end=null,2==split.length?(start=moment(split[0],this.locale.format),end=moment(split[1],this.locale.format)):this.singleDatePicker&&""!==val&&(start=moment(val,this.locale.format),end=moment(val,this.locale.format)),null!==start&&null!==end&&(this.setStartDate(start),this.setEndDate(end))}if("object"==typeof options.ranges){for(range in options.ranges){start="string"==typeof options.ranges[range][0]?moment(options.ranges[range][0],this.locale.format):moment(options.ranges[range][0]),end="string"==typeof options.ranges[range][1]?moment(options.ranges[range][1],this.locale.format):moment(options.ranges[range][1]),this.minDate&&start.isBefore(this.minDate)&&(start=this.minDate.clone());var maxDate=this.maxDate;if(this.dateLimit&&start.clone().add(this.dateLimit).isAfter(maxDate)&&(maxDate=start.clone().add(this.dateLimit)),maxDate&&end.isAfter(maxDate)&&(end=maxDate.clone()),!(this.minDate&&end.isBefore(this.minDate)||maxDate&&start.isAfter(maxDate))){var elem=document.createElement("textarea");elem.innerHTML=range;var rangeHtml=elem.value;this.ranges[rangeHtml]=[start,end]}}var list="<ul>";for(range in this.ranges)list+="<li>"+range+"</li>";list+="<li>"+this.locale.customRangeLabel+"</li>",list+="</ul>",this.container.find(".ranges").prepend(list)}if("function"==typeof cb&&(this.callback=cb),this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.endOf("day"),this.container.find(".calendar-time").hide()),this.timePicker&&this.autoApply&&(this.autoApply=!1),this.autoApply&&"object"!=typeof options.ranges?this.container.find(".ranges").hide():this.autoApply&&this.container.find(".applyBtn, .cancelBtn").addClass("hide"),this.singleDatePicker&&(this.container.addClass("single"),this.container.find(".calendar.left").addClass("single"),this.container.find(".calendar.left").show(),this.container.find(".calendar.right").hide(),this.container.find(".daterangepicker_input input, .daterangepicker_input i").hide(),this.timePicker||this.container.find(".ranges").hide()),void 0!==options.ranges||this.singleDatePicker||this.container.addClass("show-calendar"),this.container.addClass("opens"+this.opens),void 0!==options.ranges&&"right"==this.opens){var ranges=this.container.find(".ranges"),html=ranges.clone();ranges.remove(),this.container.find(".calendar.left").parent().prepend(html)}this.container.find(".applyBtn, .cancelBtn").addClass(this.buttonClasses),this.applyClass.length&&this.container.find(".applyBtn").addClass(this.applyClass),this.cancelClass.length&&this.container.find(".cancelBtn").addClass(this.cancelClass),this.container.find(".applyBtn").html(this.locale.applyLabel),this.container.find(".cancelBtn").html(this.locale.cancelLabel),this.container.find(".calendar").on("click.daterangepicker",".prev",$.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",$.proxy(this.clickNext,this)).on("click.daterangepicker","td.available",$.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",$.proxy(this.hoverDate,this)).on("mouseleave.daterangepicker","td.available",$.proxy(this.updateFormInputs,this)).on("change.daterangepicker","select.yearselect",$.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.monthselect",$.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.secondselect,select.ampmselect",$.proxy(this.timeChanged,this)).on("click.daterangepicker",".daterangepicker_input input",$.proxy(this.showCalendars,this)).on("change.daterangepicker",".daterangepicker_input input",$.proxy(this.formInputsChanged,this)),this.container.find(".ranges").on("click.daterangepicker","button.applyBtn",$.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",$.proxy(this.clickCancel,this)).on("click.daterangepicker","li",$.proxy(this.clickRange,this)).on("mouseenter.daterangepicker","li",$.proxy(this.hoverRange,this)).on("mouseleave.daterangepicker","li",$.proxy(this.updateFormInputs,this)),this.element.is("input")?this.element.on({"click.daterangepicker":$.proxy(this.show,this),"focus.daterangepicker":$.proxy(this.show,this),"keyup.daterangepicker":$.proxy(this.elementChanged,this),"keydown.daterangepicker":$.proxy(this.keydown,this)}):this.element.on("click.daterangepicker",$.proxy(this.toggle,this)),this.element.is("input")&&!this.singleDatePicker&&this.autoUpdateInput?(this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.element.trigger("change")):this.element.is("input")&&this.autoUpdateInput&&(this.element.val(this.startDate.format(this.locale.format)),this.element.trigger("change"))};return DateRangePicker.prototype={constructor:DateRangePicker,setStartDate:function(startDate){"string"==typeof startDate&&(this.startDate=moment(startDate,this.locale.format)),"object"==typeof startDate&&(this.startDate=moment(startDate)),this.timePicker||(this.startDate=this.startDate.startOf("day")),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate),this.maxDate&&this.startDate.isAfter(this.maxDate)&&(this.startDate=this.maxDate),this.isShowing||this.updateElement(),this.updateMonthsInView()},setEndDate:function(endDate){"string"==typeof endDate&&(this.endDate=moment(endDate,this.locale.format)),"object"==typeof endDate&&(this.endDate=moment(endDate)),this.timePicker||(this.endDate=this.endDate.endOf("day")),
this.timePicker&&this.timePickerIncrement&&this.endDate.minute(Math.round(this.endDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.endDate.isBefore(this.startDate)&&(this.endDate=this.startDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate),this.dateLimit&&this.startDate.clone().add(this.dateLimit).isBefore(this.endDate)&&(this.endDate=this.startDate.clone().add(this.dateLimit)),this.isShowing||this.updateElement(),this.updateMonthsInView()},isInvalidDate:function(){return!1},updateView:function(){this.timePicker&&(this.renderTimePicker("left"),this.renderTimePicker("right"),this.endDate?this.container.find(".right .calendar-time select").removeAttr("disabled").removeClass("disabled"):this.container.find(".right .calendar-time select").attr("disabled","disabled").addClass("disabled")),this.endDate?(this.container.find('input[name="daterangepicker_end"]').removeClass("active"),this.container.find('input[name="daterangepicker_start"]').addClass("active")):(this.container.find('input[name="daterangepicker_end"]').addClass("active"),this.container.find('input[name="daterangepicker_start"]').removeClass("active")),this.updateMonthsInView(),this.updateCalendars(),this.updateFormInputs()},updateMonthsInView:function(){if(this.endDate){if(!this.singleDatePicker&&this.leftCalendar.month&&this.rightCalendar.month&&(this.startDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.startDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM"))&&(this.endDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.endDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM")))return;this.leftCalendar.month=this.startDate.clone().date(2),this.linkedCalendars||this.endDate.month()==this.startDate.month()&&this.endDate.year()==this.startDate.year()?this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"):this.rightCalendar.month=this.endDate.clone().date(2)}else this.leftCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&this.rightCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&(this.leftCalendar.month=this.startDate.clone().date(2),this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"))},updateCalendars:function(){if(this.timePicker){var hour,minute,second;if(this.endDate){if(hour=parseInt(this.container.find(".left .hourselect").val(),10),minute=parseInt(this.container.find(".left .minuteselect").val(),10),second=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0,!this.timePicker24Hour){var ampm=this.container.find(".left .ampmselect").val();"PM"===ampm&&hour<12&&(hour+=12),"AM"===ampm&&12===hour&&(hour=0)}}else if(hour=parseInt(this.container.find(".right .hourselect").val(),10),minute=parseInt(this.container.find(".right .minuteselect").val(),10),second=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0,!this.timePicker24Hour){var ampm=this.container.find(".right .ampmselect").val();"PM"===ampm&&hour<12&&(hour+=12),"AM"===ampm&&12===hour&&(hour=0)}this.leftCalendar.month.hour(hour).minute(minute).second(second),this.rightCalendar.month.hour(hour).minute(minute).second(second)}if(this.renderCalendar("left"),this.renderCalendar("right"),this.container.find(".ranges li").removeClass("active"),null!=this.endDate){var customRange=!0,i=0;for(var range in this.ranges){if(this.timePicker){if(this.startDate.isSame(this.ranges[range][0])&&this.endDate.isSame(this.ranges[range][1])){customRange=!1,this.chosenLabel=this.container.find(".ranges li:eq("+i+")").addClass("active").html();break}}else if(this.startDate.format("YYYY-MM-DD")==this.ranges[range][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[range][1].format("YYYY-MM-DD")){customRange=!1,this.chosenLabel=this.container.find(".ranges li:eq("+i+")").addClass("active").html();break}i++}customRange&&(this.chosenLabel=this.container.find(".ranges li:last").addClass("active").html(),this.showCalendars())}},renderCalendar:function(side){var calendar="left"==side?this.leftCalendar:this.rightCalendar,month=calendar.month.month(),year=calendar.month.year(),hour=calendar.month.hour(),minute=calendar.month.minute(),second=calendar.month.second(),daysInMonth=moment([year,month]).daysInMonth(),firstDay=moment([year,month,1]),lastDay=moment([year,month,daysInMonth]),lastMonth=moment(firstDay).subtract(1,"month").month(),lastYear=moment(firstDay).subtract(1,"month").year(),daysInLastMonth=moment([lastYear,lastMonth]).daysInMonth(),dayOfWeek=firstDay.day(),calendar=[];calendar.firstDay=firstDay,calendar.lastDay=lastDay;for(var i=0;i<6;i++)calendar[i]=[];var startDay=daysInLastMonth-dayOfWeek+this.locale.firstDay+1;startDay>daysInLastMonth&&(startDay-=7),dayOfWeek==this.locale.firstDay&&(startDay=daysInLastMonth-6);for(var col,row,curDate=moment([lastYear,lastMonth,startDay,12,minute,second]),i=0,col=0,row=0;i<42;i++,col++,curDate=moment(curDate).add(24,"hour"))i>0&&col%7==0&&(col=0,row++),calendar[row][col]=curDate.clone().hour(hour).minute(minute).second(second),curDate.hour(12),this.minDate&&calendar[row][col].format("YYYY-MM-DD")==this.minDate.format("YYYY-MM-DD")&&calendar[row][col].isBefore(this.minDate)&&"left"==side&&(calendar[row][col]=this.minDate.clone()),this.maxDate&&calendar[row][col].format("YYYY-MM-DD")==this.maxDate.format("YYYY-MM-DD")&&calendar[row][col].isAfter(this.maxDate)&&"right"==side&&(calendar[row][col]=this.maxDate.clone());"left"==side?this.leftCalendar.calendar=calendar:this.rightCalendar.calendar=calendar;var minDate="left"==side?this.minDate:this.startDate,maxDate=this.maxDate,html=("left"==side?this.startDate:this.endDate,'<table class="table-condensed">');html+="<thead>",html+="<tr>",this.showWeekNumbers&&(html+="<th></th>"),html+=minDate&&!minDate.isBefore(calendar.firstDay)||this.linkedCalendars&&"left"!=side?"<th></th>":'<th class="prev available"><i class="fa fa-chevron-left glyphicon glyphicon-chevron-left"></i></th>';var dateHtml=this.locale.monthNames[calendar[1][1].month()]+calendar[1][1].format(" YYYY");if(this.showDropdowns){for(var currentMonth=calendar[1][1].month(),currentYear=calendar[1][1].year(),maxYear=maxDate&&maxDate.year()||currentYear+5,minYear=minDate&&minDate.year()||currentYear-50,inMinYear=currentYear==minYear,inMaxYear=currentYear==maxYear,monthHtml='<select class="monthselect">',m=0;m<12;m++)monthHtml+=(!inMinYear||m>=minDate.month())&&(!inMaxYear||m<=maxDate.month())?"<option value='"+m+"'"+(m===currentMonth?" selected='selected'":"")+">"+this.locale.monthNames[m]+"</option>":"<option value='"+m+"'"+(m===currentMonth?" selected='selected'":"")+" disabled='disabled'>"+this.locale.monthNames[m]+"</option>";monthHtml+="</select>";for(var yearHtml='<select class="yearselect">',y=minYear;y<=maxYear;y++)yearHtml+='<option value="'+y+'"'+(y===currentYear?' selected="selected"':"")+">"+y+"</option>";yearHtml+="</select>",dateHtml=monthHtml+yearHtml}if(html+='<th colspan="5" class="month">'+dateHtml+"</th>",html+=maxDate&&!maxDate.isAfter(calendar.lastDay)||this.linkedCalendars&&"right"!=side&&!this.singleDatePicker?"<th></th>":'<th class="next available"><i class="fa fa-chevron-right glyphicon glyphicon-chevron-right"></i></th>',html+="</tr>",html+="<tr>",this.showWeekNumbers&&(html+='<th class="week">'+this.locale.weekLabel+"</th>"),$.each(this.locale.daysOfWeek,function(index,dayOfWeek){html+="<th>"+dayOfWeek+"</th>"}),html+="</tr>",html+="</thead>",html+="<tbody>",null==this.endDate&&this.dateLimit){var maxLimit=this.startDate.clone().add(this.dateLimit).endOf("day");maxDate&&!maxLimit.isBefore(maxDate)||(maxDate=maxLimit)}for(var row=0;row<6;row++){html+="<tr>",this.showWeekNumbers&&(html+='<td class="week">'+calendar[row][0].week()+"</td>");for(var col=0;col<7;col++){var classes=[];calendar[row][col].isSame(new Date,"day")&&classes.push("today"),calendar[row][col].isoWeekday()>5&&classes.push("weekend"),calendar[row][col].month()!=calendar[1][1].month()&&classes.push("off"),this.minDate&&calendar[row][col].isBefore(this.minDate,"day")&&classes.push("off","disabled"),maxDate&&calendar[row][col].isAfter(maxDate,"day")&&classes.push("off","disabled"),this.isInvalidDate(calendar[row][col])&&classes.push("off","disabled"),calendar[row][col].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&classes.push("active","start-date"),null!=this.endDate&&calendar[row][col].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&classes.push("active","end-date"),null!=this.endDate&&calendar[row][col]>this.startDate&&calendar[row][col]<this.endDate&&classes.push("in-range");for(var cname="",disabled=!1,i=0;i<classes.length;i++)cname+=classes[i]+" ","disabled"==classes[i]&&(disabled=!0);disabled||(cname+="available"),html+='<td class="'+cname.replace(/^\s+|\s+$/g,"")+'" data-title="r'+row+"c"+col+'">'+calendar[row][col].date()+"</td>"}html+="</tr>"}html+="</tbody>",html+="</table>",this.container.find(".calendar."+side+" .calendar-table").html(html)},renderTimePicker:function(side){var html,selected,minDate,maxDate=this.maxDate;if(!this.dateLimit||this.maxDate&&!this.startDate.clone().add(this.dateLimit).isAfter(this.maxDate)||(maxDate=this.startDate.clone().add(this.dateLimit)),"left"==side)selected=this.startDate.clone(),minDate=this.minDate;else if("right"==side){selected=this.endDate?this.endDate.clone():this.startDate.clone(),minDate=this.startDate;var timeSelector=this.container.find(".calendar.right .calendar-time div");""!=timeSelector.html()&&(selected.hour(timeSelector.find(".hourselect option:selected").val()||selected.hour()),selected.minute(timeSelector.find(".minuteselect option:selected").val()||selected.minute()),selected.second(timeSelector.find(".secondselect option:selected").val()||selected.second()),selected.isAfter(maxDate)&&(selected=maxDate.clone()))}html='<select class="hourselect">';for(var start=this.timePicker24Hour?0:1,end=this.timePicker24Hour?23:12,i=start;i<=end;i++){var i_in_24=i;this.timePicker24Hour||(i_in_24=selected.hour()>=12?12==i?12:i+12:12==i?0:i);var time=selected.clone().hour(i_in_24),disabled=!1;minDate&&time.minute(59).isBefore(minDate)&&(disabled=!0),maxDate&&time.minute(0).isAfter(maxDate)&&(disabled=!0),html+=i_in_24!=selected.hour()||disabled?disabled?'<option value="'+i+'" disabled="disabled" class="disabled">'+i+"</option>":'<option value="'+i+'">'+i+"</option>":'<option value="'+i+'" selected="selected">'+i+"</option>"}html+="</select> ",html+=': <select class="minuteselect">';for(var i=0;i<60;i+=this.timePickerIncrement){var padded=i<10?"0"+i:i,time=selected.clone().minute(i),disabled=!1;minDate&&time.second(59).isBefore(minDate)&&(disabled=!0),maxDate&&time.second(0).isAfter(maxDate)&&(disabled=!0),html+=selected.minute()!=i||disabled?disabled?'<option value="'+i+'" disabled="disabled" class="disabled">'+padded+"</option>":'<option value="'+i+'">'+padded+"</option>":'<option value="'+i+'" selected="selected">'+padded+"</option>"}if(html+="</select> ",this.timePickerSeconds){html+=': <select class="secondselect">';for(var i=0;i<60;i++){var padded=i<10?"0"+i:i,time=selected.clone().second(i),disabled=!1;minDate&&time.isBefore(minDate)&&(disabled=!0),maxDate&&time.isAfter(maxDate)&&(disabled=!0),html+=selected.second()!=i||disabled?disabled?'<option value="'+i+'" disabled="disabled" class="disabled">'+padded+"</option>":'<option value="'+i+'">'+padded+"</option>":'<option value="'+i+'" selected="selected">'+padded+"</option>"}html+="</select> "}if(!this.timePicker24Hour){html+='<select class="ampmselect">';var am_html="",pm_html="";minDate&&selected.clone().hour(12).minute(0).second(0).isBefore(minDate)&&(am_html=' disabled="disabled" class="disabled"'),maxDate&&selected.clone().hour(0).minute(0).second(0).isAfter(maxDate)&&(pm_html=' disabled="disabled" class="disabled"'),html+=selected.hour()>=12?'<option value="AM"'+am_html+'>AM</option><option value="PM" selected="selected"'+pm_html+">PM</option>":'<option value="AM" selected="selected"'+am_html+'>AM</option><option value="PM"'+pm_html+">PM</option>",html+="</select>"}this.container.find(".calendar."+side+" .calendar-time div").html(html)},updateFormInputs:function(){this.container.find("input[name=daterangepicker_start]").is(":focus")||this.container.find("input[name=daterangepicker_end]").is(":focus")||(this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.locale.format)),this.endDate&&this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.locale.format)),this.singleDatePicker||this.endDate&&(this.startDate.isBefore(this.endDate)||this.startDate.isSame(this.endDate))?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled"))},move:function(){var containerTop,parentOffset={top:0,left:0},parentRightEdge=$(window).width();this.parentEl.is("body")||(parentOffset={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()},parentRightEdge=this.parentEl[0].clientWidth+this.parentEl.offset().left),containerTop="up"==this.drops?this.element.offset().top-this.container.outerHeight()-parentOffset.top:this.element.offset().top+this.element.outerHeight()-parentOffset.top,this.container["up"==this.drops?"addClass":"removeClass"]("dropup"),"left"==this.opens?(this.container.css({top:containerTop,right:parentRightEdge-this.element.offset().left-this.element.outerWidth(),left:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):"center"==this.opens?(this.container.css({top:containerTop,left:this.element.offset().left-parentOffset.left+this.element.outerWidth()/2-this.container.outerWidth()/2,right:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):(this.container.css({top:containerTop,left:this.element.offset().left-parentOffset.left,right:"auto"}),this.container.offset().left+this.container.outerWidth()>$(window).width()&&this.container.css({left:"auto",right:0}))},show:function(e){this.isShowing||(this._outsideClickProxy=$.proxy(function(e){this.outsideClick(e)},this),$(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("touchend.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy),$(window).on("resize.daterangepicker",$.proxy(function(e){this.move(e)},this)),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.updateView(),this.container.show(),this.move(),this.element.trigger("show.daterangepicker",this),this.isShowing=!0)},hide:function(e){this.isShowing&&(this.endDate||(this.startDate=this.oldStartDate.clone(),this.endDate=this.oldEndDate.clone()),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.callback(this.startDate,this.endDate,this.chosenLabel),this.updateElement(),$(document).off(".daterangepicker"),$(window).off(".daterangepicker"),this.container.hide(),this.element.trigger("hide.daterangepicker",this),this.isShowing=!1)},toggle:function(e){this.isShowing?this.hide():this.show()},outsideClick:function(e){var target=$(e.target);"focusin"==e.type||target.closest(this.element).length||target.closest(this.container).length||target.closest(".calendar-table").length||this.hide()},showCalendars:function(){this.container.addClass("show-calendar"),this.move(),this.element.trigger("showCalendar.daterangepicker",this)},hideCalendars:function(){this.container.removeClass("show-calendar"),this.element.trigger("hideCalendar.daterangepicker",this)},hoverRange:function(e){if(!this.container.find("input[name=daterangepicker_start]").is(":focus")&&!this.container.find("input[name=daterangepicker_end]").is(":focus")){var label=e.target.innerHTML;if(label==this.locale.customRangeLabel)this.updateView();else{var dates=this.ranges[label];this.container.find("input[name=daterangepicker_start]").val(dates[0].format(this.locale.format)),this.container.find("input[name=daterangepicker_end]").val(dates[1].format(this.locale.format))}}},clickRange:function(e){var label=e.target.innerHTML;if(this.chosenLabel=label,label==this.locale.customRangeLabel)this.showCalendars();else{var dates=this.ranges[label];this.startDate=dates[0],this.endDate=dates[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.hideCalendars(),this.clickApply()}},clickPrev:function(e){$(e.target).parents(".calendar").hasClass("left")?(this.leftCalendar.month.subtract(1,"month"),this.linkedCalendars&&this.rightCalendar.month.subtract(1,"month")):this.rightCalendar.month.subtract(1,"month"),this.updateCalendars()},clickNext:function(e){$(e.target).parents(".calendar").hasClass("left")?this.leftCalendar.month.add(1,"month"):(this.rightCalendar.month.add(1,"month"),this.linkedCalendars&&this.leftCalendar.month.add(1,"month")),this.updateCalendars()},hoverDate:function(e){if(!this.container.find("input[name=daterangepicker_start]").is(":focus")&&!this.container.find("input[name=daterangepicker_end]").is(":focus")&&$(e.target).hasClass("available")){var title=$(e.target).attr("data-title"),row=title.substr(1,1),col=title.substr(3,1),cal=$(e.target).parents(".calendar"),date=cal.hasClass("left")?this.leftCalendar.calendar[row][col]:this.rightCalendar.calendar[row][col];this.endDate?this.container.find("input[name=daterangepicker_start]").val(date.format(this.locale.format)):this.container.find("input[name=daterangepicker_end]").val(date.format(this.locale.format));var leftCalendar=this.leftCalendar,rightCalendar=this.rightCalendar,startDate=this.startDate;this.endDate||this.container.find(".calendar td").each(function(index,el){if(!$(el).hasClass("week")){var title=$(el).attr("data-title"),row=title.substr(1,1),col=title.substr(3,1),cal=$(el).parents(".calendar"),dt=cal.hasClass("left")?leftCalendar.calendar[row][col]:rightCalendar.calendar[row][col];dt.isAfter(startDate)&&dt.isBefore(date)?$(el).addClass("in-range"):$(el).removeClass("in-range")}})}},clickDate:function(e){if($(e.target).hasClass("available")){var title=$(e.target).attr("data-title"),row=title.substr(1,1),col=title.substr(3,1),cal=$(e.target).parents(".calendar"),date=cal.hasClass("left")?this.leftCalendar.calendar[row][col]:this.rightCalendar.calendar[row][col];if(this.endDate||date.isBefore(this.startDate)){if(this.timePicker){var hour=parseInt(this.container.find(".left .hourselect").val(),10);if(!this.timePicker24Hour){var ampm=cal.find(".ampmselect").val();"PM"===ampm&&hour<12&&(hour+=12),"AM"===ampm&&12===hour&&(hour=0)}var minute=parseInt(this.container.find(".left .minuteselect").val(),10),second=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0;date=date.clone().hour(hour).minute(minute).second(second)}this.endDate=null,this.setStartDate(date.clone())}else{if(this.timePicker){var hour=parseInt(this.container.find(".right .hourselect").val(),10);if(!this.timePicker24Hour){var ampm=this.container.find(".right .ampmselect").val();"PM"===ampm&&hour<12&&(hour+=12),"AM"===ampm&&12===hour&&(hour=0)}var minute=parseInt(this.container.find(".right .minuteselect").val(),10),second=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0;date=date.clone().hour(hour).minute(minute).second(second)}this.setEndDate(date.clone()),this.autoApply&&this.clickApply()}this.singleDatePicker&&(this.setEndDate(this.startDate),this.timePicker||this.clickApply()),this.updateView()}},clickApply:function(e){this.hide(),this.element.trigger("apply.daterangepicker",this)},clickCancel:function(e){this.startDate=this.oldStartDate,this.endDate=this.oldEndDate,this.hide(),this.element.trigger("cancel.daterangepicker",this)},monthOrYearChanged:function(e){var isLeft=$(e.target).closest(".calendar").hasClass("left"),leftOrRight=isLeft?"left":"right",cal=this.container.find(".calendar."+leftOrRight),month=parseInt(cal.find(".monthselect").val(),10),year=cal.find(".yearselect").val();isLeft||(year<this.startDate.year()||year==this.startDate.year()&&month<this.startDate.month())&&(month=this.startDate.month(),year=this.startDate.year()),this.minDate&&(year<this.minDate.year()||year==this.minDate.year()&&month<this.minDate.month())&&(month=this.minDate.month(),year=this.minDate.year()),this.maxDate&&(year>this.maxDate.year()||year==this.maxDate.year()&&month>this.maxDate.month())&&(month=this.maxDate.month(),year=this.maxDate.year()),isLeft?(this.leftCalendar.month.month(month).year(year),this.linkedCalendars&&(this.rightCalendar.month=this.leftCalendar.month.clone().add(1,"month"))):(this.rightCalendar.month.month(month).year(year),this.linkedCalendars&&(this.leftCalendar.month=this.rightCalendar.month.clone().subtract(1,"month"))),this.updateCalendars()},timeChanged:function(e){var cal=$(e.target).closest(".calendar"),isLeft=cal.hasClass("left"),hour=parseInt(cal.find(".hourselect").val(),10),minute=parseInt(cal.find(".minuteselect").val(),10),second=this.timePickerSeconds?parseInt(cal.find(".secondselect").val(),10):0;if(!this.timePicker24Hour){var ampm=cal.find(".ampmselect").val();"PM"===ampm&&hour<12&&(hour+=12),"AM"===ampm&&12===hour&&(hour=0)}if(isLeft){var start=this.startDate.clone();start.hour(hour),start.minute(minute),start.second(second),this.setStartDate(start),this.singleDatePicker?this.endDate=this.startDate.clone():this.endDate&&this.endDate.format("YYYY-MM-DD")==start.format("YYYY-MM-DD")&&this.endDate.isBefore(start)&&this.setEndDate(start.clone())}else if(this.endDate){var end=this.endDate.clone();end.hour(hour),end.minute(minute),end.second(second),this.setEndDate(end)}this.updateCalendars(),this.updateFormInputs(),this.renderTimePicker("left"),this.renderTimePicker("right")},formInputsChanged:function(e){var isRight=$(e.target).closest(".calendar").hasClass("right"),start=moment(this.container.find('input[name="daterangepicker_start"]').val(),this.locale.format),end=moment(this.container.find('input[name="daterangepicker_end"]').val(),this.locale.format);start.isValid()&&end.isValid()&&(isRight&&end.isBefore(start)&&(start=end.clone()),this.setStartDate(start),this.setEndDate(end),isRight?this.container.find('input[name="daterangepicker_start"]').val(this.startDate.format(this.locale.format)):this.container.find('input[name="daterangepicker_end"]').val(this.endDate.format(this.locale.format))),this.updateCalendars(),this.timePicker&&(this.renderTimePicker("left"),this.renderTimePicker("right"))},elementChanged:function(){if(this.element.is("input")&&this.element.val().length&&!(this.element.val().length<this.locale.format.length)){var dateString=this.element.val().split(this.locale.separator),start=null,end=null;2===dateString.length&&(start=moment(dateString[0],this.locale.format),end=moment(dateString[1],this.locale.format)),(this.singleDatePicker||null===start||null===end)&&(start=moment(this.element.val(),this.locale.format),end=start),start.isValid()&&end.isValid()&&(this.setStartDate(start),this.setEndDate(end),this.updateView())}},keydown:function(e){9!==e.keyCode&&13!==e.keyCode||this.hide()},updateElement:function(){this.element.is("input")&&!this.singleDatePicker&&this.autoUpdateInput?(this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.element.trigger("change")):this.element.is("input")&&this.autoUpdateInput&&(this.element.val(this.startDate.format(this.locale.format)),this.element.trigger("change"))},remove:function(){this.container.remove(),this.element.off(".daterangepicker"),this.element.removeData()}},$.fn.daterangepicker=function(options,callback){return this.each(function(){var el=$(this);el.data("daterangepicker")&&el.data("daterangepicker").remove(),el.data("daterangepicker",new DateRangePicker(el,options,callback))}),this},DateRangePicker}),function(){var picker;picker=angular.module("daterangepicker",[]),picker.constant("dateRangePickerConfig",{clearLabel:"Clear",locale:{separator:" - ",format:"YYYY-MM-DD"}}),picker.directive("dateRangePicker",["$compile","$timeout","$parse","dateRangePickerConfig",function($compile,$timeout,$parse,dateRangePickerConfig){return{require:"ngModel",restrict:"A",scope:{min:"=",max:"=",model:"=ngModel",opts:"=options",clearable:"="},link:function($scope,element,attrs,modelCtrl){var _clear,_init,_initBoundaryField,_mergeOpts,_picker,_setDatePoint,_setEndDate,_setStartDate,_validate,_validateMax,_validateMin,customOpts,el,opts;return _mergeOpts=function(){var extend,localeExtend;return localeExtend=angular.extend.apply(angular,Array.prototype.slice.call(arguments).map(function(opt){return null!=opt?opt.locale:void 0}).filter(function(opt){return!!opt})),extend=angular.extend.apply(angular,arguments),extend.locale=localeExtend,extend},el=$(element),customOpts=$scope.opts,opts=_mergeOpts({},dateRangePickerConfig,customOpts),_picker=null,_clear=function(){return _picker.setStartDate(),_picker.setEndDate()},_setDatePoint=function(setter){return function(newValue){if(_picker&&newValue)return setter(moment(newValue))}},_setStartDate=_setDatePoint(function(m){return _picker.endDate<m&&_picker.setEndDate(m),opts.startDate=m,_picker.setStartDate(m)}),_setEndDate=_setDatePoint(function(m){return _picker.startDate>m&&_picker.setStartDate(m),opts.endDate=m,_picker.setEndDate(m)}),_validate=function(validator){return function(boundary,actual){return!boundary||!actual||validator(moment(boundary),moment(actual))}},_validateMin=_validate(function(min,start){return min.isBefore(start)||min.isSame(start,"day")}),_validateMax=_validate(function(max,end){return max.isAfter(end)||max.isSame(end,"day")}),modelCtrl.$formatters.push(function(objValue){var f;return f=function(date){return moment.isMoment(date)?date.format(opts.locale.format):moment(date).format(opts.locale.format)},opts.singleDatePicker&&objValue?f(objValue):objValue.startDate?[f(objValue.startDate),f(objValue.endDate)].join(opts.locale.separator):""}),modelCtrl.$render=function(){return modelCtrl.$modelValue&&modelCtrl.$modelValue.startDate?(_setStartDate(modelCtrl.$modelValue.startDate),_setEndDate(modelCtrl.$modelValue.endDate)):_clear(),el.val(modelCtrl.$viewValue)},modelCtrl.$parsers.push(function(val){var f,objValue,x;return f=function(value){return moment(value,opts.locale.format)},objValue={startDate:null,endDate:null},angular.isString(val)&&val.length>0&&(opts.singleDatePicker?objValue=f(val):(x=val.split(opts.locale.separator).map(f),objValue.startDate=x[0],objValue.endDate=x[1])),objValue}),modelCtrl.$isEmpty=function(val){return!(angular.isString(val)&&val.length>0)},_init=function(){var eventType,results;el.daterangepicker(angular.extend(opts,{autoUpdateInput:!1}),function(start,end){return $scope.$apply(function(){return $scope.model=opts.singleDatePicker?start:{startDate:start,endDate:end}})}),_picker=el.data("daterangepicker"),results=[];for(eventType in opts.eventHandlers)results.push(el.on(eventType,function(e){var eventName;return eventName=e.type+"."+e.namespace,$scope.$evalAsync(opts.eventHandlers[eventName])}));return results},_init(),$scope.$watch("model.startDate",function(n){return _setStartDate(n)}),$scope.$watch("model.endDate",function(n){return _setEndDate(n)}),_initBoundaryField=function(field,validator,modelField,optName){if(attrs[field])return modelCtrl.$validators[field]=function(value){return value&&validator(opts[optName],value[modelField])},$scope.$watch(field,function(date){return opts[optName]=!!date&&moment(date),_init()})},_initBoundaryField("min",_validateMin,"startDate","minDate"),_initBoundaryField("max",_validateMax,"endDate","maxDate"),attrs.options&&$scope.$watch("opts",function(newOpts){return opts=_mergeOpts(opts,newOpts),_init()},!0),attrs.clearable&&$scope.$watch("clearable",function(newClearable){if(newClearable&&(opts=_mergeOpts(opts,{locale:{cancelLabel:opts.clearLabel}})),_init(),newClearable)return el.on("cancel.daterangepicker",function(){return $scope.$apply(function(){return $scope.model=opts.singleDatePicker?null:{startDate:null,endDate:null}})})}),$scope.$on("$destroy",function(){return null!=_picker?_picker.remove():void 0})}}}])}.call(this),angular.module("dndLists",[]).directive("dndDraggable",["$parse","$timeout","dndDropEffectWorkaround","dndDragTypeWorkaround",function($parse,$timeout,dndDropEffectWorkaround,dndDragTypeWorkaround){return function(scope,element,attr){element.attr("draggable","true"),attr.dndDisableIf&&scope.$watch(attr.dndDisableIf,function(disabled){element.attr("draggable",!disabled)}),element.on("dragstart",function(event){event=event.originalEvent||event,event.dataTransfer.setData("Text",angular.toJson(scope.$eval(attr.dndDraggable))),event.dataTransfer.effectAllowed=attr.dndEffectAllowed||"move",element.addClass("dndDragging"),$timeout(function(){element.addClass("dndDraggingSource")},0),dndDropEffectWorkaround.dropEffect="none",dndDragTypeWorkaround.isDragging=!0,dndDragTypeWorkaround.dragType=attr.dndType?scope.$eval(attr.dndType):void 0,$parse(attr.dndDragstart)(scope,{event:event}),event.stopPropagation()}),element.on("dragend",function(event){event=event.originalEvent||event;var dropEffect=dndDropEffectWorkaround.dropEffect;scope.$apply(function(){switch(dropEffect){case"move":$parse(attr.dndMoved)(scope,{event:event});break;case"copy":$parse(attr.dndCopied)(scope,{event:event});break;case"none":$parse(attr.dndCanceled)(scope,{event:event})}$parse(attr.dndDragend)(scope,{event:event,dropEffect:dropEffect})}),element.removeClass("dndDragging"),$timeout(function(){element.removeClass("dndDraggingSource")},0),dndDragTypeWorkaround.isDragging=!1,event.stopPropagation()}),element.on("click",function(event){attr.dndSelected&&(event=event.originalEvent||event,scope.$apply(function(){$parse(attr.dndSelected)(scope,{event:event})}),event.stopPropagation())}),element.on("selectstart",function(){this.dragDrop&&this.dragDrop()})}}]).directive("dndList",["$parse","$timeout","dndDropEffectWorkaround","dndDragTypeWorkaround",function($parse,$timeout,dndDropEffectWorkaround,dndDragTypeWorkaround){return function(scope,element,attr){function isMouseInFirstHalf(event,targetNode,relativeToParent){var mousePointer=horizontal?event.offsetX||event.layerX:event.offsetY||event.layerY,targetSize=horizontal?targetNode.offsetWidth:targetNode.offsetHeight,targetPosition=horizontal?targetNode.offsetLeft:targetNode.offsetTop;return targetPosition=relativeToParent?targetPosition:0,mousePointer<targetPosition+targetSize/2}function getPlaceholderIndex(){return Array.prototype.indexOf.call(listNode.children,placeholderNode)}function isDropAllowed(event){if(!dndDragTypeWorkaround.isDragging&&!externalSources)return!1;if(!hasTextMimetype(event.dataTransfer.types))return!1;if(attr.dndAllowedTypes&&dndDragTypeWorkaround.isDragging){var allowed=scope.$eval(attr.dndAllowedTypes);if(angular.isArray(allowed)&&allowed.indexOf(dndDragTypeWorkaround.dragType)===-1)return!1}return!attr.dndDisableIf||!scope.$eval(attr.dndDisableIf)}function stopDragover(){return placeholder.remove(),element.removeClass("dndDragover"),!0}function invokeCallback(expression,event,index,item){return $parse(expression)(scope,{event:event,index:index,item:item||void 0,external:!dndDragTypeWorkaround.isDragging,type:dndDragTypeWorkaround.isDragging?dndDragTypeWorkaround.dragType:void 0})}function hasTextMimetype(types){if(!types)return!0;for(var i=0;i<types.length;i++)if("Text"===types[i]||"text/plain"===types[i])return!0;return!1}var placeholder=function(){var placeholder;return angular.forEach(element.children(),function(childNode){var child=angular.element(childNode);child.hasClass("dndPlaceholder")&&(placeholder=child)}),placeholder||angular.element("<li class='dndPlaceholder'></li>")}(),placeholderNode=placeholder[0],listNode=element[0];placeholder.remove()
;var horizontal=attr.dndHorizontalList&&scope.$eval(attr.dndHorizontalList),externalSources=attr.dndExternalSources&&scope.$eval(attr.dndExternalSources);element.on("dragover",function(event){if(event=event.originalEvent||event,!isDropAllowed(event))return!0;if(placeholderNode.parentNode!=listNode&&element.append(placeholder),event.target!==listNode){for(var listItemNode=event.target;listItemNode.parentNode!==listNode&&listItemNode.parentNode;)listItemNode=listItemNode.parentNode;listItemNode.parentNode===listNode&&listItemNode!==placeholderNode&&(isMouseInFirstHalf(event,listItemNode)?listNode.insertBefore(placeholderNode,listItemNode):listNode.insertBefore(placeholderNode,listItemNode.nextSibling))}else if(isMouseInFirstHalf(event,placeholderNode,!0))for(;placeholderNode.previousElementSibling&&(isMouseInFirstHalf(event,placeholderNode.previousElementSibling,!0)||0===placeholderNode.previousElementSibling.offsetHeight);)listNode.insertBefore(placeholderNode,placeholderNode.previousElementSibling);else for(;placeholderNode.nextElementSibling&&!isMouseInFirstHalf(event,placeholderNode.nextElementSibling,!0);)listNode.insertBefore(placeholderNode,placeholderNode.nextElementSibling.nextElementSibling);return attr.dndDragover&&!invokeCallback(attr.dndDragover,event,getPlaceholderIndex())?stopDragover():(element.addClass("dndDragover"),event.preventDefault(),event.stopPropagation(),!1)}),element.on("drop",function(event){if(event=event.originalEvent||event,!isDropAllowed(event))return!0;event.preventDefault();var transferredObject,data=event.dataTransfer.getData("Text")||event.dataTransfer.getData("text/plain");try{transferredObject=JSON.parse(data)}catch(e){return stopDragover()}var index=getPlaceholderIndex();if(attr.dndDrop&&!(transferredObject=invokeCallback(attr.dndDrop,event,index,transferredObject)))return stopDragover();var targetArray=scope.$eval(attr.dndList);return scope.$apply(function(){targetArray.splice(index,0,transferredObject)}),invokeCallback(attr.dndInserted,event,index,transferredObject),"none"===event.dataTransfer.dropEffect?"copy"===event.dataTransfer.effectAllowed||"move"===event.dataTransfer.effectAllowed?dndDropEffectWorkaround.dropEffect=event.dataTransfer.effectAllowed:dndDropEffectWorkaround.dropEffect=event.ctrlKey?"copy":"move":dndDropEffectWorkaround.dropEffect=event.dataTransfer.dropEffect,stopDragover(),event.stopPropagation(),!1}),element.on("dragleave",function(event){event=event.originalEvent||event,element.removeClass("dndDragover"),$timeout(function(){element.hasClass("dndDragover")||placeholder.remove()},100)})}}]).directive("dndNodrag",function(){return function(scope,element,attr){element.attr("draggable","true"),element.on("dragstart",function(event){event=event.originalEvent||event,event.dataTransfer.types&&event.dataTransfer.types.length||event.preventDefault(),event.stopPropagation()}),element.on("dragend",function(event){event=event.originalEvent||event,event.stopPropagation()})}}).factory("dndDragTypeWorkaround",function(){return{}}).factory("dndDropEffectWorkaround",function(){return{}}),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?module.exports=factory(require("jquery")):factory(jQuery)}(function(jQuery){"use strict";var domfocus=!1,mousefocus=!1,tabindexcounter=0,ascrailcounter=2e3,globalmaxzindex=0,$=jQuery,vendors=["webkit","ms","moz","o"],setAnimationFrame=window.requestAnimationFrame||!1,clearAnimationFrame=window.cancelAnimationFrame||!1;if(!setAnimationFrame)for(var vx in vendors){var v=vendors[vx];setAnimationFrame||(setAnimationFrame=window[v+"RequestAnimationFrame"]),clearAnimationFrame||(clearAnimationFrame=window[v+"CancelAnimationFrame"]||window[v+"CancelRequestAnimationFrame"])}var ClsMutationObserver=window.MutationObserver||window.WebKitMutationObserver||!1,_globaloptions={zindex:"auto",cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"5px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:60,mousescrollstep:24,touchbehavior:!1,hwacceleration:!0,usetransition:!0,boxzoom:!1,dblclickzoom:!0,gesturezoom:!0,grabcursorenabled:!0,autohidemode:!0,background:"",iframeautoresize:!0,cursorminheight:32,preservenativescrolling:!0,railoffset:!1,railhoffset:!1,bouncescroll:!0,spacebarenabled:!0,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:!0,horizrailenabled:!0,railalign:"right",railvalign:"bottom",enabletranslate3d:!0,enablemousewheel:!0,enablekeyboard:!0,smoothscroll:!0,sensitiverail:!0,enablemouselockapi:!0,cursorfixedheight:!1,directionlockdeadzone:6,hidecursordelay:400,nativeparentscrolling:!0,enablescrollonselection:!0,overflowx:!0,overflowy:!0,cursordragspeed:.3,rtlmode:"auto",cursordragontouch:!1,oneaxismousemode:"auto",scriptpath:function(){var scripts=document.getElementsByTagName("script"),path=scripts.length?scripts[scripts.length-1].src.split("?")[0]:"";return path.split("/").length>0?path.split("/").slice(0,-1).join("/")+"/":""}(),preventmultitouchscrolling:!0},browserdetected=!1,getBrowserDetection=function(){if(browserdetected)return browserdetected;var _el=document.createElement("DIV"),_style=_el.style,_agent=navigator.userAgent,_platform=navigator.platform,d={};d.haspointerlock="pointerLockElement"in document||"webkitPointerLockElement"in document||"mozPointerLockElement"in document,d.isopera="opera"in window,d.isopera12=d.isopera&&"getUserMedia"in navigator,d.isoperamini="[object OperaMini]"===Object.prototype.toString.call(window.operamini),d.isie="all"in document&&"attachEvent"in _el&&!d.isopera,d.isieold=d.isie&&!("msInterpolationMode"in _style),d.isie7=d.isie&&!d.isieold&&(!("documentMode"in document)||7==document.documentMode),d.isie8=d.isie&&"documentMode"in document&&8==document.documentMode,d.isie9=d.isie&&"performance"in window&&document.documentMode>=9,d.isie10=d.isie&&"performance"in window&&10==document.documentMode,d.isie11="msRequestFullscreen"in _el&&document.documentMode>=11,d.isieedge=navigator.userAgent.match(/Edge\/12\./),d.isie9mobile=/iemobile.9/i.test(_agent),d.isie9mobile&&(d.isie9=!1),d.isie7mobile=!d.isie9mobile&&d.isie7&&/iemobile/i.test(_agent),d.ismozilla="MozAppearance"in _style,d.iswebkit="WebkitAppearance"in _style,d.ischrome="chrome"in window,d.ischrome22=d.ischrome&&d.haspointerlock,d.ischrome26=d.ischrome&&"transition"in _style,d.cantouch="ontouchstart"in document.documentElement||"ontouchstart"in window,d.hasmstouch=window.MSPointerEvent||!1,d.hasw3ctouch=(window.PointerEvent||!1)&&(navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0),d.ismac=/^mac$/i.test(_platform),d.isios=d.cantouch&&/iphone|ipad|ipod/i.test(_platform),d.isios4=d.isios&&!("seal"in Object),d.isios7=d.isios&&"webkitHidden"in document,d.isandroid=/android/i.test(_agent),d.haseventlistener="addEventListener"in _el,d.trstyle=!1,d.hastransform=!1,d.hastranslate3d=!1,d.transitionstyle=!1,d.hastransition=!1,d.transitionend=!1;var a,check=["transform","msTransform","webkitTransform","MozTransform","OTransform"];for(a=0;a<check.length;a++)if(void 0!==_style[check[a]]){d.trstyle=check[a];break}d.hastransform=!!d.trstyle,d.hastransform&&(_style[d.trstyle]="translate3d(1px,2px,3px)",d.hastranslate3d=/translate3d/.test(_style[d.trstyle])),d.transitionstyle=!1,d.prefixstyle="",d.transitionend=!1,check=["transition","webkitTransition","msTransition","MozTransition","OTransition","OTransition","KhtmlTransition"];var prefix=["","-webkit-","-ms-","-moz-","-o-","-o","-khtml-"],evs=["transitionend","webkitTransitionEnd","msTransitionEnd","transitionend","otransitionend","oTransitionEnd","KhtmlTransitionEnd"];for(a=0;a<check.length;a++)if(check[a]in _style){d.transitionstyle=check[a],d.prefixstyle=prefix[a],d.transitionend=evs[a];break}return d.ischrome26&&(d.prefixstyle=prefix[1]),d.hastransition=d.transitionstyle,d.cursorgrabvalue=function(){var lst=["-webkit-grab","-moz-grab","grab"];(d.ischrome&&!d.ischrome22||d.isie)&&(lst=[]);for(var a=0;a<lst.length;a++){var p=lst[a];if(_style.cursor=p,_style.cursor==p)return p}return"url(//mail.google.com/mail/images/2/openhand.cur),n-resize"}(),d.hasmousecapture="setCapture"in _el,d.hasMutationObserver=ClsMutationObserver!==!1,_el=null,browserdetected=d,d},NiceScrollClass=function(myopt,me){function getMatrixValues(){var tr=self.doc.css(cap.trstyle);return!(!tr||"matrix"!=tr.substr(0,6))&&tr.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/)}function getZIndex(){var dom=self.win;if("zIndex"in dom)return dom.zIndex();for(;dom.length>0;){if(9==dom[0].nodeType)return!1;var zi=dom.css("zIndex");if(!isNaN(zi)&&0!=zi)return parseInt(zi);dom=dom.parent()}return!1}function getWidthToPixel(dom,prop,chkheight){var wd=dom.css(prop),px=parseFloat(wd);if(isNaN(px)){px=_convertBorderWidth[wd]||0;var brd=3==px?chkheight?self.win.outerHeight()-self.win.innerHeight():self.win.outerWidth()-self.win.innerWidth():1;return self.isie8&&px&&(px+=1),brd?px:0}return px}function _modernWheelEvent(dom,name,fn,bubble){self._bind(dom,name,function(e){var e=e?e:window.event,event={original:e,target:e.target||e.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==e.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){return e.preventDefault?e.preventDefault():e.returnValue=!1,!1},stopImmediatePropagation:function(){e.stopImmediatePropagation?e.stopImmediatePropagation():e.cancelBubble=!0}};return"mousewheel"==name?(event.deltaY=-.025*e.wheelDelta,e.wheelDeltaX&&(event.deltaX=-.025*e.wheelDeltaX)):event.deltaY=e.detail,fn.call(dom,event)},bubble)}function execScrollWheel(e,hr,chkscroll){var px,py;if(0==e.deltaMode?(px=-Math.floor(e.deltaX*(self.opt.mousescrollstep/54)),py=-Math.floor(e.deltaY*(self.opt.mousescrollstep/54))):1==e.deltaMode&&(px=-Math.floor(e.deltaX*self.opt.mousescrollstep),py=-Math.floor(e.deltaY*self.opt.mousescrollstep)),hr&&self.opt.oneaxismousemode&&0==px&&py&&(px=py,py=0,chkscroll)){(px<0?self.getScrollLeft()>=self.page.maxw:self.getScrollLeft()<=0)&&(py=px,px=0)}if(px&&(self.scrollmom&&self.scrollmom.stop(),self.lastdeltax+=px,self.debounced("mousewheelx",function(){var dt=self.lastdeltax;self.lastdeltax=0,self.rail.drag||self.doScrollLeftBy(dt)},15)),py){if(self.opt.nativeparentscrolling&&chkscroll&&!self.ispage&&!self.zoomactive)if(py<0){if(self.getScrollTop()>=self.page.maxh)return!0}else if(self.getScrollTop()<=0)return!0;self.scrollmom&&self.scrollmom.stop(),self.lastdeltay+=py,self.debounced("mousewheely",function(){var dt=self.lastdeltay;self.lastdeltay=0,self.rail.drag||self.doScrollBy(dt)},15)}return e.stopImmediatePropagation(),e.preventDefault()}var self=this;if(this.version="3.6.6",this.name="nicescroll",this.me=me,this.opt={doc:$("body"),win:!1},$.extend(this.opt,_globaloptions),this.opt.snapbackspeed=80,myopt)for(var a in self.opt)void 0!==myopt[a]&&(self.opt[a]=myopt[a]);this.doc=self.opt.doc,this.iddoc=this.doc&&this.doc[0]?this.doc[0].id||"":"",this.ispage=/^BODY|HTML/.test(self.opt.win?self.opt.win[0].nodeName:this.doc[0].nodeName),this.haswrapper=self.opt.win!==!1,this.win=self.opt.win||(this.ispage?$(window):this.doc),this.docscroll=this.ispage&&!this.haswrapper?$(window):this.win,this.body=$("body"),this.viewport=!1,this.isfixed=!1,this.iframe=!1,this.isiframe="IFRAME"==this.doc[0].nodeName&&"IFRAME"==this.win[0].nodeName,this.istextarea="TEXTAREA"==this.win[0].nodeName,this.forcescreen=!1,this.canshowonmouseevent="scroll"!=self.opt.autohidemode,this.onmousedown=!1,this.onmouseup=!1,this.onmousemove=!1,this.onmousewheel=!1,this.onkeypress=!1,this.ongesturezoom=!1,this.onclick=!1,this.onscrollstart=!1,this.onscrollend=!1,this.onscrollcancel=!1,this.onzoomin=!1,this.onzoomout=!1,this.view=!1,this.page=!1,this.scroll={x:0,y:0},this.scrollratio={x:0,y:0},this.cursorheight=20,this.scrollvaluemax=0,this.isrtlmode="auto"==this.opt.rtlmode?"rtl"==(this.win[0]==window?this.body:this.win).css("direction"):this.opt.rtlmode===!0,this.scrollrunning=!1,this.scrollmom=!1,this.observer=!1,this.observerremover=!1,this.observerbody=!1;do{this.id="ascrail"+ascrailcounter++}while(document.getElementById(this.id));this.rail=!1,this.cursor=!1,this.cursorfreezed=!1,this.selectiondrag=!1,this.zoom=!1,this.zoomactive=!1,this.hasfocus=!1,this.hasmousefocus=!1,this.visibility=!0,this.railslocked=!1,this.locked=!1,this.hidden=!1,this.cursoractive=!0,this.wheelprevented=!1,this.overflowx=self.opt.overflowx,this.overflowy=self.opt.overflowy,this.nativescrollingarea=!1,this.checkarea=0,this.events=[],this.saved={},this.delaylist={},this.synclist={},this.lastdeltax=0,this.lastdeltay=0,this.detected=getBrowserDetection();var cap=$.extend({},this.detected);this.canhwscroll=cap.hastransform&&self.opt.hwacceleration,this.ishwscroll=this.canhwscroll&&self.haswrapper,this.hasreversehr=this.isrtlmode&&!cap.iswebkit,this.istouchcapable=!1,!cap.cantouch||cap.isios||cap.isandroid||!cap.iswebkit&&!cap.ismozilla||(this.istouchcapable=!0,cap.cantouch=!1),self.opt.enablemouselockapi||(cap.hasmousecapture=!1,cap.haspointerlock=!1),this.debounced=function(name,fn,tm){var dd=self.delaylist[name];self.delaylist[name]=fn,dd||(self.debouncedelayed=setTimeout(function(){if(self){var fn=self.delaylist[name];self.delaylist[name]=!1,fn.call(self)}},tm))};var _onsync=!1;this.synched=function(name,fn){return self.synclist[name]=fn,function(){_onsync||(setAnimationFrame(function(){_onsync=!1;for(var nn in self.synclist){var fn=self.synclist[nn];fn&&fn.call(self),self.synclist[nn]=!1}}),_onsync=!0)}(),name},this.unsynched=function(name){self.synclist[name]&&(self.synclist[name]=!1)},this.css=function(el,pars){for(var n in pars)self.saved.css.push([el,n,el.css(n)]),el.css(n,pars[n])},this.scrollTop=function(val){return void 0===val?self.getScrollTop():self.setScrollTop(val)},this.scrollLeft=function(val){return void 0===val?self.getScrollLeft():self.setScrollLeft(val)};var BezierClass=function(st,ed,spd,p1,p2,p3,p4){this.st=st,this.ed=ed,this.spd=spd,this.p1=p1||0,this.p2=p2||1,this.p3=p3||0,this.p4=p4||1,this.ts=(new Date).getTime(),this.df=this.ed-this.st};if(BezierClass.prototype={B2:function(t){return 3*t*t*(1-t)},B3:function(t){return 3*t*(1-t)*(1-t)},B4:function(t){return(1-t)*(1-t)*(1-t)},getNow:function(){var nw=(new Date).getTime(),pc=1-(nw-this.ts)/this.spd,bz=this.B2(pc)+this.B3(pc)+this.B4(pc);return pc<0?this.ed:this.st+Math.round(this.df*bz)},update:function(ed,spd){return this.st=this.getNow(),this.ed=ed,this.spd=spd,this.ts=(new Date).getTime(),this.df=this.ed-this.st,this}},this.ishwscroll){this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"},cap.hastranslate3d&&cap.isios&&this.doc.css("-webkit-backface-visibility","hidden"),this.getScrollTop=function(last){if(!last){var mtx=getMatrixValues();if(mtx)return 16==mtx.length?-mtx[13]:-mtx[5];if(self.timerscroll&&self.timerscroll.bz)return self.timerscroll.bz.getNow()}return self.doc.translate.y},this.getScrollLeft=function(last){if(!last){var mtx=getMatrixValues();if(mtx)return 16==mtx.length?-mtx[12]:-mtx[4];if(self.timerscroll&&self.timerscroll.bh)return self.timerscroll.bh.getNow()}return self.doc.translate.x},this.notifyScrollEvent=function(el){var e=document.createEvent("UIEvents");e.initUIEvent("scroll",!1,!0,window,1),e.niceevent=!0,el.dispatchEvent(e)};var cxscrollleft=this.isrtlmode?1:-1;cap.hastranslate3d&&self.opt.enabletranslate3d?(this.setScrollTop=function(val,silent){self.doc.translate.y=val,self.doc.translate.ty=val*-1+"px",self.doc.css(cap.trstyle,"translate3d("+self.doc.translate.tx+","+self.doc.translate.ty+",0px)"),silent||self.notifyScrollEvent(self.win[0])},this.setScrollLeft=function(val,silent){self.doc.translate.x=val,self.doc.translate.tx=val*cxscrollleft+"px",self.doc.css(cap.trstyle,"translate3d("+self.doc.translate.tx+","+self.doc.translate.ty+",0px)"),silent||self.notifyScrollEvent(self.win[0])}):(this.setScrollTop=function(val,silent){self.doc.translate.y=val,self.doc.translate.ty=val*-1+"px",self.doc.css(cap.trstyle,"translate("+self.doc.translate.tx+","+self.doc.translate.ty+")"),silent||self.notifyScrollEvent(self.win[0])},this.setScrollLeft=function(val,silent){self.doc.translate.x=val,self.doc.translate.tx=val*cxscrollleft+"px",self.doc.css(cap.trstyle,"translate("+self.doc.translate.tx+","+self.doc.translate.ty+")"),silent||self.notifyScrollEvent(self.win[0])})}else this.getScrollTop=function(){return self.docscroll.scrollTop()},this.setScrollTop=function(val){return setTimeout(function(){self.docscroll.scrollTop(val)},1)},this.getScrollLeft=function(){return self.detected.ismozilla&&self.isrtlmode?Math.abs(self.docscroll.scrollLeft()):self.docscroll.scrollLeft()},this.setScrollLeft=function(val){return setTimeout(function(){self.docscroll.scrollLeft(self.detected.ismozilla&&self.isrtlmode?-val:val)},1)};this.getTarget=function(e){return!!e&&(e.target?e.target:!!e.srcElement&&e.srcElement)},this.hasParent=function(e,id){if(!e)return!1;for(var el=e.target||e.srcElement||e||!1;el&&el.id!=id;)el=el.parentNode||!1;return el!==!1};var _convertBorderWidth={thin:1,medium:3,thick:5};this.getDocumentScrollOffset=function(){return{top:window.pageYOffset||document.documentElement.scrollTop,left:window.pageXOffset||document.documentElement.scrollLeft}},this.getOffset=function(){if(self.isfixed){var ofs=self.win.offset(),scrl=self.getDocumentScrollOffset();return ofs.top-=scrl.top,ofs.left-=scrl.left,ofs}var ww=self.win.offset();if(!self.viewport)return ww;var vp=self.viewport.offset();return{top:ww.top-vp.top,left:ww.left-vp.left}},this.updateScrollBar=function(len){if(self.ishwscroll)self.rail.css({height:self.win.innerHeight()-(self.opt.railpadding.top+self.opt.railpadding.bottom)}),self.railh&&self.railh.css({width:self.win.innerWidth()-(self.opt.railpadding.left+self.opt.railpadding.right)});else{var wpos=self.getOffset(),pos={top:wpos.top,left:wpos.left-(self.opt.railpadding.left+self.opt.railpadding.right)};pos.top+=getWidthToPixel(self.win,"border-top-width",!0),pos.left+=self.rail.align?self.win.outerWidth()-getWidthToPixel(self.win,"border-right-width")-self.rail.width:getWidthToPixel(self.win,"border-left-width");var off=self.opt.railoffset;if(off&&(off.top&&(pos.top+=off.top),off.left&&(pos.left+=off.left)),self.railslocked||self.rail.css({top:pos.top,left:pos.left,height:(len?len.h:self.win.innerHeight())-(self.opt.railpadding.top+self.opt.railpadding.bottom)}),self.zoom&&self.zoom.css({top:pos.top+1,left:1==self.rail.align?pos.left-20:pos.left+self.rail.width+4}),self.railh&&!self.railslocked){var pos={top:wpos.top,left:wpos.left},off=self.opt.railhoffset;off&&(off.top&&(pos.top+=off.top),off.left&&(pos.left+=off.left));var y=self.railh.align?pos.top+getWidthToPixel(self.win,"border-top-width",!0)+self.win.innerHeight()-self.railh.height:pos.top+getWidthToPixel(self.win,"border-top-width",!0),x=pos.left+getWidthToPixel(self.win,"border-left-width");self.railh.css({top:y-(self.opt.railpadding.top+self.opt.railpadding.bottom),left:x,width:self.railh.width})}}},this.doRailClick=function(e,dbl,hr){var fn,pg,cur,pos;self.railslocked||(self.cancelEvent(e),dbl?(fn=hr?self.doScrollLeft:self.doScrollTop,cur=hr?(e.pageX-self.railh.offset().left-self.cursorwidth/2)*self.scrollratio.x:(e.pageY-self.rail.offset().top-self.cursorheight/2)*self.scrollratio.y,fn(cur)):(fn=hr?self.doScrollLeftBy:self.doScrollBy,cur=hr?self.scroll.x:self.scroll.y,pos=hr?e.pageX-self.railh.offset().left:e.pageY-self.rail.offset().top,pg=hr?self.view.w:self.view.h,fn(cur>=pos?pg:-pg)))},self.hasanimationframe=setAnimationFrame,self.hascancelanimationframe=clearAnimationFrame,self.hasanimationframe?self.hascancelanimationframe||(clearAnimationFrame=function(){self.cancelAnimationFrame=!0}):(setAnimationFrame=function(fn){return setTimeout(fn,15-Math.floor(+new Date/1e3)%16)},clearAnimationFrame=clearInterval),this.init=function(){if(self.saved.css=[],cap.isie7mobile)return!0;if(cap.isoperamini)return!0;if(cap.hasmstouch&&self.css(self.ispage?$("html"):self.win,{"-ms-touch-action":"none"}),self.zindex="auto",self.ispage||"auto"!=self.opt.zindex?self.zindex=self.opt.zindex:self.zindex=getZIndex()||"auto",self.ispage||"auto"==self.zindex||self.zindex>globalmaxzindex&&(globalmaxzindex=self.zindex),self.isie&&0==self.zindex&&"auto"==self.opt.zindex&&(self.zindex="auto"),!self.ispage||!cap.cantouch&&!cap.isieold&&!cap.isie9mobile){var cont=self.docscroll;self.ispage&&(cont=self.haswrapper?self.win:self.doc),cap.isie9mobile||self.css(cont,{"overflow-y":"hidden"}),self.ispage&&cap.isie7&&("BODY"==self.doc[0].nodeName?self.css($("html"),{"overflow-y":"hidden"}):"HTML"==self.doc[0].nodeName&&self.css($("body"),{"overflow-y":"hidden"})),!cap.isios||self.ispage||self.haswrapper||self.css($("body"),{"-webkit-overflow-scrolling":"touch"});var cursor=$(document.createElement("div"));cursor.css({position:"relative",top:0,float:"right",width:self.opt.cursorwidth,height:"0px","background-color":self.opt.cursorcolor,border:self.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":self.opt.cursorborderradius,"-moz-border-radius":self.opt.cursorborderradius,"border-radius":self.opt.cursorborderradius}),cursor.hborder=parseFloat(cursor.outerHeight()-cursor.innerHeight()),cursor.addClass("nicescroll-cursors"),self.cursor=cursor;var rail=$(document.createElement("div"));rail.attr("id",self.id),rail.addClass("nicescroll-rails nicescroll-rails-vr");var v,a,kp=["left","right","top","bottom"];for(var n in kp)a=kp[n],v=self.opt.railpadding[a],v?rail.css("padding-"+a,v+"px"):self.opt.railpadding[a]=0;rail.append(cursor),rail.width=Math.max(parseFloat(self.opt.cursorwidth),cursor.outerWidth()),rail.css({width:rail.width+"px",zIndex:self.zindex,background:self.opt.background,cursor:"default"}),rail.visibility=!0,rail.scrollable=!0,rail.align="left"==self.opt.railalign?0:1,self.rail=rail,self.rail.drag=!1;var zoom=!1;!self.opt.boxzoom||self.ispage||cap.isieold||(zoom=document.createElement("div"),self.bind(zoom,"click",self.doZoom),self.bind(zoom,"mouseenter",function(){self.zoom.css("opacity",self.opt.cursoropacitymax)}),self.bind(zoom,"mouseleave",function(){self.zoom.css("opacity",self.opt.cursoropacitymin)}),self.zoom=$(zoom),self.zoom.css({cursor:"pointer","z-index":self.zindex,backgroundImage:"url("+self.opt.scriptpath+"zoomico.png)",height:18,width:18,backgroundPosition:"0px 0px"}),self.opt.dblclickzoom&&self.bind(self.win,"dblclick",self.doZoom),cap.cantouch&&self.opt.gesturezoom&&(self.ongesturezoom=function(e){return e.scale>1.5&&self.doZoomIn(e),e.scale<.8&&self.doZoomOut(e),self.cancelEvent(e)},self.bind(self.win,"gestureend",self.ongesturezoom))),self.railh=!1;var railh;if(self.opt.horizrailenabled){self.css(cont,{"overflow-x":"hidden"});var cursor=$(document.createElement("div"));cursor.css({position:"absolute",top:0,height:self.opt.cursorwidth,width:"0px","background-color":self.opt.cursorcolor,border:self.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":self.opt.cursorborderradius,"-moz-border-radius":self.opt.cursorborderradius,"border-radius":self.opt.cursorborderradius}),cap.isieold&&cursor.css({overflow:"hidden"}),cursor.wborder=parseFloat(cursor.outerWidth()-cursor.innerWidth()),cursor.addClass("nicescroll-cursors"),self.cursorh=cursor,railh=$(document.createElement("div")),railh.attr("id",self.id+"-hr"),railh.addClass("nicescroll-rails nicescroll-rails-hr"),railh.height=Math.max(parseFloat(self.opt.cursorwidth),cursor.outerHeight()),railh.css({height:railh.height+"px",zIndex:self.zindex,background:self.opt.background}),railh.append(cursor),railh.visibility=!0,railh.scrollable=!0,railh.align="top"==self.opt.railvalign?0:1,self.railh=railh,self.railh.drag=!1}if(self.ispage)rail.css({position:"fixed",top:"0px",height:"100%"}),rail.align?rail.css({right:"0px"}):rail.css({left:"0px"}),self.body.append(rail),self.railh&&(railh.css({position:"fixed",left:"0px",width:"100%"}),railh.align?railh.css({bottom:"0px"}):railh.css({top:"0px"}),self.body.append(railh));else{if(self.ishwscroll){"static"==self.win.css("position")&&self.css(self.win,{position:"relative"});var bd="HTML"==self.win[0].nodeName?self.body:self.win;$(bd).scrollTop(0).scrollLeft(0),self.zoom&&(self.zoom.css({position:"absolute",top:1,right:0,"margin-right":rail.width+4}),bd.append(self.zoom)),rail.css({position:"absolute",top:0}),rail.align?rail.css({right:0}):rail.css({left:0}),bd.append(rail),railh&&(railh.css({position:"absolute",left:0,bottom:0}),railh.align?railh.css({bottom:0}):railh.css({top:0}),bd.append(railh))}else{self.isfixed="fixed"==self.win.css("position");var rlpos=self.isfixed?"fixed":"absolute";self.isfixed||(self.viewport=self.getViewport(self.win[0])),self.viewport&&(self.body=self.viewport,0==/fixed|absolute/.test(self.viewport.css("position"))&&self.css(self.viewport,{position:"relative"})),rail.css({position:rlpos}),self.zoom&&self.zoom.css({position:rlpos}),self.updateScrollBar(),self.body.append(rail),self.zoom&&self.body.append(self.zoom),self.railh&&(railh.css({position:rlpos}),self.body.append(railh))}cap.isios&&self.css(self.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"}),cap.isie&&self.opt.disableoutline&&self.win.attr("hideFocus","true"),cap.iswebkit&&self.opt.disableoutline&&self.win.css({outline:"none"})}if(self.opt.autohidemode===!1?(self.autohidedom=!1,self.rail.css({opacity:self.opt.cursoropacitymax}),self.railh&&self.railh.css({opacity:self.opt.cursoropacitymax})):self.opt.autohidemode===!0||"leave"===self.opt.autohidemode?(self.autohidedom=$().add(self.rail),cap.isie8&&(self.autohidedom=self.autohidedom.add(self.cursor)),self.railh&&(self.autohidedom=self.autohidedom.add(self.railh)),self.railh&&cap.isie8&&(self.autohidedom=self.autohidedom.add(self.cursorh))):"scroll"==self.opt.autohidemode?(self.autohidedom=$().add(self.rail),self.railh&&(self.autohidedom=self.autohidedom.add(self.railh))):"cursor"==self.opt.autohidemode?(self.autohidedom=$().add(self.cursor),self.railh&&(self.autohidedom=self.autohidedom.add(self.cursorh))):"hidden"==self.opt.autohidemode&&(self.autohidedom=!1,self.hide(),self.railslocked=!1),cap.isie9mobile){self.scrollmom=new ScrollMomentumClass2D(self),self.onmangotouch=function(){var py=self.getScrollTop(),px=self.getScrollLeft();if(py==self.scrollmom.lastscrolly&&px==self.scrollmom.lastscrollx)return!0;var dfy=py-self.mangotouch.sy,dfx=px-self.mangotouch.sx;if(0!=Math.round(Math.sqrt(Math.pow(dfx,2)+Math.pow(dfy,2)))){var dry=dfy<0?-1:1,drx=dfx<0?-1:1,tm=+new Date;if(self.mangotouch.lazy&&clearTimeout(self.mangotouch.lazy),tm-self.mangotouch.tm>80||self.mangotouch.dry!=dry||self.mangotouch.drx!=drx)self.scrollmom.stop(),self.scrollmom.reset(px,py),self.mangotouch.sy=py,self.mangotouch.ly=py,self.mangotouch.sx=px,self.mangotouch.lx=px,self.mangotouch.dry=dry,self.mangotouch.drx=drx,self.mangotouch.tm=tm;else{self.scrollmom.stop(),self.scrollmom.update(self.mangotouch.sx-dfx,self.mangotouch.sy-dfy),self.mangotouch.tm=tm;var ds=Math.max(Math.abs(self.mangotouch.ly-py),Math.abs(self.mangotouch.lx-px));self.mangotouch.ly=py,self.mangotouch.lx=px,ds>2&&(self.mangotouch.lazy=setTimeout(function(){self.mangotouch.lazy=!1,self.mangotouch.dry=0,self.mangotouch.drx=0,self.mangotouch.tm=0,self.scrollmom.doMomentum(30)},100))}}};var top=self.getScrollTop(),lef=self.getScrollLeft();self.mangotouch={sy:top,ly:top,dry:0,sx:lef,lx:lef,drx:0,lazy:!1,tm:0},self.bind(self.docscroll,"scroll",self.onmangotouch)}else{if(cap.cantouch||self.istouchcapable||self.opt.touchbehavior||cap.hasmstouch){self.scrollmom=new ScrollMomentumClass2D(self),self.ontouchstart=function(e){if(e.pointerType&&2!=e.pointerType&&"touch"!=e.pointerType)return!1;if(self.hasmoving=!1,!self.railslocked){var tg;if(cap.hasmstouch)for(tg=!!e.target&&e.target;tg;){var nc=$(tg).getNiceScroll();if(nc.length>0&&nc[0].me==self.me)break;if(nc.length>0)return!1;if("DIV"==tg.nodeName&&tg.id==self.id)break;tg=!!tg.parentNode&&tg.parentNode}if(self.cancelScroll(),tg=self.getTarget(e)){if(/INPUT/i.test(tg.nodeName)&&/range/i.test(tg.type))return self.stopPropagation(e)}if(!("clientX"in e)&&"changedTouches"in e&&(e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),self.forcescreen){var le=e;e={original:e.original?e.original:e},e.clientX=le.screenX,e.clientY=le.screenY}if(self.rail.drag={x:e.clientX,y:e.clientY,sx:self.scroll.x,sy:self.scroll.y,st:self.getScrollTop(),sl:self.getScrollLeft(),pt:2,dl:!1},self.ispage||!self.opt.directionlockdeadzone)self.rail.drag.dl="f";else{var view={w:$(window).width(),h:$(window).height()},page={w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},maxh=Math.max(0,page.h-view.h),maxw=Math.max(0,page.w-view.w);!self.rail.scrollable&&self.railh.scrollable?self.rail.drag.ck=maxh>0&&"v":self.rail.scrollable&&!self.railh.scrollable?self.rail.drag.ck=maxw>0&&"h":self.rail.drag.ck=!1,self.rail.drag.ck||(self.rail.drag.dl="f")}if(self.opt.touchbehavior&&self.isiframe&&cap.isie){var wp=self.win.position();self.rail.drag.x+=wp.left,self.rail.drag.y+=wp.top}if(self.hasmoving=!1,self.lastmouseup=!1,self.scrollmom.reset(e.clientX,e.clientY),!cap.cantouch&&!this.istouchcapable&&!e.pointerType){if(!(!!tg&&/INPUT|SELECT|TEXTAREA/i.test(tg.nodeName)))return!self.ispage&&cap.hasmousecapture&&tg.setCapture(),self.opt.touchbehavior?(tg.onclick&&!tg._onclick&&(tg._onclick=tg.onclick,tg.onclick=function(e){if(self.hasmoving)return!1;tg._onclick.call(this,e)}),self.cancelEvent(e)):self.stopPropagation(e);/SUBMIT|CANCEL|BUTTON/i.test($(tg).attr("type"))&&(pc={tg:tg,click:!1},self.preventclick=pc)}}},self.ontouchend=function(e){if(!self.rail.drag)return!0;if(2==self.rail.drag.pt){if(e.pointerType&&2!=e.pointerType&&"touch"!=e.pointerType)return!1;if(self.scrollmom.doMomentum(),self.rail.drag=!1,self.hasmoving&&(self.lastmouseup=!0,self.hideCursor(),cap.hasmousecapture&&document.releaseCapture(),!cap.cantouch))return self.cancelEvent(e)}else if(1==self.rail.drag.pt)return self.onmouseup(e)};var moveneedoffset=self.opt.touchbehavior&&self.isiframe&&!cap.hasmousecapture;self.ontouchmove=function(e,byiframe){if(!self.rail.drag)return!1;if(e.targetTouches&&self.opt.preventmultitouchscrolling&&e.targetTouches.length>1)return!1;if(e.pointerType&&2!=e.pointerType&&"touch"!=e.pointerType)return!1;if(2==self.rail.drag.pt){if(cap.cantouch&&cap.isios&&void 0===e.original)return!0;self.hasmoving=!0,self.preventclick&&!self.preventclick.click&&(self.preventclick.click=self.preventclick.tg.onclick||!1,self.preventclick.tg.onclick=self.onpreventclick);if(e=$.extend({original:e},e),"changedTouches"in e&&(e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),self.forcescreen){var le=e;e={original:e.original?e.original:e},e.clientX=le.screenX,e.clientY=le.screenY}var ofy,ofx;if(ofx=ofy=0,moveneedoffset&&!byiframe){var wp=self.win.position();ofx=-wp.left,ofy=-wp.top}var fy=e.clientY+ofy,my=fy-self.rail.drag.y,fx=e.clientX+ofx,mx=fx-self.rail.drag.x,ny=self.rail.drag.st-my;self.ishwscroll&&self.opt.bouncescroll?ny<0?ny=Math.round(ny/2):ny>self.page.maxh&&(ny=self.page.maxh+Math.round((ny-self.page.maxh)/2)):(ny<0&&(ny=0,fy=0),ny>self.page.maxh&&(ny=self.page.maxh,fy=0));var nx;self.railh&&self.railh.scrollable&&(nx=self.isrtlmode?mx-self.rail.drag.sl:self.rail.drag.sl-mx,self.ishwscroll&&self.opt.bouncescroll?nx<0?nx=Math.round(nx/2):nx>self.page.maxw&&(nx=self.page.maxw+Math.round((nx-self.page.maxw)/2)):(nx<0&&(nx=0,fx=0),nx>self.page.maxw&&(nx=self.page.maxw,fx=0)));var grabbed=!1;if(self.rail.drag.dl)grabbed=!0,"v"==self.rail.drag.dl?nx=self.rail.drag.sl:"h"==self.rail.drag.dl&&(ny=self.rail.drag.st);else{var ay=Math.abs(my),ax=Math.abs(mx),dz=self.opt.directionlockdeadzone;if("v"==self.rail.drag.ck){if(ay>dz&&ax<=.3*ay)return self.rail.drag=!1,!0;ax>dz&&(self.rail.drag.dl="f",$("body").scrollTop($("body").scrollTop()))}else if("h"==self.rail.drag.ck){if(ax>dz&&ay<=.3*ax)return self.rail.drag=!1,!0;ay>dz&&(self.rail.drag.dl="f",$("body").scrollLeft($("body").scrollLeft()))}}
if(self.synched("touchmove",function(){self.rail.drag&&2==self.rail.drag.pt&&(self.prepareTransition&&self.prepareTransition(0),self.rail.scrollable&&self.setScrollTop(ny),self.scrollmom.update(fx,fy),self.railh&&self.railh.scrollable?(self.setScrollLeft(nx),self.showCursor(ny,nx)):self.showCursor(ny),cap.isie10&&document.selection.clear())}),cap.ischrome&&self.istouchcapable&&(grabbed=!1),grabbed)return self.cancelEvent(e)}else if(1==self.rail.drag.pt)return self.onmousemove(e)}}if(self.onmousedown=function(e,hronly){if(!self.rail.drag||1==self.rail.drag.pt){if(self.railslocked)return self.cancelEvent(e);self.cancelScroll(),self.rail.drag={x:e.clientX,y:e.clientY,sx:self.scroll.x,sy:self.scroll.y,pt:1,hr:!!hronly};var tg=self.getTarget(e);return!self.ispage&&cap.hasmousecapture&&tg.setCapture(),self.isiframe&&!cap.hasmousecapture&&(self.saved.csspointerevents=self.doc.css("pointer-events"),self.css(self.doc,{"pointer-events":"none"})),self.hasmoving=!1,self.cancelEvent(e)}},self.onmouseup=function(e){if(self.rail.drag)return 1!=self.rail.drag.pt||(cap.hasmousecapture&&document.releaseCapture(),self.isiframe&&!cap.hasmousecapture&&self.doc.css("pointer-events",self.saved.csspointerevents),self.rail.drag=!1,self.hasmoving&&self.triggerScrollEnd(),self.cancelEvent(e))},self.onmousemove=function(e){if(self.rail.drag){if(1!=self.rail.drag.pt)return;if(cap.ischrome&&0==e.which)return self.onmouseup(e);if(self.cursorfreezed=!0,self.hasmoving=!0,self.rail.drag.hr){self.scroll.x=self.rail.drag.sx+(e.clientX-self.rail.drag.x),self.scroll.x<0&&(self.scroll.x=0);var mw=self.scrollvaluemaxw;self.scroll.x>mw&&(self.scroll.x=mw)}else{self.scroll.y=self.rail.drag.sy+(e.clientY-self.rail.drag.y),self.scroll.y<0&&(self.scroll.y=0);var my=self.scrollvaluemax;self.scroll.y>my&&(self.scroll.y=my)}return self.synched("mousemove",function(){self.rail.drag&&1==self.rail.drag.pt&&(self.showCursor(),self.rail.drag.hr?self.hasreversehr?self.doScrollLeft(self.scrollvaluemaxw-Math.round(self.scroll.x*self.scrollratio.x),self.opt.cursordragspeed):self.doScrollLeft(Math.round(self.scroll.x*self.scrollratio.x),self.opt.cursordragspeed):self.doScrollTop(Math.round(self.scroll.y*self.scrollratio.y),self.opt.cursordragspeed))}),self.cancelEvent(e)}self.checkarea=0},cap.cantouch||self.opt.touchbehavior)self.onpreventclick=function(e){if(self.preventclick)return self.preventclick.tg.onclick=self.preventclick.click,self.preventclick=!1,self.cancelEvent(e)},self.bind(self.win,"mousedown",self.ontouchstart),self.onclick=!cap.isios&&function(e){return!self.lastmouseup||(self.lastmouseup=!1,self.cancelEvent(e))},self.opt.grabcursorenabled&&cap.cursorgrabvalue&&(self.css(self.ispage?self.doc:self.win,{cursor:cap.cursorgrabvalue}),self.css(self.rail,{cursor:cap.cursorgrabvalue}));else{var checkSelectionScroll=function(e){if(self.selectiondrag){if(e){var ww=self.win.outerHeight(),df=e.pageY-self.selectiondrag.top;df>0&&df<ww&&(df=0),df>=ww&&(df-=ww),self.selectiondrag.df=df}if(0!=self.selectiondrag.df){var rt=2*-Math.floor(self.selectiondrag.df/6);self.doScrollBy(rt),self.debounced("doselectionscroll",function(){checkSelectionScroll()},50)}}};"getSelection"in document?self.hasTextSelected=function(){return document.getSelection().rangeCount>0}:"selection"in document?self.hasTextSelected=function(){return"None"!=document.selection.type}:self.hasTextSelected=function(){return!1},self.onselectionstart=function(e){self.ispage||(self.selectiondrag=self.win.offset())},self.onselectionend=function(e){self.selectiondrag=!1},self.onselectiondrag=function(e){self.selectiondrag&&self.hasTextSelected()&&self.debounced("selectionscroll",function(){checkSelectionScroll(e)},250)}}cap.hasw3ctouch?(self.css(self.rail,{"touch-action":"none"}),self.css(self.cursor,{"touch-action":"none"}),self.bind(self.win,"pointerdown",self.ontouchstart),self.bind(document,"pointerup",self.ontouchend),self.bind(document,"pointermove",self.ontouchmove)):cap.hasmstouch?(self.css(self.rail,{"-ms-touch-action":"none"}),self.css(self.cursor,{"-ms-touch-action":"none"}),self.bind(self.win,"MSPointerDown",self.ontouchstart),self.bind(document,"MSPointerUp",self.ontouchend),self.bind(document,"MSPointerMove",self.ontouchmove),self.bind(self.cursor,"MSGestureHold",function(e){e.preventDefault()}),self.bind(self.cursor,"contextmenu",function(e){e.preventDefault()})):this.istouchcapable&&(self.bind(self.win,"touchstart",self.ontouchstart),self.bind(document,"touchend",self.ontouchend),self.bind(document,"touchcancel",self.ontouchend),self.bind(document,"touchmove",self.ontouchmove)),(self.opt.cursordragontouch||!cap.cantouch&&!self.opt.touchbehavior)&&(self.rail.css({cursor:"default"}),self.railh&&self.railh.css({cursor:"default"}),self.jqbind(self.rail,"mouseenter",function(){if(!self.ispage&&!self.win.is(":visible"))return!1;self.canshowonmouseevent&&self.showCursor(),self.rail.active=!0}),self.jqbind(self.rail,"mouseleave",function(){self.rail.active=!1,self.rail.drag||self.hideCursor()}),self.opt.sensitiverail&&(self.bind(self.rail,"click",function(e){self.doRailClick(e,!1,!1)}),self.bind(self.rail,"dblclick",function(e){self.doRailClick(e,!0,!1)}),self.bind(self.cursor,"click",function(e){self.cancelEvent(e)}),self.bind(self.cursor,"dblclick",function(e){self.cancelEvent(e)})),self.railh&&(self.jqbind(self.railh,"mouseenter",function(){if(!self.ispage&&!self.win.is(":visible"))return!1;self.canshowonmouseevent&&self.showCursor(),self.rail.active=!0}),self.jqbind(self.railh,"mouseleave",function(){self.rail.active=!1,self.rail.drag||self.hideCursor()}),self.opt.sensitiverail&&(self.bind(self.railh,"click",function(e){self.doRailClick(e,!1,!0)}),self.bind(self.railh,"dblclick",function(e){self.doRailClick(e,!0,!0)}),self.bind(self.cursorh,"click",function(e){self.cancelEvent(e)}),self.bind(self.cursorh,"dblclick",function(e){self.cancelEvent(e)})))),cap.cantouch||self.opt.touchbehavior?(self.bind(cap.hasmousecapture?self.win:document,"mouseup",self.ontouchend),self.bind(document,"mousemove",self.ontouchmove),self.onclick&&self.bind(document,"click",self.onclick),self.opt.cursordragontouch&&(self.bind(self.cursor,"mousedown",self.onmousedown),self.bind(self.cursor,"mouseup",self.onmouseup),self.cursorh&&self.bind(self.cursorh,"mousedown",function(e){self.onmousedown(e,!0)}),self.cursorh&&self.bind(self.cursorh,"mouseup",self.onmouseup))):(self.bind(cap.hasmousecapture?self.win:document,"mouseup",self.onmouseup),self.bind(document,"mousemove",self.onmousemove),self.onclick&&self.bind(document,"click",self.onclick),self.bind(self.cursor,"mousedown",self.onmousedown),self.bind(self.cursor,"mouseup",self.onmouseup),self.railh&&(self.bind(self.cursorh,"mousedown",function(e){self.onmousedown(e,!0)}),self.bind(self.cursorh,"mouseup",self.onmouseup)),!self.ispage&&self.opt.enablescrollonselection&&(self.bind(self.win[0],"mousedown",self.onselectionstart),self.bind(document,"mouseup",self.onselectionend),self.bind(self.cursor,"mouseup",self.onselectionend),self.cursorh&&self.bind(self.cursorh,"mouseup",self.onselectionend),self.bind(document,"mousemove",self.onselectiondrag)),self.zoom&&(self.jqbind(self.zoom,"mouseenter",function(){self.canshowonmouseevent&&self.showCursor(),self.rail.active=!0}),self.jqbind(self.zoom,"mouseleave",function(){self.rail.active=!1,self.rail.drag||self.hideCursor()}))),self.opt.enablemousewheel&&(self.isiframe||self.bind(cap.isie&&self.ispage?document:self.win,"mousewheel",self.onmousewheel),self.bind(self.rail,"mousewheel",self.onmousewheel),self.railh&&self.bind(self.railh,"mousewheel",self.onmousewheelhr)),self.ispage||cap.cantouch||/HTML|^BODY/.test(self.win[0].nodeName)||(self.win.attr("tabindex")||self.win.attr({tabindex:tabindexcounter++}),self.jqbind(self.win,"focus",function(e){domfocus=self.getTarget(e).id||!0,self.hasfocus=!0,self.canshowonmouseevent&&self.noticeCursor()}),self.jqbind(self.win,"blur",function(e){domfocus=!1,self.hasfocus=!1}),self.jqbind(self.win,"mouseenter",function(e){mousefocus=self.getTarget(e).id||!0,self.hasmousefocus=!0,self.canshowonmouseevent&&self.noticeCursor()}),self.jqbind(self.win,"mouseleave",function(){mousefocus=!1,self.hasmousefocus=!1,self.rail.drag||self.hideCursor()}))}if(self.onkeypress=function(e){if(self.railslocked&&0==self.page.maxh)return!0;e=e?e:window.e;var tg=self.getTarget(e);if(tg&&/INPUT|TEXTAREA|SELECT|OPTION/.test(tg.nodeName)){if(!(tg.getAttribute("type")||tg.type||!1)||!/submit|button|cancel/i.tp)return!0}if($(tg).attr("contenteditable"))return!0;if(self.hasfocus||self.hasmousefocus&&!domfocus||self.ispage&&!domfocus&&!mousefocus){var key=e.keyCode;if(self.railslocked&&27!=key)return self.cancelEvent(e);var ctrl=e.ctrlKey||!1,shift=e.shiftKey||!1,ret=!1;switch(key){case 38:case 63233:self.doScrollBy(72),ret=!0;break;case 40:case 63235:self.doScrollBy(-72),ret=!0;break;case 37:case 63232:self.railh&&(ctrl?self.doScrollLeft(0):self.doScrollLeftBy(72),ret=!0);break;case 39:case 63234:self.railh&&(ctrl?self.doScrollLeft(self.page.maxw):self.doScrollLeftBy(-72),ret=!0);break;case 33:case 63276:self.doScrollBy(self.view.h),ret=!0;break;case 34:case 63277:self.doScrollBy(-self.view.h),ret=!0;break;case 36:case 63273:self.railh&&ctrl?self.doScrollPos(0,0):self.doScrollTo(0),ret=!0;break;case 35:case 63275:self.railh&&ctrl?self.doScrollPos(self.page.maxw,self.page.maxh):self.doScrollTo(self.page.maxh),ret=!0;break;case 32:self.opt.spacebarenabled&&(shift?self.doScrollBy(self.view.h):self.doScrollBy(-self.view.h),ret=!0);break;case 27:self.zoomactive&&(self.doZoom(),ret=!0)}if(ret)return self.cancelEvent(e)}},self.opt.enablekeyboard&&self.bind(document,cap.isopera&&!cap.isopera12?"keypress":"keydown",self.onkeypress),self.bind(document,"keydown",function(e){(e.ctrlKey||!1)&&(self.wheelprevented=!0)}),self.bind(document,"keyup",function(e){e.ctrlKey||!1||(self.wheelprevented=!1)}),self.bind(window,"blur",function(e){self.wheelprevented=!1}),self.bind(window,"resize",self.lazyResize),self.bind(window,"orientationchange",self.lazyResize),self.bind(window,"load",self.lazyResize),cap.ischrome&&!self.ispage&&!self.haswrapper){var tmp=self.win.attr("style"),ww=parseFloat(self.win.css("width"))+1;self.win.css("width",ww),self.synched("chromefix",function(){self.win.attr("style",tmp)})}self.onAttributeChange=function(e){self.lazyResize(self.isieold?250:30)},ClsMutationObserver!==!1&&(self.observerbody=new ClsMutationObserver(function(mutations){if(mutations.forEach(function(mut){if("attributes"==mut.type)return $("body").hasClass("modal-open")&&!$.contains($(".modal-dialog")[0],self.doc[0])?self.hide():self.show()}),document.body.scrollHeight!=self.page.maxh)return self.lazyResize(30)}),self.observerbody.observe(document.body,{childList:!0,subtree:!0,characterData:!1,attributes:!0,attributeFilter:["class"]})),self.ispage||self.haswrapper||(ClsMutationObserver!==!1?(self.observer=new ClsMutationObserver(function(mutations){mutations.forEach(self.onAttributeChange)}),self.observer.observe(self.win[0],{childList:!0,characterData:!1,attributes:!0,subtree:!1}),self.observerremover=new ClsMutationObserver(function(mutations){mutations.forEach(function(mo){if(mo.removedNodes.length>0)for(var dd in mo.removedNodes)if(self&&mo.removedNodes[dd]==self.win[0])return self.remove()})}),self.observerremover.observe(self.win[0].parentNode,{childList:!0,characterData:!1,attributes:!1,subtree:!1})):(self.bind(self.win,cap.isie&&!cap.isie9?"propertychange":"DOMAttrModified",self.onAttributeChange),cap.isie9&&self.win[0].attachEvent("onpropertychange",self.onAttributeChange),self.bind(self.win,"DOMNodeRemoved",function(e){e.target==self.win[0]&&self.remove()}))),!self.ispage&&self.opt.boxzoom&&self.bind(window,"resize",self.resizeZoom),self.istextarea&&(self.bind(self.win,"keydown",self.lazyResize),self.bind(self.win,"mouseup",self.lazyResize)),self.lazyResize(30)}if("IFRAME"==this.doc[0].nodeName){var oniframeload=function(){self.iframexd=!1;var doc;try{doc="contentDocument"in this?this.contentDocument:this.contentWindow.document;doc.domain}catch(e){self.iframexd=!0,doc=!1}if(self.iframexd)return"console"in window&&console.log("NiceScroll error: policy restriced iframe"),!0;if(self.forcescreen=!0,self.isiframe&&(self.iframe={doc:$(doc),html:self.doc.contents().find("html")[0],body:self.doc.contents().find("body")[0]},self.getContentSize=function(){return{w:Math.max(self.iframe.html.scrollWidth,self.iframe.body.scrollWidth),h:Math.max(self.iframe.html.scrollHeight,self.iframe.body.scrollHeight)}},self.docscroll=$(self.iframe.body)),!cap.isios&&self.opt.iframeautoresize&&!self.isiframe){self.win.scrollTop(0),self.doc.height("");var hh=Math.max(doc.getElementsByTagName("html")[0].scrollHeight,doc.body.scrollHeight);self.doc.height(hh)}self.lazyResize(30),cap.isie7&&self.css($(self.iframe.html),{"overflow-y":"hidden"}),self.css($(self.iframe.body),{"overflow-y":"hidden"}),cap.isios&&self.haswrapper&&self.css($(doc.body),{"-webkit-transform":"translate3d(0,0,0)"}),"contentWindow"in this?self.bind(this.contentWindow,"scroll",self.onscroll):self.bind(doc,"scroll",self.onscroll),self.opt.enablemousewheel&&self.bind(doc,"mousewheel",self.onmousewheel),self.opt.enablekeyboard&&self.bind(doc,cap.isopera?"keypress":"keydown",self.onkeypress),(cap.cantouch||self.opt.touchbehavior)&&(self.bind(doc,"mousedown",self.ontouchstart),self.bind(doc,"mousemove",function(e){return self.ontouchmove(e,!0)}),self.opt.grabcursorenabled&&cap.cursorgrabvalue&&self.css($(doc.body),{cursor:cap.cursorgrabvalue})),self.bind(doc,"mouseup",self.ontouchend),self.zoom&&(self.opt.dblclickzoom&&self.bind(doc,"dblclick",self.doZoom),self.ongesturezoom&&self.bind(doc,"gestureend",self.ongesturezoom))};this.doc[0].readyState&&"complete"==this.doc[0].readyState&&setTimeout(function(){oniframeload.call(self.doc[0],!1)},500),self.bind(this.doc,"load",oniframeload)}},this.showCursor=function(py,px){if(self.cursortimeout&&(clearTimeout(self.cursortimeout),self.cursortimeout=0),self.rail){if(self.autohidedom&&(self.autohidedom.stop().css({opacity:self.opt.cursoropacitymax}),self.cursoractive=!0),self.rail.drag&&1==self.rail.drag.pt||(void 0!==py&&py!==!1&&(self.scroll.y=Math.round(1*py/self.scrollratio.y)),void 0!==px&&(self.scroll.x=Math.round(1*px/self.scrollratio.x))),self.cursor.css({height:self.cursorheight,top:self.scroll.y}),self.cursorh){var lx=self.hasreversehr?self.scrollvaluemaxw-self.scroll.x:self.scroll.x;!self.rail.align&&self.rail.visibility?self.cursorh.css({width:self.cursorwidth,left:lx+self.rail.width}):self.cursorh.css({width:self.cursorwidth,left:lx}),self.cursoractive=!0}self.zoom&&self.zoom.stop().css({opacity:self.opt.cursoropacitymax})}},this.hideCursor=function(tm){self.cursortimeout||self.rail&&self.autohidedom&&(self.hasmousefocus&&"leave"==self.opt.autohidemode||(self.cursortimeout=setTimeout(function(){self.rail.active&&self.showonmouseevent||(self.autohidedom.stop().animate({opacity:self.opt.cursoropacitymin}),self.zoom&&self.zoom.stop().animate({opacity:self.opt.cursoropacitymin}),self.cursoractive=!1),self.cursortimeout=0},tm||self.opt.hidecursordelay)))},this.noticeCursor=function(tm,py,px){self.showCursor(py,px),self.rail.active||self.hideCursor(tm)},this.getContentSize=self.ispage?function(){return{w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}}:self.haswrapper?function(){return{w:self.doc.outerWidth()+parseInt(self.win.css("paddingLeft"))+parseInt(self.win.css("paddingRight")),h:self.doc.outerHeight()+parseInt(self.win.css("paddingTop"))+parseInt(self.win.css("paddingBottom"))}}:function(){return{w:self.docscroll[0].scrollWidth,h:self.docscroll[0].scrollHeight}},this.onResize=function(e,page){if(!self||!self.win)return!1;if(!self.haswrapper&&!self.ispage){if("none"==self.win.css("display"))return self.visibility&&self.hideRail().hideRailHr(),!1;self.hidden||self.visibility||self.showRail().showRailHr()}var premaxh=self.page.maxh,premaxw=self.page.maxw,preview={h:self.view.h,w:self.view.w};if(self.view={w:self.ispage?self.win.width():parseInt(self.win[0].clientWidth),h:self.ispage?self.win.height():parseInt(self.win[0].clientHeight)},self.page=page?page:self.getContentSize(),self.page.maxh=Math.max(0,self.page.h-self.view.h),self.page.maxw=Math.max(0,self.page.w-self.view.w),self.page.maxh==premaxh&&self.page.maxw==premaxw&&self.view.w==preview.w&&self.view.h==preview.h){if(self.ispage)return self;var pos=self.win.offset();if(self.lastposition){var lst=self.lastposition;if(lst.top==pos.top&&lst.left==pos.left)return self}self.lastposition=pos}return 0==self.page.maxh?(self.hideRail(),self.scrollvaluemax=0,self.scroll.y=0,self.scrollratio.y=0,self.cursorheight=0,self.setScrollTop(0),self.rail&&(self.rail.scrollable=!1)):(self.page.maxh-=self.opt.railpadding.top+self.opt.railpadding.bottom,self.rail.scrollable=!0),0==self.page.maxw?(self.hideRailHr(),self.scrollvaluemaxw=0,self.scroll.x=0,self.scrollratio.x=0,self.cursorwidth=0,self.setScrollLeft(0),self.railh&&(self.railh.scrollable=!1)):(self.page.maxw-=self.opt.railpadding.left+self.opt.railpadding.right,self.railh&&(self.railh.scrollable=self.opt.horizrailenabled)),self.railslocked=self.locked||0==self.page.maxh&&0==self.page.maxw,self.railslocked?(self.ispage||self.updateScrollBar(self.view),!1):(self.hidden||self.visibility?!self.railh||self.hidden||self.railh.visibility||self.showRailHr():self.showRail().showRailHr(),self.istextarea&&self.win.css("resize")&&"none"!=self.win.css("resize")&&(self.view.h-=20),self.cursorheight=Math.min(self.view.h,Math.round(self.view.h*(self.view.h/self.page.h))),self.cursorheight=self.opt.cursorfixedheight?self.opt.cursorfixedheight:Math.max(self.opt.cursorminheight,self.cursorheight),self.cursorwidth=Math.min(self.view.w,Math.round(self.view.w*(self.view.w/self.page.w))),self.cursorwidth=self.opt.cursorfixedheight?self.opt.cursorfixedheight:Math.max(self.opt.cursorminheight,self.cursorwidth),self.scrollvaluemax=self.view.h-self.cursorheight-self.cursor.hborder-(self.opt.railpadding.top+self.opt.railpadding.bottom),self.railh&&(self.railh.width=self.page.maxh>0?self.view.w-self.rail.width:self.view.w,self.scrollvaluemaxw=self.railh.width-self.cursorwidth-self.cursorh.wborder-(self.opt.railpadding.left+self.opt.railpadding.right)),self.ispage||self.updateScrollBar(self.view),self.scrollratio={x:self.page.maxw/self.scrollvaluemaxw,y:self.page.maxh/self.scrollvaluemax},self.getScrollTop()>self.page.maxh?self.doScrollTop(self.page.maxh):(self.scroll.y=Math.round(self.getScrollTop()*(1/self.scrollratio.y)),self.scroll.x=Math.round(self.getScrollLeft()*(1/self.scrollratio.x)),self.cursoractive&&self.noticeCursor()),self.scroll.y&&0==self.getScrollTop()&&self.doScrollTo(Math.floor(self.scroll.y*self.scrollratio.y)),self)},this.resize=self.onResize,this.lazyResize=function(tm){return tm=isNaN(tm)?30:tm,self.debounced("resize",self.resize,tm),self},this.jqbind=function(dom,name,fn){self.events.push({e:dom,n:name,f:fn,q:!0}),$(dom).bind(name,fn)},this.bind=function(dom,name,fn,bubble){var el="jquery"in dom?dom[0]:dom;if("mousewheel"==name)if("onwheel"in self.win)self._bind(el,"wheel",fn,bubble||!1);else{var wname=void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";_modernWheelEvent(el,wname,fn,bubble||!1),"DOMMouseScroll"==wname&&_modernWheelEvent(el,"MozMousePixelScroll",fn,bubble||!1)}else if(el.addEventListener){if(cap.cantouch&&/mouseup|mousedown|mousemove/.test(name)){var tt="mousedown"==name?"touchstart":"mouseup"==name?"touchend":"touchmove";self._bind(el,tt,function(e){if(e.touches){if(e.touches.length<2){var ev=e.touches.length?e.touches[0]:e;ev.original=e,fn.call(this,ev)}}else if(e.changedTouches){var ev=e.changedTouches[0];ev.original=e,fn.call(this,ev)}},bubble||!1)}self._bind(el,name,fn,bubble||!1),cap.cantouch&&"mouseup"==name&&self._bind(el,"touchcancel",fn,bubble||!1)}else self._bind(el,name,function(e){return e=e||window.event||!1,e&&e.srcElement&&(e.target=e.srcElement),"pageY"in e||(e.pageX=e.clientX+document.documentElement.scrollLeft,e.pageY=e.clientY+document.documentElement.scrollTop),fn.call(el,e)!==!1&&bubble!==!1||self.cancelEvent(e)})},cap.haseventlistener?(this._bind=function(el,name,fn,bubble){self.events.push({e:el,n:name,f:fn,b:bubble,q:!1}),el.addEventListener(name,fn,bubble||!1)},this.cancelEvent=function(e){if(!e)return!1;var e=e.original?e.original:e;return e.preventDefault(),e.stopPropagation(),e.preventManipulation&&e.preventManipulation(),!1},this.stopPropagation=function(e){if(!e)return!1;var e=e.original?e.original:e;return e.stopPropagation(),!1},this._unbind=function(el,name,fn,bub){el.removeEventListener(name,fn,bub)}):(this._bind=function(el,name,fn,bubble){self.events.push({e:el,n:name,f:fn,b:bubble,q:!1}),el.attachEvent?el.attachEvent("on"+name,fn):el["on"+name]=fn},this.cancelEvent=function(e){var e=window.event||!1;return!!e&&(e.cancelBubble=!0,e.cancel=!0,e.returnValue=!1,!1)},this.stopPropagation=function(e){var e=window.event||!1;return!!e&&(e.cancelBubble=!0,!1)},this._unbind=function(el,name,fn,bub){el.detachEvent?el.detachEvent("on"+name,fn):el["on"+name]=!1}),this.unbindAll=function(){for(var a=0;a<self.events.length;a++){var r=self.events[a];r.q?r.e.unbind(r.n,r.f):self._unbind(r.e,r.n,r.f,r.b)}},this.showRail=function(){return 0==self.page.maxh||!self.ispage&&"none"==self.win.css("display")||(self.visibility=!0,self.rail.visibility=!0,self.rail.css("display","block")),self},this.showRailHr=function(){return self.railh?(0==self.page.maxw||!self.ispage&&"none"==self.win.css("display")||(self.railh.visibility=!0,self.railh.css("display","block")),self):self},this.hideRail=function(){return self.visibility=!1,self.rail.visibility=!1,self.rail.css("display","none"),self},this.hideRailHr=function(){return self.railh?(self.railh.visibility=!1,self.railh.css("display","none"),self):self},this.show=function(){return self.hidden=!1,self.railslocked=!1,self.showRail().showRailHr()},this.hide=function(){return self.hidden=!0,self.railslocked=!0,self.hideRail().hideRailHr()},this.toggle=function(){return self.hidden?self.show():self.hide()},this.remove=function(){self.stop(),self.cursortimeout&&clearTimeout(self.cursortimeout),self.debouncedelayed&&clearTimeout(self.debouncedelayed),self.doZoomOut(),self.unbindAll(),cap.isie9&&self.win[0].detachEvent("onpropertychange",self.onAttributeChange),self.observer!==!1&&self.observer.disconnect(),self.observerremover!==!1&&self.observerremover.disconnect(),self.observerbody!==!1&&self.observerbody.disconnect(),self.events=null,self.cursor&&self.cursor.remove(),self.cursorh&&self.cursorh.remove(),self.rail&&self.rail.remove(),self.railh&&self.railh.remove(),self.zoom&&self.zoom.remove();for(var a=0;a<self.saved.css.length;a++){var d=self.saved.css[a];d[0].css(d[1],void 0===d[2]?"":d[2])}self.saved=!1,self.me.data("__nicescroll","");var lst=$.nicescroll;lst.each(function(i){if(this&&this.id===self.id){delete lst[i];for(var b=++i;b<lst.length;b++,i++)lst[i]=lst[b];lst.length--,lst.length&&delete lst[lst.length]}});for(var i in self)self[i]=null,delete self[i];self=null},this.scrollstart=function(fn){return this.onscrollstart=fn,self},this.scrollend=function(fn){return this.onscrollend=fn,self},this.scrollcancel=function(fn){return this.onscrollcancel=fn,self},this.zoomin=function(fn){return this.onzoomin=fn,self},this.zoomout=function(fn){return this.onzoomout=fn,self},this.isScrollable=function(e){var dom=e.target?e.target:e;if("OPTION"==dom.nodeName)return!0;for(;dom&&1==dom.nodeType&&!/^BODY|HTML/.test(dom.nodeName);){var dd=$(dom),ov=dd.css("overflowY")||dd.css("overflowX")||dd.css("overflow")||"";if(/scroll|auto/.test(ov))return dom.clientHeight!=dom.scrollHeight;dom=!!dom.parentNode&&dom.parentNode}return!1},this.getViewport=function(me){for(var dom=!(!me||!me.parentNode)&&me.parentNode;dom&&1==dom.nodeType&&!/^BODY|HTML/.test(dom.nodeName);){var dd=$(dom);if(/fixed|absolute/.test(dd.css("position")))return dd;var ov=dd.css("overflowY")||dd.css("overflowX")||dd.css("overflow")||"";if(/scroll|auto/.test(ov)&&dom.clientHeight!=dom.scrollHeight)return dd;if(dd.getNiceScroll().length>0)return dd;dom=!!dom.parentNode&&dom.parentNode}return!1},this.triggerScrollEnd=function(){if(self.onscrollend){var px=self.getScrollLeft(),py=self.getScrollTop(),info={type:"scrollend",current:{x:px,y:py},end:{x:px,y:py}};self.onscrollend.call(self,info)}},this.onmousewheel=function(e){if(!self.wheelprevented){if(self.railslocked)return self.debounced("checkunlock",self.resize,250),!0;if(self.rail.drag)return self.cancelEvent(e);if("auto"==self.opt.oneaxismousemode&&0!=e.deltaX&&(self.opt.oneaxismousemode=!1),self.opt.oneaxismousemode&&0==e.deltaX&&!self.rail.scrollable)return!self.railh||!self.railh.scrollable||self.onmousewheelhr(e);var nw=+new Date,chk=!1;if(self.opt.preservenativescrolling&&self.checkarea+600<nw&&(self.nativescrollingarea=self.isScrollable(e),chk=!0),self.checkarea=nw,self.nativescrollingarea)return!0;var ret=execScrollWheel(e,!1,chk);return ret&&(self.checkarea=0),ret}},this.onmousewheelhr=function(e){if(!self.wheelprevented){if(self.railslocked||!self.railh.scrollable)return!0;if(self.rail.drag)return self.cancelEvent(e);var nw=+new Date,chk=!1;return self.opt.preservenativescrolling&&self.checkarea+600<nw&&(self.nativescrollingarea=self.isScrollable(e),chk=!0),self.checkarea=nw,!!self.nativescrollingarea||(self.railslocked?self.cancelEvent(e):execScrollWheel(e,!0,chk))}},this.stop=function(){return self.cancelScroll(),self.scrollmon&&self.scrollmon.stop(),self.cursorfreezed=!1,self.scroll.y=Math.round(self.getScrollTop()*(1/self.scrollratio.y)),self.noticeCursor(),self},this.getTransitionSpeed=function(dif){var sp=Math.round(10*self.opt.scrollspeed),ex=Math.min(sp,Math.round(dif/20*self.opt.scrollspeed));return ex>20?ex:0},self.opt.smoothscroll?self.ishwscroll&&cap.hastransition&&self.opt.usetransition&&self.opt.smoothscroll?(this.prepareTransition=function(dif,istime){var ex=istime?dif>20?dif:0:self.getTransitionSpeed(dif),trans=ex?cap.prefixstyle+"transform "+ex+"ms ease-out":"";return self.lasttransitionstyle&&self.lasttransitionstyle==trans||(self.lasttransitionstyle=trans,self.doc.css(cap.transitionstyle,trans)),ex},this.doScrollLeft=function(x,spd){var y=self.scrollrunning?self.newscrolly:self.getScrollTop();self.doScrollPos(x,y,spd)},this.doScrollTop=function(y,spd){var x=self.scrollrunning?self.newscrollx:self.getScrollLeft();self.doScrollPos(x,y,spd)},this.doScrollPos=function(x,y,spd){var py=self.getScrollTop(),px=self.getScrollLeft();return((self.newscrolly-py)*(y-py)<0||(self.newscrollx-px)*(x-px)<0)&&self.cancelScroll(),0==self.opt.bouncescroll&&(y<0?y=0:y>self.page.maxh&&(y=self.page.maxh),x<0?x=0:x>self.page.maxw&&(x=self.page.maxw)),(!self.scrollrunning||x!=self.newscrollx||y!=self.newscrolly)&&(self.newscrolly=y,self.newscrollx=x,self.newscrollspeed=spd||!1,!self.timer&&void(self.timer=setTimeout(function(){var top=self.getScrollTop(),lft=self.getScrollLeft(),dst={};dst.x=x-lft,dst.y=y-top,dst.px=lft,dst.py=top;var dd=Math.round(Math.sqrt(Math.pow(dst.x,2)+Math.pow(dst.y,2))),ms=self.newscrollspeed&&self.newscrollspeed>1?self.newscrollspeed:self.getTransitionSpeed(dd);if(self.newscrollspeed&&self.newscrollspeed<=1&&(ms*=self.newscrollspeed),self.prepareTransition(ms,!0),self.timerscroll&&self.timerscroll.tm&&clearInterval(self.timerscroll.tm),ms>0){if(!self.scrollrunning&&self.onscrollstart){var info={type:"scrollstart",current:{x:lft,y:top},request:{x:x,y:y},end:{x:self.newscrollx,y:self.newscrolly},speed:ms};self.onscrollstart.call(self,info)}cap.transitionend?self.scrollendtrapped||(self.scrollendtrapped=!0,self.bind(self.doc,cap.transitionend,self.onScrollTransitionEnd,!1)):(self.scrollendtrapped&&clearTimeout(self.scrollendtrapped),self.scrollendtrapped=setTimeout(self.onScrollTransitionEnd,ms));var py=top,px=lft;self.timerscroll={bz:new BezierClass(py,self.newscrolly,ms,0,0,.58,1),bh:new BezierClass(px,self.newscrollx,ms,0,0,.58,1)},self.cursorfreezed||(self.timerscroll.tm=setInterval(function(){self.showCursor(self.getScrollTop(),self.getScrollLeft())},60))}self.synched("doScroll-set",function(){self.timer=0,self.scrollendtrapped&&(self.scrollrunning=!0),self.setScrollTop(self.newscrolly),self.setScrollLeft(self.newscrollx),self.scrollendtrapped||self.onScrollTransitionEnd()})},50)))},this.cancelScroll=function(){if(!self.scrollendtrapped)return!0;var py=self.getScrollTop(),px=self.getScrollLeft();return self.scrollrunning=!1,cap.transitionend||clearTimeout(cap.transitionend),self.scrollendtrapped=!1,self._unbind(self.doc[0],cap.transitionend,self.onScrollTransitionEnd),self.prepareTransition(0),self.setScrollTop(py),self.railh&&self.setScrollLeft(px),self.timerscroll&&self.timerscroll.tm&&clearInterval(self.timerscroll.tm),self.timerscroll=!1,self.cursorfreezed=!1,self.showCursor(py,px),self},this.onScrollTransitionEnd=function(){self.scrollendtrapped&&self._unbind(self.doc[0],cap.transitionend,self.onScrollTransitionEnd),self.scrollendtrapped=!1,self.prepareTransition(0),self.timerscroll&&self.timerscroll.tm&&clearInterval(self.timerscroll.tm),self.timerscroll=!1;var py=self.getScrollTop(),px=self.getScrollLeft();if(self.setScrollTop(py),self.railh&&self.setScrollLeft(px),self.noticeCursor(!1,py,px),self.cursorfreezed=!1,py<0?py=0:py>self.page.maxh&&(py=self.page.maxh),px<0?px=0:px>self.page.maxw&&(px=self.page.maxw),py!=self.newscrolly||px!=self.newscrollx)return self.doScrollPos(px,py,self.opt.snapbackspeed);self.onscrollend&&self.scrollrunning&&self.triggerScrollEnd(),self.scrollrunning=!1}):(this.doScrollLeft=function(x,spd){var y=self.scrollrunning?self.newscrolly:self.getScrollTop();self.doScrollPos(x,y,spd)},this.doScrollTop=function(y,spd){var x=self.scrollrunning?self.newscrollx:self.getScrollLeft();self.doScrollPos(x,y,spd)},this.doScrollPos=function(x,y,spd){function scrolling(){if(self.cancelAnimationFrame)return!0;if(self.scrollrunning=!0,sync=1-sync)return self.timer=setAnimationFrame(scrolling)||1;var sx,sy,done=0,sc=sy=self.getScrollTop();if(self.dst.ay){sc=self.bzscroll?self.dst.py+self.bzscroll.getNow()*self.dst.ay:self.newscrolly;var dr=sc-sy;(dr<0&&sc<self.newscrolly||dr>0&&sc>self.newscrolly)&&(sc=self.newscrolly),self.setScrollTop(sc),sc==self.newscrolly&&(done=1)}else done=1;var scx=sx=self.getScrollLeft();if(self.dst.ax){scx=self.bzscroll?self.dst.px+self.bzscroll.getNow()*self.dst.ax:self.newscrollx;var dr=scx-sx;(dr<0&&scx<self.newscrollx||dr>0&&scx>self.newscrollx)&&(scx=self.newscrollx),self.setScrollLeft(scx),scx==self.newscrollx&&(done+=1)}else done+=1;2==done?(self.timer=0,self.cursorfreezed=!1,self.bzscroll=!1,self.scrollrunning=!1,sc<0?sc=0:sc>self.page.maxh&&(sc=self.page.maxh),scx<0?scx=0:scx>self.page.maxw&&(scx=self.page.maxw),scx!=self.newscrollx||sc!=self.newscrolly?self.doScrollPos(scx,sc):self.onscrollend&&self.triggerScrollEnd()):self.timer=setAnimationFrame(scrolling)||1}var y=void 0===y||y===!1?self.getScrollTop(!0):y;if(self.timer&&self.newscrolly==y&&self.newscrollx==x)return!0;self.timer&&clearAnimationFrame(self.timer),self.timer=0;var py=self.getScrollTop(),px=self.getScrollLeft();((self.newscrolly-py)*(y-py)<0||(self.newscrollx-px)*(x-px)<0)&&self.cancelScroll(),self.newscrolly=y,self.newscrollx=x,self.bouncescroll&&self.rail.visibility||(self.newscrolly<0?self.newscrolly=0:self.newscrolly>self.page.maxh&&(self.newscrolly=self.page.maxh)),self.bouncescroll&&self.railh.visibility||(self.newscrollx<0?self.newscrollx=0:self.newscrollx>self.page.maxw&&(self.newscrollx=self.page.maxw)),self.dst={},self.dst.x=x-px,self.dst.y=y-py,self.dst.px=px,self.dst.py=py;var dst=Math.round(Math.sqrt(Math.pow(self.dst.x,2)+Math.pow(self.dst.y,2)));self.dst.ax=self.dst.x/dst,self.dst.ay=self.dst.y/dst;var pa=0,pe=dst;0==self.dst.x?(pa=py,pe=y,self.dst.ay=1,self.dst.py=0):0==self.dst.y&&(pa=px,pe=x,self.dst.ax=1,self.dst.px=0);var ms=self.getTransitionSpeed(dst);if(spd&&spd<=1&&(ms*=spd),
self.bzscroll=ms>0&&(self.bzscroll?self.bzscroll.update(pe,ms):new BezierClass(pa,pe,ms,0,1,0,1)),!self.timer){(py==self.page.maxh&&y>=self.page.maxh||px==self.page.maxw&&x>=self.page.maxw)&&self.checkContentSize();var sync=1;if(self.cancelAnimationFrame=!1,self.timer=1,self.onscrollstart&&!self.scrollrunning){var info={type:"scrollstart",current:{x:px,y:py},request:{x:x,y:y},end:{x:self.newscrollx,y:self.newscrolly},speed:ms};self.onscrollstart.call(self,info)}scrolling(),(py==self.page.maxh&&y>=py||px==self.page.maxw&&x>=px)&&self.checkContentSize(),self.noticeCursor()}},this.cancelScroll=function(){return self.timer&&clearAnimationFrame(self.timer),self.timer=0,self.bzscroll=!1,self.scrollrunning=!1,self}):(this.doScrollLeft=function(x,spd){var y=self.getScrollTop();self.doScrollPos(x,y,spd)},this.doScrollTop=function(y,spd){var x=self.getScrollLeft();self.doScrollPos(x,y,spd)},this.doScrollPos=function(x,y,spd){var nx=x>self.page.maxw?self.page.maxw:x;nx<0&&(nx=0);var ny=y>self.page.maxh?self.page.maxh:y;ny<0&&(ny=0),self.synched("scroll",function(){self.setScrollTop(ny),self.setScrollLeft(nx)})},this.cancelScroll=function(){}),this.doScrollBy=function(stp,relative){var ny=0;if(relative)ny=Math.floor((self.scroll.y-stp)*self.scrollratio.y);else{ny=(self.timer?self.newscrolly:self.getScrollTop(!0))-stp}if(self.bouncescroll){var haf=Math.round(self.view.h/2);ny<-haf?ny=-haf:ny>self.page.maxh+haf&&(ny=self.page.maxh+haf)}self.cursorfreezed=!1;var py=self.getScrollTop(!0);return ny<0&&py<=0?self.noticeCursor():ny>self.page.maxh&&py>=self.page.maxh?(self.checkContentSize(),self.noticeCursor()):void self.doScrollTop(ny)},this.doScrollLeftBy=function(stp,relative){var nx=0;if(relative)nx=Math.floor((self.scroll.x-stp)*self.scrollratio.x);else{nx=(self.timer?self.newscrollx:self.getScrollLeft(!0))-stp}if(self.bouncescroll){var haf=Math.round(self.view.w/2);nx<-haf?nx=-haf:nx>self.page.maxw+haf&&(nx=self.page.maxw+haf)}self.cursorfreezed=!1;var px=self.getScrollLeft(!0);return nx<0&&px<=0?self.noticeCursor():nx>self.page.maxw&&px>=self.page.maxw?self.noticeCursor():void self.doScrollLeft(nx)},this.doScrollTo=function(pos,relative){var ny=relative?Math.round(pos*self.scrollratio.y):pos;ny<0?ny=0:ny>self.page.maxh&&(ny=self.page.maxh),self.cursorfreezed=!1,self.doScrollTop(pos)},this.checkContentSize=function(){var pg=self.getContentSize();pg.h==self.page.h&&pg.w==self.page.w||self.resize(!1,pg)},self.onscroll=function(e){self.rail.drag||self.cursorfreezed||self.synched("scroll",function(){self.scroll.y=Math.round(self.getScrollTop()*(1/self.scrollratio.y)),self.railh&&(self.scroll.x=Math.round(self.getScrollLeft()*(1/self.scrollratio.x))),self.noticeCursor()})},self.bind(self.docscroll,"scroll",self.onscroll),this.doZoomIn=function(e){if(!self.zoomactive){self.zoomactive=!0,self.zoomrestore={style:{}};var lst=["position","top","left","zIndex","backgroundColor","marginTop","marginBottom","marginLeft","marginRight"],win=self.win[0].style;for(var a in lst){var pp=lst[a];self.zoomrestore.style[pp]=void 0!==win[pp]?win[pp]:""}self.zoomrestore.style.width=self.win.css("width"),self.zoomrestore.style.height=self.win.css("height"),self.zoomrestore.padding={w:self.win.outerWidth()-self.win.width(),h:self.win.outerHeight()-self.win.height()},cap.isios4&&(self.zoomrestore.scrollTop=$(window).scrollTop(),$(window).scrollTop(0)),self.win.css({position:cap.isios4?"absolute":"fixed",top:0,left:0,"z-index":globalmaxzindex+100,margin:"0px"});var bkg=self.win.css("backgroundColor");return(""==bkg||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(bkg))&&self.win.css("backgroundColor","#fff"),self.rail.css({"z-index":globalmaxzindex+101}),self.zoom.css({"z-index":globalmaxzindex+102}),self.zoom.css("backgroundPosition","0px -18px"),self.resizeZoom(),self.onzoomin&&self.onzoomin.call(self),self.cancelEvent(e)}},this.doZoomOut=function(e){if(self.zoomactive)return self.zoomactive=!1,self.win.css("margin",""),self.win.css(self.zoomrestore.style),cap.isios4&&$(window).scrollTop(self.zoomrestore.scrollTop),self.rail.css({"z-index":self.zindex}),self.zoom.css({"z-index":self.zindex}),self.zoomrestore=!1,self.zoom.css("backgroundPosition","0px 0px"),self.onResize(),self.onzoomout&&self.onzoomout.call(self),self.cancelEvent(e)},this.doZoom=function(e){return self.zoomactive?self.doZoomOut(e):self.doZoomIn(e)},this.resizeZoom=function(){if(self.zoomactive){var py=self.getScrollTop();self.win.css({width:$(window).width()-self.zoomrestore.padding.w+"px",height:$(window).height()-self.zoomrestore.padding.h+"px"}),self.onResize(),self.setScrollTop(Math.min(self.page.maxh,py))}},this.init(),$.nicescroll.push(this)},ScrollMomentumClass2D=function(nc){var self=this;this.nc=nc,this.lastx=0,this.lasty=0,this.speedx=0,this.speedy=0,this.lasttime=0,this.steptime=0,this.snapx=!1,this.snapy=!1,this.demulx=0,this.demuly=0,this.lastscrollx=-1,this.lastscrolly=-1,this.chkx=0,this.chky=0,this.timer=0,this.time=function(){return+new Date},this.reset=function(px,py){self.stop();var now=self.time();self.steptime=0,self.lasttime=now,self.speedx=0,self.speedy=0,self.lastx=px,self.lasty=py,self.lastscrollx=-1,self.lastscrolly=-1},this.update=function(px,py){var now=self.time();self.steptime=now-self.lasttime,self.lasttime=now;var dy=py-self.lasty,dx=px-self.lastx,sy=self.nc.getScrollTop(),sx=self.nc.getScrollLeft(),newy=sy+dy,newx=sx+dx;self.snapx=newx<0||newx>self.nc.page.maxw,self.snapy=newy<0||newy>self.nc.page.maxh,self.speedx=dx,self.speedy=dy,self.lastx=px,self.lasty=py},this.stop=function(){self.nc.unsynched("domomentum2d"),self.timer&&clearTimeout(self.timer),self.timer=0,self.lastscrollx=-1,self.lastscrolly=-1},this.doSnapy=function(nx,ny){var snap=!1;ny<0?(ny=0,snap=!0):ny>self.nc.page.maxh&&(ny=self.nc.page.maxh,snap=!0),nx<0?(nx=0,snap=!0):nx>self.nc.page.maxw&&(nx=self.nc.page.maxw,snap=!0),snap?self.nc.doScrollPos(nx,ny,self.nc.opt.snapbackspeed):self.nc.triggerScrollEnd()},this.doMomentum=function(gp){var t=self.time(),l=gp?t+gp:self.lasttime,sl=self.nc.getScrollLeft(),st=self.nc.getScrollTop(),pageh=self.nc.page.maxh,pagew=self.nc.page.maxw;self.speedx=pagew>0?Math.min(60,self.speedx):0,self.speedy=pageh>0?Math.min(60,self.speedy):0;var chk=l&&t-l<=60;(st<0||st>pageh||sl<0||sl>pagew)&&(chk=!1);var sy=!(!self.speedy||!chk)&&self.speedy,sx=!(!self.speedx||!chk)&&self.speedx;if(sy||sx){var tm=Math.max(16,self.steptime);if(tm>50){var xm=tm/50;self.speedx*=xm,self.speedy*=xm,tm=50}self.demulxy=0,self.lastscrollx=self.nc.getScrollLeft(),self.chkx=self.lastscrollx,self.lastscrolly=self.nc.getScrollTop(),self.chky=self.lastscrolly;var nx=self.lastscrollx,ny=self.lastscrolly,onscroll=function(){var df=self.time()-t>600?.04:.02;self.speedx&&(nx=Math.floor(self.lastscrollx-self.speedx*(1-self.demulxy)),self.lastscrollx=nx,(nx<0||nx>pagew)&&(df=.1)),self.speedy&&(ny=Math.floor(self.lastscrolly-self.speedy*(1-self.demulxy)),self.lastscrolly=ny,(ny<0||ny>pageh)&&(df=.1)),self.demulxy=Math.min(1,self.demulxy+df),self.nc.synched("domomentum2d",function(){if(self.speedx){self.nc.getScrollLeft()!=self.chkx&&self.stop(),self.chkx=nx,self.nc.setScrollLeft(nx)}if(self.speedy){self.nc.getScrollTop()!=self.chky&&self.stop(),self.chky=ny,self.nc.setScrollTop(ny)}self.timer||(self.nc.hideCursor(),self.doSnapy(nx,ny))}),self.demulxy<1?self.timer=setTimeout(onscroll,tm):(self.stop(),self.nc.hideCursor(),self.doSnapy(nx,ny))};onscroll()}else self.doSnapy(self.nc.getScrollLeft(),self.nc.getScrollTop())}},_scrollTop=jQuery.fn.scrollTop;jQuery.cssHooks.pageYOffset={get:function(elem,computed,extra){var nice=$.data(elem,"__nicescroll")||!1;return nice&&nice.ishwscroll?nice.getScrollTop():_scrollTop.call(elem)},set:function(elem,value){var nice=$.data(elem,"__nicescroll")||!1;return nice&&nice.ishwscroll?nice.setScrollTop(parseInt(value)):_scrollTop.call(elem,value),this}},jQuery.fn.scrollTop=function(value){if(void 0===value){var nice=!!this[0]&&($.data(this[0],"__nicescroll")||!1);return nice&&nice.ishwscroll?nice.getScrollTop():_scrollTop.call(this)}return this.each(function(){var nice=$.data(this,"__nicescroll")||!1;nice&&nice.ishwscroll?nice.setScrollTop(parseInt(value)):_scrollTop.call($(this),value)})};var _scrollLeft=jQuery.fn.scrollLeft;$.cssHooks.pageXOffset={get:function(elem,computed,extra){var nice=$.data(elem,"__nicescroll")||!1;return nice&&nice.ishwscroll?nice.getScrollLeft():_scrollLeft.call(elem)},set:function(elem,value){var nice=$.data(elem,"__nicescroll")||!1;return nice&&nice.ishwscroll?nice.setScrollLeft(parseInt(value)):_scrollLeft.call(elem,value),this}},jQuery.fn.scrollLeft=function(value){if(void 0===value){var nice=!!this[0]&&($.data(this[0],"__nicescroll")||!1);return nice&&nice.ishwscroll?nice.getScrollLeft():_scrollLeft.call(this)}return this.each(function(){var nice=$.data(this,"__nicescroll")||!1;nice&&nice.ishwscroll?nice.setScrollLeft(parseInt(value)):_scrollLeft.call($(this),value)})};var NiceScrollArray=function(doms){var self=this;if(this.length=0,this.name="nicescrollarray",this.each=function(fn){for(var a=0,i=0;a<self.length;a++)fn.call(self[a],i++);return self},this.push=function(nice){self[self.length]=nice,self.length++},this.eq=function(idx){return self[idx]},doms)for(var a=0;a<doms.length;a++){var nice=$.data(doms[a],"__nicescroll")||!1;nice&&(this[this.length]=nice,this.length++)}return this};!function(el,lst,fn){for(var a=0;a<lst.length;a++)fn(el,lst[a])}(NiceScrollArray.prototype,["show","hide","toggle","onResize","resize","remove","stop","doScrollPos"],function(e,n){e[n]=function(){var args=arguments;return this.each(function(){this[n].apply(this,args)})}}),jQuery.fn.getNiceScroll=function(index){return void 0===index?new NiceScrollArray(this):this[index]&&$.data(this[index],"__nicescroll")||!1},jQuery.extend(jQuery.expr[":"],{nicescroll:function(a){return!!$.data(a,"__nicescroll")}}),$.fn.niceScroll=function(wrapper,opt){void 0===opt&&("object"!=typeof wrapper||"jquery"in wrapper||(opt=wrapper,wrapper=!1)),opt=$.extend({},opt);var ret=new NiceScrollArray;void 0===opt&&(opt={}),wrapper&&(opt.doc=$(wrapper),opt.win=$(this));var docundef=!("doc"in opt);return docundef||"win"in opt||(opt.win=$(this)),this.each(function(){var nice=$(this).data("__nicescroll")||!1;nice||(opt.doc=docundef?$(this):opt.doc,nice=new NiceScrollClass(opt,$(this)),$(this).data("__nicescroll",nice)),ret.push(nice)}),1==ret.length?ret[0]:ret},window.NiceScroll={getjQuery:function(){return jQuery}},$.nicescroll||($.nicescroll=new NiceScrollArray,$.nicescroll.options=_globaloptions)}),function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";function maybeBootstrap(){if(!angular.resumeBootstrap)return setTimeout(maybeBootstrap,1);var modules=loadModules();angular.resumeBootstrap(modules)}function loadModules(){var elt,modules=[];return angular.version.minor<2?modules:((elt=document.querySelector("[ng-hint-include]"))?modules=hintModulesFromElement(elt):(elt=document.querySelector("[ng-hint-exclude]"))?modules=excludeModules(hintModulesFromElement(elt)):document.querySelector("[ng-hint]")?modules=AVAILABLE_MODULES:angular.hint.emit("general:noinclude","ngHint is included on the page, but is not active because there is no `ng-hint` attribute present",SEVERITY_WARNING),modules)}function excludeModules(modulesToExclude){return AVAILABLE_MODULES.filter(function(module){return modulesToExclude.indexOf(module)===-1})}function hintModulesFromElement(elt){return(elt.attributes["ng-hint-include"]||elt.attributes["ng-hint-exclude"]).value.split(" ").map(hintModuleName).filter(function(name){return AVAILABLE_MODULES.indexOf(name)>-1||angular.hint.emit("general:404module","Module "+name+" could not be found",SEVERITY_WARNING)})}function hintModuleName(name){return"ngHint"+title(name)}function title(str){return str[0].toUpperCase()+str.substr(1)}require("./src/modules/hintEmitter"),require("./src/modules/controllers"),require("./src/modules/events"),require("./src/modules/modules"),require("./src/modules/scopes");var AVAILABLE_MODULES=["ngHintControllers","ngHintEvents","ngHintModules","ngHintScopes"],SEVERITY_WARNING=2,deferRegex=new RegExp("^NG_DEFER_BOOTSTRAP!.*");if(deferRegex.test(window.name)){var originalResumeBootstrap;Object.defineProperty(angular,"resumeBootstrap",{get:function(){return function(modules){return originalResumeBootstrap.call(angular,modules.concat(loadModules()))}},set:function(resumeBootstrap){originalResumeBootstrap=resumeBootstrap}})}else window.name="NG_DEFER_BOOTSTRAP!"+window.name,document.addEventListener("DOMContentLoaded",maybeBootstrap),window.addEventListener("beforeunload",function(){deferRegex.test(window.name)&&(window.name=window.name.substring("NG_DEFER_BOOTSTRAP!".length))})},{"./src/modules/controllers":23,"./src/modules/events":24,"./src/modules/hintEmitter":25,"./src/modules/modules":26,"./src/modules/scopes":27}],2:[function(require,module,exports){function defaultHash(){return Array.prototype.join.call(arguments,"::")}module.exports=function(fn,timeout,hash){var timeouts={};return timeout="number"==typeof timeout?timeout:(hash=timeout,100),hash="function"==typeof hash?hash:defaultHash,function(){var key=hash.apply(null,arguments),args=arguments;return void 0===timeouts[key]&&(timeouts[key]=setTimeout(function(){delete timeouts[key],fn.apply(null,args)},timeout)),function(){return!!timeouts[key]&&(clearTimeout(timeouts[key]),delete timeouts[key],!0)}}}},{}],3:[function(require,module,exports){!function(undefined){function init(){this._events={},this._conf&&configure.call(this,this._conf)}function configure(conf){conf&&(this._conf=conf,conf.delimiter&&(this.delimiter=conf.delimiter),conf.maxListeners&&(this._events.maxListeners=conf.maxListeners),conf.wildcard&&(this.wildcard=conf.wildcard),conf.newListener&&(this.newListener=conf.newListener),this.wildcard&&(this.listenerTree={}))}function EventEmitter(conf){this._events={},this.newListener=!1,configure.call(this,conf)}function searchListenerTree(handlers,type,tree,i){if(!tree)return[];var leaf,len,branch,xTree,xxTree,isolatedBranch,endReached,listeners=[],typeLength=type.length,currentType=type[i],nextType=type[i+1];if(i===typeLength&&tree._listeners){if("function"==typeof tree._listeners)return handlers&&handlers.push(tree._listeners),[tree];for(leaf=0,len=tree._listeners.length;leaf<len;leaf++)handlers&&handlers.push(tree._listeners[leaf]);return[tree]}if("*"===currentType||"**"===currentType||tree[currentType]){if("*"===currentType){for(branch in tree)"_listeners"!==branch&&tree.hasOwnProperty(branch)&&(listeners=listeners.concat(searchListenerTree(handlers,type,tree[branch],i+1)));return listeners}if("**"===currentType){endReached=i+1===typeLength||i+2===typeLength&&"*"===nextType,endReached&&tree._listeners&&(listeners=listeners.concat(searchListenerTree(handlers,type,tree,typeLength)));for(branch in tree)"_listeners"!==branch&&tree.hasOwnProperty(branch)&&("*"===branch||"**"===branch?(tree[branch]._listeners&&!endReached&&(listeners=listeners.concat(searchListenerTree(handlers,type,tree[branch],typeLength))),listeners=listeners.concat(searchListenerTree(handlers,type,tree[branch],i))):listeners=branch===nextType?listeners.concat(searchListenerTree(handlers,type,tree[branch],i+2)):listeners.concat(searchListenerTree(handlers,type,tree[branch],i)));return listeners}listeners=listeners.concat(searchListenerTree(handlers,type,tree[currentType],i+1))}if(xTree=tree["*"],xTree&&searchListenerTree(handlers,type,xTree,i+1),xxTree=tree["**"])if(i<typeLength){xxTree._listeners&&searchListenerTree(handlers,type,xxTree,typeLength);for(branch in xxTree)"_listeners"!==branch&&xxTree.hasOwnProperty(branch)&&(branch===nextType?searchListenerTree(handlers,type,xxTree[branch],i+2):branch===currentType?searchListenerTree(handlers,type,xxTree[branch],i+1):(isolatedBranch={},isolatedBranch[branch]=xxTree[branch],searchListenerTree(handlers,type,{"**":isolatedBranch},i+1)))}else xxTree._listeners?searchListenerTree(handlers,type,xxTree,typeLength):xxTree["*"]&&xxTree["*"]._listeners&&searchListenerTree(handlers,type,xxTree["*"],typeLength);return listeners}function growListenerTree(type,listener){type="string"==typeof type?type.split(this.delimiter):type.slice();for(var i=0,len=type.length;i+1<len;i++)if("**"===type[i]&&"**"===type[i+1])return;for(var tree=this.listenerTree,name=type.shift();name;){if(tree[name]||(tree[name]={}),tree=tree[name],0===type.length){if(tree._listeners){if("function"==typeof tree._listeners)tree._listeners=[tree._listeners,listener];else if(isArray(tree._listeners)&&(tree._listeners.push(listener),!tree._listeners.warned)){var m=defaultMaxListeners;void 0!==this._events.maxListeners&&(m=this._events.maxListeners),m>0&&tree._listeners.length>m&&(tree._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",tree._listeners.length),console.trace())}}else tree._listeners=listener;return!0}name=type.shift()}return!0}var isArray=Array.isArray?Array.isArray:function(obj){return"[object Array]"===Object.prototype.toString.call(obj)},defaultMaxListeners=10;EventEmitter.prototype.delimiter=".",EventEmitter.prototype.setMaxListeners=function(n){this._events||init.call(this),this._events.maxListeners=n,this._conf||(this._conf={}),this._conf.maxListeners=n},EventEmitter.prototype.event="",EventEmitter.prototype.once=function(event,fn){return this.many(event,1,fn),this},EventEmitter.prototype.many=function(event,ttl,fn){function listener(){0==--ttl&&self.off(event,listener),fn.apply(this,arguments)}var self=this;if("function"!=typeof fn)throw new Error("many only accepts instances of Function");return listener._origin=fn,this.on(event,listener),self},EventEmitter.prototype.emit=function(){this._events||init.call(this);var type=arguments[0];if("newListener"===type&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var l=arguments.length,args=new Array(l-1),i=1;i<l;i++)args[i-1]=arguments[i];for(i=0,l=this._all.length;i<l;i++)this.event=type,this._all[i].apply(this,args)}if("error"===type&&!(this._all||this._events.error||this.wildcard&&this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var handler;if(this.wildcard){handler=[];var ns="string"==typeof type?type.split(this.delimiter):type.slice();searchListenerTree.call(this,handler,ns,this.listenerTree,0)}else handler=this._events[type];if("function"==typeof handler){if(this.event=type,1===arguments.length)handler.call(this);else if(arguments.length>1)switch(arguments.length){case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:for(var l=arguments.length,args=new Array(l-1),i=1;i<l;i++)args[i-1]=arguments[i];handler.apply(this,args)}return!0}if(handler){for(var l=arguments.length,args=new Array(l-1),i=1;i<l;i++)args[i-1]=arguments[i];for(var listeners=handler.slice(),i=0,l=listeners.length;i<l;i++)this.event=type,listeners[i].apply(this,args);return listeners.length>0||!!this._all}return!!this._all},EventEmitter.prototype.on=function(type,listener){if("function"==typeof type)return this.onAny(type),this;if("function"!=typeof listener)throw new Error("on only accepts instances of Function");if(this._events||init.call(this),this.emit("newListener",type,listener),this.wildcard)return growListenerTree.call(this,type,listener),this;if(this._events[type]){if("function"==typeof this._events[type])this._events[type]=[this._events[type],listener];else if(isArray(this._events[type])&&(this._events[type].push(listener),!this._events[type].warned)){var m=defaultMaxListeners;void 0!==this._events.maxListeners&&(m=this._events.maxListeners),m>0&&this._events[type].length>m&&(this._events[type].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[type].length),console.trace())}}else this._events[type]=listener;return this},EventEmitter.prototype.onAny=function(fn){if("function"!=typeof fn)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(fn),this},EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prototype.off=function(type,listener){if("function"!=typeof listener)throw new Error("removeListener only takes instances of Function");var handlers,leafs=[];if(this.wildcard){var ns="string"==typeof type?type.split(this.delimiter):type.slice();leafs=searchListenerTree.call(this,null,ns,this.listenerTree,0)}else{if(!this._events[type])return this;handlers=this._events[type],leafs.push({_listeners:handlers})}for(var iLeaf=0;iLeaf<leafs.length;iLeaf++){var leaf=leafs[iLeaf];if(handlers=leaf._listeners,isArray(handlers)){for(var position=-1,i=0,length=handlers.length;i<length;i++)if(handlers[i]===listener||handlers[i].listener&&handlers[i].listener===listener||handlers[i]._origin&&handlers[i]._origin===listener){position=i;break}if(position<0)continue;return this.wildcard?leaf._listeners.splice(position,1):this._events[type].splice(position,1),0===handlers.length&&(this.wildcard?delete leaf._listeners:delete this._events[type]),this}(handlers===listener||handlers.listener&&handlers.listener===listener||handlers._origin&&handlers._origin===listener)&&(this.wildcard?delete leaf._listeners:delete this._events[type])}return this},EventEmitter.prototype.offAny=function(fn){var fns,i=0,l=0;if(fn&&this._all&&this._all.length>0){for(fns=this._all,i=0,l=fns.length;i<l;i++)if(fn===fns[i])return fns.splice(i,1),this}else this._all=[];return this},EventEmitter.prototype.removeListener=EventEmitter.prototype.off,EventEmitter.prototype.removeAllListeners=function(type){if(0===arguments.length)return!this._events||init.call(this),this;if(this.wildcard)for(var ns="string"==typeof type?type.split(this.delimiter):type.slice(),leafs=searchListenerTree.call(this,null,ns,this.listenerTree,0),iLeaf=0;iLeaf<leafs.length;iLeaf++){var leaf=leafs[iLeaf];leaf._listeners=null}else{if(!this._events[type])return this;this._events[type]=null}return this},EventEmitter.prototype.listeners=function(type){if(this.wildcard){var handlers=[],ns="string"==typeof type?type.split(this.delimiter):type.slice();return searchListenerTree.call(this,handlers,ns,this.listenerTree,0),handlers}return this._events||init.call(this),this._events[type]||(this._events[type]=[]),isArray(this._events[type])||(this._events[type]=[this._events[type]]),this._events[type]},EventEmitter.prototype.listenersAny=function(){return this._all?this._all:[]},"function"==typeof define&&define.amd?define(function(){return EventEmitter}):"object"==typeof exports?exports.EventEmitter2=EventEmitter:window.EventEmitter2=EventEmitter}()},{}],4:[function(require,module,exports){function distance(a,b){var table=[];if(0===a.length||0===b.length)return Math.max(a.length,b.length);for(var ii=0,ilen=a.length+1;ii!==ilen;++ii){table[ii]=[];for(var jj=0,jlen=b.length+1;jj!==jlen;++jj)if(0===ii||0===jj)table[ii][jj]=Math.max(ii,jj);else{var diagPenalty=Number(a[ii-1]!==b[jj-1]),diag=table[ii-1][jj-1]+diagPenalty,top=table[ii-1][jj]+1,left=table[ii][jj-1]+1;table[ii][jj]=Math.min(left,top,diag)}}return table[a.length][b.length]}module.exports=distance},{}],5:[function(require,module,exports){function suggestDictionary(dict,opts){opts=opts||{};var threshold=opts.threshold||.5;return function(word){var length=word.length;return dict.reduce(function(result,dictEntry){var score=distance(dictEntry,word);return result.score>score&&score/length<threshold&&(result.score=score,result.word=dictEntry),result},{score:1/0}).word}}module.exports=suggestDictionary;var distance=require("./levenstein_distance");suggestDictionary.distance=distance},{"./levenstein_distance":4}],6:[function(require,module,exports){"use strict";var list="click submit mouseenter mouseleave mousemove mousedown mouseover mouseup dblclick keyup keydown keypress blur focus submit cut copy paste".split(" ");module.exports=list.map(function(eventName){return"ng"+eventName.charAt(0).toUpperCase()+eventName.substr(1)})},{}],7:[function(require,module,exports){"use strict";function isAngularPrivatePropertyName(key){return!("$"===key[0]&&"$"===key[1])&&"$parent"!==key&&"$root"!==key}function summarizeProperty(obj){return obj instanceof Array?{"~array-length":obj.length}:null===obj?null:"object"==typeof obj?{"~object":!0}:obj}module.exports=function(model){function shallowSummary(obj,prop){return obj[prop]=summarizeProperty(model[prop]),obj}return model instanceof Array?JSON.stringify(model.map(summarizeProperty)):"object"==typeof model?JSON.stringify(Object.keys(model).filter(isAngularPrivatePropertyName).reduce(shallowSummary,{})):model}},{}],8:[function(require,module,exports){module.exports=function(modules){modules.forEach(function(module){angular.hint.emit("Modules",module.message,module.severity)})}},{}],9:[function(require,module,exports){var modData=require("./moduleData");MODULE_NAME="Modules",SEVERITY_WARNING=2,module.exports=function(){var multiLoaded=[];for(var modName in modData.createdMulti){var message='Multiple modules with name "'+modName+'" are being created and they will overwrite each other.',multi=modData.createdMulti[modName],multiLength=multi.length,details={existingModule:multi[multiLength-1],overwrittenModules:multi.slice(0,multiLength-1)};multiLoaded.push({module:details,message:message,name:MODULE_NAME,severity:SEVERITY_WARNING})}return multiLoaded}},{"./moduleData":16}],10:[function(require,module,exports){var modData=require("./moduleData");module.exports=function(moduleName,getCreated){return getCreated?modData.createdModules[moduleName]:modData.loadedModules[moduleName]}},{"./moduleData":16}],11:[function(require,module,exports){module.exports=function(attrs,ngAppFound){return attrs["ng-app"]&&ngAppFound&&angular.hint.emit("Modules",'ng-app may only be included once. The module "'+attrs["ng-app"].value+'" was not used to bootstrap because ng-app was already included.',1),attrs["ng-app"]?attrs["ng-app"].value:void 0}},{}],12:[function(require,module,exports){var getModule=require("./getModule"),dictionary=Object.keys(require("./moduleData").createdModules),suggest=require("suggest-it")(dictionary);module.exports=function(loadedModules){var undeclaredModules=[];for(var module in loadedModules){if(!getModule(module,!0)){var match=suggest(module),suggestion=match?'; Try: "'+match+'"':"",message='Module "'+module+'" was loaded but does not exist'+suggestion+".";undeclaredModules.push({module:null,message:message,severity:1})}}return undeclaredModules}},{"./getModule":10,"./moduleData":16,"suggest-it":5}],13:[function(require,module,exports){var getModule=require("./getModule"),IGNORED=["ngHintControllers","ngHintDirectives","ngHintDom","ngHintEvents","ngHintInterpolation","ngHintModules","ngHintScopes","ng","ngLocale","protractorBaseModule_"];module.exports=function(createdModules){var unusedModules=[];for(var module in createdModules)if(!getModule(module)){var cModule=createdModules[module],message='Module "'+cModule.name+'" was created but never loaded.';IGNORED.indexOf(cModule.name)===-1&&unusedModules.push({module:cModule,message:message,severity:2})}return unusedModules}},{"./getModule":10}],14:[function(require,module,exports){module.exports=function(str){return"ng"===str||(str.charAt(0).toUpperCase()===str.charAt(0)?(angular.hint.emit("Modules",'The best practice for module names is to use dot.case or lowerCamelCase. Check the name of "'+str+'".',3),!1):str.toLowerCase()!==str||str.indexOf(".")!==-1||(angular.hint.emit("Modules",'Module names should be namespaced with a dot (app.dashboard) or lowerCamelCase (appDashboard). Check the name of "'+str+'".',3),!1))}},{}],15:[function(require,module,exports){var normalizeAttribute=require("./normalizeAttribute");module.exports=function(attrs){for(var i=0,length=attrs.length;i<length;i++)if("ng-view"===normalizeAttribute(attrs[i].nodeName)||attrs[i].value.indexOf("ng-view")>-1)return!0}},{"./normalizeAttribute":18}],16:[function(require,module,exports){module.exports={createdModules:{},createdMulti:{},loadedModules:{}}},{}],17:[function(require,module,exports){var modData=require("./moduleData"),getModule=require("./getModule");module.exports=function(){if(modData.ngViewExists&&!getModule("ngRoute"))return{message:'Directive "ngView" was used in the application however "ngRoute" was not loaded into any module.'}}},{"./getModule":10,"./moduleData":16}],18:[function(require,module,exports){module.exports=function(attribute){return attribute.replace(/^(?:data|x)[-_:]/,"").replace(/[:_]/g,"-")}},{}],19:[function(require,module,exports){var display=require("./display"),formatMultiLoaded=require("./formatMultiLoaded"),getUnusedModules=require("./getUnusedModules"),getUndeclaredModules=require("./getUndeclaredModules"),modData=require("./moduleData"),ngViewNoNgRoute=require("./ngViewNoNgRoute");module.exports=function(){var unusedModules=getUnusedModules(modData.createdModules),undeclaredModules=getUndeclaredModules(modData.loadedModules),multiLoaded=formatMultiLoaded(),noNgRoute=ngViewNoNgRoute();if(unusedModules.length||undeclaredModules.length||multiLoaded.length||noNgRoute){var toSend=unusedModules.concat(undeclaredModules).concat(multiLoaded);noNgRoute&&(toSend=toSend.concat(noNgRoute)),display(toSend)}}},{"./display":8,"./formatMultiLoaded":9,"./getUndeclaredModules":12,"./getUnusedModules":13,"./moduleData":16,"./ngViewNoNgRoute":17}],20:[function(require,module,exports){var modData=require("./moduleData");module.exports=function(module,isNgAppMod){var name=module.name||module;isNgAppMod?(modData.loadedModules[name]=name,modData.ngAppMod=name):module.requires.forEach(function(dependency){modData.loadedModules[dependency]=dependency})}},{"./moduleData":16}],21:[function(require,module,exports){var getNgAppMod=require("./getNgAppMod"),inAttrsOrClasses=require("./inAttrsOrClasses"),storeDependencies=require("./storeDependencies"),modData=require("./moduleData");module.exports=function(doms){for(var ngViewFound,elem,isElemName,isInAttrsOrClasses,ngAppMod,i=0;i<doms.length;i++){elem=doms[i];var attributes=elem.attributes;isElemName="ng-view"===elem.nodeName.toLowerCase(),isInAttrsOrClasses=inAttrsOrClasses(attributes),ngViewFound=isElemName||isInAttrsOrClasses,ngAppMod=getNgAppMod(attributes,modData.ngAppFound),modData.ngAppFound=modData.ngAppFound||ngAppMod,ngAppMod&&storeDependencies(ngAppMod,!0),modData.ngViewExists=!!ngViewFound||modData.ngViewExists}}},{"./getNgAppMod":11,"./inAttrsOrClasses":15,"./moduleData":16,"./storeDependencies":20}],22:[function(require,module,exports){var storeDependencies=require("./storeDependencies"),seen=[],storeUsedModules=module.exports=function(module,modules){var name=module.name||module;module&&seen.indexOf(name)===-1&&(seen.push(name),storeDependencies(module),module.requires.forEach(function(modName){var mod=modules[modName];storeUsedModules(mod,modules)}))}},{"./storeDependencies":20}],23:[function(require,module,exports){"use strict";function controllerDecorator($delegate){return function(ctrl){if("string"==typeof ctrl){var match=ctrl.match(CNTRL_REG),ctrlName=match&&match[1]||ctrl;nameToControllerMap[ctrlName]||sendMessageForControllerName(ctrlName),nameToControllerMap[ctrlName]||"function"!=typeof window[ctrlName]||sendMessageForGlobalController(ctrlName)}return $delegate.apply(this,arguments)}}function stringOrObjectRegister(controllerName){
null!==controllerName&&"object"==typeof controllerName?Object.keys(controllerName).forEach(processController):processController(controllerName)}function processController(ctrlName){nameToControllerMap[ctrlName]=!0,sendMessageForControllerName(ctrlName)}function sendMessageForGlobalController(name){angular.hint.emit(MODULE_NAME+":global","add `"+name+"` to a module",angular.version.minor<=2?SEVERITY_WARNING:SEVERITY_ERROR,CATEGORY_GLOBAL_CONTROLLER)}function sendMessageForControllerName(name){var newName=name;startsWithUpperCase(name)||(newName=title(newName)),endsWithController(name)||(newName=addControllerSuffix(newName)),name!==newName&&angular.hint.emit(MODULE_NAME+":rename","Consider renaming `"+name+"` to `"+newName+"`.",SEVERITY_WARNING,CATEGORY_CONTROLLER_NAME)}function startsWithUpperCase(name){var firstChar=name.charAt(0);return firstChar===firstChar.toUpperCase()&&firstChar!==firstChar.toLowerCase()}function title(name){return name[0].toUpperCase()+name.substr(1)}function endsWithController(name){return CONTROLLER_RE.test(name)}function addControllerSuffix(name){return name.replace(RE,"Controller")}var MODULE_NAME="Controllers",CNTRL_REG=/^(\S+)(\s+as\s+(\w+))?$/,CATEGORY_CONTROLLER_NAME="Name controllers according to best practices",CATEGORY_GLOBAL_CONTROLLER="Using global functions as controllers is against Angular best practices and depricated in Angular 1.3 and up",SEVERITY_ERROR=1,SEVERITY_WARNING=2,nameToControllerMap={};angular.module("ngHintControllers",[]).config(["$provide","$controllerProvider",function($provide,$controllerProvider){$provide.decorator("$controller",["$delegate",controllerDecorator]);var originalRegister=$controllerProvider.register;$controllerProvider.register=function(name,constructor){stringOrObjectRegister(name),originalRegister.apply($controllerProvider,arguments)}}]);var originalModule=angular.module,CONTROLLER_RE=/Controller$/,RE=/(Ctrl|Kontroller)?$/;angular.module=function(){var module=originalModule.apply(this,arguments),originalController=module.controller;return module.controller=function(controllerName,controllerConstructor){return stringOrObjectRegister(controllerName),originalController.apply(this,arguments)},module}},{}],24:[function(require,module,exports){"use strict";function removeStringExp(str){return str.replace(/"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'/g,function(match,pos,full){return 0!==pos&&match.length+pos!==full.length&&"["===full[pos-1]&&"]"===full[pos+match.length]?match:""})}function ngEventDirectivesDecorator(ngEventAttrName){return function($delegate,$parse){var originalCompileFn=$delegate[0].compile;return $delegate[0].compile=function(element,attrs,transclude){var linkFn=originalCompileFn.apply(this,arguments);return function(scope,element,attrs){var boundFuncs=getFunctionNames(attrs[ngEventAttrName]);try{boundFuncs.forEach(function(boundFn){for(var property,propChain,lastProp="";null!==(property=boundFn.match(/^.+?([^\.\[])*/));)property=property[0],propChain=lastProp+property,void 0===$parse(propChain)(scope)&&angular.hint.emit(MODULE_NAME+":undef",propChain+" is undefined"),boundFn=boundFn.replace(property,""),lastProp+=property,"."===boundFn.charAt(0)&&(lastProp+=".",boundFn=boundFn.substr(1))})}catch(e){angular.hint.emit(MODULE_NAME+":undef","parsing error: please inform the angular-hint or batarang teams. expression: "+boundFuncs.join(""))}return linkFn.apply(this,arguments)}},$delegate}}var ngEventAttributes=require("../lib/event-directives"),MODULE_NAME="Events",getFunctionNames=function(str){return"string"!=typeof str?[]:removeStringExp(str.replace(/\s+/g,"")).replace(/\(.*?\)/g,"").split(/[\+\-\/\|\<\>\^=&!%~?:;]/g).map(function(x){if(isNaN(+x))return x.match(/\w+\(.*\)$/)?x.substr(0,x.indexOf("(")):x}).filter(function(x){return x})};angular.module("ngHintEvents",[]).config(["$provide",function($provide){for(var i=0;i<ngEventAttributes.length;i++)try{$provide.decorator(ngEventAttributes[i]+"Directive",["$delegate","$parse",ngEventDirectivesDecorator(ngEventAttributes[i])])}catch(e){}}])},{"../lib/event-directives":6}],25:[function(require,module,exports){"use strict";var EventEmitter2=require("eventemitter2").EventEmitter2;angular.hint=new EventEmitter2({wildcard:!0,delimiter:":"})},{eventemitter2:3}],26:[function(require,module,exports){"use strict";var getModule=require("./angular-hint-modules/getModule"),start=require("./angular-hint-modules/start"),storeNgAppAndView=require("./angular-hint-modules/storeNgAppAndView"),storeUsedModules=require("./angular-hint-modules/storeUsedModules"),hasNameSpace=require("./angular-hint-modules/hasNameSpace"),modData=require("./angular-hint-modules/moduleData"),doc=Array.prototype.slice.call(document.getElementsByTagName("*")),originalAngularModule=angular.module,modules={};storeNgAppAndView(doc),angular.module=function(name,requiresOriginal){var module=originalAngularModule.apply(this,arguments),name=module.name;module.requiresOriginal=requiresOriginal,modules[name]=module;var modToCheck=getModule(name,!0),modIsSetter=arguments.length>1;return modIsSetter&&hasNameSpace(name),modToCheck&&modToCheck.requiresOriginal!==module.requiresOriginal&&modIsSetter&&(modData.createdMulti[name]||(modData.createdMulti[name]=[getModule(name,!0)]),modData.createdMulti[name].push(module)),modData.createdModules[name]=module,module},angular.module("ngHintModules",[]).config(function(){var ngAppMod=modules[modData.ngAppMod];ngAppMod&&storeUsedModules(ngAppMod,modules),start()})},{"./angular-hint-modules/getModule":10,"./angular-hint-modules/hasNameSpace":14,"./angular-hint-modules/moduleData":16,"./angular-hint-modules/start":19,"./angular-hint-modules/storeNgAppAndView":21,"./angular-hint-modules/storeUsedModules":22}],27:[function(require,module,exports){"use strict";function decorateRootScope($delegate,$parse){function emitScopeElt(scope){var scopeId=scope.$id,elt=findElt(scopeId),descriptor=scopeDescriptor(elt,scope);hint.emit("scope:link",{id:scopeId,descriptor:descriptor})}function findElt(scopeId){for(var elt,scope,elts=document.querySelectorAll(".ng-scope"),i=0;i<elts.length;i++)if(elt=angular.element(elts[i]),scope=elt.scope(),scope.$id===scopeId)return elt}function gettterer(scopeId,path){if(""===path)return function(){return scopes[scopeId]};var getter=$parse(path);return function(){return getter(scopes[scopeId])}}function emitModelChange(){Object.keys(watching).forEach(function(scopeId){Object.keys(watching[scopeId]).forEach(function(path){var model=watching[scopeId][path],value=summarize(model.get());value!==model.value&&(hint.emit("model:change",{id:convertIdToOriginalType(scopeId),path:path,oldValue:model.value,value:value}),model.value=value)})})}var perf=window.performance||{now:function(){return 0}},scopes={},watching={},debouncedEmitModelChange=debounceOn(emitModelChange,10);hint.watch=function(scopeId,path){path="string"==typeof path?path.split("."):path,watching[scopeId]||(watching[scopeId]={});for(var i=1,ii=path.length;i<=ii;i+=1){var partialPath=path.slice(0,i).join(".");if(!watching[scopeId][partialPath]){var get=gettterer(scopeId,partialPath),value=summarize(get());watching[scopeId][partialPath]={get:get,value:value},hint.emit("model:change",{id:convertIdToOriginalType(scopeId),path:partialPath,value:value})}}},hint.assign=function(scopeId,path,value){var scope;(scope=scopes[scopeId])&&scope.$apply(function(){return $parse(path).assign(scope,value)})},hint.inspectScope=function(scopeId){var scope;(scope=scopes[scopeId])&&(window.$scope=scope)},hint.unwatch=function(scopeId,unwatchPath){Object.keys(watching[scopeId]).forEach(function(path){0===path.indexOf(unwatchPath)&&delete watching[scopeId][path]})};var scopePrototype="getPrototypeOf"in Object?Object.getPrototypeOf($delegate):$delegate.__proto__,_watch=scopePrototype.$watch,_digestEvents=[],skipNextPerfWatchers=!1;scopePrototype.$watch=function(watchExpression,reactionFunction){if(skipNextPerfWatchers)return skipNextPerfWatchers=!1,_watch.apply(this,arguments);if("string"==typeof watchExpression&&isOneTimeBindExp(watchExpression))return skipNextPerfWatchers=!0,_watch.apply(this,arguments);var watchStr=humanReadableWatchExpression(watchExpression),scopeId=this.$id,expressions=null;if("function"==typeof watchExpression){if(expressions=watchExpression.expressions,"[object Array]"===Object.prototype.toString.call(expressions)&&expressions.some(isOneTimeBindExp))return skipNextPerfWatchers=!0,_watch.apply(this,arguments);arguments[0]=function(){var start=perf.now(),ret=watchExpression.apply(this,arguments),end=perf.now();return _digestEvents.push({eventType:"scope:watch",id:scopeId,watch:watchStr,time:end-start}),ret}}else{var thatScope=this;arguments[0]=function(){var start=perf.now(),ret=thatScope.$eval(watchExpression),end=perf.now();return _digestEvents.push({eventType:"scope:watch",id:scopeId,watch:watchStr,time:end-start}),ret}}return"function"==typeof reactionFunction&&(arguments[1]=function(){var start=perf.now(),ret=reactionFunction.apply(this,arguments),end=perf.now();return _digestEvents.push({eventType:"scope:reaction",id:this.$id,watch:watchStr,time:end-start}),ret}),_watch.apply(this,arguments)};var _digest=scopePrototype.$digest;scopePrototype.$digest=function(fn){_digestEvents=[];var start=perf.now(),ret=_digest.apply(this,arguments),end=perf.now();return hint.emit("scope:digest",{id:this.$id,time:end-start,events:_digestEvents}),ret};var _destroy=scopePrototype.$destroy;scopePrototype.$destroy=function(){var id=this.$id;return hint.emit("scope:destroy",{id:id}),delete scopes[id],delete watching[id],_destroy.apply(this,arguments)};var _new=scopePrototype.$new;scopePrototype.$new=function(){var child=_new.apply(this,arguments);return scopes[child.$id]=child,watching[child.$id]={},hint.emit("scope:new",{parent:this.$id,child:child.$id}),setTimeout(function(){emitScopeElt(child)},0),child};var _apply=scopePrototype.$apply;return scopePrototype.$apply=function(fn){var ret=_apply.apply(this,arguments);return debouncedEmitModelChange(),ret},hint.emit("scope:new",{parent:null,child:$delegate.$id}),scopes[$delegate.$id]=$delegate,watching[$delegate.$id]={},$delegate}function decorateDollaCompile($delegate){var newCompile=function(){var link=$delegate.apply(this,arguments);return function(scope){var elt=link.apply(this,arguments),descriptor=scopeDescriptor(elt,scope);return hint.emit("scope:link",{id:scope.$id,descriptor:descriptor}),elt}};for(var prop in $delegate)$delegate.hasOwnProperty(prop)&&(newCompile[prop]=$delegate[prop]);return newCompile}function scopeDescriptor(elt,scope){var val,type,theseTypes=[];if(elt)for(var i=0,ii=TYPES.length;i<ii;i++)type=TYPES[i],(val=elt.attr(type))&&theseTypes.push(type+'="'+val+'"');return 0===theseTypes.length?"scope.$id="+scope.$id:theseTypes.join(" ")}function humanReadableWatchExpression(fn){return null==fn?null:(fn.exp?fn=fn.exp:fn.name&&(fn=fn.name),fn.toString())}function isOneTimeBindExp(exp){return":"===exp.charAt(0)&&":"===exp.charAt(1)}function convertIdToOriginalType(scopeId){return angular.version.minor<3?scopeId:parseInt(scopeId,10)}var summarize=require("../lib/summarize-model"),debounceOn=require("debounce-on"),hint=angular.hint;hint.emit=hint.emit||function(){},module.exports=angular.module("ngHintScopes",[]).config(["$provide",function($provide){$provide.decorator("$rootScope",["$delegate","$parse",decorateRootScope]),$provide.decorator("$compile",["$delegate",decorateDollaCompile])}]);var TYPES=["ng-app","ng-controller","ng-repeat","ng-include"]},{"../lib/summarize-model":7,"debounce-on":2}]},{},[1]),angular.module("colorpicker.module",[]).factory("Helper",function(){"use strict";return{closestSlider:function(e){return(e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector).bind(e)("I")?e.parentNode:e},getOffset:function(e,o){for(var t=0,n=0,r=e.getBoundingClientRect();e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)o||"BODY"!==e.tagName?(t+=e.scrollLeft,n+=e.scrollTop):(t+=document.documentElement.scrollLeft||e.scrollLeft,n+=document.documentElement.scrollTop||e.scrollTop),e=e.offsetParent;return{top:r.top+window.pageYOffset,left:r.left+window.pageXOffset,scrollX:t,scrollY:n}},stringParsers:[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}]}}).factory("Color",["Helper",function(e){"use strict";return{value:{h:1,s:1,b:1,a:1},rgb:function(){var e=this.toRGB();return"rgb("+e.r+","+e.g+","+e.b+")"},rgba:function(){var e=this.toRGB();return"rgba("+e.r+","+e.g+","+e.b+","+e.a+")"},hex:function(){return this.toHex()},RGBtoHSB:function(e,o,t,n){e/=255,o/=255,t/=255;var r,i,l,s;return l=Math.max(e,o,t),s=l-Math.min(e,o,t),r=0===s?null:l===e?(o-t)/s:l===o?(t-e)/s+2:(e-o)/s+4,r=(r+360)%6*60/360,i=0===s?0:s/l,{h:r||1,s:i,b:l,a:n||1}},setColor:function(o){o=o?o.toLowerCase():o;for(var t in e.stringParsers)if(e.stringParsers.hasOwnProperty(t)){var n=e.stringParsers[t],r=n.re.exec(o),i=r&&n.parse(r);if(i)return this.value=this.RGBtoHSB.apply(null,i),!1}},setHue:function(e){this.value.h=1-e},setSaturation:function(e){this.value.s=e},setLightness:function(e){this.value.b=1-e},setAlpha:function(e){this.value.a=parseInt(100*(1-e),10)/100},toRGB:function(e,o,t,n){e||(e=this.value.h,o=this.value.s,t=this.value.b),e*=360;var r,i,l,s,c;return e=e%360/60,c=t*o,s=c*(1-Math.abs(e%2-1)),r=i=l=t-c,e=~~e,r+=[c,s,0,0,s,c][e],i+=[s,c,c,s,0,0][e],l+=[0,0,s,c,c,s][e],{r:Math.round(255*r),g:Math.round(255*i),b:Math.round(255*l),a:n||this.value.a}},toHex:function(e,o,t,n){var r=this.toRGB(e,o,t,n);return"#"+(1<<24|parseInt(r.r,10)<<16|parseInt(r.g,10)<<8|parseInt(r.b,10)).toString(16).substr(1)}}}]).factory("Slider",["Helper",function(e){"use strict";var o={maxLeft:0,maxTop:0,callLeft:null,callTop:null,knob:{top:0,left:0}},t={};return{getSlider:function(){return o},getLeftPosition:function(e){return Math.max(0,Math.min(o.maxLeft,o.left+((e.pageX||t.left)-t.left)))},getTopPosition:function(e){return Math.max(0,Math.min(o.maxTop,o.top+((e.pageY||t.top)-t.top)))},setSlider:function(n,r){var i=e.closestSlider(n.target),l=e.getOffset(i,r),s=i.getBoundingClientRect(),c=n.clientX-s.left,a=n.clientY-s.top;o.knob=i.children[0].style,o.left=n.pageX-l.left-window.pageXOffset+l.scrollX,o.top=n.pageY-l.top-window.pageYOffset+l.scrollY,t={left:n.pageX-(c-o.left),top:n.pageY-(a-o.top)}},setSaturation:function(e,t,n){o={maxLeft:n,maxTop:n,callLeft:"setSaturation",callTop:"setLightness"},this.setSlider(e,t)},setHue:function(e,t,n){o={maxLeft:0,maxTop:n,callLeft:!1,callTop:"setHue"},this.setSlider(e,t)},setAlpha:function(e,t,n){o={maxLeft:0,maxTop:n,callLeft:!1,callTop:"setAlpha"},this.setSlider(e,t)},setKnob:function(e,t){o.knob.top=e+"px",o.knob.left=t+"px"}}}]).directive("colorpicker",["$document","$compile","Color","Slider","Helper",function(e,o,t,n,r){"use strict";return{require:"?ngModel",restrict:"A",link:function(i,l,s,c){function a(){e.on("mousemove",u),e.on("mouseup",f)}function p(){try{D.css("backgroundColor",M[w]())}catch(e){D.css("backgroundColor",M.toHex())}B.css("backgroundColor",M.toHex(M.value.h,1,1,1)),"rgba"===w&&(x.css.backgroundColor=M.toHex())}function u(e){var o=n.getLeftPosition(e),t=n.getTopPosition(e),r=n.getSlider();n.setKnob(t,o),r.callLeft&&M[r.callLeft].call(M,o/P),r.callTop&&M[r.callTop].call(M,t/P),p();var s=M[w]();return l.val(s),c&&i.$apply(c.$setViewValue(s)),$&&F.val(s),!1}function f(){m("colorpicker-selected"),e.off("mousemove",u),e.off("mouseup",f)}function d(e){M.setColor(l.val()),$&&!e&&F.val(l.val()),Y.eq(0).css({left:M.value.s*P+"px",top:P-M.value.b*P+"px"}),Y.eq(1).css("top",P*(1-M.value.h)+"px"),Y.eq(2).css("top",P*(1-M.value.a)+"px"),p()}function h(){var e,o=r.getOffset(l[0]);return angular.isDefined(s.colorpickerParent)&&(o.left=0,o.top=0),"top"===S?e={top:o.top-147,left:o.left}:"right"===S?e={top:o.top,left:o.left+126}:"bottom"===S?e={top:o.top+l[0].offsetHeight+2,left:o.left}:"left"===S&&(e={top:o.top,left:o.left-150}),{top:e.top+"px",left:e.left+"px"}}function g(){v()}function k(){y.hasClass("colorpicker-visible")||(d(),y.addClass("colorpicker-visible").css(h()),m("colorpicker-shown"),I===!1&&e.on("mousedown",g),s.colorpickerIsOpen&&(i[s.colorpickerIsOpen]=!0,i.$$phase||i.$digest()))}function m(e){c&&i.$emit(e,{name:s.ngModel,value:c.$modelValue})}function v(){y.hasClass("colorpicker-visible")&&(y.removeClass("colorpicker-visible"),m("colorpicker-closed"),e.off("mousedown",g),s.colorpickerIsOpen&&(i[s.colorpickerIsOpen]=!1,i.$$phase||i.$digest()))}var b,x,w=s.colorpicker?s.colorpicker:"hex",S=angular.isDefined(s.colorpickerPosition)?s.colorpickerPosition:"bottom",I=!!angular.isDefined(s.colorpickerInline)&&s.colorpickerInline,C=!!angular.isDefined(s.colorpickerFixedPosition)&&s.colorpickerFixedPosition,L=angular.isDefined(s.colorpickerParent)?l.parent():angular.element(document.body),$=!!angular.isDefined(s.colorpickerWithInput)&&s.colorpickerWithInput,P=angular.isDefined(s.colorpickerSize)?s.colorpickerSize:100,b=P+"px",H=$?'<input type="text" name="colorpicker-input" spellcheck="false">':"",T=I?"":'<button type="button" class="close close-colorpicker">&times;</button>',O='<div class="colorpicker dropdown"><div class="dropdown-menu"><colorpicker-saturation><i></i></colorpicker-saturation><colorpicker-hue><i></i></colorpicker-hue><colorpicker-alpha><i></i></colorpicker-alpha><colorpicker-preview></colorpicker-preview>'+H+T+"</div></div>",y=angular.element(O),M=t,A=y.find("colorpicker-hue"),B=y.find("colorpicker-saturation"),D=y.find("colorpicker-preview"),Y=y.find("i");if(o(y)(i),y.css("min-width",parseInt(P)+29+"px"),B.css({width:b,height:b}),A.css("height",b),$){var F=y.find("input");F.css("width",b),F.on("mousedown",function(e){e.stopPropagation()}).on("keyup",function(){var e=this.value;l.val(e),c&&c.$modelValue!==e&&(i.$apply(c.$setViewValue(e)),d(!0))})}"rgba"===w&&(y.addClass("alpha"),x=y.find("colorpicker-alpha"),x.css("height",b),x.on("click",function(e){n.setAlpha(e,C,P),u(e)}).on("mousedown",function(e){n.setAlpha(e,C,P),a()}).on("mouseup",function(e){m("colorpicker-selected-alpha")})),A.on("click",function(e){n.setHue(e,C,P),u(e)}).on("mousedown",function(e){n.setHue(e,C,P),a()}).on("mouseup",function(e){m("colorpicker-selected-hue")}),B.on("click",function(e){n.setSaturation(e,C,P),u(e),angular.isDefined(s.colorpickerCloseOnSelect)&&v()}).on("mousedown",function(e){n.setSaturation(e,C,P),a()}).on("mouseup",function(e){m("colorpicker-selected-saturation")}),C&&y.addClass("colorpicker-fixed-position"),y.addClass("colorpicker-position-"+S),"true"===I&&y.addClass("colorpicker-inline"),L.append(y),c&&(c.$render=function(){l.val(c.$viewValue),d()}),l.on("blur keyup change",function(){d()}),l.on("$destroy",function(){y.remove()}),I===!1?l.on("click",k):k(),y.on("mousedown",function(e){e.stopPropagation(),e.preventDefault()}),y.find("button").on("click",function(){v()}),s.colorpickerIsOpen&&i.$watch(s.colorpickerIsOpen,function(e){e===!0?k():e===!1&&v()})}}}]),function(B,n){"object"==typeof exports?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(B)}(this,function(B){function n(a){this._targetElement=a,this._options={nextLabel:"Next &rarr;",prevLabel:"&larr; Back",skipLabel:"Skip",doneLabel:"Done",tooltipPosition:"bottom",tooltipClass:"",highlightClass:"",exitOnEsc:!0,exitOnOverlayClick:!0,showStepNumbers:!0,keyboardNavigation:!0,showButtons:!0,showBullets:!0,showProgress:!1,scrollToElement:!0,overlayOpacity:.8,positionPrecedence:["bottom","top","right","left"],disableInteraction:!1}}function M(a){var b=[],c=this;if(this._options.steps)for(var e=0,d=this._options.steps.length;e<d;e++){var f=H(this._options.steps[e]);if(f.step=b.length+1,"string"==typeof f.element&&(f.element=document.querySelector(f.element)),void 0===f.element||null==f.element){var h=document.querySelector(".introjsFloatingElement");null==h&&(h=document.createElement("div"),h.className="introjsFloatingElement",document.body.appendChild(h)),f.element=h,f.position="floating"}null!=f.element&&b.push(f)}else{if(d=a.querySelectorAll("*[data-intro]"),1>d.length)return!1;for(e=0,f=d.length;e<f;e++){var h=d[e],q=parseInt(h.getAttribute("data-step"),10);0<q&&(b[q-1]={element:h,intro:h.getAttribute("data-intro"),step:parseInt(h.getAttribute("data-step"),10),tooltipClass:h.getAttribute("data-tooltipClass"),highlightClass:h.getAttribute("data-highlightClass"),position:h.getAttribute("data-position")||this._options.tooltipPosition})}for(e=q=0,f=d.length;e<f;e++)if(h=d[e],null==h.getAttribute("data-step")){for(;void 0!==b[q];)q++;b[q]={element:h,intro:h.getAttribute("data-intro"),step:q+1,tooltipClass:h.getAttribute("data-tooltipClass"),highlightClass:h.getAttribute("data-highlightClass"),position:h.getAttribute("data-position")||this._options.tooltipPosition}}}for(e=[],d=0;d<b.length;d++)b[d]&&e.push(b[d]);return b=e,b.sort(function(a,b){return a.step-b.step}),c._introItems=b,N.call(c,a)&&(x.call(c),a.querySelector(".introjs-skipbutton"),a.querySelector(".introjs-nextbutton"),c._onKeyDown=function(b){if(27===b.keyCode&&1==c._options.exitOnEsc)void 0!=c._introExitCallback&&c._introExitCallback.call(c),y.call(c,a);else if(37===b.keyCode)C.call(c);else if(39===b.keyCode)x.call(c);else if(13===b.keyCode){var d=b.target||b.srcElement;d&&0<d.className.indexOf("introjs-prevbutton")?C.call(c):d&&0<d.className.indexOf("introjs-skipbutton")?(c._introItems.length-1==c._currentStep&&"function"==typeof c._introCompleteCallback&&c._introCompleteCallback.call(c),void 0!=c._introExitCallback&&c._introExitCallback.call(c),y.call(c,a)):x.call(c),b.preventDefault?b.preventDefault():b.returnValue=!1}},c._onResize=function(a){t.call(c,document.querySelector(".introjs-helperLayer")),t.call(c,document.querySelector(".introjs-tooltipReferenceLayer"))},window.addEventListener?(this._options.keyboardNavigation&&window.addEventListener("keydown",c._onKeyDown,!0),window.addEventListener("resize",c._onResize,!0)):document.attachEvent&&(this._options.keyboardNavigation&&document.attachEvent("onkeydown",c._onKeyDown),document.attachEvent("onresize",c._onResize))),!1}function H(a){if(null==a||"object"!=typeof a||void 0!==a.nodeType)return a;var c,b={};for(c in a)b[c]="undefined"!=typeof jQuery&&a[c]instanceof jQuery?a[c]:H(a[c]);return b}function x(){if(this._direction="forward",void 0===this._currentStep?this._currentStep=0:++this._currentStep,this._introItems.length<=this._currentStep)"function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this),y.call(this,this._targetElement);else{var a=this._introItems[this._currentStep];void 0!==this._introBeforeChangeCallback&&this._introBeforeChangeCallback.call(this,a.element),I.call(this,a)}}function C(){if(this._direction="backward",0===this._currentStep)return!1;var a=this._introItems[--this._currentStep];void 0!==this._introBeforeChangeCallback&&this._introBeforeChangeCallback.call(this,a.element),I.call(this,a)}function y(a){var b=a.querySelector(".introjs-overlay");if(null!=b){b.style.opacity=0,setTimeout(function(){b.parentNode&&b.parentNode.removeChild(b)},500);var c=a.querySelector(".introjs-helperLayer");if(c&&c.parentNode.removeChild(c),(c=a.querySelector(".introjs-tooltipReferenceLayer"))&&c.parentNode.removeChild(c),(a=a.querySelector(".introjs-disableInteraction"))&&a.parentNode.removeChild(a),(a=document.querySelector(".introjsFloatingElement"))&&a.parentNode.removeChild(a),(a=document.querySelector(".introjs-showElement"))&&(a.className=a.className.replace(/introjs-[a-zA-Z]+/g,"").replace(/^\s+|\s+$/g,"")),(a=document.querySelectorAll(".introjs-fixParent"))&&0<a.length)for(c=a.length-1;0<=c;c--)a[c].className=a[c].className.replace(/introjs-fixParent/g,"").replace(/^\s+|\s+$/g,"");window.removeEventListener?window.removeEventListener("keydown",this._onKeyDown,!0):document.detachEvent&&document.detachEvent("onkeydown",this._onKeyDown),this._currentStep=void 0}}function J(a,b,c,e){var f,h,d="";if(b.style.top=null,b.style.right=null,b.style.bottom=null,b.style.left=null,b.style.marginLeft=null,b.style.marginTop=null,c.style.display="inherit",void 0!==e&&null!=e&&(e.style.top=null,e.style.left=null),this._introItems[this._currentStep]){if(d=this._introItems[this._currentStep],d="string"==typeof d.tooltipClass?d.tooltipClass:this._options.tooltipClass,b.className=("introjs-tooltip "+d).replace(/^\s+|\s+$/g,""),("auto"==(h=this._introItems[this._currentStep].position)||"auto"==this._options.tooltipPosition)&&"floating"!=h){d=h,f=this._options.positionPrecedence.slice(),h=F();var q=v(b).height+10,r=v(b).width+20,k=v(a),l="floating";k.left+r>h.width||0>k.left+k.width/2-r?(s(f,"bottom"),s(f,"top")):(k.height+k.top+q>h.height&&s(f,"bottom"),0>k.top-q&&s(f,"top")),k.width+k.left+r>h.width&&s(f,"right"),0>k.left-r&&s(f,"left"),0<f.length&&(l=f[0]),d&&"auto"!=d&&-1<f.indexOf(d)&&(l=d),h=l}switch(d=v(a),a=v(b),f=F(),h){case"top":c.className="introjs-arrow bottom",z(d,15,a,f,b),b.style.bottom=d.height+20+"px";break;case"right":b.style.left=d.width+20+"px",d.top+a.height>f.height?(c.className="introjs-arrow left-bottom",b.style.top="-"+(a.height-d.height-20)+"px"):c.className="introjs-arrow left";break;case"left":1==this._options.showStepNumbers&&(b.style.top="15px"),d.top+a.height>f.height?(b.style.top="-"+(a.height-d.height-20)+"px",c.className="introjs-arrow right-bottom"):c.className="introjs-arrow right",b.style.right=d.width+20+"px";break;case"floating":c.style.display="none",b.style.left="50%",b.style.top="50%",b.style.marginLeft="-"+a.width/2+"px",b.style.marginTop="-"+a.height/2+"px",void 0!==e&&null!=e&&(e.style.left="-"+(a.width/2+18)+"px",e.style.top="-"+(a.height/2+18)+"px");break;case"bottom-right-aligned":c.className="introjs-arrow top-right",K(d,0,a,b),b.style.top=d.height+20+"px";break;case"bottom-middle-aligned":c.className="introjs-arrow top-middle",c=d.width/2-a.width/2,K(d,c,a,b)&&(b.style.right=null,z(d,c,a,f,b)),b.style.top=d.height+20+"px";break;default:c.className="introjs-arrow top",z(d,0,a,f,b),b.style.top=d.height+20+"px"}}}function z(a,b,c,e,d){return a.left+b+c.width>e.width?(d.style.left=e.width-c.width-a.left+"px",!1):(d.style.left=b+"px",!0)}function K(a,b,c,e){return 0>a.left+a.width-b-c.width?(e.style.left=-a.left+"px",!1):(e.style.right=b+"px",!0)}function s(a,b){-1<a.indexOf(b)&&a.splice(a.indexOf(b),1)}function t(a){if(a&&this._introItems[this._currentStep]){var b=this._introItems[this._currentStep],c=v(b.element),e=10;"floating"==b.position&&(e=0),a.setAttribute("style","width: "+(c.width+e)+"px; height:"+(c.height+e)+"px; top:"+(c.top-5)+"px;left: "+(c.left-5)+"px;")}}function O(){var a=document.querySelector(".introjs-disableInteraction");null===a&&(a=document.createElement("div"),a.className="introjs-disableInteraction",this._targetElement.appendChild(a)),t.call(this,a)}function I(a){void 0!==this._introChangeCallback&&this._introChangeCallback.call(this,a.element);var b=this,c=document.querySelector(".introjs-helperLayer"),e=document.querySelector(".introjs-tooltipReferenceLayer"),d="introjs-helperLayer";if(v(a.element),"string"==typeof a.highlightClass&&(d+=" "+a.highlightClass),"string"==typeof this._options.highlightClass&&(d+=" "+this._options.highlightClass),null!=c){var f=e.querySelector(".introjs-helperNumberLayer"),h=e.querySelector(".introjs-tooltiptext"),q=e.querySelector(".introjs-arrow"),r=e.querySelector(".introjs-tooltip"),k=e.querySelector(".introjs-skipbutton"),l=e.querySelector(".introjs-prevbutton"),p=e.querySelector(".introjs-nextbutton");if(c.className=d,r.style.opacity=0,r.style.display="none",null!=f){var g=this._introItems[0<=a.step-2?a.step-2:0];(null!=g&&"forward"==this._direction&&"floating"==g.position||"backward"==this._direction&&"floating"==a.position)&&(f.style.opacity=0)}if(t.call(b,c),t.call(b,e),(g=document.querySelectorAll(".introjs-fixParent"))&&0<g.length)for(d=g.length-1;0<=d;d--)g[d].className=g[d].className.replace(/introjs-fixParent/g,"").replace(/^\s+|\s+$/g,"");g=document.querySelector(".introjs-showElement"),g.className=g.className.replace(/introjs-[a-zA-Z]+/g,"").replace(/^\s+|\s+$/g,""),b._lastShowElementTimer&&clearTimeout(b._lastShowElementTimer),b._lastShowElementTimer=setTimeout(function(){null!=f&&(f.innerHTML=a.step),h.innerHTML=a.intro,r.style.display="block",J.call(b,a.element,r,q,f),e.querySelector(".introjs-bullets li > a.active").className="",e.querySelector('.introjs-bullets li > a[data-stepnumber="'+a.step+'"]').className="active",e.querySelector(".introjs-progress .introjs-progressbar").setAttribute("style","width:"+L.call(b)+"%;"),r.style.opacity=1,f&&(f.style.opacity=1),-1===p.tabIndex?k.focus():p.focus()},350)}else{var n=document.createElement("div"),l=document.createElement("div"),c=document.createElement("div"),m=document.createElement("div"),s=document.createElement("div"),D=document.createElement("div"),E=document.createElement("div"),u=document.createElement("div");n.className=d,l.className="introjs-tooltipReferenceLayer",t.call(b,n),t.call(b,l),this._targetElement.appendChild(n),this._targetElement.appendChild(l),c.className="introjs-arrow",s.className="introjs-tooltiptext",s.innerHTML=a.intro,D.className="introjs-bullets",!1===this._options.showBullets&&(D.style.display="none");for(var n=document.createElement("ul"),d=0,B=this._introItems.length;d<B;d++){var z=document.createElement("li"),A=document.createElement("a");A.onclick=function(){b.goToStep(this.getAttribute("data-stepnumber"))},d===a.step-1&&(A.className="active"),A.href="javascript:void(0);",A.innerHTML="&nbsp;",A.setAttribute("data-stepnumber",this._introItems[d].step),z.appendChild(A),n.appendChild(z)}D.appendChild(n),E.className="introjs-progress",!1===this._options.showProgress&&(E.style.display="none"),d=document.createElement("div"),d.className="introjs-progressbar",d.setAttribute("style","width:"+L.call(this)+"%;"),E.appendChild(d),u.className="introjs-tooltipbuttons",!1===this._options.showButtons&&(u.style.display="none"),m.className="introjs-tooltip",m.appendChild(s),m.appendChild(D),m.appendChild(E),1==this._options.showStepNumbers&&(g=document.createElement("span"),g.className="introjs-helperNumberLayer",g.innerHTML=a.step,l.appendChild(g)),m.appendChild(c),l.appendChild(m),p=document.createElement("a"),p.onclick=function(){b._introItems.length-1!=b._currentStep&&x.call(b)},p.href="javascript:void(0);",p.innerHTML=this._options.nextLabel,l=document.createElement("a"),l.onclick=function(){0!=b._currentStep&&C.call(b)},l.href="javascript:void(0);",l.innerHTML=this._options.prevLabel,k=document.createElement("a"),k.className="introjs-button introjs-skipbutton",k.href="javascript:void(0);",k.innerHTML=this._options.skipLabel,k.onclick=function(){b._introItems.length-1==b._currentStep&&"function"==typeof b._introCompleteCallback&&b._introCompleteCallback.call(b),b._introItems.length-1!=b._currentStep&&"function"==typeof b._introExitCallback&&b._introExitCallback.call(b),y.call(b,b._targetElement)},u.appendChild(k),1<this._introItems.length&&(u.appendChild(l),u.appendChild(p)),m.appendChild(u),J.call(b,a.element,m,c,g)}for(!0===this._options.disableInteraction&&O.call(b),l.removeAttribute("tabIndex"),p.removeAttribute("tabIndex"),0==this._currentStep&&1<this._introItems.length?(l.className="introjs-button introjs-prevbutton introjs-disabled",l.tabIndex="-1",p.className="introjs-button introjs-nextbutton",k.innerHTML=this._options.skipLabel):this._introItems.length-1==this._currentStep||1==this._introItems.length?(k.innerHTML=this._options.doneLabel,
l.className="introjs-button introjs-prevbutton",p.className="introjs-button introjs-nextbutton introjs-disabled",p.tabIndex="-1"):(l.className="introjs-button introjs-prevbutton",p.className="introjs-button introjs-nextbutton",k.innerHTML=this._options.skipLabel),p.focus(),a.element.className+=" introjs-showElement",g=w(a.element,"position"),"absolute"!==g&&"relative"!==g&&(a.element.className+=" introjs-relativePosition"),g=a.element.parentNode;null!=g&&"body"!==g.tagName.toLowerCase();)c=w(g,"z-index"),m=parseFloat(w(g,"opacity")),u=w(g,"transform")||w(g,"-webkit-transform")||w(g,"-moz-transform")||w(g,"-ms-transform")||w(g,"-o-transform"),(/[0-9]+/.test(c)||1>m||"none"!==u&&void 0!==u)&&(g.className+=" introjs-fixParent"),g=g.parentNode;P(a.element)||!0!==this._options.scrollToElement||(m=a.element.getBoundingClientRect(),g=F().height,c=m.bottom-(m.bottom-m.top),m=m.bottom-g,0>c||a.element.clientHeight>g?window.scrollBy(0,c-30):window.scrollBy(0,m+100)),void 0!==this._introAfterChangeCallback&&this._introAfterChangeCallback.call(this,a.element)}function w(a,b){var c="";return a.currentStyle?c=a.currentStyle[b]:document.defaultView&&document.defaultView.getComputedStyle&&(c=document.defaultView.getComputedStyle(a,null).getPropertyValue(b)),c&&c.toLowerCase?c.toLowerCase():c}function F(){if(void 0!=window.innerWidth)return{width:window.innerWidth,height:window.innerHeight};var a=document.documentElement;return{width:a.clientWidth,height:a.clientHeight}}function P(a){return a=a.getBoundingClientRect(),0<=a.top&&0<=a.left&&a.bottom+80<=window.innerHeight&&a.right<=window.innerWidth}function N(a){var b=document.createElement("div"),c="",e=this;if(b.className="introjs-overlay","body"===a.tagName.toLowerCase())c+="top: 0;bottom: 0; left: 0;right: 0;position: fixed;",b.setAttribute("style",c);else{var d=v(a);d&&(c+="width: "+d.width+"px; height:"+d.height+"px; top:"+d.top+"px;left: "+d.left+"px;",b.setAttribute("style",c))}return a.appendChild(b),b.onclick=function(){1==e._options.exitOnOverlayClick&&(void 0!=e._introExitCallback&&e._introExitCallback.call(e),y.call(e,a))},setTimeout(function(){c+="opacity: "+e._options.overlayOpacity.toString()+";",b.setAttribute("style",c)},10),!0}function v(a){var b={};b.width=a.offsetWidth,b.height=a.offsetHeight;for(var c=0,e=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)c+=a.offsetLeft,e+=a.offsetTop,a=a.offsetParent;return b.top=e,b.left=c,b}function L(){return parseInt(this._currentStep+1,10)/this._introItems.length*100}var G=function(a){if("object"==typeof a)return new n(a);if("string"==typeof a){if(a=document.querySelector(a))return new n(a);throw Error("There is no element with given selector.")}return new n(document.body)};return G.version="1.1.1",G.fn=n.prototype={clone:function(){return new n(this)},setOption:function(a,b){return this._options[a]=b,this},setOptions:function(a){var e,b=this._options,c={};for(e in b)c[e]=b[e];for(e in a)c[e]=a[e];return this._options=c,this},start:function(){return M.call(this,this._targetElement),this},goToStep:function(a){return this._currentStep=a-2,void 0!==this._introItems&&x.call(this),this},nextStep:function(){return x.call(this),this},previousStep:function(){return C.call(this),this},exit:function(){return y.call(this,this._targetElement),this},refresh:function(){return t.call(this,document.querySelector(".introjs-helperLayer")),t.call(this,document.querySelector(".introjs-tooltipReferenceLayer")),this},onbeforechange:function(a){if("function"!=typeof a)throw Error("Provided callback for onbeforechange was not a function");return this._introBeforeChangeCallback=a,this},onchange:function(a){if("function"!=typeof a)throw Error("Provided callback for onchange was not a function.");return this._introChangeCallback=a,this},onafterchange:function(a){if("function"!=typeof a)throw Error("Provided callback for onafterchange was not a function");return this._introAfterChangeCallback=a,this},oncomplete:function(a){if("function"!=typeof a)throw Error("Provided callback for oncomplete was not a function.");return this._introCompleteCallback=a,this},onexit:function(a){if("function"!=typeof a)throw Error("Provided callback for onexit was not a function.");return this._introExitCallback=a,this}},B.introJs=G}),function(root,factory){"function"==typeof define&&define.amd?define(["angular","intro"],factory):"object"==typeof exports?module.exports=factory(require("angular"),require("intro")):root.angularIntroJs=factory(root.angular,root.introJs)}(this,function(angular,introJs){"object"==typeof introJs&&(introJs=introJs.introJs);var ngIntroDirective=angular.module("angular-intro",[]);return ngIntroDirective.directive("ngIntroOptions",["$timeout",function($timeout){return{restrict:"A",scope:{ngIntroMethod:"=",ngIntroExitMethod:"=?",ngIntroNextMethod:"=?",ngIntroPreviousMethod:"=?",ngIntroOptions:"=",ngIntroOncomplete:"=",ngIntroOnexit:"=",ngIntroOnchange:"=",ngIntroOnbeforechange:"=",ngIntroOnafterchange:"=",ngIntroAutostart:"=",ngIntroAutorefresh:"="},link:function(scope,element,attrs){var intro;scope.ngIntroMethod=function(step){var navigationWatch=scope.$on("$locationChangeStart",function(){intro.exit()});intro="string"==typeof step?introJs(step):introJs(),console.log(scope.ngIntroOptions),intro.setOptions(scope.ngIntroOptions),scope.ngIntroAutorefresh&&scope.$watch(function(){intro.refresh()}),scope.ngIntroOncomplete&&intro.oncomplete(function(){scope.ngIntroOncomplete.call(this,scope),$timeout(function(){scope.$digest()}),navigationWatch()}),scope.ngIntroOnexit&&intro.onexit(function(){scope.ngIntroOnexit.call(this,scope),$timeout(function(){scope.$digest()}),navigationWatch()}),scope.ngIntroOnchange&&intro.onchange(function(targetElement){scope.ngIntroOnchange.call(this,targetElement,scope),$timeout(function(){scope.$digest()})}),scope.ngIntroOnbeforechange&&intro.onbeforechange(function(targetElement){scope.ngIntroOnbeforechange.call(this,targetElement,scope),$timeout(function(){scope.$digest()})}),scope.ngIntroOnafterchange&&intro.onafterchange(function(targetElement){scope.ngIntroOnafterchange.call(this,targetElement,scope),$timeout(function(){scope.$digest()})}),"number"==typeof step?intro.goToStep(step).start():(console.log("start"),intro.start())},scope.ngIntroNextMethod=function(){intro.nextStep()},scope.ngIntroPreviousMethod=function(){intro.previousStep()},scope.ngIntroExitMethod=function(callback){intro.exit(),callback()};var autoStartWatch=scope.$watch("ngIntroAutostart",function(){scope.ngIntroAutostart&&$timeout(function(){scope.ngIntroMethod()}),autoStartWatch()});scope.$on("$locationChangeSuccess",function(){void 0!==intro&&intro.exit()})}}}]),ngIntroDirective}),function(){"use strict";var angular=window.angular?window.angular:"undefined"!=typeof require?require("angular"):void 0,circular=angular.module("angularCircularNavigation",[]).directive("circular",["$compile",function($compile){return{restrict:"EA",scope:{options:"="},template:'<button ng-click="toggleMenu()" class="cn-button {{options.button.size}}" ng-class="options.button.cssClass" style="background: {{options.button.background ? options.button.background : options.background}}; color: {{options.button.color ? options.button.color :options.color}};">{{options.content}}</button><div class="cn-wrapper {{options.size}} items-{{options.items.length}}" ng-class="{\'opened-nav\': options.isOpen}"><ul><li ng-repeat="item in options.items"><a ng-hide="item.empty" ng-click="perform(options, item)" ng-class="{\'is-active\': item.isActive}" class="{{item.cssClass}}" style="background: {{item.background ? item.background : options.background}}; color: {{item.color ? item.color : options.color}};"><span>{{item.content}}</span></a></li></ul></div>',controller:["$scope","$element","$attrs",function($scope,$element,$attrs){$scope.toggleMenu=function(){$scope.options.isOpen=!$scope.options.isOpen},$scope.perform=function(options,item){"function"==typeof item.onclick&&item.onclick(options,item),$scope.options.toggleOnClick&&$scope.toggleMenu()}}]}}]);"function"==typeof define&&define.amd?define("circular",["angular"],circular):"undefined"!=typeof exports&&"undefined"!=typeof module&&(module.exports=circular)}(),function(a,b){b.true=a,function(b,c){"function"==typeof define&&define.amd?define(b):"undefined"!=typeof module&&"object"==typeof a?module.exports=b():c.rangy=b()}(function(){function a(a,b){var c=typeof a[b];return c==u||!(c!=t||!a[b])||"unknown"==c}function b(a,b){return!(typeof a[b]!=t||!a[b])}function c(a,b){return typeof a[b]!=v}function d(a){return function(b,c){for(var d=c.length;d--;)if(!a(b,c[d]))return!1;return!0}}function e(a){return a&&A(a,z)&&C(a,y)}function f(a){return b(a,"body")?a.body:a.getElementsByTagName("body")[0]}function g(b){typeof console!=v&&a(console,"log")&&console.log(b)}function h(a,b){F&&b?alert(a):g(a)}function i(a){H.initialized=!0,H.supported=!1,h("Rangy is not supported in this environment. Reason: "+a,H.config.alertOnFail)}function j(a){h("Rangy warning: "+a,H.config.alertOnWarn)}function k(a){return a.message||a.description||String(a)}function l(){if(F&&!H.initialized){var b,c=!1,d=!1;a(document,"createRange")&&(b=document.createRange(),A(b,x)&&C(b,w)&&(c=!0));var h=f(document);if(!h||"body"!=h.nodeName.toLowerCase())return void i("No body element found");if(h&&a(h,"createTextRange")&&(b=h.createTextRange(),e(b)&&(d=!0)),!c&&!d)return void i("Neither Range nor TextRange are available");H.initialized=!0,H.features={implementsDomRange:c,implementsTextRange:d};var j,l;for(var m in E)(j=E[m])instanceof p&&j.init(j,H);for(var n=0,o=K.length;o>n;++n)try{K[n](H)}catch(q){l="Rangy init listener threw an exception. Continuing. Detail: "+k(q),g(l)}}}function m(a,b,c){c&&(a+=" in module "+c.name),H.warn("DEPRECATED: "+a+" is deprecated. Please use "+b+" instead.")}function n(a,b,c,d){a[b]=function(){return m(b,c,d),a[c].apply(a,G.toArray(arguments))}}function o(a){a=a||window,l();for(var b=0,c=L.length;c>b;++b)L[b](a)}function p(a,b,c){this.name=a,this.dependencies=b,this.initialized=!1,this.supported=!1,this.initializer=c}function q(a,b,c){var d=new p(a,b,function(b){if(!b.initialized){b.initialized=!0;try{c(H,b),b.supported=!0}catch(d){var e="Module '"+a+"' failed to load: "+k(d);g(e),d.stack&&g(d.stack)}}});return E[a]=d,d}function r(){}function s(){}var t="object",u="function",v="undefined",w=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],x=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],y=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],z=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"],A=d(a),B=d(b),C=d(c),D=[].forEach?function(a,b){a.forEach(b)}:function(a,b){for(var c=0,d=a.length;d>c;++c)b(a[c],c)},E={},F=typeof window!=v&&typeof document!=v,G={isHostMethod:a,isHostObject:b,isHostProperty:c,areHostMethods:A,areHostObjects:B,areHostProperties:C,isTextRange:e,getBody:f,forEach:D},H={version:"1.3.0",initialized:!1,isBrowser:F,supported:!0,util:G,features:{},modules:E,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==v||rangyAutoInitialize}};H.fail=i,H.warn=j;var I;!{}.hasOwnProperty?i("hasOwnProperty not supported"):(G.extend=I=function(a,b,c){var d,e;for(var f in b)b.hasOwnProperty(f)&&(d=a[f],e=b[f],c&&null!==d&&"object"==typeof d&&null!==e&&"object"==typeof e&&I(d,e,!0),a[f]=e);return b.hasOwnProperty("toString")&&(a.toString=b.toString),a},G.createOptions=function(a,b){var c={};return I(c,b),a&&I(c,a),c}),F||i("Rangy can only run in a browser"),function(){var a;if(F){var b=document.createElement("div");b.appendChild(document.createElement("span"));var c=[].slice;try{1==c.call(b.childNodes,0)[0].nodeType&&(a=function(a){return c.call(a,0)})}catch(d){}}a||(a=function(a){for(var b=[],c=0,d=a.length;d>c;++c)b[c]=a[c];return b}),G.toArray=a}();var J;F&&(a(document,"addEventListener")?J=function(a,b,c){a.addEventListener(b,c,!1)}:a(document,"attachEvent")?J=function(a,b,c){a.attachEvent("on"+b,c)}:i("Document does not have required addEventListener or attachEvent method"),G.addListener=J);var K=[];G.deprecationNotice=m,G.createAliasForDeprecatedMethod=n,H.init=l,H.addInitListener=function(a){H.initialized?a(H):K.push(a)};var L=[];H.addShimListener=function(a){L.push(a)},F&&(H.shim=H.createMissingNativeApi=o,n(H,"createMissingNativeApi","shim")),p.prototype={init:function(){for(var a,b,c=this.dependencies||[],d=0,e=c.length;e>d;++d){if(b=c[d],!((a=E[b])&&a instanceof p))throw new Error("required module '"+b+"' not found");if(a.init(),!a.supported)throw new Error("required module '"+b+"' not supported")}this.initializer(this)},fail:function(a){throw this.initialized=!0,this.supported=!1,new Error(a)},warn:function(a){H.warn("Module "+this.name+": "+a)},deprecationNotice:function(a,b){H.warn("DEPRECATED: "+a+" in module "+this.name+" is deprecated. Please use "+b+" instead")},createError:function(a){return new Error("Error in Rangy "+this.name+" module: "+a)}},H.createModule=function(a){var b,c;2==arguments.length?(b=arguments[1],c=[]):(b=arguments[2],c=arguments[1]);var d=q(a,c,b);H.initialized&&H.supported&&d.init()},H.createCoreModule=function(a,b,c){q(a,b,c)},H.RangePrototype=r,H.rangePrototype=new r,H.selectionPrototype=new s,H.createCoreModule("DomUtil",[],function(a,b){function c(a){var b;return typeof a.namespaceURI==F||null===(b=a.namespaceURI)||"http://www.w3.org/1999/xhtml"==b}function d(a){var b=a.parentNode;return 1==b.nodeType?b:null}function e(a){for(var b=0;a=a.previousSibling;)++b;return b}function f(a){switch(a.nodeType){case 7:case 10:return 0;case 3:case 8:return a.length;default:return a.childNodes.length}}function g(a,b){var c,d=[];for(c=a;c;c=c.parentNode)d.push(c);for(c=b;c;c=c.parentNode)if(K(d,c))return c;return null}function h(a,b,c){for(var d=c?b:b.parentNode;d;){if(d===a)return!0;d=d.parentNode}return!1}function i(a,b){return h(a,b,!0)}function j(a,b,c){for(var d,e=c?a:a.parentNode;e;){if((d=e.parentNode)===b)return e;e=d}return null}function k(a){var b=a.nodeType;return 3==b||4==b||8==b}function l(a){if(!a)return!1;var b=a.nodeType;return 3==b||8==b}function m(a,b){var c=b.nextSibling,d=b.parentNode;return c?d.insertBefore(a,c):d.appendChild(a),a}function n(a,b,c){var d=a.cloneNode(!1);if(d.deleteData(0,b),a.deleteData(b,a.length-b),m(d,a),c)for(var f,g=0;f=c[g++];)f.node==a&&f.offset>b?(f.node=d,f.offset-=b):f.node==a.parentNode&&f.offset>e(a)&&++f.offset;return d}function o(a){if(9==a.nodeType)return a;if(typeof a.ownerDocument!=F)return a.ownerDocument;if(typeof a.document!=F)return a.document;if(a.parentNode)return o(a.parentNode);throw b.createError("getDocument: no document found for node")}function p(a){var c=o(a);if(typeof c.defaultView!=F)return c.defaultView;if(typeof c.parentWindow!=F)return c.parentWindow;throw b.createError("Cannot get a window object for node")}function q(a){if(typeof a.contentDocument!=F)return a.contentDocument;if(typeof a.contentWindow!=F)return a.contentWindow.document;throw b.createError("getIframeDocument: No Document object found for iframe element")}function r(a){if(typeof a.contentWindow!=F)return a.contentWindow;if(typeof a.contentDocument!=F)return a.contentDocument.defaultView;throw b.createError("getIframeWindow: No Window object found for iframe element")}function s(a){return a&&G.isHostMethod(a,"setTimeout")&&G.isHostObject(a,"document")}function t(a,b,c){var d;if(a?G.isHostProperty(a,"nodeType")?d=1==a.nodeType&&"iframe"==a.tagName.toLowerCase()?q(a):o(a):s(a)&&(d=a.document):d=document,!d)throw b.createError(c+"(): Parameter must be a Window object or DOM node");return d}function u(a){for(var b;b=a.parentNode;)a=b;return a}function v(a,c,d,f){var h,i,k,l,m;if(a==d)return c===f?0:f>c?-1:1;if(h=j(d,a,!0))return c<=e(h)?-1:1;if(h=j(a,d,!0))return e(h)<f?-1:1;if(!(i=g(a,d)))throw new Error("comparePoints error: nodes have no common ancestor");if(k=a===i?i:j(a,i,!0),l=d===i?i:j(d,i,!0),k===l)throw b.createError("comparePoints got to case 4 and childA and childB are the same!");for(m=i.firstChild;m;){if(m===k)return-1;if(m===l)return 1;m=m.nextSibling}}function w(a){try{return a.parentNode,!1}catch(c){return!0}}function x(a){if(!a)return"[No node]";if(L&&w(a))return"[Broken node]";if(k(a))return'"'+a.data+'"';if(1==a.nodeType){var b=a.id?' id="'+a.id+'"':"";return"<"+a.nodeName+b+">[index:"+e(a)+",length:"+a.childNodes.length+"]["+(a.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return a.nodeName}function y(a){for(var b,c=o(a).createDocumentFragment();b=a.firstChild;)c.appendChild(b);return c}function z(a,b,c){var d=H(a),e=a.createElement("div");e.contentEditable=""+!!c,b&&(e.innerHTML=b);var f=d.firstChild;return f?d.insertBefore(e,f):d.appendChild(e),e}function A(a){return a.parentNode.removeChild(a)}function B(a){this.root=a,this._next=a}function C(a){return new B(a)}function D(a,b){this.node=a,this.offset=b}function E(a){this.code=this[a],this.codeName=a,this.message="DOMException: "+this.codeName}var F="undefined",G=a.util,H=G.getBody;G.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||b.fail("document missing a Node creation method"),G.isHostMethod(document,"getElementsByTagName")||b.fail("document missing getElementsByTagName method");var I=document.createElement("div");G.areHostMethods(I,["insertBefore","appendChild","cloneNode"]||!G.areHostObjects(I,["previousSibling","nextSibling","childNodes","parentNode"]))||b.fail("Incomplete Element implementation"),G.isHostProperty(I,"innerHTML")||b.fail("Element is missing innerHTML property");var J=document.createTextNode("test");G.areHostMethods(J,["splitText","deleteData","insertData","appendData","cloneNode"]||!G.areHostObjects(I,["previousSibling","nextSibling","childNodes","parentNode"])||!G.areHostProperties(J,["data"]))||b.fail("Incomplete Text Node implementation");var K=function(a,b){for(var c=a.length;c--;)if(a[c]===b)return!0;return!1},L=!1;!function(){var b=document.createElement("b");b.innerHTML="1";var c=b.firstChild;b.innerHTML="<br />",L=w(c),a.features.crashyTextNodes=L}();var M;typeof window.getComputedStyle!=F?M=function(a,b){return p(a).getComputedStyle(a,null)[b]}:typeof document.documentElement.currentStyle!=F?M=function(a,b){return a.currentStyle?a.currentStyle[b]:""}:b.fail("No means of obtaining computed style properties found"),B.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var a,b,c=this._current=this._next;if(this._current)if(a=c.firstChild)this._next=a;else{for(b=null;c!==this.root&&!(b=c.nextSibling);)c=c.parentNode;this._next=b}return this._current},detach:function(){this._current=this._next=this.root=null}},D.prototype={equals:function(a){return!!a&&this.node===a.node&&this.offset==a.offset},inspect:function(){return"[DomPosition("+x(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},E.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},E.prototype.toString=function(){return this.message},a.dom={arrayContains:K,isHtmlNamespace:c,parentElement:d,getNodeIndex:e,getNodeLength:f,getCommonAncestor:g,isAncestorOf:h,isOrIsAncestorOf:i,getClosestAncestorIn:j,isCharacterDataNode:k,isTextOrCommentNode:l,insertAfter:m,splitDataNode:n,getDocument:o,getWindow:p,getIframeWindow:r,getIframeDocument:q,getBody:H,isWindow:s,getContentDocument:t,getRootContainer:u,comparePoints:v,isBrokenNode:w,inspectNode:x,getComputedStyleProperty:M,createTestElement:z,removeNode:A,fragmentFromNodeChildren:y,createIterator:C,DomPosition:D},a.DOMException=E}),H.createCoreModule("DomRange",["DomUtil"],function(a,b){function c(a,b){return 3!=a.nodeType&&(P(a,b.startContainer)||P(a,b.endContainer))}function d(a){return a.document||Q(a.startContainer)}function e(a){return W(a.startContainer)}function f(a){return new L(a.parentNode,O(a))}function g(a){return new L(a.parentNode,O(a)+1)}function h(a,b,c){var d=11==a.nodeType?a.firstChild:a;return N(b)?c==b.length?J.insertAfter(a,b):b.parentNode.insertBefore(a,0==c?b:S(b,c)):c>=b.childNodes.length?b.appendChild(a):b.insertBefore(a,b.childNodes[c]),d}function i(a,b,c){if(z(a),z(b),d(b)!=d(a))throw new M("WRONG_DOCUMENT_ERR");var e=R(a.startContainer,a.startOffset,b.endContainer,b.endOffset),f=R(a.endContainer,a.endOffset,b.startContainer,b.startOffset);return c?0>=e&&f>=0:0>e&&f>0}function j(a){for(var b,c,e,f=d(a.range).createDocumentFragment();c=a.next();){if(b=a.isPartiallySelectedSubtree(),c=c.cloneNode(!b),b&&(e=a.getSubtreeIterator(),c.appendChild(j(e)),e.detach()),10==c.nodeType)throw new M("HIERARCHY_REQUEST_ERR");f.appendChild(c)}return f}function k(a,b,c){var d,e;c=c||{stop:!1};for(var f,g;f=a.next();)if(a.isPartiallySelectedSubtree()){if(b(f)===!1)return void(c.stop=!0);if(g=a.getSubtreeIterator(),k(g,b,c),g.detach(),c.stop)return}else for(d=J.createIterator(f);e=d.next();)if(b(e)===!1)return void(c.stop=!0)}function l(a){for(var b;a.next();)a.isPartiallySelectedSubtree()?(b=a.getSubtreeIterator(),l(b),b.detach()):a.remove()}function m(a){for(var b,c,e=d(a.range).createDocumentFragment();b=a.next();){if(a.isPartiallySelectedSubtree()?(b=b.cloneNode(!1),c=a.getSubtreeIterator(),b.appendChild(m(c)),c.detach()):a.remove(),10==b.nodeType)throw new M("HIERARCHY_REQUEST_ERR");e.appendChild(b)}return e}function n(a,b,c){var d,e=!(!b||!b.length),f=!!c;e&&(d=new RegExp("^("+b.join("|")+")$"));var g=[];return k(new p(a,!1),function(b){if((!e||d.test(b.nodeType))&&(!f||c(b))){var h=a.startContainer;if(b!=h||!N(h)||a.startOffset!=h.length){var i=a.endContainer;b==i&&N(i)&&0==a.endOffset||g.push(b)}}}),g}function o(a){return"["+(void 0===a.getName?"Range":a.getName())+"("+J.inspectNode(a.startContainer)+":"+a.startOffset+", "+J.inspectNode(a.endContainer)+":"+a.endOffset+")]"}function p(a,b){if(this.range=a,this.clonePartiallySelectedTextNodes=b,!a.collapsed){this.sc=a.startContainer,this.so=a.startOffset,this.ec=a.endContainer,this.eo=a.endOffset;var c=a.commonAncestorContainer;this.sc===this.ec&&N(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==c||N(this.sc)?T(this.sc,c,!0):this.sc.childNodes[this.so],this._last=this.ec!==c||N(this.ec)?T(this.ec,c,!0):this.ec.childNodes[this.eo-1])}}function q(a){return function(b,c){for(var d,e=c?b:b.parentNode;e;){if(d=e.nodeType,V(a,d))return e;e=e.parentNode}return null}}function r(a,b){if(ea(a,b))throw new M("INVALID_NODE_TYPE_ERR")}function s(a,b){if(!V(b,a.nodeType))throw new M("INVALID_NODE_TYPE_ERR")}function t(a,b){if(0>b||b>(N(a)?a.length:a.childNodes.length))throw new M("INDEX_SIZE_ERR")}function u(a,b){if(ca(a,!0)!==ca(b,!0))throw new M("WRONG_DOCUMENT_ERR")}function v(a){if(da(a,!0))throw new M("NO_MODIFICATION_ALLOWED_ERR")}function w(a,b){if(!a)throw new M(b)}function x(a,b){return b<=(N(a)?a.length:a.childNodes.length)}function y(a){return!!a.startContainer&&!!a.endContainer&&!(X&&(J.isBrokenNode(a.startContainer)||J.isBrokenNode(a.endContainer)))&&W(a.startContainer)==W(a.endContainer)&&x(a.startContainer,a.startOffset)&&x(a.endContainer,a.endOffset)}function z(a){if(!y(a))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+a.inspect()+")")}function A(a,b){z(a);var c=a.startContainer,d=a.startOffset,e=a.endContainer,f=a.endOffset,g=c===e;N(e)&&f>0&&f<e.length&&S(e,f,b),N(c)&&d>0&&d<c.length&&(c=S(c,d,b),g?(f-=d,e=c):e==c.parentNode&&f>=O(c)&&f++,d=0),a.setStartAndEnd(c,d,e,f)}function B(a){z(a);var b=a.commonAncestorContainer.parentNode.cloneNode(!1);return b.appendChild(a.cloneContents()),b.innerHTML}function C(a){a.START_TO_START=ka,a.START_TO_END=la,a.END_TO_END=ma,a.END_TO_START=na,a.NODE_BEFORE=oa,a.NODE_AFTER=pa,a.NODE_BEFORE_AND_AFTER=qa,a.NODE_INSIDE=ra}function D(a){C(a),C(a.prototype)}function E(a,b){return function(){z(this);var c,d,e=this.startContainer,f=this.startOffset,h=this.commonAncestorContainer,i=new p(this,!0);e!==h&&(c=T(e,h,!0),d=g(c),e=d.node,f=d.offset),k(i,v),i.reset();var j=a(i);return i.detach(),b(this,e,f,e,f),j}}function F(b,d){function e(a,b){return function(c){s(c,Z),s(W(c),$);var d=(a?f:g)(c);(b?h:i)(this,d.node,d.offset)}}function h(a,b,c){var e=a.endContainer,f=a.endOffset;(b!==a.startContainer||c!==a.startOffset)&&((W(b)!=W(e)||1==R(b,c,e,f))&&(e=b,f=c),d(a,b,c,e,f))}function i(a,b,c){var e=a.startContainer,f=a.startOffset;(b!==a.endContainer||c!==a.endOffset)&&((W(b)!=W(e)||-1==R(b,c,e,f))&&(e=b,f=c),d(a,e,f,b,c))}var j=function(){};j.prototype=a.rangePrototype,b.prototype=new j,K.extend(b.prototype,{setStart:function(a,b){r(a,!0),t(a,b),h(this,a,b)},setEnd:function(a,b){r(a,!0),t(a,b),i(this,a,b)},setStartAndEnd:function(){var a=arguments,b=a[0],c=a[1],e=b,f=c;switch(a.length){case 3:f=a[2];break;case 4:e=a[2],f=a[3]}d(this,b,c,e,f)},setBoundary:function(a,b,c){this["set"+(c?"Start":"End")](a,b)},setStartBefore:e(!0,!0),setStartAfter:e(!1,!0),setEndBefore:e(!0,!1),setEndAfter:e(!1,!1),collapse:function(a){z(this),a?d(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):d(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(a){r(a,!0),d(this,a,0,a,U(a))},selectNode:function(a){r(a,!1),s(a,Z);var b=f(a),c=g(a);d(this,b.node,b.offset,c.node,c.offset)},extractContents:E(m,d),deleteContents:E(l,d),canSurroundContents:function(){z(this),v(this.startContainer),v(this.endContainer);var a=new p(this,!0),b=a._first&&c(a._first,this)||a._last&&c(a._last,this);return a.detach(),!b},splitBoundaries:function(){A(this)},splitBoundariesPreservingPositions:function(a){A(this,a)},normalizeBoundaries:function(){z(this);var a,b=this.startContainer,c=this.startOffset,e=this.endContainer,f=this.endOffset,g=function(a){var b=a.nextSibling;b&&b.nodeType==a.nodeType&&(e=a,f=a.length,a.appendData(b.data),Y(b))},h=function(a){var d=a.previousSibling;if(d&&d.nodeType==a.nodeType){b=a;var g=a.length;if(c=d.length,a.insertData(0,d.data),Y(d),b==e)f+=c,e=b;else if(e==a.parentNode){var h=O(a);f==h?(e=a,f=g):f>h&&f--}}},i=!0;if(N(e))f==e.length?g(e):0==f&&(a=e.previousSibling)&&a.nodeType==e.nodeType&&(f=a.length,b==e&&(i=!1),a.appendData(e.data),Y(e),e=a);else{if(f>0){var j=e.childNodes[f-1];j&&N(j)&&g(j)}i=!this.collapsed}if(i){if(N(b))0==c?h(b):c==b.length&&(a=b.nextSibling)&&a.nodeType==b.nodeType&&(e==a&&(e=b,f+=b.length),b.appendData(a.data),Y(a));else if(c<b.childNodes.length){var k=b.childNodes[c];k&&N(k)&&h(k)}}else b=e,c=f;d(this,b,c,e,f)},collapseToPoint:function(a,b){r(a,!0),t(a,b),this.setStartAndEnd(a,b)}}),D(b)}function G(a){a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset,a.commonAncestorContainer=a.collapsed?a.startContainer:J.getCommonAncestor(a.startContainer,a.endContainer)}function H(a,b,c,d,e){a.startContainer=b,a.startOffset=c,a.endContainer=d,a.endOffset=e,a.document=J.getDocument(b),G(a)}function I(a){this.startContainer=a,this.startOffset=0,this.endContainer=a,this.endOffset=0,this.document=a,G(this)}var J=a.dom,K=a.util,L=J.DomPosition,M=a.DOMException,N=J.isCharacterDataNode,O=J.getNodeIndex,P=J.isOrIsAncestorOf,Q=J.getDocument,R=J.comparePoints,S=J.splitDataNode,T=J.getClosestAncestorIn,U=J.getNodeLength,V=J.arrayContains,W=J.getRootContainer,X=a.features.crashyTextNodes,Y=J.removeNode;p.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var a=this._current=this._next;return a&&(this._next=a!==this._last?a.nextSibling:null,N(a)&&this.clonePartiallySelectedTextNodes&&(a===this.ec&&(a=a.cloneNode(!0)).deleteData(this.eo,a.length-this.eo),this._current===this.sc&&(a=a.cloneNode(!0)).deleteData(0,this.so))),a},remove:function(){var a,b,c=this._current;!N(c)||c!==this.sc&&c!==this.ec?c.parentNode&&Y(c):(a=c===this.sc?this.so:0,b=c===this.ec?this.eo:c.length,a!=b&&c.deleteData(a,b-a))},isPartiallySelectedSubtree:function(){return c(this._current,this.range)},getSubtreeIterator:function(){var a;if(this.isSingleCharacterDataNode)a=this.range.cloneRange(),a.collapse(!1);else{a=new I(d(this.range));var b=this._current,c=b,e=0,f=b,g=U(b);P(b,this.sc)&&(c=this.sc,e=this.so),P(b,this.ec)&&(f=this.ec,g=this.eo),H(a,c,e,f,g)}return new p(a,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var Z=[1,3,4,5,7,8,10],$=[2,9,11],_=[5,6,10,12],aa=[1,3,4,5,7,8,10,11],ba=[1,3,4,5,7,8],ca=q([9,11]),da=q(_),ea=q([6,10,12]),fa=document.createElement("style"),ga=!1;try{fa.innerHTML="<b>x</b>",ga=3==fa.firstChild.nodeType}catch(ha){}a.features.htmlParsingConforms=ga;var ia=ga?function(a){var b=this.startContainer,c=Q(b);if(!b)throw new M("INVALID_STATE_ERR");var d=null;return 1==b.nodeType?d=b:N(b)&&(d=J.parentElement(b)),d=null===d||"HTML"==d.nodeName&&J.isHtmlNamespace(Q(d).documentElement)&&J.isHtmlNamespace(d)?c.createElement("body"):d.cloneNode(!1),d.innerHTML=a,J.fragmentFromNodeChildren(d)}:function(a){var b=d(this),c=b.createElement("body");return c.innerHTML=a,J.fragmentFromNodeChildren(c)},ja=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],ka=0,la=1,ma=2,na=3,oa=0,pa=1,qa=2,ra=3;K.extend(a.rangePrototype,{compareBoundaryPoints:function(a,b){z(this),u(this.startContainer,b.startContainer);var c,d,e,f,g=a==na||a==ka?"start":"end",h=a==la||a==ka?"start":"end";return c=this[g+"Container"],d=this[g+"Offset"],e=b[h+"Container"],f=b[h+"Offset"],R(c,d,e,f)},insertNode:function(a){if(z(this),s(a,aa),v(this.startContainer),P(a,this.startContainer))throw new M("HIERARCHY_REQUEST_ERR");var b=h(a,this.startContainer,this.startOffset);this.setStartBefore(b)},cloneContents:function(){z(this);var a,b;if(this.collapsed)return d(this).createDocumentFragment();if(this.startContainer===this.endContainer&&N(this.startContainer))return a=this.startContainer.cloneNode(!0),a.data=a.data.slice(this.startOffset,this.endOffset),b=d(this).createDocumentFragment(),b.appendChild(a),b;var c=new p(this,!0);return a=j(c),c.detach(),a},canSurroundContents:function(){z(this),v(this.startContainer),v(this.endContainer);var a=new p(this,!0),b=a._first&&c(a._first,this)||a._last&&c(a._last,this);return a.detach(),!b},surroundContents:function(a){if(s(a,ba),!this.canSurroundContents())throw new M("INVALID_STATE_ERR");var b=this.extractContents();if(a.hasChildNodes())for(;a.lastChild;)a.removeChild(a.lastChild);h(a,this.startContainer,this.startOffset),a.appendChild(b),this.selectNode(a)},cloneRange:function(){z(this);for(var a,b=new I(d(this)),c=ja.length;c--;)a=ja[c],b[a]=this[a];return b},toString:function(){z(this);var a=this.startContainer;if(a===this.endContainer&&N(a))return 3==a.nodeType||4==a.nodeType?a.data.slice(this.startOffset,this.endOffset):"";var b=[],c=new p(this,!0);return k(c,function(a){(3==a.nodeType||4==a.nodeType)&&b.push(a.data)}),c.detach(),b.join("")},compareNode:function(a){z(this);var b=a.parentNode,c=O(a);if(!b)throw new M("NOT_FOUND_ERR");var d=this.comparePoint(b,c),e=this.comparePoint(b,c+1);return 0>d?e>0?qa:oa:e>0?pa:ra},comparePoint:function(a,b){return z(this),w(a,"HIERARCHY_REQUEST_ERR"),u(a,this.startContainer),R(a,b,this.startContainer,this.startOffset)<0?-1:R(a,b,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:ia,toHtml:function(){return B(this)},intersectsNode:function(a,b){if(z(this),W(a)!=e(this))return!1;var c=a.parentNode,d=O(a);if(!c)return!0
;var f=R(c,d,this.endContainer,this.endOffset),g=R(c,d+1,this.startContainer,this.startOffset);return b?0>=f&&g>=0:0>f&&g>0},isPointInRange:function(a,b){return z(this),w(a,"HIERARCHY_REQUEST_ERR"),u(a,this.startContainer),R(a,b,this.startContainer,this.startOffset)>=0&&R(a,b,this.endContainer,this.endOffset)<=0},intersectsRange:function(a){return i(this,a,!1)},intersectsOrTouchesRange:function(a){return i(this,a,!0)},intersection:function(a){if(this.intersectsRange(a)){var b=R(this.startContainer,this.startOffset,a.startContainer,a.startOffset),c=R(this.endContainer,this.endOffset,a.endContainer,a.endOffset),d=this.cloneRange();return-1==b&&d.setStart(a.startContainer,a.startOffset),1==c&&d.setEnd(a.endContainer,a.endOffset),d}return null},union:function(a){if(this.intersectsOrTouchesRange(a)){var b=this.cloneRange();return-1==R(a.startContainer,a.startOffset,this.startContainer,this.startOffset)&&b.setStart(a.startContainer,a.startOffset),1==R(a.endContainer,a.endOffset,this.endContainer,this.endOffset)&&b.setEnd(a.endContainer,a.endOffset),b}throw new M("Ranges do not intersect")},containsNode:function(a,b){return b?this.intersectsNode(a,!1):this.compareNode(a)==ra},containsNodeContents:function(a){return this.comparePoint(a,0)>=0&&this.comparePoint(a,U(a))<=0},containsRange:function(a){var b=this.intersection(a);return null!==b&&a.equals(b)},containsNodeText:function(a){var b=this.cloneRange();b.selectNode(a);var c=b.getNodes([3]);if(c.length>0){b.setStart(c[0],0);var d=c.pop();return b.setEnd(d,d.length),this.containsRange(b)}return this.containsNodeContents(a)},getNodes:function(a,b){return z(this),n(this,a,b)},getDocument:function(){return d(this)},collapseBefore:function(a){this.setEndBefore(a),this.collapse(!1)},collapseAfter:function(a){this.setStartAfter(a),this.collapse(!0)},getBookmark:function(b){var c=d(this),e=a.createRange(c);b=b||J.getBody(c),e.selectNodeContents(b);var f=this.intersection(e),g=0,h=0;return f&&(e.setEnd(f.startContainer,f.startOffset),g=e.toString().length,h=g+f.toString().length),{start:g,end:h,containerNode:b}},moveToBookmark:function(a){var b=a.containerNode,c=0;this.setStart(b,0),this.collapse(!0);for(var d,e,f,g,h=[b],i=!1,j=!1;!j&&(d=h.pop());)if(3==d.nodeType)e=c+d.length,!i&&a.start>=c&&a.start<=e&&(this.setStart(d,a.start-c),i=!0),i&&a.end>=c&&a.end<=e&&(this.setEnd(d,a.end-c),j=!0),c=e;else for(g=d.childNodes,f=g.length;f--;)h.push(g[f])},getName:function(){return"DomRange"},equals:function(a){return I.rangesEqual(this,a)},isValid:function(){return y(this)},inspect:function(){return o(this)},detach:function(){}}),F(I,H),K.extend(I,{rangeProperties:ja,RangeIterator:p,copyComparisonConstants:D,createPrototypeRange:F,inspect:o,toHtml:B,getRangeDocument:d,rangesEqual:function(a,b){return a.startContainer===b.startContainer&&a.startOffset===b.startOffset&&a.endContainer===b.endContainer&&a.endOffset===b.endOffset}}),a.DomRange=I}),H.createCoreModule("WrappedRange",["DomRange"],function(a,b){var c,d,e=a.dom,f=a.util,g=e.DomPosition,h=a.DomRange,i=e.getBody,j=e.getContentDocument,k=e.isCharacterDataNode;if(a.features.implementsDomRange&&function(){function d(a){for(var b,c=m.length;c--;)b=m[c],a[b]=a.nativeRange[b];a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset}function g(a,b,c,d,e){var f=a.startContainer!==b||a.startOffset!=c,g=a.endContainer!==d||a.endOffset!=e,h=!a.equals(a.nativeRange);(f||g||h)&&(a.setEnd(d,e),a.setStart(b,c))}var k,l,m=h.rangeProperties;c=function(a){if(!a)throw b.createError("WrappedRange: Range must be specified");this.nativeRange=a,d(this)},h.createPrototypeRange(c,g),k=c.prototype,k.selectNode=function(a){this.nativeRange.selectNode(a),d(this)},k.cloneContents=function(){return this.nativeRange.cloneContents()},k.surroundContents=function(a){this.nativeRange.surroundContents(a),d(this)},k.collapse=function(a){this.nativeRange.collapse(a),d(this)},k.cloneRange=function(){return new c(this.nativeRange.cloneRange())},k.refresh=function(){d(this)},k.toString=function(){return this.nativeRange.toString()};var n=document.createTextNode("test");i(document).appendChild(n);var o=document.createRange();o.setStart(n,0),o.setEnd(n,0);try{o.setStart(n,1),k.setStart=function(a,b){this.nativeRange.setStart(a,b),d(this)},k.setEnd=function(a,b){this.nativeRange.setEnd(a,b),d(this)},l=function(a){return function(b){this.nativeRange[a](b),d(this)}}}catch(p){k.setStart=function(a,b){try{this.nativeRange.setStart(a,b)}catch(c){this.nativeRange.setEnd(a,b),this.nativeRange.setStart(a,b)}d(this)},k.setEnd=function(a,b){try{this.nativeRange.setEnd(a,b)}catch(c){this.nativeRange.setStart(a,b),this.nativeRange.setEnd(a,b)}d(this)},l=function(a,b){return function(c){try{this.nativeRange[a](c)}catch(e){this.nativeRange[b](c),this.nativeRange[a](c)}d(this)}}}k.setStartBefore=l("setStartBefore","setEndBefore"),k.setStartAfter=l("setStartAfter","setEndAfter"),k.setEndBefore=l("setEndBefore","setStartBefore"),k.setEndAfter=l("setEndAfter","setStartAfter"),k.selectNodeContents=function(a){this.setStartAndEnd(a,0,e.getNodeLength(a))},o.selectNodeContents(n),o.setEnd(n,3);var q=document.createRange();q.selectNodeContents(n),q.setEnd(n,4),q.setStart(n,2),-1==o.compareBoundaryPoints(o.START_TO_END,q)&&1==o.compareBoundaryPoints(o.END_TO_START,q)?k.compareBoundaryPoints=function(a,b){return b=b.nativeRange||b,a==b.START_TO_END?a=b.END_TO_START:a==b.END_TO_START&&(a=b.START_TO_END),this.nativeRange.compareBoundaryPoints(a,b)}:k.compareBoundaryPoints=function(a,b){return this.nativeRange.compareBoundaryPoints(a,b.nativeRange||b)};var r=document.createElement("div");r.innerHTML="123";var s=r.firstChild,t=i(document);t.appendChild(r),o.setStart(s,1),o.setEnd(s,2),o.deleteContents(),"13"==s.data&&(k.deleteContents=function(){this.nativeRange.deleteContents(),d(this)},k.extractContents=function(){var a=this.nativeRange.extractContents();return d(this),a}),t.removeChild(r),t=null,f.isHostMethod(o,"createContextualFragment")&&(k.createContextualFragment=function(a){return this.nativeRange.createContextualFragment(a)}),i(document).removeChild(n),k.getName=function(){return"WrappedRange"},a.WrappedRange=c,a.createNativeRange=function(a){return a=j(a,b,"createNativeRange"),a.createRange()}}(),a.features.implementsTextRange){var l=function(a){var b=a.parentElement(),c=a.duplicate();c.collapse(!0);var d=c.parentElement();c=a.duplicate(),c.collapse(!1);var f=c.parentElement(),g=d==f?d:e.getCommonAncestor(d,f);return g==b?g:e.getCommonAncestor(b,g)},m=function(a){return 0==a.compareEndPoints("StartToEnd",a)},n=function(a,b,c,d,f){var h=a.duplicate();h.collapse(c);var i=h.parentElement();if(e.isOrIsAncestorOf(b,i)||(i=b),!i.canHaveHTML){var j=new g(i.parentNode,e.getNodeIndex(i));return{boundaryPosition:j,nodeInfo:{nodeIndex:j.offset,containerElement:j.node}}}var l=e.getDocument(i).createElement("span");l.parentNode&&e.removeNode(l);for(var m,n,o,p,q,r=c?"StartToStart":"StartToEnd",s=f&&f.containerElement==i?f.nodeIndex:0,t=i.childNodes.length,u=t,v=u;v==t?i.appendChild(l):i.insertBefore(l,i.childNodes[v]),h.moveToElementText(l),0!=(m=h.compareEndPoints(r,a))&&s!=u;){if(-1==m){if(u==s+1)break;s=v}else u=u==s+1?s:v;v=Math.floor((s+u)/2),i.removeChild(l)}if(q=l.nextSibling,-1==m&&q&&k(q)){h.setEndPoint(c?"EndToStart":"EndToEnd",a);var w;if(/[\r\n]/.test(q.data)){var x=h.duplicate(),y=x.text.replace(/\r\n/g,"\r").length;for(w=x.moveStart("character",y);-1==(m=x.compareEndPoints("StartToEnd",x));)w++,x.moveStart("character",1)}else w=h.text.length;p=new g(q,w)}else n=(d||!c)&&l.previousSibling,o=(d||c)&&l.nextSibling,p=o&&k(o)?new g(o,0):n&&k(n)?new g(n,n.data.length):new g(i,e.getNodeIndex(l));return e.removeNode(l),{boundaryPosition:p,nodeInfo:{nodeIndex:v,containerElement:i}}},o=function(a,b){var c,d,f,g,h=a.offset,j=e.getDocument(a.node),l=i(j).createTextRange(),m=k(a.node);return m?(c=a.node,d=c.parentNode):(g=a.node.childNodes,c=h<g.length?g[h]:null,d=a.node),f=j.createElement("span"),f.innerHTML="&#feff;",c?d.insertBefore(f,c):d.appendChild(f),l.moveToElementText(f),l.collapse(!b),d.removeChild(f),m&&l[b?"moveStart":"moveEnd"]("character",h),l};d=function(a){this.textRange=a,this.refresh()},d.prototype=new h(document),d.prototype.refresh=function(){var a,b,c,d=l(this.textRange);m(this.textRange)?b=a=n(this.textRange,d,!0,!0).boundaryPosition:(c=n(this.textRange,d,!0,!1),a=c.boundaryPosition,b=n(this.textRange,d,!1,!1,c.nodeInfo).boundaryPosition),this.setStart(a.node,a.offset),this.setEnd(b.node,b.offset)},d.prototype.getName=function(){return"WrappedTextRange"},h.copyComparisonConstants(d);var p=function(a){if(a.collapsed)return o(new g(a.startContainer,a.startOffset),!0);var b=o(new g(a.startContainer,a.startOffset),!0),c=o(new g(a.endContainer,a.endOffset),!1),d=i(h.getRangeDocument(a)).createTextRange();return d.setEndPoint("StartToStart",b),d.setEndPoint("EndToEnd",c),d};if(d.rangeToTextRange=p,d.prototype.toTextRange=function(){return p(this)},a.WrappedTextRange=d,!a.features.implementsDomRange||a.config.preferTextRange){var q=function(a){return a("return this;")()}(Function);void 0===q.Range&&(q.Range=d),a.createNativeRange=function(a){return a=j(a,b,"createNativeRange"),i(a).createTextRange()},a.WrappedRange=d}}a.createRange=function(c){return c=j(c,b,"createRange"),new a.WrappedRange(a.createNativeRange(c))},a.createRangyRange=function(a){return a=j(a,b,"createRangyRange"),new h(a)},f.createAliasForDeprecatedMethod(a,"createIframeRange","createRange"),f.createAliasForDeprecatedMethod(a,"createIframeRangyRange","createRangyRange"),a.addShimListener(function(b){var c=b.document;void 0===c.createRange&&(c.createRange=function(){return a.createRange(c)}),c=b=null})}),H.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(a,b){function c(a){return"string"==typeof a?/^backward(s)?$/i.test(a):!!a}function d(a,c){if(a){if(C.isWindow(a))return a;if(a instanceof r)return a.win;var d=C.getContentDocument(a,b,c);return C.getWindow(d)}return window}function e(a){return d(a,"getWinSelection").getSelection()}function f(a){return d(a,"getDocSelection").document.selection}function g(a){var b=!1;return a.anchorNode&&(b=1==C.comparePoints(a.anchorNode,a.anchorOffset,a.focusNode,a.focusOffset)),b}function h(a,b,c){var d=c?"end":"start",e=c?"start":"end";a.anchorNode=b[d+"Container"],a.anchorOffset=b[d+"Offset"],a.focusNode=b[e+"Container"],a.focusOffset=b[e+"Offset"]}function i(a){var b=a.nativeSelection;a.anchorNode=b.anchorNode,a.anchorOffset=b.anchorOffset,a.focusNode=b.focusNode,a.focusOffset=b.focusOffset}function j(a){a.anchorNode=a.focusNode=null,a.anchorOffset=a.focusOffset=0,a.rangeCount=0,a.isCollapsed=!0,a._ranges.length=0}function k(b){var c;return b instanceof F?(c=a.createNativeRange(b.getDocument()),c.setEnd(b.endContainer,b.endOffset),c.setStart(b.startContainer,b.startOffset)):b instanceof G?c=b.nativeRange:J.implementsDomRange&&b instanceof C.getWindow(b.startContainer).Range&&(c=b),c}function l(a){if(!a.length||1!=a[0].nodeType)return!1;for(var b=1,c=a.length;c>b;++b)if(!C.isAncestorOf(a[0],a[b]))return!1;return!0}function m(a){var c=a.getNodes();if(!l(c))throw b.createError("getSingleElementFromRange: range "+a.inspect()+" did not consist of a single element");return c[0]}function n(a){return!!a&&void 0!==a.text}function o(a,b){var c=new G(b);a._ranges=[c],h(a,c,!1),a.rangeCount=1,a.isCollapsed=c.collapsed}function p(b){if(b._ranges.length=0,"None"==b.docSelection.type)j(b);else{var c=b.docSelection.createRange();if(n(c))o(b,c);else{b.rangeCount=c.length;for(var d,e=L(c.item(0)),f=0;f<b.rangeCount;++f)d=a.createRange(e),d.selectNode(c.item(f)),b._ranges.push(d);b.isCollapsed=1==b.rangeCount&&b._ranges[0].collapsed,h(b,b._ranges[b.rangeCount-1],!1)}}}function q(a,c){for(var d=a.docSelection.createRange(),e=m(c),f=L(d.item(0)),g=M(f).createControlRange(),h=0,i=d.length;i>h;++h)g.add(d.item(h));try{g.add(e)}catch(j){throw b.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}g.select(),p(a)}function r(a,b,c){this.nativeSelection=a,this.docSelection=b,this._ranges=[],this.win=c,this.refresh()}function s(a){a.win=a.anchorNode=a.focusNode=a._ranges=null,a.rangeCount=a.anchorOffset=a.focusOffset=0,a.detached=!0}function t(a,b){for(var c,d,e=ba.length;e--;)if(c=ba[e],d=c.selection,"deleteAll"==b)s(d);else if(c.win==a)return"delete"==b?(ba.splice(e,1),!0):d;return"deleteAll"==b&&(ba.length=0),null}function u(a,c){for(var d,e=L(c[0].startContainer),f=M(e).createControlRange(),g=0,h=c.length;h>g;++g){d=m(c[g]);try{f.add(d)}catch(i){throw b.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}f.select(),p(a)}function v(a,b){if(a.win.document!=L(b))throw new H("WRONG_DOCUMENT_ERR")}function w(b){return function(c,d){var e;this.rangeCount?(e=this.getRangeAt(0),e["set"+(b?"Start":"End")](c,d)):(e=a.createRange(this.win.document),e.setStartAndEnd(c,d)),this.setSingleRange(e,this.isBackward())}}function x(a){var b=[],c=new I(a.anchorNode,a.anchorOffset),d=new I(a.focusNode,a.focusOffset),e="function"==typeof a.getName?a.getName():"Selection";if(void 0!==a.rangeCount)for(var f=0,g=a.rangeCount;g>f;++f)b[f]=F.inspect(a.getRangeAt(f));return"["+e+"(Ranges: "+b.join(", ")+")(anchor: "+c.inspect()+", focus: "+d.inspect()+"]"}a.config.checkSelectionRanges=!0;var y,z,A="boolean",B="number",C=a.dom,D=a.util,E=D.isHostMethod,F=a.DomRange,G=a.WrappedRange,H=a.DOMException,I=C.DomPosition,J=a.features,K="Control",L=C.getDocument,M=C.getBody,N=F.rangesEqual,O=E(window,"getSelection"),P=D.isHostObject(document,"selection");J.implementsWinGetSelection=O,J.implementsDocSelection=P;var Q=P&&(!O||a.config.preferTextRange);if(Q)y=f,a.isSelectionValid=function(a){var b=d(a,"isSelectionValid").document,c=b.selection;return"None"!=c.type||L(c.createRange().parentElement())==b};else{if(!O)return b.fail("Neither document.selection or window.getSelection() detected."),!1;y=e,a.isSelectionValid=function(){return!0}}a.getNativeSelection=y;var R=y();if(!R)return b.fail("Native selection was null (possibly issue 138?)"),!1;var S=a.createNativeRange(document),T=M(document),U=D.areHostProperties(R,["anchorNode","focusNode","anchorOffset","focusOffset"]);J.selectionHasAnchorAndFocus=U;var V=E(R,"extend");J.selectionHasExtend=V;var W=typeof R.rangeCount==B;J.selectionHasRangeCount=W;var X=!1,Y=!0,Z=V?function(b,c){var d=F.getRangeDocument(c),e=a.createRange(d);e.collapseToPoint(c.endContainer,c.endOffset),b.addRange(k(e)),b.extend(c.startContainer,c.startOffset)}:null;D.areHostMethods(R,["addRange","getRangeAt","removeAllRanges"])&&typeof R.rangeCount==B&&J.implementsDomRange&&function(){var b=window.getSelection();if(b){for(var c=b.rangeCount,d=c>1,e=[],f=g(b),h=0;c>h;++h)e[h]=b.getRangeAt(h);var i=C.createTestElement(document,"",!1),j=i.appendChild(document.createTextNode("   ")),k=document.createRange();if(k.setStart(j,1),k.collapse(!0),b.removeAllRanges(),b.addRange(k),Y=1==b.rangeCount,b.removeAllRanges(),!d){var l=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(l&&parseInt(l[1])>=36)X=!1;else{var m=k.cloneRange();k.setStart(j,0),m.setEnd(j,3),m.setStart(j,2),b.addRange(k),b.addRange(m),X=2==b.rangeCount}}for(C.removeNode(i),b.removeAllRanges(),h=0;c>h;++h)0==h&&f?Z?Z(b,e[h]):(a.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),b.addRange(e[h])):b.addRange(e[h])}}(),J.selectionSupportsMultipleRanges=X,J.collapsedNonEditableSelectionsSupported=Y;var $,_=!1;T&&E(T,"createControlRange")&&($=T.createControlRange(),D.areHostProperties($,["item","add"])&&(_=!0)),J.implementsControlRange=_,z=U?function(a){return a.anchorNode===a.focusNode&&a.anchorOffset===a.focusOffset}:function(a){return!!a.rangeCount&&a.getRangeAt(a.rangeCount-1).collapsed};var aa;E(R,"getRangeAt")?aa=function(a,b){try{return a.getRangeAt(b)}catch(c){return null}}:U&&(aa=function(b){var c=L(b.anchorNode),d=a.createRange(c);return d.setStartAndEnd(b.anchorNode,b.anchorOffset,b.focusNode,b.focusOffset),d.collapsed!==this.isCollapsed&&d.setStartAndEnd(b.focusNode,b.focusOffset,b.anchorNode,b.anchorOffset),d}),r.prototype=a.selectionPrototype;var ba=[],ca=function(a){if(a&&a instanceof r)return a.refresh(),a;a=d(a,"getNativeSelection");var b=t(a),c=y(a),e=P?f(a):null;return b?(b.nativeSelection=c,b.docSelection=e,b.refresh()):(b=new r(c,e,a),ba.push({win:a,selection:b})),b};a.getSelection=ca,D.createAliasForDeprecatedMethod(a,"getIframeSelection","getSelection");var da=r.prototype;if(!Q&&U&&D.areHostMethods(R,["removeAllRanges","addRange"])){da.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),j(this)};var ea=function(a,b){Z(a.nativeSelection,b),a.refresh()};da.addRange=W?function(b,d){if(_&&P&&this.docSelection.type==K)q(this,b);else if(c(d)&&V)ea(this,b);else{var e;X?e=this.rangeCount:(this.removeAllRanges(),e=0);var f=k(b).cloneRange();try{this.nativeSelection.addRange(f)}catch(g){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==e+1){if(a.config.checkSelectionRanges){var i=aa(this.nativeSelection,this.rangeCount-1);i&&!N(i,b)&&(b=new G(i))}this._ranges[this.rangeCount-1]=b,h(this,b,ha(this.nativeSelection)),this.isCollapsed=z(this)}else this.refresh()}}:function(a,b){c(b)&&V?ea(this,a):(this.nativeSelection.addRange(k(a)),this.refresh())},da.setRanges=function(a){if(_&&P&&a.length>1)u(this,a);else{this.removeAllRanges();for(var b=0,c=a.length;c>b;++b)this.addRange(a[b])}}}else{if(!(E(R,"empty")&&E(S,"select")&&_&&Q))return b.fail("No means of selecting a Range or TextRange was found"),!1;da.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var a;if(this.anchorNode)a=L(this.anchorNode);else if(this.docSelection.type==K){var b=this.docSelection.createRange();b.length&&(a=L(b.item(0)))}if(a){M(a).createTextRange().select(),this.docSelection.empty()}}}catch(d){}j(this)},da.addRange=function(b){this.docSelection.type==K?q(this,b):(a.WrappedTextRange.rangeToTextRange(b).select(),this._ranges[0]=b,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,h(this,b,!1))},da.setRanges=function(a){this.removeAllRanges();var b=a.length;b>1?u(this,a):b&&this.addRange(a[0])}}da.getRangeAt=function(a){if(0>a||a>=this.rangeCount)throw new H("INDEX_SIZE_ERR");return this._ranges[a].cloneRange()};var fa;if(Q)fa=function(b){var c;a.isSelectionValid(b.win)?c=b.docSelection.createRange():(c=M(b.win.document).createTextRange(),c.collapse(!0)),b.docSelection.type==K?p(b):n(c)?o(b,c):j(b)};else if(E(R,"getRangeAt")&&typeof R.rangeCount==B)fa=function(b){if(_&&P&&b.docSelection.type==K)p(b);else if(b._ranges.length=b.rangeCount=b.nativeSelection.rangeCount,b.rangeCount){for(var c=0,d=b.rangeCount;d>c;++c)b._ranges[c]=new a.WrappedRange(b.nativeSelection.getRangeAt(c));h(b,b._ranges[b.rangeCount-1],ha(b.nativeSelection)),b.isCollapsed=z(b)}else j(b)};else{if(!U||typeof R.isCollapsed!=A||typeof S.collapsed!=A||!J.implementsDomRange)return b.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;fa=function(a){var b,c=a.nativeSelection;c.anchorNode?(b=aa(c,0),a._ranges=[b],a.rangeCount=1,i(a),a.isCollapsed=z(a)):j(a)}}da.refresh=function(a){var b=a?this._ranges.slice(0):null,c=this.anchorNode,d=this.anchorOffset;if(fa(this),a){var e=b.length;if(e!=this._ranges.length)return!0;if(this.anchorNode!=c||this.anchorOffset!=d)return!0;for(;e--;)if(!N(b[e],this._ranges[e]))return!0;return!1}};var ga=function(a,b){var c=a.getAllRanges();a.removeAllRanges();for(var d=0,e=c.length;e>d;++d)N(b,c[d])||a.addRange(c[d]);a.rangeCount||j(a)};da.removeRange=_&&P?function(a){if(this.docSelection.type==K){for(var b,c=this.docSelection.createRange(),d=m(a),e=L(c.item(0)),f=M(e).createControlRange(),g=!1,h=0,i=c.length;i>h;++h)b=c.item(h),b!==d||g?f.add(c.item(h)):g=!0;f.select(),p(this)}else ga(this,a)}:function(a){ga(this,a)};var ha;!Q&&U&&J.implementsDomRange?(ha=g,da.isBackward=function(){return ha(this)}):ha=da.isBackward=function(){return!1},da.isBackwards=da.isBackward,da.toString=function(){for(var a=[],b=0,c=this.rangeCount;c>b;++b)a[b]=""+this._ranges[b];return a.join("")},da.collapse=function(b,c){v(this,b);var d=a.createRange(b);d.collapseToPoint(b,c),this.setSingleRange(d),this.isCollapsed=!0},da.collapseToStart=function(){if(!this.rangeCount)throw new H("INVALID_STATE_ERR");var a=this._ranges[0];this.collapse(a.startContainer,a.startOffset)},da.collapseToEnd=function(){if(!this.rangeCount)throw new H("INVALID_STATE_ERR");var a=this._ranges[this.rangeCount-1];this.collapse(a.endContainer,a.endOffset)},da.selectAllChildren=function(b){v(this,b);var c=a.createRange(b);c.selectNodeContents(b),this.setSingleRange(c)},da.deleteFromDocument=function(){if(_&&P&&this.docSelection.type==K){for(var a,b=this.docSelection.createRange();b.length;)a=b.item(0),b.remove(a),C.removeNode(a);this.refresh()}else if(this.rangeCount){var c=this.getAllRanges();if(c.length){this.removeAllRanges();for(var d=0,e=c.length;e>d;++d)c[d].deleteContents();this.addRange(c[e-1])}}},da.eachRange=function(a,b){for(var c=0,d=this._ranges.length;d>c;++c)if(a(this.getRangeAt(c)))return b},da.getAllRanges=function(){var a=[];return this.eachRange(function(b){a.push(b)}),a},da.setSingleRange=function(a,b){this.removeAllRanges(),this.addRange(a,b)},da.callMethodOnEachRange=function(a,b){var c=[];return this.eachRange(function(d){c.push(d[a].apply(d,b||[]))}),c},da.setStart=w(!0),da.setEnd=w(!1),a.rangePrototype.select=function(a){ca(this.getDocument()).setSingleRange(this,a)},da.changeEachRange=function(a){var b=[],c=this.isBackward();this.eachRange(function(c){a(c),b.push(c)}),this.removeAllRanges(),c&&1==b.length?this.addRange(b[0],"backward"):this.setRanges(b)},da.containsNode=function(a,b){return this.eachRange(function(c){return c.containsNode(a,b)},!0)||!1},da.getBookmark=function(a){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[a])}},da.moveToBookmark=function(b){for(var c,d,e=[],f=0;c=b.rangeBookmarks[f++];)d=a.createRange(this.win),d.moveToBookmark(c),e.push(d);b.backward?this.setSingleRange(e[0],"backward"):this.setRanges(e)},da.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},da.restoreRanges=function(a){this.removeAllRanges();for(var b,c=0;b=a.ranges[c];++c)this.addRange(b,a.backward&&0==c)},da.toHtml=function(){var a=[];return this.eachRange(function(b){a.push(F.toHtml(b))}),a.join("")},J.implementsTextRange&&(da.getNativeTextRange=function(){var c;if(c=this.docSelection){var d=c.createRange();if(n(d))return d;throw b.createError("getNativeTextRange: selection is a control selection")}if(this.rangeCount>0)return a.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw b.createError("getNativeTextRange: selection contains no range")}),da.getName=function(){return"WrappedSelection"},da.inspect=function(){return x(this)},da.detach=function(){t(this.win,"delete"),s(this)},r.detachAll=function(){t(null,"deleteAll")},r.inspect=x,r.isDirectionBackward=c,a.Selection=r,a.selectionPrototype=da,a.addShimListener(function(a){void 0===a.getSelection&&(a.getSelection=function(){return ca(a)}),a=null})});var M=!1,N=function(a){M||(M=!0,!H.initialized&&H.config.autoInitialize&&l())};return F&&("complete"==document.readyState?N():(a(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",N,!1),J(window,"load",N))),H},this),function(b,c){"function"==typeof define&&define.amd?define(["./rangy-core"],b):"undefined"!=typeof module&&"object"==typeof a?module.exports=b(require("rangy")):b(c.rangy)}(function(a){return a.createModule("SaveRestore",["WrappedRange"],function(a,b){function c(a,b){return(b||document).getElementById(a)}function d(a,b){var c,d="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),e=o.getDocument(a.startContainer),f=a.cloneRange();return f.collapse(b),c=e.createElement("span"),c.id=d,c.style.lineHeight="0",c.style.display="none",c.className="rangySelectionBoundary",c.appendChild(e.createTextNode(r)),f.insertNode(c),c}function e(a,d,e,f){var g=c(e,a);g?(d[f?"setStartBefore":"setEndBefore"](g),p(g)):b.warn("Marker element has been removed. Cannot restore selection.")}function f(a,b){return b.compareBoundaryPoints(a.START_TO_START,a)}function g(b,c){var e,f,g=a.DomRange.getRangeDocument(b),h=b.toString(),i=q(c);return b.collapsed?(f=d(b,!1),{document:g,markerId:f.id,collapsed:!0}):(f=d(b,!1),e=d(b,!0),{document:g,startMarkerId:e.id,endMarkerId:f.id,collapsed:!1,backward:i,toString:function(){return"original text: '"+h+"', new text: '"+b.toString()+"'"}})}function h(d,f){var g=d.document;void 0===f&&(f=!0);var h=a.createRange(g);if(d.collapsed){var i=c(d.markerId,g);if(i){i.style.display="inline";var j=i.previousSibling;j&&3==j.nodeType?(p(i),h.collapseToPoint(j,j.length)):(h.collapseBefore(i),p(i))}else b.warn("Marker element has been removed. Cannot restore selection.")}else e(g,h,d.startMarkerId,!0),e(g,h,d.endMarkerId,!1);return f&&h.normalizeBoundaries(),h}function i(b,d){var e,h,i=[],j=q(d);b=b.slice(0),b.sort(f);for(var k=0,l=b.length;l>k;++k)i[k]=g(b[k],j);for(k=l-1;k>=0;--k)e=b[k],h=a.DomRange.getRangeDocument(e),e.collapsed?e.collapseAfter(c(i[k].markerId,h)):(e.setEndBefore(c(i[k].endMarkerId,h)),e.setStartAfter(c(i[k].startMarkerId,h)));return i}function j(c){if(!a.isSelectionValid(c))return b.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus."),null;var d=a.getSelection(c),e=d.getAllRanges(),f=1==e.length&&d.isBackward(),g=i(e,f);return f?d.setSingleRange(e[0],f):d.setRanges(e),{win:c,rangeInfos:g,restored:!1}}function k(a){for(var b=[],c=a.length,d=c-1;d>=0;d--)b[d]=h(a[d],!0);return b}function l(b,c){if(!b.restored){var d=b.rangeInfos,e=a.getSelection(b.win),f=k(d);1==d.length&&c&&a.features.selectionHasExtend&&d[0].backward?(e.removeAllRanges(),e.addRange(f[0],!0)):e.setRanges(f),b.restored=!0}}function m(a,b){var d=c(b,a);d&&p(d)}function n(a){for(var b,c=a.rangeInfos,d=0,e=c.length;e>d;++d)b=c[d],b.collapsed?m(a.doc,b.markerId):(m(a.doc,b.startMarkerId),m(a.doc,b.endMarkerId))}var o=a.dom,p=o.removeNode,q=a.Selection.isDirectionBackward,r="\ufeff";a.util.extend(a,{saveRange:g,restoreRange:h,saveRanges:i,restoreRanges:k,saveSelection:j,restoreSelection:l,removeMarkerElement:m,removeMarkers:n})}),a},this)}({},function(){return this}()),function(window,angular,undefined){"use strict";function $SanitizeProvider(){this.$get=["$$sanitizeUri",function($$sanitizeUri){return function(html){void 0!==arguments[1]&&(arguments[1].version="taSanitize");var buf=[];return htmlParser(html,htmlSanitizeWriter(buf,function(uri,isImage){return!/^unsafe/.test($$sanitizeUri(uri,isImage))})),buf.join("")}}]}function sanitizeText(chars){var buf=[];return htmlSanitizeWriter(buf,angular.noop).chars(chars),buf.join("")}function makeMap(str){var i,obj={},items=str.split(",");for(i=0;i<items.length;i++)obj[items[i]]=!0;return obj}function htmlParser(html,handler){function parseStartTag(tag,tagName,rest,unary){if(tagName=angular.lowercase(tagName),blockElements[tagName])for(;stack.last()&&inlineElements[stack.last()];)parseEndTag("",stack.last());optionalEndTagElements[tagName]&&stack.last()==tagName&&parseEndTag("",tagName),(unary=voidElements[tagName]||!!unary)||stack.push(tagName);var attrs={};rest.replace(ATTR_REGEXP,function(match,name,doubleQuotedValue,singleQuotedValue,unquotedValue){var value=doubleQuotedValue||singleQuotedValue||unquotedValue||"";attrs[name]=decodeEntities(value)}),handler.start&&handler.start(tagName,attrs,unary)}function parseEndTag(tag,tagName){var i,pos=0;if(tagName=angular.lowercase(tagName))for(pos=stack.length-1;pos>=0&&stack[pos]!=tagName;pos--);if(pos>=0){for(i=stack.length-1;i>=pos;i--)handler.end&&handler.end(stack[i]);stack.length=pos}}"string"!=typeof html&&(html=null===html||void 0===html?"":""+html);var index,chars,match,text,stack=[],last=html;for(stack.last=function(){return stack[stack.length-1]};html;){if(text="",chars=!0,stack.last()&&specialElements[stack.last()])html=html.replace(new RegExp("([^]*)<\\s*\\/\\s*"+stack.last()+"[^>]*>","i"),function(all,text){return text=text.replace(COMMENT_REGEXP,"$1").replace(CDATA_REGEXP,"$1"),handler.chars&&handler.chars(decodeEntities(text)),""}),parseEndTag("",stack.last());else{if(WHITE_SPACE_REGEXP.test(html)){if(match=html.match(WHITE_SPACE_REGEXP)){match[0];handler.whitespace&&handler.whitespace(match[0]),html=html.replace(match[0],""),chars=!1}}else SINGLE_COMMENT_REGEXP.test(html)?(match=html.match(SINGLE_COMMENT_REGEXP))&&(handler.comment&&handler.comment(match[1]),html=html.replace(match[0],""),chars=!1):DOCTYPE_REGEXP.test(html)?(match=html.match(DOCTYPE_REGEXP))&&(html=html.replace(match[0],""),chars=!1):BEGING_END_TAGE_REGEXP.test(html)?(match=html.match(END_TAG_REGEXP))&&(html=html.substring(match[0].length),match[0].replace(END_TAG_REGEXP,parseEndTag),chars=!1):BEGIN_TAG_REGEXP.test(html)&&(match=html.match(START_TAG_REGEXP),match?(match[4]&&(html=html.substring(match[0].length),match[0].replace(START_TAG_REGEXP,parseStartTag)),chars=!1):(text+="<",html=html.substring(1)));chars&&(index=html.indexOf("<"),text+=index<0?html:html.substring(0,index),html=index<0?"":html.substring(index),handler.chars&&handler.chars(decodeEntities(text)))}if(html==last)throw $sanitizeMinErr("badparse","The sanitizer was unable to parse the following block of html: {0}",html);last=html}parseEndTag()}function decodeEntities(value){if(!value)return"";var parts=spaceRe.exec(value),spaceBefore=parts[1],spaceAfter=parts[3],content=parts[2];return content&&(hiddenPre.innerHTML=content.replace(/</g,"&lt;"),content="textContent"in hiddenPre?hiddenPre.textContent:hiddenPre.innerText),spaceBefore+content+spaceAfter}function encodeEntities(value){return value.replace(/&/g,"&amp;").replace(SURROGATE_PAIR_REGEXP,function(value){return"&#"+(1024*(value.charCodeAt(0)-55296)+(value.charCodeAt(1)-56320)+65536)+";"}).replace(NON_ALPHANUMERIC_REGEXP,function(value){var c=value.charCodeAt(0);return c<=159||173==c||c>=1536&&c<=1540||1807==c||6068==c||6069==c||c>=8204&&c<=8207||c>=8232&&c<=8239||c>=8288&&c<=8303||65279==c||c>=65520&&c<=65535?"&#"+c+";":value}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function validStyles(styleAttr){var result="",styleArray=styleAttr.split(";");return angular.forEach(styleArray,function(value){var v=value.split(":");if(2==v.length){var key=trim(angular.lowercase(v[0])),value=trim(angular.lowercase(v[1]));(("color"===key||"background-color"===key)&&(value.match(/^rgb\([0-9%,\. ]*\)$/i)||value.match(/^rgba\([0-9%,\. ]*\)$/i)||value.match(/^hsl\([0-9%,\. ]*\)$/i)||value.match(/^hsla\([0-9%,\. ]*\)$/i)||value.match(/^#[0-9a-f]{3,6}$/i)||value.match(/^[a-z]*$/i))||"text-align"===key&&("left"===value||"right"===value||"center"===value||"justify"===value)||"text-decoration"===key&&("underline"===value||"line-through"===value)||"font-weight"===key&&"bold"===value||"float"===key&&("left"===value||"right"===value||"none"===value)||("width"===key||"height"===key)&&value.match(/[0-9\.]*(px|em|rem|%)/)||"direction"===key&&value.match(/^ltr|rtl|initial|inherit$/))&&(result+=key+": "+value+";")}}),result}function validCustomTag(tag,attrs,lkey,value){return!("img"!==tag||!attrs["ta-insert-video"]||"ta-insert-video"!==lkey&&"allowfullscreen"!==lkey&&"frameborder"!==lkey&&("contenteditable"!==lkey||"false"!==value))}function htmlSanitizeWriter(buf,uriValidator){var ignore=!1,out=angular.bind(buf,buf.push);return{start:function(tag,attrs,unary){tag=angular.lowercase(tag),!ignore&&specialElements[tag]&&(ignore=tag),ignore||validElements[tag]!==!0||(out("<"),out(tag),angular.forEach(attrs,function(value,key){var lkey=angular.lowercase(key),isImage="img"===tag&&"src"===lkey||"background"===lkey
;("style"===lkey&&""!==(value=validStyles(value))||validCustomTag(tag,attrs,lkey,value)||validAttrs[lkey]===!0&&(uriAttrs[lkey]!==!0||uriValidator(value,isImage)))&&(out(" "),out(key),out('="'),out(encodeEntities(value)),out('"'))}),out(unary?"/>":">"))},comment:function(com){out(com)},whitespace:function(ws){out(encodeEntities(ws))},end:function(tag){tag=angular.lowercase(tag),ignore||validElements[tag]!==!0||(out("</"),out(tag),out(">")),tag==ignore&&(ignore=!1)},chars:function(chars){ignore||out(encodeEntities(chars))}}}var $sanitizeMinErr=angular.$$minErr("$sanitize"),START_TAG_REGEXP=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,END_TAG_REGEXP=/^<\/\s*([\w:-]+)[^>]*>/,ATTR_REGEXP=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,BEGIN_TAG_REGEXP=/^</,BEGING_END_TAGE_REGEXP=/^<\//,COMMENT_REGEXP=/<!--(.*?)-->/g,SINGLE_COMMENT_REGEXP=/(^<!--.*?-->)/,DOCTYPE_REGEXP=/<!DOCTYPE([^>]*?)>/i,CDATA_REGEXP=/<!\[CDATA\[(.*?)]]>/g,SURROGATE_PAIR_REGEXP=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NON_ALPHANUMERIC_REGEXP=/([^\#-~| |!])/g,WHITE_SPACE_REGEXP=/^(\s+)/,voidElements=makeMap("area,br,col,hr,img,wbr,input"),optionalEndTagBlockElements=makeMap("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),optionalEndTagInlineElements=makeMap("rp,rt"),optionalEndTagElements=angular.extend({},optionalEndTagInlineElements,optionalEndTagBlockElements),blockElements=angular.extend({},optionalEndTagBlockElements,makeMap("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),inlineElements=angular.extend({},optionalEndTagInlineElements,makeMap("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),svgElements=makeMap("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),specialElements=makeMap("script,style"),validElements=angular.extend({},voidElements,blockElements,inlineElements,optionalEndTagElements,svgElements),uriAttrs=makeMap("background,cite,href,longdesc,src,usemap,xlink:href,ng-click"),htmlAttrs=makeMap("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,id,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),svgAttrs=makeMap("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),validAttrs=angular.extend({},uriAttrs,svgAttrs,htmlAttrs),hiddenPre=document.createElement("pre"),spaceRe=/^(\s*)([\s\S]*?)(\s*)$/,trim=function(){return String.prototype.trim?function(value){return angular.isString(value)?value.trim():value}:function(value){return angular.isString(value)?value.replace(/^\s\s*/,"").replace(/\s\s*$/,""):value}}();angular.module("ngSanitize",[]).provider("$sanitize",$SanitizeProvider),angular.module("ngSanitize").filter("linky",["$sanitize",function($sanitize){return function(text,target){function addText(text){text&&html.push(sanitizeText(text))}if(!text)return text;for(var match,url,i,raw=text,html=[];match=raw.match(/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"”’]/);)url=match[0],match[2]||match[4]||(url=(match[3]?"http://":"mailto:")+url),i=match.index,addText(raw.substr(0,i)),function(url,text){html.push("<a "),angular.isDefined(target)&&html.push('target="',target,'" '),html.push('href="',url.replace(/"/g,"&quot;"),'">'),addText(text),html.push("</a>")}(url,match[0].replace(/^mailto:/,"")),raw=raw.substring(i+match[0].length);return addText(raw),$sanitize(html.join(""))}}])}(window,window.angular),function(a,b){function c(a){try{return 0!==angular.element(a).length}catch(b){return!1}}function d(a,b){if(!a||""===a||e.hasOwnProperty(a))throw"textAngular Error: A unique name is required for a Tool Definition";if(b.display&&(""===b.display||!c(b.display))||!b.display&&!b.buttontext&&!b.iconclass)throw'textAngular Error: Tool Definition for "'+a+'" does not have a valid display/iconclass/buttontext value';e[a]=b}b.true=a;var e={};angular.module("textAngularSetup",[]).constant("taRegisterTool",d).value("taTools",e).value("taOptions",{forceTextAngularSanitize:!0,keyMappings:[],toolbar:[["h1","h2","h3","h4","h5","h6","p","pre","quote"],["bold","italics","underline","strikeThrough","ul","ol","redo","undo","clear"],["justifyLeft","justifyCenter","justifyRight","justifyFull","indent","outdent"],["html","insertImage","insertLink","insertVideo","wordcount","charcount"]],classes:{focussed:"focussed",toolbar:"btn-toolbar",toolbarGroup:"btn-group",toolbarButton:"btn btn-default",toolbarButtonActive:"active",disabled:"disabled",textEditor:"form-control",htmlEditor:"form-control"},defaultTagAttributes:{a:{target:""}},setup:{textEditorSetup:function(a){},htmlEditorSetup:function(a){}},defaultFileDropHandler:function(a,b){var c=new FileReader;return"image"===a.type.substring(0,5)&&(c.onload=function(){""!==c.result&&b("insertImage",c.result,!0)},c.readAsDataURL(a),!0)}}).value("taSelectableElements",["a","img"]).value("taCustomRenderers",[{selector:"img",customAttribute:"ta-insert-video",renderLogic:function(a){var b=angular.element("<iframe></iframe>"),c=a.prop("attributes");angular.forEach(c,function(a){b.attr(a.name,a.value)}),b.attr("src",b.attr("ta-insert-video")),a.replaceWith(b)}}]).value("taTranslations",{html:{tooltip:"Toggle html / Rich Text"},heading:{tooltip:"Heading "},p:{tooltip:"Paragraph"},pre:{tooltip:"Preformatted text"},ul:{tooltip:"Unordered List"},ol:{tooltip:"Ordered List"},quote:{tooltip:"Quote/unquote selection or paragraph"},undo:{tooltip:"Undo"},redo:{tooltip:"Redo"},bold:{tooltip:"Bold"},italic:{tooltip:"Italic"},underline:{tooltip:"Underline"},strikeThrough:{tooltip:"Strikethrough"},justifyLeft:{tooltip:"Align text left"},justifyRight:{tooltip:"Align text right"},justifyFull:{tooltip:"Justify text"},justifyCenter:{tooltip:"Center"},indent:{tooltip:"Increase indent"},outdent:{tooltip:"Decrease indent"},clear:{tooltip:"Clear formatting"},insertImage:{dialogPrompt:"Please enter an image URL to insert",tooltip:"Insert image",hotkey:"the - possibly language dependent hotkey ... for some future implementation"},insertVideo:{tooltip:"Insert video",dialogPrompt:"Please enter a youtube URL to embed"},insertLink:{tooltip:"Insert / edit link",dialogPrompt:"Please enter a URL to insert"},editLink:{reLinkButton:{tooltip:"Relink"},unLinkButton:{tooltip:"Unlink"},targetToggle:{buttontext:"Open in New Window"}},wordcount:{tooltip:"Display words Count"},charcount:{tooltip:"Display characters Count"}}).factory("taToolFunctions",["$window","taTranslations",function(a,b){return{imgOnSelectAction:function(a,b,c){var d=function(){c.updateTaBindtaTextElement(),c.hidePopover()};a.preventDefault(),c.displayElements.popover.css("width","375px");var e=c.displayElements.popoverContainer;e.empty();var f=angular.element('<div class="btn-group" style="padding-right: 6px;">'),g=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">100% </button>');g.on("click",function(a){a.preventDefault(),b.css({width:"100%",height:""}),d()});var h=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">50% </button>');h.on("click",function(a){a.preventDefault(),b.css({width:"50%",height:""}),d()});var i=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">25% </button>');i.on("click",function(a){a.preventDefault(),b.css({width:"25%",height:""}),d()});var j=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">Reset</button>');j.on("click",function(a){a.preventDefault(),b.css({width:"",height:""}),d()}),f.append(g),f.append(h),f.append(i),f.append(j),e.append(f),f=angular.element('<div class="btn-group" style="padding-right: 6px;">');var k=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-left"></i></button>');k.on("click",function(a){a.preventDefault(),b.css("float","left"),b.css("cssFloat","left"),b.css("styleFloat","left"),d()});var l=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-right"></i></button>');l.on("click",function(a){a.preventDefault(),b.css("float","right"),b.css("cssFloat","right"),b.css("styleFloat","right"),d()});var m=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-justify"></i></button>');m.on("click",function(a){a.preventDefault(),b.css("float",""),b.css("cssFloat",""),b.css("styleFloat",""),d()}),f.append(k),f.append(m),f.append(l),e.append(f),f=angular.element('<div class="btn-group">');var n=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-trash-o"></i></button>');n.on("click",function(a){a.preventDefault(),b.remove(),d()}),f.append(n),e.append(f),c.showPopover(b),c.showResizeOverlay(b)},aOnSelectAction:function(c,d,e){c.preventDefault(),e.displayElements.popover.css("width","436px");var f=e.displayElements.popoverContainer;f.empty(),f.css("line-height","28px");var g=angular.element('<a href="'+d.attr("href")+'" target="_blank">'+d.attr("href")+"</a>");g.css({display:"inline-block","max-width":"200px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","vertical-align":"middle"}),f.append(g);var h=angular.element('<div class="btn-group pull-right">'),i=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+b.editLink.reLinkButton.tooltip+'"><i class="fa fa-edit icon-edit"></i></button>');i.on("click",function(c){c.preventDefault();var f=a.prompt(b.insertLink.dialogPrompt,d.attr("href"));f&&""!==f&&"http://"!==f&&(d.attr("href",f),e.updateTaBindtaTextElement()),e.hidePopover()}),h.append(i);var j=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+b.editLink.unLinkButton.tooltip+'"><i class="fa fa-unlink icon-unlink"></i></button>');j.on("click",function(a){a.preventDefault(),d.replaceWith(d.contents()),e.updateTaBindtaTextElement(),e.hidePopover()}),h.append(j);var k=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on">'+b.editLink.targetToggle.buttontext+"</button>");"_blank"===d.attr("target")&&k.addClass("active"),k.on("click",function(a){a.preventDefault(),d.attr("target","_blank"===d.attr("target")?"":"_blank"),k.toggleClass("active"),e.updateTaBindtaTextElement()}),h.append(k),f.append(h),e.showPopover(d)},extractYoutubeVideoId:function(a){var c=a.match(/(?:youtube(?:-nocookie)?\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/i);return c&&c[1]||null}}}]).run(["taRegisterTool","$window","taTranslations","taSelection","taToolFunctions","$sanitize","taOptions",function(a,b,c,d,e,f,g){var h={};if(f("",h),g.forceTextAngularSanitize===!0&&"taSanitize"!==h.version)throw angular.$$minErr("textAngular")("textAngularSetup","The textAngular-sanitize provider has been replaced by another -- have you included angular-sanitize by mistake?");a("html",{iconclass:"fa fa-code",tooltiptext:c.html.tooltip,action:function(){this.$editor().switchView()},activeState:function(){return this.$editor().showHtml}});var i=function(a){return function(){return this.$editor().queryFormatBlockState(a)}},j=function(){return this.$editor().wrapSelection("formatBlock","<"+this.name.toUpperCase()+">")};angular.forEach(["h1","h2","h3","h4","h5","h6"],function(b){a(b.toLowerCase(),{buttontext:b.toUpperCase(),tooltiptext:c.heading.tooltip+b.charAt(1),action:j,activeState:i(b.toLowerCase())})}),a("p",{buttontext:"P",tooltiptext:c.p.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<P>")},activeState:function(){return this.$editor().queryFormatBlockState("p")}}),a("pre",{buttontext:"pre",tooltiptext:c.pre.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<PRE>")},activeState:function(){return this.$editor().queryFormatBlockState("pre")}}),a("ul",{iconclass:"fa fa-list-ul",tooltiptext:c.ul.tooltip,action:function(){return this.$editor().wrapSelection("insertUnorderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertUnorderedList")}}),a("ol",{iconclass:"fa fa-list-ol",tooltiptext:c.ol.tooltip,action:function(){return this.$editor().wrapSelection("insertOrderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertOrderedList")}}),a("quote",{iconclass:"fa fa-quote-right",tooltiptext:c.quote.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<BLOCKQUOTE>")},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")}}),a("undo",{iconclass:"fa fa-undo",tooltiptext:c.undo.tooltip,action:function(){return this.$editor().wrapSelection("undo",null)}}),a("redo",{iconclass:"fa fa-repeat",tooltiptext:c.redo.tooltip,action:function(){return this.$editor().wrapSelection("redo",null)}}),a("bold",{iconclass:"fa fa-bold",tooltiptext:c.bold.tooltip,action:function(){return this.$editor().wrapSelection("bold",null)},activeState:function(){return this.$editor().queryCommandState("bold")},commandKeyCode:98}),a("justifyLeft",{iconclass:"fa fa-align-left",tooltiptext:c.justifyLeft.tooltip,action:function(){return this.$editor().wrapSelection("justifyLeft",null)},activeState:function(a){if(a&&"#document"===a.nodeName)return!1;var b=!1;return a&&(b="left"===a.css("text-align")||"left"===a.attr("align")||"right"!==a.css("text-align")&&"center"!==a.css("text-align")&&"justify"!==a.css("text-align")&&!this.$editor().queryCommandState("justifyRight")&&!this.$editor().queryCommandState("justifyCenter")&&!this.$editor().queryCommandState("justifyFull")),b=b||this.$editor().queryCommandState("justifyLeft")}}),a("justifyRight",{iconclass:"fa fa-align-right",tooltiptext:c.justifyRight.tooltip,action:function(){return this.$editor().wrapSelection("justifyRight",null)},activeState:function(a){if(a&&"#document"===a.nodeName)return!1;var b=!1;return a&&(b="right"===a.css("text-align")),b=b||this.$editor().queryCommandState("justifyRight")}}),a("justifyFull",{iconclass:"fa fa-align-justify",tooltiptext:c.justifyFull.tooltip,action:function(){return this.$editor().wrapSelection("justifyFull",null)},activeState:function(a){var b=!1;return a&&(b="justify"===a.css("text-align")),b=b||this.$editor().queryCommandState("justifyFull")}}),a("justifyCenter",{iconclass:"fa fa-align-center",tooltiptext:c.justifyCenter.tooltip,action:function(){return this.$editor().wrapSelection("justifyCenter",null)},activeState:function(a){if(a&&"#document"===a.nodeName)return!1;var b=!1;return a&&(b="center"===a.css("text-align")),b=b||this.$editor().queryCommandState("justifyCenter")}}),a("indent",{iconclass:"fa fa-indent",tooltiptext:c.indent.tooltip,action:function(){return this.$editor().wrapSelection("indent",null)},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")},commandKeyCode:"TabKey"}),a("outdent",{iconclass:"fa fa-outdent",tooltiptext:c.outdent.tooltip,action:function(){return this.$editor().wrapSelection("outdent",null)},activeState:function(){return!1},commandKeyCode:"ShiftTabKey"}),a("italics",{iconclass:"fa fa-italic",tooltiptext:c.italic.tooltip,action:function(){return this.$editor().wrapSelection("italic",null)},activeState:function(){return this.$editor().queryCommandState("italic")},commandKeyCode:105}),a("underline",{iconclass:"fa fa-underline",tooltiptext:c.underline.tooltip,action:function(){return this.$editor().wrapSelection("underline",null)},activeState:function(){return this.$editor().queryCommandState("underline")},commandKeyCode:117}),a("strikeThrough",{iconclass:"fa fa-strikethrough",tooltiptext:c.strikeThrough.tooltip,action:function(){return this.$editor().wrapSelection("strikeThrough",null)},activeState:function(){return document.queryCommandState("strikeThrough")}}),a("clear",{iconclass:"fa fa-ban",tooltiptext:c.clear.tooltip,action:function(a,b){var c;this.$editor().wrapSelection("removeFormat",null);var e=angular.element(d.getSelectionElement()),f=function(a){a=angular.element(a);var b=a;angular.forEach(a.children(),function(a){var c=angular.element("<p></p>");c.html(angular.element(a).html()),b.after(c),b=c}),a.remove()};if(angular.forEach(e.find("ul"),f),angular.forEach(e.find("ol"),f),"li"===e[0].tagName.toLowerCase()){var g=e[0].parentNode.childNodes,h=[],i=[],j=!1;for(c=0;c<g.length;c++)g[c]===e[0]?j=!0:j?i.push(g[c]):h.push(g[c]);var k=angular.element(e[0].parentNode),l=angular.element("<p></p>");if(l.html(angular.element(e[0]).html()),0===h.length||0===i.length)0===i.length?k.after(l):k[0].parentNode.insertBefore(l[0],k[0]),0===h.length&&0===i.length?k.remove():angular.element(e[0]).remove();else{var m=angular.element("<"+k[0].tagName+"></"+k[0].tagName+">"),n=angular.element("<"+k[0].tagName+"></"+k[0].tagName+">");for(c=0;c<h.length;c++)m.append(angular.element(h[c]));for(c=0;c<i.length;c++)n.append(angular.element(i[c]));k.after(n),k.after(l),k.after(m),k.remove()}d.setSelectionToElementEnd(l[0])}var o=this.$editor(),p=function(a){a=angular.element(a),a[0]!==o.displayElements.text[0]&&a.removeAttr("class"),angular.forEach(a.children(),p)};angular.forEach(e,p),"li"!==e[0].tagName.toLowerCase()&&"ol"!==e[0].tagName.toLowerCase()&&"ul"!==e[0].tagName.toLowerCase()&&this.$editor().wrapSelection("formatBlock","default"),b()}}),a("insertImage",{iconclass:"fa fa-picture-o",tooltiptext:c.insertImage.tooltip,action:function(){var a;return a=b.prompt(c.insertImage.dialogPrompt,"http://"),a&&""!==a&&"http://"!==a?this.$editor().wrapSelection("insertImage",a,!0):void 0},onElementSelect:{element:"img",action:e.imgOnSelectAction}}),a("insertVideo",{iconclass:"fa fa-youtube-play",tooltiptext:c.insertVideo.tooltip,action:function(){var a;if((a=b.prompt(c.insertVideo.dialogPrompt,"https://"))&&""!==a&&"https://"!==a&&(videoId=e.extractYoutubeVideoId(a),videoId)){var d="https://www.youtube.com/embed/"+videoId,f='<img class="ta-insert-video" src="https://img.youtube.com/vi/'+videoId+'/hqdefault.jpg" ta-insert-video="'+d+'" contenteditable="false" allowfullscreen="true" frameborder="0" />';return this.$editor().wrapSelection("insertHTML",f,!0)}},onElementSelect:{element:"img",onlyWithAttrs:["ta-insert-video"],action:e.imgOnSelectAction}}),a("insertLink",{tooltiptext:c.insertLink.tooltip,iconclass:"fa fa-link",action:function(){var a;return a=b.prompt(c.insertLink.dialogPrompt,"http://"),a&&""!==a&&"http://"!==a?this.$editor().wrapSelection("createLink",a,!0):void 0},activeState:function(a){return!!a&&"A"===a[0].tagName},onElementSelect:{element:"a",action:e.aOnSelectAction}}),a("wordcount",{display:'<div id="toolbarWC" style="display:block; min-width:100px;">Words: <span ng-bind="wordcount"></span></div>',disabled:!0,wordcount:0,activeState:function(){var a=this.$editor().displayElements.text,b=a[0].innerHTML||"",c=0;return""!==b.replace(/\s*<[^>]*?>\s*/g,"")&&(c=b.replace(/<\/?(b|i|em|strong|span|u|strikethrough|a|img|small|sub|sup|label)( [^>*?])?>/gi,"").replace(/(<[^>]*?>\s*<[^>]*?>)/gi," ").replace(/(<[^>]*?>)/gi,"").replace(/\s+/gi," ").match(/\S+/g).length),this.wordcount=c,this.$editor().wordcount=c,!1}}),a("charcount",{display:'<div id="toolbarCC" style="display:block; min-width:120px;">Characters: <span ng-bind="charcount"></span></div>',disabled:!0,charcount:0,activeState:function(){var a=this.$editor().displayElements.text,b=a[0].innerText||a[0].textContent,c=b.replace(/(\r\n|\n|\r)/gm,"").replace(/^\s+/g," ").replace(/\s+$/g," ").length;return this.charcount=c,this.$editor().charcount=c,!1}})}]),"undefined"!=typeof module&&void 0!==a&&module.exports===a&&(module.exports="textAngular"),function(){"use strict";var b={ie:function(){for(var b=3,c=document.createElement("div"),d=c.getElementsByTagName("i");c.innerHTML="<!--[if gt IE "+ ++b+"]><i></i><![endif]-->",d[0];);return b>4?b:void 0}(),webkit:/AppleWebKit\/([\d.]+)/i.test(navigator.userAgent)},c=!1;b.webkit&&(document.addEventListener("mousedown",function(a){var b=a||window.event,d=b.target;if(c&&null!==d){for(var e=!1,f=d;null!==f&&"html"!==f.tagName.toLowerCase()&&!e;)e="true"===f.contentEditable,f=f.parentNode;e||(document.getElementById("textAngular-editableFix-010203040506070809").setSelectionRange(0,0),d.focus(),d.select&&d.select())}c=!1},!1),angular.element(document).ready(function(){angular.element(document.body).append(angular.element('<input id="textAngular-editableFix-010203040506070809" class="ta-hidden-input" aria-hidden="true" unselectable="on" tabIndex="-1">'))}));var d=/^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video)$/i,g=/^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video|li)$/i;String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var h,i,j,k,l,m;if(b.ie>8||void 0===b.ie){for(var n=document.styleSheets,o=0;o<n.length;o++)if((0===n[o].media.length||n[o].media.mediaText.match(/(all|screen)/gi))&&n[o].href&&n[o].href.match(/textangular\.(min\.|)css/gi)){h=n[o];break}h||(h=function(){var a=document.createElement("style");return b.webkit&&a.appendChild(document.createTextNode("")),document.getElementsByTagName("head")[0].appendChild(a),a.sheet}()),i=function(a,b){return k(h,a,b)},k=function(a,b,c){var d,e;return a.cssRules?d=Math.max(a.cssRules.length-1,0):a.rules&&(d=Math.max(a.rules.length-1,0)),a.insertRule?a.insertRule(b+"{"+c+"}",d):a.addRule(b,c,d),h.rules?e=h.rules[d]:h.cssRules&&(e=h.cssRules[d]),e},m=function(a,b){var c,d;for(c=0;c<b.length;c++)if(b[c].cssText===a.cssText){d=c;break}return d},j=function(a){l(h,a)},l=function(a,b){var c=a.cssRules||a.rules;if(c&&0!==c.length){var d=m(b,c);a.removeRule?a.removeRule(d):a.deleteRule(d)}}}angular.module("textAngular.factories",[]).factory("taBrowserTag",[function(){return function(a){return a?""===a?void 0===b.ie?"div":b.ie<=8?"P":"p":b.ie<=8?a.toUpperCase():a:b.ie<=8?"P":"p"}}]).factory("taApplyCustomRenderers",["taCustomRenderers","taDOM",function(a,b){return function(c){var d=angular.element("<div></div>");return d[0].innerHTML=c,angular.forEach(a,function(a){var c=[];a.selector&&""!==a.selector?c=d.find(a.selector):a.customAttribute&&""!==a.customAttribute&&(c=b.getByAttribute(d,a.customAttribute)),angular.forEach(c,function(b){b=angular.element(b),a.selector&&""!==a.selector&&a.customAttribute&&""!==a.customAttribute?void 0!==b.attr(a.customAttribute)&&a.renderLogic(b):a.renderLogic(b)})}),d[0].innerHTML}}]).factory("taFixChrome",function(){return function(a){if(!a||!angular.isString(a)||a.length<=0)return a;for(var b,c,d,e=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi,f="",g=0;b=e.exec(a);)(c=b[3]||b[4])&&c.match(/line-height: 1.[0-9]{3,12};|color: inherit; line-height: 1.1;/i)&&(c=c.replace(/( |)font-family: inherit;|( |)line-height: 1.[0-9]{3,12};|( |)color: inherit;/gi,""),d="<"+b[1].trim(),c.trim().length>0&&(d+=" style="+b[2].substring(0,1)+c+b[2].substring(0,1)),d+=b[5].trim()+">",f+=a.substring(g,b.index)+d,g=b.index+b[0].length);return f+=a.substring(g),g>0?f.replace(/<span\s?>(.*?)<\/span>(<br(\/|)>|)/gi,"$1"):a}}).factory("taSanitize",["$sanitize",function(a){function b(a,b){for(var c,d=0,e=0,f=/<[^>]*>/gi;c=f.exec(a);)if(e=c.index,"/"===c[0].substr(1,1)){if(0===d)break;d--}else d++;return b+a.substring(0,e)+angular.element(b)[0].outerHTML.substring(b.length)+a.substring(e)}function c(a){if(!a||!angular.isString(a)||a.length<=0)return a;for(var d,f,g,h,i,k,l=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi,m="",n="",o=0;f=l.exec(a);){h=f[3]||f[4];var p=new RegExp(j,"i");if(angular.isString(h)&&p.test(h)){i="";for(var q=new RegExp(j,"ig");g=q.exec(h);)for(d=0;d<e.length;d++)g[2*d+2]&&(i+="<"+e[d].tag+">");k=c(a.substring(o,f.index)),n+=m.length>0?b(k,m):k,h=h.replace(new RegExp(j,"ig"),""),n+="<"+f[1].trim(),h.length>0&&(n+=' style="'+h+'"'),n+=f[5]+">",o=f.index+f[0].length,m=i}}return n+=m.length>0?b(a.substring(o),m):a.substring(o)}function d(a){if(!a||!angular.isString(a)||a.length<=0)return a;for(var b,c=/<([^>\/]+?)align=("([^"]+)"|'([^']+)')([^>]*)>/gi,d="",e=0;b=c.exec(a);){d+=a.substring(e,b.index),e=b.index+b[0].length;var f="<"+b[1]+b[5];/style=("([^"]+)"|'([^']+)')/gi.test(f)?f=f.replace(/style=("([^"]+)"|'([^']+)')/i,'style="$2$3 text-align:'+(b[3]||b[4])+';"'):f+=' style="text-align:'+(b[3]||b[4])+';"',f+=">",d+=f}return d+a.substring(e)}for(var e=[{property:"font-weight",values:["bold"],tag:"b"},{property:"font-style",values:["italic"],tag:"i"}],f=[],g=0;g<e.length;g++){for(var h="("+e[g].property+":\\s*(",i=0;i<e[g].values.length;i++)i>0&&(h+="|"),h+=e[g].values[i];h+=");)",f.push(h)}var j="("+f.join("|")+")";return function(b,e,f){if(!f)try{b=c(b)}catch(g){}b=d(b);var h;try{h=a(b),f&&(h=b)}catch(g){h=e||""}var i,j=h.match(/(<pre[^>]*>.*?<\/pre[^>]*>)/gi),k=h.replace(/(&#(9|10);)*/gi,""),l=/<pre[^>]*>.*?<\/pre[^>]*>/gi,m=0,n=0;for(h="";null!==(i=l.exec(k))&&m<j.length;)h+=k.substring(n,i.index)+j[m],n=i.index+i[0].length,m++;return h+k.substring(n)}}]).factory("taToolExecuteAction",["$q","$log",function(a,b){return function(c){void 0!==c&&(this.$editor=function(){return c});var d,e=a.defer(),f=e.promise,g=this.$editor();try{d=this.action(e,g.startAction()),f.finally(function(){g.endAction.call(g)})}catch(h){b.error(h)}(d||void 0===d)&&e.resolve()}}]),angular.module("textAngular.DOM",["textAngular.factories"]).factory("taExecCommand",["taSelection","taBrowserTag","$document",function(a,b,c){var e=function(b,c){var d,e,f=b.find("li");for(e=f.length-1;e>=0;e--)d=angular.element("<"+c+">"+f[e].innerHTML+"</"+c+">"),b.after(d);b.remove(),a.setSelectionToElementEnd(d[0])},g=function(b){/(<br(|\/)>)$/i.test(b.innerHTML.trim())?a.setSelectionBeforeElement(angular.element(b).find("br")[0]):a.setSelectionToElementEnd(b)},h=function(a,b){var c=angular.element("<"+b+">"+a[0].innerHTML+"</"+b+">");a.after(c),a.remove(),g(c.find("li")[0])},i=function(a,c,d){for(var e="",f=0;f<a.length;f++)e+="<"+b("li")+">"+a[f].innerHTML+"</"+b("li")+">";var h=angular.element("<"+d+">"+e+"</"+d+">");c.after(h),c.remove(),g(h.find("li")[0])};return function(g,j){return g=b(g),function(k,l,m,n){var o,p,q,r,s,t,u,v=angular.element("<"+g+">");try{u=a.getSelectionElement()}catch(w){}var x=angular.element(u);if(void 0!==u){var y=u.tagName.toLowerCase();if("insertorderedlist"===k.toLowerCase()||"insertunorderedlist"===k.toLowerCase()){var z=b("insertorderedlist"===k.toLowerCase()?"ol":"ul");if(y===z)return e(x,g);if("li"===y&&x.parent()[0].tagName.toLowerCase()===z&&1===x.parent().children().length)return e(x.parent(),g);if("li"===y&&x.parent()[0].tagName.toLowerCase()!==z&&1===x.parent().children().length)return h(x.parent(),z);if(y.match(d)&&!x.hasClass("ta-bind")){if("ol"===y||"ul"===y)return h(x,z);var A=!1;return angular.forEach(x.children(),function(a){a.tagName.match(d)&&(A=!0)}),A?i(x.children(),x,z):i([angular.element("<div>"+u.innerHTML+"</div>")[0]],x,z)}if(y.match(d)){if(r=a.getOnlySelectedElements(),0===r.length)p=angular.element("<"+z+"><li>"+u.innerHTML+"</li></"+z+">"),x.html(""),x.append(p);else{if(1===r.length&&("ol"===r[0].tagName.toLowerCase()||"ul"===r[0].tagName.toLowerCase()))return r[0].tagName.toLowerCase()===z?e(angular.element(r[0]),g):h(angular.element(r[0]),z);q="";var B=[];for(o=0;o<r.length;o++)if(3!==r[o].nodeType){var C=angular.element(r[o]);if("li"===r[o].tagName.toLowerCase())continue;q+="ol"===r[o].tagName.toLowerCase()||"ul"===r[o].tagName.toLowerCase()?C[0].innerHTML:"span"!==r[o].tagName.toLowerCase()||"ol"!==r[o].childNodes[0].tagName.toLowerCase()&&"ul"!==r[o].childNodes[0].tagName.toLowerCase()?"<"+b("li")+">"+C[0].innerHTML+"</"+b("li")+">":C[0].childNodes[0].innerHTML,B.unshift(C)}p=angular.element("<"+z+">"+q+"</"+z+">"),B.pop().replaceWith(p),angular.forEach(B,function(a){a.remove()})}return void a.setSelectionToElementEnd(p[0])}}else{if("formatblock"===k.toLowerCase()){for(t=m.toLowerCase().replace(/[<>]/gi,""),"default"===t.trim()&&(t=g,m="<"+g+">"),p="li"===y?x.parent():x;!p[0].tagName||!p[0].tagName.match(d)&&!p.parent().attr("contenteditable");)p=p.parent(),y=(p[0].tagName||"").toLowerCase();if(y===t){r=p.children();var D=!1;for(o=0;o<r.length;o++)D=D||r[o].tagName.match(d);D?(p.after(r),s=p.next(),p.remove(),p=s):(v.append(p[0].childNodes),p.after(v),p.remove(),p=v)}else if(p.parent()[0].tagName.toLowerCase()!==t||p.parent().hasClass("ta-bind"))if(y.match(/^(ul|li|ol)$/i))p.wrap(m);else{for(r=a.getOnlySelectedElements(),0===r.length&&(r=[p[0]]),o=0;o<r.length;o++)if(3===r[o].nodeType||!r[o].tagName.match(d))for(;3===r[o].nodeType||!r[o].tagName||!r[o].tagName.match(d);)r[o]=r[o].parentNode;if(angular.element(r[0]).hasClass("ta-bind"))p=angular.element(m),p[0].innerHTML=r[0].innerHTML,r[0].innerHTML=p[0].outerHTML;else if("blockquote"===t){for(q="",o=0;o<r.length;o++)q+=r[o].outerHTML;for(p=angular.element(m),p[0].innerHTML=q,r[0].parentNode.insertBefore(p[0],r[0]),o=r.length-1;o>=0;o--)r[o].parentNode&&r[o].parentNode.removeChild(r[o])}else for(o=0;o<r.length;o++)p=angular.element(m),p[0].innerHTML=r[o].innerHTML,r[o].parentNode.insertBefore(p[0],r[o]),r[o].parentNode.removeChild(r[o])}else{var E=p.parent(),F=E.contents();for(o=0;o<F.length;o++)E.parent().hasClass("ta-bind")&&3===F[o].nodeType&&(v=angular.element("<"+g+">"),v[0].innerHTML=F[o].outerHTML,F[o]=v[0]),E.parent()[0].insertBefore(F[o],E[0]);E.remove()}return void a.setSelectionToElementEnd(p[0])}if("createlink"===k.toLowerCase()){var G='<a href="'+m+'" target="'+(n.a.target?n.a.target:"")+'">',H="</a>";if(a.getSelection().collapsed)a.insertHtml(G+m+H,j);else if(rangy.getSelection().getRangeAt(0).canSurroundContents()){var J=angular.element(G+H)[0];rangy.getSelection().getRangeAt(0).surroundContents(J)}return}if("inserthtml"===k.toLowerCase())return void a.insertHtml(m,j)}}try{
c[0].execCommand(k,l,m)}catch(w){}}}}]).service("taSelection",["$window","$document","taDOM",function(a,b,c){var e=b[0],f=a.rangy,h=function(a,b){return a.tagName&&a.tagName.match(/^br$/i)&&0===b&&!a.previousSibling?{element:a.parentNode,offset:0}:{element:a,offset:b}},i={getSelection:function(){var a=f.getSelection().getRangeAt(0),b=a.commonAncestorContainer,c={start:h(a.startContainer,a.startOffset),end:h(a.endContainer,a.endOffset),collapsed:a.collapsed};return b=3===b.nodeType?b.parentNode:b,b.parentNode===c.start.element||b.parentNode===c.end.element?c.container=b.parentNode:c.container=b,c},getOnlySelectedElements:function(){var a=f.getSelection().getRangeAt(0),b=a.commonAncestorContainer;return b=3===b.nodeType?b.parentNode:b,a.getNodes([1],function(a){return a.parentNode===b})},getSelectionElement:function(){return i.getSelection().container},setSelection:function(a,b,c){var d=f.createRange();d.setStart(a,b),d.setEnd(a,c),f.getSelection().setSingleRange(d)},setSelectionBeforeElement:function(a){var b=f.createRange();b.selectNode(a),b.collapse(!0),f.getSelection().setSingleRange(b)},setSelectionAfterElement:function(a){var b=f.createRange();b.selectNode(a),b.collapse(!1),f.getSelection().setSingleRange(b)},setSelectionToElementStart:function(a){var b=f.createRange();b.selectNodeContents(a),b.collapse(!0),f.getSelection().setSingleRange(b)},setSelectionToElementEnd:function(a){var b=f.createRange();b.selectNodeContents(a),b.collapse(!1),a.childNodes&&a.childNodes[a.childNodes.length-1]&&"br"===a.childNodes[a.childNodes.length-1].nodeName&&(b.startOffset=b.endOffset=b.startOffset-1),f.getSelection().setSingleRange(b)},insertHtml:function(a,b){var h,j,k,l,m,n,o,p=angular.element("<div>"+a+"</div>"),q=f.getSelection().getRangeAt(0),r=e.createDocumentFragment(),s=p[0].childNodes,t=!0;if(s.length>0){for(l=[],k=0;k<s.length;k++)"p"===s[k].nodeName.toLowerCase()&&""===s[k].innerHTML.trim()||3===s[k].nodeType&&""===s[k].nodeValue.trim()||(t=t&&!d.test(s[k].nodeName),l.push(s[k]));for(var u=0;u<l.length;u++)n=r.appendChild(l[u]);!t&&q.collapsed&&/^(|<br(|\/)>)$/i.test(q.startContainer.innerHTML)&&q.selectNode(q.startContainer)}else t=!0,n=r=e.createTextNode(a);if(t)q.deleteContents();else if(q.collapsed&&q.startContainer!==b)if(q.startContainer.innerHTML&&q.startContainer.innerHTML.match(/^<[^>]*>$/i))h=q.startContainer,1===q.startOffset?(q.setStartAfter(h),q.setEndAfter(h)):(q.setStartBefore(h),q.setEndBefore(h));else{if(3===q.startContainer.nodeType&&q.startContainer.parentNode!==b)for(h=q.startContainer.parentNode,j=h.cloneNode(),c.splitNodes(h.childNodes,h,j,q.startContainer,q.startOffset);!g.test(h.nodeName);){angular.element(h).after(j),h=h.parentNode;var v=j;j=h.cloneNode(),c.splitNodes(h.childNodes,h,j,v)}else h=q.startContainer,j=h.cloneNode(),c.splitNodes(h.childNodes,h,j,void 0,void 0,q.startOffset);if(angular.element(h).after(j),q.setStartAfter(h),q.setEndAfter(h),/^(|<br(|\/)>)$/i.test(h.innerHTML.trim())&&(q.setStartBefore(h),q.setEndBefore(h),angular.element(h).remove()),/^(|<br(|\/)>)$/i.test(j.innerHTML.trim())&&angular.element(j).remove(),"li"===h.nodeName.toLowerCase()){for(o=e.createDocumentFragment(),m=0;m<r.childNodes.length;m++)p=angular.element("<li>"),c.transferChildNodes(r.childNodes[m],p[0]),c.transferNodeAttributes(r.childNodes[m],p[0]),o.appendChild(p[0]);r=o,n&&(n=r.childNodes[r.childNodes.length-1],n=n.childNodes[n.childNodes.length-1])}}else q.deleteContents();q.insertNode(r),n&&i.setSelectionToElementEnd(n)}};return i}]).service("taDOM",function(){var a={getByAttribute:function(b,c){var d=[],e=b.children();return e.length&&angular.forEach(e,function(b){d=d.concat(a.getByAttribute(angular.element(b),c))}),void 0!==b.attr(c)&&d.push(b),d},transferChildNodes:function(a,b){for(b.innerHTML="";a.childNodes.length>0;)b.appendChild(a.childNodes[0]);return b},splitNodes:function(b,c,d,e,f,g){if(!e&&isNaN(g))throw new Error("taDOM.splitNodes requires a splitNode or splitIndex");for(var h=document.createDocumentFragment(),i=document.createDocumentFragment(),j=0;b.length>0&&(isNaN(g)||g!==j)&&b[0]!==e;)h.appendChild(b[0]),j++;for(!isNaN(f)&&f>=0&&b[0]&&(h.appendChild(document.createTextNode(b[0].nodeValue.substring(0,f))),b[0].nodeValue=b[0].nodeValue.substring(f));b.length>0;)i.appendChild(b[0]);a.transferChildNodes(h,c),a.transferChildNodes(i,d)},transferNodeAttributes:function(a,b){for(var c=0;c<a.attributes.length;c++)b.setAttribute(a.attributes[c].name,a.attributes[c].value);return b}};return a}),angular.module("textAngular.validators",[]).directive("taMaxText",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e=parseInt(a.$eval(c.taMaxText));if(isNaN(e))throw"Max text must be an integer";c.$observe("taMaxText",function(a){if(e=parseInt(a),isNaN(e))throw"Max text must be an integer";d.$dirty&&d.$validate()}),d.$validators.taMaxText=function(a){var b=angular.element("<div/>");return b.html(a),b.text().length<=e}}}}).directive("taMinText",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e=parseInt(a.$eval(c.taMinText));if(isNaN(e))throw"Min text must be an integer";c.$observe("taMinText",function(a){if(e=parseInt(a),isNaN(e))throw"Min text must be an integer";d.$dirty&&d.$validate()}),d.$validators.taMinText=function(a){var b=angular.element("<div/>");return b.html(a),!b.text().length||b.text().length>=e}}}}),angular.module("textAngular.taBind",["textAngular.factories","textAngular.DOM"]).service("_taBlankTest",[function(){var a=/<(a|abbr|acronym|bdi|bdo|big|cite|code|del|dfn|img|ins|kbd|label|map|mark|q|ruby|rp|rt|s|samp|time|tt|var)[^>]*(>|$)/i;return function(b){return function(c){if(!c)return!0;var d,e=/(^[^<]|>)[^<]/i.exec(c);return e?d=e.index:(c=c.toString().replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,""),d=c.indexOf(">")),c=c.trim().substring(d,d+100),!/^[^<>]+$/i.test(c)&&(!(0!==c.length&&c!==b&&!/^>(\s|&nbsp;)*<\/[^>]+>$/gi.test(c))||!/>\s*[^\s<]/i.test(c)&&!a.test(c))}}}]).directive("taButton",[function(){return{link:function(a,b,c){b.attr("unselectable","on"),b.on("mousedown",function(a,b){return b&&angular.extend(a,b),a.preventDefault(),!1})}}}]).directive("taBind",["taSanitize","$timeout","$window","$document","taFixChrome","taBrowserTag","taSelection","taSelectableElements","taApplyCustomRenderers","taOptions","_taBlankTest","$parse","taDOM","textAngularManager",function(a,e,f,h,k,l,m,n,o,q,r,s,t,u){return{priority:2,require:["ngModel","?ngModelOptions"],link:function(l,v,w,x){function y(a){var b;return R.forEach(function(c){if(c.keyCode===a.keyCode){var d=(a.metaKey?O:0)+(a.ctrlKey?N:0)+(a.shiftKey?Q:0)+(a.altKey?P:0);if(c.forbiddenModifiers&d)return;c.mustHaveModifiers.every(function(a){return d&a})&&(b=c.specialKey)}}),b}var z,A,B,C,D=x[0],E=x[1]||{},F=void 0!==v.attr("contenteditable")&&v.attr("contenteditable"),G=F||"textarea"===v[0].tagName.toLowerCase()||"input"===v[0].tagName.toLowerCase(),H=!1,I=!1,J=!1,K=w.taUnsafeSanitizer||q.disableSanitizer,L=/^(9|19|20|27|33|34|35|36|37|38|39|40|45|112|113|114|115|116|117|118|119|120|121|122|123|144|145)$/i,M=/^(8|13|32|46|59|61|107|109|173|186|187|188|189|190|191|192|219|220|221|222)$/i,N=1,O=2,P=4,Q=8,R=[{specialKey:"UndoKey",forbiddenModifiers:P+Q,mustHaveModifiers:[O+N],keyCode:90},{specialKey:"RedoKey",forbiddenModifiers:P,mustHaveModifiers:[O+N,Q],keyCode:90},{specialKey:"RedoKey",forbiddenModifiers:P+Q,mustHaveModifiers:[O+N],keyCode:89},{specialKey:"TabKey",forbiddenModifiers:O+Q+P+N,mustHaveModifiers:[],keyCode:9},{specialKey:"ShiftTabKey",forbiddenModifiers:O+P+N,mustHaveModifiers:[Q],keyCode:9}];void 0===w.taDefaultWrap&&(w.taDefaultWrap="p"),""===w.taDefaultWrap?(B="",C=void 0===b.ie?"<div><br></div>":b.ie>=11?"<p><br></p>":b.ie<=8?"<P>&nbsp;</P>":"<p>&nbsp;</p>"):(B=void 0===b.ie||b.ie>=11?"<"+w.taDefaultWrap+"><br></"+w.taDefaultWrap+">":b.ie<=8?"<"+w.taDefaultWrap.toUpperCase()+"></"+w.taDefaultWrap.toUpperCase()+">":"<"+w.taDefaultWrap+"></"+w.taDefaultWrap+">",C=void 0===b.ie||b.ie>=11?"<"+w.taDefaultWrap+"><br></"+w.taDefaultWrap+">":b.ie<=8?"<"+w.taDefaultWrap.toUpperCase()+">&nbsp;</"+w.taDefaultWrap.toUpperCase()+">":"<"+w.taDefaultWrap+">&nbsp;</"+w.taDefaultWrap+">"),E.$options||(E.$options={});var S=r(C),T=function(a){if(S(a))return a;var b=angular.element("<div>"+a+"</div>");if(0===b.children().length)a="<"+w.taDefaultWrap+">"+a+"</"+w.taDefaultWrap+">";else{var c,e=b[0].childNodes,f=!1;for(c=0;c<e.length&&!(f=e[c].nodeName.toLowerCase().match(d));c++);if(f)for(a="",c=0;c<e.length;c++){var g=e[c],h=g.nodeName.toLowerCase();if("#comment"===h)a+="<!--"+g.nodeValue+"-->";else if("#text"===h){var i=g.textContent;a+=i.trim()?"<"+w.taDefaultWrap+">"+i+"</"+w.taDefaultWrap+">":i}else if(h.match(d))a+=g.outerHTML;else{var j=g.outerHTML||g.nodeValue;a+=""!==j.trim()?"<"+w.taDefaultWrap+">"+j+"</"+w.taDefaultWrap+">":j}}else a="<"+w.taDefaultWrap+">"+a+"</"+w.taDefaultWrap+">"}return a};w.taPaste&&(A=s(w.taPaste)),v.addClass("ta-bind");var U;l["$undoManager"+(w.id||"")]=D.$undoManager={_stack:[],_index:0,_max:1e3,push:function(a){return void 0===a||null===a||void 0!==this.current()&&null!==this.current()&&a===this.current()?a:(this._index<this._stack.length-1&&(this._stack=this._stack.slice(0,this._index+1)),this._stack.push(a),U&&e.cancel(U),this._stack.length>this._max&&this._stack.shift(),this._index=this._stack.length-1,a)},undo:function(){return this.setToIndex(this._index-1)},redo:function(){return this.setToIndex(this._index+1)},setToIndex:function(a){return 0>a||a>this._stack.length-1?void 0:(this._index=a,this.current())},current:function(){return this._stack[this._index]}};var V,W=l["$undoTaBind"+(w.id||"")]=function(){if(!H&&F){var a=D.$undoManager.undo();void 0!==a&&null!==a&&(ka(a),Z(a,!1),V&&e.cancel(V),V=e(function(){v[0].focus(),m.setSelectionToElementEnd(v[0])},1))}},X=l["$redoTaBind"+(w.id||"")]=function(){if(!H&&F){var a=D.$undoManager.redo();void 0!==a&&null!==a&&(ka(a),Z(a,!1),V&&e.cancel(V),V=e(function(){v[0].focus(),m.setSelectionToElementEnd(v[0])},1))}},Y=function(){if(F)return v[0].innerHTML;if(G)return v.val();throw"textAngular Error: attempting to update non-editable taBind"},Z=function(a,b,c){J=c||!1,(void 0===b||null===b)&&(b=F),(void 0===a||null===a)&&(a=Y()),S(a)?(""!==D.$viewValue&&D.$setViewValue(""),b&&""!==D.$undoManager.current()&&D.$undoManager.push("")):(ja(),D.$viewValue!==a&&(D.$setViewValue(a),b&&D.$undoManager.push(a))),D.$render()};l["updateTaBind"+(w.id||"")]=function(){H||Z(void 0,void 0,!0)};var $=function(b){return D.$oldViewValue=a(k(b),D.$oldViewValue,K)};if(v.attr("required")&&(D.$validators.required=function(a,b){return!S(a||b)}),D.$parsers.push($),D.$parsers.unshift(T),D.$formatters.push($),D.$formatters.unshift(T),D.$formatters.unshift(function(a){return D.$undoManager.push(a||"")}),G)if(l.events={},F){var _=!1,aa=function(b){if(b&&b.trim().length){if(b.match(/class=["']*Mso(Normal|List)/i)||b.match(/content=["']*Word.Document/i)){var c=b.match(/<!--StartFragment-->([\s\S]*?)<!--EndFragment-->/i);c=c?c[1]:b,c=c.replace(/<o:p>[\s\S]*?<\/o:p>/gi,"").replace(/class=(["']|)MsoNormal(["']|)/gi,"");var d=angular.element("<div>"+c+"</div>"),f=angular.element("<div></div>"),g={element:null,lastIndent:[],lastLi:null,isUl:!1};g.lastIndent.peek=function(){var a=this.length;return a>0?this[a-1]:void 0};for(var h=function(a){g.isUl=a,g.element=angular.element(a?"<ul>":"<ol>"),g.lastIndent=[],g.lastIndent.peek=function(){var a=this.length;return a>0?this[a-1]:void 0},g.lastLevelMatch=null},i=0;i<=d[0].childNodes.length;i++)if(d[0].childNodes[i]&&"#text"!==d[0].childNodes[i].nodeName){var j=d[0].childNodes[i].tagName.toLowerCase();if("p"===j||"h1"===j||"h2"===j||"h3"===j||"h4"===j||"h5"===j||"h6"===j){var k=angular.element(d[0].childNodes[i]),n=(k.attr("class")||"").match(/MsoList(Bullet|Number|Paragraph)(CxSp(First|Middle|Last)|)/i);if(n){if(k[0].childNodes.length<2||k[0].childNodes[1].childNodes.length<1)continue;var o="bullet"===n[1].toLowerCase()||"number"!==n[1].toLowerCase()&&!(/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(k[0].childNodes[1].innerHTML)||/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(k[0].childNodes[1].childNodes[0].innerHTML)),p=(k.attr("style")||"").match(/margin-left:([\-\.0-9]*)/i),q=parseFloat(p?p[1]:0),r=(k.attr("style")||"").match(/mso-list:l([0-9]+) level([0-9]+) lfo[0-9+]($|;)/i);if(r&&r[2]&&(q=parseInt(r[2])),r&&(!g.lastLevelMatch||r[1]!==g.lastLevelMatch[1])||!n[3]||"first"===n[3].toLowerCase()||null===g.lastIndent.peek()||g.isUl!==o&&g.lastIndent.peek()===q)h(o),f.append(g.element);else if(null!=g.lastIndent.peek()&&g.lastIndent.peek()<q)g.element=angular.element(o?"<ul>":"<ol>"),g.lastLi.append(g.element);else if(null!=g.lastIndent.peek()&&g.lastIndent.peek()>q){for(;null!=g.lastIndent.peek()&&g.lastIndent.peek()>q;)if("li"!==g.element.parent()[0].tagName.toLowerCase()){if(!/[uo]l/i.test(g.element.parent()[0].tagName.toLowerCase()))break;g.element=g.element.parent(),g.lastIndent.pop()}else g.element=g.element.parent();g.isUl="ul"===g.element[0].tagName.toLowerCase(),o!==g.isUl&&(h(o),f.append(g.element))}g.lastLevelMatch=r,q!==g.lastIndent.peek()&&g.lastIndent.push(q),g.lastLi=angular.element("<li>"),g.element.append(g.lastLi),g.lastLi.html(k.html().replace(/<!(--|)\[if !supportLists\](--|)>[\s\S]*?<!(--|)\[endif\](--|)>/gi,"")),k.remove()}else h(!1),f.append(k)}}var s=function(a){a=angular.element(a);for(var b=a[0].childNodes.length-1;b>=0;b--)a.after(a[0].childNodes[b]);a.remove()};angular.forEach(f.find("span"),function(a){a.removeAttribute("lang"),a.attributes.length<=0&&s(a)}),angular.forEach(f.find("font"),s),b=f.html()}else{if(b=b.replace(/<(|\/)meta[^>]*?>/gi,""),b.match(/<[^>]*?(ta-bind)[^>]*?>/)){if(b.match(/<[^>]*?(text-angular)[^>]*?>/)){var u=angular.element("<div>"+b+"</div>");u.find("textarea").remove();for(var w=t.getByAttribute(u,"ta-bind"),x=0;x<w.length;x++){for(var y=w[x][0].parentNode.parentNode,z=0;z<w[x][0].childNodes.length;z++)y.parentNode.insertBefore(w[x][0].childNodes[z],y);y.parentNode.removeChild(y)}b=u.html().replace('<br class="Apple-interchange-newline">',"")}}else b.match(/^<span/)&&(b.match(/<span class=(\"Apple-converted-space\"|\'Apple-converted-space\')>.<\/span>/gi)||(b=b.replace(/<(|\/)span[^>]*?>/gi,"")));b=b.replace(/<br class="Apple-interchange-newline"[^>]*?>/gi,"").replace(/<span class="Apple-converted-space">( |&nbsp;)<\/span>/gi,"&nbsp;")}/<li(\s.*)?>/i.test(b)&&/(<ul(\s.*)?>|<ol(\s.*)?>).*<li(\s.*)?>/i.test(b)===!1&&(b=b.replace(/<li(\s.*)?>.*<\/li(\s.*)?>/i,"<ul>$&</ul>")),b=b.replace(/^[ |\u00A0]+/gm,function(a){for(var b="",c=0;c<a.length;c++)b+="&nbsp;";return b}).replace(/\n|\r\n|\r/g,"<br />").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"),A&&(b=A(l,{$html:b})||b),b=a(b,"",K),m.insertHtml(b,v[0]),e(function(){D.$setViewValue(Y()),_=!1,v.removeClass("processing-paste")},0)}else _=!1,v.removeClass("processing-paste")};v.on("paste",l.events.paste=function(a,b){if(b&&angular.extend(a,b),H||_)return a.stopPropagation(),a.preventDefault(),!1;_=!0,v.addClass("processing-paste");var c,d=(a.originalEvent||a).clipboardData;if(d&&d.getData&&d.types.length>0){for(var g="",i=0;i<d.types.length;i++)g+=" "+d.types[i];return/text\/html/i.test(g)?c=d.getData("text/html"):/text\/plain/i.test(g)&&(c=d.getData("text/plain")),aa(c),a.stopPropagation(),a.preventDefault(),!1}var j=f.rangy.saveSelection(),k=angular.element('<div class="ta-hidden-input" contenteditable="true"></div>');h.find("body").append(k),k[0].focus(),e(function(){f.rangy.restoreSelection(j),aa(k[0].innerHTML),v[0].focus(),k.remove()},0)}),v.on("cut",l.events.cut=function(a){H?a.preventDefault():e(function(){D.$setViewValue(Y())},0)}),v.on("keydown",l.events.keydown=function(a,b){b&&angular.extend(a,b),a.specialKey=y(a);var c;if(q.keyMappings.forEach(function(b){a.specialKey===b.commandKeyCode&&(a.specialKey=void 0),b.testForKey(a)&&(c=b.commandKeyCode),("UndoKey"===b.commandKeyCode||"RedoKey"===b.commandKeyCode)&&(b.enablePropagation||a.preventDefault())}),void 0!==c&&(a.specialKey=c),void 0===a.specialKey||"UndoKey"===a.specialKey&&"RedoKey"===a.specialKey||(a.preventDefault(),u.sendKeyCommand(l,a)),!H&&("UndoKey"===a.specialKey&&(W(),a.preventDefault()),"RedoKey"===a.specialKey&&(X(),a.preventDefault()),13===a.keyCode&&!a.shiftKey)){var d,f=m.getSelectionElement();if(!f.tagName.match(g))return;var h=angular.element(B),i=["blockquote","ul","ol"];if(function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return!0;return!1}(i,f.parentNode.tagName.toLowerCase())){if(/^<br(|\/)>$/i.test(f.innerHTML.trim())&&!f.nextSibling){d=angular.element(f);var j=d.parent();j.after(h),d.remove(),0===j.children().length&&j.remove(),m.setSelectionToElementStart(h[0]),a.preventDefault()}/^<[^>]+><br(|\/)><\/[^>]+>$/i.test(f.innerHTML.trim())&&(d=angular.element(f),d.after(h),d.remove(),m.setSelectionToElementStart(h[0]),a.preventDefault())}}});var ba;if(v.on("keyup",l.events.keyup=function(a,b){if(b&&angular.extend(a,b),9===a.keyCode){return void(m.getSelection().start.element===v[0]&&v.children().length&&m.setSelectionToElementStart(v.children()[0]))}if(U&&e.cancel(U),!H&&!L.test(a.keyCode)){if(""!==B&&13===a.keyCode&&!a.shiftKey){for(var d=m.getSelectionElement();!d.tagName.match(g)&&d!==v[0];)d=d.parentNode;if(d.tagName.toLowerCase()!==w.taDefaultWrap&&"li"!==d.tagName.toLowerCase()&&(""===d.innerHTML.trim()||"<br>"===d.innerHTML.trim())){var f=angular.element(B);angular.element(d).replaceWith(f),m.setSelectionToElementStart(f[0])}}var h=Y();""!==B&&""===h.trim()?(ka(B),m.setSelectionToElementStart(v.children()[0])):"<"!==h.substring(0,1)&&w.taDefaultWrap;var i=z!==a.keyCode&&M.test(a.keyCode);ba&&e.cancel(ba),ba=e(function(){Z(h,i,!0)},E.$options.debounce||400),i||(U=e(function(){D.$undoManager.push(h)},250)),z=a.keyCode}}),v.on("blur",l.events.blur=function(){I=!1,H?(J=!0,D.$render()):Z(void 0,void 0,!0)}),w.placeholder&&(b.ie>8||void 0===b.ie)){var ca;if(!w.id)throw"textAngular Error: An unique ID is required for placeholders to work";ca=i("#"+w.id+".placeholder-text:before",'content: "'+w.placeholder+'"'),l.$on("$destroy",function(){j(ca)})}v.on("focus",l.events.focus=function(){I=!0,v.removeClass("placeholder-text"),ja()}),v.on("mouseup",l.events.mouseup=function(){m.getSelection().start.element===v[0]&&v.children().length&&m.setSelectionToElementStart(v.children()[0])}),v.on("mousedown",l.events.mousedown=function(a,b){b&&angular.extend(a,b),a.stopPropagation()})}else{v.on("change blur",l.events.change=l.events.blur=function(){H||D.$setViewValue(Y())}),v.on("keydown",l.events.keydown=function(a,b){if(b&&angular.extend(a,b),9===a.keyCode){var c=this.selectionStart,d=this.selectionEnd,e=v.val();if(a.shiftKey){var f=e.lastIndexOf("\n",c),g=e.lastIndexOf("\t",c);-1!==g&&g>=f&&(v.val(e.substring(0,g)+e.substring(g+1)),this.selectionStart=this.selectionEnd=c-1)}else v.val(e.substring(0,c)+"\t"+e.substring(d)),this.selectionStart=this.selectionEnd=c+1;a.preventDefault()}});var da=function(a,b){for(var c="",d=0;b>d;d++)c+=a;return c},ea=function(a,b,c){for(var d=0;d<a.length;d++)b.call(c,d,a[d])},fa=function(a,b){var c="",d=a.childNodes;return b++,c+=da("\t",b-1)+a.outerHTML.substring(0,4),ea(d,function(a,d){var e=d.nodeName.toLowerCase();return"#comment"===e?void(c+="<!--"+d.nodeValue+"-->"):"#text"===e?void(c+=d.textContent):void(d.outerHTML&&(c+="ul"===e||"ol"===e?"\n"+fa(d,b):"\n"+da("\t",b)+d.outerHTML))}),c+="\n"+da("\t",b-1)+a.outerHTML.substring(a.outerHTML.lastIndexOf("<"))};D.$formatters.unshift(function(a){var b=angular.element("<div>"+a+"</div>")[0].childNodes;return b.length>0&&(a="",ea(b,function(b,c){var d=c.nodeName.toLowerCase();return"#comment"===d?void(a+="<!--"+c.nodeValue+"-->"):"#text"===d?void(a+=c.textContent):void(c.outerHTML&&(a.length>0&&(a+="\n"),a+="ul"===d||"ol"===d?""+fa(c,0):""+c.outerHTML))})),a})}var ga,ha=function(a){return l.$emit("ta-element-select",this),a.preventDefault(),!1},ia=function(a,b){if(b&&angular.extend(a,b),!p&&!H){p=!0;var c;c=a.originalEvent?a.originalEvent.dataTransfer:a.dataTransfer,l.$emit("ta-drop-event",this,a,c),e(function(){p=!1,Z(void 0,void 0,!0)},100)}},ja=l["reApplyOnSelectorHandlers"+(w.id||"")]=function(){H||angular.forEach(n,function(a){v.find(a).off("click",ha).on("click",ha)})},ka=function(a){v[0].innerHTML=a},la=!1;D.$render=function(){if(!la){la=!0;var a=D.$viewValue||"";J||(F&&I&&(v.removeClass("placeholder-text"),ga&&e.cancel(ga),ga=e(function(){I||(v[0].focus(),m.setSelectionToElementEnd(v.children()[v.children().length-1])),ga=void 0},1)),F?(ka((w.placeholder,""===a?B:a)),H?v.off("drop",ia):(ja(),v.on("drop",ia))):"textarea"!==v[0].tagName.toLowerCase()&&"input"!==v[0].tagName.toLowerCase()?ka(o(a)):v.val(a)),F&&w.placeholder&&(""===a?I?v.removeClass("placeholder-text"):v.addClass("placeholder-text"):v.removeClass("placeholder-text")),la=J=!1}},w.taReadonly&&(H=l.$eval(w.taReadonly),H?(v.addClass("ta-readonly"),("textarea"===v[0].tagName.toLowerCase()||"input"===v[0].tagName.toLowerCase())&&v.attr("disabled","disabled"),void 0!==v.attr("contenteditable")&&v.attr("contenteditable")&&v.removeAttr("contenteditable")):(v.removeClass("ta-readonly"),"textarea"===v[0].tagName.toLowerCase()||"input"===v[0].tagName.toLowerCase()?v.removeAttr("disabled"):F&&v.attr("contenteditable","true")),l.$watch(w.taReadonly,function(a,b){b!==a&&(a?(v.addClass("ta-readonly"),("textarea"===v[0].tagName.toLowerCase()||"input"===v[0].tagName.toLowerCase())&&v.attr("disabled","disabled"),void 0!==v.attr("contenteditable")&&v.attr("contenteditable")&&v.removeAttr("contenteditable"),angular.forEach(n,function(a){v.find(a).on("click",ha)}),v.off("drop",ia)):(v.removeClass("ta-readonly"),"textarea"===v[0].tagName.toLowerCase()||"input"===v[0].tagName.toLowerCase()?v.removeAttr("disabled"):F&&v.attr("contenteditable","true"),angular.forEach(n,function(a){v.find(a).off("click",ha)}),v.on("drop",ia)),H=a)})),F&&!H&&(angular.forEach(n,function(a){v.find(a).on("click",ha)}),v.on("drop",ia),v.on("blur",function(){b.webkit&&(c=!0)}))}}}]);var p=!1,q=angular.module("textAngular",["ngSanitize","textAngularSetup","textAngular.factories","textAngular.DOM","textAngular.validators","textAngular.taBind"]);q.config([function(){angular.forEach(e,function(a,b){delete e[b]})}]),q.run([function(){if("function"==typeof define&&define.amd)define(function(a){window.rangy=a("rangy"),window.rangy.saveSelection=a("rangy/lib/rangy-selectionsaverestore")});else if("function"==typeof require&&"undefined"!=typeof module&&"object"==typeof a)window.rangy=require("rangy"),window.rangy.saveSelection=require("rangy/lib/rangy-selectionsaverestore");else{if(!window.rangy)throw"rangy-core.js and rangy-selectionsaverestore.js are required for textAngular to work correctly, rangy-core is not yet loaded.";if(window.rangy.init(),!window.rangy.saveSelection)throw"rangy-selectionsaverestore.js is required for textAngular to work correctly."}}]),q.directive("textAngular",["$compile","$timeout","taOptions","taSelection","taExecCommand","textAngularManager","$window","$document","$animate","$log","$q","$parse",function(a,b,c,d,e,f,g,h,i,j,k,l){return{require:"?ngModel",scope:{},restrict:"EA",priority:2,link:function(m,n,o,p){var q,r,s,t,u,v,w,x,y,z,A,B=o.serial?o.serial:Math.floor(1e16*Math.random());m._name=o.name?o.name:"textAngularEditor"+B;var C=function(a,c,d){b(function(){var b=function(){a.off(c,b),d.apply(this,arguments)};a.on(c,b)},100)};if(y=e(o.taDefaultWrap),angular.extend(m,angular.copy(c),{wrapSelection:function(a,b,c){"undo"===a.toLowerCase()?m["$undoTaBindtaTextElement"+B]():"redo"===a.toLowerCase()?m["$redoTaBindtaTextElement"+B]():(y(a,!1,b,m.defaultTagAttributes),c&&m["reApplyOnSelectorHandlerstaTextElement"+B](),m.displayElements.text[0].focus())},showHtml:m.$eval(o.taShowHtml)||!1}),o.taFocussedClass&&(m.classes.focussed=o.taFocussedClass),o.taTextEditorClass&&(m.classes.textEditor=o.taTextEditorClass),o.taHtmlEditorClass&&(m.classes.htmlEditor=o.taHtmlEditorClass),o.taDefaultTagAttributes)try{angular.extend(m.defaultTagAttributes,angular.fromJson(o.taDefaultTagAttributes))}catch(D){j.error(D)}o.taTextEditorSetup&&(m.setup.textEditorSetup=m.$parent.$eval(o.taTextEditorSetup)),o.taHtmlEditorSetup&&(m.setup.htmlEditorSetup=m.$parent.$eval(o.taHtmlEditorSetup)),o.taFileDrop?m.fileDropHandler=m.$parent.$eval(o.taFileDrop):m.fileDropHandler=m.defaultFileDropHandler,w=n[0].innerHTML,n[0].innerHTML="",m.displayElements={forminput:angular.element("<input type='hidden' tabindex='-1' style='display: none;'>"),html:angular.element("<textarea></textarea>"),text:angular.element("<div></div>"),scrollWindow:angular.element("<div class='ta-scroll-window'></div>"),popover:angular.element('<div class="popover fade bottom" style="max-width: none; width: 305px;"></div>'),popoverArrow:angular.element('<div class="arrow"></div>'),popoverContainer:angular.element('<div class="popover-content"></div>'),resize:{overlay:angular.element('<div class="ta-resizer-handle-overlay"></div>'),background:angular.element('<div class="ta-resizer-handle-background"></div>'),anchors:[angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tr"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-bl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-br"></div>')],info:angular.element('<div class="ta-resizer-handle-info"></div>')}},m.displayElements.popover.append(m.displayElements.popoverArrow),m.displayElements.popover.append(m.displayElements.popoverContainer),m.displayElements.scrollWindow.append(m.displayElements.popover),m.displayElements.popover.on("mousedown",function(a,b){return b&&angular.extend(a,b),a.preventDefault(),!1}),m.showPopover=function(a){m.displayElements.popover.css("display","block"),m.reflowPopover(a),i.addClass(m.displayElements.popover,"in"),C(h.find("body"),"click keyup",function(){m.hidePopover()})},m.reflowPopover=function(a){m.displayElements.text[0].offsetHeight-51>a[0].offsetTop?(m.displayElements.popover.css("top",a[0].offsetTop+a[0].offsetHeight+m.displayElements.scrollWindow[0].scrollTop+"px"),m.displayElements.popover.removeClass("top").addClass("bottom")):(m.displayElements.popover.css("top",a[0].offsetTop-54+m.displayElements.scrollWindow[0].scrollTop+"px"),m.displayElements.popover.removeClass("bottom").addClass("top"));var b=m.displayElements.text[0].offsetWidth-m.displayElements.popover[0].offsetWidth,c=a[0].offsetLeft+a[0].offsetWidth/2-m.displayElements.popover[0].offsetWidth/2;m.displayElements.popover.css("left",Math.max(0,Math.min(b,c))+"px"),m.displayElements.popoverArrow.css("margin-left",Math.min(c,Math.max(0,c-b))-11+"px")},m.hidePopover=function(){m.displayElements.popover.css("display",""),m.displayElements.popoverContainer.attr("style",""),m.displayElements.popoverContainer.attr("class","popover-content"),m.displayElements.popover.removeClass("in")},m.displayElements.resize.overlay.append(m.displayElements.resize.background),angular.forEach(m.displayElements.resize.anchors,function(a){m.displayElements.resize.overlay.append(a)}),m.displayElements.resize.overlay.append(m.displayElements.resize.info),m.displayElements.scrollWindow.append(m.displayElements.resize.overlay),m.reflowResizeOverlay=function(a){a=angular.element(a)[0],m.displayElements.resize.overlay.css({display:"block",left:a.offsetLeft-5+"px",top:a.offsetTop-5+"px",width:a.offsetWidth+10+"px",height:a.offsetHeight+10+"px"}),m.displayElements.resize.info.text(a.offsetWidth+" x "+a.offsetHeight)},m.showResizeOverlay=function(a){var b=h.find("body");z=function(c){var d={width:parseInt(a.attr("width")),height:parseInt(a.attr("height")),x:c.clientX,y:c.clientY};(void 0===d.width||isNaN(d.width))&&(d.width=a[0].offsetWidth),(void 0===d.height||isNaN(d.height))&&(d.height=a[0].offsetHeight),m.hidePopover();var e=d.height/d.width,f=function(b){function c(a){return Math.round(Math.max(0,a))}var f={x:Math.max(0,d.width+(b.clientX-d.x)),y:Math.max(0,d.height+(b.clientY-d.y))},g=void 0!==o.taResizeForceAspectRatio,h=o.taResizeMaintainAspectRatio;if(g||h&&!b.shiftKey){var j=f.y/f.x;f.x=e>j?f.x:f.y/e,f.y=e>j?f.x*e:f.y}var k=angular.element(a);k.css("height",c(f.y)+"px"),k.css("width",c(f.x)+"px"),m.reflowResizeOverlay(a)};b.on("mousemove",f),C(b,"mouseup",function(a){a.preventDefault(),a.stopPropagation(),b.off("mousemove",f),m.$apply(function(){m.hidePopover(),m.updateTaBindtaTextElement()},100)}),c.stopPropagation(),c.preventDefault()},m.displayElements.resize.anchors[3].off("mousedown"),m.displayElements.resize.anchors[3].on("mousedown",z),m.reflowResizeOverlay(a),C(b,"click",function(){m.hideResizeOverlay()})},m.hideResizeOverlay=function(){m.displayElements.resize.anchors[3].off("mousedown",z),m.displayElements.resize.overlay.css("display","")},m.setup.htmlEditorSetup(m.displayElements.html),m.setup.textEditorSetup(m.displayElements.text),m.displayElements.html.attr({id:"taHtmlElement"+B,"ng-show":"showHtml","ta-bind":"ta-bind","ng-model":"html","ng-model-options":n.attr("ng-model-options")}),m.displayElements.text.attr({id:"taTextElement"+B,contentEditable:"true","ta-bind":"ta-bind","ng-model":"html","ng-model-options":n.attr("ng-model-options")}),m.displayElements.scrollWindow.attr({"ng-hide":"showHtml"}),o.taDefaultWrap&&m.displayElements.text.attr("ta-default-wrap",o.taDefaultWrap),o.taUnsafeSanitizer&&(m.displayElements.text.attr("ta-unsafe-sanitizer",o.taUnsafeSanitizer),m.displayElements.html.attr("ta-unsafe-sanitizer",o.taUnsafeSanitizer)),m.displayElements.scrollWindow.append(m.displayElements.text),n.append(m.displayElements.scrollWindow),n.append(m.displayElements.html),m.displayElements.forminput.attr("name",m._name),n.append(m.displayElements.forminput),o.tabindex&&(n.removeAttr("tabindex"),m.displayElements.text.attr("tabindex",o.tabindex),m.displayElements.html.attr("tabindex",o.tabindex)),o.placeholder&&(m.displayElements.text.attr("placeholder",o.placeholder),m.displayElements.html.attr("placeholder",o.placeholder)),o.taDisabled&&(m.displayElements.text.attr("ta-readonly","disabled"),m.displayElements.html.attr("ta-readonly","disabled"),m.disabled=m.$parent.$eval(o.taDisabled),m.$parent.$watch(o.taDisabled,function(a){m.disabled=a,m.disabled?n.addClass(m.classes.disabled):n.removeClass(m.classes.disabled)})),o.taPaste&&(m._pasteHandler=function(a){return l(o.taPaste)(m.$parent,{$html:a})},m.displayElements.text.attr("ta-paste","_pasteHandler($html)")),a(m.displayElements.scrollWindow)(m),a(m.displayElements.html)(m),m.updateTaBindtaTextElement=m["updateTaBindtaTextElement"+B],m.updateTaBindtaHtmlElement=m["updateTaBindtaHtmlElement"+B],n.addClass("ta-root"),m.displayElements.scrollWindow.addClass("ta-text ta-editor "+m.classes.textEditor),m.displayElements.html.addClass("ta-html ta-editor "+m.classes.htmlEditor),m._actionRunning=!1;var E=!1;if(m.startAction=function(){return m._actionRunning=!0,E=g.rangy.saveSelection(),function(){E&&g.rangy.restoreSelection(E)}},m.endAction=function(){m._actionRunning=!1,E&&(m.showHtml?m.displayElements.html[0].focus():m.displayElements.text[0].focus(),g.rangy.removeMarkers(E)),E=!1,m.updateSelectedStyles(),m.showHtml||m["updateTaBindtaTextElement"+B]()},u=function(){m.focussed=!0,n.addClass(m.classes.focussed),x.focus(),n.triggerHandler("focus")},m.displayElements.html.on("focus",u),m.displayElements.text.on("focus",u),v=function(a){return m._actionRunning||h[0].activeElement===m.displayElements.html[0]||h[0].activeElement===m.displayElements.text[0]||(n.removeClass(m.classes.focussed),x.unfocus(),b(function(){m._bUpdateSelectedStyles=!1,n.triggerHandler("blur"),m.focussed=!1},0)),a.preventDefault(),!1},m.displayElements.html.on("blur",v),m.displayElements.text.on("blur",v),m.displayElements.text.on("paste",function(a){n.triggerHandler("paste",a)}),m.queryFormatBlockState=function(a){
return!m.showHtml&&a.toLowerCase()===h[0].queryCommandValue("formatBlock").toLowerCase()},m.queryCommandState=function(a){return m.showHtml?"":h[0].queryCommandState(a)},m.switchView=function(){m.showHtml=!m.showHtml,i.enabled(!1,m.displayElements.html),i.enabled(!1,m.displayElements.text),m.showHtml?b(function(){return i.enabled(!0,m.displayElements.html),i.enabled(!0,m.displayElements.text),m.displayElements.html[0].focus()},100):b(function(){return i.enabled(!0,m.displayElements.html),i.enabled(!0,m.displayElements.text),m.displayElements.text[0].focus()},100)},o.ngModel){var F=!0;p.$render=function(){if(F){F=!1;var a=m.$parent.$eval(o.ngModel);void 0!==a&&null!==a||!w||""===w||p.$setViewValue(w)}m.displayElements.forminput.val(p.$viewValue),m.html=p.$viewValue||""},n.attr("required")&&(p.$validators.required=function(a,b){var c=a||b;return!(!c||""===c.trim())})}else m.displayElements.forminput.val(w),m.html=w;if(m.$watch("html",function(a,b){a!==b&&(o.ngModel&&p.$viewValue!==a&&p.$setViewValue(a),m.displayElements.forminput.val(a))}),o.taTargetToolbars)x=f.registerEditor(m._name,m,o.taTargetToolbars.split(","));else{var G=angular.element('<div text-angular-toolbar name="textAngularToolbar'+B+'">');o.taToolbar&&G.attr("ta-toolbar",o.taToolbar),o.taToolbarClass&&G.attr("ta-toolbar-class",o.taToolbarClass),o.taToolbarGroupClass&&G.attr("ta-toolbar-group-class",o.taToolbarGroupClass),o.taToolbarButtonClass&&G.attr("ta-toolbar-button-class",o.taToolbarButtonClass),o.taToolbarActiveButtonClass&&G.attr("ta-toolbar-active-button-class",o.taToolbarActiveButtonClass),o.taFocussedClass&&G.attr("ta-focussed-class",o.taFocussedClass),n.prepend(G),a(G)(m.$parent),x=f.registerEditor(m._name,m,["textAngularToolbar"+B])}m.$on("$destroy",function(){f.unregisterEditor(m._name),angular.element(window).off("blur")}),m.$on("ta-element-select",function(a,b){x.triggerElementSelect(a,b)&&m["reApplyOnSelectorHandlerstaTextElement"+B]()}),m.$on("ta-drop-event",function(a,c,d,e){m.displayElements.text[0].focus(),e&&e.files&&e.files.length>0?(angular.forEach(e.files,function(a){try{k.when(m.fileDropHandler(a,m.wrapSelection)||m.fileDropHandler!==m.defaultFileDropHandler&&k.when(m.defaultFileDropHandler(a,m.wrapSelection))).then(function(){m["updateTaBindtaTextElement"+B]()})}catch(b){j.error(b)}}),d.preventDefault(),d.stopPropagation()):b(function(){m["updateTaBindtaTextElement"+B]()},0)}),m._bUpdateSelectedStyles=!1,angular.element(window).on("blur",function(){m._bUpdateSelectedStyles=!1,m.focussed=!1}),m.updateSelectedStyles=function(){var a;A&&b.cancel(A),void 0!==(a=d.getSelectionElement())&&a.parentNode!==m.displayElements.text[0]?x.updateSelectedStyles(angular.element(a)):x.updateSelectedStyles(),m._bUpdateSelectedStyles&&(A=b(m.updateSelectedStyles,200))},q=function(){return m.focussed?void(m._bUpdateSelectedStyles||(m._bUpdateSelectedStyles=!0,m.$apply(function(){m.updateSelectedStyles()}))):void(m._bUpdateSelectedStyles=!1)},m.displayElements.html.on("keydown",q),m.displayElements.text.on("keydown",q),r=function(){m._bUpdateSelectedStyles=!1},m.displayElements.html.on("keyup",r),m.displayElements.text.on("keyup",r),s=function(a,b){b&&angular.extend(a,b),m.$apply(function(){return x.sendKeyCommand(a)?(m._bUpdateSelectedStyles||m.updateSelectedStyles(),a.preventDefault(),!1):void 0})},m.displayElements.html.on("keypress",s),m.displayElements.text.on("keypress",s),t=function(){m._bUpdateSelectedStyles=!1,m.$apply(function(){m.updateSelectedStyles()})},m.displayElements.html.on("mouseup",t),m.displayElements.text.on("mouseup",t)}}}]),q.service("textAngularManager",["taToolExecuteAction","taTools","taRegisterTool",function(a,b,c){var d={},e={};return{registerEditor:function(c,f,g){if(!c||""===c)throw"textAngular Error: An editor requires a name";if(!f)throw"textAngular Error: An editor requires a scope";if(e[c])throw'textAngular Error: An Editor with name "'+c+'" already exists';var h=[];return angular.forEach(g,function(a){d[a]&&h.push(d[a])}),e[c]={scope:f,toolbars:g,_registerToolbar:function(a){this.toolbars.indexOf(a.name)>=0&&h.push(a)},editorFunctions:{disable:function(){angular.forEach(h,function(a){a.disabled=!0})},enable:function(){angular.forEach(h,function(a){a.disabled=!1})},focus:function(){angular.forEach(h,function(a){a._parent=f,a.disabled=!1,a.focussed=!0,f.focussed=!0})},unfocus:function(){angular.forEach(h,function(a){a.disabled=!0,a.focussed=!1}),f.focussed=!1},updateSelectedStyles:function(a){angular.forEach(h,function(b){angular.forEach(b.tools,function(c){c.activeState&&(b._parent=f,c.active=c.activeState(a))})})},sendKeyCommand:function(c){var d=!1;return(c.ctrlKey||c.metaKey||c.specialKey)&&angular.forEach(b,function(b,e){if(b.commandKeyCode&&(b.commandKeyCode===c.which||b.commandKeyCode===c.specialKey))for(var g=0;g<h.length;g++)if(void 0!==h[g].tools[e]){a.call(h[g].tools[e],f),d=!0;break}}),d},triggerElementSelect:function(a,c){var d=function(a,b){for(var c=!0,d=0;d<b.length;d++)c=c&&a.attr(b[d]);return c},e=[],g={},i=!1;c=angular.element(c);var j=!1;if(angular.forEach(b,function(a,b){a.onElementSelect&&a.onElementSelect.element&&a.onElementSelect.element.toLowerCase()===c[0].tagName.toLowerCase()&&(!a.onElementSelect.filter||a.onElementSelect.filter(c))&&(j=j||angular.isArray(a.onElementSelect.onlyWithAttrs)&&d(c,a.onElementSelect.onlyWithAttrs),(!a.onElementSelect.onlyWithAttrs||d(c,a.onElementSelect.onlyWithAttrs))&&(g[b]=a))}),j?(angular.forEach(g,function(a,b){a.onElementSelect.onlyWithAttrs&&d(c,a.onElementSelect.onlyWithAttrs)&&e.push({name:b,tool:a})}),e.sort(function(a,b){return b.tool.onElementSelect.onlyWithAttrs.length-a.tool.onElementSelect.onlyWithAttrs.length})):angular.forEach(g,function(a,b){e.push({name:b,tool:a})}),e.length>0)for(var k=0;k<e.length;k++){for(var l=e[k].tool,m=e[k].name,n=0;n<h.length;n++)if(void 0!==h[n].tools[m]){l.onElementSelect.action.call(h[n].tools[m],a,c,f),i=!0;break}if(i)break}return i}}},e[c].editorFunctions},retrieveEditor:function(a){return e[a]},unregisterEditor:function(a){delete e[a]},registerToolbar:function(a){if(!a)throw"textAngular Error: A toolbar requires a scope";if(!a.name||""===a.name)throw"textAngular Error: A toolbar requires a name";if(d[a.name])throw'textAngular Error: A toolbar with name "'+a.name+'" already exists';d[a.name]=a,angular.forEach(e,function(b){b._registerToolbar(a)})},retrieveToolbar:function(a){return d[a]},retrieveToolbarsViaEditor:function(a){var b=[],c=this;return angular.forEach(this.retrieveEditor(a).toolbars,function(a){b.push(c.retrieveToolbar(a))}),b},unregisterToolbar:function(a){delete d[a]},updateToolsDisplay:function(a){var b=this;angular.forEach(a,function(a,c){b.updateToolDisplay(c,a)})},resetToolsDisplay:function(){var a=this;angular.forEach(b,function(b,c){a.resetToolDisplay(c)})},updateToolDisplay:function(a,b){var c=this;angular.forEach(d,function(d,e){c.updateToolbarToolDisplay(e,a,b)})},resetToolDisplay:function(a){var b=this;angular.forEach(d,function(c,d){b.resetToolbarToolDisplay(d,a)})},updateToolbarToolDisplay:function(a,b,c){if(!d[a])throw'textAngular Error: No Toolbar with name "'+a+'" exists';d[a].updateToolDisplay(b,c)},resetToolbarToolDisplay:function(a,c){if(!d[a])throw'textAngular Error: No Toolbar with name "'+a+'" exists';d[a].updateToolDisplay(c,b[c],!0)},removeTool:function(a){delete b[a],angular.forEach(d,function(b){delete b.tools[a];for(var c=0;c<b.toolbar.length;c++){for(var d,e=0;e<b.toolbar[c].length;e++){if(b.toolbar[c][e]===a){d={group:c,index:e};break}if(void 0!==d)break}void 0!==d&&(b.toolbar[d.group].slice(d.index,1),b._$element.children().eq(d.group).children().eq(d.index).remove())}})},addTool:function(a,b,e,f){c(a,b),angular.forEach(d,function(c){c.addTool(a,b,e,f)})},addToolToToolbar:function(a,b,e,f,g){c(a,b),d[e].addTool(a,b,f,g)},refreshEditor:function(a){if(!e[a])throw'textAngular Error: No Editor with name "'+a+'" exists';e[a].scope.updateTaBindtaTextElement(),e[a].scope.$$phase||e[a].scope.$digest()},sendKeyCommand:function(a,b){var c=e[a._name];return c&&c.editorFunctions.sendKeyCommand(b)?(a._bUpdateSelectedStyles||a.updateSelectedStyles(),b.preventDefault(),!1):void 0}}}]),q.directive("textAngularToolbar",["$compile","textAngularManager","taOptions","taTools","taToolExecuteAction","$window",function(a,b,c,d,e,f){return{scope:{name:"@"},restrict:"EA",link:function(g,h,i){if(!g.name||""===g.name)throw"textAngular Error: A toolbar requires a name";angular.extend(g,angular.copy(c)),i.taToolbar&&(g.toolbar=g.$parent.$eval(i.taToolbar)),i.taToolbarClass&&(g.classes.toolbar=i.taToolbarClass),i.taToolbarGroupClass&&(g.classes.toolbarGroup=i.taToolbarGroupClass),i.taToolbarButtonClass&&(g.classes.toolbarButton=i.taToolbarButtonClass),i.taToolbarActiveButtonClass&&(g.classes.toolbarButtonActive=i.taToolbarActiveButtonClass),i.taFocussedClass&&(g.classes.focussed=i.taFocussedClass),g.disabled=!0,g.focussed=!1,g._$element=h,h[0].innerHTML="",h.addClass("ta-toolbar "+g.classes.toolbar),g.$watch("focussed",function(){g.focussed?h.addClass(g.classes.focussed):h.removeClass(g.classes.focussed)});var j=function(b,c){var d;if(d=b&&b.display?angular.element(b.display):angular.element("<button type='button'>"),b&&b.class?d.addClass(b.class):d.addClass(g.classes.toolbarButton),d.attr("name",c.name),d.attr("ta-button","ta-button"),d.attr("ng-disabled","isDisabled()"),d.attr("tabindex","-1"),d.attr("ng-click","executeAction()"),d.attr("ng-class","displayActiveToolClass(active)"),b&&b.tooltiptext&&d.attr("title",b.tooltiptext),b&&!b.display&&!c._display&&(d[0].innerHTML="",b.buttontext&&(d[0].innerHTML=b.buttontext),b.iconclass)){var e=angular.element("<i>"),f=d[0].innerHTML;e.addClass(b.iconclass),d[0].innerHTML="",d.append(e),f&&""!==f&&d.append("&nbsp;"+f)}return c._lastToolDefinition=angular.copy(b),a(d)(c)};g.tools={},g._parent={disabled:!0,showHtml:!1,queryFormatBlockState:function(){return!1},queryCommandState:function(){return!1}};var k={$window:f,$editor:function(){return g._parent},isDisabled:function(){return"function"!=typeof this.$eval("disabled")&&this.$eval("disabled")||this.$eval("disabled()")||"html"!==this.name&&this.$editor().showHtml||this.$parent.disabled||this.$editor().disabled},displayActiveToolClass:function(a){return a?g.classes.toolbarButtonActive:""},executeAction:e};angular.forEach(g.toolbar,function(a){var b=angular.element("<div>");b.addClass(g.classes.toolbarGroup),angular.forEach(a,function(a){g.tools[a]=angular.extend(g.$new(!0),d[a],k,{name:a}),g.tools[a].$element=j(d[a],g.tools[a]),b.append(g.tools[a].$element)}),h.append(b)}),g.updateToolDisplay=function(a,b,c){var d=g.tools[a];if(d){if(d._lastToolDefinition&&!c&&(b=angular.extend({},d._lastToolDefinition,b)),null===b.buttontext&&null===b.iconclass&&null===b.display)throw'textAngular Error: Tool Definition for updating "'+a+'" does not have a valid display/iconclass/buttontext value';null===b.buttontext&&delete b.buttontext,null===b.iconclass&&delete b.iconclass,null===b.display&&delete b.display;var e=j(b,d);d.$element.replaceWith(e),d.$element=e}},g.addTool=function(a,b,c,e){g.tools[a]=angular.extend(g.$new(!0),d[a],k,{name:a}),g.tools[a].$element=j(d[a],g.tools[a]);var f;void 0===c&&(c=g.toolbar.length-1),f=angular.element(h.children()[c]),void 0===e?(f.append(g.tools[a].$element),g.toolbar[c][g.toolbar[c].length-1]=a):(f.children().eq(e).after(g.tools[a].$element),g.toolbar[c][e]=a)},b.registerToolbar(g),g.$on("$destroy",function(){b.unregisterToolbar(g.name)})}}}])}()}({},function(){return this}()),angular.module("pageslide-directive",[]).directive("pageslide",["$document","$timeout",function($document,$timeout){return{restrict:"EAC",transclude:!1,scope:{psOpen:"=?",psAutoClose:"=?",psSide:"@",psSpeed:"@",psClass:"@",psSize:"@",psSqueeze:"@",psCloak:"@",psPush:"@",psContainer:"@",psKeyListener:"@",psBodyClass:"@"},link:function($scope,el,attrs){function setBodyClass(value){if(param.bodyClass){var bodyClass=param.className[param.className.length-1]+"-body",bodyClassRe=new RegExp(" "+bodyClass+"-closed| "+bodyClass+"-open|"+bodyClass+"-closed|"+bodyClass+"-open/g");body.className=body.className.replace(bodyClassRe,""),body.className?body.className.indexOf(bodyClass+"-"+value)<0&&(body.className+=" "+bodyClass+"-"+value):body.className+=" "+bodyClass+"-"+value}}function psClose(slider,param){if(slider&&0!==slider.style.width)switch(param.cloak&&content.css("display","none"),param.side){case"right":slider.style.width="0px",param.squeeze&&(body.style.right="0px"),param.push&&(body.style.right="0px",body.style.left="0px");break;case"left":slider.style.width="0px",param.squeeze&&(body.style.left="0px"),param.push&&(body.style.left="0px",body.style.right="0px");break;case"top":slider.style.height="0px",param.squeeze&&(body.style.top="0px"),param.push&&(body.style.top="0px",body.style.bottom="0px");break;case"bottom":slider.style.height="0px",param.squeeze&&(body.style.bottom="0px"),param.push&&(body.style.bottom="0px",body.style.top="0px")}$scope.psOpen=!1,param.keyListener&&$document.off("keydown",keyListener),setBodyClass("closed")}function psOpen(slider,param){if(0!==slider.style.width){switch(param.side){case"right":slider.style.width=param.size,param.squeeze&&(body.style.right=param.size),param.push&&(body.style.right=param.size,body.style.left="-"+param.size);break;case"left":slider.style.width=param.size,param.squeeze&&(body.style.left=param.size),param.push&&(body.style.left=param.size,body.style.right="-"+param.size);break;case"top":slider.style.height=param.size,param.squeeze&&(body.style.top=param.size),param.push&&(body.style.top=param.size,body.style.bottom="-"+param.size);break;case"bottom":slider.style.height=param.size,param.squeeze&&(body.style.bottom=param.size),param.push&&(body.style.bottom=param.size,body.style.top="-"+param.size)}$timeout(function(){param.cloak&&content.css("display","block")},1e3*param.speed),$scope.psOpen=!0,param.keyListener&&$document.on("keydown",keyListener),setBodyClass("open")}}function keyListener(e){27===(e.keyCode||e.which)&&psClose(slider,param)}var param={};param.side=$scope.psSide||"right",param.speed=$scope.psSpeed||"0.5",param.size=$scope.psSize||"300px",param.zindex=1e3,param.className=$scope.psClass||"ng-pageslide",param.cloak=!$scope.psCloak||"false"!=$scope.psCloak.toLowerCase(),param.squeeze=Boolean($scope.psSqueeze)||!1,param.push=Boolean($scope.psPush)||!1,param.container=$scope.psContainer||!1,param.keyListener=Boolean($scope.psKeyListener)||!1,param.bodyClass=$scope.psBodyClass||!1,param.className=param.className.split(" "),param.className.forEach(function(cl){el.addClass(cl)});var content=null,slider=null,body=param.container?document.getElementById(param.container):document.body;if(setBodyClass("closed"),slider=el[0],"div"!==slider.tagName.toLowerCase()&&"pageslide"!==slider.tagName.toLowerCase())throw new Error("Pageslide can only be applied to <div> or <pageslide> elements");if(0===slider.children.length)throw new Error("You have to content inside the <pageslide>");switch(content=angular.element(slider.children),body.appendChild(slider),slider.style.zIndex=param.zindex,slider.style.position=param.container!==!1?"absolute":"fixed",slider.style.width=0,slider.style.height=0,slider.style.overflow="auto",slider.style.transitionDuration=param.speed+"s",slider.style.webkitTransitionDuration=param.speed+"s",slider.style.transitionProperty="width, height",param.squeeze&&(body.style.position="absolute",body.style.transitionDuration=param.speed+"s",body.style.webkitTransitionDuration=param.speed+"s",body.style.transitionProperty="top, bottom, left, right"),param.side){case"right":slider.style.height=attrs.psCustomHeight||"100%",slider.style.top=attrs.psCustomTop||"0px",slider.style.bottom=attrs.psCustomBottom||"0px",slider.style.right=attrs.psCustomRight||"0px";break;case"left":slider.style.height=attrs.psCustomHeight||"100%",slider.style.top=attrs.psCustomTop||"0px",slider.style.bottom=attrs.psCustomBottom||"0px",slider.style.left=attrs.psCustomLeft||"0px";break;case"top":slider.style.width=attrs.psCustomWidth||"100%",slider.style.left=attrs.psCustomLeft||"0px",slider.style.top=attrs.psCustomTop||"0px",slider.style.right=attrs.psCustomRight||"0px";break;case"bottom":slider.style.width=attrs.psCustomWidth||"100%",slider.style.bottom=attrs.psCustomBottom||"0px",slider.style.left=attrs.psCustomLeft||"0px",slider.style.right=attrs.psCustomRight||"0px"}$scope.$watch("psOpen",function(value){value?psOpen(slider,param):psClose(slider,param)}),$scope.$watch("psSize",function(newValue,oldValue){oldValue!==newValue&&(param.size=newValue,psOpen(slider,param))}),$scope.$on("$destroy",function(){body.removeChild(slider)}),$scope.psAutoClose&&($scope.$on("$locationChangeStart",function(){psClose(slider,param)}),$scope.$on("$stateChangeStart",function(){psClose(slider,param)}))}}}]),function(){"use strict";function clickOutside($document,$parse,$timeout){return{restrict:"A",link:function($scope,elem,attr){$timeout(function(){function eventHandler(e){if(e&&e.target&&("pac-matched"==e.target.className||"pac-item-query"==e.target.className||"pac-item"==e.target.className||"pac-icon"==e.target.className||"pac-container"==e.target.className||"pac-icon-marker"==e.target.className||"pac-logo"==e.target.className||"pac-matched"==e.target.className))return void event.stopPropagation();var i,element,r,id,classNames,l;if(!angular.element(elem).hasClass("ng-hide")&&e&&e.target){for(element=e.target;element;element=element.parentNode){if(element===elem[0])return;if(id=element.id,classNames=element.className,l=classList.length,classNames&&void 0!==classNames.baseVal&&(classNames=classNames.baseVal),classNames||id)for(i=0;i<l;i++)if(r=new RegExp("\\b"+classList[i]+"\\b"),void 0!==id&&id===classList[i]||classNames&&r.test(classNames))return}$timeout(function(){(fn=$parse(attr.clickOutside))($scope,{event:e})})}}function _hasTouch(){return"ontouchstart"in window||navigator.maxTouchPoints}var fn,classList=void 0!==attr.outsideIfNot?attr.outsideIfNot.split(/[ ,]+/):[];_hasTouch()&&$document.on("touchstart",eventHandler),$document.on("click",eventHandler),$scope.$on("$destroy",function(){_hasTouch()&&$document.off("touchstart",eventHandler),$document.off("click",eventHandler)})})}}}angular.module("angular-click-outside",[]).directive("clickOutside",["$document","$parse","$timeout",clickOutside])}(),function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["angular"],b);else if("object"==typeof module&&module.exports){var c=angular||require("angular");c&&c.module||"undefined"==typeof angular||(c=angular),module.exports=b(c)}else b(a.angular)}(this,function(a){"use strict";var b=a.module("rzModule",[]).factory("RzSliderOptions",function(){var b={floor:0,ceil:null,step:1,precision:0,minRange:null,maxRange:null,pushRange:!1,minLimit:null,maxLimit:null,id:null,translate:null,getLegend:null,stepsArray:null,bindIndexForStepsArray:!1,draggableRange:!1,draggableRangeOnly:!1,showSelectionBar:!1,showSelectionBarEnd:!1,showSelectionBarFromValue:null,hidePointerLabels:!1,hideLimitLabels:!1,autoHideLimitLabels:!0,readOnly:!1,disabled:!1,interval:350,showTicks:!1,showTicksValues:!1,ticksArray:null,ticksTooltip:null,ticksValuesTooltip:null,vertical:!1,getSelectionBarColor:null,getTickColor:null,getPointerColor:null,keyboardSupport:!0,scale:1,enforceStep:!0,enforceRange:!1,noSwitching:!1,onlyBindHandles:!1,onStart:null,onChange:null,onEnd:null,rightToLeft:!1,boundPointerLabels:!0,mergeRangeLabelsIfSame:!1,customTemplateScope:null,logScale:!1,customValueToPosition:null,customPositionToValue:null,selectionBarGradient:null},c={},d={};return d.options=function(b){a.extend(c,b)},d.getOptions=function(d){return a.extend({},b,c,d)},d}).factory("rzThrottle",["$timeout",function(a){return function(b,c,d){var e,f,g,h=Date.now||function(){return(new Date).getTime()},i=null,j=0;d=d||{};var k=function(){j=h(),i=null,g=b.apply(e,f),e=f=null};return function(){var l=h(),m=c-(l-j);return e=this,f=arguments,0>=m?(a.cancel(i),i=null,j=l,g=b.apply(e,f),e=f=null):i||d.trailing===!1||(i=a(k,m)),g}}}]).factory("RzSlider",["$timeout","$document","$window","$compile","RzSliderOptions","rzThrottle",function(b,c,d,e,f,g){var h=function(a,b){this.scope=a,this.lowValue=0,this.highValue=0,this.sliderElem=b,this.range=void 0!==this.scope.rzSliderModel&&void 0!==this.scope.rzSliderHigh,this.dragging={active:!1,value:0,difference:0,position:0,lowLimit:0,highLimit:0},this.positionProperty="left",this.dimensionProperty="width",this.handleHalfDim=0,this.maxPos=0,this.precision=0,this.step=1,this.tracking="",this.minValue=0,this.maxValue=0,this.valueRange=0,this.intermediateTicks=!1,this.initHasRun=!1,this.firstKeyDown=!1,this.internalChange=!1,this.cmbLabelShown=!1,this.currentFocusElement=null,this.fullBar=null,this.selBar=null,this.minH=null,this.maxH=null,this.flrLab=null,this.ceilLab=null,this.minLab=null,this.maxLab=null,this.cmbLab=null,this.ticks=null,this.init()};return h.prototype={init:function(){var b,c,e=this,f=function(){e.calcViewDimensions()};this.applyOptions(),this.syncLowValue(),this.range&&this.syncHighValue(),this.initElemHandles(),this.manageElementsStyle(),this.setDisabledState(),this.calcViewDimensions(),this.setMinAndMax(),this.addAccessibility(),this.updateCeilLab(),this.updateFloorLab(),this.initHandles(),this.manageEventsBindings(),this.scope.$on("reCalcViewDimensions",f),a.element(d).on("resize",f),this.initHasRun=!0,b=g(function(){e.onLowHandleChange()},e.options.interval),c=g(function(){e.onHighHandleChange()},e.options.interval),this.scope.$on("rzSliderForceRender",function(){e.resetLabelsValue(),b(),e.range&&c(),e.resetSlider()}),this.scope.$watch("rzSliderOptions()",function(a,b){a!==b&&(e.applyOptions(),e.syncLowValue(),e.range&&e.syncHighValue(),e.resetSlider())},!0),this.scope.$watch("rzSliderModel",function(a,c){e.internalChange||a!==c&&b()}),this.scope.$watch("rzSliderHigh",function(a,b){e.internalChange||a!==b&&(null!=a&&c(),(e.range&&null==a||!e.range&&null!=a)&&(e.applyOptions(),e.resetSlider()))}),this.scope.$on("$destroy",function(){e.unbindEvents(),a.element(d).off("resize",f),e.currentFocusElement=null})},findStepIndex:function(b){for(var c=0,d=0;d<this.options.stepsArray.length;d++){var e=this.options.stepsArray[d];if(e===b){c=d;break}if(a.isDate(e)){if(e.getTime()===b.getTime()){c=d;break}}else if(a.isObject(e)&&(a.isDate(e.value)&&e.value.getTime()===b.getTime()||e.value===b)){c=d;break}}return c},syncLowValue:function(){this.options.stepsArray?this.options.bindIndexForStepsArray?this.lowValue=this.scope.rzSliderModel:this.lowValue=this.findStepIndex(this.scope.rzSliderModel):this.lowValue=this.scope.rzSliderModel},syncHighValue:function(){this.options.stepsArray?this.options.bindIndexForStepsArray?this.highValue=this.scope.rzSliderHigh:this.highValue=this.findStepIndex(this.scope.rzSliderHigh):this.highValue=this.scope.rzSliderHigh},getStepValue:function(b){var c=this.options.stepsArray[b];return a.isDate(c)?c:a.isObject(c)?c.value:c},applyLowValue:function(){this.options.stepsArray?this.options.bindIndexForStepsArray?this.scope.rzSliderModel=this.lowValue:this.scope.rzSliderModel=this.getStepValue(this.lowValue):this.scope.rzSliderModel=this.lowValue},applyHighValue:function(){this.options.stepsArray?this.options.bindIndexForStepsArray?this.scope.rzSliderHigh=this.highValue:this.scope.rzSliderHigh=this.getStepValue(this.highValue):this.scope.rzSliderHigh=this.highValue},onLowHandleChange:function(){this.syncLowValue(),this.range&&this.syncHighValue(),this.setMinAndMax(),this.updateLowHandle(this.valueToPosition(this.lowValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateAriaAttributes(),this.range&&this.updateCmbLabel()},onHighHandleChange:function(){this.syncLowValue(),this.syncHighValue(),this.setMinAndMax(),this.updateHighHandle(this.valueToPosition(this.highValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateCmbLabel(),this.updateAriaAttributes()},applyOptions:function(){var b;b=this.scope.rzSliderOptions?this.scope.rzSliderOptions():{},this.options=f.getOptions(b),this.options.step<=0&&(this.options.step=1),this.range=void 0!==this.scope.rzSliderModel&&void 0!==this.scope.rzSliderHigh,this.options.draggableRange=this.range&&this.options.draggableRange,this.options.draggableRangeOnly=this.range&&this.options.draggableRangeOnly,this.options.draggableRangeOnly&&(this.options.draggableRange=!0),this.options.showTicks=this.options.showTicks||this.options.showTicksValues||!!this.options.ticksArray,this.scope.showTicks=this.options.showTicks,(a.isNumber(this.options.showTicks)||this.options.ticksArray)&&(this.intermediateTicks=!0),this.options.showSelectionBar=this.options.showSelectionBar||this.options.showSelectionBarEnd||null!==this.options.showSelectionBarFromValue,this.options.stepsArray?this.parseStepsArray():(this.options.translate?this.customTrFn=this.options.translate:this.customTrFn=function(a){return String(a)},this.getLegend=this.options.getLegend),this.options.vertical&&(this.positionProperty="bottom",this.dimensionProperty="height"),this.options.customTemplateScope&&(this.scope.custom=this.options.customTemplateScope)},parseStepsArray:function(){this.options.floor=0,this.options.ceil=this.options.stepsArray.length-1,this.options.step=1,this.options.translate?this.customTrFn=this.options.translate:this.customTrFn=function(a){return this.options.bindIndexForStepsArray?this.getStepValue(a):a},this.getLegend=function(b){var c=this.options.stepsArray[b];return a.isObject(c)?c.legend:null}},resetSlider:function(){this.manageElementsStyle(),this.addAccessibility(),this.setMinAndMax(),this.updateCeilLab(),this.updateFloorLab(),this.unbindEvents(),this.manageEventsBindings(),this.setDisabledState(),this.calcViewDimensions(),this.refocusPointerIfNeeded()},refocusPointerIfNeeded:function(){this.currentFocusElement&&(this.onPointerFocus(this.currentFocusElement.pointer,this.currentFocusElement.ref),this.focusElement(this.currentFocusElement.pointer))},initElemHandles:function(){a.forEach(this.sliderElem.children(),function(b,c){var d=a.element(b);switch(c){case 0:this.fullBar=d;break;case 1:this.selBar=d;break;case 2:this.minH=d;break;case 3:this.maxH=d;break;case 4:this.flrLab=d;break;case 5:this.ceilLab=d;break;case 6:this.minLab=d;break;case 7:this.maxLab=d;break;case 8:this.cmbLab=d;break;case 9:this.ticks=d}},this),this.selBar.rzsp=0,this.minH.rzsp=0,this.maxH.rzsp=0,this.flrLab.rzsp=0,this.ceilLab.rzsp=0,this.minLab.rzsp=0,this.maxLab.rzsp=0,this.cmbLab.rzsp=0},manageElementsStyle:function(){this.range?this.maxH.css("display",""):this.maxH.css("display","none"),this.alwaysHide(this.flrLab,this.options.showTicksValues||this.options.hideLimitLabels),this.alwaysHide(this.ceilLab,this.options.showTicksValues||this.options.hideLimitLabels);var a=this.options.showTicksValues&&!this.intermediateTicks;this.alwaysHide(this.minLab,a||this.options.hidePointerLabels),this.alwaysHide(this.maxLab,a||!this.range||this.options.hidePointerLabels),this.alwaysHide(this.cmbLab,a||!this.range||this.options.hidePointerLabels),this.alwaysHide(this.selBar,!this.range&&!this.options.showSelectionBar),this.options.vertical&&this.sliderElem.addClass("rz-vertical"),this.options.draggableRange?this.selBar.addClass("rz-draggable"):this.selBar.removeClass("rz-draggable"),this.intermediateTicks&&this.options.showTicksValues&&this.ticks.addClass("rz-ticks-values-under")},alwaysHide:function(a,b){a.rzAlwaysHide=b,b?this.hideEl(a):this.showEl(a)},manageEventsBindings:function(){this.options.disabled||this.options.readOnly?this.unbindEvents():this.bindEvents()},setDisabledState:function(){this.options.disabled?this.sliderElem.attr("disabled","disabled"):this.sliderElem.attr("disabled",null)},resetLabelsValue:function(){this.minLab.rzsv=void 0,this.maxLab.rzsv=void 0},initHandles:function(){this.updateLowHandle(this.valueToPosition(this.lowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.highValue)),this.updateSelectionBar(),this.range&&this.updateCmbLabel(),this.updateTicksScale()},translateFn:function(a,b,c,d){d=void 0===d||d;var e="",f=!1,g=b.hasClass("no-label-injection");d?(this.options.stepsArray&&!this.options.bindIndexForStepsArray&&(a=this.getStepValue(a)),e=String(this.customTrFn(a,this.options.id,c))):e=String(a),(void 0===b.rzsv||b.rzsv.length!==e.length||b.rzsv.length>0&&0===b.rzsd)&&(f=!0,b.rzsv=e),g||b.html(e),this.scope[c+"Label"]=e,f&&this.getDimension(b)},setMinAndMax:function(){if(this.step=+this.options.step,this.precision=+this.options.precision,this.minValue=this.options.floor,this.options.logScale&&0===this.minValue)throw Error("Can't use floor=0 with logarithmic scale");this.options.enforceStep&&(this.lowValue=this.roundStep(this.lowValue),this.range&&(this.highValue=this.roundStep(this.highValue))),null!=this.options.ceil?this.maxValue=this.options.ceil:this.maxValue=this.options.ceil=this.range?this.highValue:this.lowValue,this.options.enforceRange&&(this.lowValue=this.sanitizeValue(this.lowValue),this.range&&(this.highValue=this.sanitizeValue(this.highValue))),this.applyLowValue(),this.range&&this.applyHighValue(),this.valueRange=this.maxValue-this.minValue},addAccessibility:function(){this.minH.attr("role","slider"),this.updateAriaAttributes(),!this.options.keyboardSupport||this.options.readOnly||this.options.disabled?this.minH.attr("tabindex",""):this.minH.attr("tabindex","0"),this.options.vertical&&this.minH.attr("aria-orientation","vertical"),this.range&&(this.maxH.attr("role","slider"),!this.options.keyboardSupport||this.options.readOnly||this.options.disabled?this.maxH.attr("tabindex",""):this.maxH.attr("tabindex","0"),this.options.vertical&&this.maxH.attr("aria-orientation","vertical"))},updateAriaAttributes:function(){this.minH.attr({"aria-valuenow":this.scope.rzSliderModel,"aria-valuetext":this.customTrFn(this.scope.rzSliderModel,this.options.id,"model"),"aria-valuemin":this.minValue,"aria-valuemax":this.maxValue}),this.range&&this.maxH.attr({"aria-valuenow":this.scope.rzSliderHigh,"aria-valuetext":this.customTrFn(this.scope.rzSliderHigh,this.options.id,"high"),"aria-valuemin":this.minValue,"aria-valuemax":this.maxValue})},calcViewDimensions:function(){var a=this.getDimension(this.minH);if(this.handleHalfDim=a/2,this.barDimension=this.getDimension(this.fullBar),this.maxPos=this.barDimension-a,this.getDimension(this.sliderElem),this.sliderElem.rzsp=this.sliderElem[0].getBoundingClientRect()[this.positionProperty],this.initHasRun){this.updateFloorLab(),this.updateCeilLab(),this.initHandles();var c=this;b(function(){c.updateTicksScale()})}},updateTicksScale:function(){if(this.options.showTicks){var a=this.options.ticksArray||this.getTicksArray(),b=this.options.vertical?"translateY":"translateX",c=this;this.options.rightToLeft&&a.reverse(),this.scope.ticks=a.map(function(a){var d=c.valueToPosition(a);c.options.vertical&&(d=c.maxPos-d);var e={selected:c.isTickSelected(a),style:{transform:b+"("+Math.round(d)+"px)"}};if(e.selected&&c.options.getSelectionBarColor&&(e.style["background-color"]=c.getSelectionBarColor()),!e.selected&&c.options.getTickColor&&(e.style["background-color"]=c.getTickColor(a)),c.options.ticksTooltip&&(e.tooltip=c.options.ticksTooltip(a),e.tooltipPlacement=c.options.vertical?"right":"top"),c.options.showTicksValues&&(e.value=c.getDisplayValue(a,"tick-value"),c.options.ticksValuesTooltip&&(e.valueTooltip=c.options.ticksValuesTooltip(a),e.valueTooltipPlacement=c.options.vertical?"right":"top")),c.getLegend){var f=c.getLegend(a,c.options.id);f&&(e.legend=f)}return e})}},getTicksArray:function(){var a=this.step,b=[];this.intermediateTicks&&(a=this.options.showTicks);for(var c=this.minValue;c<=this.maxValue;c+=a)b.push(c);return b},isTickSelected:function(a){if(!this.range)if(null!==this.options.showSelectionBarFromValue){var b=this.options.showSelectionBarFromValue;if(this.lowValue>b&&a>=b&&a<=this.lowValue)return!0;if(this.lowValue<b&&b>=a&&a>=this.lowValue)return!0
}else if(this.options.showSelectionBarEnd){if(a>=this.lowValue)return!0}else if(this.options.showSelectionBar&&a<=this.lowValue)return!0;return!!(this.range&&a>=this.lowValue&&a<=this.highValue)},updateFloorLab:function(){this.translateFn(this.minValue,this.flrLab,"floor"),this.getDimension(this.flrLab);var a=this.options.rightToLeft?this.barDimension-this.flrLab.rzsd:0;this.setPosition(this.flrLab,a)},updateCeilLab:function(){this.translateFn(this.maxValue,this.ceilLab,"ceil"),this.getDimension(this.ceilLab);var a=this.options.rightToLeft?0:this.barDimension-this.ceilLab.rzsd;this.setPosition(this.ceilLab,a)},updateHandles:function(a,b){"lowValue"===a?this.updateLowHandle(b):this.updateHighHandle(b),this.updateSelectionBar(),this.updateTicksScale(),this.range&&this.updateCmbLabel()},getHandleLabelPos:function(a,b){var c=this[a].rzsd,d=b-c/2+this.handleHalfDim,e=this.barDimension-c;return this.options.boundPointerLabels?this.options.rightToLeft&&"minLab"===a||!this.options.rightToLeft&&"maxLab"===a?Math.min(d,e):Math.min(Math.max(d,0),e):d},updateLowHandle:function(a){if(this.setPosition(this.minH,a),this.translateFn(this.lowValue,this.minLab,"model"),this.setPosition(this.minLab,this.getHandleLabelPos("minLab",a)),this.options.getPointerColor){var b=this.getPointerColor("min");this.scope.minPointerStyle={backgroundColor:b}}this.options.autoHideLimitLabels&&this.shFloorCeil()},updateHighHandle:function(a){if(this.setPosition(this.maxH,a),this.translateFn(this.highValue,this.maxLab,"high"),this.setPosition(this.maxLab,this.getHandleLabelPos("maxLab",a)),this.options.getPointerColor){var b=this.getPointerColor("max");this.scope.maxPointerStyle={backgroundColor:b}}this.options.autoHideLimitLabels&&this.shFloorCeil()},shFloorCeil:function(){if(!this.options.hidePointerLabels){var a=!1,b=!1,c=this.isLabelBelowFloorLab(this.minLab),d=this.isLabelAboveCeilLab(this.minLab),e=this.isLabelAboveCeilLab(this.maxLab),f=this.isLabelBelowFloorLab(this.cmbLab),g=this.isLabelAboveCeilLab(this.cmbLab);if(c?(a=!0,this.hideEl(this.flrLab)):(a=!1,this.showEl(this.flrLab)),d?(b=!0,this.hideEl(this.ceilLab)):(b=!1,this.showEl(this.ceilLab)),this.range){var h=this.cmbLabelShown?g:e,i=this.cmbLabelShown?f:c;h?this.hideEl(this.ceilLab):b||this.showEl(this.ceilLab),i?this.hideEl(this.flrLab):a||this.showEl(this.flrLab)}}},isLabelBelowFloorLab:function(a){var b=this.options.rightToLeft,c=a.rzsp,d=a.rzsd,e=this.flrLab.rzsp,f=this.flrLab.rzsd;return b?c+d>=e-2:e+f+2>=c},isLabelAboveCeilLab:function(a){var b=this.options.rightToLeft,c=a.rzsp,d=a.rzsd,e=this.ceilLab.rzsp,f=this.ceilLab.rzsd;return b?e+f+2>=c:c+d>=e-2},updateSelectionBar:function(){var a=0,b=0,c=this.options.rightToLeft?!this.options.showSelectionBarEnd:this.options.showSelectionBarEnd,d=this.options.rightToLeft?this.maxH.rzsp+this.handleHalfDim:this.minH.rzsp+this.handleHalfDim;if(this.range)b=Math.abs(this.maxH.rzsp-this.minH.rzsp),a=d;else if(null!==this.options.showSelectionBarFromValue){var e=this.options.showSelectionBarFromValue,f=this.valueToPosition(e),g=this.options.rightToLeft?this.lowValue<=e:this.lowValue>e;g?(b=this.minH.rzsp-f,a=f+this.handleHalfDim):(b=f-this.minH.rzsp,a=this.minH.rzsp+this.handleHalfDim)}else c?(b=Math.abs(this.maxPos-this.minH.rzsp)+this.handleHalfDim,a=this.minH.rzsp+this.handleHalfDim):(b=Math.abs(this.maxH.rzsp-this.minH.rzsp)+this.handleHalfDim,a=0);if(this.setDimension(this.selBar,b),this.setPosition(this.selBar,a),this.options.getSelectionBarColor){var h=this.getSelectionBarColor();this.scope.barStyle={backgroundColor:h}}else if(this.options.selectionBarGradient){var i=null!==this.options.showSelectionBarFromValue?this.valueToPosition(this.options.showSelectionBarFromValue):0,j=i-a>0^c,k=this.options.vertical?j?"bottom":"top":j?"left":"right";this.scope.barStyle={backgroundImage:"linear-gradient(to "+k+", "+this.options.selectionBarGradient.from+" 0%,"+this.options.selectionBarGradient.to+" 100%)"},this.options.vertical?(this.scope.barStyle.backgroundPosition="center "+(i+b+a+(j?-this.handleHalfDim:0))+"px",this.scope.barStyle.backgroundSize="100% "+(this.barDimension-this.handleHalfDim)+"px"):(this.scope.barStyle.backgroundPosition=i-a+(j?this.handleHalfDim:0)+"px center",this.scope.barStyle.backgroundSize=this.barDimension-this.handleHalfDim+"px 100%")}},getSelectionBarColor:function(){return this.range?this.options.getSelectionBarColor(this.scope.rzSliderModel,this.scope.rzSliderHigh):this.options.getSelectionBarColor(this.scope.rzSliderModel)},getPointerColor:function(a){return"max"===a?this.options.getPointerColor(this.scope.rzSliderHigh,a):this.options.getPointerColor(this.scope.rzSliderModel,a)},getTickColor:function(a){return this.options.getTickColor(a)},updateCmbLabel:function(){if(this.options.rightToLeft?this.minLab.rzsp-this.minLab.rzsd-10<=this.maxLab.rzsp:this.minLab.rzsp+this.minLab.rzsd+10>=this.maxLab.rzsp){var b=this.getDisplayValue(this.lowValue,"model"),c=this.getDisplayValue(this.highValue,"high"),d="";d=this.options.mergeRangeLabelsIfSame&&b===c?b:this.options.rightToLeft?c+" - "+b:b+" - "+c,this.translateFn(d,this.cmbLab,"cmb",!1);var e=this.options.boundPointerLabels?Math.min(Math.max(this.selBar.rzsp+this.selBar.rzsd/2-this.cmbLab.rzsd/2,0),this.barDimension-this.cmbLab.rzsd):this.selBar.rzsp+this.selBar.rzsd/2-this.cmbLab.rzsd/2;this.setPosition(this.cmbLab,e),this.cmbLabelShown=!0,this.hideEl(this.minLab),this.hideEl(this.maxLab),this.showEl(this.cmbLab)}else this.cmbLabelShown=!1,this.showEl(this.maxLab),this.showEl(this.minLab),this.hideEl(this.cmbLab);this.options.autoHideLimitLabels&&this.shFloorCeil()},getDisplayValue:function(a,b){return this.options.stepsArray&&!this.options.bindIndexForStepsArray&&(a=this.getStepValue(a)),this.customTrFn(a,this.options.id,b)},roundStep:function(a,b){var c=b?b:this.step,d=parseFloat((a-this.minValue)/c).toPrecision(12);return d=Math.round(+d)*c,+(this.minValue+d).toFixed(this.precision)},hideEl:function(a){return a.css({visibility:"hidden"})},showEl:function(a){return a.rzAlwaysHide?a:a.css({visibility:"visible"})},setPosition:function(a,b){a.rzsp=b;var c={};return c[this.positionProperty]=Math.round(b)+"px",a.css(c),b},getDimension:function(a){var b=a[0].getBoundingClientRect();return this.options.vertical?a.rzsd=(b.bottom-b.top)*this.options.scale:a.rzsd=(b.right-b.left)*this.options.scale,a.rzsd},setDimension:function(a,b){a.rzsd=b;var c={};return c[this.dimensionProperty]=Math.round(b)+"px",a.css(c),b},sanitizeValue:function(a){return Math.min(Math.max(a,this.minValue),this.maxValue)},valueToPosition:function(a){var b=this.linearValueToPosition;this.options.customValueToPosition?b=this.options.customValueToPosition:this.options.logScale&&(b=this.logValueToPosition),a=this.sanitizeValue(a);var c=b(a,this.minValue,this.maxValue)||0;return this.options.rightToLeft&&(c=1-c),c*this.maxPos},linearValueToPosition:function(a,b,c){return(a-b)/(c-b)},logValueToPosition:function(a,b,c){return a=Math.log(a),b=Math.log(b),c=Math.log(c),(a-b)/(c-b)},positionToValue:function(a){var b=a/this.maxPos;this.options.rightToLeft&&(b=1-b);var c=this.linearPositionToValue;return this.options.customPositionToValue?c=this.options.customPositionToValue:this.options.logScale&&(c=this.logPositionToValue),c(b,this.minValue,this.maxValue)||0},linearPositionToValue:function(a,b,c){return a*(c-b)+b},logPositionToValue:function(a,b,c){b=Math.log(b),c=Math.log(c);var d=a*(c-b)+b;return Math.exp(d)},getEventXY:function(a){var b=this.options.vertical?"clientY":"clientX";return void 0!==a[b]?a[b]:void 0===a.originalEvent?a.touches[0][b]:a.originalEvent.touches[0][b]},getEventPosition:function(a){var b=this.sliderElem.rzsp;return(this.options.vertical?-this.getEventXY(a)+b:this.getEventXY(a)-b)*this.options.scale-this.handleHalfDim},getEventNames:function(a){var b={moveEvent:"",endEvent:""};return a.touches||void 0!==a.originalEvent&&a.originalEvent.touches?(b.moveEvent="touchmove",b.endEvent="touchend"):(b.moveEvent="mousemove",b.endEvent="mouseup"),b},getNearestHandle:function(a){if(!this.range)return this.minH;var b=this.getEventPosition(a),c=Math.abs(b-this.minH.rzsp),d=Math.abs(b-this.maxH.rzsp);return d>c?this.minH:c>d?this.maxH:this.options.rightToLeft?b>this.minH.rzsp?this.minH:this.maxH:b<this.minH.rzsp?this.minH:this.maxH},focusElement:function(a){a[0].focus()},bindEvents:function(){var b,c,d;this.options.draggableRange?(b="rzSliderDrag",c=this.onDragStart,d=this.onDragMove):(b="lowValue",c=this.onStart,d=this.onMove),this.options.onlyBindHandles||(this.selBar.on("mousedown",a.bind(this,c,null,b)),this.selBar.on("mousedown",a.bind(this,d,this.selBar))),this.options.draggableRangeOnly?(this.minH.on("mousedown",a.bind(this,c,null,b)),this.maxH.on("mousedown",a.bind(this,c,null,b))):(this.minH.on("mousedown",a.bind(this,this.onStart,this.minH,"lowValue")),this.range&&this.maxH.on("mousedown",a.bind(this,this.onStart,this.maxH,"highValue")),this.options.onlyBindHandles||(this.fullBar.on("mousedown",a.bind(this,this.onStart,null,null)),this.fullBar.on("mousedown",a.bind(this,this.onMove,this.fullBar)),this.ticks.on("mousedown",a.bind(this,this.onStart,null,null)),this.ticks.on("mousedown",a.bind(this,this.onTickClick,this.ticks)))),this.options.onlyBindHandles||(this.selBar.on("touchstart",a.bind(this,c,null,b)),this.selBar.on("touchstart",a.bind(this,d,this.selBar))),this.options.draggableRangeOnly?(this.minH.on("touchstart",a.bind(this,c,null,b)),this.maxH.on("touchstart",a.bind(this,c,null,b))):(this.minH.on("touchstart",a.bind(this,this.onStart,this.minH,"lowValue")),this.range&&this.maxH.on("touchstart",a.bind(this,this.onStart,this.maxH,"highValue")),this.options.onlyBindHandles||(this.fullBar.on("touchstart",a.bind(this,this.onStart,null,null)),this.fullBar.on("touchstart",a.bind(this,this.onMove,this.fullBar)),this.ticks.on("touchstart",a.bind(this,this.onStart,null,null)),this.ticks.on("touchstart",a.bind(this,this.onTickClick,this.ticks)))),this.options.keyboardSupport&&(this.minH.on("focus",a.bind(this,this.onPointerFocus,this.minH,"lowValue")),this.range&&this.maxH.on("focus",a.bind(this,this.onPointerFocus,this.maxH,"highValue")))},unbindEvents:function(){this.minH.off(),this.maxH.off(),this.fullBar.off(),this.selBar.off(),this.ticks.off()},onStart:function(b,d,e){var f,g,h=this.getEventNames(e);e.stopPropagation(),e.preventDefault(),this.calcViewDimensions(),b?this.tracking=d:(b=this.getNearestHandle(e),this.tracking=b===this.minH?"lowValue":"highValue"),b.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(b),f=a.bind(this,this.dragging.active?this.onDragMove:this.onMove,b),g=a.bind(this,this.onEnd,f),c.on(h.moveEvent,f),c.one(h.endEvent,g),this.callOnStart()},onMove:function(b,c,d){var e,f=this.getEventPosition(c),g=this.options.rightToLeft?this.minValue:this.maxValue,h=this.options.rightToLeft?this.maxValue:this.minValue;0>=f?e=h:f>=this.maxPos?e=g:(e=this.positionToValue(f),e=d&&a.isNumber(this.options.showTicks)?this.roundStep(e,this.options.showTicks):this.roundStep(e)),this.positionTrackingHandle(e)},onEnd:function(a,b){var d=this.getEventNames(b).moveEvent;this.options.keyboardSupport||(this.minH.removeClass("rz-active"),this.maxH.removeClass("rz-active"),this.tracking=""),this.dragging.active=!1,c.off(d,a),this.callOnEnd()},onTickClick:function(a,b){this.onMove(a,b,!0)},onPointerFocus:function(b,c){this.tracking=c,b.one("blur",a.bind(this,this.onPointerBlur,b)),b.on("keydown",a.bind(this,this.onKeyboardEvent)),b.on("keyup",a.bind(this,this.onKeyUp)),this.firstKeyDown=!0,b.addClass("rz-active"),this.currentFocusElement={pointer:b,ref:c}},onKeyUp:function(){this.firstKeyDown=!0,this.callOnEnd()},onPointerBlur:function(a){a.off("keydown"),a.off("keyup"),this.tracking="",a.removeClass("rz-active"),this.currentFocusElement=null},getKeyActions:function(a){var b=a+this.step,c=a-this.step,d=a+this.valueRange/10,e=a-this.valueRange/10,f={UP:b,DOWN:c,LEFT:c,RIGHT:b,PAGEUP:d,PAGEDOWN:e,HOME:this.minValue,END:this.maxValue};return this.options.rightToLeft&&(f.LEFT=b,f.RIGHT=c,this.options.vertical&&(f.UP=c,f.DOWN=b)),f},onKeyboardEvent:function(a){var c=this[this.tracking],d=a.keyCode||a.which,e={38:"UP",40:"DOWN",37:"LEFT",39:"RIGHT",33:"PAGEUP",34:"PAGEDOWN",36:"HOME",35:"END"},f=this.getKeyActions(c),g=e[d],h=f[g];if(null!=h&&""!==this.tracking){a.preventDefault(),this.firstKeyDown&&(this.firstKeyDown=!1,this.callOnStart());var i=this;b(function(){var a=i.roundStep(i.sanitizeValue(h));if(i.options.draggableRangeOnly){var b,c,d=i.highValue-i.lowValue;"lowValue"===i.tracking?(b=a,(c=a+d)>i.maxValue&&(c=i.maxValue,b=c-d)):(c=a,(b=a-d)<i.minValue&&(b=i.minValue,c=b+d)),i.positionTrackingBar(b,c)}else i.positionTrackingHandle(a)})}},onDragStart:function(a,b,c){var d=this.getEventPosition(c);this.dragging={active:!0,value:this.positionToValue(d),difference:this.highValue-this.lowValue,lowLimit:this.options.rightToLeft?this.minH.rzsp-d:d-this.minH.rzsp,highLimit:this.options.rightToLeft?d-this.maxH.rzsp:this.maxH.rzsp-d},this.onStart(a,b,c)},getValue:function(a,b,c,d){var e=this.options.rightToLeft,f=null;return f="min"===a?c?d?e?this.minValue:this.maxValue-this.dragging.difference:e?this.maxValue-this.dragging.difference:this.minValue:e?this.positionToValue(b+this.dragging.lowLimit):this.positionToValue(b-this.dragging.lowLimit):c?d?e?this.minValue+this.dragging.difference:this.maxValue:e?this.maxValue:this.minValue+this.dragging.difference:e?this.positionToValue(b+this.dragging.lowLimit)+this.dragging.difference:this.positionToValue(b-this.dragging.lowLimit)+this.dragging.difference,this.roundStep(f)},onDragMove:function(a,b){var c,d,e,f,g,h,i,j,k=this.getEventPosition(b);if(this.options.rightToLeft?(e=this.dragging.lowLimit,f=this.dragging.highLimit,i=this.maxH,j=this.minH):(e=this.dragging.highLimit,f=this.dragging.lowLimit,i=this.minH,j=this.maxH),g=f>=k,h=k>=this.maxPos-e,g){if(0===i.rzsp)return;c=this.getValue("min",k,!0,!1),d=this.getValue("max",k,!0,!1)}else if(h){if(j.rzsp===this.maxPos)return;d=this.getValue("max",k,!0,!0),c=this.getValue("min",k,!0,!0)}else c=this.getValue("min",k,!1),d=this.getValue("max",k,!1);this.positionTrackingBar(c,d)},positionTrackingBar:function(a,b){null!=this.options.minLimit&&a<this.options.minLimit&&(a=this.options.minLimit,b=a+this.dragging.difference),null!=this.options.maxLimit&&b>this.options.maxLimit&&(b=this.options.maxLimit,a=b-this.dragging.difference),this.lowValue=a,this.highValue=b,this.applyLowValue(),this.range&&this.applyHighValue(),this.applyModel(!0),this.updateHandles("lowValue",this.valueToPosition(a)),this.updateHandles("highValue",this.valueToPosition(b))},positionTrackingHandle:function(a){var b=!1;a=this.applyMinMaxLimit(a),this.range&&(this.options.pushRange?(a=this.applyPushRange(a),b=!0):(this.options.noSwitching&&("lowValue"===this.tracking&&a>this.highValue?a=this.applyMinMaxRange(this.highValue):"highValue"===this.tracking&&a<this.lowValue&&(a=this.applyMinMaxRange(this.lowValue))),a=this.applyMinMaxRange(a),"lowValue"===this.tracking&&a>this.highValue?(this.lowValue=this.highValue,this.applyLowValue(),this.applyModel(),this.updateHandles(this.tracking,this.maxH.rzsp),this.updateAriaAttributes(),this.tracking="highValue",this.minH.removeClass("rz-active"),this.maxH.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(this.maxH),b=!0):"highValue"===this.tracking&&a<this.lowValue&&(this.highValue=this.lowValue,this.applyHighValue(),this.applyModel(),this.updateHandles(this.tracking,this.minH.rzsp),this.updateAriaAttributes(),this.tracking="lowValue",this.maxH.removeClass("rz-active"),this.minH.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(this.minH),b=!0))),this[this.tracking]!==a&&(this[this.tracking]=a,"lowValue"===this.tracking?this.applyLowValue():this.applyHighValue(),this.applyModel(),this.updateHandles(this.tracking,this.valueToPosition(a)),this.updateAriaAttributes(),b=!0),b&&this.applyModel(!0)},applyMinMaxLimit:function(a){return null!=this.options.minLimit&&a<this.options.minLimit?this.options.minLimit:null!=this.options.maxLimit&&a>this.options.maxLimit?this.options.maxLimit:a},applyMinMaxRange:function(a){var b="lowValue"===this.tracking?this.highValue:this.lowValue,c=Math.abs(a-b);return null!=this.options.minRange&&c<this.options.minRange?"lowValue"===this.tracking?this.highValue-this.options.minRange:this.lowValue+this.options.minRange:null!=this.options.maxRange&&c>this.options.maxRange?"lowValue"===this.tracking?this.highValue-this.options.maxRange:this.lowValue+this.options.maxRange:a},applyPushRange:function(a){var b="lowValue"===this.tracking?this.highValue-a:a-this.lowValue,c=null!==this.options.minRange?this.options.minRange:this.options.step,d=this.options.maxRange;return c>b?("lowValue"===this.tracking?(this.highValue=Math.min(a+c,this.maxValue),a=this.highValue-c,this.applyHighValue(),this.updateHandles("highValue",this.valueToPosition(this.highValue))):(this.lowValue=Math.max(a-c,this.minValue),a=this.lowValue+c,this.applyLowValue(),this.updateHandles("lowValue",this.valueToPosition(this.lowValue))),this.updateAriaAttributes()):null!==d&&b>d&&("lowValue"===this.tracking?(this.highValue=a+d,this.applyHighValue(),this.updateHandles("highValue",this.valueToPosition(this.highValue))):(this.lowValue=a-d,this.applyLowValue(),this.updateHandles("lowValue",this.valueToPosition(this.lowValue))),this.updateAriaAttributes()),a},applyModel:function(a){this.internalChange=!0,this.scope.$apply(),a&&this.callOnChange(),this.internalChange=!1},callOnStart:function(){if(this.options.onStart){var a=this,b="lowValue"===this.tracking?"min":"max";this.scope.$evalAsync(function(){a.options.onStart(a.options.id,a.scope.rzSliderModel,a.scope.rzSliderHigh,b)})}},callOnChange:function(){if(this.options.onChange){var a=this,b="lowValue"===this.tracking?"min":"max";this.scope.$evalAsync(function(){a.options.onChange(a.options.id,a.scope.rzSliderModel,a.scope.rzSliderHigh,b)})}},callOnEnd:function(){if(this.options.onEnd){var a=this,b="lowValue"===this.tracking?"min":"max";this.scope.$evalAsync(function(){a.options.onEnd(a.options.id,a.scope.rzSliderModel,a.scope.rzSliderHigh,b)})}this.scope.$emit("slideEnded")}},h}]).directive("rzslider",["RzSlider",function(a){return{restrict:"AE",replace:!0,scope:{rzSliderModel:"=?",rzSliderHigh:"=?",rzSliderOptions:"&?",rzSliderTplUrl:"@"},templateUrl:function(a,b){return b.rzSliderTplUrl||"rzSliderTpl.html"},link:function(b,c){b.slider=new a(b,c)}}}]);return b.run(["$templateCache",function(a){a.put("rzSliderTpl.html",'<div class=rzslider><span class=rz-bar-wrapper><span class=rz-bar></span></span> <span class=rz-bar-wrapper><span class="rz-bar rz-selection" ng-style=barStyle></span></span> <span class="rz-pointer rz-pointer-min" ng-style=minPointerStyle></span> <span class="rz-pointer rz-pointer-max" ng-style=maxPointerStyle></span> <span class="rz-bubble rz-limit rz-floor"></span> <span class="rz-bubble rz-limit rz-ceil"></span> <span class=rz-bubble></span> <span class=rz-bubble></span> <span class=rz-bubble></span><ul ng-show=showTicks class=rz-ticks><li ng-repeat="t in ticks track by $index" class=rz-tick ng-class="{\'rz-selected\': t.selected}" ng-style=t.style ng-attr-uib-tooltip="{{ t.tooltip }}" ng-attr-tooltip-placement={{t.tooltipPlacement}} ng-attr-tooltip-append-to-body="{{ t.tooltip ? true : undefined}}"><span ng-if="t.value != null" class=rz-tick-value ng-attr-uib-tooltip="{{ t.valueTooltip }}" ng-attr-tooltip-placement={{t.valueTooltipPlacement}}>{{ t.value }}</span> <span ng-if="t.legend != null" class=rz-tick-legend>{{ t.legend }}</span></li></ul></div>')}]),b.name}),function(){!function(){"use strict";function createCache(){function cache(key,value){return keys.push(key+" ")>Expr.cacheLength&&delete cache[keys.shift()],cache[key+" "]=value}var keys=[];return cache}function markFunction(fn){return fn[expando]=!0,fn}function siblingCheck(a,b){var cur=b&&a,diff=cur&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||MAX_NEGATIVE)-(~a.sourceIndex||MAX_NEGATIVE);if(diff)return diff;if(cur)for(;cur=cur.nextSibling;)if(cur===b)return-1;return a?1:-1}function createPositionalPseudo(fn){return markFunction(function(argument){return argument=+argument,markFunction(function(seed,matches){for(var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;i--;)seed[j=matchIndexes[i]]&&(seed[j]=!(matches[j]=seed[j]))})})}function testContext(context){return context&&typeof context.getElementsByTagName!==strundefined&&context}function setFilters(){}function toSelector(tokens){for(var i=0,len=tokens.length,selector="";i<len;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&"parentNode"===dir,doneName=done++;return combinator.first?function(elem,context,xml){for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)return matcher(elem,context,xml)}:function(elem,context,xml){var oldCache,outerCache,newCache=[dirruns,doneName];if(xml){for(;elem=elem[dir];)if((1===elem.nodeType||checkNonElements)&&matcher(elem,context,xml))return!0}else for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements){if(outerCache=elem[expando]||(elem[expando]={}),(oldCache=outerCache[dir])&&oldCache[0]===dirruns&&oldCache[1]===doneName)return newCache[2]=oldCache[2];if(outerCache[dir]=newCache,newCache[2]=matcher(elem,context,xml))return!0}}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){for(var i=matchers.length;i--;)if(!matchers[i](elem,context,xml))return!1;return!0}:matchers[0]}function multipleContexts(selector,contexts,results){for(var i=0,len=contexts.length;i<len;i++)Sizzle(selector,contexts[i],results);return results}function condense(unmatched,map,filter,context,xml){for(var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=null!=map;i<len;i++)(elem=unmatched[i])&&(filter&&!filter(elem,context,xml)||(newUnmatched.push(elem),mapped&&map.push(i)));return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){return postFilter&&!postFilter[expando]&&(postFilter=setMatcher(postFilter)),postFinder&&!postFinder[expando]&&(postFinder=setMatcher(postFinder,postSelector)),markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=!preFilter||!seed&&selector?elems:condense(elems,preMap,preFilter,context,xml),matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher&&matcher(matcherIn,matcherOut,context,xml),postFilter)for(temp=condense(matcherOut,postMap),postFilter(temp,[],context,xml),i=temp.length;i--;)(elem=temp[i])&&(matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem));if(seed){if(postFinder||preFilter){if(postFinder){for(temp=[],i=matcherOut.length;i--;)(elem=matcherOut[i])&&temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}for(i=matcherOut.length;i--;)(elem=matcherOut[i])&&(temp=postFinder?indexOf$1.call(seed,elem):preMap[i])>-1&&(seed[temp]=!(results[temp]=elem))}}else matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut),postFinder?postFinder(null,results,matcherOut,xml):push$1.apply(results,matcherOut)})}function matcherFromTokens(tokens){for(var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,!0),matchAnyContext=addCombinator(function(elem){return indexOf$1.call(checkContext,elem)>-1},implicitRelative,!0),matchers=[function(elem,context,xml){return!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml))}];i<len;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{if(matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches),matcher[expando]){for(j=++i;j<len&&!Expr.relative[tokens[j].type];j++);return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:" "===tokens[i-2].type?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",outermost),dirrunsUnique=dirruns+=null==contextBackup?1:Math.random()||.1,len=elems.length;for(outermost&&(outermostContext=context!==document$1&&context);i!==len&&null!=(elem=elems[i]);i++){if(byElement&&elem){for(j=0;matcher=elementMatchers[j++];)if(matcher(elem,context,xml)){results.push(elem);break}outermost&&(dirruns=dirrunsUnique)}bySet&&((elem=!matcher&&elem)&&matchedCount--,seed&&unmatched.push(elem))}if(matchedCount+=i,bySet&&i!==matchedCount){for(j=0;matcher=setMatchers[j++];)matcher(unmatched,setMatched,context,xml);if(seed){if(matchedCount>0)for(;i--;)unmatched[i]||setMatched[i]||(setMatched[i]=pop.call(results));setMatched=condense(setMatched)}push$1.apply(results,setMatched),outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1&&Sizzle.uniqueSort(results)}return outermost&&(dirruns=dirrunsUnique,outermostContext=contextBackup),unmatched};return bySet?markFunction(superMatcher):superMatcher}function DeviceType(os,browser,userAgent){var isiPad=os.isiOS()&&/ipad/i.test(userAgent)===!0,isiPhone=os.isiOS()&&!isiPad,isAndroid3=os.isAndroid()&&3===os.version.major,isAndroid4=os.isAndroid()&&4===os.version.major,isTablet=isiPad||isAndroid3||isAndroid4&&/mobile/i.test(userAgent)===!0,isTouch=os.isiOS()||os.isAndroid(),isPhone=isTouch&&!isTablet,iOSwebview=browser.isSafari()&&os.isiOS()&&/safari/i.test(userAgent)===!1;return{isiPad:$_60qu7r6jducwn73.constant(isiPad),isiPhone:$_60qu7r6jducwn73.constant(isiPhone),isTablet:$_60qu7r6jducwn73.constant(isTablet),isPhone:$_60qu7r6jducwn73.constant(isPhone),isTouch:$_60qu7r6jducwn73.constant(isTouch),isAndroid:os.isAndroid,isiOS:os.isiOS,isWebView:$_60qu7r6jducwn73.constant(iOSwebview)}}function Immutable(){var fields=arguments;return function(){for(var values=new Array(arguments.length),i=0;i<values.length;i++)values[i]=arguments[i];if(fields.length!==values.length)throw new Error('Wrong number of arguments to struct. Expected "['+fields.length+']", got '+values.length+" arguments");var struct={};return $_2dw1bj4jducwn6g.each(fields,function(name,i){struct[name]=$_60qu7r6jducwn73.constant(values[i])}),struct}}function MixedBag(required,optional){var everything=required.concat(optional);if(0===everything.length)throw new Error("You must specify at least one required or optional field.");return $_tfxv91bjducwnib.validateStrArr("required",required),$_tfxv91bjducwnib.validateStrArr("optional",optional),$_tfxv91bjducwnib.checkDupes(everything),function(obj){var keys=$_84vepq13jducwnh9.keys(obj);$_2dw1bj4jducwn6g.forall(required,function(req){return $_2dw1bj4jducwn6g.contains(keys,req)})||$_tfxv91bjducwnib.reqMessage(required,keys);var unsupported=$_2dw1bj4jducwn6g.filter(keys,function(key){return!$_2dw1bj4jducwn6g.contains(everything,key)});unsupported.length>0&&$_tfxv91bjducwnib.unsuppMessage(unsupported);var r={};return $_2dw1bj4jducwn6g.each(required,function(req){r[req]=$_60qu7r6jducwn73.constant(obj[req])}),$_2dw1bj4jducwn6g.each(optional,function(opt){r[opt]=$_60qu7r6jducwn73.constant(Object.prototype.hasOwnProperty.call(obj,opt)?Option.some(obj[opt]):Option.none())}),r}}function StyleSheetLoader(document,settings){var maxLoadTime,idCount=0,loadedStates={};settings=settings||{},maxLoadTime=settings.maxLoadTime||5e3;var appendToHead=function(node){document.getElementsByTagName("head")[0].appendChild(node)},load=function(url,loadedCallback,errorCallback){var link,style,startTime,state,passed=function(){for(var callbacks=state.passed,i=callbacks.length;i--;)callbacks[i]();state.status=2,state.passed=[],state.failed=[]},failed=function(){for(var callbacks=state.failed,i=callbacks.length;i--;)callbacks[i]();state.status=3,state.passed=[],state.failed=[]},wait=function(testCallback,waitCallback){testCallback()||((new Date).getTime()-startTime<maxLoadTime?$_83mf8ygjducwnbc.setTimeout(waitCallback):failed())},waitForWebKitLinkLoaded=function(){wait(function(){for(var styleSheet,owner,styleSheets=document.styleSheets,i=styleSheets.length;i--;)if(styleSheet=styleSheets[i],(owner=styleSheet.ownerNode?styleSheet.ownerNode:styleSheet.owningElement)&&owner.id===link.id)return passed(),!0},waitForWebKitLinkLoaded)},waitForGeckoLinkLoaded=function(){wait(function(){try{var cssRules=style.sheet.cssRules;return passed(),!!cssRules}catch(ex){}},waitForGeckoLinkLoaded)};if(url=$_8i2houjjducwnd2._addCacheSuffix(url),loadedStates[url]?state=loadedStates[url]:(state={passed:[],failed:[]},loadedStates[url]=state),loadedCallback&&state.passed.push(loadedCallback),errorCallback&&state.failed.push(errorCallback),1!==state.status){if(2===state.status)return void passed();if(3===state.status)return void failed();if(state.status=1,link=document.createElement("link"),link.rel="stylesheet",link.type="text/css",link.id="u"+idCount++,link.async=!1,link.defer=!1,startTime=(new Date).getTime(),"onload"in link&&!function(){var webKitChunks=navigator.userAgent.match(/WebKit\/(\d*)/);return!!(webKitChunks&&parseInt(webKitChunks[1],10)<536)}())link.onload=waitForWebKitLinkLoaded,link.onerror=failed;else{if(navigator.userAgent.indexOf("Firefox")>0)return style=document.createElement("style"),style.textContent='@import "'+url+'"',waitForGeckoLinkLoaded(),void appendToHead(style);waitForWebKitLinkLoaded()}appendToHead(link),link.href=url}},loadF=function(url){return Future.nu(function(resolve){load(url,$_60qu7r6jducwn73.compose(resolve,$_60qu7r6jducwn73.constant(Result.value(url))),$_60qu7r6jducwn73.compose(resolve,$_60qu7r6jducwn73.constant(Result.error(url))))})},unbox=function(result){return result.fold($_60qu7r6jducwn73.identity,$_60qu7r6jducwn73.identity)},loadAll=function(urls,success,failure){$_2m9thz1kjducwnj6.par($_2dw1bj4jducwn6g.map(urls,loadF)).get(function(result){var parts=$_2dw1bj4jducwn6g.partition(result,function(r){return r.isValue()});parts.fail.length>0?failure(parts.fail.map(unbox)):success(parts.pass.map(unbox))})};return{load:load,loadAll:loadAll}}function TreeWalker(startNode,rootNode){var node=startNode,findSibling=function(node,startName,siblingName,shallow){var sibling,parent;if(node){if(!shallow&&node[startName])return node[startName];if(node!==rootNode){if(sibling=node[siblingName])return sibling;for(parent=node.parentNode;parent&&parent!==rootNode;parent=parent.parentNode)if(sibling=parent[siblingName])return sibling}}},findPreviousNode=function(node,startName,siblingName,shallow){var sibling,parent,child;if(node){if(sibling=node[siblingName],rootNode&&sibling===rootNode)return;if(sibling){if(!shallow)for(child=sibling[startName];child;child=child[startName])if(!child[startName])return child;return sibling}if((parent=node.parentNode)&&parent!==rootNode)return parent}};this.current=function(){return node},this.next=function(shallow){return node=findSibling(node,"firstChild","nextSibling",shallow)},this.prev=function(shallow){return node=findSibling(node,"lastChild","previousSibling",shallow)},this.prev2=function(shallow){return node=findPreviousNode(node,"lastChild","previousSibling",shallow)}}function Schema(settings){
var validStyles,invalidStyles,schemaItems,whiteSpaceElementsMap,selfClosingElementsMap,shortEndedElementsMap,boolAttrMap,validClasses,blockElementsMap,nonEmptyElementsMap,moveCaretBeforeOnEnterElementsMap,textBlockElementsMap,textInlineElementsMap,elements={},children={},patternElements=[],customElementsMap={},specialElements={},createLookupTable=function(option,defaultValue,extendWith){var value=settings[option];return value?value=makeMap$2(value,/[, ]/,makeMap$2(value.toUpperCase(),/[, ]/)):(value=mapCache[option])||(value=makeMap$2(defaultValue," ",makeMap$2(defaultValue.toUpperCase()," ")),value=extend$1(value,extendWith),mapCache[option]=value),value};settings=settings||{},schemaItems=compileSchema(settings.schema),settings.verify_html===!1&&(settings.valid_elements="*[*]"),validStyles=compileElementMap(settings.valid_styles),invalidStyles=compileElementMap(settings.invalid_styles,"map"),validClasses=compileElementMap(settings.valid_classes,"map"),whiteSpaceElementsMap=createLookupTable("whitespace_elements","pre script noscript style textarea video audio iframe object code"),selfClosingElementsMap=createLookupTable("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),shortEndedElementsMap=createLookupTable("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),boolAttrMap=createLookupTable("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),nonEmptyElementsMap=createLookupTable("non_empty_elements","td th iframe video audio object script pre code",shortEndedElementsMap),moveCaretBeforeOnEnterElementsMap=createLookupTable("move_caret_before_on_enter_elements","table",nonEmptyElementsMap),textBlockElementsMap=createLookupTable("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),blockElementsMap=createLookupTable("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption",textBlockElementsMap),textInlineElementsMap=createLookupTable("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),each$4((settings.special||"script noscript noframes noembed title style textarea xmp").split(" "),function(name){specialElements[name]=new RegExp("</"+name+"[^>]*>","gi")});var patternToRegExp=function(str){return new RegExp("^"+str.replace(/([?+*])/g,".$1")+"$")},addValidElements=function(validElements){var ei,el,ai,al,matches,element,attr,attrData,elementName,attrName,attrType,attributes,attributesOrder,prefix,outputName,globalAttributes,globalAttributesOrder,key,value,elementRuleRegExp=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,attrRuleRegExp=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,hasPatternsRegExp=/[*?+]/;if(validElements)for(validElements=split(validElements,","),elements["@"]&&(globalAttributes=elements["@"].attributes,globalAttributesOrder=elements["@"].attributesOrder),ei=0,el=validElements.length;ei<el;ei++)if(matches=elementRuleRegExp.exec(validElements[ei])){if(prefix=matches[1],elementName=matches[2],outputName=matches[3],attrData=matches[5],attributes={},attributesOrder=[],element={attributes:attributes,attributesOrder:attributesOrder},"#"===prefix&&(element.paddEmpty=!0),"-"===prefix&&(element.removeEmpty=!0),"!"===matches[4]&&(element.removeEmptyAttrs=!0),globalAttributes){for(key in globalAttributes)attributes[key]=globalAttributes[key];attributesOrder.push.apply(attributesOrder,globalAttributesOrder)}if(attrData)for(attrData=split(attrData,"|"),ai=0,al=attrData.length;ai<al;ai++)if(matches=attrRuleRegExp.exec(attrData[ai])){if(attr={},attrType=matches[1],attrName=matches[2].replace(/[\\:]:/g,":"),prefix=matches[3],value=matches[4],"!"===attrType&&(element.attributesRequired=element.attributesRequired||[],element.attributesRequired.push(attrName),attr.required=!0),"-"===attrType){delete attributes[attrName],attributesOrder.splice(inArray$1(attributesOrder,attrName),1);continue}prefix&&("="===prefix&&(element.attributesDefault=element.attributesDefault||[],element.attributesDefault.push({name:attrName,value:value}),attr.defaultValue=value),":"===prefix&&(element.attributesForced=element.attributesForced||[],element.attributesForced.push({name:attrName,value:value}),attr.forcedValue=value),"<"===prefix&&(attr.validValues=makeMap$2(value,"?"))),hasPatternsRegExp.test(attrName)?(element.attributePatterns=element.attributePatterns||[],attr.pattern=patternToRegExp(attrName),element.attributePatterns.push(attr)):(attributes[attrName]||attributesOrder.push(attrName),attributes[attrName]=attr)}globalAttributes||"@"!==elementName||(globalAttributes=attributes,globalAttributesOrder=attributesOrder),outputName&&(element.outputName=elementName,elements[outputName]=element),hasPatternsRegExp.test(elementName)?(element.pattern=patternToRegExp(elementName),patternElements.push(element)):elements[elementName]=element}},setValidElements=function(validElements){elements={},patternElements=[],addValidElements(validElements),each$4(schemaItems,function(element,name){children[name]=element.children})},addCustomElements=function(customElements){var customElementRegExp=/^(~)?(.+)$/;customElements&&(mapCache.text_block_elements=mapCache.block_elements=null,each$4(split(customElements,","),function(rule){var matches=customElementRegExp.exec(rule),inline="~"===matches[1],cloneName=inline?"span":"div",name=matches[2];if(children[name]=children[cloneName],customElementsMap[name]=cloneName,inline||(blockElementsMap[name.toUpperCase()]={},blockElementsMap[name]={}),!elements[name]){var customRule=elements[cloneName];customRule=extend$1({},customRule),delete customRule.removeEmptyAttrs,delete customRule.removeEmpty,elements[name]=customRule}each$4(children,function(element,elmName){element[cloneName]&&(children[elmName]=element=extend$1({},children[elmName]),element[name]=element[cloneName])})}))},addValidChildren=function(validChildren){var childRuleRegExp=/^([+\-]?)(\w+)\[([^\]]+)\]$/;mapCache[settings.schema]=null,validChildren&&each$4(split(validChildren,","),function(rule){var parent,prefix,matches=childRuleRegExp.exec(rule);matches&&(prefix=matches[1],parent=prefix?children[matches[2]]:children[matches[2]]={"#comment":{}},parent=children[matches[2]],each$4(split(matches[3],"|"),function(child){"-"===prefix?delete parent[child]:parent[child]={}}))})},getElementRule=function(name){var i,element=elements[name];if(element)return element;for(i=patternElements.length;i--;)if(element=patternElements[i],element.pattern.test(name))return element};settings.valid_elements?setValidElements(settings.valid_elements):(each$4(schemaItems,function(element,name){elements[name]={attributes:element.attributes,attributesOrder:element.attributesOrder},children[name]=element.children}),"html5"!==settings.schema&&each$4(split("strong/b em/i"),function(item){item=split(item,"/"),elements[item[1]].outputName=item[0]}),each$4(split("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(name){elements[name]&&(elements[name].removeEmpty=!0)}),each$4(split("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(name){elements[name].paddEmpty=!0}),each$4(split("span"),function(name){elements[name].removeEmptyAttrs=!0})),addCustomElements(settings.custom_elements),addValidChildren(settings.valid_children),addValidElements(settings.extended_valid_elements),addValidChildren("+ol[ul|ol],+ul[ul|ol]"),each$4({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(parents,item){elements[item]&&(elements[item].parentsRequired=split(parents))}),settings.invalid_elements&&each$4(explode$1(settings.invalid_elements),function(item){elements[item]&&delete elements[item]}),getElementRule("span")||addValidElements("span[!data-mce-type|*]");var getValidStyles=function(){return validStyles},getInvalidStyles=function(){return invalidStyles},getValidClasses=function(){return validClasses},getBoolAttrs=function(){return boolAttrMap},getBlockElements=function(){return blockElementsMap},getTextBlockElements=function(){return textBlockElementsMap},getTextInlineElements=function(){return textInlineElementsMap},getShortEndedElements=function(){return shortEndedElementsMap},getSelfClosingElements=function(){return selfClosingElementsMap},getNonEmptyElements=function(){return nonEmptyElementsMap},getMoveCaretBeforeOnEnterElements=function(){return moveCaretBeforeOnEnterElementsMap},getWhiteSpaceElements=function(){return whiteSpaceElementsMap},getSpecialElements=function(){return specialElements},isValidChild=function(name,child){var parent=children[name.toLowerCase()];return!(!parent||!parent[child.toLowerCase()])},isValid=function(name,attr){var attrPatterns,i,rule=getElementRule(name);if(rule){if(!attr)return!0;if(rule.attributes[attr])return!0;if(attrPatterns=rule.attributePatterns)for(i=attrPatterns.length;i--;)if(attrPatterns[i].pattern.test(name))return!0}return!1},getCustomElements=function(){return customElementsMap};return{children:children,elements:elements,getValidStyles:getValidStyles,getValidClasses:getValidClasses,getBlockElements:getBlockElements,getInvalidStyles:getInvalidStyles,getShortEndedElements:getShortEndedElements,getTextBlockElements:getTextBlockElements,getTextInlineElements:getTextInlineElements,getBoolAttrs:getBoolAttrs,getElementRule:getElementRule,getSelfClosingElements:getSelfClosingElements,getNonEmptyElements:getNonEmptyElements,getMoveCaretBeforeOnEnterElements:getMoveCaretBeforeOnEnterElements,getWhiteSpaceElements:getWhiteSpaceElements,getSpecialElements:getSpecialElements,isValidChild:isValidChild,isValid:isValid,getCustomElements:getCustomElements,addValidElements:addValidElements,setValidElements:setValidElements,addCustomElements:addCustomElements,addValidChildren:addValidChildren}}function Styles(settings,schema){var i,encodingItems,validStyles,invalidStyles,rgbRegExp=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,styleRegExp=/\s*([^:]+):\s*([^;]+);?/g,encodingLookup={};for(settings=settings||{},schema&&(validStyles=schema.getValidStyles(),invalidStyles=schema.getInvalidStyles()),encodingItems="\\\" \\' \\; \\: ; : \ufeff".split(" "),i=0;i<encodingItems.length;i++)encodingLookup[encodingItems[i]]="\ufeff"+i,encodingLookup["\ufeff"+i]=encodingItems[i];return{toHex:function(color){return color.replace(rgbRegExp,toHex)},parse:function(css){var matches,name,value,isEncoded,styles={},urlConverter=settings.url_converter,urlConverterScope=settings.url_converter_scope||this,compress=function(prefix,suffix,noJoin){var top,right,bottom,left;if((top=styles[prefix+"-top"+suffix])&&(right=styles[prefix+"-right"+suffix])&&(bottom=styles[prefix+"-bottom"+suffix])&&(left=styles[prefix+"-left"+suffix])){var box=[top,right,bottom,left];for(i=box.length-1;i--&&box[i]===box[i+1];);i>-1&&noJoin||(styles[prefix+suffix]=i===-1?box[0]:box.join(" "),delete styles[prefix+"-top"+suffix],delete styles[prefix+"-right"+suffix],delete styles[prefix+"-bottom"+suffix],delete styles[prefix+"-left"+suffix])}},canCompress=function(key){var i,value=styles[key];if(value){for(value=value.split(" "),i=value.length;i--;)if(value[i]!==value[0])return!1;return styles[key]=value[0],!0}},encode=function(str){return isEncoded=!0,encodingLookup[str]},decode=function(str,keepSlashes){return isEncoded&&(str=str.replace(/\uFEFF[0-9]/g,function(str){return encodingLookup[str]})),keepSlashes||(str=str.replace(/\\([\'\";:])/g,"$1")),str},decodeSingleHexSequence=function(escSeq){return String.fromCharCode(parseInt(escSeq.slice(1),16))},decodeHexSequences=function(value){return value.replace(/\\[0-9a-f]+/gi,decodeSingleHexSequence)},processUrl=function(match,url,url2,url3,str,str2){if(str=str||str2)return str=decode(str),"'"+str.replace(/\'/g,"\\'")+"'";if(url=decode(url||url2||url3),!settings.allow_script_urls){var scriptUrl=url.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(scriptUrl))return"";if(!settings.allow_svg_data_urls&&/^data:image\/svg/i.test(scriptUrl))return""}return urlConverter&&(url=urlConverter.call(urlConverterScope,url,"style")),"url('"+url.replace(/\'/g,"\\'")+"')"};if(css){for(css=css.replace(/[\u0000-\u001F]/g,""),css=css.replace(/\\[\"\';:\uFEFF]/g,encode).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(str){return str.replace(/[;:]/g,encode)});matches=styleRegExp.exec(css);)if(styleRegExp.lastIndex=matches.index+matches[0].length,name=matches[1].replace(/\s+$/,"").toLowerCase(),value=matches[2].replace(/\s+$/,""),name&&value){if(name=decodeHexSequences(name),value=decodeHexSequences(value),name.indexOf("\ufeff")!==-1||name.indexOf('"')!==-1)continue;if(!settings.allow_script_urls&&("behavior"===name||/expression\s*\(|\/\*|\*\//.test(value)))continue;"font-weight"===name&&"700"===value?value="bold":"color"!==name&&"background-color"!==name||(value=value.toLowerCase()),value=value.replace(rgbRegExp,toHex),value=value.replace(/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,processUrl),styles[name]=isEncoded?decode(value,!0):value}compress("border","",!0),compress("border","-width"),compress("border","-color"),compress("border","-style"),compress("padding",""),compress("margin",""),function(target,a,b,c){canCompress(a)&&canCompress(b)&&canCompress(c)&&(styles[target]=styles[a]+" "+styles[b]+" "+styles[c],delete styles[a],delete styles[b],delete styles[c])}("border","border-width","border-style","border-color"),"medium none"===styles.border&&delete styles.border,"none"===styles["border-image"]&&delete styles["border-image"]}return styles},serialize:function(styles,elementName){var name,value,css="",serializeStyles=function(name){var styleList,i,l,value;if(styleList=validStyles[name])for(i=0,l=styleList.length;i<l;i++)name=styleList[i],(value=styles[name])&&(css+=(css.length>0?" ":"")+name+": "+value+";")};if(elementName&&validStyles)serializeStyles("*"),serializeStyles(elementName);else for(name in styles)!(value=styles[name])||invalidStyles&&!function(name,elementName){var styleMap;return(!(styleMap=invalidStyles["*"])||!styleMap[name])&&(!(styleMap=invalidStyles[elementName])||!styleMap[name])}(name,elementName)||(css+=(css.length>0?" ":"")+name+": "+value+";");return css}}}function CaretPosition(container,offset,clientRects){var isAtStart=function(){return isText$4(container),0===offset},isAtEnd=function(){return isText$4(container)?offset>=container.data.length:offset>=container.childNodes.length},toRange=function(){var range;return range=createRange(container.ownerDocument),range.setStart(container,offset),range.setEnd(container,offset),range},getClientRects=function(){return clientRects||(clientRects=getCaretPositionClientRects(CaretPosition(container,offset))),clientRects},isVisible=function(){return getClientRects().length>0},isEqual$$1=function(caretPosition){return caretPosition&&container===caretPosition.container()&&offset===caretPosition.offset()},getNode$$1=function(before){return resolveIndex(container,before?offset-1:offset)};return{container:$_6183wb25jducwnn2.constant(container),offset:$_6183wb25jducwnn2.constant(offset),toRange:toRange,getClientRects:getClientRects,isVisible:isVisible,isAtStart:isAtStart,isAtEnd:isAtEnd,isEqual:isEqual$$1,getNode:getNode$$1}}function Writer(settings){var indent,indentBefore,indentAfter,encode,htmlOutput,html=[];return settings=settings||{},indent=settings.indent,indentBefore=makeMap$3(settings.indent_before||""),indentAfter=makeMap$3(settings.indent_after||""),encode=$_g4jbz61rjducwnjq.getEncodeFunc(settings.entity_encoding||"raw",settings.entities),htmlOutput="html"===settings.element_format,{start:function(name,attrs,empty){var i,l,attr,value;if(indent&&indentBefore[name]&&html.length>0&&(value=html[html.length-1],value.length>0&&"\n"!==value&&html.push("\n")),html.push("<",name),attrs)for(i=0,l=attrs.length;i<l;i++)attr=attrs[i],html.push(" ",attr.name,'="',encode(attr.value,!0),'"');html[html.length]=!empty||htmlOutput?">":" />",empty&&indent&&indentAfter[name]&&html.length>0&&(value=html[html.length-1],value.length>0&&"\n"!==value&&html.push("\n"))},end:function(name){var value;html.push("</",name,">"),indent&&indentAfter[name]&&html.length>0&&(value=html[html.length-1],value.length>0&&"\n"!==value&&html.push("\n"))},text:function(text,raw){text.length>0&&(html[html.length]=raw?text:encode(text))},cdata:function(text){html.push("<![CDATA[",text,"]]>")},comment:function(text){html.push("<!--",text,"-->")},pi:function(name,text){text?html.push("<?",name," ",encode(text),"?>"):html.push("<?",name,"?>"),indent&&html.push("\n")},doctype:function(text){html.push("<!DOCTYPE",text,">",indent?"\n":"")},reset:function(){html.length=0},getContent:function(){return html.join("").replace(/\n$/,"")}}}function HtmlSerializer(settings,schema){void 0===schema&&(schema=Schema());var writer=Writer(settings);return settings=settings||{},settings.validate=!("validate"in settings)||settings.validate,{serialize:function(node){var handlers,validate;validate=settings.validate,handlers={3:function(node){writer.text(node.value,node.raw)},8:function(node){writer.comment(node.value)},7:function(node){writer.pi(node.name,node.value)},10:function(node){writer.doctype(node.value)},4:function(node){writer.cdata(node.value)},11:function(node){if(node=node.firstChild)do{walk(node)}while(node=node.next)}},writer.reset();var walk=function(node){var name,isEmpty,attrs,attrName,attrValue,sortedAttrs,i,l,elementRule,handler=handlers[node.type];if(handler)handler(node);else{if(name=node.name,isEmpty=node.shortEnded,attrs=node.attributes,validate&&attrs&&attrs.length>1&&(sortedAttrs=[],sortedAttrs.map={},elementRule=schema.getElementRule(node.name))){for(i=0,l=elementRule.attributesOrder.length;i<l;i++)(attrName=elementRule.attributesOrder[i])in attrs.map&&(attrValue=attrs.map[attrName],sortedAttrs.map[attrName]=attrValue,sortedAttrs.push({name:attrName,value:attrValue}));for(i=0,l=attrs.length;i<l;i++)(attrName=attrs[i].name)in sortedAttrs.map||(attrValue=attrs.map[attrName],sortedAttrs.map[attrName]=attrValue,sortedAttrs.push({name:attrName,value:attrValue}));attrs=sortedAttrs}if(writer.start(node.name,attrs,isEmpty),!isEmpty){if(node=node.firstChild)do{walk(node)}while(node=node.next);writer.end(name)}}};return 1!==node.type||settings.inner?handlers[11](node):walk(node),writer.getContent()}}}function ClosestOrAncestor(is,ancestor,scope,a,isRoot){return is(scope,a)?Option.some(scope):$_c7y6af12jducwnh8.isFunction(isRoot)&&isRoot(scope)?Option.none():ancestor(scope,a,isRoot)}function EditorCommands(editor){var dom,selection,formatter,bookmark,commands={state:{},exec:{},value:{}},settings=editor.settings;editor.on("PreInit",function(){dom=editor.dom,selection=editor.selection,settings=editor.settings,formatter=editor.formatter});var execCommand=function(command,ui,value,args){var func,customCommand,state=!1;if(!editor.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(command)||args&&args.skip_focus?$_exyelv3zjducwnzi.restore(editor):editor.focus(),args=editor.fire("BeforeExecCommand",{command:command,ui:ui,value:value}),args.isDefaultPrevented())return!1;if(customCommand=command.toLowerCase(),func=commands.exec[customCommand])return func(customCommand,ui,value),editor.fire("ExecCommand",{command:command,ui:ui,value:value}),!0;if(each$9(editor.plugins,function(p){if(p.execCommand&&p.execCommand(command,ui,value))return editor.fire("ExecCommand",{command:command,ui:ui,value:value}),state=!0,!1}),state)return state;if(editor.theme&&editor.theme.execCommand&&editor.theme.execCommand(command,ui,value))return editor.fire("ExecCommand",{command:command,ui:ui,value:value}),!0;try{state=editor.getDoc().execCommand(command,ui,value)}catch(ex){}return!!state&&(editor.fire("ExecCommand",{command:command,ui:ui,value:value}),!0)}},queryCommandState=function(command){var func;if(!editor.quirks.isHidden()&&!editor.removed){if(command=command.toLowerCase(),func=commands.state[command])return func(command);try{return editor.getDoc().queryCommandState(command)}catch(ex){}return!1}},queryCommandValue=function(command){var func;if(!editor.quirks.isHidden()&&!editor.removed){if(command=command.toLowerCase(),func=commands.value[command])return func(command);try{return editor.getDoc().queryCommandValue(command)}catch(ex){}}},addCommands=function(commandList,type){type=type||"exec",each$9(commandList,function(callback,command){each$9(command.toLowerCase().split(","),function(command){commands[type][command]=callback})})},addCommand=function(command,callback,scope){command=command.toLowerCase(),commands.exec[command]=function(command,ui,value,args){return callback.call(scope||editor,ui,value,args)}},queryCommandSupported=function(command){if(command=command.toLowerCase(),commands.exec[command])return!0;try{return editor.getDoc().queryCommandSupported(command)}catch(ex){}return!1},addQueryStateHandler=function(command,callback,scope){command=command.toLowerCase(),commands.state[command]=function(){return callback.call(scope||editor)}},addQueryValueHandler=function(command,callback,scope){command=command.toLowerCase(),commands.value[command]=function(){return callback.call(scope||editor)}},hasCustomCommand=function(command){return command=command.toLowerCase(),!!commands.exec[command]};extend$2(this,{execCommand:execCommand,queryCommandState:queryCommandState,queryCommandValue:queryCommandValue,queryCommandSupported:queryCommandSupported,addCommands:addCommands,addCommand:addCommand,addQueryStateHandler:addQueryStateHandler,addQueryValueHandler:addQueryValueHandler,hasCustomCommand:hasCustomCommand});var execNativeCommand=function(command,ui,value){return void 0===ui&&(ui=FALSE),void 0===value&&(value=null),editor.getDoc().execCommand(command,ui,value)},isFormatMatch=function(name){return formatter.match(name)},toggleFormat=function(name,value){formatter.toggle(name,value?{value:value}:void 0),editor.nodeChanged()},storeSelection=function(type){bookmark=selection.getBookmark(type)},restoreSelection=function(){selection.moveToBookmark(bookmark)};addCommands({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){editor.undoManager.add()},"Cut,Copy,Paste":function(command){var failed,doc=editor.getDoc();try{execNativeCommand(command)}catch(ex){failed=TRUE}if("paste"!==command||doc.queryCommandEnabled(command)||(failed=!0),failed||!doc.queryCommandSupported(command)){var msg=editor.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");$_cum1kc9jducwn99.mac&&(msg=msg.replace(/Ctrl\+/g,"⌘+")),editor.notificationManager.open({text:msg,type:"error"})}},unlink:function(){if(selection.isCollapsed()){var elm=editor.dom.getParent(editor.selection.getStart(),"a");return void(elm&&editor.dom.remove(elm,!0))}formatter.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(command){var align=command.substring(7);"full"===align&&(align="justify"),each$9("left,center,right,justify".split(","),function(name){align!==name&&formatter.remove("align"+name)}),"none"!==align&&toggleFormat("align"+align)},"InsertUnorderedList,InsertOrderedList":function(command){var listElm,listParent;execNativeCommand(command),(listElm=dom.getParent(selection.getNode(),"ol,ul"))&&(listParent=listElm.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(listParent.nodeName)&&(storeSelection(),dom.split(listParent,listElm),restoreSelection()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(command){toggleFormat(command)},"ForeColor,HiliteColor,FontName":function(command,ui,value){toggleFormat(command,value)},FontSize:function(command,ui,value){var fontClasses,fontSizes;value>=1&&value<=7&&(fontSizes=explode$2(settings.font_size_style_values),fontClasses=explode$2(settings.font_size_classes),value=fontClasses?fontClasses[value-1]||value:fontSizes[value-1]||value),toggleFormat(command,value)},RemoveFormat:function(command){formatter.remove(command)},mceBlockQuote:function(){toggleFormat("blockquote")},FormatBlock:function(command,ui,value){return toggleFormat(value||"p")},mceCleanup:function(){var bookmark=selection.getBookmark();editor.setContent(editor.getContent({cleanup:TRUE}),{cleanup:TRUE}),selection.moveToBookmark(bookmark)},mceRemoveNode:function(command,ui,value){var node=value||selection.getNode();node!==editor.getBody()&&(storeSelection(),editor.dom.remove(node,TRUE),restoreSelection())},mceSelectNodeDepth:function(command,ui,value){var counter=0;dom.getParent(selection.getNode(),function(node){if(1===node.nodeType&&counter++===value)return selection.select(node),FALSE},editor.getBody())},mceSelectNode:function(command,ui,value){selection.select(value)},mceInsertContent:function(command,ui,value){$_42g77d1wjducwnlx.insertAtCaret(editor,value)},mceInsertRawHTML:function(command,ui,value){selection.setContent("tiny_mce_marker"),editor.setContent(editor.getContent().replace(/tiny_mce_marker/g,function(){return value}))},mceToggleFormat:function(command,ui,value){toggleFormat(value)},mceSetContent:function(command,ui,value){editor.setContent(value)},"Indent,Outdent":function(command){handle(editor,command)},mceRepaint:function(){},InsertHorizontalRule:function(){editor.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){editor.hasVisual=!editor.hasVisual,editor.addVisual()},mceReplaceContent:function(command,ui,value){editor.execCommand("mceInsertContent",!1,value.replace(/\{\$selection\}/g,selection.getContent({format:"text"})))},mceInsertLink:function(command,ui,value){var anchor;"string"==typeof value&&(value={href:value}),anchor=dom.getParent(selection.getNode(),"a"),value.href=value.href.replace(" ","%20"),anchor&&value.href||formatter.remove("link"),value.href&&formatter.apply("link",value,anchor)},selectAll:function(){var editingHost=dom.getParent(selection.getStart(),$_fj238m1qjducwnjm.isContentEditableTrue);if(editingHost){var rng=dom.createRng();rng.selectNodeContents(editingHost),selection.setRng(rng)}},delete:function(){$_3jaaze2wjducwnqk.deleteCommand(editor)},forwardDelete:function(){$_3jaaze2wjducwnqk.forwardDeleteCommand(editor)},mceNewDocument:function(){editor.setContent("")},InsertLineBreak:function(command,ui,value){return $_6wifbs3wjducwnw6.insert(editor,value),!0}}),addCommands({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(command){var name="align"+command.substring(7),nodes=selection.isCollapsed()?[dom.getParent(selection.getNode(),dom.isBlock)]:selection.getSelectedBlocks(),matches=map$2(nodes,function(node){return!!formatter.matchNode(node,name)});return inArray$2(matches,TRUE)!==-1},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(command){return isFormatMatch(command)},mceBlockQuote:function(){return isFormatMatch("blockquote")},Outdent:function(){var node;if(settings.inline_styles){if((node=dom.getParent(selection.getStart(),dom.isBlock))&&parseInt(node.style.paddingLeft,10)>0)return TRUE;if((node=dom.getParent(selection.getEnd(),dom.isBlock))&&parseInt(node.style.paddingLeft,10)>0)return TRUE}return queryCommandState("InsertUnorderedList")||queryCommandState("InsertOrderedList")||!settings.inline_styles&&!!dom.getParent(selection.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(command){var list=dom.getParent(selection.getNode(),"ul,ol");return list&&("insertunorderedlist"===command&&"UL"===list.tagName||"insertorderedlist"===command&&"OL"===list.tagName)}},"state"),addCommands({"FontSize,FontName":function(command){var parent,value=0;return(parent=dom.getParent(selection.getNode(),"span"))&&(value="fontsize"===command?parent.style.fontSize:parent.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),value}},"value"),addCommands({Undo:function(){editor.undoManager.undo()},Redo:function(){editor.undoManager.redo()}})}function Shortcuts(editor){var self=this,shortcuts={},pendingPatterns=[],parseShortcut=function(pattern){var id,key,shortcut={};each$10(explode$3(pattern,"+"),function(value){value in modifierNames?shortcut[value]=!0:/^[0-9]{2,}$/.test(value)?shortcut.keyCode=parseInt(value,10):(shortcut.charCode=value.charCodeAt(0),shortcut.keyCode=keyCodeLookup[value]||value.toUpperCase().charCodeAt(0))}),id=[shortcut.keyCode];for(key in modifierNames)shortcut[key]?id.push(key):shortcut[key]=!1;return shortcut.id=id.join(","),shortcut.access&&(shortcut.alt=!0,$_cum1kc9jducwn99.mac?shortcut.ctrl=!0:shortcut.shift=!0),shortcut.meta&&($_cum1kc9jducwn99.mac?shortcut.meta=!0:(shortcut.ctrl=!0,shortcut.meta=!1)),shortcut},createShortcut=function(pattern,desc,cmdFunc,scope){var shortcuts;return shortcuts=$_8i2houjjducwnd2.map(explode$3(pattern,">"),parseShortcut),shortcuts[shortcuts.length-1]=$_8i2houjjducwnd2.extend(shortcuts[shortcuts.length-1],{func:cmdFunc,scope:scope||editor}),$_8i2houjjducwnd2.extend(shortcuts[0],{desc:editor.translate(desc),subpatterns:shortcuts.slice(1)})},hasModifier=function(e){return e.altKey||e.ctrlKey||e.metaKey},isFunctionKey=function(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123},matchShortcut=function(e,shortcut){return!!shortcut&&(shortcut.ctrl===e.ctrlKey&&shortcut.meta===e.metaKey&&(shortcut.alt===e.altKey&&shortcut.shift===e.shiftKey&&(!!(e.keyCode===shortcut.keyCode||e.charCode&&e.charCode===shortcut.charCode)&&(e.preventDefault(),!0))))},executeShortcutAction=function(shortcut){return shortcut.func?shortcut.func.call(shortcut.scope):null};editor.on("keyup keypress keydown",function(e){!hasModifier(e)&&!isFunctionKey(e)||e.isDefaultPrevented()||(each$10(shortcuts,function(shortcut){if(matchShortcut(e,shortcut))return pendingPatterns=shortcut.subpatterns.slice(0),"keydown"===e.type&&executeShortcutAction(shortcut),!0}),matchShortcut(e,pendingPatterns[0])&&(1===pendingPatterns.length&&"keydown"===e.type&&executeShortcutAction(pendingPatterns[0]),pendingPatterns.shift()))}),self.add=function(pattern,desc,cmdFunc,scope){var cmd;return cmd=cmdFunc,"string"==typeof cmdFunc?cmdFunc=function(){editor.execCommand(cmd,!1,null)}:$_8i2houjjducwnd2.isArray(cmd)&&(cmdFunc=function(){editor.execCommand(cmd[0],cmd[1],cmd[2])}),each$10(explode$3($_8i2houjjducwnd2.trim(pattern.toLowerCase())),function(pattern){var shortcut=createShortcut(pattern,desc,cmdFunc,scope);shortcuts[shortcut.id]=shortcut}),!0},self.remove=function(pattern){var shortcut=createShortcut(pattern);return!!shortcuts[shortcut.id]&&(delete shortcuts[shortcut.id],!0)}}function NotificationManagerImpl(){var unimplemented=function(){throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:unimplemented,close:unimplemented,reposition:unimplemented,getArgs:unimplemented}}function NotificationManager(editor){var notifications=[],getImplementation=function(){var theme=editor.theme;return theme&&theme.getNotificationManagerImpl?theme.getNotificationManagerImpl():NotificationManagerImpl()},getTopNotification=function(){return Option.from(notifications[0])},isEqual=function(a,b){return!(a.type!==b.type||a.text!==b.text||a.progressBar||a.timeout||b.progressBar||b.timeout)},reposition=function(){notifications.length>0&&getImplementation().reposition(notifications)},addNotification=function(notification){notifications.push(notification)},closeNotification=function(notification){$_2dw1bj4jducwn6g.findIndex(notifications,function(otherNotification){return otherNotification===notification}).each(function(index){notifications.splice(index,1)})},open=function(args){if(!editor.removed&&$_ahd3ne4djducwo1z.isEditorAttachedToDom(editor))return $_2dw1bj4jducwn6g.find(notifications,function(notification){
return isEqual(getImplementation().getArgs(notification),args)}).getOrThunk(function(){editor.editorManager.setActive(editor);var notification=getImplementation().open(args,function(){closeNotification(notification),reposition()});return addNotification(notification),reposition(),notification})},close=function(){getTopNotification().each(function(notification){getImplementation().close(notification),closeNotification(notification),reposition()})},getNotifications=function(){return notifications};return function(editor){editor.on("SkinLoaded",function(){var serviceMessage=editor.settings.service_message;serviceMessage&&open({text:serviceMessage,type:"warning",timeout:0,icon:""})}),editor.on("ResizeEditor ResizeWindow",function(){$_83mf8ygjducwnbc.requestAnimationFrame(reposition)}),editor.on("remove",function(){$_2dw1bj4jducwn6g.each(notifications,function(notification){getImplementation().close(notification)})})}(editor),{open:open,close:close,getNotifications:getNotifications}}function WindowManagerImpl(){var unimplemented=function(){throw new Error("Theme did not provide a WindowManager implementation.")};return{open:unimplemented,alert:unimplemented,confirm:unimplemented,close:unimplemented,getParams:unimplemented,setParams:unimplemented}}function WindowManager(editor){var windows=[],getImplementation=function(){var theme=editor.theme;return theme&&theme.getWindowManagerImpl?theme.getWindowManagerImpl():WindowManagerImpl()},funcBind=function(scope,f){return function(){return f?f.apply(scope,arguments):void 0}},fireOpenEvent=function(win){editor.fire("OpenWindow",{win:win})},fireCloseEvent=function(win){editor.fire("CloseWindow",{win:win})},addWindow=function(win){windows.push(win),fireOpenEvent(win)},closeWindow=function(win){$_2dw1bj4jducwn6g.findIndex(windows,function(otherWindow){return otherWindow===win}).each(function(index){windows.splice(index,1),fireCloseEvent(win),0===windows.length&&editor.focus()})},getTopWindow=function(){return Option.from(windows[windows.length-1])},open=function(args,params){editor.editorManager.setActive(editor),$_exyelv3zjducwnzi.store(editor);var win=getImplementation().open(args,params,closeWindow);return addWindow(win),win},alert=function(message,callback,scope){var win=getImplementation().alert(message,funcBind(scope?scope:this,callback),closeWindow);addWindow(win)},confirm=function(message,callback,scope){var win=getImplementation().confirm(message,funcBind(scope?scope:this,callback),closeWindow);addWindow(win)},close=function(){getTopWindow().each(function(win){getImplementation().close(win),closeWindow(win)})},getParams=function(){return getTopWindow().map(getImplementation().getParams).getOr(null)},setParams=function(params){getTopWindow().each(function(win){getImplementation().setParams(win,params)})},getWindows=function(){return windows};return editor.on("remove",function(){$_2dw1bj4jducwn6g.each(windows.slice(0),function(win){getImplementation().close(win)})}),{windows:windows,open:open,alert:alert,confirm:confirm,close:close,getParams:getParams,setParams:setParams,getWindows:getWindows}}function XMLHttpRequest(){return new($_850zr7bjducwn9g.getOrDie("XMLHttpRequest"))}function Uploader(uploadStatus,settings){var pendingPromises={},pathJoin=function(path1,path2){return path1?path1.replace(/\/$/,"")+"/"+path2.replace(/^\//,""):path2},defaultHandler=function(blobInfo,success,failure,progress){var xhr,formData;xhr=new XMLHttpRequest,xhr.open("POST",settings.url),xhr.withCredentials=settings.credentials,xhr.upload.onprogress=function(e){progress(e.loaded/e.total*100)},xhr.onerror=function(){failure("Image upload failed due to a XHR Transport error. Code: "+xhr.status)},xhr.onload=function(){var json;return xhr.status<200||xhr.status>=300?void failure("HTTP Error: "+xhr.status):(json=JSON.parse(xhr.responseText))&&"string"==typeof json.location?void success(pathJoin(settings.basePath,json.location)):void failure("Invalid JSON: "+xhr.responseText)},formData=new FormData,formData.append("file",blobInfo.blob(),blobInfo.filename()),xhr.send(formData)},noUpload=function(){return new promiseObj(function(resolve){resolve([])})},handlerSuccess=function(blobInfo,url){return{url:url,blobInfo:blobInfo,status:!0}},handlerFailure=function(blobInfo,error){return{url:"",blobInfo:blobInfo,status:!1,error:error}},resolvePending=function(blobUri,result){$_8i2houjjducwnd2.each(pendingPromises[blobUri],function(resolve){resolve(result)}),delete pendingPromises[blobUri]},uploadBlobInfo=function(blobInfo,handler,openNotification){return uploadStatus.markPending(blobInfo.blobUri()),new promiseObj(function(resolve){var notification,progress,noop=function(){};try{var closeNotification_1=function(){notification&&(notification.close(),progress=noop)},success=function(url){closeNotification_1(),uploadStatus.markUploaded(blobInfo.blobUri(),url),resolvePending(blobInfo.blobUri(),handlerSuccess(blobInfo,url)),resolve(handlerSuccess(blobInfo,url))},failure=function(error){closeNotification_1(),uploadStatus.removeFailed(blobInfo.blobUri()),resolvePending(blobInfo.blobUri(),handlerFailure(blobInfo,error)),resolve(handlerFailure(blobInfo,error))};progress=function(percent){percent<0||percent>100||(notification||(notification=openNotification()),notification.progressBar.value(percent))},handler(blobInfo,success,failure,progress)}catch(ex){resolve(handlerFailure(blobInfo,ex.message))}})},isDefaultHandler=function(handler){return handler===defaultHandler},pendingUploadBlobInfo=function(blobInfo){var blobUri=blobInfo.blobUri();return new promiseObj(function(resolve){pendingPromises[blobUri]=pendingPromises[blobUri]||[],pendingPromises[blobUri].push(resolve)})},uploadBlobs=function(blobInfos,openNotification){return blobInfos=$_8i2houjjducwnd2.grep(blobInfos,function(blobInfo){return!uploadStatus.isUploaded(blobInfo.blobUri())}),promiseObj.all($_8i2houjjducwnd2.map(blobInfos,function(blobInfo){return uploadStatus.isPending(blobInfo.blobUri())?pendingUploadBlobInfo(blobInfo):uploadBlobInfo(blobInfo,settings.handler,openNotification)}))},upload=function(blobInfos,openNotification){return!settings.url&&isDefaultHandler(settings.handler)?noUpload():uploadBlobs(blobInfos,openNotification)};return settings=$_8i2houjjducwnd2.extend({credentials:!1,handler:defaultHandler},settings),{upload:upload}}function Blob(parts,properties){return new($_850zr7bjducwn9g.getOrDie("Blob"))(parts,properties)}function FileReader(){return new($_850zr7bjducwn9g.getOrDie("FileReader"))}function Uint8Array(arr){return new($_850zr7bjducwn9g.getOrDie("Uint8Array"))(arr)}function ImageScanner(uploadStatus,blobCache){var cachedPromises={};return{findAll:function(elm,predicate){var images,promises;return predicate||(predicate=$_6183wb25jducwnn2.constant(!0)),images=$_e6e6g1kjducwnfd.filter(getAllImages(elm),function(img){var src=img.src;return!!$_cum1kc9jducwn99.fileApi&&(!img.hasAttribute("data-mce-bogus")&&(!img.hasAttribute("data-mce-placeholder")&&(!(!src||src===$_cum1kc9jducwn99.transparentSrc)&&(0===src.indexOf("blob:")?!uploadStatus.isUploaded(src):0===src.indexOf("data:")&&predicate(img)))))}),promises=$_e6e6g1kjducwnfd.map(images,function(img){var newPromise;return cachedPromises[img.src]?new promiseObj(function(resolve){cachedPromises[img.src].then(function(imageInfo){if("string"==typeof imageInfo)return imageInfo;resolve({image:img,blobInfo:imageInfo.blobInfo})})}):(newPromise=new promiseObj(function(resolve,reject){imageToBlobInfo(blobCache,img,resolve,reject)}).then(function(result){return delete cachedPromises[result.image.src],result}).catch(function(error){return delete cachedPromises[img.src],error}),cachedPromises[img.src]=newPromise,newPromise)}),promiseObj.all(promises)}}}function BlobCache(){var cache=[],constant=$_6183wb25jducwnn2.constant,mimeToExt=function(mime){return{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[mime.toLowerCase()]||"dat"},create=function(o,blob,base64,filename){return toBlobInfo("object"==typeof o?o:{id:o,name:filename,blob:blob,base64:base64})},toBlobInfo=function(o){var id,name;if(!o.blob||!o.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");return id=o.id||$_48t1mg4wjducwo4b.uuid("blobid"),name=o.name||id,{id:constant(id),name:constant(name),filename:constant(name+"."+mimeToExt(o.blob.type)),blob:constant(o.blob),base64:constant(o.base64),blobUri:constant(o.blobUri||$_bqa5nlajducwn9f.createObjectURL(o.blob)),uri:constant(o.uri)}},add=function(blobInfo){get(blobInfo.id())||cache.push(blobInfo)},get=function(id){return findFirst(function(cachedBlobInfo){return cachedBlobInfo.id()===id})},findFirst=function(predicate){return $_e6e6g1kjducwnfd.filter(cache,predicate)[0]},getByUri=function(blobUri){return findFirst(function(blobInfo){return blobInfo.blobUri()===blobUri})},removeByUri=function(blobUri){cache=$_e6e6g1kjducwnfd.filter(cache,function(blobInfo){return blobInfo.blobUri()!==blobUri||($_bqa5nlajducwn9f.revokeObjectURL(blobInfo.blobUri()),!1)})},destroy=function(){$_e6e6g1kjducwnfd.each(cache,function(cachedBlobInfo){$_bqa5nlajducwn9f.revokeObjectURL(cachedBlobInfo.blobUri())}),cache=[]};return{create:create,add:add,get:get,getByUri:getByUri,findFirst:findFirst,removeByUri:removeByUri,destroy:destroy}}function UploadStatus(){var blobUriStatuses={},createStatus=function(status,resultUri){return{status:status,resultUri:resultUri}},hasBlobUri=function(blobUri){return blobUri in blobUriStatuses},getResultUri=function(blobUri){var result=blobUriStatuses[blobUri];return result?result.resultUri:null},isPending=function(blobUri){return!!hasBlobUri(blobUri)&&1===blobUriStatuses[blobUri].status},isUploaded=function(blobUri){return!!hasBlobUri(blobUri)&&2===blobUriStatuses[blobUri].status},markPending=function(blobUri){blobUriStatuses[blobUri]=createStatus(1,null)},markUploaded=function(blobUri,resultUri){blobUriStatuses[blobUri]=createStatus(2,resultUri)},removeFailed=function(blobUri){delete blobUriStatuses[blobUri]},destroy=function(){blobUriStatuses={}};return{hasBlobUri:hasBlobUri,getResultUri:getResultUri,isPending:isPending,isUploaded:isUploaded,markPending:markPending,markUploaded:markUploaded,removeFailed:removeFailed,destroy:destroy}}function EditorUpload(editor){var uploader,imageScanner,blobCache=BlobCache(),settings=editor.settings,uploadStatus=UploadStatus(),aliveGuard=function(callback){return function(result){return editor.selection?callback(result):[]}},cacheInvalidator=function(){return"?"+(new Date).getTime()},replaceString=function(content,search,replace){var index=0;do{(index=content.indexOf(search,index))!==-1&&(content=content.substring(0,index)+replace+content.substr(index+search.length),index+=replace.length-search.length+1)}while(index!==-1);return content},replaceImageUrl=function(content,targetUrl,replacementUrl){return content=replaceString(content,'src="'+targetUrl+'"','src="'+replacementUrl+'"'),content=replaceString(content,'data-mce-src="'+targetUrl+'"','data-mce-src="'+replacementUrl+'"')},replaceUrlInUndoStack=function(targetUrl,replacementUrl){$_e6e6g1kjducwnfd.each(editor.undoManager.data,function(level){"fragmented"===level.type?level.fragments=$_e6e6g1kjducwnfd.map(level.fragments,function(fragment){return replaceImageUrl(fragment,targetUrl,replacementUrl)}):level.content=replaceImageUrl(level.content,targetUrl,replacementUrl)})},openNotification=function(){return editor.notificationManager.open({text:editor.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},replaceImageUri=function(image,resultUri){blobCache.removeByUri(image.src),replaceUrlInUndoStack(image.src,resultUri),editor.$(image).attr({src:settings.images_reuse_filename?resultUri+cacheInvalidator():resultUri,"data-mce-src":editor.convertURL(resultUri,"src")})},uploadImages=function(callback){return uploader||(uploader=Uploader(uploadStatus,{url:settings.images_upload_url,basePath:settings.images_upload_base_path,credentials:settings.images_upload_credentials,handler:settings.images_upload_handler})),scanForImages().then(aliveGuard(function(imageInfos){var blobInfos;return blobInfos=$_e6e6g1kjducwnfd.map(imageInfos,function(imageInfo){return imageInfo.blobInfo}),uploader.upload(blobInfos,openNotification).then(aliveGuard(function(result){var filteredResult=$_e6e6g1kjducwnfd.map(result,function(uploadInfo,index){var image=imageInfos[index].image;return uploadInfo.status&&editor.settings.images_replace_blob_uris!==!1?replaceImageUri(image,uploadInfo.url):uploadInfo.error&&$_9erk7k4hjducwo2e.uploadError(editor,uploadInfo.error),{element:image,status:uploadInfo.status}});return callback&&callback(filteredResult),filteredResult}))}))},uploadImagesAuto=function(callback){if(settings.automatic_uploads!==!1)return uploadImages(callback)},isValidDataUriImage=function(imgElm){return!settings.images_dataimg_filter||settings.images_dataimg_filter(imgElm)},scanForImages=function(){return imageScanner||(imageScanner=ImageScanner(uploadStatus,blobCache)),imageScanner.findAll(editor.getBody(),isValidDataUriImage).then(aliveGuard(function(result){return result=$_e6e6g1kjducwnfd.filter(result,function(resultItem){return"string"!=typeof resultItem||($_9erk7k4hjducwo2e.displayError(editor,resultItem),!1)}),$_e6e6g1kjducwnfd.each(result,function(resultItem){replaceUrlInUndoStack(resultItem.image.src,resultItem.blobInfo.blobUri()),resultItem.image.src=resultItem.blobInfo.blobUri(),resultItem.image.removeAttribute("data-mce-src")}),result}))},destroy=function(){blobCache.destroy(),uploadStatus.destroy(),imageScanner=uploader=null},replaceBlobUris=function(content){return content.replace(/src="(blob:[^"]+)"/g,function(match,blobUri){var resultUri=uploadStatus.getResultUri(blobUri);if(resultUri)return'src="'+resultUri+'"';var blobInfo=blobCache.getByUri(blobUri);return blobInfo||(blobInfo=$_e6e6g1kjducwnfd.reduce(editor.editorManager.get(),function(result,editor){return result||editor.editorUpload&&editor.editorUpload.blobCache.getByUri(blobUri)},null)),blobInfo?'src="data:'+blobInfo.blob().type+";base64,"+blobInfo.base64()+'"':match})};return editor.on("setContent",function(){editor.settings.automatic_uploads!==!1?uploadImagesAuto():scanForImages()}),editor.on("RawSaveContent",function(e){e.content=replaceBlobUris(e.content)}),editor.on("getContent",function(e){e.source_view||"raw"===e.format||(e.content=replaceBlobUris(e.content))}),editor.on("PostRender",function(){editor.parser.addNodeFilter("img",function(images){$_e6e6g1kjducwnfd.each(images,function(img){var src=img.attr("src");if(!blobCache.getByUri(src)){var resultUri=uploadStatus.getResultUri(src);resultUri&&img.attr("src",resultUri)}})})}),{blobCache:blobCache,uploadImages:uploadImages,uploadImagesAuto:uploadImagesAuto,scanForImages:scanForImages,destroy:destroy}}function NodeChange(editor){var lastRng,lastPath=[],isSameElementPath=function(startElm){var i,currentPath;if(currentPath=editor.$(startElm).parentsUntil(editor.getBody()).add(startElm),currentPath.length===lastPath.length){for(i=currentPath.length;i>=0&&currentPath[i]===lastPath[i];i--);if(i===-1)return lastPath=currentPath,!0}return lastPath=currentPath,!1};"onselectionchange"in editor.getDoc()||editor.on("NodeChange Click MouseUp KeyUp Focus",function(e){var nativeRng,fakeRng;nativeRng=editor.selection.getRng(),fakeRng={startContainer:nativeRng.startContainer,startOffset:nativeRng.startOffset,endContainer:nativeRng.endContainer,endOffset:nativeRng.endOffset},"nodechange"!==e.type&&$_18bpcb3yjducwnzh.isEq(fakeRng,lastRng)||editor.fire("SelectionChange"),lastRng=fakeRng}),editor.on("contextmenu",function(){editor.fire("SelectionChange")}),editor.on("SelectionChange",function(){var startElm=editor.selection.getStart(!0);!startElm||!$_cum1kc9jducwn99.range&&editor.selection.isCollapsed()||!isSameElementPath(startElm)&&editor.dom.isChildOf(startElm,editor.getBody())&&editor.nodeChanged({selectionChange:!0})}),editor.on("MouseUp",function(e){e.isDefaultPrevented()||("IMG"===editor.selection.getNode().nodeName?$_83mf8ygjducwnbc.setEditorTimeout(editor,function(){editor.nodeChanged()}):editor.nodeChanged())}),this.nodeChanged=function(args){var node,parents,root,selection=editor.selection;editor.initialized&&selection&&!editor.settings.disable_nodechange&&!editor.readonly&&(root=editor.getBody(),node=selection.getStart(!0)||root,node.ownerDocument===editor.getDoc()&&editor.dom.isChildOf(node,root)||(node=root),parents=[],editor.dom.getParent(node,function(node){if(node===root)return!0;parents.push(node)}),args=args||{},args.element=node,args.parents=parents,editor.fire("NodeChange",args))}}function SaxParser(settings,schema){void 0===schema&&(schema=Schema());var noop=function(){};settings=settings||{},settings.fix_self_closing!==!1&&(settings.fix_self_closing=!0),each$11("comment cdata text start end pi doctype".split(" "),function(name){name&&(self[name]=settings[name]||noop)});var comment=settings.comment?settings.comment:noop,cdata=settings.cdata?settings.cdata:noop,text=settings.text?settings.text:noop,start=settings.start?settings.start:noop,end=settings.end?settings.end:noop,pi=settings.pi?settings.pi:noop,doctype=settings.doctype?settings.doctype:noop;return{parse:function(html){var matches,value,endRegExp,attrList,i,textData,name,isInternalElement,removeInternalElements,shortEndedElements,fillAttrsMap,isShortEnded,validate,elementRule,isValidElement,attr,attribsValue,validAttributesMap,validAttributePatterns,attributesRequired,attributesDefault,attributesForced,processHtml,anyAttributesRequired,selfClosing,tokenRegExp,attrRegExp,specialElements,attrValue,fixSelfClosing,index=0,stack=[],idCount=0,decode=$_g4jbz61rjducwnjq.decode,filteredUrlAttrs=$_8i2houjjducwnd2.makeMap("src,href,data,background,formaction,poster"),scriptUriRegExp=/((java|vb)script|mhtml):/i,dataUriRegExp=/^data:/i,processEndTag=function(name){var pos,i;for(pos=stack.length;pos--&&stack[pos].name!==name;);if(pos>=0){for(i=stack.length-1;i>=pos;i--)name=stack[i],name.valid&&end(name.name);stack.length=pos}},parseAttribute=function(match,name,value,val2,val3){var attrRule,i;if(name=name.toLowerCase(),value=name in fillAttrsMap?name:decode(value||val2||val3||""),validate&&!isInternalElement&&isValidPrefixAttrName(name)===!1){if(!(attrRule=validAttributesMap[name])&&validAttributePatterns){for(i=validAttributePatterns.length;i--&&(attrRule=validAttributePatterns[i],!attrRule.pattern.test(name)););i===-1&&(attrRule=null)}if(!attrRule)return;if(attrRule.validValues&&!(value in attrRule.validValues))return}if(filteredUrlAttrs[name]&&!settings.allow_script_urls){var uri=value.replace(/[\s\u0000-\u001F]+/g,"");try{uri=decodeURIComponent(uri)}catch(ex){uri=unescape(uri)}if(scriptUriRegExp.test(uri))return;if(!settings.allow_html_data_urls&&dataUriRegExp.test(uri)&&!/^data:image\//i.test(uri))return}isInternalElement&&(name in filteredUrlAttrs||0===name.indexOf("on"))||(attrList.map[name]=value,attrList.push({name:name,value:value}))};for(tokenRegExp=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),attrRegExp=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,shortEndedElements=schema.getShortEndedElements(),selfClosing=settings.self_closing_elements||schema.getSelfClosingElements(),fillAttrsMap=schema.getBoolAttrs(),validate=settings.validate,removeInternalElements=settings.remove_internals,fixSelfClosing=settings.fix_self_closing,specialElements=schema.getSpecialElements(),processHtml=html+">";matches=tokenRegExp.exec(processHtml);){if(index<matches.index&&text(decode(html.substr(index,matches.index-index))),value=matches[6])value=value.toLowerCase(),":"===value.charAt(0)&&(value=value.substr(1)),processEndTag(value);else if(value=matches[7]){if(matches.index+matches[0].length>html.length){text(decode(html.substr(matches.index))),index=matches.index+matches[0].length;continue}if(value=value.toLowerCase(),":"===value.charAt(0)&&(value=value.substr(1)),isShortEnded=value in shortEndedElements,fixSelfClosing&&selfClosing[value]&&stack.length>0&&stack[stack.length-1].name===value&&processEndTag(value),!validate||(elementRule=schema.getElementRule(value))){if(isValidElement=!0,validate&&(validAttributesMap=elementRule.attributes,validAttributePatterns=elementRule.attributePatterns),(attribsValue=matches[8])?(isInternalElement=attribsValue.indexOf("data-mce-type")!==-1,isInternalElement&&removeInternalElements&&(isValidElement=!1),attrList=[],attrList.map={},attribsValue.replace(attrRegExp,parseAttribute)):(attrList=[],attrList.map={}),validate&&!isInternalElement){if(attributesRequired=elementRule.attributesRequired,attributesDefault=elementRule.attributesDefault,attributesForced=elementRule.attributesForced,anyAttributesRequired=elementRule.removeEmptyAttrs,anyAttributesRequired&&!attrList.length&&(isValidElement=!1),attributesForced)for(i=attributesForced.length;i--;)attr=attributesForced[i],name=attr.name,attrValue=attr.value,"{$uid}"===attrValue&&(attrValue="mce_"+idCount++),attrList.map[name]=attrValue,attrList.push({name:name,value:attrValue});if(attributesDefault)for(i=attributesDefault.length;i--;)attr=attributesDefault[i],(name=attr.name)in attrList.map||(attrValue=attr.value,"{$uid}"===attrValue&&(attrValue="mce_"+idCount++),attrList.map[name]=attrValue,attrList.push({name:name,value:attrValue}));if(attributesRequired){for(i=attributesRequired.length;i--&&!(attributesRequired[i]in attrList.map););i===-1&&(isValidElement=!1)}if(attr=attrList.map["data-mce-bogus"]){if("all"===attr){index=findEndTagIndex(schema,html,tokenRegExp.lastIndex),tokenRegExp.lastIndex=index;continue}isValidElement=!1}}isValidElement&&start(value,attrList,isShortEnded)}else isValidElement=!1;if(endRegExp=specialElements[value]){endRegExp.lastIndex=index=matches.index+matches[0].length,(matches=endRegExp.exec(html))?(isValidElement&&(textData=html.substr(index,matches.index-index)),index=matches.index+matches[0].length):(textData=html.substr(index),index=html.length),isValidElement&&(textData.length>0&&text(textData,!0),end(value)),tokenRegExp.lastIndex=index;continue}isShortEnded||(attribsValue&&attribsValue.indexOf("/")===attribsValue.length-1?isValidElement&&end(value):stack.push({name:value,valid:isValidElement}))}else(value=matches[1])?(">"===value.charAt(0)&&(value=" "+value),settings.allow_conditional_comments||"[if"!==value.substr(0,3).toLowerCase()||(value=" "+value),comment(value)):(value=matches[2])?cdata(trimComments(value)):(value=matches[3])?doctype(value):(value=matches[4])&&pi(value,matches[5]);index=matches.index+matches[0].length}for(index<html.length&&text(decode(html.substr(index))),i=stack.length-1;i>=0;i--)value=stack[i],value.valid&&end(value.name)}}}function UndoManager(editor){var beforeBookmark,isFirstTypedCharacter,self=this,index=0,data=[],locks=0,isUnlocked=function(){return 0===locks},setTyping=function(typing){isUnlocked()&&(self.typing=typing)},setDirty=function(state){editor.setDirty(state)},addNonTypingUndoLevel=function(e){setTyping(!1),self.add({},e)},endTyping=function(){self.typing&&(setTyping(!1),self.add())};return editor.on("init",function(){self.add()}),editor.on("BeforeExecCommand",function(e){var cmd=e.command;"Undo"!==cmd&&"Redo"!==cmd&&"mceRepaint"!==cmd&&(endTyping(),self.beforeChange())}),editor.on("ExecCommand",function(e){var cmd=e.command;"Undo"!==cmd&&"Redo"!==cmd&&"mceRepaint"!==cmd&&addNonTypingUndoLevel(e)}),editor.on("ObjectResizeStart Cut",function(){self.beforeChange()}),editor.on("SaveContent ObjectResized blur",addNonTypingUndoLevel),editor.on("DragEnd",addNonTypingUndoLevel),editor.on("KeyUp",function(e){var keyCode=e.keyCode;e.isDefaultPrevented()||((keyCode>=33&&keyCode<=36||keyCode>=37&&keyCode<=40||45===keyCode||e.ctrlKey)&&(addNonTypingUndoLevel(),editor.nodeChanged()),46!==keyCode&&8!==keyCode||editor.nodeChanged(),isFirstTypedCharacter&&self.typing&&$_9n3h945bjducwo6y.isEq($_9n3h945bjducwo6y.createFromEditor(editor),data[0])===!1&&(editor.isDirty()===!1&&(setDirty(!0),editor.fire("change",{level:data[0],lastLevel:null})),editor.fire("TypingUndo"),isFirstTypedCharacter=!1,editor.nodeChanged()))}),editor.on("KeyDown",function(e){var keyCode=e.keyCode;if(!e.isDefaultPrevented()){if(keyCode>=33&&keyCode<=36||keyCode>=37&&keyCode<=40||45===keyCode)return void(self.typing&&addNonTypingUndoLevel(e));var modKey=e.ctrlKey&&!e.altKey||e.metaKey;!(keyCode<16||keyCode>20)||224===keyCode||91===keyCode||self.typing||modKey||(self.beforeChange(),setTyping(!0),self.add({},e),isFirstTypedCharacter=!0)}}),editor.on("MouseDown",function(e){self.typing&&addNonTypingUndoLevel(e)}),editor.addShortcut("meta+z","","Undo"),editor.addShortcut("meta+y,meta+shift+z","","Redo"),editor.on("AddUndo Undo Redo ClearUndos",function(e){e.isDefaultPrevented()||editor.nodeChanged()}),self={data:data,typing:!1,beforeChange:function(){isUnlocked()&&(beforeBookmark=$_epzga02kjducwnp2.getUndoBookmark(editor.selection))},add:function(level,event){var i,lastLevel,currentLevel,settings=editor.settings;if(currentLevel=$_9n3h945bjducwo6y.createFromEditor(editor),level=level||{},level=$_8i2houjjducwnd2.extend(level,currentLevel),isUnlocked()===!1||editor.removed)return null;if(lastLevel=data[index],editor.fire("BeforeAddUndo",{level:level,lastLevel:lastLevel,originalEvent:event}).isDefaultPrevented())return null;if(lastLevel&&$_9n3h945bjducwo6y.isEq(lastLevel,level))return null;if(data[index]&&(data[index].beforeBookmark=beforeBookmark),settings.custom_undo_redo_levels&&data.length>settings.custom_undo_redo_levels){for(i=0;i<data.length-1;i++)data[i]=data[i+1];data.length--,index=data.length}level.bookmark=$_epzga02kjducwnp2.getUndoBookmark(editor.selection),index<data.length-1&&(data.length=index+1),data.push(level),index=data.length-1;var args={level:level,lastLevel:lastLevel,originalEvent:event};return editor.fire("AddUndo",args),index>0&&(setDirty(!0),editor.fire("change",args)),level},undo:function(){var level;return self.typing&&(self.add(),self.typing=!1,setTyping(!1)),index>0&&(level=data[--index],$_9n3h945bjducwo6y.applyToEditor(editor,level,!0),setDirty(!0),editor.fire("undo",{level:level})),level},redo:function(){var level;return index<data.length-1&&(level=data[++index],$_9n3h945bjducwo6y.applyToEditor(editor,level,!1),setDirty(!0),editor.fire("redo",{level:level})),level},clear:function(){data=[],index=0,self.typing=!1,self.data=data,editor.fire("ClearUndos")},hasUndo:function(){return index>0||self.typing&&data[0]&&!$_9n3h945bjducwo6y.isEq($_9n3h945bjducwo6y.createFromEditor(editor),data[0])},hasRedo:function(){return index<data.length-1&&!self.typing},transact:function(callback){return endTyping(),self.beforeChange(),self.ignore(callback),self.add()},ignore:function(callback){try{locks++,callback()}finally{locks--}},extra:function(callback1,callback2){var lastLevel,bookmark;self.transact(callback1)&&(bookmark=data[index].bookmark,lastLevel=data[index-1],$_9n3h945bjducwo6y.applyToEditor(editor,lastLevel,!0),self.transact(callback2)&&(data[index-1].beforeBookmark=bookmark))}}}function FormatRegistry(editor){var formats={},get=function(name){return name?formats[name]:formats},register=function(name,format){name&&("string"!=typeof name?$_8i2houjjducwnd2.each(name,function(format,name){register(name,format)}):(format=format.length?format:[format],$_8i2houjjducwnd2.each(format,function(format){void 0===format.deep&&(format.deep=!format.selector),void 0===format.split&&(format.split=!format.selector||format.inline),void 0===format.remove&&format.selector&&!format.inline&&(format.remove="none"),format.selector&&format.inline&&(format.mixed=!0,format.block_expand=!0),"string"==typeof format.classes&&(format.classes=format.classes.split(/\s+/))}),formats[name]=format))},unregister=function(name){return name&&formats[name]&&delete formats[name],formats};return register($_892yun5ojducwo9d.get(editor.dom)),register(editor.settings.formats),{get:get,register:register,unregister:unregister}}function Formatter(editor){var formats=FormatRegistry(editor),formatChangeState=Cell(null);return $_283uwp5rjducwo9v.setup(editor),$_gizh813jjducwnu6.setup(editor),{get:formats.get,register:formats.register,unregister:formats.unregister,apply:$_60qu7r6jducwn73.curry($_3sj7pb5hjducwo7z.applyFormat,editor),remove:$_60qu7r6jducwn73.curry($_2kyh3s5kjducwo8m.remove,editor),toggle:$_60qu7r6jducwn73.curry($_arphd45qjducwo9s.toggle,editor,formats),match:$_60qu7r6jducwn73.curry($_4os6t23mjducwnv0.match,editor),matchAll:$_60qu7r6jducwn73.curry($_4os6t23mjducwnv0.matchAll,editor),matchNode:$_60qu7r6jducwn73.curry($_4os6t23mjducwnv0.matchNode,editor),canApply:$_60qu7r6jducwn73.curry($_4os6t23mjducwnv0.canApply,editor),formatChanged:$_60qu7r6jducwn73.curry($_gdfg785mjducwo99.formatChanged,editor,formatChangeState),getCssText:$_60qu7r6jducwn73.curry($_2e4qhs5pjducwo9j.getCssText,editor)}}function DomParser(settings,schema){void 0===schema&&(schema=Schema());var nodeFilters={},attributeFilters=[],matchedNodes={},matchedAttributes={};settings=settings||{},settings.validate=!("validate"in settings)||settings.validate,settings.root_name=settings.root_name||"body";var fixInvalidChildren=function(nodes){var ni,node,parent,parents,newParent,currentNode,tempNode,childNode,i,nonEmptyElements,whitespaceElements,nonSplitableElements,textBlockElements,specialElements,sibling,nextNode;for(nonSplitableElements=makeMap$4("tr,td,th,tbody,thead,tfoot,table"),nonEmptyElements=schema.getNonEmptyElements(),whitespaceElements=schema.getWhiteSpaceElements(),textBlockElements=schema.getTextBlockElements(),specialElements=schema.getSpecialElements(),ni=0;ni<nodes.length;ni++)if(node=nodes[ni],node.parent&&!node.fixed)if(textBlockElements[node.name]&&"li"===node.parent.name){for(sibling=node.next;sibling&&textBlockElements[sibling.name];)sibling.name="li",sibling.fixed=!0,node.parent.insert(sibling,node.parent),sibling=sibling.next;node.unwrap(node)}else{for(parents=[node],parent=node.parent;parent&&!schema.isValidChild(parent.name,node.name)&&!nonSplitableElements[parent.name];parent=parent.parent)parents.push(parent);if(parent&&parents.length>1){for(parents.reverse(),newParent=currentNode=filterNode(parents[0].clone()),i=0;i<parents.length-1;i++){for(schema.isValidChild(currentNode.name,parents[i].name)?(tempNode=filterNode(parents[i].clone()),currentNode.append(tempNode)):tempNode=currentNode,childNode=parents[i].firstChild;childNode&&childNode!==parents[i+1];)nextNode=childNode.next,tempNode.append(childNode),childNode=nextNode;currentNode=tempNode}isEmpty$1(schema,nonEmptyElements,whitespaceElements,newParent)?parent.insert(node,parents[0],!0):(parent.insert(newParent,parents[0],!0),parent.insert(node,newParent)),parent=parents[0],(isEmpty$1(schema,nonEmptyElements,whitespaceElements,parent)||hasOnlyChild(parent,"br"))&&parent.empty().remove()}else if(node.parent){if("li"===node.name){if((sibling=node.prev)&&("ul"===sibling.name||"ul"===sibling.name)){sibling.append(node);continue}if((sibling=node.next)&&("ul"===sibling.name||"ul"===sibling.name)){sibling.insert(node,sibling.firstChild,!0);continue}node.wrap(filterNode(new Node$2("ul",1)));continue}schema.isValidChild(node.parent.name,"div")&&schema.isValidChild("div",node.name)?node.wrap(filterNode(new Node$2("div",1))):specialElements[node.name]?node.empty().remove():node.unwrap()}}},filterNode=function(node){var i,name,list;name in nodeFilters&&(list=matchedNodes[name],list?list.push(node):matchedNodes[name]=[node]),i=attributeFilters.length;for(;i--;)(name=attributeFilters[i].name)in node.attributes.map&&(list=matchedAttributes[name],list?list.push(node):matchedAttributes[name]=[node]);return node},addNodeFilter=function(name,callback){each$19(explode$4(name),function(name){var list=nodeFilters[name];list||(nodeFilters[name]=list=[]),
list.push(callback)})},getNodeFilters=function(){var out=[];for(var name_1 in nodeFilters)nodeFilters.hasOwnProperty(name_1)&&out.push({name:name_1,callbacks:nodeFilters[name_1]});return out},addAttributeFilter=function(name,callback){each$19(explode$4(name),function(name){var i;for(i=0;i<attributeFilters.length;i++)if(attributeFilters[i].name===name)return void attributeFilters[i].callbacks.push(callback);attributeFilters.push({name:name,callbacks:[callback]})})},getAttributeFilters=function(){return[].concat(attributeFilters)},parse=function(html,args){var parser,nodes,i,l,fi,fl,list,name,blockElements,isInWhiteSpacePreservedElement,node,invalidChildren=[];args=args||{},matchedNodes={},matchedAttributes={},blockElements=extend$3(makeMap$4("script,style,head,html,body,title,meta,param"),schema.getBlockElements());var nonEmptyElements=schema.getNonEmptyElements(),children=schema.children,validate=settings.validate,rootBlockName="forced_root_block"in args?args.forced_root_block:settings.forced_root_block,whiteSpaceElements=schema.getWhiteSpaceElements(),isAllWhiteSpaceRegExp=/^[ \t\r\n]+$/,createNode=function(name,type){var list,node=new Node$2(name,type);return name in nodeFilters&&(list=matchedNodes[name],list?list.push(node):matchedNodes[name]=[node]),node},removeWhitespaceBefore=function(node){var textNode,textNodeNext,textVal,sibling,blockElements=schema.getBlockElements();for(textNode=node.prev;textNode&&3===textNode.type;){if(textVal=textNode.value.replace(/[ \t\r\n]+$/,""),textVal.length>0)return void(textNode.value=textVal);if(textNodeNext=textNode.next){if(3===textNodeNext.type&&textNodeNext.value.length){textNode=textNode.prev;continue}if(!blockElements[textNodeNext.name]&&"script"!==textNodeNext.name&&"style"!==textNodeNext.name){textNode=textNode.prev;continue}}sibling=textNode.prev,textNode.remove(),textNode=sibling}};parser=SaxParser$1({validate:validate,allow_script_urls:settings.allow_script_urls,allow_conditional_comments:settings.allow_conditional_comments,self_closing_elements:function(input){var name,output={};for(name in input)"li"!==name&&"p"!==name&&(output[name]=input[name]);return output}(schema.getSelfClosingElements()),cdata:function(text){node.append(createNode("#cdata",4)).value=text},text:function(text,raw){var textNode;isInWhiteSpacePreservedElement||(text=text.replace(/[ \t\r\n]+/g," "),isLineBreakNode(node.lastChild,blockElements)&&(text=text.replace(/^[ \t\r\n]+/,""))),0!==text.length&&(textNode=createNode("#text",3),textNode.raw=!!raw,node.append(textNode).value=text)},comment:function(text){node.append(createNode("#comment",8)).value=text},pi:function(name,text){node.append(createNode(name,7)).value=text,removeWhitespaceBefore(node)},doctype:function(text){var newNode;newNode=node.append(createNode("#doctype",10)),newNode.value=text,removeWhitespaceBefore(node)},start:function(name,attrs,empty){var newNode,attrFiltersLen,elementRule,attrName,parent;if(elementRule=validate?schema.getElementRule(name):{}){for(newNode=createNode(elementRule.outputName||name,1),newNode.attributes=attrs,newNode.shortEnded=empty,node.append(newNode),parent=children[node.name],parent&&children[newNode.name]&&!parent[newNode.name]&&invalidChildren.push(newNode),attrFiltersLen=attributeFilters.length;attrFiltersLen--;)(attrName=attributeFilters[attrFiltersLen].name)in attrs.map&&(list=matchedAttributes[attrName],list?list.push(newNode):matchedAttributes[attrName]=[newNode]);blockElements[name]&&removeWhitespaceBefore(newNode),empty||(node=newNode),!isInWhiteSpacePreservedElement&&whiteSpaceElements[name]&&(isInWhiteSpacePreservedElement=!0)}},end:function(name){var textNode,elementRule,text,sibling,tempNode;if(elementRule=validate?schema.getElementRule(name):{}){if(blockElements[name]&&!isInWhiteSpacePreservedElement){if((textNode=node.firstChild)&&3===textNode.type)if(text=textNode.value.replace(/^[ \t\r\n]+/,""),text.length>0)textNode.value=text,textNode=textNode.next;else for(sibling=textNode.next,textNode.remove(),textNode=sibling;textNode&&3===textNode.type;)text=textNode.value,sibling=textNode.next,(0===text.length||isAllWhiteSpaceRegExp.test(text))&&(textNode.remove(),textNode=sibling),textNode=sibling;if((textNode=node.lastChild)&&3===textNode.type)if(text=textNode.value.replace(/[ \t\r\n]+$/,""),text.length>0)textNode.value=text,textNode=textNode.prev;else for(sibling=textNode.prev,textNode.remove(),textNode=sibling;textNode&&3===textNode.type;)text=textNode.value,sibling=textNode.prev,(0===text.length||isAllWhiteSpaceRegExp.test(text))&&(textNode.remove(),textNode=sibling),textNode=sibling}if(isInWhiteSpacePreservedElement&&whiteSpaceElements[name]&&(isInWhiteSpacePreservedElement=!1),elementRule.removeEmpty&&isEmpty$1(schema,nonEmptyElements,whiteSpaceElements,node)&&!node.attributes.map.name&&!node.attr("id"))return tempNode=node.parent,blockElements[node.name]?node.empty().remove():node.unwrap(),void(node=tempNode);elementRule.paddEmpty&&(isPaddedWithNbsp(node)||isEmpty$1(schema,nonEmptyElements,whiteSpaceElements,node))&&paddEmptyNode(settings,args,blockElements,node),node=node.parent}}},schema);var rootNode=node=new Node$2(args.context||settings.root_name,11);if(parser.parse(html),validate&&invalidChildren.length&&(args.context?args.invalid=!0:fixInvalidChildren(invalidChildren)),rootBlockName&&("body"===rootNode.name||args.isRootContent)&&function(){var next,rootBlockNode,node=rootNode.firstChild,trim=function(rootBlockNode){rootBlockNode&&(node=rootBlockNode.firstChild,node&&3===node.type&&(node.value=node.value.replace(/^[ \t\r\n]+/,"")),(node=rootBlockNode.lastChild)&&3===node.type&&(node.value=node.value.replace(/[ \t\r\n]+$/,"")))};if(schema.isValidChild(rootNode.name,rootBlockName.toLowerCase())){for(;node;)next=node.next,3===node.type||1===node.type&&"p"!==node.name&&!blockElements[node.name]&&!node.attr("data-mce-type")?rootBlockNode?rootBlockNode.append(node):(rootBlockNode=createNode(rootBlockName,1),rootBlockNode.attr(settings.forced_root_block_attrs),rootNode.insert(rootBlockNode,node),rootBlockNode.append(node)):(trim(rootBlockNode),rootBlockNode=null),node=next;trim(rootBlockNode)}}(),!args.invalid){for(name in matchedNodes){for(list=nodeFilters[name],nodes=matchedNodes[name],fi=nodes.length;fi--;)nodes[fi].parent||nodes.splice(fi,1);for(i=0,l=list.length;i<l;i++)list[i](nodes,name,args)}for(i=0,l=attributeFilters.length;i<l;i++)if(list=attributeFilters[i],list.name in matchedAttributes){for(nodes=matchedAttributes[list.name],fi=nodes.length;fi--;)nodes[fi].parent||nodes.splice(fi,1);for(fi=0,fl=list.callbacks.length;fi<fl;fi++)list.callbacks[fi](nodes,list.name,args)}}return rootNode},exports={schema:schema,addAttributeFilter:addAttributeFilter,getAttributeFilters:getAttributeFilters,addNodeFilter:addNodeFilter,getNodeFilters:getNodeFilters,filterNode:filterNode,parse:parse};return register$2(exports,settings),$_bpec6l5zjducwobh.register(exports,settings),exports}function DomSerializer(settings,editor){var dom,schema,htmlParser,tempAttrs=["data-mce-selected"];dom=editor&&editor.dom?editor.dom:DOMUtils.DOM,schema=editor&&editor.schema?editor.schema:Schema(settings),settings.entity_encoding=settings.entity_encoding||"named",settings.remove_trailing_brs=!("remove_trailing_brs"in settings)||settings.remove_trailing_brs,htmlParser=DomParser(settings,schema),$_7ho7i95wjducwoaj.register(htmlParser,settings,dom);var serialize=function(node,parserArgs){var args=$_7sum4s5ujducwoab.merge({format:"html"},parserArgs?parserArgs:{}),targetNode=$_j6l1k5xjducwoao.process(editor,node,args),html=getHtmlFromNode(dom,targetNode,args),rootNode=parseHtml(htmlParser,dom,html,args);return"tree"===args.format?rootNode:toHtml(editor,settings,schema,rootNode,args)};return{schema:schema,addNodeFilter:htmlParser.addNodeFilter,addAttributeFilter:htmlParser.addAttributeFilter,serialize:serialize,addRules:function(rules){schema.addValidElements(rules)},setRules:function(rules){schema.setValidElements(rules)},addTempAttr:$_60qu7r6jducwn73.curry(addTempAttr,htmlParser,tempAttrs),getTempAttrs:function(){return tempAttrs}}}function DomSerializer$1(settings,editor){var domSerializer=DomSerializer(settings,editor);return{schema:domSerializer.schema,addNodeFilter:domSerializer.addNodeFilter,addAttributeFilter:domSerializer.addAttributeFilter,serialize:domSerializer.serialize,addRules:domSerializer.addRules,setRules:domSerializer.setRules,addTempAttr:domSerializer.addTempAttr,getTempAttrs:domSerializer.getTempAttrs}}function BookmarkManager(selection){return{getBookmark:$_60qu7r6jducwn73.curry($_dcl0u12jjducwnp0.getBookmark,selection),moveToBookmark:$_60qu7r6jducwn73.curry($_dcl0u12jjducwnp0.moveToBookmark,selection)}}function Quirks(editor){var each=$_8i2houjjducwnd2.each,BACKSPACE=$_1xm2zi59jducwo6l.BACKSPACE,DELETE=$_1xm2zi59jducwo6l.DELETE,dom=editor.dom,selection=editor.selection,settings=editor.settings,parser=editor.parser,isGecko=$_cum1kc9jducwn99.gecko,isIE=$_cum1kc9jducwn99.ie,isWebKit=$_cum1kc9jducwn99.webkit,mceInternalDataType=isIE?"Text":"URL",setEditorCommandState=function(cmd,state){try{editor.getDoc().execCommand(cmd,!1,state)}catch(ex){}},isDefaultPrevented=function(e){return e.isDefaultPrevented()},setMceInternalContent=function(e){var selectionHtml,internalContent;e.dataTransfer&&(editor.selection.isCollapsed()&&"IMG"===e.target.tagName&&selection.select(e.target),selectionHtml=editor.selection.getContent(),selectionHtml.length>0&&(internalContent="data:text/mce-internal,"+escape(editor.id)+","+escape(selectionHtml),e.dataTransfer.setData(mceInternalDataType,internalContent)))},getMceInternalContent=function(e){var internalContent;return e.dataTransfer&&(internalContent=e.dataTransfer.getData(mceInternalDataType))&&internalContent.indexOf("data:text/mce-internal,")>=0?(internalContent=internalContent.substr("data:text/mce-internal,".length).split(","),{id:unescape(internalContent[0]),html:unescape(internalContent[1])}):null},insertClipboardContents=function(content,internal){editor.queryCommandSupported("mceInsertClipboardContent")?editor.execCommand("mceInsertClipboardContent",!1,{content:content,internal:internal}):editor.execCommand("mceInsertContent",!1,content)},selectAll=function(){editor.shortcuts.add("meta+a",null,"SelectAll")},disableBackspaceIntoATable=function(){editor.on("keydown",function(e){if(!isDefaultPrevented(e)&&e.keyCode===BACKSPACE&&selection.isCollapsed()&&0===selection.getRng().startOffset){var previousSibling=selection.getNode().previousSibling;if(previousSibling&&previousSibling.nodeName&&"table"===previousSibling.nodeName.toLowerCase())return e.preventDefault(),!1}})},bodyHeight=function(){editor.inline||(editor.contentStyles.push("body {min-height: 150px}"),editor.on("click",function(e){var rng;if("HTML"===e.target.nodeName){if($_cum1kc9jducwn99.ie>11)return void editor.getBody().focus();rng=editor.selection.getRng(),editor.getBody().focus(),editor.selection.setRng(rng),editor.selection.normalize(),editor.nodeChanged()}}))},refreshContentEditable=function(){},isHidden=function(){var sel;return!isGecko||editor.removed?0:!(sel=editor.selection.getSel())||!sel.rangeCount||0===sel.rangeCount};return function(){editor.on("keydown",function(e){var rng,container,offset,root,parent;if(!isDefaultPrevented(e)&&e.keyCode===$_1xm2zi59jducwo6l.BACKSPACE&&(rng=selection.getRng(),container=rng.startContainer,offset=rng.startOffset,root=dom.getRoot(),parent=container,rng.collapsed&&0===offset)){for(;parent&&parent.parentNode&&parent.parentNode.firstChild===parent&&parent.parentNode!==root;)parent=parent.parentNode;"BLOCKQUOTE"===parent.tagName&&(editor.formatter.toggle("blockquote",null,parent),rng=dom.createRng(),rng.setStart(container,0),rng.setEnd(container,0),selection.setRng(rng))}})}(),function(){var serializeRng=function(rng){var body=dom.create("body"),contents=rng.cloneContents();return body.appendChild(contents),selection.serializer.serialize(body,{format:"html"})},allContentsSelected=function(rng){var selection=serializeRng(rng),allRng=dom.createRng();return allRng.selectNode(editor.getBody()),selection===serializeRng(allRng)};editor.on("keydown",function(e){var isCollapsed,body,keyCode=e.keyCode;if(!isDefaultPrevented(e)&&(keyCode===DELETE||keyCode===BACKSPACE)){if(isCollapsed=editor.selection.isCollapsed(),body=editor.getBody(),isCollapsed&&!dom.isEmpty(body))return;if(!isCollapsed&&!allContentsSelected(editor.selection.getRng()))return;e.preventDefault(),editor.setContent(""),body.firstChild&&dom.isBlock(body.firstChild)?editor.selection.setCursorLocation(body.firstChild,0):editor.selection.setCursorLocation(body,0),editor.nodeChanged()}})}(),$_cum1kc9jducwn99.windowsPhone||function(){editor.on("keyup focusin mouseup",function(e){$_1xm2zi59jducwo6l.modifierPressed(e)||selection.normalize()},!0)}(),isWebKit&&(function(){editor.settings.content_editable||dom.bind(editor.getDoc(),"mousedown mouseup",function(e){var rng;if(e.target===editor.getDoc().documentElement)if(rng=selection.getRng(),editor.getBody().focus(),"mousedown"===e.type){if(isCaretContainer(rng.startContainer))return;selection.placeCaretAt(e.clientX,e.clientY)}else selection.setRng(rng)})}(),function(){editor.on("click",function(e){var target=e.target;/^(IMG|HR)$/.test(target.nodeName)&&"false"!==dom.getContentEditableParent(target)&&(e.preventDefault(),editor.selection.select(target),editor.nodeChanged()),"A"===target.nodeName&&dom.hasClass(target,"mce-item-anchor")&&(e.preventDefault(),selection.select(target))})}(),function(){settings.forced_root_block&&editor.on("init",function(){setEditorCommandState("DefaultParagraphSeparator",settings.forced_root_block)})}(),function(){editor.on("init",function(){editor.dom.bind(editor.getBody(),"submit",function(e){e.preventDefault()})})}(),disableBackspaceIntoATable(),function(){parser.addNodeFilter("br",function(nodes){for(var i=nodes.length;i--;)"Apple-interchange-newline"===nodes[i].attr("class")&&nodes[i].remove()})}(),$_cum1kc9jducwn99.iOS?(function(){editor.inline||editor.on("keydown",function(){document.activeElement===document.body&&editor.getWin().focus()})}(),bodyHeight(),function(){editor.on("click",function(e){var elm=e.target;do{if("A"===elm.tagName)return void e.preventDefault()}while(elm=elm.parentNode)}),editor.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")}()):selectAll()),$_cum1kc9jducwn99.ie>=11&&(bodyHeight(),disableBackspaceIntoATable()),$_cum1kc9jducwn99.ie&&(selectAll(),function(){setEditorCommandState("AutoUrlDetect",!1)}(),function(){editor.on("dragstart",function(e){setMceInternalContent(e)}),editor.on("drop",function(e){if(!isDefaultPrevented(e)){var internalContent=getMceInternalContent(e);if(internalContent&&internalContent.id!==editor.id){e.preventDefault();var rng=$_ghraby68jducwodg.fromPoint(e.x,e.y,editor.getDoc());selection.setRng(rng),insertClipboardContents(internalContent.html,!0)}}})}()),isGecko&&(!function(){editor.on("keydown",function(e){if(!isDefaultPrevented(e)&&e.keyCode===BACKSPACE){if(!editor.getBody().getElementsByTagName("hr").length)return;if(selection.isCollapsed()&&0===selection.getRng().startOffset){var node=selection.getNode(),previousSibling=node.previousSibling;if("HR"===node.nodeName)return dom.remove(node),void e.preventDefault();previousSibling&&previousSibling.nodeName&&"hr"===previousSibling.nodeName.toLowerCase()&&(dom.remove(previousSibling),e.preventDefault())}}})}(),function(){Range.prototype.getClientRects||editor.on("mousedown",function(e){if(!isDefaultPrevented(e)&&"HTML"===e.target.nodeName){var body_1=editor.getBody();body_1.blur(),$_83mf8ygjducwnbc.setEditorTimeout(editor,function(){body_1.focus()})}})}(),function(){var getAttributeApplyFunction=function(){var template=dom.getAttribs(selection.getStart().cloneNode(!1));return function(){var target=selection.getStart();target!==editor.getBody()&&(dom.setAttrib(target,"style",null),each(template,function(attr){target.setAttributeNode(attr.cloneNode(!0))}))}},isSelectionAcrossElements=function(){return!selection.isCollapsed()&&dom.getParent(selection.getStart(),dom.isBlock)!==dom.getParent(selection.getEnd(),dom.isBlock)};editor.on("keypress",function(e){var applyAttributes;if(!isDefaultPrevented(e)&&(8===e.keyCode||46===e.keyCode)&&isSelectionAcrossElements())return applyAttributes=getAttributeApplyFunction(),editor.getDoc().execCommand("delete",!1,null),applyAttributes(),e.preventDefault(),!1}),dom.bind(editor.getDoc(),"cut",function(e){var applyAttributes;!isDefaultPrevented(e)&&isSelectionAcrossElements()&&(applyAttributes=getAttributeApplyFunction(),$_83mf8ygjducwnbc.setEditorTimeout(editor,function(){applyAttributes()}))})}(),function(){var setOpts=function(){setEditorCommandState("StyleWithCSS",!1),setEditorCommandState("enableInlineTableEditing",!1),settings.object_resizing||setEditorCommandState("enableObjectResizing",!1)};settings.readonly||editor.on("BeforeExecCommand MouseDown",setOpts)}(),function(){var fixLinks=function(){each(dom.select("a"),function(node){var parentNode=node.parentNode,root=dom.getRoot();if(parentNode.lastChild===node){for(;parentNode&&!dom.isBlock(parentNode);){if(parentNode.parentNode.lastChild!==parentNode||parentNode===root)return;parentNode=parentNode.parentNode}dom.add(parentNode,"br",{"data-mce-bogus":1})}})};editor.on("SetContent ExecCommand",function(e){"setcontent"!==e.type&&"mceInsertLink"!==e.command||fixLinks()})}(),function(){editor.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")}(),function(){$_cum1kc9jducwn99.mac&&editor.on("keydown",function(e){!$_1xm2zi59jducwo6l.metaKeyPressed(e)||e.shiftKey||37!==e.keyCode&&39!==e.keyCode||(e.preventDefault(),editor.selection.getSel().modify("move",37===e.keyCode?"backward":"forward","lineboundary"))})}(),disableBackspaceIntoATable()),{refreshContentEditable:refreshContentEditable,isHidden:isHidden}}function RangeUtils(dom){return{walk:function(rng,callback){return $_ee8wld5ljducwo96.walk(dom,rng,callback)},split:$_9e24g13njducwnv4.split,normalize:function(rng){return $_altsby3xjducwnz5.normalize(dom,rng).fold($_60qu7r6jducwn73.constant(!1),function(normalizedRng){return rng.setStart(normalizedRng.startContainer,normalizedRng.startOffset),rng.setEnd(normalizedRng.endContainer,normalizedRng.endOffset),!0})}}}var opera,webkit,ie,ie11,ie12,gecko,mac,iDevice,android,fileApi,phone,tablet,windowsPhone,noop=function(){},noarg=function(f){return function(){return f()}},compose=function(fa,fb){return function(){return fa(fb.apply(null,arguments))}},constant=function(value){return function(){return value}},identity=function(x){return x},tripleEquals=function(a,b){return a===b},curry=function(f){for(var args=new Array(arguments.length-1),i=1;i<arguments.length;i++)args[i-1]=arguments[i];return function(){for(var newArgs=new Array(arguments.length),j=0;j<newArgs.length;j++)newArgs[j]=arguments[j];var all=args.concat(newArgs);return f.apply(null,all)}},not=function(f){return function(){return!f.apply(null,arguments)}},die=function(msg){return function(){throw new Error(msg)}},apply=function(f){return f()},call=function(f){f()},never=constant(!1),always=constant(!0),$_60qu7r6jducwn73={noop:noop,noarg:noarg,compose:compose,constant:constant,identity:identity,tripleEquals:tripleEquals,curry:curry,not:not,die:die,apply:apply,call:call,never:never,always:always},never$1=$_60qu7r6jducwn73.never,always$1=$_60qu7r6jducwn73.always,none=function(){return NONE},NONE=function(){var eq=function(o){return o.isNone()},call=function(thunk){return thunk()},id=function(n){return n},noop=function(){},me={fold:function(n,s){return n()},is:never$1,isSome:never$1,isNone:always$1,getOr:id,getOrThunk:call,getOrDie:function(msg){throw new Error(msg||"error: getOrDie called on none.")},or:id,orThunk:call,map:none,ap:none,each:noop,bind:none,flatten:none,exists:never$1,forall:always$1,filter:none,equals:eq,equals_:eq,toArray:function(){return[]},toString:$_60qu7r6jducwn73.constant("none()")};return Object.freeze&&Object.freeze(me),me}(),some=function(a){var constant_a=function(){return a},self=function(){return me},map=function(f){return some(f(a))},bind=function(f){return f(a)},me={fold:function(n,s){return s(a)},is:function(v){return a===v},isSome:always$1,isNone:never$1,getOr:constant_a,getOrThunk:constant_a,getOrDie:constant_a,or:self,orThunk:self,map:map,ap:function(optfab){return optfab.fold(none,function(fab){return some(fab(a))})},each:function(f){f(a)},bind:bind,flatten:constant_a,exists:bind,forall:bind,filter:function(f){return f(a)?me:NONE},equals:function(o){return o.is(a)},equals_:function(o,elementEq){return o.fold(never$1,function(b){return elementEq(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return me},from=function(value){return null===value||void 0===value?NONE:some(value)},Option={some:some,none:none,from:from},rawIndexOf=function(){var pIndexOf=Array.prototype.indexOf,fastIndex=function(xs,x){return pIndexOf.call(xs,x)},slowIndex=function(xs,x){return slowIndexOf(xs,x)};return void 0===pIndexOf?slowIndex:fastIndex}(),indexOf=function(xs,x){var r=rawIndexOf(xs,x);return r===-1?Option.none():Option.some(r)},contains=function(xs,x){return rawIndexOf(xs,x)>-1},exists=function(xs,pred){return findIndex(xs,pred).isSome()},range=function(num,f){for(var r=[],i=0;i<num;i++)r.push(f(i));return r},chunk=function(array,size){for(var r=[],i=0;i<array.length;i+=size){var s=array.slice(i,i+size);r.push(s)}return r},map=function(xs,f){for(var len=xs.length,r=new Array(len),i=0;i<len;i++){var x=xs[i];r[i]=f(x,i,xs)}return r},each=function(xs,f){for(var i=0,len=xs.length;i<len;i++){f(xs[i],i,xs)}},eachr=function(xs,f){for(var i=xs.length-1;i>=0;i--){f(xs[i],i,xs)}},partition=function(xs,pred){for(var pass=[],fail=[],i=0,len=xs.length;i<len;i++){var x=xs[i];(pred(x,i,xs)?pass:fail).push(x)}return{pass:pass,fail:fail}},filter=function(xs,pred){for(var r=[],i=0,len=xs.length;i<len;i++){var x=xs[i];pred(x,i,xs)&&r.push(x)}return r},groupBy=function(xs,f){if(0===xs.length)return[];for(var wasType=f(xs[0]),r=[],group=[],i=0,len=xs.length;i<len;i++){var x=xs[i],type=f(x);type!==wasType&&(r.push(group),group=[]),wasType=type,group.push(x)}return 0!==group.length&&r.push(group),r},foldr=function(xs,f,acc){return eachr(xs,function(x){acc=f(acc,x)}),acc},foldl=function(xs,f,acc){return each(xs,function(x){acc=f(acc,x)}),acc},find=function(xs,pred){for(var i=0,len=xs.length;i<len;i++){var x=xs[i];if(pred(x,i,xs))return Option.some(x)}return Option.none()},findIndex=function(xs,pred){for(var i=0,len=xs.length;i<len;i++){if(pred(xs[i],i,xs))return Option.some(i)}return Option.none()},slowIndexOf=function(xs,x){for(var i=0,len=xs.length;i<len;++i)if(xs[i]===x)return i;return-1},push=Array.prototype.push,flatten=function(xs){for(var r=[],i=0,len=xs.length;i<len;++i){if(!Array.prototype.isPrototypeOf(xs[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+xs);push.apply(r,xs[i])}return r},bind=function(xs,f){var output=map(xs,f);return flatten(output)},forall=function(xs,pred){for(var i=0,len=xs.length;i<len;++i){if(pred(xs[i],i,xs)!==!0)return!1}return!0},equal=function(a1,a2){return a1.length===a2.length&&forall(a1,function(x,i){return x===a2[i]})},slice=Array.prototype.slice,reverse=function(xs){var r=slice.call(xs,0);return r.reverse(),r},difference=function(a1,a2){return filter(a1,function(x){return!contains(a2,x)})},mapToObject=function(xs,f){for(var r={},i=0,len=xs.length;i<len;i++){var x=xs[i];r[String(x)]=f(x,i)}return r},pure=function(x){return[x]},sort=function(xs,comparator){var copy=slice.call(xs,0);return copy.sort(comparator),copy},head=function(xs){return 0===xs.length?Option.none():Option.some(xs[0])},last=function(xs){return 0===xs.length?Option.none():Option.some(xs[xs.length-1])},$_2dw1bj4jducwn6g={map:map,each:each,eachr:eachr,partition:partition,filter:filter,groupBy:groupBy,indexOf:indexOf,foldr:foldr,foldl:foldl,find:find,findIndex:findIndex,flatten:flatten,bind:bind,forall:forall,exists:exists,contains:contains,equal:equal,reverse:reverse,chunk:chunk,difference:difference,mapToObject:mapToObject,pure:pure,sort:sort,range:range,head:head,last:last},global="undefined"!=typeof window?window:Function("return this;")(),path=function(parts,scope){for(var o=void 0!==scope&&null!==scope?scope:global,i=0;i<parts.length&&void 0!==o&&null!==o;++i)o=o[parts[i]];return o},resolve=function(p,scope){var parts=p.split(".");return path(parts,scope)},step=function(o,part){return void 0!==o[part]&&null!==o[part]||(o[part]={}),o[part]},forge=function(parts,target){for(var o=void 0!==target?target:global,i=0;i<parts.length;++i)o=step(o,parts[i]);return o},namespace=function(name,target){var parts=name.split(".");return forge(parts,target)},$_4e16w2cjducwn9k={path:path,resolve:resolve,forge:forge,namespace:namespace},unsafe=function(name,scope){return $_4e16w2cjducwn9k.resolve(name,scope)},getOrDie=function(name,scope){var actual=unsafe(name,scope);if(void 0===actual||null===actual)throw name+" not available on this browser";return actual},$_850zr7bjducwn9g={getOrDie:getOrDie},url=function(){return $_850zr7bjducwn9g.getOrDie("URL")},createObjectURL=function(blob){return url().createObjectURL(blob)},revokeObjectURL=function(u){url().revokeObjectURL(u)},$_bqa5nlajducwn9f={createObjectURL:createObjectURL,revokeObjectURL:revokeObjectURL},nav=navigator,userAgent=nav.userAgent,matchMediaQuery=function(query){return"matchMedia"in window&&matchMedia(query).matches};opera=!1,android=/Android/.test(userAgent),webkit=/WebKit/.test(userAgent),ie=!webkit&&!opera&&/MSIE/gi.test(userAgent)&&/Explorer/gi.test(nav.appName),ie=ie&&/MSIE (\w+)\./.exec(userAgent)[1],ie11=userAgent.indexOf("Trident/")!==-1&&(userAgent.indexOf("rv:")!==-1||nav.appName.indexOf("Netscape")!==-1)&&11,ie12=userAgent.indexOf("Edge/")!==-1&&!ie&&!ie11&&12,ie=ie||ie11||ie12,gecko=!webkit&&!ie11&&/Gecko/.test(userAgent),mac=userAgent.indexOf("Mac")!==-1,iDevice=/(iPad|iPhone)/.test(userAgent),fileApi="FormData"in window&&"FileReader"in window&&"URL"in window&&!!$_bqa5nlajducwn9f.createObjectURL,phone=matchMediaQuery("only screen and (max-device-width: 480px)")&&(android||iDevice),tablet=matchMediaQuery("only screen and (min-width: 800px)")&&(android||iDevice),windowsPhone=userAgent.indexOf("Windows Phone")!==-1,ie12&&(webkit=!1);var requestAnimationFramePromise,contentEditable=!iDevice||fileApi||parseInt(userAgent.match(/AppleWebKit\/(\d*)/)[1],10)>=534,$_cum1kc9jducwn99={opera:opera,webkit:webkit,ie:ie,gecko:gecko,mac:mac,iOS:iDevice,android:android,contentEditable:contentEditable,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!==ie,range:window.getSelection&&"Range"in window,documentMode:ie&&!ie12?document.documentMode||7:10,fileApi:fileApi,ceFalse:ie===!1||ie>8,cacheSuffix:"",container:null,overrideViewPort:null,experimentalShadowDom:!1,canHaveCSP:ie===!1||ie>11,desktop:!phone&&!tablet,windowsPhone:windowsPhone},promiseObj=window.Promise?window.Promise:function(){function bind(fn,thisArg){return function(){fn.apply(thisArg,arguments)}}function handle(deferred){var me=this;if(null===this._state)return void this._deferreds.push(deferred);asap(function(){var cb=me._state?deferred.onFulfilled:deferred.onRejected;if(null===cb)return void(me._state?deferred.resolve:deferred.reject)(me._value);var ret;try{ret=cb(me._value)}catch(e){return void deferred.reject(e)}deferred.resolve(ret)})}function resolve(newValue){try{if(newValue===this)throw new TypeError("A promise cannot be resolved with itself.");if(newValue&&("object"==typeof newValue||"function"==typeof newValue)){var then=newValue.then;if("function"==typeof then)return void doResolve(bind(then,newValue),bind(resolve,this),bind(reject,this))}this._state=!0,this._value=newValue,finale.call(this)}catch(e){reject.call(this,e)}}function reject(newValue){this._state=!1,this._value=newValue,finale.call(this)}function finale(){for(var i=0,len=this._deferreds.length;i<len;i++)handle.call(this,this._deferreds[i]);this._deferreds=null}function Handler(onFulfilled,onRejected,resolve,reject){this.onFulfilled="function"==typeof onFulfilled?onFulfilled:null,this.onRejected="function"==typeof onRejected?onRejected:null,this.resolve=resolve,this.reject=reject}function doResolve(fn,onFulfilled,onRejected){var done=!1;try{fn(function(value){done||(done=!0,onFulfilled(value))},function(reason){done||(done=!0,onRejected(reason))})}catch(ex){if(done)return;done=!0,onRejected(ex)}}var isArray=Array.isArray||function(value){return"[object Array]"===Object.prototype.toString.call(value)},Promise=function(fn){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof fn)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],doResolve(fn,bind(resolve,this),bind(reject,this))},asap=Promise.immediateFn||"function"==typeof setImmediate&&setImmediate||function(fn){setTimeout(fn,1)};return Promise.prototype.catch=function(onRejected){return this.then(null,onRejected)},Promise.prototype.then=function(onFulfilled,onRejected){var me=this;return new Promise(function(resolve,reject){handle.call(me,new Handler(onFulfilled,onRejected,resolve,reject))})},Promise.all=function(){var args=Array.prototype.slice.call(1===arguments.length&&isArray(arguments[0])?arguments[0]:arguments);return new Promise(function(resolve,reject){function res(i,val){try{if(val&&("object"==typeof val||"function"==typeof val)){var then=val.then;if("function"==typeof then)return void then.call(val,function(val){res(i,val)},reject)}args[i]=val,0==--remaining&&resolve(args)}catch(ex){reject(ex)}}if(0===args.length)return resolve([]);for(var remaining=args.length,i=0;i<args.length;i++)res(i,args[i])})},Promise.resolve=function(value){return value&&"object"==typeof value&&value.constructor===Promise?value:new Promise(function(resolve){resolve(value)})},Promise.reject=function(value){return new Promise(function(resolve,reject){reject(value)})},Promise.race=function(values){return new Promise(function(resolve,reject){for(var i=0,len=values.length;i<len;i++)values[i].then(resolve,reject)})},Promise}(),requestAnimationFrame=function(callback,element){var i,requestAnimationFrameFunc=window.requestAnimationFrame,vendors=["ms","moz","webkit"],featurefill=function(callback){window.setTimeout(callback,0)};for(i=0;i<vendors.length&&!requestAnimationFrameFunc;i++)requestAnimationFrameFunc=window[vendors[i]+"RequestAnimationFrame"];requestAnimationFrameFunc||(requestAnimationFrameFunc=featurefill),requestAnimationFrameFunc(callback,element)},wrappedSetTimeout=function(callback,time){return"number"!=typeof time&&(time=0),setTimeout(callback,time)},wrappedSetInterval=function(callback,time){return"number"!=typeof time&&(time=1),setInterval(callback,time)},wrappedClearTimeout=function(id){return clearTimeout(id)},wrappedClearInterval=function(id){return clearInterval(id)},debounce=function(callback,time){var timer,func;return func=function(){var args=arguments;clearTimeout(timer),timer=wrappedSetTimeout(function(){callback.apply(this,args)},time)},func.stop=function(){clearTimeout(timer)},func},$_83mf8ygjducwnbc={requestAnimationFrame:function(callback,element){if(requestAnimationFramePromise)return void requestAnimationFramePromise.then(callback);requestAnimationFramePromise=new promiseObj(function(resolve){element||(element=document.body),requestAnimationFrame(resolve,element)}).then(callback)},setTimeout:wrappedSetTimeout,setInterval:wrappedSetInterval,setEditorTimeout:function(editor,callback,time){return wrappedSetTimeout(function(){editor.removed||callback()},time)},setEditorInterval:function(editor,callback,time){var timer;return timer=wrappedSetInterval(function(){editor.removed?clearInterval(timer):callback()},time)},debounce:debounce,throttle:debounce,clearInterval:wrappedClearInterval,clearTimeout:wrappedClearTimeout},mouseEventRe=/^(?:mouse|contextmenu)|click/,deprecated={
keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},hasIsDefaultPrevented=function(event){return event.isDefaultPrevented===returnTrue||event.isDefaultPrevented===returnFalse},returnFalse=function(){return!1},returnTrue=function(){return!0},addEvent=function(target,name,callback,capture){target.addEventListener?target.addEventListener(name,callback,capture||!1):target.attachEvent&&target.attachEvent("on"+name,callback)},removeEvent=function(target,name,callback,capture){target.removeEventListener?target.removeEventListener(name,callback,capture||!1):target.detachEvent&&target.detachEvent("on"+name,callback)},getTargetFromShadowDom=function(event,defaultTarget){var path,target=defaultTarget;return path=event.path,path&&path.length>0&&(target=path[0]),event.composedPath&&(path=event.composedPath())&&path.length>0&&(target=path[0]),target},fix=function(originalEvent,data){var name,event=data||{};for(name in originalEvent)deprecated[name]||(event[name]=originalEvent[name]);if(event.target||(event.target=event.srcElement||document),$_cum1kc9jducwn99.experimentalShadowDom&&(event.target=getTargetFromShadowDom(originalEvent,event.target)),originalEvent&&mouseEventRe.test(originalEvent.type)&&void 0===originalEvent.pageX&&void 0!==originalEvent.clientX){var eventDoc=event.target.ownerDocument||document,doc=eventDoc.documentElement,body=eventDoc.body;event.pageX=originalEvent.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),event.pageY=originalEvent.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}return event.preventDefault=function(){event.isDefaultPrevented=returnTrue,originalEvent&&(originalEvent.preventDefault?originalEvent.preventDefault():originalEvent.returnValue=!1)},event.stopPropagation=function(){event.isPropagationStopped=returnTrue,originalEvent&&(originalEvent.stopPropagation?originalEvent.stopPropagation():originalEvent.cancelBubble=!0)},event.stopImmediatePropagation=function(){event.isImmediatePropagationStopped=returnTrue,event.stopPropagation()},hasIsDefaultPrevented(event)===!1&&(event.isDefaultPrevented=returnFalse,event.isPropagationStopped=returnFalse,event.isImmediatePropagationStopped=returnFalse),void 0===event.metaKey&&(event.metaKey=!1),event},bindOnReady=function(win,callback,eventUtils){var doc=win.document,event={type:"ready"};if(eventUtils.domLoaded)return void callback(event);var isDocReady=function(){return"complete"===doc.readyState||"interactive"===doc.readyState&&doc.body},readyHandler=function(){eventUtils.domLoaded||(eventUtils.domLoaded=!0,callback(event))},waitForDomLoaded=function(){isDocReady()&&(removeEvent(doc,"readystatechange",waitForDomLoaded),readyHandler())},tryScroll=function(){try{doc.documentElement.doScroll("left")}catch(ex){return void $_83mf8ygjducwnbc.setTimeout(tryScroll)}readyHandler()};!doc.addEventListener||$_cum1kc9jducwn99.ie&&$_cum1kc9jducwn99.ie<11?(addEvent(doc,"readystatechange",waitForDomLoaded),doc.documentElement.doScroll&&win.self===win.top&&tryScroll()):isDocReady()?readyHandler():addEvent(win,"DOMContentLoaded",readyHandler),addEvent(win,"load",readyHandler)},EventUtils=function(){var count,expando,hasFocusIn,hasMouseEnterLeave,mouseEnterLeave,self=this,events={};expando="mce-data-"+(+new Date).toString(32),hasMouseEnterLeave="onmouseenter"in document.documentElement,hasFocusIn="onfocusin"in document.documentElement,mouseEnterLeave={mouseenter:"mouseover",mouseleave:"mouseout"},count=1,self.domLoaded=!1,self.events=events;var executeHandlers=function(evt,id){var callbackList,i,l,callback,container=events[id];if(callbackList=container&&container[evt.type])for(i=0,l=callbackList.length;i<l;i++)if(callback=callbackList[i],callback&&callback.func.call(callback.scope,evt)===!1&&evt.preventDefault(),evt.isImmediatePropagationStopped())return};self.bind=function(target,names,callback,scope){var id,callbackList,i,name,fakeName,nativeHandler,capture,win=window,defaultNativeHandler=function(evt){executeHandlers(fix(evt||win.event),id)};if(target&&3!==target.nodeType&&8!==target.nodeType){for(target[expando]?id=target[expando]:(id=count++,target[expando]=id,events[id]={}),scope=scope||target,names=names.split(" "),i=names.length;i--;)name=names[i],nativeHandler=defaultNativeHandler,fakeName=capture=!1,"DOMContentLoaded"===name&&(name="ready"),self.domLoaded&&"ready"===name&&"complete"===target.readyState?callback.call(scope,fix({type:name})):(hasMouseEnterLeave||(fakeName=mouseEnterLeave[name])&&(nativeHandler=function(evt){var current,related;if(current=evt.currentTarget,(related=evt.relatedTarget)&&current.contains)related=current.contains(related);else for(;related&&related!==current;)related=related.parentNode;related||(evt=fix(evt||win.event),evt.type="mouseout"===evt.type?"mouseleave":"mouseenter",evt.target=current,executeHandlers(evt,id))}),hasFocusIn||"focusin"!==name&&"focusout"!==name||(capture=!0,fakeName="focusin"===name?"focus":"blur",nativeHandler=function(evt){evt=fix(evt||win.event),evt.type="focus"===evt.type?"focusin":"focusout",executeHandlers(evt,id)}),callbackList=events[id][name],callbackList?"ready"===name&&self.domLoaded?callback({type:name}):callbackList.push({func:callback,scope:scope}):(events[id][name]=callbackList=[{func:callback,scope:scope}],callbackList.fakeName=fakeName,callbackList.capture=capture,callbackList.nativeHandler=nativeHandler,"ready"===name?bindOnReady(target,nativeHandler,self):addEvent(target,fakeName||name,nativeHandler,capture)));return target=callbackList=0,callback}},self.unbind=function(target,names,callback){var id,callbackList,i,ci,name,eventMap;if(!target||3===target.nodeType||8===target.nodeType)return self;if(id=target[expando]){if(eventMap=events[id],names){for(names=names.split(" "),i=names.length;i--;)if(name=names[i],callbackList=eventMap[name]){if(callback)for(ci=callbackList.length;ci--;)if(callbackList[ci].func===callback){var nativeHandler=callbackList.nativeHandler,fakeName=callbackList.fakeName,capture=callbackList.capture;callbackList=callbackList.slice(0,ci).concat(callbackList.slice(ci+1)),callbackList.nativeHandler=nativeHandler,callbackList.fakeName=fakeName,callbackList.capture=capture,eventMap[name]=callbackList}callback&&0!==callbackList.length||(delete eventMap[name],removeEvent(target,callbackList.fakeName||name,callbackList.nativeHandler,callbackList.capture))}}else{for(name in eventMap)callbackList=eventMap[name],removeEvent(target,callbackList.fakeName||name,callbackList.nativeHandler,callbackList.capture);eventMap={}}for(name in eventMap)return self;delete events[id];try{delete target[expando]}catch(ex){target[expando]=null}}return self},self.fire=function(target,name,args){var id;if(!target||3===target.nodeType||8===target.nodeType)return self;args=fix(null,args),args.type=name,args.target=target;do{id=target[expando],id&&executeHandlers(args,id),target=target.parentNode||target.ownerDocument||target.defaultView||target.parentWindow}while(target&&!args.isPropagationStopped());return self},self.clean=function(target){var i,children,unbind=self.unbind;if(!target||3===target.nodeType||8===target.nodeType)return self;if(target[expando]&&unbind(target),target.getElementsByTagName||(target=target.document),target&&target.getElementsByTagName)for(unbind(target),children=target.getElementsByTagName("*"),i=children.length;i--;)target=children[i],target[expando]&&unbind(target);return self},self.destroy=function(){events={}},self.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}};EventUtils.Event=new EventUtils,EventUtils.Event.bind(window,"ready",function(){});var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document$1,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains$1,expando="sizzle"+-new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){return a===b&&(hasDuplicate=!0),0},strundefined="undefined",MAX_NEGATIVE=1<<31,hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push$1=arr.push,slice$1=arr.slice,indexOf$1=arr.indexOf||function(elem){for(var i=0,len=this.length;i<len;i++)if(this[i]===elem)return i;return-1},whitespace="[\\x20\\t\\r\\n\\f]",identifier="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",attributes="\\["+whitespace+"*("+identifier+")(?:"+whitespace+"*([*^$|!~]?=)"+whitespace+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+whitespace+"*\\]",pseudos=":("+identifier+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|.*)\\)|)",rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+identifier+")"),CLASS:new RegExp("^\\.("+identifier+")"),TAG:new RegExp("^("+identifier+"|[*])"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!==high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,1023&high|56320)};try{push$1.apply(arr=slice$1.call(preferredDoc.childNodes),preferredDoc.childNodes),arr[preferredDoc.childNodes.length].nodeType}catch(e){push$1={apply:arr.length?function(target,els){push_native.apply(target,slice$1.call(els))}:function(target,els){for(var j=target.length,i=0;target[j++]=els[i++];);target.length=j-1}}}var Sizzle=function(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument||context:preferredDoc)!==document$1&&setDocument(context),context=context||document$1,results=results||[],!selector||"string"!=typeof selector)return results;if(1!==(nodeType=context.nodeType)&&9!==nodeType)return[];if(documentIsHTML&&!seed){if(match=rquickExpr.exec(selector))if(m=match[1]){if(9===nodeType){if(!(elem=context.getElementById(m))||!elem.parentNode)return results;if(elem.id===m)return results.push(elem),results}else if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains$1(context,elem)&&elem.id===m)return results.push(elem),results}else{if(match[2])return push$1.apply(results,context.getElementsByTagName(selector)),results;if((m=match[3])&&support.getElementsByClassName)return push$1.apply(results,context.getElementsByClassName(m)),results}if(support.qsa&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(nid=old=expando,newContext=context,newSelector=9===nodeType&&selector,1===nodeType&&"object"!==context.nodeName.toLowerCase()){for(groups=tokenize(selector),(old=context.getAttribute("id"))?nid=old.replace(/'|\\/g,"\\$&"):context.setAttribute("id",nid),nid="[id='"+nid+"'] ",i=groups.length;i--;)groups[i]=nid+toSelector(groups[i]);newContext=rsibling.test(selector)&&testContext(context.parentNode)||context,newSelector=groups.join(",")}if(newSelector)try{return push$1.apply(results,newContext.querySelectorAll(newSelector)),results}catch(qsaError){}finally{old||context.removeAttribute("id")}}}return select(selector.replace(rtrim,"$1"),context,results,seed)};support=Sizzle.support={},isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return!!documentElement&&"HTML"!==documentElement.nodeName},setDocument=Sizzle.setDocument=function(node){var hasCompare,doc=node?node.ownerDocument||node:preferredDoc,parent=doc.defaultView;return doc!==document$1&&9===doc.nodeType&&doc.documentElement?(document$1=doc,docElem=doc.documentElement,documentIsHTML=!isXML(doc),parent&&parent!==function(win){try{return win.top}catch(ex){}return null}(parent)&&(parent.addEventListener?parent.addEventListener("unload",function(){setDocument()},!1):parent.attachEvent&&parent.attachEvent("onunload",function(){setDocument()})),support.attributes=!0,support.getElementsByTagName=!0,support.getElementsByClassName=rnative.test(doc.getElementsByClassName),support.getById=!0,Expr.find.ID=function(id,context){if(typeof context.getElementById!==strundefined&&documentIsHTML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}},Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}},Expr.find.TAG=support.getElementsByTagName?function(tag,context){if(typeof context.getElementsByTagName!==strundefined)return context.getElementsByTagName(tag)}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if("*"===tag){for(;elem=results[i++];)1===elem.nodeType&&tmp.push(elem);return tmp}return results},Expr.find.CLASS=support.getElementsByClassName&&function(className,context){if(documentIsHTML)return context.getElementsByClassName(className)},rbuggyMatches=[],rbuggyQSA=[],support.disconnectedMatch=!0,rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|")),rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|")),hasCompare=rnative.test(docElem.compareDocumentPosition),contains$1=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!(!bup||1!==bup.nodeType||!(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},sortOrder=hasCompare?function(a,b){if(a===b)return hasDuplicate=!0,0;var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;return compare?compare:(compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&compare||!support.sortDetached&&b.compareDocumentPosition(a)===compare?a===doc||a.ownerDocument===preferredDoc&&contains$1(preferredDoc,a)?-1:b===doc||b.ownerDocument===preferredDoc&&contains$1(preferredDoc,b)?1:sortInput?indexOf$1.call(sortInput,a)-indexOf$1.call(sortInput,b):0:4&compare?-1:1)}:function(a,b){if(a===b)return hasDuplicate=!0,0;var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup)return a===doc?-1:b===doc?1:aup?-1:bup?1:sortInput?indexOf$1.call(sortInput,a)-indexOf$1.call(sortInput,b):0;if(aup===bup)return siblingCheck(a,b);for(cur=a;cur=cur.parentNode;)ap.unshift(cur);for(cur=b;cur=cur.parentNode;)bp.unshift(cur);for(;ap[i]===bp[i];)i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0},doc):document$1},Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)},Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document$1&&setDocument(elem),expr=expr.replace(rattributeQuotes,"='$1']"),support.matchesSelector&&documentIsHTML&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr)))try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&11!==elem.document.nodeType)return ret}catch(e){}return Sizzle(expr,document$1,null,[elem]).length>0},Sizzle.contains=function(context,elem){return(context.ownerDocument||context)!==document$1&&setDocument(context),contains$1(context,elem)},Sizzle.attr=function(elem,name){(elem.ownerDocument||elem)!==document$1&&setDocument(elem);var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):void 0;return void 0!==val?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null},Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)},Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;if(hasDuplicate=!support.detectDuplicates,sortInput=!support.sortStable&&results.slice(0),results.sort(sortOrder),hasDuplicate){for(;elem=results[i++];)elem===results[i]&&(j=duplicates.push(i));for(;j--;)results.splice(duplicates[j],1)}return sortInput=null,results},getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(1===nodeType||9===nodeType||11===nodeType){if("string"==typeof elem.textContent)return elem.textContent;for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem)}else if(3===nodeType||4===nodeType)return elem.nodeValue}else for(;node=elem[i++];)ret+=getText(node);return ret},Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){return match[1]=match[1].replace(runescape,funescape),match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape),"~="===match[2]&&(match[3]=" "+match[3]+" "),match.slice(0,4)},CHILD:function(match){return match[1]=match[1].toLowerCase(),"nth"===match[1].slice(0,3)?(match[3]||Sizzle.error(match[0]),match[4]=+(match[4]?match[5]+(match[6]||1):2*("even"===match[3]||"odd"===match[3])),match[5]=+(match[7]+match[8]||"odd"===match[3])):match[3]&&Sizzle.error(match[0]),match},PSEUDO:function(match){var excess,unquoted=!match[6]&&match[2];return matchExpr.CHILD.test(match[0])?null:(match[3]?match[2]=match[4]||match[5]||"":unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,!0))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)&&(match[0]=match[0].slice(0,excess),match[2]=unquoted.slice(0,excess)),match.slice(0,3))}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return"*"===nodeNameSelector?function(){return!0}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test("string"==typeof elem.className&&elem.className||typeof elem.getAttribute!==strundefined&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);return null==result?"!="===operator:!operator||(result+="","="===operator?result===check:"!="===operator?result!==check:"^="===operator?check&&0===result.indexOf(check):"*="===operator?check&&result.indexOf(check)>-1:"$="===operator?check&&result.slice(-check.length)===check:"~="===operator?(" "+result+" ").indexOf(check)>-1:"|="===operator&&(result===check||result.slice(0,check.length+1)===check+"-"))}},CHILD:function(type,what,argument,first,last){var simple="nth"!==type.slice(0,3),forward="last"!==type.slice(-4),ofType="of-type"===what;return 1===first&&0===last?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){for(;dir;){for(node=elem;node=node[dir];)if(ofType?node.nodeName.toLowerCase()===name:1===node.nodeType)return!1;start=dir="only"===type&&!start&&"nextSibling"}return!0}if(start=[forward?parent.firstChild:parent.lastChild],forward&&useCache){for(outerCache=parent[expando]||(parent[expando]={}),cache=outerCache[type]||[],nodeIndex=cache[0]===dirruns&&cache[1],diff=cache[0]===dirruns&&cache[2],node=nodeIndex&&parent.childNodes[nodeIndex];node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop();)if(1===node.nodeType&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];break}}else if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns)diff=cache[1];else for(;(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())&&((ofType?node.nodeName.toLowerCase()!==name:1!==node.nodeType)||!++diff||(useCache&&((node[expando]||(node[expando]={}))[type]=[dirruns,diff]),node!==elem)););return(diff-=last)===first||diff%first==0&&diff/first>=0}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);return fn[expando]?fn(argument):fn.length>1?(args=[pseudo,pseudo,"",argument],Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){for(var idx,matched=fn(seed,argument),i=matched.length;i--;)idx=indexOf$1.call(seed,matched[i]),seed[idx]=!(matches[idx]=matched[i])}):function(elem){return fn(elem,0,args)}):fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){for(var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;i--;)(elem=unmatched[i])&&(seed[i]=!(matches[i]=elem))}):function(elem,context,xml){return input[0]=elem,matcher(input,null,xml,results),!results.pop()}}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),contains:markFunction(function(text){return text=text.replace(runescape,funescape),function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),lang:markFunction(function(lang){return ridentifier.test(lang||"")||Sizzle.error("unsupported lang: "+lang),lang=lang.replace(runescape,funescape).toLowerCase(),function(elem){var elemLang;do{if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))return(elemLang=elemLang.toLowerCase())===lang||0===elemLang.indexOf(lang+"-")}while((elem=elem.parentNode)&&1===elem.nodeType);return!1}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document$1.activeElement&&(!document$1.hasFocus||document$1.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:function(elem){return elem.disabled===!1},disabled:function(elem){return elem.disabled===!0},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return"input"===nodeName&&!!elem.checked||"option"===nodeName&&!!elem.selected},selected:function(elem){return elem.parentNode&&elem.parentNode.selectedIndex,elem.selected===!0},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling)if(elem.nodeType<6)return!1;return!0},parent:function(elem){return!Expr.pseudos.empty(elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},text:function(elem){var attr;return"input"===elem.nodeName.toLowerCase()&&"text"===elem.type&&(null==(attr=elem.getAttribute("type"))||"text"===attr.toLowerCase())},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){for(var i=0;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){for(var i=1;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;--i>=0;)matchIndexes.push(i);return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;++i<length;)matchIndexes.push(i);return matchIndexes})}},Expr.pseudos.nth=Expr.pseudos.eq;for(i in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Expr.pseudos[i]=function(type){return function(elem){return"input"===elem.nodeName.toLowerCase()&&elem.type===type}}(i);for(i in{submit:!0,reset:!0})Expr.pseudos[i]=function(type){return function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&elem.type===type}}(i);setFilters.prototype=Expr.filters=Expr.pseudos,Expr.setFilters=new setFilters,tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached)return parseOnly?0:cached.slice(0);for(soFar=selector,groups=[],preFilters=Expr.preFilter;soFar;){matched&&!(match=rcomma.exec(soFar))||(match&&(soFar=soFar.slice(match[0].length)||soFar),groups.push(tokens=[])),matched=!1,(match=rcombinators.exec(soFar))&&(matched=match.shift(),tokens.push({value:matched,type:match[0].replace(rtrim," ")}),soFar=soFar.slice(matched.length));for(type in Expr.filter)!(match=matchExpr[type].exec(soFar))||preFilters[type]&&!(match=preFilters[type](match))||(matched=match.shift(),tokens.push({value:matched,type:type,matches:match}),soFar=soFar.slice(matched.length));if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)},compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){for(match||(match=tokenize(selector)),i=match.length;i--;)cached=matcherFromTokens(match[i]),cached[expando]?setMatchers.push(cached):elementMatchers.push(cached);cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers)),cached.selector=selector}return cached},select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled="function"==typeof selector&&selector,match=!seed&&tokenize(selector=compiled.selector||selector);if(results=results||[],1===match.length){if(tokens=match[0]=match[0].slice(0),tokens.length>2&&"ID"===(token=tokens[0]).type&&support.getById&&9===context.nodeType&&documentIsHTML&&Expr.relative[tokens[1].type]){if(!(context=(Expr.find.ID(token.matches[0].replace(runescape,funescape),context)||[])[0]))return results;compiled&&(context=context.parentNode),selector=selector.slice(tokens.shift().value.length)}for(i=matchExpr.needsContext.test(selector)?0:tokens.length;i--&&(token=tokens[i],!Expr.relative[type=token.type]);)if((find=Expr.find[type])&&(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context))){if(tokens.splice(i,1),!(selector=seed.length&&toSelector(tokens)))return push$1.apply(results,seed),results;break}}return(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,rsibling.test(selector)&&testContext(context.parentNode)||context),results},support.sortStable=expando.split("").sort(sortOrder).join("")===expando,support.detectDuplicates=!!hasDuplicate,setDocument(),support.sortDetached=!0;var isArray=Array.isArray||function(obj){return"[object Array]"===Object.prototype.toString.call(obj)},toArray=function(obj){var i,l,array=obj;if(!isArray(obj))for(array=[],i=0,l=obj.length;i<l;i++)array[i]=obj[i];return array},each$1=function(o,cb,s){var n,l;if(!o)return 0;if(s=s||o,void 0!==o.length){for(n=0,l=o.length;n<l;n++)if(cb.call(s,o[n],n,o)===!1)return 0}else for(n in o)if(o.hasOwnProperty(n)&&cb.call(s,o[n],n,o)===!1)return 0;return 1},map$1=function(array,callback){var out=[];return each$1(array,function(item,index){out.push(callback(item,index,array))}),out},filter$1=function(a,f){var o=[];return each$1(a,function(v,index){f&&!f(v,index,a)||o.push(v)}),o},indexOf$2=function(a,v){var i,l;if(a)for(i=0,l=a.length;i<l;i++)if(a[i]===v)return i;return-1},reduce=function(collection,iteratee,accumulator,thisArg){var i=0;for(arguments.length<3&&(accumulator=collection[0]);i<collection.length;i++)accumulator=iteratee.call(thisArg,accumulator,collection[i],i);return accumulator},findIndex$1=function(array,predicate,thisArg){var i,l;for(i=0,l=array.length;i<l;i++)if(predicate.call(thisArg,array[i],i,array))return i;return-1},find$1=function(array,predicate,thisArg){var idx=findIndex$1(array,predicate,thisArg);if(idx!==-1)return array[idx]},last$1=function(collection){return collection[collection.length-1]},$_e6e6g1kjducwnfd={isArray:isArray,toArray:toArray,each:each$1,map:map$1,filter:filter$1,indexOf:indexOf$2,reduce:reduce,findIndex:findIndex$1,find:find$1,last:last$1},trim=function(str){return null===str||void 0===str?"":(""+str).replace(/^\s*|\s*$/g,"")},is=function(obj,type){return type?!("array"!==type||!$_e6e6g1kjducwnfd.isArray(obj))||typeof obj===type:void 0!==obj},makeMap=function(items,delim,map){var i;for(items=items||[],delim=delim||",","string"==typeof items&&(items=items.split(delim)),map=map||{},i=items.length;i--;)map[items[i]]={};return map},hasOwnProperty=function(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)},create=function(s,p,root){var sp,ns,cn,scn,c,self=this,de=0;if(s=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(s),cn=s[3].match(/(^|\.)(\w+)$/i)[2],ns=self.createNS(s[3].replace(/\.\w+$/,""),root),!ns[cn]){if("static"===s[2])return ns[cn]=p,void(this.onCreate&&this.onCreate(s[2],s[3],ns[cn]));p[cn]||(p[cn]=function(){},de=1),ns[cn]=p[cn],self.extend(ns[cn].prototype,p),s[5]&&(sp=self.resolve(s[5]).prototype,scn=s[5].match(/\.(\w+)$/i)[1],c=ns[cn],ns[cn]=de?function(){return sp[scn].apply(this,arguments)}:function(){return this.parent=sp[scn],c.apply(this,arguments)},ns[cn].prototype[cn]=ns[cn],self.each(sp,function(f,n){ns[cn].prototype[n]=sp[n]}),self.each(p,function(f,n){sp[n]?ns[cn].prototype[n]=function(){return this.parent=sp[n],f.apply(this,arguments)}:n!==cn&&(ns[cn].prototype[n]=f)})),self.each(p.static,function(f,n){ns[cn][n]=f})}},extend=function(obj,ext){for(var x=[],_i=2;_i<arguments.length;_i++)x[_i-2]=arguments[_i];var i,l,name,value,args=arguments;for(i=1,l=args.length;i<l;i++){ext=args[i];for(name in ext)ext.hasOwnProperty(name)&&void 0!==(value=ext[name])&&(obj[name]=value)}return obj},walk=function(o,f,n,s){s=s||this,o&&(n&&(o=o[n]),$_e6e6g1kjducwnfd.each(o,function(o,i){if(f.call(s,o,i,n)===!1)return!1;walk(o,f,n,s)}))},createNS=function(n,o){var i,v;for(o=o||window,n=n.split("."),i=0;i<n.length;i++)v=n[i],o[v]||(o[v]={}),o=o[v];return o},resolve$1=function(n,o){var i,l;for(o=o||window,n=n.split("."),i=0,l=n.length;i<l&&(o=o[n[i]]);i++);return o},explode=function(s,d){return!s||is(s,"array")?s:$_e6e6g1kjducwnfd.map(s.split(d||","),trim)},_addCacheSuffix=function(url){var cacheSuffix=$_cum1kc9jducwn99.cacheSuffix;return cacheSuffix&&(url+=(url.indexOf("?")===-1?"?":"&")+cacheSuffix),url},$_8i2houjjducwnd2={trim:trim,isArray:$_e6e6g1kjducwnfd.isArray,is:is,toArray:$_e6e6g1kjducwnfd.toArray,makeMap:makeMap,each:$_e6e6g1kjducwnfd.each,map:$_e6e6g1kjducwnfd.map,grep:$_e6e6g1kjducwnfd.filter,inArray:$_e6e6g1kjducwnfd.indexOf,hasOwn:hasOwnProperty,extend:extend,create:create,walk:walk,createNS:createNS,resolve:resolve$1,explode:explode,_addCacheSuffix:_addCacheSuffix
},doc=document,push$2=Array.prototype.push,slice$2=Array.prototype.slice,rquickExpr$1=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,Event=EventUtils.Event,skipUniques=$_8i2houjjducwnd2.makeMap("children,contents,next,prev"),isDefined=function(obj){return void 0!==obj},isString=function(obj){return"string"==typeof obj},isWindow=function(obj){return obj&&obj===obj.window},createFragment=function(html,fragDoc){var frag,node,container;for(fragDoc=fragDoc||doc,container=fragDoc.createElement("div"),frag=fragDoc.createDocumentFragment(),container.innerHTML=html;node=container.firstChild;)frag.appendChild(node);return frag},domManipulate=function(targetNodes,sourceItem,callback,reverse){var i;if(isString(sourceItem))sourceItem=createFragment(sourceItem,getElementDocument(targetNodes[0]));else if(sourceItem.length&&!sourceItem.nodeType){if(sourceItem=DomQuery.makeArray(sourceItem),reverse)for(i=sourceItem.length-1;i>=0;i--)domManipulate(targetNodes,sourceItem[i],callback,reverse);else for(i=0;i<sourceItem.length;i++)domManipulate(targetNodes,sourceItem[i],callback,reverse);return targetNodes}if(sourceItem.nodeType)for(i=targetNodes.length;i--;)callback.call(targetNodes[i],sourceItem);return targetNodes},hasClass=function(node,className){return node&&className&&(" "+node.className+" ").indexOf(" "+className+" ")!==-1},wrap=function(elements,wrapper,all){var lastParent,newWrapper;return wrapper=DomQuery(wrapper)[0],elements.each(function(){var self=this;all&&lastParent===self.parentNode?newWrapper.appendChild(self):(lastParent=self.parentNode,newWrapper=wrapper.cloneNode(!1),self.parentNode.insertBefore(newWrapper,self),newWrapper.appendChild(self))}),elements},numericCssMap=$_8i2houjjducwnd2.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),booleanMap=$_8i2houjjducwnd2.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),propFix={for:"htmlFor",class:"className",readonly:"readOnly"},cssFix={float:"cssFloat"},attrHooks={},cssHooks={},DomQuery=function(selector,context){return new DomQuery.fn.init(selector,context)},inArray=function(item,array){var i;if(array.indexOf)return array.indexOf(item);for(i=array.length;i--;)if(array[i]===item)return i;return-1},trim$1=function(str){return null===str||void 0===str?"":(""+str).replace(/^\s*|\s*$/g,"")},each$2=function(obj,callback){var length,key,i,value;if(obj)if(void 0===(length=obj.length)){for(key in obj)if(obj.hasOwnProperty(key)&&(value=obj[key],callback.call(value,key,value)===!1))break}else for(i=0;i<length&&(value=obj[i],callback.call(value,i,value)!==!1);i++);return obj},grep=function(array,callback){var out=[];return each$2(array,function(i,item){callback(item,i)&&out.push(item)}),out},getElementDocument=function(element){return element?9===element.nodeType?element:element.ownerDocument:doc};DomQuery.fn=DomQuery.prototype={constructor:DomQuery,selector:"",context:null,length:0,init:function(selector,context){var match,node,self=this;if(!selector)return self;if(selector.nodeType)return self.context=self[0]=selector,self.length=1,self;if(context&&context.nodeType)self.context=context;else{if(context)return DomQuery(selector).attr(context);self.context=context=document}if(isString(selector)){if(self.selector=selector,!(match="<"===selector.charAt(0)&&">"===selector.charAt(selector.length-1)&&selector.length>=3?[null,selector,null]:rquickExpr$1.exec(selector)))return DomQuery(context).find(selector);if(match[1])for(node=createFragment(selector,getElementDocument(context)).firstChild;node;)push$2.call(self,node),node=node.nextSibling;else{if(!(node=getElementDocument(context).getElementById(match[2])))return self;if(node.id!==match[2])return self.find(selector);self.length=1,self[0]=node}}else this.add(selector,!1);return self},toArray:function(){return $_8i2houjjducwnd2.toArray(this)},add:function(items,sort){var nodes,i,self=this;if(isString(items))return self.add(DomQuery(items));if(sort!==!1)for(nodes=DomQuery.unique(self.toArray().concat(DomQuery.makeArray(items))),self.length=nodes.length,i=0;i<nodes.length;i++)self[i]=nodes[i];else push$2.apply(self,DomQuery.makeArray(items));return self},attr:function(name,value){var hook,self=this;if("object"==typeof name)each$2(name,function(name,value){self.attr(name,value)});else{if(!isDefined(value)){if(self[0]&&1===self[0].nodeType){if((hook=attrHooks[name])&&hook.get)return hook.get(self[0],name);if(booleanMap[name])return self.prop(name)?name:void 0;value=self[0].getAttribute(name,2),null===value&&(value=void 0)}return value}this.each(function(){var hook;if(1===this.nodeType){if((hook=attrHooks[name])&&hook.set)return void hook.set(this,value);null===value?this.removeAttribute(name,2):this.setAttribute(name,value,2)}})}return self},removeAttr:function(name){return this.attr(name,null)},prop:function(name,value){var self=this;if("object"==typeof(name=propFix[name]||name))each$2(name,function(name,value){self.prop(name,value)});else{if(!isDefined(value))return self[0]&&self[0].nodeType&&name in self[0]?self[0][name]:value;this.each(function(){1===this.nodeType&&(this[name]=value)})}return self},css:function(name,value){var elm,hook,self=this,camel=function(name){return name.replace(/-(\D)/g,function(a,b){return b.toUpperCase()})},dashed=function(name){return name.replace(/[A-Z]/g,function(a){return"-"+a})};if("object"==typeof name)each$2(name,function(name,value){self.css(name,value)});else if(isDefined(value))name=camel(name),"number"!=typeof value||numericCssMap[name]||(value=value.toString()+"px"),self.each(function(){var style=this.style;if((hook=cssHooks[name])&&hook.set)return void hook.set(this,value);try{this.style[cssFix[name]||name]=value}catch(ex){}null!==value&&""!==value||(style.removeProperty?style.removeProperty(dashed(name)):style.removeAttribute(name))});else{if(elm=self[0],(hook=cssHooks[name])&&hook.get)return hook.get(elm);if(elm.ownerDocument.defaultView)try{return elm.ownerDocument.defaultView.getComputedStyle(elm,null).getPropertyValue(dashed(name))}catch(ex){return}else if(elm.currentStyle)return elm.currentStyle[camel(name)]}return self},remove:function(){for(var node,self=this,i=this.length;i--;)node=self[i],Event.clean(node),node.parentNode&&node.parentNode.removeChild(node);return this},empty:function(){for(var node,self=this,i=this.length;i--;)for(node=self[i];node.firstChild;)node.removeChild(node.firstChild);return this},html:function(value){var i,self=this;if(isDefined(value)){i=self.length;try{for(;i--;)self[i].innerHTML=value}catch(ex){DomQuery(self[i]).empty().append(value)}return self}return self[0]?self[0].innerHTML:""},text:function(value){var i,self=this;if(isDefined(value)){for(i=self.length;i--;)"innerText"in self[i]?self[i].innerText=value:self[0].textContent=value;return self}return self[0]?self[0].innerText||self[0].textContent:""},append:function(){return domManipulate(this,arguments,function(node){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(node)})},prepend:function(){return domManipulate(this,arguments,function(node){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(node,this.firstChild)},!0)},before:function(){var self=this;return self[0]&&self[0].parentNode?domManipulate(self,arguments,function(node){this.parentNode.insertBefore(node,this)}):self},after:function(){var self=this;return self[0]&&self[0].parentNode?domManipulate(self,arguments,function(node){this.parentNode.insertBefore(node,this.nextSibling)},!0):self},appendTo:function(val){return DomQuery(val).append(this),this},prependTo:function(val){return DomQuery(val).prepend(this),this},replaceWith:function(content){return this.before(content).remove()},wrap:function(content){return wrap(this,content)},wrapAll:function(content){return wrap(this,content,!0)},wrapInner:function(content){return this.each(function(){DomQuery(this).contents().wrapAll(content)}),this},unwrap:function(){return this.parent().each(function(){DomQuery(this).replaceWith(this.childNodes)})},clone:function(){var result=[];return this.each(function(){result.push(this.cloneNode(!0))}),DomQuery(result)},addClass:function(className){return this.toggleClass(className,!0)},removeClass:function(className){return this.toggleClass(className,!1)},toggleClass:function(className,state){var self=this;return"string"!=typeof className?self:(className.indexOf(" ")!==-1?each$2(className.split(" "),function(){self.toggleClass(this,state)}):self.each(function(index,node){var existingClassName,classState;(classState=hasClass(node,className))!==state&&(existingClassName=node.className,classState?node.className=trim$1((" "+existingClassName+" ").replace(" "+className+" "," ")):node.className+=existingClassName?" "+className:className)}),self)},hasClass:function(className){return hasClass(this[0],className)},each:function(callback){return each$2(this,callback)},on:function(name,callback){return this.each(function(){Event.bind(this,name,callback)})},off:function(name,callback){return this.each(function(){Event.unbind(this,name,callback)})},trigger:function(name){return this.each(function(){"object"==typeof name?Event.fire(this,name.type,name):Event.fire(this,name)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new DomQuery(slice$2.apply(this,arguments))},eq:function(index){return index===-1?this.slice(index):this.slice(index,+index+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(selector){var i,l,ret=[];for(i=0,l=this.length;i<l;i++)DomQuery.find(selector,this[i],ret);return DomQuery(ret)},filter:function(selector){return DomQuery("function"==typeof selector?grep(this.toArray(),function(item,i){return selector(i,item)}):DomQuery.filter(selector,this.toArray()))},closest:function(selector){var result=[];return selector instanceof DomQuery&&(selector=selector[0]),this.each(function(i,node){for(;node;){if("string"==typeof selector&&DomQuery(node).is(selector)){result.push(node);break}if(node===selector){result.push(node);break}node=node.parentNode}}),DomQuery(result)},offset:function(offset){var elm,doc,docElm,pos,x=0,y=0;return offset?this.css(offset):(elm=this[0],elm&&(doc=elm.ownerDocument,docElm=doc.documentElement,elm.getBoundingClientRect&&(pos=elm.getBoundingClientRect(),x=pos.left+(docElm.scrollLeft||doc.body.scrollLeft)-docElm.clientLeft,y=pos.top+(docElm.scrollTop||doc.body.scrollTop)-docElm.clientTop)),{left:x,top:y})},push:push$2,sort:[].sort,splice:[].splice},$_8i2houjjducwnd2.extend(DomQuery,{extend:$_8i2houjjducwnd2.extend,makeArray:function(object){return isWindow(object)||object.nodeType?[object]:$_8i2houjjducwnd2.toArray(object)},inArray:inArray,isArray:$_8i2houjjducwnd2.isArray,each:each$2,trim:trim$1,grep:grep,find:Sizzle,expr:Sizzle.selectors,unique:Sizzle.uniqueSort,text:Sizzle.getText,contains:Sizzle.contains,filter:function(expr,elems,not){var i=elems.length;for(not&&(expr=":not("+expr+")");i--;)1!==elems[i].nodeType&&elems.splice(i,1);return elems=1===elems.length?DomQuery.find.matchesSelector(elems[0],expr)?[elems[0]]:[]:DomQuery.find.matches(expr,elems)}});var dir=function(el,prop,until){var matched=[],cur=el[prop];for("string"!=typeof until&&until instanceof DomQuery&&(until=until[0]);cur&&9!==cur.nodeType;){if(void 0!==until){if(cur===until)break;if("string"==typeof until&&DomQuery(cur).is(until))break}1===cur.nodeType&&matched.push(cur),cur=cur[prop]}return matched},sibling=function(node,siblingName,nodeType,until){var result=[];for(until instanceof DomQuery&&(until=until[0]);node;node=node[siblingName])if(!nodeType||node.nodeType===nodeType){if(void 0!==until){if(node===until)break;if("string"==typeof until&&DomQuery(node).is(until))break}result.push(node)}return result},firstSibling=function(node,siblingName,nodeType){for(node=node[siblingName];node;node=node[siblingName])if(node.nodeType===nodeType)return node;return null};each$2({parent:function(node){var parent=node.parentNode;return parent&&11!==parent.nodeType?parent:null},parents:function(node){return dir(node,"parentNode")},next:function(node){return firstSibling(node,"nextSibling",1)},prev:function(node){return firstSibling(node,"previousSibling",1)},children:function(node){return sibling(node.firstChild,"nextSibling",1)},contents:function(node){return $_8i2houjjducwnd2.toArray(("iframe"===node.nodeName?node.contentDocument||node.contentWindow.document:node).childNodes)}},function(name,fn){DomQuery.fn[name]=function(selector){var self=this,result=[];return self.each(function(){var nodes=fn.call(result,this,selector,result);nodes&&(DomQuery.isArray(nodes)?result.push.apply(result,nodes):result.push(nodes))}),this.length>1&&(skipUniques[name]||(result=DomQuery.unique(result)),0===name.indexOf("parents")&&(result=result.reverse())),result=DomQuery(result),selector?result.filter(selector):result}}),each$2({parentsUntil:function(node,until){return dir(node,"parentNode",until)},nextUntil:function(node,until){return sibling(node,"nextSibling",1,until).slice(1)},prevUntil:function(node,until){return sibling(node,"previousSibling",1,until).slice(1)}},function(name,fn){DomQuery.fn[name]=function(selector,filter){var self=this,result=[];return self.each(function(){var nodes=fn.call(result,this,selector,result);nodes&&(DomQuery.isArray(nodes)?result.push.apply(result,nodes):result.push(nodes))}),this.length>1&&(result=DomQuery.unique(result),0!==name.indexOf("parents")&&"prevUntil"!==name||(result=result.reverse())),result=DomQuery(result),filter?result.filter(filter):result}}),DomQuery.fn.is=function(selector){return!!selector&&this.filter(selector).length>0},DomQuery.fn.init.prototype=DomQuery.fn,DomQuery.overrideDefaults=function(callback){var defaults,sub=function(selector,context){return defaults=defaults||callback(),0===arguments.length&&(selector=defaults.element),context||(context=defaults.context),new sub.fn.init(selector,context)};return DomQuery.extend(sub,this),sub};var appendHooks=function(targetHooks,prop,hooks){each$2(hooks,function(name,func){targetHooks[name]=targetHooks[name]||{},targetHooks[name][prop]=func})};$_cum1kc9jducwn99.ie&&$_cum1kc9jducwn99.ie<8&&(appendHooks(attrHooks,"get",{maxlength:function(elm){var value=elm.maxLength;if(2147483647!==value)return value},size:function(elm){var value=elm.size;if(20!==value)return value},class:function(elm){return elm.className},style:function(elm){var value=elm.style.cssText;if(0!==value.length)return value}}),appendHooks(attrHooks,"set",{class:function(elm,value){elm.className=value},style:function(elm,value){elm.style.cssText=value}})),$_cum1kc9jducwn99.ie&&$_cum1kc9jducwn99.ie<9&&(cssFix.float="styleFloat",appendHooks(cssHooks,"set",{opacity:function(elm,value){var style=elm.style;null===value||""===value?style.removeAttribute("filter"):(style.zoom=1,style.filter="alpha(opacity="+100*value+")")}})),DomQuery.attrHooks=attrHooks,DomQuery.cssHooks=cssHooks;var namedEntities,baseEntities,reverseEntities,cached=function(f){var r,called=!1;return function(){return called||(called=!0,r=f.apply(null,arguments)),r}},$_2tix6bnjducwnfu={cached:cached},firstMatch=function(regexes,s){for(var i=0;i<regexes.length;i++){var x=regexes[i];if(x.test(s))return x}},find$2=function(regexes,agent){var r=firstMatch(regexes,agent);if(!r)return{major:0,minor:0};var group=function(i){return Number(agent.replace(r,"$"+i))};return nu(group(1),group(2))},detect=function(versionRegexes,agent){var cleanedAgent=String(agent).toLowerCase();return 0===versionRegexes.length?unknown():find$2(versionRegexes,cleanedAgent)},unknown=function(){return nu(0,0)},nu=function(major,minor){return{major:major,minor:minor}},$_84ynlaqjducwng0={nu:nu,detect:detect,unknown:unknown},isBrowser=function(name,current){return function(){return current===name}},unknown$1=function(){return nu$1({current:void 0,version:$_84ynlaqjducwng0.unknown()})},nu$1=function(info){var current=info.current;return{current:current,version:info.version,isEdge:isBrowser("Edge",current),isChrome:isBrowser("Chrome",current),isIE:isBrowser("IE",current),isOpera:isBrowser("Opera",current),isFirefox:isBrowser("Firefox",current),isSafari:isBrowser("Safari",current)}},$_g5txropjducwnfw={unknown:unknown$1,nu:nu$1,edge:$_60qu7r6jducwn73.constant("Edge"),chrome:$_60qu7r6jducwn73.constant("Chrome"),ie:$_60qu7r6jducwn73.constant("IE"),opera:$_60qu7r6jducwn73.constant("Opera"),firefox:$_60qu7r6jducwn73.constant("Firefox"),safari:$_60qu7r6jducwn73.constant("Safari")},isOS=function(name,current){return function(){return current===name}},unknown$2=function(){return nu$2({current:void 0,version:$_84ynlaqjducwng0.unknown()})},nu$2=function(info){var current=info.current;return{current:current,version:info.version,isWindows:isOS("Windows",current),isiOS:isOS("iOS",current),isAndroid:isOS("Android",current),isOSX:isOS("OSX",current),isLinux:isOS("Linux",current),isSolaris:isOS("Solaris",current),isFreeBSD:isOS("FreeBSD",current)}},$_3jpctqrjducwng2={unknown:unknown$2,nu:nu$2,windows:$_60qu7r6jducwn73.constant("Windows"),ios:$_60qu7r6jducwn73.constant("iOS"),android:$_60qu7r6jducwn73.constant("Android"),linux:$_60qu7r6jducwn73.constant("Linux"),osx:$_60qu7r6jducwn73.constant("OSX"),solaris:$_60qu7r6jducwn73.constant("Solaris"),freebsd:$_60qu7r6jducwn73.constant("FreeBSD")},detect$1=function(candidates,userAgent){var agent=String(userAgent).toLowerCase();return $_2dw1bj4jducwn6g.find(candidates,function(candidate){return candidate.search(agent)})},detectBrowser=function(browsers,userAgent){return detect$1(browsers,userAgent).map(function(browser){var version=$_84ynlaqjducwng0.detect(browser.versionRegexes,userAgent);return{current:browser.name,version:version}})},detectOs=function(oses,userAgent){return detect$1(oses,userAgent).map(function(os){var version=$_84ynlaqjducwng0.detect(os.versionRegexes,userAgent);return{current:os.name,version:version}})},$_9uwohctjducwng7={detectBrowser:detectBrowser,detectOs:detectOs},addToStart=function(str,prefix){return prefix+str},addToEnd=function(str,suffix){return str+suffix},removeFromStart=function(str,numChars){return str.substring(numChars)},removeFromEnd=function(str,numChars){return str.substring(0,str.length-numChars)},$_ezyal9wjducwngi={addToStart:addToStart,addToEnd:addToEnd,removeFromStart:removeFromStart,removeFromEnd:removeFromEnd},first=function(str,count){return str.substr(0,count)},last$2=function(str,count){return str.substr(str.length-count,str.length)},head$1=function(str){return""===str?Option.none():Option.some(str.substr(0,1))},tail=function(str){return""===str?Option.none():Option.some(str.substring(1))},$_a5k34jxjducwngk={first:first,last:last$2,head:head$1,tail:tail},checkRange=function(str,substr,start){return""===substr||!(str.length<substr.length)&&str.substr(start,start+substr.length)===substr},supplant=function(str,obj){var isStringOrNumber=function(a){var t=typeof a;return"string"===t||"number"===t};return str.replace(/\${([^{}]*)}/g,function(a,b){var value=obj[b];return isStringOrNumber(value)?value:a})},removeLeading=function(str,prefix){return startsWith(str,prefix)?$_ezyal9wjducwngi.removeFromStart(str,prefix.length):str},removeTrailing=function(str,prefix){return endsWith(str,prefix)?$_ezyal9wjducwngi.removeFromEnd(str,prefix.length):str},ensureLeading=function(str,prefix){return startsWith(str,prefix)?str:$_ezyal9wjducwngi.addToStart(str,prefix)},ensureTrailing=function(str,prefix){return endsWith(str,prefix)?str:$_ezyal9wjducwngi.addToEnd(str,prefix)},contains$2=function(str,substr){return str.indexOf(substr)!==-1},capitalize=function(str){return $_a5k34jxjducwngk.head(str).bind(function(head){return $_a5k34jxjducwngk.tail(str).map(function(tail){return head.toUpperCase()+tail})}).getOr(str)},startsWith=function(str,prefix){return checkRange(str,prefix,0)},endsWith=function(str,suffix){return checkRange(str,suffix,str.length-suffix.length)},trim$2=function(str){return str.replace(/^\s+|\s+$/g,"")},lTrim=function(str){return str.replace(/^\s+/g,"")},rTrim=function(str){return str.replace(/\s+$/g,"")},$_vrlmtvjducwngg={supplant:supplant,startsWith:startsWith,removeLeading:removeLeading,removeTrailing:removeTrailing,ensureLeading:ensureLeading,ensureTrailing:ensureTrailing,endsWith:endsWith,contains:contains$2,trim:trim$2,lTrim:lTrim,rTrim:rTrim,capitalize:capitalize},checkContains=function(target){return function(uastring){return $_vrlmtvjducwngg.contains(uastring,target)}},browsers=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(uastring){return $_vrlmtvjducwngg.contains(uastring,"edge/")&&$_vrlmtvjducwngg.contains(uastring,"chrome")&&$_vrlmtvjducwngg.contains(uastring,"safari")&&$_vrlmtvjducwngg.contains(uastring,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,/.*?version\/\ ?([0-9]+)\.([0-9]+).*/],search:function(uastring){return $_vrlmtvjducwngg.contains(uastring,"chrome")&&!$_vrlmtvjducwngg.contains(uastring,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(uastring){return $_vrlmtvjducwngg.contains(uastring,"msie")||$_vrlmtvjducwngg.contains(uastring,"trident")}},{name:"Opera",versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:checkContains("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:checkContains("firefox")},{name:"Safari",versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(uastring){return($_vrlmtvjducwngg.contains(uastring,"safari")||$_vrlmtvjducwngg.contains(uastring,"mobile/"))&&$_vrlmtvjducwngg.contains(uastring,"applewebkit")}}],oses=[{name:"Windows",search:checkContains("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(uastring){return $_vrlmtvjducwngg.contains(uastring,"iphone")||$_vrlmtvjducwngg.contains(uastring,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:checkContains("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:checkContains("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:checkContains("linux"),versionRegexes:[]},{name:"Solaris",search:checkContains("sunos"),versionRegexes:[]},{name:"FreeBSD",search:checkContains("freebsd"),versionRegexes:[]}],$_fywjeoujducwnga={browsers:$_60qu7r6jducwn73.constant(browsers),oses:$_60qu7r6jducwn73.constant(oses)},detect$2=function(userAgent){var browsers=$_fywjeoujducwnga.browsers(),oses=$_fywjeoujducwnga.oses(),browser=$_9uwohctjducwng7.detectBrowser(browsers,userAgent).fold($_g5txropjducwnfw.unknown,$_g5txropjducwnfw.nu),os=$_9uwohctjducwng7.detectOs(oses,userAgent).fold($_3jpctqrjducwng2.unknown,$_3jpctqrjducwng2.nu);return{browser:browser,os:os,deviceType:DeviceType(os,browser,userAgent)}},$_12k257ojducwnfv={detect:detect$2},detect$3=$_2tix6bnjducwnfu.cached(function(){var userAgent=navigator.userAgent;return $_12k257ojducwnfv.detect(userAgent)}),$_5hshlmmjducwnfr={detect:detect$3},fromHtml=function(html,scope){var doc=scope||document,div=doc.createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1)throw console.error("HTML does not have a single root node",html),"HTML must have a single root node";return fromDom(div.childNodes[0])},fromTag=function(tag,scope){var doc=scope||document,node=doc.createElement(tag);return fromDom(node)},fromText=function(text,scope){var doc=scope||document,node=doc.createTextNode(text);return fromDom(node)},fromDom=function(node){if(null===node||void 0===node)throw new Error("Node cannot be null or undefined");return{dom:$_60qu7r6jducwn73.constant(node)}},fromPoint=function(doc,x,y){return Option.from(doc.dom().elementFromPoint(x,y)).map(fromDom)},$_5s4uzoyjducwngo={fromHtml:fromHtml,fromTag:fromTag,fromText:fromText,fromDom:fromDom,fromPoint:fromPoint},$_1iw4nj10jducwngu={ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12},name=function(element){return element.dom().nodeName.toLowerCase()},type=function(element){return element.dom().nodeType},value=function(element){return element.dom().nodeValue},isType=function(t){return function(element){return type(element)===t}},isComment=function(element){return type(element)===$_1iw4nj10jducwngu.COMMENT||"#comment"===name(element)},isElement=isType($_1iw4nj10jducwngu.ELEMENT),isText=isType($_1iw4nj10jducwngu.TEXT),isDocument=isType($_1iw4nj10jducwngu.DOCUMENT),$_47qy15zjducwngt={name:name,type:type,value:value,isElement:isElement,isText:isText,isDocument:isDocument,isComment:isComment},typeOf=function(x){if(null===x)return"null";var t=typeof x;return"object"===t&&Array.prototype.isPrototypeOf(x)?"array":"object"===t&&String.prototype.isPrototypeOf(x)?"string":t},isType$1=function(type){return function(value){return typeOf(value)===type}},$_c7y6af12jducwnh8={isString:isType$1("string"),isObject:isType$1("object"),isArray:isType$1("array"),isNull:isType$1("null"),isBoolean:isType$1("boolean"),isUndefined:isType$1("undefined"),isFunction:isType$1("function"),isNumber:isType$1("number")},keys=function(){var fastKeys=Object.keys,slowKeys=function(o){var r=[];for(var i in o)o.hasOwnProperty(i)&&r.push(i);return r};return void 0===fastKeys?slowKeys:fastKeys}(),each$3=function(obj,f){for(var props=keys(obj),k=0,len=props.length;k<len;k++){var i=props[k];f(obj[i],i,obj)}},objectMap=function(obj,f){return tupleMap(obj,function(x,i,obj){return{k:i,v:f(x,i,obj)}})},tupleMap=function(obj,f){var r={};return each$3(obj,function(x,i){var tuple=f(x,i,obj);r[tuple.k]=tuple.v}),r},bifilter=function(obj,pred){var t={},f={};return each$3(obj,function(x,i){(pred(x,i)?t:f)[i]=x}),{t:t,f:f}},mapToArray=function(obj,f){var r=[];return each$3(obj,function(value,name){r.push(f(value,name))}),r},find$3=function(obj,pred){for(var props=keys(obj),k=0,len=props.length;k<len;k++){var i=props[k],x=obj[i];if(pred(x,i,obj))return Option.some(x)}return Option.none()},values=function(obj){return mapToArray(obj,function(v){return v})},size=function(obj){return values(obj).length},$_84vepq13jducwnh9={bifilter:bifilter,each:each$3,map:objectMap,mapToArray:mapToArray,tupleMap:tupleMap,find:find$3,keys:keys,values:values,size:size},rawSet=function(dom,key,value){if(!($_c7y6af12jducwnh8.isString(value)||$_c7y6af12jducwnh8.isBoolean(value)||$_c7y6af12jducwnh8.isNumber(value)))throw console.error("Invalid call to Attr.set. Key ",key,":: Value ",value,":: Element ",dom),new Error("Attribute value was not simple");dom.setAttribute(key,value+"")},set=function(element,key,value){rawSet(element.dom(),key,value)},setAll=function(element,attrs){var dom=element.dom();$_84vepq13jducwnh9.each(attrs,function(v,k){rawSet(dom,k,v)})},get=function(element,key){var v=element.dom().getAttribute(key);return null===v?void 0:v},has=function(element,key){var dom=element.dom();return!(!dom||!dom.hasAttribute)&&dom.hasAttribute(key)},remove=function(element,key){element.dom().removeAttribute(key)},hasNone=function(element){var attrs=element.dom().attributes;return void 0===attrs||null===attrs||0===attrs.length},clone=function(element){return $_2dw1bj4jducwn6g.foldl(element.dom().attributes,function(acc,attr){return acc[attr.name]=attr.value,acc},{})},transferOne=function(source,destination,attr){has(source,attr)&&!has(destination,attr)&&set(destination,attr,get(source,attr))},transfer=function(source,destination,attrs){$_47qy15zjducwngt.isElement(source)&&$_47qy15zjducwngt.isElement(destination)&&$_2dw1bj4jducwn6g.each(attrs,function(attr){transferOne(source,destination,attr)})},$_60196814jducwnhd={clone:clone,set:set,setAll:setAll,get:get,has:has,remove:remove,hasNone:hasNone,transfer:transfer},inBody=function(element){var dom=$_47qy15zjducwngt.isText(element)?element.dom().parentNode:element.dom();return void 0!==dom&&null!==dom&&dom.ownerDocument.body.contains(dom)},body=$_2tix6bnjducwnfu.cached(function(){return getBody($_5s4uzoyjducwngo.fromDom(document))}),getBody=function(doc){var body=doc.dom().body;if(null===body||void 0===body)throw"Body is not available yet";return $_5s4uzoyjducwngo.fromDom(body)},$_4u3ohv15jducwnhl={body:body,getBody:getBody,inBody:inBody},isSupported=function(dom){return void 0!==dom.style},$_97xer116jducwnho={isSupported:isSupported},internalSet=function(dom,property,value){if(!$_c7y6af12jducwnh8.isString(value))throw console.error("Invalid call to CSS.set. Property ",property,":: Value ",value,":: Element ",dom),new Error("CSS value must be a string: "+value);$_97xer116jducwnho.isSupported(dom)&&dom.style.setProperty(property,value)},internalRemove=function(dom,property){$_97xer116jducwnho.isSupported(dom)&&dom.style.removeProperty(property)},set$1=function(element,property,value){var dom=element.dom();internalSet(dom,property,value)},setAll$1=function(element,css){var dom=element.dom();$_84vepq13jducwnh9.each(css,function(v,k){internalSet(dom,k,v)})},setOptions=function(element,css){var dom=element.dom();$_84vepq13jducwnh9.each(css,function(v,k){v.fold(function(){internalRemove(dom,k)},function(value){internalSet(dom,k,value)})})},get$1=function(element,property){var dom=element.dom(),styles=window.getComputedStyle(dom),r=styles.getPropertyValue(property),v=""!==r||$_4u3ohv15jducwnhl.inBody(element)?r:getUnsafeProperty(dom,property);return null===v?void 0:v},getUnsafeProperty=function(dom,property){return $_97xer116jducwnho.isSupported(dom)?dom.style.getPropertyValue(property):""},getRaw=function(element,property){var dom=element.dom(),raw=getUnsafeProperty(dom,property);return Option.from(raw).filter(function(r){return r.length>0})},getAllRaw=function(element){var css={},dom=element.dom();if($_97xer116jducwnho.isSupported(dom))for(var i=0;i<dom.style.length;i++){var ruleName=dom.style.item(i);css[ruleName]=dom.style[ruleName]}return css},isValidValue=function(tag,property,value){var element=$_5s4uzoyjducwngo.fromTag(tag);return set$1(element,property,value),getRaw(element,property).isSome()},remove$1=function(element,property){var dom=element.dom();internalRemove(dom,property),$_60196814jducwnhd.has(element,"style")&&""===$_vrlmtvjducwngg.trim($_60196814jducwnhd.get(element,"style"))&&$_60196814jducwnhd.remove(element,"style")},preserve=function(element,f){var oldStyles=$_60196814jducwnhd.get(element,"style"),result=f(element);return(void 0===oldStyles?$_60196814jducwnhd.remove:$_60196814jducwnhd.set)(element,"style",oldStyles),result},copy=function(source,target){var sourceDom=source.dom(),targetDom=target.dom();$_97xer116jducwnho.isSupported(sourceDom)&&$_97xer116jducwnho.isSupported(targetDom)&&(targetDom.style.cssText=sourceDom.style.cssText)},reflow=function(e){return e.dom().offsetWidth},transferOne$1=function(source,destination,style){getRaw(source,style).each(function(value){getRaw(destination,style).isNone()&&set$1(destination,style,value)})},transfer$1=function(source,destination,styles){$_47qy15zjducwngt.isElement(source)&&$_47qy15zjducwngt.isElement(destination)&&$_2dw1bj4jducwn6g.each(styles,function(style){transferOne$1(source,destination,style)})},$_6dooji11jducwngx={copy:copy,set:set$1,preserve:preserve,setAll:setAll$1,setOptions:setOptions,remove:remove$1,get:get$1,getRaw:getRaw,getAllRaw:getAllRaw,isValidValue:isValidValue,reflow:reflow,transfer:transfer$1},sort$1=function(arr){return arr.slice(0).sort()},reqMessage=function(required,keys){throw new Error("All required keys ("+sort$1(required).join(", ")+") were not specified. Specified keys were: "+sort$1(keys).join(", ")+".")},unsuppMessage=function(unsupported){throw new Error("Unsupported keys for object: "+sort$1(unsupported).join(", "))},validateStrArr=function(label,array){
if(!$_c7y6af12jducwnh8.isArray(array))throw new Error("The "+label+" fields must be an array. Was: "+array+".");$_2dw1bj4jducwn6g.each(array,function(a){if(!$_c7y6af12jducwnh8.isString(a))throw new Error("The value "+a+" in the "+label+" fields was not a string.")})},invalidTypeMessage=function(incorrect,type){throw new Error("All values need to be of type: "+type+". Keys ("+sort$1(incorrect).join(", ")+") were not.")},checkDupes=function(everything){var sorted=sort$1(everything);$_2dw1bj4jducwn6g.find(sorted,function(s,i){return i<sorted.length-1&&s===sorted[i+1]}).each(function(d){throw new Error("The field: "+d+" occurs more than once in the combined fields: ["+sorted.join(", ")+"].")})},$_tfxv91bjducwnib={sort:sort$1,reqMessage:reqMessage,unsuppMessage:unsuppMessage,validateStrArr:validateStrArr,invalidTypeMessage:invalidTypeMessage,checkDupes:checkDupes},$_295afp18jducwni4={immutable:Immutable,immutableBag:MixedBag},toArray$1=function(target,f){var r=[],recurse=function(e){return r.push(e),f(e)},cur=f(target);do{cur=cur.bind(recurse)}while(cur.isSome());return r},$_8cslsm1cjducwnid={toArray:toArray$1},node=function(){return $_850zr7bjducwn9g.getOrDie("Node")},compareDocumentPosition=function(a,b,match){return 0!=(a.compareDocumentPosition(b)&match)},documentPositionPreceding=function(a,b){return compareDocumentPosition(a,b,node().DOCUMENT_POSITION_PRECEDING)},documentPositionContainedBy=function(a,b){return compareDocumentPosition(a,b,node().DOCUMENT_POSITION_CONTAINED_BY)},$_94urfo1ejducwnik={documentPositionPreceding:documentPositionPreceding,documentPositionContainedBy:documentPositionContainedBy},ELEMENT=$_1iw4nj10jducwngu.ELEMENT,DOCUMENT=$_1iw4nj10jducwngu.DOCUMENT,is$1=function(element,selector){var elem=element.dom();if(elem.nodeType!==ELEMENT)return!1;if(void 0!==elem.matches)return elem.matches(selector);if(void 0!==elem.msMatchesSelector)return elem.msMatchesSelector(selector);if(void 0!==elem.webkitMatchesSelector)return elem.webkitMatchesSelector(selector);if(void 0!==elem.mozMatchesSelector)return elem.mozMatchesSelector(selector);throw new Error("Browser lacks native selectors")},bypassSelector=function(dom){return dom.nodeType!==ELEMENT&&dom.nodeType!==DOCUMENT||0===dom.childElementCount},all=function(selector,scope){var base=void 0===scope?document:scope.dom();return bypassSelector(base)?[]:$_2dw1bj4jducwn6g.map(base.querySelectorAll(selector),$_5s4uzoyjducwngo.fromDom)},one=function(selector,scope){var base=void 0===scope?document:scope.dom();return bypassSelector(base)?Option.none():Option.from(base.querySelector(selector)).map($_5s4uzoyjducwngo.fromDom)},$_3yrc4b1fjducwnim={all:all,is:is$1,one:one},eq=function(e1,e2){return e1.dom()===e2.dom()},isEqualNode=function(e1,e2){return e1.dom().isEqualNode(e2.dom())},member=function(element,elements){return $_2dw1bj4jducwn6g.exists(elements,$_60qu7r6jducwn73.curry(eq,element))},regularContains=function(e1,e2){var d1=e1.dom(),d2=e2.dom();return d1!==d2&&d1.contains(d2)},ieContains=function(e1,e2){return $_94urfo1ejducwnik.documentPositionContainedBy(e1.dom(),e2.dom())},browser=$_5hshlmmjducwnfr.detect().browser,contains$3=browser.isIE()?ieContains:regularContains,$_4qdq5m1djducwnie={eq:eq,isEqualNode:isEqualNode,member:member,contains:contains$3,is:$_3yrc4b1fjducwnim.is},owner=function(element){return $_5s4uzoyjducwngo.fromDom(element.dom().ownerDocument)},documentElement=function(element){var doc=owner(element);return $_5s4uzoyjducwngo.fromDom(doc.dom().documentElement)},defaultView=function(element){var el=element.dom(),defaultView=el.ownerDocument.defaultView;return $_5s4uzoyjducwngo.fromDom(defaultView)},parent=function(element){var dom=element.dom();return Option.from(dom.parentNode).map($_5s4uzoyjducwngo.fromDom)},findIndex$2=function(element){return parent(element).bind(function(p){var kin=children(p);return $_2dw1bj4jducwn6g.findIndex(kin,function(elem){return $_4qdq5m1djducwnie.eq(element,elem)})})},parents=function(element,isRoot){for(var stop=$_c7y6af12jducwnh8.isFunction(isRoot)?isRoot:$_60qu7r6jducwn73.constant(!1),dom=element.dom(),ret=[];null!==dom.parentNode&&void 0!==dom.parentNode;){var rawParent=dom.parentNode,parent=$_5s4uzoyjducwngo.fromDom(rawParent);if(ret.push(parent),stop(parent)===!0)break;dom=rawParent}return ret},siblings=function(element){var filterSelf=function(elements){return $_2dw1bj4jducwn6g.filter(elements,function(x){return!$_4qdq5m1djducwnie.eq(element,x)})};return parent(element).map(children).map(filterSelf).getOr([])},offsetParent=function(element){var dom=element.dom();return Option.from(dom.offsetParent).map($_5s4uzoyjducwngo.fromDom)},prevSibling=function(element){var dom=element.dom();return Option.from(dom.previousSibling).map($_5s4uzoyjducwngo.fromDom)},nextSibling=function(element){var dom=element.dom();return Option.from(dom.nextSibling).map($_5s4uzoyjducwngo.fromDom)},prevSiblings=function(element){return $_2dw1bj4jducwn6g.reverse($_8cslsm1cjducwnid.toArray(element,prevSibling))},nextSiblings=function(element){return $_8cslsm1cjducwnid.toArray(element,nextSibling)},children=function(element){var dom=element.dom();return $_2dw1bj4jducwn6g.map(dom.childNodes,$_5s4uzoyjducwngo.fromDom)},child=function(element,index){var children=element.dom().childNodes;return Option.from(children[index]).map($_5s4uzoyjducwngo.fromDom)},firstChild=function(element){return child(element,0)},lastChild=function(element){return child(element,element.dom().childNodes.length-1)},childNodesCount=function(element){return element.dom().childNodes.length},hasChildNodes=function(element){return element.dom().hasChildNodes()},spot=$_295afp18jducwni4.immutable("element","offset"),leaf=function(element,offset){var cs=children(element);return cs.length>0&&offset<cs.length?spot(cs[offset],0):spot(element,offset)},$_f0qt4317jducwnhq={owner:owner,defaultView:defaultView,documentElement:documentElement,parent:parent,findIndex:findIndex$2,parents:parents,siblings:siblings,prevSibling:prevSibling,offsetParent:offsetParent,prevSiblings:prevSiblings,nextSibling:nextSibling,nextSiblings:nextSiblings,children:children,child:child,firstChild:firstChild,lastChild:lastChild,childNodesCount:childNodesCount,hasChildNodes:hasChildNodes,leaf:leaf},browser$1=$_5hshlmmjducwnfr.detect().browser,firstElement=function(nodes){return $_2dw1bj4jducwn6g.find(nodes,$_47qy15zjducwngt.isElement)},getTableCaptionDeltaY=function(elm){return browser$1.isFirefox()&&"table"===$_47qy15zjducwngt.name(elm)?firstElement($_f0qt4317jducwnhq.children(elm)).filter(function(elm){return"caption"===$_47qy15zjducwngt.name(elm)}).bind(function(caption){return firstElement($_f0qt4317jducwnhq.nextSiblings(caption)).map(function(body){var bodyTop=body.dom().offsetTop,captionTop=caption.dom().offsetTop,captionHeight=caption.dom().offsetHeight;return bodyTop<=captionTop?-captionHeight:0})}).getOr(0):0},getPos=function(body,elm,rootElm){var offsetParent,pos,x=0,y=0,doc=body.ownerDocument;if(rootElm=rootElm?rootElm:body,elm){if(rootElm===body&&elm.getBoundingClientRect&&"static"===$_6dooji11jducwngx.get($_5s4uzoyjducwngo.fromDom(body),"position"))return pos=elm.getBoundingClientRect(),x=pos.left+(doc.documentElement.scrollLeft||body.scrollLeft)-doc.documentElement.clientLeft,y=pos.top+(doc.documentElement.scrollTop||body.scrollTop)-doc.documentElement.clientTop,{x:x,y:y};for(offsetParent=elm;offsetParent&&offsetParent!==rootElm&&offsetParent.nodeType;)x+=offsetParent.offsetLeft||0,y+=offsetParent.offsetTop||0,offsetParent=offsetParent.offsetParent;for(offsetParent=elm.parentNode;offsetParent&&offsetParent!==rootElm&&offsetParent.nodeType;)x-=offsetParent.scrollLeft||0,y-=offsetParent.scrollTop||0,offsetParent=offsetParent.parentNode;y+=getTableCaptionDeltaY($_5s4uzoyjducwngo.fromDom(elm))}return{x:x,y:y}},$_4jv3c6ljducwnfj={getPos:getPos},nu$3=function(baseFn){var data=Option.none(),callbacks=[],map=function(f){return nu$3(function(nCallback){get(function(data){nCallback(f(data))})})},get=function(nCallback){isReady()?call(nCallback):callbacks.push(nCallback)},set=function(x){data=Option.some(x),run(callbacks),callbacks=[]},isReady=function(){return data.isSome()},run=function(cbs){$_2dw1bj4jducwn6g.each(cbs,call)},call=function(cb){data.each(function(x){setTimeout(function(){cb(x)},0)})};return baseFn(set),{get:get,map:map,isReady:isReady}},pure$1=function(a){return nu$3(function(callback){callback(a)})},LazyValue={nu:nu$3,pure:pure$1},bounce=function(f){return function(){var args=Array.prototype.slice.call(arguments),me=this;setTimeout(function(){f.apply(me,args)},0)}},$_bzefsp1jjducwnj5={bounce:bounce},nu$4=function(baseFn){var get=function(callback){baseFn($_bzefsp1jjducwnj5.bounce(callback))};return{map:function(fab){return nu$4(function(callback){get(function(a){var value=fab(a);callback(value)})})},bind:function(aFutureB){return nu$4(function(callback){get(function(a){aFutureB(a).get(callback)})})},anonBind:function(futureB){return nu$4(function(callback){get(function(a){futureB.get(callback)})})},toLazy:function(){return LazyValue.nu(get)},get:get}},pure$2=function(a){return nu$4(function(callback){callback(a)})},Future={nu:nu$4,pure:pure$2},par=function(asyncValues,nu){return nu(function(callback){var r=[],count=0,cb=function(i){return function(value){r[i]=value,++count>=asyncValues.length&&callback(r)}};0===asyncValues.length?callback([]):$_2dw1bj4jducwn6g.each(asyncValues,function(asyncValue,i){asyncValue.get(cb(i))})})},$_ax3akv1ljducwnj8={par:par},par$1=function(futures){return $_ax3akv1ljducwnj8.par(futures,Future.nu)},mapM=function(array,fn){var futures=$_2dw1bj4jducwn6g.map(array,fn);return par$1(futures)},compose$1=function(f,g){return function(a){return g(a).bind(f)}},$_2m9thz1kjducwnj6={par:par$1,mapM:mapM,compose:compose$1},value$1=function(o){var is=function(v){return o===v},or=function(opt){return value$1(o)},orThunk=function(f){return value$1(o)},map=function(f){return value$1(f(o))},each=function(f){f(o)},bind=function(f){return f(o)},fold=function(_,onValue){return onValue(o)},exists=function(f){return f(o)},forall=function(f){return f(o)},toOption=function(){return Option.some(o)};return{is:is,isValue:$_60qu7r6jducwn73.always,isError:$_60qu7r6jducwn73.never,getOr:$_60qu7r6jducwn73.constant(o),getOrThunk:$_60qu7r6jducwn73.constant(o),getOrDie:$_60qu7r6jducwn73.constant(o),or:or,orThunk:orThunk,fold:fold,map:map,each:each,bind:bind,exists:exists,forall:forall,toOption:toOption}},error=function(message){var getOrThunk=function(f){return f()},getOrDie=function(){return $_60qu7r6jducwn73.die(message)()},or=function(opt){return opt},orThunk=function(f){return f()},map=function(f){return error(message)},bind=function(f){return error(message)},fold=function(onError,_){return onError(message)};return{is:$_60qu7r6jducwn73.never,isValue:$_60qu7r6jducwn73.never,isError:$_60qu7r6jducwn73.always,getOr:$_60qu7r6jducwn73.identity,getOrThunk:getOrThunk,getOrDie:getOrDie,or:or,orThunk:orThunk,fold:fold,map:map,each:$_60qu7r6jducwn73.noop,bind:bind,exists:$_60qu7r6jducwn73.never,forall:$_60qu7r6jducwn73.always,toOption:Option.none}},Result={value:value$1,error:error},blocks=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],voids=["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"],tableCells=["td","th"],tableSections=["thead","tbody","tfoot"],textBlocks=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],headings=["h1","h2","h3","h4","h5","h6"],listItems=["li","dd","dt"],lists=["ul","ol","dl"],lazyLookup=function(items){var lookup;return function(node){return lookup=lookup?lookup:$_2dw1bj4jducwn6g.mapToObject(items,$_60qu7r6jducwn73.constant(!0)),lookup.hasOwnProperty($_47qy15zjducwngt.name(node))}},isHeading=lazyLookup(headings),isBlock=lazyLookup(blocks),isInline=function(node){return $_47qy15zjducwngt.isElement(node)&&!isBlock(node)},isBr=function(node){return $_47qy15zjducwngt.isElement(node)&&"br"===$_47qy15zjducwngt.name(node)},isTextBlock=lazyLookup(textBlocks),isList=lazyLookup(lists),isListItem=lazyLookup(listItems),isVoid=lazyLookup(voids),isTableSection=lazyLookup(tableSections),isTableCell=lazyLookup(tableCells),isNodeType=function(type){return function(node){return!!node&&node.nodeType===type}},isElement$1=isNodeType(1),matchNodeNames=function(names){var items=names.toLowerCase().split(" ");return function(node){var i,name;if(node&&node.nodeType)for(name=node.nodeName.toLowerCase(),i=0;i<items.length;i++)if(name===items[i])return!0;return!1}},matchStyleValues=function(name,values){var items=values.toLowerCase().split(" ");return function(node){var i;if(isElement$1(node))for(i=0;i<items.length;i++)if(node.ownerDocument.defaultView.getComputedStyle(node,null).getPropertyValue(name)===items[i])return!0;return!1}},hasPropValue=function(propName,propValue){return function(node){return isElement$1(node)&&node[propName]===propValue}},hasAttribute=function(attrName,attrValue){return function(node){return isElement$1(node)&&node.hasAttribute(attrName)}},hasAttributeValue=function(attrName,attrValue){return function(node){return isElement$1(node)&&node.getAttribute(attrName)===attrValue}},isBogus=function(node){return isElement$1(node)&&node.hasAttribute("data-mce-bogus")},isBogusAll=function(node){return isElement$1(node)&&"all"===node.getAttribute("data-mce-bogus")},isTable=function(node){return isElement$1(node)&&"TABLE"===node.tagName},hasContentEditableState=function(value){return function(node){if(isElement$1(node)){if(node.contentEditable===value)return!0;if(node.getAttribute("data-mce-contenteditable")===value)return!0}return!1}},isText$1=isNodeType(3),isComment$1=isNodeType(8),isDocument$1=isNodeType(9),isBr$1=matchNodeNames("br"),isContentEditableTrue=hasContentEditableState("true"),isContentEditableFalse=hasContentEditableState("false"),$_fj238m1qjducwnjm={isText:isText$1,isElement:isElement$1,isComment:isComment$1,isDocument:isDocument$1,isBr:isBr$1,isContentEditableTrue:isContentEditableTrue,isContentEditableFalse:isContentEditableFalse,matchNodeNames:matchNodeNames,hasPropValue:hasPropValue,hasAttribute:hasAttribute,hasAttributeValue:hasAttributeValue,matchStyleValues:matchStyleValues,isBogus:isBogus,isBogusAll:isBogusAll,isTable:isTable},surroundedBySpans=function(node){var previousIsSpan=node.previousSibling&&"SPAN"===node.previousSibling.nodeName,nextIsSpan=node.nextSibling&&"SPAN"===node.nextSibling.nodeName;return previousIsSpan&&nextIsSpan},isBookmarkNode=function(node){return node&&"SPAN"===node.tagName&&"bookmark"===node.getAttribute("data-mce-type")},trimNode=function(dom,node){var i,children=node.childNodes;if(!$_fj238m1qjducwnjm.isElement(node)||!isBookmarkNode(node)){for(i=children.length-1;i>=0;i--)trimNode(dom,children[i]);if($_fj238m1qjducwnjm.isDocument(node)===!1){if($_fj238m1qjducwnjm.isText(node)&&node.nodeValue.length>0){var trimmedLength=$_8i2houjjducwnd2.trim(node.nodeValue).length;if(dom.isBlock(node.parentNode)||trimmedLength>0)return;if(0===trimmedLength&&surroundedBySpans(node))return}else if($_fj238m1qjducwnjm.isElement(node)&&(children=node.childNodes,1===children.length&&isBookmarkNode(children[0])&&node.parentNode.insertBefore(children[0],node),children.length||isVoid($_5s4uzoyjducwngo.fromDom(node))))return;dom.remove(node)}return node}},$_f6ekvb1ojducwnje={trimNode:trimNode},makeMap$1=$_8i2houjjducwnd2.makeMap,attrsCharsRegExp=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,textCharsRegExp=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,asciiMap={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};baseEntities={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},reverseEntities={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};var nativeDecode=function(text){var elm;return elm=$_5s4uzoyjducwngo.fromTag("div").dom(),elm.innerHTML=text,elm.textContent||elm.innerText||text},buildEntitiesLookup=function(items,radix){var i,chr,entity,lookup={};if(items){for(items=items.split(","),radix=radix||10,i=0;i<items.length;i+=2)chr=String.fromCharCode(parseInt(items[i],radix)),baseEntities[chr]||(entity="&"+items[i+1]+";",lookup[chr]=entity,lookup[entity]=chr);return lookup}};namedEntities=buildEntitiesLookup("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var encodeRaw=function(text,attr){return text.replace(attr?attrsCharsRegExp:textCharsRegExp,function(chr){return baseEntities[chr]||chr})},encodeAllRaw=function(text){return(""+text).replace(/[<>&\"\']/g,function(chr){return baseEntities[chr]||chr})},encodeNumeric=function(text,attr){return text.replace(attr?attrsCharsRegExp:textCharsRegExp,function(chr){return chr.length>1?"&#"+(1024*(chr.charCodeAt(0)-55296)+(chr.charCodeAt(1)-56320)+65536)+";":baseEntities[chr]||"&#"+chr.charCodeAt(0)+";"})},encodeNamed=function(text,attr,entities){return entities=entities||namedEntities,text.replace(attr?attrsCharsRegExp:textCharsRegExp,function(chr){return baseEntities[chr]||entities[chr]||chr})},getEncodeFunc=function(name,entities){var entitiesMap=buildEntitiesLookup(entities)||namedEntities,encodeNamedAndNumeric=function(text,attr){return text.replace(attr?attrsCharsRegExp:textCharsRegExp,function(chr){return void 0!==baseEntities[chr]?baseEntities[chr]:void 0!==entitiesMap[chr]?entitiesMap[chr]:chr.length>1?"&#"+(1024*(chr.charCodeAt(0)-55296)+(chr.charCodeAt(1)-56320)+65536)+";":"&#"+chr.charCodeAt(0)+";"})},encodeCustomNamed=function(text,attr){return encodeNamed(text,attr,entitiesMap)},nameMap=makeMap$1(name.replace(/\+/g,","));return nameMap.named&&nameMap.numeric?encodeNamedAndNumeric:nameMap.named?entities?encodeCustomNamed:encodeNamed:nameMap.numeric?encodeNumeric:encodeRaw},decode=function(text){return text.replace(/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,function(all,numeric){return numeric?(numeric="x"===numeric.charAt(0).toLowerCase()?parseInt(numeric.substr(1),16):parseInt(numeric,10),numeric>65535?(numeric-=65536,String.fromCharCode(55296+(numeric>>10),56320+(1023&numeric))):asciiMap[numeric]||String.fromCharCode(numeric)):reverseEntities[all]||namedEntities[all]||nativeDecode(all)})},$_g4jbz61rjducwnjq={encodeRaw:encodeRaw,encodeAllRaw:encodeAllRaw,encodeNumeric:encodeNumeric,encodeNamed:encodeNamed,getEncodeFunc:getEncodeFunc,decode:decode},mapCache={},dummyObj={},makeMap$2=$_8i2houjjducwnd2.makeMap,each$4=$_8i2houjjducwnd2.each,extend$1=$_8i2houjjducwnd2.extend,explode$1=$_8i2houjjducwnd2.explode,inArray$1=$_8i2houjjducwnd2.inArray,split=function(items,delim){return items=$_8i2houjjducwnd2.trim(items),items?items.split(delim||" "):[]},compileSchema=function(type){var globalAttributes,blockContent,phrasingContent,flowContent,html4BlockContent,html4PhrasingContent,schema={},add=function(name,attributes,children){var ni,attributesOrder,element,arrayToMap=function(array,obj){var i,l,map={};for(i=0,l=array.length;i<l;i++)map[array[i]]=obj||{};return map};for(children=children||[],attributes=attributes||"","string"==typeof children&&(children=split(children)),name=split(name),ni=name.length;ni--;)attributesOrder=split([globalAttributes,attributes].join(" ")),element={attributes:arrayToMap(attributesOrder),attributesOrder:attributesOrder,children:arrayToMap(children,dummyObj)},schema[name[ni]]=element},addAttrs=function(name,attributes){var ni,schemaItem,i,l;for(name=split(name),ni=name.length,attributes=split(attributes);ni--;)for(schemaItem=schema[name[ni]],i=0,l=attributes.length;i<l;i++)schemaItem.attributes[attributes[i]]={},schemaItem.attributesOrder.push(attributes[i])};return mapCache[type]?mapCache[type]:(globalAttributes="id accesskey class dir lang style tabindex title role",blockContent="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",phrasingContent="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==type&&(globalAttributes+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",blockContent+=" article aside details dialog figure header footer hgroup section nav",phrasingContent+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==type&&(globalAttributes+=" xml:lang",html4PhrasingContent="acronym applet basefont big font strike tt",phrasingContent=[phrasingContent,html4PhrasingContent].join(" "),each$4(split(html4PhrasingContent),function(name){add(name,"",phrasingContent)}),html4BlockContent="center dir isindex noframes",blockContent=[blockContent,html4BlockContent].join(" "),flowContent=[blockContent,phrasingContent].join(" "),each$4(split(html4BlockContent),function(name){add(name,"",flowContent)})),flowContent=flowContent||[blockContent,phrasingContent].join(" "),add("html","manifest","head body"),add("head","","base command link meta noscript script style title"),add("title hr noscript br"),add("base","href target"),add("link","href rel media hreflang type sizes hreflang"),add("meta","name http-equiv content charset"),add("style","media type scoped"),add("script","src async defer type charset"),add("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",flowContent),add("address dt dd div caption","",flowContent),add("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",phrasingContent),add("blockquote","cite",flowContent),add("ol","reversed start type","li"),add("ul","","li"),add("li","value",flowContent),add("dl","","dt dd"),add("a","href target rel media hreflang type",phrasingContent),add("q","cite",phrasingContent),add("ins del","cite datetime",flowContent),add("img","src sizes srcset alt usemap ismap width height"),add("iframe","src name width height",flowContent),add("embed","src type width height"),add("object","data type typemustmatch name usemap form width height",[flowContent,"param"].join(" ")),add("param","name value"),add("map","name",[flowContent,"area"].join(" ")),add("area","alt coords shape href target rel media hreflang type"),add("table","border","caption colgroup thead tfoot tbody tr"+("html4"===type?" col":"")),add("colgroup","span","col"),add("col","span"),add("tbody thead tfoot","","tr"),add("tr","","td th"),add("td","colspan rowspan headers",flowContent),add("th","colspan rowspan headers scope abbr",flowContent),add("form","accept-charset action autocomplete enctype method name novalidate target",flowContent),add("fieldset","disabled form name",[flowContent,"legend"].join(" ")),add("label","form for",phrasingContent),add("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),add("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===type?flowContent:phrasingContent),add("select","disabled form multiple name required size","option optgroup"),add("optgroup","disabled label","option"),add("option","disabled label selected value"),add("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),add("menu","type label",[flowContent,"li"].join(" ")),add("noscript","",flowContent),"html4"!==type&&(add("wbr"),add("ruby","",[phrasingContent,"rt rp"].join(" ")),add("figcaption","",flowContent),add("mark rt rp summary bdi","",phrasingContent),add("canvas","width height",flowContent),add("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[flowContent,"track source"].join(" ")),add("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[flowContent,"track source"].join(" ")),add("picture","","img source"),add("source","src srcset type media sizes"),add("track","kind src srclang label default"),add("datalist","",[phrasingContent,"option"].join(" ")),add("article section nav aside header footer","",flowContent),add("hgroup","","h1 h2 h3 h4 h5 h6"),add("figure","",[flowContent,"figcaption"].join(" ")),add("time","datetime",phrasingContent),add("dialog","open",flowContent),add("command","type label icon disabled checked radiogroup command"),add("output","for form name",phrasingContent),add("progress","value max",phrasingContent),add("meter","value min max low high optimum",phrasingContent),add("details","open",[flowContent,"summary"].join(" ")),add("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==type&&(addAttrs("script","language xml:space"),addAttrs("style","xml:space"),addAttrs("object","declare classid code codebase codetype archive standby align border hspace vspace"),addAttrs("embed","align name hspace vspace"),addAttrs("param","valuetype type"),addAttrs("a","charset name rev shape coords"),addAttrs("br","clear"),addAttrs("applet","codebase archive code object alt name width height align hspace vspace"),addAttrs("img","name longdesc align border hspace vspace"),addAttrs("iframe","longdesc frameborder marginwidth marginheight scrolling align"),addAttrs("font basefont","size color face"),addAttrs("input","usemap align"),addAttrs("select","onchange"),addAttrs("textarea"),addAttrs("h1 h2 h3 h4 h5 h6 div p legend caption","align"),addAttrs("ul","type compact"),addAttrs("li","type"),addAttrs("ol dl menu dir","compact"),addAttrs("pre","width xml:space"),addAttrs("hr","align noshade size width"),addAttrs("isindex","prompt"),addAttrs("table","summary width frame rules cellspacing cellpadding align bgcolor"),addAttrs("col","width align char charoff valign"),addAttrs("colgroup","width align char charoff valign"),addAttrs("thead","align char charoff valign"),addAttrs("tr","align char charoff valign bgcolor"),addAttrs("th","axis align char charoff valign nowrap bgcolor width height"),addAttrs("form","accept"),addAttrs("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),addAttrs("tfoot","align char charoff valign"),addAttrs("tbody","align char charoff valign"),addAttrs("area","nohref"),addAttrs("body","background bgcolor text link vlink alink")),"html4"!==type&&(addAttrs("input button select textarea","autofocus"),addAttrs("input textarea","placeholder"),addAttrs("a","download"),addAttrs("link script img","crossorigin"),addAttrs("iframe","sandbox seamless allowfullscreen")),each$4(split("a form meter progress dfn"),function(name){schema[name]&&delete schema[name].children[name]}),delete schema.caption.children.table,delete schema.script,mapCache[type]=schema,schema)},compileElementMap=function(value,mode){var styles;return value&&(styles={},"string"==typeof value&&(value={"*":value}),each$4(value,function(value,key){styles[key]=styles[key.toUpperCase()]="map"===mode?makeMap$2(value,/[, ]/):explode$1(value,/[, ]/)})),styles},toHex=function(match,r,g,b){var hex=function(val){return val=parseInt(val,10).toString(16),val.length>1?val:"0"+val};return"#"+hex(r)+hex(g)+hex(b)},each$5=$_8i2houjjducwnd2.each,is$2=$_8i2houjjducwnd2.is,grep$1=$_8i2houjjducwnd2.grep,isIE=$_cum1kc9jducwn99.ie,simpleSelectorRe=/^([a-z0-9],?)+$/i,whiteSpaceRegExp$2=/^[ \t\r\n]*$/,setupAttrHooks=function(domUtils,settings){var keepUrlHook,attrHooks={},keepValues=settings.keep_values;return keepUrlHook={set:function($elm,value,name){settings.url_converter&&(value=settings.url_converter.call(settings.url_converter_scope||domUtils,value,name,$elm[0])),$elm.attr("data-mce-"+name,value).attr(name,value)},get:function($elm,name){return $elm.attr("data-mce-"+name)||$elm.attr(name)}},attrHooks={style:{set:function($elm,value){if(null!==value&&"object"==typeof value)return void $elm.css(value);keepValues&&$elm.attr("data-mce-style",value),$elm.attr("style",value)},get:function($elm){var value=$elm.attr("data-mce-style")||$elm.attr("style");return value=domUtils.serializeStyle(domUtils.parseStyle(value),$elm[0].nodeName)}}},keepValues&&(attrHooks.href=attrHooks.src=keepUrlHook),attrHooks},updateInternalStyleAttr=function(domUtils,$elm){var value=$elm.attr("style");value=domUtils.serializeStyle(domUtils.parseStyle(value),$elm[0].nodeName),value||(value=null),$elm.attr("data-mce-style",value)},nodeIndex=function(node,normalized){var lastNodeType,nodeType,idx=0;if(node)for(lastNodeType=node.nodeType,node=node.previousSibling;node;node=node.previousSibling)nodeType=node.nodeType,(!normalized||3!==nodeType||nodeType!==lastNodeType&&node.nodeValue.length)&&(idx++,lastNodeType=nodeType);return idx},DOMUtils=function(doc,settings){var blockElementsMap,self=this;self.doc=doc,self.win=window,self.files={},self.counter=0,self.stdMode=!isIE||doc.documentMode>=8,self.boxModel=!isIE||"CSS1Compat"===doc.compatMode||self.stdMode,self.styleSheetLoader=StyleSheetLoader(doc),self.boundEvents=[],self.settings=settings=settings||{},self.schema=settings.schema?settings.schema:Schema({}),self.styles=Styles({url_converter:settings.url_converter,url_converter_scope:settings.url_converter_scope},settings.schema),self.fixDoc(doc),
self.events=settings.ownEvents?new EventUtils(settings.proxy):EventUtils.Event,self.attrHooks=setupAttrHooks(self,settings),blockElementsMap=self.schema.getBlockElements(),self.$=DomQuery.overrideDefaults(function(){return{context:doc,element:self.getRoot()}}),self.isBlock=function(node){if(!node)return!1;var type=node.nodeType;return type?!(1!==type||!blockElementsMap[node.nodeName]):!!blockElementsMap[node]}};DOMUtils.prototype={$$:function(elm){return"string"==typeof elm&&(elm=this.get(elm)),this.$(elm)},root:null,fixDoc:function(doc){},clone:function(node,deep){var clone,doc,self=this;return!isIE||1!==node.nodeType||deep?node.cloneNode(deep):(doc=self.doc,deep?clone.firstChild:(clone=doc.createElement(node.nodeName),each$5(self.getAttribs(node),function(attr){self.setAttrib(clone,attr.nodeName,self.getAttrib(node,attr.nodeName))}),clone))},getRoot:function(){var self=this;return self.settings.root_element||self.doc.body},getViewPort:function(win){var doc,rootElm;return win=win?win:this.win,doc=win.document,rootElm=this.boxModel?doc.documentElement:doc.body,{x:win.pageXOffset||rootElm.scrollLeft,y:win.pageYOffset||rootElm.scrollTop,w:win.innerWidth||rootElm.clientWidth,h:win.innerHeight||rootElm.clientHeight}},getRect:function(elm){var pos,size,self=this;return elm=self.get(elm),pos=self.getPos(elm),size=self.getSize(elm),{x:pos.x,y:pos.y,w:size.w,h:size.h}},getSize:function(elm){var w,h,self=this;return elm=self.get(elm),w=self.getStyle(elm,"width"),h=self.getStyle(elm,"height"),w.indexOf("px")===-1&&(w=0),h.indexOf("px")===-1&&(h=0),{w:parseInt(w,10)||elm.offsetWidth||elm.clientWidth,h:parseInt(h,10)||elm.offsetHeight||elm.clientHeight}},getParent:function(node,selector,root){return this.getParents(node,selector,root,!1)},getParents:function(node,selector,root,collect){var selectorVal,self=this,result=[];for(node=self.get(node),collect=void 0===collect,root=root||("BODY"!==self.getRoot().nodeName?self.getRoot().parentNode:null),is$2(selector,"string")&&(selectorVal=selector,selector="*"===selector?function(node){return 1===node.nodeType}:function(node){return self.is(node,selectorVal)});node&&node!==root&&node.nodeType&&9!==node.nodeType;){if(!selector||selector(node)){if(!collect)return node;result.push(node)}node=node.parentNode}return collect?result:null},get:function(elm){var name;return elm&&this.doc&&"string"==typeof elm&&(name=elm,(elm=this.doc.getElementById(elm))&&elm.id!==name)?this.doc.getElementsByName(name)[1]:elm},getNext:function(node,selector){return this._findSib(node,selector,"nextSibling")},getPrev:function(node,selector){return this._findSib(node,selector,"previousSibling")},select:function(selector,scope){var self=this;return Sizzle(selector,self.get(scope)||self.settings.root_element||self.doc,[])},is:function(elm,selector){var i;if(!elm)return!1;if(void 0===elm.length){if("*"===selector)return 1===elm.nodeType;if(simpleSelectorRe.test(selector)){for(selector=selector.toLowerCase().split(/,/),elm=elm.nodeName.toLowerCase(),i=selector.length-1;i>=0;i--)if(selector[i]===elm)return!0;return!1}}if(elm.nodeType&&1!==elm.nodeType)return!1;var elms=elm.nodeType?[elm]:elm;return Sizzle(selector,elms[0].ownerDocument||elms[0],null,elms).length>0},add:function(parentElm,name,attrs,html,create){var self=this;return this.run(parentElm,function(parentElm){var newElm;return newElm=is$2(name,"string")?self.doc.createElement(name):name,self.setAttribs(newElm,attrs),html&&(html.nodeType?newElm.appendChild(html):self.setHTML(newElm,html)),create?newElm:parentElm.appendChild(newElm)})},create:function(name,attrs,html){return this.add(this.doc.createElement(name),name,attrs,html,1)},createHTML:function(name,attrs,html){var key,outHtml="";outHtml+="<"+name;for(key in attrs)attrs.hasOwnProperty(key)&&null!==attrs[key]&&void 0!==attrs[key]&&(outHtml+=" "+key+'="'+this.encode(attrs[key])+'"');return void 0!==html?outHtml+">"+html+"</"+name+">":outHtml+" />"},createFragment:function(html){var frag,node,container,doc=this.doc;for(container=doc.createElement("div"),frag=doc.createDocumentFragment(),html&&(container.innerHTML=html);node=container.firstChild;)frag.appendChild(node);return frag},remove:function(node,keepChildren){return node=this.$$(node),keepChildren?node.each(function(){for(var child;child=this.firstChild;)3===child.nodeType&&0===child.data.length?this.removeChild(child):this.parentNode.insertBefore(child,this)}).remove():node.remove(),node.length>1?node.toArray():node[0]},setStyle:function(elm,name,value){elm=this.$$(elm).css(name,value),this.settings.update_styles&&updateInternalStyleAttr(this,elm)},getStyle:function(elm,name,computed){return elm=this.$$(elm),computed?elm.css(name):(name=name.replace(/-(\D)/g,function(a,b){return b.toUpperCase()}),"float"===name&&(name=$_cum1kc9jducwn99.ie&&$_cum1kc9jducwn99.ie<12?"styleFloat":"cssFloat"),elm[0]&&elm[0].style?elm[0].style[name]:void 0)},setStyles:function(elm,styles){elm=this.$$(elm).css(styles),this.settings.update_styles&&updateInternalStyleAttr(this,elm)},removeAllAttribs:function(e){return this.run(e,function(e){var i,attrs=e.attributes;for(i=attrs.length-1;i>=0;i--)e.removeAttributeNode(attrs.item(i))})},setAttrib:function(elm,name,value){var originalValue,hook,self=this,settings=self.settings;""===value&&(value=null),elm=self.$$(elm),originalValue=elm.attr(name),elm.length&&(hook=self.attrHooks[name],hook&&hook.set?hook.set(elm,value,name):elm.attr(name,value),originalValue!==value&&settings.onSetAttrib&&settings.onSetAttrib({attrElm:elm,attrName:name,attrValue:value}))},setAttribs:function(elm,attrs){var self=this;self.$$(elm).each(function(i,node){each$5(attrs,function(value,name){self.setAttrib(node,name,value)})})},getAttrib:function(elm,name,defaultVal){var hook,value,self=this;return elm=self.$$(elm),elm.length&&(hook=self.attrHooks[name],value=hook&&hook.get?hook.get(elm,name):elm.attr(name)),void 0===value&&(value=defaultVal||""),value},getPos:function(elm,rootElm){return $_4jv3c6ljducwnfj.getPos(this.doc.body,this.get(elm),rootElm)},parseStyle:function(cssText){return this.styles.parse(cssText)},serializeStyle:function(styles,name){return this.styles.serialize(styles,name)},addStyle:function(cssText){var head,styleElm,self=this,doc=self.doc;if(self!==DOMUtils.DOM&&doc===document){var addedStyles=DOMUtils.DOM.addedStyles;if(addedStyles=addedStyles||[],addedStyles[cssText])return;addedStyles[cssText]=!0,DOMUtils.DOM.addedStyles=addedStyles}styleElm=doc.getElementById("mceDefaultStyles"),styleElm||(styleElm=doc.createElement("style"),styleElm.id="mceDefaultStyles",styleElm.type="text/css",head=doc.getElementsByTagName("head")[0],head.firstChild?head.insertBefore(styleElm,head.firstChild):head.appendChild(styleElm)),styleElm.styleSheet?styleElm.styleSheet.cssText+=cssText:styleElm.appendChild(doc.createTextNode(cssText))},loadCSS:function(url){var head,self=this,doc=self.doc;if(self!==DOMUtils.DOM&&doc===document)return void DOMUtils.DOM.loadCSS(url);url||(url=""),head=doc.getElementsByTagName("head")[0],each$5(url.split(","),function(url){var link;url=$_8i2houjjducwnd2._addCacheSuffix(url),self.files[url]||(self.files[url]=!0,link=self.create("link",{rel:"stylesheet",href:url}),isIE&&doc.documentMode&&doc.recalc&&(link.onload=function(){doc.recalc&&doc.recalc(),link.onload=null}),head.appendChild(link))})},addClass:function(elm,cls){this.$$(elm).addClass(cls)},removeClass:function(elm,cls){this.toggleClass(elm,cls,!1)},hasClass:function(elm,cls){return this.$$(elm).hasClass(cls)},toggleClass:function(elm,cls,state){this.$$(elm).toggleClass(cls,state).each(function(){""===this.className&&DomQuery(this).attr("class",null)})},show:function(elm){this.$$(elm).show()},hide:function(elm){this.$$(elm).hide()},isHidden:function(elm){return"none"===this.$$(elm).css("display")},uniqueId:function(prefix){return(prefix?prefix:"mce_")+this.counter++},setHTML:function(elm,html){elm=this.$$(elm),isIE?elm.each(function(i,target){if(target.canHaveHTML!==!1){for(;target.firstChild;)target.removeChild(target.firstChild);try{target.innerHTML="<br>"+html,target.removeChild(target.firstChild)}catch(ex){DomQuery("<div></div>").html("<br>"+html).contents().slice(1).appendTo(target)}return html}}):elm.html(html)},getOuterHTML:function(elm){return elm=this.get(elm),1===elm.nodeType&&"outerHTML"in elm?elm.outerHTML:DomQuery("<div></div>").append(DomQuery(elm).clone()).html()},setOuterHTML:function(elm,html){var self=this;self.$$(elm).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=html)}catch(ex){}self.remove(DomQuery(this).html(html),!0)})},decode:$_g4jbz61rjducwnjq.decode,encode:$_g4jbz61rjducwnjq.encodeAllRaw,insertAfter:function(node,referenceNode){return referenceNode=this.get(referenceNode),this.run(node,function(node){var parent,nextSibling;return parent=referenceNode.parentNode,nextSibling=referenceNode.nextSibling,nextSibling?parent.insertBefore(node,nextSibling):parent.appendChild(node),node})},replace:function(newElm,oldElm,keepChildren){return this.run(oldElm,function(oldElm){return is$2(oldElm,"array")&&(newElm=newElm.cloneNode(!0)),keepChildren&&each$5(grep$1(oldElm.childNodes),function(node){newElm.appendChild(node)}),oldElm.parentNode.replaceChild(newElm,oldElm)})},rename:function(elm,name){var newElm,self=this;return elm.nodeName!==name.toUpperCase()&&(newElm=self.create(name),each$5(self.getAttribs(elm),function(attrNode){self.setAttrib(newElm,attrNode.nodeName,self.getAttrib(elm,attrNode.nodeName))}),self.replace(newElm,elm,1)),newElm||elm},findCommonAncestor:function(a,b){for(var pe,ps=a;ps;){for(pe=b;pe&&ps!==pe;)pe=pe.parentNode;if(ps===pe)break;ps=ps.parentNode}return!ps&&a.ownerDocument?a.ownerDocument.documentElement:ps},toHex:function(rgbVal){return this.styles.toHex($_8i2houjjducwnd2.trim(rgbVal))},run:function(elm,func,scope){var result,self=this;return"string"==typeof elm&&(elm=self.get(elm)),!!elm&&(scope=scope||this,elm.nodeType||!elm.length&&0!==elm.length?func.call(scope,elm):(result=[],each$5(elm,function(elm,i){elm&&("string"==typeof elm&&(elm=self.get(elm)),result.push(func.call(scope,elm,i)))}),result))},getAttribs:function(elm){var attrs;if(!(elm=this.get(elm)))return[];if(isIE){if(attrs=[],"OBJECT"===elm.nodeName)return elm.attributes;"OPTION"===elm.nodeName&&this.getAttrib(elm,"selected")&&attrs.push({specified:1,nodeName:"selected"});return elm.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(a){attrs.push({specified:1,nodeName:a})}),attrs}return elm.attributes},isEmpty:function(node,elements){var i,attributes,type,whitespace,walker,name,self=this,brCount=0;if(node=node.firstChild){walker=new TreeWalker(node,node.parentNode),elements=elements||(self.schema?self.schema.getNonEmptyElements():null),whitespace=self.schema?self.schema.getWhiteSpaceElements():{};do{if(1===(type=node.nodeType)){var bogusVal=node.getAttribute("data-mce-bogus");if(bogusVal){node=walker.next("all"===bogusVal);continue}if(name=node.nodeName.toLowerCase(),elements&&elements[name]){if("br"===name){brCount++,node=walker.next();continue}return!1}for(attributes=self.getAttribs(node),i=attributes.length;i--;)if("name"===(name=attributes[i].nodeName)||"data-mce-bookmark"===name)return!1}if(8===type)return!1;if(3===type&&!whiteSpaceRegExp$2.test(node.nodeValue))return!1;if(3===type&&node.parentNode&&whitespace[node.parentNode.nodeName]&&whiteSpaceRegExp$2.test(node.nodeValue))return!1;node=walker.next()}while(node)}return brCount<=1},createRng:function(){return this.doc.createRange()},nodeIndex:nodeIndex,split:function(parentElm,splitElm,replacementElm){var bef,aft,pa,self=this,r=self.createRng();if(parentElm&&splitElm)return r.setStart(parentElm.parentNode,self.nodeIndex(parentElm)),r.setEnd(splitElm.parentNode,self.nodeIndex(splitElm)),bef=r.extractContents(),r=self.createRng(),r.setStart(splitElm.parentNode,self.nodeIndex(splitElm)+1),r.setEnd(parentElm.parentNode,self.nodeIndex(parentElm)+1),aft=r.extractContents(),pa=parentElm.parentNode,pa.insertBefore($_f6ekvb1ojducwnje.trimNode(self,bef),parentElm),replacementElm?pa.insertBefore(replacementElm,parentElm):pa.insertBefore(splitElm,parentElm),pa.insertBefore($_f6ekvb1ojducwnje.trimNode(self,aft),parentElm),self.remove(parentElm),replacementElm||splitElm},bind:function(target,name,func,scope){var self=this;if($_8i2houjjducwnd2.isArray(target)){for(var i=target.length;i--;)target[i]=self.bind(target[i],name,func,scope);return target}return!self.settings.collect||target!==self.doc&&target!==self.win||self.boundEvents.push([target,name,func,scope]),self.events.bind(target,name,func,scope||self)},unbind:function(target,name,func){var i,self=this;if($_8i2houjjducwnd2.isArray(target)){for(i=target.length;i--;)target[i]=self.unbind(target[i],name,func);return target}if(self.boundEvents&&(target===self.doc||target===self.win))for(i=self.boundEvents.length;i--;){var item=self.boundEvents[i];target!==item[0]||name&&name!==item[1]||func&&func!==item[2]||this.events.unbind(item[0],item[1],item[2])}return this.events.unbind(target,name,func)},fire:function(target,name,evt){return this.events.fire(target,name,evt)},getContentEditable:function(node){var contentEditable;return node&&1===node.nodeType?(contentEditable=node.getAttribute("data-mce-contenteditable"),contentEditable&&"inherit"!==contentEditable?contentEditable:"inherit"!==node.contentEditable?node.contentEditable:null):null},getContentEditableParent:function(node){for(var root=this.getRoot(),state=null;node&&node!==root&&null===(state=this.getContentEditable(node));node=node.parentNode);return state},destroy:function(){var self=this;if(self.boundEvents){for(var i=self.boundEvents.length;i--;){var item=self.boundEvents[i];this.events.unbind(item[0],item[1],item[2])}self.boundEvents=null}Sizzle.setDocument&&Sizzle.setDocument(),self.win=self.doc=self.root=self.events=self.frag=null},isChildOf:function(node,parent){for(;node;){if(parent===node)return!0;node=node.parentNode}return!1},dumpRng:function(r){return"startContainer: "+r.startContainer.nodeName+", startOffset: "+r.startOffset+", endContainer: "+r.endContainer.nodeName+", endOffset: "+r.endOffset},_findSib:function(node,selector,name){var self=this,func=selector;if(node)for("string"==typeof func&&(func=function(node){return self.is(node,selector)}),node=node[name];node;node=node[name])if(func(node))return node;return null}},DOMUtils.DOM=new DOMUtils(document),DOMUtils.nodeIndex=nodeIndex;var DOM=DOMUtils.DOM,each$6=$_8i2houjjducwnd2.each,grep$2=$_8i2houjjducwnd2.grep,isFunction=function(f){return"function"==typeof f},ScriptLoader=function(){var states={},queue=[],scriptLoadedCallbacks={},queueLoadedCallbacks=[],loading=0,loadScript=function(url,success,failure){var elm,id,dom=DOM,done=function(){dom.remove(id),elm&&(elm.onreadystatechange=elm.onload=elm=null),success()},error=function(){isFunction(failure)?failure():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+url)};id=dom.uniqueId(),elm=document.createElement("script"),elm.id=id,elm.type="text/javascript",elm.src=$_8i2houjjducwnd2._addCacheSuffix(url),"onreadystatechange"in elm?elm.onreadystatechange=function(){/loaded|complete/.test(elm.readyState)&&done()}:elm.onload=done,elm.onerror=error,(document.getElementsByTagName("head")[0]||document.body).appendChild(elm)};this.isDone=function(url){return 2===states[url]},this.markDone=function(url){states[url]=2},this.add=this.load=function(url,success,scope,failure){void 0===states[url]&&(queue.push(url),states[url]=0),success&&(scriptLoadedCallbacks[url]||(scriptLoadedCallbacks[url]=[]),scriptLoadedCallbacks[url].push({success:success,failure:failure,scope:scope||this}))},this.remove=function(url){delete states[url],delete scriptLoadedCallbacks[url]},this.loadQueue=function(success,scope,failure){this.loadScripts(queue,success,scope,failure)},this.loadScripts=function(scripts,success,scope,failure){var loadScripts,failures=[],execCallbacks=function(name,url){each$6(scriptLoadedCallbacks[url],function(callback){isFunction(callback[name])&&callback[name].call(callback.scope)}),scriptLoadedCallbacks[url]=void 0};queueLoadedCallbacks.push({success:success,failure:failure,scope:scope||this}),(loadScripts=function(){var loadingScripts=grep$2(scripts);if(scripts.length=0,each$6(loadingScripts,function(url){return 2===states[url]?void execCallbacks("success",url):3===states[url]?void execCallbacks("failure",url):void(1!==states[url]&&(states[url]=1,loading++,loadScript(url,function(){states[url]=2,loading--,execCallbacks("success",url),loadScripts()},function(){states[url]=3,loading--,failures.push(url),execCallbacks("failure",url),loadScripts()})))}),!loading){var notifyCallbacks=queueLoadedCallbacks.slice(0);queueLoadedCallbacks.length=0,each$6(notifyCallbacks,function(callback){0===failures.length?isFunction(callback.success)&&callback.success.call(callback.scope):isFunction(callback.failure)&&callback.failure.call(callback.scope,failures)})}})()}};ScriptLoader.ScriptLoader=new ScriptLoader;var each$7=$_8i2houjjducwnd2.each,AddOnManager=function(){var self=this;self.items=[],self.urls={},self.lookup={},self._listeners=[]};AddOnManager.prototype={get:function(name){if(this.lookup[name])return this.lookup[name].instance},dependencies:function(name){var result;return this.lookup[name]&&(result=this.lookup[name].dependencies),result||[]},requireLangPack:function(name,languages){var language=AddOnManager.language;if(language&&AddOnManager.languageLoad!==!1){if(languages)if(languages=","+languages+",",languages.indexOf(","+language.substr(0,2)+",")!==-1)language=language.substr(0,2);else if(languages.indexOf(","+language+",")===-1)return;ScriptLoader.ScriptLoader.add(this.urls[name]+"/langs/"+language+".js")}},add:function(id,addOn,dependencies){this.items.push(addOn),this.lookup[id]={instance:addOn,dependencies:dependencies};var result=$_2dw1bj4jducwn6g.partition(this._listeners,function(listener){return listener.name===id});return this._listeners=result.fail,each$7(result.pass,function(listener){listener.callback()}),addOn},remove:function(name){delete this.urls[name],delete this.lookup[name]},createUrl:function(baseUrl,dep){return"object"==typeof dep?dep:{prefix:baseUrl.prefix,resource:dep,suffix:baseUrl.suffix}},addComponents:function(pluginName,scripts){var pluginUrl=this.urls[pluginName];each$7(scripts,function(script){ScriptLoader.ScriptLoader.add(pluginUrl+"/"+script)})},load:function(name,addOnUrl,success,scope,failure){var self=this,url=addOnUrl,loadDependencies=function(){var dependencies=self.dependencies(name);each$7(dependencies,function(dep){var newUrl=self.createUrl(addOnUrl,dep);self.load(newUrl.resource,newUrl,void 0,void 0)}),success&&(scope?success.call(scope):success.call(ScriptLoader))};self.urls[name]||("object"==typeof addOnUrl&&(url=addOnUrl.prefix+addOnUrl.resource+addOnUrl.suffix),0!==url.indexOf("/")&&url.indexOf("://")===-1&&(url=AddOnManager.baseURL+"/"+url),self.urls[name]=url.substring(0,url.lastIndexOf("/")),self.lookup[name]?loadDependencies():ScriptLoader.ScriptLoader.add(url,loadDependencies,scope,failure))},waitFor:function(name,callback){this.lookup.hasOwnProperty(name)?callback():this._listeners.push({name:name,callback:callback})}},AddOnManager.PluginManager=new AddOnManager,AddOnManager.ThemeManager=new AddOnManager;var isZwsp=function(chr){return"\ufeff"===chr},trim$3=function(text){return text.replace(new RegExp("\ufeff","g"),"")},$_fz0k4u21jducwnmu={isZwsp:isZwsp,ZWSP:"\ufeff",trim:trim$3},isElement$2=$_fj238m1qjducwnjm.isElement,isText$2=$_fj238m1qjducwnjm.isText,isCaretContainerBlock=function(node){return isText$2(node)&&(node=node.parentNode),isElement$2(node)&&node.hasAttribute("data-mce-caret")},isCaretContainerInline=function(node){return isText$2(node)&&$_fz0k4u21jducwnmu.isZwsp(node.data)},isCaretContainer=function(node){return isCaretContainerBlock(node)||isCaretContainerInline(node)},hasContent=function(node){return node.firstChild!==node.lastChild||!$_fj238m1qjducwnjm.isBr(node.firstChild)},insertInline=function(node,before){var doc,sibling,textNode,parentNode;if(doc=node.ownerDocument,textNode=doc.createTextNode($_fz0k4u21jducwnmu.ZWSP),parentNode=node.parentNode,before){if(sibling=node.previousSibling,isText$2(sibling)){if(isCaretContainer(sibling))return sibling;if(endsWithCaretContainer(sibling))return sibling.splitText(sibling.data.length-1)}parentNode.insertBefore(textNode,node)}else{if(sibling=node.nextSibling,isText$2(sibling)){if(isCaretContainer(sibling))return sibling;if(startsWithCaretContainer(sibling))return sibling.splitText(1),sibling}node.nextSibling?parentNode.insertBefore(textNode,node.nextSibling):parentNode.appendChild(textNode)}return textNode},isBeforeInline=function(pos){var container=pos.container();return pos&&$_fj238m1qjducwnjm.isText(container)&&container.data.charAt(pos.offset())===$_fz0k4u21jducwnmu.ZWSP},isAfterInline=function(pos){var container=pos.container();return pos&&$_fj238m1qjducwnjm.isText(container)&&container.data.charAt(pos.offset()-1)===$_fz0k4u21jducwnmu.ZWSP},createBogusBr=function(){var br=document.createElement("br");return br.setAttribute("data-mce-bogus","1"),br},insertBlock=function(blockName,node,before){var doc,blockNode,parentNode;return doc=node.ownerDocument,blockNode=doc.createElement(blockName),blockNode.setAttribute("data-mce-caret",before?"before":"after"),blockNode.setAttribute("data-mce-bogus","all"),blockNode.appendChild(createBogusBr()),parentNode=node.parentNode,before?parentNode.insertBefore(blockNode,node):node.nextSibling?parentNode.insertBefore(blockNode,node.nextSibling):parentNode.appendChild(blockNode),blockNode},startsWithCaretContainer=function(node){return isText$2(node)&&node.data[0]===$_fz0k4u21jducwnmu.ZWSP},endsWithCaretContainer=function(node){return isText$2(node)&&node.data[node.data.length-1]===$_fz0k4u21jducwnmu.ZWSP},trimBogusBr=function(elm){var brs=elm.getElementsByTagName("br"),lastBr=brs[brs.length-1];$_fj238m1qjducwnjm.isBogus(lastBr)&&lastBr.parentNode.removeChild(lastBr)},showCaretContainerBlock=function(caretContainer){return caretContainer&&caretContainer.hasAttribute("data-mce-caret")?(trimBogusBr(caretContainer),caretContainer.removeAttribute("data-mce-caret"),caretContainer.removeAttribute("data-mce-bogus"),caretContainer.removeAttribute("style"),caretContainer.removeAttribute("_moz_abspos"),caretContainer):null},isRangeInCaretContainerBlock=function(range){return isCaretContainerBlock(range.startContainer)},isContentEditableTrue$1=$_fj238m1qjducwnjm.isContentEditableTrue,isContentEditableFalse$1=$_fj238m1qjducwnjm.isContentEditableFalse,isBr$2=$_fj238m1qjducwnjm.isBr,isText$3=$_fj238m1qjducwnjm.isText,isInvalidTextElement=$_fj238m1qjducwnjm.matchNodeNames("script style textarea"),isAtomicInline=$_fj238m1qjducwnjm.matchNodeNames("img input textarea hr iframe video audio object"),isTable$1=$_fj238m1qjducwnjm.matchNodeNames("table"),isCaretContainer$1=isCaretContainer,isCaretCandidate=function(node){return!isCaretContainer$1(node)&&(isText$3(node)?!isInvalidTextElement(node.parentNode):isAtomicInline(node)||isBr$2(node)||isTable$1(node)||isContentEditableFalse$1(node))},isInEditable=function(node,root){for(node=node.parentNode;node&&node!==root;node=node.parentNode){if(isContentEditableFalse$1(node))return!1;if(isContentEditableTrue$1(node))return!0}return!0},isAtomicContentEditableFalse=function(node){return!!isContentEditableFalse$1(node)&&$_e6e6g1kjducwnfd.reduce(node.getElementsByTagName("*"),function(result,elm){return result||isContentEditableTrue$1(elm)},!1)!==!0},isAtomic=function(node){return isAtomicInline(node)||isAtomicContentEditableFalse(node)},isEditableCaretCandidate=function(node,root){return isCaretCandidate(node)&&isInEditable(node,root)},round=Math.round,clone$1=function(rect){return rect?{left:round(rect.left),top:round(rect.top),bottom:round(rect.bottom),right:round(rect.right),width:round(rect.width),height:round(rect.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},collapse=function(rect,toStart){return rect=clone$1(rect),toStart?rect.right=rect.left:(rect.left=rect.left+rect.width,rect.right=rect.left),rect.width=0,rect},isEqual=function(rect1,rect2){return rect1.left===rect2.left&&rect1.top===rect2.top&&rect1.bottom===rect2.bottom&&rect1.right===rect2.right},isValidOverflow=function(overflowY,rect1,rect2){return overflowY>=0&&overflowY<=Math.min(rect1.height,rect2.height)/2},isAbove=function(rect1,rect2){return rect1.bottom-rect1.height/2<rect2.top||!(rect1.top>rect2.bottom)&&isValidOverflow(rect2.top-rect1.bottom,rect1,rect2)},isBelow=function(rect1,rect2){return rect1.top>rect2.bottom||!(rect1.bottom<rect2.top)&&isValidOverflow(rect2.bottom-rect1.top,rect1,rect2)},containsXY=function(rect,clientX,clientY){return clientX>=rect.left&&clientX<=rect.right&&clientY>=rect.top&&clientY<=rect.bottom},getSelectedNode=function(range){var startContainer=range.startContainer,startOffset=range.startOffset;return startContainer.hasChildNodes()&&range.endOffset===startOffset+1?startContainer.childNodes[startOffset]:null},getNode=function(container,offset){return 1===container.nodeType&&container.hasChildNodes()&&(offset>=container.childNodes.length&&(offset=container.childNodes.length-1),container=container.childNodes[offset]),container},extendingChars=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),isExtendingChar=function(ch){return"string"==typeof ch&&ch.charCodeAt(0)>=768&&extendingChars.test(ch)},slice$3=[].slice,constant$1=function(value){return function(){return value}},negate=function(predicate){return function(x){return!predicate(x)}},compose$2=function(f,g){return function(x){return f(g(x))}},or=function(){for(var x=[],_i=0;_i<arguments.length;_i++)x[_i]=arguments[_i];var args=slice$3.call(arguments);return function(x){for(var i=0;i<args.length;i++)if(args[i](x))return!0;return!1}},and=function(){for(var x=[],_i=0;_i<arguments.length;_i++)x[_i]=arguments[_i];var args=slice$3.call(arguments);return function(x){for(var i=0;i<args.length;i++)if(!args[i](x))return!1;return!0}},curry$1=function(fn){for(var x=[],_i=1;_i<arguments.length;_i++)x[_i-1]=arguments[_i];var args=slice$3.call(arguments);return args.length-1>=fn.length?fn.apply(this,args.slice(1)):function(){var tempArgs=args.concat([].slice.call(arguments));return curry$1.apply(this,tempArgs)}},noop$1=function(){},$_6183wb25jducwnn2={constant:constant$1,negate:negate,and:and,or:or,curry:curry$1,compose:compose$2,noop:noop$1},isElement$3=$_fj238m1qjducwnjm.isElement,isCaretCandidate$1=isCaretCandidate,isBlock$1=$_fj238m1qjducwnjm.matchStyleValues("display","block table"),isFloated=$_fj238m1qjducwnjm.matchStyleValues("float","left right"),isValidElementCaretCandidate=$_6183wb25jducwnn2.and(isElement$3,isCaretCandidate$1,$_6183wb25jducwnn2.negate(isFloated)),isNotPre=$_6183wb25jducwnn2.negate($_fj238m1qjducwnjm.matchStyleValues("white-space","pre pre-line pre-wrap")),isText$4=$_fj238m1qjducwnjm.isText,isBr$3=$_fj238m1qjducwnjm.isBr,nodeIndex$1=DOMUtils.nodeIndex,resolveIndex=getNode,createRange=function(doc){return"createRange"in doc?doc.createRange():DOMUtils.DOM.createRng()},isWhiteSpace=function(chr){return chr&&/[\r\n\t ]/.test(chr)},isRange=function(rng){return!!rng.setStart&&!!rng.setEnd},isHiddenWhiteSpaceRange=function(range){var text,container=range.startContainer,offset=range.startOffset;return!!(isWhiteSpace(range.toString())&&isNotPre(container.parentNode)&&$_fj238m1qjducwnjm.isText(container)&&(text=container.data,isWhiteSpace(text[offset-1])||isWhiteSpace(text[offset+1])))},getBrClientRect=function(brNode){var clientRect,doc=brNode.ownerDocument,rng=createRange(doc),nbsp=doc.createTextNode(" "),parentNode=brNode.parentNode;return parentNode.insertBefore(nbsp,brNode),rng.setStart(nbsp,0),rng.setEnd(nbsp,1),clientRect=clone$1(rng.getBoundingClientRect()),parentNode.removeChild(nbsp),clientRect},getBoundingClientRectWebKitText=function(rng){var sc=rng.startContainer,ec=rng.endContainer,so=rng.startOffset,eo=rng.endOffset;if(sc===ec&&$_fj238m1qjducwnjm.isText(ec)&&0===so&&1===eo){var newRng=rng.cloneRange();return newRng.setEndAfter(ec),getBoundingClientRect(newRng)}return null},isZeroRect=function(r){return 0===r.left&&0===r.right&&0===r.top&&0===r.bottom},getBoundingClientRect=function(item){var clientRect,clientRects;return clientRects=item.getClientRects(),clientRect=clone$1(clientRects.length>0?clientRects[0]:item.getBoundingClientRect()),!isRange(item)&&isBr$3(item)&&isZeroRect(clientRect)?getBrClientRect(item):isZeroRect(clientRect)&&isRange(item)?getBoundingClientRectWebKitText(item):clientRect},collapseAndInflateWidth=function(clientRect,toStart){var newClientRect=collapse(clientRect,toStart);return newClientRect.width=1,newClientRect.right=newClientRect.left+1,newClientRect},getCaretPositionClientRects=function(caretPosition){var beforeNode,node,clientRects=[],addUniqueAndValidRect=function(clientRect){0!==clientRect.height&&(clientRects.length>0&&isEqual(clientRect,clientRects[clientRects.length-1])||clientRects.push(clientRect))},addCharacterOffset=function(container,offset){var range=createRange(container.ownerDocument);if(offset<container.data.length){if(isExtendingChar(container.data[offset]))return clientRects;if(isExtendingChar(container.data[offset-1])&&(range.setStart(container,offset),range.setEnd(container,offset+1),!isHiddenWhiteSpaceRange(range)))return addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(range),!1)),clientRects}offset>0&&(range.setStart(container,offset-1),range.setEnd(container,offset),isHiddenWhiteSpaceRange(range)||addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(range),!1))),offset<container.data.length&&(range.setStart(container,offset),range.setEnd(container,offset+1),isHiddenWhiteSpaceRange(range)||addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(range),!0)))};if(isText$4(caretPosition.container()))return addCharacterOffset(caretPosition.container(),caretPosition.offset()),clientRects;if(isElement$3(caretPosition.container()))if(caretPosition.isAtEnd())node=resolveIndex(caretPosition.container(),caretPosition.offset()),isText$4(node)&&addCharacterOffset(node,node.data.length),isValidElementCaretCandidate(node)&&!isBr$3(node)&&addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node),!1));else{if(node=resolveIndex(caretPosition.container(),caretPosition.offset()),isText$4(node)&&addCharacterOffset(node,0),isValidElementCaretCandidate(node)&&caretPosition.isAtEnd())return addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node),!1)),clientRects;beforeNode=resolveIndex(caretPosition.container(),caretPosition.offset()-1),isValidElementCaretCandidate(beforeNode)&&!isBr$3(beforeNode)&&(isBlock$1(beforeNode)||isBlock$1(node)||!isValidElementCaretCandidate(node))&&addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(beforeNode),!1)),isValidElementCaretCandidate(node)&&addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node),!0))}return clientRects};!function(CaretPosition){CaretPosition.fromRangeStart=function(range){return CaretPosition(range.startContainer,range.startOffset)},CaretPosition.fromRangeEnd=function(range){return CaretPosition(range.endContainer,range.endOffset)},CaretPosition.after=function(node){return CaretPosition(node.parentNode,nodeIndex$1(node)+1)},CaretPosition.before=function(node){return CaretPosition(node.parentNode,nodeIndex$1(node))},CaretPosition.isAtStart=function(pos){
return!!pos&&pos.isAtStart()},CaretPosition.isAtEnd=function(pos){return!!pos&&pos.isAtEnd()},CaretPosition.isTextPosition=function(pos){return!!pos&&$_fj238m1qjducwnjm.isText(pos.container())}}(CaretPosition||(CaretPosition={}));var BreakType,CaretPosition$1=CaretPosition,isElement$4=$_fj238m1qjducwnjm.isElement,isText$5=$_fj238m1qjducwnjm.isText,removeNode=function(node){var parentNode=node.parentNode;parentNode&&parentNode.removeChild(node)},getNodeValue=function(node){try{return node.nodeValue}catch(ex){return""}},setNodeValue=function(node,text){0===text.length?removeNode(node):node.nodeValue=text},trimCount=function(text){var trimmedText=$_fz0k4u21jducwnmu.trim(text);return{count:text.length-trimmedText.length,text:trimmedText}},removeUnchanged=function(caretContainer,pos){return remove$2(caretContainer),pos},removeTextAndReposition=function(caretContainer,pos){var before=trimCount(caretContainer.data.substr(0,pos.offset())),after=trimCount(caretContainer.data.substr(pos.offset())),text=before.text+after.text;return text.length>0?(setNodeValue(caretContainer,text),CaretPosition$1(caretContainer,pos.offset()-before.count)):pos},removeElementAndReposition=function(caretContainer,pos){var parentNode=pos.container(),newPosition=$_2dw1bj4jducwn6g.indexOf(parentNode.childNodes,caretContainer).map(function(index){return index<pos.offset()?CaretPosition$1(parentNode,pos.offset()-1):pos}).getOr(pos);return remove$2(caretContainer),newPosition},removeTextCaretContainer=function(caretContainer,pos){return isText$5(caretContainer)&&pos.container()===caretContainer?removeTextAndReposition(caretContainer,pos):removeUnchanged(caretContainer,pos)},removeElementCaretContainer=function(caretContainer,pos){return pos.container()===caretContainer.parentNode?removeElementAndReposition(caretContainer,pos):removeUnchanged(caretContainer,pos)},removeAndReposition=function(container,pos){return CaretPosition$1.isTextPosition(pos)?removeTextCaretContainer(container,pos):removeElementCaretContainer(container,pos)},remove$2=function(caretContainerNode){if(isElement$4(caretContainerNode)&&isCaretContainer(caretContainerNode)&&(hasContent(caretContainerNode)?caretContainerNode.removeAttribute("data-mce-caret"):removeNode(caretContainerNode)),isText$5(caretContainerNode)){var text=$_fz0k4u21jducwnmu.trim(getNodeValue(caretContainerNode));setNodeValue(caretContainerNode,text)}},$_53zrlo29jducwnnv={removeAndReposition:removeAndReposition,remove:remove$2},walkToPositionIn=function(forward,root,start){var position=forward?CaretPosition$1.before(start):CaretPosition$1.after(start);return fromPosition(forward,root,position)},afterElement=function(node){return $_fj238m1qjducwnjm.isBr(node)?CaretPosition$1.before(node):CaretPosition$1.after(node)},isBeforeOrStart=function(position){return CaretPosition$1.isTextPosition(position)?0===position.offset():isCaretCandidate(position.getNode())},isAfterOrEnd=function(position){if(CaretPosition$1.isTextPosition(position)){var container=position.container();return position.offset()===container.data.length}return isCaretCandidate(position.getNode(!0))},isBeforeAfterSameElement=function(from,to){return!CaretPosition$1.isTextPosition(from)&&!CaretPosition$1.isTextPosition(to)&&from.getNode()===to.getNode(!0)},isAtBr=function(position){return!CaretPosition$1.isTextPosition(position)&&$_fj238m1qjducwnjm.isBr(position.getNode())},shouldSkipPosition=function(forward,from,to){return forward?!isBeforeAfterSameElement(from,to)&&!isAtBr(from)&&isAfterOrEnd(from)&&isBeforeOrStart(to):!isBeforeAfterSameElement(to,from)&&isBeforeOrStart(from)&&isAfterOrEnd(to)},fromPosition=function(forward,root,pos){var walker=CaretWalker(root);return Option.from(forward?walker.next(pos):walker.prev(pos))},navigate=function(forward,root,from){return fromPosition(forward,root,from).bind(function(to){return isInSameBlock(from,to,root)&&shouldSkipPosition(forward,from,to)?fromPosition(forward,root,to):Option.some(to)})},positionIn=function(forward,element){var startNode=forward?element.firstChild:element.lastChild;return $_fj238m1qjducwnjm.isText(startNode)?Option.some(CaretPosition$1(startNode,forward?0:startNode.data.length)):startNode?isCaretCandidate(startNode)?Option.some(forward?CaretPosition$1.before(startNode):afterElement(startNode)):walkToPositionIn(forward,element,startNode):Option.none()},$_dq07eg2bjducwno6={fromPosition:fromPosition,nextPosition:$_60qu7r6jducwn73.curry(fromPosition,!0),prevPosition:$_60qu7r6jducwn73.curry(fromPosition,!1),navigate:navigate,positionIn:positionIn,firstPositionIn:$_60qu7r6jducwn73.curry(positionIn,!0),lastPositionIn:$_60qu7r6jducwn73.curry(positionIn,!1)},isContentEditableTrue$2=$_fj238m1qjducwnjm.isContentEditableTrue,isContentEditableFalse$2=$_fj238m1qjducwnjm.isContentEditableFalse,showCaret=function(direction,editor,node,before){return editor._selectionOverrides.showCaret(direction,node,before)},getNodeRange=function(node){var rng=node.ownerDocument.createRange();return rng.selectNode(node),rng},selectNode=function(editor,node){var e;return e=editor.fire("BeforeObjectSelected",{target:node}),e.isDefaultPrevented()?null:getNodeRange(node)},renderCaretAtRange=function(editor,range){var caretPosition,ceRoot;return range=normalizeRange(1,editor.getBody(),range),caretPosition=CaretPosition$1.fromRangeStart(range),isContentEditableFalse$2(caretPosition.getNode())?showCaret(1,editor,caretPosition.getNode(),!caretPosition.isAtEnd()):isContentEditableFalse$2(caretPosition.getNode(!0))?showCaret(1,editor,caretPosition.getNode(!0),!1):(ceRoot=editor.dom.getParent(caretPosition.getNode(),function(node){return isContentEditableFalse$2(node)||isContentEditableTrue$2(node)}),isContentEditableFalse$2(ceRoot)?showCaret(1,editor,ceRoot,!1):null)},renderRangeCaret=function(editor,range){var caretRange;return range&&range.collapsed?(caretRange=renderCaretAtRange(editor,range),caretRange?caretRange:range):range},cat=function(arr){for(var r=[],push=function(x){r.push(x)},i=0;i<arr.length;i++)arr[i].each(push);return r},findMap=function(arr,f){for(var i=0;i<arr.length;i++){var r=f(arr[i],i);if(r.isSome())return r}return Option.none()},liftN=function(arr,f){for(var r=[],i=0;i<arr.length;i++){var x=arr[i];if(!x.isSome())return Option.none();r.push(x.getOrDie())}return Option.some(f.apply(null,r))},$_87ppqy2ejducwnol={cat:cat,findMap:findMap,liftN:liftN};!function(BreakType){BreakType[BreakType.Br=0]="Br",BreakType[BreakType.Block=1]="Block",BreakType[BreakType.Wrap=2]="Wrap",BreakType[BreakType.Eol=3]="Eol"}(BreakType||(BreakType={}));var HDirection,isAbove$1=function(pos1,pos2){return $_87ppqy2ejducwnol.liftN([$_2dw1bj4jducwn6g.head(pos2.getClientRects()),$_2dw1bj4jducwn6g.last(pos1.getClientRects())],isAbove).getOr(!1)},isBelow$1=function(pos1,pos2){return $_87ppqy2ejducwnol.liftN([$_2dw1bj4jducwn6g.last(pos2.getClientRects()),$_2dw1bj4jducwn6g.head(pos1.getClientRects())],function(r1,r2){return isBelow(r1,r2)}).getOr(!1)},flip=function(direction,positions){return direction===HDirection.Backwards?positions.reverse():positions},walk$1=function(direction,caretWalker,pos){return direction===HDirection.Forwards?caretWalker.next(pos):caretWalker.prev(pos)},getBreakType=function(scope,direction,currentPos,nextPos){return $_fj238m1qjducwnjm.isBr(nextPos.getNode(direction===HDirection.Forwards))?BreakType.Br:isInSameBlock(currentPos,nextPos)===!1?BreakType.Block:BreakType.Wrap},getPositionsUntil=function(predicate,direction,scope,start){for(var nextPos,caretWalker=CaretWalker(scope),currentPos=start,positions=[];currentPos&&(nextPos=walk$1(direction,caretWalker,currentPos));){if($_fj238m1qjducwnjm.isBr(nextPos.getNode(!1)))return direction===HDirection.Forwards?{positions:flip(direction,positions).concat([nextPos]),breakType:BreakType.Br,breakAt:Option.some(nextPos)}:{positions:flip(direction,positions),breakType:BreakType.Br,breakAt:Option.some(nextPos)};if(nextPos.isVisible()){if(predicate(currentPos,nextPos)){var breakType=getBreakType(0,direction,currentPos,nextPos);return{positions:flip(direction,positions),breakType:breakType,breakAt:Option.some(nextPos)}}positions.push(nextPos),currentPos=nextPos}else currentPos=nextPos}return{positions:flip(direction,positions),breakType:BreakType.Eol,breakAt:Option.none()}},getAdjacentLinePositions=function(direction,getPositionsUntilBreak,scope,start){return getPositionsUntilBreak(scope,start).breakAt.map(function(pos){var positions=getPositionsUntilBreak(scope,pos).positions;return direction===HDirection.Backwards?positions.concat(pos):[pos].concat(positions)}).getOr([])},findClosestHorizontalPositionFromPoint=function(positions,x){return $_2dw1bj4jducwn6g.foldl(positions,function(acc,newPos){return acc.fold(function(){return Option.some(newPos)},function(lastPos){return $_87ppqy2ejducwnol.liftN([$_2dw1bj4jducwn6g.head(lastPos.getClientRects()),$_2dw1bj4jducwn6g.head(newPos.getClientRects())],function(lastRect,newRect){var lastDist=Math.abs(x-lastRect.left);return Math.abs(x-newRect.left)<=lastDist?newPos:lastPos}).or(acc)})},Option.none())},findClosestHorizontalPosition=function(positions,pos){return $_2dw1bj4jducwn6g.head(pos.getClientRects()).bind(function(targetRect){return findClosestHorizontalPositionFromPoint(positions,targetRect.left)})},getPositionsUntilPreviousLine=$_60qu7r6jducwn73.curry(getPositionsUntil,isAbove$1,-1),getPositionsUntilNextLine=$_60qu7r6jducwn73.curry(getPositionsUntil,isBelow$1,1),getPositionsAbove=$_60qu7r6jducwn73.curry(getAdjacentLinePositions,-1,getPositionsUntilPreviousLine),getPositionsBelow=$_60qu7r6jducwn73.curry(getAdjacentLinePositions,1,getPositionsUntilNextLine),getFirstLinePositions=function(scope){return $_dq07eg2bjducwno6.firstPositionIn(scope).map(function(pos){return[pos].concat(getPositionsUntilNextLine(scope,pos).positions)}).getOr([])},getLastLinePositions=function(scope){return $_dq07eg2bjducwno6.lastPositionIn(scope).map(function(pos){return getPositionsUntilPreviousLine(scope,pos).positions.concat(pos)}).getOr([])},all$1=function(predicate){return descendants($_4u3ohv15jducwnhl.body(),predicate)},ancestors=function(scope,predicate,isRoot){return $_2dw1bj4jducwn6g.filter($_f0qt4317jducwnhq.parents(scope,isRoot),predicate)},siblings$1=function(scope,predicate){return $_2dw1bj4jducwn6g.filter($_f0qt4317jducwnhq.siblings(scope),predicate)},children$1=function(scope,predicate){return $_2dw1bj4jducwn6g.filter($_f0qt4317jducwnhq.children(scope),predicate)},descendants=function(scope,predicate){var result=[];return $_2dw1bj4jducwn6g.each($_f0qt4317jducwnhq.children(scope),function(x){predicate(x)&&(result=result.concat([x])),result=result.concat(descendants(x,predicate))}),result},$_4h43y02hjducwnov={all:all$1,ancestors:ancestors,siblings:siblings$1,children:children$1,descendants:descendants},all$2=function(selector){return $_3yrc4b1fjducwnim.all(selector)},ancestors$1=function(scope,selector,isRoot){return $_4h43y02hjducwnov.ancestors(scope,function(e){return $_3yrc4b1fjducwnim.is(e,selector)},isRoot)},siblings$2=function(scope,selector){return $_4h43y02hjducwnov.siblings(scope,function(e){return $_3yrc4b1fjducwnim.is(e,selector)})},children$2=function(scope,selector){return $_4h43y02hjducwnov.children(scope,function(e){return $_3yrc4b1fjducwnim.is(e,selector)})},descendants$1=function(scope,selector){return $_3yrc4b1fjducwnim.all(selector,scope)},$_47k8tx2gjducwnot={all:all$2,ancestors:ancestors$1,siblings:siblings$2,children:children$2,descendants:descendants$1},deflate=function(rect,delta){return{left:rect.left-delta,top:rect.top-delta,right:rect.right+2*delta,bottom:rect.bottom+2*delta,width:rect.width+delta,height:rect.height+delta}},getCorners=function(getYAxisValue,tds){return $_2dw1bj4jducwn6g.bind(tds,function(td){var rect=deflate(td.getBoundingClientRect(),-1);return[{x:rect.left,y:getYAxisValue(rect),cell:td},{x:rect.right,y:getYAxisValue(rect),cell:td}]})},findClosestCorner=function(corners,x,y){return $_2dw1bj4jducwn6g.foldl(corners,function(acc,newCorner){return acc.fold(function(){return Option.some(newCorner)},function(oldCorner){var oldDist=Math.sqrt(Math.abs(oldCorner.x-x)+Math.abs(oldCorner.y-y)),newDist=Math.sqrt(Math.abs(newCorner.x-x)+Math.abs(newCorner.y-y));return Option.some(newDist<oldDist?newCorner:oldCorner)})},Option.none())},getClosestCell=function(getYAxisValue,isTargetCorner,table,x,y){var cells=$_47k8tx2gjducwnot.descendants($_5s4uzoyjducwngo.fromDom(table),"td,th").map(function(e){return e.dom()}),corners=$_2dw1bj4jducwn6g.filter(getCorners(getYAxisValue,cells),function(corner){return isTargetCorner(corner,y)});return findClosestCorner(corners,x,y).map(function(corner){return corner.cell})},getBottomValue=function(rect){return rect.bottom},getTopValue=function(rect){return rect.top},isAbove$2=function(corner,y){return corner.y<y},isBelow$2=function(corner,y){return corner.y>y},getClosestCellAbove=$_60qu7r6jducwn73.curry(getClosestCell,getBottomValue,isAbove$2),getClosestCellBelow=$_60qu7r6jducwn73.curry(getClosestCell,getTopValue,isBelow$2),findClosestPositionInAboveCell=function(table,pos){return $_2dw1bj4jducwn6g.head(pos.getClientRects()).bind(function(rect){return getClosestCellAbove(table,rect.left,rect.top)}).bind(function(cell){return findClosestHorizontalPosition(getLastLinePositions(cell),pos)})},findClosestPositionInBelowCell=function(table,pos){return $_2dw1bj4jducwn6g.last(pos.getClientRects()).bind(function(rect){return getClosestCellBelow(table,rect.left,rect.top)}).bind(function(cell){return findClosestHorizontalPosition(getFirstLinePositions(cell),pos)})},browser$2=$_5hshlmmjducwnfr.detect().browser,isFakeCaretTableBrowser=function(){return browser$2.isIE()||browser$2.isEdge()||browser$2.isFirefox()},isAtTableCellLine=function(getPositionsUntil,scope,pos){var lineInfo=getPositionsUntil(scope,pos);return lineInfo.breakType===BreakType.Wrap&&0===lineInfo.positions.length?lineInfo.breakAt.map(function(breakPos){return getPositionsUntil(scope,breakPos).breakAt.isNone()}).getOr(!0):lineInfo.breakAt.isNone()},isAtFirstTableCellLine=$_6183wb25jducwnn2.curry(isAtTableCellLine,getPositionsUntilPreviousLine),isAtLastTableCellLine=$_6183wb25jducwnn2.curry(isAtTableCellLine,getPositionsUntilNextLine),isCaretAtStartOrEndOfTable=function(forward,rng,table){var caretPos=CaretPosition$1.fromRangeStart(rng);return $_dq07eg2bjducwno6.positionIn(!forward,table).map(function(pos){return pos.isEqual(caretPos)}).getOr(!1)},navigateHorizontally=function(editor,forward,table,td){var rng=editor.selection.getRng(),direction=forward?1:-1;if(isFakeCaretTableBrowser()&&isCaretAtStartOrEndOfTable(forward,rng,table)){var newRng=showCaret(direction,editor,table,!forward);return editor.selection.setRng(newRng),!0}return!1},getClosestAbovePosition=function(root,table,start){return findClosestPositionInAboveCell(table,start).orThunk(function(){return $_2dw1bj4jducwn6g.head(start.getClientRects()).bind(function(rect){return findClosestHorizontalPositionFromPoint(getPositionsAbove(root,CaretPosition$1.before(table)),rect.left)})}).getOr(CaretPosition$1.before(table))},getClosestBelowPosition=function(root,table,start){return findClosestPositionInBelowCell(table,start).orThunk(function(){return $_2dw1bj4jducwn6g.head(start.getClientRects()).bind(function(rect){return findClosestHorizontalPositionFromPoint(getPositionsBelow(root,CaretPosition$1.after(table)),rect.left)})}).getOr(CaretPosition$1.after(table))},navigateVertically=function(editor,down,table,td){var rng=editor.selection.getRng(),pos=CaretPosition$1.fromRangeStart(rng),root=editor.getBody();if(!down&&isAtFirstTableCellLine(td,pos)){var newPos=getClosestAbovePosition(root,table,pos);return editor.selection.setRng(newPos.toRange()),!0}if(down&&isAtLastTableCellLine(td,pos)){var newPos=getClosestBelowPosition(root,table,pos);return editor.selection.setRng(newPos.toRange()),!0}return!1},moveH=function(editor,forward){return function(){return Option.from(editor.dom.getParent(editor.selection.getNode(),"td,th")).bind(function(td){return Option.from(editor.dom.getParent(td,"table")).map(function(table){return navigateHorizontally(editor,forward,table)})}).getOr(!1)}},moveV=function(editor,forward){return function(){return Option.from(editor.dom.getParent(editor.selection.getNode(),"td,th")).bind(function(td){return Option.from(editor.dom.getParent(td,"table")).map(function(table){return navigateVertically(editor,forward,table,td)})}).getOr(!1)}},isContentEditableFalse$3=$_fj238m1qjducwnjm.isContentEditableFalse,isTableCell$1=function(node){return $_fj238m1qjducwnjm.isElement(node)&&/^(TD|TH)$/i.test(node.tagName)},hasFocus=function(root){return root.ownerDocument.activeElement===root},getAbsoluteClientRect=function(root,element,before){var docElm,scrollX,scrollY,margin,rootRect,clientRect=collapse(element.getBoundingClientRect(),before);return"BODY"===root.tagName?(docElm=root.ownerDocument.documentElement,scrollX=root.scrollLeft||docElm.scrollLeft,scrollY=root.scrollTop||docElm.scrollTop):(rootRect=root.getBoundingClientRect(),scrollX=root.scrollLeft-rootRect.left,scrollY=root.scrollTop-rootRect.top),clientRect.left+=scrollX,clientRect.right+=scrollX,clientRect.top+=scrollY,clientRect.bottom+=scrollY,clientRect.width=1,margin=element.offsetWidth-element.clientWidth,margin>0&&(before&&(margin*=-1),clientRect.left+=margin,clientRect.right+=margin),clientRect},trimInlineCaretContainers=function(root){var contentEditableFalseNodes,node,sibling,i,data;for(contentEditableFalseNodes=DomQuery("*[contentEditable=false]",root),i=0;i<contentEditableFalseNodes.length;i++)node=contentEditableFalseNodes[i],sibling=node.previousSibling,endsWithCaretContainer(sibling)&&(data=sibling.data,1===data.length?sibling.parentNode.removeChild(sibling):sibling.deleteData(data.length-1,1)),sibling=node.nextSibling,startsWithCaretContainer(sibling)&&(data=sibling.data,1===data.length?sibling.parentNode.removeChild(sibling):sibling.deleteData(0,1))},FakeCaret=function(root,isBlock){var cursorInterval,caretContainerNode,$lastVisualCaret=null,show=function(before,element){var clientRect,rng;return hide(),isTableCell$1(element)?null:isBlock(element)?(caretContainerNode=insertBlock("p",element,before),clientRect=getAbsoluteClientRect(root,element,before),DomQuery(caretContainerNode).css("top",clientRect.top),$lastVisualCaret=DomQuery('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(clientRect).appendTo(root),before&&$lastVisualCaret.addClass("mce-visual-caret-before"),startBlink(),rng=element.ownerDocument.createRange(),rng.setStart(caretContainerNode,0),rng.setEnd(caretContainerNode,0),rng):(caretContainerNode=insertInline(element,before),rng=element.ownerDocument.createRange(),isContentEditableFalse$3(caretContainerNode.nextSibling)?(rng.setStart(caretContainerNode,0),rng.setEnd(caretContainerNode,0)):(rng.setStart(caretContainerNode,1),rng.setEnd(caretContainerNode,1)),rng)},hide=function(){trimInlineCaretContainers(root),caretContainerNode&&($_53zrlo29jducwnnv.remove(caretContainerNode),caretContainerNode=null),$lastVisualCaret&&($lastVisualCaret.remove(),$lastVisualCaret=null),clearInterval(cursorInterval)},startBlink=function(){cursorInterval=$_83mf8ygjducwnbc.setInterval(function(){hasFocus(root)?DomQuery("div.mce-visual-caret",root).toggleClass("mce-visual-caret-hidden"):DomQuery("div.mce-visual-caret",root).addClass("mce-visual-caret-hidden")},500)},destroy=function(){return $_83mf8ygjducwnbc.clearInterval(cursorInterval)},getCss=function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"};return{show:show,hide:hide,getCss:getCss,destroy:destroy}},isFakeCaretTarget=function(node){return isContentEditableFalse$3(node)||$_fj238m1qjducwnjm.isTable(node)&&isFakeCaretTableBrowser()},isContentEditableFalse$4=$_fj238m1qjducwnjm.isContentEditableFalse,isBlockLike=$_fj238m1qjducwnjm.matchStyleValues("display","block table table-cell table-caption list-item"),isCaretContainer$2=isCaretContainer,isCaretContainerBlock$1=isCaretContainerBlock,curry$2=$_6183wb25jducwnn2.curry,isElement$5=$_fj238m1qjducwnjm.isElement,isCaretCandidate$2=isCaretCandidate,isForwards=function(direction){return direction>0},isBackwards=function(direction){return direction<0},skipCaretContainers=function(walk,shallow){for(var node;node=walk(shallow);)if(!isCaretContainerBlock$1(node))return node;return null},findNode=function(node,direction,predicateFn,rootNode,shallow){var walker=new TreeWalker(node,rootNode);if(isBackwards(direction)){if((isContentEditableFalse$4(node)||isCaretContainerBlock$1(node))&&(node=skipCaretContainers(walker.prev,!0),predicateFn(node)))return node;for(;node=skipCaretContainers(walker.prev,shallow);)if(predicateFn(node))return node}if(isForwards(direction)){if((isContentEditableFalse$4(node)||isCaretContainerBlock$1(node))&&(node=skipCaretContainers(walker.next,!0),predicateFn(node)))return node;for(;node=skipCaretContainers(walker.next,shallow);)if(predicateFn(node))return node}return null},getParentBlock=function(node,rootNode){for(;node&&node!==rootNode;){if(isBlockLike(node))return node;node=node.parentNode}return null},isInSameBlock=function(caretPosition1,caretPosition2,rootNode){return getParentBlock(caretPosition1.container(),rootNode)===getParentBlock(caretPosition2.container(),rootNode)},getChildNodeAtRelativeOffset=function(relativeOffset,caretPosition){var container,offset;return caretPosition?(container=caretPosition.container(),offset=caretPosition.offset(),isElement$5(container)?container.childNodes[offset+relativeOffset]:null):null},beforeAfter=function(before,node){var range=node.ownerDocument.createRange();return before?(range.setStartBefore(node),range.setEndBefore(node)):(range.setStartAfter(node),range.setEndAfter(node)),range},isNodesInSameBlock=function(root,node1,node2){return getParentBlock(node1,root)===getParentBlock(node2,root)},lean=function(left,root,node){var sibling,siblingName;for(siblingName=left?"previousSibling":"nextSibling";node&&node!==root;){if(sibling=node[siblingName],isCaretContainer$2(sibling)&&(sibling=sibling[siblingName]),isContentEditableFalse$4(sibling)){if(isNodesInSameBlock(root,sibling,node))return sibling;break}if(isCaretCandidate$2(sibling))break;node=node.parentNode}return null},before=curry$2(beforeAfter,!0),after=curry$2(beforeAfter,!1),normalizeRange=function(direction,root,range){var node,container,offset,location,leanLeft=curry$2(lean,!0,root),leanRight=curry$2(lean,!1,root);if(container=range.startContainer,offset=range.startOffset,isCaretContainerBlock(container)){if(isElement$5(container)||(container=container.parentNode),"before"===(location=container.getAttribute("data-mce-caret"))&&(node=container.nextSibling,isFakeCaretTarget(node)))return before(node);if("after"===location&&(node=container.previousSibling,isFakeCaretTarget(node)))return after(node)}if(!range.collapsed)return range;if($_fj238m1qjducwnjm.isText(container)){if(isCaretContainer$2(container)){if(1===direction){if(node=leanRight(container))return before(node);if(node=leanLeft(container))return after(node)}if(direction===-1){if(node=leanLeft(container))return after(node);if(node=leanRight(container))return before(node)}return range}if(endsWithCaretContainer(container)&&offset>=container.data.length-1)return 1===direction&&(node=leanRight(container))?before(node):range;if(startsWithCaretContainer(container)&&offset<=1)return direction===-1&&(node=leanLeft(container))?after(node):range;if(offset===container.data.length)return node=leanRight(container),node?before(node):range;if(0===offset)return node=leanLeft(container),node?after(node):range}return range},isNextToContentEditableFalse=function(relativeOffset,caretPosition){var node=getChildNodeAtRelativeOffset(relativeOffset,caretPosition);return isContentEditableFalse$4(node)&&!$_fj238m1qjducwnjm.isBogusAll(node)},isNextToTable=function(relativeOffset,caretPosition){return $_fj238m1qjducwnjm.isTable(getChildNodeAtRelativeOffset(relativeOffset,caretPosition))},getRelativeCefElm=function(forward,caretPosition){return Option.from(getChildNodeAtRelativeOffset(forward?0:-1,caretPosition)).filter(isContentEditableFalse$4)},getNormalizedRangeEndPoint=function(direction,root,range){var normalizedRange=normalizeRange(direction,root,range);return direction===-1?CaretPosition.fromRangeStart(normalizedRange):CaretPosition.fromRangeEnd(normalizedRange)},isBeforeContentEditableFalse=curry$2(isNextToContentEditableFalse,0),isAfterContentEditableFalse=curry$2(isNextToContentEditableFalse,-1),isBeforeTable=curry$2(isNextToTable,0),isAfterTable=curry$2(isNextToTable,-1);!function(HDirection){HDirection[HDirection.Backwards=-1]="Backwards",HDirection[HDirection.Forwards=1]="Forwards"}(HDirection||(HDirection={}));var isContentEditableFalse$5=$_fj238m1qjducwnjm.isContentEditableFalse,isText$6=$_fj238m1qjducwnjm.isText,isElement$6=$_fj238m1qjducwnjm.isElement,isBr$4=$_fj238m1qjducwnjm.isBr,isCaretCandidate$3=isCaretCandidate,isAtomic$1=isAtomic,isEditableCaretCandidate$1=isEditableCaretCandidate,getParents=function(node,root){for(var parents=[];node&&node!==root;)parents.push(node),node=node.parentNode;return parents},nodeAtIndex=function(container,offset){return container.hasChildNodes()&&offset<container.childNodes.length?container.childNodes[offset]:null},getCaretCandidatePosition=function(direction,node){if(isForwards(direction)){if(isCaretCandidate$3(node.previousSibling)&&!isText$6(node.previousSibling))return CaretPosition$1.before(node);if(isText$6(node))return CaretPosition$1(node,0)}if(isBackwards(direction)){if(isCaretCandidate$3(node.nextSibling)&&!isText$6(node.nextSibling))return CaretPosition$1.after(node);if(isText$6(node))return CaretPosition$1(node,node.data.length)}return isBackwards(direction)?isBr$4(node)?CaretPosition$1.before(node):CaretPosition$1.after(node):CaretPosition$1.before(node)},isBrBeforeBlock=function(node,root){var next;return!!$_fj238m1qjducwnjm.isBr(node)&&(!!(next=findCaretPosition(1,CaretPosition$1.after(node),root))&&!isInSameBlock(CaretPosition$1.before(node),CaretPosition$1.before(next),root))},findCaretPosition=function(direction,startPos,root){var node,nextNode,innerNode,rootContentEditableFalseElm,caretPosition;if(!isElement$6(root)||!startPos)return null;if(startPos.isEqual(CaretPosition$1.after(root))&&root.lastChild){if(caretPosition=CaretPosition$1.after(root.lastChild),isBackwards(direction)&&isCaretCandidate$3(root.lastChild)&&isElement$6(root.lastChild))return isBr$4(root.lastChild)?CaretPosition$1.before(root.lastChild):caretPosition}else caretPosition=startPos;var container=caretPosition.container(),offset=caretPosition.offset();if(isText$6(container)){if(isBackwards(direction)&&offset>0)return CaretPosition$1(container,--offset);if(isForwards(direction)&&offset<container.length)return CaretPosition$1(container,++offset);node=container}else{if(isBackwards(direction)&&offset>0&&(nextNode=nodeAtIndex(container,offset-1),isCaretCandidate$3(nextNode)))return!isAtomic$1(nextNode)&&(innerNode=findNode(nextNode,direction,isEditableCaretCandidate$1,nextNode))?isText$6(innerNode)?CaretPosition$1(innerNode,innerNode.data.length):CaretPosition$1.after(innerNode):isText$6(nextNode)?CaretPosition$1(nextNode,nextNode.data.length):CaretPosition$1.before(nextNode);if(isForwards(direction)&&offset<container.childNodes.length&&(nextNode=nodeAtIndex(container,offset),isCaretCandidate$3(nextNode)))return isBrBeforeBlock(nextNode,root)?findCaretPosition(direction,CaretPosition$1.after(nextNode),root):!isAtomic$1(nextNode)&&(innerNode=findNode(nextNode,direction,isEditableCaretCandidate$1,nextNode))?isText$6(innerNode)?CaretPosition$1(innerNode,0):CaretPosition$1.before(innerNode):isText$6(nextNode)?CaretPosition$1(nextNode,0):CaretPosition$1.after(nextNode);node=nextNode?nextNode:caretPosition.getNode()}return(isForwards(direction)&&caretPosition.isAtEnd()||isBackwards(direction)&&caretPosition.isAtStart())&&(node=findNode(node,direction,$_6183wb25jducwnn2.constant(!0),root,!0),isEditableCaretCandidate$1(node,root))?getCaretCandidatePosition(direction,node):(nextNode=findNode(node,direction,isEditableCaretCandidate$1,root),rootContentEditableFalseElm=$_e6e6g1kjducwnfd.last($_e6e6g1kjducwnfd.filter(getParents(container,root),isContentEditableFalse$5)),!rootContentEditableFalseElm||nextNode&&rootContentEditableFalseElm.contains(nextNode)?nextNode?getCaretCandidatePosition(direction,nextNode):null:caretPosition=isForwards(direction)?CaretPosition$1.after(rootContentEditableFalseElm):CaretPosition$1.before(rootContentEditableFalseElm))},CaretWalker=function(root){return{next:function(caretPosition){return findCaretPosition(HDirection.Forwards,caretPosition,root)},prev:function(caretPosition){return findCaretPosition(HDirection.Backwards,caretPosition,root)}}},hasOnlyOneChild=function(node){return node.firstChild&&node.firstChild===node.lastChild},isPaddingNode=function(node){return"br"===node.name||" "===node.value},isPaddedEmptyBlock=function(schema,node){return schema.getBlockElements()[node.name]&&hasOnlyOneChild(node)&&isPaddingNode(node.firstChild)},isEmptyFragmentElement=function(schema,node){var nonEmptyElements=schema.getNonEmptyElements();return node&&(node.isEmpty(nonEmptyElements)||isPaddedEmptyBlock(schema,node))},isListFragment=function(schema,fragment){var firstChild=fragment.firstChild,lastChild=fragment.lastChild;return firstChild&&"meta"===firstChild.name&&(firstChild=firstChild.next),lastChild&&"mce_marker"===lastChild.attr("id")&&(lastChild=lastChild.prev),isEmptyFragmentElement(schema,lastChild)&&(lastChild=lastChild.prev),!(!firstChild||firstChild!==lastChild)&&("ul"===firstChild.name||"ol"===firstChild.name)},cleanupDomFragment=function(domFragment){var firstChild=domFragment.firstChild,lastChild=domFragment.lastChild;return firstChild&&"META"===firstChild.nodeName&&firstChild.parentNode.removeChild(firstChild),lastChild&&"mce_marker"===lastChild.id&&lastChild.parentNode.removeChild(lastChild),domFragment},toDomFragment=function(dom,serializer,fragment){var html=serializer.serialize(fragment),domFragment=dom.createFragment(html);return cleanupDomFragment(domFragment)},listItems$1=function(elm){return $_8i2houjjducwnd2.grep(elm.childNodes,function(child){return"LI"===child.nodeName})},isPadding=function(node){return" "===node.data||$_fj238m1qjducwnjm.isBr(node)},isListItemPadded=function(node){return node&&node.firstChild&&node.firstChild===node.lastChild&&isPadding(node.firstChild)},isEmptyOrPadded=function(elm){return!elm.firstChild||isListItemPadded(elm)},trimListItems=function(elms){return elms.length>0&&isEmptyOrPadded(elms[elms.length-1])?elms.slice(0,-1):elms},getParentLi=function(dom,node){var parentBlock=dom.getParent(node,dom.isBlock);return parentBlock&&"LI"===parentBlock.nodeName?parentBlock:null},isParentBlockLi=function(dom,node){return!!getParentLi(dom,node)},getSplit=function(parentNode,rng){var beforeRng=rng.cloneRange(),afterRng=rng.cloneRange();return beforeRng.setStartBefore(parentNode),afterRng.setEndAfter(parentNode),[beforeRng.cloneContents(),afterRng.cloneContents()]},findFirstIn=function(node,rootNode){var caretPos=CaretPosition$1.before(node),caretWalker=CaretWalker(rootNode),newCaretPos=caretWalker.next(caretPos);return newCaretPos?newCaretPos.toRange():null},findLastOf=function(node,rootNode){var caretPos=CaretPosition$1.after(node),caretWalker=CaretWalker(rootNode),newCaretPos=caretWalker.prev(caretPos);return newCaretPos?newCaretPos.toRange():null},insertMiddle=function(target,elms,rootNode,rng){var parts=getSplit(target,rng),parentElm=target.parentNode;return parentElm.insertBefore(parts[0],target),$_8i2houjjducwnd2.each(elms,function(li){parentElm.insertBefore(li,target)}),parentElm.insertBefore(parts[1],target),parentElm.removeChild(target),findLastOf(elms[elms.length-1],rootNode)},insertBefore=function(target,elms,rootNode){
var parentElm=target.parentNode;return $_8i2houjjducwnd2.each(elms,function(elm){parentElm.insertBefore(elm,target)}),findFirstIn(target,rootNode)},insertAfter=function(target,elms,rootNode,dom){return dom.insertAfter(elms.reverse(),target),findLastOf(elms[0],rootNode)},insertAtCaret=function(serializer,dom,rng,fragment){var domFragment=toDomFragment(dom,serializer,fragment),liTarget=getParentLi(dom,rng.startContainer),liElms=trimListItems(listItems$1(domFragment.firstChild)),rootNode=dom.getRoot(),isAt=function(location){var caretPos=CaretPosition$1.fromRangeStart(rng),caretWalker=CaretWalker(dom.getRoot()),newPos=1===location?caretWalker.prev(caretPos):caretWalker.next(caretPos);return!newPos||getParentLi(dom,newPos.getNode())!==liTarget};return isAt(1)?insertBefore(liTarget,liElms,rootNode):isAt(2)?insertAfter(liTarget,liElms,rootNode,dom):insertMiddle(liTarget,liElms,rootNode,rng)},$_g0kxnx1xjducwnm8={isListFragment:isListFragment,insertAtCaret:insertAtCaret,isParentBlockLi:isParentBlockLi,trimListItems:trimListItems,listItems:listItems$1},isText$7=$_fj238m1qjducwnjm.isText,isBogus$1=$_fj238m1qjducwnjm.isBogus,nodeIndex$2=DOMUtils.nodeIndex,normalizedParent=function(node){var parentNode=node.parentNode;return isBogus$1(parentNode)?normalizedParent(parentNode):parentNode},getChildNodes=function(node){return node?$_e6e6g1kjducwnfd.reduce(node.childNodes,function(result,node){return isBogus$1(node)&&"BR"!==node.nodeName?result=result.concat(getChildNodes(node)):result.push(node),result},[]):[]},normalizedTextOffset=function(node,offset){for(;(node=node.previousSibling)&&isText$7(node);)offset+=node.data.length;return offset},equal$1=function(a){return function(b){return a===b}},normalizedNodeIndex=function(node){var nodes,index,numTextFragments;return nodes=getChildNodes(normalizedParent(node)),index=$_e6e6g1kjducwnfd.findIndex(nodes,equal$1(node),node),nodes=nodes.slice(0,index+1),numTextFragments=$_e6e6g1kjducwnfd.reduce(nodes,function(result,node,i){return isText$7(node)&&isText$7(nodes[i-1])&&result++,result},0),nodes=$_e6e6g1kjducwnfd.filter(nodes,$_fj238m1qjducwnjm.matchNodeNames(node.nodeName)),(index=$_e6e6g1kjducwnfd.findIndex(nodes,equal$1(node),node))-numTextFragments},createPathItem=function(node){return(isText$7(node)?"text()":node.nodeName.toLowerCase())+"["+normalizedNodeIndex(node)+"]"},parentsUntil=function(root,node,predicate){var parents=[];for(node=node.parentNode;node!==root&&(!predicate||!predicate(node));node=node.parentNode)parents.push(node);return parents},create$1=function(root,caretPosition){var container,offset,outputOffset,childNodes,parents,path=[];return container=caretPosition.container(),offset=caretPosition.offset(),isText$7(container)?outputOffset=normalizedTextOffset(container,offset):(childNodes=container.childNodes,offset>=childNodes.length?(outputOffset="after",offset=childNodes.length-1):outputOffset="before",container=childNodes[offset]),path.push(createPathItem(container)),parents=parentsUntil(root,container),parents=$_e6e6g1kjducwnfd.filter(parents,$_6183wb25jducwnn2.negate($_fj238m1qjducwnjm.isBogus)),path=path.concat($_e6e6g1kjducwnfd.map(parents,function(node){return createPathItem(node)})),path.reverse().join("/")+","+outputOffset},resolvePathItem=function(node,name,index){var nodes=getChildNodes(node);return nodes=$_e6e6g1kjducwnfd.filter(nodes,function(node,index){return!isText$7(node)||!isText$7(nodes[index-1])}),nodes=$_e6e6g1kjducwnfd.filter(nodes,$_fj238m1qjducwnjm.matchNodeNames(name)),nodes[index]},findTextPosition=function(container,offset){for(var dataLen,node=container,targetOffset=0;isText$7(node);){if(dataLen=node.data.length,offset>=targetOffset&&offset<=targetOffset+dataLen){container=node,offset-=targetOffset;break}if(!isText$7(node.nextSibling)){container=node,offset=dataLen;break}targetOffset+=dataLen,node=node.nextSibling}return isText$7(container)&&offset>container.data.length&&(offset=container.data.length),CaretPosition$1(container,offset)},resolve$2=function(root,path){var parts,container,offset;return path?(parts=path.split(","),path=parts[0].split("/"),offset=parts.length>1?parts[1]:"before",container=$_e6e6g1kjducwnfd.reduce(path,function(result,value){return(value=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(value))?("text()"===value[1]&&(value[1]="#text"),resolvePathItem(result,value[1],parseInt(value[2],10))):null},root),container?isText$7(container)?findTextPosition(container,parseInt(offset,10)):(offset="after"===offset?nodeIndex$2(container)+1:nodeIndex$2(container),CaretPosition$1(container.parentNode,offset)):null):null},isContentEditableFalse$6=$_fj238m1qjducwnjm.isContentEditableFalse,getNormalizedTextOffset=function(trim,container,offset){var node,trimmedOffset;for(trimmedOffset=trim(container.data.slice(0,offset)).length,node=container.previousSibling;node&&$_fj238m1qjducwnjm.isText(node);node=node.previousSibling)trimmedOffset+=trim(node.data).length;return trimmedOffset},getPoint=function(dom,trim,normalized,rng,start){var childNodes,container=rng[start?"startContainer":"endContainer"],offset=rng[start?"startOffset":"endOffset"],point=[],after=0,root=dom.getRoot();for($_fj238m1qjducwnjm.isText(container)?point.push(normalized?getNormalizedTextOffset(trim,container,offset):offset):(childNodes=container.childNodes,offset>=childNodes.length&&childNodes.length&&(after=1,offset=Math.max(0,childNodes.length-1)),point.push(dom.nodeIndex(childNodes[offset],normalized)+after));container&&container!==root;container=container.parentNode)point.push(dom.nodeIndex(container,normalized));return point},getLocation=function(trim,selection,normalized,rng){var dom=selection.dom,bookmark={};return bookmark.start=getPoint(dom,trim,normalized,rng,!0),selection.isCollapsed()||(bookmark.end=getPoint(dom,trim,normalized,rng,!1)),bookmark},trimEmptyTextNode=function(node){$_fj238m1qjducwnjm.isText(node)&&0===node.data.length&&node.parentNode.removeChild(node)},findIndex$3=function(dom,name,element){var count=0;return $_8i2houjjducwnd2.each(dom.select(name),function(node){if("all"!==node.getAttribute("data-mce-bogus"))return node!==element&&void count++}),count},moveEndPoint=function(rng,start){var container,offset,childNodes,prefix=start?"start":"end";container=rng[prefix+"Container"],offset=rng[prefix+"Offset"],$_fj238m1qjducwnjm.isElement(container)&&"TR"===container.nodeName&&(childNodes=container.childNodes,(container=childNodes[Math.min(start?offset:offset-1,childNodes.length-1)])&&(offset=start?0:container.childNodes.length,rng["set"+(start?"Start":"End")](container,offset)))},normalizeTableCellSelection=function(rng){return moveEndPoint(rng,!0),moveEndPoint(rng,!1),rng},findSibling=function(node,offset){var sibling;if($_fj238m1qjducwnjm.isElement(node)&&(node=getNode(node,offset),isContentEditableFalse$6(node)))return node;if(isCaretContainer(node)){if($_fj238m1qjducwnjm.isText(node)&&isCaretContainerBlock(node)&&(node=node.parentNode),sibling=node.previousSibling,isContentEditableFalse$6(sibling))return sibling;if(sibling=node.nextSibling,isContentEditableFalse$6(sibling))return sibling}},findAdjacentContentEditableFalseElm=function(rng){return findSibling(rng.startContainer,rng.startOffset)||findSibling(rng.endContainer,rng.endOffset)},getOffsetBookmark=function(trim,normalized,selection){var element=selection.getNode(),name=element?element.nodeName:null,rng=selection.getRng();return isContentEditableFalse$6(element)||"IMG"===name?{name:name,index:findIndex$3(selection.dom,name,element)}:(element=findAdjacentContentEditableFalseElm(rng),element?(name=element.tagName,{name:name,index:findIndex$3(selection.dom,name,element)}):getLocation(trim,selection,normalized,rng))},getCaretBookmark=function(selection){var rng=selection.getRng();return{start:create$1(selection.dom.getRoot(),CaretPosition$1.fromRangeStart(rng)),end:create$1(selection.dom.getRoot(),CaretPosition$1.fromRangeEnd(rng))}},getRangeBookmark=function(selection){return{rng:selection.getRng()}},getPersistentBookmark=function(selection){var dom=selection.dom,rng=selection.getRng(),id=dom.uniqueId(),collapsed=selection.isCollapsed(),styles="overflow:hidden;line-height:0px",element=selection.getNode(),name=element.nodeName;if("IMG"===name)return{name:name,index:findIndex$3(dom,name,element)};var rng2=normalizeTableCellSelection(rng.cloneRange());if(!collapsed){rng2.collapse(!1);var endBookmarkNode=dom.create("span",{"data-mce-type":"bookmark",id:id+"_end",style:styles},"&#xFEFF;");rng2.insertNode(endBookmarkNode),trimEmptyTextNode(endBookmarkNode.nextSibling)}rng=normalizeTableCellSelection(rng),rng.collapse(!0);var startBookmarkNode=dom.create("span",{"data-mce-type":"bookmark",id:id+"_start",style:styles},"&#xFEFF;");return rng.insertNode(startBookmarkNode),trimEmptyTextNode(startBookmarkNode.previousSibling),selection.moveToBookmark({id:id,keep:1}),{id:id}},getBookmark=function(selection,type,normalized){return 2===type?getOffsetBookmark($_fz0k4u21jducwnmu.trim,normalized,selection):3===type?getCaretBookmark(selection):type?getRangeBookmark(selection):getPersistentBookmark(selection)},$_epzga02kjducwnp2={getBookmark:getBookmark,getUndoBookmark:$_60qu7r6jducwn73.curry(getOffsetBookmark,$_60qu7r6jducwn73.identity,!0)},addBogus=function(dom,node){return!dom.isBlock(node)||node.innerHTML||$_cum1kc9jducwn99.ie||(node.innerHTML='<br data-mce-bogus="1" />'),node},resolveCaretPositionBookmark=function(dom,bookmark){var rng,pos;return rng=dom.createRng(),pos=resolve$2(dom.getRoot(),bookmark.start),rng.setStart(pos.container(),pos.offset()),pos=resolve$2(dom.getRoot(),bookmark.end),rng.setEnd(pos.container(),pos.offset()),rng},setEndPoint=function(dom,start,bookmark,rng){var i,node,offset,children,point=bookmark[start?"start":"end"],root=dom.getRoot();if(point){for(offset=point[0],node=root,i=point.length-1;i>=1;i--){if(children=node.childNodes,point[i]>children.length-1)return;node=children[point[i]]}3===node.nodeType&&(offset=Math.min(point[0],node.nodeValue.length)),1===node.nodeType&&(offset=Math.min(point[0],node.childNodes.length)),start?rng.setStart(node,offset):rng.setEnd(node,offset)}return!0},restoreEndPoint=function(dom,suffix,bookmark){var node,idx,next,prev,container,offset,marker=dom.get(bookmark.id+"_"+suffix),keep=bookmark.keep;if(marker){if(node=marker.parentNode,keep?(node=marker.firstChild,idx=1):idx=dom.nodeIndex(marker),container=node,offset=idx,!keep){for(prev=marker.previousSibling,next=marker.nextSibling,$_8i2houjjducwnd2.each($_8i2houjjducwnd2.grep(marker.childNodes),function(node){$_fj238m1qjducwnjm.isText(node)&&(node.nodeValue=node.nodeValue.replace(/\uFEFF/g,""))});marker=dom.get(bookmark.id+"_"+suffix);)dom.remove(marker,1);prev&&next&&prev.nodeType===next.nodeType&&$_fj238m1qjducwnjm.isText(prev)&&!$_cum1kc9jducwn99.opera&&(idx=prev.nodeValue.length,prev.appendData(next.nodeValue),dom.remove(next),container=prev,offset=idx)}return Option.some(CaretPosition$1(container,offset))}return Option.none()},alt=function(o1,o2){return o1.isSome()?o1:o2},resolvePaths=function(dom,bookmark){var rng=dom.createRng();return setEndPoint(dom,!0,bookmark,rng)&&setEndPoint(dom,!1,bookmark,rng)?Option.some(rng):Option.none()},resolveId=function(dom,bookmark){var startPos=restoreEndPoint(dom,"start",bookmark),endPos=restoreEndPoint(dom,"end",bookmark);return $_87ppqy2ejducwnol.liftN([startPos,alt(endPos,startPos)],function(spos,epos){var rng=dom.createRng();return rng.setStart(addBogus(dom,spos.container()),spos.offset()),rng.setEnd(addBogus(dom,epos.container()),epos.offset()),rng})},resolveIndex$1=function(dom,bookmark){return Option.from(dom.select(bookmark.name)[bookmark.index]).map(function(elm){var rng=dom.createRng();return rng.selectNode(elm),rng})},resolve$3=function(selection,bookmark){var dom=selection.dom;if(bookmark){if($_8i2houjjducwnd2.isArray(bookmark.start))return resolvePaths(dom,bookmark);if("string"==typeof bookmark.start)return Option.some(resolveCaretPositionBookmark(dom,bookmark));if(bookmark.id)return resolveId(dom,bookmark);if(bookmark.name)return resolveIndex$1(dom,bookmark);if(bookmark.rng)return Option.some(bookmark.rng)}return Option.none()},$_azom222mjducwnph={resolve:resolve$3},getBookmark$1=function(selection,type,normalized){return $_epzga02kjducwnp2.getBookmark(selection,type,normalized)},moveToBookmark=function(selection,bookmark){$_azom222mjducwnph.resolve(selection,bookmark).each(function(rng){selection.setRng(rng)})},isBookmarkNode$1=function(node){return $_fj238m1qjducwnjm.isElement(node)&&"SPAN"===node.tagName&&"bookmark"===node.getAttribute("data-mce-type")},$_dcl0u12jjducwnp0={getBookmark:getBookmark$1,moveToBookmark:moveToBookmark,isBookmarkNode:isBookmarkNode$1},each$8=$_8i2houjjducwnd2.each,ElementUtils=function(dom){this.compare=function(node1,node2){if(node1.nodeName!==node2.nodeName)return!1;var getAttribs=function(node){var attribs={};return each$8(dom.getAttribs(node),function(attr){var name=attr.nodeName.toLowerCase();0!==name.indexOf("_")&&"style"!==name&&0!==name.indexOf("data-")&&(attribs[name]=dom.getAttrib(node,name))}),attribs},compareObjects=function(obj1,obj2){var value,name;for(name in obj1)if(obj1.hasOwnProperty(name)){if(void 0===(value=obj2[name]))return!1;if(obj1[name]!==value)return!1;delete obj2[name]}for(name in obj2)if(obj2.hasOwnProperty(name))return!1;return!0};return!!compareObjects(getAttribs(node1),getAttribs(node2))&&(!!compareObjects(dom.parseStyle(dom.getAttrib(node1,"style")),dom.parseStyle(dom.getAttrib(node2,"style")))&&(!$_dcl0u12jjducwnp0.isBookmarkNode(node1)&&!$_dcl0u12jjducwnp0.isBookmarkNode(node2)))}},before$1=function(marker,element){$_f0qt4317jducwnhq.parent(marker).each(function(v){v.dom().insertBefore(element.dom(),marker.dom())})},after$1=function(marker,element){$_f0qt4317jducwnhq.nextSibling(marker).fold(function(){$_f0qt4317jducwnhq.parent(marker).each(function(v){append(v,element)})},function(v){before$1(v,element)})},prepend=function(parent,element){$_f0qt4317jducwnhq.firstChild(parent).fold(function(){append(parent,element)},function(v){parent.dom().insertBefore(element.dom(),v.dom())})},append=function(parent,element){parent.dom().appendChild(element.dom())},appendAt=function(parent,element,index){$_f0qt4317jducwnhq.child(parent,index).fold(function(){append(parent,element)},function(v){before$1(v,element)})},wrap$1=function(element,wrapper){before$1(element,wrapper),append(wrapper,element)},$_ejmufn2ojducwnpy={before:before$1,after:after$1,prepend:prepend,append:append,appendAt:appendAt,wrap:wrap$1},before$2=function(marker,elements){$_2dw1bj4jducwn6g.each(elements,function(x){$_ejmufn2ojducwnpy.before(marker,x)})},after$2=function(marker,elements){$_2dw1bj4jducwn6g.each(elements,function(x,i){var e=0===i?marker:elements[i-1];$_ejmufn2ojducwnpy.after(e,x)})},prepend$1=function(parent,elements){$_2dw1bj4jducwn6g.each(elements.slice().reverse(),function(x){$_ejmufn2ojducwnpy.prepend(parent,x)})},append$1=function(parent,elements){$_2dw1bj4jducwn6g.each(elements,function(x){$_ejmufn2ojducwnpy.append(parent,x)})},$_ehpp912qjducwnq3={before:before$2,after:after$2,prepend:prepend$1,append:append$1},empty=function(element){element.dom().textContent="",$_2dw1bj4jducwn6g.each($_f0qt4317jducwnhq.children(element),function(rogue){remove$3(rogue)})},remove$3=function(element){var dom=element.dom();null!==dom.parentNode&&dom.parentNode.removeChild(dom)},unwrap=function(wrapper){var children=$_f0qt4317jducwnhq.children(wrapper);children.length>0&&$_ehpp912qjducwnq3.before(wrapper,children),remove$3(wrapper)},$_34vweg2pjducwnq0={empty:empty,remove:remove$3,unwrap:unwrap},api=function(is,name){var get=function(element){if(!is(element))throw new Error("Can only get "+name+" value of a "+name+" node");return getOption(element).getOr("")},getOptionIE10=function(element){try{return getOptionSafe(element)}catch(e){return Option.none()}},getOptionSafe=function(element){return is(element)?Option.from(element.dom().nodeValue):Option.none()},browser=$_5hshlmmjducwnfr.detect().browser,getOption=browser.isIE()&&10===browser.version.major?getOptionIE10:getOptionSafe,set=function(element,value){if(!is(element))throw new Error("Can only set raw "+name+" value of a "+name+" node");element.dom().nodeValue=value};return{get:get,getOption:getOption,set:set}}($_47qy15zjducwngt.isText,"text"),get$2=function(element){return api.get(element)},getOption=function(element){return api.getOption(element)},set$2=function(element,value){api.set(element,value)},$_8l99zr2rjducwnq7={get:get$2,getOption:getOption,set:set$2},getLastChildren=function(elm){for(var children=[],rawNode=elm.dom();rawNode;)children.push($_5s4uzoyjducwngo.fromDom(rawNode)),rawNode=rawNode.lastChild;return children},removeTrailingBr=function(elm){var allBrs=$_47k8tx2gjducwnot.descendants(elm,"br"),brs=$_2dw1bj4jducwn6g.filter(getLastChildren(elm).slice(-1),isBr);allBrs.length===brs.length&&$_2dw1bj4jducwn6g.each(brs,$_34vweg2pjducwnq0.remove)},fillWithPaddingBr=function(elm){$_34vweg2pjducwnq0.empty(elm),$_ejmufn2ojducwnpy.append(elm,$_5s4uzoyjducwngo.fromHtml('<br data-mce-bogus="1">'))},isPaddingContents=function(elm){return $_47qy15zjducwngt.isText(elm)?" "===$_8l99zr2rjducwnq7.get(elm):isBr(elm)},isPaddedElement=function(elm){return 1===$_2dw1bj4jducwn6g.filter($_f0qt4317jducwnhq.children(elm),isPaddingContents).length},trimBlockTrailingBr=function(elm){$_f0qt4317jducwnhq.lastChild(elm).each(function(lastChild){$_f0qt4317jducwnhq.prevSibling(lastChild).each(function(lastChildPrevSibling){isBlock(elm)&&isBr(lastChild)&&isBlock(lastChildPrevSibling)&&$_34vweg2pjducwnq0.remove(lastChild)})})},$_7sfvvk2njducwnpo={removeTrailingBr:removeTrailingBr,fillWithPaddingBr:fillWithPaddingBr,isPaddedElement:isPaddedElement,trimBlockTrailingBr:trimBlockTrailingBr},makeMap$3=$_8i2houjjducwnd2.makeMap,createRange$1=function(sc,so,ec,eo){var rng=document.createRange();return rng.setStart(sc,so),rng.setEnd(ec,eo),rng},normalizeBlockSelectionRange=function(rng){var startPos=CaretPosition$1.fromRangeStart(rng),endPos=CaretPosition$1.fromRangeEnd(rng),rootNode=rng.commonAncestorContainer;return $_dq07eg2bjducwno6.fromPosition(!1,rootNode,endPos).map(function(newEndPos){return!isInSameBlock(startPos,endPos,rootNode)&&isInSameBlock(startPos,newEndPos,rootNode)?createRange$1(startPos.container(),startPos.offset(),newEndPos.container(),newEndPos.offset()):rng}).getOr(rng)},normalizeBlockSelection=function(rng){return rng.collapsed?rng:normalizeBlockSelectionRange(rng)},normalize=function(rng){return normalizeBlockSelection(rng)},$_5b11cd2vjducwnqi={normalize:normalize},isTableCell$2=$_fj238m1qjducwnjm.matchNodeNames("td th"),validInsertion=function(editor,value,parentNode){if("all"===parentNode.getAttribute("data-mce-bogus"))parentNode.parentNode.insertBefore(editor.dom.createFragment(value),parentNode);else{var node=parentNode.firstChild,node2=parentNode.lastChild;!node||node===node2&&"BR"===node.nodeName?editor.dom.setHTML(parentNode,value):editor.selection.setContent(value)}},trimBrsFromTableCell=function(dom,elm){Option.from(dom.getParent(elm,"td,th")).map($_5s4uzoyjducwngo.fromDom).each($_7sfvvk2njducwnpo.trimBlockTrailingBr)},insertHtmlAtCaret=function(editor,value,details){var parser,serializer,parentNode,rootNode,fragment,args,marker,rng,node,node2,bookmarkHtml,merge,textInlineElements=editor.schema.getTextInlineElements(),selection=editor.selection,dom=editor.dom,isPartOfFragment=function(node){return!!node.getAttribute("data-mce-fragment")};if(/^ | $/.test(value)&&(value=function(html){var rng,container,offset;rng=selection.getRng(),container=rng.startContainer,offset=rng.startOffset;var hasSiblingText=function(siblingName){return container[siblingName]&&3===container[siblingName].nodeType};return 3===container.nodeType&&(offset>0?html=html.replace(/^&nbsp;/," "):hasSiblingText("previousSibling")||(html=html.replace(/^ /,"&nbsp;")),offset<container.length?html=html.replace(/&nbsp;(<br>|)$/," "):hasSiblingText("nextSibling")||(html=html.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),html}(value)),parser=editor.parser,merge=details.merge,serializer=HtmlSerializer({validate:editor.settings.validate},editor.schema),bookmarkHtml='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',args={content:value,format:"html",selection:!0,paste:details.paste},args=editor.fire("BeforeSetContent",args),args.isDefaultPrevented())return void editor.fire("SetContent",{content:args.content,format:"html",selection:!0,paste:details.paste});value=args.content,value.indexOf("{$caret}")===-1&&(value+="{$caret}"),value=value.replace(/\{\$caret\}/,bookmarkHtml),rng=selection.getRng();var caretElement=rng.startContainer||(rng.parentElement?rng.parentElement():null),body=editor.getBody();caretElement===body&&selection.isCollapsed()&&dom.isBlock(body.firstChild)&&function(node){return node&&!editor.schema.getShortEndedElements()[node.nodeName]}(body.firstChild)&&dom.isEmpty(body.firstChild)&&(rng=dom.createRng(),rng.setStart(body.firstChild,0),rng.setEnd(body.firstChild,0),selection.setRng(rng)),selection.isCollapsed()||(editor.selection.setRng($_5b11cd2vjducwnqi.normalize(editor.selection.getRng())),editor.getDoc().execCommand("Delete",!1,null),function(){var rng,container,offset;rng=selection.getRng(),container=rng.startContainer,offset=rng.startOffset,3===container.nodeType&&rng.collapsed&&(" "===container.data[offset]?(container.deleteData(offset,1),/[\u00a0| ]$/.test(value)||(value+=" ")):" "===container.data[offset-1]&&(container.deleteData(offset-1,1),/[\u00a0| ]$/.test(value)||(value=" "+value)))}()),parentNode=selection.getNode();var parserArgs={context:parentNode.nodeName.toLowerCase(),data:details.data,insert:!0};if(fragment=parser.parse(value,parserArgs),details.paste===!0&&$_g0kxnx1xjducwnm8.isListFragment(editor.schema,fragment)&&$_g0kxnx1xjducwnm8.isParentBlockLi(dom,parentNode))return rng=$_g0kxnx1xjducwnm8.insertAtCaret(serializer,dom,editor.selection.getRng(!0),fragment),editor.selection.setRng(rng),void editor.fire("SetContent",args);if(function(fragment){for(var node=fragment;node=node.walk();)1===node.type&&node.attr("data-mce-fragment","1")}(fragment),node=fragment.lastChild,"mce_marker"===node.attr("id"))for(marker=node,node=node.prev;node;node=node.walk(!0))if(3===node.type||!dom.isBlock(node.name)){editor.schema.isValidChild(node.parent.name,"span")&&node.parent.insert(marker,node,"br"===node.name);break}if(editor._selectionOverrides.showBlockCaretContainer(parentNode),parserArgs.invalid){for(selection.setContent(bookmarkHtml),parentNode=selection.getNode(),rootNode=editor.getBody(),9===parentNode.nodeType?parentNode=node=rootNode:node=parentNode;node!==rootNode;)parentNode=node,node=node.parentNode;value=parentNode===rootNode?rootNode.innerHTML:dom.getOuterHTML(parentNode),value=serializer.serialize(parser.parse(value.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return serializer.serialize(fragment)}))),parentNode===rootNode?dom.setHTML(rootNode,value):dom.setOuterHTML(parentNode,value)}else value=serializer.serialize(fragment),validInsertion(editor,value,parentNode);!function(){if(merge){var root_1=editor.getBody(),elementUtils_1=new ElementUtils(dom);$_8i2houjjducwnd2.each(dom.select("*[data-mce-fragment]"),function(node){for(var testNode=node.parentNode;testNode&&testNode!==root_1;testNode=testNode.parentNode)textInlineElements[node.nodeName.toLowerCase()]&&elementUtils_1.compare(testNode,node)&&dom.remove(node,!0)})}}(),function(marker){var parentEditableFalseElm,parentBlock,nextRng;if(marker){if(selection.scrollIntoView(marker),parentEditableFalseElm=function(node){for(var root=editor.getBody();node&&node!==root;node=node.parentNode)if("false"===editor.dom.getContentEditable(node))return node;return null}(marker))return dom.remove(marker),void selection.select(parentEditableFalseElm);rng=dom.createRng(),node=marker.previousSibling,node&&3===node.nodeType?(rng.setStart(node,node.nodeValue.length),$_cum1kc9jducwn99.ie||(node2=marker.nextSibling)&&3===node2.nodeType&&(node.appendData(node2.data),node2.parentNode.removeChild(node2))):(rng.setStartBefore(marker),rng.setEndBefore(marker));parentBlock=dom.getParent(marker,dom.isBlock),dom.remove(marker),parentBlock&&dom.isEmpty(parentBlock)&&(editor.$(parentBlock).empty(),rng.setStart(parentBlock,0),rng.setEnd(parentBlock,0),isTableCell$2(parentBlock)||isPartOfFragment(parentBlock)||!(nextRng=function(rng){var caretPos=CaretPosition$1.fromRangeStart(rng);if(caretPos=CaretWalker(editor.getBody()).next(caretPos))return caretPos.toRange()}(rng))?dom.add(parentBlock,dom.create("br",{"data-mce-bogus":"1"})):(rng=nextRng,dom.remove(parentBlock))),selection.setRng(rng)}}(dom.get("mce_marker")),function(elm){$_8i2houjjducwnd2.each(elm.getElementsByTagName("*"),function(elm){elm.removeAttribute("data-mce-fragment")})}(editor.getBody()),trimBrsFromTableCell(editor.dom,editor.selection.getStart()),editor.fire("SetContent",args),editor.addVisual()},processValue=function(value){var details;return"string"!=typeof value?(details=$_8i2houjjducwnd2.extend({paste:value.paste,data:{paste:value.paste}},value),{content:value.content,details:details}):{content:value,details:{}}},insertAtCaret$1=function(editor,value){var result=processValue(value);insertHtmlAtCaret(editor,result.content,result.details)},$_42g77d1wjducwnlx={insertAtCaret:insertAtCaret$1},first$1=function(predicate){return descendant($_4u3ohv15jducwnhl.body(),predicate)},ancestor=function(scope,predicate,isRoot){for(var element=scope.dom(),stop=$_c7y6af12jducwnh8.isFunction(isRoot)?isRoot:$_60qu7r6jducwn73.constant(!1);element.parentNode;){element=element.parentNode;var el=$_5s4uzoyjducwngo.fromDom(element);if(predicate(el))return Option.some(el);if(stop(el))break}return Option.none()},closest=function(scope,predicate,isRoot){return ClosestOrAncestor(function(scope){return predicate(scope)},ancestor,scope,predicate,isRoot)},sibling$1=function(scope,predicate){var element=scope.dom();return element.parentNode?child$1($_5s4uzoyjducwngo.fromDom(element.parentNode),function(x){return!$_4qdq5m1djducwnie.eq(scope,x)&&predicate(x)}):Option.none()},child$1=function(scope,predicate){return $_2dw1bj4jducwn6g.find(scope.dom().childNodes,$_60qu7r6jducwn73.compose(predicate,$_5s4uzoyjducwngo.fromDom)).map($_5s4uzoyjducwngo.fromDom)},descendant=function(scope,predicate){var descend=function(element){for(var i=0;i<element.childNodes.length;i++){if(predicate($_5s4uzoyjducwngo.fromDom(element.childNodes[i])))return Option.some($_5s4uzoyjducwngo.fromDom(element.childNodes[i]));var res=descend(element.childNodes[i]);if(res.isSome())return res}return Option.none()};return descend(scope.dom())},$_3et3di30jducwnr0={first:first$1,ancestor:ancestor,closest:closest,sibling:sibling$1,child:child$1,descendant:descendant},sectionResult=$_295afp18jducwni4.immutable("sections","settings"),detection=$_5hshlmmjducwnfr.detect(),isTouch=detection.deviceType.isTouch(),mobilePlugins=["lists","autolink","autosave"],defaultMobileSettings={theme:"mobile"},normalizePlugins=function(plugins){var pluginNames=$_c7y6af12jducwnh8.isArray(plugins)?plugins.join(" "):plugins,trimmedPlugins=$_2dw1bj4jducwn6g.map($_c7y6af12jducwnh8.isString(pluginNames)?pluginNames.split(" "):[],$_vrlmtvjducwngg.trim);return $_2dw1bj4jducwn6g.filter(trimmedPlugins,function(item){return item.length>0})},filterMobilePlugins=function(plugins){return $_2dw1bj4jducwn6g.filter(plugins,$_60qu7r6jducwn73.curry($_2dw1bj4jducwn6g.contains,mobilePlugins))},extractSections=function(keys,settings){var result=$_84vepq13jducwnh9.bifilter(settings,function(value,key){return $_2dw1bj4jducwn6g.contains(keys,key)});return sectionResult(result.t,result.f)},getSection=function(sectionResult,name,defaults){var sections=sectionResult.sections(),sectionSettings=sections.hasOwnProperty(name)?sections[name]:{};return $_8i2houjjducwnd2.extend({},defaults,sectionSettings)},hasSection=function(sectionResult,name){return sectionResult.sections().hasOwnProperty(name)},getDefaultSettings=function(id,documentBaseUrl,editor){return{id:id,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:documentBaseUrl,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:editor.convertURL,url_converter_scope:editor,ie7_compat:!0}},getExternalPlugins=function(overrideSettings,settings){var userDefinedExternalPlugins=settings.external_plugins?settings.external_plugins:{};return overrideSettings&&overrideSettings.external_plugins?$_8i2houjjducwnd2.extend({},overrideSettings.external_plugins,userDefinedExternalPlugins):userDefinedExternalPlugins},combinePlugins=function(forcedPlugins,plugins){return[].concat(normalizePlugins(forcedPlugins)).concat(normalizePlugins(plugins))},processPlugins=function(isTouchDevice,sectionResult,defaultOverrideSettings,settings){var forcedPlugins=normalizePlugins(defaultOverrideSettings.forced_plugins),plugins=normalizePlugins(settings.plugins),platformPlugins=isTouchDevice&&hasSection(sectionResult,"mobile")?filterMobilePlugins(plugins):plugins,combinedPlugins=combinePlugins(forcedPlugins,platformPlugins);return $_8i2houjjducwnd2.extend(settings,{plugins:combinedPlugins.join(" ")})},isOnMobile=function(isTouchDevice,sectionResult){var isInline=sectionResult.settings().inline;return isTouchDevice&&hasSection(sectionResult,"mobile")&&!isInline},combineSettings=function(isTouchDevice,defaultSettings,defaultOverrideSettings,settings){var sectionResult=extractSections(["mobile"],settings),extendedSettings=$_8i2houjjducwnd2.extend(defaultSettings,defaultOverrideSettings,sectionResult.settings(),isOnMobile(isTouchDevice,sectionResult)?getSection(sectionResult,"mobile",defaultMobileSettings):{},{validate:!0,content_editable:sectionResult.settings().inline,external_plugins:getExternalPlugins(defaultOverrideSettings,sectionResult.settings())});return processPlugins(isTouchDevice,sectionResult,defaultOverrideSettings,extendedSettings)},getEditorSettings=function(editor,id,documentBaseUrl,defaultOverrideSettings,settings){var defaultSettings=getDefaultSettings(id,documentBaseUrl,editor);return combineSettings(isTouch,defaultSettings,defaultOverrideSettings,settings)},getFiltered=function(predicate,editor,name){return Option.from(editor.settings[name]).filter(predicate)},getString=$_60qu7r6jducwn73.curry(getFiltered,$_c7y6af12jducwnh8.isString),getParamObject=function(value){var output={};return"string"==typeof value?$_2dw1bj4jducwn6g.each(value.indexOf("=")>0?value.split(/[;,](?![^=;,]*(?:[;,]|$))/):value.split(","),function(value){value=value.split("="),value.length>1?output[$_8i2houjjducwnd2.trim(value[0])]=$_8i2houjjducwnd2.trim(value[1]):output[$_8i2houjjducwnd2.trim(value[0])]=$_8i2houjjducwnd2.trim(value)}):output=value,output},getParam=function(editor,name,defaultVal,type){var value=name in editor.settings?editor.settings[name]:defaultVal
;return"hash"===type?getParamObject(value):"string"===type?getFiltered($_c7y6af12jducwnh8.isString,editor,name).getOr(defaultVal):"number"===type?getFiltered($_c7y6af12jducwnh8.isNumber,editor,name).getOr(defaultVal):"boolean"===type?getFiltered($_c7y6af12jducwnh8.isBoolean,editor,name).getOr(defaultVal):"object"===type?getFiltered($_c7y6af12jducwnh8.isObject,editor,name).getOr(defaultVal):"array"===type?getFiltered($_c7y6af12jducwnh8.isArray,editor,name).getOr(defaultVal):"function"===type?getFiltered($_c7y6af12jducwnh8.isFunction,editor,name).getOr(defaultVal):value},strongRtl=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,hasStrongRtl=function(text){return strongRtl.test(text)},isInlineTarget=function(editor,elm){var selector=getString(editor,"inline_boundaries_selector").getOr("a[href],code");return $_3yrc4b1fjducwnim.is($_5s4uzoyjducwngo.fromDom(elm),selector)},isRtl=function(element){return"rtl"===DOMUtils.DOM.getStyle(element,"direction",!0)||hasStrongRtl(element.textContent)},findInlineParents=function(isInlineTarget,rootNode,pos){return $_2dw1bj4jducwn6g.filter(DOMUtils.DOM.getParents(pos.container(),"*",rootNode),isInlineTarget)},findRootInline=function(isInlineTarget,rootNode,pos){var parents=findInlineParents(isInlineTarget,rootNode,pos);return Option.from(parents[parents.length-1])},hasSameParentBlock=function(rootNode,node1,node2){var block1=getParentBlock(node1,rootNode),block2=getParentBlock(node2,rootNode);return block1&&block1===block2},isAtZwsp=function(pos){return isBeforeInline(pos)||isAfterInline(pos)},normalizePosition=function(forward,pos){var container=pos.container(),offset=pos.offset();return forward?isCaretContainerInline(container)?$_fj238m1qjducwnjm.isText(container.nextSibling)?CaretPosition$1(container.nextSibling,0):CaretPosition$1.after(container):isBeforeInline(pos)?CaretPosition$1(container,offset+1):pos:isCaretContainerInline(container)?$_fj238m1qjducwnjm.isText(container.previousSibling)?CaretPosition$1(container.previousSibling,container.previousSibling.data.length):CaretPosition$1.before(container):isAfterInline(pos)?CaretPosition$1(container,offset-1):pos},normalizeForwards=$_60qu7r6jducwn73.curry(normalizePosition,!0),normalizeBackwards=$_60qu7r6jducwn73.curry(normalizePosition,!1),$_4m240x32jducwnrf={isInlineTarget:isInlineTarget,findRootInline:findRootInline,isRtl:isRtl,isAtZwsp:isAtZwsp,normalizePosition:normalizePosition,normalizeForwards:normalizeForwards,normalizeBackwards:normalizeBackwards,hasSameParentBlock:hasSameParentBlock},isBeforeRoot=function(rootNode){return function(elm){return $_4qdq5m1djducwnie.eq(rootNode,$_5s4uzoyjducwngo.fromDom(elm.dom().parentNode))}},getParentBlock$1=function(rootNode,elm){return $_4qdq5m1djducwnie.contains(rootNode,elm)?$_3et3di30jducwnr0.closest(elm,function(element){return isTextBlock(element)||isListItem(element)},isBeforeRoot(rootNode)):Option.none()},placeCaretInEmptyBody=function(editor){var body=editor.getBody(),node=body.firstChild&&editor.dom.isBlock(body.firstChild)?body.firstChild:body;editor.selection.setCursorLocation(node,0)},paddEmptyBody=function(editor){editor.dom.isEmpty(editor.getBody())&&(editor.setContent(""),placeCaretInEmptyBody(editor))},willDeleteLastPositionInElement=function(forward,fromPos,elm){return $_87ppqy2ejducwnol.liftN([$_dq07eg2bjducwno6.firstPositionIn(elm),$_dq07eg2bjducwno6.lastPositionIn(elm)],function(firstPos,lastPos){var normalizedFirstPos=$_4m240x32jducwnrf.normalizePosition(!0,firstPos),normalizedLastPos=$_4m240x32jducwnrf.normalizePosition(!1,lastPos),normalizedFromPos=$_4m240x32jducwnrf.normalizePosition(!1,fromPos);return forward?$_dq07eg2bjducwno6.nextPosition(elm,normalizedFromPos).map(function(nextPos){return nextPos.isEqual(normalizedLastPos)&&fromPos.isEqual(normalizedFirstPos)}).getOr(!1):$_dq07eg2bjducwno6.prevPosition(elm,normalizedFromPos).map(function(prevPos){return prevPos.isEqual(normalizedFirstPos)&&fromPos.isEqual(normalizedLastPos)}).getOr(!1)}).getOr(!0)},$_5jcxyf2zjducwnqv={getParentBlock:getParentBlock$1,paddEmptyBody:paddEmptyBody,willDeleteLastPositionInElement:willDeleteLastPositionInElement},first$2=function(selector){return $_3yrc4b1fjducwnim.one(selector)},ancestor$1=function(scope,selector,isRoot){return $_3et3di30jducwnr0.ancestor(scope,function(e){return $_3yrc4b1fjducwnim.is(e,selector)},isRoot)},sibling$2=function(scope,selector){return $_3et3di30jducwnr0.sibling(scope,function(e){return $_3yrc4b1fjducwnim.is(e,selector)})},child$2=function(scope,selector){return $_3et3di30jducwnr0.child(scope,function(e){return $_3yrc4b1fjducwnim.is(e,selector)})},descendant$1=function(scope,selector){return $_3yrc4b1fjducwnim.one(selector,scope)},closest$1=function(scope,selector,isRoot){return ClosestOrAncestor($_3yrc4b1fjducwnim.is,ancestor$1,scope,selector,isRoot)},$_eh73s937jducwns3={first:first$2,ancestor:ancestor$1,sibling:sibling$2,child:child$2,descendant:descendant$1,closest:closest$1},any=function(selector){return $_eh73s937jducwns3.first(selector).isSome()},ancestor$2=function(scope,selector,isRoot){return $_eh73s937jducwns3.ancestor(scope,selector,isRoot).isSome()},sibling$3=function(scope,selector){return $_eh73s937jducwns3.sibling(scope,selector).isSome()},child$3=function(scope,selector){return $_eh73s937jducwns3.child(scope,selector).isSome()},descendant$2=function(scope,selector){return $_eh73s937jducwns3.descendant(scope,selector).isSome()},closest$2=function(scope,selector,isRoot){return $_eh73s937jducwns3.closest(scope,selector,isRoot).isSome()},$_7siog436jducwns2={any:any,ancestor:ancestor$2,sibling:sibling$3,child:child$3,descendant:descendant$2,closest:closest$2},hasWhitespacePreserveParent=function(rootNode,node){var rootElement=$_5s4uzoyjducwngo.fromDom(rootNode),startNode=$_5s4uzoyjducwngo.fromDom(node);return $_7siog436jducwns2.ancestor(startNode,"pre,code",$_60qu7r6jducwn73.curry($_4qdq5m1djducwnie.eq,rootElement))},isWhitespace=function(rootNode,node){return $_fj238m1qjducwnjm.isText(node)&&/^[ \t\r\n]*$/.test(node.data)&&hasWhitespacePreserveParent(rootNode,node)===!1},isNamedAnchor=function(node){return $_fj238m1qjducwnjm.isElement(node)&&"A"===node.nodeName&&node.hasAttribute("name")},isContent=function(rootNode,node){return isCaretCandidate(node)&&isWhitespace(rootNode,node)===!1||isNamedAnchor(node)||isBookmark(node)},isBookmark=$_fj238m1qjducwnjm.hasAttribute("data-mce-bookmark"),isBogus$2=$_fj238m1qjducwnjm.hasAttribute("data-mce-bogus"),isBogusAll$1=$_fj238m1qjducwnjm.hasAttributeValue("data-mce-bogus","all"),isEmptyNode=function(targetNode){var walker,node,brCount=0;if(isContent(targetNode,targetNode))return!1;if(!(node=targetNode.firstChild))return!0;walker=new TreeWalker(node,targetNode);do{if(isBogusAll$1(node))node=walker.next(!0);else if(isBogus$2(node))node=walker.next();else if($_fj238m1qjducwnjm.isBr(node))brCount++,node=walker.next();else{if(isContent(targetNode,node))return!1;node=walker.next()}}while(node);return brCount<=1},isEmpty=function(elm){return isEmptyNode(elm.dom())},$_baf2ia35jducwnrx={isEmpty:isEmpty},BlockPosition=$_295afp18jducwni4.immutable("block","position"),BlockBoundary=$_295afp18jducwni4.immutable("from","to"),getBlockPosition=function(rootNode,pos){var rootElm=$_5s4uzoyjducwngo.fromDom(rootNode),containerElm=$_5s4uzoyjducwngo.fromDom(pos.container());return $_5jcxyf2zjducwnqv.getParentBlock(rootElm,containerElm).map(function(block){return BlockPosition(block,pos)})},isDifferentBlocks=function(blockBoundary){return $_4qdq5m1djducwnie.eq(blockBoundary.from().block(),blockBoundary.to().block())===!1},hasSameParent=function(blockBoundary){return $_f0qt4317jducwnhq.parent(blockBoundary.from().block()).bind(function(parent1){return $_f0qt4317jducwnhq.parent(blockBoundary.to().block()).filter(function(parent2){return $_4qdq5m1djducwnie.eq(parent1,parent2)})}).isSome()},isEditable=function(blockBoundary){return $_fj238m1qjducwnjm.isContentEditableFalse(blockBoundary.from().block())===!1&&$_fj238m1qjducwnjm.isContentEditableFalse(blockBoundary.to().block())===!1},skipLastBr=function(rootNode,forward,blockPosition){return $_fj238m1qjducwnjm.isBr(blockPosition.position().getNode())&&$_baf2ia35jducwnrx.isEmpty(blockPosition.block())===!1?$_dq07eg2bjducwno6.positionIn(!1,blockPosition.block().dom()).bind(function(lastPositionInBlock){return lastPositionInBlock.isEqual(blockPosition.position())?$_dq07eg2bjducwno6.fromPosition(forward,rootNode,lastPositionInBlock).bind(function(to){return getBlockPosition(rootNode,to)}):Option.some(blockPosition)}).getOr(blockPosition):blockPosition},readFromRange=function(rootNode,forward,rng){var fromBlockPos=getBlockPosition(rootNode,CaretPosition$1.fromRangeStart(rng)),toBlockPos=fromBlockPos.bind(function(blockPos){return $_dq07eg2bjducwno6.fromPosition(forward,rootNode,blockPos.position()).bind(function(to){return getBlockPosition(rootNode,to).map(function(blockPos){return skipLastBr(rootNode,forward,blockPos)})})});return $_87ppqy2ejducwnol.liftN([fromBlockPos,toBlockPos],BlockBoundary).filter(function(blockBoundary){return isDifferentBlocks(blockBoundary)&&hasSameParent(blockBoundary)&&isEditable(blockBoundary)})},read=function(rootNode,forward,rng){return rng.collapsed?readFromRange(rootNode,forward,rng):Option.none()},$_eqrydb2yjducwnqo={read:read},dropLast=function(xs){return xs.slice(0,-1)},parentsUntil$1=function(startNode,rootElm,predicate){return $_4qdq5m1djducwnie.contains(rootElm,startNode)?dropLast($_f0qt4317jducwnhq.parents(startNode,function(elm){return predicate(elm)||$_4qdq5m1djducwnie.eq(elm,rootElm)})):[]},parents$1=function(startNode,rootElm){return parentsUntil$1(startNode,rootElm,$_60qu7r6jducwn73.constant(!1))},parentsAndSelf=function(startNode,rootElm){return[startNode].concat(parents$1(startNode,rootElm))},$_b22jto39jducwnsg={parentsUntil:parentsUntil$1,parents:parents$1,parentsAndSelf:parentsAndSelf},getChildrenUntilBlockBoundary=function(block){var children=$_f0qt4317jducwnhq.children(block);return $_2dw1bj4jducwn6g.findIndex(children,isBlock).fold(function(){return children},function(index){return children.slice(0,index)})},extractChildren=function(block){var children=getChildrenUntilBlockBoundary(block);return $_2dw1bj4jducwn6g.each(children,function(node){$_34vweg2pjducwnq0.remove(node)}),children},trimBr=function(first,block){$_dq07eg2bjducwno6.positionIn(first,block.dom()).each(function(position){var node=position.getNode();$_fj238m1qjducwnjm.isBr(node)&&$_34vweg2pjducwnq0.remove($_5s4uzoyjducwngo.fromDom(node))})},removeEmptyRoot=function(rootNode,block){var parents=$_b22jto39jducwnsg.parentsAndSelf(block,rootNode);return $_2dw1bj4jducwn6g.find(parents.reverse(),$_baf2ia35jducwnrx.isEmpty).each($_34vweg2pjducwnq0.remove)},findParentInsertPoint=function(toBlock,block){var parents=$_f0qt4317jducwnhq.parents(block,function(elm){return $_4qdq5m1djducwnie.eq(elm,toBlock)});return Option.from(parents[parents.length-2])},getInsertionPoint=function(fromBlock,toBlock){return $_4qdq5m1djducwnie.contains(toBlock,fromBlock)?$_f0qt4317jducwnhq.parent(fromBlock).bind(function(parent){return $_4qdq5m1djducwnie.eq(parent,toBlock)?Option.some(fromBlock):findParentInsertPoint(toBlock,fromBlock)}):Option.none()},mergeBlockInto=function(rootNode,fromBlock,toBlock){if($_baf2ia35jducwnrx.isEmpty(toBlock))return $_34vweg2pjducwnq0.remove(toBlock),$_baf2ia35jducwnrx.isEmpty(fromBlock)&&$_7sfvvk2njducwnpo.fillWithPaddingBr(fromBlock),$_dq07eg2bjducwno6.firstPositionIn(fromBlock.dom());trimBr(!0,fromBlock),trimBr(!1,toBlock);var children_1=extractChildren(fromBlock);return getInsertionPoint(fromBlock,toBlock).fold(function(){removeEmptyRoot(rootNode,fromBlock);var position=$_dq07eg2bjducwno6.lastPositionIn(toBlock.dom());return $_2dw1bj4jducwn6g.each(children_1,function(node){$_ejmufn2ojducwnpy.append(toBlock,node)}),position},function(target){var position=$_dq07eg2bjducwno6.prevPosition(toBlock.dom(),CaretPosition$1.before(target.dom()));return $_2dw1bj4jducwn6g.each(children_1,function(node){$_ejmufn2ojducwnpy.before(target,node)}),removeEmptyRoot(rootNode,fromBlock),position})},mergeBlocks=function(rootNode,forward,block1,block2){return forward?mergeBlockInto(rootNode,block2,block1):mergeBlockInto(rootNode,block1,block2)},$_eqe3hs38jducwns7={mergeBlocks:mergeBlocks},backspaceDelete=function(editor,forward){var position,rootNode=$_5s4uzoyjducwngo.fromDom(editor.getBody());return position=$_eqrydb2yjducwnqo.read(rootNode.dom(),forward,editor.selection.getRng()).bind(function(blockBoundary){return $_eqe3hs38jducwns7.mergeBlocks(rootNode,forward,blockBoundary.from().block(),blockBoundary.to().block())}),position.each(function(pos){editor.selection.setRng(pos.toRange())}),position.isSome()},$_d0w5iz2xjducwnqm={backspaceDelete:backspaceDelete},deleteRangeMergeBlocks=function(rootNode,selection){var rng=selection.getRng();return $_87ppqy2ejducwnol.liftN([$_5jcxyf2zjducwnqv.getParentBlock(rootNode,$_5s4uzoyjducwngo.fromDom(rng.startContainer)),$_5jcxyf2zjducwnqv.getParentBlock(rootNode,$_5s4uzoyjducwngo.fromDom(rng.endContainer))],function(block1,block2){return $_4qdq5m1djducwnie.eq(block1,block2)===!1&&(rng.deleteContents(),$_eqe3hs38jducwns7.mergeBlocks(rootNode,!0,block1,block2).each(function(pos){selection.setRng(pos.toRange())}),!0)}).getOr(!1)},isRawNodeInTable=function(root,rawNode){var node=$_5s4uzoyjducwngo.fromDom(rawNode),isRoot=$_60qu7r6jducwn73.curry($_4qdq5m1djducwnie.eq,root);return $_3et3di30jducwnr0.ancestor(node,isTableCell,isRoot).isSome()},isSelectionInTable=function(root,rng){return isRawNodeInTable(root,rng.startContainer)||isRawNodeInTable(root,rng.endContainer)},isEverythingSelected=function(root,rng){var noPrevious=$_dq07eg2bjducwno6.prevPosition(root.dom(),CaretPosition$1.fromRangeStart(rng)).isNone(),noNext=$_dq07eg2bjducwno6.nextPosition(root.dom(),CaretPosition$1.fromRangeEnd(rng)).isNone();return!isSelectionInTable(root,rng)&&noPrevious&&noNext},emptyEditor=function(editor){return editor.setContent(""),editor.selection.setCursorLocation(),!0},deleteRange=function(editor){var rootNode=$_5s4uzoyjducwngo.fromDom(editor.getBody()),rng=editor.selection.getRng();return isEverythingSelected(rootNode,rng)?emptyEditor(editor):deleteRangeMergeBlocks(rootNode,editor.selection)},backspaceDelete$1=function(editor,forward){return!editor.selection.isCollapsed()&&deleteRange(editor)},$_3kdgsv3ajducwnsk={backspaceDelete:backspaceDelete$1},generate=function(cases){if(!$_c7y6af12jducwnh8.isArray(cases))throw new Error("cases must be an array");if(0===cases.length)throw new Error("there must be at least one case");var constructors=[],adt={};return $_2dw1bj4jducwn6g.each(cases,function(acase,count){var keys=$_84vepq13jducwnh9.keys(acase);if(1!==keys.length)throw new Error("one and only one name per case");var key=keys[0],value=acase[key];if(void 0!==adt[key])throw new Error("duplicate key detected:"+key);if("cata"===key)throw new Error("cannot have a case named cata (sorry)");if(!$_c7y6af12jducwnh8.isArray(value))throw new Error("case arguments must be an array");constructors.push(key),adt[key]=function(){var argLength=arguments.length;if(argLength!==value.length)throw new Error("Wrong number of arguments to case "+key+". Expected "+value.length+" ("+value+"), got "+argLength);for(var args=new Array(argLength),i=0;i<args.length;i++)args[i]=arguments[i];var match=function(branches){var branchKeys=$_84vepq13jducwnh9.keys(branches);if(constructors.length!==branchKeys.length)throw new Error("Wrong number of arguments to match. Expected: "+constructors.join(",")+"\nActual: "+branchKeys.join(","));if(!$_2dw1bj4jducwn6g.forall(constructors,function(reqKey){return $_2dw1bj4jducwn6g.contains(branchKeys,reqKey)}))throw new Error("Not all branches were specified when using match. Specified: "+branchKeys.join(", ")+"\nRequired: "+constructors.join(", "));return branches[key].apply(null,args)};return{fold:function(){if(arguments.length!==cases.length)throw new Error("Wrong number of arguments to fold. Expected "+cases.length+", got "+arguments.length);return arguments[count].apply(null,args)},match:match,log:function(label){console.log(label,{constructors:constructors,constructor:key,params:args})}}}}),adt},$_elh5kq3djducwnt6={generate:generate},isCompoundElement=function(node){return isTableCell($_5s4uzoyjducwngo.fromDom(node))||isListItem($_5s4uzoyjducwngo.fromDom(node))},DeleteAction=$_elh5kq3djducwnt6.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),isAtContentEditableBlockCaret=function(forward,from){var elm=from.getNode(forward===!1),caretLocation=forward?"after":"before";return $_fj238m1qjducwnjm.isElement(elm)&&elm.getAttribute("data-mce-caret")===caretLocation},isDeleteFromCefDifferentBlocks=function(root,forward,from,to){var inSameBlock=function(elm){return isInline($_5s4uzoyjducwngo.fromDom(elm))&&!isInSameBlock(from,to,root)};return getRelativeCefElm(!forward,from).fold(function(){return getRelativeCefElm(forward,to).fold($_60qu7r6jducwn73.constant(!1),inSameBlock)},inSameBlock)},deleteEmptyBlockOrMoveToCef=function(root,forward,from,to){var toCefElm=to.getNode(forward===!1);return $_5jcxyf2zjducwnqv.getParentBlock($_5s4uzoyjducwngo.fromDom(root),$_5s4uzoyjducwngo.fromDom(from.getNode())).map(function(blockElm){return $_baf2ia35jducwnrx.isEmpty(blockElm)?DeleteAction.remove(blockElm.dom()):DeleteAction.moveToElement(toCefElm)}).orThunk(function(){return Option.some(DeleteAction.moveToElement(toCefElm))})},findCefPosition=function(root,forward,from){return $_dq07eg2bjducwno6.fromPosition(forward,root,from).bind(function(to){return isCompoundElement(to.getNode())?Option.none():isDeleteFromCefDifferentBlocks(root,forward,from,to)?Option.none():forward&&$_fj238m1qjducwnjm.isContentEditableFalse(to.getNode())?deleteEmptyBlockOrMoveToCef(root,forward,from,to):forward===!1&&$_fj238m1qjducwnjm.isContentEditableFalse(to.getNode(!0))?deleteEmptyBlockOrMoveToCef(root,forward,from,to):forward&&isAfterContentEditableFalse(from)?Option.some(DeleteAction.moveToPosition(to)):forward===!1&&isBeforeContentEditableFalse(from)?Option.some(DeleteAction.moveToPosition(to)):Option.none()})},getContentEditableBlockAction=function(forward,elm){return forward&&$_fj238m1qjducwnjm.isContentEditableFalse(elm.nextSibling)?Option.some(DeleteAction.moveToElement(elm.nextSibling)):forward===!1&&$_fj238m1qjducwnjm.isContentEditableFalse(elm.previousSibling)?Option.some(DeleteAction.moveToElement(elm.previousSibling)):Option.none()},skipMoveToActionFromInlineCefToContent=function(root,from,deleteAction){return deleteAction.fold(function(elm){return Option.some(DeleteAction.remove(elm))},function(elm){return Option.some(DeleteAction.moveToElement(elm))},function(to){return isInSameBlock(from,to,root)?Option.none():Option.some(DeleteAction.moveToPosition(to))})},getContentEditableAction=function(root,forward,from){return isAtContentEditableBlockCaret(forward,from)?getContentEditableBlockAction(forward,from.getNode(forward===!1)).fold(function(){return findCefPosition(root,forward,from)},Option.some):findCefPosition(root,forward,from).bind(function(deleteAction){return skipMoveToActionFromInlineCefToContent(root,from,deleteAction)})},read$1=function(root,forward,rng){var normalizedRange=normalizeRange(forward?1:-1,root,rng),from=CaretPosition$1.fromRangeStart(normalizedRange);return forward===!1&&isAfterContentEditableFalse(from)?Option.some(DeleteAction.remove(from.getNode(!0))):forward&&isBeforeContentEditableFalse(from)?Option.some(DeleteAction.remove(from.getNode())):getContentEditableAction(root,forward,from)},needsReposition=function(pos,elm){var container=pos.container(),offset=pos.offset();return CaretPosition$1.isTextPosition(pos)===!1&&container===elm.parentNode&&offset>CaretPosition$1.before(elm).offset()},reposition=function(elm,pos){return needsReposition(pos,elm)?CaretPosition$1(pos.container(),pos.offset()-1):pos},beforeOrStartOf=function(node){return $_fj238m1qjducwnjm.isText(node)?CaretPosition$1(node,0):CaretPosition$1.before(node)},afterOrEndOf=function(node){return $_fj238m1qjducwnjm.isText(node)?CaretPosition$1(node,node.data.length):CaretPosition$1.after(node)},getPreviousSiblingCaretPosition=function(elm){return isCaretCandidate(elm.previousSibling)?Option.some(afterOrEndOf(elm.previousSibling)):elm.previousSibling?$_dq07eg2bjducwno6.lastPositionIn(elm.previousSibling):Option.none()},getNextSiblingCaretPosition=function(elm){return isCaretCandidate(elm.nextSibling)?Option.some(beforeOrStartOf(elm.nextSibling)):elm.nextSibling?$_dq07eg2bjducwno6.firstPositionIn(elm.nextSibling):Option.none()},findCaretPositionBackwardsFromElm=function(rootElement,elm){var startPosition=CaretPosition$1.before(elm.previousSibling?elm.previousSibling:elm.parentNode);return $_dq07eg2bjducwno6.prevPosition(rootElement,startPosition).fold(function(){return $_dq07eg2bjducwno6.nextPosition(rootElement,CaretPosition$1.after(elm))},Option.some)},findCaretPositionForwardsFromElm=function(rootElement,elm){return $_dq07eg2bjducwno6.nextPosition(rootElement,CaretPosition$1.after(elm)).fold(function(){return $_dq07eg2bjducwno6.prevPosition(rootElement,CaretPosition$1.before(elm))},Option.some)},findCaretPositionBackwards=function(rootElement,elm){return getPreviousSiblingCaretPosition(elm).orThunk(function(){return getNextSiblingCaretPosition(elm)}).orThunk(function(){return findCaretPositionBackwardsFromElm(rootElement,elm)})},findCaretPositionForward=function(rootElement,elm){return getNextSiblingCaretPosition(elm).orThunk(function(){return getPreviousSiblingCaretPosition(elm)}).orThunk(function(){return findCaretPositionForwardsFromElm(rootElement,elm)})},findCaretPosition$1=function(forward,rootElement,elm){return forward?findCaretPositionForward(rootElement,elm):findCaretPositionBackwards(rootElement,elm)},findCaretPosOutsideElmAfterDelete=function(forward,rootElement,elm){return findCaretPosition$1(forward,rootElement,elm).map($_60qu7r6jducwn73.curry(reposition,elm))},setSelection=function(editor,forward,pos){pos.fold(function(){editor.focus()},function(pos){editor.selection.setRng(pos.toRange(),forward)})},eqRawNode=function(rawNode){return function(elm){return elm.dom()===rawNode}},isBlock$2=function(editor,elm){return elm&&editor.schema.getBlockElements().hasOwnProperty($_47qy15zjducwngt.name(elm))},paddEmptyBlock=function(elm){if($_baf2ia35jducwnrx.isEmpty(elm)){var br=$_5s4uzoyjducwngo.fromHtml('<br data-mce-bogus="1">');return $_34vweg2pjducwnq0.empty(elm),$_ejmufn2ojducwnpy.append(elm,br),Option.some(CaretPosition$1.before(br.dom()))}return Option.none()},deleteNormalized=function(elm,afterDeletePosOpt){return $_87ppqy2ejducwnol.liftN([$_f0qt4317jducwnhq.prevSibling(elm),$_f0qt4317jducwnhq.nextSibling(elm),afterDeletePosOpt],function(prev,next,afterDeletePos){var offset,prevNode=prev.dom(),nextNode=next.dom();return $_fj238m1qjducwnjm.isText(prevNode)&&$_fj238m1qjducwnjm.isText(nextNode)?(offset=prevNode.data.length,prevNode.appendData(nextNode.data),$_34vweg2pjducwnq0.remove(next),$_34vweg2pjducwnq0.remove(elm),afterDeletePos.container()===nextNode?CaretPosition$1(prevNode,offset):afterDeletePos):($_34vweg2pjducwnq0.remove(elm),afterDeletePos)}).orThunk(function(){return $_34vweg2pjducwnq0.remove(elm),afterDeletePosOpt})},deleteElement=function(editor,forward,elm){var afterDeletePos=findCaretPosOutsideElmAfterDelete(forward,editor.getBody(),elm.dom()),parentBlock=$_3et3di30jducwnr0.ancestor(elm,$_60qu7r6jducwn73.curry(isBlock$2,editor),eqRawNode(editor.getBody())),normalizedAfterDeletePos=deleteNormalized(elm,afterDeletePos);editor.dom.isEmpty(editor.getBody())?(editor.setContent(""),editor.selection.setCursorLocation()):parentBlock.bind(paddEmptyBlock).fold(function(){setSelection(editor,forward,normalizedAfterDeletePos)},function(paddPos){setSelection(editor,forward,Option.some(paddPos))})},$_92j5pe3ejducwnta={deleteElement:deleteElement},deleteElement$1=function(editor,forward){return function(element){return editor._selectionOverrides.hideFakeCaret(),$_92j5pe3ejducwnta.deleteElement(editor,forward,$_5s4uzoyjducwngo.fromDom(element)),!0}},moveToElement=function(editor,forward){return function(element){var pos=forward?CaretPosition$1.before(element):CaretPosition$1.after(element);return editor.selection.setRng(pos.toRange()),!0}},moveToPosition=function(editor){return function(pos){return editor.selection.setRng(pos.toRange()),!0}},backspaceDeleteCaret=function(editor,forward){return read$1(editor.getBody(),forward,editor.selection.getRng()).map(function(deleteAction){return deleteAction.fold(deleteElement$1(editor,forward),moveToElement(editor,forward),moveToPosition(editor))}).getOr(!1)},deleteOffscreenSelection=function(rootElement){$_2dw1bj4jducwn6g.each($_47k8tx2gjducwnot.descendants(rootElement,".mce-offscreen-selection"),$_34vweg2pjducwnq0.remove)},backspaceDeleteRange=function(editor,forward){var selectedElement=editor.selection.getNode();return!!$_fj238m1qjducwnjm.isContentEditableFalse(selectedElement)&&(deleteOffscreenSelection($_5s4uzoyjducwngo.fromDom(editor.getBody())),$_92j5pe3ejducwnta.deleteElement(editor,forward,$_5s4uzoyjducwngo.fromDom(editor.selection.getNode())),$_5jcxyf2zjducwnqv.paddEmptyBody(editor),!0)},getContentEditableRoot=function(root,node){for(;node&&node!==root;){if($_fj238m1qjducwnjm.isContentEditableTrue(node)||$_fj238m1qjducwnjm.isContentEditableFalse(node))return node;node=node.parentNode}return null},paddEmptyElement=function(editor){var br,ceRoot=getContentEditableRoot(editor.getBody(),editor.selection.getNode());return $_fj238m1qjducwnjm.isContentEditableTrue(ceRoot)&&editor.dom.isBlock(ceRoot)&&editor.dom.isEmpty(ceRoot)&&(br=editor.dom.create("br",{"data-mce-bogus":"1"}),editor.dom.setHTML(ceRoot,""),ceRoot.appendChild(br),editor.selection.setRng(CaretPosition$1.before(br).toRange())),!0},backspaceDelete$2=function(editor,forward){return editor.selection.isCollapsed()?backspaceDeleteCaret(editor,forward):backspaceDeleteRange(editor,forward)},$_52c8ph3bjducwnsq={backspaceDelete:backspaceDelete$2,paddEmptyElement:paddEmptyElement},isText$8=$_fj238m1qjducwnjm.isText,startsWithCaretContainer$1=function(node){return isText$8(node)&&node.data[0]===$_fz0k4u21jducwnmu.ZWSP},endsWithCaretContainer$1=function(node){return isText$8(node)&&node.data[node.data.length-1]===$_fz0k4u21jducwnmu.ZWSP},createZwsp=function(node){return node.ownerDocument.createTextNode($_fz0k4u21jducwnmu.ZWSP)},insertBefore$1=function(node){if(isText$8(node.previousSibling))return endsWithCaretContainer$1(node.previousSibling)?node.previousSibling:(node.previousSibling.appendData($_fz0k4u21jducwnmu.ZWSP),node.previousSibling);if(isText$8(node))return startsWithCaretContainer$1(node)?node:(node.insertData(0,$_fz0k4u21jducwnmu.ZWSP),node);var newNode=createZwsp(node);return node.parentNode.insertBefore(newNode,node),newNode},insertAfter$1=function(node){if(isText$8(node.nextSibling))return startsWithCaretContainer$1(node.nextSibling)?node.nextSibling:(node.nextSibling.insertData(0,$_fz0k4u21jducwnmu.ZWSP),node.nextSibling);if(isText$8(node))return endsWithCaretContainer$1(node)?node:(node.appendData($_fz0k4u21jducwnmu.ZWSP),node);var newNode=createZwsp(node);return node.nextSibling?node.parentNode.insertBefore(newNode,node.nextSibling):node.parentNode.appendChild(newNode),newNode},insertInline$1=function(before,node){return before?insertBefore$1(node):insertAfter$1(node)},insertInlineBefore=$_60qu7r6jducwn73.curry(insertInline$1,!0),insertInlineAfter=$_60qu7r6jducwn73.curry(insertInline$1,!1),insertInlinePos=function(pos,before){return $_fj238m1qjducwnjm.isText(pos.container())?insertInline$1(before,pos.container()):insertInline$1(before,pos.getNode())},isPosCaretContainer=function(pos,caret){var caretNode=caret.get();return caretNode&&pos.container()===caretNode&&isCaretContainerInline(caretNode)},renderCaret=function(caret,location){return location.fold(function(element){$_53zrlo29jducwnnv.remove(caret.get());var text=insertInlineBefore(element);return caret.set(text),Option.some(CaretPosition$1(text,text.length-1))},function(element){return $_dq07eg2bjducwno6.firstPositionIn(element).map(function(pos){if(isPosCaretContainer(pos,caret))return CaretPosition$1(caret.get(),1);$_53zrlo29jducwnnv.remove(caret.get());var text=insertInlinePos(pos,!0);return caret.set(text),CaretPosition$1(text,1)})},function(element){return $_dq07eg2bjducwno6.lastPositionIn(element).map(function(pos){if(isPosCaretContainer(pos,caret))return CaretPosition$1(caret.get(),caret.get().length-1);$_53zrlo29jducwnnv.remove(caret.get());var text=insertInlinePos(pos,!1);return caret.set(text),CaretPosition$1(text,text.length-1)})},function(element){$_53zrlo29jducwnnv.remove(caret.get());var text=insertInlineAfter(element);return caret.set(text),Option.some(CaretPosition$1(text,1))})},$_ctvf7p3gjducwntr={renderCaret:renderCaret},isInlineBlock=function(node){return node&&/^(IMG)$/.test(node.nodeName)},moveStart=function(dom,selection,rng){var walker,node,nodes,container=rng.startContainer,offset=rng.startOffset;if((rng.startContainer!==rng.endContainer||!isInlineBlock(rng.startContainer.childNodes[rng.startOffset]))&&(3===container.nodeType&&offset>=container.nodeValue.length&&(offset=dom.nodeIndex(container),container=container.parentNode),1===container.nodeType))for(nodes=container.childNodes,offset<nodes.length?(container=nodes[offset],walker=new TreeWalker(container,dom.getParent(container,dom.isBlock))):(container=nodes[nodes.length-1],walker=new TreeWalker(container,dom.getParent(container,dom.isBlock)),walker.next(!0)),node=walker.current();node;node=walker.next())if(3===node.nodeType&&!isWhiteSpaceNode(node))return rng.setStart(node,0),void selection.setRng(rng)},getNonWhiteSpaceSibling=function(node,next,inc){if(node)for(next=next?"nextSibling":"previousSibling",node=inc?node:node[next];node;node=node[next])if(1===node.nodeType||!isWhiteSpaceNode(node))return node},isTextBlock$1=function(editor,name){return name.nodeType&&(name=name.nodeName),!!editor.schema.getTextBlockElements()[name.toLowerCase()]},isValid=function(ed,parent,child){return ed.schema.isValidChild(parent,child)},isWhiteSpaceNode=function(node){return node&&3===node.nodeType&&/^([\t \r\n]+|)$/.test(node.nodeValue)},replaceVars=function(value,vars){return"string"!=typeof value?value=value(vars):vars&&(value=value.replace(/%(\w+)/g,function(str,name){return vars[name]||str})),value},isEq=function(str1,str2){return str1=str1||"",str2=str2||"",str1=""+(str1.nodeName||str1),str2=""+(str2.nodeName||str2),str1.toLowerCase()===str2.toLowerCase()},normalizeStyleValue=function(dom,value,name){return"color"!==name&&"backgroundColor"!==name||(value=dom.toHex(value)),"fontWeight"===name&&700===value&&(value="bold"),"fontFamily"===name&&(value=value.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+value},getStyle=function(dom,node,name){return normalizeStyleValue(dom,dom.getStyle(node,name),name)},getTextDecoration=function(dom,node){var decoration;return dom.getParent(node,function(n){return(decoration=dom.getStyle(n,"text-decoration"))&&"none"!==decoration}),decoration},getParents$1=function(dom,node,selector){return dom.getParents(node,selector,dom.getRoot())},$_fyc2yy3ljducwnuu={isInlineBlock:isInlineBlock,moveStart:moveStart,getNonWhiteSpaceSibling:getNonWhiteSpaceSibling,isTextBlock:isTextBlock$1,isValid:isValid,isWhiteSpaceNode:isWhiteSpaceNode,replaceVars:replaceVars,isEq:isEq,normalizeStyleValue:normalizeStyleValue,getStyle:getStyle,getTextDecoration:getTextDecoration,getParents:getParents$1},isBookmarkNode$2=$_dcl0u12jjducwnp0.isBookmarkNode,getParents$2=$_fyc2yy3ljducwnuu.getParents,isWhiteSpaceNode$1=$_fyc2yy3ljducwnuu.isWhiteSpaceNode,isTextBlock$2=$_fyc2yy3ljducwnuu.isTextBlock,findLeaf=function(node,offset){for(void 0===offset&&(offset=3===node.nodeType?node.length:node.childNodes.length);node&&node.hasChildNodes();)(node=node.childNodes[offset])&&(offset=3===node.nodeType?node.length:node.childNodes.length);return{node:node,offset:offset}
},excludeTrailingWhitespace=function(endContainer,endOffset){var leaf=findLeaf(endContainer,endOffset);if(leaf.node){for(;leaf.node&&0===leaf.offset&&leaf.node.previousSibling;)leaf=findLeaf(leaf.node.previousSibling);leaf.node&&leaf.offset>0&&3===leaf.node.nodeType&&" "===leaf.node.nodeValue.charAt(leaf.offset-1)&&leaf.offset>1&&(endContainer=leaf.node,endContainer.splitText(leaf.offset-1))}return endContainer},isBogusBr=function(node){return"BR"===node.nodeName&&node.getAttribute("data-mce-bogus")&&!node.nextSibling},findParentContentEditable=function(dom,node){for(var parent=node;parent;){if(1===parent.nodeType&&dom.getContentEditable(parent))return"false"===dom.getContentEditable(parent)?parent:node;parent=parent.parentNode}return node},findSpace=function(start,remove,node,offset){var pos,pos2,str=node.nodeValue;return void 0===offset&&(offset=start?str.length:0),start?(pos=str.lastIndexOf(" ",offset),pos2=str.lastIndexOf(" ",offset),(pos=pos>pos2?pos:pos2)===-1||remove||pos++):(pos=str.indexOf(" ",offset),pos2=str.indexOf(" ",offset),pos=pos!==-1&&(pos2===-1||pos<pos2)?pos:pos2),pos},findWordEndPoint=function(dom,body,container,offset,start,remove){var walker,node,pos,lastTextNode;if(3===container.nodeType){if((pos=findSpace(start,remove,container,offset))!==-1)return{container:container,offset:pos};lastTextNode=container}for(walker=new TreeWalker(container,dom.getParent(container,dom.isBlock)||body);node=walker[start?"prev":"next"]();)if(3===node.nodeType){if(lastTextNode=node,(pos=findSpace(start,remove,node))!==-1)return{container:node,offset:pos}}else if(dom.isBlock(node))break;if(lastTextNode)return offset=start?0:lastTextNode.length,{container:lastTextNode,offset:offset}},findSelectorEndPoint=function(dom,format,rng,container,siblingName){var parents,i,y,curFormat;for(3===container.nodeType&&0===container.nodeValue.length&&container[siblingName]&&(container=container[siblingName]),parents=getParents$2(dom,container),i=0;i<parents.length;i++)for(y=0;y<format.length;y++)if(!("collapsed"in(curFormat=format[y])&&curFormat.collapsed!==rng.collapsed)&&dom.is(parents[i],curFormat.selector))return parents[i];return container},findBlockEndPoint=function(editor,format,container,siblingName){var node,dom=editor.dom,root=dom.getRoot();if(format[0].wrapper||(node=dom.getParent(container,format[0].block,root)),!node){var scopeRoot=dom.getParent(container,"LI,TD,TH");node=dom.getParent(3===container.nodeType?container.parentNode:container,function(node){return node!==root&&isTextBlock$2(editor,node)},scopeRoot)}if(node&&format[0].wrapper&&(node=getParents$2(dom,node,"ul,ol").reverse()[0]||node),!node)for(node=container;node[siblingName]&&!dom.isBlock(node[siblingName])&&(node=node[siblingName],!$_fyc2yy3ljducwnuu.isEq(node,"br")););return node||container},findParentContainer=function(dom,format,startContainer,startOffset,endContainer,endOffset,start){var container,parent,sibling,siblingName,root;if(container=parent=start?startContainer:endContainer,siblingName=start?"previousSibling":"nextSibling",root=dom.getRoot(),3===container.nodeType&&!isWhiteSpaceNode$1(container)&&(start?startOffset>0:endOffset<container.nodeValue.length))return container;for(;;){if(!format[0].block_expand&&dom.isBlock(parent))return parent;for(sibling=parent[siblingName];sibling;sibling=sibling[siblingName])if(!isBookmarkNode$2(sibling)&&!isWhiteSpaceNode$1(sibling)&&!isBogusBr(sibling))return parent;if(parent===root||parent.parentNode===root){container=parent;break}parent=parent.parentNode}return container},expandRng=function(editor,rng,format,remove){var endPoint,startContainer=rng.startContainer,startOffset=rng.startOffset,endContainer=rng.endContainer,endOffset=rng.endOffset,dom=editor.dom;return 1===startContainer.nodeType&&startContainer.hasChildNodes()&&(startContainer=getNode(startContainer,startOffset),3===startContainer.nodeType&&(startOffset=0)),1===endContainer.nodeType&&endContainer.hasChildNodes()&&(endContainer=getNode(endContainer,rng.collapsed?endOffset:endOffset-1),3===endContainer.nodeType&&(endOffset=endContainer.nodeValue.length)),startContainer=findParentContentEditable(dom,startContainer),endContainer=findParentContentEditable(dom,endContainer),(isBookmarkNode$2(startContainer.parentNode)||isBookmarkNode$2(startContainer))&&(startContainer=isBookmarkNode$2(startContainer)?startContainer:startContainer.parentNode,startContainer=startContainer.nextSibling||startContainer,3===startContainer.nodeType&&(startOffset=0)),(isBookmarkNode$2(endContainer.parentNode)||isBookmarkNode$2(endContainer))&&(endContainer=isBookmarkNode$2(endContainer)?endContainer:endContainer.parentNode,endContainer=endContainer.previousSibling||endContainer,3===endContainer.nodeType&&(endOffset=endContainer.length)),format[0].inline&&(rng.collapsed&&(endPoint=findWordEndPoint(dom,editor.getBody(),startContainer,startOffset,!0,remove),endPoint&&(startContainer=endPoint.container,startOffset=endPoint.offset),(endPoint=findWordEndPoint(dom,editor.getBody(),endContainer,endOffset,!1,remove))&&(endContainer=endPoint.container,endOffset=endPoint.offset)),endContainer=remove?endContainer:excludeTrailingWhitespace(endContainer,endOffset)),(format[0].inline||format[0].block_expand)&&(format[0].inline&&3===startContainer.nodeType&&0!==startOffset||(startContainer=findParentContainer(dom,format,startContainer,startOffset,endContainer,endOffset,!0)),format[0].inline&&3===endContainer.nodeType&&endOffset!==endContainer.nodeValue.length||(endContainer=findParentContainer(dom,format,startContainer,startOffset,endContainer,endOffset,!1))),format[0].selector&&format[0].expand!==!1&&!format[0].inline&&(startContainer=findSelectorEndPoint(dom,format,rng,startContainer,"previousSibling"),endContainer=findSelectorEndPoint(dom,format,rng,endContainer,"nextSibling")),(format[0].block||format[0].selector)&&(startContainer=findBlockEndPoint(editor,format,startContainer,"previousSibling"),endContainer=findBlockEndPoint(editor,format,endContainer,"nextSibling"),format[0].block&&(dom.isBlock(startContainer)||(startContainer=findParentContainer(dom,format,startContainer,startOffset,endContainer,endOffset,!0)),dom.isBlock(endContainer)||(endContainer=findParentContainer(dom,format,startContainer,startOffset,endContainer,endOffset,!1)))),1===startContainer.nodeType&&(startOffset=dom.nodeIndex(startContainer),startContainer=startContainer.parentNode),1===endContainer.nodeType&&(endOffset=dom.nodeIndex(endContainer)+1,endContainer=endContainer.parentNode),{startContainer:startContainer,startOffset:startOffset,endContainer:endContainer,endOffset:endOffset}},$_ceajqh3kjducwnui={expandRng:expandRng},isEq$1=$_fyc2yy3ljducwnuu.isEq,matchesUnInheritedFormatSelector=function(ed,node,name){var formatList=ed.formatter.get(name);if(formatList)for(var i=0;i<formatList.length;i++)if(formatList[i].inherit===!1&&ed.dom.is(node,formatList[i].selector))return!0;return!1},matchParents=function(editor,node,name,vars){var root=editor.dom.getRoot();return node!==root&&(node=editor.dom.getParent(node,function(node){return!!matchesUnInheritedFormatSelector(editor,node,name)||(node.parentNode===root||!!matchNode(editor,node,name,vars,!0))}),matchNode(editor,node,name,vars))},matchName=function(dom,node,format){return!!isEq$1(node,format.inline)||(!!isEq$1(node,format.block)||(format.selector?1===node.nodeType&&dom.is(node,format.selector):void 0))},matchItems=function(dom,node,format,itemName,similar,vars){var key,value,i,items=format[itemName];if(format.onmatch)return format.onmatch(node,format,itemName);if(items)if(void 0===items.length){for(key in items)if(items.hasOwnProperty(key)){if(value="attributes"===itemName?dom.getAttrib(node,key):$_fyc2yy3ljducwnuu.getStyle(dom,node,key),similar&&!value&&!format.exact)return;if((!similar||format.exact)&&!isEq$1(value,$_fyc2yy3ljducwnuu.normalizeStyleValue(dom,$_fyc2yy3ljducwnuu.replaceVars(items[key],vars),key)))return}}else for(i=0;i<items.length;i++)if("attributes"===itemName?dom.getAttrib(node,items[i]):$_fyc2yy3ljducwnuu.getStyle(dom,node,items[i]))return format;return format},matchNode=function(ed,node,name,vars,similar){var format,i,x,classes,formatList=ed.formatter.get(name),dom=ed.dom;if(formatList&&node)for(i=0;i<formatList.length;i++)if(format=formatList[i],matchName(ed.dom,node,format)&&matchItems(dom,node,format,"attributes",similar,vars)&&matchItems(dom,node,format,"styles",similar,vars)){if(classes=format.classes)for(x=0;x<classes.length;x++)if(!ed.dom.hasClass(node,classes[x]))return;return format}},match=function(editor,name,vars,node){var startNode;return node?matchParents(editor,node,name,vars):(node=editor.selection.getNode(),!!matchParents(editor,node,name,vars)||!((startNode=editor.selection.getStart())===node||!matchParents(editor,startNode,name,vars)))},matchAll=function(editor,names,vars){var startElement,matchedFormatNames=[],checkedMap={};return startElement=editor.selection.getStart(),editor.dom.getParent(startElement,function(node){var i,name;for(i=0;i<names.length;i++)name=names[i],!checkedMap[name]&&matchNode(editor,node,name,vars)&&(checkedMap[name]=!0,matchedFormatNames.push(name))},editor.dom.getRoot()),matchedFormatNames},canApply=function(editor,name){var startNode,parents,i,x,selector,formatList=editor.formatter.get(name),dom=editor.dom;if(formatList)for(startNode=editor.selection.getStart(),parents=$_fyc2yy3ljducwnuu.getParents(dom,startNode),x=formatList.length-1;x>=0;x--){if(!(selector=formatList[x].selector)||formatList[x].defaultBlock)return!0;for(i=parents.length-1;i>=0;i--)if(dom.is(parents[i],selector))return!0}return!1},$_4os6t23mjducwnv0={matchNode:matchNode,matchName:matchName,match:match,matchAll:matchAll,canApply:canApply,matchesUnInheritedFormatSelector:matchesUnInheritedFormatSelector},splitText=function(node,offset){return node.splitText(offset)},split$1=function(rng){var startContainer=rng.startContainer,startOffset=rng.startOffset,endContainer=rng.endContainer,endOffset=rng.endOffset;return startContainer===endContainer&&$_fj238m1qjducwnjm.isText(startContainer)?startOffset>0&&startOffset<startContainer.nodeValue.length&&(endContainer=splitText(startContainer,startOffset),startContainer=endContainer.previousSibling,endOffset>startOffset?(endOffset-=startOffset,startContainer=endContainer=splitText(endContainer,endOffset).previousSibling,endOffset=endContainer.nodeValue.length,startOffset=0):endOffset=0):($_fj238m1qjducwnjm.isText(startContainer)&&startOffset>0&&startOffset<startContainer.nodeValue.length&&(startContainer=splitText(startContainer,startOffset),startOffset=0),$_fj238m1qjducwnjm.isText(endContainer)&&endOffset>0&&endOffset<endContainer.nodeValue.length&&(endContainer=splitText(endContainer,endOffset).previousSibling,endOffset=endContainer.nodeValue.length)),{startContainer:startContainer,startOffset:startOffset,endContainer:endContainer,endOffset:endOffset}},$_9e24g13njducwnv4={split:split$1},ZWSP$1=$_fz0k4u21jducwnmu.ZWSP,importNode=function(ownerDocument,node){return ownerDocument.importNode(node,!0)},isCaretNode=function(node){return 1===node.nodeType&&"_mce_caret"===node.id},getEmptyCaretContainers=function(node){for(var nodes=[];node;){if(3===node.nodeType&&node.nodeValue!==ZWSP$1||node.childNodes.length>1)return[];1===node.nodeType&&nodes.push(node),node=node.firstChild}return nodes},isCaretContainerEmpty=function(node){return getEmptyCaretContainers(node).length>0},findFirstTextNode=function(node){var walker;if(node)for(walker=new TreeWalker(node,node),node=walker.current();node;node=walker.next())if(3===node.nodeType)return node;return null},createCaretContainer=function(fill){var caretContainer=$_5s4uzoyjducwngo.fromTag("span");return $_60196814jducwnhd.setAll(caretContainer,{id:"_mce_caret","data-mce-bogus":"1","data-mce-type":"format-caret"}),fill&&$_ejmufn2ojducwnpy.append(caretContainer,$_5s4uzoyjducwngo.fromText(ZWSP$1)),caretContainer},getParentCaretContainer=function(body,node){for(;node&&node!==body;){if("_mce_caret"===node.id)return node;node=node.parentNode}return null},trimZwspFromCaretContainer=function(caretContainerNode){var textNode=findFirstTextNode(caretContainerNode);return textNode&&textNode.nodeValue.charAt(0)===ZWSP$1&&textNode.deleteData(0,1),textNode},removeCaretContainerNode=function(dom,selection,node,moveCaret){var rng,block,textNode;rng=selection.getRng(!0),block=dom.getParent(node,dom.isBlock),isCaretContainerEmpty(node)?(moveCaret!==!1&&(rng.setStartBefore(node),rng.setEndBefore(node)),dom.remove(node)):(textNode=trimZwspFromCaretContainer(node),rng.startContainer===textNode&&rng.startOffset>0&&rng.setStart(textNode,rng.startOffset-1),rng.endContainer===textNode&&rng.endOffset>0&&rng.setEnd(textNode,rng.endOffset-1),dom.remove(node,!0)),block&&dom.isEmpty(block)&&$_7sfvvk2njducwnpo.fillWithPaddingBr($_5s4uzoyjducwngo.fromDom(block)),selection.setRng(rng)},removeCaretContainer=function(body,dom,selection,node,moveCaret){if(node)removeCaretContainerNode(dom,selection,node,moveCaret);else if(!(node=getParentCaretContainer(body,selection.getStart())))for(;node=dom.get("_mce_caret");)removeCaretContainerNode(dom,selection,node,!1)},insertCaretContainerNode=function(editor,caretContainer,formatNode){var dom=editor.dom,block=dom.getParent(formatNode,$_6183wb25jducwnn2.curry($_fyc2yy3ljducwnuu.isTextBlock,editor));block&&dom.isEmpty(block)?formatNode.parentNode.replaceChild(caretContainer,formatNode):($_7sfvvk2njducwnpo.removeTrailingBr($_5s4uzoyjducwngo.fromDom(formatNode)),dom.isEmpty(formatNode)?formatNode.parentNode.replaceChild(caretContainer,formatNode):dom.insertAfter(caretContainer,formatNode))},appendNode=function(parentNode,node){return parentNode.appendChild(node),node},insertFormatNodesIntoCaretContainer=function(formatNodes,caretContainer){var innerMostFormatNode=$_2dw1bj4jducwn6g.foldr(formatNodes,function(parentNode,formatNode){return appendNode(parentNode,formatNode.cloneNode(!1))},caretContainer);return appendNode(innerMostFormatNode,innerMostFormatNode.ownerDocument.createTextNode(ZWSP$1))},applyCaretFormat=function(editor,name,vars){var rng,caretContainer,textNode,offset,bookmark,container,text,selection=editor.selection;rng=selection.getRng(!0),offset=rng.startOffset,container=rng.startContainer,text=container.nodeValue,(caretContainer=getParentCaretContainer(editor.getBody(),selection.getStart()))&&(textNode=findFirstTextNode(caretContainer));var wordcharRegex=/[^\s\u00a0\u00ad\u200b\ufeff]/;text&&offset>0&&offset<text.length&&wordcharRegex.test(text.charAt(offset))&&wordcharRegex.test(text.charAt(offset-1))?(bookmark=selection.getBookmark(),rng.collapse(!0),rng=$_ceajqh3kjducwnui.expandRng(editor,rng,editor.formatter.get(name)),rng=$_9e24g13njducwnv4.split(rng),editor.formatter.apply(name,vars,rng),selection.moveToBookmark(bookmark)):(caretContainer&&textNode.nodeValue===ZWSP$1?editor.formatter.apply(name,vars,caretContainer):(caretContainer=importNode(editor.getDoc(),createCaretContainer(!0).dom()),textNode=caretContainer.firstChild,rng.insertNode(caretContainer),offset=1,editor.formatter.apply(name,vars,caretContainer)),selection.setCursorLocation(textNode,offset))},removeCaretFormat=function(editor,name,vars,similar){var container,offset,bookmark,hasContentAfter,node,formatNode,caretContainer,dom=editor.dom,selection=editor.selection,parents=[],rng=selection.getRng();for(container=rng.startContainer,offset=rng.startOffset,node=container,3===container.nodeType&&(offset!==container.nodeValue.length&&(hasContentAfter=!0),node=node.parentNode);node;){if($_4os6t23mjducwnv0.matchNode(editor,node,name,vars,similar)){formatNode=node;break}node.nextSibling&&(hasContentAfter=!0),parents.push(node),node=node.parentNode}if(formatNode)if(hasContentAfter){bookmark=selection.getBookmark(),rng.collapse(!0);var expandedRng=$_ceajqh3kjducwnui.expandRng(editor,rng,editor.formatter.get(name),!0);expandedRng=$_9e24g13njducwnv4.split(expandedRng),editor.formatter.remove(name,vars,expandedRng),selection.moveToBookmark(bookmark)}else{caretContainer=getParentCaretContainer(editor.getBody(),formatNode);var newCaretContainer=createCaretContainer(!1).dom(),caretNode=insertFormatNodesIntoCaretContainer(parents,newCaretContainer);caretContainer?insertCaretContainerNode(editor,newCaretContainer,caretContainer):insertCaretContainerNode(editor,newCaretContainer,formatNode),removeCaretContainerNode(dom,selection,caretContainer,!1),selection.setCursorLocation(caretNode,1),dom.isEmpty(formatNode)&&dom.remove(formatNode)}},disableCaretContainer=function(body,dom,selection,keyCode){removeCaretContainer(body,dom,selection,null,!1),8===keyCode&&selection.isCollapsed()&&selection.getStart().innerHTML===ZWSP$1&&removeCaretContainer(body,dom,selection,getParentCaretContainer(body,selection.getStart())),37!==keyCode&&39!==keyCode||removeCaretContainer(body,dom,selection,getParentCaretContainer(body,selection.getStart()))},setup=function(editor){var dom=editor.dom,selection=editor.selection,body=editor.getBody();editor.on("mouseup keydown",function(e){disableCaretContainer(body,dom,selection,e.keyCode)})},replaceWithCaretFormat=function(targetNode,formatNodes){var caretContainer=createCaretContainer(!1),innerMost=insertFormatNodesIntoCaretContainer(formatNodes,caretContainer.dom());return $_ejmufn2ojducwnpy.before($_5s4uzoyjducwngo.fromDom(targetNode),caretContainer),$_34vweg2pjducwnq0.remove($_5s4uzoyjducwngo.fromDom(targetNode)),CaretPosition$1(innerMost,0)},isFormatElement=function(editor,element){return editor.schema.getTextInlineElements().hasOwnProperty($_47qy15zjducwngt.name(element))&&!isCaretNode(element.dom())&&!$_fj238m1qjducwnjm.isBogus(element.dom())},$_gizh813jjducwnu6={setup:setup,applyCaretFormat:applyCaretFormat,removeCaretFormat:removeCaretFormat,isCaretNode:isCaretNode,getParentCaretContainer:getParentCaretContainer,replaceWithCaretFormat:replaceWithCaretFormat,isFormatElement:isFormatElement},evaluateUntil=function(fns,args){for(var i=0;i<fns.length;i++){var result=fns[i].apply(null,args);if(result.isSome())return result}return Option.none()},$_fx53xj3ojducwnv6={evaluateUntil:evaluateUntil},Location=$_elh5kq3djducwnt6.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),rescope=function(rootNode,node){var parentBlock=getParentBlock(node,rootNode);return parentBlock?parentBlock:rootNode},before$3=function(isInlineTarget,rootNode,pos){var nPos=$_4m240x32jducwnrf.normalizeForwards(pos),scope=rescope(rootNode,nPos.container());return $_4m240x32jducwnrf.findRootInline(isInlineTarget,scope,nPos).fold(function(){return $_dq07eg2bjducwno6.nextPosition(scope,nPos).bind($_60qu7r6jducwn73.curry($_4m240x32jducwnrf.findRootInline,isInlineTarget,scope)).map(function(inline){return Location.before(inline)})},Option.none)},isNotInsideFormatCaretContainer=function(rootNode,elm){return null===$_gizh813jjducwnu6.getParentCaretContainer(rootNode,elm)},findInsideRootInline=function(isInlineTarget,rootNode,pos){return $_4m240x32jducwnrf.findRootInline(isInlineTarget,rootNode,pos).filter($_60qu7r6jducwn73.curry(isNotInsideFormatCaretContainer,rootNode))},start=function(isInlineTarget,rootNode,pos){var nPos=$_4m240x32jducwnrf.normalizeBackwards(pos);return findInsideRootInline(isInlineTarget,rootNode,nPos).bind(function(inline){return $_dq07eg2bjducwno6.prevPosition(inline,nPos).isNone()?Option.some(Location.start(inline)):Option.none()})},end=function(isInlineTarget,rootNode,pos){var nPos=$_4m240x32jducwnrf.normalizeForwards(pos);return findInsideRootInline(isInlineTarget,rootNode,nPos).bind(function(inline){return $_dq07eg2bjducwno6.nextPosition(inline,nPos).isNone()?Option.some(Location.end(inline)):Option.none()})},after$3=function(isInlineTarget,rootNode,pos){var nPos=$_4m240x32jducwnrf.normalizeBackwards(pos),scope=rescope(rootNode,nPos.container());return $_4m240x32jducwnrf.findRootInline(isInlineTarget,scope,nPos).fold(function(){return $_dq07eg2bjducwno6.prevPosition(scope,nPos).bind($_60qu7r6jducwn73.curry($_4m240x32jducwnrf.findRootInline,isInlineTarget,scope)).map(function(inline){return Location.after(inline)})},Option.none)},isValidLocation=function(location){return $_4m240x32jducwnrf.isRtl(getElement(location))===!1},readLocation=function(isInlineTarget,rootNode,pos){return $_fx53xj3ojducwnv6.evaluateUntil([before$3,start,end,after$3],[isInlineTarget,rootNode,pos]).filter(isValidLocation)},getElement=function(location){return location.fold($_60qu7r6jducwn73.identity,$_60qu7r6jducwn73.identity,$_60qu7r6jducwn73.identity,$_60qu7r6jducwn73.identity)},getName=function(location){return location.fold($_60qu7r6jducwn73.constant("before"),$_60qu7r6jducwn73.constant("start"),$_60qu7r6jducwn73.constant("end"),$_60qu7r6jducwn73.constant("after"))},outside=function(location){return location.fold(Location.before,Location.before,Location.after,Location.after)},inside=function(location){return location.fold(Location.start,Location.start,Location.end,Location.end)},isEq$2=function(location1,location2){return getName(location1)===getName(location2)&&getElement(location1)===getElement(location2)},betweenInlines=function(forward,isInlineTarget,rootNode,from,to,location){return $_87ppqy2ejducwnol.liftN([$_4m240x32jducwnrf.findRootInline(isInlineTarget,rootNode,from),$_4m240x32jducwnrf.findRootInline(isInlineTarget,rootNode,to)],function(fromInline,toInline){return fromInline!==toInline&&$_4m240x32jducwnrf.hasSameParentBlock(rootNode,fromInline,toInline)?Location.after(forward?fromInline:toInline):location}).getOr(location)},skipNoMovement=function(fromLocation,toLocation){return fromLocation.fold($_60qu7r6jducwn73.constant(!0),function(fromLocation){return!isEq$2(fromLocation,toLocation)})},findLocationTraverse=function(forward,isInlineTarget,rootNode,fromLocation,pos){var from=$_4m240x32jducwnrf.normalizePosition(forward,pos);return $_dq07eg2bjducwno6.fromPosition(forward,rootNode,from).map($_60qu7r6jducwn73.curry($_4m240x32jducwnrf.normalizePosition,forward)).fold(function(){return fromLocation.map(outside)},function(to){return readLocation(isInlineTarget,rootNode,to).map($_60qu7r6jducwn73.curry(betweenInlines,forward,isInlineTarget,rootNode,from,to)).filter($_60qu7r6jducwn73.curry(skipNoMovement,fromLocation))}).filter(isValidLocation)},findLocationSimple=function(forward,location){return forward?location.fold($_60qu7r6jducwn73.compose(Option.some,Location.start),Option.none,$_60qu7r6jducwn73.compose(Option.some,Location.after),Option.none):location.fold(Option.none,$_60qu7r6jducwn73.compose(Option.some,Location.before),Option.none,$_60qu7r6jducwn73.compose(Option.some,Location.end))},findLocation=function(forward,isInlineTarget,rootNode,pos){var from=$_4m240x32jducwnrf.normalizePosition(forward,pos),fromLocation=readLocation(isInlineTarget,rootNode,from);return readLocation(isInlineTarget,rootNode,from).bind($_60qu7r6jducwn73.curry(findLocationSimple,forward)).orThunk(function(){return findLocationTraverse(forward,isInlineTarget,rootNode,fromLocation,pos)})},$_681q3b3ijducwnty={readLocation:readLocation,findLocation:findLocation,prevLocation:$_60qu7r6jducwn73.curry(findLocation,!1),nextLocation:$_60qu7r6jducwn73.curry(findLocation,!0),getElement:getElement,outside:outside,inside:inside},Cell=function(initial){var value=initial,get=function(){return value},set=function(v){value=v},clone=function(){return Cell(get())};return{get:get,set:set,clone:clone}},hasSelectionModifyApi=function(editor){return $_c7y6af12jducwnh8.isFunction(editor.selection.getSel().modify)},moveRel=function(forward,selection,pos){var delta=forward?1:-1;return selection.setRng(CaretPosition$1(pos.container(),pos.offset()+delta).toRange()),selection.getSel().modify("move",forward?"forward":"backward","word"),!0},moveByWord=function(forward,editor){var rng=editor.selection.getRng(),pos=forward?CaretPosition$1.fromRangeEnd(rng):CaretPosition$1.fromRangeStart(rng);return!!hasSelectionModifyApi(editor)&&(forward&&isBeforeInline(pos)?moveRel(!0,editor.selection,pos):!(forward||!isAfterInline(pos))&&moveRel(!1,editor.selection,pos))},$_cifmuh3rjducwnve={hasSelectionModifyApi:hasSelectionModifyApi,moveByWord:moveByWord},setCaretPosition=function(editor,pos){var rng=editor.dom.createRng();rng.setStart(pos.container(),pos.offset()),rng.setEnd(pos.container(),pos.offset()),editor.selection.setRng(rng)},isFeatureEnabled=function(editor){return editor.settings.inline_boundaries!==!1},setSelected=function(state,elm){state?elm.setAttribute("data-mce-selected","inline-boundary"):elm.removeAttribute("data-mce-selected")},renderCaretLocation=function(editor,caret,location){return $_ctvf7p3gjducwntr.renderCaret(caret,location).map(function(pos){return setCaretPosition(editor,pos),location})},findLocation$1=function(editor,caret,forward){var rootNode=editor.getBody(),from=CaretPosition$1.fromRangeStart(editor.selection.getRng()),isInlineTarget=$_60qu7r6jducwn73.curry($_4m240x32jducwnrf.isInlineTarget,editor);return $_681q3b3ijducwnty.findLocation(forward,isInlineTarget,rootNode,from).bind(function(location){return renderCaretLocation(editor,caret,location)})},toggleInlines=function(isInlineTarget,dom,elms){var selectedInlines=$_2dw1bj4jducwn6g.filter(dom.select('*[data-mce-selected="inline-boundary"]'),isInlineTarget),targetInlines=$_2dw1bj4jducwn6g.filter(elms,isInlineTarget);$_2dw1bj4jducwn6g.each($_2dw1bj4jducwn6g.difference(selectedInlines,targetInlines),$_60qu7r6jducwn73.curry(setSelected,!1)),$_2dw1bj4jducwn6g.each($_2dw1bj4jducwn6g.difference(targetInlines,selectedInlines),$_60qu7r6jducwn73.curry(setSelected,!0))},safeRemoveCaretContainer=function(editor,caret){if(editor.selection.isCollapsed()&&editor.composing!==!0&&caret.get()){var pos=CaretPosition$1.fromRangeStart(editor.selection.getRng());CaretPosition$1.isTextPosition(pos)&&$_4m240x32jducwnrf.isAtZwsp(pos)===!1&&(setCaretPosition(editor,$_53zrlo29jducwnnv.removeAndReposition(caret.get(),pos)),caret.set(null))}},renderInsideInlineCaret=function(isInlineTarget,editor,caret,elms){if(editor.selection.isCollapsed()){var inlines=$_2dw1bj4jducwn6g.filter(elms,isInlineTarget);$_2dw1bj4jducwn6g.each(inlines,function(inline){var pos=CaretPosition$1.fromRangeStart(editor.selection.getRng());$_681q3b3ijducwnty.readLocation(isInlineTarget,editor.getBody(),pos).bind(function(location){return renderCaretLocation(editor,caret,location)})})}},move=function(editor,caret,forward){return function(){return!!isFeatureEnabled(editor)&&findLocation$1(editor,caret,forward).isSome()}},moveWord=function(forward,editor,caret){return function(){return!!isFeatureEnabled(editor)&&$_cifmuh3rjducwnve.moveByWord(forward,editor)}},setupSelectedState=function(editor){var caret=new Cell(null),isInlineTarget=$_60qu7r6jducwn73.curry($_4m240x32jducwnrf.isInlineTarget,editor);return editor.on("NodeChange",function(e){isFeatureEnabled(editor)&&(toggleInlines(isInlineTarget,editor.dom,e.parents),safeRemoveCaretContainer(editor,caret),renderInsideInlineCaret(isInlineTarget,editor,caret,e.parents))}),caret},$_41ufni3pjducwnv8={move:move,moveNextWord:$_60qu7r6jducwn73.curry(moveWord,!0),movePrevWord:$_60qu7r6jducwn73.curry(moveWord,!1),setupSelectedState:setupSelectedState,setCaretPosition:setCaretPosition},isFeatureEnabled$1=function(editor){return editor.settings.inline_boundaries!==!1},rangeFromPositions=function(from,to){var range=document.createRange();return range.setStart(from.container(),from.offset()),range.setEnd(to.container(),to.offset()),range},hasOnlyTwoOrLessPositionsLeft=function(elm){return $_87ppqy2ejducwnol.liftN([$_dq07eg2bjducwno6.firstPositionIn(elm),$_dq07eg2bjducwno6.lastPositionIn(elm)],function(firstPos,lastPos){var normalizedFirstPos=$_4m240x32jducwnrf.normalizePosition(!0,firstPos),normalizedLastPos=$_4m240x32jducwnrf.normalizePosition(!1,lastPos);return $_dq07eg2bjducwno6.nextPosition(elm,normalizedFirstPos).map(function(pos){return pos.isEqual(normalizedLastPos)}).getOr(!0)}).getOr(!0)},setCaretLocation=function(editor,caret){return function(location){return $_ctvf7p3gjducwntr.renderCaret(caret,location).map(function(pos){return $_41ufni3pjducwnv8.setCaretPosition(editor,pos),!0}).getOr(!1)}},deleteFromTo=function(editor,caret,from,to){var rootNode=editor.getBody(),isInlineTarget=$_60qu7r6jducwn73.curry($_4m240x32jducwnrf.isInlineTarget,editor);editor.undoManager.ignore(function(){editor.selection.setRng(rangeFromPositions(from,to)),editor.execCommand("Delete"),$_681q3b3ijducwnty.readLocation(isInlineTarget,rootNode,CaretPosition$1.fromRangeStart(editor.selection.getRng())).map($_681q3b3ijducwnty.inside).map(setCaretLocation(editor,caret))}),editor.nodeChanged()},rescope$1=function(rootNode,node){var parentBlock=getParentBlock(node,rootNode);return parentBlock?parentBlock:rootNode},backspaceDeleteCollapsed=function(editor,caret,forward,from){var rootNode=rescope$1(editor.getBody(),from.container()),isInlineTarget=$_60qu7r6jducwn73.curry($_4m240x32jducwnrf.isInlineTarget,editor),fromLocation=$_681q3b3ijducwnty.readLocation(isInlineTarget,rootNode,from);return fromLocation.bind(function(location){return forward?location.fold($_60qu7r6jducwn73.constant(Option.some($_681q3b3ijducwnty.inside(location))),Option.none,$_60qu7r6jducwn73.constant(Option.some($_681q3b3ijducwnty.outside(location))),Option.none):location.fold(Option.none,$_60qu7r6jducwn73.constant(Option.some($_681q3b3ijducwnty.outside(location))),Option.none,$_60qu7r6jducwn73.constant(Option.some($_681q3b3ijducwnty.inside(location))))}).map(setCaretLocation(editor,caret)).getOrThunk(function(){var toPosition=$_dq07eg2bjducwno6.navigate(forward,rootNode,from),toLocation=toPosition.bind(function(pos){return $_681q3b3ijducwnty.readLocation(isInlineTarget,rootNode,pos)});return fromLocation.isSome()&&toLocation.isSome()?$_4m240x32jducwnrf.findRootInline(isInlineTarget,rootNode,from).map(function(elm){return!!hasOnlyTwoOrLessPositionsLeft(elm)&&($_92j5pe3ejducwnta.deleteElement(editor,forward,$_5s4uzoyjducwngo.fromDom(elm)),!0)}).getOr(!1):toLocation.bind(function(_){return toPosition.map(function(to){return forward?deleteFromTo(editor,caret,from,to):deleteFromTo(editor,caret,to,from),!0})}).getOr(!1)})},backspaceDelete$3=function(editor,caret,forward){if(editor.selection.isCollapsed()&&isFeatureEnabled$1(editor)){var from=CaretPosition$1.fromRangeStart(editor.selection.getRng());return backspaceDeleteCollapsed(editor,caret,forward,from)}return!1},$_a4ivlq3fjducwntl={backspaceDelete:backspaceDelete$3},tableCellRng=$_295afp18jducwni4.immutable("start","end"),tableSelection=$_295afp18jducwni4.immutable("rng","table","cells"),deleteAction=$_elh5kq3djducwnt6.generate([{removeTable:["element"]},{emptyCells:["cells"]}]),getClosestCell$1=function(container,isRoot){return $_eh73s937jducwns3.closest($_5s4uzoyjducwngo.fromDom(container),"td,th",isRoot)},getClosestTable=function(cell,isRoot){return $_eh73s937jducwns3.ancestor(cell,"table",isRoot)},isExpandedCellRng=function(cellRng){return $_4qdq5m1djducwnie.eq(cellRng.start(),cellRng.end())===!1},getTableFromCellRng=function(cellRng,isRoot){return getClosestTable(cellRng.start(),isRoot).bind(function(startParentTable){return getClosestTable(cellRng.end(),isRoot).bind(function(endParentTable){return $_4qdq5m1djducwnie.eq(startParentTable,endParentTable)?Option.some(startParentTable):Option.none()})})},getCellRng=function(rng,isRoot){return $_87ppqy2ejducwnol.liftN([getClosestCell$1(rng.startContainer,isRoot),getClosestCell$1(rng.endContainer,isRoot)],tableCellRng).filter(isExpandedCellRng)},getTableSelectionFromCellRng=function(cellRng,isRoot){return getTableFromCellRng(cellRng,isRoot).bind(function(table){var cells=$_47k8tx2gjducwnot.descendants(table,"td,th");return tableSelection(cellRng,table,cells)})},getTableSelectionFromRng=function(rootNode,rng){var isRoot=$_60qu7r6jducwn73.curry($_4qdq5m1djducwnie.eq,rootNode);return getCellRng(rng,isRoot).map(function(cellRng){return getTableSelectionFromCellRng(cellRng,isRoot)})},getCellIndex=function(cellArray,cell){return $_2dw1bj4jducwn6g.findIndex(cellArray,function(x){
return $_4qdq5m1djducwnie.eq(x,cell)})},getSelectedCells=function(tableSelection){return $_87ppqy2ejducwnol.liftN([getCellIndex(tableSelection.cells(),tableSelection.rng().start()),getCellIndex(tableSelection.cells(),tableSelection.rng().end())],function(startIndex,endIndex){return tableSelection.cells().slice(startIndex,endIndex+1)})},getAction=function(tableSelection){return getSelectedCells(tableSelection).bind(function(selected){var cells=tableSelection.cells();return selected.length===cells.length?deleteAction.removeTable(tableSelection.table()):deleteAction.emptyCells(selected)})},getActionFromCells=function(cells){return deleteAction.emptyCells(cells)},getActionFromRange=function(rootNode,rng){return getTableSelectionFromRng(rootNode,rng).map(getAction)},$_cwch063tjducwnvp={getActionFromRange:getActionFromRange,getActionFromCells:getActionFromCells},getRanges=function(selection){var ranges=[];if(selection)for(var i=0;i<selection.rangeCount;i++)ranges.push(selection.getRangeAt(i));return ranges},getSelectedNodes=function(ranges){return $_2dw1bj4jducwn6g.bind(ranges,function(range){var node=getSelectedNode(range);return node?[$_5s4uzoyjducwngo.fromDom(node)]:[]})},hasMultipleRanges=function(selection){return getRanges(selection).length>1},$_bqfspz3vjducwnw3={getRanges:getRanges,getSelectedNodes:getSelectedNodes,hasMultipleRanges:hasMultipleRanges},getCellsFromRanges=function(ranges){return $_2dw1bj4jducwn6g.filter($_bqfspz3vjducwnw3.getSelectedNodes(ranges),isTableCell)},getCellsFromElement=function(elm){return $_47k8tx2gjducwnot.descendants(elm,"td[data-mce-selected],th[data-mce-selected]")},getCellsFromElementOrRanges=function(ranges,element){var selectedCells=getCellsFromElement(element),rangeCells=getCellsFromRanges(ranges);return selectedCells.length>0?selectedCells:rangeCells},getCellsFromEditor=function(editor){return getCellsFromElementOrRanges($_bqfspz3vjducwnw3.getRanges(editor.selection.getSel()),$_5s4uzoyjducwngo.fromDom(editor.getBody()))},$_7ksohe3ujducwnvz={getCellsFromRanges:getCellsFromRanges,getCellsFromElement:getCellsFromElement,getCellsFromElementOrRanges:getCellsFromElementOrRanges,getCellsFromEditor:getCellsFromEditor},emptyCells=function(editor,cells){return $_2dw1bj4jducwn6g.each(cells,$_7sfvvk2njducwnpo.fillWithPaddingBr),editor.selection.setCursorLocation(cells[0].dom(),0),!0},deleteTableElement=function(editor,table){return $_92j5pe3ejducwnta.deleteElement(editor,!1,table),!0},deleteCellRange=function(editor,rootElm,rng){return $_cwch063tjducwnvp.getActionFromRange(rootElm,rng).map(function(action){return action.fold($_60qu7r6jducwn73.curry(deleteTableElement,editor),$_60qu7r6jducwn73.curry(emptyCells,editor))})},deleteCaptionRange=function(editor,caption){return emptyElement(editor,caption)},deleteTableRange=function(editor,rootElm,rng,startElm){return getParentCaption(rootElm,startElm).fold(function(){return deleteCellRange(editor,rootElm,rng)},function(caption){return deleteCaptionRange(editor,caption)}).getOr(!1)},deleteRange$1=function(editor,startElm){var rootNode=$_5s4uzoyjducwngo.fromDom(editor.getBody()),rng=editor.selection.getRng(),selectedCells=$_7ksohe3ujducwnvz.getCellsFromEditor(editor);return 0!==selectedCells.length?emptyCells(editor,selectedCells):deleteTableRange(editor,rootNode,rng,startElm)},getParentCell=function(rootElm,elm){return $_2dw1bj4jducwn6g.find($_b22jto39jducwnsg.parentsAndSelf(elm,rootElm),isTableCell)},getParentCaption=function(rootElm,elm){return $_2dw1bj4jducwn6g.find($_b22jto39jducwnsg.parentsAndSelf(elm,rootElm),function(elm){return"caption"===$_47qy15zjducwngt.name(elm)})},deleteBetweenCells=function(editor,rootElm,forward,fromCell,from){return $_dq07eg2bjducwno6.navigate(forward,editor.getBody(),from).bind(function(to){return getParentCell(rootElm,$_5s4uzoyjducwngo.fromDom(to.getNode())).map(function(toCell){return $_4qdq5m1djducwnie.eq(toCell,fromCell)===!1})})},emptyElement=function(editor,elm){return $_7sfvvk2njducwnpo.fillWithPaddingBr(elm),editor.selection.setCursorLocation(elm.dom(),0),Option.some(!0)},isDeleteOfLastCharPos=function(fromCaption,forward,from,to){return $_dq07eg2bjducwno6.firstPositionIn(fromCaption.dom()).bind(function(first){return $_dq07eg2bjducwno6.lastPositionIn(fromCaption.dom()).map(function(last){return forward?from.isEqual(first)&&to.isEqual(last):from.isEqual(last)&&to.isEqual(first)})}).getOr(!0)},emptyCaretCaption=function(editor,elm){return emptyElement(editor,elm)},validateCaretCaption=function(rootElm,fromCaption,to){return getParentCaption(rootElm,$_5s4uzoyjducwngo.fromDom(to.getNode())).map(function(toCaption){return $_4qdq5m1djducwnie.eq(toCaption,fromCaption)===!1})},deleteCaretInsideCaption=function(editor,rootElm,forward,fromCaption,from){return $_dq07eg2bjducwno6.navigate(forward,editor.getBody(),from).bind(function(to){return isDeleteOfLastCharPos(fromCaption,forward,from,to)?emptyCaretCaption(editor,fromCaption):validateCaretCaption(rootElm,fromCaption,to)}).or(Option.some(!0))},deleteCaretCells=function(editor,forward,rootElm,startElm){var from=CaretPosition$1.fromRangeStart(editor.selection.getRng());return getParentCell(rootElm,startElm).bind(function(fromCell){return $_baf2ia35jducwnrx.isEmpty(fromCell)?emptyElement(editor,fromCell):deleteBetweenCells(editor,rootElm,forward,fromCell,from)})},deleteCaretCaption=function(editor,forward,rootElm,fromCaption){var from=CaretPosition$1.fromRangeStart(editor.selection.getRng());return $_baf2ia35jducwnrx.isEmpty(fromCaption)?emptyElement(editor,fromCaption):deleteCaretInsideCaption(editor,rootElm,forward,fromCaption,from)},deleteCaret=function(editor,forward,startElm){var rootElm=$_5s4uzoyjducwngo.fromDom(editor.getBody());return getParentCaption(rootElm,startElm).fold(function(){return deleteCaretCells(editor,forward,rootElm,startElm)},function(fromCaption){return deleteCaretCaption(editor,forward,rootElm,fromCaption)}).getOr(!1)},backspaceDelete$4=function(editor,forward){var startElm=$_5s4uzoyjducwngo.fromDom(editor.selection.getStart(!0));return editor.selection.isCollapsed()?deleteCaret(editor,forward,startElm):deleteRange$1(editor,startElm)},$_fo6mx3sjducwnvh={backspaceDelete:backspaceDelete$4},nativeCommand=function(editor,command){editor.getDoc().execCommand(command,!1,null)},deleteCommand=function(editor){$_52c8ph3bjducwnsq.backspaceDelete(editor,!1)||$_a4ivlq3fjducwntl.backspaceDelete(editor,!1)||$_d0w5iz2xjducwnqm.backspaceDelete(editor,!1)||$_fo6mx3sjducwnvh.backspaceDelete(editor)||$_3kdgsv3ajducwnsk.backspaceDelete(editor,!1)||(nativeCommand(editor,"Delete"),$_5jcxyf2zjducwnqv.paddEmptyBody(editor))},forwardDeleteCommand=function(editor){$_52c8ph3bjducwnsq.backspaceDelete(editor,!0)||$_a4ivlq3fjducwntl.backspaceDelete(editor,!0)||$_d0w5iz2xjducwnqm.backspaceDelete(editor,!0)||$_fo6mx3sjducwnvh.backspaceDelete(editor)||$_3kdgsv3ajducwnsk.backspaceDelete(editor,!0)||nativeCommand(editor,"ForwardDelete")},$_3jaaze2wjducwnqk={deleteCommand:deleteCommand,forwardDeleteCommand:forwardDeleteCommand},isEq$3=function(rng1,rng2){return rng1&&rng2&&rng1.startContainer===rng2.startContainer&&rng1.startOffset===rng2.startOffset&&rng1.endContainer===rng2.endContainer&&rng1.endOffset===rng2.endOffset},$_18bpcb3yjducwnzh={isEq:isEq$3},position=$_295afp18jducwni4.immutable("container","offset"),findParent=function(node,rootNode,predicate){for(;node&&node!==rootNode;){if(predicate(node))return node;node=node.parentNode}return null},hasParent=function(node,rootNode,predicate){return null!==findParent(node,rootNode,predicate)},hasParentWithName=function(node,rootNode,name){return hasParent(node,rootNode,function(node){return node.nodeName===name})},isTable$2=function(node){return node&&"TABLE"===node.nodeName},isTableCell$3=function(node){return node&&/^(TD|TH|CAPTION)$/.test(node.nodeName)},isCeFalseCaretContainer=function(node,rootNode){return isCaretContainer(node)&&hasParent(node,rootNode,$_gizh813jjducwnu6.isCaretNode)===!1},hasBrBeforeAfter=function(dom,node,left){for(var walker=new TreeWalker(node,dom.getParent(node.parentNode,dom.isBlock)||dom.getRoot());node=walker[left?"prev":"next"]();)if($_fj238m1qjducwnjm.isBr(node))return!0},isPrevNode=function(node,name){return node.previousSibling&&node.previousSibling.nodeName===name},hasContentEditableFalseParent=function(body,node){for(;node&&node!==body;){if($_fj238m1qjducwnjm.isContentEditableFalse(node))return!0;node=node.parentNode}return!1},findTextNodeRelative=function(dom,isAfterNode,collapsed,left,startNode){var walker,lastInlineElement,parentBlockContainer,node,body=dom.getRoot(),nonEmptyElementsMap=dom.schema.getNonEmptyElements();if(parentBlockContainer=dom.getParent(startNode.parentNode,dom.isBlock)||body,left&&$_fj238m1qjducwnjm.isBr(startNode)&&isAfterNode&&dom.isEmpty(parentBlockContainer))return Option.some(position(startNode.parentNode,dom.nodeIndex(startNode)));for(walker=new TreeWalker(startNode,parentBlockContainer);node=walker[left?"prev":"next"]();){if("false"===dom.getContentEditableParent(node)||isCeFalseCaretContainer(node,body))return Option.none();if($_fj238m1qjducwnjm.isText(node)&&node.nodeValue.length>0)return hasParentWithName(node,body,"A")===!1?Option.some(position(node,left?node.nodeValue.length:0)):Option.none();if(dom.isBlock(node)||nonEmptyElementsMap[node.nodeName.toLowerCase()])return Option.none();lastInlineElement=node}return collapsed&&lastInlineElement?Option.some(position(lastInlineElement,0)):Option.none()},normalizeEndPoint=function(dom,collapsed,start,rng){var container,offset,walker,node,nonEmptyElementsMap,directionLeft,isAfterNode,body=dom.getRoot(),normalized=!1;if(container=rng[(start?"start":"end")+"Container"],offset=rng[(start?"start":"end")+"Offset"],isAfterNode=$_fj238m1qjducwnjm.isElement(container)&&offset===container.childNodes.length,nonEmptyElementsMap=dom.schema.getNonEmptyElements(),directionLeft=start,isCaretContainer(container))return Option.none();if($_fj238m1qjducwnjm.isElement(container)&&offset>container.childNodes.length-1&&(directionLeft=!1),$_fj238m1qjducwnjm.isDocument(container)&&(container=body,offset=0),container===body){if(directionLeft&&(node=container.childNodes[offset>0?offset-1:0])){if(isCaretContainer(node))return Option.none();if(nonEmptyElementsMap[node.nodeName]||isTable$2(node))return Option.none()}if(container.hasChildNodes()){if(offset=Math.min(!directionLeft&&offset>0?offset-1:offset,container.childNodes.length-1),container=container.childNodes[offset],offset=$_fj238m1qjducwnjm.isText(container)&&isAfterNode?container.data.length:0,!collapsed&&container===body.lastChild&&isTable$2(container))return Option.none();if(hasContentEditableFalseParent(body,container)||isCaretContainer(container))return Option.none();if(container.hasChildNodes()&&isTable$2(container)===!1){node=container,walker=new TreeWalker(container,body);do{if($_fj238m1qjducwnjm.isContentEditableFalse(node)||isCaretContainer(node)){normalized=!1;break}if($_fj238m1qjducwnjm.isText(node)&&node.nodeValue.length>0){offset=directionLeft?0:node.nodeValue.length,container=node,normalized=!0;break}if(nonEmptyElementsMap[node.nodeName.toLowerCase()]&&!isTableCell$3(node)){offset=dom.nodeIndex(node),container=node.parentNode,"IMG"!==node.nodeName&&"PRE"!==node.nodeName||directionLeft||offset++,normalized=!0;break}}while(node=directionLeft?walker.next():walker.prev())}}}return collapsed&&($_fj238m1qjducwnjm.isText(container)&&0===offset&&findTextNodeRelative(dom,isAfterNode,collapsed,!0,container).each(function(pos){container=pos.container(),offset=pos.offset(),normalized=!0}),$_fj238m1qjducwnjm.isElement(container)&&(node=container.childNodes[offset],node||(node=container.childNodes[offset-1]),!node||!$_fj238m1qjducwnjm.isBr(node)||isPrevNode(node,"A")||hasBrBeforeAfter(dom,node,!1)||hasBrBeforeAfter(dom,node,!0)||findTextNodeRelative(dom,isAfterNode,collapsed,!0,node).each(function(pos){container=pos.container(),offset=pos.offset(),normalized=!0}))),directionLeft&&!collapsed&&$_fj238m1qjducwnjm.isText(container)&&offset===container.nodeValue.length&&findTextNodeRelative(dom,isAfterNode,collapsed,!1,container).each(function(pos){container=pos.container(),offset=pos.offset(),normalized=!0}),normalized?Option.some(position(container,offset)):Option.none()},normalize$1=function(dom,rng){var collapsed=rng.collapsed,normRng=rng.cloneRange();return normalizeEndPoint(dom,collapsed,!0,normRng).each(function(pos){normRng.setStart(pos.container(),pos.offset())}),collapsed||normalizeEndPoint(dom,collapsed,!1,normRng).each(function(pos){normRng.setEnd(pos.container(),pos.offset())}),collapsed&&normRng.collapse(!0),$_18bpcb3yjducwnzh.isEq(rng,normRng)?Option.none():Option.some(normRng)},$_altsby3xjducwnz5={normalize:normalize$1},hasRightSideContent=function(schema,container,parentBlock){for(var node,walker=new TreeWalker(container,parentBlock),nonEmptyElementsMap=schema.getNonEmptyElements();node=walker.next();)if(nonEmptyElementsMap[node.nodeName.toLowerCase()]||node.length>0)return!0},scrollToBr=function(dom,selection,brElm){var marker=dom.create("span",{},"&nbsp;");brElm.parentNode.insertBefore(marker,brElm),selection.scrollIntoView(marker),dom.remove(marker)},moveSelectionToBr=function(dom,selection,brElm,extraBr){var rng=dom.createRng();extraBr?(rng.setStartBefore(brElm),rng.setEndBefore(brElm)):(rng.setStartAfter(brElm),rng.setEndAfter(brElm)),selection.setRng(rng)},insertBrAtCaret=function(editor,evt){var brElm,extraBr,selection=editor.selection,dom=editor.dom,rng=selection.getRng();$_altsby3xjducwnz5.normalize(dom,rng).each(function(normRng){rng.setStart(normRng.startContainer,normRng.startOffset),rng.setEnd(normRng.endContainer,normRng.endOffset)});var offset=rng.startOffset,container=rng.startContainer;if(1===container.nodeType&&container.hasChildNodes()){var isAfterLastNodeInContainer=offset>container.childNodes.length-1;container=container.childNodes[Math.min(offset,container.childNodes.length-1)]||container,offset=isAfterLastNodeInContainer&&3===container.nodeType?container.nodeValue.length:0}var parentBlock=dom.getParent(container,dom.isBlock),containerBlock=parentBlock?dom.getParent(parentBlock.parentNode,dom.isBlock):null,containerBlockName=containerBlock?containerBlock.nodeName.toUpperCase():"",isControlKey=evt&&evt.ctrlKey;"LI"!==containerBlockName||isControlKey||(parentBlock=containerBlock),container&&3===container.nodeType&&offset>=container.nodeValue.length&&(hasRightSideContent(editor.schema,container,parentBlock)||(brElm=dom.create("br"),rng.insertNode(brElm),rng.setStartAfter(brElm),rng.setEndAfter(brElm),extraBr=!0)),brElm=dom.create("br"),rng.insertNode(brElm),scrollToBr(dom,selection,brElm),moveSelectionToBr(dom,selection,brElm,extraBr),editor.undoManager.add()},insertBrBefore=function(editor,inline){var br=$_5s4uzoyjducwngo.fromTag("br");$_ejmufn2ojducwnpy.before($_5s4uzoyjducwngo.fromDom(inline),br),editor.undoManager.add()},insertBrAfter=function(editor,inline){hasBrAfter(editor.getBody(),inline)||$_ejmufn2ojducwnpy.after($_5s4uzoyjducwngo.fromDom(inline),$_5s4uzoyjducwngo.fromTag("br"));var br=$_5s4uzoyjducwngo.fromTag("br");$_ejmufn2ojducwnpy.after($_5s4uzoyjducwngo.fromDom(inline),br),scrollToBr(editor.dom,editor.selection,br.dom()),moveSelectionToBr(editor.dom,editor.selection,br.dom(),!1),editor.undoManager.add()},isBeforeBr=function(pos){return $_fj238m1qjducwnjm.isBr(pos.getNode())},hasBrAfter=function(rootNode,startNode){return!!isBeforeBr(CaretPosition$1.after(startNode))||$_dq07eg2bjducwno6.nextPosition(rootNode,CaretPosition$1.after(startNode)).map(function(pos){return $_fj238m1qjducwnjm.isBr(pos.getNode())}).getOr(!1)},isAnchorLink=function(elm){return elm&&"A"===elm.nodeName&&"href"in elm},isInsideAnchor=function(location){return location.fold($_60qu7r6jducwn73.constant(!1),isAnchorLink,isAnchorLink,$_60qu7r6jducwn73.constant(!1))},readInlineAnchorLocation=function(editor){var isInlineTarget=$_60qu7r6jducwn73.curry($_4m240x32jducwnrf.isInlineTarget,editor),position=CaretPosition$1.fromRangeStart(editor.selection.getRng());return $_681q3b3ijducwnty.readLocation(isInlineTarget,editor.getBody(),position).filter(isInsideAnchor)},insertBrOutsideAnchor=function(editor,location){location.fold($_60qu7r6jducwn73.noop,$_60qu7r6jducwn73.curry(insertBrBefore,editor),$_60qu7r6jducwn73.curry(insertBrAfter,editor),$_60qu7r6jducwn73.noop)},insert=function(editor,evt){var anchorLocation=readInlineAnchorLocation(editor);anchorLocation.isSome()?anchorLocation.each($_60qu7r6jducwn73.curry(insertBrOutsideAnchor,editor)):insertBrAtCaret(editor,evt)},$_6wifbs3wjducwnw6={insert:insert},adt=$_elh5kq3djducwnt6.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),cata=function(subject,onBefore,onOn,onAfter){return subject.fold(onBefore,onOn,onAfter)},getStart=function(situ){return situ.fold($_60qu7r6jducwn73.identity,$_60qu7r6jducwn73.identity,$_60qu7r6jducwn73.identity)},$_acm40u41jducwnzz={before:adt.before,on:adt.on,after:adt.after,cata:cata,getStart:getStart},type$1=$_elh5kq3djducwnt6.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),range$1=$_295afp18jducwni4.immutable("start","soffset","finish","foffset"),exactFromRange=function(simRange){return type$1.exact(simRange.start(),simRange.soffset(),simRange.finish(),simRange.foffset())},getStart$1=function(selection){return selection.match({domRange:function(rng){return $_5s4uzoyjducwngo.fromDom(rng.startContainer)},relative:function(startSitu,finishSitu){return $_acm40u41jducwnzz.getStart(startSitu)},exact:function(start,soffset,finish,foffset){return start}})},getWin=function(selection){var start=getStart$1(selection);return $_f0qt4317jducwnhq.defaultView(start)},$_ckicvm40jducwnzr={domRange:type$1.domRange,relative:type$1.relative,exact:type$1.exact,exactFromRange:exactFromRange,range:range$1,getWin:getWin},browser$3=$_5hshlmmjducwnfr.detect().browser,clamp=function(offset,element){var max=$_47qy15zjducwngt.isText(element)?$_8l99zr2rjducwnq7.get(element).length:$_f0qt4317jducwnhq.children(element).length+1;return offset>max?max:offset<0?0:offset},normalizeRng=function(rng){return $_ckicvm40jducwnzr.range(rng.start(),clamp(rng.soffset(),rng.start()),rng.finish(),clamp(rng.foffset(),rng.finish()))},isOrContains=function(root,elm){return $_4qdq5m1djducwnie.contains(root,elm)||$_4qdq5m1djducwnie.eq(root,elm)},isRngInRoot=function(root){return function(rng){return isOrContains(root,rng.start())&&isOrContains(root,rng.finish())}},shouldStore=function(editor){return editor.inline===!0||browser$3.isIE()},nativeRangeToSelectionRange=function(r){return $_ckicvm40jducwnzr.range($_5s4uzoyjducwngo.fromDom(r.startContainer),r.startOffset,$_5s4uzoyjducwngo.fromDom(r.endContainer),r.endOffset)},readRange=function(win){var selection=win.getSelection();return(selection&&0!==selection.rangeCount?Option.from(selection.getRangeAt(0)):Option.none()).map(nativeRangeToSelectionRange)},getBookmark$2=function(root){var win=$_f0qt4317jducwnhq.defaultView(root);return readRange(win.dom()).filter(isRngInRoot(root))},validate=function(root,bookmark){return Option.from(bookmark).filter(isRngInRoot(root)).map(normalizeRng)},bookmarkToNativeRng=function(bookmark){var rng=document.createRange();return rng.setStart(bookmark.start().dom(),bookmark.soffset()),rng.setEnd(bookmark.finish().dom(),bookmark.foffset()),Option.some(rng)},store=function(editor){var newBookmark=shouldStore(editor)?getBookmark$2($_5s4uzoyjducwngo.fromDom(editor.getBody())):Option.none();editor.bookmark=newBookmark.isSome()?newBookmark:editor.bookmark},storeNative=function(editor,rng){var root=$_5s4uzoyjducwngo.fromDom(editor.getBody()),range=shouldStore(editor)?Option.from(rng):Option.none(),newBookmark=range.map(nativeRangeToSelectionRange).filter(isRngInRoot(root));editor.bookmark=newBookmark.isSome()?newBookmark:editor.bookmark},getRng=function(editor){return(editor.bookmark?editor.bookmark:Option.none()).bind($_60qu7r6jducwn73.curry(validate,$_5s4uzoyjducwngo.fromDom(editor.getBody()))).bind(bookmarkToNativeRng)},restore=function(editor){getRng(editor).each(function(rng){editor.selection.setRng(rng)})},$_exyelv3zjducwnzi={store:store,storeNative:storeNative,readRange:readRange,restore:restore,getRng:getRng,getBookmark:getBookmark$2,validate:validate},indentElement=function(dom,command,useMargin,value,unit,element){if("false"!==dom.getContentEditable(element)&&"LI"!==element.nodeName){var indentStyleName=useMargin?"margin":"padding";if(indentStyleName="TABLE"===element.nodeName?"margin":indentStyleName,indentStyleName+="rtl"===dom.getStyle(element,"direction",!0)?"Right":"Left","outdent"===command){var styleValue=Math.max(0,parseInt(element.style[indentStyleName]||0,10)-value);dom.setStyle(element,indentStyleName,styleValue?styleValue+unit:"")}else{var styleValue=parseInt(element.style[indentStyleName]||0,10)+value+unit;dom.setStyle(element,indentStyleName,styleValue)}}},handle=function(editor,command){var settings=editor.settings,dom=editor.dom,selection=editor.selection,formatter=editor.formatter,indentUnit=/[a-z%]+$/i.exec(settings.indentation)[0],indentValue=parseInt(settings.indentation,10),useMargin=editor.getParam("indent_use_margin",!1);editor.queryCommandState("InsertUnorderedList")||editor.queryCommandState("InsertOrderedList")||(settings.forced_root_block||dom.getParent(selection.getNode(),dom.isBlock)||formatter.apply("div"),$_2dw1bj4jducwn6g.each(selection.getSelectedBlocks(),function(element){return indentElement(dom,command,useMargin,indentValue,indentUnit,element)}))},each$9=$_8i2houjjducwnd2.each,extend$2=$_8i2houjjducwnd2.extend,map$2=$_8i2houjjducwnd2.map,inArray$2=$_8i2houjjducwnd2.inArray,explode$2=$_8i2houjjducwnd2.explode,TRUE=!0,FALSE=!1,nativeEvents=$_8i2houjjducwnd2.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," "),Dispatcher=function(settings){var scope,toggleEvent,self=this,bindings={},returnFalse=function(){return!1},returnTrue=function(){return!0};settings=settings||{},scope=settings.scope||self,toggleEvent=settings.toggleEvent||returnFalse;var fire=function(name,args){var handlers,i,l,callback;if(name=name.toLowerCase(),args=args||{},args.type=name,args.target||(args.target=scope),args.preventDefault||(args.preventDefault=function(){args.isDefaultPrevented=returnTrue},args.stopPropagation=function(){args.isPropagationStopped=returnTrue},args.stopImmediatePropagation=function(){args.isImmediatePropagationStopped=returnTrue},args.isDefaultPrevented=returnFalse,args.isPropagationStopped=returnFalse,args.isImmediatePropagationStopped=returnFalse),settings.beforeFire&&settings.beforeFire(args),handlers=bindings[name])for(i=0,l=handlers.length;i<l;i++){if(callback=handlers[i],callback.once&&off(name,callback.func),args.isImmediatePropagationStopped())return args.stopPropagation(),args;if(callback.func.call(scope,args)===!1)return args.preventDefault(),args}return args},on=function(name,callback,prepend,extra){var handlers,names,i;if(callback===!1&&(callback=returnFalse),callback)for(callback={func:callback},extra&&$_8i2houjjducwnd2.extend(callback,extra),names=name.toLowerCase().split(" "),i=names.length;i--;)name=names[i],handlers=bindings[name],handlers||(handlers=bindings[name]=[],toggleEvent(name,!0)),prepend?handlers.unshift(callback):handlers.push(callback);return self},off=function(name,callback){var i,handlers,bindingName,names,hi;if(name)for(names=name.toLowerCase().split(" "),i=names.length;i--;){if(name=names[i],handlers=bindings[name],!name){for(bindingName in bindings)toggleEvent(bindingName,!1),delete bindings[bindingName];return self}if(handlers){if(callback)for(hi=handlers.length;hi--;)handlers[hi].func===callback&&(handlers=handlers.slice(0,hi).concat(handlers.slice(hi+1)),bindings[name]=handlers);else handlers.length=0;handlers.length||(toggleEvent(name,!1),delete bindings[name])}}else{for(name in bindings)toggleEvent(name,!1);bindings={}}return self},once=function(name,callback,prepend){return on(name,callback,prepend,{once:!0})},has=function(name){return name=name.toLowerCase(),!(!bindings[name]||0===bindings[name].length)};self.fire=fire,self.on=on,self.off=off,self.once=once,self.has=has};Dispatcher.isNative=function(name){return!!nativeEvents[name.toLowerCase()]};var customEventRootDelegates,getEventDispatcher=function(obj){return obj._eventDispatcher||(obj._eventDispatcher=new Dispatcher({scope:obj,toggleEvent:function(name,state){Dispatcher.isNative(name)&&obj.toggleNativeEvent&&obj.toggleNativeEvent(name,state)}})),obj._eventDispatcher},$_5ie1x944jducwo0j={fire:function(name,args,bubble){var self=this;if(self.removed&&"remove"!==name)return args;if(args=getEventDispatcher(self).fire(name,args,bubble),bubble!==!1&&self.parent)for(var parent_1=self.parent();parent_1&&!args.isPropagationStopped();)parent_1.fire(name,args,!1),parent_1=parent_1.parent();return args},on:function(name,callback,prepend){return getEventDispatcher(this).on(name,callback,prepend)},off:function(name,callback){return getEventDispatcher(this).off(name,callback)},once:function(name,callback){return getEventDispatcher(this).once(name,callback)},hasEventListeners:function(name){return getEventDispatcher(this).has(name)}},DOM$1=DOMUtils.DOM,getEventTarget=function(editor,eventName){return"selectionchange"===eventName?editor.getDoc():!editor.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(eventName)?editor.getDoc().documentElement:editor.settings.event_root?(editor.eventRoot||(editor.eventRoot=DOM$1.select(editor.settings.event_root)[0]),editor.eventRoot):editor.getBody()},bindEventDelegate=function(editor,eventName){var eventRootElm,delegate,isListening=function(editor){return!editor.hidden&&!editor.readonly};if(editor.delegates||(editor.delegates={}),!editor.delegates[eventName]&&!editor.removed)if(eventRootElm=getEventTarget(editor,eventName),editor.settings.event_root){if(customEventRootDelegates||(customEventRootDelegates={},editor.editorManager.on("removeEditor",function(){var name;if(!editor.editorManager.activeEditor&&customEventRootDelegates){for(name in customEventRootDelegates)editor.dom.unbind(getEventTarget(editor,name));customEventRootDelegates=null}})),customEventRootDelegates[eventName])return;delegate=function(e){for(var target=e.target,editors=editor.editorManager.get(),i=editors.length;i--;){var body=editors[i].getBody();(body===target||DOM$1.isChildOf(target,body))&&isListening(editors[i])&&editors[i].fire(eventName,e)}},customEventRootDelegates[eventName]=delegate,DOM$1.bind(eventRootElm,eventName,delegate)}else delegate=function(e){isListening(editor)&&editor.fire(eventName,e)},DOM$1.bind(eventRootElm,eventName,delegate),editor.delegates[eventName]=delegate},EditorObservable={bindPendingEventDelegates:function(){var self=this;$_8i2houjjducwnd2.each(self._pendingNativeEvents,function(name){bindEventDelegate(self,name)})},toggleNativeEvent:function(name,state){var self=this;"focus"!==name&&"blur"!==name&&(state?self.initialized?bindEventDelegate(self,name):self._pendingNativeEvents?self._pendingNativeEvents.push(name):self._pendingNativeEvents=[name]:self.initialized&&(self.dom.unbind(getEventTarget(self,name),name,self.delegates[name]),delete self.delegates[name]))},unbindAllNativeEvents:function(){var name,self=this,body=self.getBody(),dom=self.dom;if(self.delegates){for(name in self.delegates)self.dom.unbind(getEventTarget(self,name),name,self.delegates[name]);delete self.delegates}!self.inline&&body&&dom&&(body.onload=null,dom.unbind(self.getWin()),dom.unbind(self.getDoc())),dom&&(dom.unbind(body),dom.unbind(self.getContainer()))}};EditorObservable=$_8i2houjjducwnd2.extend({},$_5ie1x944jducwo0j,EditorObservable);var VDirection,EditorObservable$1=EditorObservable,setEditorCommandState=function(editor,cmd,state){try{editor.getDoc().execCommand(cmd,!1,state)}catch(ex){}},clickBlocker=function(editor){var target,handler;return target=editor.getBody(),handler=function(e){editor.dom.getParents(e.target,"a").length>0&&e.preventDefault()},editor.dom.bind(target,"click",handler),{unbind:function(){editor.dom.unbind(target,"click",handler)}}},toggleReadOnly=function(editor,state){editor._clickBlocker&&(editor._clickBlocker.unbind(),editor._clickBlocker=null),state?(editor._clickBlocker=clickBlocker(editor),editor.selection.controlSelection.hideResizeRect(),editor.readonly=!0,editor.getBody().contentEditable=!1):(editor.readonly=!1,editor.getBody().contentEditable=!0,setEditorCommandState(editor,"StyleWithCSS",!1),setEditorCommandState(editor,"enableInlineTableEditing",!1),setEditorCommandState(editor,"enableObjectResizing",!1),editor.focus(),editor.nodeChanged())},setMode=function(editor,mode){var currentMode=editor.readonly?"readonly":"design";mode!==currentMode&&(editor.initialized?toggleReadOnly(editor,"readonly"===mode):editor.on("init",function(){toggleReadOnly(editor,"readonly"===mode)}),editor.fire("SwitchMode",{mode:mode}))},$_awagyr46jducwo0r={setMode:setMode},each$10=$_8i2houjjducwnd2.each,explode$3=$_8i2houjjducwnd2.explode,keyCodeLookup={f9:120,f10:121,f11:122},modifierNames=$_8i2houjjducwnd2.makeMap("alt,ctrl,shift,meta,access"),any$1=function(predicate){return $_3et3di30jducwnr0.first(predicate).isSome()},ancestor$3=function(scope,predicate,isRoot){return $_3et3di30jducwnr0.ancestor(scope,predicate,isRoot).isSome()},closest$3=function(scope,predicate,isRoot){return $_3et3di30jducwnr0.closest(scope,predicate,isRoot).isSome()},sibling$4=function(scope,predicate){return $_3et3di30jducwnr0.sibling(scope,predicate).isSome()},child$4=function(scope,predicate){return $_3et3di30jducwnr0.child(scope,predicate).isSome()},descendant$3=function(scope,predicate){return $_3et3di30jducwnr0.descendant(scope,predicate).isSome()},$_g5pgou4ajducwo19={any:any$1,ancestor:ancestor$3,closest:closest$3,sibling:sibling$4,child:child$4,descendant:descendant$3},focus=function(element){element.dom().focus()},blur=function(element){element.dom().blur()},hasFocus$1=function(element){var doc=$_f0qt4317jducwnhq.owner(element).dom();return element.dom()===doc.activeElement},active=function(_doc){var doc=void 0!==_doc?_doc.dom():document;return Option.from(doc.activeElement).map($_5s4uzoyjducwngo.fromDom)},focusInside=function(element){var doc=$_f0qt4317jducwnhq.owner(element);active(doc).filter(function(a){return $_g5pgou4ajducwo19.closest(a,$_60qu7r6jducwn73.curry($_4qdq5m1djducwnie.eq,element))}).fold(function(){focus(element)},$_60qu7r6jducwn73.noop)},search=function(element){return active($_f0qt4317jducwnhq.owner(element)).filter(function(e){return element.dom().contains(e.dom())})},$_br1qde49jducwo13={hasFocus:hasFocus$1,focus:focus,blur:blur,active:active,search:search,focusInside:focusInside},getContentEditableHost=function(editor,node){return editor.dom.getParent(node,function(node){return"true"===editor.dom.getContentEditable(node)})},getCollapsedNode=function(rng){return rng.collapsed?Option.from(getNode(rng.startContainer,rng.startOffset)).map($_5s4uzoyjducwngo.fromDom):Option.none()},getFocusInElement=function(root,rng){return getCollapsedNode(rng).bind(function(node){return isTableSection(node)?Option.some(node):$_4qdq5m1djducwnie.contains(root,node)===!1?Option.some(root):Option.none()})},normalizeSelection=function(editor,rng){getFocusInElement($_5s4uzoyjducwngo.fromDom(editor.getBody()),rng).bind(function(elm){return $_dq07eg2bjducwno6.firstPositionIn(elm.dom())}).fold(function(){return editor.selection.normalize()},function(caretPos){return editor.selection.setRng(caretPos.toRange())})},focusBody=function(body){if(body.setActive)try{body.setActive()}catch(ex){body.focus()}else body.focus()},hasElementFocus=function(elm){
return $_br1qde49jducwo13.hasFocus(elm)||$_br1qde49jducwo13.search(elm).isSome()},hasIframeFocus=function(editor){return editor.iframeElement&&$_br1qde49jducwo13.hasFocus($_5s4uzoyjducwngo.fromDom(editor.iframeElement))},hasInlineFocus=function(editor){var rawBody=editor.getBody();return rawBody&&hasElementFocus($_5s4uzoyjducwngo.fromDom(rawBody))},hasFocus$2=function(editor){return editor.inline?hasInlineFocus(editor):hasIframeFocus(editor)},focusEditor=function(editor){var contentEditableHost,selection=editor.selection,contentEditable=editor.settings.content_editable,body=editor.getBody(),rng=selection.getRng();if(editor.quirks.refreshContentEditable(),contentEditableHost=getContentEditableHost(editor,selection.getNode()),editor.$.contains(body,contentEditableHost))return focusBody(contentEditableHost),normalizeSelection(editor,rng),void activateEditor(editor);void 0!==editor.bookmark&&hasFocus$2(editor)===!1&&$_exyelv3zjducwnzi.getRng(editor).each(function(bookmarkRng){editor.selection.setRng(bookmarkRng),rng=bookmarkRng}),contentEditable||($_cum1kc9jducwn99.opera||focusBody(body),editor.getWin().focus()),($_cum1kc9jducwn99.gecko||contentEditable)&&(focusBody(body),normalizeSelection(editor,rng)),activateEditor(editor)},activateEditor=function(editor){editor.editorManager.setActive(editor)},focus$1=function(editor,skipFocus){editor.removed||(skipFocus?activateEditor(editor):focusEditor(editor))},$_egbtag48jducwo0y={focus:focus$1,hasFocus:hasFocus$2},getProp=function(propName,elm){return elm.dom()[propName]},getComputedSizeProp=function(propName,elm){return parseInt($_6dooji11jducwngx.get(elm,propName),10)},getClientWidth=$_60qu7r6jducwn73.curry(getProp,"clientWidth"),getClientHeight=$_60qu7r6jducwn73.curry(getProp,"clientHeight"),getMarginTop=$_60qu7r6jducwn73.curry(getComputedSizeProp,"margin-top"),getMarginLeft=$_60qu7r6jducwn73.curry(getComputedSizeProp,"margin-left"),getBoundingClientRect$1=function(elm){return elm.dom().getBoundingClientRect()},isInsideElementContentArea=function(bodyElm,clientX,clientY){var clientWidth=getClientWidth(bodyElm),clientHeight=getClientHeight(bodyElm);return clientX>=0&&clientY>=0&&clientX<=clientWidth&&clientY<=clientHeight},transpose=function(inline,elm,clientX,clientY){var clientRect=getBoundingClientRect$1(elm);return{x:clientX-(inline?clientRect.left+elm.dom().clientLeft+getMarginLeft(elm):0),y:clientY-(inline?clientRect.top+elm.dom().clientTop+getMarginTop(elm):0)}},isXYInContentArea=function(editor,clientX,clientY){var bodyElm=$_5s4uzoyjducwngo.fromDom(editor.getBody()),targetElm=editor.inline?bodyElm:$_f0qt4317jducwnhq.documentElement(bodyElm),transposedPoint=transpose(editor.inline,targetElm,clientX,clientY);return isInsideElementContentArea(targetElm,transposedPoint.x,transposedPoint.y)},fromDomSafe=function(node){return Option.from(node).map($_5s4uzoyjducwngo.fromDom)},isEditorAttachedToDom=function(editor){var rawContainer=editor.inline?editor.getBody():editor.getContentAreaContainer();return fromDomSafe(rawContainer).map(function(container){return $_4qdq5m1djducwnie.contains($_f0qt4317jducwnhq.owner(container),container)}).getOr(!1)},$_ahd3ne4djducwo1z={isXYInContentArea:isXYInContentArea,isEditorAttachedToDom:isEditorAttachedToDom},PluginManager=AddOnManager.PluginManager,resolvePluginName=function(targetUrl,suffix){for(var name_1 in PluginManager.urls){if(PluginManager.urls[name_1]+"/plugin"+suffix+".js"===targetUrl)return name_1}return null},pluginUrlToMessage=function(editor,url){var plugin=resolvePluginName(url,editor.suffix);return plugin?"Failed to load plugin: "+plugin+" from url "+url:"Failed to load plugin url: "+url},displayNotification=function(editor,message){editor.notificationManager.open({type:"error",text:message})},displayError=function(editor,message){editor._skinLoaded?displayNotification(editor,message):editor.on("SkinLoaded",function(){displayNotification(editor,message)})},uploadError=function(editor,message){displayError(editor,"Failed to upload image: "+message)},pluginLoadError=function(editor,url){displayError(editor,pluginUrlToMessage(editor,url))},initError=function(message){for(var x=[],_i=1;_i<arguments.length;_i++)x[_i-1]=arguments[_i];var console=window.console;console&&(console.error?console.error.apply(console,arguments):console.log.apply(console,arguments))},$_9erk7k4hjducwo2e={pluginLoadError:pluginLoadError,uploadError:uploadError,displayError:displayError,initError:initError},PluginManager$1=AddOnManager.PluginManager,ThemeManager=AddOnManager.ThemeManager,requestAnimationFrame$1=function(callback){$_850zr7bjducwn9g.getOrDie("requestAnimationFrame")(callback)},atob=function(base64){return $_850zr7bjducwn9g.getOrDie("atob")(base64)},$_ap55c04ujducwo3z={atob:atob,requestAnimationFrame:requestAnimationFrame$1},blobUriToBlob=function(url){return new promiseObj(function(resolve,reject){var rejectWithError=function(){reject("Cannot convert "+url+" to Blob. Resource might not exist or is inaccessible.")};try{var xhr=new XMLHttpRequest;xhr.open("GET",url,!0),xhr.responseType="blob",xhr.onload=function(){200===this.status?resolve(this.response):rejectWithError()},xhr.onerror=rejectWithError,xhr.send()}catch(ex){rejectWithError()}})},parseDataUri=function(uri){var type,matches;return uri=decodeURIComponent(uri).split(","),matches=/data:([^;]+)/.exec(uri[0]),matches&&(type=matches[1]),{type:type,data:uri[1]}},dataUriToBlob=function(uri){return new promiseObj(function(resolve){var str,arr,i;uri=parseDataUri(uri);try{str=$_ap55c04ujducwo3z.atob(uri.data)}catch(e){return void resolve(new Blob([]))}for(arr=new Uint8Array(str.length),i=0;i<arr.length;i++)arr[i]=str.charCodeAt(i);resolve(new Blob([arr],{type:uri.type}))})},uriToBlob=function(url){return 0===url.indexOf("blob:")?blobUriToBlob(url):0===url.indexOf("data:")?dataUriToBlob(url):null},blobToDataUri=function(blob){return new promiseObj(function(resolve){var reader=new FileReader;reader.onloadend=function(){resolve(reader.result)},reader.readAsDataURL(blob)})},$_1ywx9h4qjducwo3p={uriToBlob:uriToBlob,blobToDataUri:blobToDataUri,parseDataUri:parseDataUri},count=0,uniqueId=function(prefix){return(prefix||"blobid")+count++},imageToBlobInfo=function(blobCache,img,resolve,reject){var base64,blobInfo;if(0===img.src.indexOf("blob:"))return blobInfo=blobCache.getByUri(img.src),void(blobInfo?resolve({image:img,blobInfo:blobInfo}):$_1ywx9h4qjducwo3p.uriToBlob(img.src).then(function(blob){$_1ywx9h4qjducwo3p.blobToDataUri(blob).then(function(dataUri){base64=$_1ywx9h4qjducwo3p.parseDataUri(dataUri).data,blobInfo=blobCache.create(uniqueId(),blob,base64),blobCache.add(blobInfo),resolve({image:img,blobInfo:blobInfo})})},function(err){reject(err)}));base64=$_1ywx9h4qjducwo3p.parseDataUri(img.src).data,blobInfo=blobCache.findFirst(function(cachedBlobInfo){return cachedBlobInfo.base64()===base64}),blobInfo?resolve({image:img,blobInfo:blobInfo}):$_1ywx9h4qjducwo3p.uriToBlob(img.src).then(function(blob){blobInfo=blobCache.create(uniqueId(),blob,base64),blobCache.add(blobInfo),resolve({image:img,blobInfo:blobInfo})},function(err){reject(err)})},getAllImages=function(elm){return elm?elm.getElementsByTagName("img"):[]},count$1=0,seed=function(){var rnd=function(){return Math.round(4294967295*Math.random()).toString(36)};return"s"+(new Date).getTime().toString(36)+rnd()+rnd()+rnd()},uuid=function(prefix){return prefix+count$1+++seed()},$_48t1mg4wjducwo4b={uuid:uuid},isBlockElement=function(blockElements,node){return blockElements.hasOwnProperty(node.nodeName)},isValidTarget=function(blockElements,node){return!!$_fj238m1qjducwnjm.isText(node)||!!$_fj238m1qjducwnjm.isElement(node)&&(!isBlockElement(blockElements,node)&&!$_dcl0u12jjducwnp0.isBookmarkNode(node))},hasBlockParent=function(blockElements,root,node){return $_2dw1bj4jducwn6g.exists($_b22jto39jducwnsg.parents($_5s4uzoyjducwngo.fromDom(node),$_5s4uzoyjducwngo.fromDom(root)),function(elm){return isBlockElement(blockElements,elm.dom())})},shouldRemoveTextNode=function(blockElements,node){if($_fj238m1qjducwnjm.isText(node)){if(0===node.nodeValue.length)return!0;if(/^\s+$/.test(node.nodeValue)&&(!node.nextSibling||isBlockElement(blockElements,node.nextSibling)))return!0}return!1},addRootBlocks=function(editor){var rng,startContainer,startOffset,endContainer,endOffset,rootBlockNode,tempNode,wrapped,restoreSelection,rootNodeName,forcedRootBlock,settings=editor.settings,dom=editor.dom,selection=editor.selection,schema=editor.schema,blockElements=schema.getBlockElements(),node=selection.getStart(),rootNode=editor.getBody();if(forcedRootBlock=settings.forced_root_block,node&&$_fj238m1qjducwnjm.isElement(node)&&forcedRootBlock&&(rootNodeName=rootNode.nodeName.toLowerCase(),schema.isValidChild(rootNodeName,forcedRootBlock.toLowerCase())&&!hasBlockParent(blockElements,rootNode,node))){for(rng=selection.getRng(),startContainer=rng.startContainer,startOffset=rng.startOffset,endContainer=rng.endContainer,endOffset=rng.endOffset,restoreSelection=$_egbtag48jducwo0y.hasFocus(editor),node=rootNode.firstChild;node;)if(isValidTarget(blockElements,node)){if(shouldRemoveTextNode(blockElements,node)){tempNode=node,node=node.nextSibling,dom.remove(tempNode);continue}rootBlockNode||(rootBlockNode=dom.create(forcedRootBlock,editor.settings.forced_root_block_attrs),node.parentNode.insertBefore(rootBlockNode,node),wrapped=!0),tempNode=node,node=node.nextSibling,rootBlockNode.appendChild(tempNode)}else rootBlockNode=null,node=node.nextSibling;wrapped&&restoreSelection&&(rng.setStart(startContainer,startOffset),rng.setEnd(endContainer,endOffset),selection.setRng(rng),editor.nodeChanged())}},setup$1=function(editor){editor.settings.forced_root_block&&editor.on("NodeChange",$_60qu7r6jducwn73.curry(addRootBlocks,editor))},$_eu4mtv4yjducwo4f={setup:setup$1},getAbsolutePosition=function(elm){var doc,docElem,win,clientRect;return clientRect=elm.getBoundingClientRect(),doc=elm.ownerDocument,docElem=doc.documentElement,win=doc.defaultView,{top:clientRect.top+win.pageYOffset-docElem.clientTop,left:clientRect.left+win.pageXOffset-docElem.clientLeft}},getBodyPosition=function(editor){return editor.inline?getAbsolutePosition(editor.getBody()):{left:0,top:0}},getScrollPosition=function(editor){var body=editor.getBody();return editor.inline?{left:body.scrollLeft,top:body.scrollTop}:{left:0,top:0}},getBodyScroll=function(editor){var body=editor.getBody(),docElm=editor.getDoc().documentElement,inlineScroll={left:body.scrollLeft,top:body.scrollTop},iframeScroll={left:body.scrollLeft||docElm.scrollLeft,top:body.scrollTop||docElm.scrollTop};return editor.inline?inlineScroll:iframeScroll},getMousePosition=function(editor,event){if(event.target.ownerDocument!==editor.getDoc()){var iframePosition=getAbsolutePosition(editor.getContentAreaContainer()),scrollPosition=getBodyScroll(editor);return{left:event.pageX-iframePosition.left+scrollPosition.left,top:event.pageY-iframePosition.top+scrollPosition.top}}return{left:event.pageX,top:event.pageY}},calculatePosition=function(bodyPosition,scrollPosition,mousePosition){return{pageX:mousePosition.left-bodyPosition.left+scrollPosition.left,pageY:mousePosition.top-bodyPosition.top+scrollPosition.top}},calc=function(editor,event){return calculatePosition(getBodyPosition(editor),getScrollPosition(editor),getMousePosition(editor,event))},$_bi2rbv52jducwo5n={calc:calc},isContentEditableFalse$7=$_fj238m1qjducwnjm.isContentEditableFalse,isContentEditableTrue$4=$_fj238m1qjducwnjm.isContentEditableTrue,isDraggable=function(rootElm,elm){return isContentEditableFalse$7(elm)&&elm!==rootElm},isValidDropTarget=function(editor,targetElement,dragElement){return targetElement!==dragElement&&!editor.dom.isChildOf(targetElement,dragElement)&&!isContentEditableFalse$7(targetElement)},cloneElement=function(elm){var cloneElm=elm.cloneNode(!0);return cloneElm.removeAttribute("data-mce-selected"),cloneElm},createGhost=function(editor,elm,width,height){var clonedElm=elm.cloneNode(!0);editor.dom.setStyles(clonedElm,{width:width,height:height}),editor.dom.setAttrib(clonedElm,"data-mce-selected",null);var ghostElm=editor.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return editor.dom.setStyles(ghostElm,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:width,height:height}),editor.dom.setStyles(clonedElm,{margin:0,boxSizing:"border-box"}),ghostElm.appendChild(clonedElm),ghostElm},appendGhostToBody=function(ghostElm,bodyElm){ghostElm.parentNode!==bodyElm&&bodyElm.appendChild(ghostElm)},moveGhost=function(ghostElm,position,width,height,maxX,maxY){var overflowX=0,overflowY=0;ghostElm.style.left=position.pageX+"px",ghostElm.style.top=position.pageY+"px",position.pageX+width>maxX&&(overflowX=position.pageX+width-maxX),position.pageY+height>maxY&&(overflowY=position.pageY+height-maxY),ghostElm.style.width=width-overflowX+"px",ghostElm.style.height=height-overflowY+"px"},removeElement=function(elm){elm&&elm.parentNode&&elm.parentNode.removeChild(elm)},isLeftMouseButtonPressed=function(e){return 0===e.button},hasDraggableElement=function(state){return state.element},applyRelPos=function(state,position){return{pageX:position.pageX-state.relX,pageY:position.pageY+5}},start$1=function(state,editor){return function(e){if(isLeftMouseButtonPressed(e)){var ceElm=$_e6e6g1kjducwnfd.find(editor.dom.getParents(e.target),$_6183wb25jducwnn2.or(isContentEditableFalse$7,isContentEditableTrue$4));if(isDraggable(editor.getBody(),ceElm)){var elmPos=editor.dom.getPos(ceElm),bodyElm=editor.getBody(),docElm=editor.getDoc().documentElement;state.element=ceElm,state.screenX=e.screenX,state.screenY=e.screenY,state.maxX=(editor.inline?bodyElm.scrollWidth:docElm.offsetWidth)-2,state.maxY=(editor.inline?bodyElm.scrollHeight:docElm.offsetHeight)-2,state.relX=e.pageX-elmPos.x,state.relY=e.pageY-elmPos.y,state.width=ceElm.offsetWidth,state.height=ceElm.offsetHeight,state.ghost=createGhost(editor,ceElm,state.width,state.height)}}}},move$1=function(state,editor){var throttledPlaceCaretAt=$_83mf8ygjducwnbc.throttle(function(clientX,clientY){editor._selectionOverrides.hideFakeCaret(),editor.selection.placeCaretAt(clientX,clientY)},0);return function(e){var movement=Math.max(Math.abs(e.screenX-state.screenX),Math.abs(e.screenY-state.screenY));if(hasDraggableElement(state)&&!state.dragging&&movement>10){if(editor.fire("dragstart",{target:state.element}).isDefaultPrevented())return;state.dragging=!0,editor.focus()}if(state.dragging){var targetPos=applyRelPos(state,$_bi2rbv52jducwo5n.calc(editor,e));appendGhostToBody(state.ghost,editor.getBody()),moveGhost(state.ghost,targetPos,state.width,state.height,state.maxX,state.maxY),throttledPlaceCaretAt(e.clientX,e.clientY)}}},getRawTarget=function(selection){var rng=selection.getSel().getRangeAt(0),startContainer=rng.startContainer;return 3===startContainer.nodeType?startContainer.parentNode:startContainer},drop=function(state,editor){return function(e){if(state.dragging&&isValidDropTarget(editor,getRawTarget(editor.selection),state.element)){var targetClone_1=cloneElement(state.element),args=editor.fire("drop",{targetClone:targetClone_1,clientX:e.clientX,clientY:e.clientY});args.isDefaultPrevented()||(targetClone_1=args.targetClone,editor.undoManager.transact(function(){removeElement(state.element),editor.insertContent(editor.dom.getOuterHTML(targetClone_1)),editor._selectionOverrides.hideFakeCaret()}))}removeDragState(state)}},stop=function(state,editor){return function(){removeDragState(state),state.dragging&&editor.fire("dragend")}},removeDragState=function(state){state.dragging=!1,state.element=null,removeElement(state.ghost)},bindFakeDragEvents=function(editor){var pageDom,dragStartHandler,dragHandler,dropHandler,dragEndHandler,rootDocument,state={};pageDom=DOMUtils.DOM,rootDocument=document,dragStartHandler=start$1(state,editor),dragHandler=move$1(state,editor),dropHandler=drop(state,editor),dragEndHandler=stop(state,editor),editor.on("mousedown",dragStartHandler),editor.on("mousemove",dragHandler),editor.on("mouseup",dropHandler),pageDom.bind(rootDocument,"mousemove",dragHandler),pageDom.bind(rootDocument,"mouseup",dragEndHandler),editor.on("remove",function(){pageDom.unbind(rootDocument,"mousemove",dragHandler),pageDom.unbind(rootDocument,"mouseup",dragEndHandler)})},blockIeDrop=function(editor){editor.on("drop",function(e){var realTarget=void 0!==e.clientX?editor.getDoc().elementFromPoint(e.clientX,e.clientY):null;(isContentEditableFalse$7(realTarget)||isContentEditableFalse$7(editor.dom.getContentEditableParent(realTarget)))&&e.preventDefault()})},init=function(editor){bindFakeDragEvents(editor),blockIeDrop(editor)},$_56sftn51jducwo5f={init:init},getNodeClientRects=function(node){var toArrayWithNode=function(clientRects){return $_e6e6g1kjducwnfd.map(clientRects,function(clientRect){return clientRect=clone$1(clientRect),clientRect.node=node,clientRect})};if($_fj238m1qjducwnjm.isElement(node))return toArrayWithNode(node.getClientRects());if($_fj238m1qjducwnjm.isText(node)){var rng=node.ownerDocument.createRange();return rng.setStart(node,0),rng.setEnd(node,node.data.length),toArrayWithNode(rng.getClientRects())}},getClientRects=function(node){return $_e6e6g1kjducwnfd.reduce(node,function(result,node){return result.concat(getNodeClientRects(node))},[])};!function(VDirection){VDirection[VDirection.Up=-1]="Up",VDirection[VDirection.Down=1]="Down"}(VDirection||(VDirection={}));var findUntil=function(direction,root,predicateFn,node){for(;node=findNode(node,direction,isEditableCaretCandidate,root);)if(predicateFn(node))return},walkUntil=function(direction,isAboveFn,isBeflowFn,root,predicateFn,caretPosition){var node,targetClientRect,line=0,result=[],add=function(node){var i,clientRect,clientRects;for(clientRects=getClientRects([node]),direction===-1&&(clientRects=clientRects.reverse()),i=0;i<clientRects.length;i++)if(clientRect=clientRects[i],!isBeflowFn(clientRect,targetClientRect)){if(result.length>0&&isAboveFn(clientRect,$_e6e6g1kjducwnfd.last(result))&&line++,clientRect.line=line,predicateFn(clientRect))return!0;result.push(clientRect)}};return(targetClientRect=$_e6e6g1kjducwnfd.last(caretPosition.getClientRects()))?(node=caretPosition.getNode(),add(node),findUntil(direction,root,add,node),result):result},aboveLineNumber=function(lineNumber,clientRect){return clientRect.line>lineNumber},isLineNumber=function(lineNumber,clientRect){return clientRect.line===lineNumber},upUntil=$_60qu7r6jducwn73.curry(walkUntil,VDirection.Up,isAbove,isBelow),downUntil=$_60qu7r6jducwn73.curry(walkUntil,VDirection.Down,isBelow,isAbove),positionsUntil=function(direction,root,predicateFn,node){var walkFn,isBelowFn,isAboveFn,caretPosition,clientRect,targetClientRect,caretWalker=CaretWalker(root),result=[],line=0,getClientRect=function(caretPosition){return $_e6e6g1kjducwnfd.last(caretPosition.getClientRects())};1===direction?(walkFn=caretWalker.next,isBelowFn=isBelow,isAboveFn=isAbove,caretPosition=CaretPosition$1.after(node)):(walkFn=caretWalker.prev,isBelowFn=isAbove,isAboveFn=isBelow,caretPosition=CaretPosition$1.before(node)),targetClientRect=getClientRect(caretPosition);do{if(caretPosition.isVisible()&&(clientRect=getClientRect(caretPosition),!isAboveFn(clientRect,targetClientRect))){if(result.length>0&&isBelowFn(clientRect,$_e6e6g1kjducwnfd.last(result))&&line++,clientRect=clone$1(clientRect),clientRect.position=caretPosition,clientRect.line=line,predicateFn(clientRect))return result;result.push(clientRect)}}while(caretPosition=walkFn(caretPosition));return result},isAboveLine=function(lineNumber){return function(clientRect){return aboveLineNumber(lineNumber,clientRect)}},isLine=function(lineNumber){return function(clientRect){return isLineNumber(lineNumber,clientRect)}},isContentEditableFalse$8=$_fj238m1qjducwnjm.isContentEditableFalse,findNode$1=findNode,distanceToRectLeft=function(clientRect,clientX){return Math.abs(clientRect.left-clientX)},distanceToRectRight=function(clientRect,clientX){return Math.abs(clientRect.right-clientX)},isInside=function(clientX,clientRect){return clientX>=clientRect.left&&clientX<=clientRect.right},findClosestClientRect=function(clientRects,clientX){return $_e6e6g1kjducwnfd.reduce(clientRects,function(oldClientRect,clientRect){var oldDistance,newDistance;return oldDistance=Math.min(distanceToRectLeft(oldClientRect,clientX),distanceToRectRight(oldClientRect,clientX)),newDistance=Math.min(distanceToRectLeft(clientRect,clientX),distanceToRectRight(clientRect,clientX)),isInside(clientX,clientRect)?clientRect:isInside(clientX,oldClientRect)?oldClientRect:newDistance===oldDistance&&isContentEditableFalse$8(clientRect.node)?clientRect:newDistance<oldDistance?clientRect:oldClientRect})},walkUntil$1=function(direction,root,predicateFn,node){for(;node=findNode$1(node,direction,isEditableCaretCandidate,root);)if(predicateFn(node))return},findLineNodeRects=function(root,targetNodeRect){var clientRects=[],collect=function(checkPosFn,node){var lineRects;return lineRects=$_e6e6g1kjducwnfd.filter(getClientRects([node]),function(clientRect){return!checkPosFn(clientRect,targetNodeRect)}),clientRects=clientRects.concat(lineRects),0===lineRects.length};return clientRects.push(targetNodeRect),walkUntil$1(VDirection.Up,root,$_60qu7r6jducwn73.curry(collect,isAbove),targetNodeRect.node),walkUntil$1(VDirection.Down,root,$_60qu7r6jducwn73.curry(collect,isBelow),targetNodeRect.node),clientRects},getFakeCaretTargets=function(root){return $_e6e6g1kjducwnfd.filter($_e6e6g1kjducwnfd.toArray(root.getElementsByTagName("*")),isFakeCaretTarget)},caretInfo=function(clientRect,clientX){return{node:clientRect.node,before:distanceToRectLeft(clientRect,clientX)<distanceToRectRight(clientRect,clientX)}},closestCaret=function(root,clientX,clientY){var closestNodeRect,contentEditableFalseNodeRects=getClientRects(getFakeCaretTargets(root)),targetNodeRects=$_e6e6g1kjducwnfd.filter(contentEditableFalseNodeRects,function(rect){return clientY>=rect.top&&clientY<=rect.bottom});return closestNodeRect=findClosestClientRect(targetNodeRects,clientX),closestNodeRect&&(closestNodeRect=findClosestClientRect(findLineNodeRects(root,closestNodeRect),clientX))&&isFakeCaretTarget(closestNodeRect.node)?caretInfo(closestNodeRect,clientX):null},isXYWithinRange=function(clientX,clientY,range){return!range.collapsed&&$_2dw1bj4jducwn6g.foldl(range.getClientRects(),function(state,rect){return state||containsXY(rect,clientX,clientY)},!1)},$_cy7fd256jducwo68={isXYWithinRange:isXYWithinRange},adaptable=function(fn,rate){var timer=null,args=null;return{cancel:function(){null!==timer&&(clearTimeout(timer),timer=null,args=null)},throttle:function(){args=arguments,null===timer&&(timer=setTimeout(function(){fn.apply(null,args),timer=null,args=null},rate))}}},first$3=function(fn,rate){var timer=null;return{cancel:function(){null!==timer&&(clearTimeout(timer),timer=null)},throttle:function(){var args=arguments;null===timer&&(timer=setTimeout(function(){fn.apply(null,args),timer=null,args=null},rate))}}},last$3=function(fn,rate){var timer=null;return{cancel:function(){null!==timer&&(clearTimeout(timer),timer=null)},throttle:function(){var args=arguments;null!==timer&&clearTimeout(timer),timer=setTimeout(function(){fn.apply(null,args),timer=null,args=null},rate)}}},$_15mtnw58jducwo6f={adaptable:adaptable,first:first$3,last:last$3},setup$2=function(editor){var renderFocusCaret=$_15mtnw58jducwo6f.first(function(){if(!editor.removed){if(editor.selection.getRng().collapsed){var caretRange=renderRangeCaret(editor,editor.selection.getRng());editor.selection.setRng(caretRange)}}},0);editor.on("focus",function(){renderFocusCaret.throttle()}),editor.on("blur",function(){renderFocusCaret.cancel()})},$_vc72057jducwo6c={setup:setup$2},$_1xm2zi59jducwo6l={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(e){return $_cum1kc9jducwn99.mac?e.metaKey:e.ctrlKey&&!e.altKey}},isContentEditableTrue$5=$_fj238m1qjducwnjm.isContentEditableTrue,isContentEditableFalse$9=$_fj238m1qjducwnjm.isContentEditableFalse,isAfterContentEditableFalse$1=isAfterContentEditableFalse,isBeforeContentEditableFalse$1=isBeforeContentEditableFalse,SelectionOverrides=function(editor){var selectedContentEditableNode,isBlock=function(node){return editor.dom.isBlock(node)},rootNode=editor.getBody(),fakeCaret=FakeCaret(editor.getBody(),isBlock),realSelectionId="sel-"+editor.dom.uniqueId(),isFakeSelectionElement=function(elm){return editor.dom.hasClass(elm,"mce-offscreen-selection")},getRealSelectionElement=function(){var container=editor.dom.get(realSelectionId);return container?container.getElementsByTagName("*")[0]:container},setRange=function(range){range&&editor.selection.setRng(range)},getRange=function(){return editor.selection.getRng()},scrollIntoView=function(node,alignToTop){editor.selection.scrollIntoView(node,alignToTop)},showCaret$$1=function(direction,node,before){var e;return e=editor.fire("ShowCaret",{target:node,direction:direction,before:before}),e.isDefaultPrevented()?null:(scrollIntoView(node,direction===-1),fakeCaret.show(before,node))},getNormalizedRangeEndPoint$$1=function(direction,range){return range=normalizeRange(direction,rootNode,range),direction===-1?CaretPosition$1.fromRangeStart(range):CaretPosition$1.fromRangeEnd(range)},showBlockCaretContainer=function(blockCaretContainer){blockCaretContainer.hasAttribute("data-mce-caret")&&(showCaretContainerBlock(blockCaretContainer),setRange(getRange()),scrollIntoView(blockCaretContainer[0]))},isWithinCaretContainer=function(node){return isCaretContainer(node)||startsWithCaretContainer(node)||endsWithCaretContainer(node)},isRangeInCaretContainer=function(rng){return isWithinCaretContainer(rng.startContainer)||isWithinCaretContainer(rng.endContainer)},setContentEditableSelection=function(range,forward){var node,$realSelectionContainer,sel,startContainer,startOffset,endOffset,e,caretPosition,targetClone,origTargetClone,$=editor.$,dom=editor.dom;if(!range)return null;if(range.collapsed){if(!isRangeInCaretContainer(range))if(forward===!1){if(caretPosition=getNormalizedRangeEndPoint$$1(-1,range),isFakeCaretTarget(caretPosition.getNode(!0)))return showCaret$$1(-1,caretPosition.getNode(!0),!1);if(isFakeCaretTarget(caretPosition.getNode()))return showCaret$$1(-1,caretPosition.getNode(),!caretPosition.isAtEnd())}else{if(caretPosition=getNormalizedRangeEndPoint$$1(1,range),isFakeCaretTarget(caretPosition.getNode()))return showCaret$$1(1,caretPosition.getNode(),!caretPosition.isAtEnd());if(isFakeCaretTarget(caretPosition.getNode(!0)))return showCaret$$1(1,caretPosition.getNode(!0),!1)}return null}return startContainer=range.startContainer,startOffset=range.startOffset,endOffset=range.endOffset,3===startContainer.nodeType&&0===startOffset&&isContentEditableFalse$9(startContainer.parentNode)&&(startContainer=startContainer.parentNode,startOffset=dom.nodeIndex(startContainer),startContainer=startContainer.parentNode),1!==startContainer.nodeType?null:(endOffset===startOffset+1&&(node=startContainer.childNodes[startOffset]),isContentEditableFalse$9(node)?(targetClone=origTargetClone=node.cloneNode(!0),e=editor.fire("ObjectSelected",{target:node,targetClone:targetClone}),e.isDefaultPrevented()?null:($realSelectionContainer=$_eh73s937jducwns3.descendant($_5s4uzoyjducwngo.fromDom(editor.getBody()),"#"+realSelectionId).fold(function(){return $([])},function(elm){return $([elm.dom()])}),targetClone=e.targetClone,0===$realSelectionContainer.length&&($realSelectionContainer=$('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",realSelectionId),$realSelectionContainer.appendTo(editor.getBody())),range=editor.dom.createRng(),targetClone===origTargetClone&&$_cum1kc9jducwn99.ie?($realSelectionContainer.empty().append('<p style="font-size: 0" data-mce-bogus="all"> </p>').append(targetClone),range.setStartAfter($realSelectionContainer[0].firstChild.firstChild),range.setEndAfter(targetClone)):($realSelectionContainer.empty().append(" ").append(targetClone).append(" "),range.setStart($realSelectionContainer[0].firstChild,1),range.setEnd($realSelectionContainer[0].lastChild,0)),$realSelectionContainer.css({top:dom.getPos(node,editor.getBody()).y}),$realSelectionContainer[0].focus(),sel=editor.selection.getSel(),sel.removeAllRanges(),sel.addRange(range),$_2dw1bj4jducwn6g.each($_47k8tx2gjducwnot.descendants($_5s4uzoyjducwngo.fromDom(editor.getBody()),"*[data-mce-selected]"),function(elm){$_60196814jducwnhd.remove(elm,"data-mce-selected")}),node.setAttribute("data-mce-selected","1"),selectedContentEditableNode=node,hideFakeCaret(),range)):null)},removeContentEditableSelection=function(){selectedContentEditableNode&&(selectedContentEditableNode.removeAttribute("data-mce-selected"),$_eh73s937jducwns3.descendant($_5s4uzoyjducwngo.fromDom(editor.getBody()),"#"+realSelectionId).each($_34vweg2pjducwnq0.remove),selectedContentEditableNode=null)},destroy=function(){fakeCaret.destroy(),selectedContentEditableNode=null},hideFakeCaret=function(){fakeCaret.hide()};return $_cum1kc9jducwn99.ceFalse&&(function(){var getContentEditableRoot=function(node){for(var root=editor.getBody();node&&node!==root;){if(isContentEditableTrue$5(node)||isContentEditableFalse$9(node))return node;node=node.parentNode}return null};editor.on("mouseup",function(e){var range=getRange();range.collapsed&&$_ahd3ne4djducwo1z.isXYInContentArea(editor,e.clientX,e.clientY)&&setRange(renderCaretAtRange(editor,range))}),editor.on("click",function(e){var contentEditableRoot;(contentEditableRoot=getContentEditableRoot(e.target))&&(isContentEditableFalse$9(contentEditableRoot)&&(e.preventDefault(),editor.focus()),isContentEditableTrue$5(contentEditableRoot)&&editor.dom.isChildOf(contentEditableRoot,editor.selection.getNode())&&removeContentEditableSelection())}),editor.on("blur NewBlock",function(){removeContentEditableSelection()});var hasNormalCaretPosition=function(elm){var caretWalker=CaretWalker(elm);if(!elm.firstChild)return!1;var startPos=CaretPosition$1.before(elm.firstChild),newPos=caretWalker.next(startPos);return newPos&&!isBeforeContentEditableFalse$1(newPos)&&!isAfterContentEditableFalse$1(newPos)},isInSameBlock$$1=function(node1,node2){return editor.dom.getParent(node1,editor.dom.isBlock)===editor.dom.getParent(node2,editor.dom.isBlock)},hasBetterMouseTarget=function(targetNode,caretNode){var targetBlock=editor.dom.getParent(targetNode,editor.dom.isBlock),caretBlock=editor.dom.getParent(caretNode,editor.dom.isBlock);return targetBlock&&!isInSameBlock$$1(targetBlock,caretBlock)&&hasNormalCaretPosition(targetBlock)};!function(editor){var moved=!1;editor.on("touchstart",function(){moved=!1}),editor.on("touchmove",function(){moved=!0}),editor.on("touchend",function(e){var contentEditableRoot=getContentEditableRoot(e.target);isContentEditableFalse$9(contentEditableRoot)&&(moved||(e.preventDefault(),setContentEditableSelection(selectNode(editor,contentEditableRoot))))})}(editor),editor.on("mousedown",function(e){var contentEditableRoot,targetElm=e.target;if((targetElm===rootNode||"HTML"===targetElm.nodeName||editor.dom.isChildOf(targetElm,rootNode))&&$_ahd3ne4djducwo1z.isXYInContentArea(editor,e.clientX,e.clientY)!==!1)if(contentEditableRoot=getContentEditableRoot(targetElm))isContentEditableFalse$9(contentEditableRoot)?(e.preventDefault(),setContentEditableSelection(selectNode(editor,contentEditableRoot))):(removeContentEditableSelection(),isContentEditableTrue$5(contentEditableRoot)&&e.shiftKey||$_cy7fd256jducwo68.isXYWithinRange(e.clientX,e.clientY,editor.selection.getRng())||editor.selection.placeCaretAt(e.clientX,e.clientY));else if(isFakeCaretTarget(targetElm)===!1){removeContentEditableSelection(),hideFakeCaret();var caretInfo=closestCaret(rootNode,e.clientX,e.clientY);caretInfo&&(hasBetterMouseTarget(e.target,caretInfo.node)||(e.preventDefault(),editor.getBody().focus(),
setRange(showCaret$$1(1,caretInfo.node,caretInfo.before))))}}),editor.on("keypress",function(e){if(!$_1xm2zi59jducwo6l.modifierPressed(e))switch(e.keyCode){default:isContentEditableFalse$9(editor.selection.getNode())&&e.preventDefault()}}),editor.on("getSelectionRange",function(e){var rng=e.range;if(selectedContentEditableNode){if(!selectedContentEditableNode.parentNode)return void(selectedContentEditableNode=null);rng=rng.cloneRange(),rng.selectNode(selectedContentEditableNode),e.range=rng}}),editor.on("setSelectionRange",function(e){var rng;(rng=setContentEditableSelection(e.range,e.forward))&&(e.range=rng)}),editor.on("AfterSetSelectionRange",function(e){var rng=e.range;isRangeInCaretContainer(rng)||hideFakeCaret(),isFakeSelectionElement(rng.startContainer.parentNode)||removeContentEditableSelection()}),editor.on("copy",function(e){var clipboardData=e.clipboardData;if(!e.isDefaultPrevented()&&e.clipboardData&&!$_cum1kc9jducwn99.ie){var realSelectionElement=getRealSelectionElement();realSelectionElement&&(e.preventDefault(),clipboardData.clearData(),clipboardData.setData("text/html",realSelectionElement.outerHTML),clipboardData.setData("text/plain",realSelectionElement.outerText))}}),$_56sftn51jducwo5f.init(editor),$_vc72057jducwo6c.setup(editor)}(),function(){var styles=editor.contentStyles;styles.push(fakeCaret.getCss()),styles.push(".mce-content-body .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}.mce-content-body *[contentEditable=false] {cursor: default;}.mce-content-body *[contentEditable=true] {cursor: text;}")}()),{showCaret:showCaret$$1,showBlockCaretContainer:showBlockCaretContainer,hideFakeCaret:hideFakeCaret,destroy:destroy}},each$11=$_8i2houjjducwnd2.each,isValidPrefixAttrName=function(name){return 0===name.indexOf("data-")||0===name.indexOf("aria-")},trimComments=function(text){return text.replace(/<!--|-->/g,"")},findEndTagIndex=function(schema,html,startIndex){var index,matches,tokenRegExp,shortEndedElements,count=1;for(shortEndedElements=schema.getShortEndedElements(),tokenRegExp=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g,tokenRegExp.lastIndex=index=startIndex;matches=tokenRegExp.exec(html);){if(index=tokenRegExp.lastIndex,"/"===matches[1])count--;else if(!matches[1]){if(matches[2]in shortEndedElements)continue;count++}if(0===count)break}return index};!function(SaxParser){SaxParser.findEndTag=findEndTagIndex}(SaxParser||(SaxParser={}));var SaxParser$1=SaxParser,trimHtml=function(tempAttrs,html){var trimContentRegExp=new RegExp(["\\s?("+tempAttrs.join("|")+')="[^"]+"'].join("|"),"gi");return html.replace(trimContentRegExp,"")},trimInternal=function(serializer,html){var endTagIndex,index,matchLength,matches,shortEndedElements,content=html,bogusAllRegExp=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,schema=serializer.schema;for(content=trimHtml(serializer.getTempAttrs(),content),shortEndedElements=schema.getShortEndedElements();matches=bogusAllRegExp.exec(content);)index=bogusAllRegExp.lastIndex,matchLength=matches[0].length,endTagIndex=shortEndedElements[matches[1]]?index:SaxParser$1.findEndTag(schema,content,index),content=content.substring(0,index-matchLength)+content.substring(endTagIndex),bogusAllRegExp.lastIndex=index-matchLength;return content},trimExternal=function(serializer,html){return $_fz0k4u21jducwnmu.trim(trimInternal(serializer,html))},$_9wn54m5cjducwo73={trimExternal:trimExternal,trimInternal:trimInternal},diff=function(left,right){var size=left.length+right.length+2,vDown=new Array(size),vUp=new Array(size),snake=function(start,end,diag){return{start:start,end:end,diag:diag}},buildScript=function(start1,end1,start2,end2,script){var middle=getMiddleSnake(start1,end1,start2,end2);if(null===middle||middle.start===end1&&middle.diag===end1-end2||middle.end===start1&&middle.diag===start1-start2)for(var i=start1,j=start2;i<end1||j<end2;)i<end1&&j<end2&&left[i]===right[j]?(script.push([0,left[i]]),++i,++j):end1-start1>end2-start2?(script.push([2,left[i]]),++i):(script.push([1,right[j]]),++j);else{buildScript(start1,middle.start,start2,middle.start-middle.diag,script);for(var i2=middle.start;i2<middle.end;++i2)script.push([0,left[i2]]);buildScript(middle.end,end1,middle.end-middle.diag,end2,script)}},buildSnake=function(start,diag,end1,end2){for(var end=start;end-diag<end2&&end<end1&&left[end]===right[end-diag];)++end;return snake(start,end,diag)},getMiddleSnake=function(start1,end1,start2,end2){var m=end1-start1,n=end2-start2;if(0===m||0===n)return null;var delta=m-n,sum=n+m,offset=(sum%2==0?sum:sum+1)/2;vDown[1+offset]=start1,vUp[1+offset]=end1+1;var d,k,i,x,y;for(d=0;d<=offset;++d){for(k=-d;k<=d;k+=2){for(i=k+offset,k===-d||k!==d&&vDown[i-1]<vDown[i+1]?vDown[i]=vDown[i+1]:vDown[i]=vDown[i-1]+1,x=vDown[i],y=x-start1+start2-k;x<end1&&y<end2&&left[x]===right[y];)vDown[i]=++x,++y;if(delta%2!=0&&delta-d<=k&&k<=delta+d&&vUp[i-delta]<=vDown[i])return buildSnake(vUp[i-delta],k+start1-start2,end1,end2)}for(k=delta-d;k<=delta+d;k+=2){for(i=k+offset-delta,k===delta-d||k!==delta+d&&vUp[i+1]<=vUp[i-1]?vUp[i]=vUp[i+1]-1:vUp[i]=vUp[i-1],x=vUp[i]-1,y=x-start1+start2-k;x>=start1&&y>=start2&&left[x]===right[y];)vUp[i]=x--,y--;if(delta%2==0&&-d<=k&&k<=d&&vUp[i]<=vDown[i+delta])return buildSnake(vUp[i],k+start1-start2,end1,end2)}}},script=[];return buildScript(0,left.length,0,right.length,script),script},$_3rz1t15fjducwo7r={KEEP:0,DELETE:2,INSERT:1,diff:diff},getOuterHtml=function(elm){return 1===elm.nodeType?elm.outerHTML:3===elm.nodeType?$_g4jbz61rjducwnjq.encodeRaw(elm.data,!1):8===elm.nodeType?"<!--"+elm.data+"-->":""},createFragment$1=function(html){var frag,node,container;for(container=document.createElement("div"),frag=document.createDocumentFragment(),html&&(container.innerHTML=html);node=container.firstChild;)frag.appendChild(node);return frag},insertAt=function(elm,html,index){var fragment=createFragment$1(html);if(elm.hasChildNodes()&&index<elm.childNodes.length){var target=elm.childNodes[index];target.parentNode.insertBefore(fragment,target)}else elm.appendChild(fragment)},removeAt=function(elm,index){if(elm.hasChildNodes()&&index<elm.childNodes.length){var target=elm.childNodes[index];target.parentNode.removeChild(target)}},applyDiff=function(diff,elm){var index=0;$_e6e6g1kjducwnfd.each(diff,function(action){action[0]===$_3rz1t15fjducwo7r.KEEP?index++:action[0]===$_3rz1t15fjducwo7r.INSERT?(insertAt(elm,action[1],index),index++):action[0]===$_3rz1t15fjducwo7r.DELETE&&removeAt(elm,index)})},read$2=function(elm){return $_e6e6g1kjducwnfd.filter($_e6e6g1kjducwnfd.map(elm.childNodes,getOuterHtml),function(item){return item.length>0})},write=function(fragments,elm){var currentFragments=$_e6e6g1kjducwnfd.map(elm.childNodes,getOuterHtml);return applyDiff($_3rz1t15fjducwo7r.diff(currentFragments,fragments),elm),elm},$_51p2my5ejducwo7o={read:read$2,write:write},hasIframes=function(html){return html.indexOf("</iframe>")!==-1},createFragmentedLevel=function(fragments){return{type:"fragmented",fragments:fragments,content:"",bookmark:null,beforeBookmark:null}},createCompleteLevel=function(content){return{type:"complete",fragments:null,content:content,bookmark:null,beforeBookmark:null}},createFromEditor=function(editor){var fragments,content,trimmedFragments;return fragments=$_51p2my5ejducwo7o.read(editor.getBody()),trimmedFragments=$_2dw1bj4jducwn6g.bind(fragments,function(html){var trimmed=$_9wn54m5cjducwo73.trimInternal(editor.serializer,html);return trimmed.length>0?[trimmed]:[]}),content=trimmedFragments.join(""),hasIframes(content)?createFragmentedLevel(trimmedFragments):createCompleteLevel(content)},applyToEditor=function(editor,level,before){"fragmented"===level.type?$_51p2my5ejducwo7o.write(level.fragments,editor.getBody()):editor.setContent(level.content,{format:"raw"}),editor.selection.moveToBookmark(before?level.beforeBookmark:level.bookmark)},getLevelContent=function(level){return"fragmented"===level.type?level.fragments.join(""):level.content},isEq$4=function(level1,level2){return!!level1&&!!level2&&getLevelContent(level1)===getLevelContent(level2)},$_9n3h945bjducwo6y={createFragmentedLevel:createFragmentedLevel,createCompleteLevel:createCompleteLevel,createFromEditor:createFromEditor,applyToEditor:applyToEditor,isEq:isEq$4},postProcessHooks={},filter$2=$_e6e6g1kjducwnfd.filter,each$12=$_e6e6g1kjducwnfd.each,postProcess=function(name,editor){each$12(postProcessHooks[name],function(hook){hook(editor)})};!function(name,hook){var hooks=postProcessHooks[name];hooks||(postProcessHooks[name]=hooks=[]),postProcessHooks[name].push(hook)}("pre",function(editor){var isPre,blocks,rng=editor.selection.getRng(),hasPreSibling=function(pre){return isPre(pre.previousSibling)&&$_e6e6g1kjducwnfd.indexOf(blocks,pre.previousSibling)!==-1},joinPre=function(pre1,pre2){DomQuery(pre2).remove(),DomQuery(pre1).append("<br><br>").append(pre2.childNodes)};isPre=$_fj238m1qjducwnjm.matchNodeNames("pre"),rng.collapsed||(blocks=editor.selection.getSelectedBlocks(),each$12(filter$2(filter$2(blocks,isPre),hasPreSibling),function(pre){joinPre(pre.previousSibling,pre)}))});var $_ez60zk5ijducwo86={postProcess:postProcess},each$13=$_8i2houjjducwnd2.each,getEndChild=function(container,index){var childNodes=container.childNodes;return index--,index>childNodes.length-1?index=childNodes.length-1:index<0&&(index=0),childNodes[index]||container},walk$2=function(dom,rng,callback){var ancestor,startPoint,endPoint,node,parent,siblings,nodes,startContainer=rng.startContainer,startOffset=rng.startOffset,endContainer=rng.endContainer,endOffset=rng.endOffset;if(nodes=dom.select("td[data-mce-selected],th[data-mce-selected]"),nodes.length>0)return void each$13(nodes,function(node){callback([node])});var exclude=function(nodes){var node;return node=nodes[0],3===node.nodeType&&node===startContainer&&startOffset>=node.nodeValue.length&&nodes.splice(0,1),node=nodes[nodes.length-1],0===endOffset&&nodes.length>0&&node===endContainer&&3===node.nodeType&&nodes.splice(nodes.length-1,1),nodes},collectSiblings=function(node,name,endNode){for(var siblings=[];node&&node!==endNode;node=node[name])siblings.push(node);return siblings},findEndPoint=function(node,root){do{if(node.parentNode===root)return node;node=node.parentNode}while(node)},walkBoundary=function(startNode,endNode,next){var siblingName=next?"nextSibling":"previousSibling";for(node=startNode,parent=node.parentNode;node&&node!==endNode;node=parent)parent=node.parentNode,siblings=collectSiblings(node===startNode?node:node[siblingName],siblingName),siblings.length&&(next||siblings.reverse(),callback(exclude(siblings)))};if(1===startContainer.nodeType&&startContainer.hasChildNodes()&&(startContainer=startContainer.childNodes[startOffset]),1===endContainer.nodeType&&endContainer.hasChildNodes()&&(endContainer=getEndChild(endContainer,endOffset)),startContainer===endContainer)return callback(exclude([startContainer]));for(ancestor=dom.findCommonAncestor(startContainer,endContainer),node=startContainer;node;node=node.parentNode){if(node===endContainer)return walkBoundary(startContainer,ancestor,!0);if(node===ancestor)break}for(node=endContainer;node;node=node.parentNode){if(node===startContainer)return walkBoundary(endContainer,ancestor);if(node===ancestor)break}startPoint=findEndPoint(startContainer,ancestor)||startContainer,endPoint=findEndPoint(endContainer,ancestor)||endContainer,walkBoundary(startContainer,startPoint,!0),siblings=collectSiblings(startPoint===startContainer?startPoint:startPoint.nextSibling,"nextSibling",endPoint===endContainer?endPoint.nextSibling:endPoint),siblings.length&&callback(exclude(siblings)),walkBoundary(endContainer,endPoint)},$_ee8wld5ljducwo96={walk:walk$2},MCE_ATTR_RE=/^(src|href|style)$/,each$14=$_8i2houjjducwnd2.each,isEq$5=$_fyc2yy3ljducwnuu.isEq,isTableCell$4=function(node){return/^(TH|TD)$/.test(node.nodeName)},getContainer=function(ed,rng,start){var container,offset,lastIdx;return container=rng[start?"startContainer":"endContainer"],offset=rng[start?"startOffset":"endOffset"],$_fj238m1qjducwnjm.isElement(container)&&(lastIdx=container.childNodes.length-1,!start&&offset&&offset--,container=container.childNodes[offset>lastIdx?lastIdx:offset]),$_fj238m1qjducwnjm.isText(container)&&start&&offset>=container.nodeValue.length&&(container=new TreeWalker(container,ed.getBody()).next()||container),$_fj238m1qjducwnjm.isText(container)&&!start&&0===offset&&(container=new TreeWalker(container,ed.getBody()).prev()||container),container},wrap$2=function(dom,node,name,attrs){var wrapper=dom.create(name,attrs);return node.parentNode.insertBefore(wrapper,node),wrapper.appendChild(node),wrapper},matchName$1=function(dom,node,format){return!!isEq$5(node,format.inline)||(!!isEq$5(node,format.block)||(format.selector?$_fj238m1qjducwnjm.isElement(node)&&dom.is(node,format.selector):void 0))},isColorFormatAndAnchor=function(node,format){return format.links&&"A"===node.tagName},find$4=function(dom,node,next,inc){return!(node=$_fyc2yy3ljducwnuu.getNonWhiteSpaceSibling(node,next,inc))||"BR"===node.nodeName||dom.isBlock(node)},removeNode$1=function(ed,node,format){var rootBlockElm,parentNode=node.parentNode,dom=ed.dom,forcedRootBlock=ed.settings.forced_root_block;format.block&&(forcedRootBlock?parentNode===dom.getRoot()&&(format.list_block&&isEq$5(node,format.list_block)||each$14($_8i2houjjducwnd2.grep(node.childNodes),function(node){$_fyc2yy3ljducwnuu.isValid(ed,forcedRootBlock,node.nodeName.toLowerCase())?rootBlockElm?rootBlockElm.appendChild(node):(rootBlockElm=wrap$2(dom,node,forcedRootBlock),dom.setAttribs(rootBlockElm,ed.settings.forced_root_block_attrs)):rootBlockElm=0})):dom.isBlock(node)&&!dom.isBlock(parentNode)&&(find$4(dom,node,!1)||find$4(dom,node.firstChild,!0,1)||node.insertBefore(dom.create("br"),node.firstChild),find$4(dom,node,!0)||find$4(dom,node.lastChild,!1,1)||node.appendChild(dom.create("br")))),format.selector&&format.inline&&!isEq$5(format.inline,node)||dom.remove(node,1)},removeFormat=function(ed,format,vars,node,compareNode){var i,attrs,stylesModified,dom=ed.dom;if(!matchName$1(dom,node,format)&&!isColorFormatAndAnchor(node,format))return!1;if("all"!==format.remove)for(each$14(format.styles,function(value,name){value=$_fyc2yy3ljducwnuu.normalizeStyleValue(dom,$_fyc2yy3ljducwnuu.replaceVars(value,vars),name),"number"==typeof name&&(name=value,compareNode=0),(format.remove_similar||!compareNode||isEq$5($_fyc2yy3ljducwnuu.getStyle(dom,compareNode,name),value))&&dom.setStyle(node,name,""),stylesModified=1}),stylesModified&&""===dom.getAttrib(node,"style")&&(node.removeAttribute("style"),node.removeAttribute("data-mce-style")),each$14(format.attributes,function(value,name){var valueOut;if(value=$_fyc2yy3ljducwnuu.replaceVars(value,vars),"number"==typeof name&&(name=value,compareNode=0),!compareNode||isEq$5(dom.getAttrib(compareNode,name),value)){if("class"===name&&(value=dom.getAttrib(node,name))&&(valueOut="",each$14(value.split(/\s+/),function(cls){/mce\-\w+/.test(cls)&&(valueOut+=(valueOut?" ":"")+cls)}),valueOut))return void dom.setAttrib(node,name,valueOut);"class"===name&&node.removeAttribute("className"),MCE_ATTR_RE.test(name)&&node.removeAttribute("data-mce-"+name),node.removeAttribute(name)}}),each$14(format.classes,function(value){value=$_fyc2yy3ljducwnuu.replaceVars(value,vars),compareNode&&!dom.hasClass(compareNode,value)||dom.removeClass(node,value)}),attrs=dom.getAttribs(node),i=0;i<attrs.length;i++){var attrName=attrs[i].nodeName;if(0!==attrName.indexOf("_")&&0!==attrName.indexOf("data-"))return!1}return"none"!==format.remove?(removeNode$1(ed,node,format),!0):void 0},findFormatRoot=function(editor,container,name,vars,similar){var formatRoot;return each$14($_fyc2yy3ljducwnuu.getParents(editor.dom,container.parentNode).reverse(),function(parent){var format;formatRoot||"_start"===parent.id||"_end"===parent.id||(format=$_4os6t23mjducwnv0.matchNode(editor,parent,name,vars,similar))&&format.split!==!1&&(formatRoot=parent)}),formatRoot},wrapAndSplit=function(editor,formatList,formatRoot,container,target,split,format,vars){var parent,clone,lastClone,firstClone,i,formatRootParent,dom=editor.dom;if(formatRoot){for(formatRootParent=formatRoot.parentNode,parent=container.parentNode;parent&&parent!==formatRootParent;parent=parent.parentNode){for(clone=dom.clone(parent,!1),i=0;i<formatList.length;i++)if(removeFormat(editor,formatList[i],vars,clone,clone)){clone=0;break}clone&&(lastClone&&clone.appendChild(lastClone),firstClone||(firstClone=clone),lastClone=clone)}!split||format.mixed&&dom.isBlock(formatRoot)||(container=dom.split(formatRoot,container)),lastClone&&(target.parentNode.insertBefore(lastClone,target),firstClone.appendChild(target))}return container},remove$4=function(ed,name,vars,node,similar){var bookmark,rng,formatList=ed.formatter.get(name),format=formatList[0],contentEditable=!0,dom=ed.dom,selection=ed.selection,splitToFormatRoot=function(container){var formatRoot=findFormatRoot(ed,container,name,vars,similar);return wrapAndSplit(ed,formatList,formatRoot,container,container,!0,format,vars)},process=function(node){var children,i,l,lastContentEditable,hasContentEditableState;if($_fj238m1qjducwnjm.isElement(node)&&dom.getContentEditable(node)&&(lastContentEditable=contentEditable,contentEditable="true"===dom.getContentEditable(node),hasContentEditableState=!0),children=$_8i2houjjducwnd2.grep(node.childNodes),contentEditable&&!hasContentEditableState)for(i=0,l=formatList.length;i<l&&!removeFormat(ed,formatList[i],vars,node,node);i++);if(format.deep&&children.length){for(i=0,l=children.length;i<l;i++)process(children[i]);hasContentEditableState&&(contentEditable=lastContentEditable)}},unwrap=function(start){var node=dom.get(start?"_start":"_end"),out=node[start?"firstChild":"lastChild"];return $_dcl0u12jjducwnp0.isBookmarkNode(out)&&(out=out[start?"firstChild":"lastChild"]),$_fj238m1qjducwnjm.isText(out)&&0===out.data.length&&(out=start?node.previousSibling||node.nextSibling:node.nextSibling||node.previousSibling),dom.remove(node,!0),out},removeRngStyle=function(rng){var startContainer,endContainer,commonAncestorContainer=rng.commonAncestorContainer;if(rng=$_ceajqh3kjducwnui.expandRng(ed,rng,formatList,!0),format.split){if(startContainer=getContainer(ed,rng,!0),endContainer=getContainer(ed,rng),startContainer!==endContainer){if(/^(TR|TH|TD)$/.test(startContainer.nodeName)&&startContainer.firstChild&&(startContainer="TR"===startContainer.nodeName?startContainer.firstChild.firstChild||startContainer:startContainer.firstChild||startContainer),commonAncestorContainer&&/^T(HEAD|BODY|FOOT|R)$/.test(commonAncestorContainer.nodeName)&&isTableCell$4(endContainer)&&endContainer.firstChild&&(endContainer=endContainer.firstChild||endContainer),dom.isChildOf(startContainer,endContainer)&&startContainer!==endContainer&&!dom.isBlock(endContainer)&&!isTableCell$4(startContainer)&&!isTableCell$4(endContainer))return startContainer=wrap$2(dom,startContainer,"span",{id:"_start","data-mce-type":"bookmark"}),splitToFormatRoot(startContainer),void(startContainer=unwrap(!0));startContainer=wrap$2(dom,startContainer,"span",{id:"_start","data-mce-type":"bookmark"}),endContainer=wrap$2(dom,endContainer,"span",{id:"_end","data-mce-type":"bookmark"}),splitToFormatRoot(startContainer),splitToFormatRoot(endContainer),startContainer=unwrap(!0),endContainer=unwrap()}else startContainer=endContainer=splitToFormatRoot(startContainer);rng.startContainer=startContainer.parentNode?startContainer.parentNode:startContainer,rng.startOffset=dom.nodeIndex(startContainer),rng.endContainer=endContainer.parentNode?endContainer.parentNode:endContainer,rng.endOffset=dom.nodeIndex(endContainer)+1}$_ee8wld5ljducwo96.walk(dom,rng,function(nodes){each$14(nodes,function(node){process(node),$_fj238m1qjducwnjm.isElement(node)&&"underline"===ed.dom.getStyle(node,"text-decoration")&&node.parentNode&&"underline"===$_fyc2yy3ljducwnuu.getTextDecoration(dom,node.parentNode)&&removeFormat(ed,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,node)})})};if(node)return void(node.nodeType?(rng=dom.createRng(),rng.setStartBefore(node),rng.setEndAfter(node),removeRngStyle(rng)):removeRngStyle(node));if("false"!==dom.getContentEditable(selection.getNode()))selection.isCollapsed()&&format.inline&&!dom.select("td[data-mce-selected],th[data-mce-selected]").length?$_gizh813jjducwnu6.removeCaretFormat(ed,name,vars,similar):(bookmark=selection.getBookmark(),removeRngStyle(selection.getRng()),selection.moveToBookmark(bookmark),format.inline&&$_4os6t23mjducwnv0.match(ed,name,vars,selection.getStart())&&$_fyc2yy3ljducwnuu.moveStart(dom,selection,selection.getRng()),ed.nodeChanged());else{node=selection.getNode();for(var i=0,l=formatList.length;i<l&&(!formatList[i].ceFalseOverride||!removeFormat(ed,formatList[i],vars,node,node));i++);}},$_2kyh3s5kjducwo8m={removeFormat:removeFormat,remove:remove$4},each$15=$_8i2houjjducwnd2.each,isElementNode=function(node){return node&&1===node.nodeType&&!$_dcl0u12jjducwnp0.isBookmarkNode(node)&&!$_gizh813jjducwnu6.isCaretNode(node)&&!$_fj238m1qjducwnjm.isBogus(node)},findElementSibling=function(node,siblingName){var sibling;for(sibling=node;sibling;sibling=sibling[siblingName]){if(3===sibling.nodeType&&0!==sibling.nodeValue.length)return node;if(1===sibling.nodeType&&!$_dcl0u12jjducwnp0.isBookmarkNode(sibling))return sibling}return node},mergeSiblingsNodes=function(dom,prev,next){var sibling,tmpSibling,elementUtils=new ElementUtils(dom);if(prev&&next&&(prev=findElementSibling(prev,"previousSibling"),next=findElementSibling(next,"nextSibling"),elementUtils.compare(prev,next))){for(sibling=prev.nextSibling;sibling&&sibling!==next;)tmpSibling=sibling,sibling=sibling.nextSibling,prev.appendChild(tmpSibling);return dom.remove(next),$_8i2houjjducwnd2.each($_8i2houjjducwnd2.grep(next.childNodes),function(node){prev.appendChild(node)}),prev}return next},processChildElements=function(node,filter,process){each$15(node.childNodes,function(node){isElementNode(node)&&(filter(node)&&process(node),node.hasChildNodes()&&processChildElements(node,filter,process))})},hasStyle=function(dom,name){return $_60qu7r6jducwn73.curry(function(name,node){return!(!node||!$_fyc2yy3ljducwnuu.getStyle(dom,node,name))},name)},applyStyle=function(dom,name,value){return $_60qu7r6jducwn73.curry(function(name,value,node){dom.setStyle(node,name,value),""===node.getAttribute("style")&&node.removeAttribute("style"),unwrapEmptySpan(dom,node)},name,value)},unwrapEmptySpan=function(dom,node){"SPAN"===node.nodeName&&0===dom.getAttribs(node).length&&dom.remove(node,!0)},processUnderlineAndColor=function(dom,node){var textDecoration;1===node.nodeType&&node.parentNode&&1===node.parentNode.nodeType&&(textDecoration=$_fyc2yy3ljducwnuu.getTextDecoration(dom,node.parentNode),dom.getStyle(node,"color")&&textDecoration?dom.setStyle(node,"text-decoration",textDecoration):dom.getStyle(node,"text-decoration")===textDecoration&&dom.setStyle(node,"text-decoration",null))},mergeUnderlineAndColor=function(dom,format,vars,node){(format.styles.color||format.styles.textDecoration)&&($_8i2houjjducwnd2.walk(node,$_60qu7r6jducwn73.curry(processUnderlineAndColor,dom),"childNodes"),processUnderlineAndColor(dom,node))},mergeBackgroundColorAndFontSize=function(dom,format,vars,node){format.styles&&format.styles.backgroundColor&&processChildElements(node,hasStyle(dom,"fontSize"),applyStyle(dom,"backgroundColor",$_fyc2yy3ljducwnuu.replaceVars(format.styles.backgroundColor,vars)))},mergeSubSup=function(dom,format,vars,node){"sub"!==format.inline&&"sup"!==format.inline||(processChildElements(node,hasStyle(dom,"fontSize"),applyStyle(dom,"fontSize","")),dom.remove(dom.select("sup"===format.inline?"sub":"sup",node),!0))},mergeSiblings=function(dom,format,vars,node){node&&format.merge_siblings!==!1&&(node=mergeSiblingsNodes(dom,$_fyc2yy3ljducwnuu.getNonWhiteSpaceSibling(node),node),node=mergeSiblingsNodes(dom,node,$_fyc2yy3ljducwnuu.getNonWhiteSpaceSibling(node,!0)))},clearChildStyles=function(dom,format,node){if(format.clear_child_styles){var selector=format.links?"*:not(a)":"*";each$15(dom.select(selector,node),function(node){isElementNode(node)&&each$15(format.styles,function(value,name){dom.setStyle(node,name,"")})})}},mergeWithChildren=function(editor,formatList,vars,node){each$15(formatList,function(format){each$15(editor.dom.select(format.inline,node),function(child){isElementNode(child)&&$_2kyh3s5kjducwo8m.removeFormat(editor,format,vars,child,format.exact?child:null)}),clearChildStyles(editor.dom,format,node)})},mergeWithParents=function(editor,format,name,vars,node){$_4os6t23mjducwnv0.matchNode(editor,node.parentNode,name,vars)&&$_2kyh3s5kjducwo8m.removeFormat(editor,format,vars,node)||format.merge_with_parents&&editor.dom.getParent(node.parentNode,function(parent){if($_4os6t23mjducwnv0.matchNode(editor,parent,name,vars))return $_2kyh3s5kjducwo8m.removeFormat(editor,format,vars,node),!0})},$_4ut1b55jjducwo8a={mergeWithChildren:mergeWithChildren,mergeUnderlineAndColor:mergeUnderlineAndColor,mergeBackgroundColorAndFontSize:mergeBackgroundColorAndFontSize,mergeSubSup:mergeSubSup,mergeSiblings:mergeSiblings,mergeWithParents:mergeWithParents},each$16=$_8i2houjjducwnd2.each,isElementNode$1=function(node){return node&&1===node.nodeType&&!$_dcl0u12jjducwnp0.isBookmarkNode(node)&&!$_gizh813jjducwnu6.isCaretNode(node)&&!$_fj238m1qjducwnjm.isBogus(node)},applyFormat=function(ed,name,vars,node){var bookmark,rng,formatList=ed.formatter.get(name),format=formatList[0],isCollapsed=!node&&ed.selection.isCollapsed(),dom=ed.dom,selection=ed.selection,setElementFormat=function(elm,fmt){if(fmt=fmt||format,elm){if(fmt.onformat&&fmt.onformat(elm,fmt,vars,node),each$16(fmt.styles,function(value,name){dom.setStyle(elm,name,$_fyc2yy3ljducwnuu.replaceVars(value,vars))}),fmt.styles){var styleVal=dom.getAttrib(elm,"style");styleVal&&elm.setAttribute("data-mce-style",styleVal)}each$16(fmt.attributes,function(value,name){dom.setAttrib(elm,name,$_fyc2yy3ljducwnuu.replaceVars(value,vars))}),each$16(fmt.classes,function(value){value=$_fyc2yy3ljducwnuu.replaceVars(value,vars),dom.hasClass(elm,value)||dom.addClass(elm,value)})}},applyNodeStyle=function(formatList,node){var found=!1;return!!format.selector&&(each$16(formatList,function(format){if(!("collapsed"in format&&format.collapsed!==isCollapsed))return dom.is(node,format.selector)&&!$_gizh813jjducwnu6.isCaretNode(node)?(setElementFormat(node,format),found=!0,!1):void 0}),found)},applyRngStyle=function(dom,rng,bookmark,nodeSpecific){var wrapName,wrapElm,newWrappers=[],contentEditable=!0;wrapName=format.inline||format.block,wrapElm=dom.create(wrapName),setElementFormat(wrapElm),$_ee8wld5ljducwo96.walk(dom,rng,function(nodes){var currentWrapElm,process=function(node){var nodeName,parentName,hasContentEditableState,lastContentEditable;if(lastContentEditable=contentEditable,nodeName=node.nodeName.toLowerCase(),parentName=node.parentNode.nodeName.toLowerCase(),1===node.nodeType&&dom.getContentEditable(node)&&(lastContentEditable=contentEditable,contentEditable="true"===dom.getContentEditable(node),hasContentEditableState=!0),$_fyc2yy3ljducwnuu.isEq(nodeName,"br"))return currentWrapElm=0,void(format.block&&dom.remove(node));if(format.wrapper&&$_4os6t23mjducwnv0.matchNode(ed,node,name,vars))return void(currentWrapElm=0);if(contentEditable&&!hasContentEditableState&&format.block&&!format.wrapper&&$_fyc2yy3ljducwnuu.isTextBlock(ed,nodeName)&&$_fyc2yy3ljducwnuu.isValid(ed,parentName,wrapName))return node=dom.rename(node,wrapName),setElementFormat(node),newWrappers.push(node),void(currentWrapElm=0);if(format.selector){var found=applyNodeStyle(formatList,node);if(!format.inline||found)return void(currentWrapElm=0)}!contentEditable||hasContentEditableState||!$_fyc2yy3ljducwnuu.isValid(ed,wrapName,nodeName)||!$_fyc2yy3ljducwnuu.isValid(ed,parentName,wrapName)||!nodeSpecific&&3===node.nodeType&&1===node.nodeValue.length&&65279===node.nodeValue.charCodeAt(0)||$_gizh813jjducwnu6.isCaretNode(node)||format.inline&&dom.isBlock(node)?(currentWrapElm=0,each$16($_8i2houjjducwnd2.grep(node.childNodes),process),hasContentEditableState&&(contentEditable=lastContentEditable),currentWrapElm=0):(currentWrapElm||(currentWrapElm=dom.clone(wrapElm,!1),node.parentNode.insertBefore(currentWrapElm,node),newWrappers.push(currentWrapElm)),currentWrapElm.appendChild(node))};each$16(nodes,process)}),format.links===!0&&each$16(newWrappers,function(node){var process=function(node){"A"===node.nodeName&&setElementFormat(node,format),each$16($_8i2houjjducwnd2.grep(node.childNodes),process)};process(node)}),each$16(newWrappers,function(node){var childCount,getChildElementNode=function(root){var child=!1;return each$16(root.childNodes,function(node){if(isElementNode$1(node))return child=node,!1}),child};if(childCount=function(node){var count=0;return each$16(node.childNodes,function(node){$_fyc2yy3ljducwnuu.isWhiteSpaceNode(node)||$_dcl0u12jjducwnp0.isBookmarkNode(node)||count++}),count}(node),(newWrappers.length>1||!dom.isBlock(node))&&0===childCount)return void dom.remove(node,1);(format.inline||format.wrapper)&&(format.exact||1!==childCount||(node=function(node){var child,clone;return child=getChildElementNode(node),child&&!$_dcl0u12jjducwnp0.isBookmarkNode(child)&&$_4os6t23mjducwnv0.matchName(dom,child,format)&&(clone=dom.clone(child,!1),setElementFormat(clone),dom.replace(clone,node,!0),dom.remove(child,1)),clone||node}(node)),$_4ut1b55jjducwo8a.mergeWithChildren(ed,formatList,vars,node),$_4ut1b55jjducwo8a.mergeWithParents(ed,format,name,vars,node),$_4ut1b55jjducwo8a.mergeBackgroundColorAndFontSize(dom,format,vars,node),$_4ut1b55jjducwo8a.mergeSubSup(dom,format,vars,node),$_4ut1b55jjducwo8a.mergeSiblings(dom,format,vars,node))})};if("false"!==dom.getContentEditable(selection.getNode())){if(format){if(node)node.nodeType?applyNodeStyle(formatList,node)||(rng=dom.createRng(),rng.setStartBefore(node),rng.setEndAfter(node),applyRngStyle(dom,$_ceajqh3kjducwnui.expandRng(ed,rng,formatList),0,!0)):applyRngStyle(dom,node,0,!0);else if(isCollapsed&&format.inline&&!dom.select("td[data-mce-selected],th[data-mce-selected]").length)$_gizh813jjducwnu6.applyCaretFormat(ed,name,vars);else{var curSelNode=ed.selection.getNode();ed.settings.forced_root_block||!formatList[0].defaultBlock||dom.getParent(curSelNode,dom.isBlock)||applyFormat(ed,formatList[0].defaultBlock),ed.selection.setRng($_5b11cd2vjducwnqi.normalize(ed.selection.getRng())),bookmark=selection.getBookmark(),applyRngStyle(dom,$_ceajqh3kjducwnui.expandRng(ed,selection.getRng(),formatList)),format.styles&&$_4ut1b55jjducwo8a.mergeUnderlineAndColor(dom,format,vars,curSelNode),selection.moveToBookmark(bookmark),$_fyc2yy3ljducwnuu.moveStart(dom,selection,selection.getRng()),ed.nodeChanged()}$_ez60zk5ijducwo86.postProcess(name,ed)}}else{node=selection.getNode();for(var i=0,l=formatList.length;i<l;i++)if(formatList[i].ceFalseOverride&&dom.is(node,formatList[i].selector))return void setElementFormat(node,formatList[i])}},$_3sj7pb5hjducwo7z={applyFormat:applyFormat},each$17=$_8i2houjjducwnd2.each,setup$3=function(formatChangeData,editor){var currentFormats={};formatChangeData.set({}),editor.on("NodeChange",function(e){var parents=$_fyc2yy3ljducwnuu.getParents(editor.dom,e.element),matchedFormats={};parents=$_8i2houjjducwnd2.grep(parents,function(node){return 1===node.nodeType&&!node.getAttribute("data-mce-bogus")}),each$17(formatChangeData.get(),function(callbacks,format){each$17(parents,function(node){return editor.formatter.matchNode(node,format,{},callbacks.similar)?(currentFormats[format]||(each$17(callbacks,function(callback){callback(!0,{node:node,format:format,parents:parents})}),currentFormats[format]=callbacks),matchedFormats[format]=callbacks,!1):!$_4os6t23mjducwnv0.matchesUnInheritedFormatSelector(editor,node,format)&&void 0})}),each$17(currentFormats,function(callbacks,format){matchedFormats[format]||(delete currentFormats[format],each$17(callbacks,function(callback){callback(!1,{
node:e.element,format:format,parents:parents})}))})})},addListeners=function(formatChangeData,formats,callback,similar){var formatChangeItems=formatChangeData.get();each$17(formats.split(","),function(format){formatChangeItems[format]||(formatChangeItems[format]=[],formatChangeItems[format].similar=similar),formatChangeItems[format].push(callback)}),formatChangeData.set(formatChangeItems)},formatChanged=function(editor,formatChangeState,formats,callback,similar){null===formatChangeState.get()&&setup$3(formatChangeState,editor),addListeners(formatChangeState,formats,callback,similar)},$_gdfg785mjducwo99={formatChanged:formatChanged},get$4=function(dom){var formats={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(elm,fmt,vars){$_8i2houjjducwnd2.each(vars,function(value,key){dom.setAttrib(elm,key,value)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return $_8i2houjjducwnd2.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(name){formats[name]={block:name,remove:"all"}}),formats},$_892yun5ojducwo9d={get:get$4},each$18=$_8i2houjjducwnd2.each,dom=DOMUtils.DOM,parsedSelectorToHtml=function(ancestry,editor){var elm,item,fragment,schema=editor&&editor.schema||Schema({}),decorate=function(elm,item){item.classes.length&&dom.addClass(elm,item.classes.join(" ")),dom.setAttribs(elm,item.attrs)},createElement=function(sItem){var elm;return item="string"==typeof sItem?{name:sItem,classes:[],attrs:{}}:sItem,elm=dom.create(item.name),decorate(elm,item),elm},getRequiredParent=function(elm,candidate){var name="string"!=typeof elm?elm.nodeName.toLowerCase():elm,elmRule=schema.getElementRule(name),parentsRequired=elmRule&&elmRule.parentsRequired;return!(!parentsRequired||!parentsRequired.length)&&(candidate&&$_8i2houjjducwnd2.inArray(parentsRequired,candidate)!==-1?candidate:parentsRequired[0])},wrapInHtml=function(elm,ancestry,siblings){var parent,parentCandidate,parentRequired,ancestor=ancestry.length>0&&ancestry[0],ancestorName=ancestor&&ancestor.name;if(parentRequired=getRequiredParent(elm,ancestorName))ancestorName===parentRequired?(parentCandidate=ancestry[0],ancestry=ancestry.slice(1)):parentCandidate=parentRequired;else if(ancestor)parentCandidate=ancestry[0],ancestry=ancestry.slice(1);else if(!siblings)return elm;return parentCandidate&&(parent=createElement(parentCandidate),parent.appendChild(elm)),siblings&&(parent||(parent=dom.create("div"),parent.appendChild(elm)),$_8i2houjjducwnd2.each(siblings,function(sibling){var siblingElm=createElement(sibling);parent.insertBefore(siblingElm,elm)})),wrapInHtml(parent,ancestry,parentCandidate&&parentCandidate.siblings)};return ancestry&&ancestry.length?(item=ancestry[0],elm=createElement(item),fragment=dom.create("div"),fragment.appendChild(wrapInHtml(elm,ancestry.slice(1),item.siblings)),fragment):""},selectorToHtml=function(selector,editor){return parsedSelectorToHtml(parseSelector(selector),editor)},parseSelectorItem=function(item){var tagName,obj={classes:[],attrs:{}};return item=obj.selector=$_8i2houjjducwnd2.trim(item),"*"!==item&&(tagName=item.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function($0,$1,$2,$3,$4){switch($1){case"#":obj.attrs.id=$2;break;case".":obj.classes.push($2);break;case":":$_8i2houjjducwnd2.inArray("checked disabled enabled read-only required".split(" "),$2)!==-1&&(obj.attrs[$2]=$2)}if("["===$3){var m=$4.match(/([\w\-]+)(?:\=\"([^\"]+))?/);m&&(obj.attrs[m[1]]=m[2])}return""})),obj.name=tagName||"div",obj},parseSelector=function(selector){return selector&&"string"==typeof selector?(selector=selector.split(/\s*,\s*/)[0],selector=selector.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),$_8i2houjjducwnd2.map(selector.split(/(?:>|\s+(?![^\[\]]+\]))/),function(item){var siblings=$_8i2houjjducwnd2.map(item.split(/(?:~\+|~|\+)/),parseSelectorItem),obj=siblings.pop();return siblings.length&&(obj.siblings=siblings),obj}).reverse()):[]},getCssText=function(editor,format){var name,previewFrag,previewElm,items,parentFontSize,previewStyles,previewCss="";if((previewStyles=editor.settings.preview_styles)===!1)return"";"string"!=typeof previewStyles&&(previewStyles="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");var removeVars=function(val){return val.replace(/%(\w+)/g,"")};if("string"==typeof format){if(!(format=editor.formatter.get(format)))return;format=format[0]}return"preview"in format&&(previewStyles=format.preview)===!1?"":(name=format.block||format.inline||"span",items=parseSelector(format.selector),items.length?(items[0].name||(items[0].name=name),name=format.selector,previewFrag=parsedSelectorToHtml(items,editor)):previewFrag=parsedSelectorToHtml([name],editor),previewElm=dom.select(name,previewFrag)[0]||previewFrag.firstChild,each$18(format.styles,function(value,name){(value=removeVars(value))&&dom.setStyle(previewElm,name,value)}),each$18(format.attributes,function(value,name){(value=removeVars(value))&&dom.setAttrib(previewElm,name,value)}),each$18(format.classes,function(value){value=removeVars(value),dom.hasClass(previewElm,value)||dom.addClass(previewElm,value)}),editor.fire("PreviewFormats"),dom.setStyles(previewFrag,{position:"absolute",left:-65535}),editor.getBody().appendChild(previewFrag),parentFontSize=dom.getStyle(editor.getBody(),"fontSize",!0),parentFontSize=/px$/.test(parentFontSize)?parseInt(parentFontSize,10):0,each$18(previewStyles.split(" "),function(name){var value=dom.getStyle(previewElm,name,!0);if(!("background-color"===name&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(value)&&(value=dom.getStyle(editor.getBody(),name,!0),"#ffffff"===dom.toHex(value).toLowerCase())||"color"===name&&"#000000"===dom.toHex(value).toLowerCase())){if("font-size"===name&&/em|%$/.test(value)){if(0===parentFontSize)return;value=parseFloat(value)/(/%$/.test(value)?100:1),value=value*parentFontSize+"px"}"border"===name&&value&&(previewCss+="padding:0 2px;"),previewCss+=name+":"+value+";"}}),editor.fire("AfterPreviewFormats"),dom.remove(previewFrag),previewCss)},$_2e4qhs5pjducwo9j={getCssText:getCssText,parseSelector:parseSelector,selectorToHtml:selectorToHtml},toggle=function(editor,formats,name,vars,node){var fmt=formats.get(name);!$_4os6t23mjducwnv0.match(editor,name,vars,node)||"toggle"in fmt[0]&&!fmt[0].toggle?$_3sj7pb5hjducwo7z.applyFormat(editor,name,vars,node):$_2kyh3s5kjducwo8m.remove(editor,name,vars,node)},$_arphd45qjducwo9s={toggle:toggle},setup$4=function(editor){editor.addShortcut("meta+b","","Bold"),editor.addShortcut("meta+i","","Italic"),editor.addShortcut("meta+u","","Underline");for(var i=1;i<=6;i++)editor.addShortcut("access+"+i,"",["FormatBlock",!1,"h"+i]);editor.addShortcut("access+7","",["FormatBlock",!1,"p"]),editor.addShortcut("access+8","",["FormatBlock",!1,"div"]),editor.addShortcut("access+9","",["FormatBlock",!1,"address"])},$_283uwp5rjducwo9v={setup:setup$4},shallow=function(old,nu){return nu},deep=function(old,nu){return $_c7y6af12jducwnh8.isObject(old)&&$_c7y6af12jducwnh8.isObject(nu)?deepMerge(old,nu):nu},baseMerge=function(merger){return function(){for(var objects=new Array(arguments.length),i=0;i<objects.length;i++)objects[i]=arguments[i];if(0===objects.length)throw new Error("Can't merge zero objects");for(var ret={},j=0;j<objects.length;j++){var curObject=objects[j];for(var key in curObject)curObject.hasOwnProperty(key)&&(ret[key]=merger(ret[key],curObject[key]))}return ret}},deepMerge=baseMerge(deep),merge=baseMerge(shallow),$_7sum4s5ujducwoab={deepMerge:deepMerge,merge:merge},firePreProcess=function(editor,args){return editor.fire("PreProcess",args)},firePostProcess=function(editor,args){return editor.fire("PostProcess",args)},fireRemove=function(editor){return editor.fire("remove")},$_zfmxp5vjducwoaf={firePreProcess:firePreProcess,firePostProcess:firePostProcess,fireRemove:fireRemove},register=function(htmlParser,settings,dom){htmlParser.addAttributeFilter("data-mce-tabindex",function(nodes,name){for(var node,i=nodes.length;i--;)node=nodes[i],node.attr("tabindex",node.attributes.map["data-mce-tabindex"]),node.attr(name,null)}),htmlParser.addAttributeFilter("src,href,style",function(nodes,name){for(var node,value,i=nodes.length,internalName="data-mce-"+name,urlConverter=settings.url_converter,urlConverterScope=settings.url_converter_scope;i--;)node=nodes[i],value=node.attributes.map[internalName],void 0!==value?(node.attr(name,value.length>0?value:null),node.attr(internalName,null)):(value=node.attributes.map[name],"style"===name?value=dom.serializeStyle(dom.parseStyle(value),node.name):urlConverter&&(value=urlConverter.call(urlConverterScope,value,name,node.name)),node.attr(name,value.length>0?value:null))}),htmlParser.addAttributeFilter("class",function(nodes){for(var node,value,i=nodes.length;i--;)node=nodes[i],(value=node.attr("class"))&&(value=node.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),node.attr("class",value.length>0?value:null))}),htmlParser.addAttributeFilter("data-mce-type",function(nodes,name,args){for(var node,i=nodes.length;i--;)node=nodes[i],"bookmark"!==node.attributes.map["data-mce-type"]||args.cleanup||node.remove()}),htmlParser.addNodeFilter("noscript",function(nodes){for(var node,i=nodes.length;i--;)(node=nodes[i].firstChild)&&(node.value=$_g4jbz61rjducwnjq.decode(node.value))}),htmlParser.addNodeFilter("script,style",function(nodes,name){for(var node,value,type,i=nodes.length,trim=function(value){return value.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};i--;)node=nodes[i],value=node.firstChild?node.firstChild.value:"","script"===name?(type=node.attr("type"),type&&node.attr("type","mce-no/type"===type?null:type.replace(/^mce\-/,"")),"xhtml"===settings.element_format&&value.length>0&&(node.firstChild.value="// <![CDATA[\n"+trim(value)+"\n// ]]>")):"xhtml"===settings.element_format&&value.length>0&&(node.firstChild.value="<!--\n"+trim(value)+"\n-->")}),htmlParser.addNodeFilter("#comment",function(nodes){for(var node,i=nodes.length;i--;)node=nodes[i],0===node.value.indexOf("[CDATA[")?(node.name="#cdata",node.type=4,node.value=node.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===node.value.indexOf("mce:protected ")&&(node.name="#text",node.type=3,node.raw=!0,node.value=unescape(node.value).substr(14))}),htmlParser.addNodeFilter("xml:namespace,input",function(nodes,name){for(var node,i=nodes.length;i--;)node=nodes[i],7===node.type?node.remove():1===node.type&&("input"!==name||"type"in node.attributes.map||node.attr("type","text"))}),htmlParser.addAttributeFilter("data-mce-type",function(nodes){$_2dw1bj4jducwn6g.each(nodes,function(node){"format-caret"===node.attr("data-mce-type")&&(node.isEmpty(htmlParser.schema.getNonEmptyElements())?node.remove():node.unwrap())})}),htmlParser.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(nodes,name){for(var i=nodes.length;i--;)nodes[i].attr(name,null)})},trimTrailingBr=function(rootNode){var brNode1,brNode2,isBr=function(node){return node&&"br"===node.name};brNode1=rootNode.lastChild,isBr(brNode1)&&(brNode2=brNode1.prev,isBr(brNode2)&&(brNode1.remove(),brNode2.remove()))},$_7ho7i95wjducwoaj={register:register,trimTrailingBr:trimTrailingBr},preProcess=function(editor,node,args){var impl,doc,oldDoc,dom=editor.dom;return node=node.cloneNode(!0),impl=document.implementation,impl.createHTMLDocument&&(doc=impl.createHTMLDocument(""),$_8i2houjjducwnd2.each("BODY"===node.nodeName?node.childNodes:[node],function(node){doc.body.appendChild(doc.importNode(node,!0))}),node="BODY"!==node.nodeName?doc.body.firstChild:doc.body,oldDoc=dom.doc,dom.doc=doc),$_zfmxp5vjducwoaf.firePreProcess(editor,$_7sum4s5ujducwoab.merge(args,{node:node})),oldDoc&&(dom.doc=oldDoc),node},shouldFireEvent=function(editor,args){return editor&&editor.hasEventListeners("PreProcess")&&!args.no_events},process=function(editor,node,args){return shouldFireEvent(editor,args)?preProcess(editor,node,args):node},$_j6l1k5xjducwoao={process:process},removeAttrs=function(node,names){$_2dw1bj4jducwn6g.each(names,function(name){node.attr(name,null)})},addFontToSpansFilter=function(domParser,styles,fontSizes){domParser.addNodeFilter("font",function(nodes){$_2dw1bj4jducwn6g.each(nodes,function(node){var props=styles.parse(node.attr("style")),color=node.attr("color"),face=node.attr("face"),size=node.attr("size");color&&(props.color=color),face&&(props["font-family"]=face),size&&(props["font-size"]=fontSizes[parseInt(node.attr("size"),10)-1]),node.name="span",node.attr("style",styles.serialize(props)),removeAttrs(node,["color","face","size"])})})},addStrikeToSpanFilter=function(domParser,styles){domParser.addNodeFilter("strike",function(nodes){$_2dw1bj4jducwn6g.each(nodes,function(node){var props=styles.parse(node.attr("style"));props["text-decoration"]="line-through",node.name="span",node.attr("style",styles.serialize(props))})})},addFilters=function(domParser,settings){var styles=Styles();settings.convert_fonts_to_spans&&addFontToSpansFilter(domParser,styles,$_8i2houjjducwnd2.explode(settings.font_size_legacy_values)),addStrikeToSpanFilter(domParser,styles)},register$1=function(domParser,settings){settings.inline_styles&&addFilters(domParser,settings)},$_bpec6l5zjducwobh={register:register$1},whiteSpaceRegExp$3=/^[ \t\r\n]*$/,typeLookup={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},walk$3=function(node,root,prev){var sibling,parent,startName=prev?"lastChild":"firstChild",siblingName=prev?"prev":"next";if(node[startName])return node[startName];if(node!==root){if(sibling=node[siblingName])return sibling;for(parent=node.parent;parent&&parent!==root;parent=parent.parent)if(sibling=parent[siblingName])return sibling}},Node$2=function(){function Node(name,type){this.name=name,this.type=type,1===type&&(this.attributes=[],this.attributes.map={})}return Node.create=function(name,attrs){var node,attrName;if(node=new Node(name,typeLookup[name]||1),attrs)for(attrName in attrs)node.attr(attrName,attrs[attrName]);return node},Node.prototype.replace=function(node){var self=this;return node.parent&&node.remove(),self.insert(node,self),self.remove(),self},Node.prototype.attr=function(name,value){var attrs,i,self=this;if("string"!=typeof name){for(i in name)self.attr(i,name[i]);return self}if(attrs=self.attributes){if(void 0!==value){if(null===value){if(name in attrs.map)for(delete attrs.map[name],i=attrs.length;i--;)if(attrs[i].name===name)return attrs=attrs.splice(i,1),self;return self}if(name in attrs.map){for(i=attrs.length;i--;)if(attrs[i].name===name){attrs[i].value=value;break}}else attrs.push({name:name,value:value});return attrs.map[name]=value,self}return attrs.map[name]}},Node.prototype.clone=function(){var i,l,selfAttrs,selfAttr,cloneAttrs,self=this,clone=new Node(self.name,self.type);if(selfAttrs=self.attributes){for(cloneAttrs=[],cloneAttrs.map={},i=0,l=selfAttrs.length;i<l;i++)selfAttr=selfAttrs[i],"id"!==selfAttr.name&&(cloneAttrs[cloneAttrs.length]={name:selfAttr.name,value:selfAttr.value},cloneAttrs.map[selfAttr.name]=selfAttr.value);clone.attributes=cloneAttrs}return clone.value=self.value,clone.shortEnded=self.shortEnded,clone},Node.prototype.wrap=function(wrapper){var self=this;return self.parent.insert(wrapper,self),wrapper.append(self),self},Node.prototype.unwrap=function(){var node,next,self=this;for(node=self.firstChild;node;)next=node.next,self.insert(node,self,!0),node=next;self.remove()},Node.prototype.remove=function(){var self=this,parent=self.parent,next=self.next,prev=self.prev;return parent&&(parent.firstChild===self?(parent.firstChild=next,next&&(next.prev=null)):prev.next=next,parent.lastChild===self?(parent.lastChild=prev,prev&&(prev.next=null)):next.prev=prev,self.parent=self.next=self.prev=null),self},Node.prototype.append=function(node){var last,self=this;return node.parent&&node.remove(),last=self.lastChild,last?(last.next=node,node.prev=last,self.lastChild=node):self.lastChild=self.firstChild=node,node.parent=self,node},Node.prototype.insert=function(node,refNode,before){var parent;return node.parent&&node.remove(),parent=refNode.parent||this,before?(refNode===parent.firstChild?parent.firstChild=node:refNode.prev.next=node,node.prev=refNode.prev,node.next=refNode,refNode.prev=node):(refNode===parent.lastChild?parent.lastChild=node:refNode.next.prev=node,node.next=refNode.next,node.prev=refNode,refNode.next=node),node.parent=parent,node},Node.prototype.getAll=function(name){var node,self=this,collection=[];for(node=self.firstChild;node;node=walk$3(node,self))node.name===name&&collection.push(node);return collection},Node.prototype.empty=function(){var nodes,i,node,self=this;if(self.firstChild){for(nodes=[],node=self.firstChild;node;node=walk$3(node,self))nodes.push(node);for(i=nodes.length;i--;)node=nodes[i],node.parent=node.firstChild=node.lastChild=node.next=node.prev=null}return self.firstChild=self.lastChild=null,self},Node.prototype.isEmpty=function(elements,whitespace,predicate){var i,name,self=this,node=self.firstChild;if(whitespace=whitespace||{},node)do{if(1===node.type){if(node.attributes.map["data-mce-bogus"])continue;if(elements[node.name])return!1;for(i=node.attributes.length;i--;)if("name"===(name=node.attributes[i].name)||0===name.indexOf("data-mce-bookmark"))return!1}if(8===node.type)return!1;if(3===node.type&&!whiteSpaceRegExp$3.test(node.value))return!1;if(3===node.type&&node.parent&&whitespace[node.parent.name]&&whiteSpaceRegExp$3.test(node.value))return!1;if(predicate&&predicate(node))return!1}while(node=walk$3(node,self));return!0},Node.prototype.walk=function(prev){return walk$3(this,null,prev)},Node}(),paddEmptyNode=function(settings,args,blockElements,node){(settings.padd_empty_with_br||args.insert)&&blockElements[node.name]?node.empty().append(new Node$2("br",1)).shortEnded=!0:node.empty().append(new Node$2("#text",3)).value=" "},isPaddedWithNbsp=function(node){return hasOnlyChild(node,"#text")&&" "===node.firstChild.value},hasOnlyChild=function(node,name){return node&&node.firstChild&&node.firstChild===node.lastChild&&node.firstChild.name===name},isPadded=function(schema,node){var rule=schema.getElementRule(node.name);return rule&&rule.paddEmpty},isEmpty$1=function(schema,nonEmptyElements,whitespaceElements,node){return node.isEmpty(nonEmptyElements,whitespaceElements,function(node){return isPadded(schema,node)})},isLineBreakNode=function(node,blockElements){return node&&(blockElements[node.name]||"br"===node.name)},register$2=function(parser,settings){var schema=parser.schema;settings.remove_trailing_brs&&parser.addNodeFilter("br",function(nodes,_,args){var i,node,parent,lastParent,prev,prevName,elementRule,textNode,l=nodes.length,blockElements=$_8i2houjjducwnd2.extend({},schema.getBlockElements()),nonEmptyElements=schema.getNonEmptyElements(),whiteSpaceElements=schema.getNonEmptyElements();for(blockElements.body=1,i=0;i<l;i++)if(node=nodes[i],parent=node.parent,blockElements[node.parent.name]&&node===parent.lastChild){for(prev=node.prev;prev;){if("span"!==(prevName=prev.name)||"bookmark"!==prev.attr("data-mce-type")){if("br"!==prevName)break;if("br"===prevName){node=null;break}}prev=prev.prev}node&&(node.remove(),isEmpty$1(schema,nonEmptyElements,whiteSpaceElements,parent)&&(elementRule=schema.getElementRule(parent.name))&&(elementRule.removeEmpty?parent.remove():elementRule.paddEmpty&&paddEmptyNode(settings,args,blockElements,parent)))}else{for(lastParent=node;parent&&parent.firstChild===lastParent&&parent.lastChild===lastParent&&(lastParent=parent,!blockElements[parent.name]);)parent=parent.parent;lastParent===parent&&settings.padd_empty_with_br!==!0&&(textNode=new Node$2("#text",3),textNode.value=" ",node.replace(textNode))}}),parser.addAttributeFilter("href",function(nodes){var node,i=nodes.length,appendRel=function(rel){return rel.split(" ").filter(function(p){return p.length>0}).concat(["noopener"]).sort().join(" ")};if(!settings.allow_unsafe_link_target)for(;i--;)node=nodes[i],"a"===node.name&&"_blank"===node.attr("target")&&node.attr("rel",function(rel){var newRel=rel?$_8i2houjjducwnd2.trim(rel):"";return/\b(noopener)\b/g.test(newRel)?newRel:appendRel(newRel)}(node.attr("rel")))}),settings.allow_html_in_named_anchor||parser.addAttributeFilter("id,name",function(nodes){for(var sibling,prevSibling,parent,node,i=nodes.length;i--;)if(node=nodes[i],"a"===node.name&&node.firstChild&&!node.attr("href")){parent=node.parent,sibling=node.lastChild;do{prevSibling=sibling.prev,parent.insert(sibling,node),sibling=prevSibling}while(sibling)}}),settings.fix_list_elements&&parser.addNodeFilter("ul,ol",function(nodes){for(var node,parentNode,i=nodes.length;i--;)if(node=nodes[i],parentNode=node.parent,"ul"===parentNode.name||"ol"===parentNode.name)if(node.prev&&"li"===node.prev.name)node.prev.append(node);else{var li=new Node$2("li",1);li.attr("style","list-style-type: none"),node.wrap(li)}}),settings.validate&&schema.getValidClasses()&&parser.addAttributeFilter("class",function(nodes){for(var node,classList,ci,className,classValue,validClassesMap,valid,i=nodes.length,validClasses=schema.getValidClasses();i--;){for(node=nodes[i],classList=node.attr("class").split(" "),classValue="",ci=0;ci<classList.length;ci++)className=classList[ci],valid=!1,validClassesMap=validClasses["*"],validClassesMap&&validClassesMap[className]&&(valid=!0),validClassesMap=validClasses[node.name],!valid&&validClassesMap&&validClassesMap[className]&&(valid=!0),valid&&(classValue&&(classValue+=" "),classValue+=className);classValue.length||(classValue=null),node.attr("class",classValue)}})},makeMap$4=$_8i2houjjducwnd2.makeMap,each$19=$_8i2houjjducwnd2.each,explode$4=$_8i2houjjducwnd2.explode,extend$3=$_8i2houjjducwnd2.extend,addTempAttr=function(htmlParser,tempAttrs,name){$_8i2houjjducwnd2.inArray(tempAttrs,name)===-1&&(htmlParser.addAttributeFilter(name,function(nodes,name){for(var i=nodes.length;i--;)nodes[i].attr(name,null)}),tempAttrs.push(name))},postProcess$1=function(editor,args,content){if(!args.no_events&&editor){return $_zfmxp5vjducwoaf.firePostProcess(editor,$_7sum4s5ujducwoab.merge(args,{content:content})).content}return content},getHtmlFromNode=function(dom,node,args){var html=$_fz0k4u21jducwnmu.trim(args.getInner?node.innerHTML:dom.getOuterHTML(node));return args.selection?html:$_8i2houjjducwnd2.trim(html)},parseHtml=function(htmlParser,dom,html,args){var parserArgs=args.selection?$_7sum4s5ujducwoab.merge({forced_root_block:!1},args):args,rootNode=htmlParser.parse(html,parserArgs);return $_7ho7i95wjducwoaj.trimTrailingBr(rootNode),rootNode},serializeNode=function(settings,schema,node){return HtmlSerializer(settings,schema).serialize(node)},toHtml=function(editor,settings,schema,rootNode,args){var content=serializeNode(settings,schema,rootNode);return postProcess$1(editor,args,content)},findBlockCaretContainer=function(editor){return $_eh73s937jducwns3.descendant($_5s4uzoyjducwngo.fromDom(editor.getBody()),"*[data-mce-caret]").fold($_60qu7r6jducwn73.constant(null),function(elm){return elm.dom()})},removeIeControlRect=function(editor){editor.selection.setRng(editor.selection.getRng())},showBlockCaretContainer=function(editor,blockCaretContainer){blockCaretContainer.hasAttribute("data-mce-caret")&&(showCaretContainerBlock(blockCaretContainer),removeIeControlRect(editor),editor.selection.scrollIntoView(blockCaretContainer))},handleBlockContainer=function(editor,e){var blockCaretContainer=findBlockCaretContainer(editor);if(blockCaretContainer)return"compositionstart"===e.type?(e.preventDefault(),e.stopPropagation(),void showBlockCaretContainer(editor,blockCaretContainer)):void(hasContent(blockCaretContainer)&&showBlockCaretContainer(editor,blockCaretContainer))},setup$5=function(editor){editor.on("keyup compositionstart",$_60qu7r6jducwn73.curry(handleBlockContainer,editor))},$_cmllon63jducwoc2={setup:setup$5};!function(BookmarkManager){BookmarkManager.isBookmarkNode=$_dcl0u12jjducwnp0.isBookmarkNode}(BookmarkManager||(BookmarkManager={}));var BookmarkManager$1=BookmarkManager,isContentEditableFalse$10=$_fj238m1qjducwnjm.isContentEditableFalse,isContentEditableTrue$6=$_fj238m1qjducwnjm.isContentEditableTrue,getContentEditableRoot$1=function(root,node){for(;node&&node!==root;){if(isContentEditableTrue$6(node)||isContentEditableFalse$10(node))return node;node=node.parentNode}return null},ControlSelection=function(selection,editor){var selectedElm,selectedElmGhost,resizeHelper,resizeHandles,selectedHandle,startX,startY,selectedElmX,selectedElmY,startW,startH,ratio,resizeStarted,width,height,startScrollWidth,startScrollHeight,dom=editor.dom,each=$_8i2houjjducwnd2.each,editableDoc=editor.getDoc(),rootDocument=document,abs=Math.abs,round=Math.round,rootElement=editor.getBody();resizeHandles={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var rootClass=".mce-content-body";editor.contentStyles.push(rootClass+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: content-box;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+rootClass+" .mce-resizehandle:hover {background: #000}"+rootClass+" img[data-mce-selected],"+rootClass+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+rootClass+" .mce-clonedresizable {position: absolute;"+($_cum1kc9jducwn99.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+rootClass+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}");var isImage=function(elm){return elm&&("IMG"===elm.nodeName||editor.dom.is(elm,"figure.image"))},isEventOnImageOutsideRange=function(evt,range){return isImage(evt.target)&&!$_cy7fd256jducwo68.isXYWithinRange(evt.clientX,evt.clientY,range)},contextMenuSelectImage=function(evt){var target=evt.target;isEventOnImageOutsideRange(evt,editor.selection.getRng())&&!evt.isDefaultPrevented()&&(evt.preventDefault(),editor.selection.select(target))},getResizeTarget=function(elm){return editor.dom.is(elm,"figure.image")?elm.querySelector("img"):elm},isResizable=function(elm){var selector=editor.settings.object_resizing;return selector!==!1&&!$_cum1kc9jducwn99.iOS&&("string"!=typeof selector&&(selector="table,img,figure.image,div"),"false"!==elm.getAttribute("data-mce-resize")&&(elm!==editor.getBody()&&$_3yrc4b1fjducwnim.is($_5s4uzoyjducwngo.fromDom(elm),selector)))},resizeGhostElement=function(e){var deltaX,deltaY,proportional,resizeHelperX,resizeHelperY;deltaX=e.screenX-startX,deltaY=e.screenY-startY,width=deltaX*selectedHandle[2]+startW,height=deltaY*selectedHandle[3]+startH,width=width<5?5:width,height=height<5?5:height,proportional=isImage(selectedElm)&&editor.settings.resize_img_proportional!==!1?!$_1xm2zi59jducwo6l.modifierPressed(e):$_1xm2zi59jducwo6l.modifierPressed(e)||isImage(selectedElm)&&selectedHandle[2]*selectedHandle[3]!=0,proportional&&(abs(deltaX)>abs(deltaY)?(height=round(width*ratio),width=round(height/ratio)):(width=round(height/ratio),height=round(width*ratio))),dom.setStyles(getResizeTarget(selectedElmGhost),{width:width,height:height}),resizeHelperX=selectedHandle.startPos.x+deltaX,resizeHelperY=selectedHandle.startPos.y+deltaY,resizeHelperX=resizeHelperX>0?resizeHelperX:0,resizeHelperY=resizeHelperY>0?resizeHelperY:0,dom.setStyles(resizeHelper,{left:resizeHelperX,top:resizeHelperY,display:"block"}),resizeHelper.innerHTML=width+" &times; "+height,selectedHandle[2]<0&&selectedElmGhost.clientWidth<=width&&dom.setStyle(selectedElmGhost,"left",selectedElmX+(startW-width)),selectedHandle[3]<0&&selectedElmGhost.clientHeight<=height&&dom.setStyle(selectedElmGhost,"top",selectedElmY+(startH-height)),deltaX=rootElement.scrollWidth-startScrollWidth,deltaY=rootElement.scrollHeight-startScrollHeight,deltaX+deltaY!==0&&dom.setStyles(resizeHelper,{left:resizeHelperX-deltaX,top:resizeHelperY-deltaY}),resizeStarted||(editor.fire("ObjectResizeStart",{target:selectedElm,width:startW,height:startH}),resizeStarted=!0)},endGhostResize=function(){resizeStarted=!1;var setSizeProp=function(name,value){value&&(selectedElm.style[name]||!editor.schema.isValid(selectedElm.nodeName.toLowerCase(),name)?dom.setStyle(getResizeTarget(selectedElm),name,value):dom.setAttrib(getResizeTarget(selectedElm),name,value))};setSizeProp("width",width),setSizeProp("height",height),dom.unbind(editableDoc,"mousemove",resizeGhostElement),dom.unbind(editableDoc,"mouseup",endGhostResize),rootDocument!==editableDoc&&(dom.unbind(rootDocument,"mousemove",resizeGhostElement),dom.unbind(rootDocument,"mouseup",endGhostResize)),dom.remove(selectedElmGhost),dom.remove(resizeHelper),showResizeRect(selectedElm),editor.fire("ObjectResized",{target:selectedElm,width:width,height:height}),
dom.setAttrib(selectedElm,"style",dom.getAttrib(selectedElm,"style")),editor.nodeChanged()},showResizeRect=function(targetElm){var position,targetWidth,targetHeight,e,rect;hideResizeRect(),unbindResizeHandleEvents(),position=dom.getPos(targetElm,rootElement),selectedElmX=position.x,selectedElmY=position.y,rect=targetElm.getBoundingClientRect(),targetWidth=rect.width||rect.right-rect.left,targetHeight=rect.height||rect.bottom-rect.top,selectedElm!==targetElm&&(selectedElm=targetElm,width=height=0),e=editor.fire("ObjectSelected",{target:targetElm}),isResizable(targetElm)&&!e.isDefaultPrevented()?each(resizeHandles,function(handle,name){var handleElm,startDrag=function(e){startX=e.screenX,startY=e.screenY,startW=getResizeTarget(selectedElm).clientWidth,startH=getResizeTarget(selectedElm).clientHeight,ratio=startH/startW,selectedHandle=handle,handle.startPos={x:targetWidth*handle[0]+selectedElmX,y:targetHeight*handle[1]+selectedElmY},startScrollWidth=rootElement.scrollWidth,startScrollHeight=rootElement.scrollHeight,selectedElmGhost=selectedElm.cloneNode(!0),dom.addClass(selectedElmGhost,"mce-clonedresizable"),dom.setAttrib(selectedElmGhost,"data-mce-bogus","all"),selectedElmGhost.contentEditable=!1,selectedElmGhost.unSelectabe=!0,dom.setStyles(selectedElmGhost,{left:selectedElmX,top:selectedElmY,margin:0}),selectedElmGhost.removeAttribute("data-mce-selected"),rootElement.appendChild(selectedElmGhost),dom.bind(editableDoc,"mousemove",resizeGhostElement),dom.bind(editableDoc,"mouseup",endGhostResize),rootDocument!==editableDoc&&(dom.bind(rootDocument,"mousemove",resizeGhostElement),dom.bind(rootDocument,"mouseup",endGhostResize)),resizeHelper=dom.add(rootElement,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},startW+" &times; "+startH)};handleElm=dom.get("mceResizeHandle"+name),handleElm&&dom.remove(handleElm),handleElm=dom.add(rootElement,"div",{id:"mceResizeHandle"+name,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+name+"-resize; margin:0; padding:0"}),$_cum1kc9jducwn99.ie&&(handleElm.contentEditable=!1),dom.bind(handleElm,"mousedown",function(e){e.stopImmediatePropagation(),e.preventDefault(),startDrag(e)}),handle.elm=handleElm,dom.setStyles(handleElm,{left:targetWidth*handle[0]+selectedElmX-handleElm.offsetWidth/2,top:targetHeight*handle[1]+selectedElmY-handleElm.offsetHeight/2})}):hideResizeRect(),selectedElm.setAttribute("data-mce-selected","1")},hideResizeRect=function(){var name,handleElm;unbindResizeHandleEvents(),selectedElm&&selectedElm.removeAttribute("data-mce-selected");for(name in resizeHandles)(handleElm=dom.get("mceResizeHandle"+name))&&(dom.unbind(handleElm),dom.remove(handleElm))},updateResizeRect=function(e){var startElm,controlElm,isChildOrEqual=function(node,parent){if(node)do{if(node===parent)return!0}while(node=node.parentNode)};if(!resizeStarted&&!editor.removed){if(each(dom.select("img[data-mce-selected],hr[data-mce-selected]"),function(img){img.removeAttribute("data-mce-selected")}),controlElm="mousedown"===e.type?e.target:selection.getNode(),controlElm=dom.$(controlElm).closest("table,img,figure.image,hr")[0],isChildOrEqual(controlElm,rootElement)&&(disableGeckoResize(),startElm=selection.getStart(!0),isChildOrEqual(startElm,controlElm)&&isChildOrEqual(selection.getEnd(!0),controlElm)))return void showResizeRect(controlElm);hideResizeRect()}},isWithinContentEditableFalse=function(elm){return isContentEditableFalse$10(getContentEditableRoot$1(editor.getBody(),elm))},unbindResizeHandleEvents=function(){for(var name_1 in resizeHandles){var handle=resizeHandles[name_1];handle.elm&&(dom.unbind(handle.elm),delete handle.elm)}},disableGeckoResize=function(){try{editor.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(ex){}};editor.on("init",function(){disableGeckoResize(),$_cum1kc9jducwn99.ie&&$_cum1kc9jducwn99.ie>=11&&(editor.on("mousedown click",function(e){var target=e.target,nodeName=target.nodeName;resizeStarted||!/^(TABLE|IMG|HR)$/.test(nodeName)||isWithinContentEditableFalse(target)||(2!==e.button&&editor.selection.select(target,"TABLE"===nodeName),"mousedown"===e.type&&editor.nodeChanged())}),editor.dom.bind(rootElement,"mscontrolselect",function(e){var delayedSelect=function(node){$_83mf8ygjducwnbc.setEditorTimeout(editor,function(){editor.selection.select(node)})};if(isWithinContentEditableFalse(e.target))return e.preventDefault(),void delayedSelect(e.target);/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"===e.target.tagName&&delayedSelect(e.target))}));var throttledUpdateResizeRect=$_83mf8ygjducwnbc.throttle(function(e){editor.composing||updateResizeRect(e)});editor.on("nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged",throttledUpdateResizeRect),editor.on("keyup compositionend",function(e){selectedElm&&"TABLE"===selectedElm.nodeName&&throttledUpdateResizeRect(e)}),editor.on("hide blur",hideResizeRect),editor.on("contextmenu",contextMenuSelectImage)}),editor.on("remove",unbindResizeHandleEvents);var destroy=function(){selectedElm=selectedElmGhost=null};return{isResizable:isResizable,showResizeRect:showResizeRect,hideResizeRect:hideResizeRect,updateResizeRect:updateResizeRect,destroy:destroy}},getPos$1=function(elm){for(var x=0,y=0,offsetParent=elm;offsetParent&&offsetParent.nodeType;)x+=offsetParent.offsetLeft||0,y+=offsetParent.offsetTop||0,offsetParent=offsetParent.offsetParent;return{x:x,y:y}},fireScrollIntoViewEvent=function(editor,elm,alignToTop){var scrollEvent={elm:elm,alignToTop:alignToTop};return editor.fire("scrollIntoView",scrollEvent),scrollEvent.isDefaultPrevented()},scrollIntoView=function(editor,elm,alignToTop){var y,viewPort,viewPortY,viewPortH,dom=editor.dom,root=dom.getRoot(),offsetY=0;if(!fireScrollIntoViewEvent(editor,elm,alignToTop)&&$_fj238m1qjducwnjm.isElement(elm)){if(alignToTop===!1&&(offsetY=elm.offsetHeight),"BODY"!==root.nodeName){var scrollContainer=editor.selection.getScrollContainer();if(scrollContainer)return y=getPos$1(elm).y-getPos$1(scrollContainer).y+offsetY,viewPortH=scrollContainer.clientHeight,viewPortY=scrollContainer.scrollTop,void((y<viewPortY||y+25>viewPortY+viewPortH)&&(scrollContainer.scrollTop=y<viewPortY?y:y-viewPortH+25))}viewPort=dom.getViewPort(editor.getWin()),y=dom.getPos(elm).y+offsetY,viewPortY=viewPort.y,viewPortH=viewPort.h,(y<viewPort.y||y+25>viewPortY+viewPortH)&&editor.getWin().scrollTo(0,y<viewPortY?y:y-viewPortH+25)}},$_7yly5s67jducwode={scrollIntoView:scrollIntoView},hasCeProperty=function(node){return $_fj238m1qjducwnjm.isContentEditableTrue(node)||$_fj238m1qjducwnjm.isContentEditableFalse(node)},findParent$1=function(node,rootNode,predicate){for(;node&&node!==rootNode;){if(predicate(node))return node;node=node.parentNode}return null},findClosestIeRange=function(clientX,clientY,doc){var element,rng,rects;if(element=doc.elementFromPoint(clientX,clientY),rng=doc.body.createTextRange(),element&&"HTML"!==element.tagName||(element=doc.body),rng.moveToElementText(element),rects=$_8i2houjjducwnd2.toArray(rng.getClientRects()),rects=rects.sort(function(a,b){return a=Math.abs(Math.max(a.top-clientY,a.bottom-clientY)),b=Math.abs(Math.max(b.top-clientY,b.bottom-clientY)),a-b}),rects.length>0){clientY=(rects[0].bottom+rects[0].top)/2;try{return rng.moveToPoint(clientX,clientY),rng.collapse(!0),rng}catch(ex){}}return null},moveOutOfContentEditableFalse=function(rng,rootNode){var parentElement=rng&&rng.parentElement?rng.parentElement():null;return $_fj238m1qjducwnjm.isContentEditableFalse(findParent$1(parentElement,rootNode,hasCeProperty))?null:rng},fromPoint$1=function(clientX,clientY,doc){var rng,point,pointDoc=doc;if(pointDoc.caretPositionFromPoint)(point=pointDoc.caretPositionFromPoint(clientX,clientY))&&(rng=doc.createRange(),rng.setStart(point.offsetNode,point.offset),rng.collapse(!0));else if(doc.caretRangeFromPoint)rng=doc.caretRangeFromPoint(clientX,clientY);else if(pointDoc.body.createTextRange){rng=pointDoc.body.createTextRange();try{rng.moveToPoint(clientX,clientY),rng.collapse(!0)}catch(ex){rng=findClosestIeRange(clientX,clientY,doc)}return moveOutOfContentEditableFalse(rng,doc.body)}return rng},$_ghraby68jducwodg={fromPoint:fromPoint$1},processRanges=function(editor,ranges){return $_2dw1bj4jducwn6g.map(ranges,function(range){var evt=editor.fire("GetSelectionRange",{range:range});return evt.range!==range?evt.range:range})},$_at5d1y69jducwodi={processRanges:processRanges},clone$2=function(original,deep){return $_5s4uzoyjducwngo.fromDom(original.dom().cloneNode(deep))},shallow$1=function(original){return clone$2(original,!1)},deep$1=function(original){return clone$2(original,!0)},shallowAs=function(original,tag){var nu=$_5s4uzoyjducwngo.fromTag(tag),attributes=$_60196814jducwnhd.clone(original);return $_60196814jducwnhd.setAll(nu,attributes),nu},copy$1=function(original,tag){var nu=shallowAs(original,tag),cloneChildren=$_f0qt4317jducwnhq.children(deep$1(original));return $_ehpp912qjducwnq3.append(nu,cloneChildren),nu},mutate=function(original,tag){var nu=shallowAs(original,tag);$_ejmufn2ojducwnpy.before(original,nu);var children=$_f0qt4317jducwnhq.children(original);return $_ehpp912qjducwnq3.append(nu,children),$_34vweg2pjducwnq0.remove(original),nu},$_pck3w6cjducwoe4={shallow:shallow$1,shallowAs:shallowAs,deep:deep$1,copy:copy$1,mutate:mutate},fromElements=function(elements,scope){var doc=scope||document,fragment=doc.createDocumentFragment();return $_2dw1bj4jducwn6g.each(elements,function(element){fragment.appendChild(element.dom())}),$_5s4uzoyjducwngo.fromDom(fragment)},$_4i1qfz6djducwoe7={fromElements:fromElements},getStartNode=function(rng){var sc=rng.startContainer,so=rng.startOffset;return $_fj238m1qjducwnjm.isText(sc)?0===so?Option.some($_5s4uzoyjducwngo.fromDom(sc)):Option.none():Option.from(sc.childNodes[so]).map($_5s4uzoyjducwngo.fromDom)},getEndNode=function(rng){var ec=rng.endContainer,eo=rng.endOffset;return $_fj238m1qjducwnjm.isText(ec)?eo===ec.data.length?Option.some($_5s4uzoyjducwngo.fromDom(ec)):Option.none():Option.from(ec.childNodes[eo-1]).map($_5s4uzoyjducwngo.fromDom)},getFirstChildren=function(node){return $_f0qt4317jducwnhq.firstChild(node).fold($_60qu7r6jducwn73.constant([node]),function(child){return[node].concat(getFirstChildren(child))})},getLastChildren$1=function(node){return $_f0qt4317jducwnhq.lastChild(node).fold($_60qu7r6jducwn73.constant([node]),function(child){return"br"===$_47qy15zjducwngt.name(child)?$_f0qt4317jducwnhq.prevSibling(child).map(function(sibling){return[node].concat(getLastChildren$1(sibling))}).getOr([]):[node].concat(getLastChildren$1(child))})},hasAllContentsSelected=function(elm,rng){return $_87ppqy2ejducwnol.liftN([getStartNode(rng),getEndNode(rng)],function(startNode,endNode){var start=$_2dw1bj4jducwn6g.find(getFirstChildren(elm),$_60qu7r6jducwn73.curry($_4qdq5m1djducwnie.eq,startNode)),end=$_2dw1bj4jducwn6g.find(getLastChildren$1(elm),$_60qu7r6jducwn73.curry($_4qdq5m1djducwnie.eq,endNode));return start.isSome()&&end.isSome()}).getOr(!1)},moveEndPoint$1=function(dom,rng,node,start){var root=node,walker=new TreeWalker(node,root),nonEmptyElementsMap=dom.schema.getNonEmptyElements();do{if(3===node.nodeType&&0!==$_8i2houjjducwnd2.trim(node.nodeValue).length)return void(start?rng.setStart(node,0):rng.setEnd(node,node.nodeValue.length));if(nonEmptyElementsMap[node.nodeName]&&!/^(TD|TH)$/.test(node.nodeName))return void(start?rng.setStartBefore(node):"BR"===node.nodeName?rng.setEndBefore(node):rng.setEndAfter(node));if($_cum1kc9jducwn99.ie&&$_cum1kc9jducwn99.ie<11&&dom.isBlock(node)&&dom.isEmpty(node))return void(start?rng.setStart(node,0):rng.setEnd(node,0))}while(node=start?walker.next():walker.prev());"BODY"===root.nodeName&&(start?rng.setStart(root,0):rng.setEnd(root,root.childNodes.length))},tableModel=$_295afp18jducwni4.immutable("element","width","rows"),tableRow=$_295afp18jducwni4.immutable("element","cells"),cellPosition=$_295afp18jducwni4.immutable("x","y"),getSpan=function(td,key){var value=parseInt($_60196814jducwnhd.get(td,key),10);return isNaN(value)?1:value},fillout=function(table,x,y,tr,td){for(var rowspan=getSpan(td,"rowspan"),colspan=getSpan(td,"colspan"),rows=table.rows(),y2=y;y2<y+rowspan;y2++){rows[y2]||(rows[y2]=tableRow($_pck3w6cjducwoe4.deep(tr),[]));for(var x2=x;x2<x+colspan;x2++){rows[y2].cells()[x2]=y2===y&&x2===x?td:$_pck3w6cjducwoe4.shallow(td)}}},cellExists=function(table,x,y){var rows=table.rows();return!!(rows[y]?rows[y].cells():[])[x]},skipCellsX=function(table,x,y){for(;cellExists(table,x,y);)x++;return x},getWidth=function(rows){return $_2dw1bj4jducwn6g.foldl(rows,function(acc,row){return row.cells().length>acc?row.cells().length:acc},0)},findElementPos=function(table,element){for(var rows=table.rows(),y=0;y<rows.length;y++)for(var cells=rows[y].cells(),x=0;x<cells.length;x++)if($_4qdq5m1djducwnie.eq(cells[x],element))return Option.some(cellPosition(x,y));return Option.none()},extractRows=function(table,sx,sy,ex,ey){for(var newRows=[],rows=table.rows(),y=sy;y<=ey;y++){var cells=rows[y].cells(),slice=sx<ex?cells.slice(sx,ex+1):cells.slice(ex,sx+1);newRows.push(tableRow(rows[y].element(),slice))}return newRows},subTable=function(table,startPos,endPos){var sx=startPos.x(),sy=startPos.y(),ex=endPos.x(),ey=endPos.y(),newRows=sy<ey?extractRows(table,sx,sy,ex,ey):extractRows(table,sx,ey,ex,sy);return tableModel(table.element(),getWidth(newRows),newRows)},createDomTable=function(table,rows){var tableElement=$_pck3w6cjducwoe4.shallow(table.element()),tableBody=$_5s4uzoyjducwngo.fromTag("tbody");return $_ehpp912qjducwnq3.append(tableBody,rows),$_ejmufn2ojducwnpy.append(tableElement,tableBody),tableElement},modelRowsToDomRows=function(table){return $_2dw1bj4jducwn6g.map(table.rows(),function(row){var cells=$_2dw1bj4jducwn6g.map(row.cells(),function(cell){var td=$_pck3w6cjducwoe4.deep(cell);return $_60196814jducwnhd.remove(td,"colspan"),$_60196814jducwnhd.remove(td,"rowspan"),td}),tr=$_pck3w6cjducwoe4.shallow(row.element());return $_ehpp912qjducwnq3.append(tr,cells),tr})},fromDom$1=function(tableElm){var table=tableModel($_pck3w6cjducwoe4.shallow(tableElm),0,[]);return $_2dw1bj4jducwn6g.each($_47k8tx2gjducwnot.descendants(tableElm,"tr"),function(tr,y){$_2dw1bj4jducwn6g.each($_47k8tx2gjducwnot.descendants(tr,"td,th"),function(td,x){fillout(table,skipCellsX(table,x,y),y,tr,td)})}),tableModel(table.element(),getWidth(table.rows()),table.rows())},toDom=function(table){return createDomTable(table,modelRowsToDomRows(table))},subsection=function(table,startElement,endElement){return findElementPos(table,startElement).bind(function(startPos){return findElementPos(table,endElement).map(function(endPos){return subTable(table,startPos,endPos)})})},$_7f9nl26fjducwoeq={fromDom:fromDom$1,toDom:toDom,subsection:subsection},findParentListContainer=function(parents){return $_2dw1bj4jducwn6g.find(parents,function(elm){return"ul"===$_47qy15zjducwngt.name(elm)||"ol"===$_47qy15zjducwngt.name(elm)})},getFullySelectedListWrappers=function(parents,rng){return $_2dw1bj4jducwn6g.find(parents,function(elm){return"li"===$_47qy15zjducwngt.name(elm)&&hasAllContentsSelected(elm,rng)}).fold($_60qu7r6jducwn73.constant([]),function(li){return findParentListContainer(parents).map(function(listCont){return[$_5s4uzoyjducwngo.fromTag("li"),$_5s4uzoyjducwngo.fromTag($_47qy15zjducwngt.name(listCont))]}).getOr([])})},wrap$3=function(innerElm,elms){var wrapped=$_2dw1bj4jducwn6g.foldl(elms,function(acc,elm){return $_ejmufn2ojducwnpy.append(elm,acc),elm},innerElm);return elms.length>0?$_4i1qfz6djducwoe7.fromElements([wrapped]):wrapped},directListWrappers=function(commonAnchorContainer){return isListItem(commonAnchorContainer)?$_f0qt4317jducwnhq.parent(commonAnchorContainer).filter(isList).fold($_60qu7r6jducwn73.constant([]),function(listElm){return[commonAnchorContainer,listElm]}):isList(commonAnchorContainer)?[commonAnchorContainer]:[]},getWrapElements=function(rootNode,rng){var commonAnchorContainer=$_5s4uzoyjducwngo.fromDom(rng.commonAncestorContainer),parents=$_b22jto39jducwnsg.parentsAndSelf(commonAnchorContainer,rootNode),wrapElements=$_2dw1bj4jducwn6g.filter(parents,function(elm){return isInline(elm)||isHeading(elm)}),listWrappers=getFullySelectedListWrappers(parents,rng),allWrappers=wrapElements.concat(listWrappers.length?listWrappers:directListWrappers(commonAnchorContainer));return $_2dw1bj4jducwn6g.map(allWrappers,$_pck3w6cjducwoe4.shallow)},emptyFragment=function(){return $_4i1qfz6djducwoe7.fromElements([])},getFragmentFromRange=function(rootNode,rng){return wrap$3($_5s4uzoyjducwngo.fromDom(rng.cloneContents()),getWrapElements(rootNode,rng))},getParentTable=function(rootElm,cell){return $_eh73s937jducwns3.ancestor(cell,"table",$_60qu7r6jducwn73.curry($_4qdq5m1djducwnie.eq,rootElm))},getTableFragment=function(rootNode,selectedTableCells){return getParentTable(rootNode,selectedTableCells[0]).bind(function(tableElm){var firstCell=selectedTableCells[0],lastCell=selectedTableCells[selectedTableCells.length-1],fullTableModel=$_7f9nl26fjducwoeq.fromDom(tableElm);return $_7f9nl26fjducwoeq.subsection(fullTableModel,firstCell,lastCell).map(function(sectionedTableModel){return $_4i1qfz6djducwoe7.fromElements([$_7f9nl26fjducwoeq.toDom(sectionedTableModel)])})}).getOrThunk(emptyFragment)},getSelectionFragment=function(rootNode,ranges){return ranges.length>0&&ranges[0].collapsed?emptyFragment():getFragmentFromRange(rootNode,ranges[0])},read$3=function(rootNode,ranges){var selectedCells=$_7ksohe3ujducwnvz.getCellsFromElementOrRanges(ranges,rootNode);return selectedCells.length>0?getTableFragment(rootNode,selectedCells):getSelectionFragment(rootNode,ranges)},$_32ri926bjducwodq={read:read$3},getContent=function(editor,args){var fragment,rng=editor.selection.getRng(),tmpElm=editor.dom.create("body"),sel=editor.selection.getSel(),ranges=$_at5d1y69jducwodi.processRanges(editor,$_bqfspz3vjducwnw3.getRanges(sel));if(args=args||{},args.get=!0,args.format=args.format||"html",args.selection=!0,args=editor.fire("BeforeGetContent",args),args.isDefaultPrevented())return editor.fire("GetContent",args),args.content;if("text"===args.format)return editor.selection.isCollapsed()?"":$_fz0k4u21jducwnmu.trim(rng.text||(sel.toString?sel.toString():""));rng.cloneContents?(fragment=args.contextual?$_32ri926bjducwodq.read($_5s4uzoyjducwngo.fromDom(editor.getBody()),ranges).dom():rng.cloneContents())&&tmpElm.appendChild(fragment):void 0!==rng.item||void 0!==rng.htmlText?(tmpElm.innerHTML="<br>"+(rng.item?rng.item(0).outerHTML:rng.htmlText),tmpElm.removeChild(tmpElm.firstChild)):tmpElm.innerHTML=rng.toString(),args.getInner=!0;var content=editor.selection.serializer.serialize(tmpElm,args);return"tree"===args.format?content:(args.content=editor.selection.isCollapsed()?"":content,editor.fire("GetContent",args),args.content)},$_dtdsc16ajducwodl={getContent:getContent},setContent=function(editor,content,args){var caretNode,frag,temp,rng=editor.selection.getRng(),doc=editor.getDoc();if(args=args||{format:"html"},args.set=!0,args.selection=!0,args.content=content,!args.no_events&&(args=editor.fire("BeforeSetContent",args),args.isDefaultPrevented()))return void editor.fire("SetContent",args);if(content=args.content,rng.insertNode){content+='<span id="__caret">_</span>',rng.startContainer===doc&&rng.endContainer===doc?doc.body.innerHTML=content:(rng.deleteContents(),0===doc.body.childNodes.length?doc.body.innerHTML=content:rng.createContextualFragment?rng.insertNode(rng.createContextualFragment(content)):(frag=doc.createDocumentFragment(),temp=doc.createElement("div"),frag.appendChild(temp),temp.outerHTML=content,rng.insertNode(frag))),caretNode=editor.dom.get("__caret"),rng=doc.createRange(),rng.setStartBefore(caretNode),rng.setEndBefore(caretNode),editor.selection.setRng(rng),editor.dom.remove("__caret");try{editor.selection.setRng(rng)}catch(ex){}}else rng.item&&(doc.execCommand("Delete",!1,null),rng=editor.getRng()),/^\s+/.test(content)?(rng.pasteHTML('<span id="__mce_tmp">_</span>'+content),editor.dom.remove("__mce_tmp")):rng.pasteHTML(content);args.no_events||editor.fire("SetContent",args)},$_83khmf6gjducwof2={setContent:setContent},getEndpointElement=function(root,rng,start,real,resolve){var container=start?rng.startContainer:rng.endContainer,offset=start?rng.startOffset:rng.endOffset;return Option.from(container).map($_5s4uzoyjducwngo.fromDom).map(function(elm){return real&&rng.collapsed?elm:$_f0qt4317jducwnhq.child(elm,resolve(elm,offset)).getOr(elm)}).bind(function(elm){return $_47qy15zjducwngt.isElement(elm)?Option.some(elm):$_f0qt4317jducwnhq.parent(elm)}).map(function(elm){return elm.dom()}).getOr(root)},getStart$2=function(root,rng,real){return getEndpointElement(root,rng,!0,real,function(elm,offset){return Math.min($_f0qt4317jducwnhq.childNodesCount(elm),offset)})},getEnd=function(root,rng,real){return getEndpointElement(root,rng,!1,real,function(elm,offset){return offset>0?offset-1:offset})},skipEmptyTextNodes=function(node,forwards){for(var orig=node;node&&$_fj238m1qjducwnjm.isText(node)&&0===node.length;)node=forwards?node.nextSibling:node.previousSibling;return node||orig},getNode$1=function(root,rng){var elm,startContainer,endContainer,startOffset,endOffset;return rng?(startContainer=rng.startContainer,endContainer=rng.endContainer,startOffset=rng.startOffset,endOffset=rng.endOffset,elm=rng.commonAncestorContainer,!rng.collapsed&&(startContainer===endContainer&&endOffset-startOffset<2&&startContainer.hasChildNodes()&&(elm=startContainer.childNodes[startOffset]),3===startContainer.nodeType&&3===endContainer.nodeType&&(startContainer=startContainer.length===startOffset?skipEmptyTextNodes(startContainer.nextSibling,!0):startContainer.parentNode,endContainer=0===endOffset?skipEmptyTextNodes(endContainer.previousSibling,!1):endContainer.parentNode,startContainer&&startContainer===endContainer))?startContainer:elm&&3===elm.nodeType?elm.parentNode:elm):root},getSelectedBlocks=function(dom,rng,startElm,endElm){var node,root,selectedBlocks=[];if(root=dom.getRoot(),startElm=dom.getParent(startElm||getStart$2(root,rng,!1),dom.isBlock),endElm=dom.getParent(endElm||getEnd(root,rng,!1),dom.isBlock),startElm&&startElm!==root&&selectedBlocks.push(startElm),startElm&&endElm&&startElm!==endElm){node=startElm;for(var walker=new TreeWalker(startElm,root);(node=walker.next())&&node!==endElm;)dom.isBlock(node)&&selectedBlocks.push(node)}return endElm&&startElm!==endElm&&endElm!==root&&selectedBlocks.push(endElm),selectedBlocks},select$1=function(dom,node,content){return Option.from(node).map(function(node){var idx=dom.nodeIndex(node),rng=dom.createRng();return rng.setStart(node.parentNode,idx),rng.setEnd(node.parentNode,idx+1),content&&(moveEndPoint$1(dom,rng,node,!0),moveEndPoint$1(dom,rng,node,!1)),rng})},each$20=$_8i2houjjducwnd2.each,isNativeIeSelection=function(rng){return!!rng.select},isAttachedToDom=function(node){return!(!node||!node.ownerDocument)&&$_4qdq5m1djducwnie.contains($_5s4uzoyjducwngo.fromDom(node.ownerDocument),$_5s4uzoyjducwngo.fromDom(node))},isValidRange=function(rng){return!!rng&&(!!isNativeIeSelection(rng)||isAttachedToDom(rng.startContainer)&&isAttachedToDom(rng.endContainer))},Selection$1=function(dom,win,serializer,editor){var bookmarkManager,controlSelection,selectedRange,explicitRange,selectorChangedData,setCursorLocation=function(node,offset){var rng=dom.createRng();node?(rng.setStart(node,offset),rng.setEnd(node,offset),setRng(rng),collapse(!1)):(moveEndPoint$1(dom,rng,editor.getBody(),!0),setRng(rng))},getContent=function(args){return $_dtdsc16ajducwodl.getContent(editor,args)},setContent=function(content,args){return $_83khmf6gjducwof2.setContent(editor,content,args)},getStart=function(real){return getStart$2(editor.getBody(),getRng(),real)},getEnd$$1=function(real){return getEnd(editor.getBody(),getRng(),real)},getBookmark=function(type,normalized){return bookmarkManager.getBookmark(type,normalized)},moveToBookmark=function(bookmark){return bookmarkManager.moveToBookmark(bookmark)},select=function(node,content){return select$1(dom,node,content).each(setRng),node},isCollapsed=function(){var rng=getRng(),sel=getSel();return!(!rng||rng.item)&&(rng.compareEndPoints?0===rng.compareEndPoints("StartToEnd",rng):!sel||rng.collapsed)},collapse=function(toStart){var rng=getRng();rng.collapse(!!toStart),setRng(rng)},getSel=function(){return win.getSelection?win.getSelection():win.document.selection},getRng=function(){var selection,rng,elm,doc,tryCompareBoundaryPoints=function(how,sourceRange,destinationRange){try{return sourceRange.compareBoundaryPoints(how,destinationRange)}catch(ex){return-1}};if(!win)return null;if(void 0===(doc=win.document)||null===doc)return null;if(void 0!==editor.bookmark&&$_egbtag48jducwo0y.hasFocus(editor)===!1){var bookmark=$_exyelv3zjducwnzi.getRng(editor);if(bookmark.isSome())return bookmark.map(function(r){return $_at5d1y69jducwodi.processRanges(editor,[r])[0]}).getOr(doc.createRange())}try{(selection=getSel())&&(rng=selection.rangeCount>0?selection.getRangeAt(0):selection.createRange?selection.createRange():doc.createRange())}catch(ex){}return rng=$_at5d1y69jducwodi.processRanges(editor,[rng])[0],rng||(rng=doc.createRange?doc.createRange():doc.body.createTextRange()),rng.setStart&&9===rng.startContainer.nodeType&&rng.collapsed&&(elm=dom.getRoot(),rng.setStart(elm,0),rng.setEnd(elm,0)),selectedRange&&explicitRange&&(0===tryCompareBoundaryPoints(rng.START_TO_START,rng,selectedRange)&&0===tryCompareBoundaryPoints(rng.END_TO_END,rng,selectedRange)?rng=explicitRange:(selectedRange=null,explicitRange=null)),rng},setRng=function(rng,forward){var sel,node,evt;if(isValidRange(rng)){var ieRange=isNativeIeSelection(rng)?rng:null;if(ieRange){explicitRange=null;try{ieRange.select()}catch(ex){}}else{if(sel=getSel(),evt=editor.fire("SetSelectionRange",{range:rng,forward:forward}),rng=evt.range,sel){explicitRange=rng;try{sel.removeAllRanges(),sel.addRange(rng)}catch(ex){}forward===!1&&sel.extend&&(sel.collapse(rng.endContainer,rng.endOffset),sel.extend(rng.startContainer,rng.startOffset)),selectedRange=sel.rangeCount>0?sel.getRangeAt(0):null}rng.collapsed||rng.startContainer!==rng.endContainer||!sel.setBaseAndExtent||$_cum1kc9jducwn99.ie||rng.endOffset-rng.startOffset<2&&rng.startContainer.hasChildNodes()&&(node=rng.startContainer.childNodes[rng.startOffset])&&"IMG"===node.tagName&&(sel.setBaseAndExtent(rng.startContainer,rng.startOffset,rng.endContainer,rng.endOffset),sel.anchorNode===rng.startContainer&&sel.focusNode===rng.endContainer||sel.setBaseAndExtent(node,0,node,1)),editor.fire("AfterSetSelectionRange",{range:rng,forward:forward})}}},setNode=function(elm){return setContent(dom.getOuterHTML(elm)),elm},getNode=function(){return getNode$1(editor.getBody(),getRng())},getSelectedBlocks$$1=function(startElm,endElm){return getSelectedBlocks(dom,getRng(),startElm,endElm)},isForward=function(){var anchorRange,focusRange,sel=getSel();return!(sel&&sel.anchorNode&&sel.focusNode)||(anchorRange=dom.createRng(),anchorRange.setStart(sel.anchorNode,sel.anchorOffset),anchorRange.collapse(!0),focusRange=dom.createRng(),focusRange.setStart(sel.focusNode,sel.focusOffset),focusRange.collapse(!0),anchorRange.compareBoundaryPoints(anchorRange.START_TO_START,focusRange)<=0)},normalize=function(){var rng=getRng();if(!$_bqfspz3vjducwnw3.hasMultipleRanges(getSel())){var normRng=$_altsby3xjducwnz5.normalize(dom,rng);return normRng.each(function(normRng){setRng(normRng,isForward())}),normRng.getOr(rng)}return rng},selectorChanged=function(selector,callback){var currentSelectors;return selectorChangedData||(selectorChangedData={},currentSelectors={},editor.on("NodeChange",function(e){var node=e.element,parents=dom.getParents(node,null,dom.getRoot()),matchedSelectors={};each$20(selectorChangedData,function(callbacks,selector){each$20(parents,function(node){if(dom.is(node,selector))return currentSelectors[selector]||(each$20(callbacks,function(callback){callback(!0,{node:node,selector:selector,parents:parents})}),currentSelectors[selector]=callbacks),matchedSelectors[selector]=callbacks,!1})}),each$20(currentSelectors,function(callbacks,selector){matchedSelectors[selector]||(delete currentSelectors[selector],each$20(callbacks,function(callback){callback(!1,{node:node,selector:selector,parents:parents})}))})})),selectorChangedData[selector]||(selectorChangedData[selector]=[]),selectorChangedData[selector].push(callback),exports},getScrollContainer=function(){for(var scrollContainer,node=dom.getRoot();node&&"BODY"!==node.nodeName;){if(node.scrollHeight>node.clientHeight){scrollContainer=node;break}node=node.parentNode}return scrollContainer},scrollIntoView=function(elm,alignToTop){return $_7yly5s67jducwode.scrollIntoView(editor,elm,alignToTop)},placeCaretAt=function(clientX,clientY){return setRng($_ghraby68jducwodg.fromPoint(clientX,clientY,editor.getDoc()))},getBoundingClientRect=function(){var rng=getRng();return rng.collapsed?CaretPosition$1.fromRangeStart(rng).getClientRects()[0]:rng.getBoundingClientRect()},destroy=function(){win=null,controlSelection.destroy()},exports={bookmarkManager:null,controlSelection:null,dom:dom,win:win,serializer:serializer,editor:editor,collapse:collapse,setCursorLocation:setCursorLocation,getContent:getContent,setContent:setContent,getBookmark:getBookmark,moveToBookmark:moveToBookmark,select:select,isCollapsed:isCollapsed,isForward:isForward,setNode:setNode,getNode:getNode,getSel:getSel,setRng:setRng,getRng:getRng,getStart:getStart,getEnd:getEnd$$1,getSelectedBlocks:getSelectedBlocks$$1,normalize:normalize,selectorChanged:selectorChanged,getScrollContainer:getScrollContainer,scrollIntoView:scrollIntoView,placeCaretAt:placeCaretAt,getBoundingClientRect:getBoundingClientRect,destroy:destroy};return bookmarkManager=BookmarkManager$1(exports),controlSelection=ControlSelection(exports,editor),exports.bookmarkManager=bookmarkManager,exports.controlSelection=controlSelection,exports},isContentEditableFalse$11=$_fj238m1qjducwnjm.isContentEditableFalse,getSelectedNode$1=getSelectedNode,isAfterContentEditableFalse$2=isAfterContentEditableFalse,isBeforeContentEditableFalse$2=isBeforeContentEditableFalse,getVisualCaretPosition=function(walkFn,caretPosition){for(;caretPosition=walkFn(caretPosition);)if(caretPosition.isVisible())return caretPosition;return caretPosition},isMoveInsideSameBlock=function(from,to){var inSameBlock=isInSameBlock(from,to);return!(inSameBlock||!$_fj238m1qjducwnjm.isBr(from.getNode()))||inSameBlock},moveToCeFalseHorizontally=function(direction,editor,getNextPosFn,range){var node,caretPosition,peekCaretPosition,rangeIsInContainerBlock,forwards=direction===HDirection.Forwards,isBeforeContentEditableFalseFn=forwards?isBeforeContentEditableFalse$2:isAfterContentEditableFalse$2;return!range.collapsed&&(node=getSelectedNode$1(range),isContentEditableFalse$11(node))?showCaret(direction,editor,node,direction===HDirection.Backwards):(rangeIsInContainerBlock=isRangeInCaretContainerBlock(range),caretPosition=getNormalizedRangeEndPoint(direction,editor.getBody(),range),isBeforeContentEditableFalseFn(caretPosition)?selectNode(editor,caretPosition.getNode(!forwards)):(caretPosition=getNextPosFn(caretPosition))?isBeforeContentEditableFalseFn(caretPosition)?showCaret(direction,editor,caretPosition.getNode(!forwards),forwards):(peekCaretPosition=getNextPosFn(caretPosition),isBeforeContentEditableFalseFn(peekCaretPosition)&&isMoveInsideSameBlock(caretPosition,peekCaretPosition)?showCaret(direction,editor,peekCaretPosition.getNode(!forwards),forwards):rangeIsInContainerBlock?renderRangeCaret(editor,caretPosition.toRange()):null):rangeIsInContainerBlock?range:null)},moveToCeFalseVertically=function(direction,editor,walkerFn,range){var caretPosition,linePositions,nextLinePositions,closestNextLineRect,caretClientRect,clientX,dist1,dist2,contentEditableFalseNode;if(contentEditableFalseNode=getSelectedNode$1(range),caretPosition=getNormalizedRangeEndPoint(direction,editor.getBody(),range),linePositions=walkerFn(editor.getBody(),isAboveLine(1),caretPosition),
nextLinePositions=$_e6e6g1kjducwnfd.filter(linePositions,isLine(1)),caretClientRect=$_e6e6g1kjducwnfd.last(caretPosition.getClientRects()),(isBeforeContentEditableFalse$2(caretPosition)||isBeforeTable(caretPosition))&&(contentEditableFalseNode=caretPosition.getNode()),(isAfterContentEditableFalse$2(caretPosition)||isAfterTable(caretPosition))&&(contentEditableFalseNode=caretPosition.getNode(!0)),!caretClientRect)return null;if(clientX=caretClientRect.left,(closestNextLineRect=findClosestClientRect(nextLinePositions,clientX))&&isContentEditableFalse$11(closestNextLineRect.node))return dist1=Math.abs(clientX-closestNextLineRect.left),dist2=Math.abs(clientX-closestNextLineRect.right),showCaret(direction,editor,closestNextLineRect.node,dist1<dist2);if(contentEditableFalseNode){var caretPositions=positionsUntil(direction,editor.getBody(),isAboveLine(1),contentEditableFalseNode);if(closestNextLineRect=findClosestClientRect($_e6e6g1kjducwnfd.filter(caretPositions,isLine(1)),clientX))return renderRangeCaret(editor,closestNextLineRect.position.toRange());if(closestNextLineRect=$_e6e6g1kjducwnfd.last($_e6e6g1kjducwnfd.filter(caretPositions,isLine(0))))return renderRangeCaret(editor,closestNextLineRect.position.toRange())}},createTextBlock=function(editor){var textBlock=editor.dom.create(editor.settings.forced_root_block);return(!$_cum1kc9jducwn99.ie||$_cum1kc9jducwn99.ie>=11)&&(textBlock.innerHTML='<br data-mce-bogus="1">'),textBlock},exitPreBlock=function(editor,direction,range){var pre,caretPos,newBlock,caretWalker=CaretWalker(editor.getBody()),getNextVisualCaretPosition=$_6183wb25jducwnn2.curry(getVisualCaretPosition,caretWalker.next),getPrevVisualCaretPosition=$_6183wb25jducwnn2.curry(getVisualCaretPosition,caretWalker.prev);if(range.collapsed&&editor.settings.forced_root_block){if(!(pre=editor.dom.getParent(range.startContainer,"PRE")))return;caretPos=1===direction?getNextVisualCaretPosition(CaretPosition$1.fromRangeStart(range)):getPrevVisualCaretPosition(CaretPosition$1.fromRangeStart(range)),caretPos||(newBlock=createTextBlock(editor),1===direction?editor.$(pre).after(newBlock):editor.$(pre).before(newBlock),editor.selection.select(newBlock,!0),editor.selection.collapse())}},getHorizontalRange=function(editor,forward){var newRange,caretWalker=CaretWalker(editor.getBody()),getNextVisualCaretPosition=$_6183wb25jducwnn2.curry(getVisualCaretPosition,caretWalker.next),getPrevVisualCaretPosition=$_6183wb25jducwnn2.curry(getVisualCaretPosition,caretWalker.prev),direction=forward?HDirection.Forwards:HDirection.Backwards,getNextPosFn=forward?getNextVisualCaretPosition:getPrevVisualCaretPosition,range=editor.selection.getRng();return(newRange=moveToCeFalseHorizontally(direction,editor,getNextPosFn,range))?newRange:(newRange=exitPreBlock(editor,direction,range),newRange?newRange:null)},getVerticalRange=function(editor,down){var newRange,direction=down?1:-1,walkerFn=down?downUntil:upUntil,range=editor.selection.getRng();return(newRange=moveToCeFalseVertically(direction,editor,walkerFn,range))?newRange:(newRange=exitPreBlock(editor,direction,range),newRange?newRange:null)},moveH$1=function(editor,forward){return function(){var newRng=getHorizontalRange(editor,forward);return!!newRng&&(editor.selection.setRng(newRng),!0)}},moveV$1=function(editor,down){return function(){var newRng=getVerticalRange(editor,down);return!!newRng&&(editor.selection.setRng(newRng),!0)}},defaultPatterns=function(patterns){return $_2dw1bj4jducwn6g.map(patterns,function(pattern){return $_7sum4s5ujducwoab.merge({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:$_60qu7r6jducwn73.noop},pattern)})},matchesEvent=function(pattern,evt){return evt.keyCode===pattern.keyCode&&evt.shiftKey===pattern.shiftKey&&evt.altKey===pattern.altKey&&evt.ctrlKey===pattern.ctrlKey&&evt.metaKey===pattern.metaKey},match$1=function(patterns,evt){return $_2dw1bj4jducwn6g.bind(defaultPatterns(patterns),function(pattern){return matchesEvent(pattern,evt)?[pattern]:[]})},action=function(f){for(var x=[],_i=1;_i<arguments.length;_i++)x[_i-1]=arguments[_i];var args=Array.prototype.slice.call(arguments,1);return function(){return f.apply(null,args)}},execute=function(patterns,evt){return $_2dw1bj4jducwn6g.find(match$1(patterns,evt),function(pattern){return pattern.action()})},$_acfmrn6ljducwog1={match:match$1,action:action,execute:execute},executeKeydownOverride=function(editor,caret,evt){var os=$_5hshlmmjducwnfr.detect().os;$_acfmrn6ljducwog1.execute([{keyCode:$_1xm2zi59jducwo6l.RIGHT,action:moveH$1(editor,!0)},{keyCode:$_1xm2zi59jducwo6l.LEFT,action:moveH$1(editor,!1)},{keyCode:$_1xm2zi59jducwo6l.UP,action:moveV$1(editor,!1)},{keyCode:$_1xm2zi59jducwo6l.DOWN,action:moveV$1(editor,!0)},{keyCode:$_1xm2zi59jducwo6l.RIGHT,action:moveH(editor,!0)},{keyCode:$_1xm2zi59jducwo6l.LEFT,action:moveH(editor,!1)},{keyCode:$_1xm2zi59jducwo6l.UP,action:moveV(editor,!1)},{keyCode:$_1xm2zi59jducwo6l.DOWN,action:moveV(editor,!0)},{keyCode:$_1xm2zi59jducwo6l.RIGHT,action:$_41ufni3pjducwnv8.move(editor,caret,!0)},{keyCode:$_1xm2zi59jducwo6l.LEFT,action:$_41ufni3pjducwnv8.move(editor,caret,!1)},{keyCode:$_1xm2zi59jducwo6l.RIGHT,ctrlKey:!os.isOSX(),altKey:os.isOSX(),action:$_41ufni3pjducwnv8.moveNextWord(editor,caret)},{keyCode:$_1xm2zi59jducwo6l.LEFT,ctrlKey:!os.isOSX(),altKey:os.isOSX(),action:$_41ufni3pjducwnv8.movePrevWord(editor,caret)}],evt).each(function(_){evt.preventDefault()})},setup$6=function(editor,caret){editor.on("keydown",function(evt){evt.isDefaultPrevented()===!1&&executeKeydownOverride(editor,caret,evt)})},$_fdi5rz6jjducwofn={setup:setup$6},getParentInlines=function(rootElm,startElm){var parents=$_b22jto39jducwnsg.parentsAndSelf(startElm,rootElm);return $_2dw1bj4jducwn6g.findIndex(parents,isBlock).fold($_60qu7r6jducwn73.constant(parents),function(index){return parents.slice(0,index)})},hasOnlyOneChild$1=function(elm){return 1===$_f0qt4317jducwnhq.children(elm).length},deleteLastPosition=function(forward,editor,target,parentInlines){var isFormatElement=$_60qu7r6jducwn73.curry($_gizh813jjducwnu6.isFormatElement,editor),formatNodes=$_2dw1bj4jducwn6g.map($_2dw1bj4jducwn6g.filter(parentInlines,isFormatElement),function(elm){return elm.dom()});if(0===formatNodes.length)$_92j5pe3ejducwnta.deleteElement(editor,forward,target);else{var pos=$_gizh813jjducwnu6.replaceWithCaretFormat(target.dom(),formatNodes);editor.selection.setRng(pos.toRange())}},deleteCaret$1=function(editor,forward){var rootElm=$_5s4uzoyjducwngo.fromDom(editor.getBody()),startElm=$_5s4uzoyjducwngo.fromDom(editor.selection.getStart()),parentInlines=$_2dw1bj4jducwn6g.filter(getParentInlines(rootElm,startElm),hasOnlyOneChild$1);return $_2dw1bj4jducwn6g.last(parentInlines).map(function(target){var fromPos=CaretPosition$1.fromRangeStart(editor.selection.getRng());return!!$_5jcxyf2zjducwnqv.willDeleteLastPositionInElement(forward,fromPos,target.dom())&&(deleteLastPosition(forward,editor,target,parentInlines),!0)}).getOr(!1)},backspaceDelete$5=function(editor,forward){return!!editor.selection.isCollapsed()&&deleteCaret$1(editor,forward)},$_dtw1xc6njducwog7={backspaceDelete:backspaceDelete$5},executeKeydownOverride$1=function(editor,caret,evt){$_acfmrn6ljducwog1.execute([{keyCode:$_1xm2zi59jducwo6l.BACKSPACE,action:$_acfmrn6ljducwog1.action($_52c8ph3bjducwnsq.backspaceDelete,editor,!1)},{keyCode:$_1xm2zi59jducwo6l.DELETE,action:$_acfmrn6ljducwog1.action($_52c8ph3bjducwnsq.backspaceDelete,editor,!0)},{keyCode:$_1xm2zi59jducwo6l.BACKSPACE,action:$_acfmrn6ljducwog1.action($_a4ivlq3fjducwntl.backspaceDelete,editor,caret,!1)},{keyCode:$_1xm2zi59jducwo6l.DELETE,action:$_acfmrn6ljducwog1.action($_a4ivlq3fjducwntl.backspaceDelete,editor,caret,!0)},{keyCode:$_1xm2zi59jducwo6l.BACKSPACE,action:$_acfmrn6ljducwog1.action($_3kdgsv3ajducwnsk.backspaceDelete,editor,!1)},{keyCode:$_1xm2zi59jducwo6l.DELETE,action:$_acfmrn6ljducwog1.action($_3kdgsv3ajducwnsk.backspaceDelete,editor,!0)},{keyCode:$_1xm2zi59jducwo6l.BACKSPACE,action:$_acfmrn6ljducwog1.action($_d0w5iz2xjducwnqm.backspaceDelete,editor,!1)},{keyCode:$_1xm2zi59jducwo6l.DELETE,action:$_acfmrn6ljducwog1.action($_d0w5iz2xjducwnqm.backspaceDelete,editor,!0)},{keyCode:$_1xm2zi59jducwo6l.BACKSPACE,action:$_acfmrn6ljducwog1.action($_fo6mx3sjducwnvh.backspaceDelete,editor,!1)},{keyCode:$_1xm2zi59jducwo6l.DELETE,action:$_acfmrn6ljducwog1.action($_fo6mx3sjducwnvh.backspaceDelete,editor,!0)},{keyCode:$_1xm2zi59jducwo6l.BACKSPACE,action:$_acfmrn6ljducwog1.action($_dtw1xc6njducwog7.backspaceDelete,editor,!1)},{keyCode:$_1xm2zi59jducwo6l.DELETE,action:$_acfmrn6ljducwog1.action($_dtw1xc6njducwog7.backspaceDelete,editor,!0)}],evt).each(function(_){evt.preventDefault()})},executeKeyupOverride=function(editor,evt){$_acfmrn6ljducwog1.execute([{keyCode:$_1xm2zi59jducwo6l.BACKSPACE,action:$_acfmrn6ljducwog1.action($_52c8ph3bjducwnsq.paddEmptyElement,editor)},{keyCode:$_1xm2zi59jducwo6l.DELETE,action:$_acfmrn6ljducwog1.action($_52c8ph3bjducwnsq.paddEmptyElement,editor)}],evt)},setup$7=function(editor,caret){editor.on("keydown",function(evt){evt.isDefaultPrevented()===!1&&executeKeydownOverride$1(editor,caret,evt)}),editor.on("keyup",function(evt){evt.isDefaultPrevented()===!1&&executeKeyupOverride(editor,evt)})},$_2cbs3w6mjducwog5={setup:setup$7},getBodySetting=function(editor,name,defaultValue){var value=editor.getParam(name,defaultValue);if(value.indexOf("=")!==-1){var bodyObj=editor.getParam(name,"","hash");return bodyObj.hasOwnProperty(editor.id)?bodyObj[editor.id]:defaultValue}return value},getIframeAttrs=function(editor){return editor.getParam("iframe_attrs",{})},getDocType=function(editor){return editor.getParam("doctype","<!DOCTYPE html>")},getDocumentBaseUrl=function(editor){return editor.getParam("document_base_url","")},getBodyId=function(editor){return getBodySetting(editor,"body_id","tinymce")},getBodyClass=function(editor){return getBodySetting(editor,"body_class","")},getContentSecurityPolicy=function(editor){return editor.getParam("content_security_policy","")},shouldPutBrInPre=function(editor){return editor.getParam("br_in_pre",!0)},getForcedRootBlock=function(editor){if(editor.getParam("force_p_newlines",!1))return"p";var block=editor.getParam("forced_root_block","p");return block===!1?"":block},getForcedRootBlockAttrs=function(editor){return editor.getParam("forced_root_block_attrs",{})},getBrNewLineSelector=function(editor){return editor.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")},getNoNewLineSelector=function(editor){return editor.getParam("no_newline_selector","")},shouldKeepStyles=function(editor){return editor.getParam("keep_styles",!0)},shouldEndContainerOnEmtpyBlock=function(editor){return editor.getParam("end_container_on_empty_block",!1)},$_d8dkl56rjducwogt={getIframeAttrs:getIframeAttrs,getDocType:getDocType,getDocumentBaseUrl:getDocumentBaseUrl,getBodyId:getBodyId,getBodyClass:getBodyClass,getContentSecurityPolicy:getContentSecurityPolicy,shouldPutBrInPre:shouldPutBrInPre,getForcedRootBlock:getForcedRootBlock,getForcedRootBlockAttrs:getForcedRootBlockAttrs,getBrNewLineSelector:getBrNewLineSelector,getNoNewLineSelector:getNoNewLineSelector,shouldKeepStyles:shouldKeepStyles,shouldEndContainerOnEmtpyBlock:shouldEndContainerOnEmtpyBlock},firstNonWhiteSpaceNodeSibling=function(node){for(;node;){if(1===node.nodeType||3===node.nodeType&&node.data&&/[\r\n\s]/.test(node.data))return node;node=node.nextSibling}},moveToCaretPosition=function(editor,root){var walker,node,rng,lastNode=root,dom=editor.dom,moveCaretBeforeOnEnterElementsMap=editor.schema.getMoveCaretBeforeOnEnterElements();if(root){if(/^(LI|DT|DD)$/.test(root.nodeName)){var firstChild=firstNonWhiteSpaceNodeSibling(root.firstChild);firstChild&&/^(UL|OL|DL)$/.test(firstChild.nodeName)&&root.insertBefore(dom.doc.createTextNode(" "),root.firstChild)}if(rng=dom.createRng(),root.normalize(),root.hasChildNodes()){for(walker=new TreeWalker(root,root);node=walker.current();){if($_fj238m1qjducwnjm.isText(node)){rng.setStart(node,0),rng.setEnd(node,0);break}if(moveCaretBeforeOnEnterElementsMap[node.nodeName.toLowerCase()]){rng.setStartBefore(node),rng.setEndBefore(node);break}lastNode=node,node=walker.next()}node||(rng.setStart(lastNode,0),rng.setEnd(lastNode,0))}else $_fj238m1qjducwnjm.isBr(root)?root.nextSibling&&dom.isBlock(root.nextSibling)?(rng.setStartBefore(root),rng.setEndBefore(root)):(rng.setStartAfter(root),rng.setEndAfter(root)):(rng.setStart(root,0),rng.setEnd(root,0));editor.selection.setRng(rng),dom.remove(void 0),editor.selection.scrollIntoView(root)}},getEditableRoot=function(dom,node){var parent,editableRoot,root=dom.getRoot();for(parent=node;parent!==root&&"false"!==dom.getContentEditable(parent);)"true"===dom.getContentEditable(parent)&&(editableRoot=parent),parent=parent.parentNode;return parent!==root?editableRoot:root},getParentBlock$2=function(editor){return Option.from(editor.dom.getParent(editor.selection.getStart(!0),editor.dom.isBlock))},getParentBlockName=function(editor){return getParentBlock$2(editor).fold($_60qu7r6jducwn73.constant(""),function(parentBlock){return parentBlock.nodeName.toUpperCase()})},isListItemParentBlock=function(editor){return getParentBlock$2(editor).filter(function(elm){return isListItem($_5s4uzoyjducwngo.fromDom(elm))}).isSome()},$_8sw2ec6tjducwoh3={moveToCaretPosition:moveToCaretPosition,getEditableRoot:getEditableRoot,getParentBlock:getParentBlock$2,getParentBlockName:getParentBlockName,isListItemParentBlock:isListItemParentBlock},hasFirstChild=function(elm,name){return elm.firstChild&&elm.firstChild.nodeName===name},hasParent$1=function(elm,parentName){return elm&&elm.parentNode&&elm.parentNode.nodeName===parentName},isListBlock=function(elm){return elm&&/^(OL|UL|LI)$/.test(elm.nodeName)},isNestedList=function(elm){return isListBlock(elm)&&isListBlock(elm.parentNode)},getContainerBlock=function(containerBlock){var containerBlockParent=containerBlock.parentNode;return/^(LI|DT|DD)$/.test(containerBlockParent.nodeName)?containerBlockParent:containerBlock},isFirstOrLastLi=function(containerBlock,parentBlock,first){for(var node=containerBlock[first?"firstChild":"lastChild"];node&&!$_fj238m1qjducwnjm.isElement(node);)node=node[first?"nextSibling":"previousSibling"];return node===parentBlock},insert$1=function(editor,createNewBlock,containerBlock,parentBlock,newBlockName){var dom=editor.dom,rng=editor.selection.getRng();if(containerBlock!==editor.getBody()){isNestedList(containerBlock)&&(newBlockName="LI");var newBlock=newBlockName?createNewBlock(newBlockName):dom.create("BR");if(isFirstOrLastLi(containerBlock,parentBlock,!0)&&isFirstOrLastLi(containerBlock,parentBlock,!1))hasParent$1(containerBlock,"LI")?dom.insertAfter(newBlock,getContainerBlock(containerBlock)):dom.replace(newBlock,containerBlock);else if(isFirstOrLastLi(containerBlock,parentBlock,!0))hasParent$1(containerBlock,"LI")?(dom.insertAfter(newBlock,getContainerBlock(containerBlock)),newBlock.appendChild(dom.doc.createTextNode(" ")),newBlock.appendChild(containerBlock)):containerBlock.parentNode.insertBefore(newBlock,containerBlock);else if(isFirstOrLastLi(containerBlock,parentBlock,!1))dom.insertAfter(newBlock,getContainerBlock(containerBlock));else{containerBlock=getContainerBlock(containerBlock);var tmpRng=rng.cloneRange();tmpRng.setStartAfter(parentBlock),tmpRng.setEndAfter(containerBlock);var fragment=tmpRng.extractContents();"LI"===newBlockName&&hasFirstChild(fragment,"LI")?(newBlock=fragment.firstChild,dom.insertAfter(fragment,containerBlock)):(dom.insertAfter(fragment,containerBlock),dom.insertAfter(newBlock,containerBlock))}dom.remove(parentBlock),$_8sw2ec6tjducwoh3.moveToCaretPosition(editor,newBlock)}},$_dpgp6x6sjducwogx={insert:insert$1},isEmptyAnchor=function(elm){return elm&&"A"===elm.nodeName&&0===$_8i2houjjducwnd2.trim($_fz0k4u21jducwnmu.trim(elm.innerText||elm.textContent)).length},isTableCell$5=function(node){return node&&/^(TD|TH|CAPTION)$/.test(node.nodeName)},emptyBlock=function(elm){elm.innerHTML='<br data-mce-bogus="1">'},containerAndSiblingName=function(container,nodeName){return container.nodeName===nodeName||container.previousSibling&&container.previousSibling.nodeName===nodeName},canSplitBlock=function(dom,node){return node&&dom.isBlock(node)&&!/^(TD|TH|CAPTION|FORM)$/.test(node.nodeName)&&!/^(fixed|absolute)/i.test(node.style.position)&&"true"!==dom.getContentEditable(node)},trimInlineElementsOnLeftSideOfBlock=function(dom,nonEmptyElementsMap,block){var i,node=block,firstChilds=[];if(node){for(;node=node.firstChild;){if(dom.isBlock(node))return;$_fj238m1qjducwnjm.isElement(node)&&!nonEmptyElementsMap[node.nodeName.toLowerCase()]&&firstChilds.push(node)}for(i=firstChilds.length;i--;)node=firstChilds[i],!node.hasChildNodes()||node.firstChild===node.lastChild&&""===node.firstChild.nodeValue?dom.remove(node):isEmptyAnchor(node)&&dom.remove(node)}},normalizeZwspOffset=function(start,container,offset){return $_fj238m1qjducwnjm.isText(container)===!1?offset:start?1===offset&&container.data.charAt(offset-1)===$_fz0k4u21jducwnmu.ZWSP?0:offset:offset===container.data.length-1&&container.data.charAt(offset)===$_fz0k4u21jducwnmu.ZWSP?container.data.length:offset},includeZwspInRange=function(rng){var newRng=rng.cloneRange();return newRng.setStart(rng.startContainer,normalizeZwspOffset(!0,rng.startContainer,rng.startOffset)),newRng.setEnd(rng.endContainer,normalizeZwspOffset(!1,rng.endContainer,rng.endOffset)),newRng},trimLeadingLineBreaks=function(node){do{$_fj238m1qjducwnjm.isText(node)&&(node.nodeValue=node.nodeValue.replace(/^[\r\n]+/,"")),node=node.firstChild}while(node)},getEditableRoot$1=function(dom,node){var parent,editableRoot,root=dom.getRoot();for(parent=node;parent!==root&&"false"!==dom.getContentEditable(parent);)"true"===dom.getContentEditable(parent)&&(editableRoot=parent),parent=parent.parentNode;return parent!==root?editableRoot:root},setForcedBlockAttrs=function(editor,node){var forcedRootBlockName=$_d8dkl56rjducwogt.getForcedRootBlock(editor);forcedRootBlockName&&forcedRootBlockName.toLowerCase()===node.tagName.toLowerCase()&&editor.dom.setAttribs(node,$_d8dkl56rjducwogt.getForcedRootBlockAttrs(editor))},wrapSelfAndSiblingsInDefaultBlock=function(editor,newBlockName,rng,container,offset){var newBlock,parentBlock,startNode,node,next,rootBlockName,blockName=newBlockName||"P",dom=editor.dom,editableRoot=getEditableRoot$1(dom,container);if(!(parentBlock=dom.getParent(container,dom.isBlock))||!canSplitBlock(dom,parentBlock)){if(parentBlock=parentBlock||editableRoot,rootBlockName=parentBlock===editor.getBody()||isTableCell$5(parentBlock)?parentBlock.nodeName.toLowerCase():parentBlock.parentNode.nodeName.toLowerCase(),!parentBlock.hasChildNodes())return newBlock=dom.create(blockName),setForcedBlockAttrs(editor,newBlock),parentBlock.appendChild(newBlock),rng.setStart(newBlock,0),rng.setEnd(newBlock,0),newBlock;for(node=container;node.parentNode!==parentBlock;)node=node.parentNode;for(;node&&!dom.isBlock(node);)startNode=node,node=node.previousSibling;if(startNode&&editor.schema.isValidChild(rootBlockName,blockName.toLowerCase())){for(newBlock=dom.create(blockName),setForcedBlockAttrs(editor,newBlock),startNode.parentNode.insertBefore(newBlock,startNode),node=startNode;node&&!dom.isBlock(node);)next=node.nextSibling,newBlock.appendChild(node),node=next;rng.setStart(container,offset),rng.setEnd(container,offset)}}return container},addBrToBlockIfNeeded=function(dom,block){var lastChild;block.normalize(),(lastChild=block.lastChild)&&!/^(left|right)$/gi.test(dom.getStyle(lastChild,"float",!0))||dom.add(block,"br")},insert$2=function(editor,evt){var tmpRng,editableRoot,container,offset,parentBlock,shiftKey,newBlock,fragment,containerBlock,parentBlockName,containerBlockName,newBlockName,isAfterLastNodeInContainer,dom=editor.dom,schema=editor.schema,nonEmptyElementsMap=schema.getNonEmptyElements(),rng=editor.selection.getRng(),createNewBlock=function(name){var block,clonedNode,caretNode,node=container,textInlineElements=schema.getTextInlineElements();if(name||"TABLE"===parentBlockName||"HR"===parentBlockName?(block=dom.create(name||newBlockName),setForcedBlockAttrs(editor,block)):block=parentBlock.cloneNode(!1),caretNode=block,$_d8dkl56rjducwogt.shouldKeepStyles(editor)===!1)dom.setAttrib(block,"style",null),dom.setAttrib(block,"class",null);else do{if(textInlineElements[node.nodeName]){if($_gizh813jjducwnu6.isCaretNode(node))continue;clonedNode=node.cloneNode(!1),dom.setAttrib(clonedNode,"id",""),block.hasChildNodes()?(clonedNode.appendChild(block.firstChild),block.appendChild(clonedNode)):(caretNode=clonedNode,block.appendChild(clonedNode))}}while((node=node.parentNode)&&node!==editableRoot);return emptyBlock(caretNode),block},isCaretAtStartOrEndOfBlock=function(start){var walker,node,name,normalizedOffset;if(normalizedOffset=normalizeZwspOffset(start,container,offset),$_fj238m1qjducwnjm.isText(container)&&(start?normalizedOffset>0:normalizedOffset<container.nodeValue.length))return!1;if(container.parentNode===parentBlock&&isAfterLastNodeInContainer&&!start)return!0;if(start&&$_fj238m1qjducwnjm.isElement(container)&&container===parentBlock.firstChild)return!0;if(containerAndSiblingName(container,"TABLE")||containerAndSiblingName(container,"HR"))return isAfterLastNodeInContainer&&!start||!isAfterLastNodeInContainer&&start;for(walker=new TreeWalker(container,parentBlock),$_fj238m1qjducwnjm.isText(container)&&(start&&0===normalizedOffset?walker.prev():start||normalizedOffset!==container.nodeValue.length||walker.next());node=walker.current();){if($_fj238m1qjducwnjm.isElement(node)){if(!node.getAttribute("data-mce-bogus")&&(name=node.nodeName.toLowerCase(),nonEmptyElementsMap[name]&&"br"!==name))return!1}else if($_fj238m1qjducwnjm.isText(node)&&!/^[ \t\r\n]*$/.test(node.nodeValue))return!1;start?walker.prev():walker.next()}return!0},insertNewBlockAfter=function(){newBlock=/^(H[1-6]|PRE|FIGURE)$/.test(parentBlockName)&&"HGROUP"!==containerBlockName?createNewBlock(newBlockName):createNewBlock(),$_d8dkl56rjducwogt.shouldEndContainerOnEmtpyBlock(editor)&&canSplitBlock(dom,containerBlock)&&dom.isEmpty(parentBlock)?newBlock=dom.split(containerBlock,parentBlock):dom.insertAfter(newBlock,parentBlock),$_8sw2ec6tjducwoh3.moveToCaretPosition(editor,newBlock)};if($_altsby3xjducwnz5.normalize(dom,rng).each(function(normRng){rng.setStart(normRng.startContainer,normRng.startOffset),rng.setEnd(normRng.endContainer,normRng.endOffset)}),container=rng.startContainer,offset=rng.startOffset,newBlockName=$_d8dkl56rjducwogt.getForcedRootBlock(editor),shiftKey=evt.shiftKey,$_fj238m1qjducwnjm.isElement(container)&&container.hasChildNodes()&&(isAfterLastNodeInContainer=offset>container.childNodes.length-1,container=container.childNodes[Math.min(offset,container.childNodes.length-1)]||container,offset=isAfterLastNodeInContainer&&$_fj238m1qjducwnjm.isText(container)?container.nodeValue.length:0),editableRoot=getEditableRoot$1(dom,container)){if((newBlockName&&!shiftKey||!newBlockName&&shiftKey)&&(container=wrapSelfAndSiblingsInDefaultBlock(editor,newBlockName,rng,container,offset)),parentBlock=dom.getParent(container,dom.isBlock),containerBlock=parentBlock?dom.getParent(parentBlock.parentNode,dom.isBlock):null,parentBlockName=parentBlock?parentBlock.nodeName.toUpperCase():"",containerBlockName=containerBlock?containerBlock.nodeName.toUpperCase():"","LI"!==containerBlockName||evt.ctrlKey||(parentBlock=containerBlock,containerBlock=containerBlock.parentNode,parentBlockName=containerBlockName),/^(LI|DT|DD)$/.test(parentBlockName)&&dom.isEmpty(parentBlock))return void $_dpgp6x6sjducwogx.insert(editor,createNewBlock,containerBlock,parentBlock,newBlockName);newBlockName&&parentBlock===editor.getBody()||(newBlockName=newBlockName||"P",isCaretContainerBlock(parentBlock)?(newBlock=showCaretContainerBlock(parentBlock),dom.isEmpty(parentBlock)&&emptyBlock(parentBlock),$_8sw2ec6tjducwoh3.moveToCaretPosition(editor,newBlock)):isCaretAtStartOrEndOfBlock()?insertNewBlockAfter():isCaretAtStartOrEndOfBlock(!0)?(newBlock=parentBlock.parentNode.insertBefore(createNewBlock(),parentBlock),$_8sw2ec6tjducwoh3.moveToCaretPosition(editor,containerAndSiblingName(parentBlock,"HR")?newBlock:parentBlock)):(tmpRng=includeZwspInRange(rng).cloneRange(),tmpRng.setEndAfter(parentBlock),fragment=tmpRng.extractContents(),trimLeadingLineBreaks(fragment),newBlock=fragment.firstChild,dom.insertAfter(fragment,parentBlock),trimInlineElementsOnLeftSideOfBlock(dom,nonEmptyElementsMap,newBlock),addBrToBlockIfNeeded(dom,parentBlock),dom.isEmpty(parentBlock)&&emptyBlock(parentBlock),newBlock.normalize(),dom.isEmpty(newBlock)?(dom.remove(newBlock),insertNewBlockAfter()):$_8sw2ec6tjducwoh3.moveToCaretPosition(editor,newBlock)),dom.setAttrib(newBlock,"id",""),editor.fire("NewBlock",{newBlock:newBlock}))}},$_8i6vic6qjducwogh={insert:insert$2},matchesSelector=function(editor,selector){return $_8sw2ec6tjducwoh3.getParentBlock(editor).filter(function(parentBlock){return selector.length>0&&$_3yrc4b1fjducwnim.is($_5s4uzoyjducwngo.fromDom(parentBlock),selector)}).isSome()},shouldInsertBr=function(editor){return matchesSelector(editor,$_d8dkl56rjducwogt.getBrNewLineSelector(editor))},shouldBlockNewLine=function(editor){return matchesSelector(editor,$_d8dkl56rjducwogt.getNoNewLineSelector(editor))},$_8a308n6vjducwohj={shouldInsertBr:shouldInsertBr,shouldBlockNewLine:shouldBlockNewLine},newLineAction=$_elh5kq3djducwnt6.generate([{br:[]},{block:[]},{none:[]}]),shouldBlockNewLine$1=function(editor,shiftKey){return $_8a308n6vjducwohj.shouldBlockNewLine(editor)},isBrMode=function(requiredState){return function(editor,shiftKey){return""===$_d8dkl56rjducwogt.getForcedRootBlock(editor)===requiredState}},inListBlock=function(requiredState){return function(editor,shiftKey){return $_8sw2ec6tjducwoh3.isListItemParentBlock(editor)===requiredState}},inPreBlock=function(requiredState){return function(editor,shiftKey){return"PRE"===$_8sw2ec6tjducwoh3.getParentBlockName(editor)===requiredState}},shouldPutBrInPre$1=function(requiredState){return function(editor,shiftKey){return $_d8dkl56rjducwogt.shouldPutBrInPre(editor)===requiredState}},inBrContext=function(editor,shiftKey){return $_8a308n6vjducwohj.shouldInsertBr(editor)},hasShiftKey=function(editor,shiftKey){return shiftKey},canInsertIntoEditableRoot=function(editor){var forcedRootBlock=$_d8dkl56rjducwogt.getForcedRootBlock(editor),rootEditable=$_8sw2ec6tjducwoh3.getEditableRoot(editor.dom,editor.selection.getStart());return rootEditable&&editor.schema.isValidChild(rootEditable.nodeName,forcedRootBlock?forcedRootBlock:"P")},match$2=function(predicates,action){return function(editor,shiftKey){return $_2dw1bj4jducwn6g.foldl(predicates,function(res,p){return res&&p(editor,shiftKey)},!0)?Option.some(action):Option.none()}},getAction$1=function(editor,evt){return $_fx53xj3ojducwnv6.evaluateUntil([match$2([shouldBlockNewLine$1],newLineAction.none()),match$2([inPreBlock(!0),shouldPutBrInPre$1(!1),hasShiftKey],newLineAction.br()),match$2([inPreBlock(!0),shouldPutBrInPre$1(!1)],newLineAction.block()),match$2([inPreBlock(!0),shouldPutBrInPre$1(!0),hasShiftKey],newLineAction.block()),match$2([inPreBlock(!0),shouldPutBrInPre$1(!0)],newLineAction.br()),match$2([inListBlock(!0),hasShiftKey],newLineAction.br()),match$2([inListBlock(!0)],newLineAction.block()),match$2([isBrMode(!0),hasShiftKey,canInsertIntoEditableRoot],newLineAction.block()),match$2([isBrMode(!0)],newLineAction.br()),match$2([inBrContext],newLineAction.br()),match$2([isBrMode(!1),hasShiftKey],newLineAction.br()),match$2([canInsertIntoEditableRoot],newLineAction.block())],[editor,evt.shiftKey]).getOr(newLineAction.none())},$_9sdqnq6ujducwohe={getAction:getAction$1},insert$3=function(editor,evt){$_9sdqnq6ujducwohe.getAction(editor,evt).fold(function(){$_6wifbs3wjducwnw6.insert(editor,evt)},function(){$_8i6vic6qjducwogh.insert(editor,evt)},$_60qu7r6jducwn73.noop)},$_3bay526pjducwogd={insert:insert$3},endTypingLevel=function(undoManager){undoManager.typing&&(undoManager.typing=!1,undoManager.add())},handleEnterKeyEvent=function(editor,event){event.isDefaultPrevented()||(event.preventDefault(),endTypingLevel(editor.undoManager),editor.undoManager.transact(function(){editor.selection.isCollapsed()===!1&&editor.execCommand("Delete"),$_3bay526pjducwogd.insert(editor,event)}))},setup$8=function(editor){editor.on("keydown",function(event){event.keyCode===$_1xm2zi59jducwo6l.ENTER&&handleEnterKeyEvent(editor,event)})},$_fe17ce6ojducwogc={setup:setup$8},isValidInsertPoint=function(location,caretPosition){return isAtStartOrEnd(location)&&$_fj238m1qjducwnjm.isText(caretPosition.container())},insertNbspAtPosition=function(editor,caretPosition){var container=caretPosition.container(),offset=caretPosition.offset();container.insertData(offset," "),editor.selection.setCursorLocation(container,offset+1)},insertAtLocation=function(editor,caretPosition,location){return!!isValidInsertPoint(location,caretPosition)&&(insertNbspAtPosition(editor,caretPosition),!0)},insertAtCaret$2=function(editor){var isInlineTarget=$_60qu7r6jducwn73.curry($_4m240x32jducwnrf.isInlineTarget,editor),caretPosition=CaretPosition$1.fromRangeStart(editor.selection.getRng());return $_681q3b3ijducwnty.readLocation(isInlineTarget,editor.getBody(),caretPosition).map($_60qu7r6jducwn73.curry(insertAtLocation,editor,caretPosition)).getOr(!1)},isAtStartOrEnd=function(location){return location.fold($_60qu7r6jducwn73.constant(!1),$_60qu7r6jducwn73.constant(!0),$_60qu7r6jducwn73.constant(!0),$_60qu7r6jducwn73.constant(!1))},insertAtSelection=function(editor){return!!editor.selection.isCollapsed()&&insertAtCaret$2(editor)},$_4tz7xy6xjducwohn={insertAtSelection:insertAtSelection},executeKeydownOverride$2=function(editor,evt){$_acfmrn6ljducwog1.execute([{keyCode:$_1xm2zi59jducwo6l.SPACEBAR,action:$_acfmrn6ljducwog1.action($_4tz7xy6xjducwohn.insertAtSelection,editor)}],evt).each(function(_){evt.preventDefault()})},setup$9=function(editor){editor.on("keydown",function(evt){evt.isDefaultPrevented()===!1&&executeKeydownOverride$2(editor,evt)})},$_ayhero6wjducwohl={setup:setup$9},setup$10=function(editor){var caret=$_41ufni3pjducwnv8.setupSelectedState(editor);$_fdi5rz6jjducwofn.setup(editor,caret),$_2cbs3w6mjducwog5.setup(editor,caret),$_fe17ce6ojducwogc.setup(editor),$_ayhero6wjducwohl.setup(editor)},$_6wywm26ijducwofm={setup:setup$10},DOM$2=DOMUtils.DOM,appendStyle=function(editor,text){var head=$_5s4uzoyjducwngo.fromDom(editor.getDoc().head),tag=$_5s4uzoyjducwngo.fromTag("style");$_60196814jducwnhd.set(tag,"type","text/css"),$_ejmufn2ojducwnpy.append(tag,$_5s4uzoyjducwngo.fromText(text)),$_ejmufn2ojducwnpy.append(head,tag)},createParser=function(editor){var parser=DomParser(editor.settings,editor.schema);return parser.addAttributeFilter("src,href,style,tabindex",function(nodes,name){for(var node,value,internalName,i=nodes.length,dom=editor.dom;i--;)if(node=nodes[i],value=node.attr(name),internalName="data-mce-"+name,!node.attributes.map[internalName]){if(0===value.indexOf("data:")||0===value.indexOf("blob:"))continue;"style"===name?(value=dom.serializeStyle(dom.parseStyle(value),node.name),value.length||(value=null),node.attr(internalName,value),node.attr(name,value)):"tabindex"===name?(node.attr(internalName,value),node.attr(name,null)):node.attr(internalName,editor.convertURL(value,name,node.name))}}),parser.addNodeFilter("script",function(nodes){for(var node,type,i=nodes.length;i--;)node=nodes[i],type=node.attr("type")||"no/type",0!==type.indexOf("mce-")&&node.attr("type","mce-"+type)}),parser.addNodeFilter("#cdata",function(nodes){for(var node,i=nodes.length;i--;)node=nodes[i],node.type=8,node.name="#comment",node.value="[CDATA["+node.value+"]]"}),parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(nodes){for(var node,i=nodes.length,nonEmptyElements=editor.schema.getNonEmptyElements();i--;)node=nodes[i],node.isEmpty(nonEmptyElements)&&0===node.getAll("br").length&&(node.append(new Node$2("br",1)).shortEnded=!0)}),parser},autoFocus=function(editor){
editor.settings.auto_focus&&$_83mf8ygjducwnbc.setEditorTimeout(editor,function(){var focusEditor;focusEditor=editor.settings.auto_focus===!0?editor:editor.editorManager.get(editor.settings.auto_focus),focusEditor.destroyed||focusEditor.focus()},100)},initEditor=function(editor){editor.bindPendingEventDelegates(),editor.initialized=!0,editor.fire("init"),editor.focus(!0),editor.nodeChanged({initial:!0}),editor.execCallback("init_instance_callback",editor),autoFocus(editor)},getStyleSheetLoader=function(editor){return editor.inline?DOM$2.styleSheetLoader:editor.dom.styleSheetLoader},initContentBody=function(editor,skipWrite){var body,contentCssText,settings=editor.settings,targetElm=editor.getElement(),doc=editor.getDoc();settings.inline||(editor.getElement().style.visibility=editor.orgVisibility),skipWrite||settings.content_editable||(doc.open(),doc.write(editor.iframeHTML),doc.close()),settings.content_editable&&(editor.on("remove",function(){var bodyEl=this.getBody();DOM$2.removeClass(bodyEl,"mce-content-body"),DOM$2.removeClass(bodyEl,"mce-edit-focus"),DOM$2.setAttrib(bodyEl,"contentEditable",null)}),DOM$2.addClass(targetElm,"mce-content-body"),editor.contentDocument=doc=settings.content_document||document,editor.contentWindow=settings.content_window||window,editor.bodyElement=targetElm,settings.content_document=settings.content_window=null,settings.root_name=targetElm.nodeName.toLowerCase()),body=editor.getBody(),body.disabled=!0,editor.readonly=settings.readonly,editor.readonly||(editor.inline&&"static"===DOM$2.getStyle(body,"position",!0)&&(body.style.position="relative"),body.contentEditable=editor.getParam("content_editable_state",!0)),body.disabled=!1,editor.editorUpload=EditorUpload(editor),editor.schema=Schema(settings),editor.dom=new DOMUtils(doc,{keep_values:!0,url_converter:editor.convertURL,url_converter_scope:editor,hex_colors:settings.force_hex_style_colors,class_filter:settings.class_filter,update_styles:!0,root_element:editor.inline?editor.getBody():null,collect:settings.content_editable,schema:editor.schema,onSetAttrib:function(e){editor.fire("SetAttrib",e)}}),editor.parser=createParser(editor),editor.serializer=DomSerializer$1(settings,editor),editor.selection=Selection$1(editor.dom,editor.getWin(),editor.serializer,editor),editor.formatter=Formatter(editor),editor.undoManager=UndoManager(editor),editor._nodeChangeDispatcher=new NodeChange(editor),editor._selectionOverrides=SelectionOverrides(editor),$_cmllon63jducwoc2.setup(editor),$_6wywm26ijducwofm.setup(editor),$_eu4mtv4yjducwo4f.setup(editor),editor.fire("PreInit"),settings.browser_spellcheck||settings.gecko_spellcheck||(doc.body.spellcheck=!1,DOM$2.setAttrib(body,"spellcheck","false")),editor.quirks=Quirks(editor),editor.fire("PostRender"),settings.directionality&&(body.dir=settings.directionality),settings.nowrap&&(body.style.whiteSpace="nowrap"),settings.protect&&editor.on("BeforeSetContent",function(e){$_8i2houjjducwnd2.each(settings.protect,function(pattern){e.content=e.content.replace(pattern,function(str){return"<!--mce:protected "+escape(str)+"-->"})})}),editor.on("SetContent",function(){editor.addVisual(editor.getBody())}),settings.padd_empty_editor&&editor.on("PostProcess",function(e){e.content=e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|<br \/>|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),editor.load({initial:!0,format:"html"}),editor.startContent=editor.getContent({format:"raw"}),editor.on("compositionstart compositionend",function(e){editor.composing="compositionstart"===e.type}),editor.contentStyles.length>0&&(contentCssText="",$_8i2houjjducwnd2.each(editor.contentStyles,function(style){contentCssText+=style+"\r\n"}),editor.dom.addStyle(contentCssText)),getStyleSheetLoader(editor).loadAll(editor.contentCSS,function(_){initEditor(editor)},function(urls){initEditor(editor)}),settings.content_style&&appendStyle(editor,settings.content_style)},$_ecyfcj4ljducwo2r={initContentBody:initContentBody},DOM$3=DOMUtils.DOM,relaxDomain=function(editor,ifr){if(document.domain!==window.location.hostname&&$_cum1kc9jducwn99.ie&&$_cum1kc9jducwn99.ie<12){var bodyUuid=$_48t1mg4wjducwo4b.uuid("mce");editor[bodyUuid]=function(){$_ecyfcj4ljducwo2r.initContentBody(editor)};var domainRelaxUrl='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+editor.id+'");document.write(ed.iframeHTML);document.close();ed.'+bodyUuid+"(true);})()";return DOM$3.setAttrib(ifr,"src",domainRelaxUrl),!0}return!1},normalizeHeight=function(height){var normalizedHeight="number"==typeof height?height+"px":height;return normalizedHeight?normalizedHeight:""},createIframeElement=function(id,title,height,customAttrs){var iframe=$_5s4uzoyjducwngo.fromTag("iframe");return $_60196814jducwnhd.setAll(iframe,customAttrs),$_60196814jducwnhd.setAll(iframe,{id:id+"_ifr",frameBorder:"0",allowTransparency:"true",title:title}),$_6dooji11jducwngx.setAll(iframe,{width:"100%",height:normalizeHeight(height),display:"block"}),iframe},getIframeHtml=function(editor){var bodyId,bodyClass,iframeHTML;return iframeHTML=$_d8dkl56rjducwogt.getDocType(editor)+"<html><head>",$_d8dkl56rjducwogt.getDocumentBaseUrl(editor)!==editor.documentBaseUrl&&(iframeHTML+='<base href="'+editor.documentBaseURI.getURI()+'" />'),iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',bodyId=$_d8dkl56rjducwogt.getBodyId(editor),bodyClass=$_d8dkl56rjducwogt.getBodyClass(editor),$_d8dkl56rjducwogt.getContentSecurityPolicy(editor)&&(iframeHTML+='<meta http-equiv="Content-Security-Policy" content="'+$_d8dkl56rjducwogt.getContentSecurityPolicy(editor)+'" />'),iframeHTML+='</head><body id="'+bodyId+'" class="mce-content-body '+bodyClass+'" data-id="'+editor.id+'"><br></body></html>'},createIframe=function(editor,o){var title=editor.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),ifr=createIframeElement(editor.id,title,o.height,$_d8dkl56rjducwogt.getIframeAttrs(editor)).dom();ifr.onload=function(){ifr.onload=null,editor.fire("load")};var isDomainRelaxed=relaxDomain(editor,ifr);return editor.contentAreaContainer=o.iframeContainer,editor.iframeElement=ifr,editor.iframeHTML=getIframeHtml(editor),DOM$3.add(o.iframeContainer,ifr),isDomainRelaxed},init$1=function(editor,boxInfo){var isDomainRelaxed=createIframe(editor,boxInfo);boxInfo.editorContainer&&(DOM$3.get(boxInfo.editorContainer).style.display=editor.orgDisplay,editor.hidden=DOM$3.isHidden(boxInfo.editorContainer)),editor.getElement().style.display="none",DOM$3.setAttrib(editor.id,"aria-hidden",!0),isDomainRelaxed||$_ecyfcj4ljducwo2r.initContentBody(editor)},$_gd1a706zjducwoi3={init:init$1},DOM$4=DOMUtils.DOM,initPlugin=function(editor,initializedPlugins,plugin){var pluginUrl,pluginInstance,Plugin=PluginManager$1.get(plugin);if(pluginUrl=PluginManager$1.urls[plugin]||editor.documentBaseUrl.replace(/\/$/,""),plugin=$_8i2houjjducwnd2.trim(plugin),Plugin&&$_8i2houjjducwnd2.inArray(initializedPlugins,plugin)===-1){if($_8i2houjjducwnd2.each(PluginManager$1.dependencies(plugin),function(dep){initPlugin(editor,initializedPlugins,dep)}),editor.plugins[plugin])return;pluginInstance=new Plugin(editor,pluginUrl,editor.$),editor.plugins[plugin]=pluginInstance,pluginInstance.init&&(pluginInstance.init(editor,pluginUrl),initializedPlugins.push(plugin))}},trimLegacyPrefix=function(name){return name.replace(/^\-/,"")},initPlugins=function(editor){var initializedPlugins=[];$_8i2houjjducwnd2.each(editor.settings.plugins.split(/[ ,]/),function(name){initPlugin(editor,initializedPlugins,trimLegacyPrefix(name))})},initTheme=function(editor){var Theme,theme=editor.settings.theme;$_c7y6af12jducwnh8.isString(theme)?(editor.settings.theme=trimLegacyPrefix(theme),Theme=ThemeManager.get(theme),editor.theme=new Theme(editor,ThemeManager.urls[theme]),editor.theme.init&&editor.theme.init(editor,ThemeManager.urls[theme]||editor.documentBaseUrl.replace(/\/$/,""),editor.$)):editor.theme={}},renderFromLoadedTheme=function(editor){var w,h,minHeight,re,info,settings=editor.settings,elm=editor.getElement();return w=settings.width||DOM$4.getStyle(elm,"width")||"100%",h=settings.height||DOM$4.getStyle(elm,"height")||elm.offsetHeight,minHeight=settings.min_height||100,re=/^[0-9\.]+(|px)$/i,re.test(""+w)&&(w=Math.max(parseInt(w,10),100)),re.test(""+h)&&(h=Math.max(parseInt(h,10),minHeight)),info=editor.theme.renderUI({targetNode:elm,width:w,height:h,deltaWidth:settings.delta_width,deltaHeight:settings.delta_height}),settings.content_editable||(h=(info.iframeHeight||h)+("number"==typeof h?info.deltaHeight||0:""))<minHeight&&(h=minHeight),info.height=h,info},renderFromThemeFunc=function(editor){var info,elm=editor.getElement();return info=editor.settings.theme(editor,elm),info.editorContainer.nodeType&&(info.editorContainer.id=info.editorContainer.id||editor.id+"_parent"),info.iframeContainer&&info.iframeContainer.nodeType&&(info.iframeContainer.id=info.iframeContainer.id||editor.id+"_iframecontainer"),info.height=info.iframeHeight?info.iframeHeight:elm.offsetHeight,info},createThemeFalseResult=function(element){return{editorContainer:element,iframeContainer:element}},renderThemeFalseIframe=function(targetElement){var iframeContainer=DOM$4.create("div");return DOM$4.insertAfter(iframeContainer,targetElement),createThemeFalseResult(iframeContainer)},renderThemeFalse=function(editor){var targetElement=editor.getElement();return editor.inline?createThemeFalseResult(null):renderThemeFalseIframe(targetElement)},renderThemeUi=function(editor){var settings=editor.settings,elm=editor.getElement();return editor.orgDisplay=elm.style.display,$_c7y6af12jducwnh8.isString(settings.theme)?renderFromLoadedTheme(editor):$_c7y6af12jducwnh8.isFunction(settings.theme)?renderFromThemeFunc(editor):renderThemeFalse(editor)},init$2=function(editor){var boxInfo,settings=editor.settings,elm=editor.getElement();return editor.rtl=settings.rtl_ui||editor.editorManager.i18n.rtl,editor.editorManager.i18n.setCode(settings.language),settings.aria_label=settings.aria_label||DOM$4.getAttrib(elm,"aria-label",editor.getLang("aria.rich_text_area")),editor.fire("ScriptsLoaded"),initTheme(editor),initPlugins(editor),boxInfo=renderThemeUi(editor),editor.editorContainer=boxInfo.editorContainer?boxInfo.editorContainer:null,settings.content_css&&$_8i2houjjducwnd2.each($_8i2houjjducwnd2.explode(settings.content_css),function(u){editor.contentCSS.push(editor.documentBaseURI.toAbsolute(u))}),settings.content_editable?$_ecyfcj4ljducwo2r.initContentBody(editor):$_gd1a706zjducwoi3.init(editor,boxInfo)},$_e8f9kd4ijducwo2h={init:init$2},DOM$5=DOMUtils.DOM,hasSkipLoadPrefix=function(name){return"-"===name.charAt(0)},loadLanguage=function(scriptLoader,editor){var settings=editor.settings;settings.language&&"en"!==settings.language&&!settings.language_url&&(settings.language_url=editor.editorManager.baseURL+"/langs/"+settings.language+".js"),settings.language_url&&!editor.editorManager.i18n.data[settings.language]&&scriptLoader.add(settings.language_url)},loadTheme=function(scriptLoader,editor,suffix,callback){var settings=editor.settings,theme=settings.theme;if($_c7y6af12jducwnh8.isString(theme)){if(!hasSkipLoadPrefix(theme)&&!ThemeManager.urls.hasOwnProperty(theme)){var themeUrl=settings.theme_url;themeUrl?ThemeManager.load(theme,editor.documentBaseURI.toAbsolute(themeUrl)):ThemeManager.load(theme,"themes/"+theme+"/theme"+suffix+".js")}scriptLoader.loadQueue(function(){ThemeManager.waitFor(theme,callback)})}else callback()},loadPlugins=function(settings,suffix){$_8i2houjjducwnd2.isArray(settings.plugins)&&(settings.plugins=settings.plugins.join(" ")),$_8i2houjjducwnd2.each(settings.external_plugins,function(url,name){PluginManager$1.load(name,url),settings.plugins+=" "+name}),$_8i2houjjducwnd2.each(settings.plugins.split(/[ ,]/),function(plugin){if((plugin=$_8i2houjjducwnd2.trim(plugin))&&!PluginManager$1.urls[plugin])if(hasSkipLoadPrefix(plugin)){plugin=plugin.substr(1,plugin.length);var dependencies=PluginManager$1.dependencies(plugin);$_8i2houjjducwnd2.each(dependencies,function(dep){var defaultSettings={prefix:"plugins/",resource:dep,suffix:"/plugin"+suffix+".js"};dep=PluginManager$1.createUrl(defaultSettings,dep),PluginManager$1.load(dep.resource,dep)})}else PluginManager$1.load(plugin,{prefix:"plugins/",resource:plugin,suffix:"/plugin"+suffix+".js"})})},loadScripts=function(editor,suffix){var scriptLoader=ScriptLoader.ScriptLoader;loadTheme(scriptLoader,editor,suffix,function(){loadLanguage(scriptLoader,editor),loadPlugins(editor.settings,suffix),scriptLoader.loadQueue(function(){editor.removed||$_e8f9kd4ijducwo2h.init(editor)},editor,function(urls){$_9erk7k4hjducwo2e.pluginLoadError(editor,urls[0]),editor.removed||$_e8f9kd4ijducwo2h.init(editor)})})},render=function(editor){var settings=editor.settings,id=editor.id,readyHandler=function(){DOM$5.unbind(window,"ready",readyHandler),editor.render()};if(!EventUtils.Event.domLoaded)return void DOM$5.bind(window,"ready",readyHandler);if(editor.getElement()&&$_cum1kc9jducwn99.contentEditable){settings.inline?editor.inline=!0:(editor.orgVisibility=editor.getElement().style.visibility,editor.getElement().style.visibility="hidden");var form=editor.getElement().form||DOM$5.getParent(id,"form");form&&(editor.formElement=form,settings.hidden_input&&!/TEXTAREA|INPUT/i.test(editor.getElement().nodeName)&&(DOM$5.insertAfter(DOM$5.create("input",{type:"hidden",name:id}),id),editor.hasHiddenInput=!0),editor.formEventDelegate=function(e){editor.fire(e.type,e)},DOM$5.bind(form,"submit reset",editor.formEventDelegate),editor.on("reset",function(){editor.setContent(editor.startContent,{format:"raw"})}),!settings.submit_patch||form.submit.nodeType||form.submit.length||form._mceOldSubmit||(form._mceOldSubmit=form.submit,form.submit=function(){return editor.editorManager.triggerSave(),editor.setDirty(!1),form._mceOldSubmit(form)})),editor.windowManager=WindowManager(editor),editor.notificationManager=NotificationManager(editor),"xml"===settings.encoding&&editor.on("GetContent",function(e){e.save&&(e.content=DOM$5.encode(e.content))}),settings.add_form_submit_trigger&&editor.on("submit",function(){editor.initialized&&editor.save()}),settings.add_unload_trigger&&(editor._beforeUnload=function(){!editor.initialized||editor.destroyed||editor.isHidden()||editor.save({format:"raw",no_events:!0,set_dirty:!1})},editor.editorManager.on("BeforeUnload",editor._beforeUnload)),editor.editorManager.add(editor),loadScripts(editor,editor.suffix)}},$_fcx95i4bjducwo1f={render:render},add=function(editor,name,settings){var sidebars=editor.sidebars?editor.sidebars:[];sidebars.push({name:name,settings:settings}),editor.sidebars=sidebars},$_fdgakl70jducwoi8={add:add},each$21=$_8i2houjjducwnd2.each,trim$4=$_8i2houjjducwnd2.trim,queryParts="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),DEFAULT_PORTS={ftp:21,http:80,https:443,mailto:25},URI=function(url,settings){var baseUri,baseUrl,self=this;if(url=trim$4(url),settings=self.settings=settings||{},baseUri=settings.base_uri,/^([\w\-]+):([^\/]{2})/i.test(url)||/^\s*#/.test(url))return void(self.source=url);var isProtocolRelative=0===url.indexOf("//");0!==url.indexOf("/")||isProtocolRelative||(url=(baseUri?baseUri.protocol||"http":"http")+"://mce_host"+url),/^[\w\-]*:?\/\//.test(url)||(baseUrl=settings.base_uri?settings.base_uri.path:new URI(document.location.href).directory,""==settings.base_uri.protocol?url="//mce_host"+self.toAbsPath(baseUrl,url):(url=/([^#?]*)([#?]?.*)/.exec(url),url=(baseUri&&baseUri.protocol||"http")+"://mce_host"+self.toAbsPath(baseUrl,url[1])+url[2])),url=url.replace(/@@/g,"(mce_at)"),url=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(url),each$21(queryParts,function(v,i){var part=url[i];part&&(part=part.replace(/\(mce_at\)/g,"@@")),self[v]=part}),baseUri&&(self.protocol||(self.protocol=baseUri.protocol),self.userInfo||(self.userInfo=baseUri.userInfo),self.port||"mce_host"!==self.host||(self.port=baseUri.port),self.host&&"mce_host"!==self.host||(self.host=baseUri.host),self.source=""),isProtocolRelative&&(self.protocol="")};URI.prototype={setPath:function(path){var self=this;path=/^(.*?)\/?(\w+)?$/.exec(path),self.path=path[0],self.directory=path[1],self.file=path[2],self.source="",self.getURI()},toRelative:function(uri){var output,self=this;if("./"===uri)return uri;if(uri=new URI(uri,{base_uri:self}),"mce_host"!==uri.host&&self.host!==uri.host&&uri.host||self.port!==uri.port||self.protocol!==uri.protocol&&""!==uri.protocol)return uri.getURI();var tu=self.getURI(),uu=uri.getURI();return tu===uu||"/"===tu.charAt(tu.length-1)&&tu.substr(0,tu.length-1)===uu?tu:(output=self.toRelPath(self.path,uri.path),uri.query&&(output+="?"+uri.query),uri.anchor&&(output+="#"+uri.anchor),output)},toAbsolute:function(uri,noHost){return uri=new URI(uri,{base_uri:this}),uri.getURI(noHost&&this.isSameOrigin(uri))},isSameOrigin:function(uri){if(this.host==uri.host&&this.protocol==uri.protocol){if(this.port==uri.port)return!0;var defaultPort=DEFAULT_PORTS[this.protocol];if(defaultPort&&(this.port||defaultPort)==(uri.port||defaultPort))return!0}return!1},toRelPath:function(base,path){var items,i,l,breakPoint=0,out="";if(base=base.substring(0,base.lastIndexOf("/")),base=base.split("/"),items=path.split("/"),base.length>=items.length)for(i=0,l=base.length;i<l;i++)if(i>=items.length||base[i]!==items[i]){breakPoint=i+1;break}if(base.length<items.length)for(i=0,l=items.length;i<l;i++)if(i>=base.length||base[i]!==items[i]){breakPoint=i+1;break}if(1===breakPoint)return path;for(i=0,l=base.length-(breakPoint-1);i<l;i++)out+="../";for(i=breakPoint-1,l=items.length;i<l;i++)out+=i!==breakPoint-1?"/"+items[i]:items[i];return out},toAbsPath:function(base,path){var i,tr,outPath,nb=0,o=[];for(tr=/\/$/.test(path)?"/":"",base=base.split("/"),path=path.split("/"),each$21(base,function(k){k&&o.push(k)}),base=o,i=path.length-1,o=[];i>=0;i--)0!==path[i].length&&"."!==path[i]&&(".."!==path[i]?nb>0?nb--:o.push(path[i]):nb++);return i=base.length-nb,outPath=i<=0?o.reverse().join("/"):base.slice(0,i).join("/")+"/"+o.reverse().join("/"),0!==outPath.indexOf("/")&&(outPath="/"+outPath),tr&&outPath.lastIndexOf("/")!==outPath.length-1&&(outPath+=tr),outPath},getURI:function(noProtoHost){var s,self=this;return self.source&&!noProtoHost||(s="",noProtoHost||(s+=self.protocol?self.protocol+"://":"//",self.userInfo&&(s+=self.userInfo+"@"),self.host&&(s+=self.host),self.port&&(s+=":"+self.port)),self.path&&(s+=self.path),self.query&&(s+="?"+self.query),self.anchor&&(s+="#"+self.anchor),self.source=s),self.source}},URI.parseDataUri=function(uri){var type,matches;return uri=decodeURIComponent(uri).split(","),matches=/data:([^;]+)/.exec(uri[0]),matches&&(type=matches[1]),{type:type,data:uri[1]}},URI.getDocumentBaseUrl=function(loc){var baseUrl;return baseUrl=0!==loc.protocol.indexOf("http")&&"file:"!==loc.protocol?loc.href:loc.protocol+"//"+loc.host+loc.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(baseUrl)&&(baseUrl=baseUrl.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(baseUrl)||(baseUrl+="/")),baseUrl};var traverse=function(node,fn){fn(node),node.firstChild&&traverse(node.firstChild,fn),node.next&&traverse(node.next,fn)},findMatchingNodes=function(nodeFilters,attributeFilters,node){var nodeMatches={},attrMatches={},matches=[];node.firstChild&&traverse(node.firstChild,function(node){$_2dw1bj4jducwn6g.each(nodeFilters,function(filter){filter.name===node.name&&(nodeMatches[filter.name]?nodeMatches[filter.name].nodes.push(node):nodeMatches[filter.name]={filter:filter,nodes:[node]})}),$_2dw1bj4jducwn6g.each(attributeFilters,function(filter){"string"==typeof node.attr(filter.name)&&(attrMatches[filter.name]?attrMatches[filter.name].nodes.push(node):attrMatches[filter.name]={filter:filter,nodes:[node]})})});for(var name_1 in nodeMatches)nodeMatches.hasOwnProperty(name_1)&&matches.push(nodeMatches[name_1]);for(var name_2 in attrMatches)attrMatches.hasOwnProperty(name_2)&&matches.push(attrMatches[name_2]);return matches},filter$3=function(nodeFilters,attributeFilters,node){var matches=findMatchingNodes(nodeFilters,attributeFilters,node);$_2dw1bj4jducwn6g.each(matches,function(match){$_2dw1bj4jducwn6g.each(match.filter.callbacks,function(callback){callback(match.nodes,match.filter.name,{})})})},isTreeNode=function(content){return content instanceof Node$2},setContentString=function(editor,content,args){var forcedRootBlockName,padd,body=editor.getBody();return 0===content.length||/^\s+$/.test(content)?(padd='<br data-mce-bogus="1">',"TABLE"===body.nodeName?content="<tr><td>"+padd+"</td></tr>":/^(UL|OL)$/.test(body.nodeName)&&(content="<li>"+padd+"</li>"),forcedRootBlockName=editor.settings.forced_root_block,forcedRootBlockName&&editor.schema.isValidChild(body.nodeName.toLowerCase(),forcedRootBlockName.toLowerCase())?(content=padd,content=editor.dom.createHTML(forcedRootBlockName,editor.settings.forced_root_block_attrs,content)):content||(content='<br data-mce-bogus="1">'),editor.dom.setHTML(body,content),editor.fire("SetContent",args)):("raw"!==args.format&&(content=HtmlSerializer({validate:editor.validate},editor.schema).serialize(editor.parser.parse(content,{isRootContent:!0,insert:!0}))),args.content=$_8i2houjjducwnd2.trim(content),editor.dom.setHTML(body,args.content),args.no_events||editor.fire("SetContent",args)),args.content},setContentTree=function(editor,content,args){filter$3(editor.parser.getNodeFilters(),editor.parser.getAttributeFilters(),content);var html=HtmlSerializer({validate:editor.validate},editor.schema).serialize(content);return args.content=$_8i2houjjducwnd2.trim(html),editor.dom.setHTML(editor.getBody(),args.content),args.no_events||editor.fire("SetContent",args),content},setContent$1=function(editor,content,args){return void 0===args&&(args={}),args.format=args.format?args.format:"html",args.set=!0,args.content=isTreeNode(content)?"":content,isTreeNode(content)||args.no_events||(editor.fire("BeforeSetContent",args),content=args.content),isTreeNode(content)?setContentTree(editor,content,args):setContentString(editor,content,args)},getContent$1=function(editor,args){void 0===args&&(args={});var content,body=editor.getBody();if(editor.removed)return"";if(args.format=args.format?args.format:"html",args.get=!0,args.getInner=!0,args.no_events||editor.fire("BeforeGetContent",args),"raw"===args.format)content=$_8i2houjjducwnd2.trim($_9wn54m5cjducwo73.trimExternal(editor.serializer,body.innerHTML));else if("text"===args.format)content=body.innerText||body.textContent;else{if("tree"===args.format)return editor.serializer.serialize(body,args);content=editor.serializer.serialize(body,args)}return"text"!==args.format?args.content=$_8i2houjjducwnd2.trim(content):args.content=content,args.no_events||editor.fire("GetContent",args),args.content},DOM$6=DOMUtils.DOM,restoreOriginalStyles=function(editor){editor.orgDisplay&&DOM$6.setStyle(editor.id,"display",editor.orgDisplay)},safeDestroy=function(x){return Option.from(x).each(function(x){return x.destroy()})},clearDomReferences=function(editor){editor.contentAreaContainer=editor.formElement=editor.container=editor.editorContainer=null,editor.bodyElement=editor.contentDocument=editor.contentWindow=null,editor.iframeElement=editor.targetElm=null,editor.selection&&(editor.selection=editor.selection.win=editor.selection.dom=editor.selection.dom.doc=null)},restoreForm=function(editor){var form=editor.formElement;form&&(form._mceOldSubmit&&(form.submit=form._mceOldSubmit,form._mceOldSubmit=null),DOM$6.unbind(form,"submit reset",editor.formEventDelegate))},remove$5=function(editor){if(!editor.removed){var _selectionOverrides=editor._selectionOverrides,editorUpload=editor.editorUpload,body=editor.getBody(),element=editor.getElement();body&&editor.save(),editor.removed=1,editor.unbindAllNativeEvents(),editor.hasHiddenInput&&element&&DOM$6.remove(element.nextSibling),!editor.inline&&body&&restoreOriginalStyles(editor),$_zfmxp5vjducwoaf.fireRemove(editor),editor.editorManager.remove(editor),DOM$6.remove(editor.getContainer()),safeDestroy(_selectionOverrides),safeDestroy(editorUpload),editor.destroy()}},destroy=function(editor,automatic){var selection=editor.selection,dom=editor.dom;if(!editor.destroyed){if(!automatic&&!editor.removed)return void editor.remove();automatic||(editor.editorManager.off("beforeunload",editor._beforeUnload),editor.theme&&editor.theme.destroy&&editor.theme.destroy(),safeDestroy(selection),safeDestroy(dom)),restoreForm(editor),clearDomReferences(editor),editor.destroyed=1}},DOM$7=DOMUtils.DOM,extend$4=$_8i2houjjducwnd2.extend,each$22=$_8i2houjjducwnd2.each,resolve$4=$_8i2houjjducwnd2.resolve,ie$2=$_cum1kc9jducwn99.ie,Editor=function(id,settings,editorManager){var documentBaseUrl,baseUri,self=this;documentBaseUrl=self.documentBaseUrl=editorManager.documentBaseURL,baseUri=editorManager.baseURI,settings=getEditorSettings(self,id,documentBaseUrl,editorManager.defaultSettings,settings),self.settings=settings,AddOnManager.language=settings.language||"en",AddOnManager.languageLoad=settings.language_load,AddOnManager.baseURL=editorManager.baseURL,self.id=id,self.setDirty(!1),self.plugins={},self.documentBaseURI=new URI(settings.document_base_url,{base_uri:baseUri}),self.baseURI=baseUri,self.contentCSS=[],self.contentStyles=[],self.shortcuts=new Shortcuts(self),self.loadedCSS={},self.editorCommands=new EditorCommands(self),self.suffix=editorManager.suffix,self.editorManager=editorManager,self.inline=settings.inline,self.buttons={},self.menuItems={},settings.cache_suffix&&($_cum1kc9jducwn99.cacheSuffix=settings.cache_suffix.replace(/^[\?\&]+/,"")),settings.override_viewport===!1&&($_cum1kc9jducwn99.overrideViewPort=!1),editorManager.fire("SetupEditor",{editor:self}),self.execCallback("setup",self),self.$=DomQuery.overrideDefaults(function(){return{context:self.inline?self.getBody():self.getDoc(),element:self.getBody()}})};Editor.prototype={render:function(){$_fcx95i4bjducwo1f.render(this)},focus:function(skipFocus){$_egbtag48jducwo0y.focus(this,skipFocus)},execCallback:function(name){var scope,self=this,callback=self.settings[name];if(callback)return self.callbackLookup&&(scope=self.callbackLookup[name])&&(callback=scope.func,scope=scope.scope),"string"==typeof callback&&(scope=callback.replace(/\.\w+$/,""),scope=scope?resolve$4(scope):0,callback=resolve$4(callback),self.callbackLookup=self.callbackLookup||{},self.callbackLookup[name]={func:callback,scope:scope}),callback.apply(scope||self,Array.prototype.slice.call(arguments,1))},translate:function(text){if(text&&$_8i2houjjducwnd2.is(text,"string")){var lang_1=this.settings.language||"en",i18n_1=this.editorManager.i18n;text=i18n_1.data[lang_1+"."+text]||text.replace(/\{\#([^\}]+)\}/g,function(a,b){return i18n_1.data[lang_1+"."+b]||"{#"+b+"}"})}return this.editorManager.translate(text)},getLang:function(name,defaultVal){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+name]||(void 0!==defaultVal?defaultVal:"{#"+name+"}")},getParam:function(name,defaultVal,type){return getParam(this,name,defaultVal,type)},nodeChanged:function(args){this._nodeChangeDispatcher.nodeChanged(args)},addButton:function(name,settings){var self=this;settings.cmd&&(settings.onclick=function(){self.execCommand(settings.cmd)}),settings.stateSelector&&void 0===settings.active&&(settings.active=!1),settings.text||settings.icon||(settings.icon=name),self.buttons=self.buttons,settings.tooltip=settings.tooltip||settings.title,self.buttons[name]=settings},addSidebar:function(name,settings){return $_fdgakl70jducwoi8.add(this,name,settings)},addMenuItem:function(name,settings){var self=this;settings.cmd&&(settings.onclick=function(){self.execCommand(settings.cmd)}),self.menuItems=self.menuItems,self.menuItems[name]=settings},addContextToolbar:function(predicate,items){var selector,self=this;self.contextToolbars=self.contextToolbars||[],"string"==typeof predicate&&(selector=predicate,predicate=function(elm){return self.dom.is(elm,selector)}),self.contextToolbars.push({id:$_48t1mg4wjducwo4b.uuid("mcet"),predicate:predicate,items:items})},addCommand:function(name,callback,scope){this.editorCommands.addCommand(name,callback,scope)},addQueryStateHandler:function(name,callback,scope){this.editorCommands.addQueryStateHandler(name,callback,scope)},addQueryValueHandler:function(name,callback,scope){this.editorCommands.addQueryValueHandler(name,callback,scope)},addShortcut:function(pattern,desc,cmdFunc,scope){this.shortcuts.add(pattern,desc,cmdFunc,scope)},execCommand:function(cmd,ui,value,args){return this.editorCommands.execCommand(cmd,ui,value,args)},queryCommandState:function(cmd){return this.editorCommands.queryCommandState(cmd)},queryCommandValue:function(cmd){return this.editorCommands.queryCommandValue(cmd)},queryCommandSupported:function(cmd){return this.editorCommands.queryCommandSupported(cmd)},show:function(){var self=this;self.hidden&&(self.hidden=!1,self.inline?self.getBody().contentEditable=!0:(DOM$7.show(self.getContainer()),DOM$7.hide(self.id)),self.load(),self.fire("show"))},hide:function(){var self=this,doc=self.getDoc();self.hidden||(ie$2&&doc&&!self.inline&&doc.execCommand("SelectAll"),self.save(),self.inline?(self.getBody().contentEditable=!1,self===self.editorManager.focusedEditor&&(self.editorManager.focusedEditor=null)):(DOM$7.hide(self.getContainer()),DOM$7.setStyle(self.id,"display",self.orgDisplay)),self.hidden=!0,self.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(state,time){this.fire("ProgressState",{state:state,time:time})},load:function(args){var html,self=this,elm=self.getElement();return self.removed?"":elm?(args=args||{},args.load=!0,html=self.setContent(void 0!==elm.value?elm.value:elm.innerHTML,args),args.element=elm,args.no_events||self.fire("LoadContent",args),args.element=elm=null,html):void 0},save:function(args){var html,form,self=this,elm=self.getElement();if(elm&&self.initialized&&!self.removed)return args=args||{},args.save=!0,args.element=elm,html=args.content=self.getContent(args),args.no_events||self.fire("SaveContent",args),"raw"===args.format&&self.fire("RawSaveContent",args),html=args.content,/TEXTAREA|INPUT/i.test(elm.nodeName)?elm.value=html:(self.inline||(elm.innerHTML=html),(form=DOM$7.getParent(self.id,"form"))&&each$22(form.elements,function(elm){if(elm.name===self.id)return elm.value=html,!1})),args.element=elm=null,args.set_dirty!==!1&&self.setDirty(!1),html},setContent:function(content,args){return setContent$1(this,content,args)},getContent:function(args){return getContent$1(this,args)},insertContent:function(content,args){args&&(content=extend$4({content:content},args)),this.execCommand("mceInsertContent",!1,content)},isDirty:function(){return!this.isNotDirty},setDirty:function(state){var oldState=!this.isNotDirty;this.isNotDirty=!state,state&&state!==oldState&&this.fire("dirty")},setMode:function(mode){$_awagyr46jducwo0r.setMode(this,mode)},getContainer:function(){var self=this;return self.container||(self.container=DOM$7.get(self.editorContainer||self.id+"_parent")),self.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=DOM$7.get(this.id)),this.targetElm},getWin:function(){var elm,self=this;return self.contentWindow||(elm=self.iframeElement)&&(self.contentWindow=elm.contentWindow),self.contentWindow},getDoc:function(){var win,self=this;return self.contentDocument||(win=self.getWin())&&(self.contentDocument=win.document),self.contentDocument},getBody:function(){var doc=this.getDoc();return this.bodyElement||(doc?doc.body:null)},convertURL:function(url,name,elm){var self=this,settings=self.settings
;return settings.urlconverter_callback?self.execCallback("urlconverter_callback",url,elm,!0,name):!settings.convert_urls||elm&&"LINK"===elm.nodeName||0===url.indexOf("file:")||0===url.length?url:settings.relative_urls?self.documentBaseURI.toRelative(url):url=self.documentBaseURI.toAbsolute(url,settings.remove_script_host)},addVisual:function(elm){var cls,self=this,settings=self.settings,dom=self.dom;elm=elm||self.getBody(),void 0===self.hasVisual&&(self.hasVisual=settings.visual),each$22(dom.select("table,a",elm),function(elm){var value;switch(elm.nodeName){case"TABLE":return cls=settings.visual_table_class||"mce-item-table",value=dom.getAttrib(elm,"border"),void(value&&"0"!==value||!self.hasVisual?dom.removeClass(elm,cls):dom.addClass(elm,cls));case"A":return void(dom.getAttrib(elm,"href",!1)||(value=dom.getAttrib(elm,"name")||elm.id,cls=settings.visual_anchor_class||"mce-item-anchor",value&&self.hasVisual?dom.addClass(elm,cls):dom.removeClass(elm,cls)))}}),self.fire("VisualAid",{element:elm,hasVisual:self.hasVisual})},remove:function(){remove$5(this)},destroy:function(automatic){destroy(this,automatic)},uploadImages:function(callback){return this.editorUpload.uploadImages(callback)},_scanForImages:function(){return this.editorUpload.scanForImages()}},extend$4(Editor.prototype,EditorObservable$1);var documentFocusInHandler,beforeUnloadDelegate,EditorManager,isEditorUIElement=function(elm){return elm.className.toString().indexOf("mce-")!==-1},$_duu6az77jducwoji={isEditorUIElement:isEditorUIElement},isManualNodeChange=function(e){return"nodechange"===e.type&&e.selectionChange},registerPageMouseUp=function(editor,throttledStore){var mouseUpPage=function(){throttledStore.throttle()};DOMUtils.DOM.bind(document,"mouseup",mouseUpPage),editor.on("remove",function(){DOMUtils.DOM.unbind(document,"mouseup",mouseUpPage)})},registerFocusOut=function(editor){editor.on("focusout",function(){$_exyelv3zjducwnzi.store(editor)})},registerMouseUp=function(editor,throttledStore){editor.on("mouseup touchend",function(e){throttledStore.throttle()})},registerEditorEvents=function(editor,throttledStore){var browser=$_5hshlmmjducwnfr.detect().browser;browser.isIE()||browser.isEdge()?registerFocusOut(editor):registerMouseUp(editor,throttledStore),editor.on("keyup nodechange",function(e){isManualNodeChange(e)||$_exyelv3zjducwnzi.store(editor)})},register$3=function(editor){var throttledStore=$_15mtnw58jducwo6f.first(function(){$_exyelv3zjducwnzi.store(editor)},0);editor.inline&&registerPageMouseUp(editor,throttledStore),editor.on("init",function(){registerEditorEvents(editor,throttledStore)}),editor.on("remove",function(){throttledStore.cancel()})},$_aj05kn78jducwojl={register:register$3},DOM$8=DOMUtils.DOM,isEditorUIElement$1=function(elm){return $_duu6az77jducwoji.isEditorUIElement(elm)},isUIElement=function(editor,elm){var customSelector=editor?editor.settings.custom_ui_selector:"";return null!==DOM$8.getParent(elm,function(elm){return isEditorUIElement$1(elm)||!!customSelector&&editor.dom.is(elm,customSelector)})},getActiveElement=function(){try{return document.activeElement}catch(ex){return document.body}},registerEvents=function(editorManager,e){var editor=e.editor;$_aj05kn78jducwojl.register(editor),editor.on("focusin",function(){var self=this,focusedEditor=editorManager.focusedEditor;focusedEditor!==self&&(focusedEditor&&focusedEditor.fire("blur",{focusedEditor:self}),editorManager.setActive(self),editorManager.focusedEditor=self,self.fire("focus",{blurredEditor:focusedEditor}),self.focus(!0))}),editor.on("focusout",function(){var self=this;$_83mf8ygjducwnbc.setEditorTimeout(self,function(){var focusedEditor=editorManager.focusedEditor;isUIElement(self,getActiveElement())||focusedEditor!==self||(self.fire("blur",{focusedEditor:null}),editorManager.focusedEditor=null)})}),documentFocusInHandler||(documentFocusInHandler=function(e){var target,activeEditor=editorManager.activeEditor;target=e.target,activeEditor&&target.ownerDocument===document&&(target===document.body||isUIElement(activeEditor,target)||editorManager.focusedEditor!==activeEditor||(activeEditor.fire("blur",{focusedEditor:null}),editorManager.focusedEditor=null))},DOM$8.bind(document,"focusin",documentFocusInHandler))},unregisterDocumentEvents=function(editorManager,e){editorManager.focusedEditor===e.editor&&(editorManager.focusedEditor=null),editorManager.activeEditor||(DOM$8.unbind(document,"focusin",documentFocusInHandler),documentFocusInHandler=null)},setup$11=function(editorManager){editorManager.on("AddEditor",$_60qu7r6jducwn73.curry(registerEvents,editorManager)),editorManager.on("RemoveEditor",$_60qu7r6jducwn73.curry(unregisterDocumentEvents,editorManager))},$_7bvj4v76jducwoje={setup:setup$11,isEditorUIElement:isEditorUIElement$1,isUIElement:isUIElement},data={},code="en",$_236kh79jducwojr={setCode:function(newCode){newCode&&(code=newCode,this.rtl=!!this.data[newCode]&&"rtl"===this.data[newCode]._dir)},getCode:function(){return code},rtl:!1,add:function(code,items){var langData=data[code];langData||(data[code]=langData={});for(var name_1 in items)langData[name_1]=items[name_1];this.setCode(code)},translate:function(text){var langData=data[code]||{},toString=function(obj){return $_8i2houjjducwnd2.is(obj,"function")?Object.prototype.toString.call(obj):isEmpty(obj)?"":""+obj},isEmpty=function(text){return""===text||null===text||$_8i2houjjducwnd2.is(text,"undefined")},getLangData=function(text){return text=toString(text),$_8i2houjjducwnd2.hasOwn(langData,text)?toString(langData[text]):text};if(isEmpty(text))return"";if($_8i2houjjducwnd2.is(text,"object")&&$_8i2houjjducwnd2.hasOwn(text,"raw"))return toString(text.raw);if($_8i2houjjducwnd2.is(text,"array")){var values_1=text.slice(1);text=getLangData(text[0]).replace(/\{([0-9]+)\}/g,function($1,$2){return $_8i2houjjducwnd2.hasOwn(values_1,$2)?toString(values_1[$2]):$1})}return getLangData(text).replace(/{context:\w+}$/,"")},data:data},DOM$9=DOMUtils.DOM,explode$5=$_8i2houjjducwnd2.explode,each$23=$_8i2houjjducwnd2.each,extend$5=$_8i2houjjducwnd2.extend,instanceCounter=0,boundGlobalEvents=!1,legacyEditors=[],editors=[],isValidLegacyKey=function(id){return"length"!==id},globalEventDelegate=function(e){each$23(EditorManager.get(),function(editor){"scroll"===e.type?editor.fire("ScrollWindow",e):editor.fire("ResizeWindow",e)})},toggleGlobalEvents=function(state){state!==boundGlobalEvents&&(state?DomQuery(window).on("resize scroll",globalEventDelegate):DomQuery(window).off("resize scroll",globalEventDelegate),boundGlobalEvents=state)},removeEditorFromList=function(targetEditor){var oldEditors=editors;delete legacyEditors[targetEditor.id];for(var i=0;i<legacyEditors.length;i++)if(legacyEditors[i]===targetEditor){legacyEditors.splice(i,1);break}return editors=$_2dw1bj4jducwn6g.filter(editors,function(editor){return targetEditor!==editor}),EditorManager.activeEditor===targetEditor&&(EditorManager.activeEditor=editors.length>0?editors[0]:null),EditorManager.focusedEditor===targetEditor&&(EditorManager.focusedEditor=null),oldEditors.length!==editors.length},purgeDestroyedEditor=function(editor){return editor&&editor.initialized&&!(editor.getContainer()||editor.getBody()).parentNode&&(removeEditorFromList(editor),editor.unbindAllNativeEvents(),editor.destroy(!0),editor.removed=!0,editor=null),editor};EditorManager={defaultSettings:{},$:DomQuery,majorVersion:"4",minorVersion:"7.7",releaseDate:"2018-02-19",editors:legacyEditors,i18n:$_236kh79jducwojr,activeEditor:null,settings:{},setup:function(){var baseURL,documentBaseURL,preInit,src,self=this,suffix="";if(documentBaseURL=URI.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(documentBaseURL)&&(documentBaseURL=documentBaseURL.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(documentBaseURL)||(documentBaseURL+="/")),preInit=window.tinymce||window.tinyMCEPreInit)baseURL=preInit.base||preInit.baseURL,suffix=preInit.suffix;else{for(var scripts=document.getElementsByTagName("script"),i=0;i<scripts.length;i++){src=scripts[i].src;var srcScript=src.substring(src.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(src)){srcScript.indexOf(".min")!==-1&&(suffix=".min"),baseURL=src.substring(0,src.lastIndexOf("/"));break}}!baseURL&&document.currentScript&&(src=document.currentScript.src,src.indexOf(".min")!==-1&&(suffix=".min"),baseURL=src.substring(0,src.lastIndexOf("/")))}self.baseURL=new URI(documentBaseURL).toAbsolute(baseURL),self.documentBaseURL=documentBaseURL,self.baseURI=new URI(self.baseURL),self.suffix=suffix,$_7bvj4v76jducwoje.setup(self)},overrideDefaults:function(defaultSettings){var baseUrl,suffix;baseUrl=defaultSettings.base_url,baseUrl&&(this.baseURL=new URI(this.documentBaseURL).toAbsolute(baseUrl.replace(/\/+$/,"")),this.baseURI=new URI(this.baseURL)),suffix=defaultSettings.suffix,defaultSettings.suffix&&(this.suffix=suffix),this.defaultSettings=defaultSettings;var pluginBaseUrls=defaultSettings.plugin_base_urls;for(var name_1 in pluginBaseUrls)AddOnManager.PluginManager.urls[name_1]=pluginBaseUrls[name_1]},init:function(settings){var result,invalidInlineTargets,self=this;invalidInlineTargets=$_8i2houjjducwnd2.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var isInvalidInlineTarget=function(settings,elm){return settings.inline&&elm.tagName.toLowerCase()in invalidInlineTargets},createId=function(elm){var id=elm.id;return id||(id=elm.name,id=id&&!DOM$9.get(id)?elm.name:DOM$9.uniqueId(),elm.setAttribute("id",id)),id},execCallback=function(name){var callback=settings[name];if(callback)return callback.apply(self,Array.prototype.slice.call(arguments,2))},hasClass=function(elm,className){return className.constructor===RegExp?className.test(elm.className):DOM$9.hasClass(elm,className)},findTargets=function(settings){var l,targets=[];if($_cum1kc9jducwn99.ie&&$_cum1kc9jducwn99.ie<11)return $_9erk7k4hjducwo2e.initError("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(settings.types)return each$23(settings.types,function(type){targets=targets.concat(DOM$9.select(type.selector))}),targets;if(settings.selector)return DOM$9.select(settings.selector);if(settings.target)return[settings.target];switch(settings.mode){case"exact":l=settings.elements||"",l.length>0&&each$23(explode$5(l),function(id){var elm;(elm=DOM$9.get(id))?targets.push(elm):each$23(document.forms,function(f){each$23(f.elements,function(e){e.name===id&&(id="mce_editor_"+instanceCounter++,DOM$9.setAttrib(e,"id",id),targets.push(e))})})});break;case"textareas":case"specific_textareas":each$23(DOM$9.select("textarea"),function(elm){settings.editor_deselector&&hasClass(elm,settings.editor_deselector)||settings.editor_selector&&!hasClass(elm,settings.editor_selector)||targets.push(elm)})}return targets},provideResults=function(editors){result=editors},initEditors=function(){var targets,initCount=0,editors=[],createEditor=function(id,settings,targetElm){var editor=new Editor(id,settings,self);editors.push(editor),editor.on("init",function(){++initCount===targets.length&&provideResults(editors)}),editor.targetElm=editor.targetElm||targetElm,editor.render()};if(DOM$9.unbind(window,"ready",initEditors),execCallback("onpageload"),targets=DomQuery.unique(findTargets(settings)),settings.types)return void each$23(settings.types,function(type){$_8i2houjjducwnd2.each(targets,function(elm){return!DOM$9.is(elm,type.selector)||(createEditor(createId(elm),extend$5({},settings,type),elm),!1)})});$_8i2houjjducwnd2.each(targets,function(elm){purgeDestroyedEditor(self.get(elm.id))}),targets=$_8i2houjjducwnd2.grep(targets,function(elm){return!self.get(elm.id)}),0===targets.length?provideResults([]):each$23(targets,function(elm){isInvalidInlineTarget(settings,elm)?$_9erk7k4hjducwo2e.initError("Could not initialize inline editor on invalid inline target element",elm):createEditor(createId(elm),settings,elm)})};return self.settings=settings,DOM$9.bind(window,"ready",initEditors),new promiseObj(function(resolve){result?resolve(result):provideResults=function(editors){resolve(editors)}})},get:function(id){return 0===arguments.length?editors.slice(0):$_c7y6af12jducwnh8.isString(id)?$_2dw1bj4jducwn6g.find(editors,function(editor){return editor.id===id}).getOr(null):$_c7y6af12jducwnh8.isNumber(id)&&editors[id]?editors[id]:null},add:function(editor){var self=this;return legacyEditors[editor.id]===editor?editor:(null===self.get(editor.id)&&(isValidLegacyKey(editor.id)&&(legacyEditors[editor.id]=editor),legacyEditors.push(editor),editors.push(editor)),toggleGlobalEvents(!0),self.activeEditor=editor,self.fire("AddEditor",{editor:editor}),beforeUnloadDelegate||(beforeUnloadDelegate=function(){self.fire("BeforeUnload")},DOM$9.bind(window,"beforeunload",beforeUnloadDelegate)),editor)},createEditor:function(id,settings){return this.add(new Editor(id,settings,this))},remove:function(selector){var i,editor,self=this;if(selector)return $_c7y6af12jducwnh8.isString(selector)?(selector=selector.selector||selector,void each$23(DOM$9.select(selector),function(elm){(editor=self.get(elm.id))&&self.remove(editor)})):(editor=selector,$_c7y6af12jducwnh8.isNull(self.get(editor.id))?null:(removeEditorFromList(editor)&&self.fire("RemoveEditor",{editor:editor}),0===editors.length&&DOM$9.unbind(window,"beforeunload",beforeUnloadDelegate),editor.remove(),toggleGlobalEvents(editors.length>0),editor));for(i=editors.length-1;i>=0;i--)self.remove(editors[i])},execCommand:function(cmd,ui,value){var self=this,editor=self.get(value);switch(cmd){case"mceAddEditor":return self.get(value)||new Editor(value,self.settings,self).render(),!0;case"mceRemoveEditor":return editor&&editor.remove(),!0;case"mceToggleEditor":return editor?(editor.isHidden()?editor.show():editor.hide(),!0):(self.execCommand("mceAddEditor",0,value),!0)}return!!self.activeEditor&&self.activeEditor.execCommand(cmd,ui,value)},triggerSave:function(){each$23(editors,function(editor){editor.save()})},addI18n:function(code,items){$_236kh79jducwojr.add(code,items)},translate:function(text){return $_236kh79jducwojr.translate(text)},setActive:function(editor){var activeEditor=this.activeEditor;this.activeEditor!==editor&&(activeEditor&&activeEditor.fire("deactivate",{relatedTarget:editor}),editor.fire("activate",{relatedTarget:activeEditor})),this.activeEditor=editor}},extend$5(EditorManager,$_5ie1x944jducwo0j),EditorManager.setup();var EditorManager$1=EditorManager;!function(RangeUtils){RangeUtils.compareRanges=$_18bpcb3yjducwnzh.isEq,RangeUtils.getCaretRangeFromPoint=$_ghraby68jducwodg.fromPoint,RangeUtils.getSelectedNode=getSelectedNode,RangeUtils.getNode=getNode}(RangeUtils||(RangeUtils={}));var extendClass,initializing,RangeUtils$1=RangeUtils,min=Math.min,max=Math.max,round$1=Math.round,relativePosition=function(rect,targetRect,rel){var x,y,w,h,targetW,targetH;return x=targetRect.x,y=targetRect.y,w=rect.w,h=rect.h,targetW=targetRect.w,targetH=targetRect.h,rel=(rel||"").split(""),"b"===rel[0]&&(y+=targetH),"r"===rel[1]&&(x+=targetW),"c"===rel[0]&&(y+=round$1(targetH/2)),"c"===rel[1]&&(x+=round$1(targetW/2)),"b"===rel[3]&&(y-=h),"r"===rel[4]&&(x-=w),"c"===rel[3]&&(y-=round$1(h/2)),"c"===rel[4]&&(x-=round$1(w/2)),create$2(x,y,w,h)},findBestRelativePosition=function(rect,targetRect,constrainRect,rels){var pos,i;for(i=0;i<rels.length;i++)if(pos=relativePosition(rect,targetRect,rels[i]),pos.x>=constrainRect.x&&pos.x+pos.w<=constrainRect.w+constrainRect.x&&pos.y>=constrainRect.y&&pos.y+pos.h<=constrainRect.h+constrainRect.y)return rels[i];return null},inflate=function(rect,w,h){return create$2(rect.x-w,rect.y-h,rect.w+2*w,rect.h+2*h)},intersect=function(rect,cropRect){var x1,y1,x2,y2;return x1=max(rect.x,cropRect.x),y1=max(rect.y,cropRect.y),x2=min(rect.x+rect.w,cropRect.x+cropRect.w),y2=min(rect.y+rect.h,cropRect.y+cropRect.h),x2-x1<0||y2-y1<0?null:create$2(x1,y1,x2-x1,y2-y1)},clamp$1=function(rect,clampRect,fixedSize){var underflowX1,underflowY1,overflowX2,overflowY2,x1,y1,x2,y2,cx2,cy2;return x1=rect.x,y1=rect.y,x2=rect.x+rect.w,y2=rect.y+rect.h,cx2=clampRect.x+clampRect.w,cy2=clampRect.y+clampRect.h,underflowX1=max(0,clampRect.x-x1),underflowY1=max(0,clampRect.y-y1),overflowX2=max(0,x2-cx2),overflowY2=max(0,y2-cy2),x1+=underflowX1,y1+=underflowY1,fixedSize&&(x2+=underflowX1,y2+=underflowY1,x1-=overflowX2,y1-=overflowY2),x2-=overflowX2,y2-=overflowY2,create$2(x1,y1,x2-x1,y2-y1)},create$2=function(x,y,w,h){return{x:x,y:y,w:w,h:h}},fromClientRect=function(clientRect){return create$2(clientRect.left,clientRect.top,clientRect.width,clientRect.height)},$_5udvi37bjducwok2={inflate:inflate,relativePosition:relativePosition,findBestRelativePosition:findBestRelativePosition,intersect:intersect,clamp:clamp$1,create:create$2,fromClientRect:fromClientRect},types={},$_eqvctj7cjducwok6={add:function(type,typeClass){types[type.toLowerCase()]=typeClass},has:function(type){return!!types[type.toLowerCase()]},get:function(type){var lctype=type.toLowerCase(),controlType=types.hasOwnProperty(lctype)?types[lctype]:null;if(null===controlType)throw new Error("Could not find module for type: "+type);return controlType},create:function(type,settings){var ControlType;if("string"==typeof type?(settings=settings||{},settings.type=type):(settings=type,type=settings.type),type=type.toLowerCase(),!(ControlType=types[type]))throw new Error("Could not find control by type: "+type);return ControlType=new ControlType(settings),ControlType.type=type,ControlType}},each$24=$_8i2houjjducwnd2.each,extend$6=$_8i2houjjducwnd2.extend,Class=function(){};Class.extend=extendClass=function(prop){var prototype,name,member,self=this,_super=self.prototype,Class=function(){var i,mixins,mixin,self=this;if(!initializing&&(self.init&&self.init.apply(self,arguments),mixins=self.Mixins))for(i=mixins.length;i--;)mixin=mixins[i],mixin.init&&mixin.init.apply(self,arguments)},dummy=function(){return this};initializing=!0,prototype=new self,initializing=!1,prop.Mixins&&(each$24(prop.Mixins,function(mixin){for(var name_1 in mixin)"init"!==name_1&&(prop[name_1]=mixin[name_1])}),_super.Mixins&&(prop.Mixins=_super.Mixins.concat(prop.Mixins))),prop.Methods&&each$24(prop.Methods.split(","),function(name){prop[name]=dummy}),prop.Properties&&each$24(prop.Properties.split(","),function(name){var fieldName="_"+name;prop[name]=function(value){var self=this;return void 0!==value?(self[fieldName]=value,self):self[fieldName]}}),prop.Statics&&each$24(prop.Statics,function(func,name){Class[name]=func}),prop.Defaults&&_super.Defaults&&(prop.Defaults=extend$6({},_super.Defaults,prop.Defaults));for(name in prop)member=prop[name],"function"==typeof member&&_super[name]?prototype[name]=function(name,fn){return function(){var ret,self=this,tmp=self._super;return self._super=_super[name],ret=fn.apply(self,arguments),self._super=tmp,ret}}(name,member):prototype[name]=member;return Class.prototype=prototype,Class.constructor=Class,Class.extend=extendClass,Class};var min$1=Math.min,max$1=Math.max,round$2=Math.round,Color=function(value){var self={},r=0,g=0,b=0,rgb2hsv=function(r,g,b){var h,s,v,d,minRGB,maxRGB;return h=0,s=0,v=0,r/=255,g/=255,b/=255,minRGB=min$1(r,min$1(g,b)),maxRGB=max$1(r,max$1(g,b)),minRGB===maxRGB?(v=minRGB,{h:0,s:0,v:100*v}):(d=r===minRGB?g-b:b===minRGB?r-g:b-r,h=r===minRGB?3:b===minRGB?1:5,h=60*(h-d/(maxRGB-minRGB)),s=(maxRGB-minRGB)/maxRGB,v=maxRGB,{h:round$2(h),s:round$2(100*s),v:round$2(100*v)})},hsvToRgb=function(hue,saturation,brightness){var side,chroma,x,match;if(hue=(parseInt(hue,10)||0)%360,saturation=parseInt(saturation,10)/100,brightness=parseInt(brightness,10)/100,saturation=max$1(0,min$1(saturation,1)),brightness=max$1(0,min$1(brightness,1)),0===saturation)return void(r=g=b=round$2(255*brightness));switch(side=hue/60,chroma=brightness*saturation,x=chroma*(1-Math.abs(side%2-1)),match=brightness-chroma,Math.floor(side)){case 0:r=chroma,g=x,b=0;break;case 1:r=x,g=chroma,b=0;break;case 2:r=0,g=chroma,b=x;break;case 3:r=0,g=x,b=chroma;break;case 4:r=x,g=0,b=chroma;break;case 5:r=chroma,g=0,b=x;break;default:r=g=b=0}r=round$2(255*(r+match)),g=round$2(255*(g+match)),b=round$2(255*(b+match))},toHex=function(){var hex=function(val){return val=parseInt(val,10).toString(16),val.length>1?val:"0"+val};return"#"+hex(r)+hex(g)+hex(b)},toRgb=function(){return{r:r,g:g,b:b}},toHsv=function(){return rgb2hsv(r,g,b)},parse=function(value){var matches;return"object"==typeof value?"r"in value?(r=value.r,g=value.g,b=value.b):"v"in value&&hsvToRgb(value.h,value.s,value.v):(matches=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(value))?(r=parseInt(matches[1],10),g=parseInt(matches[2],10),b=parseInt(matches[3],10)):(matches=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(value))?(r=parseInt(matches[1],16),g=parseInt(matches[2],16),b=parseInt(matches[3],16)):(matches=/#([0-F])([0-F])([0-F])/gi.exec(value))&&(r=parseInt(matches[1]+matches[1],16),g=parseInt(matches[2]+matches[2],16),b=parseInt(matches[3]+matches[3],16)),r=r<0?0:r>255?255:r,g=g<0?0:g>255?255:g,b=b<0?0:b>255?255:b,self};return value&&parse(value),self.toRgb=toRgb,self.toHsv=toHsv,self.toHex=toHex,self.parse=parse,self},serialize=function(o,quote){var i,v,t,name;if(quote=quote||'"',null===o)return"null";if("string"===(t=typeof o))return v="\bb\tt\nn\ff\rr\"\"''\\\\",quote+o.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,b){return'"'===quote&&"'"===a?a:(i=v.indexOf(b))+1?"\\"+v.charAt(i+1):(a=b.charCodeAt().toString(16),"\\u"+"0000".substring(a.length)+a)})+quote;if("object"===t){if(o.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(o)){for(i=0,v="[";i<o.length;i++)v+=(i>0?",":"")+serialize(o[i],quote);return v+"]"}v="{";for(name in o)o.hasOwnProperty(name)&&(v+="function"!=typeof o[name]?(v.length>1?","+quote:quote)+name+quote+":"+serialize(o[name],quote):"");return v+"}"}return""+o},$_3u1nw7fjducwokg={serialize:serialize,parse:function(text){try{return JSON.parse(text)}catch(ex){}}},$_ed3gtj7gjducwoki={callbacks:{},count:0,send:function(settings){var self=this,dom=DOMUtils.DOM,count=void 0!==settings.count?settings.count:self.count,id="tinymce_jsonp_"+count;self.callbacks[count]=function(json){dom.remove(id),delete self.callbacks[count],settings.callback(json)},dom.add(dom.doc.body,"script",{id:id,src:settings.url,type:"text/javascript"}),self.count++}},XHR={send:function(settings){var xhr,count=0,ready=function(){!settings.async||4===xhr.readyState||count++>1e4?(settings.success&&count<1e4&&200===xhr.status?settings.success.call(settings.success_scope,""+xhr.responseText,xhr,settings):settings.error&&settings.error.call(settings.error_scope,count>1e4?"TIMED_OUT":"GENERAL",xhr,settings),xhr=null):setTimeout(ready,10)};if(settings.scope=settings.scope||this,settings.success_scope=settings.success_scope||settings.scope,settings.error_scope=settings.error_scope||settings.scope,settings.async=settings.async!==!1,settings.data=settings.data||"",XHR.fire("beforeInitialize",{settings:settings}),xhr=new XMLHttpRequest){if(xhr.overrideMimeType&&xhr.overrideMimeType(settings.content_type),xhr.open(settings.type||(settings.data?"POST":"GET"),settings.url,settings.async),settings.crossDomain&&(xhr.withCredentials=!0),settings.content_type&&xhr.setRequestHeader("Content-Type",settings.content_type),settings.requestheaders&&$_8i2houjjducwnd2.each(settings.requestheaders,function(header){xhr.setRequestHeader(header.key,header.value)}),xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),xhr=XHR.fire("beforeSend",{xhr:xhr,settings:settings}).xhr,xhr.send(settings.data),!settings.async)return ready();setTimeout(ready,10)}}};$_8i2houjjducwnd2.extend(XHR,$_5ie1x944jducwo0j);var extend$7=$_8i2houjjducwnd2.extend,JSONRequest=function(settings){this.settings=extend$7({},settings),this.count=0};JSONRequest.sendRPC=function(o){return(new JSONRequest).send(o)},JSONRequest.prototype={send:function(args){var ecb=args.error,scb=args.success;args=extend$7(this.settings,args),args.success=function(c,x){c=$_3u1nw7fjducwokg.parse(c),void 0===c&&(c={error:"JSON Parse error."}),c.error?ecb.call(args.error_scope||args.scope,c.error,x):scb.call(args.success_scope||args.scope,c.result)},args.error=function(ty,x){ecb&&ecb.call(args.error_scope||args.scope,ty,x)},args.data=$_3u1nw7fjducwokg.serialize({id:args.id||"c"+this.count++,method:args.method,params:args.params}),args.content_type="application/json",XHR.send(args)}};var localStorage=window.localStorage,tinymce=EditorManager$1,publicApi={geom:{Rect:$_5udvi37bjducwok2},util:{Promise:promiseObj,Delay:$_83mf8ygjducwnbc,Tools:$_8i2houjjducwnd2,VK:$_1xm2zi59jducwo6l,URI:URI,Class:Class,EventDispatcher:Dispatcher,Observable:$_5ie1x944jducwo0j,I18n:$_236kh79jducwojr,XHR:XHR,JSON:$_3u1nw7fjducwokg,JSONRequest:JSONRequest,JSONP:$_ed3gtj7gjducwoki,LocalStorage:localStorage,Color:Color},dom:{EventUtils:EventUtils,Sizzle:Sizzle,DomQuery:DomQuery,TreeWalker:TreeWalker,DOMUtils:DOMUtils,ScriptLoader:ScriptLoader,RangeUtils:RangeUtils$1,Serializer:DomSerializer$1,ControlSelection:ControlSelection,BookmarkManager:BookmarkManager$1,Selection:Selection$1,Event:EventUtils.Event},html:{Styles:Styles,Entities:$_g4jbz61rjducwnjq,Node:Node$2,Schema:Schema,SaxParser:SaxParser$1,DomParser:DomParser,Writer:Writer,Serializer:HtmlSerializer},ui:{Factory:$_eqvctj7cjducwok6},Env:$_cum1kc9jducwn99,AddOnManager:AddOnManager,Formatter:Formatter,UndoManager:UndoManager,EditorCommands:EditorCommands,WindowManager:WindowManager,NotificationManager:NotificationManager,EditorObservable:EditorObservable$1,Shortcuts:Shortcuts,Editor:Editor,FocusManager:$_duu6az77jducwoji,EditorManager:EditorManager$1,DOM:DOMUtils.DOM,ScriptLoader:ScriptLoader.ScriptLoader,PluginManager:AddOnManager.PluginManager,ThemeManager:AddOnManager.ThemeManager,trim:$_8i2houjjducwnd2.trim,isArray:$_8i2houjjducwnd2.isArray,is:$_8i2houjjducwnd2.is,toArray:$_8i2houjjducwnd2.toArray,makeMap:$_8i2houjjducwnd2.makeMap,each:$_8i2houjjducwnd2.each,map:$_8i2houjjducwnd2.map,grep:$_8i2houjjducwnd2.grep,inArray:$_8i2houjjducwnd2.inArray,extend:$_8i2houjjducwnd2.extend,create:$_8i2houjjducwnd2.create,walk:$_8i2houjjducwnd2.walk,createNS:$_8i2houjjducwnd2.createNS,resolve:$_8i2houjjducwnd2.resolve,explode:$_8i2houjjducwnd2.explode,_addCacheSuffix:$_8i2houjjducwnd2._addCacheSuffix,isOpera:$_cum1kc9jducwn99.opera,isWebKit:$_cum1kc9jducwn99.webkit,isIE:$_cum1kc9jducwn99.ie,isGecko:$_cum1kc9jducwn99.gecko,isMac:$_cum1kc9jducwn99.mac};tinymce=$_8i2houjjducwnd2.extend(tinymce,publicApi);var Tinymce=tinymce;!function(tinymce){window.tinymce=tinymce,window.tinyMCE=tinymce}(Tinymce),function(tinymce){if("object"==typeof module)try{module.exports=tinymce}catch(_){}}(Tinymce)}()}(),angular.module("ui.tinymce",[]).value("uiTinymceConfig",{}).directive("uiTinymce",["$rootScope","$compile","$timeout","$window","$sce","uiTinymceConfig",function($rootScope,$compile,$timeout,$window,$sce,uiTinymceConfig){uiTinymceConfig=uiTinymceConfig||{};var generatedIds=0;return uiTinymceConfig.baseUrl&&(tinymce.baseURL=uiTinymceConfig.baseUrl),{require:["ngModel","^?form"],link:function(scope,element,attrs,ctrls){function toggleDisable(disabled){disabled?(ensureInstance(),tinyInstance&&tinyInstance.getBody().setAttribute("contenteditable",!1)):(ensureInstance(),tinyInstance&&!tinyInstance.settings.readonly&&tinyInstance.getBody().setAttribute("contenteditable",!0))}function ensureInstance(){tinyInstance||(tinyInstance=tinymce.get(attrs.id))}if($window.tinymce){var expression,tinyInstance,ngModel=ctrls[0],form=ctrls[1]||null,options={},updateView=function(editor){var content=editor.getContent({format:options.format}).trim();content=$sce.trustAsHtml(content),ngModel.$setViewValue(content),$rootScope.$$phase||scope.$apply()};attrs.$set("id","ui-tinymce-"+generatedIds++),expression={},angular.extend(expression,scope.$eval(attrs.uiTinymce));var setupOptions={setup:function(ed){ed.on("init",function(){ngModel.$render(),ngModel.$setPristine(),form&&form.$setPristine()}),ed.on("ExecCommand",function(){ed.save(),updateView(ed)}),ed.on("change",function(){ed.save(),updateView(ed)}),ed.on("blur",function(){element[0].blur()}),ed.on("ObjectResized",function(){ed.save(),updateView(ed)}),ed.on("remove",function(){element.remove()}),expression.setup&&expression.setup(ed,{updateView:updateView})},format:expression.format||"html",selector:"#"+attrs.id};angular.extend(options,uiTinymceConfig,expression,setupOptions),$timeout(function(){tinymce.init(options),toggleDisable(scope.$eval(attrs.ngDisabled))}),ngModel.$formatters.unshift(function(modelValue){return modelValue?$sce.trustAsHtml(modelValue):""}),ngModel.$parsers.unshift(function(viewValue){return viewValue?$sce.getTrustedHtml(viewValue):""}),ngModel.$render=function(){ensureInstance();var viewValue=ngModel.$viewValue?$sce.getTrustedHtml(ngModel.$viewValue):"";tinyInstance&&tinyInstance.getDoc()&&(tinyInstance.setContent(viewValue),tinyInstance.fire("change"))},attrs.$observe("disabled",toggleDisable),scope.$on("$tinymce:refresh",function(e,id){var eid=attrs.id;if(angular.isUndefined(id)||id===eid){var parentElement=element.parent(),clonedElement=element.clone();clonedElement.removeAttr("id"),clonedElement.removeAttr("style"),clonedElement.removeAttr("aria-hidden"),tinymce.execCommand("mceRemoveEditor",!1,eid),parentElement.append($compile(clonedElement)(scope))}}),scope.$on("$destroy",function(){ensureInstance(),tinyInstance&&(tinyInstance.remove(),tinyInstance=null)})}}}}]),function(a,b){"function"==typeof define&&define.amd?define([],b):"undefined"!=typeof exports?b():(b(),a.FileSaver={exports:{}}.exports)}(this,function(){"use strict";function b(a,b){return void 0===b?b={autoBom:!1}:"object"!=typeof b&&(console.warn("Deprecated: Expected third argument to be a object"),b={autoBom:!b}),b.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\ufeff",a],{type:a.type}):a}function c(b,c,d){var e=new XMLHttpRequest;e.open("GET",b),e.responseType="blob",e.onload=function(){a(e.response,c,d)},e.onerror=function(){console.error("could not download file")},e.send()}function d(a){var b=new XMLHttpRequest;b.open("HEAD",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent("click"))}catch(c){var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=f.saveAs||("object"!=typeof window||window!==f?function(){}:"download"in HTMLAnchorElement.prototype?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement("a");g=g||b.name||"download",j.download=g,j.rel="noopener","string"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target="_blank")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4e4),setTimeout(function(){e(j)},0))}:"msSaveOrOpenBlob"in navigator?function(f,g,h){if(g=g||f.name||"download","string"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement("a");i.href=f,i.target="_blank",setTimeout(function(){e(i)})}}:function(a,b,d,e){if(e=e||open("","_blank"),e&&(e.document.title=e.document.body.innerText="downloading..."),"string"==typeof a)return c(a,b,d);var g="application/octet-stream"===a.type,h=/constructor/i.test(f.HTMLElement)||f.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||g&&h)&&"object"==typeof FileReader){var j=new FileReader;j.onloadend=function(){var a=j.result;a=i?a:a.replace(/^data:[^;]*;/,"data:attachment/file;"),e?e.location.href=a:location=a,e=null},j.readAsDataURL(a)}else{
var k=f.URL||f.webkitURL,l=k.createObjectURL(a);e?e.location=l:location.href=l,e=null,setTimeout(function(){k.revokeObjectURL(l)},4e4)}});f.saveAs=a.saveAs=a,"undefined"!=typeof module&&(module.exports=a)});