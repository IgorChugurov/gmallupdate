/*! jQuery v2.1.4 | (c) 2005, 2015 jQuery Foundation, Inc. | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m="2.1.4",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return n.each(this,a,b)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!n.isArray(a)&&a-parseFloat(a)+1>=0},isPlainObject:function(a){return"object"!==n.type(a)||a.nodeType||n.isWindow(a)?!1:a.constructor&&!j.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=l.createElement("script"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:g.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(e=d.call(arguments,2),f=function(){return a.apply(b||this,e.concat(d.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:k}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function s(a){var b="length"in a&&a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=M.replace("w","w#"),O="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+L+"*\\]",P=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|.*)\\)|)",Q=new RegExp(L+"+","g"),R=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),S=new RegExp("^"+L+"*,"+L+"*"),T=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),U=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),V=new RegExp(P),W=new RegExp("^"+N+"$"),X={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,aa=/[+~]/,ba=/'|\\/g,ca=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),da=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ea=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(fa){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],k=b.nodeType,"string"!=typeof a||!a||1!==k&&9!==k&&11!==k)return d;if(!e&&p){if(11!==k&&(f=_.exec(a)))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return H.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName)return H.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=1!==k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(ba,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+ra(o[l]);w=aa.test(a)&&pa(b.parentNode)||b,x=o.join(",")}if(x)try{return H.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function ha(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return ia(function(b){return b=+b,ia(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function pa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=g.documentElement,e=g.defaultView,e&&e!==e.top&&(e.addEventListener?e.addEventListener("unload",ea,!1):e.attachEvent&&e.attachEvent("onunload",ea)),p=!f(g),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(g.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(g.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!g.getElementsByName||!g.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(g.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){var b=g.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",P)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===g||a.ownerDocument===v&&t(v,a)?-1:b===g||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===g?-1:b===g?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return la(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?la(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},g):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=ga.selectors={cacheLength:50,createPseudo:ia,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ca,da),a[3]=(a[3]||a[4]||a[5]||"").replace(ca,da),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ca,da).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(Q," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?ia(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return ga(a,b).length>0}}),contains:ia(function(a){return a=a.replace(ca,da),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ia(function(a){return W.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(ca,da).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:oa(function(){return[0]}),last:oa(function(a,b){return[b-1]}),eq:oa(function(a,b,c){return[0>c?c+b:c]}),even:oa(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:oa(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:oa(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:oa(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ma(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=na(b);function qa(){}qa.prototype=d.filters=d.pseudos,d.setFilters=new qa,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)};function ra(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function sa(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function ta(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ua(a,b,c){for(var d=0,e=b.length;e>d;d++)ga(a,b[d],c);return c}function va(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function wa(a,b,c,d,e,f){return d&&!d[u]&&(d=wa(d)),e&&!e[u]&&(e=wa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ua(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:va(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=va(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=va(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function xa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=sa(function(a){return a===b},h,!0),l=sa(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[sa(ta(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return wa(i>1&&ta(m),i>1&&ra(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&xa(a.slice(i,e)),f>e&&xa(a=a.slice(e)),f>e&&ra(a))}m.push(c)}return ta(m)}function ya(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=F.call(i));s=va(s)}H.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&ga.uniqueSort(i)}return k&&(w=v,j=t),r};return c?ia(f):f}return h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=xa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,ya(e,d)),f.selector=a}return f},i=ga.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ca,da),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ca,da),aa.test(j[0].type)&&pa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&ra(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,aa.test(a)&&pa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function x(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(w.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return g.call(b,a)>=0!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return!!x(this,"string"==typeof a&&u.test(a)?n(a):a||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=n.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||y).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:l,!0)),v.test(c[1])&&n.isPlainObject(b))for(c in b)n.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=l.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=l,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};A.prototype=n.fn,y=n(l);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.unique(f):f)},index:function(a){return a?"string"==typeof a?g.call(n(a),this[0]):g.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.unique(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){while((a=a[b])&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,b,c){return n.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,b,c){return n.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return n.dir(a,"previousSibling",c)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(C[a]||n.unique(e),B.test(a)&&e.reverse()),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return n.each(a.match(E)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):n.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(b=a.memory&&l,c=!0,g=e||0,e=0,f=h.length,d=!0;h&&f>g;g++)if(h[g].apply(l[0],l[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:k.disable())},k={add:function(){if(h){var c=h.length;!function g(b){n.each(b,function(b,c){var d=n.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&g(c)})}(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&n.each(arguments,function(a,b){var c;while((c=n.inArray(b,h,c))>-1)h.splice(c,1),d&&(f>=c&&f--,g>=c&&g--)}),this},has:function(a){return a?n.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],f=0,this},disable:function(){return h=i=b=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,b||k.disable(),this},locked:function(){return!i},fireWith:function(a,b){return!h||c&&!i||(b=b||[],b=[a,b.slice?b.slice():b],d?i.push(b):j(b)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!c}};return k},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&n.isFunction(a.promise)?e:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(H.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler("ready"),n(l).off("ready"))))}});function I(){l.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),n.ready()}n.ready.promise=function(b){return H||(H=n.Deferred(),"complete"===l.readyState?setTimeout(n.ready):(l.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(b)},n.ready.promise();var J=n.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)n.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};n.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+K.uid++}K.uid=1,K.accepts=n.acceptData,K.prototype={key:function(a){if(!K.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=K.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,n.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(n.isEmptyObject(f))n.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(E)||[])),c=d.length;while(c--)delete g[d[c]]}},hasData:function(a){return!n.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function P(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(O,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}M.set(a,b,c)}else c=void 0;return c}n.extend({hasData:function(a){return M.hasData(a)||L.hasData(a)},data:function(a,b,c){
return M.access(a,b,c)},removeData:function(a,b){M.remove(a,b)},_data:function(a,b,c){return L.access(a,b,c)},_removeData:function(a,b){L.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=M.get(f),1===f.nodeType&&!L.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d])));L.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){M.set(this,a)}):J(this,function(b){var c,d=n.camelCase(a);if(f&&void 0===b){if(c=M.get(f,a),void 0!==c)return c;if(c=M.get(f,d),void 0!==c)return c;if(c=P(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=M.get(this,d);M.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&M.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){M.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=L.get(a,b),c&&(!d||n.isArray(c)?d=L.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return L.get(a,c)||L.access(a,c,{empty:n.Callbacks("once memory").add(function(){L.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=L.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)},T=/^(?:checkbox|radio)$/i;!function(){var a=l.createDocumentFragment(),b=a.appendChild(l.createElement("div")),c=l.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var U="undefined";k.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;function Z(){return!0}function $(){return!1}function _(){try{return l.activeElement}catch(a){}}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return typeof n!==U&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(E)||[""],j=b.length;while(j--)h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.hasData(a)&&L.get(a);if(r&&(i=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&(delete r.handle,L.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,m,o,p=[d||l],q=j.call(b,"type")?b.type:b,r=j.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||l,3!==d.nodeType&&8!==d.nodeType&&!X.test(q+n.event.triggered)&&(q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),k=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=r.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},e||!o.trigger||o.trigger.apply(d,c)!==!1)){if(!e&&!o.noBubble&&!n.isWindow(d)){for(i=o.delegateType||q,X.test(i+q)||(g=g.parentNode);g;g=g.parentNode)p.push(g),h=g;h===(d.ownerDocument||l)&&p.push(h.defaultView||h.parentWindow||a)}f=0;while((g=p[f++])&&!b.isPropagationStopped())b.type=f>1?i:o.bindType||q,m=(L.get(g,"events")||{})[b.type]&&L.get(g,"handle"),m&&m.apply(g,c),m=k&&g[k],m&&m.apply&&n.acceptData(g)&&(b.result=m.apply(g,c),b.result===!1&&b.preventDefault());return b.type=q,e||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!n.acceptData(d)||k&&n.isFunction(d[q])&&!n.isWindow(d)&&(h=d[k],h&&(d[k]=null),n.event.triggered=q,d[q](),n.event.triggered=void 0,h&&(d[k]=h)),b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(L.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(g.namespace))&&(a.handleObj=g,a.data=g.data,e=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(a.result=e)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>=0:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||l,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=W.test(e)?this.mouseHooks:V.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new n.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=l),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=n.extend(new n.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?n.event.trigger(e,null,b):n.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?Z:$):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Z,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Z,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Z,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a),!0)};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=L.access(d,b);e||d.addEventListener(a,c,!0),L.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=L.access(d,b)-1;e?L.access(d,b,e):(d.removeEventListener(a,c,!0),L.remove(d,b))}}}),n.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=$;else if(!d)return this;return 1===e&&(f=d,d=function(a){return n().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=n.guid++)),this.each(function(){n.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=$),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});var aa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ba=/<([\w:]+)/,ca=/<|&#?\w+;/,da=/<(?:script|style|link)/i,ea=/checked\s*(?:[^=]|=\s*.checked.)/i,fa=/^$|\/(?:java|ecma)script/i,ga=/^true\/(.*)/,ha=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ia={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ia.optgroup=ia.option,ia.tbody=ia.tfoot=ia.colgroup=ia.caption=ia.thead,ia.th=ia.td;function ja(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function ka(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function la(a){var b=ga.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function ma(a,b){for(var c=0,d=a.length;d>c;c++)L.set(a[c],"globalEval",!b||L.get(b[c],"globalEval"))}function na(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(L.hasData(a)&&(f=L.access(a),g=L.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}M.hasData(a)&&(h=M.access(a),i=n.extend({},h),M.set(b,i))}}function oa(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function pa(a,b){var c=b.nodeName.toLowerCase();"input"===c&&T.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}n.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=oa(h),f=oa(a),d=0,e=f.length;e>d;d++)pa(f[d],g[d]);if(b)if(c)for(f=f||oa(a),g=g||oa(h),d=0,e=f.length;e>d;d++)na(f[d],g[d]);else na(a,h);return g=oa(h,"script"),g.length>0&&ma(g,!i&&oa(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,o=a.length;o>m;m++)if(e=a[m],e||0===e)if("object"===n.type(e))n.merge(l,e.nodeType?[e]:e);else if(ca.test(e)){f=f||k.appendChild(b.createElement("div")),g=(ba.exec(e)||["",""])[1].toLowerCase(),h=ia[g]||ia._default,f.innerHTML=h[1]+e.replace(aa,"<$1></$2>")+h[2],j=h[0];while(j--)f=f.lastChild;n.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));k.textContent="",m=0;while(e=l[m++])if((!d||-1===n.inArray(e,d))&&(i=n.contains(e.ownerDocument,e),f=oa(k.appendChild(e),"script"),i&&ma(f),c)){j=0;while(e=f[j++])fa.test(e.type||"")&&c.push(e)}return k},cleanData:function(a){for(var b,c,d,e,f=n.event.special,g=0;void 0!==(c=a[g]);g++){if(n.acceptData(c)&&(e=c[L.expando],e&&(b=L.cache[e]))){if(b.events)for(d in b.events)f[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);L.cache[e]&&delete L.cache[e]}delete M.cache[c[M.expando]]}}}),n.fn.extend({text:function(a){return J(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=ja(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=ja(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?n.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||n.cleanData(oa(c)),c.parentNode&&(b&&n.contains(c.ownerDocument,c)&&ma(oa(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(oa(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return J(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!da.test(a)&&!ia[(ba.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(aa,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(oa(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,n.cleanData(oa(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,m=this,o=l-1,p=a[0],q=n.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&ea.test(p))return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(c=n.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(f=n.map(oa(c,"script"),ka),g=f.length;l>j;j++)h=c,j!==o&&(h=n.clone(h,!0,!0),g&&n.merge(f,oa(h,"script"))),b.call(this[j],h,j);if(g)for(i=f[f.length-1].ownerDocument,n.map(f,la),j=0;g>j;j++)h=f[j],fa.test(h.type||"")&&!L.access(h,"globalEval")&&n.contains(i,h)&&(h.src?n._evalUrl&&n._evalUrl(h.src):n.globalEval(h.textContent.replace(ha,"")))}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),g=e.length-1,h=0;g>=h;h++)c=h===g?this:this.clone(!0),n(e[h])[b](c),f.apply(d,c.get());return this.pushStack(d)}});var qa,ra={};function sa(b,c){var d,e=n(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:n.css(e[0],"display");return e.detach(),f}function ta(a){var b=l,c=ra[a];return c||(c=sa(a,b),"none"!==c&&c||(qa=(qa||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=qa[0].contentDocument,b.write(),b.close(),c=sa(a,b),qa.detach()),ra[a]=c),c}var ua=/^margin/,va=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wa=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)};function xa(a,b,c){var d,e,f,g,h=a.style;return c=c||wa(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),va.test(g)&&ua.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function ya(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d=l.documentElement,e=l.createElement("div"),f=l.createElement("div");if(f.style){f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===f.style.backgroundClip,e.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",e.appendChild(f);function g(){f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",f.innerHTML="",d.appendChild(e);var g=a.getComputedStyle(f,null);b="1%"!==g.top,c="4px"===g.width,d.removeChild(e)}a.getComputedStyle&&n.extend(k,{pixelPosition:function(){return g(),b},boxSizingReliable:function(){return null==c&&g(),c},reliableMarginRight:function(){var b,c=f.appendChild(l.createElement("div"));return c.style.cssText=f.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",f.style.width="1px",d.appendChild(e),b=!parseFloat(a.getComputedStyle(c,null).marginRight),d.removeChild(e),f.removeChild(c),b}})}}(),n.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var za=/^(none|table(?!-c[ea]).+)/,Aa=new RegExp("^("+Q+")(.*)$","i"),Ba=new RegExp("^([+-])=("+Q+")","i"),Ca={position:"absolute",visibility:"hidden",display:"block"},Da={letterSpacing:"0",fontWeight:"400"},Ea=["Webkit","O","Moz","ms"];function Fa(a,b){if(b in a)return b;var c=b[0].toUpperCase()+b.slice(1),d=b,e=Ea.length;while(e--)if(b=Ea[e]+c,b in a)return b;return d}function Ga(a,b,c){var d=Aa.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Ha(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+R[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+R[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+R[f]+"Width",!0,e))):(g+=n.css(a,"padding"+R[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+R[f]+"Width",!0,e)));return g}function Ia(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=wa(a),g="border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=xa(a,b,f),(0>e||null==e)&&(e=a.style[b]),va.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Ha(a,b,c||(g?"border":"content"),d,f)+"px"}function Ja(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=L.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&S(d)&&(f[g]=L.access(d,"olddisplay",ta(d.nodeName)))):(e=S(d),"none"===c&&e||L.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=xa(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Fa(i,h)),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Ba.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(n.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||n.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Fa(a.style,h)),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=xa(a,b,d)),"normal"===e&&b in Da&&(e=Da[b]),""===c||c?(f=parseFloat(e),c===!0||n.isNumeric(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?za.test(n.css(a,"display"))&&0===a.offsetWidth?n.swap(a,Ca,function(){return Ia(a,b,d)}):Ia(a,b,d):void 0},set:function(a,c,d){var e=d&&wa(a);return Ga(a,c,d?Ha(a,b,d,"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),n.cssHooks.marginRight=ya(k.reliableMarginRight,function(a,b){return b?n.swap(a,{display:"inline-block"},xa,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+R[d]+b]=f[d]||f[d-2]||f[0];return e}},ua.test(a)||(n.cssHooks[a+b].set=Ga)}),n.fn.extend({css:function(a,b){return J(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=wa(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Ja(this,!0)},hide:function(){return Ja(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){S(this)?n(this).show():n(this).hide()})}});function Ka(a,b,c,d,e){return new Ka.prototype.init(a,b,c,d,e)}n.Tween=Ka,Ka.prototype={constructor:Ka,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Ka.propHooks[this.prop];return a&&a.get?a.get(this):Ka.propHooks._default.get(this)},run:function(a){var b,c=Ka.propHooks[this.prop];return this.options.duration?this.pos=b=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Ka.propHooks._default.set(this),this}},Ka.prototype.init.prototype=Ka.prototype,Ka.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Ka.propHooks.scrollTop=Ka.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},n.fx=Ka.prototype.init,n.fx.step={};var La,Ma,Na=/^(?:toggle|show|hide)$/,Oa=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pa=/queueHooks$/,Qa=[Va],Ra={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=Oa.exec(b),f=e&&e[3]||(n.cssNumber[a]?"":"px"),g=(n.cssNumber[a]||"px"!==f&&+d)&&Oa.exec(n.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,n.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function Sa(){return setTimeout(function(){La=void 0}),La=n.now()}function Ta(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=R[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ua(a,b,c){for(var d,e=(Ra[b]||[]).concat(Ra["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Va(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&S(a),q=L.get(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(a,"display"),k="none"===j?L.get(a,"olddisplay")||ta(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Na.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?ta(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=L.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;L.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ua(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function Wa(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Xa(a,b,c){var d,e,f=0,g=Qa.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=La||Sa(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:La||Sa(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Wa(k,j.opts.specialEasing);g>f;f++)if(d=Qa[f].call(j,a,k,j.opts))return d;return n.map(k,Ua,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(Xa,{tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],Ra[c]=Ra[c]||[],Ra[c].unshift(b)},prefilter:function(a,b){b?Qa.unshift(a):Qa.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(S).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=Xa(this,n.extend({},a),f);(e||L.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=L.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Pa.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=L.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Ta(b,!0),a,d,e)}}),n.each({slideDown:Ta("show"),slideUp:Ta("hide"),slideToggle:Ta("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(La=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),La=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Ma||(Ma=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(Ma),Ma=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(a,b){return a=n.fx?n.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=l.createElement("input"),b=l.createElement("select"),c=b.appendChild(l.createElement("option"));a.type="checkbox",k.checkOn=""!==a.value,k.optSelected=c.selected,b.disabled=!0,k.optDisabled=!c.disabled,a=l.createElement("input"),a.value="t",a.type="radio",k.radioValue="t"===a.value}();var Ya,Za,$a=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return J(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===U?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),d=n.attrHooks[b]||(n.expr.match.bool.test(b)?Za:Ya)),
void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=n.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void n.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),Za={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=$a[b]||n.find.attr;$a[b]=function(a,b,d){var e,f;return d||(f=$a[b],$a[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,$a[b]=f),e}});var _a=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(a,b){return J(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!n.isXMLDoc(a),f&&(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||_a.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var ab=/[\t\r\n\f]/g;n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ab," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=n.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ab," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?n.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(n.isFunction(a)?function(c){n(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=n(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===U||"boolean"===c)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||a===!1?"":L.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ab," ").indexOf(b)>=0)return!0;return!1}});var bb=/\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(bb,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=n.inArray(d.value,f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var cb=n.now(),db=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+a),b};var eb=/#.*$/,fb=/([?&])_=[^&]*/,gb=/^(.*?):[ \t]*([^\r\n]*)$/gm,hb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ib=/^(?:GET|HEAD)$/,jb=/^\/\//,kb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,lb={},mb={},nb="*/".concat("*"),ob=a.location.href,pb=kb.exec(ob.toLowerCase())||[];function qb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(n.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function rb(a,b,c,d){var e={},f=a===mb;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function sb(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function tb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function ub(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ob,type:"GET",isLocal:hb.test(pb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":nb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?sb(sb(a,n.ajaxSettings),b):sb(n.ajaxSettings,a)},ajaxPrefilter:qb(lb),ajaxTransport:qb(mb),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=n.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?n(l):n.event,o=n.Deferred(),p=n.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!f){f={};while(b=gb.exec(e))f[b[1].toLowerCase()]=b[2]}b=f[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return c&&c.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||ob)+"").replace(eb,"").replace(jb,pb[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=n.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(h=kb.exec(k.url.toLowerCase()),k.crossDomain=!(!h||h[1]===pb[1]&&h[2]===pb[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(pb[3]||("http:"===pb[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=n.param(k.data,k.traditional)),rb(lb,k,b,v),2===t)return v;i=n.event&&k.global,i&&0===n.active++&&n.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!ib.test(k.type),d=k.url,k.hasContent||(k.data&&(d=k.url+=(db.test(d)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=fb.test(d)?d.replace(fb,"$1_="+cb++):d+(db.test(d)?"&":"?")+"_="+cb++)),k.ifModified&&(n.lastModified[d]&&v.setRequestHeader("If-Modified-Since",n.lastModified[d]),n.etag[d]&&v.setRequestHeader("If-None-Match",n.etag[d])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+nb+"; q=0.01":""):k.accepts["*"]);for(j in k.headers)v.setRequestHeader(j,k.headers[j]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(j in{success:1,error:1,complete:1})v[j](k[j]);if(c=rb(mb,k,b,v)){v.readyState=1,i&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,c.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,f,h){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),c=void 0,e=h||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,f&&(u=tb(k,v,f)),u=ub(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(n.lastModified[d]=w),w=v.getResponseHeader("etag"),w&&(n.etag[d]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,i&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),i&&(m.trigger("ajaxComplete",[v,k]),--n.active||n.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(n.isFunction(a)?function(b){n(this).wrapInner(a.call(this,b))}:function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var vb=/%20/g,wb=/\[\]$/,xb=/\r?\n/g,yb=/^(?:submit|button|image|reset|file)$/i,zb=/^(?:input|select|textarea|keygen)/i;function Ab(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||wb.test(a)?d(a,e):Ab(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Ab(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Ab(c,a[c],b,e);return d.join("&").replace(vb,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&zb.test(this.nodeName)&&!yb.test(a)&&(this.checked||!T.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(xb,"\r\n")}}):{name:b.name,value:c.replace(xb,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Bb=0,Cb={},Db={0:200,1223:204},Eb=n.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in Cb)Cb[a]()}),k.cors=!!Eb&&"withCredentials"in Eb,k.ajax=Eb=!!Eb,n.ajaxTransport(function(a){var b;return k.cors||Eb&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Bb;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Cb[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Db[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Cb[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h}},abort:function(){b&&b()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=n("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),l.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Fb=[],Gb=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Fb.pop()||n.expando+"_"+cb++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Gb.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gb.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Gb,"$1"+e):b.jsonp!==!1&&(b.url+=(db.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Fb.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||l;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=n.buildFragment([a],b,e),e&&e.length&&n(e).remove(),n.merge([],d.childNodes))};var Hb=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Hb)return Hb.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};var Ib=a.document.documentElement;function Jb(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,n.contains(b,d)?(typeof d.getBoundingClientRect!==U&&(e=d.getBoundingClientRect()),c=Jb(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||Ib;while(a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Ib})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;n.fn[b]=function(e){return J(this,function(b,e,f){var g=Jb(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=ya(k.pixelPosition,function(a,c){return c?(c=xa(a,b),va.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return J(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Kb=a.jQuery,Lb=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Lb),b&&a.jQuery===n&&(a.jQuery=Kb),n},typeof b===U&&(a.jQuery=a.$=n),n});

/*
 AngularJS v1.3.20
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(R,W,u){'use strict';function S(b){return function(){var a=arguments[0],c;c="["+(b?b+":":"")+a+"] http://errors.angularjs.org/1.3.20/"+(b?b+"/":"")+a;for(a=1;a<arguments.length;a++){c=c+(1==a?"?":"&")+"p"+(a-1)+"=";var d=encodeURIComponent,e;e=arguments[a];e="function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof e?"undefined":"string"!=typeof e?JSON.stringify(e):e;c+=d(e)}return Error(c)}}function Ta(b){if(null==b||Ua(b))return!1;var a="length"in Object(b)&&b.length;
return b.nodeType===qa&&a?!0:x(b)||H(b)||0===a||"number"===typeof a&&0<a&&a-1 in b}function r(b,a,c){var d,e;if(b)if(z(b))for(d in b)"prototype"==d||"length"==d||"name"==d||b.hasOwnProperty&&!b.hasOwnProperty(d)||a.call(c,b[d],d,b);else if(H(b)||Ta(b)){var f="object"!==typeof b;d=0;for(e=b.length;d<e;d++)(f||d in b)&&a.call(c,b[d],d,b)}else if(b.forEach&&b.forEach!==r)b.forEach(a,c,b);else for(d in b)b.hasOwnProperty(d)&&a.call(c,b[d],d,b);return b}function Ed(b,a,c){for(var d=Object.keys(b).sort(),
e=0;e<d.length;e++)a.call(c,b[d[e]],d[e]);return d}function lc(b){return function(a,c){b(c,a)}}function Fd(){return++rb}function mc(b,a){a?b.$$hashKey=a:delete b.$$hashKey}function w(b){for(var a=b.$$hashKey,c=1,d=arguments.length;c<d;c++){var e=arguments[c];if(e)for(var f=Object.keys(e),g=0,h=f.length;g<h;g++){var l=f[g];b[l]=e[l]}}mc(b,a);return b}function aa(b){return parseInt(b,10)}function Ob(b,a){return w(Object.create(b),a)}function A(){}function ra(b){return b}function ea(b){return function(){return b}}
function D(b){return"undefined"===typeof b}function y(b){return"undefined"!==typeof b}function L(b){return null!==b&&"object"===typeof b}function x(b){return"string"===typeof b}function Y(b){return"number"===typeof b}function ha(b){return"[object Date]"===Ca.call(b)}function z(b){return"function"===typeof b}function Va(b){return"[object RegExp]"===Ca.call(b)}function Ua(b){return b&&b.window===b}function Wa(b){return b&&b.$evalAsync&&b.$watch}function Xa(b){return"boolean"===typeof b}function nc(b){return!(!b||
!(b.nodeName||b.prop&&b.attr&&b.find))}function Gd(b){var a={};b=b.split(",");var c;for(c=0;c<b.length;c++)a[b[c]]=!0;return a}function wa(b){return K(b.nodeName||b[0]&&b[0].nodeName)}function Ya(b,a){var c=b.indexOf(a);0<=c&&b.splice(c,1);return a}function Da(b,a,c,d){if(Ua(b)||Wa(b))throw Ja("cpws");if(a){if(b===a)throw Ja("cpi");c=c||[];d=d||[];if(L(b)){var e=c.indexOf(b);if(-1!==e)return d[e];c.push(b);d.push(a)}if(H(b))for(var f=a.length=0;f<b.length;f++)e=Da(b[f],null,c,d),L(b[f])&&(c.push(b[f]),
d.push(e)),a.push(e);else{var g=a.$$hashKey;H(a)?a.length=0:r(a,function(b,c){delete a[c]});for(f in b)b.hasOwnProperty(f)&&(e=Da(b[f],null,c,d),L(b[f])&&(c.push(b[f]),d.push(e)),a[f]=e);mc(a,g)}}else if(a=b)H(b)?a=Da(b,[],c,d):ha(b)?a=new Date(b.getTime()):Va(b)?(a=new RegExp(b.source,b.toString().match(/[^\/]*$/)[0]),a.lastIndex=b.lastIndex):L(b)&&(e=Object.create(Object.getPrototypeOf(b)),a=Da(b,e,c,d));return a}function sa(b,a){if(H(b)){a=a||[];for(var c=0,d=b.length;c<d;c++)a[c]=b[c]}else if(L(b))for(c in a=
a||{},b)if("$"!==c.charAt(0)||"$"!==c.charAt(1))a[c]=b[c];return a||b}function ia(b,a){if(b===a)return!0;if(null===b||null===a)return!1;if(b!==b&&a!==a)return!0;var c=typeof b,d;if(c==typeof a&&"object"==c)if(H(b)){if(!H(a))return!1;if((c=b.length)==a.length){for(d=0;d<c;d++)if(!ia(b[d],a[d]))return!1;return!0}}else{if(ha(b))return ha(a)?ia(b.getTime(),a.getTime()):!1;if(Va(b))return Va(a)?b.toString()==a.toString():!1;if(Wa(b)||Wa(a)||Ua(b)||Ua(a)||H(a)||ha(a)||Va(a))return!1;c={};for(d in b)if("$"!==
d.charAt(0)&&!z(b[d])){if(!ia(b[d],a[d]))return!1;c[d]=!0}for(d in a)if(!c.hasOwnProperty(d)&&"$"!==d.charAt(0)&&a[d]!==u&&!z(a[d]))return!1;return!0}return!1}function Za(b,a,c){return b.concat($a.call(a,c))}function oc(b,a){var c=2<arguments.length?$a.call(arguments,2):[];return!z(a)||a instanceof RegExp?a:c.length?function(){return arguments.length?a.apply(b,Za(c,arguments,0)):a.apply(b,c)}:function(){return arguments.length?a.apply(b,arguments):a.call(b)}}function Hd(b,a){var c=a;"string"===typeof b&&
"$"===b.charAt(0)&&"$"===b.charAt(1)?c=u:Ua(a)?c="$WINDOW":a&&W===a?c="$DOCUMENT":Wa(a)&&(c="$SCOPE");return c}function ab(b,a){if("undefined"===typeof b)return u;Y(a)||(a=a?2:null);return JSON.stringify(b,Hd,a)}function pc(b){return x(b)?JSON.parse(b):b}function xa(b){b=B(b).clone();try{b.empty()}catch(a){}var c=B("<div>").append(b).html();try{return b[0].nodeType===bb?K(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+K(b)})}catch(d){return K(c)}}function qc(b){try{return decodeURIComponent(b)}catch(a){}}
function rc(b){var a={},c,d;r((b||"").split("&"),function(b){b&&(c=b.replace(/\+/g,"%20").split("="),d=qc(c[0]),y(d)&&(b=y(c[1])?qc(c[1]):!0,sc.call(a,d)?H(a[d])?a[d].push(b):a[d]=[a[d],b]:a[d]=b))});return a}function Pb(b){var a=[];r(b,function(b,d){H(b)?r(b,function(b){a.push(Ea(d,!0)+(!0===b?"":"="+Ea(b,!0)))}):a.push(Ea(d,!0)+(!0===b?"":"="+Ea(b,!0)))});return a.length?a.join("&"):""}function sb(b){return Ea(b,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Ea(b,a){return encodeURIComponent(b).replace(/%40/gi,
"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,a?"%20":"+")}function Id(b,a){var c,d,e=tb.length;b=B(b);for(d=0;d<e;++d)if(c=tb[d]+a,x(c=b.attr(c)))return c;return null}function Jd(b,a){var c,d,e={};r(tb,function(a){a+="app";!c&&b.hasAttribute&&b.hasAttribute(a)&&(c=b,d=b.getAttribute(a))});r(tb,function(a){a+="app";var e;!c&&(e=b.querySelector("["+a.replace(":","\\:")+"]"))&&(c=e,d=e.getAttribute(a))});c&&(e.strictDi=null!==Id(c,"strict-di"),
a(c,d?[d]:[],e))}function tc(b,a,c){L(c)||(c={});c=w({strictDi:!1},c);var d=function(){b=B(b);if(b.injector()){var d=b[0]===W?"document":xa(b);throw Ja("btstrpd",d.replace(/</,"&lt;").replace(/>/,"&gt;"));}a=a||[];a.unshift(["$provide",function(a){a.value("$rootElement",b)}]);c.debugInfoEnabled&&a.push(["$compileProvider",function(a){a.debugInfoEnabled(!0)}]);a.unshift("ng");d=cb(a,c.strictDi);d.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",
d);c(b)(a)})}]);return d},e=/^NG_ENABLE_DEBUG_INFO!/,f=/^NG_DEFER_BOOTSTRAP!/;R&&e.test(R.name)&&(c.debugInfoEnabled=!0,R.name=R.name.replace(e,""));if(R&&!f.test(R.name))return d();R.name=R.name.replace(f,"");ca.resumeBootstrap=function(b){r(b,function(b){a.push(b)});return d()};z(ca.resumeDeferredBootstrap)&&ca.resumeDeferredBootstrap()}function Kd(){R.name="NG_ENABLE_DEBUG_INFO!"+R.name;R.location.reload()}function Ld(b){b=ca.element(b).injector();if(!b)throw Ja("test");return b.get("$$testability")}
function uc(b,a){a=a||"_";return b.replace(Md,function(b,d){return(d?a:"")+b.toLowerCase()})}function Nd(){var b;vc||((ta=R.jQuery)&&ta.fn.on?(B=ta,w(ta.fn,{scope:Ka.scope,isolateScope:Ka.isolateScope,controller:Ka.controller,injector:Ka.injector,inheritedData:Ka.inheritedData}),b=ta.cleanData,ta.cleanData=function(a){var c;if(Qb)Qb=!1;else for(var d=0,e;null!=(e=a[d]);d++)(c=ta._data(e,"events"))&&c.$destroy&&ta(e).triggerHandler("$destroy");b(a)}):B=T,ca.element=B,vc=!0)}function Rb(b,a,c){if(!b)throw Ja("areq",
a||"?",c||"required");return b}function La(b,a,c){c&&H(b)&&(b=b[b.length-1]);Rb(z(b),a,"not a function, got "+(b&&"object"===typeof b?b.constructor.name||"Object":typeof b));return b}function Ma(b,a){if("hasOwnProperty"===b)throw Ja("badname",a);}function wc(b,a,c){if(!a)return b;a=a.split(".");for(var d,e=b,f=a.length,g=0;g<f;g++)d=a[g],b&&(b=(e=b)[d]);return!c&&z(b)?oc(e,b):b}function ub(b){var a=b[0];b=b[b.length-1];var c=[a];do{a=a.nextSibling;if(!a)break;c.push(a)}while(a!==b);return B(c)}function ja(){return Object.create(null)}
function Od(b){function a(a,b,c){return a[b]||(a[b]=c())}var c=S("$injector"),d=S("ng");b=a(b,"angular",Object);b.$$minErr=b.$$minErr||S;return a(b,"module",function(){var b={};return function(f,g,h){if("hasOwnProperty"===f)throw d("badname","module");g&&b.hasOwnProperty(f)&&(b[f]=null);return a(b,f,function(){function a(c,d,e,f){f||(f=b);return function(){f[e||"push"]([c,d,arguments]);return t}}if(!g)throw c("nomod",f);var b=[],d=[],e=[],q=a("$injector","invoke","push",d),t={_invokeQueue:b,_configBlocks:d,
_runBlocks:e,requires:g,name:f,provider:a("$provide","provider"),factory:a("$provide","factory"),service:a("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),animation:a("$animateProvider","register"),filter:a("$filterProvider","register"),controller:a("$controllerProvider","register"),directive:a("$compileProvider","directive"),config:q,run:function(a){e.push(a);return this}};h&&q(h);return t})}})}function Pd(b){w(b,{bootstrap:tc,copy:Da,extend:w,equals:ia,
element:B,forEach:r,injector:cb,noop:A,bind:oc,toJson:ab,fromJson:pc,identity:ra,isUndefined:D,isDefined:y,isString:x,isFunction:z,isObject:L,isNumber:Y,isElement:nc,isArray:H,version:Qd,isDate:ha,lowercase:K,uppercase:vb,callbacks:{counter:0},getTestability:Ld,$$minErr:S,$$csp:db,reloadWithDebugInfo:Kd});eb=Od(R);try{eb("ngLocale")}catch(a){eb("ngLocale",[]).provider("$locale",Rd)}eb("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:Sd});a.provider("$compile",xc).directive({a:Td,
input:yc,textarea:yc,form:Ud,script:Vd,select:Wd,style:Xd,option:Yd,ngBind:Zd,ngBindHtml:$d,ngBindTemplate:ae,ngClass:be,ngClassEven:ce,ngClassOdd:de,ngCloak:ee,ngController:fe,ngForm:ge,ngHide:he,ngIf:ie,ngInclude:je,ngInit:ke,ngNonBindable:le,ngPluralize:me,ngRepeat:ne,ngShow:oe,ngStyle:pe,ngSwitch:qe,ngSwitchWhen:re,ngSwitchDefault:se,ngOptions:te,ngTransclude:ue,ngModel:ve,ngList:we,ngChange:xe,pattern:zc,ngPattern:zc,required:Ac,ngRequired:Ac,minlength:Bc,ngMinlength:Bc,maxlength:Cc,ngMaxlength:Cc,
ngValue:ye,ngModelOptions:ze}).directive({ngInclude:Ae}).directive(wb).directive(Dc);a.provider({$anchorScroll:Be,$animate:Ce,$browser:De,$cacheFactory:Ee,$controller:Fe,$document:Ge,$exceptionHandler:He,$filter:Ec,$interpolate:Ie,$interval:Je,$http:Ke,$httpBackend:Le,$location:Me,$log:Ne,$parse:Oe,$rootScope:Pe,$q:Qe,$$q:Re,$sce:Se,$sceDelegate:Te,$sniffer:Ue,$templateCache:Ve,$templateRequest:We,$$testability:Xe,$timeout:Ye,$window:Ze,$$rAF:$e,$$asyncCallback:af,$$jqLite:bf})}])}function fb(b){return b.replace(cf,
function(a,b,d,e){return e?d.toUpperCase():d}).replace(df,"Moz$1")}function Fc(b){b=b.nodeType;return b===qa||!b||9===b}function Gc(b,a){var c,d,e=a.createDocumentFragment(),f=[];if(Sb.test(b)){c=c||e.appendChild(a.createElement("div"));d=(ef.exec(b)||["",""])[1].toLowerCase();d=ka[d]||ka._default;c.innerHTML=d[1]+b.replace(ff,"<$1></$2>")+d[2];for(d=d[0];d--;)c=c.lastChild;f=Za(f,c.childNodes);c=e.firstChild;c.textContent=""}else f.push(a.createTextNode(b));e.textContent="";e.innerHTML="";r(f,function(a){e.appendChild(a)});
return e}function T(b){if(b instanceof T)return b;var a;x(b)&&(b=N(b),a=!0);if(!(this instanceof T)){if(a&&"<"!=b.charAt(0))throw Tb("nosel");return new T(b)}if(a){a=W;var c;b=(c=gf.exec(b))?[a.createElement(c[1])]:(c=Gc(b,a))?c.childNodes:[]}Hc(this,b)}function Ub(b){return b.cloneNode(!0)}function xb(b,a){a||yb(b);if(b.querySelectorAll)for(var c=b.querySelectorAll("*"),d=0,e=c.length;d<e;d++)yb(c[d])}function Ic(b,a,c,d){if(y(d))throw Tb("offargs");var e=(d=zb(b))&&d.events,f=d&&d.handle;if(f)if(a)r(a.split(" "),
function(a){if(y(c)){var d=e[a];Ya(d||[],c);if(d&&0<d.length)return}b.removeEventListener(a,f,!1);delete e[a]});else for(a in e)"$destroy"!==a&&b.removeEventListener(a,f,!1),delete e[a]}function yb(b,a){var c=b.ng339,d=c&&Ab[c];d&&(a?delete d.data[a]:(d.handle&&(d.events.$destroy&&d.handle({},"$destroy"),Ic(b)),delete Ab[c],b.ng339=u))}function zb(b,a){var c=b.ng339,c=c&&Ab[c];a&&!c&&(b.ng339=c=++hf,c=Ab[c]={events:{},data:{},handle:u});return c}function Vb(b,a,c){if(Fc(b)){var d=y(c),e=!d&&a&&!L(a),
f=!a;b=(b=zb(b,!e))&&b.data;if(d)b[a]=c;else{if(f)return b;if(e)return b&&b[a];w(b,a)}}}function Bb(b,a){return b.getAttribute?-1<(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+a+" "):!1}function Cb(b,a){a&&b.setAttribute&&r(a.split(" "),function(a){b.setAttribute("class",N((" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+N(a)+" "," ")))})}function Db(b,a){if(a&&b.setAttribute){var c=(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");
r(a.split(" "),function(a){a=N(a);-1===c.indexOf(" "+a+" ")&&(c+=a+" ")});b.setAttribute("class",N(c))}}function Hc(b,a){if(a)if(a.nodeType)b[b.length++]=a;else{var c=a.length;if("number"===typeof c&&a.window!==a){if(c)for(var d=0;d<c;d++)b[b.length++]=a[d]}else b[b.length++]=a}}function Jc(b,a){return Eb(b,"$"+(a||"ngController")+"Controller")}function Eb(b,a,c){9==b.nodeType&&(b=b.documentElement);for(a=H(a)?a:[a];b;){for(var d=0,e=a.length;d<e;d++)if((c=B.data(b,a[d]))!==u)return c;b=b.parentNode||
11===b.nodeType&&b.host}}function Kc(b){for(xb(b,!0);b.firstChild;)b.removeChild(b.firstChild)}function Lc(b,a){a||xb(b);var c=b.parentNode;c&&c.removeChild(b)}function jf(b,a){a=a||R;if("complete"===a.document.readyState)a.setTimeout(b);else B(a).on("load",b)}function Mc(b,a){var c=Fb[a.toLowerCase()];return c&&Nc[wa(b)]&&c}function kf(b,a){var c=b.nodeName;return("INPUT"===c||"TEXTAREA"===c)&&Oc[a]}function lf(b,a){var c=function(c,e){c.isDefaultPrevented=function(){return c.defaultPrevented};var f=
a[e||c.type],g=f?f.length:0;if(g){if(D(c.immediatePropagationStopped)){var h=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0;c.stopPropagation&&c.stopPropagation();h&&h.call(c)}}c.isImmediatePropagationStopped=function(){return!0===c.immediatePropagationStopped};1<g&&(f=sa(f));for(var l=0;l<g;l++)c.isImmediatePropagationStopped()||f[l].call(b,c)}};c.elem=b;return c}function bf(){this.$get=function(){return w(T,{hasClass:function(b,a){b.attr&&(b=b[0]);
return Bb(b,a)},addClass:function(b,a){b.attr&&(b=b[0]);return Db(b,a)},removeClass:function(b,a){b.attr&&(b=b[0]);return Cb(b,a)}})}}function Na(b,a){var c=b&&b.$$hashKey;if(c)return"function"===typeof c&&(c=b.$$hashKey()),c;c=typeof b;return c="function"==c||"object"==c&&null!==b?b.$$hashKey=c+":"+(a||Fd)():c+":"+b}function gb(b,a){if(a){var c=0;this.nextUid=function(){return++c}}r(b,this.put,this)}function mf(b){return(b=b.toString().replace(Pc,"").match(Qc))?"function("+(b[1]||"").replace(/[\s\r\n]+/,
" ")+")":"fn"}function cb(b,a){function c(a){return function(b,c){if(L(b))r(b,lc(a));else return a(b,c)}}function d(a,b){Ma(a,"service");if(z(b)||H(b))b=q.instantiate(b);if(!b.$get)throw Fa("pget",a);return p[a+"Provider"]=b}function e(a,b){return function(){var c=s.invoke(b,this);if(D(c))throw Fa("undef",a);return c}}function f(a,b,c){return d(a,{$get:!1!==c?e(a,b):b})}function g(a){var b=[],c;r(a,function(a){function d(a){var b,c;b=0;for(c=a.length;b<c;b++){var e=a[b],f=q.get(e[0]);f[e[1]].apply(f,
e[2])}}if(!n.get(a)){n.put(a,!0);try{x(a)?(c=eb(a),b=b.concat(g(c.requires)).concat(c._runBlocks),d(c._invokeQueue),d(c._configBlocks)):z(a)?b.push(q.invoke(a)):H(a)?b.push(q.invoke(a)):La(a,"module")}catch(e){throw H(a)&&(a=a[a.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Fa("modulerr",a,e.stack||e.message||e);}}});return b}function h(b,c){function d(a,e){if(b.hasOwnProperty(a)){if(b[a]===l)throw Fa("cdep",a+" <- "+k.join(" <- "));return b[a]}try{return k.unshift(a),
b[a]=l,b[a]=c(a,e)}catch(f){throw b[a]===l&&delete b[a],f;}finally{k.shift()}}function e(b,c,f,g){"string"===typeof f&&(g=f,f=null);var k=[],l=cb.$$annotate(b,a,g),h,q,p;q=0;for(h=l.length;q<h;q++){p=l[q];if("string"!==typeof p)throw Fa("itkn",p);k.push(f&&f.hasOwnProperty(p)?f[p]:d(p,g))}H(b)&&(b=b[h]);return b.apply(c,k)}return{invoke:e,instantiate:function(a,b,c){var d=Object.create((H(a)?a[a.length-1]:a).prototype||null);a=e(a,d,b,c);return L(a)||z(a)?a:d},get:d,annotate:cb.$$annotate,has:function(a){return p.hasOwnProperty(a+
"Provider")||b.hasOwnProperty(a)}}}a=!0===a;var l={},k=[],n=new gb([],!0),p={$provide:{provider:c(d),factory:c(f),service:c(function(a,b){return f(a,["$injector",function(a){return a.instantiate(b)}])}),value:c(function(a,b){return f(a,ea(b),!1)}),constant:c(function(a,b){Ma(a,"constant");p[a]=b;t[a]=b}),decorator:function(a,b){var c=q.get(a+"Provider"),d=c.$get;c.$get=function(){var a=s.invoke(d,c);return s.invoke(b,null,{$delegate:a})}}}},q=p.$injector=h(p,function(a,b){ca.isString(b)&&k.push(b);
throw Fa("unpr",k.join(" <- "));}),t={},s=t.$injector=h(t,function(a,b){var c=q.get(a+"Provider",b);return s.invoke(c.$get,c,u,a)});r(g(b),function(a){s.invoke(a||A)});return s}function Be(){var b=!0;this.disableAutoScrolling=function(){b=!1};this.$get=["$window","$location","$rootScope",function(a,c,d){function e(a){var b=null;Array.prototype.some.call(a,function(a){if("a"===wa(a))return b=a,!0});return b}function f(b){if(b){b.scrollIntoView();var c;c=g.yOffset;z(c)?c=c():nc(c)?(c=c[0],c="fixed"!==
a.getComputedStyle(c).position?0:c.getBoundingClientRect().bottom):Y(c)||(c=0);c&&(b=b.getBoundingClientRect().top,a.scrollBy(0,b-c))}else a.scrollTo(0,0)}function g(){var a=c.hash(),b;a?(b=h.getElementById(a))?f(b):(b=e(h.getElementsByName(a)))?f(b):"top"===a&&f(null):f(null)}var h=a.document;b&&d.$watch(function(){return c.hash()},function(a,b){a===b&&""===a||jf(function(){d.$evalAsync(g)})});return g}]}function af(){this.$get=["$$rAF","$timeout",function(b,a){return b.supported?function(a){return b(a)}:
function(b){return a(b,0,!1)}}]}function nf(b,a,c,d){function e(a){try{a.apply(null,$a.call(arguments,1))}finally{if(m--,0===m)for(;C.length;)try{C.pop()()}catch(b){c.error(b)}}}function f(a,b){(function da(){r($,function(a){a()});I=b(da,a)})()}function g(){h();l()}function h(){a:{try{M=t.state;break a}catch(a){}M=void 0}M=D(M)?null:M;ia(M,P)&&(M=P);P=M}function l(){if(G!==n.url()||E!==M)G=n.url(),E=M,r(X,function(a){a(n.url(),M)})}function k(a){try{return decodeURIComponent(a)}catch(b){return a}}
var n=this,p=a[0],q=b.location,t=b.history,s=b.setTimeout,F=b.clearTimeout,v={};n.isMock=!1;var m=0,C=[];n.$$completeOutstandingRequest=e;n.$$incOutstandingRequestCount=function(){m++};n.notifyWhenNoOutstandingRequests=function(a){r($,function(a){a()});0===m?a():C.push(a)};var $=[],I;n.addPollFn=function(a){D(I)&&f(100,s);$.push(a);return a};var M,E,G=q.href,O=a.find("base"),Q=null;h();E=M;n.url=function(a,c,e){D(e)&&(e=null);q!==b.location&&(q=b.location);t!==b.history&&(t=b.history);if(a){var f=
E===e;if(G===a&&(!d.history||f))return n;var g=G&&Ga(G)===Ga(a);G=a;E=e;if(!d.history||g&&f){if(!g||Q)Q=a;c?q.replace(a):g?(c=q,e=a.indexOf("#"),a=-1===e?"":a.substr(e),c.hash=a):q.href=a}else t[c?"replaceState":"pushState"](e,"",a),h(),E=M;return n}return Q||q.href.replace(/%27/g,"'")};n.state=function(){return M};var X=[],ba=!1,P=null;n.onUrlChange=function(a){if(!ba){if(d.history)B(b).on("popstate",g);B(b).on("hashchange",g);ba=!0}X.push(a);return a};n.$$checkUrlChange=l;n.baseHref=function(){var a=
O.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var fa={},y="",la=n.baseHref();n.cookies=function(a,b){var d,e,f,g;if(a)b===u?p.cookie=encodeURIComponent(a)+"=;path="+la+";expires=Thu, 01 Jan 1970 00:00:00 GMT":x(b)&&(d=(p.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+";path="+la).length+1,4096<d&&c.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+d+" > 4096 bytes)!"));else{if(p.cookie!==y)for(y=p.cookie,d=y.split("; "),fa={},f=0;f<d.length;f++)e=
d[f],g=e.indexOf("="),0<g&&(a=k(e.substring(0,g)),fa[a]===u&&(fa[a]=k(e.substring(g+1))));return fa}};n.defer=function(a,b){var c;m++;c=s(function(){delete v[c];e(a)},b||0);v[c]=!0;return c};n.defer.cancel=function(a){return v[a]?(delete v[a],F(a),e(A),!0):!1}}function De(){this.$get=["$window","$log","$sniffer","$document",function(b,a,c,d){return new nf(b,d,a,c)}]}function Ee(){this.$get=function(){function b(b,d){function e(a){a!=p&&(q?q==a&&(q=a.n):q=a,f(a.n,a.p),f(a,p),p=a,p.n=null)}function f(a,
b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(b in a)throw S("$cacheFactory")("iid",b);var g=0,h=w({},d,{id:b}),l={},k=d&&d.capacity||Number.MAX_VALUE,n={},p=null,q=null;return a[b]={put:function(a,b){if(k<Number.MAX_VALUE){var c=n[a]||(n[a]={key:a});e(c)}if(!D(b))return a in l||g++,l[a]=b,g>k&&this.remove(q.key),b},get:function(a){if(k<Number.MAX_VALUE){var b=n[a];if(!b)return;e(b)}return l[a]},remove:function(a){if(k<Number.MAX_VALUE){var b=n[a];if(!b)return;b==p&&(p=b.p);b==q&&(q=b.n);f(b.n,b.p);delete n[a]}delete l[a];
g--},removeAll:function(){l={};g=0;n={};p=q=null},destroy:function(){n=h=l=null;delete a[b]},info:function(){return w({},h,{size:g})}}}var a={};b.info=function(){var b={};r(a,function(a,e){b[e]=a.info()});return b};b.get=function(b){return a[b]};return b}}function Ve(){this.$get=["$cacheFactory",function(b){return b("templates")}]}function xc(b,a){function c(a,b){var c=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,d={};r(a,function(a,e){var f=a.match(c);if(!f)throw ma("iscp",b,e,a);d[e]={mode:f[1][0],collection:"*"===
f[2],optional:"?"===f[3],attrName:f[4]||e}});return d}var d={},e=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,f=/(([\w\-]+)(?:\:([^;]+))?;?)/,g=Gd("ngSrc,ngSrcset,src,srcset"),h=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,l=/^(on[a-z]+|formaction)$/;this.directive=function p(a,e){Ma(a,"directive");x(a)?(Rb(e,"directiveFactory"),d.hasOwnProperty(a)||(d[a]=[],b.factory(a+"Directive",["$injector","$exceptionHandler",function(b,e){var f=[];r(d[a],function(d,g){try{var h=b.invoke(d);z(h)?h={compile:ea(h)}:!h.compile&&h.link&&
(h.compile=ea(h.link));h.priority=h.priority||0;h.index=g;h.name=h.name||a;h.require=h.require||h.controller&&h.name;h.restrict=h.restrict||"EA";L(h.scope)&&(h.$$isolateBindings=c(h.scope,h.name));f.push(h)}catch(l){e(l)}});return f}])),d[a].push(e)):r(a,lc(p));return this};this.aHrefSanitizationWhitelist=function(b){return y(b)?(a.aHrefSanitizationWhitelist(b),this):a.aHrefSanitizationWhitelist()};this.imgSrcSanitizationWhitelist=function(b){return y(b)?(a.imgSrcSanitizationWhitelist(b),this):a.imgSrcSanitizationWhitelist()};
var k=!0;this.debugInfoEnabled=function(a){return y(a)?(k=a,this):k};this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(a,b,c,s,F,v,m,C,$,I,M){function E(a,b){try{a.addClass(b)}catch(c){}}function G(a,b,c,d,e){a instanceof B||(a=B(a));r(a,function(b,c){b.nodeType==bb&&b.nodeValue.match(/\S+/)&&(a[c]=B(b).wrap("<span></span>").parent()[0])});var f=O(a,b,a,c,d,e);G.$$addScopeClass(a);
var g=null;return function(b,c,d){Rb(b,"scope");d=d||{};var e=d.parentBoundTranscludeFn,h=d.transcludeControllers;d=d.futureParentElement;e&&e.$$boundTransclude&&(e=e.$$boundTransclude);g||(g=(d=d&&d[0])?"foreignobject"!==wa(d)&&d.toString().match(/SVG/)?"svg":"html":"html");d="html"!==g?B(Xb(g,B("<div>").append(a).html())):c?Ka.clone.call(a):a;if(h)for(var l in h)d.data("$"+l+"Controller",h[l].instance);G.$$addScopeInfo(d,b);c&&c(d,b);f&&f(b,d,d,e);return d}}function O(a,b,c,d,e,f){function g(a,
c,d,e){var f,l,k,q,p,s,t;if(m)for(t=Array(c.length),q=0;q<h.length;q+=3)f=h[q],t[f]=c[f];else t=c;q=0;for(p=h.length;q<p;)l=t[h[q++]],c=h[q++],f=h[q++],c?(c.scope?(k=a.$new(),G.$$addScopeInfo(B(l),k)):k=a,s=c.transcludeOnThisElement?Q(a,c.transclude,e,c.elementTranscludeOnThisElement):!c.templateOnThisElement&&e?e:!e&&b?Q(a,b):null,c(f,k,l,d,s)):f&&f(a,l.childNodes,u,e)}for(var h=[],l,k,q,p,m,s=0;s<a.length;s++){l=new Yb;k=X(a[s],[],l,0===s?d:u,e);(f=k.length?fa(k,a[s],l,b,c,null,[],[],f):null)&&
f.scope&&G.$$addScopeClass(l.$$element);l=f&&f.terminal||!(q=a[s].childNodes)||!q.length?null:O(q,f?(f.transcludeOnThisElement||!f.templateOnThisElement)&&f.transclude:b);if(f||l)h.push(s,f,l),p=!0,m=m||f;f=null}return p?g:null}function Q(a,b,c,d){return function(d,e,f,g,h){d||(d=a.$new(!1,h),d.$$transcluded=!0);return b(d,e,{parentBoundTranscludeFn:c,transcludeControllers:f,futureParentElement:g})}}function X(a,b,c,d,g){var h=c.$attr,l;switch(a.nodeType){case qa:la(b,ya(wa(a)),"E",d,g);for(var k,
q,p,m=a.attributes,s=0,t=m&&m.length;s<t;s++){var M=!1,I=!1;k=m[s];l=k.name;q=N(k.value);k=ya(l);if(p=U.test(k))l=l.replace(Rc,"").substr(8).replace(/_(.)/g,function(a,b){return b.toUpperCase()});var F=k.replace(/(Start|End)$/,"");D(F)&&k===F+"Start"&&(M=l,I=l.substr(0,l.length-5)+"end",l=l.substr(0,l.length-6));k=ya(l.toLowerCase());h[k]=l;if(p||!c.hasOwnProperty(k))c[k]=q,Mc(a,k)&&(c[k]=!0);Pa(a,b,q,k,p);la(b,k,"A",d,g,M,I)}a=a.className;L(a)&&(a=a.animVal);if(x(a)&&""!==a)for(;l=f.exec(a);)k=ya(l[2]),
la(b,k,"C",d,g)&&(c[k]=N(l[3])),a=a.substr(l.index+l[0].length);break;case bb:za(b,a.nodeValue);break;case 8:try{if(l=e.exec(a.nodeValue))k=ya(l[1]),la(b,k,"M",d,g)&&(c[k]=N(l[2]))}catch(v){}}b.sort(da);return b}function ba(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw ma("uterdir",b,c);a.nodeType==qa&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--);d.push(a);a=a.nextSibling}while(0<e)}else d.push(a);return B(d)}function P(a,b,c){return function(d,e,f,g,h){e=ba(e[0],
b,c);return a(d,e,f,g,h)}}function fa(a,d,e,f,g,l,k,p,m){function s(a,b,c,d){if(a){c&&(a=P(a,c,d));a.require=J.require;a.directiveName=da;if(Q===J||J.$$isolateScope)a=Y(a,{isolateScope:!0});k.push(a)}if(b){c&&(b=P(b,c,d));b.require=J.require;b.directiveName=da;if(Q===J||J.$$isolateScope)b=Y(b,{isolateScope:!0});p.push(b)}}function M(a,b,c,d){var e,f="data",g=!1,l=c,k;if(x(b)){k=b.match(h);b=b.substring(k[0].length);k[3]&&(k[1]?k[3]=null:k[1]=k[3]);"^"===k[1]?f="inheritedData":"^^"===k[1]&&(f="inheritedData",
l=c.parent());"?"===k[2]&&(g=!0);e=null;d&&"data"===f&&(e=d[b])&&(e=e.instance);e=e||l[f]("$"+b+"Controller");if(!e&&!g)throw ma("ctreq",b,a);return e||null}H(b)&&(e=[],r(b,function(b){e.push(M(a,b,c,d))}));return e}function I(a,c,f,g,l){function h(a,b,c){var d;Wa(a)||(c=b,b=a,a=u);A&&(d=C);c||(c=A?X.parent():X);return l(a,b,d,c,Wb)}var m,s,t,E,C,ib,X,P;d===f?(P=e,X=e.$$element):(X=B(f),P=new Yb(X,e));Q&&(E=c.$new(!0));l&&(ib=h,ib.$$boundTransclude=l);O&&($={},C={},r(O,function(a){var b={$scope:a===
Q||a.$$isolateScope?E:c,$element:X,$attrs:P,$transclude:ib};t=a.controller;"@"==t&&(t=P[a.name]);b=v(t,b,!0,a.controllerAs);C[a.name]=b;A||X.data("$"+a.name+"Controller",b.instance);$[a.name]=b}));if(Q){G.$$addScopeInfo(X,E,!0,!(na&&(na===Q||na===Q.$$originalDirective)));G.$$addScopeClass(X,!0);g=$&&$[Q.name];var ba=E;g&&g.identifier&&!0===Q.bindToController&&(ba=g.instance);r(E.$$isolateBindings=Q.$$isolateBindings,function(a,d){var e=a.attrName,f=a.optional,g,l,h,k;switch(a.mode){case "@":P.$observe(e,
function(a){ba[d]=a});P.$$observers[e].$$scope=c;P[e]&&(ba[d]=b(P[e])(c));break;case "=":if(f&&!P[e])break;l=F(P[e]);k=l.literal?ia:function(a,b){return a===b||a!==a&&b!==b};h=l.assign||function(){g=ba[d]=l(c);throw ma("nonassign",P[e],Q.name);};g=ba[d]=l(c);f=function(a){k(a,ba[d])||(k(a,g)?h(c,a=ba[d]):ba[d]=a);return g=a};f.$stateful=!0;f=a.collection?c.$watchCollection(P[e],f):c.$watch(F(P[e],f),null,l.literal);E.$on("$destroy",f);break;case "&":l=F(P[e]),ba[d]=function(a){return l(c,a)}}})}$&&
(r($,function(a){a()}),$=null);g=0;for(m=k.length;g<m;g++)s=k[g],Z(s,s.isolateScope?E:c,X,P,s.require&&M(s.directiveName,s.require,X,C),ib);var Wb=c;Q&&(Q.template||null===Q.templateUrl)&&(Wb=E);a&&a(Wb,f.childNodes,u,l);for(g=p.length-1;0<=g;g--)s=p[g],Z(s,s.isolateScope?E:c,X,P,s.require&&M(s.directiveName,s.require,X,C),ib)}m=m||{};for(var E=-Number.MAX_VALUE,C,O=m.controllerDirectives,$,Q=m.newIsolateScopeDirective,na=m.templateDirective,fa=m.nonTlbTranscludeDirective,la=!1,D=!1,A=m.hasElementTranscludeDirective,
w=e.$$element=B(d),J,da,V,hb=f,za,K=0,R=a.length;K<R;K++){J=a[K];var Pa=J.$$start,U=J.$$end;Pa&&(w=ba(d,Pa,U));V=u;if(E>J.priority)break;if(V=J.scope)J.templateUrl||(L(V)?(Oa("new/isolated scope",Q||C,J,w),Q=J):Oa("new/isolated scope",Q,J,w)),C=C||J;da=J.name;!J.templateUrl&&J.controller&&(V=J.controller,O=O||{},Oa("'"+da+"' controller",O[da],J,w),O[da]=J);if(V=J.transclude)la=!0,J.$$tlb||(Oa("transclusion",fa,J,w),fa=J),"element"==V?(A=!0,E=J.priority,V=w,w=e.$$element=B(W.createComment(" "+da+": "+
e[da]+" ")),d=w[0],T(g,$a.call(V,0),d),hb=G(V,f,E,l&&l.name,{nonTlbTranscludeDirective:fa})):(V=B(Ub(d)).contents(),w.empty(),hb=G(V,f));if(J.template)if(D=!0,Oa("template",na,J,w),na=J,V=z(J.template)?J.template(w,e):J.template,V=Sc(V),J.replace){l=J;V=Sb.test(V)?Tc(Xb(J.templateNamespace,N(V))):[];d=V[0];if(1!=V.length||d.nodeType!==qa)throw ma("tplrt",da,"");T(g,w,d);R={$attr:{}};V=X(d,[],R);var aa=a.splice(K+1,a.length-(K+1));Q&&y(V);a=a.concat(V).concat(aa);S(e,R);R=a.length}else w.html(V);if(J.templateUrl)D=
!0,Oa("template",na,J,w),na=J,J.replace&&(l=J),I=of(a.splice(K,a.length-K),w,e,g,la&&hb,k,p,{controllerDirectives:O,newIsolateScopeDirective:Q,templateDirective:na,nonTlbTranscludeDirective:fa}),R=a.length;else if(J.compile)try{za=J.compile(w,e,hb),z(za)?s(null,za,Pa,U):za&&s(za.pre,za.post,Pa,U)}catch(pf){c(pf,xa(w))}J.terminal&&(I.terminal=!0,E=Math.max(E,J.priority))}I.scope=C&&!0===C.scope;I.transcludeOnThisElement=la;I.elementTranscludeOnThisElement=A;I.templateOnThisElement=D;I.transclude=hb;
m.hasElementTranscludeDirective=A;return I}function y(a){for(var b=0,c=a.length;b<c;b++)a[b]=Ob(a[b],{$$isolateScope:!0})}function la(b,e,f,g,l,h,k){if(e===l)return null;l=null;if(d.hasOwnProperty(e)){var q;e=a.get(e+"Directive");for(var m=0,s=e.length;m<s;m++)try{q=e[m],(g===u||g>q.priority)&&-1!=q.restrict.indexOf(f)&&(h&&(q=Ob(q,{$$start:h,$$end:k})),b.push(q),l=q)}catch(I){c(I)}}return l}function D(b){if(d.hasOwnProperty(b))for(var c=a.get(b+"Directive"),e=0,f=c.length;e<f;e++)if(b=c[e],b.multiElement)return!0;
return!1}function S(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;r(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))});r(b,function(b,f){"class"==f?(E(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==f?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function of(a,b,c,d,e,f,g,l){var h=[],k,q,p=b[0],m=a.shift(),t=Ob(m,{templateUrl:null,transclude:null,
replace:null,$$originalDirective:m}),I=z(m.templateUrl)?m.templateUrl(b,c):m.templateUrl,M=m.templateNamespace;b.empty();s(I).then(function(s){var F,v;s=Sc(s);if(m.replace){s=Sb.test(s)?Tc(Xb(M,N(s))):[];F=s[0];if(1!=s.length||F.nodeType!==qa)throw ma("tplrt",m.name,I);s={$attr:{}};T(d,b,F);var C=X(F,[],s);L(m.scope)&&y(C);a=C.concat(a);S(c,s)}else F=p,b.html(s);a.unshift(t);k=fa(a,F,c,e,b,m,f,g,l);r(d,function(a,c){a==F&&(d[c]=b[0])});for(q=O(b[0].childNodes,e);h.length;){s=h.shift();v=h.shift();
var G=h.shift(),P=h.shift(),C=b[0];if(!s.$$destroyed){if(v!==p){var $=v.className;l.hasElementTranscludeDirective&&m.replace||(C=Ub(F));T(G,B(v),C);E(B(C),$)}v=k.transcludeOnThisElement?Q(s,k.transclude,P):P;k(q,s,C,d,v)}}h=null});return function(a,b,c,d,e){a=e;b.$$destroyed||(h?h.push(b,c,d,a):(k.transcludeOnThisElement&&(a=Q(b,k.transclude,e)),k(q,b,c,d,a)))}}function da(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function Oa(a,b,c,d){if(b)throw ma("multidir",
b.name,c.name,a,xa(d));}function za(a,c){var d=b(c,!0);d&&a.push({priority:0,compile:function(a){a=a.parent();var b=!!a.length;b&&G.$$addBindingClass(a);return function(a,c){var e=c.parent();b||G.$$addBindingClass(e);G.$$addBindingInfo(e,d.expressions);a.$watch(d,function(a){c[0].nodeValue=a})}}})}function Xb(a,b){a=K(a||"html");switch(a){case "svg":case "math":var c=W.createElement("div");c.innerHTML="<"+a+">"+b+"</"+a+">";return c.childNodes[0].childNodes;default:return b}}function R(a,b){if("srcdoc"==
b)return $.HTML;var c=wa(a);if("xlinkHref"==b||"form"==c&&"action"==b||"img"!=c&&("src"==b||"ngSrc"==b))return $.RESOURCE_URL}function Pa(a,c,d,e,f){var h=R(a,e);f=g[e]||f;var k=b(d,!0,h,f);if(k){if("multiple"===e&&"select"===wa(a))throw ma("selmulti",xa(a));c.push({priority:100,compile:function(){return{pre:function(a,c,g){c=g.$$observers||(g.$$observers={});if(l.test(e))throw ma("nodomevents");var p=g[e];p!==d&&(k=p&&b(p,!0,h,f),d=p);k&&(g[e]=k(a),(c[e]||(c[e]=[])).$$inter=!0,(g.$$observers&&g.$$observers[e].$$scope||
a).$watch(k,function(a,b){"class"===e&&a!=b?g.$updateClass(a,b):g.$set(e,a)}))}}}})}}function T(a,b,c){var d=b[0],e=b.length,f=d.parentNode,g,l;if(a)for(g=0,l=a.length;g<l;g++)if(a[g]==d){a[g++]=c;l=g+e-1;for(var h=a.length;g<h;g++,l++)l<h?a[g]=a[l]:delete a[g];a.length-=e-1;a.context===d&&(a.context=c);break}f&&f.replaceChild(c,d);a=W.createDocumentFragment();a.appendChild(d);B(c).data(B(d).data());ta?(Qb=!0,ta.cleanData([d])):delete B.cache[d[B.expando]];d=1;for(e=b.length;d<e;d++)f=b[d],B(f).remove(),
a.appendChild(f),delete b[d];b[0]=c;b.length=1}function Y(a,b){return w(function(){return a.apply(null,arguments)},a,b)}function Z(a,b,d,e,f,g){try{a(b,d,e,f,g)}catch(l){c(l,xa(d))}}var Yb=function(a,b){if(b){var c=Object.keys(b),d,e,f;d=0;for(e=c.length;d<e;d++)f=c[d],this[f]=b[f]}else this.$attr={};this.$$element=a};Yb.prototype={$normalize:ya,$addClass:function(a){a&&0<a.length&&I.addClass(this.$$element,a)},$removeClass:function(a){a&&0<a.length&&I.removeClass(this.$$element,a)},$updateClass:function(a,
b){var c=Uc(a,b);c&&c.length&&I.addClass(this.$$element,c);(c=Uc(b,a))&&c.length&&I.removeClass(this.$$element,c)},$set:function(a,b,d,e){var f=this.$$element[0],g=Mc(f,a),l=kf(f,a),f=a;g?(this.$$element.prop(a,b),e=g):l&&(this[l]=b,f=l);this[a]=b;e?this.$attr[a]=e:(e=this.$attr[a])||(this.$attr[a]=e=uc(a,"-"));g=wa(this.$$element);if("a"===g&&"href"===a||"img"===g&&"src"===a)this[a]=b=M(b,"src"===a);else if("img"===g&&"srcset"===a){for(var g="",l=N(b),h=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,h=/\s/.test(l)?
h:/(,)/,l=l.split(h),h=Math.floor(l.length/2),k=0;k<h;k++)var q=2*k,g=g+M(N(l[q]),!0),g=g+(" "+N(l[q+1]));l=N(l[2*k]).split(/\s/);g+=M(N(l[0]),!0);2===l.length&&(g+=" "+N(l[1]));this[a]=b=g}!1!==d&&(null===b||b===u?this.$$element.removeAttr(e):this.$$element.attr(e,b));(a=this.$$observers)&&r(a[f],function(a){try{a(b)}catch(d){c(d)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=ja()),e=d[a]||(d[a]=[]);e.push(b);m.$evalAsync(function(){!e.$$inter&&c.hasOwnProperty(a)&&b(c[a])});
return function(){Ya(e,b)}}};var V=b.startSymbol(),na=b.endSymbol(),Sc="{{"==V||"}}"==na?ra:function(a){return a.replace(/\{\{/g,V).replace(/}}/g,na)},U=/^ngAttr[A-Z]/;G.$$addBindingInfo=k?function(a,b){var c=a.data("$binding")||[];H(b)?c=c.concat(b):c.push(b);a.data("$binding",c)}:A;G.$$addBindingClass=k?function(a){E(a,"ng-binding")}:A;G.$$addScopeInfo=k?function(a,b,c,d){a.data(c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope",b)}:A;G.$$addScopeClass=k?function(a,b){E(a,b?"ng-isolate-scope":
"ng-scope")}:A;return G}]}function ya(b){return fb(b.replace(Rc,""))}function Uc(b,a){var c="",d=b.split(/\s+/),e=a.split(/\s+/),f=0;a:for(;f<d.length;f++){for(var g=d[f],h=0;h<e.length;h++)if(g==e[h])continue a;c+=(0<c.length?" ":"")+g}return c}function Tc(b){b=B(b);var a=b.length;if(1>=a)return b;for(;a--;)8===b[a].nodeType&&qf.call(b,a,1);return b}function Fe(){var b={},a=!1,c=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(a,c){Ma(a,"controller");L(a)?w(b,a):b[a]=c};this.allowGlobals=function(){a=
!0};this.$get=["$injector","$window",function(d,e){function f(a,b,c,d){if(!a||!L(a.$scope))throw S("$controller")("noscp",d,b);a.$scope[b]=c}return function(g,h,l,k){var n,p,q;l=!0===l;k&&x(k)&&(q=k);if(x(g)){k=g.match(c);if(!k)throw rf("ctrlfmt",g);p=k[1];q=q||k[3];g=b.hasOwnProperty(p)?b[p]:wc(h.$scope,p,!0)||(a?wc(e,p,!0):u);La(g,p,!0)}if(l)return l=(H(g)?g[g.length-1]:g).prototype,n=Object.create(l||null),q&&f(h,q,n,p||g.name),w(function(){d.invoke(g,n,h,p);return n},{instance:n,identifier:q});
n=d.instantiate(g,h,p);q&&f(h,q,n,p||g.name);return n}}]}function Ge(){this.$get=["$window",function(b){return B(b.document)}]}function He(){this.$get=["$log",function(b){return function(a,c){b.error.apply(b,arguments)}}]}function Zb(b,a){if(x(b)){var c=b.replace(sf,"").trim();if(c){var d=a("Content-Type");(d=d&&0===d.indexOf(Vc))||(d=(d=c.match(tf))&&uf[d[0]].test(c));d&&(b=pc(c))}}return b}function Wc(b){var a=ja(),c,d,e;if(!b)return a;r(b.split("\n"),function(b){e=b.indexOf(":");c=K(N(b.substr(0,
e)));d=N(b.substr(e+1));c&&(a[c]=a[c]?a[c]+", "+d:d)});return a}function Xc(b){var a=L(b)?b:u;return function(c){a||(a=Wc(b));return c?(c=a[K(c)],void 0===c&&(c=null),c):a}}function Yc(b,a,c,d){if(z(d))return d(b,a,c);r(d,function(d){b=d(b,a,c)});return b}function Ke(){var b=this.defaults={transformResponse:[Zb],transformRequest:[function(a){return L(a)&&"[object File]"!==Ca.call(a)&&"[object Blob]"!==Ca.call(a)&&"[object FormData]"!==Ca.call(a)?ab(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},
post:sa($b),put:sa($b),patch:sa($b)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},a=!1;this.useApplyAsync=function(b){return y(b)?(a=!!b,this):a};var c=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(d,e,f,g,h,l){function k(a){function c(a){var b=w({},a);b.data=a.data?Yc(a.data,a.headers,a.status,e.transformResponse):a.data;a=a.status;return 200<=a&&300>a?b:h.reject(b)}function d(a){var b,c={};r(a,function(a,d){z(a)?(b=
a(),null!=b&&(c[d]=b)):c[d]=a});return c}if(!ca.isObject(a))throw S("$http")("badreq",a);var e=w({method:"get",transformRequest:b.transformRequest,transformResponse:b.transformResponse},a);e.headers=function(a){var c=b.headers,e=w({},a.headers),f,g,c=w({},c.common,c[K(a.method)]);a:for(f in c){a=K(f);for(g in e)if(K(g)===a)continue a;e[f]=c[f]}return d(e)}(a);e.method=vb(e.method);var f=[function(a){var d=a.headers,e=Yc(a.data,Xc(d),u,a.transformRequest);D(e)&&r(d,function(a,b){"content-type"===K(b)&&
delete d[b]});D(a.withCredentials)&&!D(b.withCredentials)&&(a.withCredentials=b.withCredentials);return n(a,e).then(c,c)},u],g=h.when(e);for(r(t,function(a){(a.request||a.requestError)&&f.unshift(a.request,a.requestError);(a.response||a.responseError)&&f.push(a.response,a.responseError)});f.length;){a=f.shift();var l=f.shift(),g=g.then(a,l)}g.success=function(a){La(a,"fn");g.then(function(b){a(b.data,b.status,b.headers,e)});return g};g.error=function(a){La(a,"fn");g.then(null,function(b){a(b.data,
b.status,b.headers,e)});return g};return g}function n(c,f){function l(b,c,d,e){function f(){m(c,b,d,e)}E&&(200<=b&&300>b?E.put(Q,[b,c,Wc(d),e]):E.remove(Q));a?g.$applyAsync(f):(f(),g.$$phase||g.$apply())}function m(a,b,d,e){b=-1<=b?b:0;(200<=b&&300>b?I.resolve:I.reject)({data:a,status:b,headers:Xc(d),config:c,statusText:e})}function n(a){m(a.data,a.status,sa(a.headers()),a.statusText)}function t(){var a=k.pendingRequests.indexOf(c);-1!==a&&k.pendingRequests.splice(a,1)}var I=h.defer(),M=I.promise,
E,G,O=c.headers,Q=p(c.url,c.params);k.pendingRequests.push(c);M.then(t,t);!c.cache&&!b.cache||!1===c.cache||"GET"!==c.method&&"JSONP"!==c.method||(E=L(c.cache)?c.cache:L(b.cache)?b.cache:q);E&&(G=E.get(Q),y(G)?G&&z(G.then)?G.then(n,n):H(G)?m(G[1],G[0],sa(G[2]),G[3]):m(G,200,{},"OK"):E.put(Q,M));D(G)&&((G=Zc(c.url)?e.cookies()[c.xsrfCookieName||b.xsrfCookieName]:u)&&(O[c.xsrfHeaderName||b.xsrfHeaderName]=G),d(c.method,Q,f,l,O,c.timeout,c.withCredentials,c.responseType));return M}function p(a,b){if(!b)return a;
var c=[];Ed(b,function(a,b){null===a||D(a)||(H(a)||(a=[a]),r(a,function(a){L(a)&&(a=ha(a)?a.toISOString():ab(a));c.push(Ea(b)+"="+Ea(a))}))});0<c.length&&(a+=(-1==a.indexOf("?")?"?":"&")+c.join("&"));return a}var q=f("$http"),t=[];r(c,function(a){t.unshift(x(a)?l.get(a):l.invoke(a))});k.pendingRequests=[];(function(a){r(arguments,function(a){k[a]=function(b,c){return k(w(c||{},{method:a,url:b}))}})})("get","delete","head","jsonp");(function(a){r(arguments,function(a){k[a]=function(b,c,d){return k(w(d||
{},{method:a,url:b,data:c}))}})})("post","put","patch");k.defaults=b;return k}]}function vf(){return new R.XMLHttpRequest}function Le(){this.$get=["$browser","$window","$document",function(b,a,c){return wf(b,vf,b.defer,a.angular.callbacks,c[0])}]}function wf(b,a,c,d,e){function f(a,b,c){var f=e.createElement("script"),n=null;f.type="text/javascript";f.src=a;f.async=!0;n=function(a){f.removeEventListener("load",n,!1);f.removeEventListener("error",n,!1);e.body.removeChild(f);f=null;var g=-1,t="unknown";
a&&("load"!==a.type||d[b].called||(a={type:"error"}),t=a.type,g="error"===a.type?404:200);c&&c(g,t)};f.addEventListener("load",n,!1);f.addEventListener("error",n,!1);e.body.appendChild(f);return n}return function(e,h,l,k,n,p,q,t){function s(){m&&m();C&&C.abort()}function F(a,d,e,f,g){I!==u&&c.cancel(I);m=C=null;a(d,e,f,g);b.$$completeOutstandingRequest(A)}b.$$incOutstandingRequestCount();h=h||b.url();if("jsonp"==K(e)){var v="_"+(d.counter++).toString(36);d[v]=function(a){d[v].data=a;d[v].called=!0};
var m=f(h.replace("JSON_CALLBACK","angular.callbacks."+v),v,function(a,b){F(k,a,d[v].data,"",b);d[v]=A})}else{var C=a();C.open(e,h,!0);r(n,function(a,b){y(a)&&C.setRequestHeader(b,a)});C.onload=function(){var a=C.statusText||"",b="response"in C?C.response:C.responseText,c=1223===C.status?204:C.status;0===c&&(c=b?200:"file"==Aa(h).protocol?404:0);F(k,c,b,C.getAllResponseHeaders(),a)};e=function(){F(k,-1,null,null,"")};C.onerror=e;C.onabort=e;q&&(C.withCredentials=!0);if(t)try{C.responseType=t}catch($){if("json"!==
t)throw $;}C.send(l||null)}if(0<p)var I=c(s,p);else p&&z(p.then)&&p.then(s)}}function Ie(){var b="{{",a="}}";this.startSymbol=function(a){return a?(b=a,this):b};this.endSymbol=function(b){return b?(a=b,this):a};this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(a){return"\\\\\\"+a}function g(f,g,t,s){function F(c){return c.replace(k,b).replace(n,a)}function v(a){try{var b=a;a=t?e.getTrusted(t,b):e.valueOf(b);var c;if(s&&!y(a))c=a;else if(null==a)c="";else{switch(typeof a){case "string":break;
case "number":a=""+a;break;default:a=ab(a)}c=a}return c}catch(g){c=ac("interr",f,g.toString()),d(c)}}s=!!s;for(var m,C,r=0,I=[],M=[],E=f.length,G=[],O=[];r<E;)if(-1!=(m=f.indexOf(b,r))&&-1!=(C=f.indexOf(a,m+h)))r!==m&&G.push(F(f.substring(r,m))),r=f.substring(m+h,C),I.push(r),M.push(c(r,v)),r=C+l,O.push(G.length),G.push("");else{r!==E&&G.push(F(f.substring(r)));break}if(t&&1<G.length)throw ac("noconcat",f);if(!g||I.length){var Q=function(a){for(var b=0,c=I.length;b<c;b++){if(s&&D(a[b]))return;G[O[b]]=
a[b]}return G.join("")};return w(function(a){var b=0,c=I.length,e=Array(c);try{for(;b<c;b++)e[b]=M[b](a);return Q(e)}catch(g){a=ac("interr",f,g.toString()),d(a)}},{exp:f,expressions:I,$$watchDelegate:function(a,b,c){var d;return a.$watchGroup(M,function(c,e){var f=Q(c);z(b)&&b.call(this,f,c!==e?d:f,a);d=f},c)}})}}var h=b.length,l=a.length,k=new RegExp(b.replace(/./g,f),"g"),n=new RegExp(a.replace(/./g,f),"g");g.startSymbol=function(){return b};g.endSymbol=function(){return a};return g}]}function Je(){this.$get=
["$rootScope","$window","$q","$$q",function(b,a,c,d){function e(e,h,l,k){var n=a.setInterval,p=a.clearInterval,q=0,t=y(k)&&!k,s=(t?d:c).defer(),F=s.promise;l=y(l)?l:0;F.then(null,null,e);F.$$intervalId=n(function(){s.notify(q++);0<l&&q>=l&&(s.resolve(q),p(F.$$intervalId),delete f[F.$$intervalId]);t||b.$apply()},h);f[F.$$intervalId]=s;return F}var f={};e.cancel=function(b){return b&&b.$$intervalId in f?(f[b.$$intervalId].reject("canceled"),a.clearInterval(b.$$intervalId),delete f[b.$$intervalId],!0):
!1};return e}]}function Rd(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"\u00a4",posSuf:"",negPre:"(\u00a4",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January February March April May June July August September October November December".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a",ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"]},pluralCat:function(b){return 1===b?"one":"other"}}}}function bc(b){b=b.split("/");for(var a=b.length;a--;)b[a]=sb(b[a]);
return b.join("/")}function $c(b,a){var c=Aa(b);a.$$protocol=c.protocol;a.$$host=c.hostname;a.$$port=aa(c.port)||xf[c.protocol]||null}function ad(b,a){var c="/"!==b.charAt(0);c&&(b="/"+b);var d=Aa(b);a.$$path=decodeURIComponent(c&&"/"===d.pathname.charAt(0)?d.pathname.substring(1):d.pathname);a.$$search=rc(d.search);a.$$hash=decodeURIComponent(d.hash);a.$$path&&"/"!=a.$$path.charAt(0)&&(a.$$path="/"+a.$$path)}function ua(b,a){if(0===a.indexOf(b))return a.substr(b.length)}function Ga(b){var a=b.indexOf("#");
return-1==a?b:b.substr(0,a)}function Gb(b){return b.replace(/(#.+)|#$/,"$1")}function cc(b,a,c){this.$$html5=!0;c=c||"";$c(b,this);this.$$parse=function(b){var c=ua(a,b);if(!x(c))throw Hb("ipthprfx",b,a);ad(c,this);this.$$path||(this.$$path="/");this.$$compose()};this.$$compose=function(){var b=Pb(this.$$search),c=this.$$hash?"#"+sb(this.$$hash):"";this.$$url=bc(this.$$path)+(b?"?"+b:"")+c;this.$$absUrl=a+this.$$url.substr(1)};this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),
!0;var f,g;(f=ua(b,d))!==u?(g=f,g=(f=ua(c,f))!==u?a+(ua("/",f)||f):b+g):(f=ua(a,d))!==u?g=a+f:a==d+"/"&&(g=a);g&&this.$$parse(g);return!!g}}function dc(b,a,c){$c(b,this);this.$$parse=function(d){var e=ua(b,d)||ua(a,d),f;D(e)||"#"!==e.charAt(0)?this.$$html5?f=e:(f="",D(e)&&(b=d,this.replace())):(f=ua(c,e),D(f)&&(f=e));ad(f,this);d=this.$$path;var e=b,g=/^\/[A-Z]:(\/.*)/;0===f.indexOf(e)&&(f=f.replace(e,""));g.exec(f)||(d=(f=g.exec(d))?f[1]:d);this.$$path=d;this.$$compose()};this.$$compose=function(){var a=
Pb(this.$$search),e=this.$$hash?"#"+sb(this.$$hash):"";this.$$url=bc(this.$$path)+(a?"?"+a:"")+e;this.$$absUrl=b+(this.$$url?c+this.$$url:"")};this.$$parseLinkUrl=function(a,c){return Ga(b)==Ga(a)?(this.$$parse(a),!0):!1}}function bd(b,a,c){this.$$html5=!0;dc.apply(this,arguments);this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;b==Ga(d)?f=d:(g=ua(a,d))?f=b+c+g:a===d+"/"&&(f=a);f&&this.$$parse(f);return!!f};this.$$compose=function(){var a=Pb(this.$$search),
e=this.$$hash?"#"+sb(this.$$hash):"";this.$$url=bc(this.$$path)+(a?"?"+a:"")+e;this.$$absUrl=b+c+this.$$url}}function Ib(b){return function(){return this[b]}}function cd(b,a){return function(c){if(D(c))return this[b];this[b]=a(c);this.$$compose();return this}}function Me(){var b="",a={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(a){return y(a)?(b=a,this):b};this.html5Mode=function(b){return Xa(b)?(a.enabled=b,this):L(b)?(Xa(b.enabled)&&(a.enabled=b.enabled),Xa(b.requireBase)&&
(a.requireBase=b.requireBase),Xa(b.rewriteLinks)&&(a.rewriteLinks=b.rewriteLinks),this):a};this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(c,d,e,f,g){function h(a,b,c){var e=k.url(),f=k.$$state;try{d.url(a,b,c),k.$$state=d.state()}catch(g){throw k.url(e),k.$$state=f,g;}}function l(a,b){c.$broadcast("$locationChangeSuccess",k.absUrl(),a,k.$$state,b)}var k,n;n=d.baseHref();var p=d.url(),q;if(a.enabled){if(!n&&a.requireBase)throw Hb("nobase");q=p.substring(0,p.indexOf("/",
p.indexOf("//")+2))+(n||"/");n=e.history?cc:bd}else q=Ga(p),n=dc;var t=q.substr(0,Ga(q).lastIndexOf("/")+1);k=new n(q,t,"#"+b);k.$$parseLinkUrl(p,p);k.$$state=d.state();var s=/^\s*(javascript|mailto):/i;f.on("click",function(b){if(a.rewriteLinks&&!b.ctrlKey&&!b.metaKey&&!b.shiftKey&&2!=b.which&&2!=b.button){for(var e=B(b.target);"a"!==wa(e[0]);)if(e[0]===f[0]||!(e=e.parent())[0])return;var l=e.prop("href"),h=e.attr("href")||e.attr("xlink:href");L(l)&&"[object SVGAnimatedString]"===l.toString()&&(l=
Aa(l.animVal).href);s.test(l)||!l||e.attr("target")||b.isDefaultPrevented()||!k.$$parseLinkUrl(l,h)||(b.preventDefault(),k.absUrl()!=d.url()&&(c.$apply(),g.angular["ff-684208-preventDefault"]=!0))}});Gb(k.absUrl())!=Gb(p)&&d.url(k.absUrl(),!0);var F=!0;d.onUrlChange(function(a,b){D(ua(t,a))?g.location.href=a:(c.$evalAsync(function(){var d=k.absUrl(),e=k.$$state,f;k.$$parse(a);k.$$state=b;f=c.$broadcast("$locationChangeStart",a,d,b,e).defaultPrevented;k.absUrl()===a&&(f?(k.$$parse(d),k.$$state=e,h(d,
!1,e)):(F=!1,l(d,e)))}),c.$$phase||c.$digest())});c.$watch(function(){var a=Gb(d.url()),b=Gb(k.absUrl()),f=d.state(),g=k.$$replace,q=a!==b||k.$$html5&&e.history&&f!==k.$$state;if(F||q)F=!1,c.$evalAsync(function(){var b=k.absUrl(),d=c.$broadcast("$locationChangeStart",b,a,k.$$state,f).defaultPrevented;k.absUrl()===b&&(d?(k.$$parse(a),k.$$state=f):(q&&h(b,g,f===k.$$state?null:k.$$state),l(a,f)))});k.$$replace=!1});return k}]}function Ne(){var b=!0,a=this;this.debugEnabled=function(a){return y(a)?(b=
a,this):b};this.$get=["$window",function(c){function d(a){a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line));return a}function e(a){var b=c.console||{},e=b[a]||b.log||A;a=!1;try{a=!!e.apply}catch(l){}return a?function(){var a=[];r(arguments,function(b){a.push(d(b))});return e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),
debug:function(){var c=e("debug");return function(){b&&c.apply(a,arguments)}}()}}]}function va(b,a){if("__defineGetter__"===b||"__defineSetter__"===b||"__lookupGetter__"===b||"__lookupSetter__"===b||"__proto__"===b)throw ga("isecfld",a);return b}function dd(b,a){b+="";if(!x(b))throw ga("iseccst",a);return b}function oa(b,a){if(b){if(b.constructor===b)throw ga("isecfn",a);if(b.window===b)throw ga("isecwindow",a);if(b.children&&(b.nodeName||b.prop&&b.attr&&b.find))throw ga("isecdom",a);if(b===Object)throw ga("isecobj",
a);}return b}function ec(b){return b.constant}function jb(b,a,c,d,e){oa(b,e);oa(a,e);c=c.split(".");for(var f,g=0;1<c.length;g++){f=va(c.shift(),e);var h=0===g&&a&&a[f]||b[f];h||(h={},b[f]=h);b=oa(h,e)}f=va(c.shift(),e);oa(b[f],e);return b[f]=d}function Qa(b){return"constructor"==b}function ed(b,a,c,d,e,f,g){va(b,f);va(a,f);va(c,f);va(d,f);va(e,f);var h=function(a){return oa(a,f)},l=g||Qa(b)?h:ra,k=g||Qa(a)?h:ra,n=g||Qa(c)?h:ra,p=g||Qa(d)?h:ra,q=g||Qa(e)?h:ra;return function(f,g){var h=g&&g.hasOwnProperty(b)?
g:f;if(null==h)return h;h=l(h[b]);if(!a)return h;if(null==h)return u;h=k(h[a]);if(!c)return h;if(null==h)return u;h=n(h[c]);if(!d)return h;if(null==h)return u;h=p(h[d]);return e?null==h?u:h=q(h[e]):h}}function yf(b,a){return function(c,d){return b(c,d,oa,a)}}function zf(b,a,c){var d=a.expensiveChecks,e=d?Af:Bf,f=e[b];if(f)return f;var g=b.split("."),h=g.length;if(a.csp)f=6>h?ed(g[0],g[1],g[2],g[3],g[4],c,d):function(a,b){var e=0,f;do f=ed(g[e++],g[e++],g[e++],g[e++],g[e++],c,d)(a,b),b=u,a=f;while(e<
h);return f};else{var l="";d&&(l+="s = eso(s, fe);\nl = eso(l, fe);\n");var k=d;r(g,function(a,b){va(a,c);var e=(b?"s":'((l&&l.hasOwnProperty("'+a+'"))?l:s)')+"."+a;if(d||Qa(a))e="eso("+e+", fe)",k=!0;l+="if(s == null) return undefined;\ns="+e+";\n"});l+="return s;";a=new Function("s","l","eso","fe",l);a.toString=ea(l);k&&(a=yf(a,c));f=a}f.sharedGetter=!0;f.assign=function(a,c,d){return jb(a,d,b,c,b)};return e[b]=f}function fc(b){return z(b.valueOf)?b.valueOf():Cf.call(b)}function Oe(){var b=ja(),
a=ja();this.$get=["$filter","$sniffer",function(c,d){function e(a){var b=a;a.sharedGetter&&(b=function(b,c){return a(b,c)},b.literal=a.literal,b.constant=a.constant,b.assign=a.assign);return b}function f(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];e.constant||(e.inputs?f(e.inputs,b):-1===b.indexOf(e)&&b.push(e))}return b}function g(a,b){return null==a||null==b?a===b:"object"===typeof a&&(a=fc(a),"object"===typeof a)?!1:a===b||a!==a&&b!==b}function h(a,b,c,d){var e=d.$$inputs||(d.$$inputs=f(d.inputs,
[])),l;if(1===e.length){var h=g,e=e[0];return a.$watch(function(a){var b=e(a);g(b,h)||(l=d(a),h=b&&fc(b));return l},b,c)}for(var k=[],q=0,p=e.length;q<p;q++)k[q]=g;return a.$watch(function(a){for(var b=!1,c=0,f=e.length;c<f;c++){var h=e[c](a);if(b||(b=!g(h,k[c])))k[c]=h&&fc(h)}b&&(l=d(a));return l},b,c)}function l(a,b,c,d){var e,f;return e=a.$watch(function(a){return d(a)},function(a,c,d){f=a;z(b)&&b.apply(this,arguments);y(a)&&d.$$postDigest(function(){y(f)&&e()})},c)}function k(a,b,c,d){function e(a){var b=
!0;r(a,function(a){y(a)||(b=!1)});return b}var f,g;return f=a.$watch(function(a){return d(a)},function(a,c,d){g=a;z(b)&&b.call(this,a,c,d);e(a)&&d.$$postDigest(function(){e(g)&&f()})},c)}function n(a,b,c,d){var e;return e=a.$watch(function(a){return d(a)},function(a,c,d){z(b)&&b.apply(this,arguments);e()},c)}function p(a,b){if(!b)return a;var c=a.$$watchDelegate,c=c!==k&&c!==l?function(c,d){var e=a(c,d);return b(e,c,d)}:function(c,d){var e=a(c,d),f=b(e,c,d);return y(e)?f:e};a.$$watchDelegate&&a.$$watchDelegate!==
h?c.$$watchDelegate=a.$$watchDelegate:b.$stateful||(c.$$watchDelegate=h,c.inputs=[a]);return c}var q={csp:d.csp,expensiveChecks:!1},t={csp:d.csp,expensiveChecks:!0};return function(d,f,g){var m,r,u;switch(typeof d){case "string":u=d=d.trim();var I=g?a:b;m=I[u];m||(":"===d.charAt(0)&&":"===d.charAt(1)&&(r=!0,d=d.substring(2)),g=g?t:q,m=new gc(g),m=(new kb(m,c,g)).parse(d),m.constant?m.$$watchDelegate=n:r?(m=e(m),m.$$watchDelegate=m.literal?k:l):m.inputs&&(m.$$watchDelegate=h),I[u]=m);return p(m,f);
case "function":return p(d,f);default:return p(A,f)}}}]}function Qe(){this.$get=["$rootScope","$exceptionHandler",function(b,a){return fd(function(a){b.$evalAsync(a)},a)}]}function Re(){this.$get=["$browser","$exceptionHandler",function(b,a){return fd(function(a){b.defer(a)},a)}]}function fd(b,a){function c(a,b,c){function d(b){return function(c){e||(e=!0,b.call(a,c))}}var e=!1;return[d(b),d(c)]}function d(){this.$$state={status:0}}function e(a,b){return function(c){b.call(a,c)}}function f(c){!c.processScheduled&&
c.pending&&(c.processScheduled=!0,b(function(){var b,d,e;e=c.pending;c.processScheduled=!1;c.pending=u;for(var f=0,g=e.length;f<g;++f){d=e[f][0];b=e[f][c.status];try{z(b)?d.resolve(b(c.value)):1===c.status?d.resolve(c.value):d.reject(c.value)}catch(l){d.reject(l),a(l)}}}))}function g(){this.promise=new d;this.resolve=e(this,this.resolve);this.reject=e(this,this.reject);this.notify=e(this,this.notify)}var h=S("$q",TypeError);d.prototype={then:function(a,b,c){var d=new g;this.$$state.pending=this.$$state.pending||
[];this.$$state.pending.push([d,a,b,c]);0<this.$$state.status&&f(this.$$state);return d.promise},"catch":function(a){return this.then(null,a)},"finally":function(a,b){return this.then(function(b){return k(b,!0,a)},function(b){return k(b,!1,a)},b)}};g.prototype={resolve:function(a){this.promise.$$state.status||(a===this.promise?this.$$reject(h("qcycle",a)):this.$$resolve(a))},$$resolve:function(b){var d,e;e=c(this,this.$$resolve,this.$$reject);try{if(L(b)||z(b))d=b&&b.then;z(d)?(this.promise.$$state.status=
-1,d.call(b,e[0],e[1],this.notify)):(this.promise.$$state.value=b,this.promise.$$state.status=1,f(this.promise.$$state))}catch(g){e[1](g),a(g)}},reject:function(a){this.promise.$$state.status||this.$$reject(a)},$$reject:function(a){this.promise.$$state.value=a;this.promise.$$state.status=2;f(this.promise.$$state)},notify:function(c){var d=this.promise.$$state.pending;0>=this.promise.$$state.status&&d&&d.length&&b(function(){for(var b,e,f=0,g=d.length;f<g;f++){e=d[f][0];b=d[f][3];try{e.notify(z(b)?
b(c):c)}catch(l){a(l)}}})}};var l=function(a,b){var c=new g;b?c.resolve(a):c.reject(a);return c.promise},k=function(a,b,c){var d=null;try{z(c)&&(d=c())}catch(e){return l(e,!1)}return d&&z(d.then)?d.then(function(){return l(a,b)},function(a){return l(a,!1)}):l(a,b)},n=function(a,b,c,d){var e=new g;e.resolve(a);return e.promise.then(b,c,d)},p=function t(a){if(!z(a))throw h("norslvr",a);if(!(this instanceof t))return new t(a);var b=new g;a(function(a){b.resolve(a)},function(a){b.reject(a)});return b.promise};
p.defer=function(){return new g};p.reject=function(a){var b=new g;b.reject(a);return b.promise};p.when=n;p.all=function(a){var b=new g,c=0,d=H(a)?[]:{};r(a,function(a,e){c++;n(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})});0===c&&b.resolve(d);return b.promise};return p}function $e(){this.$get=["$window","$timeout",function(b,a){function c(){for(var a=0;a<n.length;a++){var b=n[a];b&&(n[a]=null,b())}k=n.length=0}function d(a){var b=
n.length;k++;n.push(a);0===b&&(l=h(c));return function(){0<=b&&(b=n[b]=null,0===--k&&l&&(l(),l=null,n.length=0))}}var e=b.requestAnimationFrame||b.webkitRequestAnimationFrame,f=b.cancelAnimationFrame||b.webkitCancelAnimationFrame||b.webkitCancelRequestAnimationFrame,g=!!e,h=g?function(a){var b=e(a);return function(){f(b)}}:function(b){var c=a(b,16.66,!1);return function(){a.cancel(c)}};d.supported=g;var l,k=0,n=[];return d}]}function Pe(){function b(a){function b(){this.$$watchers=this.$$nextSibling=
this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$id=++rb;this.$$ChildScope=null}b.prototype=a;return b}var a=10,c=S("$rootScope"),d=null,e=null;this.digestTtl=function(b){arguments.length&&(a=b);return a};this.$get=["$injector","$exceptionHandler","$parse","$browser",function(f,g,h,l){function k(a){a.currentScope.$$destroyed=!0}function n(){this.$id=++rb;this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=
null;this.$root=this;this.$$destroyed=!1;this.$$listeners={};this.$$listenerCount={};this.$$isolateBindings=null}function p(a){if(v.$$phase)throw c("inprog",v.$$phase);v.$$phase=a}function q(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function t(){}function s(){for(;u.length;)try{u.shift()()}catch(a){g(a)}e=null}function F(){null===e&&(e=l.defer(function(){v.$apply(s)}))}n.prototype={constructor:n,$new:function(a,c){var d;c=c||this;a?
(d=new n,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=b(this)),d=new this.$$ChildScope);d.$parent=c;d.$$prevSibling=c.$$childTail;c.$$childHead?(c.$$childTail.$$nextSibling=d,c.$$childTail=d):c.$$childHead=c.$$childTail=d;(a||c!=this)&&d.$on("$destroy",k);return d},$watch:function(a,b,c){var e=h(a);if(e.$$watchDelegate)return e.$$watchDelegate(this,b,c,e);var f=this.$$watchers,g={fn:b,last:t,get:e,exp:a,eq:!!c};d=null;z(b)||(g.fn=A);f||(f=this.$$watchers=[]);f.unshift(g);return function(){Ya(f,
g);d=null}},$watchGroup:function(a,b){function c(){l=!1;h?(h=!1,b(e,e,g)):b(e,d,g)}var d=Array(a.length),e=Array(a.length),f=[],g=this,l=!1,h=!0;if(!a.length){var k=!0;g.$evalAsync(function(){k&&b(e,e,g)});return function(){k=!1}}if(1===a.length)return this.$watch(a[0],function(a,c,f){e[0]=a;d[0]=c;b(e,a===c?e:d,f)});r(a,function(a,b){var h=g.$watch(a,function(a,f){e[b]=a;d[b]=f;l||(l=!0,g.$evalAsync(c))});f.push(h)});return function(){for(;f.length;)f.shift()()}},$watchCollection:function(a,b){function c(a){e=
a;var b,d,g,l;if(!D(e)){if(L(e))if(Ta(e))for(f!==p&&(f=p,t=f.length=0,k++),a=e.length,t!==a&&(k++,f.length=t=a),b=0;b<a;b++)l=f[b],g=e[b],d=l!==l&&g!==g,d||l===g||(k++,f[b]=g);else{f!==n&&(f=n={},t=0,k++);a=0;for(b in e)e.hasOwnProperty(b)&&(a++,g=e[b],l=f[b],b in f?(d=l!==l&&g!==g,d||l===g||(k++,f[b]=g)):(t++,f[b]=g,k++));if(t>a)for(b in k++,f)e.hasOwnProperty(b)||(t--,delete f[b])}else f!==e&&(f=e,k++);return k}}c.$stateful=!0;var d=this,e,f,g,l=1<b.length,k=0,q=h(a,c),p=[],n={},m=!0,t=0;return this.$watch(q,
function(){m?(m=!1,b(e,e,d)):b(e,g,d);if(l)if(L(e))if(Ta(e)){g=Array(e.length);for(var a=0;a<e.length;a++)g[a]=e[a]}else for(a in g={},e)sc.call(e,a)&&(g[a]=e[a]);else g=e})},$digest:function(){var b,f,h,k,q,n,r=a,F,P=[],u,y;p("$digest");l.$$checkUrlChange();this===v&&null!==e&&(l.defer.cancel(e),s());d=null;do{n=!1;for(F=this;m.length;){try{y=m.shift(),y.scope.$eval(y.expression,y.locals)}catch(w){g(w)}d=null}a:do{if(k=F.$$watchers)for(q=k.length;q--;)try{if(b=k[q])if((f=b.get(F))!==(h=b.last)&&
!(b.eq?ia(f,h):"number"===typeof f&&"number"===typeof h&&isNaN(f)&&isNaN(h)))n=!0,d=b,b.last=b.eq?Da(f,null):f,b.fn(f,h===t?f:h,F),5>r&&(u=4-r,P[u]||(P[u]=[]),P[u].push({msg:z(b.exp)?"fn: "+(b.exp.name||b.exp.toString()):b.exp,newVal:f,oldVal:h}));else if(b===d){n=!1;break a}}catch(D){g(D)}if(!(k=F.$$childHead||F!==this&&F.$$nextSibling))for(;F!==this&&!(k=F.$$nextSibling);)F=F.$parent}while(F=k);if((n||m.length)&&!r--)throw v.$$phase=null,c("infdig",a,P);}while(n||m.length);for(v.$$phase=null;C.length;)try{C.shift()()}catch(B){g(B)}},
$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;if(this!==v){for(var b in this.$$listenerCount)q(this,this.$$listenerCount[b],b);a.$$childHead==this&&(a.$$childHead=this.$$nextSibling);a.$$childTail==this&&(a.$$childTail=this.$$prevSibling);this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling);this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling);this.$destroy=this.$digest=this.$apply=this.$evalAsync=
this.$applyAsync=A;this.$on=this.$watch=this.$watchGroup=function(){return A};this.$$listeners={};this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}}},$eval:function(a,b){return h(a)(this,b)},$evalAsync:function(a,b){v.$$phase||m.length||l.defer(function(){m.length&&v.$digest()});m.push({scope:this,expression:a,locals:b})},$$postDigest:function(a){C.push(a)},$apply:function(a){try{return p("$apply"),this.$eval(a)}catch(b){g(b)}finally{v.$$phase=
null;try{v.$digest()}catch(c){throw g(c),c;}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&u.push(b);F()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]);c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(c[d]=null,q(e,1,a))}},$emit:function(a,b){var c=[],d,e=this,f=!1,l={name:a,targetScope:e,stopPropagation:function(){f=!0},preventDefault:function(){l.defaultPrevented=
!0},defaultPrevented:!1},h=Za([l],arguments,1),k,q;do{d=e.$$listeners[a]||c;l.currentScope=e;k=0;for(q=d.length;k<q;k++)if(d[k])try{d[k].apply(null,h)}catch(p){g(p)}else d.splice(k,1),k--,q--;if(f)return l.currentScope=null,l;e=e.$parent}while(e);l.currentScope=null;return l},$broadcast:function(a,b){var c=this,d=this,e={name:a,targetScope:this,preventDefault:function(){e.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[a])return e;for(var f=Za([e],arguments,1),l,h;c=d;){e.currentScope=
c;d=c.$$listeners[a]||[];l=0;for(h=d.length;l<h;l++)if(d[l])try{d[l].apply(null,f)}catch(k){g(k)}else d.splice(l,1),l--,h--;if(!(d=c.$$listenerCount[a]&&c.$$childHead||c!==this&&c.$$nextSibling))for(;c!==this&&!(d=c.$$nextSibling);)c=c.$parent}e.currentScope=null;return e}};var v=new n,m=v.$$asyncQueue=[],C=v.$$postDigestQueue=[],u=v.$$applyAsyncQueue=[];return v}]}function Sd(){var b=/^\s*(https?|ftp|mailto|tel|file):/,a=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=
function(a){return y(a)?(b=a,this):b};this.imgSrcSanitizationWhitelist=function(b){return y(b)?(a=b,this):a};this.$get=function(){return function(c,d){var e=d?a:b,f;f=Aa(c).href;return""===f||f.match(e)?c:"unsafe:"+f}}}function Df(b){if("self"===b)return b;if(x(b)){if(-1<b.indexOf("***"))throw Ba("iwcard",b);b=gd(b).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*");return new RegExp("^"+b+"$")}if(Va(b))return new RegExp("^"+b.source+"$");throw Ba("imatcher");}function hd(b){var a=[];y(b)&&r(b,function(b){a.push(Df(b))});
return a}function Te(){this.SCE_CONTEXTS=pa;var b=["self"],a=[];this.resourceUrlWhitelist=function(a){arguments.length&&(b=hd(a));return b};this.resourceUrlBlacklist=function(b){arguments.length&&(a=hd(b));return a};this.$get=["$injector",function(c){function d(a,b){return"self"===a?Zc(b):!!a.exec(b.href)}function e(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};a&&(b.prototype=new a);b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()};b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()};
return b}var f=function(a){throw Ba("unsafe");};c.has("$sanitize")&&(f=c.get("$sanitize"));var g=e(),h={};h[pa.HTML]=e(g);h[pa.CSS]=e(g);h[pa.URL]=e(g);h[pa.JS]=e(g);h[pa.RESOURCE_URL]=e(h[pa.URL]);return{trustAs:function(a,b){var c=h.hasOwnProperty(a)?h[a]:null;if(!c)throw Ba("icontext",a,b);if(null===b||b===u||""===b)return b;if("string"!==typeof b)throw Ba("itype",a);return new c(b)},getTrusted:function(c,e){if(null===e||e===u||""===e)return e;var g=h.hasOwnProperty(c)?h[c]:null;if(g&&e instanceof
g)return e.$$unwrapTrustedValue();if(c===pa.RESOURCE_URL){var g=Aa(e.toString()),p,q,t=!1;p=0;for(q=b.length;p<q;p++)if(d(b[p],g)){t=!0;break}if(t)for(p=0,q=a.length;p<q;p++)if(d(a[p],g)){t=!1;break}if(t)return e;throw Ba("insecurl",e.toString());}if(c===pa.HTML)return f(e);throw Ba("unsafe");},valueOf:function(a){return a instanceof g?a.$$unwrapTrustedValue():a}}}]}function Se(){var b=!0;this.enabled=function(a){arguments.length&&(b=!!a);return b};this.$get=["$parse","$sceDelegate",function(a,c){if(b&&
8>Ra)throw Ba("iequirks");var d=sa(pa);d.isEnabled=function(){return b};d.trustAs=c.trustAs;d.getTrusted=c.getTrusted;d.valueOf=c.valueOf;b||(d.trustAs=d.getTrusted=function(a,b){return b},d.valueOf=ra);d.parseAs=function(b,c){var e=a(c);return e.literal&&e.constant?e:a(c,function(a){return d.getTrusted(b,a)})};var e=d.parseAs,f=d.getTrusted,g=d.trustAs;r(pa,function(a,b){var c=K(b);d[fb("parse_as_"+c)]=function(b){return e(a,b)};d[fb("get_trusted_"+c)]=function(b){return f(a,b)};d[fb("trust_as_"+
c)]=function(b){return g(a,b)}});return d}]}function Ue(){this.$get=["$window","$document",function(b,a){var c={},d=aa((/android (\d+)/.exec(K((b.navigator||{}).userAgent))||[])[1]),e=/Boxee/i.test((b.navigator||{}).userAgent),f=a[0]||{},g,h=/^(Moz|webkit|ms)(?=[A-Z])/,l=f.body&&f.body.style,k=!1,n=!1;if(l){for(var p in l)if(k=h.exec(p)){g=k[0];g=g.substr(0,1).toUpperCase()+g.substr(1);break}g||(g="WebkitOpacity"in l&&"webkit");k=!!("transition"in l||g+"Transition"in l);n=!!("animation"in l||g+"Animation"in
l);!d||k&&n||(k=x(f.body.style.webkitTransition),n=x(f.body.style.webkitAnimation))}return{history:!(!b.history||!b.history.pushState||4>d||e),hasEvent:function(a){if("input"===a&&11>=Ra)return!1;if(D(c[a])){var b=f.createElement("div");c[a]="on"+a in b}return c[a]},csp:db(),vendorPrefix:g,transitions:k,animations:n,android:d}}]}function We(){this.$get=["$templateCache","$http","$q","$sce",function(b,a,c,d){function e(f,g){e.totalPendingRequests++;x(f)&&b.get(f)||(f=d.getTrustedResourceUrl(f));var h=
a.defaults&&a.defaults.transformResponse;H(h)?h=h.filter(function(a){return a!==Zb}):h===Zb&&(h=null);return a.get(f,{cache:b,transformResponse:h})["finally"](function(){e.totalPendingRequests--}).then(function(a){return a.data},function(a){if(!g)throw ma("tpload",f);return c.reject(a)})}e.totalPendingRequests=0;return e}]}function Xe(){this.$get=["$rootScope","$browser","$location",function(b,a,c){return{findBindings:function(a,b,c){a=a.getElementsByClassName("ng-binding");var g=[];r(a,function(a){var d=
ca.element(a).data("$binding");d&&r(d,function(d){c?(new RegExp("(^|\\s)"+gd(b)+"(\\s|\\||$)")).test(d)&&g.push(a):-1!=d.indexOf(b)&&g.push(a)})});return g},findModels:function(a,b,c){for(var g=["ng-","data-ng-","ng\\:"],h=0;h<g.length;++h){var l=a.querySelectorAll("["+g[h]+"model"+(c?"=":"*=")+'"'+b+'"]');if(l.length)return l}},getLocation:function(){return c.url()},setLocation:function(a){a!==c.url()&&(c.url(a),b.$digest())},whenStable:function(b){a.notifyWhenNoOutstandingRequests(b)}}}]}function Ye(){this.$get=
["$rootScope","$browser","$q","$$q","$exceptionHandler",function(b,a,c,d,e){function f(f,l,k){var n=y(k)&&!k,p=(n?d:c).defer(),q=p.promise;l=a.defer(function(){try{p.resolve(f())}catch(a){p.reject(a),e(a)}finally{delete g[q.$$timeoutId]}n||b.$apply()},l);q.$$timeoutId=l;g[l]=p;return q}var g={};f.cancel=function(b){return b&&b.$$timeoutId in g?(g[b.$$timeoutId].reject("canceled"),delete g[b.$$timeoutId],a.defer.cancel(b.$$timeoutId)):!1};return f}]}function Aa(b){Ra&&(Z.setAttribute("href",b),b=Z.href);
Z.setAttribute("href",b);return{href:Z.href,protocol:Z.protocol?Z.protocol.replace(/:$/,""):"",host:Z.host,search:Z.search?Z.search.replace(/^\?/,""):"",hash:Z.hash?Z.hash.replace(/^#/,""):"",hostname:Z.hostname,port:Z.port,pathname:"/"===Z.pathname.charAt(0)?Z.pathname:"/"+Z.pathname}}function Zc(b){b=x(b)?Aa(b):b;return b.protocol===id.protocol&&b.host===id.host}function Ze(){this.$get=ea(R)}function Ec(b){function a(c,d){if(L(c)){var e={};r(c,function(b,c){e[c]=a(c,b)});return e}return b.factory(c+
"Filter",d)}this.register=a;this.$get=["$injector",function(a){return function(b){return a.get(b+"Filter")}}];a("currency",jd);a("date",kd);a("filter",Ef);a("json",Ff);a("limitTo",Gf);a("lowercase",Hf);a("number",ld);a("orderBy",md);a("uppercase",If)}function Ef(){return function(b,a,c){if(!H(b))return b;var d;switch(null!==a?typeof a:"null"){case "function":break;case "boolean":case "null":case "number":case "string":d=!0;case "object":a=Jf(a,c,d);break;default:return b}return b.filter(a)}}function Jf(b,
a,c){var d=L(b)&&"$"in b;!0===a?a=ia:z(a)||(a=function(a,b){if(D(a))return!1;if(null===a||null===b)return a===b;if(L(a)||L(b))return!1;a=K(""+a);b=K(""+b);return-1!==a.indexOf(b)});return function(e){return d&&!L(e)?Ha(e,b.$,a,!1):Ha(e,b,a,c)}}function Ha(b,a,c,d,e){var f=null!==b?typeof b:"null",g=null!==a?typeof a:"null";if("string"===g&&"!"===a.charAt(0))return!Ha(b,a.substring(1),c,d);if(H(b))return b.some(function(b){return Ha(b,a,c,d)});switch(f){case "object":var h;if(d){for(h in b)if("$"!==
h.charAt(0)&&Ha(b[h],a,c,!0))return!0;return e?!1:Ha(b,a,c,!1)}if("object"===g){for(h in a)if(e=a[h],!z(e)&&!D(e)&&(f="$"===h,!Ha(f?b:b[h],e,c,f,f)))return!1;return!0}return c(b,a);case "function":return!1;default:return c(b,a)}}function jd(b){var a=b.NUMBER_FORMATS;return function(b,d,e){D(d)&&(d=a.CURRENCY_SYM);D(e)&&(e=a.PATTERNS[1].maxFrac);return null==b?b:nd(b,a.PATTERNS[1],a.GROUP_SEP,a.DECIMAL_SEP,e).replace(/\u00A4/g,d)}}function ld(b){var a=b.NUMBER_FORMATS;return function(b,d){return null==
b?b:nd(b,a.PATTERNS[0],a.GROUP_SEP,a.DECIMAL_SEP,d)}}function nd(b,a,c,d,e){if(!isFinite(b)||L(b))return"";var f=0>b;b=Math.abs(b);var g=b+"",h="",l=[],k=!1;if(-1!==g.indexOf("e")){var n=g.match(/([\d\.]+)e(-?)(\d+)/);n&&"-"==n[2]&&n[3]>e+1?b=0:(h=g,k=!0)}if(k)0<e&&1>b&&(h=b.toFixed(e),b=parseFloat(h));else{g=(g.split(od)[1]||"").length;D(e)&&(e=Math.min(Math.max(a.minFrac,g),a.maxFrac));b=+(Math.round(+(b.toString()+"e"+e)).toString()+"e"+-e);var g=(""+b).split(od),k=g[0],g=g[1]||"",p=0,q=a.lgSize,
t=a.gSize;if(k.length>=q+t)for(p=k.length-q,n=0;n<p;n++)0===(p-n)%t&&0!==n&&(h+=c),h+=k.charAt(n);for(n=p;n<k.length;n++)0===(k.length-n)%q&&0!==n&&(h+=c),h+=k.charAt(n);for(;g.length<e;)g+="0";e&&"0"!==e&&(h+=d+g.substr(0,e))}0===b&&(f=!1);l.push(f?a.negPre:a.posPre,h,f?a.negSuf:a.posSuf);return l.join("")}function Jb(b,a,c){var d="";0>b&&(d="-",b=-b);for(b=""+b;b.length<a;)b="0"+b;c&&(b=b.substr(b.length-a));return d+b}function U(b,a,c,d){c=c||0;return function(e){e=e["get"+b]();if(0<c||e>-c)e+=
c;0===e&&-12==c&&(e=12);return Jb(e,a,d)}}function Kb(b,a){return function(c,d){var e=c["get"+b](),f=vb(a?"SHORT"+b:b);return d[f][e]}}function pd(b){var a=(new Date(b,0,1)).getDay();return new Date(b,0,(4>=a?5:12)-a)}function qd(b){return function(a){var c=pd(a.getFullYear());a=+new Date(a.getFullYear(),a.getMonth(),a.getDate()+(4-a.getDay()))-+c;a=1+Math.round(a/6048E5);return Jb(a,b)}}function hc(b,a){return 0>=b.getFullYear()?a.ERAS[0]:a.ERAS[1]}function kd(b){function a(a){var b;if(b=a.match(c)){a=
new Date(0);var f=0,g=0,h=b[8]?a.setUTCFullYear:a.setFullYear,l=b[8]?a.setUTCHours:a.setHours;b[9]&&(f=aa(b[9]+b[10]),g=aa(b[9]+b[11]));h.call(a,aa(b[1]),aa(b[2])-1,aa(b[3]));f=aa(b[4]||0)-f;g=aa(b[5]||0)-g;h=aa(b[6]||0);b=Math.round(1E3*parseFloat("0."+(b[7]||0)));l.call(a,f,g,h,b)}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,e,f){var g="",h=[],l,k;e=e||"mediumDate";e=b.DATETIME_FORMATS[e]||e;x(c)&&(c=Kf.test(c)?
aa(c):a(c));Y(c)&&(c=new Date(c));if(!ha(c))return c;for(;e;)(k=Lf.exec(e))?(h=Za(h,k,1),e=h.pop()):(h.push(e),e=null);f&&"UTC"===f&&(c=new Date(c.getTime()),c.setMinutes(c.getMinutes()+c.getTimezoneOffset()));r(h,function(a){l=Mf[a];g+=l?l(c,b.DATETIME_FORMATS):a.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return g}}function Ff(){return function(b,a){D(a)&&(a=2);return ab(b,a)}}function Gf(){return function(b,a){Y(b)&&(b=b.toString());return H(b)||x(b)?(a=Infinity===Math.abs(Number(a))?Number(a):
aa(a))?0<a?b.slice(0,a):b.slice(a):x(b)?"":[]:b}}function md(b){return function(a,c,d){function e(a,b){return b?function(b,c){return a(c,b)}:a}function f(a){switch(typeof a){case "number":case "boolean":case "string":return!0;default:return!1}}function g(a){return null===a?"null":"function"===typeof a.valueOf&&(a=a.valueOf(),f(a))||"function"===typeof a.toString&&(a=a.toString(),f(a))?a:""}function h(a,b){var c=typeof a,d=typeof b;c===d&&"object"===c&&(a=g(a),b=g(b));return c===d?("string"===c&&(a=
a.toLowerCase(),b=b.toLowerCase()),a===b?0:a<b?-1:1):c<d?-1:1}if(!Ta(a))return a;c=H(c)?c:[c];0===c.length&&(c=["+"]);c=c.map(function(a){var c=!1,d=a||ra;if(x(a)){if("+"==a.charAt(0)||"-"==a.charAt(0))c="-"==a.charAt(0),a=a.substring(1);if(""===a)return e(h,c);d=b(a);if(d.constant){var f=d();return e(function(a,b){return h(a[f],b[f])},c)}}return e(function(a,b){return h(d(a),d(b))},c)});return $a.call(a).sort(e(function(a,b){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(0!==e)return e}return 0},
d))}}function Ia(b){z(b)&&(b={link:b});b.restrict=b.restrict||"AC";return ea(b)}function rd(b,a,c,d,e){var f=this,g=[],h=f.$$parentForm=b.parent().controller("form")||Lb;f.$error={};f.$$success={};f.$pending=u;f.$name=e(a.name||a.ngForm||"")(c);f.$dirty=!1;f.$pristine=!0;f.$valid=!0;f.$invalid=!1;f.$submitted=!1;h.$addControl(f);f.$rollbackViewValue=function(){r(g,function(a){a.$rollbackViewValue()})};f.$commitViewValue=function(){r(g,function(a){a.$commitViewValue()})};f.$addControl=function(a){Ma(a.$name,
"input");g.push(a);a.$name&&(f[a.$name]=a)};f.$$renameControl=function(a,b){var c=a.$name;f[c]===a&&delete f[c];f[b]=a;a.$name=b};f.$removeControl=function(a){a.$name&&f[a.$name]===a&&delete f[a.$name];r(f.$pending,function(b,c){f.$setValidity(c,null,a)});r(f.$error,function(b,c){f.$setValidity(c,null,a)});r(f.$$success,function(b,c){f.$setValidity(c,null,a)});Ya(g,a)};sd({ctrl:this,$element:b,set:function(a,b,c){var d=a[b];d?-1===d.indexOf(c)&&d.push(c):a[b]=[c]},unset:function(a,b,c){var d=a[b];
d&&(Ya(d,c),0===d.length&&delete a[b])},parentForm:h,$animate:d});f.$setDirty=function(){d.removeClass(b,Sa);d.addClass(b,Mb);f.$dirty=!0;f.$pristine=!1;h.$setDirty()};f.$setPristine=function(){d.setClass(b,Sa,Mb+" ng-submitted");f.$dirty=!1;f.$pristine=!0;f.$submitted=!1;r(g,function(a){a.$setPristine()})};f.$setUntouched=function(){r(g,function(a){a.$setUntouched()})};f.$setSubmitted=function(){d.addClass(b,"ng-submitted");f.$submitted=!0;h.$setSubmitted()}}function ic(b){b.$formatters.push(function(a){return b.$isEmpty(a)?
a:a.toString()})}function lb(b,a,c,d,e,f){var g=K(a[0].type);if(!e.android){var h=!1;a.on("compositionstart",function(a){h=!0});a.on("compositionend",function(){h=!1;l()})}var l=function(b){k&&(f.defer.cancel(k),k=null);if(!h){var e=a.val();b=b&&b.type;"password"===g||c.ngTrim&&"false"===c.ngTrim||(e=N(e));(d.$viewValue!==e||""===e&&d.$$hasNativeValidators)&&d.$setViewValue(e,b)}};if(e.hasEvent("input"))a.on("input",l);else{var k,n=function(a,b,c){k||(k=f.defer(function(){k=null;b&&b.value===c||l(a)}))};
a.on("keydown",function(a){var b=a.keyCode;91===b||15<b&&19>b||37<=b&&40>=b||n(a,this,this.value)});if(e.hasEvent("paste"))a.on("paste cut",n)}a.on("change",l);d.$render=function(){a.val(d.$isEmpty(d.$viewValue)?"":d.$viewValue)}}function Nb(b,a){return function(c,d){var e,f;if(ha(c))return c;if(x(c)){'"'==c.charAt(0)&&'"'==c.charAt(c.length-1)&&(c=c.substring(1,c.length-1));if(Nf.test(c))return new Date(c);b.lastIndex=0;if(e=b.exec(c))return e.shift(),f=d?{yyyy:d.getFullYear(),MM:d.getMonth()+1,
dd:d.getDate(),HH:d.getHours(),mm:d.getMinutes(),ss:d.getSeconds(),sss:d.getMilliseconds()/1E3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},r(e,function(b,c){c<a.length&&(f[a[c]]=+b)}),new Date(f.yyyy,f.MM-1,f.dd,f.HH,f.mm,f.ss||0,1E3*f.sss||0)}return NaN}}function mb(b,a,c,d){return function(e,f,g,h,l,k,n){function p(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function q(a){return y(a)?ha(a)?a:c(a):u}td(e,f,g,h);lb(e,f,g,h,l,k);var t=h&&h.$options&&h.$options.timezone,s;h.$$parserName=b;
h.$parsers.push(function(b){return h.$isEmpty(b)?null:a.test(b)?(b=c(b,s),"UTC"===t&&b.setMinutes(b.getMinutes()-b.getTimezoneOffset()),b):u});h.$formatters.push(function(a){if(a&&!ha(a))throw nb("datefmt",a);if(p(a)){if((s=a)&&"UTC"===t){var b=6E4*s.getTimezoneOffset();s=new Date(s.getTime()+b)}return n("date")(a,d,t)}s=null;return""});if(y(g.min)||g.ngMin){var r;h.$validators.min=function(a){return!p(a)||D(r)||c(a)>=r};g.$observe("min",function(a){r=q(a);h.$validate()})}if(y(g.max)||g.ngMax){var v;
h.$validators.max=function(a){return!p(a)||D(v)||c(a)<=v};g.$observe("max",function(a){v=q(a);h.$validate()})}}}function td(b,a,c,d){(d.$$hasNativeValidators=L(a[0].validity))&&d.$parsers.push(function(b){var c=a.prop("validity")||{};return c.badInput&&!c.typeMismatch?u:b})}function ud(b,a,c,d,e){if(y(d)){b=b(d);if(!b.constant)throw nb("constexpr",c,d);return b(a)}return e}function jc(b,a){b="ngClass"+b;return["$animate",function(c){function d(a,b){var c=[],d=0;a:for(;d<a.length;d++){for(var e=a[d],
n=0;n<b.length;n++)if(e==b[n])continue a;c.push(e)}return c}function e(a){if(!H(a)){if(x(a))return a.split(" ");if(L(a)){var b=[];r(a,function(a,c){a&&(b=b.concat(c.split(" ")))});return b}}return a}return{restrict:"AC",link:function(f,g,h){function l(a,b){var c=g.data("$classCounts")||{},d=[];r(a,function(a){if(0<b||c[a])c[a]=(c[a]||0)+b,c[a]===+(0<b)&&d.push(a)});g.data("$classCounts",c);return d.join(" ")}function k(b){if(!0===a||f.$index%2===a){var k=e(b||[]);if(!n){var t=l(k,1);h.$addClass(t)}else if(!ia(b,
n)){var s=e(n),t=d(k,s),k=d(s,k),t=l(t,1),k=l(k,-1);t&&t.length&&c.addClass(g,t);k&&k.length&&c.removeClass(g,k)}}n=sa(b)}var n;f.$watch(h[b],k,!0);h.$observe("class",function(a){k(f.$eval(h[b]))});"ngClass"!==b&&f.$watch("$index",function(c,d){var g=c&1;if(g!==(d&1)){var k=e(f.$eval(h[b]));g===a?(g=l(k,1),h.$addClass(g)):(g=l(k,-1),h.$removeClass(g))}})}}}]}function sd(b){function a(a,b){b&&!f[a]?(k.addClass(e,a),f[a]=!0):!b&&f[a]&&(k.removeClass(e,a),f[a]=!1)}function c(b,c){b=b?"-"+uc(b,"-"):"";
a(ob+b,!0===c);a(vd+b,!1===c)}var d=b.ctrl,e=b.$element,f={},g=b.set,h=b.unset,l=b.parentForm,k=b.$animate;f[vd]=!(f[ob]=e.hasClass(ob));d.$setValidity=function(b,e,f){e===u?(d.$pending||(d.$pending={}),g(d.$pending,b,f)):(d.$pending&&h(d.$pending,b,f),wd(d.$pending)&&(d.$pending=u));Xa(e)?e?(h(d.$error,b,f),g(d.$$success,b,f)):(g(d.$error,b,f),h(d.$$success,b,f)):(h(d.$error,b,f),h(d.$$success,b,f));d.$pending?(a(xd,!0),d.$valid=d.$invalid=u,c("",null)):(a(xd,!1),d.$valid=wd(d.$error),d.$invalid=
!d.$valid,c("",d.$valid));e=d.$pending&&d.$pending[b]?u:d.$error[b]?!1:d.$$success[b]?!0:null;c(b,e);l.$setValidity(b,e,d)}}function wd(b){if(b)for(var a in b)return!1;return!0}var Of=/^\/(.+)\/([a-z]*)$/,K=function(b){return x(b)?b.toLowerCase():b},sc=Object.prototype.hasOwnProperty,vb=function(b){return x(b)?b.toUpperCase():b},Ra,B,ta,$a=[].slice,qf=[].splice,Pf=[].push,Ca=Object.prototype.toString,Ja=S("ng"),ca=R.angular||(R.angular={}),eb,rb=0;Ra=W.documentMode;A.$inject=[];ra.$inject=[];var H=
Array.isArray,N=function(b){return x(b)?b.trim():b},gd=function(b){return b.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},db=function(){if(y(db.isActive_))return db.isActive_;var b=!(!W.querySelector("[ng-csp]")&&!W.querySelector("[data-ng-csp]"));if(!b)try{new Function("")}catch(a){b=!0}return db.isActive_=b},tb=["ng-","data-ng-","ng:","x-ng-"],Md=/[A-Z]/g,vc=!1,Qb,qa=1,bb=3,Qd={full:"1.3.20",major:1,minor:3,dot:20,codeName:"shallow-translucence"};T.expando="ng339";var Ab=
T.cache={},hf=1;T._data=function(b){return this.cache[b[this.expando]]||{}};var cf=/([\:\-\_]+(.))/g,df=/^moz([A-Z])/,Qf={mouseleave:"mouseout",mouseenter:"mouseover"},Tb=S("jqLite"),gf=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Sb=/<|&#?\w+;/,ef=/<([\w:]+)/,ff=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ka={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],
td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ka.optgroup=ka.option;ka.tbody=ka.tfoot=ka.colgroup=ka.caption=ka.thead;ka.th=ka.td;var Ka=T.prototype={ready:function(b){function a(){c||(c=!0,b())}var c=!1;"complete"===W.readyState?setTimeout(a):(this.on("DOMContentLoaded",a),T(R).on("load",a))},toString:function(){var b=[];r(this,function(a){b.push(""+a)});return"["+b.join(", ")+"]"},eq:function(b){return 0<=b?B(this[b]):B(this[this.length+b])},length:0,push:Pf,sort:[].sort,
splice:[].splice},Fb={};r("multiple selected checked disabled readOnly required open".split(" "),function(b){Fb[K(b)]=b});var Nc={};r("input select option textarea button form details".split(" "),function(b){Nc[b]=!0});var Oc={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};r({data:Vb,removeData:yb},function(b,a){T[a]=b});r({data:Vb,inheritedData:Eb,scope:function(b){return B.data(b,"$scope")||Eb(b.parentNode||b,["$isolateScope","$scope"])},isolateScope:function(b){return B.data(b,
"$isolateScope")||B.data(b,"$isolateScopeNoTemplate")},controller:Jc,injector:function(b){return Eb(b,"$injector")},removeAttr:function(b,a){b.removeAttribute(a)},hasClass:Bb,css:function(b,a,c){a=fb(a);if(y(c))b.style[a]=c;else return b.style[a]},attr:function(b,a,c){var d=b.nodeType;if(d!==bb&&2!==d&&8!==d)if(d=K(a),Fb[d])if(y(c))c?(b[a]=!0,b.setAttribute(a,d)):(b[a]=!1,b.removeAttribute(d));else return b[a]||(b.attributes.getNamedItem(a)||A).specified?d:u;else if(y(c))b.setAttribute(a,c);else if(b.getAttribute)return b=
b.getAttribute(a,2),null===b?u:b},prop:function(b,a,c){if(y(c))b[a]=c;else return b[a]},text:function(){function b(a,b){if(D(b)){var d=a.nodeType;return d===qa||d===bb?a.textContent:""}a.textContent=b}b.$dv="";return b}(),val:function(b,a){if(D(a)){if(b.multiple&&"select"===wa(b)){var c=[];r(b.options,function(a){a.selected&&c.push(a.value||a.text)});return 0===c.length?null:c}return b.value}b.value=a},html:function(b,a){if(D(a))return b.innerHTML;xb(b,!0);b.innerHTML=a},empty:Kc},function(b,a){T.prototype[a]=
function(a,d){var e,f,g=this.length;if(b!==Kc&&(2==b.length&&b!==Bb&&b!==Jc?a:d)===u){if(L(a)){for(e=0;e<g;e++)if(b===Vb)b(this[e],a);else for(f in a)b(this[e],f,a[f]);return this}e=b.$dv;g=e===u?Math.min(g,1):g;for(f=0;f<g;f++){var h=b(this[f],a,d);e=e?e+h:h}return e}for(e=0;e<g;e++)b(this[e],a,d);return this}});r({removeData:yb,on:function a(c,d,e,f){if(y(f))throw Tb("onargs");if(Fc(c)){var g=zb(c,!0);f=g.events;var h=g.handle;h||(h=g.handle=lf(c,f));for(var g=0<=d.indexOf(" ")?d.split(" "):[d],
l=g.length;l--;){d=g[l];var k=f[d];k||(f[d]=[],"mouseenter"===d||"mouseleave"===d?a(c,Qf[d],function(a){var c=a.relatedTarget;c&&(c===this||this.contains(c))||h(a,d)}):"$destroy"!==d&&c.addEventListener(d,h,!1),k=f[d]);k.push(e)}}},off:Ic,one:function(a,c,d){a=B(a);a.on(c,function f(){a.off(c,d);a.off(c,f)});a.on(c,d)},replaceWith:function(a,c){var d,e=a.parentNode;xb(a);r(new T(c),function(c){d?e.insertBefore(c,d.nextSibling):e.replaceChild(c,a);d=c})},children:function(a){var c=[];r(a.childNodes,
function(a){a.nodeType===qa&&c.push(a)});return c},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,c){var d=a.nodeType;if(d===qa||11===d){c=new T(c);for(var d=0,e=c.length;d<e;d++)a.appendChild(c[d])}},prepend:function(a,c){if(a.nodeType===qa){var d=a.firstChild;r(new T(c),function(c){a.insertBefore(c,d)})}},wrap:function(a,c){c=B(c).eq(0).clone()[0];var d=a.parentNode;d&&d.replaceChild(c,a);c.appendChild(a)},remove:Lc,detach:function(a){Lc(a,!0)},after:function(a,
c){var d=a,e=a.parentNode;c=new T(c);for(var f=0,g=c.length;f<g;f++){var h=c[f];e.insertBefore(h,d.nextSibling);d=h}},addClass:Db,removeClass:Cb,toggleClass:function(a,c,d){c&&r(c.split(" "),function(c){var f=d;D(f)&&(f=!Bb(a,c));(f?Db:Cb)(a,c)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){return a.nextElementSibling},find:function(a,c){return a.getElementsByTagName?a.getElementsByTagName(c):[]},clone:Ub,triggerHandler:function(a,c,d){var e,f,g=c.type||c,h=
zb(a);if(h=(h=h&&h.events)&&h[g])e={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:A,type:g,target:a},c.type&&(e=w(e,c)),c=sa(h),f=d?[e].concat(d):[e],r(c,function(c){e.isImmediatePropagationStopped()||c.apply(a,f)})}},function(a,c){T.prototype[c]=function(c,
e,f){for(var g,h=0,l=this.length;h<l;h++)D(g)?(g=a(this[h],c,e,f),y(g)&&(g=B(g))):Hc(g,a(this[h],c,e,f));return y(g)?g:this};T.prototype.bind=T.prototype.on;T.prototype.unbind=T.prototype.off});gb.prototype={put:function(a,c){this[Na(a,this.nextUid)]=c},get:function(a){return this[Na(a,this.nextUid)]},remove:function(a){var c=this[a=Na(a,this.nextUid)];delete this[a];return c}};var Qc=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,Rf=/,/,Sf=/^\s*(_?)(\S+?)\1\s*$/,Pc=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,Fa=S("$injector");
cb.$$annotate=function(a,c,d){var e;if("function"===typeof a){if(!(e=a.$inject)){e=[];if(a.length){if(c)throw x(d)&&d||(d=a.name||mf(a)),Fa("strictdi",d);c=a.toString().replace(Pc,"");c=c.match(Qc);r(c[1].split(Rf),function(a){a.replace(Sf,function(a,c,d){e.push(d)})})}a.$inject=e}}else H(a)?(c=a.length-1,La(a[c],"fn"),e=a.slice(0,c)):La(a,"fn",!0);return e};var Tf=S("$animate"),Ce=["$provide",function(a){this.$$selectors={};this.register=function(c,d){var e=c+"-animation";if(c&&"."!=c.charAt(0))throw Tf("notcsel",
c);this.$$selectors[c.substr(1)]=e;a.factory(e,d)};this.classNameFilter=function(a){1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null);return this.$$classNameFilter};this.$get=["$$q","$$asyncCallback","$rootScope",function(a,d,e){function f(d){var f,g=a.defer();g.promise.$$cancelFn=function(){f&&f()};e.$$postDigest(function(){f=d(function(){g.resolve()})});return g.promise}function g(a,c){var d=[],e=[],f=ja();r((a.attr("class")||"").split(/\s+/),function(a){f[a]=!0});r(c,function(a,
c){var g=f[c];!1===a&&g?e.push(c):!0!==a||g||d.push(c)});return 0<d.length+e.length&&[d.length?d:null,e.length?e:null]}function h(a,c,d){for(var e=0,f=c.length;e<f;++e)a[c[e]]=d}function l(){n||(n=a.defer(),d(function(){n.resolve();n=null}));return n.promise}function k(a,c){if(ca.isObject(c)){var d=w(c.from||{},c.to||{});a.css(d)}}var n;return{animate:function(a,c,d){k(a,{from:c,to:d});return l()},enter:function(a,c,d,e){k(a,e);d?d.after(a):c.prepend(a);return l()},leave:function(a,c){k(a,c);a.remove();
return l()},move:function(a,c,d,e){return this.enter(a,c,d,e)},addClass:function(a,c,d){return this.setClass(a,c,[],d)},$$addClassImmediately:function(a,c,d){a=B(a);c=x(c)?c:H(c)?c.join(" "):"";r(a,function(a){Db(a,c)});k(a,d);return l()},removeClass:function(a,c,d){return this.setClass(a,[],c,d)},$$removeClassImmediately:function(a,c,d){a=B(a);c=x(c)?c:H(c)?c.join(" "):"";r(a,function(a){Cb(a,c)});k(a,d);return l()},setClass:function(a,c,d,e){var k=this,l=!1;a=B(a);var m=a.data("$$animateClasses");
m?e&&m.options&&(m.options=ca.extend(m.options||{},e)):(m={classes:{},options:e},l=!0);e=m.classes;c=H(c)?c:c.split(" ");d=H(d)?d:d.split(" ");h(e,c,!0);h(e,d,!1);l&&(m.promise=f(function(c){var d=a.data("$$animateClasses");a.removeData("$$animateClasses");if(d){var e=g(a,d.classes);e&&k.$$setClassImmediately(a,e[0],e[1],d.options)}c()}),a.data("$$animateClasses",m));return m.promise},$$setClassImmediately:function(a,c,d,e){c&&this.$$addClassImmediately(a,c);d&&this.$$removeClassImmediately(a,d);
k(a,e);return l()},enabled:A,cancel:A}}]}],ma=S("$compile");xc.$inject=["$provide","$$sanitizeUriProvider"];var Rc=/^((?:x|data)[\:\-_])/i,rf=S("$controller"),Vc="application/json",$b={"Content-Type":Vc+";charset=utf-8"},tf=/^\[|^\{(?!\{)/,uf={"[":/]$/,"{":/}$/},sf=/^\)\]\}',?\n/,ac=S("$interpolate"),Uf=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,xf={http:80,https:443,ftp:21},Hb=S("$location"),Vf={$$html5:!1,$$replace:!1,absUrl:Ib("$$absUrl"),url:function(a){if(D(a))return this.$$url;var c=Uf.exec(a);(c[1]||
""===a)&&this.path(decodeURIComponent(c[1]));(c[2]||c[1]||""===a)&&this.search(c[3]||"");this.hash(c[5]||"");return this},protocol:Ib("$$protocol"),host:Ib("$$host"),port:Ib("$$port"),path:cd("$$path",function(a){a=null!==a?a.toString():"";return"/"==a.charAt(0)?a:"/"+a}),search:function(a,c){switch(arguments.length){case 0:return this.$$search;case 1:if(x(a)||Y(a))a=a.toString(),this.$$search=rc(a);else if(L(a))a=Da(a,{}),r(a,function(c,e){null==c&&delete a[e]}),this.$$search=a;else throw Hb("isrcharg");
break;default:D(c)||null===c?delete this.$$search[a]:this.$$search[a]=c}this.$$compose();return this},hash:cd("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){this.$$replace=!0;return this}};r([bd,dc,cc],function(a){a.prototype=Object.create(Vf);a.prototype.state=function(c){if(!arguments.length)return this.$$state;if(a!==cc||!this.$$html5)throw Hb("nostate");this.$$state=D(c)?null:c;return this}});var ga=S("$parse"),Wf=Function.prototype.call,Xf=Function.prototype.apply,
Yf=Function.prototype.bind,pb=ja();r({"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:function(){}},function(a,c){a.constant=a.literal=a.sharedGetter=!0;pb[c]=a});pb["this"]=function(a){return a};pb["this"].sharedGetter=!0;var qb=w(ja(),{"+":function(a,c,d,e){d=d(a,c);e=e(a,c);return y(d)?y(e)?d+e:d:y(e)?e:u},"-":function(a,c,d,e){d=d(a,c);e=e(a,c);return(y(d)?d:0)-(y(e)?e:0)},"*":function(a,c,d,e){return d(a,c)*e(a,c)},"/":function(a,c,d,e){return d(a,
c)/e(a,c)},"%":function(a,c,d,e){return d(a,c)%e(a,c)},"===":function(a,c,d,e){return d(a,c)===e(a,c)},"!==":function(a,c,d,e){return d(a,c)!==e(a,c)},"==":function(a,c,d,e){return d(a,c)==e(a,c)},"!=":function(a,c,d,e){return d(a,c)!=e(a,c)},"<":function(a,c,d,e){return d(a,c)<e(a,c)},">":function(a,c,d,e){return d(a,c)>e(a,c)},"<=":function(a,c,d,e){return d(a,c)<=e(a,c)},">=":function(a,c,d,e){return d(a,c)>=e(a,c)},"&&":function(a,c,d,e){return d(a,c)&&e(a,c)},"||":function(a,c,d,e){return d(a,
c)||e(a,c)},"!":function(a,c,d){return!d(a,c)},"=":!0,"|":!0}),Zf={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},gc=function(a){this.options=a};gc.prototype={constructor:gc,lex:function(a){this.text=a;this.index=0;for(this.tokens=[];this.index<this.text.length;)if(a=this.text.charAt(this.index),'"'===a||"'"===a)this.readString(a);else if(this.isNumber(a)||"."===a&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(a))this.readIdent();else if(this.is(a,"(){}[].,;:?"))this.tokens.push({index:this.index,
text:a}),this.index++;else if(this.isWhitespace(a))this.index++;else{var c=a+this.peek(),d=c+this.peek(2),e=qb[c],f=qb[d];qb[a]||e||f?(a=f?d:e?c:a,this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(a,c){return-1!==c.indexOf(a)},peek:function(a){a=a||1;return this.index+a<this.text.length?this.text.charAt(this.index+a):!1},isNumber:function(a){return"0"<=a&&"9">=a&&"string"===
typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\v"===a||"\u00a0"===a},isIdent:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,c,d){d=d||this.index;c=y(c)?"s "+c+"-"+this.index+" ["+this.text.substring(c,d)+"]":" "+d;throw ga("lexerr",a,c,this.text);},readNumber:function(){for(var a="",c=this.index;this.index<this.text.length;){var d=K(this.text.charAt(this.index));
if("."==d||this.isNumber(d))a+=d;else{var e=this.peek();if("e"==d&&this.isExpOperator(e))a+=d;else if(this.isExpOperator(d)&&e&&this.isNumber(e)&&"e"==a.charAt(a.length-1))a+=d;else if(!this.isExpOperator(d)||e&&this.isNumber(e)||"e"!=a.charAt(a.length-1))break;else this.throwError("Invalid exponent")}this.index++}this.tokens.push({index:c,text:a,constant:!0,value:Number(a)})},readIdent:function(){for(var a=this.index;this.index<this.text.length;){var c=this.text.charAt(this.index);if(!this.isIdent(c)&&
!this.isNumber(c))break;this.index++}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var c=this.index;this.index++;for(var d="",e=a,f=!1;this.index<this.text.length;){var g=this.text.charAt(this.index),e=e+g;if(f)"u"===g?(f=this.text.substring(this.index+1,this.index+5),f.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+f+"]"),this.index+=4,d+=String.fromCharCode(parseInt(f,16))):d+=Zf[g]||g,f=!1;else if("\\"===g)f=!0;else{if(g===
a){this.index++;this.tokens.push({index:c,text:e,constant:!0,value:d});return}d+=g}this.index++}this.throwError("Unterminated quote",c)}};var kb=function(a,c,d){this.lexer=a;this.$filter=c;this.options=d};kb.ZERO=w(function(){return 0},{sharedGetter:!0,constant:!0});kb.prototype={constructor:kb,parse:function(a){this.text=a;this.tokens=this.lexer.lex(a);a=this.statements();0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]);a.literal=!!a.literal;a.constant=!!a.constant;
return a},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?a=this.object():this.peek().identifier&&this.peek().text in pb?a=pb[this.consume().text]:this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",this.peek());for(var c,d;c=this.expect("(","[",".");)"("===c.text?(a=this.functionCall(a,d),d=null):"["===c.text?(d=a,a=this.objectIndex(a)):
"."===c.text?(d=a,a=this.fieldAccess(a)):this.throwError("IMPOSSIBLE");return a},throwError:function(a,c){throw ga("syntax",c.text,a,c.index+1,this.text,this.text.substring(c.index));},peekToken:function(){if(0===this.tokens.length)throw ga("ueoe",this.text);return this.tokens[0]},peek:function(a,c,d,e){return this.peekAhead(0,a,c,d,e)},peekAhead:function(a,c,d,e,f){if(this.tokens.length>a){a=this.tokens[a];var g=a.text;if(g===c||g===d||g===e||g===f||!(c||d||e||f))return a}return!1},expect:function(a,
c,d,e){return(a=this.peek(a,c,d,e))?(this.tokens.shift(),a):!1},consume:function(a){if(0===this.tokens.length)throw ga("ueoe",this.text);var c=this.expect(a);c||this.throwError("is unexpected, expecting ["+a+"]",this.peek());return c},unaryFn:function(a,c){var d=qb[a];return w(function(a,f){return d(a,f,c)},{constant:c.constant,inputs:[c]})},binaryFn:function(a,c,d,e){var f=qb[c];return w(function(c,e){return f(c,e,a,d)},{constant:a.constant&&d.constant,inputs:!e&&[a,d]})},identifier:function(){for(var a=
this.consume().text;this.peek(".")&&this.peekAhead(1).identifier&&!this.peekAhead(2,"(");)a+=this.consume().text+this.consume().text;return zf(a,this.options,this.text)},constant:function(){var a=this.consume().value;return w(function(){return a},{constant:!0,literal:!0})},statements:function(){for(var a=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.filterChain()),!this.expect(";"))return 1===a.length?a[0]:function(c,d){for(var e,f=0,g=a.length;f<g;f++)e=a[f](c,d);return e}},
filterChain:function(){for(var a=this.expression();this.expect("|");)a=this.filter(a);return a},filter:function(a){var c=this.$filter(this.consume().text),d,e;if(this.peek(":"))for(d=[],e=[];this.expect(":");)d.push(this.expression());var f=[a].concat(d||[]);return w(function(f,h){var l=a(f,h);if(e){e[0]=l;for(l=d.length;l--;)e[l+1]=d[l](f,h);return c.apply(u,e)}return c(l)},{constant:!c.$stateful&&f.every(ec),inputs:!c.$stateful&&f})},expression:function(){return this.assignment()},assignment:function(){var a=
this.ternary(),c,d;return(d=this.expect("="))?(a.assign||this.throwError("implies assignment but ["+this.text.substring(0,d.index)+"] can not be assigned to",d),c=this.ternary(),w(function(d,f){return a.assign(d,c(d,f),f)},{inputs:[a,c]})):a},ternary:function(){var a=this.logicalOR(),c;if(this.expect("?")&&(c=this.assignment(),this.consume(":"))){var d=this.assignment();return w(function(e,f){return a(e,f)?c(e,f):d(e,f)},{constant:a.constant&&c.constant&&d.constant})}return a},logicalOR:function(){for(var a=
this.logicalAND(),c;c=this.expect("||");)a=this.binaryFn(a,c.text,this.logicalAND(),!0);return a},logicalAND:function(){for(var a=this.equality(),c;c=this.expect("&&");)a=this.binaryFn(a,c.text,this.equality(),!0);return a},equality:function(){for(var a=this.relational(),c;c=this.expect("==","!=","===","!==");)a=this.binaryFn(a,c.text,this.relational());return a},relational:function(){for(var a=this.additive(),c;c=this.expect("<",">","<=",">=");)a=this.binaryFn(a,c.text,this.additive());return a},
additive:function(){for(var a=this.multiplicative(),c;c=this.expect("+","-");)a=this.binaryFn(a,c.text,this.multiplicative());return a},multiplicative:function(){for(var a=this.unary(),c;c=this.expect("*","/","%");)a=this.binaryFn(a,c.text,this.unary());return a},unary:function(){var a;return this.expect("+")?this.primary():(a=this.expect("-"))?this.binaryFn(kb.ZERO,a.text,this.unary()):(a=this.expect("!"))?this.unaryFn(a.text,this.unary()):this.primary()},fieldAccess:function(a){var c=this.identifier();
return w(function(d,e,f){d=f||a(d,e);return null==d?u:c(d)},{assign:function(d,e,f){var g=a(d,f);g||a.assign(d,g={},f);return c.assign(g,e)}})},objectIndex:function(a){var c=this.text,d=this.expression();this.consume("]");return w(function(e,f){var g=a(e,f),h=dd(d(e,f),c);va(h,c);return g?oa(g[h],c):u},{assign:function(e,f,g){var h=va(dd(d(e,g),c),c),l=oa(a(e,g),c);l||a.assign(e,l={},g);return l[h]=f}})},functionCall:function(a,c){var d=[];if(")"!==this.peekToken().text){do d.push(this.expression());
while(this.expect(","))}this.consume(")");var e=this.text,f=d.length?[]:null;return function(g,h){var l=c?c(g,h):y(c)?u:g,k=a(g,h,l)||A;if(f)for(var n=d.length;n--;)f[n]=oa(d[n](g,h),e);oa(l,e);if(k){if(k.constructor===k)throw ga("isecfn",e);if(k===Wf||k===Xf||k===Yf)throw ga("isecff",e);}l=k.apply?k.apply(l,f):k(f[0],f[1],f[2],f[3],f[4]);f&&(f.length=0);return oa(l,e)}},arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text){do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","))
}this.consume("]");return w(function(c,d){for(var e=[],f=0,g=a.length;f<g;f++)e.push(a[f](c,d));return e},{literal:!0,constant:a.every(ec),inputs:a})},object:function(){var a=[],c=[];if("}"!==this.peekToken().text){do{if(this.peek("}"))break;var d=this.consume();d.constant?a.push(d.value):d.identifier?a.push(d.text):this.throwError("invalid key",d);this.consume(":");c.push(this.expression())}while(this.expect(","))}this.consume("}");return w(function(d,f){for(var g={},h=0,l=c.length;h<l;h++)g[a[h]]=
c[h](d,f);return g},{literal:!0,constant:c.every(ec),inputs:c})}};var Bf=ja(),Af=ja(),Cf=Object.prototype.valueOf,Ba=S("$sce"),pa={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},ma=S("$compile"),Z=W.createElement("a"),id=Aa(R.location.href);Ec.$inject=["$provide"];jd.$inject=["$locale"];ld.$inject=["$locale"];var od=".",Mf={yyyy:U("FullYear",4),yy:U("FullYear",2,0,!0),y:U("FullYear",1),MMMM:Kb("Month"),MMM:Kb("Month",!0),MM:U("Month",2,1),M:U("Month",1,1),dd:U("Date",2),d:U("Date",
1),HH:U("Hours",2),H:U("Hours",1),hh:U("Hours",2,-12),h:U("Hours",1,-12),mm:U("Minutes",2),m:U("Minutes",1),ss:U("Seconds",2),s:U("Seconds",1),sss:U("Milliseconds",3),EEEE:Kb("Day"),EEE:Kb("Day",!0),a:function(a,c){return 12>a.getHours()?c.AMPMS[0]:c.AMPMS[1]},Z:function(a){a=-1*a.getTimezoneOffset();return a=(0<=a?"+":"")+(Jb(Math[0<a?"floor":"ceil"](a/60),2)+Jb(Math.abs(a%60),2))},ww:qd(2),w:qd(1),G:hc,GG:hc,GGG:hc,GGGG:function(a,c){return 0>=a.getFullYear()?c.ERANAMES[0]:c.ERANAMES[1]}},Lf=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,
Kf=/^\-?\d+$/;kd.$inject=["$locale"];var Hf=ea(K),If=ea(vb);md.$inject=["$parse"];var Td=ea({restrict:"E",compile:function(a,c){if(!c.href&&!c.xlinkHref&&!c.name)return function(a,c){if("a"===c[0].nodeName.toLowerCase()){var f="[object SVGAnimatedString]"===Ca.call(c.prop("href"))?"xlink:href":"href";c.on("click",function(a){c.attr(f)||a.preventDefault()})}}}}),wb={};r(Fb,function(a,c){if("multiple"!=a){var d=ya("ng-"+c);wb[d]=function(){return{restrict:"A",priority:100,link:function(a,f,g){a.$watch(g[d],
function(a){g.$set(c,!!a)})}}}}});r(Oc,function(a,c){wb[c]=function(){return{priority:100,link:function(a,e,f){if("ngPattern"===c&&"/"==f.ngPattern.charAt(0)&&(e=f.ngPattern.match(Of))){f.$set("ngPattern",new RegExp(e[1],e[2]));return}a.$watch(f[c],function(a){f.$set(c,a)})}}}});r(["src","srcset","href"],function(a){var c=ya("ng-"+a);wb[c]=function(){return{priority:99,link:function(d,e,f){var g=a,h=a;"href"===a&&"[object SVGAnimatedString]"===Ca.call(e.prop("href"))&&(h="xlinkHref",f.$attr[h]="xlink:href",
g=null);f.$observe(c,function(c){c?(f.$set(h,c),Ra&&g&&e.prop(g,f[h])):"href"===a&&f.$set(h,null)})}}}});var Lb={$addControl:A,$$renameControl:function(a,c){a.$name=c},$removeControl:A,$setValidity:A,$setDirty:A,$setPristine:A,$setSubmitted:A};rd.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var yd=function(a){return["$timeout",function(c){return{name:"form",restrict:a?"EAC":"E",controller:rd,compile:function(d,e){d.addClass(Sa).addClass(ob);var f=e.name?"name":a&&e.ngForm?"ngForm":
!1;return{pre:function(a,d,e,k){if(!("action"in e)){var n=function(c){a.$apply(function(){k.$commitViewValue();k.$setSubmitted()});c.preventDefault()};d[0].addEventListener("submit",n,!1);d.on("$destroy",function(){c(function(){d[0].removeEventListener("submit",n,!1)},0,!1)})}var p=k.$$parentForm;f&&(jb(a,null,k.$name,k,k.$name),e.$observe(f,function(c){k.$name!==c&&(jb(a,null,k.$name,u,k.$name),p.$$renameControl(k,c),jb(a,null,k.$name,k,k.$name))}));d.on("$destroy",function(){p.$removeControl(k);
f&&jb(a,null,e[f],u,k.$name);w(k,Lb)})}}}}}]},Ud=yd(),ge=yd(!0),Nf=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,$f=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,ag=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,bg=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,zd=/^(\d{4})-(\d{2})-(\d{2})$/,Ad=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,kc=/^(\d{4})-W(\d\d)$/,Bd=/^(\d{4})-(\d\d)$/,
Cd=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Dd={text:function(a,c,d,e,f,g){lb(a,c,d,e,f,g);ic(e)},date:mb("date",zd,Nb(zd,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":mb("datetimelocal",Ad,Nb(Ad,"yyyy MM dd HH mm ss sss".split(" ")),"yyyy-MM-ddTHH:mm:ss.sss"),time:mb("time",Cd,Nb(Cd,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:mb("week",kc,function(a,c){if(ha(a))return a;if(x(a)){kc.lastIndex=0;var d=kc.exec(a);if(d){var e=+d[1],f=+d[2],g=d=0,h=0,l=0,k=pd(e),f=7*(f-1);c&&(d=c.getHours(),g=
c.getMinutes(),h=c.getSeconds(),l=c.getMilliseconds());return new Date(e,0,k.getDate()+f,d,g,h,l)}}return NaN},"yyyy-Www"),month:mb("month",Bd,Nb(Bd,["yyyy","MM"]),"yyyy-MM"),number:function(a,c,d,e,f,g){td(a,c,d,e);lb(a,c,d,e,f,g);e.$$parserName="number";e.$parsers.push(function(a){return e.$isEmpty(a)?null:bg.test(a)?parseFloat(a):u});e.$formatters.push(function(a){if(!e.$isEmpty(a)){if(!Y(a))throw nb("numfmt",a);a=a.toString()}return a});if(y(d.min)||d.ngMin){var h;e.$validators.min=function(a){return e.$isEmpty(a)||
D(h)||a>=h};d.$observe("min",function(a){y(a)&&!Y(a)&&(a=parseFloat(a,10));h=Y(a)&&!isNaN(a)?a:u;e.$validate()})}if(y(d.max)||d.ngMax){var l;e.$validators.max=function(a){return e.$isEmpty(a)||D(l)||a<=l};d.$observe("max",function(a){y(a)&&!Y(a)&&(a=parseFloat(a,10));l=Y(a)&&!isNaN(a)?a:u;e.$validate()})}},url:function(a,c,d,e,f,g){lb(a,c,d,e,f,g);ic(e);e.$$parserName="url";e.$validators.url=function(a,c){var d=a||c;return e.$isEmpty(d)||$f.test(d)}},email:function(a,c,d,e,f,g){lb(a,c,d,e,f,g);ic(e);
e.$$parserName="email";e.$validators.email=function(a,c){var d=a||c;return e.$isEmpty(d)||ag.test(d)}},radio:function(a,c,d,e){D(d.name)&&c.attr("name",++rb);c.on("click",function(a){c[0].checked&&e.$setViewValue(d.value,a&&a.type)});e.$render=function(){c[0].checked=d.value==e.$viewValue};d.$observe("value",e.$render)},checkbox:function(a,c,d,e,f,g,h,l){var k=ud(l,a,"ngTrueValue",d.ngTrueValue,!0),n=ud(l,a,"ngFalseValue",d.ngFalseValue,!1);c.on("click",function(a){e.$setViewValue(c[0].checked,a&&
a.type)});e.$render=function(){c[0].checked=e.$viewValue};e.$isEmpty=function(a){return!1===a};e.$formatters.push(function(a){return ia(a,k)});e.$parsers.push(function(a){return a?k:n})},hidden:A,button:A,submit:A,reset:A,file:A},yc=["$browser","$sniffer","$filter","$parse",function(a,c,d,e){return{restrict:"E",require:["?ngModel"],link:{pre:function(f,g,h,l){l[0]&&(Dd[K(h.type)]||Dd.text)(f,g,h,l[0],c,a,d,e)}}}}],cg=/^(true|false|\d+)$/,ye=function(){return{restrict:"A",priority:100,compile:function(a,
c){return cg.test(c.ngValue)?function(a,c,f){f.$set("value",a.$eval(f.ngValue))}:function(a,c,f){a.$watch(f.ngValue,function(a){f.$set("value",a)})}}}},Zd=["$compile",function(a){return{restrict:"AC",compile:function(c){a.$$addBindingClass(c);return function(c,e,f){a.$$addBindingInfo(e,f.ngBind);e=e[0];c.$watch(f.ngBind,function(a){e.textContent=a===u?"":a})}}}}],ae=["$interpolate","$compile",function(a,c){return{compile:function(d){c.$$addBindingClass(d);return function(d,f,g){d=a(f.attr(g.$attr.ngBindTemplate));
c.$$addBindingInfo(f,d.expressions);f=f[0];g.$observe("ngBindTemplate",function(a){f.textContent=a===u?"":a})}}}}],$d=["$sce","$parse","$compile",function(a,c,d){return{restrict:"A",compile:function(e,f){var g=c(f.ngBindHtml),h=c(f.ngBindHtml,function(a){return(a||"").toString()});d.$$addBindingClass(e);return function(c,e,f){d.$$addBindingInfo(e,f.ngBindHtml);c.$watch(h,function(){e.html(a.getTrustedHtml(g(c))||"")})}}}}],xe=ea({restrict:"A",require:"ngModel",link:function(a,c,d,e){e.$viewChangeListeners.push(function(){a.$eval(d.ngChange)})}}),
be=jc("",!0),de=jc("Odd",0),ce=jc("Even",1),ee=Ia({compile:function(a,c){c.$set("ngCloak",u);a.removeClass("ng-cloak")}}),fe=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Dc={},dg={blur:!0,focus:!0};r("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var c=ya("ng-"+a);Dc[c]=["$parse","$rootScope",function(d,e){return{restrict:"A",compile:function(f,g){var h=
d(g[c],null,!0);return function(c,d){d.on(a,function(d){var f=function(){h(c,{$event:d})};dg[a]&&e.$$phase?c.$evalAsync(f):c.$apply(f)})}}}}]});var ie=["$animate",function(a){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var h,l,k;c.$watch(e.ngIf,function(c){c?l||g(function(c,f){l=f;c[c.length++]=W.createComment(" end ngIf: "+e.ngIf+" ");h={clone:c};a.enter(c,d.parent(),d)}):(k&&(k.remove(),k=null),l&&(l.$destroy(),l=null),h&&(k=
ub(h.clone),a.leave(k).then(function(){k=null}),h=null))})}}}],je=["$templateRequest","$anchorScroll","$animate",function(a,c,d){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:ca.noop,compile:function(e,f){var g=f.ngInclude||f.src,h=f.onload||"",l=f.autoscroll;return function(e,f,p,q,r){var s=0,u,v,m,C=function(){v&&(v.remove(),v=null);u&&(u.$destroy(),u=null);m&&(d.leave(m).then(function(){v=null}),v=m,m=null)};e.$watch(g,function(g){var p=function(){!y(l)||l&&!e.$eval(l)||
c()},M=++s;g?(a(g,!0).then(function(a){if(M===s){var c=e.$new();q.template=a;a=r(c,function(a){C();d.enter(a,null,f).then(p)});u=c;m=a;u.$emit("$includeContentLoaded",g);e.$eval(h)}},function(){M===s&&(C(),e.$emit("$includeContentError",g))}),e.$emit("$includeContentRequested",g)):(C(),q.template=null)})}}}}],Ae=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(c,d,e,f){/SVG/.test(d[0].toString())?(d.empty(),a(Gc(f.template,W).childNodes)(c,function(a){d.append(a)},
{futureParentElement:d})):(d.html(f.template),a(d.contents())(c))}}}],ke=Ia({priority:450,compile:function(){return{pre:function(a,c,d){a.$eval(d.ngInit)}}}}),we=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,c,d,e){var f=c.attr(d.$attr.ngList)||", ",g="false"!==d.ngTrim,h=g?N(f):f;e.$parsers.push(function(a){if(!D(a)){var c=[];a&&r(a.split(h),function(a){a&&c.push(g?N(a):a)});return c}});e.$formatters.push(function(a){return H(a)?a.join(f):u});e.$isEmpty=function(a){return!a||
!a.length}}}},ob="ng-valid",vd="ng-invalid",Sa="ng-pristine",Mb="ng-dirty",xd="ng-pending",nb=S("ngModel"),eg=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(a,c,d,e,f,g,h,l,k,n){this.$modelValue=this.$viewValue=Number.NaN;this.$$rawModelValue=u;this.$validators={};this.$asyncValidators={};this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$untouched=!0;this.$touched=!1;this.$pristine=!0;this.$dirty=!1;
this.$valid=!0;this.$invalid=!1;this.$error={};this.$$success={};this.$pending=u;this.$name=n(d.name||"",!1)(a);var p=f(d.ngModel),q=p.assign,t=p,s=q,F=null,v,m=this;this.$$setOptions=function(a){if((m.$options=a)&&a.getterSetter){var c=f(d.ngModel+"()"),g=f(d.ngModel+"($$$p)");t=function(a){var d=p(a);z(d)&&(d=c(a));return d};s=function(a,c){z(p(a))?g(a,{$$$p:m.$modelValue}):q(a,m.$modelValue)}}else if(!p.assign)throw nb("nonassign",d.ngModel,xa(e));};this.$render=A;this.$isEmpty=function(a){return D(a)||
""===a||null===a||a!==a};var C=e.inheritedData("$formController")||Lb,w=0;sd({ctrl:this,$element:e,set:function(a,c){a[c]=!0},unset:function(a,c){delete a[c]},parentForm:C,$animate:g});this.$setPristine=function(){m.$dirty=!1;m.$pristine=!0;g.removeClass(e,Mb);g.addClass(e,Sa)};this.$setDirty=function(){m.$dirty=!0;m.$pristine=!1;g.removeClass(e,Sa);g.addClass(e,Mb);C.$setDirty()};this.$setUntouched=function(){m.$touched=!1;m.$untouched=!0;g.setClass(e,"ng-untouched","ng-touched")};this.$setTouched=
function(){m.$touched=!0;m.$untouched=!1;g.setClass(e,"ng-touched","ng-untouched")};this.$rollbackViewValue=function(){h.cancel(F);m.$viewValue=m.$$lastCommittedViewValue;m.$render()};this.$validate=function(){if(!Y(m.$modelValue)||!isNaN(m.$modelValue)){var a=m.$$rawModelValue,c=m.$valid,d=m.$modelValue,e=m.$options&&m.$options.allowInvalid;m.$$runValidators(a,m.$$lastCommittedViewValue,function(f){e||c===f||(m.$modelValue=f?a:u,m.$modelValue!==d&&m.$$writeModelToScope())})}};this.$$runValidators=
function(a,c,d){function e(){var d=!0;r(m.$validators,function(e,f){var h=e(a,c);d=d&&h;g(f,h)});return d?!0:(r(m.$asyncValidators,function(a,c){g(c,null)}),!1)}function f(){var d=[],e=!0;r(m.$asyncValidators,function(f,h){var l=f(a,c);if(!l||!z(l.then))throw nb("$asyncValidators",l);g(h,u);d.push(l.then(function(){g(h,!0)},function(a){e=!1;g(h,!1)}))});d.length?k.all(d).then(function(){h(e)},A):h(!0)}function g(a,c){l===w&&m.$setValidity(a,c)}function h(a){l===w&&d(a)}w++;var l=w;(function(){var a=
m.$$parserName||"parse";if(v===u)g(a,null);else return v||(r(m.$validators,function(a,c){g(c,null)}),r(m.$asyncValidators,function(a,c){g(c,null)})),g(a,v),v;return!0})()?e()?f():h(!1):h(!1)};this.$commitViewValue=function(){var a=m.$viewValue;h.cancel(F);if(m.$$lastCommittedViewValue!==a||""===a&&m.$$hasNativeValidators)m.$$lastCommittedViewValue=a,m.$pristine&&this.$setDirty(),this.$$parseAndValidate()};this.$$parseAndValidate=function(){var c=m.$$lastCommittedViewValue;if(v=D(c)?u:!0)for(var d=
0;d<m.$parsers.length;d++)if(c=m.$parsers[d](c),D(c)){v=!1;break}Y(m.$modelValue)&&isNaN(m.$modelValue)&&(m.$modelValue=t(a));var e=m.$modelValue,f=m.$options&&m.$options.allowInvalid;m.$$rawModelValue=c;f&&(m.$modelValue=c,m.$modelValue!==e&&m.$$writeModelToScope());m.$$runValidators(c,m.$$lastCommittedViewValue,function(a){f||(m.$modelValue=a?c:u,m.$modelValue!==e&&m.$$writeModelToScope())})};this.$$writeModelToScope=function(){s(a,m.$modelValue);r(m.$viewChangeListeners,function(a){try{a()}catch(d){c(d)}})};
this.$setViewValue=function(a,c){m.$viewValue=a;m.$options&&!m.$options.updateOnDefault||m.$$debounceViewValueCommit(c)};this.$$debounceViewValueCommit=function(c){var d=0,e=m.$options;e&&y(e.debounce)&&(e=e.debounce,Y(e)?d=e:Y(e[c])?d=e[c]:Y(e["default"])&&(d=e["default"]));h.cancel(F);d?F=h(function(){m.$commitViewValue()},d):l.$$phase?m.$commitViewValue():a.$apply(function(){m.$commitViewValue()})};a.$watch(function(){var c=t(a);if(c!==m.$modelValue&&(m.$modelValue===m.$modelValue||c===c)){m.$modelValue=
m.$$rawModelValue=c;v=u;for(var d=m.$formatters,e=d.length,f=c;e--;)f=d[e](f);m.$viewValue!==f&&(m.$viewValue=m.$$lastCommittedViewValue=f,m.$render(),m.$$runValidators(c,f,A))}return c})}],ve=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:eg,priority:1,compile:function(c){c.addClass(Sa).addClass("ng-untouched").addClass(ob);return{pre:function(a,c,f,g){var h=g[0],l=g[1]||Lb;h.$$setOptions(g[2]&&g[2].$options);l.$addControl(h);f.$observe("name",
function(a){h.$name!==a&&l.$$renameControl(h,a)});a.$on("$destroy",function(){l.$removeControl(h)})},post:function(c,e,f,g){var h=g[0];if(h.$options&&h.$options.updateOn)e.on(h.$options.updateOn,function(a){h.$$debounceViewValueCommit(a&&a.type)});e.on("blur",function(e){h.$touched||(a.$$phase?c.$evalAsync(h.$setTouched):c.$apply(h.$setTouched))})}}}}}],fg=/(\s+|^)default(\s+|$)/,ze=function(){return{restrict:"A",controller:["$scope","$attrs",function(a,c){var d=this;this.$options=a.$eval(c.ngModelOptions);
this.$options.updateOn!==u?(this.$options.updateOnDefault=!1,this.$options.updateOn=N(this.$options.updateOn.replace(fg,function(){d.$options.updateOnDefault=!0;return" "}))):this.$options.updateOnDefault=!0}]}},le=Ia({terminal:!0,priority:1E3}),me=["$locale","$interpolate",function(a,c){var d=/{}/g,e=/^when(Minus)?(.+)$/;return{restrict:"EA",link:function(f,g,h){function l(a){g.text(a||"")}var k=h.count,n=h.$attr.when&&g.attr(h.$attr.when),p=h.offset||0,q=f.$eval(n)||{},t={},n=c.startSymbol(),s=
c.endSymbol(),u=n+k+"-"+p+s,v=ca.noop,m;r(h,function(a,c){var d=e.exec(c);d&&(d=(d[1]?"-":"")+K(d[2]),q[d]=g.attr(h.$attr[c]))});r(q,function(a,e){t[e]=c(a.replace(d,u))});f.$watch(k,function(c){c=parseFloat(c);var d=isNaN(c);d||c in q||(c=a.pluralCat(c-p));c===m||d&&isNaN(m)||(v(),v=f.$watch(t[c],l),m=c)})}}}],ne=["$parse","$animate",function(a,c){var d=S("ngRepeat"),e=function(a,c,d,e,k,n,p){a[d]=e;k&&(a[k]=n);a.$index=c;a.$first=0===c;a.$last=c===p-1;a.$middle=!(a.$first||a.$last);a.$odd=!(a.$even=
0===(c&1))};return{restrict:"A",multiElement:!0,transclude:"element",priority:1E3,terminal:!0,$$tlb:!0,compile:function(f,g){var h=g.ngRepeat,l=W.createComment(" end ngRepeat: "+h+" "),k=h.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!k)throw d("iexp",h);var n=k[1],p=k[2],q=k[3],t=k[4],k=n.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/);if(!k)throw d("iidexp",n);var s=k[3]||k[1],F=k[2];if(q&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(q)||
/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(q)))throw d("badident",q);var v,m,C,y,w={$id:Na};t?v=a(t):(C=function(a,c){return Na(c)},y=function(a){return a});return function(a,f,g,k,n){v&&(m=function(c,d,e){F&&(w[F]=c);w[s]=d;w.$index=e;return v(a,w)});var t=ja();a.$watchCollection(p,function(g){var k,p,v=f[0],G,w=ja(),D,I,A,z,H,O,x;q&&(a[q]=g);if(Ta(g))H=g,p=m||C;else{p=m||y;H=[];for(x in g)g.hasOwnProperty(x)&&"$"!=x.charAt(0)&&H.push(x);H.sort()}D=
H.length;x=Array(D);for(k=0;k<D;k++)if(I=g===H?k:H[k],A=g[I],z=p(I,A,k),t[z])O=t[z],delete t[z],w[z]=O,x[k]=O;else{if(w[z])throw r(x,function(a){a&&a.scope&&(t[a.id]=a)}),d("dupes",h,z,A);x[k]={id:z,scope:u,clone:u};w[z]=!0}for(G in t){O=t[G];z=ub(O.clone);c.leave(z);if(z[0].parentNode)for(k=0,p=z.length;k<p;k++)z[k].$$NG_REMOVED=!0;O.scope.$destroy()}for(k=0;k<D;k++)if(I=g===H?k:H[k],A=g[I],O=x[k],O.scope){G=v;do G=G.nextSibling;while(G&&G.$$NG_REMOVED);O.clone[0]!=G&&c.move(ub(O.clone),null,B(v));
v=O.clone[O.clone.length-1];e(O.scope,k,s,A,F,I,D)}else n(function(a,d){O.scope=d;var f=l.cloneNode(!1);a[a.length++]=f;c.enter(a,null,B(v));v=f;O.clone=a;w[O.id]=O;e(O.scope,k,s,A,F,I,D)});t=w})}}}}],oe=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(c,d,e){c.$watch(e.ngShow,function(c){a[c?"removeClass":"addClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],he=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(c,d,e){c.$watch(e.ngHide,function(c){a[c?
"addClass":"removeClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],pe=Ia(function(a,c,d){a.$watch(d.ngStyle,function(a,d){d&&a!==d&&r(d,function(a,d){c.css(d,"")});a&&c.css(a)},!0)}),qe=["$animate",function(a){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(c,d,e,f){var g=[],h=[],l=[],k=[],n=function(a,c){return function(){a.splice(c,1)}};c.$watch(e.ngSwitch||e.on,function(c){var d,e;d=0;for(e=l.length;d<e;++d)a.cancel(l[d]);d=l.length=
0;for(e=k.length;d<e;++d){var s=ub(h[d].clone);k[d].$destroy();(l[d]=a.leave(s)).then(n(l,d))}h.length=0;k.length=0;(g=f.cases["!"+c]||f.cases["?"])&&r(g,function(c){c.transclude(function(d,e){k.push(e);var f=c.element;d[d.length++]=W.createComment(" end ngSwitchWhen: ");h.push({clone:d});a.enter(d,f.parent(),f)})})})}}}],re=Ia({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,c,d,e,f){e.cases["!"+d.ngSwitchWhen]=e.cases["!"+d.ngSwitchWhen]||[];e.cases["!"+d.ngSwitchWhen].push({transclude:f,
element:c})}}),se=Ia({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,c,d,e,f){e.cases["?"]=e.cases["?"]||[];e.cases["?"].push({transclude:f,element:c})}}),ue=Ia({restrict:"EAC",link:function(a,c,d,e,f){if(!f)throw S("ngTransclude")("orphan",xa(c));f(function(a){c.empty();c.append(a)})}}),Vd=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(c,d){"text/ng-template"==d.type&&a.put(d.id,c[0].text)}}}],gg=S("ngOptions"),te=ea({restrict:"A",
terminal:!0}),Wd=["$compile","$parse",function(a,c){var d=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,e={$setViewValue:A};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(a,c,d){var l=this,k={},n=e,p;l.databound=d.ngModel;l.init=function(a,c,d){n=a;p=d};l.addOption=function(c,d){Ma(c,'"option value"');
k[c]=!0;n.$viewValue==c&&(a.val(c),p.parent()&&p.remove());d&&d[0].hasAttribute("selected")&&(d[0].selected=!0)};l.removeOption=function(a){this.hasOption(a)&&(delete k[a],n.$viewValue===a&&this.renderUnknownOption(a))};l.renderUnknownOption=function(c){c="? "+Na(c)+" ?";p.val(c);a.prepend(p);a.val(c);p.prop("selected",!0)};l.hasOption=function(a){return k.hasOwnProperty(a)};c.$on("$destroy",function(){l.renderUnknownOption=A})}],link:function(e,g,h,l){function k(a,c,d,e){d.$render=function(){var a=
d.$viewValue;e.hasOption(a)?(z.parent()&&z.remove(),c.val(a),""===a&&v.prop("selected",!0)):null==a&&v?c.val(""):e.renderUnknownOption(a)};c.on("change",function(){a.$apply(function(){z.parent()&&z.remove();d.$setViewValue(c.val())})})}function n(a,c,d){var e;d.$render=function(){var a=new gb(d.$viewValue);r(c.find("option"),function(c){c.selected=y(a.get(c.value))})};a.$watch(function(){ia(e,d.$viewValue)||(e=sa(d.$viewValue),d.$render())});c.on("change",function(){a.$apply(function(){var a=[];r(c.find("option"),
function(c){c.selected&&a.push(c.value)});d.$setViewValue(a)})})}function p(e,f,g){function h(a,c,d){T[A]=d;I&&(T[I]=c);return a(e,T)}function l(a){var c;if(t)if(K&&H(a)){c=new gb([]);for(var d=0;d<a.length;d++)c.put(h(K,null,a[d]),!0)}else c=new gb(a);else K&&(a=h(K,null,a));return function(d,e){var f;f=K?K:x?x:E;return t?y(c.remove(h(f,d,e))):a===h(f,d,e)}}function k(){m||(e.$$postDigest(p),m=!0)}function n(a,c,d){a[c]=a[c]||0;a[c]+=d?1:-1}function p(){m=!1;var a={"":[]},c=[""],d,k,s,u,v;s=g.$viewValue;
u=L(e)||[];var A=I?Object.keys(u).sort():u,x,B,H,E,P={};v=l(s);var N=!1,U,W;R={};for(E=0;H=A.length,E<H;E++){x=E;if(I&&(x=A[E],"$"===x.charAt(0)))continue;B=u[x];d=h(M,x,B)||"";(k=a[d])||(k=a[d]=[],c.push(d));d=v(x,B);N=N||d;B=h(z,x,B);B=y(B)?B:"";W=K?K(e,T):I?A[E]:E;K&&(R[W]=x);k.push({id:W,label:B,selected:d})}t||(w||null===s?a[""].unshift({id:"",label:"",selected:!N}):N||a[""].unshift({id:"?",label:"",selected:!0}));x=0;for(A=c.length;x<A;x++){d=c[x];k=a[d];S.length<=x?(s={element:D.clone().attr("label",
d),label:k.label},u=[s],S.push(u),f.append(s.element)):(u=S[x],s=u[0],s.label!=d&&s.element.attr("label",s.label=d));N=null;E=0;for(H=k.length;E<H;E++)d=k[E],(v=u[E+1])?(N=v.element,v.label!==d.label&&(n(P,v.label,!1),n(P,d.label,!0),N.text(v.label=d.label),N.prop("label",v.label)),v.id!==d.id&&N.val(v.id=d.id),N[0].selected!==d.selected&&(N.prop("selected",v.selected=d.selected),Ra&&N.prop("selected",v.selected))):(""===d.id&&w?U=w:(U=C.clone()).val(d.id).prop("selected",d.selected).attr("selected",
d.selected).prop("label",d.label).text(d.label),u.push(v={element:U,label:d.label,id:d.id,selected:d.selected}),n(P,d.label,!0),N?N.after(U):s.element.append(U),N=U);for(E++;u.length>E;)d=u.pop(),n(P,d.label,!1),d.element.remove()}for(;S.length>x;){k=S.pop();for(E=1;E<k.length;++E)n(P,k[E].label,!1);k[0].element.remove()}r(P,function(a,c){0<a?q.addOption(c):0>a&&q.removeOption(c)})}var v;if(!(v=s.match(d)))throw gg("iexp",s,xa(f));var z=c(v[2]||v[1]),A=v[4]||v[6],B=/ as /.test(v[0])&&v[1],x=B?c(B):
null,I=v[5],M=c(v[3]||""),E=c(v[2]?v[1]:A),L=c(v[7]),K=v[8]?c(v[8]):null,R={},S=[[{element:f,label:""}]],T={};w&&(a(w)(e),w.removeClass("ng-scope"),w.remove());f.empty();f.on("change",function(){e.$apply(function(){var a=L(e)||[],c;if(t)c=[],r(f.val(),function(d){d=K?R[d]:d;c.push("?"===d?u:""===d?null:h(x?x:E,d,a[d]))});else{var d=K?R[f.val()]:f.val();c="?"===d?u:""===d?null:h(x?x:E,d,a[d])}g.$setViewValue(c);p()})});g.$render=p;e.$watchCollection(L,k);e.$watchCollection(function(){var a=L(e),c;
if(a&&H(a)){c=Array(a.length);for(var d=0,f=a.length;d<f;d++)c[d]=h(z,d,a[d])}else if(a)for(d in c={},a)a.hasOwnProperty(d)&&(c[d]=h(z,d,a[d]));return c},k);t&&e.$watchCollection(function(){return g.$modelValue},k)}if(l[1]){var q=l[0];l=l[1];var t=h.multiple,s=h.ngOptions,w=!1,v,m=!1,C=B(W.createElement("option")),D=B(W.createElement("optgroup")),z=C.clone();h=0;for(var A=g.children(),x=A.length;h<x;h++)if(""===A[h].value){v=w=A.eq(h);break}q.init(l,w,z);t&&(l.$isEmpty=function(a){return!a||0===a.length});
s?p(e,g,l):t?n(e,g,l):k(e,g,l,q)}}}}],Yd=["$interpolate",function(a){var c={addOption:A,removeOption:A};return{restrict:"E",priority:100,compile:function(d,e){if(D(e.value)){var f=a(d.text(),!0);f||e.$set("value",d.text())}return function(a,d,e){var k=d.parent(),n=k.data("$selectController")||k.parent().data("$selectController");n&&n.databound||(n=c);f?a.$watch(f,function(a,c){e.$set("value",a);c!==a&&n.removeOption(c);n.addOption(a,d)}):n.addOption(e.value,d);d.on("$destroy",function(){n.removeOption(e.value)})}}}}],
Xd=ea({restrict:"E",terminal:!1}),Ac=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){e&&(d.required=!0,e.$validators.required=function(a,c){return!d.required||!e.$isEmpty(c)},d.$observe("required",function(){e.$validate()}))}}},zc=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){if(e){var f,g=d.ngPattern||d.pattern;d.$observe("pattern",function(a){x(a)&&0<a.length&&(a=new RegExp("^"+a+"$"));if(a&&!a.test)throw S("ngPattern")("noregexp",g,a,xa(c));f=
a||u;e.$validate()});e.$validators.pattern=function(a,c){return e.$isEmpty(c)||D(f)||f.test(c)}}}}},Cc=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){if(e){var f=-1;d.$observe("maxlength",function(a){a=aa(a);f=isNaN(a)?-1:a;e.$validate()});e.$validators.maxlength=function(a,c){return 0>f||e.$isEmpty(c)||c.length<=f}}}}},Bc=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){if(e){var f=0;d.$observe("minlength",function(a){f=aa(a)||0;e.$validate()});e.$validators.minlength=
function(a,c){return e.$isEmpty(c)||c.length>=f}}}}};R.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):(Nd(),Pd(ca),B(W).ready(function(){Jd(W,tc)}))})(window,document);!window.angular.$$csp()&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}</style>');


/*
 AngularJS v1.2.29
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(y,w,z){'use strict';function u(f,a,c){r.directive(f,["$parse","$swipe",function(m,p){var q=75,g=0.3,e=30;return function(h,n,l){function k(d){if(!b)return!1;var s=Math.abs(d.y-b.y);d=(d.x-b.x)*a;return v&&s<q&&0<d&&d>e&&s/d<g}var s=m(l[f]),b,v;p.bind(n,{start:function(d,s){b=d;v=!0},cancel:function(b){v=!1},end:function(b,a){k(b)&&h.$apply(function(){n.triggerHandler(c);s(h,{$event:a})})}})}}])}var r=w.module("ngTouch",[]);r.factory("$swipe",[function(){function f(a){var c=a.touches&&a.touches.length?
a.touches:[a];a=a.changedTouches&&a.changedTouches[0]||a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]||c[0].originalEvent||c[0];return{x:a.clientX,y:a.clientY}}return{bind:function(a,c){var m,p,q,g,e=!1;a.on("touchstart mousedown",function(a){q=f(a);e=!0;p=m=0;g=q;c.start&&c.start(q,a)});a.on("touchcancel",function(a){e=!1;c.cancel&&c.cancel(a)});a.on("touchmove mousemove",function(a){if(e&&q){var n=f(a);m+=Math.abs(n.x-g.x);p+=Math.abs(n.y-g.y);g=n;10>m&&10>p||
(p>m?(e=!1,c.cancel&&c.cancel(a)):(a.preventDefault(),c.move&&c.move(n,a)))}});a.on("touchend mouseup",function(a){e&&(e=!1,c.end&&c.end(f(a),a))})}}}]);r.config(["$provide",function(f){f.decorator("ngClickDirective",["$delegate",function(a){a.shift();return a}])}]);r.directive("ngClick",["$parse","$timeout","$rootElement",function(f,a,c){function m(a,b,c){for(var d=0;d<a.length;d+=2)if(Math.abs(a[d]-b)<e&&Math.abs(a[d+1]-c)<e)return a.splice(d,d+2),!0;return!1}function p(a){if(!(Date.now()-n>g)){var b=
a.touches&&a.touches.length?a.touches:[a],c=b[0].clientX,b=b[0].clientY;1>c&&1>b||k&&k[0]===c&&k[1]===b||(k&&(k=null),"label"===a.target.tagName.toLowerCase()&&(k=[c,b]),m(l,c,b)||(a.stopPropagation(),a.preventDefault(),a.target&&a.target.blur()))}}function q(c){c=c.touches&&c.touches.length?c.touches:[c];var b=c[0].clientX,e=c[0].clientY;l.push(b,e);a(function(){for(var a=0;a<l.length;a+=2)if(l[a]==b&&l[a+1]==e){l.splice(a,a+2);break}},g,!1)}var g=2500,e=25,h="ng-click-active",n,l,k;return function(a,
b,e){function d(){k=!1;b.removeClass(h)}var g=f(e.ngClick),k=!1,t,r,u,x;b.on("touchstart",function(a){k=!0;t=a.target?a.target:a.srcElement;3==t.nodeType&&(t=t.parentNode);b.addClass(h);r=Date.now();a=a.touches&&a.touches.length?a.touches:[a];a=a[0].originalEvent||a[0];u=a.clientX;x=a.clientY});b.on("touchmove",function(a){d()});b.on("touchcancel",function(a){d()});b.on("touchend",function(a){var g=Date.now()-r,f=a.changedTouches&&a.changedTouches.length?a.changedTouches:a.touches&&a.touches.length?
a.touches:[a],h=f[0].originalEvent||f[0],f=h.clientX,h=h.clientY,s=Math.sqrt(Math.pow(f-u,2)+Math.pow(h-x,2));k&&(750>g&&12>s)&&(l||(c[0].addEventListener("click",p,!0),c[0].addEventListener("touchstart",q,!0),l=[]),n=Date.now(),m(l,f,h),t&&t.blur(),w.isDefined(e.disabled)&&!1!==e.disabled||b.triggerHandler("click",[a]));d()});b.onclick=function(a){};b.on("click",function(b,c){a.$apply(function(){g(a,{$event:c||b})})});b.on("mousedown",function(a){b.addClass(h)});b.on("mousemove mouseup",function(a){b.removeClass(h)})}}]);
u("ngSwipeLeft",-1,"swipeleft");u("ngSwipeRight",1,"swiperight")})(window,window.angular);


/*
 AngularJS v1.3.20
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(N,f,W){'use strict';f.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){return function(X,r,g){g=g.ngAnimateChildren;f.isString(g)&&0===g.length?r.data("$$ngAnimateChildren",!0):X.$watch(g,function(f){r.data("$$ngAnimateChildren",!!f)})}}).factory("$$animateReflow",["$$rAF","$document",function(f,r){var g=r[0].body;return function(r){return f(function(){r(g.offsetWidth)})}}]).config(["$provide","$animateProvider",function(X,r){function g(f){for(var n=0;n<f.length;n++){var g=
f[n];if(1==g.nodeType)return g}}function ba(f,n){return g(f)==g(n)}var t=f.noop,n=f.forEach,ca=r.$$selectors,aa=f.isArray,da=f.isString,ga=f.isObject,w={running:!0},u;X.decorator("$animate",["$delegate","$$q","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document","$templateRequest","$$jqLite",function(O,N,M,Y,y,I,P,W,Z,Q){function R(a,c){var b=a.data("$$ngAnimateState")||{};c&&(b.running=!0,b.structural=!0,a.data("$$ngAnimateState",b));return b.disabled||b.running&&b.structural}
function D(a){var c,b=N.defer();b.promise.$$cancelFn=function(){c&&c()};P.$$postDigest(function(){c=a(function(){b.resolve()})});return b.promise}function J(a){if(ga(a))return a.tempClasses&&da(a.tempClasses)&&(a.tempClasses=a.tempClasses.split(/\s+/)),a}function S(a,c,b){b=b||{};var d={};n(b,function(e,a){n(a.split(" "),function(a){d[a]=e})});var h=Object.create(null);n((a.attr("class")||"").split(/\s+/),function(e){h[e]=!0});var f=[],k=[];n(c&&c.classes||[],function(e,a){var b=h[a],c=d[a]||{};!1===
e?(b||"addClass"==c.event)&&k.push(a):!0===e&&(b&&"removeClass"!=c.event||f.push(a))});return 0<f.length+k.length&&[f.join(" "),k.join(" ")]}function T(a){if(a){var c=[],b={};a=a.substr(1).split(".");(Y.transitions||Y.animations)&&c.push(M.get(ca[""]));for(var d=0;d<a.length;d++){var f=a[d],l=ca[f];l&&!b[f]&&(c.push(M.get(l)),b[f]=!0)}return c}}function U(a,c,b,d){function h(e,a){var b=e[a],c=e["before"+a.charAt(0).toUpperCase()+a.substr(1)];if(b||c)return"leave"==a&&(c=b,b=null),u.push({event:a,
fn:b}),fa.push({event:a,fn:c}),!0}function l(c,k,x){var E=[];n(c,function(a){a.fn&&E.push(a)});var m=0;n(E,function(c,f){var p=function(){a:{if(k){(k[f]||t)();if(++m<E.length)break a;k=null}x()}};switch(c.event){case "setClass":k.push(c.fn(a,e,A,p,d));break;case "animate":k.push(c.fn(a,b,d.from,d.to,p));break;case "addClass":k.push(c.fn(a,e||b,p,d));break;case "removeClass":k.push(c.fn(a,A||b,p,d));break;default:k.push(c.fn(a,p,d))}});k&&0===k.length&&x()}var k=a[0];if(k){d&&(d.to=d.to||{},d.from=
d.from||{});var e,A;aa(b)&&(e=b[0],A=b[1],e?A?b=e+" "+A:(b=e,c="addClass"):(b=A,c="removeClass"));var x="setClass"==c,E=x||"addClass"==c||"removeClass"==c||"animate"==c,p=a.attr("class")+" "+b;if(B(p)){var G=t,m=[],fa=[],g=t,s=[],u=[],p=(" "+p).replace(/\s+/g,".");n(T(p),function(a){!h(a,c)&&x&&(h(a,"addClass"),h(a,"removeClass"))});return{node:k,event:c,className:b,isClassBased:E,isSetClassOperation:x,applyStyles:function(){d&&a.css(f.extend(d.from||{},d.to||{}))},before:function(a){G=a;l(fa,m,function(){G=
t;a()})},after:function(a){g=a;l(u,s,function(){g=t;a()})},cancel:function(){m&&(n(m,function(a){(a||t)(!0)}),G(!0));s&&(n(s,function(a){(a||t)(!0)}),g(!0))}}}}}function H(a,c,b,d,h,l,k,e){function A(e){var k="$animate:"+e;g&&g[k]&&0<g[k].length&&I(function(){b.triggerHandler(k,{event:a,className:c})})}function x(){A("before")}function E(){A("after")}function p(){p.hasBeenRun||(p.hasBeenRun=!0,l())}function G(){if(!G.hasBeenRun){m&&m.applyStyles();G.hasBeenRun=!0;k&&k.tempClasses&&n(k.tempClasses,
function(a){u.removeClass(b,a)});var x=b.data("$$ngAnimateState");x&&(m&&m.isClassBased?C(b,c):(I(function(){var e=b.data("$$ngAnimateState")||{};ea==e.index&&C(b,c,a)}),b.data("$$ngAnimateState",x)));A("close");e()}}var m=U(b,a,c,k);if(!m)return p(),x(),E(),G(),t;a=m.event;c=m.className;var g=f.element._data(m.node),g=g&&g.events;d||(d=h?h.parent():b.parent());if(z(b,d))return p(),x(),E(),G(),t;d=b.data("$$ngAnimateState")||{};var L=d.active||{},s=d.totalActive||0,q=d.last;h=!1;if(0<s){s=[];if(m.isClassBased)"setClass"==
q.event?(s.push(q),C(b,c)):L[c]&&(v=L[c],v.event==a?h=!0:(s.push(v),C(b,c)));else if("leave"==a&&L["ng-leave"])h=!0;else{for(var v in L)s.push(L[v]);d={};C(b,!0)}0<s.length&&n(s,function(a){a.cancel()})}!m.isClassBased||m.isSetClassOperation||"animate"==a||h||(h="addClass"==a==b.hasClass(c));if(h)return p(),x(),E(),A("close"),e(),t;L=d.active||{};s=d.totalActive||0;if("leave"==a)b.one("$destroy",function(a){a=f.element(this);var e=a.data("$$ngAnimateState");e&&(e=e.active["ng-leave"])&&(e.cancel(),
C(a,"ng-leave"))});u.addClass(b,"ng-animate");k&&k.tempClasses&&n(k.tempClasses,function(a){u.addClass(b,a)});var ea=K++;s++;L[c]=m;b.data("$$ngAnimateState",{last:m,active:L,index:ea,totalActive:s});x();m.before(function(e){var k=b.data("$$ngAnimateState");e=e||!k||!k.active[c]||m.isClassBased&&k.active[c].event!=a;p();!0===e?G():(E(),m.after(G))});return m.cancel}function q(a){if(a=g(a))a=f.isFunction(a.getElementsByClassName)?a.getElementsByClassName("ng-animate"):a.querySelectorAll(".ng-animate"),
n(a,function(a){a=f.element(a);(a=a.data("$$ngAnimateState"))&&a.active&&n(a.active,function(a){a.cancel()})})}function C(a,c){if(ba(a,y))w.disabled||(w.running=!1,w.structural=!1);else if(c){var b=a.data("$$ngAnimateState")||{},d=!0===c;!d&&b.active&&b.active[c]&&(b.totalActive--,delete b.active[c]);if(d||!b.totalActive)u.removeClass(a,"ng-animate"),a.removeData("$$ngAnimateState")}}function z(a,c){if(w.disabled)return!0;if(ba(a,y))return w.running;var b,d,g;do{if(0===c.length)break;var l=ba(c,y),
k=l?w:c.data("$$ngAnimateState")||{};if(k.disabled)return!0;l&&(g=!0);!1!==b&&(l=c.data("$$ngAnimateChildren"),f.isDefined(l)&&(b=l));d=d||k.running||k.last&&!k.last.isClassBased}while(c=c.parent());return!g||!b&&d}u=Q;y.data("$$ngAnimateState",w);var $=P.$watch(function(){return Z.totalPendingRequests},function(a,c){0===a&&($(),P.$$postDigest(function(){P.$$postDigest(function(){w.running=!1})}))}),K=0,V=r.classNameFilter(),B=V?function(a){return V.test(a)}:function(){return!0};return{animate:function(a,
c,b,d,h){d=d||"ng-inline-animate";h=J(h)||{};h.from=b?c:null;h.to=b?b:c;return D(function(b){return H("animate",d,f.element(g(a)),null,null,t,h,b)})},enter:function(a,c,b,d){d=J(d);a=f.element(a);c=c&&f.element(c);b=b&&f.element(b);R(a,!0);O.enter(a,c,b);return D(function(h){return H("enter","ng-enter",f.element(g(a)),c,b,t,d,h)})},leave:function(a,c){c=J(c);a=f.element(a);q(a);R(a,!0);return D(function(b){return H("leave","ng-leave",f.element(g(a)),null,null,function(){O.leave(a)},c,b)})},move:function(a,
c,b,d){d=J(d);a=f.element(a);c=c&&f.element(c);b=b&&f.element(b);q(a);R(a,!0);O.move(a,c,b);return D(function(h){return H("move","ng-move",f.element(g(a)),c,b,t,d,h)})},addClass:function(a,c,b){return this.setClass(a,c,[],b)},removeClass:function(a,c,b){return this.setClass(a,[],c,b)},setClass:function(a,c,b,d){d=J(d);a=f.element(a);a=f.element(g(a));if(R(a))return O.$$setClassImmediately(a,c,b,d);var h,l=a.data("$$animateClasses"),k=!!l;l||(l={classes:{}});h=l.classes;c=aa(c)?c:c.split(" ");n(c,
function(a){a&&a.length&&(h[a]=!0)});b=aa(b)?b:b.split(" ");n(b,function(a){a&&a.length&&(h[a]=!1)});if(k)return d&&l.options&&(l.options=f.extend(l.options||{},d)),l.promise;a.data("$$animateClasses",l={classes:h,options:d});return l.promise=D(function(e){var k,b,c,d=g(a);d&&(k=a.data("$$animateClasses"),a.removeData("$$animateClasses"),c=a.parent(),b=d.parentNode);if(!b||b.$$NG_REMOVED||d.$$NG_REMOVED)e();else{b=a.data("$$ngAnimateState")||{};var f=S(a,k,b.active);return f?H("setClass",f,a,c,null,
function(){f[0]&&O.$$addClassImmediately(a,f[0]);f[1]&&O.$$removeClassImmediately(a,f[1])},k.options,e):e()}})},cancel:function(a){a.$$cancelFn()},enabled:function(a,c){switch(arguments.length){case 2:if(a)C(c);else{var b=c.data("$$ngAnimateState")||{};b.disabled=!0;c.data("$$ngAnimateState",b)}break;case 1:w.disabled=!a;break;default:a=!w.disabled}return!!a}}}]);r.register("",["$window","$sniffer","$timeout","$$animateReflow",function(r,w,M,Y){function y(){b||(b=Y(function(){c=[];b=null;B={}}))}
function I(a,e){b&&b();c.push(e);b=Y(function(){n(c,function(a){a()});c=[];b=null;B={}})}function P(a,e){var b=g(a);a=f.element(b);l.push(a);b=Date.now()+e;b<=h||(M.cancel(d),h=b,d=M(function(){X(l);l=[]},e,!1))}function X(a){n(a,function(a){(a=a.data("$$ngAnimateCSS3Data"))&&n(a.closeAnimationFns,function(a){a()})})}function Z(a,e){var b=e?B[e]:null;if(!b){var c=0,d=0,f=0,g=0;n(a,function(a){if(1==a.nodeType){a=r.getComputedStyle(a)||{};c=Math.max(Q(a[z+"Duration"]),c);d=Math.max(Q(a[z+"Delay"]),
d);g=Math.max(Q(a[K+"Delay"]),g);var e=Q(a[K+"Duration"]);0<e&&(e*=parseInt(a[K+"IterationCount"],10)||1);f=Math.max(e,f)}});b={total:0,transitionDelay:d,transitionDuration:c,animationDelay:g,animationDuration:f};e&&(B[e]=b)}return b}function Q(a){var e=0;a=da(a)?a.split(/\s*,\s*/):[];n(a,function(a){e=Math.max(parseFloat(a)||0,e)});return e}function R(b,e,c,d){b=0<=["ng-enter","ng-leave","ng-move"].indexOf(c);var f,p=e.parent(),h=p.data("$$ngAnimateKey");h||(p.data("$$ngAnimateKey",++a),h=a);f=h+
"-"+g(e).getAttribute("class");var p=f+" "+c,h=B[p]?++B[p].total:0,m={};if(0<h){var n=c+"-stagger",m=f+" "+n;(f=!B[m])&&u.addClass(e,n);m=Z(e,m);f&&u.removeClass(e,n)}u.addClass(e,c);var n=e.data("$$ngAnimateCSS3Data")||{},l=Z(e,p);f=l.transitionDuration;l=l.animationDuration;if(b&&0===f&&0===l)return u.removeClass(e,c),!1;c=d||b&&0<f;b=0<l&&0<m.animationDelay&&0===m.animationDuration;e.data("$$ngAnimateCSS3Data",{stagger:m,cacheKey:p,running:n.running||0,itemIndex:h,blockTransition:c,closeAnimationFns:n.closeAnimationFns||
[]});p=g(e);c&&(J(p,!0),d&&e.css(d));b&&(p.style[K+"PlayState"]="paused");return!0}function D(a,e,b,c,d){function f(){e.off(D,h);u.removeClass(e,l);u.removeClass(e,t);z&&M.cancel(z);H(e,b);var a=g(e),c;for(c in s)a.style.removeProperty(s[c])}function h(a){a.stopPropagation();var b=a.originalEvent||a;a=b.$manualTimeStamp||b.timeStamp||Date.now();b=parseFloat(b.elapsedTime.toFixed(3));Math.max(a-I,0)>=B&&b>=y&&c()}var m=g(e);a=e.data("$$ngAnimateCSS3Data");if(-1!=m.getAttribute("class").indexOf(b)&&
a){var l="",t="";n(b.split(" "),function(a,b){var e=(0<b?" ":"")+a;l+=e+"-active";t+=e+"-pending"});var s=[],q=a.itemIndex,v=a.stagger,r=0;if(0<q){r=0;0<v.transitionDelay&&0===v.transitionDuration&&(r=v.transitionDelay*q);var w=0;0<v.animationDelay&&0===v.animationDuration&&(w=v.animationDelay*q,s.push(C+"animation-play-state"));r=Math.round(100*Math.max(r,w))/100}r||(u.addClass(e,l),a.blockTransition&&J(m,!1));var F=Z(e,a.cacheKey+" "+l),y=Math.max(F.transitionDuration,F.animationDuration);if(0===
y)u.removeClass(e,l),H(e,b),c();else{!r&&d&&0<Object.keys(d).length&&(F.transitionDuration||(e.css("transition",F.animationDuration+"s linear all"),s.push("transition")),e.css(d));var q=Math.max(F.transitionDelay,F.animationDelay),B=1E3*q;0<s.length&&(v=m.getAttribute("style")||"",";"!==v.charAt(v.length-1)&&(v+=";"),m.setAttribute("style",v+" "));var I=Date.now(),D=V+" "+$,q=1E3*(r+1.5*(q+y)),z;0<r&&(u.addClass(e,t),z=M(function(){z=null;0<F.transitionDuration&&J(m,!1);0<F.animationDuration&&(m.style[K+
"PlayState"]="");u.addClass(e,l);u.removeClass(e,t);d&&(0===F.transitionDuration&&e.css("transition",F.animationDuration+"s linear all"),e.css(d),s.push("transition"))},1E3*r,!1));e.on(D,h);a.closeAnimationFns.push(function(){f();c()});a.running++;P(e,q);return f}}else c()}function J(a,b){a.style[z+"Property"]=b?"none":""}function S(a,b,c,d){if(R(a,b,c,d))return function(a){a&&H(b,c)}}function T(a,b,c,d,f){if(b.data("$$ngAnimateCSS3Data"))return D(a,b,c,d,f);H(b,c);d()}function U(a,b,c,d,f){var g=
S(a,b,c,f.from);if(g){var h=g;I(b,function(){h=T(a,b,c,d,f.to)});return function(a){(h||t)(a)}}y();d()}function H(a,b){u.removeClass(a,b);var c=a.data("$$ngAnimateCSS3Data");c&&(c.running&&c.running--,c.running&&0!==c.running||a.removeData("$$ngAnimateCSS3Data"))}function q(a,b){var c="";a=aa(a)?a:a.split(/\s+/);n(a,function(a,d){a&&0<a.length&&(c+=(0<d?" ":"")+a+b)});return c}var C="",z,$,K,V;N.ontransitionend===W&&N.onwebkittransitionend!==W?(C="-webkit-",z="WebkitTransition",$="webkitTransitionEnd transitionend"):
(z="transition",$="transitionend");N.onanimationend===W&&N.onwebkitanimationend!==W?(C="-webkit-",K="WebkitAnimation",V="webkitAnimationEnd animationend"):(K="animation",V="animationend");var B={},a=0,c=[],b,d=null,h=0,l=[];return{animate:function(a,b,c,d,f,g){g=g||{};g.from=c;g.to=d;return U("animate",a,b,f,g)},enter:function(a,b,c){c=c||{};return U("enter",a,"ng-enter",b,c)},leave:function(a,b,c){c=c||{};return U("leave",a,"ng-leave",b,c)},move:function(a,b,c){c=c||{};return U("move",a,"ng-move",
b,c)},beforeSetClass:function(a,b,c,d,f){f=f||{};b=q(c,"-remove")+" "+q(b,"-add");if(f=S("setClass",a,b,f.from))return I(a,d),f;y();d()},beforeAddClass:function(a,b,c,d){d=d||{};if(b=S("addClass",a,q(b,"-add"),d.from))return I(a,c),b;y();c()},beforeRemoveClass:function(a,b,c,d){d=d||{};if(b=S("removeClass",a,q(b,"-remove"),d.from))return I(a,c),b;y();c()},setClass:function(a,b,c,d,f){f=f||{};c=q(c,"-remove");b=q(b,"-add");return T("setClass",a,c+" "+b,d,f.to)},addClass:function(a,b,c,d){d=d||{};return T("addClass",
a,q(b,"-add"),c,d.to)},removeClass:function(a,b,c,d){d=d||{};return T("removeClass",a,q(b,"-remove"),c,d.to)}}}])}])})(window,window.angular);
//# sourceMappingURL=angular-animate.min.js.map

/*
 AngularJS v1.3.20
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(p,c,C){'use strict';function v(r,h,g){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(a,f,b,d,y){function z(){k&&(g.cancel(k),k=null);l&&(l.$destroy(),l=null);m&&(k=g.leave(m),k.then(function(){k=null}),m=null)}function x(){var b=r.current&&r.current.locals;if(c.isDefined(b&&b.$template)){var b=a.$new(),d=r.current;m=y(b,function(b){g.enter(b,null,m||f).then(function(){!c.isDefined(t)||t&&!a.$eval(t)||h()});z()});l=d.scope=b;l.$emit("$viewContentLoaded");
l.$eval(w)}else z()}var l,m,k,t=b.autoscroll,w=b.onload||"";a.$on("$routeChangeSuccess",x);x()}}}function A(c,h,g){return{restrict:"ECA",priority:-400,link:function(a,f){var b=g.current,d=b.locals;f.html(d.$template);var y=c(f.contents());b.controller&&(d.$scope=a,d=h(b.controller,d),b.controllerAs&&(a[b.controllerAs]=d),f.data("$ngControllerController",d),f.children().data("$ngControllerController",d));y(a)}}}p=c.module("ngRoute",["ng"]).provider("$route",function(){function r(a,f){return c.extend(Object.create(a),
f)}function h(a,c){var b=c.caseInsensitiveMatch,d={originalPath:a,regexp:a},g=d.keys=[];a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(a,c,b,d){a="?"===d?d:null;d="*"===d?d:null;g.push({name:b,optional:!!a});c=c||"";return""+(a?"":c)+"(?:"+(a?c:"")+(d&&"(.+?)"||"([^/]+)")+(a||"")+")"+(a||"")}).replace(/([\/$\*])/g,"\\$1");d.regexp=new RegExp("^"+a+"$",b?"i":"");return d}var g={};this.when=function(a,f){var b=c.copy(f);c.isUndefined(b.reloadOnSearch)&&(b.reloadOnSearch=!0);
c.isUndefined(b.caseInsensitiveMatch)&&(b.caseInsensitiveMatch=this.caseInsensitiveMatch);g[a]=c.extend(b,a&&h(a,b));if(a){var d="/"==a[a.length-1]?a.substr(0,a.length-1):a+"/";g[d]=c.extend({redirectTo:a},h(d,b))}return this};this.caseInsensitiveMatch=!1;this.otherwise=function(a){"string"===typeof a&&(a={redirectTo:a});this.when(null,a);return this};this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(a,f,b,d,h,p,x){function l(b){var e=s.current;
(v=(n=k())&&e&&n.$$route===e.$$route&&c.equals(n.pathParams,e.pathParams)&&!n.reloadOnSearch&&!w)||!e&&!n||a.$broadcast("$routeChangeStart",n,e).defaultPrevented&&b&&b.preventDefault()}function m(){var u=s.current,e=n;if(v)u.params=e.params,c.copy(u.params,b),a.$broadcast("$routeUpdate",u);else if(e||u)w=!1,(s.current=e)&&e.redirectTo&&(c.isString(e.redirectTo)?f.path(t(e.redirectTo,e.params)).search(e.params).replace():f.url(e.redirectTo(e.pathParams,f.path(),f.search())).replace()),d.when(e).then(function(){if(e){var a=
c.extend({},e.resolve),b,f;c.forEach(a,function(b,e){a[e]=c.isString(b)?h.get(b):h.invoke(b,null,null,e)});c.isDefined(b=e.template)?c.isFunction(b)&&(b=b(e.params)):c.isDefined(f=e.templateUrl)&&(c.isFunction(f)&&(f=f(e.params)),c.isDefined(f)&&(e.loadedTemplateUrl=x.valueOf(f),b=p(f)));c.isDefined(b)&&(a.$template=b);return d.all(a)}}).then(function(f){e==s.current&&(e&&(e.locals=f,c.copy(e.params,b)),a.$broadcast("$routeChangeSuccess",e,u))},function(b){e==s.current&&a.$broadcast("$routeChangeError",
e,u,b)})}function k(){var a,b;c.forEach(g,function(d,g){var q;if(q=!b){var h=f.path();q=d.keys;var l={};if(d.regexp)if(h=d.regexp.exec(h)){for(var k=1,m=h.length;k<m;++k){var n=q[k-1],p=h[k];n&&p&&(l[n.name]=p)}q=l}else q=null;else q=null;q=a=q}q&&(b=r(d,{params:c.extend({},f.search(),a),pathParams:a}),b.$$route=d)});return b||g[null]&&r(g[null],{params:{},pathParams:{}})}function t(a,b){var d=[];c.forEach((a||"").split(":"),function(a,c){if(0===c)d.push(a);else{var f=a.match(/(\w+)(?:[?*])?(.*)/),
g=f[1];d.push(b[g]);d.push(f[2]||"");delete b[g]}});return d.join("")}var w=!1,n,v,s={routes:g,reload:function(){w=!0;a.$evalAsync(function(){l();m()})},updateParams:function(a){if(this.current&&this.current.$$route)a=c.extend({},this.current.params,a),f.path(t(this.current.$$route.originalPath,a)),f.search(a);else throw B("norout");}};a.$on("$locationChangeStart",l);a.$on("$locationChangeSuccess",m);return s}]});var B=c.$$minErr("ngRoute");p.provider("$routeParams",function(){this.$get=function(){return{}}});
p.directive("ngView",v);p.directive("ngView",A);v.$inject=["$route","$anchorScroll","$animate"];A.$inject=["$compile","$controller","$route"]})(window,window.angular);


/*
 AngularJS v1.3.20
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(I,d,B){'use strict';function D(f,q){q=q||{};d.forEach(q,function(d,h){delete q[h]});for(var h in f)!f.hasOwnProperty(h)||"$"===h.charAt(0)&&"$"===h.charAt(1)||(q[h]=f[h]);return q}var w=d.$$minErr("$resource"),C=/^(\.[a-zA-Z_$][0-9a-zA-Z_$]*)+$/;d.module("ngResource",["ng"]).provider("$resource",function(){var f=this;this.defaults={stripTrailingSlashes:!0,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}}};
this.$get=["$http","$q",function(q,h){function t(d,g){this.template=d;this.defaults=s({},f.defaults,g);this.urlParams={}}function v(x,g,l,m){function c(b,k){var c={};k=s({},g,k);r(k,function(a,k){u(a)&&(a=a());var d;if(a&&a.charAt&&"@"==a.charAt(0)){d=b;var e=a.substr(1);if(null==e||""===e||"hasOwnProperty"===e||!C.test("."+e))throw w("badmember",e);for(var e=e.split("."),n=0,g=e.length;n<g&&d!==B;n++){var h=e[n];d=null!==d?d[h]:B}}else d=a;c[k]=d});return c}function F(b){return b.resource}function e(b){D(b||
{},this)}var G=new t(x,m);l=s({},f.defaults.actions,l);e.prototype.toJSON=function(){var b=s({},this);delete b.$promise;delete b.$resolved;return b};r(l,function(b,k){var g=/^(POST|PUT|PATCH)$/i.test(b.method);e[k]=function(a,y,m,x){var n={},f,l,z;switch(arguments.length){case 4:z=x,l=m;case 3:case 2:if(u(y)){if(u(a)){l=a;z=y;break}l=y;z=m}else{n=a;f=y;l=m;break}case 1:u(a)?l=a:g?f=a:n=a;break;case 0:break;default:throw w("badargs",arguments.length);}var t=this instanceof e,p=t?f:b.isArray?[]:new e(f),
A={},v=b.interceptor&&b.interceptor.response||F,C=b.interceptor&&b.interceptor.responseError||B;r(b,function(b,a){"params"!=a&&"isArray"!=a&&"interceptor"!=a&&(A[a]=H(b))});g&&(A.data=f);G.setUrlParams(A,s({},c(f,b.params||{}),n),b.url);n=q(A).then(function(a){var c=a.data,g=p.$promise;if(c){if(d.isArray(c)!==!!b.isArray)throw w("badcfg",k,b.isArray?"array":"object",d.isArray(c)?"array":"object");b.isArray?(p.length=0,r(c,function(a){"object"===typeof a?p.push(new e(a)):p.push(a)})):(D(c,p),p.$promise=
g)}p.$resolved=!0;a.resource=p;return a},function(a){p.$resolved=!0;(z||E)(a);return h.reject(a)});n=n.then(function(a){var b=v(a);(l||E)(b,a.headers);return b},C);return t?n:(p.$promise=n,p.$resolved=!1,p)};e.prototype["$"+k]=function(a,b,c){u(a)&&(c=b,b=a,a={});a=e[k].call(this,a,this,b,c);return a.$promise||a}});e.bind=function(b){return v(x,s({},g,b),l)};return e}var E=d.noop,r=d.forEach,s=d.extend,H=d.copy,u=d.isFunction;t.prototype={setUrlParams:function(f,g,l){var m=this,c=l||m.template,h,
e,q=m.urlParams={};r(c.split(/\W/),function(b){if("hasOwnProperty"===b)throw w("badname");!/^\d+$/.test(b)&&b&&(new RegExp("(^|[^\\\\]):"+b+"(\\W|$)")).test(c)&&(q[b]=!0)});c=c.replace(/\\:/g,":");g=g||{};r(m.urlParams,function(b,k){h=g.hasOwnProperty(k)?g[k]:m.defaults[k];d.isDefined(h)&&null!==h?(e=encodeURIComponent(h).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"%20").replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+"),c=c.replace(new RegExp(":"+
k+"(\\W|$)","g"),function(b,a){return e+a})):c=c.replace(new RegExp("(/?):"+k+"(\\W|$)","g"),function(b,a,c){return"/"==c.charAt(0)?c:a+c})});m.defaults.stripTrailingSlashes&&(c=c.replace(/\/+$/,"")||"/");c=c.replace(/\/\.(?=\w+($|\?))/,".");f.url=c.replace(/\/\\\./,"/.");r(g,function(b,c){m.urlParams[c]||(f.params=f.params||{},f.params[c]=b)})}};return v}]})})(window,window.angular);


/*
 AngularJS v1.3.20
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(n,h,p){'use strict';function E(a){var e=[];r(e,h.noop).chars(a);return e.join("")}function g(a){var e={};a=a.split(",");var d;for(d=0;d<a.length;d++)e[a[d]]=!0;return e}function F(a,e){function d(a,b,d,l){b=h.lowercase(b);if(s[b])for(;f.last()&&t[f.last()];)c("",f.last());u[b]&&f.last()==b&&c("",b);(l=v[b]||!!l)||f.push(b);var m={};d.replace(G,function(a,b,e,c,d){m[b]=q(e||c||d||"")});e.start&&e.start(b,m,l)}function c(a,b){var c=0,d;if(b=h.lowercase(b))for(c=f.length-1;0<=c&&f[c]!=b;c--);
if(0<=c){for(d=f.length-1;d>=c;d--)e.end&&e.end(f[d]);f.length=c}}"string"!==typeof a&&(a=null===a||"undefined"===typeof a?"":""+a);var b,k,f=[],m=a,l;for(f.last=function(){return f[f.length-1]};a;){l="";k=!0;if(f.last()&&w[f.last()])a=a.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+f.last()+"[^>]*>","i"),function(a,b){b=b.replace(H,"$1").replace(I,"$1");e.chars&&e.chars(q(b));return""}),c("",f.last());else{if(0===a.indexOf("\x3c!--"))b=a.indexOf("--",4),0<=b&&a.lastIndexOf("--\x3e",b)===b&&(e.comment&&
e.comment(a.substring(4,b)),a=a.substring(b+3),k=!1);else if(x.test(a)){if(b=a.match(x))a=a.replace(b[0],""),k=!1}else if(J.test(a)){if(b=a.match(y))a=a.substring(b[0].length),b[0].replace(y,c),k=!1}else K.test(a)&&((b=a.match(z))?(b[4]&&(a=a.substring(b[0].length),b[0].replace(z,d)),k=!1):(l+="<",a=a.substring(1)));k&&(b=a.indexOf("<"),l+=0>b?a:a.substring(0,b),a=0>b?"":a.substring(b),e.chars&&e.chars(q(l)))}if(a==m)throw L("badparse",a);m=a}c()}function q(a){if(!a)return"";A.innerHTML=a.replace(/</g,
"&lt;");return A.textContent}function B(a){return a.replace(/&/g,"&amp;").replace(M,function(a){var d=a.charCodeAt(0);a=a.charCodeAt(1);return"&#"+(1024*(d-55296)+(a-56320)+65536)+";"}).replace(N,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function r(a,e){var d=!1,c=h.bind(a,a.push);return{start:function(a,k,f){a=h.lowercase(a);!d&&w[a]&&(d=a);d||!0!==C[a]||(c("<"),c(a),h.forEach(k,function(d,f){var k=h.lowercase(f),g="img"===a&&"src"===k||"background"===
k;!0!==O[k]||!0===D[k]&&!e(d,g)||(c(" "),c(f),c('="'),c(B(d)),c('"'))}),c(f?"/>":">"))},end:function(a){a=h.lowercase(a);d||!0!==C[a]||(c("</"),c(a),c(">"));a==d&&(d=!1)},chars:function(a){d||c(B(a))}}}var L=h.$$minErr("$sanitize"),z=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,y=/^<\/\s*([\w:-]+)[^>]*>/,G=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,K=/^</,J=/^<\//,H=/\x3c!--(.*?)--\x3e/g,x=/<!DOCTYPE([^>]*?)>/i,
I=/<!\[CDATA\[(.*?)]]\x3e/g,M=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,N=/([^\#-~| |!])/g,v=g("area,br,col,hr,img,wbr");n=g("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr");p=g("rp,rt");var u=h.extend({},p,n),s=h.extend({},n,g("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),t=h.extend({},p,g("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var"));
n=g("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use");var w=g("script,style"),C=h.extend({},v,s,t,u,n),D=g("background,cite,href,longdesc,src,usemap,xlink:href");n=g("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width");
p=g("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan");
var O=h.extend({},D,p,n),A=document.createElement("pre");h.module("ngSanitize",[]).provider("$sanitize",function(){this.$get=["$$sanitizeUri",function(a){return function(e){var d=[];F(e,r(d,function(c,b){return!/^unsafe/.test(a(c,b))}));return d.join("")}}]});h.module("ngSanitize").filter("linky",["$sanitize",function(a){var e=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,d=/^mailto:/i;return function(c,b){function k(a){a&&g.push(E(a))}function f(a,c){g.push("<a ");
h.isDefined(b)&&g.push('target="',b,'" ');g.push('href="',a.replace(/"/g,"&quot;"),'">');k(c);g.push("</a>")}if(!c)return c;for(var m,l=c,g=[],n,p;m=l.match(e);)n=m[0],m[2]||m[4]||(n=(m[3]?"http://":"mailto:")+n),p=m.index,k(l.substr(0,p)),f(n,m[0].replace(d,"")),l=l.substring(p+m[0].length);k(l);return a(g.join(""))}}])})(window,window.angular);


/*
 AngularJS v1.5.3
 (c) 2010-2016 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(A,d,B){'use strict';function p(){return["$animate",function(w){return{restrict:"AE",transclude:"element",priority:1,terminal:!0,require:"^^ngMessages",link:function(n,l,a,c,m){var k=l[0],f,q=a.ngMessage||a.when;a=a.ngMessageExp||a.whenExp;var d=function(a){f=a?x(a)?a:a.split(/[\s,]+/):null;c.reRender()};a?(d(n.$eval(a)),n.$watchCollection(a,d)):d(q);var e,r;c.register(k,r={test:function(a){var g=f;a=g?x(g)?0<=g.indexOf(a):g.hasOwnProperty(a):void 0;return a},attach:function(){e||m(n,function(a){w.enter(a,
null,l);e=a;var g=e.$$attachId=c.getAttachId();e.on("$destroy",function(){e&&e.$$attachId===g&&(c.deregister(k),r.detach())})})},detach:function(){if(e){var a=e;e=null;w.leave(a)}}})}}}]}var x=d.isArray,t=d.forEach,y=d.isString,z=d.element;d.module("ngMessages",[]).directive("ngMessages",["$animate",function(d){function n(a,c){return y(c)&&0===c.length||l(a.$eval(c))}function l(a){return y(a)?a.length:!!a}return{require:"ngMessages",restrict:"AE",controller:["$element","$scope","$attrs",function(a,
c,m){function k(a,c){for(var b=c,f=[];b&&b!==a;){var h=b.$$ngMessageNode;if(h&&h.length)return e[h];b.childNodes.length&&-1==f.indexOf(b)?(f.push(b),b=b.childNodes[b.childNodes.length-1]):b.previousSibling?b=b.previousSibling:(b=b.parentNode,f.push(b))}}var f=this,q=0,p=0;this.getAttachId=function(){return p++};var e=this.messages={},r,s;this.render=function(g){g=g||{};r=!1;s=g;for(var e=n(c,m.ngMessagesMultiple)||n(c,m.multiple),b=[],q={},h=f.head,k=!1,p=0;null!=h;){p++;var u=h.message,v=!1;k||t(g,
function(a,b){!v&&l(a)&&u.test(b)&&!q[b]&&(v=q[b]=!0,u.attach())});v?k=!e:b.push(u);h=h.next}t(b,function(a){a.detach()});b.length!==p?d.setClass(a,"ng-active","ng-inactive"):d.setClass(a,"ng-inactive","ng-active")};c.$watchCollection(m.ngMessages||m["for"],f.render);a.on("$destroy",function(){t(e,function(a){a.message.detach()})});this.reRender=function(){r||(r=!0,c.$evalAsync(function(){r&&s&&f.render(s)}))};this.register=function(g,c){var b=q.toString();e[b]={message:c};var d=a[0],h=e[b];f.head?
(d=k(d,g))?(h.next=d.next,d.next=h):(h.next=f.head,f.head=h):f.head=h;g.$$ngMessageNode=b;q++;f.reRender()};this.deregister=function(c){var d=c.$$ngMessageNode;delete c.$$ngMessageNode;var b=e[d];(c=k(a[0],c))?c.next=b.next:f.head=b.next;delete e[d];f.reRender()}}]}}]).directive("ngMessagesInclude",["$templateRequest","$document","$compile",function(d,n,l){return{restrict:"AE",require:"^^ngMessages",link:function(a,c,m){var k=m.ngMessagesInclude||m.src;d(k).then(function(d){l(d)(a,function(a){c.after(a);
a=l.$$createComment?l.$$createComment("ngMessagesInclude",k):n[0].createComment(" ngMessagesInclude: "+k+" ");a=z(a);c.after(a);c.remove()})})}}}]).directive("ngMessage",p()).directive("ngMessageExp",p())})(window,window.angular);


/**
 * State-based routing for AngularJS
 * @version v0.2.15
 * @link http://angular-ui.github.com/
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(a,b,c){"use strict";function d(a,b){return N(new(N(function(){},{prototype:a})),b)}function e(a){return M(arguments,function(b){b!==a&&M(b,function(b,c){a.hasOwnProperty(c)||(a[c]=b)})}),a}function f(a,b){var c=[];for(var d in a.path){if(a.path[d]!==b.path[d])break;c.push(a.path[d])}return c}function g(a){if(Object.keys)return Object.keys(a);var b=[];return M(a,function(a,c){b.push(c)}),b}function h(a,b){if(Array.prototype.indexOf)return a.indexOf(b,Number(arguments[2])||0);var c=a.length>>>0,d=Number(arguments[2])||0;for(d=0>d?Math.ceil(d):Math.floor(d),0>d&&(d+=c);c>d;d++)if(d in a&&a[d]===b)return d;return-1}function i(a,b,c,d){var e,i=f(c,d),j={},k=[];for(var l in i)if(i[l].params&&(e=g(i[l].params),e.length))for(var m in e)h(k,e[m])>=0||(k.push(e[m]),j[e[m]]=a[e[m]]);return N({},j,b)}function j(a,b,c){if(!c){c=[];for(var d in a)c.push(d)}for(var e=0;e<c.length;e++){var f=c[e];if(a[f]!=b[f])return!1}return!0}function k(a,b){var c={};return M(a,function(a){c[a]=b[a]}),c}function l(a){var b={},c=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return M(c,function(c){c in a&&(b[c]=a[c])}),b}function m(a){var b={},c=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var d in a)-1==h(c,d)&&(b[d]=a[d]);return b}function n(a,b){var c=L(a),d=c?[]:{};return M(a,function(a,e){b(a,e)&&(d[c?d.length:e]=a)}),d}function o(a,b){var c=L(a)?[]:{};return M(a,function(a,d){c[d]=b(a,d)}),c}function p(a,b){var d=1,f=2,i={},j=[],k=i,l=N(a.when(i),{$$promises:i,$$values:i});this.study=function(i){function n(a,c){if(s[c]!==f){if(r.push(c),s[c]===d)throw r.splice(0,h(r,c)),new Error("Cyclic dependency: "+r.join(" -> "));if(s[c]=d,J(a))q.push(c,[function(){return b.get(a)}],j);else{var e=b.annotate(a);M(e,function(a){a!==c&&i.hasOwnProperty(a)&&n(i[a],a)}),q.push(c,a,e)}r.pop(),s[c]=f}}function o(a){return K(a)&&a.then&&a.$$promises}if(!K(i))throw new Error("'invocables' must be an object");var p=g(i||{}),q=[],r=[],s={};return M(i,n),i=r=s=null,function(d,f,g){function h(){--u||(v||e(t,f.$$values),r.$$values=t,r.$$promises=r.$$promises||!0,delete r.$$inheritedValues,n.resolve(t))}function i(a){r.$$failure=a,n.reject(a)}function j(c,e,f){function j(a){l.reject(a),i(a)}function k(){if(!H(r.$$failure))try{l.resolve(b.invoke(e,g,t)),l.promise.then(function(a){t[c]=a,h()},j)}catch(a){j(a)}}var l=a.defer(),m=0;M(f,function(a){s.hasOwnProperty(a)&&!d.hasOwnProperty(a)&&(m++,s[a].then(function(b){t[a]=b,--m||k()},j))}),m||k(),s[c]=l.promise}if(o(d)&&g===c&&(g=f,f=d,d=null),d){if(!K(d))throw new Error("'locals' must be an object")}else d=k;if(f){if(!o(f))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else f=l;var n=a.defer(),r=n.promise,s=r.$$promises={},t=N({},d),u=1+q.length/3,v=!1;if(H(f.$$failure))return i(f.$$failure),r;f.$$inheritedValues&&e(t,m(f.$$inheritedValues,p)),N(s,f.$$promises),f.$$values?(v=e(t,m(f.$$values,p)),r.$$inheritedValues=m(f.$$values,p),h()):(f.$$inheritedValues&&(r.$$inheritedValues=m(f.$$inheritedValues,p)),f.then(h,i));for(var w=0,x=q.length;x>w;w+=3)d.hasOwnProperty(q[w])?h():j(q[w],q[w+1],q[w+2]);return r}},this.resolve=function(a,b,c,d){return this.study(a)(b,c,d)}}function q(a,b,c){this.fromConfig=function(a,b,c){return H(a.template)?this.fromString(a.template,b):H(a.templateUrl)?this.fromUrl(a.templateUrl,b):H(a.templateProvider)?this.fromProvider(a.templateProvider,b,c):null},this.fromString=function(a,b){return I(a)?a(b):a},this.fromUrl=function(c,d){return I(c)&&(c=c(d)),null==c?null:a.get(c,{cache:b,headers:{Accept:"text/html"}}).then(function(a){return a.data})},this.fromProvider=function(a,b,d){return c.invoke(a,null,d||{params:b})}}function r(a,b,e){function f(b,c,d,e){if(q.push(b),o[b])return o[b];if(!/^\w+(-+\w+)*(?:\[\])?$/.test(b))throw new Error("Invalid parameter name '"+b+"' in pattern '"+a+"'");if(p[b])throw new Error("Duplicate parameter name '"+b+"' in pattern '"+a+"'");return p[b]=new P.Param(b,c,d,e),p[b]}function g(a,b,c,d){var e=["",""],f=a.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!b)return f;switch(c){case!1:e=["(",")"+(d?"?":"")];break;case!0:e=["?(",")?"];break;default:e=["("+c+"|",")?"]}return f+e[0]+b+e[1]}function h(e,f){var g,h,i,j,k;return g=e[2]||e[3],k=b.params[g],i=a.substring(m,e.index),h=f?e[4]:e[4]||("*"==e[1]?".*":null),j=P.type(h||"string")||d(P.type("string"),{pattern:new RegExp(h,b.caseInsensitive?"i":c)}),{id:g,regexp:h,segment:i,type:j,cfg:k}}b=N({params:{}},K(b)?b:{});var i,j=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,k=/([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,l="^",m=0,n=this.segments=[],o=e?e.params:{},p=this.params=e?e.params.$$new():new P.ParamSet,q=[];this.source=a;for(var r,s,t;(i=j.exec(a))&&(r=h(i,!1),!(r.segment.indexOf("?")>=0));)s=f(r.id,r.type,r.cfg,"path"),l+=g(r.segment,s.type.pattern.source,s.squash,s.isOptional),n.push(r.segment),m=j.lastIndex;t=a.substring(m);var u=t.indexOf("?");if(u>=0){var v=this.sourceSearch=t.substring(u);if(t=t.substring(0,u),this.sourcePath=a.substring(0,m+u),v.length>0)for(m=0;i=k.exec(v);)r=h(i,!0),s=f(r.id,r.type,r.cfg,"search"),m=j.lastIndex}else this.sourcePath=a,this.sourceSearch="";l+=g(t)+(b.strict===!1?"/?":"")+"$",n.push(t),this.regexp=new RegExp(l,b.caseInsensitive?"i":c),this.prefix=n[0],this.$$paramNames=q}function s(a){N(this,a)}function t(){function a(a){return null!=a?a.toString().replace(/\//g,"%2F"):a}function e(a){return null!=a?a.toString().replace(/%2F/g,"/"):a}function f(){return{strict:p,caseInsensitive:m}}function i(a){return I(a)||L(a)&&I(a[a.length-1])}function j(){for(;w.length;){var a=w.shift();if(a.pattern)throw new Error("You cannot override a type's .pattern at runtime.");b.extend(u[a.name],l.invoke(a.def))}}function k(a){N(this,a||{})}P=this;var l,m=!1,p=!0,q=!1,u={},v=!0,w=[],x={string:{encode:a,decode:e,is:function(a){return null==a||!H(a)||"string"==typeof a},pattern:/[^/]*/},"int":{encode:a,decode:function(a){return parseInt(a,10)},is:function(a){return H(a)&&this.decode(a.toString())===a},pattern:/\d+/},bool:{encode:function(a){return a?1:0},decode:function(a){return 0!==parseInt(a,10)},is:function(a){return a===!0||a===!1},pattern:/0|1/},date:{encode:function(a){return this.is(a)?[a.getFullYear(),("0"+(a.getMonth()+1)).slice(-2),("0"+a.getDate()).slice(-2)].join("-"):c},decode:function(a){if(this.is(a))return a;var b=this.capture.exec(a);return b?new Date(b[1],b[2]-1,b[3]):c},is:function(a){return a instanceof Date&&!isNaN(a.valueOf())},equals:function(a,b){return this.is(a)&&this.is(b)&&a.toISOString()===b.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:b.toJson,decode:b.fromJson,is:b.isObject,equals:b.equals,pattern:/[^/]*/},any:{encode:b.identity,decode:b.identity,equals:b.equals,pattern:/.*/}};t.$$getDefaultValue=function(a){if(!i(a.value))return a.value;if(!l)throw new Error("Injectable functions cannot be called at configuration time");return l.invoke(a.value)},this.caseInsensitive=function(a){return H(a)&&(m=a),m},this.strictMode=function(a){return H(a)&&(p=a),p},this.defaultSquashPolicy=function(a){if(!H(a))return q;if(a!==!0&&a!==!1&&!J(a))throw new Error("Invalid squash policy: "+a+". Valid policies: false, true, arbitrary-string");return q=a,a},this.compile=function(a,b){return new r(a,N(f(),b))},this.isMatcher=function(a){if(!K(a))return!1;var b=!0;return M(r.prototype,function(c,d){I(c)&&(b=b&&H(a[d])&&I(a[d]))}),b},this.type=function(a,b,c){if(!H(b))return u[a];if(u.hasOwnProperty(a))throw new Error("A type named '"+a+"' has already been defined.");return u[a]=new s(N({name:a},b)),c&&(w.push({name:a,def:c}),v||j()),this},M(x,function(a,b){u[b]=new s(N({name:b},a))}),u=d(u,{}),this.$get=["$injector",function(a){return l=a,v=!1,j(),M(x,function(a,b){u[b]||(u[b]=new s(a))}),this}],this.Param=function(a,b,d,e){function f(a){var b=K(a)?g(a):[],c=-1===h(b,"value")&&-1===h(b,"type")&&-1===h(b,"squash")&&-1===h(b,"array");return c&&(a={value:a}),a.$$fn=i(a.value)?a.value:function(){return a.value},a}function j(b,c,d){if(b.type&&c)throw new Error("Param '"+a+"' has two type configurations.");return c?c:b.type?b.type instanceof s?b.type:new s(b.type):"config"===d?u.any:u.string}function k(){var b={array:"search"===e?"auto":!1},c=a.match(/\[\]$/)?{array:!0}:{};return N(b,c,d).array}function m(a,b){var c=a.squash;if(!b||c===!1)return!1;if(!H(c)||null==c)return q;if(c===!0||J(c))return c;throw new Error("Invalid squash policy: '"+c+"'. Valid policies: false, true, or arbitrary string")}function p(a,b,d,e){var f,g,i=[{from:"",to:d||b?c:""},{from:null,to:d||b?c:""}];return f=L(a.replace)?a.replace:[],J(e)&&f.push({from:e,to:c}),g=o(f,function(a){return a.from}),n(i,function(a){return-1===h(g,a.from)}).concat(f)}function r(){if(!l)throw new Error("Injectable functions cannot be called at configuration time");var a=l.invoke(d.$$fn);if(null!==a&&a!==c&&!w.type.is(a))throw new Error("Default value ("+a+") for parameter '"+w.id+"' is not an instance of Type ("+w.type.name+")");return a}function t(a){function b(a){return function(b){return b.from===a}}function c(a){var c=o(n(w.replace,b(a)),function(a){return a.to});return c.length?c[0]:a}return a=c(a),H(a)?w.type.$normalize(a):r()}function v(){return"{Param:"+a+" "+b+" squash: '"+z+"' optional: "+y+"}"}var w=this;d=f(d),b=j(d,b,e);var x=k();b=x?b.$asArray(x,"search"===e):b,"string"!==b.name||x||"path"!==e||d.value!==c||(d.value="");var y=d.value!==c,z=m(d,y),A=p(d,x,y,z);N(this,{id:a,type:b,location:e,array:x,squash:z,replace:A,isOptional:y,value:t,dynamic:c,config:d,toString:v})},k.prototype={$$new:function(){return d(this,N(new k,{$$parent:this}))},$$keys:function(){for(var a=[],b=[],c=this,d=g(k.prototype);c;)b.push(c),c=c.$$parent;return b.reverse(),M(b,function(b){M(g(b),function(b){-1===h(a,b)&&-1===h(d,b)&&a.push(b)})}),a},$$values:function(a){var b={},c=this;return M(c.$$keys(),function(d){b[d]=c[d].value(a&&a[d])}),b},$$equals:function(a,b){var c=!0,d=this;return M(d.$$keys(),function(e){var f=a&&a[e],g=b&&b[e];d[e].type.equals(f,g)||(c=!1)}),c},$$validates:function(a){var d,e,f,g,h,i=this.$$keys();for(d=0;d<i.length&&(e=this[i[d]],f=a[i[d]],f!==c&&null!==f||!e.isOptional);d++){if(g=e.type.$normalize(f),!e.type.is(g))return!1;if(h=e.type.encode(g),b.isString(h)&&!e.type.pattern.exec(h))return!1}return!0},$$parent:c},this.ParamSet=k}function u(a,d){function e(a){var b=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(a.source);return null!=b?b[1].replace(/\\(.)/g,"$1"):""}function f(a,b){return a.replace(/\$(\$|\d{1,2})/,function(a,c){return b["$"===c?0:Number(c)]})}function g(a,b,c){if(!c)return!1;var d=a.invoke(b,b,{$match:c});return H(d)?d:!0}function h(d,e,f,g){function h(a,b,c){return"/"===p?a:b?p.slice(0,-1)+a:c?p.slice(1)+a:a}function m(a){function b(a){var b=a(f,d);return b?(J(b)&&d.replace().url(b),!0):!1}if(!a||!a.defaultPrevented){o&&d.url()===o;o=c;var e,g=j.length;for(e=0;g>e;e++)if(b(j[e]))return;k&&b(k)}}function n(){return i=i||e.$on("$locationChangeSuccess",m)}var o,p=g.baseHref(),q=d.url();return l||n(),{sync:function(){m()},listen:function(){return n()},update:function(a){return a?void(q=d.url()):void(d.url()!==q&&(d.url(q),d.replace()))},push:function(a,b,e){var f=a.format(b||{});null!==f&&b&&b["#"]&&(f+="#"+b["#"]),d.url(f),o=e&&e.$$avoidResync?d.url():c,e&&e.replace&&d.replace()},href:function(c,e,f){if(!c.validates(e))return null;var g=a.html5Mode();b.isObject(g)&&(g=g.enabled);var i=c.format(e);if(f=f||{},g||null===i||(i="#"+a.hashPrefix()+i),null!==i&&e&&e["#"]&&(i+="#"+e["#"]),i=h(i,g,f.absolute),!f.absolute||!i)return i;var j=!g&&i?"/":"",k=d.port();return k=80===k||443===k?"":":"+k,[d.protocol(),"://",d.host(),k,j,i].join("")}}}var i,j=[],k=null,l=!1;this.rule=function(a){if(!I(a))throw new Error("'rule' must be a function");return j.push(a),this},this.otherwise=function(a){if(J(a)){var b=a;a=function(){return b}}else if(!I(a))throw new Error("'rule' must be a function");return k=a,this},this.when=function(a,b){var c,h=J(b);if(J(a)&&(a=d.compile(a)),!h&&!I(b)&&!L(b))throw new Error("invalid 'handler' in when()");var i={matcher:function(a,b){return h&&(c=d.compile(b),b=["$match",function(a){return c.format(a)}]),N(function(c,d){return g(c,b,a.exec(d.path(),d.search()))},{prefix:J(a.prefix)?a.prefix:""})},regex:function(a,b){if(a.global||a.sticky)throw new Error("when() RegExp must not be global or sticky");return h&&(c=b,b=["$match",function(a){return f(c,a)}]),N(function(c,d){return g(c,b,a.exec(d.path()))},{prefix:e(a)})}},j={matcher:d.isMatcher(a),regex:a instanceof RegExp};for(var k in j)if(j[k])return this.rule(i[k](a,b));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(a){a===c&&(a=!0),l=a},this.$get=h,h.$inject=["$location","$rootScope","$injector","$browser"]}function v(a,e){function f(a){return 0===a.indexOf(".")||0===a.indexOf("^")}function m(a,b){if(!a)return c;var d=J(a),e=d?a:a.name,g=f(e);if(g){if(!b)throw new Error("No reference point given for path '"+e+"'");b=m(b);for(var h=e.split("."),i=0,j=h.length,k=b;j>i;i++)if(""!==h[i]||0!==i){if("^"!==h[i])break;if(!k.parent)throw new Error("Path '"+e+"' not valid for state '"+b.name+"'");k=k.parent}else k=b;h=h.slice(i).join("."),e=k.name+(k.name&&h?".":"")+h}var l=z[e];return!l||!d&&(d||l!==a&&l.self!==a)?c:l}function n(a,b){A[a]||(A[a]=[]),A[a].push(b)}function p(a){for(var b=A[a]||[];b.length;)q(b.shift())}function q(b){b=d(b,{self:b,resolve:b.resolve||{},toString:function(){return this.name}});var c=b.name;if(!J(c)||c.indexOf("@")>=0)throw new Error("State must have a valid name");if(z.hasOwnProperty(c))throw new Error("State '"+c+"'' is already defined");var e=-1!==c.indexOf(".")?c.substring(0,c.lastIndexOf(".")):J(b.parent)?b.parent:K(b.parent)&&J(b.parent.name)?b.parent.name:"";if(e&&!z[e])return n(e,b.self);for(var f in C)I(C[f])&&(b[f]=C[f](b,C.$delegates[f]));return z[c]=b,!b[B]&&b.url&&a.when(b.url,["$match","$stateParams",function(a,c){y.$current.navigable==b&&j(a,c)||y.transitionTo(b,a,{inherit:!0,location:!1})}]),p(c),b}function r(a){return a.indexOf("*")>-1}function s(a){for(var b=a.split("."),c=y.$current.name.split("."),d=0,e=b.length;e>d;d++)"*"===b[d]&&(c[d]="*");return"**"===b[0]&&(c=c.slice(h(c,b[1])),c.unshift("**")),"**"===b[b.length-1]&&(c.splice(h(c,b[b.length-2])+1,Number.MAX_VALUE),c.push("**")),b.length!=c.length?!1:c.join("")===b.join("")}function t(a,b){return J(a)&&!H(b)?C[a]:I(b)&&J(a)?(C[a]&&!C.$delegates[a]&&(C.$delegates[a]=C[a]),C[a]=b,this):this}function u(a,b){return K(a)?b=a:b.name=a,q(b),this}function v(a,e,f,h,l,n,p,q,t){function u(b,c,d,f){var g=a.$broadcast("$stateNotFound",b,c,d);if(g.defaultPrevented)return p.update(),D;if(!g.retry)return null;if(f.$retry)return p.update(),E;var h=y.transition=e.when(g.retry);return h.then(function(){return h!==y.transition?A:(b.options.$retry=!0,y.transitionTo(b.to,b.toParams,b.options))},function(){return D}),p.update(),h}function v(a,c,d,g,i,j){function m(){var c=[];return M(a.views,function(d,e){var g=d.resolve&&d.resolve!==a.resolve?d.resolve:{};g.$template=[function(){return f.load(e,{view:d,locals:i.globals,params:n,notify:j.notify})||""}],c.push(l.resolve(g,i.globals,i.resolve,a).then(function(c){if(I(d.controllerProvider)||L(d.controllerProvider)){var f=b.extend({},g,i.globals);c.$$controller=h.invoke(d.controllerProvider,null,f)}else c.$$controller=d.controller;c.$$state=a,c.$$controllerAs=d.controllerAs,i[e]=c}))}),e.all(c).then(function(){return i.globals})}var n=d?c:k(a.params.$$keys(),c),o={$stateParams:n};i.resolve=l.resolve(a.resolve,o,i.resolve,a);var p=[i.resolve.then(function(a){i.globals=a})];return g&&p.push(g),e.all(p).then(m).then(function(a){return i})}var A=e.reject(new Error("transition superseded")),C=e.reject(new Error("transition prevented")),D=e.reject(new Error("transition aborted")),E=e.reject(new Error("transition failed"));return x.locals={resolve:null,globals:{$stateParams:{}}},y={params:{},current:x.self,$current:x,transition:null},y.reload=function(a){return y.transitionTo(y.current,n,{reload:a||!0,inherit:!1,notify:!0})},y.go=function(a,b,c){return y.transitionTo(a,b,N({inherit:!0,relative:y.$current},c))},y.transitionTo=function(b,c,f){c=c||{},f=N({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},f||{});var g,j=y.$current,l=y.params,o=j.path,q=m(b,f.relative),r=c["#"];if(!H(q)){var s={to:b,toParams:c,options:f},t=u(s,j.self,l,f);if(t)return t;if(b=s.to,c=s.toParams,f=s.options,q=m(b,f.relative),!H(q)){if(!f.relative)throw new Error("No such state '"+b+"'");throw new Error("Could not resolve '"+b+"' from state '"+f.relative+"'")}}if(q[B])throw new Error("Cannot transition to abstract state '"+b+"'");if(f.inherit&&(c=i(n,c||{},y.$current,q)),!q.params.$$validates(c))return E;c=q.params.$$values(c),b=q;var z=b.path,D=0,F=z[D],G=x.locals,I=[];if(f.reload){if(J(f.reload)||K(f.reload)){if(K(f.reload)&&!f.reload.name)throw new Error("Invalid reload state object");var L=f.reload===!0?o[0]:m(f.reload);if(f.reload&&!L)throw new Error("No such reload state '"+(J(f.reload)?f.reload:f.reload.name)+"'");for(;F&&F===o[D]&&F!==L;)G=I[D]=F.locals,D++,F=z[D]}}else for(;F&&F===o[D]&&F.ownParams.$$equals(c,l);)G=I[D]=F.locals,D++,F=z[D];if(w(b,c,j,l,G,f))return r&&(c["#"]=r),y.params=c,O(y.params,n),f.location&&b.navigable&&b.navigable.url&&(p.push(b.navigable.url,c,{$$avoidResync:!0,replace:"replace"===f.location}),p.update(!0)),y.transition=null,e.when(y.current);if(c=k(b.params.$$keys(),c||{}),f.notify&&a.$broadcast("$stateChangeStart",b.self,c,j.self,l).defaultPrevented)return a.$broadcast("$stateChangeCancel",b.self,c,j.self,l),p.update(),C;for(var M=e.when(G),P=D;P<z.length;P++,F=z[P])G=I[P]=d(G),M=v(F,c,F===b,M,G,f);var Q=y.transition=M.then(function(){var d,e,g;if(y.transition!==Q)return A;for(d=o.length-1;d>=D;d--)g=o[d],g.self.onExit&&h.invoke(g.self.onExit,g.self,g.locals.globals),g.locals=null;for(d=D;d<z.length;d++)e=z[d],e.locals=I[d],e.self.onEnter&&h.invoke(e.self.onEnter,e.self,e.locals.globals);return r&&(c["#"]=r),y.transition!==Q?A:(y.$current=b,y.current=b.self,y.params=c,O(y.params,n),y.transition=null,f.location&&b.navigable&&p.push(b.navigable.url,b.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===f.location}),f.notify&&a.$broadcast("$stateChangeSuccess",b.self,c,j.self,l),p.update(!0),y.current)},function(d){return y.transition!==Q?A:(y.transition=null,g=a.$broadcast("$stateChangeError",b.self,c,j.self,l,d),g.defaultPrevented||p.update(),e.reject(d))});return Q},y.is=function(a,b,d){d=N({relative:y.$current},d||{});var e=m(a,d.relative);return H(e)?y.$current!==e?!1:b?j(e.params.$$values(b),n):!0:c},y.includes=function(a,b,d){if(d=N({relative:y.$current},d||{}),J(a)&&r(a)){if(!s(a))return!1;a=y.$current.name}var e=m(a,d.relative);return H(e)?H(y.$current.includes[e.name])?b?j(e.params.$$values(b),n,g(b)):!0:!1:c},y.href=function(a,b,d){d=N({lossy:!0,inherit:!0,absolute:!1,relative:y.$current},d||{});var e=m(a,d.relative);if(!H(e))return null;d.inherit&&(b=i(n,b||{},y.$current,e));var f=e&&d.lossy?e.navigable:e;return f&&f.url!==c&&null!==f.url?p.href(f.url,k(e.params.$$keys().concat("#"),b||{}),{absolute:d.absolute}):null},y.get=function(a,b){if(0===arguments.length)return o(g(z),function(a){return z[a].self});var c=m(a,b||y.$current);return c&&c.self?c.self:null},y}function w(a,b,c,d,e,f){function g(a,b,c){function d(b){return"search"!=a.params[b].location}var e=a.params.$$keys().filter(d),f=l.apply({},[a.params].concat(e)),g=new P.ParamSet(f);return g.$$equals(b,c)}return!f.reload&&a===c&&(e===c.locals||a.self.reloadOnSearch===!1&&g(c,d,b))?!0:void 0}var x,y,z={},A={},B="abstract",C={parent:function(a){if(H(a.parent)&&a.parent)return m(a.parent);var b=/^(.+)\.[^.]+$/.exec(a.name);return b?m(b[1]):x},data:function(a){return a.parent&&a.parent.data&&(a.data=a.self.data=N({},a.parent.data,a.data)),a.data},url:function(a){var b=a.url,c={params:a.params||{}};if(J(b))return"^"==b.charAt(0)?e.compile(b.substring(1),c):(a.parent.navigable||x).url.concat(b,c);if(!b||e.isMatcher(b))return b;throw new Error("Invalid url '"+b+"' in state '"+a+"'")},navigable:function(a){return a.url?a:a.parent?a.parent.navigable:null},ownParams:function(a){var b=a.url&&a.url.params||new P.ParamSet;return M(a.params||{},function(a,c){b[c]||(b[c]=new P.Param(c,null,a,"config"))}),b},params:function(a){return a.parent&&a.parent.params?N(a.parent.params.$$new(),a.ownParams):new P.ParamSet},views:function(a){var b={};return M(H(a.views)?a.views:{"":a},function(c,d){d.indexOf("@")<0&&(d+="@"+a.parent.name),b[d]=c}),b},path:function(a){return a.parent?a.parent.path.concat(a):[]},includes:function(a){var b=a.parent?N({},a.parent.includes):{};return b[a.name]=!0,b},$delegates:{}};x=q({name:"",url:"^",views:null,"abstract":!0}),x.navigable=null,this.decorator=t,this.state=u,this.$get=v,v.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function w(){function a(a,b){return{load:function(c,d){var e,f={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return d=N(f,d),d.view&&(e=b.fromConfig(d.view,d.params,d.locals)),e&&d.notify&&a.$broadcast("$viewContentLoading",d),e}}}this.$get=a,a.$inject=["$rootScope","$templateFactory"]}function x(){var a=!1;this.useAnchorScroll=function(){a=!0},this.$get=["$anchorScroll","$timeout",function(b,c){return a?b:function(a){return c(function(){a[0].scrollIntoView()},0,!1)}}]}function y(a,c,d,e){function f(){return c.has?function(a){return c.has(a)?c.get(a):null}:function(a){try{return c.get(a)}catch(b){return null}}}function g(a,b){var c=function(){return{enter:function(a,b,c){b.after(a),c()},leave:function(a,b){a.remove(),b()}}};if(j)return{enter:function(a,b,c){var d=j.enter(a,null,b,c);d&&d.then&&d.then(c)},leave:function(a,b){var c=j.leave(a,b);c&&c.then&&c.then(b)}};if(i){var d=i&&i(b,a);return{enter:function(a,b,c){d.enter(a,null,b),c()},leave:function(a,b){d.leave(a),b()}}}return c()}var h=f(),i=h("$animator"),j=h("$animate"),k={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(c,f,h){return function(c,f,i){function j(){l&&(l.remove(),l=null),n&&(n.$destroy(),n=null),m&&(r.leave(m,function(){l=null}),l=m,m=null)}function k(g){var k,l=A(c,i,f,e),s=l&&a.$current&&a.$current.locals[l];if(g||s!==o){k=c.$new(),o=a.$current.locals[l];var t=h(k,function(a){r.enter(a,f,function(){n&&n.$emit("$viewContentAnimationEnded"),(b.isDefined(q)&&!q||c.$eval(q))&&d(a)}),j()});m=t,n=k,n.$emit("$viewContentLoaded"),n.$eval(p)}}var l,m,n,o,p=i.onload||"",q=i.autoscroll,r=g(i,c);c.$on("$stateChangeSuccess",function(){k(!1)}),c.$on("$viewContentLoading",function(){k(!1)}),k(!0)}}};return k}function z(a,b,c,d){return{restrict:"ECA",priority:-400,compile:function(e){var f=e.html();return function(e,g,h){var i=c.$current,j=A(e,h,g,d),k=i&&i.locals[j];if(k){g.data("$uiView",{name:j,state:k.$$state}),g.html(k.$template?k.$template:f);var l=a(g.contents());if(k.$$controller){k.$scope=e,k.$element=g;var m=b(k.$$controller,k);k.$$controllerAs&&(e[k.$$controllerAs]=m),g.data("$ngControllerController",m),g.children().data("$ngControllerController",m)}l(e)}}}}}function A(a,b,c,d){var e=d(b.uiView||b.name||"")(a),f=c.inheritedData("$uiView");return e.indexOf("@")>=0?e:e+"@"+(f?f.state.name:"")}function B(a,b){var c,d=a.match(/^\s*({[^}]*})\s*$/);if(d&&(a=b+"("+d[1]+")"),c=a.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!c||4!==c.length)throw new Error("Invalid state ref '"+a+"'");return{state:c[1],paramExpr:c[3]||null}}function C(a){var b=a.parent().inheritedData("$uiView");return b&&b.state&&b.state.name?b.state:void 0}function D(a,c){var d=["location","inherit","reload","absolute"];return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(e,f,g,h){var i=B(g.uiSref,a.current.name),j=null,k=C(f)||a.$current,l="[object SVGAnimatedString]"===Object.prototype.toString.call(f.prop("href"))?"xlink:href":"href",m=null,n="A"===f.prop("tagName").toUpperCase(),o="FORM"===f[0].nodeName,p=o?"action":l,q=!0,r={relative:k,inherit:!0},s=e.$eval(g.uiSrefOpts)||{};b.forEach(d,function(a){a in s&&(r[a]=s[a])});var t=function(c){if(c&&(j=b.copy(c)),q){m=a.href(i.state,j,r);var d=h[1]||h[0];return d&&d.$$addStateInfo(i.state,j),null===m?(q=!1,!1):void g.$set(p,m)}};i.paramExpr&&(e.$watch(i.paramExpr,function(a,b){a!==j&&t(a)},!0),j=b.copy(e.$eval(i.paramExpr))),t(),o||f.bind("click",function(b){var d=b.which||b.button;if(!(d>1||b.ctrlKey||b.metaKey||b.shiftKey||f.attr("target"))){var e=c(function(){a.go(i.state,j,r)});b.preventDefault();var g=n&&!m?1:0;b.preventDefault=function(){g--<=0&&c.cancel(e)}}})}}}function E(a,b,c){return{restrict:"A",controller:["$scope","$element","$attrs",function(b,d,e){function f(){g()?d.addClass(i):d.removeClass(i)}function g(){for(var a=0;a<j.length;a++)if(h(j[a].state,j[a].params))return!0;return!1}function h(b,c){return"undefined"!=typeof e.uiSrefActiveEq?a.is(b.name,c):a.includes(b.name,c)}var i,j=[];i=c(e.uiSrefActiveEq||e.uiSrefActive||"",!1)(b),this.$$addStateInfo=function(b,c){var e=a.get(b,C(d));j.push({state:e||{name:b},params:c}),f()},b.$on("$stateChangeSuccess",f)}]}}function F(a){var b=function(b){return a.is(b)};return b.$stateful=!0,b}function G(a){var b=function(b){return a.includes(b)};return b.$stateful=!0,b}var H=b.isDefined,I=b.isFunction,J=b.isString,K=b.isObject,L=b.isArray,M=b.forEach,N=b.extend,O=b.copy;b.module("ui.router.util",["ng"]),b.module("ui.router.router",["ui.router.util"]),b.module("ui.router.state",["ui.router.router","ui.router.util"]),b.module("ui.router",["ui.router.state"]),b.module("ui.router.compat",["ui.router"]),p.$inject=["$q","$injector"],b.module("ui.router.util").service("$resolve",p),q.$inject=["$http","$templateCache","$injector"],b.module("ui.router.util").service("$templateFactory",q);var P;r.prototype.concat=function(a,b){var c={caseInsensitive:P.caseInsensitive(),strict:P.strictMode(),squash:P.defaultSquashPolicy()};return new r(this.sourcePath+a+this.sourceSearch,N(c,b),this)},r.prototype.toString=function(){return this.source},r.prototype.exec=function(a,b){function c(a){function b(a){return a.split("").reverse().join("")}function c(a){return a.replace(/\\-/g,"-")}var d=b(a).split(/-(?!\\)/),e=o(d,b);return o(e,c).reverse()}var d=this.regexp.exec(a);if(!d)return null;b=b||{};var e,f,g,h=this.parameters(),i=h.length,j=this.segments.length-1,k={};if(j!==d.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(e=0;j>e;e++){g=h[e];var l=this.params[g],m=d[e+1];for(f=0;f<l.replace;f++)l.replace[f].from===m&&(m=l.replace[f].to);m&&l.array===!0&&(m=c(m)),k[g]=l.value(m)}for(;i>e;e++)g=h[e],k[g]=this.params[g].value(b[g]);return k},r.prototype.parameters=function(a){return H(a)?this.params[a]||null:this.$$paramNames},r.prototype.validates=function(a){return this.params.$$validates(a)},r.prototype.format=function(a){function b(a){return encodeURIComponent(a).replace(/-/g,function(a){return"%5C%"+a.charCodeAt(0).toString(16).toUpperCase()})}a=a||{};var c=this.segments,d=this.parameters(),e=this.params;if(!this.validates(a))return null;var f,g=!1,h=c.length-1,i=d.length,j=c[0];for(f=0;i>f;f++){var k=h>f,l=d[f],m=e[l],n=m.value(a[l]),p=m.isOptional&&m.type.equals(m.value(),n),q=p?m.squash:!1,r=m.type.encode(n);if(k){var s=c[f+1];if(q===!1)null!=r&&(j+=L(r)?o(r,b).join("-"):encodeURIComponent(r)),j+=s;else if(q===!0){var t=j.match(/\/$/)?/\/?(.*)/:/(.*)/;j+=s.match(t)[1]}else J(q)&&(j+=q+s)}else{if(null==r||p&&q!==!1)continue;L(r)||(r=[r]),r=o(r,encodeURIComponent).join("&"+l+"="),j+=(g?"&":"?")+(l+"="+r),g=!0}}return j},s.prototype.is=function(a,b){return!0},s.prototype.encode=function(a,b){return a},s.prototype.decode=function(a,b){return a},s.prototype.equals=function(a,b){return a==b},s.prototype.$subPattern=function(){var a=this.pattern.toString();return a.substr(1,a.length-2)},s.prototype.pattern=/.*/,s.prototype.toString=function(){return"{Type:"+this.name+"}"},s.prototype.$normalize=function(a){return this.is(a)?a:this.decode(a)},s.prototype.$asArray=function(a,b){function d(a,b){function d(a,b){return function(){return a[b].apply(a,arguments)}}function e(a){return L(a)?a:H(a)?[a]:[]}function f(a){switch(a.length){case 0:return c;case 1:return"auto"===b?a[0]:a;default:return a}}function g(a){return!a}function h(a,b){return function(c){c=e(c);var d=o(c,a);return b===!0?0===n(d,g).length:f(d)}}function i(a){return function(b,c){var d=e(b),f=e(c);if(d.length!==f.length)return!1;for(var g=0;g<d.length;g++)if(!a(d[g],f[g]))return!1;return!0}}this.encode=h(d(a,"encode")),this.decode=h(d(a,"decode")),this.is=h(d(a,"is"),!0),this.equals=i(d(a,"equals")),this.pattern=a.pattern,this.$normalize=h(d(a,"$normalize")),this.name=a.name,this.$arrayMode=b}if(!a)return this;if("auto"===a&&!b)throw new Error("'auto' array mode is for query parameters only");return new d(this,a)},b.module("ui.router.util").provider("$urlMatcherFactory",t),b.module("ui.router.util").run(["$urlMatcherFactory",function(a){}]),u.$inject=["$locationProvider","$urlMatcherFactoryProvider"],b.module("ui.router.router").provider("$urlRouter",u),v.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],b.module("ui.router.state").value("$stateParams",{}).provider("$state",v),w.$inject=[],b.module("ui.router.state").provider("$view",w),b.module("ui.router.state").provider("$uiViewScroll",x),y.$inject=["$state","$injector","$uiViewScroll","$interpolate"],z.$inject=["$compile","$controller","$state","$interpolate"],b.module("ui.router.state").directive("uiView",y),b.module("ui.router.state").directive("uiView",z),D.$inject=["$state","$timeout"],E.$inject=["$state","$stateParams","$interpolate"],b.module("ui.router.state").directive("uiSref",D).directive("uiSrefActive",E).directive("uiSrefActiveEq",E),F.$inject=["$state"],G.$inject=["$state"],b.module("ui.router.state").filter("isState",F).filter("includedByState",G)}(window,window.angular);
/*
 * angular-ui-bootstrap
 * http://angular-ui.github.io/bootstrap/

 * Version: 0.14.3 - 2015-10-23
 * License: MIT
 */
angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.stackedMap","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-popup.html","template/tooltip/tooltip-popup.html","template/tooltip/tooltip-template-popup.html","template/popover/popover-html.html","template/popover/popover-template.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.collapse",[]).directive("uibCollapse",["$animate","$injector",function(a,b){var c=b.has("$animateCss")?b.get("$animateCss"):null;return{link:function(b,d,e){function f(){d.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),c?c(d,{addClass:"in",easing:"ease",to:{height:d[0].scrollHeight+"px"}}).start()["finally"](g):a.addClass(d,"in",{to:{height:d[0].scrollHeight+"px"}}).then(g)}function g(){d.removeClass("collapsing").addClass("collapse").css({height:"auto"})}function h(){return d.hasClass("collapse")||d.hasClass("in")?(d.css({height:d[0].scrollHeight+"px"}).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),void(c?c(d,{removeClass:"in",to:{height:"0"}}).start()["finally"](i):a.removeClass(d,"in",{to:{height:"0"}}).then(i))):i()}function i(){d.css({height:"0"}),d.removeClass("collapsing").addClass("collapse")}b.$watch(e.uibCollapse,function(a){a?h():f()})}}}]),angular.module("ui.bootstrap.collapse").value("$collapseSuppressWarning",!1).directive("collapse",["$animate","$injector","$log","$collapseSuppressWarning",function(a,b,c,d){var e=b.has("$animateCss")?b.get("$animateCss"):null;return{link:function(b,f,g){function h(){f.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),e?e(f,{easing:"ease",to:{height:f[0].scrollHeight+"px"}}).start().done(i):a.animate(f,{},{height:f[0].scrollHeight+"px"}).then(i)}function i(){f.removeClass("collapsing").addClass("collapse in").css({height:"auto"})}function j(){return f.hasClass("collapse")||f.hasClass("in")?(f.css({height:f[0].scrollHeight+"px"}).removeClass("collapse in").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),void(e?e(f,{to:{height:"0"}}).start().done(k):a.animate(f,{},{height:"0"}).then(k))):k()}function k(){f.css({height:"0"}),f.removeClass("collapsing").addClass("collapse")}d||c.warn("collapse is now deprecated. Use uib-collapse instead."),b.$watch(g.collapse,function(a){a?j():h()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("uibAccordionConfig",{closeOthers:!0}).controller("UibAccordionController",["$scope","$attrs","uibAccordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(c){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(b,1)}}]).directive("uibAccordion",function(){return{controller:"UibAccordionController",controllerAs:"accordion",transclude:!0,templateUrl:function(a,b){return b.templateUrl||"template/accordion/accordion.html"}}}).directive("uibAccordionGroup",function(){return{require:"^uibAccordion",transclude:!0,replace:!0,templateUrl:function(a,b){return b.templateUrl||"template/accordion/accordion-group.html"},scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(a,b,c,d){d.addGroup(a),a.openClass=c.openClass||"panel-open",a.panelClass=c.panelClass,a.$watch("isOpen",function(c){b.toggleClass(a.openClass,!!c),c&&d.closeOthers(a)}),a.toggleOpen=function(b){a.isDisabled||b&&32!==b.which||(a.isOpen=!a.isOpen)}}}}).directive("uibAccordionHeading",function(){return{transclude:!0,template:"",replace:!0,require:"^uibAccordionGroup",link:function(a,b,c,d,e){d.setHeading(e(a,angular.noop))}}}).directive("uibAccordionTransclude",function(){return{require:["?^uibAccordionGroup","?^accordionGroup"],link:function(a,b,c,d){d=d[0]?d[0]:d[1],a.$watch(function(){return d[c.uibAccordionTransclude]},function(a){a&&(b.find("span").html(""),b.find("span").append(a))})}}}),angular.module("ui.bootstrap.accordion").value("$accordionSuppressWarning",!1).controller("AccordionController",["$scope","$attrs","$controller","$log","$accordionSuppressWarning",function(a,b,c,d,e){e||d.warn("AccordionController is now deprecated. Use UibAccordionController instead."),angular.extend(this,c("UibAccordionController",{$scope:a,$attrs:b}))}]).directive("accordion",["$log","$accordionSuppressWarning",function(a,b){return{restrict:"EA",controller:"AccordionController",controllerAs:"accordion",transclude:!0,replace:!1,templateUrl:function(a,b){return b.templateUrl||"template/accordion/accordion.html"},link:function(){b||a.warn("accordion is now deprecated. Use uib-accordion instead.")}}}]).directive("accordionGroup",["$log","$accordionSuppressWarning",function(a,b){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:function(a,b){return b.templateUrl||"template/accordion/accordion-group.html"},scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(c,d,e,f){b||a.warn("accordion-group is now deprecated. Use uib-accordion-group instead."),f.addGroup(c),c.openClass=e.openClass||"panel-open",c.panelClass=e.panelClass,c.$watch("isOpen",function(a){d.toggleClass(c.openClass,!!a),a&&f.closeOthers(c)}),c.toggleOpen=function(a){c.isDisabled||a&&32!==a.which||(c.isOpen=!c.isOpen)}}}}]).directive("accordionHeading",["$log","$accordionSuppressWarning",function(a,b){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(c,d,e,f,g){b||a.warn("accordion-heading is now deprecated. Use uib-accordion-heading instead."),f.setHeading(g(c,angular.noop))}}}]).directive("accordionTransclude",["$log","$accordionSuppressWarning",function(a,b){return{require:"^accordionGroup",link:function(c,d,e,f){b||a.warn("accordion-transclude is now deprecated. Use uib-accordion-transclude instead."),c.$watch(function(){return f[e.accordionTransclude]},function(a){a&&(d.find("span").html(""),d.find("span").append(a))})}}}]),angular.module("ui.bootstrap.alert",[]).controller("UibAlertController",["$scope","$attrs","$interpolate","$timeout",function(a,b,c,d){a.closeable=!!b.close;var e=angular.isDefined(b.dismissOnTimeout)?c(b.dismissOnTimeout)(a.$parent):null;e&&d(function(){a.close()},parseInt(e,10))}]).directive("uibAlert",function(){return{controller:"UibAlertController",controllerAs:"alert",templateUrl:function(a,b){return b.templateUrl||"template/alert/alert.html"},transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}),angular.module("ui.bootstrap.alert").value("$alertSuppressWarning",!1).controller("AlertController",["$scope","$attrs","$controller","$log","$alertSuppressWarning",function(a,b,c,d,e){e||d.warn("AlertController is now deprecated. Use UibAlertController instead."),angular.extend(this,c("UibAlertController",{$scope:a,$attrs:b}))}]).directive("alert",["$log","$alertSuppressWarning",function(a,b){return{controller:"AlertController",controllerAs:"alert",templateUrl:function(a,b){return b.templateUrl||"template/alert/alert.html"},transclude:!0,replace:!0,scope:{type:"@",close:"&"},link:function(){b||a.warn("alert is now deprecated. Use uib-alert instead.")}}}]),angular.module("ui.bootstrap.buttons",[]).constant("uibButtonConfig",{activeClass:"active",toggleEvent:"click"}).controller("UibButtonsController",["uibButtonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("uibBtnRadio",function(){return{require:["uibBtnRadio","ngModel"],controller:"UibButtonsController",controllerAs:"buttons",link:function(a,b,c,d){var e=d[0],f=d[1];b.find("input").css({display:"none"}),f.$render=function(){b.toggleClass(e.activeClass,angular.equals(f.$modelValue,a.$eval(c.uibBtnRadio)))},b.on(e.toggleEvent,function(){if(!c.disabled){var d=b.hasClass(e.activeClass);(!d||angular.isDefined(c.uncheckable))&&a.$apply(function(){f.$setViewValue(d?null:a.$eval(c.uibBtnRadio)),f.$render()})}})}}}).directive("uibBtnCheckbox",function(){return{require:["uibBtnCheckbox","ngModel"],controller:"UibButtonsController",controllerAs:"button",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){return angular.isDefined(b)?a.$eval(b):c}var h=d[0],i=d[1];b.find("input").css({display:"none"}),i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.on(h.toggleEvent,function(){c.disabled||a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module("ui.bootstrap.buttons").value("$buttonsSuppressWarning",!1).controller("ButtonsController",["$controller","$log","$buttonsSuppressWarning",function(a,b,c){c||b.warn("ButtonsController is now deprecated. Use UibButtonsController instead."),angular.extend(this,a("UibButtonsController"))}]).directive("btnRadio",["$log","$buttonsSuppressWarning",function(a,b){return{require:["btnRadio","ngModel"],controller:"ButtonsController",controllerAs:"buttons",link:function(c,d,e,f){b||a.warn("btn-radio is now deprecated. Use uib-btn-radio instead.");var g=f[0],h=f[1];d.find("input").css({display:"none"}),h.$render=function(){d.toggleClass(g.activeClass,angular.equals(h.$modelValue,c.$eval(e.btnRadio)))},d.bind(g.toggleEvent,function(){if(!e.disabled){var a=d.hasClass(g.activeClass);(!a||angular.isDefined(e.uncheckable))&&c.$apply(function(){h.$setViewValue(a?null:c.$eval(e.btnRadio)),h.$render()})}})}}}]).directive("btnCheckbox",["$document","$log","$buttonsSuppressWarning",function(a,b,c){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",controllerAs:"button",link:function(d,e,f,g){function h(){return j(f.btnCheckboxTrue,!0)}function i(){return j(f.btnCheckboxFalse,!1)}function j(a,b){var c=d.$eval(a);return angular.isDefined(c)?c:b}c||b.warn("btn-checkbox is now deprecated. Use uib-btn-checkbox instead.");var k=g[0],l=g[1];e.find("input").css({display:"none"}),l.$render=function(){e.toggleClass(k.activeClass,angular.equals(l.$modelValue,h()))},e.bind(k.toggleEvent,function(){f.disabled||d.$apply(function(){l.$setViewValue(e.hasClass(k.activeClass)?i():h()),l.$render()})}),e.on("keypress",function(b){f.disabled||32!==b.which||a[0].activeElement!==e[0]||d.$apply(function(){l.$setViewValue(e.hasClass(k.activeClass)?i():h()),l.$render()})})}}}]),angular.module("ui.bootstrap.carousel",[]).controller("UibCarouselController",["$scope","$element","$interval","$animate",function(a,b,c,d){function e(b,c,e){s||(angular.extend(b,{direction:e,active:!0}),angular.extend(m.currentSlide||{},{direction:e,active:!1}),d.enabled()&&!a.noTransition&&!a.$currentTransition&&b.$element&&m.slides.length>1&&(b.$element.data(q,b.direction),m.currentSlide&&m.currentSlide.$element&&m.currentSlide.$element.data(q,b.direction),a.$currentTransition=!0,o?d.on("addClass",b.$element,function(b,c){"close"===c&&(a.$currentTransition=null,d.off("addClass",b))}):b.$element.one("$animate:close",function(){a.$currentTransition=null})),m.currentSlide=b,r=c,g())}function f(a){if(angular.isUndefined(n[a].index))return n[a];var b;n.length;for(b=0;b<n.length;++b)if(n[b].index==a)return n[b]}function g(){h();var b=+a.interval;!isNaN(b)&&b>0&&(k=c(i,b))}function h(){k&&(c.cancel(k),k=null)}function i(){var b=+a.interval;l&&!isNaN(b)&&b>0&&n.length?a.next():a.pause()}function j(b){b.length||(a.$currentTransition=null)}var k,l,m=this,n=m.slides=a.slides=[],o=angular.version.minor>=4,p="uib-noTransition",q="uib-slideDirection",r=-1;m.currentSlide=null;var s=!1;m.select=a.select=function(b,c){var d=a.indexOfSlide(b);void 0===c&&(c=d>m.getCurrentIndex()?"next":"prev"),b&&b!==m.currentSlide&&!a.$currentTransition&&e(b,d,c)},a.$on("$destroy",function(){s=!0}),m.getCurrentIndex=function(){return m.currentSlide&&angular.isDefined(m.currentSlide.index)?+m.currentSlide.index:r},a.indexOfSlide=function(a){return angular.isDefined(a.index)?+a.index:n.indexOf(a)},a.next=function(){var b=(m.getCurrentIndex()+1)%n.length;return 0===b&&a.noWrap()?void a.pause():m.select(f(b),"next")},a.prev=function(){var b=m.getCurrentIndex()-1<0?n.length-1:m.getCurrentIndex()-1;return a.noWrap()&&b===n.length-1?void a.pause():m.select(f(b),"prev")},a.isActive=function(a){return m.currentSlide===a},a.$watch("interval",g),a.$watchCollection("slides",j),a.$on("$destroy",h),a.play=function(){l||(l=!0,g())},a.pause=function(){a.noPause||(l=!1,h())},m.addSlide=function(b,c){b.$element=c,n.push(b),1===n.length||b.active?(m.select(n[n.length-1]),1===n.length&&a.play()):b.active=!1},m.removeSlide=function(a){angular.isDefined(a.index)&&n.sort(function(a,b){return+a.index>+b.index});var b=n.indexOf(a);n.splice(b,1),n.length>0&&a.active?b>=n.length?m.select(n[b-1]):m.select(n[b]):r>b&&r--,0===n.length&&(m.currentSlide=null)},a.$watch("noTransition",function(a){b.data(p,a)})}]).directive("uibCarousel",[function(){return{transclude:!0,replace:!0,controller:"UibCarouselController",controllerAs:"carousel",require:"carousel",templateUrl:function(a,b){return b.templateUrl||"template/carousel/carousel.html"},scope:{interval:"=",noTransition:"=",noPause:"=",noWrap:"&"}}}]).directive("uibSlide",function(){return{require:"^uibCarousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:function(a,b){return b.templateUrl||"template/carousel/slide.html"},scope:{active:"=?",actual:"=?",index:"=?"},link:function(a,b,c,d){d.addSlide(a,b),a.$on("$destroy",function(){d.removeSlide(a)}),a.$watch("active",function(b){b&&d.select(a)})}}}).animation(".item",["$injector","$animate",function(a,b){function c(a,b,c){a.removeClass(b),c&&c()}var d="uib-noTransition",e="uib-slideDirection",f=null;return a.has("$animateCss")&&(f=a.get("$animateCss")),{beforeAddClass:function(a,g,h){if("active"==g&&a.parent()&&a.parent().parent()&&!a.parent().parent().data(d)){var i=!1,j=a.data(e),k="next"==j?"left":"right",l=c.bind(this,a,k+" "+j,h);return a.addClass(j),f?f(a,{addClass:k}).start().done(l):b.addClass(a,k).then(function(){i||l(),h()}),function(){i=!0}}h()},beforeRemoveClass:function(a,g,h){if("active"===g&&a.parent()&&a.parent().parent()&&!a.parent().parent().data(d)){var i=!1,j=a.data(e),k="next"==j?"left":"right",l=c.bind(this,a,k,h);return f?f(a,{addClass:k}).start().done(l):b.addClass(a,k).then(function(){i||l(),h()}),function(){i=!0}}h()}}}]),angular.module("ui.bootstrap.carousel").value("$carouselSuppressWarning",!1).controller("CarouselController",["$scope","$element","$controller","$log","$carouselSuppressWarning",function(a,b,c,d,e){e||d.warn("CarouselController is now deprecated. Use UibCarouselController instead."),angular.extend(this,c("UibCarouselController",{$scope:a,$element:b}))}]).directive("carousel",["$log","$carouselSuppressWarning",function(a,b){return{transclude:!0,replace:!0,controller:"CarouselController",controllerAs:"carousel",require:"carousel",templateUrl:function(a,b){return b.templateUrl||"template/carousel/carousel.html"},scope:{interval:"=",noTransition:"=",noPause:"=",noWrap:"&"},link:function(){b||a.warn("carousel is now deprecated. Use uib-carousel instead.")}}}]).directive("slide",["$log","$carouselSuppressWarning",function(a,b){return{require:"^carousel",transclude:!0,replace:!0,templateUrl:function(a,b){return b.templateUrl||"template/carousel/slide.html"},scope:{active:"=?",actual:"=?",index:"=?"},link:function(c,d,e,f){b||a.warn("slide is now deprecated. Use uib-slide instead."),f.addSlide(c,d),c.$on("$destroy",function(){f.removeSlide(c)}),c.$watch("active",function(a){a&&f.select(c)})}}}]),angular.module("ui.bootstrap.dateparser",[]).service("uibDateParser",["$log","$locale","orderByFilter",function(a,b,c){function d(a){var b=[],d=a.split("");return angular.forEach(g,function(c,e){var f=a.indexOf(e);if(f>-1){a=a.split(""),d[f]="("+c.regex+")",a[f]="$";for(var g=f+1,h=f+e.length;h>g;g++)d[g]="",a[g]="$";a=a.join(""),b.push({index:f,apply:c.apply})}}),{regex:new RegExp("^"+d.join("")+"$"),map:c(b,"index")}}function e(a,b,c){return 1>c?!1:1===b&&c>28?29===c&&(a%4===0&&a%100!==0||a%400===0):3===b||5===b||8===b||10===b?31>c:!0}var f,g,h=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;this.init=function(){f=b.id,this.parsers={},g={yyyy:{regex:"\\d{4}",apply:function(a){this.year=+a}},yy:{regex:"\\d{2}",apply:function(a){this.year=+a+2e3}},y:{regex:"\\d{1,4}",apply:function(a){this.year=+a}},MMMM:{regex:b.DATETIME_FORMATS.MONTH.join("|"),apply:function(a){this.month=b.DATETIME_FORMATS.MONTH.indexOf(a)}},MMM:{regex:b.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(a){this.month=b.DATETIME_FORMATS.SHORTMONTH.indexOf(a)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(a){this.month=a-1}},M:{regex:"[1-9]|1[0-2]",apply:function(a){this.month=a-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},EEEE:{regex:b.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:b.DATETIME_FORMATS.SHORTDAY.join("|")},HH:{regex:"(?:0|1)[0-9]|2[0-3]",apply:function(a){this.hours=+a}},hh:{regex:"0[0-9]|1[0-2]",apply:function(a){this.hours=+a}},H:{regex:"1?[0-9]|2[0-3]",apply:function(a){this.hours=+a}},h:{regex:"[0-9]|1[0-2]",apply:function(a){this.hours=+a}},mm:{regex:"[0-5][0-9]",apply:function(a){this.minutes=+a}},m:{regex:"[0-9]|[1-5][0-9]",apply:function(a){this.minutes=+a}},sss:{regex:"[0-9][0-9][0-9]",apply:function(a){this.milliseconds=+a}},ss:{regex:"[0-5][0-9]",apply:function(a){this.seconds=+a}},s:{regex:"[0-9]|[1-5][0-9]",apply:function(a){this.seconds=+a}},a:{regex:b.DATETIME_FORMATS.AMPMS.join("|"),apply:function(a){12===this.hours&&(this.hours=0),"PM"===a&&(this.hours+=12)}}}},this.init(),this.parse=function(c,g,i){if(!angular.isString(c)||!g)return c;g=b.DATETIME_FORMATS[g]||g,g=g.replace(h,"\\$&"),b.id!==f&&this.init(),this.parsers[g]||(this.parsers[g]=d(g));var j=this.parsers[g],k=j.regex,l=j.map,m=c.match(k);if(m&&m.length){var n,o;angular.isDate(i)&&!isNaN(i.getTime())?n={year:i.getFullYear(),month:i.getMonth(),date:i.getDate(),hours:i.getHours(),minutes:i.getMinutes(),seconds:i.getSeconds(),milliseconds:i.getMilliseconds()}:(i&&a.warn("dateparser:","baseDate is not a valid date"),n={year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0});for(var p=1,q=m.length;q>p;p++){var r=l[p-1];r.apply&&r.apply.call(n,m[p])}return e(n.year,n.month,n.date)&&(angular.isDate(i)&&!isNaN(i.getTime())?(o=new Date(i),o.setFullYear(n.year,n.month,n.date,n.hours,n.minutes,n.seconds,n.milliseconds||0)):o=new Date(n.year,n.month,n.date,n.hours,n.minutes,n.seconds,n.milliseconds||0)),o}}}]),angular.module("ui.bootstrap.dateparser").value("$dateParserSuppressWarning",!1).service("dateParser",["$log","$dateParserSuppressWarning","uibDateParser",function(a,b,c){b||a.warn("dateParser is now deprecated. Use uibDateParser instead."),angular.extend(this,c)}]),angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},f=e(b[0]);f!=a[0]&&(d=this.offset(angular.element(f)),d.top+=f.clientTop-f.scrollTop,d.left+=f.clientLeft-f.scrollLeft);var g=b[0].getBoundingClientRect();return{width:g.width||b.prop("offsetWidth"),height:g.height||b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:d.width||c.prop("offsetWidth"),height:d.height||c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].documentElement.scrollLeft)}},positionElements:function(a,b,c,d){var e,f,g,h,i=c.split("-"),j=i[0],k=i[1]||"center";e=d?this.offset(a):this.position(a),f=b.prop("offsetWidth"),g=b.prop("offsetHeight");var l={center:function(){return e.left+e.width/2-f/2},left:function(){return e.left},right:function(){return e.left+e.width}},m={center:function(){return e.top+e.height/2-g/2},top:function(){return e.top},bottom:function(){return e.top+e.height}};switch(j){case"right":h={top:m[k](),left:l[j]()};break;case"left":h={top:m[k](),left:e.left-f};break;case"bottom":h={top:m[j](),left:l[k]()};break;default:h={top:e.top-g,left:l[k]()}}return h}}}]),angular.module("ui.bootstrap.position").value("$positionSuppressWarning",!1).service("$position",["$log","$positionSuppressWarning","$uibPosition",function(a,b,c){b||a.warn("$position is now deprecated. Use $uibPosition instead."),angular.extend(this,c)}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).value("$datepickerSuppressError",!1).constant("uibDatepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null,shortcutPropagation:!1}).controller("UibDatepickerController",["$scope","$attrs","$parse","$interpolate","$log","dateFilter","uibDatepickerConfig","$datepickerSuppressError",function(a,b,c,d,e,f,g,h){var i=this,j={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","showWeeks","startingDay","yearRange","shortcutPropagation"],function(c,e){i[c]=angular.isDefined(b[c])?6>e?d(b[c])(a.$parent):a.$parent.$eval(b[c]):g[c]}),angular.forEach(["minDate","maxDate"],function(d){b[d]?a.$parent.$watch(c(b[d]),function(a){i[d]=a?new Date(a):null,i.refreshView()}):i[d]=g[d]?new Date(g[d]):null}),angular.forEach(["minMode","maxMode"],function(d){b[d]?a.$parent.$watch(c(b[d]),function(c){i[d]=angular.isDefined(c)?c:b[d],a[d]=i[d],("minMode"==d&&i.modes.indexOf(a.datepickerMode)<i.modes.indexOf(i[d])||"maxMode"==d&&i.modes.indexOf(a.datepickerMode)>i.modes.indexOf(i[d]))&&(a.datepickerMode=i[d])}):(i[d]=g[d]||null,a[d]=i[d])}),a.datepickerMode=a.datepickerMode||g.datepickerMode,a.uniqueId="datepicker-"+a.$id+"-"+Math.floor(1e4*Math.random()),angular.isDefined(b.initDate)?(this.activeDate=a.$parent.$eval(b.initDate)||new Date,a.$parent.$watch(b.initDate,function(a){a&&(j.$isEmpty(j.$modelValue)||j.$invalid)&&(i.activeDate=a,i.refreshView())})):this.activeDate=new Date,a.isActive=function(b){return 0===i.compare(b.date,i.activeDate)?(a.activeDateId=b.uid,!0):!1},this.init=function(a){j=a,j.$render=function(){i.render()}},this.render=function(){if(j.$viewValue){var a=new Date(j.$viewValue),b=!isNaN(a);b?this.activeDate=a:h||e.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var a=j.$viewValue?new Date(j.$viewValue):null;j.$setValidity("dateDisabled",!a||this.element&&!this.isDisabled(a))}},this.createDateObject=function(a,b){var c=j.$viewValue?new Date(j.$viewValue):null;return{date:a,label:f(a,b),selected:c&&0===this.compare(a,c),disabled:this.isDisabled(a),current:0===this.compare(a,new Date),customClass:this.customClass(a)}},this.isDisabled=function(c){return this.minDate&&this.compare(c,this.minDate)<0||this.maxDate&&this.compare(c,this.maxDate)>0||b.dateDisabled&&a.dateDisabled({date:c,mode:a.datepickerMode})},this.customClass=function(b){return a.customClass({date:b,mode:a.datepickerMode})},this.split=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},a.select=function(b){if(a.datepickerMode===i.minMode){var c=j.$viewValue?new Date(j.$viewValue):new Date(0,0,0,0,0,0,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),j.$setViewValue(c),j.$render()}else i.activeDate=b,a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)-1]},a.move=function(a){var b=i.activeDate.getFullYear()+a*(i.step.years||0),c=i.activeDate.getMonth()+a*(i.step.months||0);i.activeDate.setFullYear(b,c,1),i.refreshView()},a.toggleMode=function(b){b=b||1,a.datepickerMode===i.maxMode&&1===b||a.datepickerMode===i.minMode&&-1===b||(a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)+b])},a.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var k=function(){i.element[0].focus()};a.$on("uib:datepicker.focus",k),a.keydown=function(b){var c=a.keys[b.which];if(c&&!b.shiftKey&&!b.altKey)if(b.preventDefault(),i.shortcutPropagation||b.stopPropagation(),"enter"===c||"space"===c){if(i.isDisabled(i.activeDate))return;a.select(i.activeDate)}else!b.ctrlKey||"up"!==c&&"down"!==c?(i.handleKeyDown(c,b),i.refreshView()):a.toggleMode("up"===c?1:-1)}}]).controller("UibDaypickerController",["$scope","$element","dateFilter",function(a,b,c){function d(a,b){return 1!==b||a%4!==0||a%100===0&&a%400!==0?f[b]:29}function e(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}var f=[31,28,31,30,31,30,31,31,30,31,30,31];this.step={months:1},this.element=b,this.init=function(b){angular.extend(b,this),a.showWeeks=b.showWeeks,b.refreshView()},this.getDates=function(a,b){for(var c,d=new Array(b),e=new Date(a),f=0;b>f;)c=new Date(e),d[f++]=c,e.setDate(e.getDate()+1);return d},this._refreshView=function(){var b=this.activeDate.getFullYear(),d=this.activeDate.getMonth(),f=new Date(this.activeDate);f.setFullYear(b,d,1);var g=this.startingDay-f.getDay(),h=g>0?7-g:-g,i=new Date(f);h>0&&i.setDate(-h+1);for(var j=this.getDates(i,42),k=0;42>k;k++)j[k]=angular.extend(this.createDateObject(j[k],this.formatDay),{secondary:j[k].getMonth()!==d,uid:a.uniqueId+"-"+k});a.labels=new Array(7);for(var l=0;7>l;l++)a.labels[l]={abbr:c(j[l].date,this.formatDayHeader),full:c(j[l].date,"EEEE")};if(a.title=c(this.activeDate,this.formatDayTitle),a.rows=this.split(j,7),a.showWeeks){a.weekNumbers=[];for(var m=(11-this.startingDay)%7,n=a.rows.length,o=0;n>o;o++)a.weekNumbers.push(e(a.rows[o][m].date))}},this.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},this.handleKeyDown=function(a,b){var c=this.activeDate.getDate();if("left"===a)c-=1;else if("up"===a)c-=7;else if("right"===a)c+=1;else if("down"===a)c+=7;else if("pageup"===a||"pagedown"===a){var e=this.activeDate.getMonth()+("pageup"===a?-1:1);this.activeDate.setMonth(e,1),c=Math.min(d(this.activeDate.getFullYear(),this.activeDate.getMonth()),c)}else"home"===a?c=1:"end"===a&&(c=d(this.activeDate.getFullYear(),this.activeDate.getMonth()));this.activeDate.setDate(c)}}]).controller("UibMonthpickerController",["$scope","$element","dateFilter",function(a,b,c){this.step={years:1},this.element=b,this.init=function(a){angular.extend(a,this),a.refreshView()},this._refreshView=function(){for(var b,d=new Array(12),e=this.activeDate.getFullYear(),f=0;12>f;f++)b=new Date(this.activeDate),b.setFullYear(e,f,1),d[f]=angular.extend(this.createDateObject(b,this.formatMonth),{uid:a.uniqueId+"-"+f});a.title=c(this.activeDate,this.formatMonthTitle),a.rows=this.split(d,3)},this.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth())-new Date(b.getFullYear(),b.getMonth())},this.handleKeyDown=function(a,b){var c=this.activeDate.getMonth();if("left"===a)c-=1;else if("up"===a)c-=3;else if("right"===a)c+=1;else if("down"===a)c+=3;else if("pageup"===a||"pagedown"===a){var d=this.activeDate.getFullYear()+("pageup"===a?-1:1);this.activeDate.setFullYear(d)}else"home"===a?c=0:"end"===a&&(c=11);this.activeDate.setMonth(c)}}]).controller("UibYearpickerController",["$scope","$element","dateFilter",function(a,b,c){function d(a){return parseInt((a-1)/e,10)*e+1}var e;this.element=b,this.yearpickerInit=function(){e=this.yearRange,this.step={years:e}},this._refreshView=function(){for(var b,c=new Array(e),f=0,g=d(this.activeDate.getFullYear());e>f;f++)b=new Date(this.activeDate),b.setFullYear(g+f,0,1),c[f]=angular.extend(this.createDateObject(b,this.formatYear),{uid:a.uniqueId+"-"+f});a.title=[c[0].label,c[e-1].label].join(" - "),a.rows=this.split(c,5)},this.compare=function(a,b){return a.getFullYear()-b.getFullYear()},this.handleKeyDown=function(a,b){var c=this.activeDate.getFullYear();"left"===a?c-=1:"up"===a?c-=5:"right"===a?c+=1:"down"===a?c+=5:"pageup"===a||"pagedown"===a?c+=("pageup"===a?-1:1)*this.step.years:"home"===a?c=d(this.activeDate.getFullYear()):"end"===a&&(c=d(this.activeDate.getFullYear())+e-1),this.activeDate.setFullYear(c)}}]).directive("uibDatepicker",function(){return{replace:!0,templateUrl:function(a,b){return b.templateUrl||"template/datepicker/datepicker.html"},scope:{datepickerMode:"=?",dateDisabled:"&",customClass:"&",shortcutPropagation:"&?"},require:["uibDatepicker","^ngModel"],controller:"UibDatepickerController",controllerAs:"datepicker",link:function(a,b,c,d){var e=d[0],f=d[1];e.init(f)}}}).directive("uibDaypicker",function(){return{replace:!0,templateUrl:function(a,b){return b.templateUrl||"template/datepicker/day.html"},require:["^?uibDatepicker","uibDaypicker","^?datepicker"],controller:"UibDaypickerController",link:function(a,b,c,d){var e=d[0]||d[2],f=d[1];f.init(e)}}}).directive("uibMonthpicker",function(){return{replace:!0,templateUrl:function(a,b){return b.templateUrl||"template/datepicker/month.html"},require:["^?uibDatepicker","uibMonthpicker","^?datepicker"],controller:"UibMonthpickerController",link:function(a,b,c,d){var e=d[0]||d[2],f=d[1];f.init(e)}}}).directive("uibYearpicker",function(){return{replace:!0,templateUrl:function(a,b){return b.templateUrl||"template/datepicker/year.html"},require:["^?uibDatepicker","uibYearpicker","^?datepicker"],controller:"UibYearpickerController",link:function(a,b,c,d){var e=d[0]||d[2];angular.extend(e,d[1]),e.yearpickerInit(),e.refreshView()}}}).constant("uibDatepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"template/datepicker/popup.html",datepickerTemplateUrl:"template/datepicker/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0,onOpenFocus:!0}).controller("UibDatepickerPopupController",["$scope","$element","$attrs","$compile","$parse","$document","$rootScope","$uibPosition","dateFilter","uibDateParser","uibDatepickerPopupConfig","$timeout",function(a,b,c,d,e,f,g,h,i,j,k,l){
function m(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function n(b){if(angular.isNumber(b)&&(b=new Date(b)),b){if(angular.isDate(b)&&!isNaN(b))return b;if(angular.isString(b)){var c=j.parse(b,r,a.date);return isNaN(c)?void 0:c}return void 0}return null}function o(a,b){var d=a||b;if(!c.ngRequired&&!d)return!0;if(angular.isNumber(d)&&(d=new Date(d)),d){if(angular.isDate(d)&&!isNaN(d))return!0;if(angular.isString(d)){var e=j.parse(d,r);return!isNaN(e)}return!1}return!0}function p(c){var d=A[0],e=b[0].contains(c.target),f=void 0!==d.contains&&d.contains(c.target);!a.isOpen||e||f||a.$apply(function(){a.isOpen=!1})}function q(c){27===c.which&&a.isOpen?(c.preventDefault(),c.stopPropagation(),a.$apply(function(){a.isOpen=!1}),b[0].focus()):40!==c.which||a.isOpen||(c.preventDefault(),c.stopPropagation(),a.$apply(function(){a.isOpen=!0}))}var r,s,t,u,v,w,x,y,z,A,B={},C=!1;a.watchData={},this.init=function(h){if(z=h,s=angular.isDefined(c.closeOnDateSelection)?a.$parent.$eval(c.closeOnDateSelection):k.closeOnDateSelection,t=angular.isDefined(c.datepickerAppendToBody)?a.$parent.$eval(c.datepickerAppendToBody):k.appendToBody,u=angular.isDefined(c.onOpenFocus)?a.$parent.$eval(c.onOpenFocus):k.onOpenFocus,v=angular.isDefined(c.datepickerPopupTemplateUrl)?c.datepickerPopupTemplateUrl:k.datepickerPopupTemplateUrl,w=angular.isDefined(c.datepickerTemplateUrl)?c.datepickerTemplateUrl:k.datepickerTemplateUrl,a.showButtonBar=angular.isDefined(c.showButtonBar)?a.$parent.$eval(c.showButtonBar):k.showButtonBar,k.html5Types[c.type]?(r=k.html5Types[c.type],C=!0):(r=c.datepickerPopup||c.uibDatepickerPopup||k.datepickerPopup,c.$observe("uibDatepickerPopup",function(a,b){var c=a||k.datepickerPopup;if(c!==r&&(r=c,z.$modelValue=null,!r))throw new Error("uibDatepickerPopup must have a date format specified.")})),!r)throw new Error("uibDatepickerPopup must have a date format specified.");if(C&&c.datepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");if(x=angular.element("<div uib-datepicker-popup-wrap><div uib-datepicker></div></div>"),x.attr({"ng-model":"date","ng-change":"dateSelection(date)","template-url":v}),y=angular.element(x.children()[0]),y.attr("template-url",w),C&&"month"===c.type&&(y.attr("datepicker-mode",'"month"'),y.attr("min-mode","month")),c.datepickerOptions){var l=a.$parent.$eval(c.datepickerOptions);l&&l.initDate&&(a.initDate=l.initDate,y.attr("init-date","initDate"),delete l.initDate),angular.forEach(l,function(a,b){y.attr(m(b),a)})}angular.forEach(["minMode","maxMode","minDate","maxDate","datepickerMode","initDate","shortcutPropagation"],function(b){if(c[b]){var d=e(c[b]);if(a.$parent.$watch(d,function(c){a.watchData[b]=c,("minDate"===b||"maxDate"===b)&&(B[b]=new Date(c))}),y.attr(m(b),"watchData."+b),"datepickerMode"===b){var f=d.assign;a.$watch("watchData."+b,function(b,c){angular.isFunction(f)&&b!==c&&f(a.$parent,b)})}}}),c.dateDisabled&&y.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),c.showWeeks&&y.attr("show-weeks",c.showWeeks),c.customClass&&y.attr("custom-class","customClass({ date: date, mode: mode })"),C?z.$formatters.push(function(b){return a.date=b,b}):(z.$$parserName="date",z.$validators.date=o,z.$parsers.unshift(n),z.$formatters.push(function(b){return a.date=b,z.$isEmpty(b)?b:i(b,r)})),z.$viewChangeListeners.push(function(){a.date=j.parse(z.$viewValue,r,a.date)}),b.bind("keydown",q),A=d(x)(a),x.remove(),t?f.find("body").append(A):b.after(A),a.$on("$destroy",function(){a.isOpen===!0&&(g.$$phase||a.$apply(function(){a.isOpen=!1})),A.remove(),b.unbind("keydown",q),f.unbind("click",p)})},a.getText=function(b){return a[b+"Text"]||k[b+"Text"]},a.isDisabled=function(b){return"today"===b&&(b=new Date),a.watchData.minDate&&a.compare(b,B.minDate)<0||a.watchData.maxDate&&a.compare(b,B.maxDate)>0},a.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},a.dateSelection=function(c){angular.isDefined(c)&&(a.date=c);var d=a.date?i(a.date,r):null;b.val(d),z.$setViewValue(d),s&&(a.isOpen=!1,b[0].focus())},a.keydown=function(c){27===c.which&&(a.isOpen=!1,b[0].focus())},a.select=function(b){if("today"===b){var c=new Date;angular.isDate(a.date)?(b=new Date(a.date),b.setFullYear(c.getFullYear(),c.getMonth(),c.getDate())):b=new Date(c.setHours(0,0,0,0))}a.dateSelection(b)},a.close=function(){a.isOpen=!1,b[0].focus()},a.$watch("isOpen",function(c){c?(a.position=t?h.offset(b):h.position(b),a.position.top=a.position.top+b.prop("offsetHeight"),l(function(){u&&a.$broadcast("uib:datepicker.focus"),f.bind("click",p)},0,!1)):f.unbind("click",p)})}]).directive("uibDatepickerPopup",function(){return{require:["ngModel","uibDatepickerPopup"],controller:"UibDatepickerPopupController",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&",customClass:"&"},link:function(a,b,c,d){var e=d[0],f=d[1];f.init(e)}}}).directive("uibDatepickerPopupWrap",function(){return{replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||"template/datepicker/popup.html"}}}),angular.module("ui.bootstrap.datepicker").value("$datepickerSuppressWarning",!1).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$log","dateFilter","uibDatepickerConfig","$datepickerSuppressError","$datepickerSuppressWarning",function(a,b,c,d,e,f,g,h,i){i||e.warn("DatepickerController is now deprecated. Use UibDatepickerController instead.");var j=this,k={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","showWeeks","startingDay","yearRange","shortcutPropagation"],function(c,e){j[c]=angular.isDefined(b[c])?6>e?d(b[c])(a.$parent):a.$parent.$eval(b[c]):g[c]}),angular.forEach(["minDate","maxDate"],function(d){b[d]?a.$parent.$watch(c(b[d]),function(a){j[d]=a?new Date(a):null,j.refreshView()}):j[d]=g[d]?new Date(g[d]):null}),angular.forEach(["minMode","maxMode"],function(d){b[d]?a.$parent.$watch(c(b[d]),function(c){j[d]=angular.isDefined(c)?c:b[d],a[d]=j[d],("minMode"==d&&j.modes.indexOf(a.datepickerMode)<j.modes.indexOf(j[d])||"maxMode"==d&&j.modes.indexOf(a.datepickerMode)>j.modes.indexOf(j[d]))&&(a.datepickerMode=j[d])}):(j[d]=g[d]||null,a[d]=j[d])}),a.datepickerMode=a.datepickerMode||g.datepickerMode,a.uniqueId="datepicker-"+a.$id+"-"+Math.floor(1e4*Math.random()),angular.isDefined(b.initDate)?(this.activeDate=a.$parent.$eval(b.initDate)||new Date,a.$parent.$watch(b.initDate,function(a){a&&(k.$isEmpty(k.$modelValue)||k.$invalid)&&(j.activeDate=a,j.refreshView())})):this.activeDate=new Date,a.isActive=function(b){return 0===j.compare(b.date,j.activeDate)?(a.activeDateId=b.uid,!0):!1},this.init=function(a){k=a,k.$render=function(){j.render()}},this.render=function(){if(k.$viewValue){var a=new Date(k.$viewValue),b=!isNaN(a);b?this.activeDate=a:h||e.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var a=k.$viewValue?new Date(k.$viewValue):null;k.$setValidity("dateDisabled",!a||this.element&&!this.isDisabled(a))}},this.createDateObject=function(a,b){var c=k.$viewValue?new Date(k.$viewValue):null;return{date:a,label:f(a,b),selected:c&&0===this.compare(a,c),disabled:this.isDisabled(a),current:0===this.compare(a,new Date),customClass:this.customClass(a)}},this.isDisabled=function(c){return this.minDate&&this.compare(c,this.minDate)<0||this.maxDate&&this.compare(c,this.maxDate)>0||b.dateDisabled&&a.dateDisabled({date:c,mode:a.datepickerMode})},this.customClass=function(b){return a.customClass({date:b,mode:a.datepickerMode})},this.split=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},this.fixTimeZone=function(a){var b=a.getHours();a.setHours(23===b?b+2:0)},a.select=function(b){if(a.datepickerMode===j.minMode){var c=k.$viewValue?new Date(k.$viewValue):new Date(0,0,0,0,0,0,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),k.$setViewValue(c),k.$render()}else j.activeDate=b,a.datepickerMode=j.modes[j.modes.indexOf(a.datepickerMode)-1]},a.move=function(a){var b=j.activeDate.getFullYear()+a*(j.step.years||0),c=j.activeDate.getMonth()+a*(j.step.months||0);j.activeDate.setFullYear(b,c,1),j.refreshView()},a.toggleMode=function(b){b=b||1,a.datepickerMode===j.maxMode&&1===b||a.datepickerMode===j.minMode&&-1===b||(a.datepickerMode=j.modes[j.modes.indexOf(a.datepickerMode)+b])},a.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var l=function(){j.element[0].focus()};a.$on("uib:datepicker.focus",l),a.keydown=function(b){var c=a.keys[b.which];if(c&&!b.shiftKey&&!b.altKey)if(b.preventDefault(),j.shortcutPropagation||b.stopPropagation(),"enter"===c||"space"===c){if(j.isDisabled(j.activeDate))return;a.select(j.activeDate)}else!b.ctrlKey||"up"!==c&&"down"!==c?(j.handleKeyDown(c,b),j.refreshView()):a.toggleMode("up"===c?1:-1)}}]).directive("datepicker",["$log","$datepickerSuppressWarning",function(a,b){return{replace:!0,templateUrl:function(a,b){return b.templateUrl||"template/datepicker/datepicker.html"},scope:{datepickerMode:"=?",dateDisabled:"&",customClass:"&",shortcutPropagation:"&?"},require:["datepicker","^ngModel"],controller:"DatepickerController",controllerAs:"datepicker",link:function(c,d,e,f){b||a.warn("datepicker is now deprecated. Use uib-datepicker instead.");var g=f[0],h=f[1];g.init(h)}}}]).directive("daypicker",["$log","$datepickerSuppressWarning",function(a,b){return{replace:!0,templateUrl:"template/datepicker/day.html",require:["^datepicker","daypicker"],controller:"UibDaypickerController",link:function(c,d,e,f){b||a.warn("daypicker is now deprecated. Use uib-daypicker instead.");var g=f[0],h=f[1];h.init(g)}}}]).directive("monthpicker",["$log","$datepickerSuppressWarning",function(a,b){return{replace:!0,templateUrl:"template/datepicker/month.html",require:["^datepicker","monthpicker"],controller:"UibMonthpickerController",link:function(c,d,e,f){b||a.warn("monthpicker is now deprecated. Use uib-monthpicker instead.");var g=f[0],h=f[1];h.init(g)}}}]).directive("yearpicker",["$log","$datepickerSuppressWarning",function(a,b){return{replace:!0,templateUrl:"template/datepicker/year.html",require:["^datepicker","yearpicker"],controller:"UibYearpickerController",link:function(c,d,e,f){b||a.warn("yearpicker is now deprecated. Use uib-yearpicker instead.");var g=f[0];angular.extend(g,f[1]),g.yearpickerInit(),g.refreshView()}}}]).directive("datepickerPopup",["$log","$datepickerSuppressWarning",function(a,b){return{require:["ngModel","datepickerPopup"],controller:"UibDatepickerPopupController",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&",customClass:"&"},link:function(c,d,e,f){b||a.warn("datepicker-popup is now deprecated. Use uib-datepicker-popup instead.");var g=f[0],h=f[1];h.init(g)}}}]).directive("datepickerPopupWrap",["$log","$datepickerSuppressWarning",function(a,b){return{replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||"template/datepicker/popup.html"},link:function(){b||a.warn("datepicker-popup-wrap is now deprecated. Use uib-datepicker-popup-wrap instead.")}}}]),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.position"]).constant("uibDropdownConfig",{openClass:"open"}).service("uibDropdownService",["$document","$rootScope",function(a,b){var c=null;this.open=function(b){c||(a.bind("click",d),a.bind("keydown",e)),c&&c!==b&&(c.isOpen=!1),c=b},this.close=function(b){c===b&&(c=null,a.unbind("click",d),a.unbind("keydown",e))};var d=function(a){if(c&&(!a||"disabled"!==c.getAutoClose())){var d=c.getToggleElement();if(!(a&&d&&d[0].contains(a.target))){var e=c.getDropdownElement();a&&"outsideClick"===c.getAutoClose()&&e&&e[0].contains(a.target)||(c.isOpen=!1,b.$$phase||c.$apply())}}},e=function(a){27===a.which?(c.focusToggleElement(),d()):c.isKeynavEnabled()&&/(38|40)/.test(a.which)&&c.isOpen&&(a.preventDefault(),a.stopPropagation(),c.focusDropdownEntry(a.which))}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function(a,b,c,d,e,f,g,h,i,j,k){var l,m,n=this,o=a.$new(),p=e.openClass,q=angular.noop,r=c.onToggle?d(c.onToggle):angular.noop,s=!1,t=!1;b.addClass("dropdown"),this.init=function(){c.isOpen&&(m=d(c.isOpen),q=m.assign,a.$watch(m,function(a){o.isOpen=!!a})),s=angular.isDefined(c.dropdownAppendToBody),t=angular.isDefined(c.uibKeyboardNav),s&&n.dropdownMenu&&(i.find("body").append(n.dropdownMenu),b.on("$destroy",function(){n.dropdownMenu.remove()}))},this.toggle=function(a){return o.isOpen=arguments.length?!!a:!o.isOpen},this.isOpen=function(){return o.isOpen},o.getToggleElement=function(){return n.toggleElement},o.getAutoClose=function(){return c.autoClose||"always"},o.getElement=function(){return b},o.isKeynavEnabled=function(){return t},o.focusDropdownEntry=function(a){var c=n.dropdownMenu?angular.element(n.dropdownMenu).find("a"):angular.element(b).find("ul").eq(0).find("a");switch(a){case 40:angular.isNumber(n.selectedOption)?n.selectedOption=n.selectedOption===c.length-1?n.selectedOption:n.selectedOption+1:n.selectedOption=0;break;case 38:angular.isNumber(n.selectedOption)?n.selectedOption=0===n.selectedOption?0:n.selectedOption-1:n.selectedOption=c.length-1}c[n.selectedOption].focus()},o.getDropdownElement=function(){return n.dropdownMenu},o.focusToggleElement=function(){n.toggleElement&&n.toggleElement[0].focus()},o.$watch("isOpen",function(c,d){if(s&&n.dropdownMenu){var e=h.positionElements(b,n.dropdownMenu,"bottom-left",!0),i={top:e.top+"px",display:c?"block":"none"},m=n.dropdownMenu.hasClass("dropdown-menu-right");m?(i.left="auto",i.right=window.innerWidth-(e.left+b.prop("offsetWidth"))+"px"):(i.left=e.left+"px",i.right="auto"),n.dropdownMenu.css(i)}if(g[c?"addClass":"removeClass"](b,p).then(function(){angular.isDefined(c)&&c!==d&&r(a,{open:!!c})}),c)n.dropdownMenuTemplateUrl&&k(n.dropdownMenuTemplateUrl).then(function(a){l=o.$new(),j(a.trim())(l,function(a){var b=a;n.dropdownMenu.replaceWith(b),n.dropdownMenu=b})}),o.focusToggleElement(),f.open(o);else{if(n.dropdownMenuTemplateUrl){l&&l.$destroy();var t=angular.element('<ul class="dropdown-menu"></ul>');n.dropdownMenu.replaceWith(t),n.dropdownMenu=t}f.close(o),n.selectedOption=null}angular.isFunction(q)&&q(a,c)}),a.$on("$locationChangeSuccess",function(){"disabled"!==o.getAutoClose()&&(o.isOpen=!1)});var u=a.$on("$destroy",function(){o.$destroy()});o.$on("$destroy",u)}]).directive("uibDropdown",function(){return{controller:"UibDropdownController",link:function(a,b,c,d){d.init()}}}).directive("uibDropdownMenu",function(){return{restrict:"AC",require:"?^uibDropdown",link:function(a,b,c,d){if(d&&!angular.isDefined(c.dropdownNested)){b.addClass("dropdown-menu");var e=c.templateUrl;e&&(d.dropdownMenuTemplateUrl=e),d.dropdownMenu||(d.dropdownMenu=b)}}}}).directive("uibKeyboardNav",function(){return{restrict:"A",require:"?^uibDropdown",link:function(a,b,c,d){b.bind("keydown",function(a){if(-1!==[38,40].indexOf(a.which)){a.preventDefault(),a.stopPropagation();var b=d.dropdownMenu.find("a");switch(a.which){case 40:angular.isNumber(d.selectedOption)?d.selectedOption=d.selectedOption===b.length-1?d.selectedOption:d.selectedOption+1:d.selectedOption=0;break;case 38:angular.isNumber(d.selectedOption)?d.selectedOption=0===d.selectedOption?0:d.selectedOption-1:d.selectedOption=b.length-1}b[d.selectedOption].focus()}})}}}).directive("uibDropdownToggle",function(){return{require:"?^uibDropdown",link:function(a,b,c,d){if(d){b.addClass("dropdown-toggle"),d.toggleElement=b;var e=function(e){e.preventDefault(),b.hasClass("disabled")||c.disabled||a.$apply(function(){d.toggle()})};b.bind("click",e),b.attr({"aria-haspopup":!0,"aria-expanded":!1}),a.$watch(d.isOpen,function(a){b.attr("aria-expanded",!!a)}),a.$on("$destroy",function(){b.unbind("click",e)})}}}}),angular.module("ui.bootstrap.dropdown").value("$dropdownSuppressWarning",!1).service("dropdownService",["$log","$dropdownSuppressWarning","uibDropdownService",function(a,b,c){b||a.warn("dropdownService is now deprecated. Use uibDropdownService instead."),angular.extend(this,c)}]).controller("DropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest","$log","$dropdownSuppressWarning",function(a,b,c,d,e,f,g,h,i,j,k,l,m){m||l.warn("DropdownController is now deprecated. Use UibDropdownController instead.");var n,o,p=this,q=a.$new(),r=e.openClass,s=angular.noop,t=c.onToggle?d(c.onToggle):angular.noop,u=!1,v=!1;b.addClass("dropdown"),this.init=function(){c.isOpen&&(o=d(c.isOpen),s=o.assign,a.$watch(o,function(a){q.isOpen=!!a})),u=angular.isDefined(c.dropdownAppendToBody),v=angular.isDefined(c.uibKeyboardNav),u&&p.dropdownMenu&&(i.find("body").append(p.dropdownMenu),b.on("$destroy",function(){p.dropdownMenu.remove()}))},this.toggle=function(a){return q.isOpen=arguments.length?!!a:!q.isOpen},this.isOpen=function(){return q.isOpen},q.getToggleElement=function(){return p.toggleElement},q.getAutoClose=function(){return c.autoClose||"always"},q.getElement=function(){return b},q.isKeynavEnabled=function(){return v},q.focusDropdownEntry=function(a){var c=p.dropdownMenu?angular.element(p.dropdownMenu).find("a"):angular.element(b).find("ul").eq(0).find("a");switch(a){case 40:angular.isNumber(p.selectedOption)?p.selectedOption=p.selectedOption===c.length-1?p.selectedOption:p.selectedOption+1:p.selectedOption=0;break;case 38:angular.isNumber(p.selectedOption)?p.selectedOption=0===p.selectedOption?0:p.selectedOption-1:p.selectedOption=c.length-1}c[p.selectedOption].focus()},q.getDropdownElement=function(){return p.dropdownMenu},q.focusToggleElement=function(){p.toggleElement&&p.toggleElement[0].focus()},q.$watch("isOpen",function(c,d){if(u&&p.dropdownMenu){var e=h.positionElements(b,p.dropdownMenu,"bottom-left",!0),i={top:e.top+"px",display:c?"block":"none"},l=p.dropdownMenu.hasClass("dropdown-menu-right");l?(i.left="auto",i.right=window.innerWidth-(e.left+b.prop("offsetWidth"))+"px"):(i.left=e.left+"px",i.right="auto"),p.dropdownMenu.css(i)}if(g[c?"addClass":"removeClass"](b,r).then(function(){angular.isDefined(c)&&c!==d&&t(a,{open:!!c})}),c)p.dropdownMenuTemplateUrl&&k(p.dropdownMenuTemplateUrl).then(function(a){n=q.$new(),j(a.trim())(n,function(a){var b=a;p.dropdownMenu.replaceWith(b),p.dropdownMenu=b})}),q.focusToggleElement(),f.open(q);else{if(p.dropdownMenuTemplateUrl){n&&n.$destroy();var m=angular.element('<ul class="dropdown-menu"></ul>');p.dropdownMenu.replaceWith(m),p.dropdownMenu=m}f.close(q),p.selectedOption=null}angular.isFunction(s)&&s(a,c)}),a.$on("$locationChangeSuccess",function(){"disabled"!==q.getAutoClose()&&(q.isOpen=!1)});var w=a.$on("$destroy",function(){q.$destroy()});q.$on("$destroy",w)}]).directive("dropdown",["$log","$dropdownSuppressWarning",function(a,b){return{controller:"DropdownController",link:function(c,d,e,f){b||a.warn("dropdown is now deprecated. Use uib-dropdown instead."),f.init()}}}]).directive("dropdownMenu",["$log","$dropdownSuppressWarning",function(a,b){return{restrict:"AC",require:"?^dropdown",link:function(c,d,e,f){if(f&&!angular.isDefined(e.dropdownNested)){b||a.warn("dropdown-menu is now deprecated. Use uib-dropdown-menu instead."),d.addClass("dropdown-menu");var g=e.templateUrl;g&&(f.dropdownMenuTemplateUrl=g),f.dropdownMenu||(f.dropdownMenu=d)}}}}]).directive("keyboardNav",["$log","$dropdownSuppressWarning",function(a,b){return{restrict:"A",require:"?^dropdown",link:function(c,d,e,f){b||a.warn("keyboard-nav is now deprecated. Use uib-keyboard-nav instead."),d.bind("keydown",function(a){if(-1!==[38,40].indexOf(a.which)){a.preventDefault(),a.stopPropagation();var b=f.dropdownMenu.find("a");switch(a.which){case 40:angular.isNumber(f.selectedOption)?f.selectedOption=f.selectedOption===b.length-1?f.selectedOption:f.selectedOption+1:f.selectedOption=0;break;case 38:angular.isNumber(f.selectedOption)?f.selectedOption=0===f.selectedOption?0:f.selectedOption-1:f.selectedOption=b.length-1}b[f.selectedOption].focus()}})}}}]).directive("dropdownToggle",["$log","$dropdownSuppressWarning",function(a,b){return{require:"?^dropdown",link:function(c,d,e,f){if(b||a.warn("dropdown-toggle is now deprecated. Use uib-dropdown-toggle instead."),f){d.addClass("dropdown-toggle"),f.toggleElement=d;var g=function(a){a.preventDefault(),d.hasClass("disabled")||e.disabled||c.$apply(function(){f.toggle()})};d.bind("click",g),d.attr({"aria-haspopup":!0,"aria-expanded":!1}),c.$watch(f.isOpen,function(a){d.attr("aria-expanded",!!a)}),c.$on("$destroy",function(){d.unbind("click",g)})}}}}]),angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b==a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b==a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.stackedMap"]).factory("$$multiMap",function(){return{createNew:function(){var a={};return{entries:function(){return Object.keys(a).map(function(b){return{key:b,value:a[b]}})},get:function(b){return a[b]},hasKey:function(b){return!!a[b]},keys:function(){return Object.keys(a)},put:function(b,c){a[b]||(a[b]=[]),a[b].push(c)},remove:function(b,c){var d=a[b];if(d){var e=d.indexOf(c);-1!==e&&d.splice(e,1),d.length||delete a[b]}}}}}}).directive("uibModalBackdrop",["$animate","$injector","$uibModalStack",function(a,b,c){function d(b,d,f){d.addClass("modal-backdrop"),f.modalInClass&&(e?e(d,{addClass:f.modalInClass}).start():a.addClass(d,f.modalInClass),b.$on(c.NOW_CLOSING_EVENT,function(b,c){var g=c();e?e(d,{removeClass:f.modalInClass}).start().then(g):a.removeClass(d,f.modalInClass).then(g)}))}var e=null;return b.has("$animateCss")&&(e=b.get("$animateCss")),{replace:!0,templateUrl:"template/modal/backdrop.html",compile:function(a,b){return a.addClass(b.backdropClass),d}}}]).directive("uibModalWindow",["$uibModalStack","$q","$animate","$injector",function(a,b,c,d){var e=null;return d.has("$animateCss")&&(e=d.get("$animateCss")),{scope:{index:"@"},replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||"template/modal/window.html"},link:function(d,f,g){f.addClass(g.windowClass||""),f.addClass(g.windowTopClass||""),d.size=g.size,d.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!==c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))},f.on("click",d.close),d.$isRendered=!0;var h=b.defer();g.$observe("modalRender",function(a){"true"==a&&h.resolve()}),h.promise.then(function(){var h=null;g.modalInClass&&(h=e?e(f,{addClass:g.modalInClass}).start():c.addClass(f,g.modalInClass),d.$on(a.NOW_CLOSING_EVENT,function(a,b){var d=b();e?e(f,{removeClass:g.modalInClass}).start().then(d):c.removeClass(f,g.modalInClass).then(d)})),b.when(h).then(function(){var a=f[0].querySelector("[autofocus]");a?a.focus():f[0].focus()});var i=a.getTop();i&&a.modalRendered(i.key)})}}}]).directive("uibModalAnimationClass",function(){return{compile:function(a,b){b.modalAnimation&&a.addClass(b.uibModalAnimationClass)}}}).directive("uibModalTransclude",function(){return{link:function(a,b,c,d,e){e(a.$parent,function(a){b.empty(),b.append(a)})}}}).factory("$uibModalStack",["$animate","$timeout","$document","$compile","$rootScope","$q","$injector","$$multiMap","$$stackedMap",function(a,b,c,d,e,f,g,h,i){function j(){for(var a=-1,b=u.keys(),c=0;c<b.length;c++)u.get(b[c]).value.backdrop&&(a=c);return a}function k(a,b){var d=c.find("body").eq(0),e=u.get(a).value;u.remove(a),n(e.modalDomEl,e.modalScope,function(){var b=e.openedClass||t;v.remove(b,a),d.toggleClass(b,v.hasKey(b)),l(!0)}),m(),b&&b.focus?b.focus():d.focus()}function l(a){var b;u.length()>0&&(b=u.top().value,b.modalDomEl.toggleClass(b.windowTopClass||"",a))}function m(){if(q&&-1==j()){var a=r;n(q,r,function(){a=null}),q=void 0,r=void 0}}function n(b,c,d){function e(){e.done||(e.done=!0,p?p(b,{event:"leave"}).start().then(function(){b.remove()}):a.leave(b),c.$destroy(),d&&d())}var g,h=null,i=function(){return g||(g=f.defer(),h=g.promise),function(){g.resolve()}};return c.$broadcast(w.NOW_CLOSING_EVENT,i),f.when(h).then(e)}function o(a,b,c){return!a.value.modalScope.$broadcast("modal.closing",b,c).defaultPrevented}var p=null;g.has("$animateCss")&&(p=g.get("$animateCss"));var q,r,s,t="modal-open",u=i.createNew(),v=h.createNew(),w={NOW_CLOSING_EVENT:"modal.stack.now-closing"},x=0,y="a[href], area[href], input:not([disabled]), button:not([disabled]),select:not([disabled]), textarea:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable=true]";return e.$watch(j,function(a){r&&(r.index=a)}),c.bind("keydown",function(a){if(a.isDefaultPrevented())return a;var b=u.top();if(b&&b.value.keyboard)switch(a.which){case 27:a.preventDefault(),e.$apply(function(){w.dismiss(b.key,"escape key press")});break;case 9:w.loadFocusElementList(b);var c=!1;a.shiftKey?w.isFocusInFirstItem(a)&&(c=w.focusLastFocusableElement()):w.isFocusInLastItem(a)&&(c=w.focusFirstFocusableElement()),c&&(a.preventDefault(),a.stopPropagation())}}),w.open=function(a,b){var f=c[0].activeElement,g=b.openedClass||t;l(!1),u.add(a,{deferred:b.deferred,renderDeferred:b.renderDeferred,modalScope:b.scope,backdrop:b.backdrop,keyboard:b.keyboard,openedClass:b.openedClass,windowTopClass:b.windowTopClass}),v.put(g,a);var h=c.find("body").eq(0),i=j();if(i>=0&&!q){r=e.$new(!0),r.index=i;var k=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>');k.attr("backdrop-class",b.backdropClass),b.animation&&k.attr("modal-animation","true"),q=d(k)(r),h.append(q)}var m=angular.element('<div uib-modal-window="modal-window"></div>');m.attr({"template-url":b.windowTemplateUrl,"window-class":b.windowClass,"window-top-class":b.windowTopClass,size:b.size,index:u.length()-1,animate:"animate"}).html(b.content),b.animation&&m.attr("modal-animation","true");var n=d(m)(b.scope);u.top().value.modalDomEl=n,u.top().value.modalOpener=f,h.append(n),h.addClass(g),w.clearFocusListCache()},w.close=function(a,b){var c=u.get(a);return c&&o(c,b,!0)?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.resolve(b),k(a,c.value.modalOpener),!0):!c},w.dismiss=function(a,b){var c=u.get(a);return c&&o(c,b,!1)?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.reject(b),k(a,c.value.modalOpener),!0):!c},w.dismissAll=function(a){for(var b=this.getTop();b&&this.dismiss(b.key,a);)b=this.getTop()},w.getTop=function(){return u.top()},w.modalRendered=function(a){var b=u.get(a);b&&b.value.renderDeferred.resolve()},w.focusFirstFocusableElement=function(){return s.length>0?(s[0].focus(),!0):!1},w.focusLastFocusableElement=function(){return s.length>0?(s[s.length-1].focus(),!0):!1},w.isFocusInFirstItem=function(a){return s.length>0?(a.target||a.srcElement)==s[0]:!1},w.isFocusInLastItem=function(a){return s.length>0?(a.target||a.srcElement)==s[s.length-1]:!1},w.clearFocusListCache=function(){s=[],x=0},w.loadFocusElementList=function(a){if((void 0===s||!s.length)&&a){var b=a.value.modalDomEl;b&&b.length&&(s=b[0].querySelectorAll(y))}},w}]).provider("$uibModal",function(){var a={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$templateRequest","$controller","$uibModalStack","$modalSuppressWarning","$log",function(b,c,d,e,f,g,h,i){function j(a){return a.template?d.when(a.template):e(angular.isFunction(a.templateUrl)?a.templateUrl():a.templateUrl)}function k(a){var c=[];return angular.forEach(a,function(a){angular.isFunction(a)||angular.isArray(a)?c.push(d.when(b.invoke(a))):angular.isString(a)?c.push(d.when(b.get(a))):c.push(d.when(a))}),c}var l={},m=null;return l.getPromiseChain=function(){return m},l.open=function(b){function e(){return r}var l=d.defer(),n=d.defer(),o=d.defer(),p={result:l.promise,opened:n.promise,rendered:o.promise,close:function(a){return g.close(p,a)},dismiss:function(a){return g.dismiss(p,a)}};if(b=angular.extend({},a.options,b),b.resolve=b.resolve||{},!b.template&&!b.templateUrl)throw new Error("One of template or templateUrl options is required.");var q,r=d.all([j(b)].concat(k(b.resolve)));return q=m=d.all([m]).then(e,e).then(function(a){var d=(b.scope||c).$new();d.$close=p.close,d.$dismiss=p.dismiss,d.$on("$destroy",function(){d.$$uibDestructionScheduled||d.$dismiss("$uibUnscheduledDestruction")});var e,j={},k=1;b.controller&&(j.$scope=d,j.$uibModalInstance=p,Object.defineProperty(j,"$modalInstance",{get:function(){return h||i.warn("$modalInstance is now deprecated. Use $uibModalInstance instead."),p}}),angular.forEach(b.resolve,function(b,c){j[c]=a[k++]}),e=f(b.controller,j),b.controllerAs&&(b.bindToController&&angular.extend(e,d),d[b.controllerAs]=e)),g.open(p,{scope:d,deferred:l,renderDeferred:o,content:a[0],animation:b.animation,backdrop:b.backdrop,keyboard:b.keyboard,backdropClass:b.backdropClass,windowTopClass:b.windowTopClass,windowClass:b.windowClass,windowTemplateUrl:b.windowTemplateUrl,size:b.size,openedClass:b.openedClass}),n.resolve(!0)},function(a){n.reject(a),l.reject(a)})["finally"](function(){m===q&&(m=null)}),p},l}]};return a}),angular.module("ui.bootstrap.modal").value("$modalSuppressWarning",!1).directive("modalBackdrop",["$animate","$injector","$modalStack","$log","$modalSuppressWarning",function(a,b,c,d,e){function f(b,f,h){e||d.warn("modal-backdrop is now deprecated. Use uib-modal-backdrop instead."),f.addClass("modal-backdrop"),h.modalInClass&&(g?g(f,{addClass:h.modalInClass}).start():a.addClass(f,h.modalInClass),b.$on(c.NOW_CLOSING_EVENT,function(b,c){var d=c();g?g(f,{removeClass:h.modalInClass}).start().then(d):a.removeClass(f,h.modalInClass).then(d)}))}var g=null;return b.has("$animateCss")&&(g=b.get("$animateCss")),{replace:!0,templateUrl:"template/modal/backdrop.html",compile:function(a,b){return a.addClass(b.backdropClass),f}}}]).directive("modalWindow",["$modalStack","$q","$animate","$injector","$log","$modalSuppressWarning",function(a,b,c,d,e,f){var g=null;return d.has("$animateCss")&&(g=d.get("$animateCss")),{scope:{index:"@"},replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||"template/modal/window.html"},link:function(d,h,i){f||e.warn("modal-window is now deprecated. Use uib-modal-window instead."),h.addClass(i.windowClass||""),h.addClass(i.windowTopClass||""),d.size=i.size,d.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!==c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))},h.on("click",d.close),d.$isRendered=!0;var j=b.defer();i.$observe("modalRender",function(a){"true"==a&&j.resolve()}),j.promise.then(function(){var e=null;i.modalInClass&&(e=g?g(h,{addClass:i.modalInClass}).start():c.addClass(h,i.modalInClass),d.$on(a.NOW_CLOSING_EVENT,function(a,b){var d=b();g?g(h,{removeClass:i.modalInClass}).start().then(d):c.removeClass(h,i.modalInClass).then(d)})),b.when(e).then(function(){var a=h[0].querySelector("[autofocus]");a?a.focus():h[0].focus()});var f=a.getTop();f&&a.modalRendered(f.key)})}}}]).directive("modalAnimationClass",["$log","$modalSuppressWarning",function(a,b){return{compile:function(c,d){b||a.warn("modal-animation-class is now deprecated. Use uib-modal-animation-class instead."),d.modalAnimation&&c.addClass(d.modalAnimationClass)}}}]).directive("modalTransclude",["$log","$modalSuppressWarning",function(a,b){return{link:function(c,d,e,f,g){
b||a.warn("modal-transclude is now deprecated. Use uib-modal-transclude instead."),g(c.$parent,function(a){d.empty(),d.append(a)})}}}]).service("$modalStack",["$animate","$timeout","$document","$compile","$rootScope","$q","$injector","$$multiMap","$$stackedMap","$uibModalStack","$log","$modalSuppressWarning",function(a,b,c,d,e,f,g,h,i,j,k,l){l||k.warn("$modalStack is now deprecated. Use $uibModalStack instead."),angular.extend(this,j)}]).provider("$modal",["$uibModalProvider",function(a){angular.extend(this,a),this.$get=["$injector","$log","$modalSuppressWarning",function(b,c,d){return d||c.warn("$modal is now deprecated. Use $uibModal instead."),b.invoke(a.$get)}]}]),angular.module("ui.bootstrap.pagination",[]).controller("UibPaginationController",["$scope","$attrs","$parse",function(a,b,c){var d=this,e={$setViewValue:angular.noop},f=b.numPages?c(b.numPages).assign:angular.noop;this.init=function(g,h){e=g,this.config=h,e.$render=function(){d.render()},b.itemsPerPage?a.$parent.$watch(c(b.itemsPerPage),function(b){d.itemsPerPage=parseInt(b,10),a.totalPages=d.calculateTotalPages()}):this.itemsPerPage=h.itemsPerPage,a.$watch("totalItems",function(){a.totalPages=d.calculateTotalPages()}),a.$watch("totalPages",function(b){f(a.$parent,b),a.page>b?a.selectPage(b):e.$render()})},this.calculateTotalPages=function(){var b=this.itemsPerPage<1?1:Math.ceil(a.totalItems/this.itemsPerPage);return Math.max(b||0,1)},this.render=function(){a.page=parseInt(e.$viewValue,10)||1},a.selectPage=function(b,c){c&&c.preventDefault();var d=!a.ngDisabled||!c;d&&a.page!==b&&b>0&&b<=a.totalPages&&(c&&c.target&&c.target.blur(),e.$setViewValue(b),e.$render())},a.getText=function(b){return a[b+"Text"]||d.config[b+"Text"]},a.noPrevious=function(){return 1===a.page},a.noNext=function(){return a.page===a.totalPages}}]).constant("uibPaginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("uibPagination",["$parse","uibPaginationConfig",function(a,b){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["uibPagination","?ngModel"],controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(a,b){return b.templateUrl||"template/pagination/pagination.html"},replace:!0,link:function(c,d,e,f){function g(a,b,c){return{number:a,text:b,active:c}}function h(a,b){var c=[],d=1,e=b,f=angular.isDefined(k)&&b>k;f&&(l?(d=Math.max(a-Math.floor(k/2),1),e=d+k-1,e>b&&(e=b,d=e-k+1)):(d=(Math.ceil(a/k)-1)*k+1,e=Math.min(d+k-1,b)));for(var h=d;e>=h;h++){var i=g(h,h,h===a);c.push(i)}if(f&&!l){if(d>1){var j=g(d-1,"...",!1);c.unshift(j)}if(b>e){var m=g(e+1,"...",!1);c.push(m)}}return c}var i=f[0],j=f[1];if(j){var k=angular.isDefined(e.maxSize)?c.$parent.$eval(e.maxSize):b.maxSize,l=angular.isDefined(e.rotate)?c.$parent.$eval(e.rotate):b.rotate;c.boundaryLinks=angular.isDefined(e.boundaryLinks)?c.$parent.$eval(e.boundaryLinks):b.boundaryLinks,c.directionLinks=angular.isDefined(e.directionLinks)?c.$parent.$eval(e.directionLinks):b.directionLinks,i.init(j,b),e.maxSize&&c.$parent.$watch(a(e.maxSize),function(a){k=parseInt(a,10),i.render()});var m=i.render;i.render=function(){m(),c.page>0&&c.page<=c.totalPages&&(c.pages=h(c.page,c.totalPages))}}}}}]).constant("uibPagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("uibPager",["uibPagerConfig",function(a){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["uibPager","?ngModel"],controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(a,b){return b.templateUrl||"template/pagination/pager.html"},replace:!0,link:function(b,c,d,e){var f=e[0],g=e[1];g&&(b.align=angular.isDefined(d.align)?b.$parent.$eval(d.align):a.align,f.init(g,a))}}}]),angular.module("ui.bootstrap.pagination").value("$paginationSuppressWarning",!1).controller("PaginationController",["$scope","$attrs","$parse","$log","$paginationSuppressWarning",function(a,b,c,d,e){e||d.warn("PaginationController is now deprecated. Use UibPaginationController instead.");var f=this,g={$setViewValue:angular.noop},h=b.numPages?c(b.numPages).assign:angular.noop;this.init=function(d,e){g=d,this.config=e,g.$render=function(){f.render()},b.itemsPerPage?a.$parent.$watch(c(b.itemsPerPage),function(b){f.itemsPerPage=parseInt(b,10),a.totalPages=f.calculateTotalPages()}):this.itemsPerPage=e.itemsPerPage,a.$watch("totalItems",function(){a.totalPages=f.calculateTotalPages()}),a.$watch("totalPages",function(b){h(a.$parent,b),a.page>b?a.selectPage(b):g.$render()})},this.calculateTotalPages=function(){var b=this.itemsPerPage<1?1:Math.ceil(a.totalItems/this.itemsPerPage);return Math.max(b||0,1)},this.render=function(){a.page=parseInt(g.$viewValue,10)||1},a.selectPage=function(b,c){c&&c.preventDefault();var d=!a.ngDisabled||!c;d&&a.page!==b&&b>0&&b<=a.totalPages&&(c&&c.target&&c.target.blur(),g.$setViewValue(b),g.$render())},a.getText=function(b){return a[b+"Text"]||f.config[b+"Text"]},a.noPrevious=function(){return 1===a.page},a.noNext=function(){return a.page===a.totalPages}}]).directive("pagination",["$parse","uibPaginationConfig","$log","$paginationSuppressWarning",function(a,b,c,d){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["pagination","?ngModel"],controller:"PaginationController",controllerAs:"pagination",templateUrl:function(a,b){return b.templateUrl||"template/pagination/pagination.html"},replace:!0,link:function(e,f,g,h){function i(a,b,c){return{number:a,text:b,active:c}}function j(a,b){var c=[],d=1,e=b,f=angular.isDefined(m)&&b>m;f&&(n?(d=Math.max(a-Math.floor(m/2),1),e=d+m-1,e>b&&(e=b,d=e-m+1)):(d=(Math.ceil(a/m)-1)*m+1,e=Math.min(d+m-1,b)));for(var g=d;e>=g;g++){var h=i(g,g,g===a);c.push(h)}if(f&&!n){if(d>1){var j=i(d-1,"...",!1);c.unshift(j)}if(b>e){var k=i(e+1,"...",!1);c.push(k)}}return c}d||c.warn("pagination is now deprecated. Use uib-pagination instead.");var k=h[0],l=h[1];if(l){var m=angular.isDefined(g.maxSize)?e.$parent.$eval(g.maxSize):b.maxSize,n=angular.isDefined(g.rotate)?e.$parent.$eval(g.rotate):b.rotate;e.boundaryLinks=angular.isDefined(g.boundaryLinks)?e.$parent.$eval(g.boundaryLinks):b.boundaryLinks,e.directionLinks=angular.isDefined(g.directionLinks)?e.$parent.$eval(g.directionLinks):b.directionLinks,k.init(l,b),g.maxSize&&e.$parent.$watch(a(g.maxSize),function(a){m=parseInt(a,10),k.render()});var o=k.render;k.render=function(){o(),e.page>0&&e.page<=e.totalPages&&(e.pages=j(e.page,e.totalPages))}}}}}]).directive("pager",["uibPagerConfig","$log","$paginationSuppressWarning",function(a,b,c){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["pager","?ngModel"],controller:"PaginationController",controllerAs:"pagination",templateUrl:function(a,b){return b.templateUrl||"template/pagination/pager.html"},replace:!0,link:function(d,e,f,g){c||b.warn("pager is now deprecated. Use uib-pager instead.");var h=g[0],i=g[1];i&&(d.align=angular.isDefined(f.align)?d.$parent.$eval(f.align):a.align,h.init(i,a))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.stackedMap"]).provider("$uibTooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",animation:!0,popupDelay:0,popupCloseDelay:0,useContentExp:!1},c={mouseenter:"mouseleave",click:"click",focus:"blur",none:""},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$document","$uibPosition","$interpolate","$rootScope","$parse","$$stackedMap",function(e,f,g,h,i,j,k,l,m){var n=m.createNew();return h.on("keypress",function(a){if(27===a.which){var b=n.top();b&&(b.value.close(),n.removeTop(),b=null)}}),function(e,k,m,o){function p(a){var b=(a||o.trigger||m).split(" "),d=b.map(function(a){return c[a]||a});return{show:b,hide:d}}o=angular.extend({},b,d,o);var q=a(e),r=j.startSymbol(),s=j.endSymbol(),t="<div "+q+'-popup title="'+r+"title"+s+'" '+(o.useContentExp?'content-exp="contentExp()" ':'content="'+r+"content"+s+'" ')+'placement="'+r+"placement"+s+'" popup-class="'+r+"popupClass"+s+'" animation="animation" is-open="isOpen"origin-scope="origScope" style="visibility: hidden; display: block; top: -9999px; left: -9999px;"></div>';return{compile:function(a,b){var c=f(t);return function(a,b,d,f){function j(){L.isOpen?q():m()}function m(){(!K||a.$eval(d[k+"Enable"]))&&(u(),x(),L.popupDelay?F||(F=g(r,L.popupDelay,!1)):r())}function q(){s(),L.popupCloseDelay?G||(G=g(t,L.popupCloseDelay,!1)):t()}function r(){return s(),u(),L.content?(v(),void L.$evalAsync(function(){L.isOpen=!0,y(!0),Q()})):angular.noop}function s(){F&&(g.cancel(F),F=null),H&&(g.cancel(H),H=null)}function t(){s(),u(),L&&L.$evalAsync(function(){L.isOpen=!1,y(!1),L.animation?E||(E=g(w,150,!1)):w()})}function u(){G&&(g.cancel(G),G=null),E&&(g.cancel(E),E=null)}function v(){C||(D=L.$new(),C=c(D,function(a){I?h.find("body").append(a):b.after(a)}),z())}function w(){A(),E=null,C&&(C.remove(),C=null),D&&(D.$destroy(),D=null)}function x(){L.title=d[k+"Title"],O?L.content=O(a):L.content=d[e],L.popupClass=d[k+"Class"],L.placement=angular.isDefined(d[k+"Placement"])?d[k+"Placement"]:o.placement;var b=parseInt(d[k+"PopupDelay"],10),c=parseInt(d[k+"PopupCloseDelay"],10);L.popupDelay=isNaN(b)?o.popupDelay:b,L.popupCloseDelay=isNaN(c)?o.popupCloseDelay:c}function y(b){N&&angular.isFunction(N.assign)&&N.assign(a,b)}function z(){P.length=0,O?(P.push(a.$watch(O,function(a){L.content=a,!a&&L.isOpen&&t()})),P.push(D.$watch(function(){M||(M=!0,D.$$postDigest(function(){M=!1,L&&L.isOpen&&Q()}))}))):P.push(d.$observe(e,function(a){L.content=a,!a&&L.isOpen?t():Q()})),P.push(d.$observe(k+"Title",function(a){L.title=a,L.isOpen&&Q()})),P.push(d.$observe(k+"Placement",function(a){L.placement=a?a:o.placement,L.isOpen&&Q()}))}function A(){P.length&&(angular.forEach(P,function(a){a()}),P.length=0)}function B(){var a=d[k+"Trigger"];R(),J=p(a),"none"!==J.show&&J.show.forEach(function(a,c){a===J.hide[c]?b[0].addEventListener(a,j):a&&(b[0].addEventListener(a,m),J.hide[c].split(" ").forEach(function(a){b[0].addEventListener(a,q)})),b.on("keypress",function(a){27===a.which&&q()})})}var C,D,E,F,G,H,I=angular.isDefined(o.appendToBody)?o.appendToBody:!1,J=p(void 0),K=angular.isDefined(d[k+"Enable"]),L=a.$new(!0),M=!1,N=angular.isDefined(d[k+"IsOpen"])?l(d[k+"IsOpen"]):!1,O=o.useContentExp?l(d[e]):!1,P=[],Q=function(){C&&C.html()&&(H||(H=g(function(){C.css({top:0,left:0});var a=i.positionElements(b,C,L.placement,I);a.top+="px",a.left+="px",a.visibility="visible",C.css(a),H=null},0,!1)))};L.origScope=a,L.isOpen=!1,n.add(L,{close:t}),L.contentExp=function(){return L.content},d.$observe("disabled",function(a){a&&s(),a&&L.isOpen&&t()}),N&&a.$watch(N,function(a){L&&!a===L.isOpen&&j()});var R=function(){J.show.forEach(function(a){b.unbind(a,m)}),J.hide.forEach(function(a){a.split(" ").forEach(function(a){b[0].removeEventListener(a,q)})})};B();var S=a.$eval(d[k+"Animation"]);L.animation=angular.isDefined(S)?!!S:o.animation;var T=a.$eval(d[k+"AppendToBody"]);I=angular.isDefined(T)?T:I,I&&a.$on("$locationChangeSuccess",function(){L.isOpen&&t()}),a.$on("$destroy",function(){s(),u(),R(),w(),n.remove(L),L=null})}}}}}]}).directive("uibTooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function(a,b,c,d){return{link:function(e,f,g){var h,i,j,k=e.$eval(g.tooltipTemplateTranscludeScope),l=0,m=function(){i&&(i.remove(),i=null),h&&(h.$destroy(),h=null),j&&(a.leave(j).then(function(){i=null}),i=j,j=null)};e.$watch(b.parseAsResourceUrl(g.uibTooltipTemplateTransclude),function(b){var g=++l;b?(d(b,!0).then(function(d){if(g===l){var e=k.$new(),i=d,n=c(i)(e,function(b){m(),a.enter(b,f)});h=e,j=n,h.$emit("$includeContentLoaded",b)}},function(){g===l&&(m(),e.$emit("$includeContentError",b))}),e.$emit("$includeContentRequested",b)):m()}),e.$on("$destroy",m)}}}]).directive("uibTooltipClasses",function(){return{restrict:"A",link:function(a,b,c){a.placement&&b.addClass(a.placement),a.popupClass&&b.addClass(a.popupClass),a.animation()&&b.addClass(c.tooltipAnimationClass)}}}).directive("uibTooltipPopup",function(){return{replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html",link:function(a,b){b.addClass("tooltip")}}}).directive("uibTooltip",["$uibTooltip",function(a){return a("uibTooltip","tooltip","mouseenter")}]).directive("uibTooltipTemplatePopup",function(){return{replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/tooltip/tooltip-template-popup.html",link:function(a,b){b.addClass("tooltip")}}}).directive("uibTooltipTemplate",["$uibTooltip",function(a){return a("uibTooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("uibTooltipHtmlPopup",function(){return{replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-popup.html",link:function(a,b){b.addClass("tooltip")}}}).directive("uibTooltipHtml",["$uibTooltip",function(a){return a("uibTooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]),angular.module("ui.bootstrap.tooltip").value("$tooltipSuppressWarning",!1).provider("$tooltip",["$uibTooltipProvider",function(a){angular.extend(this,a),this.$get=["$log","$tooltipSuppressWarning","$injector",function(b,c,d){return c||b.warn("$tooltip is now deprecated. Use $uibTooltip instead."),d.invoke(a.$get)}]}]).directive("tooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest","$log","$tooltipSuppressWarning",function(a,b,c,d,e,f){return{link:function(g,h,i){f||e.warn("tooltip-template-transclude is now deprecated. Use uib-tooltip-template-transclude instead.");var j,k,l,m=g.$eval(i.tooltipTemplateTranscludeScope),n=0,o=function(){k&&(k.remove(),k=null),j&&(j.$destroy(),j=null),l&&(a.leave(l).then(function(){k=null}),k=l,l=null)};g.$watch(b.parseAsResourceUrl(i.tooltipTemplateTransclude),function(b){var e=++n;b?(d(b,!0).then(function(d){if(e===n){var f=m.$new(),g=d,i=c(g)(f,function(b){o(),a.enter(b,h)});j=f,l=i,j.$emit("$includeContentLoaded",b)}},function(){e===n&&(o(),g.$emit("$includeContentError",b))}),g.$emit("$includeContentRequested",b)):o()}),g.$on("$destroy",o)}}}]).directive("tooltipClasses",["$log","$tooltipSuppressWarning",function(a,b){return{restrict:"A",link:function(c,d,e){b||a.warn("tooltip-classes is now deprecated. Use uib-tooltip-classes instead."),c.placement&&d.addClass(c.placement),c.popupClass&&d.addClass(c.popupClass),c.animation()&&d.addClass(e.tooltipAnimationClass)}}}]).directive("tooltipPopup",["$log","$tooltipSuppressWarning",function(a,b){return{replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html",link:function(c,d){b||a.warn("tooltip-popup is now deprecated. Use uib-tooltip-popup instead."),d.addClass("tooltip")}}}]).directive("tooltip",["$tooltip",function(a){return a("tooltip","tooltip","mouseenter")}]).directive("tooltipTemplatePopup",["$log","$tooltipSuppressWarning",function(a,b){return{replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/tooltip/tooltip-template-popup.html",link:function(c,d){b||a.warn("tooltip-template-popup is now deprecated. Use uib-tooltip-template-popup instead."),d.addClass("tooltip")}}}]).directive("tooltipTemplate",["$tooltip",function(a){return a("tooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("tooltipHtmlPopup",["$log","$tooltipSuppressWarning",function(a,b){return{replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-popup.html",link:function(c,d){b||a.warn("tooltip-html-popup is now deprecated. Use uib-tooltip-html-popup instead."),d.addClass("tooltip")}}}]).directive("tooltipHtml",["$tooltip",function(a){return a("tooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("uibPopoverTemplatePopup",function(){return{replace:!0,scope:{title:"@",contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/popover/popover-template.html",link:function(a,b){b.addClass("popover")}}}).directive("uibPopoverTemplate",["$uibTooltip",function(a){return a("uibPopoverTemplate","popover","click",{useContentExp:!0})}]).directive("uibPopoverHtmlPopup",function(){return{replace:!0,scope:{contentExp:"&",title:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover-html.html",link:function(a,b){b.addClass("popover")}}}).directive("uibPopoverHtml",["$uibTooltip",function(a){return a("uibPopoverHtml","popover","click",{useContentExp:!0})}]).directive("uibPopoverPopup",function(){return{replace:!0,scope:{title:"@",content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html",link:function(a,b){b.addClass("popover")}}}).directive("uibPopover",["$uibTooltip",function(a){return a("uibPopover","popover","click")}]),angular.module("ui.bootstrap.popover").value("$popoverSuppressWarning",!1).directive("popoverTemplatePopup",["$log","$popoverSuppressWarning",function(a,b){return{replace:!0,scope:{title:"@",contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/popover/popover-template.html",link:function(c,d){b||a.warn("popover-template-popup is now deprecated. Use uib-popover-template-popup instead."),d.addClass("popover")}}}]).directive("popoverTemplate",["$tooltip",function(a){return a("popoverTemplate","popover","click",{useContentExp:!0})}]).directive("popoverHtmlPopup",["$log","$popoverSuppressWarning",function(a,b){return{replace:!0,scope:{contentExp:"&",title:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover-html.html",link:function(c,d){b||a.warn("popover-html-popup is now deprecated. Use uib-popover-html-popup instead."),d.addClass("popover")}}}]).directive("popoverHtml",["$tooltip",function(a){return a("popoverHtml","popover","click",{useContentExp:!0})}]).directive("popoverPopup",["$log","$popoverSuppressWarning",function(a,b){return{replace:!0,scope:{title:"@",content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html",link:function(c,d){b||a.warn("popover-popup is now deprecated. Use uib-popover-popup instead."),d.addClass("popover")}}}]).directive("popover",["$tooltip",function(a){return a("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("uibProgressConfig",{animate:!0,max:100}).controller("UibProgressController",["$scope","$attrs","uibProgressConfig",function(a,b,c){var d=this,e=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.bars=[],a.max=angular.isDefined(a.max)?a.max:c.max,this.addBar=function(b,c,f){e||c.css({transition:"none"}),this.bars.push(b),b.max=a.max,b.title=f&&angular.isDefined(f.title)?f.title:"progressbar",b.$watch("value",function(a){b.recalculatePercentage()}),b.recalculatePercentage=function(){var a=d.bars.reduce(function(a,b){return b.percent=+(100*b.value/b.max).toFixed(2),a+b.percent},0);a>100&&(b.percent-=a-100)},b.$on("$destroy",function(){c=null,d.removeBar(b)})},this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1),this.bars.forEach(function(a){a.recalculatePercentage()})},a.$watch("max",function(b){d.bars.forEach(function(b){b.max=a.max,b.recalculatePercentage()})})}]).directive("uibProgress",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",require:"uibProgress",scope:{max:"=?"},templateUrl:"template/progressbar/progress.html"}}).directive("uibBar",function(){return{replace:!0,transclude:!0,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b,c)}}}).directive("uibProgressbar",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",scope:{value:"=",max:"=?",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]),{title:c.title})}}}),angular.module("ui.bootstrap.progressbar").value("$progressSuppressWarning",!1).controller("ProgressController",["$scope","$attrs","uibProgressConfig","$log","$progressSuppressWarning",function(a,b,c,d,e){e||d.warn("ProgressController is now deprecated. Use UibProgressController instead.");var f=this,g=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.bars=[],a.max=angular.isDefined(a.max)?a.max:c.max,this.addBar=function(b,c,d){g||c.css({transition:"none"}),this.bars.push(b),b.max=a.max,b.title=d&&angular.isDefined(d.title)?d.title:"progressbar",b.$watch("value",function(a){b.recalculatePercentage()}),b.recalculatePercentage=function(){b.percent=+(100*b.value/b.max).toFixed(2);var a=f.bars.reduce(function(a,b){return a+b.percent},0);a>100&&(b.percent-=a-100)},b.$on("$destroy",function(){c=null,f.removeBar(b)})},this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1)},a.$watch("max",function(b){f.bars.forEach(function(b){b.max=a.max,b.recalculatePercentage()})})}]).directive("progress",["$log","$progressSuppressWarning",function(a,b){return{replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{max:"=?",title:"@?"},templateUrl:"template/progressbar/progress.html",link:function(){b||a.warn("progress is now deprecated. Use uib-progress instead.")}}}]).directive("bar",["$log","$progressSuppressWarning",function(a,b){return{replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(c,d,e,f){b||a.warn("bar is now deprecated. Use uib-bar instead."),f.addBar(c,d)}}}]).directive("progressbar",["$log","$progressSuppressWarning",function(a,b){return{replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",max:"=?",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(c,d,e,f){b||a.warn("progressbar is now deprecated. Use uib-progressbar instead."),f.addBar(c,angular.element(d.children()[0]),{title:e.title})}}}]),angular.module("ui.bootstrap.rating",[]).constant("uibRatingConfig",{max:5,stateOn:null,stateOff:null,titles:["one","two","three","four","five"]}).controller("UibRatingController",["$scope","$attrs","uibRatingConfig",function(a,b,c){var d={$setViewValue:angular.noop};this.init=function(e){d=e,d.$render=this.render,d.$formatters.push(function(a){return angular.isNumber(a)&&a<<0!==a&&(a=Math.round(a)),a}),this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):c.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):c.stateOff;var f=angular.isDefined(b.titles)?a.$parent.$eval(b.titles):c.titles;this.titles=angular.isArray(f)&&f.length>0?f:c.titles;var g=angular.isDefined(b.ratingStates)?a.$parent.$eval(b.ratingStates):new Array(angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max);a.range=this.buildTemplateObjects(g)},this.buildTemplateObjects=function(a){for(var b=0,c=a.length;c>b;b++)a[b]=angular.extend({index:b},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(b)},a[b]);return a},this.getTitle=function(a){return a>=this.titles.length?a+1:this.titles[a]},a.rate=function(b){!a.readonly&&b>=0&&b<=a.range.length&&(d.$setViewValue(d.$viewValue===b?0:b),d.$render())},a.enter=function(b){a.readonly||(a.value=b),a.onHover({value:b})},a.reset=function(){a.value=d.$viewValue,a.onLeave()},a.onKeydown=function(b){/(37|38|39|40)/.test(b.which)&&(b.preventDefault(),b.stopPropagation(),a.rate(a.value+(38===b.which||39===b.which?1:-1)))},this.render=function(){a.value=d.$viewValue}}]).directive("uibRating",function(){return{require:["uibRating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"UibRatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(a,b,c,d){var e=d[0],f=d[1];e.init(f)}}}),angular.module("ui.bootstrap.rating").value("$ratingSuppressWarning",!1).controller("RatingController",["$scope","$attrs","$controller","$log","$ratingSuppressWarning",function(a,b,c,d,e){e||d.warn("RatingController is now deprecated. Use UibRatingController instead."),angular.extend(this,c("UibRatingController",{$scope:a,$attrs:b}))}]).directive("rating",["$log","$ratingSuppressWarning",function(a,b){return{require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(c,d,e,f){b||a.warn("rating is now deprecated. Use uib-rating instead.");var g=f[0],h=f[1];g.init(h)}}}]),angular.module("ui.bootstrap.tabs",[]).controller("UibTabsetController",["$scope",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(b){b.active&&b!==a&&(b.active=!1,b.onDeselect(),a.selectCalled=!1)}),a.active=!0,a.selectCalled||(a.onSelect(),a.selectCalled=!0)},b.addTab=function(a){c.push(a),1===c.length&&a.active!==!1?a.active=!0:a.active?b.select(a):a.active=!1},b.removeTab=function(a){var e=c.indexOf(a);if(a.active&&c.length>1&&!d){var f=e==c.length-1?e-1:e+1;b.select(c[f])}c.splice(e,1)};var d;a.$on("$destroy",function(){d=!0})}]).directive("uibTabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"UibTabsetController",templateUrl:"template/tabs/tabset.html",link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1}}}).directive("uibTab",["$parse",function(a){return{require:"^uibTabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},link:function(b,c,d,e,f){b.$watch("active",function(a){a&&e.select(b)}),b.disabled=!1,d.disable&&b.$parent.$watch(a(d.disable),function(a){b.disabled=!!a}),b.select=function(){b.disabled||(b.active=!0)},e.addTab(b),b.$on("$destroy",function(){e.removeTab(b)}),b.$transcludeFn=f}}}]).directive("uibTabHeadingTransclude",function(){return{restrict:"A",require:["?^uibTab","?^tab"],link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}).directive("uibTabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||a.hasAttribute("x-tab-heading")||a.hasAttribute("uib-tab-heading")||a.hasAttribute("data-uib-tab-heading")||a.hasAttribute("x-uib-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase()||"x-tab-heading"===a.tagName.toLowerCase()||"uib-tab-heading"===a.tagName.toLowerCase()||"data-uib-tab-heading"===a.tagName.toLowerCase()||"x-uib-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:["?^uibTabset","?^tabset"],link:function(b,c,d){var e=b.$eval(d.uibTabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.tabs").value("$tabsSuppressWarning",!1).controller("TabsetController",["$scope","$controller","$log","$tabsSuppressWarning",function(a,b,c,d){d||c.warn("TabsetController is now deprecated. Use UibTabsetController instead."),angular.extend(this,b("UibTabsetController",{$scope:a}))}]).directive("tabset",["$log","$tabsSuppressWarning",function(a,b){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(c,d,e){b||a.warn("tabset is now deprecated. Use uib-tabset instead."),c.vertical=angular.isDefined(e.vertical)?c.$parent.$eval(e.vertical):!1,c.justified=angular.isDefined(e.justified)?c.$parent.$eval(e.justified):!1}}}]).directive("tab",["$parse","$log","$tabsSuppressWarning",function(a,b,c){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},link:function(d,e,f,g,h){c||b.warn("tab is now deprecated. Use uib-tab instead."),d.$watch("active",function(a){a&&g.select(d)}),d.disabled=!1,f.disable&&d.$parent.$watch(a(f.disable),function(a){d.disabled=!!a}),d.select=function(){d.disabled||(d.active=!0)},g.addTab(d),d.$on("$destroy",function(){g.removeTab(d)}),d.$transcludeFn=h}}}]).directive("tabHeadingTransclude",["$log","$tabsSuppressWarning",function(a,b){return{restrict:"A",require:"^tab",link:function(c,d){b||a.warn("tab-heading-transclude is now deprecated. Use uib-tab-heading-transclude instead."),c.$watch("headingElement",function(a){a&&(d.html(""),d.append(a))})}}}]).directive("tabContentTransclude",["$log","$tabsSuppressWarning",function(a,b){function c(a){return a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||a.hasAttribute("x-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase()||"x-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(d,e,f){b||a.warn("tab-content-transclude is now deprecated. Use uib-tab-content-transclude instead.");var g=d.$eval(f.tabContentTransclude);g.$transcludeFn(g.$parent,function(a){angular.forEach(a,function(a){c(a)?g.headingElement=a:e.append(a)})})}}}]),angular.module("ui.bootstrap.timepicker",[]).constant("uibTimepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0,showSpinners:!0}).controller("UibTimepickerController",["$scope","$element","$attrs","$parse","$log","$locale","uibTimepickerConfig",function(a,b,c,d,e,f,g){function h(){var b=parseInt(a.hours,10),c=a.showMeridian?b>0&&13>b:b>=0&&24>b;return c?(a.showMeridian&&(12===b&&(b=0),a.meridian===r[1]&&(b+=12)),b):void 0}function i(){var b=parseInt(a.minutes,10);return b>=0&&60>b?b:void 0}function j(a){return angular.isDefined(a)&&a.toString().length<2?"0"+a:a.toString()}function k(a){l(),q.$setViewValue(new Date(p)),m(a)}function l(){q.$setValidity("time",!0),a.invalidHours=!1,a.invalidMinutes=!1}function m(b){var c=p.getHours(),d=p.getMinutes();a.showMeridian&&(c=0===c||12===c?12:c%12),a.hours="h"===b?c:j(c),"m"!==b&&(a.minutes=j(d)),a.meridian=p.getHours()<12?r[0]:r[1]}function n(a,b){var c=new Date(a.getTime()+6e4*b),d=new Date(a);return d.setHours(c.getHours(),c.getMinutes()),d}function o(a){p=n(p,a),k()}var p=new Date,q={$setViewValue:angular.noop},r=angular.isDefined(c.meridians)?a.$parent.$eval(c.meridians):g.meridians||f.DATETIME_FORMATS.AMPMS;a.tabindex=angular.isDefined(c.tabindex)?c.tabindex:0,b.removeAttr("tabindex"),this.init=function(b,d){q=b,q.$render=this.render,q.$formatters.unshift(function(a){return a?new Date(a):null});var e=d.eq(0),f=d.eq(1),h=angular.isDefined(c.mousewheel)?a.$parent.$eval(c.mousewheel):g.mousewheel;h&&this.setupMousewheelEvents(e,f);var i=angular.isDefined(c.arrowkeys)?a.$parent.$eval(c.arrowkeys):g.arrowkeys;i&&this.setupArrowkeyEvents(e,f),a.readonlyInput=angular.isDefined(c.readonlyInput)?a.$parent.$eval(c.readonlyInput):g.readonlyInput,this.setupInputEvents(e,f)};var s=g.hourStep;c.hourStep&&a.$parent.$watch(d(c.hourStep),function(a){s=parseInt(a,10)});var t=g.minuteStep;c.minuteStep&&a.$parent.$watch(d(c.minuteStep),function(a){t=parseInt(a,10)});var u;a.$parent.$watch(d(c.min),function(a){var b=new Date(a);u=isNaN(b)?void 0:b});var v;a.$parent.$watch(d(c.max),function(a){var b=new Date(a);v=isNaN(b)?void 0:b}),a.noIncrementHours=function(){var a=n(p,60*s);
return a>v||p>a&&u>a},a.noDecrementHours=function(){var a=n(p,60*-s);return u>a||a>p&&a>v},a.noIncrementMinutes=function(){var a=n(p,t);return a>v||p>a&&u>a},a.noDecrementMinutes=function(){var a=n(p,-t);return u>a||a>p&&a>v},a.noToggleMeridian=function(){return p.getHours()<13?n(p,720)>v:n(p,-720)<u},a.showMeridian=g.showMeridian,c.showMeridian&&a.$parent.$watch(d(c.showMeridian),function(b){if(a.showMeridian=!!b,q.$error.time){var c=h(),d=i();angular.isDefined(c)&&angular.isDefined(d)&&(p.setHours(c),k())}else m()}),this.setupMousewheelEvents=function(b,c){var d=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};b.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementHours():a.decrementHours()),b.preventDefault()}),c.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementMinutes():a.decrementMinutes()),b.preventDefault()})},this.setupArrowkeyEvents=function(b,c){b.bind("keydown",function(b){38===b.which?(b.preventDefault(),a.incrementHours(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementHours(),a.$apply())}),c.bind("keydown",function(b){38===b.which?(b.preventDefault(),a.incrementMinutes(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementMinutes(),a.$apply())})},this.setupInputEvents=function(b,c){if(a.readonlyInput)return a.updateHours=angular.noop,void(a.updateMinutes=angular.noop);var d=function(b,c){q.$setViewValue(null),q.$setValidity("time",!1),angular.isDefined(b)&&(a.invalidHours=b),angular.isDefined(c)&&(a.invalidMinutes=c)};a.updateHours=function(){var a=h(),b=i();angular.isDefined(a)&&angular.isDefined(b)?(p.setHours(a),u>p||p>v?d(!0):k("h")):d(!0)},b.bind("blur",function(b){!a.invalidHours&&a.hours<10&&a.$apply(function(){a.hours=j(a.hours)})}),a.updateMinutes=function(){var a=i(),b=h();angular.isDefined(a)&&angular.isDefined(b)?(p.setMinutes(a),u>p||p>v?d(void 0,!0):k("m")):d(void 0,!0)},c.bind("blur",function(b){!a.invalidMinutes&&a.minutes<10&&a.$apply(function(){a.minutes=j(a.minutes)})})},this.render=function(){var b=q.$viewValue;isNaN(b)?(q.$setValidity("time",!1),e.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(b&&(p=b),u>p||p>v?(q.$setValidity("time",!1),a.invalidHours=!0,a.invalidMinutes=!0):l(),m())},a.showSpinners=angular.isDefined(c.showSpinners)?a.$parent.$eval(c.showSpinners):g.showSpinners,a.incrementHours=function(){a.noIncrementHours()||o(60*s)},a.decrementHours=function(){a.noDecrementHours()||o(60*-s)},a.incrementMinutes=function(){a.noIncrementMinutes()||o(t)},a.decrementMinutes=function(){a.noDecrementMinutes()||o(-t)},a.toggleMeridian=function(){a.noToggleMeridian()||o(720*(p.getHours()<12?1:-1))}}]).directive("uibTimepicker",function(){return{restrict:"EA",require:["uibTimepicker","?^ngModel"],controller:"UibTimepickerController",controllerAs:"timepicker",replace:!0,scope:{},templateUrl:function(a,b){return b.templateUrl||"template/timepicker/timepicker.html"},link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f,b.find("input"))}}}),angular.module("ui.bootstrap.timepicker").value("$timepickerSuppressWarning",!1).controller("TimepickerController",["$scope","$element","$attrs","$controller","$log","$timepickerSuppressWarning",function(a,b,c,d,e,f){f||e.warn("TimepickerController is now deprecated. Use UibTimepickerController instead."),angular.extend(this,d("UibTimepickerController",{$scope:a,$element:b,$attrs:c}))}]).directive("timepicker",["$log","$timepickerSuppressWarning",function(a,b){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",controllerAs:"timepicker",replace:!0,scope:{},templateUrl:function(a,b){return b.templateUrl||"template/timepicker/timepicker.html"},link:function(c,d,e,f){b||a.warn("timepicker is now deprecated. Use uib-timepicker instead.");var g=f[0],h=f[1];h&&g.init(h,d.find("input"))}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position"]).factory("uibTypeaheadParser",["$parse",function(a){var b=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+c+'".');return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).controller("UibTypeaheadController",["$scope","$element","$attrs","$compile","$parse","$q","$timeout","$document","$window","$rootScope","$uibPosition","uibTypeaheadParser",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){K.moveInProgress||(K.moveInProgress=!0,K.$digest()),S&&g.cancel(S),S=g(function(){K.matches.length&&n(),K.moveInProgress=!1},r)}function n(){K.position=C?k.offset(b):k.position(b),K.position.top+=b.prop("offsetHeight")}var o,p,q=[9,13,27,38,40],r=200,s=a.$eval(c.typeaheadMinLength);s||0===s||(s=1);var t,u,v=a.$eval(c.typeaheadWaitMs)||0,w=a.$eval(c.typeaheadEditable)!==!1,x=e(c.typeaheadLoading).assign||angular.noop,y=e(c.typeaheadOnSelect),z=angular.isDefined(c.typeaheadSelectOnBlur)?a.$eval(c.typeaheadSelectOnBlur):!1,A=e(c.typeaheadNoResults).assign||angular.noop,B=c.typeaheadInputFormatter?e(c.typeaheadInputFormatter):void 0,C=c.typeaheadAppendToBody?a.$eval(c.typeaheadAppendToBody):!1,D=c.typeaheadAppendToElementId||!1,E=a.$eval(c.typeaheadFocusFirst)!==!1,F=c.typeaheadSelectOnExact?a.$eval(c.typeaheadSelectOnExact):!1,G=e(c.ngModel),H=e(c.ngModel+"($$$p)"),I=function(b,c){return angular.isFunction(G(a))&&p&&p.$options&&p.$options.getterSetter?H(b,{$$$p:c}):G.assign(b,c)},J=l.parse(c.uibTypeahead),K=a.$new(),L=a.$on("$destroy",function(){K.$destroy()});K.$on("$destroy",L);var M="typeahead-"+K.$id+"-"+Math.floor(1e4*Math.random());b.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":M});var N=angular.element("<div uib-typeahead-popup></div>");N.attr({id:M,matches:"matches",active:"activeIdx",select:"select(activeIdx)","move-in-progress":"moveInProgress",query:"query",position:"position"}),angular.isDefined(c.typeaheadTemplateUrl)&&N.attr("template-url",c.typeaheadTemplateUrl),angular.isDefined(c.typeaheadPopupTemplateUrl)&&N.attr("popup-template-url",c.typeaheadPopupTemplateUrl);var O=function(){K.matches=[],K.activeIdx=-1,b.attr("aria-expanded",!1)},P=function(a){return M+"-option-"+a};K.$watch("activeIdx",function(a){0>a?b.removeAttr("aria-activedescendant"):b.attr("aria-activedescendant",P(a))});var Q=function(a,b){return K.matches.length>b&&a?a.toUpperCase()===K.matches[b].label.toUpperCase():!1},R=function(c){var d={$viewValue:c};x(a,!0),A(a,!1),f.when(J.source(a,d)).then(function(e){var f=c===o.$viewValue;if(f&&t)if(e&&e.length>0){K.activeIdx=E?0:-1,A(a,!1),K.matches.length=0;for(var g=0;g<e.length;g++)d[J.itemName]=e[g],K.matches.push({id:P(g),label:J.viewMapper(K,d),model:e[g]});K.query=c,n(),b.attr("aria-expanded",!0),F&&1===K.matches.length&&Q(c,0)&&K.select(0)}else O(),A(a,!0);f&&x(a,!1)},function(){O(),x(a,!1),A(a,!0)})};C&&(angular.element(i).bind("resize",m),h.find("body").bind("scroll",m));var S;K.moveInProgress=!1,K.query=void 0;var T,U=function(a){T=g(function(){R(a)},v)},V=function(){T&&g.cancel(T)};O(),K.select=function(d){var e,f,h={};u=!0,h[J.itemName]=f=K.matches[d].model,e=J.modelMapper(a,h),I(a,e),o.$setValidity("editable",!0),o.$setValidity("parse",!0),y(a,{$item:f,$model:e,$label:J.viewMapper(a,h)}),O(),K.$eval(c.typeaheadFocusOnSelect)!==!1&&g(function(){b[0].focus()},0,!1)},b.bind("keydown",function(a){if(0!==K.matches.length&&-1!==q.indexOf(a.which)){if(-1===K.activeIdx&&(9===a.which||13===a.which))return O(),void K.$digest();a.preventDefault(),40===a.which?(K.activeIdx=(K.activeIdx+1)%K.matches.length,K.$digest()):38===a.which?(K.activeIdx=(K.activeIdx>0?K.activeIdx:K.matches.length)-1,K.$digest()):13===a.which||9===a.which?K.$apply(function(){K.select(K.activeIdx)}):27===a.which&&(a.stopPropagation(),O(),K.$digest())}}),b.bind("blur",function(){z&&K.matches.length&&-1!==K.activeIdx&&!u&&(u=!0,K.$apply(function(){K.select(K.activeIdx)})),t=!1,u=!1});var W=function(a){b[0]!==a.target&&3!==a.which&&0!==K.matches.length&&(O(),j.$$phase||K.$digest())};h.bind("click",W),a.$on("$destroy",function(){h.unbind("click",W),(C||D)&&X.remove(),C&&(angular.element(i).unbind("resize",m),h.find("body").unbind("scroll",m)),N.remove()});var X=d(N)(K);C?h.find("body").append(X):D!==!1?angular.element(h[0].getElementById(D)).append(X):b.after(X),this.init=function(b,c){o=b,p=c,o.$parsers.unshift(function(b){return t=!0,0===s||b&&b.length>=s?v>0?(V(),U(b)):R(b):(x(a,!1),V(),O()),w?b:b?void o.$setValidity("editable",!1):(o.$setValidity("editable",!0),null)}),o.$formatters.push(function(b){var c,d,e={};return w||o.$setValidity("editable",!0),B?(e.$model=b,B(a,e)):(e[J.itemName]=b,c=J.viewMapper(a,e),e[J.itemName]=void 0,d=J.viewMapper(a,e),c!==d?c:b)})}}]).directive("uibTypeahead",function(){return{controller:"UibTypeaheadController",require:["ngModel","^?ngModelOptions","uibTypeahead"],link:function(a,b,c,d){d[2].init(d[0],d[1])}}}).directive("uibTypeaheadPopup",function(){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&"},replace:!0,templateUrl:function(a,b){return b.popupTemplateUrl||"template/typeahead/typeahead-popup.html"},link:function(a,b,c){a.templateUrl=c.templateUrl,a.isOpen=function(){return a.matches.length>0},a.isActive=function(b){return a.active==b},a.selectActive=function(b){a.active=b},a.selectMatch=function(b){a.select({activeIdx:b})}}}}).directive("uibTypeaheadMatch",["$templateRequest","$compile","$parse",function(a,b,c){return{scope:{index:"=",match:"=",query:"="},link:function(d,e,f){var g=c(f.templateUrl)(d.$parent)||"template/typeahead/typeahead-match.html";a(g).then(function(a){b(a.trim())(d,function(a){e.replaceWith(a)})})}}}]).filter("uibTypeaheadHighlight",["$sce","$injector","$log",function(a,b,c){function d(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function e(a){return/<.*>/g.test(a)}var f;return f=b.has("$sanitize"),function(b,g){return!f&&e(b)&&c.warn("Unsafe use of typeahead please use ngSanitize"),b=g?(""+b).replace(new RegExp(d(g),"gi"),"<strong>$&</strong>"):b,f||(b=a.trustAsHtml(b)),b}}]),angular.module("ui.bootstrap.typeahead").value("$typeaheadSuppressWarning",!1).service("typeaheadParser",["$parse","uibTypeaheadParser","$log","$typeaheadSuppressWarning",function(a,b,c,d){return d||c.warn("typeaheadParser is now deprecated. Use uibTypeaheadParser instead."),b}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$window","$rootScope","$uibPosition","typeaheadParser","$log","$typeaheadSuppressWarning",function(a,b,c,d,e,f,g,h,i,j,k){var l=[9,13,27,38,40],m=200;return{require:["ngModel","^?ngModelOptions"],link:function(n,o,p,q){function r(){N.moveInProgress||(N.moveInProgress=!0,N.$digest()),V&&d.cancel(V),V=d(function(){N.matches.length&&s(),N.moveInProgress=!1},m)}function s(){N.position=F?h.offset(o):h.position(o),N.position.top+=o.prop("offsetHeight")}k||j.warn("typeahead is now deprecated. Use uib-typeahead instead.");var t=q[0],u=q[1],v=n.$eval(p.typeaheadMinLength);v||0===v||(v=1);var w,x,y=n.$eval(p.typeaheadWaitMs)||0,z=n.$eval(p.typeaheadEditable)!==!1,A=b(p.typeaheadLoading).assign||angular.noop,B=b(p.typeaheadOnSelect),C=angular.isDefined(p.typeaheadSelectOnBlur)?n.$eval(p.typeaheadSelectOnBlur):!1,D=b(p.typeaheadNoResults).assign||angular.noop,E=p.typeaheadInputFormatter?b(p.typeaheadInputFormatter):void 0,F=p.typeaheadAppendToBody?n.$eval(p.typeaheadAppendToBody):!1,G=p.typeaheadAppendToElementId||!1,H=n.$eval(p.typeaheadFocusFirst)!==!1,I=p.typeaheadSelectOnExact?n.$eval(p.typeaheadSelectOnExact):!1,J=b(p.ngModel),K=b(p.ngModel+"($$$p)"),L=function(a,b){return angular.isFunction(J(n))&&u&&u.$options&&u.$options.getterSetter?K(a,{$$$p:b}):J.assign(a,b)},M=i.parse(p.typeahead),N=n.$new(),O=n.$on("$destroy",function(){N.$destroy()});N.$on("$destroy",O);var P="typeahead-"+N.$id+"-"+Math.floor(1e4*Math.random());o.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":P});var Q=angular.element("<div typeahead-popup></div>");Q.attr({id:P,matches:"matches",active:"activeIdx",select:"select(activeIdx)","move-in-progress":"moveInProgress",query:"query",position:"position"}),angular.isDefined(p.typeaheadTemplateUrl)&&Q.attr("template-url",p.typeaheadTemplateUrl),angular.isDefined(p.typeaheadPopupTemplateUrl)&&Q.attr("popup-template-url",p.typeaheadPopupTemplateUrl);var R=function(){N.matches=[],N.activeIdx=-1,o.attr("aria-expanded",!1)},S=function(a){return P+"-option-"+a};N.$watch("activeIdx",function(a){0>a?o.removeAttr("aria-activedescendant"):o.attr("aria-activedescendant",S(a))});var T=function(a,b){return N.matches.length>b&&a?a.toUpperCase()===N.matches[b].label.toUpperCase():!1},U=function(a){var b={$viewValue:a};A(n,!0),D(n,!1),c.when(M.source(n,b)).then(function(c){var d=a===t.$viewValue;if(d&&w)if(c&&c.length>0){N.activeIdx=H?0:-1,D(n,!1),N.matches.length=0;for(var e=0;e<c.length;e++)b[M.itemName]=c[e],N.matches.push({id:S(e),label:M.viewMapper(N,b),model:c[e]});N.query=a,s(),o.attr("aria-expanded",!0),I&&1===N.matches.length&&T(a,0)&&N.select(0)}else R(),D(n,!0);d&&A(n,!1)},function(){R(),A(n,!1),D(n,!0)})};F&&(angular.element(f).bind("resize",r),e.find("body").bind("scroll",r));var V;N.moveInProgress=!1,R(),N.query=void 0;var W,X=function(a){W=d(function(){U(a)},y)},Y=function(){W&&d.cancel(W)};t.$parsers.unshift(function(a){return w=!0,0===v||a&&a.length>=v?y>0?(Y(),X(a)):U(a):(A(n,!1),Y(),R()),z?a:a?void t.$setValidity("editable",!1):(t.$setValidity("editable",!0),null)}),t.$formatters.push(function(a){var b,c,d={};return z||t.$setValidity("editable",!0),E?(d.$model=a,E(n,d)):(d[M.itemName]=a,b=M.viewMapper(n,d),d[M.itemName]=void 0,c=M.viewMapper(n,d),b!==c?b:a)}),N.select=function(a){var b,c,e={};x=!0,e[M.itemName]=c=N.matches[a].model,b=M.modelMapper(n,e),L(n,b),t.$setValidity("editable",!0),t.$setValidity("parse",!0),B(n,{$item:c,$model:b,$label:M.viewMapper(n,e)}),R(),N.$eval(p.typeaheadFocusOnSelect)!==!1&&d(function(){o[0].focus()},0,!1)},o.bind("keydown",function(a){if(0!==N.matches.length&&-1!==l.indexOf(a.which)){if(-1===N.activeIdx&&(9===a.which||13===a.which))return R(),void N.$digest();a.preventDefault(),40===a.which?(N.activeIdx=(N.activeIdx+1)%N.matches.length,N.$digest()):38===a.which?(N.activeIdx=(N.activeIdx>0?N.activeIdx:N.matches.length)-1,N.$digest()):13===a.which||9===a.which?N.$apply(function(){N.select(N.activeIdx)}):27===a.which&&(a.stopPropagation(),R(),N.$digest())}}),o.bind("blur",function(){C&&N.matches.length&&-1!==N.activeIdx&&!x&&(x=!0,N.$apply(function(){N.select(N.activeIdx)})),w=!1,x=!1});var Z=function(a){o[0]!==a.target&&3!==a.which&&0!==N.matches.length&&(R(),g.$$phase||N.$digest())};e.bind("click",Z),n.$on("$destroy",function(){e.unbind("click",Z),(F||G)&&$.remove(),F&&(angular.element(f).unbind("resize",r),e.find("body").unbind("scroll",r)),Q.remove()});var $=a(Q)(N);F?e.find("body").append($):G!==!1?angular.element(e[0].getElementById(G)).append($):o.after($)}}}]).directive("typeaheadPopup",["$typeaheadSuppressWarning","$log",function(a,b){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&"},replace:!0,templateUrl:function(a,b){return b.popupTemplateUrl||"template/typeahead/typeahead-popup.html"},link:function(c,d,e){a||b.warn("typeahead-popup is now deprecated. Use uib-typeahead-popup instead."),c.templateUrl=e.templateUrl,c.isOpen=function(){return c.matches.length>0},c.isActive=function(a){return c.active==a},c.selectActive=function(a){c.active=a},c.selectMatch=function(a){c.select({activeIdx:a})}}}}]).directive("typeaheadMatch",["$templateRequest","$compile","$parse","$typeaheadSuppressWarning","$log",function(a,b,c,d,e){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(f,g,h){d||e.warn("typeahead-match is now deprecated. Use uib-typeahead-match instead.");var i=c(h.templateUrl)(f.$parent)||"template/typeahead/typeahead-match.html";a(i).then(function(a){b(a.trim())(f,function(a){g.replaceWith(a)})})}}}]).filter("typeaheadHighlight",["$sce","$injector","$log","$typeaheadSuppressWarning",function(a,b,c,d){function e(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function f(a){return/<.*>/g.test(a)}var g;return g=b.has("$sanitize"),function(b,h){return d||c.warn("typeaheadHighlight is now deprecated. Use uibTypeaheadHighlight instead."),!g&&f(b)&&c.warn("Unsafe use of typeahead please use ngSanitize"),b=h?(""+b).replace(new RegExp(e(h),"gi"),"<strong>$&</strong>"):b,g||(b=a.trustAsHtml(b)),b}}]),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion-group.html",'<div class="panel {{panelClass || \'panel-default\'}}">\n  <div class="panel-heading" ng-keypress="toggleOpen($event)">\n    <h4 class="panel-title">\n      <a href tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" uib-accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse collapse" uib-collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissible\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close({$event: $event})">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n  <div class="carousel-inner" ng-transclude></div>\n  <a role="button" href class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1">\n    <span aria-hidden="true" class="glyphicon glyphicon-chevron-left"></span>\n    <span class="sr-only">previous</span>\n  </a>\n  <a role="button" href class="right carousel-control" ng-click="next()" ng-show="slides.length > 1">\n    <span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>\n    <span class="sr-only">next</span>\n  </a>\n  <ol class="carousel-indicators" ng-show="slides.length > 1">\n    <li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{ active: isActive(slide) }" ng-click="select(slide)">\n      <span class="sr-only">slide {{ $index + 1 }} of {{ slides.length }}<span ng-if="isActive(slide)">, currently active</span></span>\n    </li>\n  </ol>\n</div>')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("template/carousel/slide.html",'<div ng-class="{\n    \'active\': active\n  }" class="item text-center" ng-transclude></div>\n')}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <uib-daypicker ng-switch-when="day" tabindex="0"></uib-daypicker>\n  <uib-monthpicker ng-switch-when="month" tabindex="0"></uib-monthpicker>\n  <uib-yearpicker ng-switch-when="year" tabindex="0"></uib-yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-if="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}" ng-class="::dt.customClass">\n        <button type="button" style="min-width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}" ng-class="::dt.customClass">\n        <button type="button" style="min-width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/popup.html",'<ul class="dropdown-menu" dropdown-nested ng-if="isOpen" style="display: block" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n	<li ng-transclude></li>\n	<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n		<span class="btn-group pull-left">\n			<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>\n			<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n	</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}" ng-class="::dt.customClass">\n        <button type="button" style="min-width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("template/modal/backdrop.html",'<div uib-modal-animation-class="fade"\n     modal-in-class="in"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(a){a.put("template/modal/window.html",'<div modal-render="{{$isRendered}}" tabindex="-1" role="dialog" class="modal"\n    uib-modal-animation-class="fade"\n    modal-in-class="in"\n    ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}">\n    <div class="modal-dialog" ng-class="size ? \'modal-\' + size : \'\'"><div class="modal-content" uib-modal-transclude></div></div>\n</div>\n')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious()||ngDisabled, previous: align}"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext()||ngDisabled, next: align}"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n</ul>\n')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)">{{::getText(\'first\')}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)">{{page.text}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)">{{::getText(\'last\')}}</a></li>\n</ul>\n')}]),angular.module("template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-popup.html",'<div\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-popup.html",'<div\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-template-popup.html",'<div\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner"\n    uib-tooltip-template-transclude="contentExp()"\n    tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')}]),angular.module("template/popover/popover-html.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover-html.html",'<div tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content" ng-bind-html="contentExp()"></div>\n  </div>\n</div>\n')}]),angular.module("template/popover/popover-template.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover-template.html",'<div tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content"\n        uib-tooltip-template-transclude="contentExp()"\n        tooltip-template-transclude-scope="originScope()"></div>\n  </div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover.html",'<div tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" style="min-width: 0;" ng-transclude></div>\n')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progress.html",'<div class="progress" ng-transclude aria-labelledby="{{::title}}"></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" style="min-width: 0;" ng-transclude></div>\n</div>\n')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <span ng-repeat-start="r in range track by $index" class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    <i ng-repeat-end ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')" ng-attr-title="{{r.title}}" aria-valuetext="{{r.title}}"></i>\n</span>\n');
}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a href ng-click="select()" uib-tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         uib-tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("template/timepicker/timepicker.html",'<table>\n  <tbody>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link" ng-disabled="noIncrementHours()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td>&nbsp;</td>\n      <td><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link" ng-disabled="noIncrementMinutes()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n    <tr>\n      <td class="form-group" ng-class="{\'has-error\': invalidHours}">\n        <input style="width:50px;" type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}">\n      </td>\n      <td>:</td>\n      <td class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n        <input style="width:50px;" type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}">\n      </td>\n      <td ng-show="showMeridian"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()" ng-disabled="noToggleMeridian()" tabindex="{{::tabindex}}">{{meridian}}</button></td>\n    </tr>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td><a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link" ng-disabled="noDecrementHours()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td>&nbsp;</td>\n      <td><a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link" ng-disabled="noDecrementMinutes()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-match.html",'<a href tabindex="-1" ng-bind-html="match.label | uibTypeaheadHighlight:query"></a>\n')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{::match.id}}">\n        <div uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),!angular.$$csp()&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>');
!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.moment=b()}(this,function(){"use strict";function a(){return Md.apply(null,arguments)}function b(a){Md=a}function c(a){return"[object Array]"===Object.prototype.toString.call(a)}function d(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function e(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function f(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function g(a,b){for(var c in b)f(b,c)&&(a[c]=b[c]);return f(b,"toString")&&(a.toString=b.toString),f(b,"valueOf")&&(a.valueOf=b.valueOf),a}function h(a,b,c,d){return Ca(a,b,c,d,!0).utc()}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function j(a){return null==a._pf&&(a._pf=i()),a._pf}function k(a){if(null==a._isValid){var b=j(a);a._isValid=!(isNaN(a._d.getTime())||!(b.overflow<0)||b.empty||b.invalidMonth||b.invalidWeekday||b.nullInput||b.invalidFormat||b.userInvalidated),a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function l(a){var b=h(NaN);return null!=a?g(j(b),a):j(b).userInvalidated=!0,b}function m(a,b){var c,d,e;if("undefined"!=typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),"undefined"!=typeof b._i&&(a._i=b._i),"undefined"!=typeof b._f&&(a._f=b._f),"undefined"!=typeof b._l&&(a._l=b._l),"undefined"!=typeof b._strict&&(a._strict=b._strict),"undefined"!=typeof b._tzm&&(a._tzm=b._tzm),"undefined"!=typeof b._isUTC&&(a._isUTC=b._isUTC),"undefined"!=typeof b._offset&&(a._offset=b._offset),"undefined"!=typeof b._pf&&(a._pf=j(b)),"undefined"!=typeof b._locale&&(a._locale=b._locale),Od.length>0)for(c in Od)d=Od[c],e=b[d],"undefined"!=typeof e&&(a[d]=e);return a}function n(b){m(this,b),this._d=new Date(null!=b._d?b._d.getTime():NaN),Pd===!1&&(Pd=!0,a.updateOffset(this),Pd=!1)}function o(a){return a instanceof n||null!=a&&null!=a._isAMomentObject}function p(a){return 0>a?Math.ceil(a):Math.floor(a)}function q(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=p(b)),c}function r(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&q(a[d])!==q(b[d]))&&g++;return g+f}function s(){}function t(a){return a?a.toLowerCase().replace("_","-"):a}function u(a){for(var b,c,d,e,f=0;f<a.length;){for(e=t(a[f]).split("-"),b=e.length,c=t(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=v(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&r(e,c,!0)>=b-1)break;b--}f++}return null}function v(a){var b=null;if(!Qd[a]&&"undefined"!=typeof module&&module&&module.exports)try{b=Nd._abbr,require("./locale/"+a),w(b)}catch(c){}return Qd[a]}function w(a,b){var c;return a&&(c="undefined"==typeof b?y(a):x(a,b),c&&(Nd=c)),Nd._abbr}function x(a,b){return null!==b?(b.abbr=a,Qd[a]=Qd[a]||new s,Qd[a].set(b),w(a),Qd[a]):(delete Qd[a],null)}function y(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return Nd;if(!c(a)){if(b=v(a))return b;a=[a]}return u(a)}function z(a,b){var c=a.toLowerCase();Rd[c]=Rd[c+"s"]=Rd[b]=a}function A(a){return"string"==typeof a?Rd[a]||Rd[a.toLowerCase()]:void 0}function B(a){var b,c,d={};for(c in a)f(a,c)&&(b=A(c),b&&(d[b]=a[c]));return d}function C(b,c){return function(d){return null!=d?(E(this,b,d),a.updateOffset(this,c),this):D(this,b)}}function D(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function E(a,b,c){return a._d["set"+(a._isUTC?"UTC":"")+b](c)}function F(a,b){var c;if("object"==typeof a)for(c in a)this.set(c,a[c]);else if(a=A(a),"function"==typeof this[a])return this[a](b);return this}function G(a,b,c){var d=""+Math.abs(a),e=b-d.length,f=a>=0;return(f?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}function H(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(Vd[a]=e),b&&(Vd[b[0]]=function(){return G(e.apply(this,arguments),b[1],b[2])}),c&&(Vd[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function I(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function J(a){var b,c,d=a.match(Sd);for(b=0,c=d.length;c>b;b++)Vd[d[b]]?d[b]=Vd[d[b]]:d[b]=I(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function K(a,b){return a.isValid()?(b=L(b,a.localeData()),Ud[b]=Ud[b]||J(b),Ud[b](a)):a.localeData().invalidDate()}function L(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Td.lastIndex=0;d>=0&&Td.test(a);)a=a.replace(Td,c),Td.lastIndex=0,d-=1;return a}function M(a){return"function"==typeof a&&"[object Function]"===Object.prototype.toString.call(a)}function N(a,b,c){ie[a]=M(b)?b:function(a){return a&&c?c:b}}function O(a,b){return f(ie,a)?ie[a](b._strict,b._locale):new RegExp(P(a))}function P(a){return a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Q(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),"number"==typeof b&&(d=function(a,c){c[b]=q(a)}),c=0;c<a.length;c++)je[a[c]]=d}function R(a,b){Q(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function S(a,b,c){null!=b&&f(je,a)&&je[a](b,c._a,c,a)}function T(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function U(a){return this._months[a.month()]}function V(a){return this._monthsShort[a.month()]}function W(a,b,c){var d,e,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){if(e=h([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}function X(a,b){var c;return"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),T(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function Y(b){return null!=b?(X(this,b),a.updateOffset(this,!0),this):D(this,"Month")}function Z(){return T(this.year(),this.month())}function $(a){var b,c=a._a;return c&&-2===j(a).overflow&&(b=c[le]<0||c[le]>11?le:c[me]<1||c[me]>T(c[ke],c[le])?me:c[ne]<0||c[ne]>24||24===c[ne]&&(0!==c[oe]||0!==c[pe]||0!==c[qe])?ne:c[oe]<0||c[oe]>59?oe:c[pe]<0||c[pe]>59?pe:c[qe]<0||c[qe]>999?qe:-1,j(a)._overflowDayOfYear&&(ke>b||b>me)&&(b=me),j(a).overflow=b),a}function _(b){a.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function aa(a,b){var c=!0;return g(function(){return c&&(_(a+"\n"+(new Error).stack),c=!1),b.apply(this,arguments)},b)}function ba(a,b){te[a]||(_(b),te[a]=!0)}function ca(a){var b,c,d=a._i,e=ue.exec(d);if(e){for(j(a).iso=!0,b=0,c=ve.length;c>b;b++)if(ve[b][1].exec(d)){a._f=ve[b][0];break}for(b=0,c=we.length;c>b;b++)if(we[b][1].exec(d)){a._f+=(e[6]||" ")+we[b][0];break}d.match(fe)&&(a._f+="Z"),va(a)}else a._isValid=!1}function da(b){var c=xe.exec(b._i);return null!==c?void(b._d=new Date(+c[1])):(ca(b),void(b._isValid===!1&&(delete b._isValid,a.createFromInputFallback(b))))}function ea(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function fa(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function ga(a){return ha(a)?366:365}function ha(a){return a%4===0&&a%100!==0||a%400===0}function ia(){return ha(this.year())}function ja(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=Da(a).add(f,"d"),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function ka(a){return ja(a,this._week.dow,this._week.doy).week}function la(){return this._week.dow}function ma(){return this._week.doy}function na(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")}function oa(a){var b=ja(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")}function pa(a,b,c,d,e){var f,g=6+e-d,h=fa(a,0,1+g),i=h.getUTCDay();return e>i&&(i+=7),c=null!=c?1*c:e,f=1+g+7*(b-1)-i+c,{year:f>0?a:a-1,dayOfYear:f>0?f:ga(a-1)+f}}function qa(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")}function ra(a,b,c){return null!=a?a:null!=b?b:c}function sa(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function ta(a){var b,c,d,e,f=[];if(!a._d){for(d=sa(a),a._w&&null==a._a[me]&&null==a._a[le]&&ua(a),a._dayOfYear&&(e=ra(a._a[ke],d[ke]),a._dayOfYear>ga(e)&&(j(a)._overflowDayOfYear=!0),c=fa(e,0,a._dayOfYear),a._a[le]=c.getUTCMonth(),a._a[me]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=f[b]=d[b];for(;7>b;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[ne]&&0===a._a[oe]&&0===a._a[pe]&&0===a._a[qe]&&(a._nextDay=!0,a._a[ne]=0),a._d=(a._useUTC?fa:ea).apply(null,f),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[ne]=24)}}function ua(a){var b,c,d,e,f,g,h;b=a._w,null!=b.GG||null!=b.W||null!=b.E?(f=1,g=4,c=ra(b.GG,a._a[ke],ja(Da(),1,4).year),d=ra(b.W,1),e=ra(b.E,1)):(f=a._locale._week.dow,g=a._locale._week.doy,c=ra(b.gg,a._a[ke],ja(Da(),f,g).year),d=ra(b.w,1),null!=b.d?(e=b.d,f>e&&++d):e=null!=b.e?b.e+f:f),h=pa(c,d,e,g,f),a._a[ke]=h.year,a._dayOfYear=h.dayOfYear}function va(b){if(b._f===a.ISO_8601)return void ca(b);b._a=[],j(b).empty=!0;var c,d,e,f,g,h=""+b._i,i=h.length,k=0;for(e=L(b._f,b._locale).match(Sd)||[],c=0;c<e.length;c++)f=e[c],d=(h.match(O(f,b))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&j(b).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),k+=d.length),Vd[f]?(d?j(b).empty=!1:j(b).unusedTokens.push(f),S(f,d,b)):b._strict&&!d&&j(b).unusedTokens.push(f);j(b).charsLeftOver=i-k,h.length>0&&j(b).unusedInput.push(h),j(b).bigHour===!0&&b._a[ne]<=12&&b._a[ne]>0&&(j(b).bigHour=void 0),b._a[ne]=wa(b._locale,b._a[ne],b._meridiem),ta(b),$(b)}function wa(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}function xa(a){var b,c,d,e,f;if(0===a._f.length)return j(a).invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=m({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],va(b),k(b)&&(f+=j(b).charsLeftOver,f+=10*j(b).unusedTokens.length,j(b).score=f,(null==d||d>f)&&(d=f,c=b));g(a,c||b)}function ya(a){if(!a._d){var b=B(a._i);a._a=[b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],ta(a)}}function za(a){var b=new n($(Aa(a)));return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}function Aa(a){var b=a._i,e=a._f;return a._locale=a._locale||y(a._l),null===b||void 0===e&&""===b?l({nullInput:!0}):("string"==typeof b&&(a._i=b=a._locale.preparse(b)),o(b)?new n($(b)):(c(e)?xa(a):e?va(a):d(b)?a._d=b:Ba(a),a))}function Ba(b){var f=b._i;void 0===f?b._d=new Date:d(f)?b._d=new Date(+f):"string"==typeof f?da(b):c(f)?(b._a=e(f.slice(0),function(a){return parseInt(a,10)}),ta(b)):"object"==typeof f?ya(b):"number"==typeof f?b._d=new Date(f):a.createFromInputFallback(b)}function Ca(a,b,c,d,e){var f={};return"boolean"==typeof c&&(d=c,c=void 0),f._isAMomentObject=!0,f._useUTC=f._isUTC=e,f._l=c,f._i=a,f._f=b,f._strict=d,za(f)}function Da(a,b,c,d){return Ca(a,b,c,d,!1)}function Ea(a,b){var d,e;if(1===b.length&&c(b[0])&&(b=b[0]),!b.length)return Da();for(d=b[0],e=1;e<b.length;++e)(!b[e].isValid()||b[e][a](d))&&(d=b[e]);return d}function Fa(){var a=[].slice.call(arguments,0);return Ea("isBefore",a)}function Ga(){var a=[].slice.call(arguments,0);return Ea("isAfter",a)}function Ha(a){var b=B(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=y(),this._bubble()}function Ia(a){return a instanceof Ha}function Ja(a,b){H(a,0,0,function(){var a=this.utcOffset(),c="+";return 0>a&&(a=-a,c="-"),c+G(~~(a/60),2)+b+G(~~a%60,2)})}function Ka(a){var b=(a||"").match(fe)||[],c=b[b.length-1]||[],d=(c+"").match(Ce)||["-",0,0],e=+(60*d[1])+q(d[2]);return"+"===d[0]?e:-e}function La(b,c){var e,f;return c._isUTC?(e=c.clone(),f=(o(b)||d(b)?+b:+Da(b))-+e,e._d.setTime(+e._d+f),a.updateOffset(e,!1),e):Da(b).local()}function Ma(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Na(b,c){var d,e=this._offset||0;return null!=b?("string"==typeof b&&(b=Ka(b)),Math.abs(b)<16&&(b=60*b),!this._isUTC&&c&&(d=Ma(this)),this._offset=b,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==b&&(!c||this._changeInProgress?bb(this,Ya(b-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?e:Ma(this)}function Oa(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Pa(a){return this.utcOffset(0,a)}function Qa(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Ma(this),"m")),this}function Ra(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ka(this._i)),this}function Sa(a){return a=a?Da(a).utcOffset():0,(this.utcOffset()-a)%60===0}function Ta(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ua(){if("undefined"!=typeof this._isDSTShifted)return this._isDSTShifted;var a={};if(m(a,this),a=Aa(a),a._a){var b=a._isUTC?h(a._a):Da(a._a);this._isDSTShifted=this.isValid()&&r(a._a,b.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Va(){return!this._isUTC}function Wa(){return this._isUTC}function Xa(){return this._isUTC&&0===this._offset}function Ya(a,b){var c,d,e,g=a,h=null;return Ia(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(g={},b?g[b]=a:g.milliseconds=a):(h=De.exec(a))?(c="-"===h[1]?-1:1,g={y:0,d:q(h[me])*c,h:q(h[ne])*c,m:q(h[oe])*c,s:q(h[pe])*c,ms:q(h[qe])*c}):(h=Ee.exec(a))?(c="-"===h[1]?-1:1,g={y:Za(h[2],c),M:Za(h[3],c),d:Za(h[4],c),h:Za(h[5],c),m:Za(h[6],c),s:Za(h[7],c),w:Za(h[8],c)}):null==g?g={}:"object"==typeof g&&("from"in g||"to"in g)&&(e=_a(Da(g.from),Da(g.to)),g={},g.ms=e.milliseconds,g.M=e.months),d=new Ha(g),Ia(a)&&f(a,"_locale")&&(d._locale=a._locale),d}function Za(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function $a(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function _a(a,b){var c;return b=La(b,a),a.isBefore(b)?c=$a(a,b):(c=$a(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function ab(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(ba(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=Ya(c,d),bb(this,e,a),this}}function bb(b,c,d,e){var f=c._milliseconds,g=c._days,h=c._months;e=null==e?!0:e,f&&b._d.setTime(+b._d+f*d),g&&E(b,"Date",D(b,"Date")+g*d),h&&X(b,D(b,"Month")+h*d),e&&a.updateOffset(b,g||h)}function cb(a,b){var c=a||Da(),d=La(c,this).startOf("day"),e=this.diff(d,"days",!0),f=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(b&&b[f]||this.localeData().calendar(f,this,Da(c)))}function db(){return new n(this)}function eb(a,b){var c;return b=A("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=o(a)?a:Da(a),+this>+a):(c=o(a)?+a:+Da(a),c<+this.clone().startOf(b))}function fb(a,b){var c;return b=A("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=o(a)?a:Da(a),+a>+this):(c=o(a)?+a:+Da(a),+this.clone().endOf(b)<c)}function gb(a,b,c){return this.isAfter(a,c)&&this.isBefore(b,c)}function hb(a,b){var c;return b=A(b||"millisecond"),"millisecond"===b?(a=o(a)?a:Da(a),+this===+a):(c=+Da(a),+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b))}function ib(a,b,c){var d,e,f=La(a,this),g=6e4*(f.utcOffset()-this.utcOffset());return b=A(b),"year"===b||"month"===b||"quarter"===b?(e=jb(this,f),"quarter"===b?e/=3:"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:p(e)}function jb(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return 0>b-f?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)}function kb(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function lb(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():K(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):K(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function mb(b){var c=K(this,b||a.defaultFormat);return this.localeData().postformat(c)}function nb(a,b){return this.isValid()?Ya({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function ob(a){return this.from(Da(),a)}function pb(a,b){return this.isValid()?Ya({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function qb(a){return this.to(Da(),a)}function rb(a){var b;return void 0===a?this._locale._abbr:(b=y(a),null!=b&&(this._locale=b),this)}function sb(){return this._locale}function tb(a){switch(a=A(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this}function ub(a){return a=A(a),void 0===a||"millisecond"===a?this:this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")}function vb(){return+this._d-6e4*(this._offset||0)}function wb(){return Math.floor(+this/1e3)}function xb(){return this._offset?new Date(+this):this._d}function yb(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function zb(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}}function Ab(){return k(this)}function Bb(){return g({},j(this))}function Cb(){return j(this).overflow}function Db(a,b){H(0,[a,a.length],0,b)}function Eb(a,b,c){return ja(Da([a,11,31+b-c]),b,c).week}function Fb(a){var b=ja(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")}function Gb(a){var b=ja(this,1,4).year;return null==a?b:this.add(a-b,"y")}function Hb(){return Eb(this.year(),1,4)}function Ib(){var a=this.localeData()._week;return Eb(this.year(),a.dow,a.doy)}function Jb(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)}function Kb(a,b){return"string"!=typeof a?a:isNaN(a)?(a=b.weekdaysParse(a),"number"==typeof a?a:null):parseInt(a,10)}function Lb(a){return this._weekdays[a.day()]}function Mb(a){return this._weekdaysShort[a.day()]}function Nb(a){return this._weekdaysMin[a.day()]}function Ob(a){var b,c,d;for(this._weekdaysParse=this._weekdaysParse||[],b=0;7>b;b++)if(this._weekdaysParse[b]||(c=Da([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b}function Pb(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Kb(a,this.localeData()),this.add(a-b,"d")):b}function Qb(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")}function Rb(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)}function Sb(a,b){H(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Tb(a,b){return b._meridiemParse}function Ub(a){return"p"===(a+"").toLowerCase().charAt(0)}function Vb(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"}function Wb(a,b){b[qe]=q(1e3*("0."+a))}function Xb(){return this._isUTC?"UTC":""}function Yb(){return this._isUTC?"Coordinated Universal Time":""}function Zb(a){return Da(1e3*a)}function $b(){return Da.apply(null,arguments).parseZone()}function _b(a,b,c){var d=this._calendar[a];return"function"==typeof d?d.call(b,c):d}function ac(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])}function bc(){return this._invalidDate}function cc(a){return this._ordinal.replace("%d",a)}function dc(a){return a}function ec(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)}function fc(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)}function gc(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function hc(a,b,c,d){var e=y(),f=h().set(d,b);return e[c](f,a)}function ic(a,b,c,d,e){if("number"==typeof a&&(b=a,a=void 0),a=a||"",null!=b)return hc(a,b,c,e);var f,g=[];for(f=0;d>f;f++)g[f]=hc(a,f,c,e);return g}function jc(a,b){return ic(a,b,"months",12,"month")}function kc(a,b){return ic(a,b,"monthsShort",12,"month")}function lc(a,b){return ic(a,b,"weekdays",7,"day")}function mc(a,b){return ic(a,b,"weekdaysShort",7,"day")}function nc(a,b){return ic(a,b,"weekdaysMin",7,"day")}function oc(){var a=this._data;return this._milliseconds=_e(this._milliseconds),this._days=_e(this._days),this._months=_e(this._months),a.milliseconds=_e(a.milliseconds),a.seconds=_e(a.seconds),a.minutes=_e(a.minutes),a.hours=_e(a.hours),a.months=_e(a.months),a.years=_e(a.years),this}function pc(a,b,c,d){var e=Ya(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function qc(a,b){return pc(this,a,b,1)}function rc(a,b){return pc(this,a,b,-1)}function sc(a){return 0>a?Math.floor(a):Math.ceil(a)}function tc(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;return f>=0&&g>=0&&h>=0||0>=f&&0>=g&&0>=h||(f+=864e5*sc(vc(h)+g),g=0,h=0),i.milliseconds=f%1e3,a=p(f/1e3),i.seconds=a%60,b=p(a/60),i.minutes=b%60,c=p(b/60),i.hours=c%24,g+=p(c/24),e=p(uc(g)),h+=e,g-=sc(vc(e)),d=p(h/12),h%=12,i.days=g,i.months=h,i.years=d,this}function uc(a){return 4800*a/146097}function vc(a){return 146097*a/4800}function wc(a){var b,c,d=this._milliseconds;if(a=A(a),"month"===a||"year"===a)return b=this._days+d/864e5,c=this._months+uc(b),"month"===a?c:c/12;switch(b=this._days+Math.round(vc(this._months)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}}function xc(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*q(this._months/12)}function yc(a){return function(){return this.as(a)}}function zc(a){return a=A(a),this[a+"s"]()}function Ac(a){return function(){return this._data[a]}}function Bc(){return p(this.days()/7)}function Cc(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function Dc(a,b,c){var d=Ya(a).abs(),e=qf(d.as("s")),f=qf(d.as("m")),g=qf(d.as("h")),h=qf(d.as("d")),i=qf(d.as("M")),j=qf(d.as("y")),k=e<rf.s&&["s",e]||1===f&&["m"]||f<rf.m&&["mm",f]||1===g&&["h"]||g<rf.h&&["hh",g]||1===h&&["d"]||h<rf.d&&["dd",h]||1===i&&["M"]||i<rf.M&&["MM",i]||1===j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,Cc.apply(null,k)}function Ec(a,b){return void 0===rf[a]?!1:void 0===b?rf[a]:(rf[a]=b,!0)}function Fc(a){var b=this.localeData(),c=Dc(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function Gc(){var a,b,c,d=sf(this._milliseconds)/1e3,e=sf(this._days),f=sf(this._months);a=p(d/60),b=p(a/60),d%=60,a%=60,c=p(f/12),f%=12;var g=c,h=f,i=e,j=b,k=a,l=d,m=this.asSeconds();return m?(0>m?"-":"")+"P"+(g?g+"Y":"")+(h?h+"M":"")+(i?i+"D":"")+(j||k||l?"T":"")+(j?j+"H":"")+(k?k+"M":"")+(l?l+"S":""):"P0D"}
//! moment.js locale configuration
//! locale : belarusian (be)
//! author : Dmitry Demidov : https://github.com/demidov91
//! author: Praleska: http://praleska.pro/
//! Author : Menelion Elensúle : https://github.com/Oire
function Hc(a,b){var c=a.split("_");return b%10===1&&b%100!==11?c[0]:b%10>=2&&4>=b%10&&(10>b%100||b%100>=20)?c[1]:c[2]}function Ic(a,b,c){var d={mm:b?"хвіліна_хвіліны_хвілін":"хвіліну_хвіліны_хвілін",hh:b?"гадзіна_гадзіны_гадзін":"гадзіну_гадзіны_гадзін",dd:"дзень_дні_дзён",MM:"месяц_месяцы_месяцаў",yy:"год_гады_гадоў"};return"m"===c?b?"хвіліна":"хвіліну":"h"===c?b?"гадзіна":"гадзіну":a+" "+Hc(d[c],+a)}function Jc(a,b){var c={nominative:"студзень_люты_сакавік_красавік_травень_чэрвень_ліпень_жнівень_верасень_кастрычнік_лістапад_снежань".split("_"),accusative:"студзеня_лютага_сакавіка_красавіка_траўня_чэрвеня_ліпеня_жніўня_верасня_кастрычніка_лістапада_снежня".split("_")},d=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(b)?"accusative":"nominative";return c[d][a.month()]}function Kc(a,b){var c={nominative:"нядзеля_панядзелак_аўторак_серада_чацвер_пятніца_субота".split("_"),accusative:"нядзелю_панядзелак_аўторак_сераду_чацвер_пятніцу_суботу".split("_")},d=/\[ ?[Вв] ?(?:мінулую|наступную)? ?\] ?dddd/.test(b)?"accusative":"nominative";return c[d][a.day()]}
//! moment.js locale configuration
//! locale : breton (br)
//! author : Jean-Baptiste Le Duigou : https://github.com/jbleduigou
function Lc(a,b,c){var d={mm:"munutenn",MM:"miz",dd:"devezh"};return a+" "+Oc(d[c],a)}function Mc(a){switch(Nc(a)){case 1:case 3:case 4:case 5:case 9:return a+" bloaz";default:return a+" vloaz"}}function Nc(a){return a>9?Nc(a%10):a}function Oc(a,b){return 2===b?Pc(a):a}function Pc(a){var b={m:"v",b:"v",d:"z"};return void 0===b[a.charAt(0)]?a:b[a.charAt(0)]+a.substring(1)}
//! moment.js locale configuration
//! locale : bosnian (bs)
//! author : Nedim Cholich : https://github.com/frontyard
//! based on (hr) translation by Bojan Marković
function Qc(a,b,c){var d=a+" ";switch(c){case"m":return b?"jedna minuta":"jedne minute";case"mm":return d+=1===a?"minuta":2===a||3===a||4===a?"minute":"minuta";case"h":return b?"jedan sat":"jednog sata";case"hh":return d+=1===a?"sat":2===a||3===a||4===a?"sata":"sati";case"dd":return d+=1===a?"dan":"dana";case"MM":return d+=1===a?"mjesec":2===a||3===a||4===a?"mjeseca":"mjeseci";case"yy":return d+=1===a?"godina":2===a||3===a||4===a?"godine":"godina"}}function Rc(a){return a>1&&5>a&&1!==~~(a/10)}function Sc(a,b,c,d){var e=a+" ";switch(c){case"s":return b||d?"pár sekund":"pár sekundami";case"m":return b?"minuta":d?"minutu":"minutou";case"mm":return b||d?e+(Rc(a)?"minuty":"minut"):e+"minutami";break;case"h":return b?"hodina":d?"hodinu":"hodinou";case"hh":return b||d?e+(Rc(a)?"hodiny":"hodin"):e+"hodinami";break;case"d":return b||d?"den":"dnem";case"dd":return b||d?e+(Rc(a)?"dny":"dní"):e+"dny";break;case"M":return b||d?"měsíc":"měsícem";case"MM":return b||d?e+(Rc(a)?"měsíce":"měsíců"):e+"měsíci";break;case"y":return b||d?"rok":"rokem";case"yy":return b||d?e+(Rc(a)?"roky":"let"):e+"lety"}}
//! moment.js locale configuration
//! locale : austrian german (de-at)
//! author : lluchs : https://github.com/lluchs
//! author: Menelion Elensúle: https://github.com/Oire
//! author : Martin Groller : https://github.com/MadMG
function Tc(a,b,c,d){var e={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[a+" Tage",a+" Tagen"],M:["ein Monat","einem Monat"],MM:[a+" Monate",a+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[a+" Jahre",a+" Jahren"]};return b?e[c][0]:e[c][1]}
//! moment.js locale configuration
//! locale : german (de)
//! author : lluchs : https://github.com/lluchs
//! author: Menelion Elensúle: https://github.com/Oire
function Uc(a,b,c,d){var e={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[a+" Tage",a+" Tagen"],M:["ein Monat","einem Monat"],MM:[a+" Monate",a+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[a+" Jahre",a+" Jahren"]};return b?e[c][0]:e[c][1]}
//! moment.js locale configuration
//! locale : estonian (et)
//! author : Henry Kehlmann : https://github.com/madhenry
//! improvements : Illimar Tambek : https://github.com/ragulka
function Vc(a,b,c,d){var e={s:["mõne sekundi","mõni sekund","paar sekundit"],m:["ühe minuti","üks minut"],mm:[a+" minuti",a+" minutit"],h:["ühe tunni","tund aega","üks tund"],hh:[a+" tunni",a+" tundi"],d:["ühe päeva","üks päev"],M:["kuu aja","kuu aega","üks kuu"],MM:[a+" kuu",a+" kuud"],y:["ühe aasta","aasta","üks aasta"],yy:[a+" aasta",a+" aastat"]};return b?e[c][2]?e[c][2]:e[c][1]:d?e[c][0]:e[c][1]}function Wc(a,b,c,d){var e="";switch(c){case"s":return d?"muutaman sekunnin":"muutama sekunti";case"m":return d?"minuutin":"minuutti";case"mm":e=d?"minuutin":"minuuttia";break;case"h":return d?"tunnin":"tunti";case"hh":e=d?"tunnin":"tuntia";break;case"d":return d?"päivän":"päivä";case"dd":e=d?"päivän":"päivää";break;case"M":return d?"kuukauden":"kuukausi";case"MM":e=d?"kuukauden":"kuukautta";break;case"y":return d?"vuoden":"vuosi";case"yy":e=d?"vuoden":"vuotta"}return e=Xc(a,d)+" "+e}function Xc(a,b){return 10>a?b?Pf[a]:Of[a]:a}
//! moment.js locale configuration
//! locale : hrvatski (hr)
//! author : Bojan Marković : https://github.com/bmarkovic
function Yc(a,b,c){var d=a+" ";switch(c){case"m":return b?"jedna minuta":"jedne minute";case"mm":return d+=1===a?"minuta":2===a||3===a||4===a?"minute":"minuta";case"h":return b?"jedan sat":"jednog sata";case"hh":return d+=1===a?"sat":2===a||3===a||4===a?"sata":"sati";case"dd":return d+=1===a?"dan":"dana";case"MM":return d+=1===a?"mjesec":2===a||3===a||4===a?"mjeseca":"mjeseci";case"yy":return d+=1===a?"godina":2===a||3===a||4===a?"godine":"godina"}}function Zc(a,b,c,d){var e=a;switch(c){case"s":return d||b?"néhány másodperc":"néhány másodperce";case"m":return"egy"+(d||b?" perc":" perce");case"mm":return e+(d||b?" perc":" perce");case"h":return"egy"+(d||b?" óra":" órája");case"hh":return e+(d||b?" óra":" órája");case"d":return"egy"+(d||b?" nap":" napja");case"dd":return e+(d||b?" nap":" napja");case"M":return"egy"+(d||b?" hónap":" hónapja");case"MM":return e+(d||b?" hónap":" hónapja");case"y":return"egy"+(d||b?" év":" éve");case"yy":return e+(d||b?" év":" éve")}return""}function $c(a){return(a?"":"[múlt] ")+"["+Uf[this.day()]+"] LT[-kor]"}
//! moment.js locale configuration
//! locale : Armenian (hy-am)
//! author : Armendarabyan : https://github.com/armendarabyan
function _c(a,b){var c={nominative:"հունվար_փետրվար_մարտ_ապրիլ_մայիս_հունիս_հուլիս_օգոստոս_սեպտեմբեր_հոկտեմբեր_նոյեմբեր_դեկտեմբեր".split("_"),accusative:"հունվարի_փետրվարի_մարտի_ապրիլի_մայիսի_հունիսի_հուլիսի_օգոստոսի_սեպտեմբերի_հոկտեմբերի_նոյեմբերի_դեկտեմբերի".split("_")},d=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(b)?"accusative":"nominative";return c[d][a.month()]}function ad(a,b){var c="հնվ_փտր_մրտ_ապր_մյս_հնս_հլս_օգս_սպտ_հկտ_նմբ_դկտ".split("_");return c[a.month()]}function bd(a,b){var c="կիրակի_երկուշաբթի_երեքշաբթի_չորեքշաբթի_հինգշաբթի_ուրբաթ_շաբաթ".split("_");return c[a.day()]}
//! moment.js locale configuration
//! locale : icelandic (is)
//! author : Hinrik Örn Sigurðsson : https://github.com/hinrik
function cd(a){return a%100===11?!0:a%10===1?!1:!0}function dd(a,b,c,d){var e=a+" ";switch(c){case"s":return b||d?"nokkrar sekúndur":"nokkrum sekúndum";case"m":return b?"mínúta":"mínútu";case"mm":return cd(a)?e+(b||d?"mínútur":"mínútum"):b?e+"mínúta":e+"mínútu";case"hh":return cd(a)?e+(b||d?"klukkustundir":"klukkustundum"):e+"klukkustund";case"d":return b?"dagur":d?"dag":"degi";case"dd":return cd(a)?b?e+"dagar":e+(d?"daga":"dögum"):b?e+"dagur":e+(d?"dag":"degi");case"M":return b?"mánuður":d?"mánuð":"mánuði";case"MM":return cd(a)?b?e+"mánuðir":e+(d?"mánuði":"mánuðum"):b?e+"mánuður":e+(d?"mánuð":"mánuði");case"y":return b||d?"ár":"ári";case"yy":return cd(a)?e+(b||d?"ár":"árum"):e+(b||d?"ár":"ári")}}
//! moment.js locale configuration
//! locale : Georgian (ka)
//! author : Irakli Janiashvili : https://github.com/irakli-janiashvili
function ed(a,b){var c={nominative:"იანვარი_თებერვალი_მარტი_აპრილი_მაისი_ივნისი_ივლისი_აგვისტო_სექტემბერი_ოქტომბერი_ნოემბერი_დეკემბერი".split("_"),accusative:"იანვარს_თებერვალს_მარტს_აპრილის_მაისს_ივნისს_ივლისს_აგვისტს_სექტემბერს_ოქტომბერს_ნოემბერს_დეკემბერს".split("_")},d=/D[oD] *MMMM?/.test(b)?"accusative":"nominative";return c[d][a.month()]}function fd(a,b){var c={nominative:"კვირა_ორშაბათი_სამშაბათი_ოთხშაბათი_ხუთშაბათი_პარასკევი_შაბათი".split("_"),accusative:"კვირას_ორშაბათს_სამშაბათს_ოთხშაბათს_ხუთშაბათს_პარასკევს_შაბათს".split("_")},d=/(წინა|შემდეგ)/.test(b)?"accusative":"nominative";return c[d][a.day()]}
//! moment.js locale configuration
//! locale : Luxembourgish (lb)
//! author : mweimerskirch : https://github.com/mweimerskirch, David Raison : https://github.com/kwisatz
function gd(a,b,c,d){var e={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return b?e[c][0]:e[c][1]}function hd(a){var b=a.substr(0,a.indexOf(" "));return jd(b)?"a "+a:"an "+a}function id(a){var b=a.substr(0,a.indexOf(" "));return jd(b)?"viru "+a:"virun "+a}function jd(a){if(a=parseInt(a,10),isNaN(a))return!1;if(0>a)return!0;if(10>a)return a>=4&&7>=a?!0:!1;if(100>a){var b=a%10,c=a/10;return jd(0===b?c:b)}if(1e4>a){for(;a>=10;)a/=10;return jd(a)}return a/=1e3,jd(a)}function kd(a,b,c,d){return b?"kelios sekundės":d?"kelių sekundžių":"kelias sekundes"}function ld(a,b){var c={nominative:"sausis_vasaris_kovas_balandis_gegužė_birželis_liepa_rugpjūtis_rugsėjis_spalis_lapkritis_gruodis".split("_"),accusative:"sausio_vasario_kovo_balandžio_gegužės_birželio_liepos_rugpjūčio_rugsėjo_spalio_lapkričio_gruodžio".split("_")},d=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(b)?"accusative":"nominative";return c[d][a.month()]}function md(a,b,c,d){return b?od(c)[0]:d?od(c)[1]:od(c)[2]}function nd(a){return a%10===0||a>10&&20>a}function od(a){return Vf[a].split("_")}function pd(a,b,c,d){var e=a+" ";return 1===a?e+md(a,b,c[0],d):b?e+(nd(a)?od(c)[1]:od(c)[0]):d?e+od(c)[1]:e+(nd(a)?od(c)[1]:od(c)[2])}function qd(a,b){var c=-1===b.indexOf("dddd HH:mm"),d=Wf[a.day()];return c?d:d.substring(0,d.length-2)+"į"}function rd(a,b,c){return c?b%10===1&&11!==b?a[2]:a[3]:b%10===1&&11!==b?a[0]:a[1]}function sd(a,b,c){return a+" "+rd(Xf[c],a,b)}function td(a,b,c){return rd(Xf[c],a,b)}function ud(a,b){return b?"dažas sekundes":"dažām sekundēm"}function vd(a){return 5>a%10&&a%10>1&&~~(a/10)%10!==1}function wd(a,b,c){var d=a+" ";switch(c){case"m":return b?"minuta":"minutę";case"mm":return d+(vd(a)?"minuty":"minut");case"h":return b?"godzina":"godzinę";case"hh":return d+(vd(a)?"godziny":"godzin");case"MM":return d+(vd(a)?"miesiące":"miesięcy");case"yy":return d+(vd(a)?"lata":"lat")}}
//! moment.js locale configuration
//! locale : romanian (ro)
//! author : Vlad Gurdiga : https://github.com/gurdiga
//! author : Valentin Agachi : https://github.com/avaly
function xd(a,b,c){var d={mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"},e=" ";return(a%100>=20||a>=100&&a%100===0)&&(e=" de "),a+e+d[c]}
//! moment.js locale configuration
//! locale : russian (ru)
//! author : Viktorminator : https://github.com/Viktorminator
//! Author : Menelion Elensúle : https://github.com/Oire
function yd(a,b){var c=a.split("_");return b%10===1&&b%100!==11?c[0]:b%10>=2&&4>=b%10&&(10>b%100||b%100>=20)?c[1]:c[2]}function zd(a,b,c){var d={mm:b?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"};return"m"===c?b?"минута":"минуту":a+" "+yd(d[c],+a)}function Ad(a,b){var c={nominative:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),accusative:"января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_")},d=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(b)?"accusative":"nominative";return c[d][a.month()]}function Bd(a,b){var c={nominative:"янв_фев_март_апр_май_июнь_июль_авг_сен_окт_ноя_дек".split("_"),accusative:"янв_фев_мар_апр_мая_июня_июля_авг_сен_окт_ноя_дек".split("_")},d=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(b)?"accusative":"nominative";return c[d][a.month()]}function Cd(a,b){var c={nominative:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),accusative:"воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_")},d=/\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?\] ?dddd/.test(b)?"accusative":"nominative";return c[d][a.day()]}function Dd(a){return a>1&&5>a}function Ed(a,b,c,d){var e=a+" ";switch(c){case"s":return b||d?"pár sekúnd":"pár sekundami";case"m":return b?"minúta":d?"minútu":"minútou";case"mm":return b||d?e+(Dd(a)?"minúty":"minút"):e+"minútami";break;case"h":return b?"hodina":d?"hodinu":"hodinou";case"hh":return b||d?e+(Dd(a)?"hodiny":"hodín"):e+"hodinami";break;case"d":return b||d?"deň":"dňom";case"dd":return b||d?e+(Dd(a)?"dni":"dní"):e+"dňami";break;case"M":return b||d?"mesiac":"mesiacom";case"MM":return b||d?e+(Dd(a)?"mesiace":"mesiacov"):e+"mesiacmi";break;case"y":return b||d?"rok":"rokom";case"yy":return b||d?e+(Dd(a)?"roky":"rokov"):e+"rokmi"}}
//! moment.js locale configuration
//! locale : slovenian (sl)
//! author : Robert Sedovšek : https://github.com/sedovsek
function Fd(a,b,c,d){var e=a+" ";switch(c){case"s":return b||d?"nekaj sekund":"nekaj sekundami";case"m":return b?"ena minuta":"eno minuto";case"mm":return e+=1===a?b?"minuta":"minuto":2===a?b||d?"minuti":"minutama":5>a?b||d?"minute":"minutami":b||d?"minut":"minutami";case"h":return b?"ena ura":"eno uro";case"hh":return e+=1===a?b?"ura":"uro":2===a?b||d?"uri":"urama":5>a?b||d?"ure":"urami":b||d?"ur":"urami";case"d":return b||d?"en dan":"enim dnem";case"dd":return e+=1===a?b||d?"dan":"dnem":2===a?b||d?"dni":"dnevoma":b||d?"dni":"dnevi";case"M":return b||d?"en mesec":"enim mesecem";case"MM":return e+=1===a?b||d?"mesec":"mesecem":2===a?b||d?"meseca":"mesecema":5>a?b||d?"mesece":"meseci":b||d?"mesecev":"meseci";case"y":return b||d?"eno leto":"enim letom";case"yy":return e+=1===a?b||d?"leto":"letom":2===a?b||d?"leti":"letoma":5>a?b||d?"leta":"leti":b||d?"let":"leti"}}function Gd(a,b,c,d){var e={s:["viensas secunds","'iensas secunds"],m:["'n míut","'iens míut"],mm:[a+" míuts"," "+a+" míuts"],h:["'n þora","'iensa þora"],hh:[a+" þoras"," "+a+" þoras"],d:["'n ziua","'iensa ziua"],dd:[a+" ziuas"," "+a+" ziuas"],M:["'n mes","'iens mes"],MM:[a+" mesen"," "+a+" mesen"],y:["'n ar","'iens ar"],yy:[a+" ars"," "+a+" ars"]};return d?e[c][0]:b?e[c][0]:e[c][1].trim()}
//! moment.js locale configuration
//! locale : ukrainian (uk)
//! author : zemlanin : https://github.com/zemlanin
//! Author : Menelion Elensúle : https://github.com/Oire
function Hd(a,b){var c=a.split("_");return b%10===1&&b%100!==11?c[0]:b%10>=2&&4>=b%10&&(10>b%100||b%100>=20)?c[1]:c[2]}function Id(a,b,c){var d={mm:"хвилина_хвилини_хвилин",hh:"година_години_годин",dd:"день_дні_днів",MM:"місяць_місяці_місяців",yy:"рік_роки_років"};return"m"===c?b?"хвилина":"хвилину":"h"===c?b?"година":"годину":a+" "+Hd(d[c],+a)}function Jd(a,b){var c={nominative:"січень_лютий_березень_квітень_травень_червень_липень_серпень_вересень_жовтень_листопад_грудень".split("_"),accusative:"січня_лютого_березня_квітня_травня_червня_липня_серпня_вересня_жовтня_листопада_грудня".split("_")},d=/D[oD]? *MMMM?/.test(b)?"accusative":"nominative";return c[d][a.month()]}function Kd(a,b){var c={nominative:"неділя_понеділок_вівторок_середа_четвер_п’ятниця_субота".split("_"),accusative:"неділю_понеділок_вівторок_середу_четвер_п’ятницю_суботу".split("_"),genitive:"неділі_понеділка_вівторка_середи_четверга_п’ятниці_суботи".split("_")},d=/(\[[ВвУу]\]) ?dddd/.test(b)?"accusative":/\[?(?:минулої|наступної)? ?\] ?dddd/.test(b)?"genitive":"nominative";return c[d][a.day()]}function Ld(a){return function(){return a+"о"+(11===this.hours()?"б":"")+"] LT"}}var Md,Nd,Od=a.momentProperties=[],Pd=!1,Qd={},Rd={},Sd=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Td=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ud={},Vd={},Wd=/\d/,Xd=/\d\d/,Yd=/\d{3}/,Zd=/\d{4}/,$d=/[+-]?\d{6}/,_d=/\d\d?/,ae=/\d{1,3}/,be=/\d{1,4}/,ce=/[+-]?\d{1,6}/,de=/\d+/,ee=/[+-]?\d+/,fe=/Z|[+-]\d\d:?\d\d/gi,ge=/[+-]?\d+(\.\d{1,3})?/,he=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ie={},je={},ke=0,le=1,me=2,ne=3,oe=4,pe=5,qe=6;H("M",["MM",2],"Mo",function(){return this.month()+1}),H("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),H("MMMM",0,0,function(a){return this.localeData().months(this,a)}),z("month","M"),N("M",_d),N("MM",_d,Xd),N("MMM",he),N("MMMM",he),Q(["M","MM"],function(a,b){b[le]=q(a)-1}),Q(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[le]=e:j(c).invalidMonth=a});var re="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),se="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),te={};a.suppressDeprecationWarnings=!1;var ue=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ve=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],we=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],xe=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=aa("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),H(0,["YY",2],0,function(){return this.year()%100}),H(0,["YYYY",4],0,"year"),H(0,["YYYYY",5],0,"year"),H(0,["YYYYYY",6,!0],0,"year"),z("year","y"),N("Y",ee),N("YY",_d,Xd),N("YYYY",be,Zd),N("YYYYY",ce,$d),N("YYYYYY",ce,$d),Q(["YYYYY","YYYYYY"],ke),Q("YYYY",function(b,c){c[ke]=2===b.length?a.parseTwoDigitYear(b):q(b)}),Q("YY",function(b,c){c[ke]=a.parseTwoDigitYear(b)}),a.parseTwoDigitYear=function(a){return q(a)+(q(a)>68?1900:2e3)};var ye=C("FullYear",!1);H("w",["ww",2],"wo","week"),H("W",["WW",2],"Wo","isoWeek"),z("week","w"),z("isoWeek","W"),N("w",_d),N("ww",_d,Xd),N("W",_d),N("WW",_d,Xd),R(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=q(a)});var ze={dow:0,doy:6};H("DDD",["DDDD",3],"DDDo","dayOfYear"),z("dayOfYear","DDD"),N("DDD",ae),N("DDDD",Yd),Q(["DDD","DDDD"],function(a,b,c){c._dayOfYear=q(a)}),a.ISO_8601=function(){};var Ae=aa("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var a=Da.apply(null,arguments);return this>a?this:a}),Be=aa("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var a=Da.apply(null,arguments);return a>this?this:a});Ja("Z",":"),Ja("ZZ",""),N("Z",fe),N("ZZ",fe),Q(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=Ka(a)});var Ce=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var De=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ee=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Ya.fn=Ha.prototype;var Fe=ab(1,"add"),Ge=ab(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var He=aa("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});H(0,["gg",2],0,function(){return this.weekYear()%100}),H(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Db("gggg","weekYear"),Db("ggggg","weekYear"),Db("GGGG","isoWeekYear"),Db("GGGGG","isoWeekYear"),z("weekYear","gg"),z("isoWeekYear","GG"),N("G",ee),N("g",ee),N("GG",_d,Xd),N("gg",_d,Xd),N("GGGG",be,Zd),N("gggg",be,Zd),N("GGGGG",ce,$d),N("ggggg",ce,$d),R(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=q(a)}),R(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)}),H("Q",0,0,"quarter"),z("quarter","Q"),N("Q",Wd),Q("Q",function(a,b){b[le]=3*(q(a)-1)}),H("D",["DD",2],"Do","date"),z("date","D"),N("D",_d),N("DD",_d,Xd),N("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),Q(["D","DD"],me),Q("Do",function(a,b){b[me]=q(a.match(_d)[0],10)});var Ie=C("Date",!0);H("d",0,"do","day"),H("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),H("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),H("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),H("e",0,0,"weekday"),H("E",0,0,"isoWeekday"),z("day","d"),z("weekday","e"),z("isoWeekday","E"),N("d",_d),N("e",_d),N("E",_d),N("dd",he),N("ddd",he),N("dddd",he),R(["dd","ddd","dddd"],function(a,b,c){var d=c._locale.weekdaysParse(a);null!=d?b.d=d:j(c).invalidWeekday=a}),R(["d","e","E"],function(a,b,c,d){b[d]=q(a)});var Je="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ke="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Le="Su_Mo_Tu_We_Th_Fr_Sa".split("_");H("H",["HH",2],0,"hour"),H("h",["hh",2],0,function(){return this.hours()%12||12}),Sb("a",!0),Sb("A",!1),z("hour","h"),N("a",Tb),N("A",Tb),N("H",_d),N("h",_d),N("HH",_d,Xd),N("hh",_d,Xd),Q(["H","HH"],ne),Q(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),Q(["h","hh"],function(a,b,c){b[ne]=q(a),j(c).bigHour=!0});var Me=/[ap]\.?m?\.?/i,Ne=C("Hours",!0);H("m",["mm",2],0,"minute"),z("minute","m"),N("m",_d),N("mm",_d,Xd),Q(["m","mm"],oe);var Oe=C("Minutes",!1);H("s",["ss",2],0,"second"),z("second","s"),N("s",_d),N("ss",_d,Xd),Q(["s","ss"],pe);var Pe=C("Seconds",!1);H("S",0,0,function(){return~~(this.millisecond()/100)}),H(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),H(0,["SSS",3],0,"millisecond"),H(0,["SSSS",4],0,function(){return 10*this.millisecond()}),H(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),H(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),H(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),H(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),H(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),z("millisecond","ms"),N("S",ae,Wd),N("SS",ae,Xd),N("SSS",ae,Yd);var Qe;for(Qe="SSSS";Qe.length<=9;Qe+="S")N(Qe,de);for(Qe="S";Qe.length<=9;Qe+="S")Q(Qe,Wb);var Re=C("Milliseconds",!1);H("z",0,0,"zoneAbbr"),H("zz",0,0,"zoneName");var Se=n.prototype;Se.add=Fe,Se.calendar=cb,Se.clone=db,Se.diff=ib,Se.endOf=ub,Se.format=mb,Se.from=nb,Se.fromNow=ob,Se.to=pb,Se.toNow=qb,Se.get=F,Se.invalidAt=Cb,Se.isAfter=eb,Se.isBefore=fb,Se.isBetween=gb,Se.isSame=hb,Se.isValid=Ab,Se.lang=He,Se.locale=rb,Se.localeData=sb,Se.max=Be,Se.min=Ae,Se.parsingFlags=Bb,Se.set=F,Se.startOf=tb,Se.subtract=Ge,Se.toArray=yb,Se.toObject=zb,Se.toDate=xb,Se.toISOString=lb,Se.toJSON=lb,Se.toString=kb,Se.unix=wb,Se.valueOf=vb,Se.year=ye,Se.isLeapYear=ia,Se.weekYear=Fb,Se.isoWeekYear=Gb,Se.quarter=Se.quarters=Jb,Se.month=Y,Se.daysInMonth=Z,Se.week=Se.weeks=na,Se.isoWeek=Se.isoWeeks=oa,Se.weeksInYear=Ib,Se.isoWeeksInYear=Hb,Se.date=Ie,Se.day=Se.days=Pb,Se.weekday=Qb,Se.isoWeekday=Rb,Se.dayOfYear=qa,Se.hour=Se.hours=Ne,Se.minute=Se.minutes=Oe,Se.second=Se.seconds=Pe,Se.millisecond=Se.milliseconds=Re,Se.utcOffset=Na,Se.utc=Pa,Se.local=Qa,Se.parseZone=Ra,Se.hasAlignedHourOffset=Sa,Se.isDST=Ta,Se.isDSTShifted=Ua,Se.isLocal=Va,Se.isUtcOffset=Wa,Se.isUtc=Xa,Se.isUTC=Xa,Se.zoneAbbr=Xb,Se.zoneName=Yb,Se.dates=aa("dates accessor is deprecated. Use date instead.",Ie),Se.months=aa("months accessor is deprecated. Use month instead",Y),Se.years=aa("years accessor is deprecated. Use year instead",ye),Se.zone=aa("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Oa);var Te=Se,Ue={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Ve={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},We="Invalid date",Xe="%d",Ye=/\d{1,2}/,Ze={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},$e=s.prototype;$e._calendar=Ue,$e.calendar=_b,$e._longDateFormat=Ve,$e.longDateFormat=ac,$e._invalidDate=We,$e.invalidDate=bc,$e._ordinal=Xe,$e.ordinal=cc,$e._ordinalParse=Ye,$e.preparse=dc,$e.postformat=dc,$e._relativeTime=Ze,$e.relativeTime=ec,$e.pastFuture=fc,$e.set=gc,$e.months=U,$e._months=re,$e.monthsShort=V,$e._monthsShort=se,$e.monthsParse=W,$e.week=ka,$e._week=ze,$e.firstDayOfYear=ma,$e.firstDayOfWeek=la,$e.weekdays=Lb,$e._weekdays=Je,$e.weekdaysMin=Nb,$e._weekdaysMin=Le,$e.weekdaysShort=Mb,$e._weekdaysShort=Ke,$e.weekdaysParse=Ob,$e.isPM=Ub,$e._meridiemParse=Me,$e.meridiem=Vb,w("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===q(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),a.lang=aa("moment.lang is deprecated. Use moment.locale instead.",w),a.langData=aa("moment.langData is deprecated. Use moment.localeData instead.",y);var _e=Math.abs,af=yc("ms"),bf=yc("s"),cf=yc("m"),df=yc("h"),ef=yc("d"),ff=yc("w"),gf=yc("M"),hf=yc("y"),jf=Ac("milliseconds"),kf=Ac("seconds"),lf=Ac("minutes"),mf=Ac("hours"),nf=Ac("days"),of=Ac("months"),pf=Ac("years"),qf=Math.round,rf={s:45,m:45,h:22,d:26,M:11},sf=Math.abs,tf=Ha.prototype;tf.abs=oc,tf.add=qc,tf.subtract=rc,tf.as=wc,tf.asMilliseconds=af,tf.asSeconds=bf,tf.asMinutes=cf,tf.asHours=df,tf.asDays=ef,tf.asWeeks=ff,tf.asMonths=gf,tf.asYears=hf,tf.valueOf=xc,tf._bubble=tc,tf.get=zc,tf.milliseconds=jf,tf.seconds=kf,tf.minutes=lf,tf.hours=mf,tf.days=nf,tf.weeks=Bc,tf.months=of,tf.years=pf,tf.humanize=Fc,tf.toISOString=Gc,tf.toString=Gc,tf.toJSON=Gc,tf.locale=rb,tf.localeData=sb,tf.toIsoString=aa("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Gc),tf.lang=He,H("X",0,0,"unix"),H("x",0,0,"valueOf"),N("x",ee),N("X",ge),Q("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),Q("x",function(a,b,c){c._d=new Date(q(a))}),
//! moment.js
//! version : 2.10.6
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
a.version="2.10.6",b(Da),a.fn=Te,a.min=Fa,a.max=Ga,a.utc=h,a.unix=Zb,a.months=jc,a.isDate=d,a.locale=w,a.invalid=l,a.duration=Ya,a.isMoment=o,a.weekdays=lc,a.parseZone=$b,a.localeData=y,a.isDuration=Ia,a.monthsShort=kc,a.weekdaysMin=nc,a.defineLocale=x,a.weekdaysShort=mc,a.normalizeUnits=A,a.relativeTimeThreshold=Ec;var uf=a,vf=(uf.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(a){return/^nm$/i.test(a)},meridiem:function(a,b,c){return 12>a?c?"vm":"VM":c?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Môre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(a){return a+(1===a||8===a||a>=20?"ste":"de")},week:{dow:1,doy:4}}),uf.defineLocale("ar-ma",{months:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),weekdays:"الأحد_الإتنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"احد_اتنين_ثلاثاء_اربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:6,doy:12}}),{1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"}),wf={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"},xf=(uf.defineLocale("ar-sa",{months:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(a){return"م"===a},meridiem:function(a,b,c){return 12>a?"ص":"م"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},preparse:function(a){return a.replace(/[١٢٣٤٥٦٧٨٩٠]/g,function(a){return wf[a]}).replace(/،/g,",")},postformat:function(a){return a.replace(/\d/g,function(a){return vf[a]}).replace(/,/g,"،")},week:{dow:6,doy:12}}),uf.defineLocale("ar-tn",{months:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:1,doy:4}}),{1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"}),yf={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"},zf=function(a){return 0===a?0:1===a?1:2===a?2:a%100>=3&&10>=a%100?3:a%100>=11?4:5},Af={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},Bf=function(a){return function(b,c,d,e){var f=zf(b),g=Af[a][zf(b)];return 2===f&&(g=g[c?0:1]),g.replace(/%d/i,b)}},Cf=["كانون الثاني يناير","شباط فبراير","آذار مارس","نيسان أبريل","أيار مايو","حزيران يونيو","تموز يوليو","آب أغسطس","أيلول سبتمبر","تشرين الأول أكتوبر","تشرين الثاني نوفمبر","كانون الأول ديسمبر"],Df=(uf.defineLocale("ar",{months:Cf,monthsShort:Cf,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(a){return"م"===a},meridiem:function(a,b,c){return 12>a?"ص":"م"},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:Bf("s"),m:Bf("m"),mm:Bf("m"),h:Bf("h"),hh:Bf("h"),d:Bf("d"),dd:Bf("d"),M:Bf("M"),MM:Bf("M"),y:Bf("y"),yy:Bf("y")},preparse:function(a){return a.replace(/\u200f/g,"").replace(/[١٢٣٤٥٦٧٨٩٠]/g,function(a){return yf[a]}).replace(/،/g,",")},postformat:function(a){return a.replace(/\d/g,function(a){return xf[a]}).replace(/,/g,"،")},week:{dow:6,doy:12}}),{1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-üncü",4:"-üncü",100:"-üncü",6:"-ncı",9:"-uncu",10:"-uncu",30:"-uncu",60:"-ıncı",90:"-ıncı"}),Ef=(uf.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertəsi_Çərşənbə axşamı_Çərşənbə_Cümə axşamı_Cümə_Şənbə".split("_"),weekdaysShort:"Baz_BzE_ÇAx_Çər_CAx_Cüm_Şən".split("_"),weekdaysMin:"Bz_BE_ÇA_Çə_CA_Cü_Şə".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gələn həftə] dddd [saat] LT",lastDay:"[dünən] LT",lastWeek:"[keçən həftə] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s əvvəl",s:"birneçə saniyyə",m:"bir dəqiqə",mm:"%d dəqiqə",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gecə|səhər|gündüz|axşam/,isPM:function(a){return/^(gündüz|axşam)$/.test(a)},meridiem:function(a,b,c){return 4>a?"gecə":12>a?"səhər":17>a?"gündüz":"axşam"},ordinalParse:/\d{1,2}-(ıncı|inci|nci|üncü|ncı|uncu)/,ordinal:function(a){if(0===a)return a+"-ıncı";var b=a%10,c=a%100-b,d=a>=100?100:null;return a+(Df[b]||Df[c]||Df[d])},week:{dow:1,doy:7}}),uf.defineLocale("be",{months:Jc,monthsShort:"студ_лют_сак_крас_трав_чэрв_ліп_жнів_вер_каст_ліст_снеж".split("_"),weekdays:Kc,weekdaysShort:"нд_пн_ат_ср_чц_пт_сб".split("_"),weekdaysMin:"нд_пн_ат_ср_чц_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., HH:mm",LLLL:"dddd, D MMMM YYYY г., HH:mm"},calendar:{sameDay:"[Сёння ў] LT",nextDay:"[Заўтра ў] LT",lastDay:"[Учора ў] LT",nextWeek:function(){return"[У] dddd [ў] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[У мінулую] dddd [ў] LT";case 1:case 2:case 4:return"[У мінулы] dddd [ў] LT"}},sameElse:"L"},relativeTime:{future:"праз %s",past:"%s таму",s:"некалькі секунд",m:Ic,mm:Ic,h:Ic,hh:Ic,d:"дзень",dd:Ic,M:"месяц",MM:Ic,y:"год",yy:Ic},meridiemParse:/ночы|раніцы|дня|вечара/,isPM:function(a){return/^(дня|вечара)$/.test(a)},meridiem:function(a,b,c){return 4>a?"ночы":12>a?"раніцы":17>a?"дня":"вечара"},ordinalParse:/\d{1,2}-(і|ы|га)/,ordinal:function(a,b){switch(b){case"M":case"d":case"DDD":case"w":case"W":return a%10!==2&&a%10!==3||a%100===12||a%100===13?a+"-ы":a+"-і";case"D":return a+"-га";default:return a}},week:{dow:1,doy:7}}),uf.defineLocale("bg",{months:"януари_февруари_март_април_май_юни_юли_август_септември_октомври_ноември_декември".split("_"),monthsShort:"янр_фев_мар_апр_май_юни_юли_авг_сеп_окт_ное_дек".split("_"),weekdays:"неделя_понеделник_вторник_сряда_четвъртък_петък_събота".split("_"),weekdaysShort:"нед_пон_вто_сря_чет_пет_съб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[Днес в] LT",nextDay:"[Утре в] LT",nextWeek:"dddd [в] LT",lastDay:"[Вчера в] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[В изминалата] dddd [в] LT";case 1:case 2:case 4:case 5:return"[В изминалия] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"след %s",past:"преди %s",s:"няколко секунди",m:"минута",mm:"%d минути",h:"час",hh:"%d часа",d:"ден",dd:"%d дни",M:"месец",MM:"%d месеца",y:"година",yy:"%d години"},ordinalParse:/\d{1,2}-(ев|ен|ти|ви|ри|ми)/,ordinal:function(a){var b=a%10,c=a%100;return 0===a?a+"-ев":0===c?a+"-ен":c>10&&20>c?a+"-ти":1===b?a+"-ви":2===b?a+"-ри":7===b||8===b?a+"-ми":a+"-ти"},week:{dow:1,doy:7}}),{1:"১",2:"২",3:"৩",4:"৪",5:"৫",6:"৬",7:"৭",8:"৮",9:"৯",0:"০"}),Ff={"১":"1","২":"2","৩":"3","৪":"4","৫":"5","৬":"6","৭":"7","৮":"8","৯":"9","০":"0"},Gf=(uf.defineLocale("bn",{months:"জানুয়ারী_ফেবুয়ারী_মার্চ_এপ্রিল_মে_জুন_জুলাই_অগাস্ট_সেপ্টেম্বর_অক্টোবর_নভেম্বর_ডিসেম্বর".split("_"),monthsShort:"জানু_ফেব_মার্চ_এপর_মে_জুন_জুল_অগ_সেপ্ট_অক্টো_নভ_ডিসেম্".split("_"),weekdays:"রবিবার_সোমবার_মঙ্গলবার_বুধবার_বৃহস্পত্তিবার_শুক্রুবার_শনিবার".split("_"),weekdaysShort:"রবি_সোম_মঙ্গল_বুধ_বৃহস্পত্তি_শুক্রু_শনি".split("_"),weekdaysMin:"রব_সম_মঙ্গ_বু_ব্রিহ_শু_শনি".split("_"),longDateFormat:{LT:"A h:mm সময়",LTS:"A h:mm:ss সময়",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm সময়",LLLL:"dddd, D MMMM YYYY, A h:mm সময়"},calendar:{sameDay:"[আজ] LT",nextDay:"[আগামীকাল] LT",nextWeek:"dddd, LT",lastDay:"[গতকাল] LT",lastWeek:"[গত] dddd, LT",sameElse:"L"},relativeTime:{future:"%s পরে",past:"%s আগে",s:"কএক সেকেন্ড",m:"এক মিনিট",mm:"%d মিনিট",h:"এক ঘন্টা",hh:"%d ঘন্টা",d:"এক দিন",dd:"%d দিন",M:"এক মাস",MM:"%d মাস",y:"এক বছর",yy:"%d বছর"},preparse:function(a){return a.replace(/[১২৩৪৫৬৭৮৯০]/g,function(a){return Ff[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return Ef[a]})},meridiemParse:/রাত|সকাল|দুপুর|বিকেল|রাত/,isPM:function(a){return/^(দুপুর|বিকেল|রাত)$/.test(a)},meridiem:function(a,b,c){return 4>a?"রাত":10>a?"সকাল":17>a?"দুপুর":20>a?"বিকেল":"রাত"},week:{dow:0,doy:6}}),{1:"༡",2:"༢",3:"༣",4:"༤",5:"༥",6:"༦",7:"༧",8:"༨",9:"༩",0:"༠"}),Hf={"༡":"1","༢":"2","༣":"3","༤":"4","༥":"5","༦":"6","༧":"7","༨":"8","༩":"9","༠":"0"},If=(uf.defineLocale("bo",{months:"ཟླ་བ་དང་པོ_ཟླ་བ་གཉིས་པ_ཟླ་བ་གསུམ་པ_ཟླ་བ་བཞི་པ_ཟླ་བ་ལྔ་པ_ཟླ་བ་དྲུག་པ_ཟླ་བ་བདུན་པ_ཟླ་བ་བརྒྱད་པ_ཟླ་བ་དགུ་པ_ཟླ་བ་བཅུ་པ_ཟླ་བ་བཅུ་གཅིག་པ_ཟླ་བ་བཅུ་གཉིས་པ".split("_"),monthsShort:"ཟླ་བ་དང་པོ_ཟླ་བ་གཉིས་པ_ཟླ་བ་གསུམ་པ_ཟླ་བ་བཞི་པ_ཟླ་བ་ལྔ་པ_ཟླ་བ་དྲུག་པ_ཟླ་བ་བདུན་པ_ཟླ་བ་བརྒྱད་པ_ཟླ་བ་དགུ་པ_ཟླ་བ་བཅུ་པ_ཟླ་བ་བཅུ་གཅིག་པ_ཟླ་བ་བཅུ་གཉིས་པ".split("_"),weekdays:"གཟའ་ཉི་མ་_གཟའ་ཟླ་བ་_གཟའ་མིག་དམར་_གཟའ་ལྷག་པ་_གཟའ་ཕུར་བུ_གཟའ་པ་སངས་_གཟའ་སྤེན་པ་".split("_"),weekdaysShort:"ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་".split("_"),weekdaysMin:"ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[དི་རིང] LT",nextDay:"[སང་ཉིན] LT",nextWeek:"[བདུན་ཕྲག་རྗེས་མ], LT",lastDay:"[ཁ་སང] LT",lastWeek:"[བདུན་ཕྲག་མཐའ་མ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ལ་",past:"%s སྔན་ལ",s:"ལམ་སང",m:"སྐར་མ་གཅིག",mm:"%d སྐར་མ",h:"ཆུ་ཚོད་གཅིག",hh:"%d ཆུ་ཚོད",d:"ཉིན་གཅིག",dd:"%d ཉིན་",M:"ཟླ་བ་གཅིག",MM:"%d ཟླ་བ",y:"ལོ་གཅིག",yy:"%d ལོ"},preparse:function(a){return a.replace(/[༡༢༣༤༥༦༧༨༩༠]/g,function(a){return Hf[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return Gf[a]})},meridiemParse:/མཚན་མོ|ཞོགས་ཀས|ཉིན་གུང|དགོང་དག|མཚན་མོ/,isPM:function(a){return/^(ཉིན་གུང|དགོང་དག|མཚན་མོ)$/.test(a)},meridiem:function(a,b,c){return 4>a?"མཚན་མོ":10>a?"ཞོགས་ཀས":17>a?"ཉིན་གུང":20>a?"དགོང་དག":"མཚན་མོ"},week:{dow:0,doy:6}}),uf.defineLocale("br",{months:"Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),longDateFormat:{LT:"h[e]mm A",LTS:"h[e]mm:ss A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY h[e]mm A",LLLL:"dddd, D [a viz] MMMM YYYY h[e]mm A"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc'hoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec'h da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s 'zo",s:"un nebeud segondennoù",m:"ur vunutenn",mm:Lc,h:"un eur",hh:"%d eur",d:"un devezh",dd:Lc,M:"ur miz",MM:Lc,y:"ur bloaz",yy:Mc},ordinalParse:/\d{1,2}(añ|vet)/,ordinal:function(a){var b=1===a?"añ":"vet";return a+b},week:{dow:1,doy:4}}),uf.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prošlu] dddd [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:Qc,mm:Qc,h:Qc,hh:Qc,d:"dan",dd:Qc,M:"mjesec",MM:Qc,y:"godinu",yy:Qc},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),uf.defineLocale("ca",{months:"gener_febrer_març_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),monthsShort:"gen._febr._mar._abr._mai._jun._jul._ag._set._oct._nov._des.".split("_"),weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"Dg_Dl_Dt_Dc_Dj_Dv_Ds".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd D MMMM YYYY H:mm"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[demà a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"fa %s",s:"uns segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},ordinalParse:/\d{1,2}(r|n|t|è|a)/,ordinal:function(a,b){var c=1===a?"r":2===a?"n":3===a?"r":4===a?"t":"è";return("w"===b||"W"===b)&&(c="a"),a+c},week:{dow:1,doy:4}}),"leden_únor_březen_duben_květen_červen_červenec_srpen_září_říjen_listopad_prosinec".split("_")),Jf="led_úno_bře_dub_kvě_čvn_čvc_srp_zář_říj_lis_pro".split("_"),Kf=(uf.defineLocale("cs",{months:If,monthsShort:Jf,monthsParse:function(a,b){var c,d=[];for(c=0;12>c;c++)d[c]=new RegExp("^"+a[c]+"$|^"+b[c]+"$","i");return d}(If,Jf),weekdays:"neděle_pondělí_úterý_středa_čtvrtek_pátek_sobota".split("_"),weekdaysShort:"ne_po_út_st_čt_pá_so".split("_"),weekdaysMin:"ne_po_út_st_čt_pá_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes v] LT",nextDay:"[zítra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v neděli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve středu v] LT";case 4:return"[ve čtvrtek v] LT";case 5:return"[v pátek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[včera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou neděli v] LT";case 1:case 2:return"[minulé] dddd [v] LT";case 3:return"[minulou středu v] LT";case 4:case 5:return"[minulý] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"před %s",s:Sc,m:Sc,mm:Sc,h:Sc,hh:Sc,d:Sc,dd:Sc,M:Sc,MM:Sc,y:Sc,yy:Sc},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),uf.defineLocale("cv",{months:"кӑрлач_нарӑс_пуш_ака_май_ҫӗртме_утӑ_ҫурла_авӑн_юпа_чӳк_раштав".split("_"),monthsShort:"кӑр_нар_пуш_ака_май_ҫӗр_утӑ_ҫур_авн_юпа_чӳк_раш".split("_"),weekdays:"вырсарникун_тунтикун_ытларикун_юнкун_кӗҫнерникун_эрнекун_шӑматкун".split("_"),weekdaysShort:"выр_тун_ытл_юн_кӗҫ_эрн_шӑм".split("_"),weekdaysMin:"вр_тн_ыт_юн_кҫ_эр_шм".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ]",LLL:"YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm",LLLL:"dddd, YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm"},calendar:{sameDay:"[Паян] LT [сехетре]",nextDay:"[Ыран] LT [сехетре]",lastDay:"[Ӗнер] LT [сехетре]",nextWeek:"[Ҫитес] dddd LT [сехетре]",lastWeek:"[Иртнӗ] dddd LT [сехетре]",sameElse:"L"},relativeTime:{future:function(a){var b=/сехет$/i.exec(a)?"рен":/ҫул$/i.exec(a)?"тан":"ран";return a+b},past:"%s каялла",s:"пӗр-ик ҫеккунт",m:"пӗр минут",mm:"%d минут",h:"пӗр сехет",hh:"%d сехет",d:"пӗр кун",dd:"%d кун",M:"пӗр уйӑх",MM:"%d уйӑх",y:"пӗр ҫул",yy:"%d ҫул"},ordinalParse:/\d{1,2}-мӗш/,ordinal:"%d-мӗш",week:{dow:1,doy:7}}),uf.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn ôl",s:"ychydig eiliadau",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},ordinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(a){var b=a,c="",d=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"];return b>20?c=40===b||50===b||60===b||80===b||100===b?"fed":"ain":b>0&&(c=d[b]),a+c},week:{dow:1,doy:4}}),uf.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"søn_man_tir_ons_tor_fre_lør".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY HH:mm"},calendar:{sameDay:"[I dag kl.] LT",nextDay:"[I morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[I går kl.] LT",lastWeek:"[sidste] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"få sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en måned",MM:"%d måneder",y:"et år",yy:"%d år"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),uf.defineLocale("de-at",{months:"Jänner_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jän._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[Heute um] LT [Uhr]",sameElse:"L",nextDay:"[Morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[Gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:Tc,mm:"%d Minuten",h:Tc,hh:"%d Stunden",d:Tc,dd:Tc,M:Tc,MM:Tc,y:Tc,yy:Tc},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),uf.defineLocale("de",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[Heute um] LT [Uhr]",sameElse:"L",nextDay:"[Morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[Gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:Uc,mm:"%d Minuten",h:Uc,hh:"%d Stunden",d:Uc,dd:Uc,M:Uc,MM:Uc,y:Uc,yy:Uc},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),uf.defineLocale("el",{monthsNominativeEl:"Ιανουάριος_Φεβρουάριος_Μάρτιος_Απρίλιος_Μάιος_Ιούνιος_Ιούλιος_Αύγουστος_Σεπτέμβριος_Οκτώβριος_Νοέμβριος_Δεκέμβριος".split("_"),monthsGenitiveEl:"Ιανουαρίου_Φεβρουαρίου_Μαρτίου_Απριλίου_Μαΐου_Ιουνίου_Ιουλίου_Αυγούστου_Σεπτεμβρίου_Οκτωβρίου_Νοεμβρίου_Δεκεμβρίου".split("_"),months:function(a,b){return/D/.test(b.substring(0,b.indexOf("MMMM")))?this._monthsGenitiveEl[a.month()]:this._monthsNominativeEl[a.month()]},monthsShort:"Ιαν_Φεβ_Μαρ_Απρ_Μαϊ_Ιουν_Ιουλ_Αυγ_Σεπ_Οκτ_Νοε_Δεκ".split("_"),weekdays:"Κυριακή_Δευτέρα_Τρίτη_Τετάρτη_Πέμπτη_Παρασκευή_Σάββατο".split("_"),weekdaysShort:"Κυρ_Δευ_Τρι_Τετ_Πεμ_Παρ_Σαβ".split("_"),weekdaysMin:"Κυ_Δε_Τρ_Τε_Πε_Πα_Σα".split("_"),meridiem:function(a,b,c){return a>11?c?"μμ":"ΜΜ":c?"πμ":"ΠΜ"},isPM:function(a){return"μ"===(a+"").toLowerCase()[0]},meridiemParse:/[ΠΜ]\.?Μ?\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[Σήμερα {}] LT",nextDay:"[Αύριο {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[Χθες {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[το προηγούμενο] dddd [{}] LT";default:return"[την προηγούμενη] dddd [{}] LT"}},sameElse:"L"},calendar:function(a,b){var c=this._calendarEl[a],d=b&&b.hours();return"function"==typeof c&&(c=c.apply(b)),c.replace("{}",d%12===1?"στη":"στις")},relativeTime:{future:"σε %s",past:"%s πριν",s:"λίγα δευτερόλεπτα",m:"ένα λεπτό",mm:"%d λεπτά",h:"μία ώρα",hh:"%d ώρες",d:"μία μέρα",dd:"%d μέρες",M:"ένας μήνας",MM:"%d μήνες",y:"ένας χρόνος",yy:"%d χρόνια"},ordinalParse:/\d{1,2}η/,ordinal:"%dη",week:{dow:1,doy:4}}),uf.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c},week:{dow:1,doy:4}}),uf.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"D MMMM, YYYY",LLL:"D MMMM, YYYY h:mm A",LLLL:"dddd, D MMMM, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),uf.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c},week:{dow:1,doy:4}}),uf.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_aŭgusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aŭg_sep_okt_nov_dec".split("_"),weekdays:"Dimanĉo_Lundo_Mardo_Merkredo_Ĵaŭdo_Vendredo_Sabato".split("_"),weekdaysShort:"Dim_Lun_Mard_Merk_Ĵaŭ_Ven_Sab".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Ĵa_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D[-an de] MMMM, YYYY",LLL:"D[-an de] MMMM, YYYY HH:mm",LLLL:"dddd, [la] D[-an de] MMMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(a){return"p"===a.charAt(0).toLowerCase()},meridiem:function(a,b,c){return a>11?c?"p.t.m.":"P.T.M.":c?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodiaŭ je] LT",nextDay:"[Morgaŭ je] LT",nextWeek:"dddd [je] LT",lastDay:"[Hieraŭ je] LT",lastWeek:"[pasinta] dddd [je] LT",sameElse:"L"},relativeTime:{future:"je %s",past:"antaŭ %s",s:"sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"},ordinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}}),"Ene._Feb._Mar._Abr._May._Jun._Jul._Ago._Sep._Oct._Nov._Dic.".split("_")),Lf="Ene_Feb_Mar_Abr_May_Jun_Jul_Ago_Sep_Oct_Nov_Dic".split("_"),Mf=(uf.defineLocale("es",{months:"Enero_Febrero_Marzo_Abril_Mayo_Junio_Julio_Agosto_Septiembre_Octubre_Noviembre_Diciembre".split("_"),monthsShort:function(a,b){return/-MMM-/.test(b)?Lf[a.month()]:Kf[a.month()]},weekdays:"Domingo_Lunes_Martes_Miércoles_Jueves_Viernes_Sábado".split("_"),weekdaysShort:"Dom._Lun._Mar._Mié._Jue._Vie._Sáb.".split("_"),weekdaysMin:"Do_Lu_Ma_Mi_Ju_Vi_Sá".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}}),uf.defineLocale("et",{months:"jaanuar_veebruar_märts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_märts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"pühapäev_esmaspäev_teisipäev_kolmapäev_neljapäev_reede_laupäev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[Täna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Järgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s pärast",past:"%s tagasi",s:Vc,m:Vc,mm:Vc,h:Vc,hh:Vc,d:Vc,dd:"%d päeva",M:Vc,MM:Vc,y:Vc,yy:Vc},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),uf.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",
lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),{1:"۱",2:"۲",3:"۳",4:"۴",5:"۵",6:"۶",7:"۷",8:"۸",9:"۹",0:"۰"}),Nf={"۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","۰":"0"},Of=(uf.defineLocale("fa",{months:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),monthsShort:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),weekdays:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysShort:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysMin:"ی_د_س_چ_پ_ج_ش".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/قبل از ظهر|بعد از ظهر/,isPM:function(a){return/بعد از ظهر/.test(a)},meridiem:function(a,b,c){return 12>a?"قبل از ظهر":"بعد از ظهر"},calendar:{sameDay:"[امروز ساعت] LT",nextDay:"[فردا ساعت] LT",nextWeek:"dddd [ساعت] LT",lastDay:"[دیروز ساعت] LT",lastWeek:"dddd [پیش] [ساعت] LT",sameElse:"L"},relativeTime:{future:"در %s",past:"%s پیش",s:"چندین ثانیه",m:"یک دقیقه",mm:"%d دقیقه",h:"یک ساعت",hh:"%d ساعت",d:"یک روز",dd:"%d روز",M:"یک ماه",MM:"%d ماه",y:"یک سال",yy:"%d سال"},preparse:function(a){return a.replace(/[۰-۹]/g,function(a){return Nf[a]}).replace(/،/g,",")},postformat:function(a){return a.replace(/\d/g,function(a){return Mf[a]}).replace(/,/g,"،")},ordinalParse:/\d{1,2}م/,ordinal:"%dم",week:{dow:6,doy:12}}),"nolla yksi kaksi kolme neljä viisi kuusi seitsemän kahdeksan yhdeksän".split(" ")),Pf=["nolla","yhden","kahden","kolmen","neljän","viiden","kuuden",Of[7],Of[8],Of[9]],Qf=(uf.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kesäkuu_heinäkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kesä_heinä_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tänään] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s päästä",past:"%s sitten",s:Wc,m:Wc,mm:Wc,h:Wc,hh:Wc,d:Wc,dd:Wc,M:Wc,MM:Wc,y:Wc,yy:Wc},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),uf.defineLocale("fo",{months:"januar_februar_mars_apríl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mánadagur_týsdagur_mikudagur_hósdagur_fríggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mán_týs_mik_hós_frí_ley".split("_"),weekdaysMin:"su_má_tý_mi_hó_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[Í dag kl.] LT",nextDay:"[Í morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[Í gjár kl.] LT",lastWeek:"[síðstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s síðani",s:"fá sekund",m:"ein minutt",mm:"%d minuttir",h:"ein tími",hh:"%d tímar",d:"ein dagur",dd:"%d dagar",M:"ein mánaði",MM:"%d mánaðir",y:"eitt ár",yy:"%d ár"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),uf.defineLocale("fr-ca",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|e)/,ordinal:function(a){return a+(1===a?"er":"e")}}),uf.defineLocale("fr",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|)/,ordinal:function(a){return a+(1===a?"er":"")},week:{dow:1,doy:4}}),"jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_")),Rf="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),Sf=(uf.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(a,b){return/-MMM-/.test(b)?Rf[a.month()]:Qf[a.month()]},weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[ôfrûne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",m:"ien minút",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(a){return a+(1===a||8===a||a>=20?"ste":"de")},week:{dow:1,doy:4}}),uf.defineLocale("gl",{months:"Xaneiro_Febreiro_Marzo_Abril_Maio_Xuño_Xullo_Agosto_Setembro_Outubro_Novembro_Decembro".split("_"),monthsShort:"Xan._Feb._Mar._Abr._Mai._Xuñ._Xul._Ago._Set._Out._Nov._Dec.".split("_"),weekdays:"Domingo_Luns_Martes_Mércores_Xoves_Venres_Sábado".split("_"),weekdaysShort:"Dom._Lun._Mar._Mér._Xov._Ven._Sáb.".split("_"),weekdaysMin:"Do_Lu_Ma_Mé_Xo_Ve_Sá".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd D MMMM YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"ás":"á")+"] LT"},nextDay:function(){return"[mañá "+(1!==this.hours()?"ás":"á")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"ás":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"á":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"ás":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(a){return"uns segundos"===a?"nuns segundos":"en "+a},past:"hai %s",s:"uns segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:7}}),uf.defineLocale("he",{months:"ינואר_פברואר_מרץ_אפריל_מאי_יוני_יולי_אוגוסט_ספטמבר_אוקטובר_נובמבר_דצמבר".split("_"),monthsShort:"ינו׳_פבר׳_מרץ_אפר׳_מאי_יוני_יולי_אוג׳_ספט׳_אוק׳_נוב׳_דצמ׳".split("_"),weekdays:"ראשון_שני_שלישי_רביעי_חמישי_שישי_שבת".split("_"),weekdaysShort:"א׳_ב׳_ג׳_ד׳_ה׳_ו׳_ש׳".split("_"),weekdaysMin:"א_ב_ג_ד_ה_ו_ש".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [ב]MMMM YYYY",LLL:"D [ב]MMMM YYYY HH:mm",LLLL:"dddd, D [ב]MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[היום ב־]LT",nextDay:"[מחר ב־]LT",nextWeek:"dddd [בשעה] LT",lastDay:"[אתמול ב־]LT",lastWeek:"[ביום] dddd [האחרון בשעה] LT",sameElse:"L"},relativeTime:{future:"בעוד %s",past:"לפני %s",s:"מספר שניות",m:"דקה",mm:"%d דקות",h:"שעה",hh:function(a){return 2===a?"שעתיים":a+" שעות"},d:"יום",dd:function(a){return 2===a?"יומיים":a+" ימים"},M:"חודש",MM:function(a){return 2===a?"חודשיים":a+" חודשים"},y:"שנה",yy:function(a){return 2===a?"שנתיים":a%10===0&&10!==a?a+" שנה":a+" שנים"}}}),{1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"}),Tf={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"},Uf=(uf.defineLocale("hi",{months:"जनवरी_फ़रवरी_मार्च_अप्रैल_मई_जून_जुलाई_अगस्त_सितम्बर_अक्टूबर_नवम्बर_दिसम्बर".split("_"),monthsShort:"जन._फ़र._मार्च_अप्रै._मई_जून_जुल._अग._सित._अक्टू._नव._दिस.".split("_"),weekdays:"रविवार_सोमवार_मंगलवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगल_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm बजे",LTS:"A h:mm:ss बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm बजे",LLLL:"dddd, D MMMM YYYY, A h:mm बजे"},calendar:{sameDay:"[आज] LT",nextDay:"[कल] LT",nextWeek:"dddd, LT",lastDay:"[कल] LT",lastWeek:"[पिछले] dddd, LT",sameElse:"L"},relativeTime:{future:"%s में",past:"%s पहले",s:"कुछ ही क्षण",m:"एक मिनट",mm:"%d मिनट",h:"एक घंटा",hh:"%d घंटे",d:"एक दिन",dd:"%d दिन",M:"एक महीने",MM:"%d महीने",y:"एक वर्ष",yy:"%d वर्ष"},preparse:function(a){return a.replace(/[१२३४५६७८९०]/g,function(a){return Tf[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return Sf[a]})},meridiemParse:/रात|सुबह|दोपहर|शाम/,meridiemHour:function(a,b){return 12===a&&(a=0),"रात"===b?4>a?a:a+12:"सुबह"===b?a:"दोपहर"===b?a>=10?a:a+12:"शाम"===b?a+12:void 0},meridiem:function(a,b,c){return 4>a?"रात":10>a?"सुबह":17>a?"दोपहर":20>a?"शाम":"रात"},week:{dow:0,doy:6}}),uf.defineLocale("hr",{months:"siječanj_veljača_ožujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_"),monthsShort:"sij._velj._ožu._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prošlu] dddd [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:Yc,mm:Yc,h:Yc,hh:Yc,d:"dan",dd:Yc,M:"mjesec",MM:Yc,y:"godinu",yy:Yc},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),"vasárnap hétfőn kedden szerdán csütörtökön pénteken szombaton".split(" ")),Vf=(uf.defineLocale("hu",{months:"január_február_március_április_május_június_július_augusztus_szeptember_október_november_december".split("_"),monthsShort:"jan_feb_márc_ápr_máj_jún_júl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasárnap_hétfő_kedd_szerda_csütörtök_péntek_szombat".split("_"),weekdaysShort:"vas_hét_kedd_sze_csüt_pén_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(a){return"u"===a.charAt(1).toLowerCase()},meridiem:function(a,b,c){return 12>a?c===!0?"de":"DE":c===!0?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return $c.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return $c.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s múlva",past:"%s",s:Zc,m:Zc,mm:Zc,h:Zc,hh:Zc,d:Zc,dd:Zc,M:Zc,MM:Zc,y:Zc,yy:Zc},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),uf.defineLocale("hy-am",{months:_c,monthsShort:ad,weekdays:bd,weekdaysShort:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),weekdaysMin:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY թ.",LLL:"D MMMM YYYY թ., HH:mm",LLLL:"dddd, D MMMM YYYY թ., HH:mm"},calendar:{sameDay:"[այսօր] LT",nextDay:"[վաղը] LT",lastDay:"[երեկ] LT",nextWeek:function(){return"dddd [օրը ժամը] LT"},lastWeek:function(){return"[անցած] dddd [օրը ժամը] LT"},sameElse:"L"},relativeTime:{future:"%s հետո",past:"%s առաջ",s:"մի քանի վայրկյան",m:"րոպե",mm:"%d րոպե",h:"ժամ",hh:"%d ժամ",d:"օր",dd:"%d օր",M:"ամիս",MM:"%d ամիս",y:"տարի",yy:"%d տարի"},meridiemParse:/գիշերվա|առավոտվա|ցերեկվա|երեկոյան/,isPM:function(a){return/^(ցերեկվա|երեկոյան)$/.test(a)},meridiem:function(a){return 4>a?"գիշերվա":12>a?"առավոտվա":17>a?"ցերեկվա":"երեկոյան"},ordinalParse:/\d{1,2}|\d{1,2}-(ին|րդ)/,ordinal:function(a,b){switch(b){case"DDD":case"w":case"W":case"DDDo":return 1===a?a+"-ին":a+"-րդ";default:return a}},week:{dow:1,doy:7}}),uf.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(a,b){return 12===a&&(a=0),"pagi"===b?a:"siang"===b?a>=11?a:a+12:"sore"===b||"malam"===b?a+12:void 0},meridiem:function(a,b,c){return 11>a?"pagi":15>a?"siang":19>a?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}}),uf.defineLocale("is",{months:"janúar_febrúar_mars_apríl_maí_júní_júlí_ágúst_september_október_nóvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_maí_jún_júl_ágú_sep_okt_nóv_des".split("_"),weekdays:"sunnudagur_mánudagur_þriðjudagur_miðvikudagur_fimmtudagur_föstudagur_laugardagur".split("_"),weekdaysShort:"sun_mán_þri_mið_fim_fös_lau".split("_"),weekdaysMin:"Su_Má_Þr_Mi_Fi_Fö_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[í dag kl.] LT",nextDay:"[á morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[í gær kl.] LT",lastWeek:"[síðasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s síðan",s:dd,m:dd,mm:dd,h:"klukkustund",hh:dd,d:dd,dd:dd,M:dd,MM:dd,y:dd,yy:dd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),uf.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"Domenica_Lunedì_Martedì_Mercoledì_Giovedì_Venerdì_Sabato".split("_"),weekdaysShort:"Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),weekdaysMin:"D_L_Ma_Me_G_V_S".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(a){return(/^[0-9].+$/.test(a)?"tra":"in")+" "+a},past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}}),uf.defineLocale("ja",{months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),longDateFormat:{LT:"Ah時m分",LTS:"Ah時m分s秒",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah時m分",LLLL:"YYYY年M月D日Ah時m分 dddd"},meridiemParse:/午前|午後/i,isPM:function(a){return"午後"===a},meridiem:function(a,b,c){return 12>a?"午前":"午後"},calendar:{sameDay:"[今日] LT",nextDay:"[明日] LT",nextWeek:"[来週]dddd LT",lastDay:"[昨日] LT",lastWeek:"[前週]dddd LT",sameElse:"L"},relativeTime:{future:"%s後",past:"%s前",s:"数秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}}),uf.defineLocale("jv",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(a,b){return 12===a&&(a=0),"enjing"===b?a:"siyang"===b?a>=11?a:a+12:"sonten"===b||"ndalu"===b?a+12:void 0},meridiem:function(a,b,c){return 11>a?"enjing":15>a?"siyang":19>a?"sonten":"ndalu"},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}}),uf.defineLocale("ka",{months:ed,monthsShort:"იან_თებ_მარ_აპრ_მაი_ივნ_ივლ_აგვ_სექ_ოქტ_ნოე_დეკ".split("_"),weekdays:fd,weekdaysShort:"კვი_ორშ_სამ_ოთხ_ხუთ_პარ_შაბ".split("_"),weekdaysMin:"კვ_ორ_სა_ოთ_ხუ_პა_შა".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[დღეს] LT[-ზე]",nextDay:"[ხვალ] LT[-ზე]",lastDay:"[გუშინ] LT[-ზე]",nextWeek:"[შემდეგ] dddd LT[-ზე]",lastWeek:"[წინა] dddd LT-ზე",sameElse:"L"},relativeTime:{future:function(a){return/(წამი|წუთი|საათი|წელი)/.test(a)?a.replace(/ი$/,"ში"):a+"ში"},past:function(a){return/(წამი|წუთი|საათი|დღე|თვე)/.test(a)?a.replace(/(ი|ე)$/,"ის წინ"):/წელი/.test(a)?a.replace(/წელი$/,"წლის წინ"):void 0},s:"რამდენიმე წამი",m:"წუთი",mm:"%d წუთი",h:"საათი",hh:"%d საათი",d:"დღე",dd:"%d დღე",M:"თვე",MM:"%d თვე",y:"წელი",yy:"%d წელი"},ordinalParse:/0|1-ლი|მე-\d{1,2}|\d{1,2}-ე/,ordinal:function(a){return 0===a?a:1===a?a+"-ლი":20>a||100>=a&&a%20===0||a%100===0?"მე-"+a:a+"-ე"},week:{dow:1,doy:7}}),uf.defineLocale("km",{months:"មករា_កុម្ភៈ_មិនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),monthsShort:"មករា_កុម្ភៈ_មិនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),weekdays:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),weekdaysShort:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),weekdaysMin:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ថ្ងៃនៈ ម៉ោង] LT",nextDay:"[ស្អែក ម៉ោង] LT",nextWeek:"dddd [ម៉ោង] LT",lastDay:"[ម្សិលមិញ ម៉ោង] LT",lastWeek:"dddd [សប្តាហ៍មុន] [ម៉ោង] LT",sameElse:"L"},relativeTime:{future:"%sទៀត",past:"%sមុន",s:"ប៉ុន្មានវិនាទី",m:"មួយនាទី",mm:"%d នាទី",h:"មួយម៉ោង",hh:"%d ម៉ោង",d:"មួយថ្ងៃ",dd:"%d ថ្ងៃ",M:"មួយខែ",MM:"%d ខែ",y:"មួយឆ្នាំ",yy:"%d ឆ្នាំ"},week:{dow:1,doy:4}}),uf.defineLocale("ko",{months:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),monthsShort:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),weekdays:"일요일_월요일_화요일_수요일_목요일_금요일_토요일".split("_"),weekdaysShort:"일_월_화_수_목_금_토".split("_"),weekdaysMin:"일_월_화_수_목_금_토".split("_"),longDateFormat:{LT:"A h시 m분",LTS:"A h시 m분 s초",L:"YYYY.MM.DD",LL:"YYYY년 MMMM D일",LLL:"YYYY년 MMMM D일 A h시 m분",LLLL:"YYYY년 MMMM D일 dddd A h시 m분"},calendar:{sameDay:"오늘 LT",nextDay:"내일 LT",nextWeek:"dddd LT",lastDay:"어제 LT",lastWeek:"지난주 dddd LT",sameElse:"L"},relativeTime:{future:"%s 후",past:"%s 전",s:"몇초",ss:"%d초",m:"일분",mm:"%d분",h:"한시간",hh:"%d시간",d:"하루",dd:"%d일",M:"한달",MM:"%d달",y:"일년",yy:"%d년"},ordinalParse:/\d{1,2}일/,ordinal:"%d일",meridiemParse:/오전|오후/,isPM:function(a){return"오후"===a},meridiem:function(a,b,c){return 12>a?"오전":"오후"}}),uf.defineLocale("lb",{months:"Januar_Februar_Mäerz_Abrëll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonndeg_Méindeg_Dënschdeg_Mëttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._Mé._Dë._Më._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mé_Dë_Më_Do_Fr_Sa".split("_"),longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gëschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:hd,past:id,s:"e puer Sekonnen",m:gd,mm:"%d Minutten",h:gd,hh:"%d Stonnen",d:gd,dd:"%d Deeg",M:gd,MM:"%d Méint",y:gd,yy:"%d Joer"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),{m:"minutė_minutės_minutę",mm:"minutės_minučių_minutes",h:"valanda_valandos_valandą",hh:"valandos_valandų_valandas",d:"diena_dienos_dieną",dd:"dienos_dienų_dienas",M:"mėnuo_mėnesio_mėnesį",MM:"mėnesiai_mėnesių_mėnesius",y:"metai_metų_metus",yy:"metai_metų_metus"}),Wf="sekmadienis_pirmadienis_antradienis_trečiadienis_ketvirtadienis_penktadienis_šeštadienis".split("_"),Xf=(uf.defineLocale("lt",{months:ld,monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:qd,weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_Šeš".split("_"),weekdaysMin:"S_P_A_T_K_Pn_Š".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[Šiandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Praėjusį] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prieš %s",s:kd,m:md,mm:pd,h:md,hh:pd,d:md,dd:pd,M:md,MM:pd,y:md,yy:pd},ordinalParse:/\d{1,2}-oji/,ordinal:function(a){return a+"-oji"},week:{dow:1,doy:4}}),{m:"minūtes_minūtēm_minūte_minūtes".split("_"),mm:"minūtes_minūtēm_minūte_minūtes".split("_"),h:"stundas_stundām_stunda_stundas".split("_"),hh:"stundas_stundām_stunda_stundas".split("_"),d:"dienas_dienām_diena_dienas".split("_"),dd:"dienas_dienām_diena_dienas".split("_"),M:"mēneša_mēnešiem_mēnesis_mēneši".split("_"),MM:"mēneša_mēnešiem_mēnesis_mēneši".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")}),Yf=(uf.defineLocale("lv",{months:"janvāris_februāris_marts_aprīlis_maijs_jūnijs_jūlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jūn_jūl_aug_sep_okt_nov_dec".split("_"),weekdays:"svētdiena_pirmdiena_otrdiena_trešdiena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[Šodien pulksten] LT",nextDay:"[Rīt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagājušā] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"pēc %s",past:"pirms %s",s:ud,m:td,mm:sd,h:td,hh:sd,d:td,dd:sd,M:td,MM:sd,y:td,yy:sd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),{words:{m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(a,b){return 1===a?b[0]:a>=2&&4>=a?b[1]:b[2]},translate:function(a,b,c){var d=Yf.words[c];return 1===c.length?b?d[0]:d[1]:a+" "+Yf.correctGrammaticalCase(a,d)}}),Zf=(uf.defineLocale("me",{months:["januar","februar","mart","april","maj","jun","jul","avgust","septembar","oktobar","novembar","decembar"],monthsShort:["jan.","feb.","mar.","apr.","maj","jun","jul","avg.","sep.","okt.","nov.","dec."],weekdays:["nedjelja","ponedjeljak","utorak","srijeda","četvrtak","petak","subota"],weekdaysShort:["ned.","pon.","uto.","sri.","čet.","pet.","sub."],weekdaysMin:["ne","po","ut","sr","če","pe","su"],longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){var a=["[prošle] [nedjelje] [u] LT","[prošlog] [ponedjeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srijede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"];return a[this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",m:Yf.translate,mm:Yf.translate,h:Yf.translate,hh:Yf.translate,d:"dan",dd:Yf.translate,M:"mjesec",MM:Yf.translate,y:"godinu",yy:Yf.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),uf.defineLocale("mk",{months:"јануари_февруари_март_април_мај_јуни_јули_август_септември_октомври_ноември_декември".split("_"),monthsShort:"јан_фев_мар_апр_мај_јун_јул_авг_сеп_окт_ное_дек".split("_"),weekdays:"недела_понеделник_вторник_среда_четврток_петок_сабота".split("_"),weekdaysShort:"нед_пон_вто_сре_чет_пет_саб".split("_"),weekdaysMin:"нe_пo_вт_ср_че_пе_сa".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[Денес во] LT",nextDay:"[Утре во] LT",nextWeek:"dddd [во] LT",lastDay:"[Вчера во] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[Во изминатата] dddd [во] LT";case 1:case 2:case 4:case 5:return"[Во изминатиот] dddd [во] LT"}},sameElse:"L"},relativeTime:{future:"после %s",past:"пред %s",s:"неколку секунди",m:"минута",mm:"%d минути",h:"час",hh:"%d часа",d:"ден",dd:"%d дена",M:"месец",MM:"%d месеци",y:"година",yy:"%d години"},ordinalParse:/\d{1,2}-(ев|ен|ти|ви|ри|ми)/,ordinal:function(a){var b=a%10,c=a%100;return 0===a?a+"-ев":0===c?a+"-ен":c>10&&20>c?a+"-ти":1===b?a+"-ви":2===b?a+"-ри":7===b||8===b?a+"-ми":a+"-ти"},week:{dow:1,doy:7}}),uf.defineLocale("ml",{months:"ജനുവരി_ഫെബ്രുവരി_മാർച്ച്_ഏപ്രിൽ_മേയ്_ജൂൺ_ജൂലൈ_ഓഗസ്റ്റ്_സെപ്റ്റംബർ_ഒക്ടോബർ_നവംബർ_ഡിസംബർ".split("_"),monthsShort:"ജനു._ഫെബ്രു._മാർ._ഏപ്രി._മേയ്_ജൂൺ_ജൂലൈ._ഓഗ._സെപ്റ്റ._ഒക്ടോ._നവം._ഡിസം.".split("_"),weekdays:"ഞായറാഴ്ച_തിങ്കളാഴ്ച_ചൊവ്വാഴ്ച_ബുധനാഴ്ച_വ്യാഴാഴ്ച_വെള്ളിയാഴ്ച_ശനിയാഴ്ച".split("_"),weekdaysShort:"ഞായർ_തിങ്കൾ_ചൊവ്വ_ബുധൻ_വ്യാഴം_വെള്ളി_ശനി".split("_"),weekdaysMin:"ഞാ_തി_ചൊ_ബു_വ്യാ_വെ_ശ".split("_"),longDateFormat:{LT:"A h:mm -നു",LTS:"A h:mm:ss -നു",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -നു",LLLL:"dddd, D MMMM YYYY, A h:mm -നു"},calendar:{sameDay:"[ഇന്ന്] LT",nextDay:"[നാളെ] LT",nextWeek:"dddd, LT",lastDay:"[ഇന്നലെ] LT",lastWeek:"[കഴിഞ്ഞ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s കഴിഞ്ഞ്",past:"%s മുൻപ്",s:"അൽപ നിമിഷങ്ങൾ",m:"ഒരു മിനിറ്റ്",mm:"%d മിനിറ്റ്",h:"ഒരു മണിക്കൂർ",hh:"%d മണിക്കൂർ",d:"ഒരു ദിവസം",dd:"%d ദിവസം",M:"ഒരു മാസം",MM:"%d മാസം",y:"ഒരു വർഷം",yy:"%d വർഷം"},meridiemParse:/രാത്രി|രാവിലെ|ഉച്ച കഴിഞ്ഞ്|വൈകുന്നേരം|രാത്രി/i,isPM:function(a){return/^(ഉച്ച കഴിഞ്ഞ്|വൈകുന്നേരം|രാത്രി)$/.test(a)},meridiem:function(a,b,c){return 4>a?"രാത്രി":12>a?"രാവിലെ":17>a?"ഉച്ച കഴിഞ്ഞ്":20>a?"വൈകുന്നേരം":"രാത്രി"}}),{1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"}),$f={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"},_f=(uf.defineLocale("mr",{months:"जानेवारी_फेब्रुवारी_मार्च_एप्रिल_मे_जून_जुलै_ऑगस्ट_सप्टेंबर_ऑक्टोबर_नोव्हेंबर_डिसेंबर".split("_"),monthsShort:"जाने._फेब्रु._मार्च._एप्रि._मे._जून._जुलै._ऑग._सप्टें._ऑक्टो._नोव्हें._डिसें.".split("_"),weekdays:"रविवार_सोमवार_मंगळवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगळ_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm वाजता",LTS:"A h:mm:ss वाजता",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm वाजता",LLLL:"dddd, D MMMM YYYY, A h:mm वाजता"},calendar:{sameDay:"[आज] LT",nextDay:"[उद्या] LT",nextWeek:"dddd, LT",lastDay:"[काल] LT",lastWeek:"[मागील] dddd, LT",sameElse:"L"},relativeTime:{future:"%s नंतर",past:"%s पूर्वी",s:"सेकंद",m:"एक मिनिट",mm:"%d मिनिटे",h:"एक तास",hh:"%d तास",d:"एक दिवस",dd:"%d दिवस",M:"एक महिना",MM:"%d महिने",y:"एक वर्ष",yy:"%d वर्षे"},preparse:function(a){return a.replace(/[१२३४५६७८९०]/g,function(a){return $f[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return Zf[a]})},meridiemParse:/रात्री|सकाळी|दुपारी|सायंकाळी/,meridiemHour:function(a,b){return 12===a&&(a=0),"रात्री"===b?4>a?a:a+12:"सकाळी"===b?a:"दुपारी"===b?a>=10?a:a+12:"सायंकाळी"===b?a+12:void 0},meridiem:function(a,b,c){return 4>a?"रात्री":10>a?"सकाळी":17>a?"दुपारी":20>a?"सायंकाळी":"रात्री"},week:{dow:0,doy:6}}),uf.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(a,b){return 12===a&&(a=0),"pagi"===b?a:"tengahari"===b?a>=11?a:a+12:"petang"===b||"malam"===b?a+12:void 0},meridiem:function(a,b,c){return 11>a?"pagi":15>a?"tengahari":19>a?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",
lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}}),uf.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(a,b){return 12===a&&(a=0),"pagi"===b?a:"tengahari"===b?a>=11?a:a+12:"petang"===b||"malam"===b?a+12:void 0},meridiem:function(a,b,c){return 11>a?"pagi":15>a?"tengahari":19>a?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}}),{1:"၁",2:"၂",3:"၃",4:"၄",5:"၅",6:"၆",7:"၇",8:"၈",9:"၉",0:"၀"}),ag={"၁":"1","၂":"2","၃":"3","၄":"4","၅":"5","၆":"6","၇":"7","၈":"8","၉":"9","၀":"0"},bg=(uf.defineLocale("my",{months:"ဇန်နဝါရီ_ဖေဖော်ဝါရီ_မတ်_ဧပြီ_မေ_ဇွန်_ဇူလိုင်_သြဂုတ်_စက်တင်ဘာ_အောက်တိုဘာ_နိုဝင်ဘာ_ဒီဇင်ဘာ".split("_"),monthsShort:"ဇန်_ဖေ_မတ်_ပြီ_မေ_ဇွန်_လိုင်_သြ_စက်_အောက်_နို_ဒီ".split("_"),weekdays:"တနင်္ဂနွေ_တနင်္လာ_အင်္ဂါ_ဗုဒ္ဓဟူး_ကြာသပတေး_သောကြာ_စနေ".split("_"),weekdaysShort:"နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ".split("_"),weekdaysMin:"နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ယနေ.] LT [မှာ]",nextDay:"[မနက်ဖြန်] LT [မှာ]",nextWeek:"dddd LT [မှာ]",lastDay:"[မနေ.က] LT [မှာ]",lastWeek:"[ပြီးခဲ့သော] dddd LT [မှာ]",sameElse:"L"},relativeTime:{future:"လာမည့် %s မှာ",past:"လွန်ခဲ့သော %s က",s:"စက္ကန်.အနည်းငယ်",m:"တစ်မိနစ်",mm:"%d မိနစ်",h:"တစ်နာရီ",hh:"%d နာရီ",d:"တစ်ရက်",dd:"%d ရက်",M:"တစ်လ",MM:"%d လ",y:"တစ်နှစ်",yy:"%d နှစ်"},preparse:function(a){return a.replace(/[၁၂၃၄၅၆၇၈၉၀]/g,function(a){return ag[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return _f[a]})},week:{dow:1,doy:4}}),uf.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"søn_man_tirs_ons_tors_fre_lør".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),longDateFormat:{LT:"H.mm",LTS:"H.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H.mm",LLLL:"dddd D. MMMM YYYY [kl.] H.mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i går kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s siden",s:"noen sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en måned",MM:"%d måneder",y:"ett år",yy:"%d år"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),{1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"}),cg={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"},dg=(uf.defineLocale("ne",{months:"जनवरी_फेब्रुवरी_मार्च_अप्रिल_मई_जुन_जुलाई_अगष्ट_सेप्टेम्बर_अक्टोबर_नोभेम्बर_डिसेम्बर".split("_"),monthsShort:"जन._फेब्रु._मार्च_अप्रि._मई_जुन_जुलाई._अग._सेप्ट._अक्टो._नोभे._डिसे.".split("_"),weekdays:"आइतबार_सोमबार_मङ्गलबार_बुधबार_बिहिबार_शुक्रबार_शनिबार".split("_"),weekdaysShort:"आइत._सोम._मङ्गल._बुध._बिहि._शुक्र._शनि.".split("_"),weekdaysMin:"आइ._सो._मङ्_बु._बि._शु._श.".split("_"),longDateFormat:{LT:"Aको h:mm बजे",LTS:"Aको h:mm:ss बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, Aको h:mm बजे",LLLL:"dddd, D MMMM YYYY, Aको h:mm बजे"},preparse:function(a){return a.replace(/[१२३४५६७८९०]/g,function(a){return cg[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return bg[a]})},meridiemParse:/राती|बिहान|दिउँसो|बेलुका|साँझ|राती/,meridiemHour:function(a,b){return 12===a&&(a=0),"राती"===b?3>a?a:a+12:"बिहान"===b?a:"दिउँसो"===b?a>=10?a:a+12:"बेलुका"===b||"साँझ"===b?a+12:void 0},meridiem:function(a,b,c){return 3>a?"राती":10>a?"बिहान":15>a?"दिउँसो":18>a?"बेलुका":20>a?"साँझ":"राती"},calendar:{sameDay:"[आज] LT",nextDay:"[भोली] LT",nextWeek:"[आउँदो] dddd[,] LT",lastDay:"[हिजो] LT",lastWeek:"[गएको] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%sमा",past:"%s अगाडी",s:"केही समय",m:"एक मिनेट",mm:"%d मिनेट",h:"एक घण्टा",hh:"%d घण्टा",d:"एक दिन",dd:"%d दिन",M:"एक महिना",MM:"%d महिना",y:"एक बर्ष",yy:"%d बर्ष"},week:{dow:1,doy:7}}),"jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_")),eg="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),fg=(uf.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(a,b){return/-MMM-/.test(b)?eg[a.month()]:dg[a.month()]},weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"één minuut",mm:"%d minuten",h:"één uur",hh:"%d uur",d:"één dag",dd:"%d dagen",M:"één maand",MM:"%d maanden",y:"één jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(a){return a+(1===a||8===a||a>=20?"ste":"de")},week:{dow:1,doy:4}}),uf.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sundag_måndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_mån_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_må_ty_on_to_fr_lø".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I går klokka] LT",lastWeek:"[Føregåande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s sidan",s:"nokre sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein månad",MM:"%d månader",y:"eit år",yy:"%d år"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),"styczeń_luty_marzec_kwiecień_maj_czerwiec_lipiec_sierpień_wrzesień_październik_listopad_grudzień".split("_")),gg="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_września_października_listopada_grudnia".split("_"),hg=(uf.defineLocale("pl",{months:function(a,b){return""===b?"("+gg[a.month()]+"|"+fg[a.month()]+")":/D MMMM/.test(b)?gg[a.month()]:fg[a.month()]},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_paź_lis_gru".split("_"),weekdays:"niedziela_poniedziałek_wtorek_środa_czwartek_piątek_sobota".split("_"),weekdaysShort:"nie_pon_wt_śr_czw_pt_sb".split("_"),weekdaysMin:"N_Pn_Wt_Śr_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dziś o] LT",nextDay:"[Jutro o] LT",nextWeek:"[W] dddd [o] LT",lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zeszłą niedzielę o] LT";case 3:return"[W zeszłą środę o] LT";case 6:return"[W zeszłą sobotę o] LT";default:return"[W zeszły] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",m:wd,mm:wd,h:wd,hh:wd,d:"1 dzień",dd:"%d dni",M:"miesiąc",MM:wd,y:"rok",yy:wd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),uf.defineLocale("pt-br",{months:"Janeiro_Fevereiro_Março_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-Feira_Terça-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_Sábado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),weekdaysMin:"Dom_2ª_3ª_4ª_5ª_6ª_Sáb".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [às] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [às] HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrás",s:"poucos segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}º/,ordinal:"%dº"}),uf.defineLocale("pt",{months:"Janeiro_Fevereiro_Março_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-Feira_Terça-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_Sábado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),weekdaysMin:"Dom_2ª_3ª_4ª_5ª_6ª_Sáb".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"há %s",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}}),uf.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),weekdays:"duminică_luni_marți_miercuri_joi_vineri_sâmbătă".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sâm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_Sâ".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mâine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s în urmă",s:"câteva secunde",m:"un minut",mm:xd,h:"o oră",hh:xd,d:"o zi",dd:xd,M:"o lună",MM:xd,y:"un an",yy:xd},week:{dow:1,doy:7}}),uf.defineLocale("ru",{months:Ad,monthsShort:Bd,weekdays:Cd,weekdaysShort:"вс_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),monthsParse:[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[й|я]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., HH:mm",LLLL:"dddd, D MMMM YYYY г., HH:mm"},calendar:{sameDay:"[Сегодня в] LT",nextDay:"[Завтра в] LT",lastDay:"[Вчера в] LT",nextWeek:function(){return 2===this.day()?"[Во] dddd [в] LT":"[В] dddd [в] LT"},lastWeek:function(a){if(a.week()===this.week())return 2===this.day()?"[Во] dddd [в] LT":"[В] dddd [в] LT";switch(this.day()){case 0:return"[В прошлое] dddd [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",m:zd,mm:zd,h:"час",hh:zd,d:"день",dd:zd,M:"месяц",MM:zd,y:"год",yy:zd},meridiemParse:/ночи|утра|дня|вечера/i,isPM:function(a){return/^(дня|вечера)$/.test(a)},meridiem:function(a,b,c){return 4>a?"ночи":12>a?"утра":17>a?"дня":"вечера"},ordinalParse:/\d{1,2}-(й|го|я)/,ordinal:function(a,b){switch(b){case"M":case"d":case"DDD":return a+"-й";case"D":return a+"-го";case"w":case"W":return a+"-я";default:return a}},week:{dow:1,doy:7}}),uf.defineLocale("si",{months:"ජනවාරි_පෙබරවාරි_මාර්තු_අප්‍රේල්_මැයි_ජූනි_ජූලි_අගෝස්තු_සැප්තැම්බර්_ඔක්තෝබර්_නොවැම්බර්_දෙසැම්බර්".split("_"),monthsShort:"ජන_පෙබ_මාර්_අප්_මැයි_ජූනි_ජූලි_අගෝ_සැප්_ඔක්_නොවැ_දෙසැ".split("_"),weekdays:"ඉරිදා_සඳුදා_අඟහරුවාදා_බදාදා_බ්‍රහස්පතින්දා_සිකුරාදා_සෙනසුරාදා".split("_"),weekdaysShort:"ඉරි_සඳු_අඟ_බදා_බ්‍රහ_සිකු_සෙන".split("_"),weekdaysMin:"ඉ_ස_අ_බ_බ්‍ර_සි_සෙ".split("_"),longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [වැනි] dddd, a h:mm:ss"},calendar:{sameDay:"[අද] LT[ට]",nextDay:"[හෙට] LT[ට]",nextWeek:"dddd LT[ට]",lastDay:"[ඊයේ] LT[ට]",lastWeek:"[පසුගිය] dddd LT[ට]",sameElse:"L"},relativeTime:{future:"%sකින්",past:"%sකට පෙර",s:"තත්පර කිහිපය",m:"මිනිත්තුව",mm:"මිනිත්තු %d",h:"පැය",hh:"පැය %d",d:"දිනය",dd:"දින %d",M:"මාසය",MM:"මාස %d",y:"වසර",yy:"වසර %d"},ordinalParse:/\d{1,2} වැනි/,ordinal:function(a){return a+" වැනි"},meridiem:function(a,b,c){return a>11?c?"ප.ව.":"පස් වරු":c?"පෙ.ව.":"පෙර වරු"}}),"január_február_marec_apríl_máj_jún_júl_august_september_október_november_december".split("_")),ig="jan_feb_mar_apr_máj_jún_júl_aug_sep_okt_nov_dec".split("_"),jg=(uf.defineLocale("sk",{months:hg,monthsShort:ig,monthsParse:function(a,b){var c,d=[];for(c=0;12>c;c++)d[c]=new RegExp("^"+a[c]+"$|^"+b[c]+"$","i");return d}(hg,ig),weekdays:"nedeľa_pondelok_utorok_streda_štvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_št_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_št_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeľu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo štvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[včera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulú nedeľu o] LT";case 1:case 2:return"[minulý] dddd [o] LT";case 3:return"[minulú stredu o] LT";case 4:case 5:return"[minulý] dddd [o] LT";case 6:return"[minulú sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:Ed,m:Ed,mm:Ed,h:Ed,hh:Ed,d:Ed,dd:Ed,M:Ed,MM:Ed,y:Ed,yy:Ed},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),uf.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),weekdays:"nedelja_ponedeljek_torek_sreda_četrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._čet._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_če_pe_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[včeraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prejšnjo] [nedeljo] [ob] LT";case 3:return"[prejšnjo] [sredo] [ob] LT";case 6:return"[prejšnjo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prejšnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"čez %s",past:"pred %s",s:Fd,m:Fd,mm:Fd,h:Fd,hh:Fd,d:Fd,dd:Fd,M:Fd,MM:Fd,y:Fd,yy:Fd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),uf.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nëntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nën_Dhj".split("_"),weekdays:"E Diel_E Hënë_E Martë_E Mërkurë_E Enjte_E Premte_E Shtunë".split("_"),weekdaysShort:"Die_Hën_Mar_Mër_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_Më_E_P_Sh".split("_"),meridiemParse:/PD|MD/,isPM:function(a){return"M"===a.charAt(0)},meridiem:function(a,b,c){return 12>a?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot në] LT",nextDay:"[Nesër në] LT",nextWeek:"dddd [në] LT",lastDay:"[Dje në] LT",lastWeek:"dddd [e kaluar në] LT",sameElse:"L"},relativeTime:{future:"në %s",past:"%s më parë",s:"disa sekonda",m:"një minutë",mm:"%d minuta",h:"një orë",hh:"%d orë",d:"një ditë",dd:"%d ditë",M:"një muaj",MM:"%d muaj",y:"një vit",yy:"%d vite"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),{words:{m:["један минут","једне минуте"],mm:["минут","минуте","минута"],h:["један сат","једног сата"],hh:["сат","сата","сати"],dd:["дан","дана","дана"],MM:["месец","месеца","месеци"],yy:["година","године","година"]},correctGrammaticalCase:function(a,b){return 1===a?b[0]:a>=2&&4>=a?b[1]:b[2]},translate:function(a,b,c){var d=jg.words[c];return 1===c.length?b?d[0]:d[1]:a+" "+jg.correctGrammaticalCase(a,d)}}),kg=(uf.defineLocale("sr-cyrl",{months:["јануар","фебруар","март","април","мај","јун","јул","август","септембар","октобар","новембар","децембар"],monthsShort:["јан.","феб.","мар.","апр.","мај","јун","јул","авг.","сеп.","окт.","нов.","дец."],weekdays:["недеља","понедељак","уторак","среда","четвртак","петак","субота"],weekdaysShort:["нед.","пон.","уто.","сре.","чет.","пет.","суб."],weekdaysMin:["не","по","ут","ср","че","пе","су"],longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[данас у] LT",nextDay:"[сутра у] LT",nextWeek:function(){switch(this.day()){case 0:return"[у] [недељу] [у] LT";case 3:return"[у] [среду] [у] LT";case 6:return"[у] [суботу] [у] LT";case 1:case 2:case 4:case 5:return"[у] dddd [у] LT"}},lastDay:"[јуче у] LT",lastWeek:function(){var a=["[прошле] [недеље] [у] LT","[прошлог] [понедељка] [у] LT","[прошлог] [уторка] [у] LT","[прошле] [среде] [у] LT","[прошлог] [четвртка] [у] LT","[прошлог] [петка] [у] LT","[прошле] [суботе] [у] LT"];return a[this.day()]},sameElse:"L"},relativeTime:{future:"за %s",past:"пре %s",s:"неколико секунди",m:jg.translate,mm:jg.translate,h:jg.translate,hh:jg.translate,d:"дан",dd:jg.translate,M:"месец",MM:jg.translate,y:"годину",yy:jg.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),{words:{m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(a,b){return 1===a?b[0]:a>=2&&4>=a?b[1]:b[2]},translate:function(a,b,c){var d=kg.words[c];return 1===c.length?b?d[0]:d[1]:a+" "+kg.correctGrammaticalCase(a,d)}}),lg=(uf.defineLocale("sr",{months:["januar","februar","mart","april","maj","jun","jul","avgust","septembar","oktobar","novembar","decembar"],monthsShort:["jan.","feb.","mar.","apr.","maj","jun","jul","avg.","sep.","okt.","nov.","dec."],weekdays:["nedelja","ponedeljak","utorak","sreda","četvrtak","petak","subota"],weekdaysShort:["ned.","pon.","uto.","sre.","čet.","pet.","sub."],weekdaysMin:["ne","po","ut","sr","če","pe","su"],longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){var a=["[prošle] [nedelje] [u] LT","[prošlog] [ponedeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"];return a[this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",m:kg.translate,mm:kg.translate,h:kg.translate,hh:kg.translate,d:"dan",dd:kg.translate,M:"mesec",MM:kg.translate,y:"godinu",yy:kg.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),uf.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"söndag_måndag_tisdag_onsdag_torsdag_fredag_lördag".split("_"),weekdaysShort:"sön_mån_tis_ons_tor_fre_lör".split("_"),weekdaysMin:"sö_må_ti_on_to_fr_lö".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igår] LT",nextWeek:"[På] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"för %s sedan",s:"några sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en månad",MM:"%d månader",y:"ett år",yy:"%d år"},ordinalParse:/\d{1,2}(e|a)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"e":1===b?"a":2===b?"a":"e";return a+c},week:{dow:1,doy:4}}),uf.defineLocale("ta",{months:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),monthsShort:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),weekdays:"ஞாயிற்றுக்கிழமை_திங்கட்கிழமை_செவ்வாய்கிழமை_புதன்கிழமை_வியாழக்கிழமை_வெள்ளிக்கிழமை_சனிக்கிழமை".split("_"),weekdaysShort:"ஞாயிறு_திங்கள்_செவ்வாய்_புதன்_வியாழன்_வெள்ளி_சனி".split("_"),weekdaysMin:"ஞா_தி_செ_பு_வி_வெ_ச".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[இன்று] LT",nextDay:"[நாளை] LT",nextWeek:"dddd, LT",lastDay:"[நேற்று] LT",lastWeek:"[கடந்த வாரம்] dddd, LT",sameElse:"L"},relativeTime:{future:"%s இல்",past:"%s முன்",s:"ஒரு சில விநாடிகள்",m:"ஒரு நிமிடம்",mm:"%d நிமிடங்கள்",h:"ஒரு மணி நேரம்",hh:"%d மணி நேரம்",d:"ஒரு நாள்",dd:"%d நாட்கள்",M:"ஒரு மாதம்",MM:"%d மாதங்கள்",y:"ஒரு வருடம்",yy:"%d ஆண்டுகள்"},ordinalParse:/\d{1,2}வது/,ordinal:function(a){return a+"வது"},meridiemParse:/யாமம்|வைகறை|காலை|நண்பகல்|எற்பாடு|மாலை/,meridiem:function(a,b,c){return 2>a?" யாமம்":6>a?" வைகறை":10>a?" காலை":14>a?" நண்பகல்":18>a?" எற்பாடு":22>a?" மாலை":" யாமம்"},meridiemHour:function(a,b){return 12===a&&(a=0),"யாமம்"===b?2>a?a:a+12:"வைகறை"===b||"காலை"===b?a:"நண்பகல்"===b&&a>=10?a:a+12},week:{dow:0,doy:6}}),uf.defineLocale("th",{months:"มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),monthsShort:"มกรา_กุมภา_มีนา_เมษา_พฤษภา_มิถุนา_กรกฎา_สิงหา_กันยา_ตุลา_พฤศจิกา_ธันวา".split("_"),weekdays:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),weekdaysShort:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),weekdaysMin:"อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),longDateFormat:{LT:"H นาฬิกา m นาที",LTS:"H นาฬิกา m นาที s วินาที",L:"YYYY/MM/DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY เวลา H นาฬิกา m นาที",LLLL:"วันddddที่ D MMMM YYYY เวลา H นาฬิกา m นาที"},meridiemParse:/ก่อนเที่ยง|หลังเที่ยง/,isPM:function(a){return"หลังเที่ยง"===a},meridiem:function(a,b,c){return 12>a?"ก่อนเที่ยง":"หลังเที่ยง"},calendar:{sameDay:"[วันนี้ เวลา] LT",nextDay:"[พรุ่งนี้ เวลา] LT",nextWeek:"dddd[หน้า เวลา] LT",lastDay:"[เมื่อวานนี้ เวลา] LT",lastWeek:"[วัน]dddd[ที่แล้ว เวลา] LT",sameElse:"L"},relativeTime:{future:"อีก %s",past:"%sที่แล้ว",s:"ไม่กี่วินาที",m:"1 นาที",mm:"%d นาที",h:"1 ชั่วโมง",hh:"%d ชั่วโมง",d:"1 วัน",dd:"%d วัน",M:"1 เดือน",MM:"%d เดือน",y:"1 ปี",yy:"%d ปี"}}),uf.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"[Ngayon sa] LT",nextDay:"[Bukas sa] LT",nextWeek:"dddd [sa] LT",lastDay:"[Kahapon sa] LT",lastWeek:"dddd [huling linggo] LT",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},ordinalParse:/\d{1,2}/,ordinal:function(a){return a},week:{dow:1,doy:4}}),{1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'üncü",4:"'üncü",100:"'üncü",6:"'ncı",9:"'uncu",10:"'uncu",30:"'uncu",60:"'ıncı",90:"'ıncı"}),mg=(uf.defineLocale("tr",{months:"Ocak_Şubat_Mart_Nisan_Mayıs_Haziran_Temmuz_Ağustos_Eylül_Ekim_Kasım_Aralık".split("_"),monthsShort:"Oca_Şub_Mar_Nis_May_Haz_Tem_Ağu_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Salı_Çarşamba_Perşembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_Çar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_Ça_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[yarın saat] LT",nextWeek:"[haftaya] dddd [saat] LT",lastDay:"[dün] LT",lastWeek:"[geçen hafta] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s önce",s:"birkaç saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",M:"bir ay",MM:"%d ay",y:"bir yıl",yy:"%d yıl"},ordinalParse:/\d{1,2}'(inci|nci|üncü|ncı|uncu|ıncı)/,ordinal:function(a){if(0===a)return a+"'ıncı";var b=a%10,c=a%100-b,d=a>=100?100:null;return a+(lg[b]||lg[c]||lg[d])},week:{dow:1,doy:7}}),uf.defineLocale("tzl",{months:"Januar_Fevraglh_Març_Avrïu_Mai_Gün_Julia_Guscht_Setemvar_Listopäts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_Gün_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"Súladi_Lúneçi_Maitzi_Márcuri_Xhúadi_Viénerçi_Sáturi".split("_"),weekdaysShort:"Súl_Lún_Mai_Már_Xhú_Vié_Sát".split("_"),weekdaysMin:"Sú_Lú_Ma_Má_Xh_Vi_Sá".split("_"),longDateFormat:{LT:"HH.mm",LTS:"LT.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY LT",LLLL:"dddd, [li] D. MMMM [dallas] YYYY LT"},meridiem:function(a,b,c){return a>11?c?"d'o":"D'O":c?"d'a":"D'A"},calendar:{sameDay:"[oxhi à] LT",nextDay:"[demà à] LT",nextWeek:"dddd [à] LT",lastDay:"[ieiri à] LT",lastWeek:"[sür el] dddd [lasteu à] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:Gd,m:Gd,mm:Gd,h:Gd,hh:Gd,d:Gd,dd:Gd,M:Gd,MM:Gd,y:Gd,yy:Gd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),uf.defineLocale("tzm-latn",{months:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",m:"minuḍ",mm:"%d minuḍ",h:"saɛa",hh:"%d tassaɛin",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}}),uf.defineLocale("tzm",{months:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),monthsShort:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),weekdays:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysShort:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysMin:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ⴰⵙⴷⵅ ⴴ] LT",nextDay:"[ⴰⵙⴽⴰ ⴴ] LT",nextWeek:"dddd [ⴴ] LT",lastDay:"[ⴰⵚⴰⵏⵜ ⴴ] LT",lastWeek:"dddd [ⴴ] LT",sameElse:"L"},relativeTime:{future:"ⴷⴰⴷⵅ ⵙ ⵢⴰⵏ %s",past:"ⵢⴰⵏ %s",s:"ⵉⵎⵉⴽ",m:"ⵎⵉⵏⵓⴺ",mm:"%d ⵎⵉⵏⵓⴺ",h:"ⵙⴰⵄⴰ",hh:"%d ⵜⴰⵙⵙⴰⵄⵉⵏ",d:"ⴰⵙⵙ",dd:"%d oⵙⵙⴰⵏ",M:"ⴰⵢoⵓⵔ",MM:"%d ⵉⵢⵢⵉⵔⵏ",y:"ⴰⵙⴳⴰⵙ",yy:"%d ⵉⵙⴳⴰⵙⵏ"},week:{dow:6,doy:12}}),uf.defineLocale("uk",{months:Jd,monthsShort:"січ_лют_бер_квіт_трав_черв_лип_серп_вер_жовт_лист_груд".split("_"),weekdays:Kd,weekdaysShort:"нд_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY р.",LLL:"D MMMM YYYY р., HH:mm",LLLL:"dddd, D MMMM YYYY р., HH:mm"},calendar:{sameDay:Ld("[Сьогодні "),nextDay:Ld("[Завтра "),lastDay:Ld("[Вчора "),nextWeek:Ld("[У] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return Ld("[Минулої] dddd [").call(this);case 1:case 2:case 4:return Ld("[Минулого] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:"за %s",past:"%s тому",s:"декілька секунд",m:Id,mm:Id,h:"годину",hh:Id,d:"день",dd:Id,M:"місяць",MM:Id,y:"рік",yy:Id},meridiemParse:/ночі|ранку|дня|вечора/,isPM:function(a){return/^(дня|вечора)$/.test(a)},meridiem:function(a,b,c){return 4>a?"ночі":12>a?"ранку":17>a?"дня":"вечора"},ordinalParse:/\d{1,2}-(й|го)/,ordinal:function(a,b){switch(b){case"M":case"d":case"DDD":case"w":case"W":return a+"-й";case"D":return a+"-го";default:return a}},week:{dow:1,doy:7}}),uf.defineLocale("uz",{months:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),monthsShort:"янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек".split("_"),weekdays:"Якшанба_Душанба_Сешанба_Чоршанба_Пайшанба_Жума_Шанба".split("_"),weekdaysShort:"Якш_Душ_Сеш_Чор_Пай_Жум_Шан".split("_"),weekdaysMin:"Як_Ду_Се_Чо_Па_Жу_Ша".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Бугун соат] LT [да]",nextDay:"[Эртага] LT [да]",nextWeek:"dddd [куни соат] LT [да]",lastDay:"[Кеча соат] LT [да]",lastWeek:"[Утган] dddd [куни соат] LT [да]",sameElse:"L"},relativeTime:{future:"Якин %s ичида",past:"Бир неча %s олдин",s:"фурсат",m:"бир дакика",mm:"%d дакика",h:"бир соат",hh:"%d соат",d:"бир кун",dd:"%d кун",M:"бир ой",MM:"%d ой",y:"бир йил",yy:"%d йил"},week:{dow:1,doy:7}}),uf.defineLocale("vi",{months:"tháng 1_tháng 2_tháng 3_tháng 4_tháng 5_tháng 6_tháng 7_tháng 8_tháng 9_tháng 10_tháng 11_tháng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),weekdays:"chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ sáu_thứ bảy".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [năm] YYYY",LLL:"D MMMM [năm] YYYY HH:mm",LLLL:"dddd, D MMMM [năm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",
llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hôm nay lúc] LT",nextDay:"[Ngày mai lúc] LT",nextWeek:"dddd [tuần tới lúc] LT",lastDay:"[Hôm qua lúc] LT",lastWeek:"dddd [tuần rồi lúc] LT",sameElse:"L"},relativeTime:{future:"%s tới",past:"%s trước",s:"vài giây",m:"một phút",mm:"%d phút",h:"một giờ",hh:"%d giờ",d:"một ngày",dd:"%d ngày",M:"một tháng",MM:"%d tháng",y:"một năm",yy:"%d năm"},ordinalParse:/\d{1,2}/,ordinal:function(a){return a},week:{dow:1,doy:4}}),uf.defineLocale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah点mm分",LTS:"Ah点m分s秒",L:"YYYY-MM-DD",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日Ah点mm分",LLLL:"YYYY年MMMD日ddddAh点mm分",l:"YYYY-MM-DD",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日Ah点mm分",llll:"YYYY年MMMD日ddddAh点mm分"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(a,b){return 12===a&&(a=0),"凌晨"===b||"早上"===b||"上午"===b?a:"下午"===b||"晚上"===b?a+12:a>=11?a:a+12},meridiem:function(a,b,c){var d=100*a+b;return 600>d?"凌晨":900>d?"早上":1130>d?"上午":1230>d?"中午":1800>d?"下午":"晚上"},calendar:{sameDay:function(){return 0===this.minutes()?"[今天]Ah[点整]":"[今天]LT"},nextDay:function(){return 0===this.minutes()?"[明天]Ah[点整]":"[明天]LT"},lastDay:function(){return 0===this.minutes()?"[昨天]Ah[点整]":"[昨天]LT"},nextWeek:function(){var a,b;return a=uf().startOf("week"),b=this.unix()-a.unix()>=604800?"[下]":"[本]",0===this.minutes()?b+"dddAh点整":b+"dddAh点mm"},lastWeek:function(){var a,b;return a=uf().startOf("week"),b=this.unix()<a.unix()?"[上]":"[本]",0===this.minutes()?b+"dddAh点整":b+"dddAh点mm"},sameElse:"LL"},ordinalParse:/\d{1,2}(日|月|周)/,ordinal:function(a,b){switch(b){case"d":case"D":case"DDD":return a+"日";case"M":return a+"月";case"w":case"W":return a+"周";default:return a}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},week:{dow:1,doy:4}}),uf.defineLocale("zh-tw",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah點mm分",LTS:"Ah點m分s秒",L:"YYYY年MMMD日",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日Ah點mm分",LLLL:"YYYY年MMMD日ddddAh點mm分",l:"YYYY年MMMD日",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日Ah點mm分",llll:"YYYY年MMMD日ddddAh點mm分"},meridiemParse:/早上|上午|中午|下午|晚上/,meridiemHour:function(a,b){return 12===a&&(a=0),"早上"===b||"上午"===b?a:"中午"===b?a>=11?a:a+12:"下午"===b||"晚上"===b?a+12:void 0},meridiem:function(a,b,c){var d=100*a+b;return 900>d?"早上":1130>d?"上午":1230>d?"中午":1800>d?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},ordinalParse:/\d{1,2}(日|月|週)/,ordinal:function(a,b){switch(b){case"d":case"D":case"DDD":return a+"日";case"M":return a+"月";case"w":case"W":return a+"週";default:return a}},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",m:"一分鐘",mm:"%d分鐘",h:"一小時",hh:"%d小時",d:"一天",dd:"%d天",M:"一個月",MM:"%d個月",y:"一年",yy:"%d年"}}),uf);return mg.locale("en"),mg});
/*!
 * ui-select
 * http://github.com/angular-ui/ui-select
 * Version: 0.19.7 - 2017-04-15T14:28:36.649Z
 * License: MIT
 */
!function(){"use strict";function e(e){return angular.isUndefined(e)||null===e}var t={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,COMMAND:91,MAP:{91:"COMMAND",8:"BACKSPACE",9:"TAB",13:"ENTER",16:"SHIFT",17:"CTRL",18:"ALT",19:"PAUSEBREAK",20:"CAPSLOCK",27:"ESC",32:"SPACE",33:"PAGE_UP",34:"PAGE_DOWN",35:"END",36:"HOME",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",43:"+",44:"PRINTSCREEN",45:"INSERT",46:"DELETE",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NUMLOCK",145:"SCROLLLOCK",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},isControl:function(e){var s=e.which;switch(s){case t.COMMAND:case t.SHIFT:case t.CTRL:case t.ALT:return!0}return!!(e.metaKey||e.ctrlKey||e.altKey)},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&e<=123},isVerticalMovement:function(e){return~[t.UP,t.DOWN].indexOf(e)},isHorizontalMovement:function(e){return~[t.LEFT,t.RIGHT,t.BACKSPACE,t.DELETE].indexOf(e)},toSeparator:function(e){var s={ENTER:"\n",TAB:"\t",SPACE:" "}[e];return s?s:t[e]?void 0:e}};void 0===angular.element.prototype.querySelectorAll&&(angular.element.prototype.querySelectorAll=function(e){return angular.element(this[0].querySelectorAll(e))}),void 0===angular.element.prototype.closest&&(angular.element.prototype.closest=function(e){for(var t=this[0],s=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector;t;){if(s.bind(t)(e))return t;t=t.parentElement}return!1});var s=0,i=angular.module("ui.select",[]).constant("uiSelectConfig",{theme:"bootstrap",searchEnabled:!0,sortable:!1,placeholder:"",refreshDelay:1e3,closeOnSelect:!0,skipFocusser:!1,dropdownPosition:"auto",removeSelected:!0,resetSearchInput:!0,generateId:function(){return s++},appendToBody:!1,spinnerEnabled:!1,spinnerClass:"glyphicon glyphicon-refresh ui-select-spin",backspaceReset:!0}).service("uiSelectMinErr",function(){var e=angular.$$minErr("ui.select");return function(){var t=e.apply(this,arguments),s=t.message.replace(new RegExp("\nhttp://errors.angularjs.org/.*"),"");return new Error(s)}}).directive("uisTranscludeAppend",function(){return{link:function(e,t,s,i,c){c(e,function(e){t.append(e)})}}}).filter("highlight",function(){function e(e){return(""+e).replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(t,s){return s&&t?(""+t).replace(new RegExp(e(s),"gi"),'<span class="ui-select-highlight">$&</span>'):t}}).factory("uisOffset",["$document","$window",function(e,t){return function(s){var i=s[0].getBoundingClientRect();return{width:i.width||s.prop("offsetWidth"),height:i.height||s.prop("offsetHeight"),top:i.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:i.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}}}]);i.factory("$$uisDebounce",["$timeout",function(e){return function(t,s){var i;return function(){var c=this,n=Array.prototype.slice.call(arguments);i&&e.cancel(i),i=e(function(){t.apply(c,n)},s)}}}]),i.directive("uiSelectChoices",["uiSelectConfig","uisRepeatParser","uiSelectMinErr","$compile","$window",function(e,t,s,i,c){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(t){t.addClass("ui-select-choices");var s=t.parent().attr("theme")||e.theme;return s+"/choices.tpl.html"},compile:function(i,n){if(!n.repeat)throw s("repeat","Expected 'repeat' expression.");var l=n.groupBy,a=n.groupFilter;if(l){var r=i.querySelectorAll(".ui-select-choices-group");if(1!==r.length)throw s("rows","Expected 1 .ui-select-choices-group but got '{0}'.",r.length);r.attr("ng-repeat",t.getGroupNgRepeatExpression())}var o=t.parse(n.repeat),u=i.querySelectorAll(".ui-select-choices-row");if(1!==u.length)throw s("rows","Expected 1 .ui-select-choices-row but got '{0}'.",u.length);u.attr("ng-repeat",o.repeatExpression(l)).attr("ng-if","$select.open");var d=i.querySelectorAll(".ui-select-choices-row-inner");if(1!==d.length)throw s("rows","Expected 1 .ui-select-choices-row-inner but got '{0}'.",d.length);d.attr("uis-transclude-append","");var p=c.document.addEventListener?u:d;return p.attr("ng-click","$select.select("+o.itemName+",$select.skipFocusser,$event)"),function(t,s,c,n){n.parseRepeatAttr(c.repeat,l,a),n.disableChoiceExpression=c.uiDisableChoice,n.onHighlightCallback=c.onHighlight,n.minimumInputLength=parseInt(c.minimumInputLength)||0,n.dropdownPosition=c.position?c.position.toLowerCase():e.dropdownPosition,t.$watch("$select.search",function(e){e&&!n.open&&n.multiple&&n.activate(!1,!0),n.activeIndex=n.tagging.isActivated?-1:0,!c.minimumInputLength||n.search.length>=c.minimumInputLength?n.refresh(c.refresh):n.items=[]}),c.$observe("refreshDelay",function(){var s=t.$eval(c.refreshDelay);n.refreshDelay=void 0!==s?s:e.refreshDelay}),t.$watch("$select.open",function(e){e?(i.attr("role","listbox"),n.refresh(c.refresh)):s.removeAttr("role")})}}}}]),i.controller("uiSelectCtrl",["$scope","$element","$timeout","$filter","$$uisDebounce","uisRepeatParser","uiSelectMinErr","uiSelectConfig","$parse","$injector","$window",function(s,i,c,n,l,a,r,o,u,d,p){function h(e,t,s){if(e.findIndex)return e.findIndex(t,s);for(var i,c=Object(e),n=c.length>>>0,l=0;l<n;l++)if(i=c[l],t.call(s,i,l,c))return l;return-1}function g(){y.resetSearchInput&&(y.search=x,y.selected&&y.items.length&&!y.multiple&&(y.activeIndex=h(y.items,function(e){return angular.equals(this,e)},y.selected)))}function f(e,t){var s,i,c=[];for(s=0;s<t.length;s++)for(i=0;i<e.length;i++)e[i].name==[t[s]]&&c.push(e[i]);return c}function v(e,t){var s=I.indexOf(e);t&&s===-1&&I.push(e),!t&&s>-1&&I.splice(s,1)}function m(e){return I.indexOf(e)>-1}function $(e){function t(e,t){var s=i.indexOf(e);t&&s===-1&&i.push(e),!t&&s>-1&&i.splice(s,1)}function s(e){return i.indexOf(e)>-1}if(e){var i=[];y.isLocked=function(e,i){var c=!1,n=y.selected[i];return n&&(e?(c=!!e.$eval(y.lockChoiceExpression),t(n,c)):c=s(n)),c}}}function b(e){var s=!0;switch(e){case t.DOWN:if(!y.open&&y.multiple)y.activate(!1,!0);else if(y.activeIndex<y.items.length-1)for(var i=++y.activeIndex;m(y.items[i])&&i<y.items.length;)y.activeIndex=++i;break;case t.UP:var c=0===y.search.length&&y.tagging.isActivated?-1:0;if(!y.open&&y.multiple)y.activate(!1,!0);else if(y.activeIndex>c)for(var n=--y.activeIndex;m(y.items[n])&&n>c;)y.activeIndex=--n;break;case t.TAB:y.multiple&&!y.open||y.select(y.items[y.activeIndex],!0);break;case t.ENTER:y.open&&(y.tagging.isActivated||y.activeIndex>=0)?y.select(y.items[y.activeIndex],y.skipFocusser):y.activate(!1,!0);break;case t.ESC:y.close();break;default:s=!1}return s}function w(){var e=i.querySelectorAll(".ui-select-choices-content"),t=e.querySelectorAll(".ui-select-choices-row");if(t.length<1)throw r("choices","Expected multiple .ui-select-choices-row but got '{0}'.",t.length);if(!(y.activeIndex<0)){var s=t[y.activeIndex],c=s.offsetTop+s.clientHeight-e[0].scrollTop,n=e[0].offsetHeight;c>n?e[0].scrollTop+=c-n:c<s.clientHeight&&(y.isGrouped&&0===y.activeIndex?e[0].scrollTop=0:e[0].scrollTop-=s.clientHeight-c)}}var y=this,x="";if(y.placeholder=o.placeholder,y.searchEnabled=o.searchEnabled,y.sortable=o.sortable,y.refreshDelay=o.refreshDelay,y.paste=o.paste,y.resetSearchInput=o.resetSearchInput,y.refreshing=!1,y.spinnerEnabled=o.spinnerEnabled,y.spinnerClass=o.spinnerClass,y.removeSelected=o.removeSelected,y.closeOnSelect=!0,y.skipFocusser=!1,y.search=x,y.activeIndex=0,y.items=[],y.open=!1,y.focus=!1,y.disabled=!1,y.selected=void 0,y.dropdownPosition="auto",y.focusser=void 0,y.multiple=void 0,y.disableChoiceExpression=void 0,y.tagging={isActivated:!1,fct:void 0},y.taggingTokens={isActivated:!1,tokens:void 0},y.lockChoiceExpression=void 0,y.clickTriggeredSelect=!1,y.$filter=n,y.$element=i,y.$animate=function(){try{return d.get("$animate")}catch(e){return null}}(),y.searchInput=i.querySelectorAll("input.ui-select-search"),1!==y.searchInput.length)throw r("searchInput","Expected 1 input.ui-select-search but got '{0}'.",y.searchInput.length);y.isEmpty=function(){return e(y.selected)||""===y.selected||y.multiple&&0===y.selected.length},y.activate=function(e,t){if(y.disabled||y.open)y.open&&!y.searchEnabled&&y.close();else{t||g(),s.$broadcast("uis:activate"),y.open=!0,y.activeIndex=y.activeIndex>=y.items.length?0:y.activeIndex,y.activeIndex===-1&&y.taggingLabel!==!1&&(y.activeIndex=0);var n=i.querySelectorAll(".ui-select-choices-content"),l=i.querySelectorAll(".ui-select-search");if(y.$animate&&y.$animate.on&&y.$animate.enabled(n[0])){var a=function(t,s){"start"===s&&0===y.items.length?(y.$animate.off("removeClass",l[0],a),c(function(){y.focusSearchInput(e)})):"close"===s&&(y.$animate.off("enter",n[0],a),c(function(){y.focusSearchInput(e)}))};y.items.length>0?y.$animate.on("enter",n[0],a):y.$animate.on("removeClass",l[0],a)}else c(function(){y.focusSearchInput(e),!y.tagging.isActivated&&y.items.length>1&&w()})}},y.focusSearchInput=function(e){y.search=e||y.search,y.searchInput[0].focus()},y.findGroupByName=function(e){return y.groups&&y.groups.filter(function(t){return t.name===e})[0]},y.parseRepeatAttr=function(e,t,i){function c(e){var c=s.$eval(t);if(y.groups=[],angular.forEach(e,function(e){var t=angular.isFunction(c)?c(e):e[c],s=y.findGroupByName(t);s?s.items.push(e):y.groups.push({name:t,items:[e]})}),i){var n=s.$eval(i);angular.isFunction(n)?y.groups=n(y.groups):angular.isArray(n)&&(y.groups=f(y.groups,n))}y.items=[],y.groups.forEach(function(e){y.items=y.items.concat(e.items)})}function n(e){y.items=e||[]}y.setItemsFn=t?c:n,y.parserResult=a.parse(e),y.isGrouped=!!t,y.itemProperty=y.parserResult.itemName;var l=y.parserResult.source,o=function(){var e=l(s);s.$uisSource=Object.keys(e).map(function(t){var s={};return s[y.parserResult.keyName]=t,s.value=e[t],s})};y.parserResult.keyName&&(o(),y.parserResult.source=u("$uisSource"+y.parserResult.filters),s.$watch(l,function(e,t){e!==t&&o()},!0)),y.refreshItems=function(e){e=e||y.parserResult.source(s);var t=y.selected;if(y.isEmpty()||angular.isArray(t)&&!t.length||!y.multiple||!y.removeSelected)y.setItemsFn(e);else if(void 0!==e&&null!==e){var i=e.filter(function(e){return angular.isArray(t)?t.every(function(t){return!angular.equals(e,t)}):!angular.equals(e,t)});y.setItemsFn(i)}"auto"!==y.dropdownPosition&&"up"!==y.dropdownPosition||s.calculateDropdownPos(),s.$broadcast("uis:refresh")},s.$watchCollection(y.parserResult.source,function(e){if(void 0===e||null===e)y.items=[];else{if(!angular.isArray(e))throw r("items","Expected an array but got '{0}'.",e);y.refreshItems(e),angular.isDefined(y.ngModel.$modelValue)&&(y.ngModel.$modelValue=null)}})};var E;y.refresh=function(e){void 0!==e&&(E&&c.cancel(E),E=c(function(){if(s.$select.search.length>=s.$select.minimumInputLength){var t=s.$eval(e);t&&angular.isFunction(t.then)&&!y.refreshing&&(y.refreshing=!0,t["finally"](function(){y.refreshing=!1}))}},y.refreshDelay))},y.isActive=function(e){if(!y.open)return!1;var t=y.items.indexOf(e[y.itemProperty]),s=t==y.activeIndex;return!(!s||t<0)&&(s&&!angular.isUndefined(y.onHighlightCallback)&&e.$eval(y.onHighlightCallback),s)};var S=function(e){return y.selected&&angular.isArray(y.selected)&&y.selected.filter(function(t){return angular.equals(t,e)}).length>0},I=[];y.isDisabled=function(e){if(y.open){var t=e[y.itemProperty],s=y.items.indexOf(t),i=!1;if(s>=0&&(angular.isDefined(y.disableChoiceExpression)||y.multiple)){if(t.isTag)return!1;y.multiple&&(i=S(t)),!i&&angular.isDefined(y.disableChoiceExpression)&&(i=!!e.$eval(y.disableChoiceExpression)),v(t,i)}return i}},y.select=function(t,i,c){if(e(t)||!m(t)){if(!y.items&&!y.search&&!y.tagging.isActivated)return;if(!t||!m(t)){if(y.clickTriggeredSelect=!1,c&&("click"===c.type||"touchend"===c.type)&&t&&(y.clickTriggeredSelect=!0),y.tagging.isActivated&&y.clickTriggeredSelect===!1){if(y.taggingLabel===!1)if(y.activeIndex<0){if(void 0===t&&(t=void 0!==y.tagging.fct?y.tagging.fct(y.search):y.search),!t||angular.equals(y.items[0],t))return}else t=y.items[y.activeIndex];else if(0===y.activeIndex){if(void 0===t)return;if(void 0!==y.tagging.fct&&"string"==typeof t){if(t=y.tagging.fct(t),!t)return}else"string"==typeof t&&(t=t.replace(y.taggingLabel,"").trim())}if(S(t))return void y.close(i)}g(),s.$broadcast("uis:select",t),y.closeOnSelect&&y.close(i)}}},y.close=function(e){y.open&&(y.ngModel&&y.ngModel.$setTouched&&y.ngModel.$setTouched(),y.open=!1,g(),s.$broadcast("uis:close",e))},y.setFocus=function(){y.focus||y.focusInput[0].focus()},y.clear=function(e){y.select(null),e.stopPropagation(),c(function(){y.focusser[0].focus()},0,!1)},y.toggle=function(e){y.open?(y.close(),e.preventDefault(),e.stopPropagation()):y.activate()},y.isLocked=function(){return!1},s.$watch(function(){return angular.isDefined(y.lockChoiceExpression)&&""!==y.lockChoiceExpression},$);var C=null,k=!1;y.sizeSearchInput=function(){var e=y.searchInput[0],t=y.$element[0],i=function(){return t.clientWidth*!!e.offsetParent},n=function(t){if(0===t)return!1;var s=t-e.offsetLeft;return s<50&&(s=t),y.searchInput.css("width",s+"px"),!0};y.searchInput.css("width","10px"),c(function(){null!==C||n(i())||(C=s.$watch(function(){k||(k=!0,s.$$postDigest(function(){k=!1,n(i())&&(C(),C=null)}))},angular.noop))})},y.searchInput.on("keydown",function(e){var i=e.which;~[t.ENTER,t.ESC].indexOf(i)&&(e.preventDefault(),e.stopPropagation()),s.$apply(function(){var s=!1;if((y.items.length>0||y.tagging.isActivated)&&(b(i)||y.searchEnabled||(e.preventDefault(),e.stopPropagation()),y.taggingTokens.isActivated)){for(var n=0;n<y.taggingTokens.tokens.length;n++)y.taggingTokens.tokens[n]===t.MAP[e.keyCode]&&y.search.length>0&&(s=!0);s&&c(function(){y.searchInput.triggerHandler("tagged");var s=y.search.replace(t.MAP[e.keyCode],"").trim();y.tagging.fct&&(s=y.tagging.fct(s)),s&&y.select(s,!0)})}}),t.isVerticalMovement(i)&&y.items.length>0&&w(),i!==t.ENTER&&i!==t.ESC||(e.preventDefault(),e.stopPropagation())}),y.searchInput.on("paste",function(e){var s;if(s=window.clipboardData&&window.clipboardData.getData?window.clipboardData.getData("Text"):(e.originalEvent||e).clipboardData.getData("text/plain"),s=y.search+s,s&&s.length>0)if(y.taggingTokens.isActivated){for(var i=[],c=0;c<y.taggingTokens.tokens.length;c++){var n=t.toSeparator(y.taggingTokens.tokens[c])||y.taggingTokens.tokens[c];if(s.indexOf(n)>-1){i=s.split(n);break}}0===i.length&&(i=[s]);var l=y.search;angular.forEach(i,function(e){var t=y.tagging.fct?y.tagging.fct(e):e;t&&y.select(t,!0)}),y.search=l||x,e.preventDefault(),e.stopPropagation()}else y.paste&&(y.paste(s),y.search=x,e.preventDefault(),e.stopPropagation())}),y.searchInput.on("tagged",function(){c(function(){g()})});var A=l(function(){y.sizeSearchInput()},50);angular.element(p).bind("resize",A),s.$on("$destroy",function(){y.searchInput.off("keyup keydown tagged blur paste"),angular.element(p).off("resize",A)}),s.$watch("$select.activeIndex",function(e){e&&i.find("input").attr("aria-activedescendant","ui-select-choices-row-"+y.generatedId+"-"+e)}),s.$watch("$select.open",function(e){e||i.find("input").removeAttr("aria-activedescendant")})}]),i.directive("uiSelect",["$document","uiSelectConfig","uiSelectMinErr","uisOffset","$compile","$parse","$timeout",function(e,t,s,i,c,n,l){return{restrict:"EA",templateUrl:function(e,s){var i=s.theme||t.theme;return i+(angular.isDefined(s.multiple)?"/select-multiple.tpl.html":"/select.tpl.html")},replace:!0,transclude:!0,require:["uiSelect","^ngModel"],scope:!0,controller:"uiSelectCtrl",controllerAs:"$select",compile:function(c,a){var r=/{(.*)}\s*{(.*)}/.exec(a.ngClass);if(r){var o="{"+r[1]+", "+r[2]+"}";a.ngClass=o,c.attr("ng-class",o)}return angular.isDefined(a.multiple)?c.append("<ui-select-multiple/>").removeAttr("multiple"):c.append("<ui-select-single/>"),a.inputId&&(c.querySelectorAll("input.ui-select-search")[0].id=a.inputId),function(c,a,r,o,u){function d(e){if(g.open){var t=!1;if(t=window.jQuery?window.jQuery.contains(a[0],e.target):a[0].contains(e.target),!t&&!g.clickTriggeredSelect){var s;if(g.skipFocusser)s=!0;else{var i=["input","button","textarea","select"],n=angular.element(e.target).controller("uiSelect");s=n&&n!==g,s||(s=~i.indexOf(e.target.tagName.toLowerCase()))}g.close(s),c.$digest()}g.clickTriggeredSelect=!1}}function p(){var t=i(a);m=angular.element('<div class="ui-select-placeholder"></div>'),m[0].style.width=t.width+"px",m[0].style.height=t.height+"px",a.after(m),$=a[0].style.width,e.find("body").append(a),a[0].style.position="absolute",a[0].style.left=t.left+"px",a[0].style.top=t.top+"px",a[0].style.width=t.width+"px"}function h(){null!==m&&(m.replaceWith(a),m=null,a[0].style.position="",a[0].style.left="",a[0].style.top="",a[0].style.width=$,g.setFocus())}var g=o[0],f=o[1];g.generatedId=t.generateId(),g.baseTitle=r.title||"Select box",g.focusserTitle=g.baseTitle+" focus",g.focusserId="focusser-"+g.generatedId,g.closeOnSelect=function(){return angular.isDefined(r.closeOnSelect)?n(r.closeOnSelect)():t.closeOnSelect}(),c.$watch("skipFocusser",function(){var e=c.$eval(r.skipFocusser);g.skipFocusser=void 0!==e?e:t.skipFocusser}),g.onSelectCallback=n(r.onSelect),g.onRemoveCallback=n(r.onRemove),g.ngModel=f,g.choiceGrouped=function(e){return g.isGrouped&&e&&e.name},r.tabindex&&r.$observe("tabindex",function(e){g.focusInput.attr("tabindex",e),a.removeAttr("tabindex")}),c.$watch(function(){return c.$eval(r.searchEnabled)},function(e){g.searchEnabled=void 0!==e?e:t.searchEnabled}),c.$watch("sortable",function(){var e=c.$eval(r.sortable);g.sortable=void 0!==e?e:t.sortable}),r.$observe("backspaceReset",function(){var e=c.$eval(r.backspaceReset);g.backspaceReset=void 0===e||e}),r.$observe("limit",function(){g.limit=angular.isDefined(r.limit)?parseInt(r.limit,10):void 0}),c.$watch("removeSelected",function(){var e=c.$eval(r.removeSelected);g.removeSelected=void 0!==e?e:t.removeSelected}),r.$observe("disabled",function(){g.disabled=void 0!==r.disabled&&r.disabled}),r.$observe("resetSearchInput",function(){var e=c.$eval(r.resetSearchInput);g.resetSearchInput=void 0===e||e}),r.$observe("paste",function(){g.paste=c.$eval(r.paste)}),r.$observe("tagging",function(){if(void 0!==r.tagging){var e=c.$eval(r.tagging);g.tagging={isActivated:!0,fct:e!==!0?e:void 0}}else g.tagging={isActivated:!1,fct:void 0}}),r.$observe("taggingLabel",function(){void 0!==r.tagging&&("false"===r.taggingLabel?g.taggingLabel=!1:g.taggingLabel=void 0!==r.taggingLabel?r.taggingLabel:"(new)")}),r.$observe("taggingTokens",function(){if(void 0!==r.tagging){var e=void 0!==r.taggingTokens?r.taggingTokens.split("|"):[",","ENTER"];g.taggingTokens={isActivated:!0,tokens:e}}}),r.$observe("spinnerEnabled",function(){var e=c.$eval(r.spinnerEnabled);g.spinnerEnabled=void 0!==e?e:t.spinnerEnabled}),r.$observe("spinnerClass",function(){var e=r.spinnerClass;g.spinnerClass=void 0!==e?r.spinnerClass:t.spinnerClass}),angular.isDefined(r.autofocus)&&l(function(){g.setFocus()}),angular.isDefined(r.focusOn)&&c.$on(r.focusOn,function(){l(function(){g.setFocus()})}),e.on("click",d),c.$on("$destroy",function(){e.off("click",d)}),u(c,function(e){var t=angular.element("<div>").append(e),i=t.querySelectorAll(".ui-select-match");if(i.removeAttr("ui-select-match"),i.removeAttr("data-ui-select-match"),1!==i.length)throw s("transcluded","Expected 1 .ui-select-match but got '{0}'.",i.length);a.querySelectorAll(".ui-select-match").replaceWith(i);var c=t.querySelectorAll(".ui-select-choices");if(c.removeAttr("ui-select-choices"),c.removeAttr("data-ui-select-choices"),1!==c.length)throw s("transcluded","Expected 1 .ui-select-choices but got '{0}'.",c.length);a.querySelectorAll(".ui-select-choices").replaceWith(c);var n=t.querySelectorAll(".ui-select-no-choice");n.removeAttr("ui-select-no-choice"),n.removeAttr("data-ui-select-no-choice"),1==n.length&&a.querySelectorAll(".ui-select-no-choice").replaceWith(n)});var v=c.$eval(r.appendToBody);(void 0!==v?v:t.appendToBody)&&(c.$watch("$select.open",function(e){e?p():h()}),c.$on("$destroy",function(){h()}));var m=null,$="",b=null,w="direction-up";c.$watch("$select.open",function(){"auto"!==g.dropdownPosition&&"up"!==g.dropdownPosition||c.calculateDropdownPos()});var y=function(e,t){e=e||i(a),t=t||i(b),b[0].style.position="absolute",b[0].style.top=t.height*-1+"px",a.addClass(w)},x=function(e,t){a.removeClass(w),e=e||i(a),t=t||i(b),b[0].style.position="",b[0].style.top=""},E=function(){l(function(){if("up"===g.dropdownPosition)y();else{a.removeClass(w);var t=i(a),s=i(b),c=e[0].documentElement.scrollTop||e[0].body.scrollTop;t.top+t.height+s.height>c+e[0].documentElement.clientHeight?y(t,s):x(t,s)}b[0].style.opacity=1})},S=!1;c.calculateDropdownPos=function(){if(g.open){if(b=angular.element(a).querySelectorAll(".ui-select-dropdown"),0===b.length)return;if(""!==g.search||S||(b[0].style.opacity=0,S=!0),!i(b).height&&g.$animate&&g.$animate.on&&g.$animate.enabled(b)){var e=!0;g.$animate.on("enter",b,function(t,s){"close"===s&&e&&(E(),e=!1)})}else E()}else{if(null===b||0===b.length)return;b[0].style.opacity=0,b[0].style.position="",b[0].style.top="",a.removeClass(w)}}}}}}]),i.directive("uiSelectMatch",["uiSelectConfig",function(e){function t(e,t){return e[0].hasAttribute(t)?e.attr(t):e[0].hasAttribute("data-"+t)?e.attr("data-"+t):e[0].hasAttribute("x-"+t)?e.attr("x-"+t):void 0}return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(s){s.addClass("ui-select-match");var i=s.parent(),c=t(i,"theme")||e.theme,n=angular.isDefined(t(i,"multiple"));return c+(n?"/match-multiple.tpl.html":"/match.tpl.html")},link:function(t,s,i,c){function n(e){c.allowClear=!!angular.isDefined(e)&&(""===e||"true"===e.toLowerCase())}c.lockChoiceExpression=i.uiLockChoice,i.$observe("placeholder",function(t){c.placeholder=void 0!==t?t:e.placeholder}),i.$observe("allowClear",n),n(i.allowClear),c.multiple&&c.sizeSearchInput()}}}]),i.directive("uiSelectMultiple",["uiSelectMinErr","$timeout",function(s,i){return{restrict:"EA",require:["^uiSelect","^ngModel"],controller:["$scope","$timeout",function(e,t){var s,i=this,c=e.$select;angular.isUndefined(c.selected)&&(c.selected=[]),e.$evalAsync(function(){s=e.ngModel}),i.activeMatchIndex=-1,i.updateModel=function(){s.$setViewValue(Date.now()),i.refreshComponent()},i.refreshComponent=function(){c.refreshItems&&c.refreshItems(),c.sizeSearchInput&&c.sizeSearchInput()},i.removeChoice=function(s){if(c.isLocked(null,s))return!1;var n=c.selected[s],l={};return l[c.parserResult.itemName]=n,c.selected.splice(s,1),i.activeMatchIndex=-1,c.sizeSearchInput(),t(function(){c.onRemoveCallback(e,{$item:n,$model:c.parserResult.modelMapper(e,l)})}),i.updateModel(),!0},i.getPlaceholder=function(){if(!c.selected||!c.selected.length)return c.placeholder}}],controllerAs:"$selectMultiple",link:function(c,n,l,a){function r(e){return angular.isNumber(e.selectionStart)?e.selectionStart:e.value.length}function o(e){function s(){switch(e){case t.LEFT:return~g.activeMatchIndex?u:l;case t.RIGHT:return~g.activeMatchIndex&&a!==l?o:(p.activate(),!1);case t.BACKSPACE:return~g.activeMatchIndex?g.removeChoice(a)?u:a:l;case t.DELETE:return!!~g.activeMatchIndex&&(g.removeChoice(g.activeMatchIndex),a)}}var i=r(p.searchInput[0]),c=p.selected.length,n=0,l=c-1,a=g.activeMatchIndex,o=g.activeMatchIndex+1,u=g.activeMatchIndex-1,d=a;return!(i>0||p.search.length&&e==t.RIGHT)&&(p.close(),d=s(),p.selected.length&&d!==!1?g.activeMatchIndex=Math.min(l,Math.max(n,d)):g.activeMatchIndex=-1,!0)}function u(e){if(void 0===e||void 0===p.search)return!1;var t=e.filter(function(e){return void 0!==p.search.toUpperCase()&&void 0!==e&&e.toUpperCase()===p.search.toUpperCase()}).length>0;return t}function d(e,t){var s=-1;if(angular.isArray(e))for(var i=angular.copy(e),c=0;c<i.length;c++)if(void 0===p.tagging.fct)i[c]+" "+p.taggingLabel===t&&(s=c);else{var n=i[c];angular.isObject(n)&&(n.isTag=!0),angular.equals(n,t)&&(s=c)}return s}var p=a[0],h=c.ngModel=a[1],g=c.$selectMultiple;p.multiple=!0,p.focusInput=p.searchInput,h.$isEmpty=function(e){return!e||0===e.length},h.$parsers.unshift(function(){for(var e,t={},s=[],i=p.selected.length-1;i>=0;i--)t={},t[p.parserResult.itemName]=p.selected[i],e=p.parserResult.modelMapper(c,t),s.unshift(e);return s}),h.$formatters.unshift(function(e){var t,s=p.parserResult&&p.parserResult.source(c,{$select:{search:""}}),i={};if(!s)return e;var n=[],l=function(e,s){if(e&&e.length){for(var l=e.length-1;l>=0;l--){if(i[p.parserResult.itemName]=e[l],t=p.parserResult.modelMapper(c,i),p.parserResult.trackByExp){var a=/(\w*)\./.exec(p.parserResult.trackByExp),r=/\.([^\s]+)/.exec(p.parserResult.trackByExp);if(a&&a.length>0&&a[1]==p.parserResult.itemName&&r&&r.length>0&&t[r[1]]==s[r[1]])return n.unshift(e[l]),!0}if(angular.equals(t,s))return n.unshift(e[l]),!0}return!1}};if(!e)return n;for(var a=e.length-1;a>=0;a--)l(p.selected,e[a])||l(s,e[a])||n.unshift(e[a]);return n}),c.$watchCollection(function(){return h.$modelValue},function(e,t){t!=e&&(angular.isDefined(h.$modelValue)&&(h.$modelValue=null),g.refreshComponent())}),h.$render=function(){if(!angular.isArray(h.$viewValue)){if(!e(h.$viewValue))throw s("multiarr","Expected model value to be array but got '{0}'",h.$viewValue);h.$viewValue=[]}p.selected=h.$viewValue,g.refreshComponent(),c.$evalAsync()},c.$on("uis:select",function(e,t){if(!(p.selected.length>=p.limit)){p.selected.push(t);var s={};s[p.parserResult.itemName]=t,i(function(){p.onSelectCallback(c,{$item:t,$model:p.parserResult.modelMapper(c,s)})}),g.updateModel()}}),c.$on("uis:activate",function(){g.activeMatchIndex=-1}),c.$watch("$select.disabled",function(e,t){t&&!e&&p.sizeSearchInput()}),p.searchInput.on("keydown",function(e){var s=e.which;c.$apply(function(){var i=!1;t.isHorizontalMovement(s)&&(i=o(s)),i&&s!=t.TAB&&(e.preventDefault(),e.stopPropagation())})}),p.searchInput.on("keyup",function(e){if(t.isVerticalMovement(e.which)||c.$evalAsync(function(){p.activeIndex=p.taggingLabel===!1?-1:0}),p.tagging.isActivated&&p.search.length>0){if(e.which===t.TAB||t.isControl(e)||t.isFunctionKey(e)||e.which===t.ESC||t.isVerticalMovement(e.which))return;if(p.activeIndex=p.taggingLabel===!1?-1:0,p.taggingLabel===!1)return;var s,i,n,l,a=angular.copy(p.items),r=angular.copy(p.items),o=!1,h=-1;if(void 0!==p.tagging.fct){if(n=p.$filter("filter")(a,{isTag:!0}),n.length>0&&(l=n[0]),a.length>0&&l&&(o=!0,a=a.slice(1,a.length),r=r.slice(1,r.length)),s=p.tagging.fct(p.search),r.some(function(e){return angular.equals(e,s)})||p.selected.some(function(e){return angular.equals(e,s)}))return void c.$evalAsync(function(){p.activeIndex=0,p.items=a});s&&(s.isTag=!0)}else{if(n=p.$filter("filter")(a,function(e){return e.match(p.taggingLabel)}),n.length>0&&(l=n[0]),i=a[0],void 0!==i&&a.length>0&&l&&(o=!0,a=a.slice(1,a.length),r=r.slice(1,r.length)),s=p.search+" "+p.taggingLabel,d(p.selected,p.search)>-1)return;if(u(r.concat(p.selected)))return void(o&&(a=r,c.$evalAsync(function(){p.activeIndex=0,p.items=a})));if(u(r))return void(o&&(p.items=r.slice(1,r.length)))}o&&(h=d(p.selected,s)),h>-1?a=a.slice(h+1,a.length-1):(a=[],s&&a.push(s),a=a.concat(r)),c.$evalAsync(function(){if(p.activeIndex=0,p.items=a,p.isGrouped){var e=s?a.slice(1):a;p.setItemsFn(e),s&&(p.items.unshift(s),p.groups.unshift({name:"",items:[s],tagging:!0}))}})}}),p.searchInput.on("blur",function(){i(function(){g.activeMatchIndex=-1})})}}}]),i.directive("uiSelectNoChoice",["uiSelectConfig",function(e){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(t){t.addClass("ui-select-no-choice");var s=t.parent().attr("theme")||e.theme;return s+"/no-choice.tpl.html"}}}]),i.directive("uiSelectSingle",["$timeout","$compile",function(s,i){return{restrict:"EA",require:["^uiSelect","^ngModel"],link:function(c,n,l,a){var r=a[0],o=a[1];o.$parsers.unshift(function(t){if(e(t))return t;var s,i={};return i[r.parserResult.itemName]=t,s=r.parserResult.modelMapper(c,i)}),o.$formatters.unshift(function(t){if(e(t))return t;var s,i=r.parserResult&&r.parserResult.source(c,{$select:{search:""}}),n={};if(i){var l=function(e){return n[r.parserResult.itemName]=e,s=r.parserResult.modelMapper(c,n),s===t};if(r.selected&&l(r.selected))return r.selected;for(var a=i.length-1;a>=0;a--)if(l(i[a]))return i[a]}return t}),c.$watch("$select.selected",function(e){o.$viewValue!==e&&o.$setViewValue(e)}),o.$render=function(){r.selected=o.$viewValue},c.$on("uis:select",function(t,i){r.selected=i;var n={};n[r.parserResult.itemName]=i,s(function(){r.onSelectCallback(c,{$item:i,$model:e(i)?i:r.parserResult.modelMapper(c,n)})})}),c.$on("uis:close",function(e,t){s(function(){r.focusser.prop("disabled",!1),t||r.focusser[0].focus()},0,!1)}),c.$on("uis:activate",function(){u.prop("disabled",!0)});var u=angular.element("<input ng-disabled='$select.disabled' class='ui-select-focusser ui-select-offscreen' type='text' id='{{ $select.focusserId }}' aria-label='{{ $select.focusserTitle }}' aria-haspopup='true' role='button' />");i(u)(c),r.focusser=u,r.focusInput=u,n.parent().append(u),u.bind("focus",function(){c.$evalAsync(function(){r.focus=!0})}),u.bind("blur",function(){c.$evalAsync(function(){r.focus=!1})}),u.bind("keydown",function(e){return e.which===t.BACKSPACE&&r.backspaceReset!==!1?(e.preventDefault(),e.stopPropagation(),r.select(void 0),void c.$apply()):void(e.which===t.TAB||t.isControl(e)||t.isFunctionKey(e)||e.which===t.ESC||(e.which!=t.DOWN&&e.which!=t.UP&&e.which!=t.ENTER&&e.which!=t.SPACE||(e.preventDefault(),e.stopPropagation(),r.activate()),c.$digest()))}),u.bind("keyup input",function(e){e.which===t.TAB||t.isControl(e)||t.isFunctionKey(e)||e.which===t.ESC||e.which==t.ENTER||e.which===t.BACKSPACE||(r.activate(u.val()),u.val(""),c.$digest())})}}}]),i.directive("uiSelectSort",["$timeout","uiSelectConfig","uiSelectMinErr",function(e,t,s){return{require:["^^uiSelect","^ngModel"],link:function(t,i,c,n){if(null===t[c.uiSelectSort])throw s("sort","Expected a list to sort");var l=n[0],a=n[1],r=angular.extend({axis:"horizontal"},t.$eval(c.uiSelectSortOptions)),o=r.axis,u="dragging",d="dropping",p="dropping-before",h="dropping-after";t.$watch(function(){return l.sortable},function(e){e?i.attr("draggable",!0):i.removeAttr("draggable")}),i.on("dragstart",function(e){i.addClass(u),(e.dataTransfer||e.originalEvent.dataTransfer).setData("text",t.$index.toString())}),i.on("dragend",function(){v(u)});var g,f=function(e,t){this.splice(t,0,this.splice(e,1)[0])},v=function(e){angular.forEach(l.$element.querySelectorAll("."+e),function(t){angular.element(t).removeClass(e)})},m=function(e){e.preventDefault();var t="vertical"===o?e.offsetY||e.layerY||(e.originalEvent?e.originalEvent.offsetY:0):e.offsetX||e.layerX||(e.originalEvent?e.originalEvent.offsetX:0);t<this["vertical"===o?"offsetHeight":"offsetWidth"]/2?(v(h),i.addClass(p)):(v(p),i.addClass(h))},$=function(t){t.preventDefault();var s=parseInt((t.dataTransfer||t.originalEvent.dataTransfer).getData("text"),10);e.cancel(g),g=e(function(){b(s)},20)},b=function(e){var s=t.$eval(c.uiSelectSort),n=s[e],l=null;l=i.hasClass(p)?e<t.$index?t.$index-1:t.$index:e<t.$index?t.$index:t.$index+1,f.apply(s,[e,l]),a.$setViewValue(Date.now()),t.$apply(function(){t.$emit("uiSelectSort:change",{array:s,item:n,from:e,to:l})}),v(d),v(p),v(h),i.off("drop",$)};i.on("dragenter",function(){i.hasClass(u)||(i.addClass(d),i.on("dragover",m),i.on("drop",$))}),i.on("dragleave",function(e){e.target==i&&(v(d),v(p),v(h),i.off("dragover",m),i.off("drop",$))})}}}]),i.directive("uisOpenClose",["$parse","$timeout",function(e,t){return{restrict:"A",require:"uiSelect",link:function(s,i,c,n){n.onOpenCloseCallback=e(c.uisOpenClose),s.$watch("$select.open",function(e,i){e!==i&&t(function(){n.onOpenCloseCallback(s,{isOpen:e});
})})}}}]),i.service("uisRepeatParser",["uiSelectMinErr","$parse",function(e,t){var s=this;s.parse=function(s){var i;if(i=s.match(/^\s*(?:([\s\S]+?)\s+as\s+)?(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(\s*[\s\S]+?)?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),!i)throw e("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",s);var c=i[5],n="";if(i[3]){c=i[5].replace(/(^\()|(\)$)/g,"");var l=i[5].match(/^\s*(?:[\s\S]+?)(?:[^\|]|\|\|)+([\s\S]*)\s*$/);l&&l[1].trim()&&(n=l[1],c=c.replace(n,""))}return{itemName:i[4]||i[2],keyName:i[3],source:t(c),filters:n,trackByExp:i[6],modelMapper:t(i[1]||i[4]||i[2]),repeatExpression:function(e){var t=this.itemName+" in "+(e?"$group.items":"$select.items");return this.trackByExp&&(t+=" track by "+this.trackByExp),t}}},s.getGroupNgRepeatExpression=function(){return"$group in $select.groups track by $group.name"}}])}(),angular.module("ui.select").run(["$templateCache",function(e){e.put("bootstrap/choices.tpl.html",'<ul class="ui-select-choices ui-select-choices-content ui-select-dropdown dropdown-menu" ng-show="$select.open && $select.items.length > 0"><li class="ui-select-choices-group" id="ui-select-choices-{{ $select.generatedId }}"><div class="divider" ng-show="$select.isGrouped && $index > 0"></div><div ng-show="$select.isGrouped" class="ui-select-choices-group-label dropdown-header" ng-bind="$group.name"></div><div ng-attr-id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}" role="option"><span class="ui-select-choices-row-inner"></span></div></li></ul>'),e.put("bootstrap/match-multiple.tpl.html",'<span class="ui-select-match"><span ng-repeat="$item in $select.selected track by $index"><span class="ui-select-match-item btn btn-default btn-xs" tabindex="-1" type="button" ng-disabled="$select.disabled" ng-click="$selectMultiple.activeMatchIndex = $index;" ng-class="{\'btn-primary\':$selectMultiple.activeMatchIndex === $index, \'select-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span class="close ui-select-match-close" ng-hide="$select.disabled" ng-click="$selectMultiple.removeChoice($index)">&nbsp;&times;</span> <span uis-transclude-append=""></span></span></span></span>'),e.put("bootstrap/match.tpl.html",'<div class="ui-select-match" ng-hide="$select.open && $select.searchEnabled" ng-disabled="$select.disabled" ng-class="{\'btn-default-focus\':$select.focus}"><span tabindex="-1" class="btn btn-default form-control ui-select-toggle" aria-label="{{ $select.baseTitle }} activate" ng-disabled="$select.disabled" ng-click="$select.activate()" style="outline: 0;"><span ng-show="$select.isEmpty()" class="ui-select-placeholder text-muted">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="ui-select-match-text pull-left" ng-class="{\'ui-select-allow-clear\': $select.allowClear && !$select.isEmpty()}" ng-transclude=""></span> <i class="caret pull-right" ng-click="$select.toggle($event)"></i> <a ng-show="$select.allowClear && !$select.isEmpty() && ($select.disabled !== true)" aria-label="{{ $select.baseTitle }} clear" style="margin-right: 10px" ng-click="$select.clear($event)" class="btn btn-xs btn-link pull-right"><i class="glyphicon glyphicon-remove" aria-hidden="true"></i></a></span></div>'),e.put("bootstrap/no-choice.tpl.html",'<ul class="ui-select-no-choice dropdown-menu" ng-show="$select.items.length == 0"><li ng-transclude=""></li></ul>'),e.put("bootstrap/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple ui-select-bootstrap dropdown form-control" ng-class="{open: $select.open}"><div><div class="ui-select-match"></div><input type="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="ui-select-search input-xs" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-click="$select.activate()" ng-model="$select.search" role="combobox" aria-expanded="{{$select.open}}" aria-label="{{$select.baseTitle}}" ng-class="{\'spinner\': $select.refreshing}" ondrop="return false;"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>'),e.put("bootstrap/select.tpl.html",'<div class="ui-select-container ui-select-bootstrap dropdown" ng-class="{open: $select.open}"><div class="ui-select-match"></div><span ng-show="$select.open && $select.refreshing && $select.spinnerEnabled" class="ui-select-refreshing {{$select.spinnerClass}}"></span> <input type="search" autocomplete="off" tabindex="-1" aria-expanded="true" aria-label="{{ $select.baseTitle }}" aria-owns="ui-select-choices-{{ $select.generatedId }}" class="form-control ui-select-search" ng-class="{ \'ui-select-search-hidden\' : !$select.searchEnabled }" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-show="$select.open"><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>'),e.put("select2/choices.tpl.html",'<ul tabindex="-1" class="ui-select-choices ui-select-choices-content select2-results"><li class="ui-select-choices-group" ng-class="{\'select2-result-with-children\': $select.choiceGrouped($group) }"><div ng-show="$select.choiceGrouped($group)" class="ui-select-choices-group-label select2-result-label" ng-bind="$group.name"></div><ul id="ui-select-choices-{{ $select.generatedId }}" ng-class="{\'select2-result-sub\': $select.choiceGrouped($group), \'select2-result-single\': !$select.choiceGrouped($group) }"><li role="option" ng-attr-id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{\'select2-highlighted\': $select.isActive(this), \'select2-disabled\': $select.isDisabled(this)}"><div class="select2-result-label ui-select-choices-row-inner"></div></li></ul></li></ul>'),e.put("select2/match-multiple.tpl.html",'<span class="ui-select-match"><li class="ui-select-match-item select2-search-choice" ng-repeat="$item in $select.selected track by $index" ng-class="{\'select2-search-choice-focus\':$selectMultiple.activeMatchIndex === $index, \'select2-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span uis-transclude-append=""></span> <a href="javascript:;" class="ui-select-match-close select2-search-choice-close" ng-click="$selectMultiple.removeChoice($index)" tabindex="-1"></a></li></span>'),e.put("select2/match.tpl.html",'<a class="select2-choice ui-select-match" ng-class="{\'select2-default\': $select.isEmpty()}" ng-click="$select.toggle($event)" aria-label="{{ $select.baseTitle }} select"><span ng-show="$select.isEmpty()" class="select2-chosen">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="select2-chosen" ng-transclude=""></span> <abbr ng-if="$select.allowClear && !$select.isEmpty()" class="select2-search-choice-close" ng-click="$select.clear($event)"></abbr> <span class="select2-arrow ui-select-toggle"><b></b></span></a>'),e.put("select2/no-choice.tpl.html",'<div class="ui-select-no-choice dropdown" ng-show="$select.items.length == 0"><div class="dropdown-content"><div data-selectable="" ng-transclude=""></div></div></div>'),e.put("select2/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple select2 select2-container select2-container-multi" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled}"><ul class="select2-choices"><span class="ui-select-match"></span><li class="select2-search-field"><input type="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="select2-input ui-select-search" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-hide="$select.disabled" ng-model="$select.search" ng-click="$select.activate()" style="width: 34px;" ondrop="return false;"></li></ul><div class="ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open || $select.items.length === 0}"><div class="ui-select-choices"></div></div></div>'),e.put("select2/select.tpl.html",'<div class="ui-select-container select2 select2-container" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled, \'select2-container-active\': $select.focus, \'select2-allowclear\': $select.allowClear && !$select.isEmpty()}"><div class="ui-select-match"></div><div class="ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open}"><div class="search-container" ng-class="{\'ui-select-search-hidden\':!$select.searchEnabled, \'select2-search\':$select.searchEnabled}"><input type="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" ng-class="{\'select2-active\': $select.refreshing}" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" class="ui-select-search select2-input" ng-model="$select.search"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div></div>'),e.put("selectize/choices.tpl.html",'<div ng-show="$select.open" class="ui-select-choices ui-select-dropdown selectize-dropdown" ng-class="{\'single\': !$select.multiple, \'multi\': $select.multiple}"><div class="ui-select-choices-content selectize-dropdown-content"><div class="ui-select-choices-group optgroup"><div ng-show="$select.isGrouped" class="ui-select-choices-group-label optgroup-header" ng-bind="$group.name"></div><div role="option" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}"><div class="option ui-select-choices-row-inner" data-selectable=""></div></div></div></div></div>'),e.put("selectize/match-multiple.tpl.html",'<div class="ui-select-match" data-value="" ng-repeat="$item in $select.selected track by $index" ng-click="$selectMultiple.activeMatchIndex = $index;" ng-class="{\'active\':$selectMultiple.activeMatchIndex === $index}" ui-select-sort="$select.selected"><span class="ui-select-match-item" ng-class="{\'select-locked\':$select.isLocked(this, $index)}"><span uis-transclude-append=""></span> <span class="remove ui-select-match-close" ng-hide="$select.disabled" ng-click="$selectMultiple.removeChoice($index)">&times;</span></span></div>'),e.put("selectize/match.tpl.html",'<div ng-hide="$select.searchEnabled && ($select.open || $select.isEmpty())" class="ui-select-match"><span ng-show="!$select.searchEnabled && ($select.isEmpty() || $select.open)" class="ui-select-placeholder text-muted">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty() || $select.open" ng-transclude=""></span></div>'),e.put("selectize/no-choice.tpl.html",'<div class="ui-select-no-choice selectize-dropdown" ng-show="$select.items.length == 0"><div class="selectize-dropdown-content"><div data-selectable="" ng-transclude=""></div></div></div>'),e.put("selectize/select-multiple.tpl.html",'<div class="ui-select-container selectize-control multi plugin-remove_button" ng-class="{\'open\': $select.open}"><div class="selectize-input" ng-class="{\'focus\': $select.open, \'disabled\': $select.disabled, \'selectize-focus\' : $select.focus}" ng-click="$select.open && !$select.searchEnabled ? $select.toggle($event) : $select.activate()"><div class="ui-select-match"></div><input type="search" autocomplete="off" tabindex="-1" class="ui-select-search" ng-class="{\'ui-select-search-hidden\':!$select.searchEnabled}" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-model="$select.search" ng-disabled="$select.disabled" aria-expanded="{{$select.open}}" aria-label="{{ $select.baseTitle }}" ondrop="return false;"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>'),e.put("selectize/select.tpl.html",'<div class="ui-select-container selectize-control single" ng-class="{\'open\': $select.open}"><div class="selectize-input" ng-class="{\'focus\': $select.open, \'disabled\': $select.disabled, \'selectize-focus\' : $select.focus}" ng-click="$select.open && !$select.searchEnabled ? $select.toggle($event) : $select.activate()"><div class="ui-select-match"></div><input type="search" autocomplete="off" tabindex="-1" class="ui-select-search ui-select-toggle" ng-class="{\'ui-select-search-hidden\':!$select.searchEnabled}" ng-click="$select.toggle($event)" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-hide="!$select.isEmpty() && !$select.open" ng-disabled="$select.disabled" aria-label="{{ $select.baseTitle }}"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>')}]);


/**
 * Satellizer 0.14.0
 * (c) 2016 Sahat Yalkabov
 * License: MIT
 */
"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="satellizer"),function(e,t,r){"use strict";e.location.origin||(e.location.origin=e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:"")),t.module("satellizer",[]).constant("SatellizerConfig",{httpInterceptor:function(){return!0},withCredentials:!1,tokenRoot:null,baseUrl:"/",loginUrl:"/auth/login",signupUrl:"/auth/signup",unlinkUrl:"/auth/unlink/",tokenName:"token",tokenPrefix:"satellizer",authHeader:"Authorization",authToken:"Bearer",storageType:"localStorage",providers:{facebook:{name:"facebook",url:"/auth/facebook",authorizationEndpoint:"https://www.facebook.com/v2.5/dialog/oauth",redirectUri:e.location.origin+"/",requiredUrlParams:["display","scope"],scope:["email"],scopeDelimiter:",",display:"popup",oauthType:"2.0",popupOptions:{width:580,height:400}},google:{name:"google",url:"/auth/google",authorizationEndpoint:"https://accounts.google.com/o/oauth2/auth",redirectUri:e.location.origin,requiredUrlParams:["scope"],optionalUrlParams:["display"],scope:["profile","email"],scopePrefix:"openid",scopeDelimiter:" ",display:"popup",oauthType:"2.0",popupOptions:{width:452,height:633}},github:{name:"github",url:"/auth/github",authorizationEndpoint:"https://github.com/login/oauth/authorize",redirectUri:e.location.origin,optionalUrlParams:["scope"],scope:["user:email"],scopeDelimiter:" ",oauthType:"2.0",popupOptions:{width:1020,height:618}},instagram:{name:"instagram",url:"/auth/instagram",authorizationEndpoint:"https://api.instagram.com/oauth/authorize",redirectUri:e.location.origin,requiredUrlParams:["scope"],scope:["basic"],scopeDelimiter:"+",oauthType:"2.0"},linkedin:{name:"linkedin",url:"/auth/linkedin",authorizationEndpoint:"https://www.linkedin.com/uas/oauth2/authorization",redirectUri:e.location.origin,requiredUrlParams:["state"],scope:["r_emailaddress"],scopeDelimiter:" ",state:"STATE",oauthType:"2.0",popupOptions:{width:527,height:582}},twitter:{name:"twitter",url:"/auth/twitter",authorizationEndpoint:"https://api.twitter.com/oauth/authenticate",redirectUri:e.location.origin,oauthType:"1.0",popupOptions:{width:495,height:645}},twitch:{name:"twitch",url:"/auth/twitch",authorizationEndpoint:"https://api.twitch.tv/kraken/oauth2/authorize",redirectUri:e.location.origin,requiredUrlParams:["scope"],scope:["user_read"],scopeDelimiter:" ",display:"popup",oauthType:"2.0",popupOptions:{width:500,height:560}},live:{name:"live",url:"/auth/live",authorizationEndpoint:"https://login.live.com/oauth20_authorize.srf",redirectUri:e.location.origin,requiredUrlParams:["display","scope"],scope:["wl.emails"],scopeDelimiter:" ",display:"popup",oauthType:"2.0",popupOptions:{width:500,height:560}},yahoo:{name:"yahoo",url:"/auth/yahoo",authorizationEndpoint:"https://api.login.yahoo.com/oauth2/request_auth",redirectUri:e.location.origin,scope:[],scopeDelimiter:",",oauthType:"2.0",popupOptions:{width:559,height:519}},bitbucket:{name:"bitbucket",url:"/auth/bitbucket",authorizationEndpoint:"https://bitbucket.org/site/oauth2/authorize",redirectUri:e.location.origin+"/",requiredUrlParams:["scope"],scope:["email"],scopeDelimiter:" ",oauthType:"2.0",popupOptions:{width:1028,height:529}}}}).provider("$auth",["SatellizerConfig",function(e){Object.defineProperties(this,{httpInterceptor:{get:function(){return e.httpInterceptor},set:function(t){"function"==typeof t?e.httpInterceptor=t:e.httpInterceptor=function(){return t}}},baseUrl:{get:function(){return e.baseUrl},set:function(t){e.baseUrl=t}},loginUrl:{get:function(){return e.loginUrl},set:function(t){e.loginUrl=t}},signupUrl:{get:function(){return e.signupUrl},set:function(t){e.signupUrl=t}},tokenRoot:{get:function(){return e.tokenRoot},set:function(t){e.tokenRoot=t}},tokenName:{get:function(){return e.tokenName},set:function(t){e.tokenName=t}},tokenPrefix:{get:function(){return e.tokenPrefix},set:function(t){e.tokenPrefix=t}},unlinkUrl:{get:function(){return e.unlinkUrl},set:function(t){e.unlinkUrl=t}},authHeader:{get:function(){return e.authHeader},set:function(t){e.authHeader=t}},authToken:{get:function(){return e.authToken},set:function(t){e.authToken=t}},withCredentials:{get:function(){return e.withCredentials},set:function(t){e.withCredentials=t}},storageType:{get:function(){return e.storageType},set:function(t){e.storageType=t}}}),t.forEach(Object.keys(e.providers),function(r){this[r]=function(n){return t.extend(e.providers[r],n)}},this);var r=function(r){e.providers[r.name]=e.providers[r.name]||{},t.extend(e.providers[r.name],r)};this.oauth1=function(t){r(t),e.providers[t.name].oauthType="1.0"},this.oauth2=function(t){r(t),e.providers[t.name].oauthType="2.0"},this.$get=["$q","SatellizerShared","SatellizerLocal","SatellizerOauth",function(e,t,r,n){var o={};return o.login=function(e,t){return r.login(e,t)},o.signup=function(e,t){return r.signup(e,t)},o.logout=function(){return t.logout()},o.authenticate=function(e,t){return n.authenticate(e,t)},o.link=function(e,t){return n.authenticate(e,t)},o.unlink=function(e,t){return n.unlink(e,t)},o.isAuthenticated=function(){return t.isAuthenticated()},o.getToken=function(){return t.getToken()},o.setToken=function(e){t.setToken({access_token:e})},o.removeToken=function(){return t.removeToken()},o.getPayload=function(){return t.getPayload()},o.setStorageType=function(e){return t.setStorageType(e)},o}]}]).factory("SatellizerShared",["$q","$window","$log","SatellizerConfig","SatellizerStorage",function(n,o,i,a,u){var l={},p=a.tokenPrefix?[a.tokenPrefix,a.tokenName].join("_"):a.tokenName;return l.getToken=function(){return u.get(p)},l.getPayload=function(){var t=u.get(p);if(t&&3===t.split(".").length)try{var n=t.split(".")[1],o=n.replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(decodeURIComponent(escape(e.atob(o))))}catch(i){return r}},l.setToken=function(e){if(!e)return i.warn("Can't set token without passing a value");var r,n=e&&e.access_token;if(n&&(t.isObject(n)&&t.isObject(n.data)?e=n:t.isString(n)&&(r=n)),!r&&e){var o=a.tokenRoot&&a.tokenRoot.split(".").reduce(function(e,t){return e[t]},e.data);r=o?o[a.tokenName]:e.data&&e.data[a.tokenName]}if(!r){var l=a.tokenRoot?a.tokenRoot+"."+a.tokenName:a.tokenName;return i.warn('Expecting a token named "'+l)}u.set(p,r)},l.removeToken=function(){u.remove(p)},l.isAuthenticated=function(){var e=u.get(p);if(e){if(3===e.split(".").length)try{var t=e.split(".")[1],r=t.replace(/-/g,"+").replace(/_/g,"/"),n=JSON.parse(o.atob(r)).exp;if(n){var i=Math.round((new Date).getTime()/1e3)>=n;return i?!1:!0}}catch(a){return!0}return!0}return!1},l.logout=function(){return u.remove(p),n.when()},l.setStorageType=function(e){a.storageType=e},l}]).factory("SatellizerOauth",["$q","$http","SatellizerConfig","SatellizerUtils","SatellizerShared","SatellizerOauth1","SatellizerOauth2",function(e,t,r,n,o,i,a){var u={};return u.authenticate=function(t,n){var u="1.0"===r.providers[t].oauthType?new i:new a,l=e.defer();return u.open(r.providers[t],n||{}).then(function(e){r.providers[t].url&&o.setToken(e,!1),l.resolve(e)})["catch"](function(e){l.reject(e)}),l.promise},u.unlink=function(e,o){return o=o||{},o.url=o.url?o.url:n.joinUrl(r.baseUrl,r.unlinkUrl),o.data={provider:e}||o.data,o.method=o.method||"POST",o.withCredentials=o.withCredentials||r.withCredentials,t(o)},u}]).factory("SatellizerLocal",["$http","SatellizerUtils","SatellizerShared","SatellizerConfig",function(e,t,r,n){var o={};return o.login=function(o,i){return i=i||{},i.url=i.url?i.url:t.joinUrl(n.baseUrl,n.loginUrl),i.data=o||i.data,i.method=i.method||"POST",i.withCredentials=i.withCredentials||n.withCredentials,e(i).then(function(e){return r.setToken(e),e})},o.signup=function(r,o){return o=o||{},o.url=o.url?o.url:t.joinUrl(n.baseUrl,n.signupUrl),o.data=r||o.data,o.method=o.method||"POST",o.withCredentials=o.withCredentials||n.withCredentials,e(o)},o}]).factory("SatellizerOauth2",["$q","$http","$window","$timeout","SatellizerPopup","SatellizerUtils","SatellizerConfig","SatellizerStorage",function(r,n,o,i,a,u,l,p){return function(){var o={},c={defaultUrlParams:["response_type","client_id","redirect_uri"],responseType:"code",responseParams:{code:"code",clientId:"clientId",redirectUri:"redirectUri"}};return o.open=function(n,l){c=u.merge(n,c);var s=r.defer();return i(function(){var r,n,i=c.name+"_state";return t.isFunction(c.state)?p.set(i,c.state()):t.isString(c.state)&&p.set(i,c.state),r=[c.authorizationEndpoint,o.buildQueryString()].join("?"),n=e.cordova?a.open(r,c.name,c.popupOptions,c.redirectUri).eventListener(c.redirectUri):a.open(r,c.name,c.popupOptions,c.redirectUri).pollPopup(c.redirectUri),n.then(function(e){return"token"!==c.responseType&&c.url||s.resolve(e),e.state&&e.state!==p.get(i)?s.reject("The value returned in the state parameter does not match the state value from your original authorization code request."):void s.resolve(o.exchangeForToken(e,l))})}),s.promise},o.exchangeForToken=function(e,r){var o=t.extend({},r);t.forEach(c.responseParams,function(t,r){switch(r){case"code":o[t]=e.code;break;case"clientId":o[t]=c.clientId;break;case"redirectUri":o[t]=c.redirectUri;break;default:o[t]=e[r]}}),e.state&&(o.state=e.state);var i=l.baseUrl?u.joinUrl(l.baseUrl,c.url):c.url;return n.post(i,o,{withCredentials:l.withCredentials})},o.buildQueryString=function(){var e=[],r=["defaultUrlParams","requiredUrlParams","optionalUrlParams"];return t.forEach(r,function(r){t.forEach(c[r],function(r){var n=u.camelCase(r),o=t.isFunction(c[r])?c[r]():c[n];if("redirect_uri"!==r||o){if("state"===r){var i=c.name+"_state";o=encodeURIComponent(p.get(i))}"scope"===r&&Array.isArray(o)&&(o=o.join(c.scopeDelimiter),c.scopePrefix&&(o=[c.scopePrefix,o].join(c.scopeDelimiter))),e.push([r,o])}})}),e.map(function(e){return e.join("=")}).join("&")},o}}]).factory("SatellizerOauth1",["$q","$http","SatellizerPopup","SatellizerConfig","SatellizerUtils",function(r,n,o,i,a){return function(){var r={},u={url:null,name:null,popupOptions:null,redirectUri:null,authorizationEndpoint:null};return r.open=function(l,p){t.extend(u,l);var c,s=i.baseUrl?a.joinUrl(i.baseUrl,u.url):u.url;return e.cordova||(c=o.open("",u.name,u.popupOptions,u.redirectUri)),n.post(s,u).then(function(t){var n=[u.authorizationEndpoint,r.buildQueryString(t.data)].join("?");e.cordova?c=o.open(n,u.name,u.popupOptions,u.redirectUri):c.popupWindow.location=n;var i;return i=e.cordova?c.eventListener(u.redirectUri):c.pollPopup(u.redirectUri),i.then(function(e){return r.exchangeForToken(e,p)})})},r.exchangeForToken=function(e,r){var o=t.extend({},r,e),l=i.baseUrl?a.joinUrl(i.baseUrl,u.url):u.url;return n.post(l,o,{withCredentials:i.withCredentials})},r.buildQueryString=function(e){var r=[];return t.forEach(e,function(e,t){r.push(encodeURIComponent(t)+"="+encodeURIComponent(e))}),r.join("&")},r}}]).factory("SatellizerPopup",["$q","$interval","$window","SatellizerConfig","SatellizerUtils",function(n,o,i,a,u){var l={};return l.url="",l.popupWindow=null,l.open=function(t,r,n){l.url=t;var o=l.stringifyOptions(l.prepareOptions(n)),a=i.navigator.userAgent,u=e.cordova||a.indexOf("CriOS")>-1?"_blank":r;return l.popupWindow=i.open(t,u,o),i.popup=l.popupWindow,l.popupWindow&&l.popupWindow.focus&&l.popupWindow.focus(),l},l.eventListener=function(e){var r=n.defer();return l.popupWindow.addEventListener("loadstart",function(n){if(0===n.url.indexOf(e)){var o=document.createElement("a");if(o.href=n.url,o.search||o.hash){var i=o.search.substring(1).replace(/\/$/,""),a=o.hash.substring(1).replace(/\/$/,""),p=u.parseQueryString(a),c=u.parseQueryString(i);t.extend(c,p),c.error||r.resolve(c),l.popupWindow.close()}}}),l.popupWindow.addEventListener("loaderror",function(){r.reject("Authorization Failed")}),r.promise},l.pollPopup=function(e){var i=n.defer(),a=document.createElement("a");a.href=e;var p=u.getFullUrlPath(a),c=o(function(){(!l.popupWindow||l.popupWindow.closed||l.popupWindow.closed===r)&&(i.reject("The popup window was closed."),o.cancel(c));try{var e=u.getFullUrlPath(l.popupWindow.location);if(e===p){if(l.popupWindow.location.search||l.popupWindow.location.hash){var n=l.popupWindow.location.search.substring(1).replace(/\/$/,""),a=l.popupWindow.location.hash.substring(1).replace(/[\/$]/,""),s=u.parseQueryString(a),h=u.parseQueryString(n);t.extend(h,s),h.error?i.reject(h):i.resolve(h)}else i.reject("Redirect has occurred but no query or hash parameters were found. They were either not set during the redirect, or were removed before Satellizer could read them, e.g. AngularJS routing mechanism.");o.cancel(c),l.popupWindow.close()}}catch(d){}},20);return i.promise},l.prepareOptions=function(e){e=e||{};var r=e.width||500,n=e.height||500;return t.extend({width:r,height:n,left:i.screenX+(i.outerWidth-r)/2,top:i.screenY+(i.outerHeight-n)/2.5},e)},l.stringifyOptions=function(e){var r=[];return t.forEach(e,function(e,t){r.push(t+"="+e)}),r.join(",")},l}]).service("SatellizerUtils",function(){this.getFullUrlPath=function(e){return e.protocol+"//"+e.hostname+(e.port?":"+e.port:"")+e.pathname},this.camelCase=function(e){return e.replace(/([\:\-\_]+(.))/g,function(e,t,r,n){return n?r.toUpperCase():r})},this.parseQueryString=function(e){var r,n,o={};return t.forEach((e||"").split("&"),function(e){e&&(n=e.split("="),r=decodeURIComponent(n[0]),o[r]=t.isDefined(n[1])?decodeURIComponent(n[1]):!0)}),o},this.joinUrl=function(e,t){if(/^(?:[a-z]+:)?\/\//i.test(t))return t;var r=[e,t].join("/"),n=function(e){return e.replace(/[\/]+/g,"/").replace(/\/\?/g,"?").replace(/\/\#/g,"#").replace(/\:\//g,"://")};return n(r)},this.merge=function(e,t){var r={};for(var n in e)e.hasOwnProperty(n)&&(n in t&&"object"==typeof e[n]&&null!==n?r[n]=this.merge(e[n],t[n]):r[n]=e[n]);for(n in t)if(t.hasOwnProperty(n)){if(n in r)continue;r[n]=t[n]}return r}}).factory("SatellizerStorage",["$window","$log","SatellizerConfig",function(e,t,r){var n={},o=function(){try{var t=r.storageType in e&&null!==e[r.storageType];if(t){var n=Math.random().toString(36).substring(7);e[r.storageType].setItem(n,""),e[r.storageType].removeItem(n)}return t}catch(o){return!1}}();return o||t.warn(r.storageType+" is not available."),{get:function(t){return o?e[r.storageType].getItem(t):n[t]},set:function(t,i){return o?e[r.storageType].setItem(t,i):n[t]=i},remove:function(t){return o?e[r.storageType].removeItem(t):delete n[t]}}}]).factory("SatellizerInterceptor",["$q","SatellizerConfig","SatellizerStorage","SatellizerShared",function(e,t,r,n){return{request:function(e){if(e.skipAuthorization)return e;if(n.isAuthenticated()&&t.httpInterceptor(e)){var o=t.tokenPrefix?t.tokenPrefix+"_"+t.tokenName:t.tokenName,i=r.get(o);t.authHeader&&t.authToken&&(i=t.authToken+" "+i),e.headers[t.authHeader]=i}return e},responseError:function(t){return e.reject(t)}}}]).config(["$httpProvider",function(e){e.interceptors.push("SatellizerInterceptor")}])}(window,window.angular);
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||e[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var i=t(this),n=i.data("bs.alert");n||i.data("bs.alert",n=new o(this)),"string"==typeof e&&n[e].call(i)})}var i='[data-dismiss="alert"]',o=function(e){t(e).on("click",i,this.close)};o.VERSION="3.3.7",o.TRANSITION_DURATION=150,o.prototype.close=function(e){function i(){a.detach().trigger("closed.bs.alert").remove()}var n=t(this),s=n.attr("data-target");s||(s=n.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,""));var a=t("#"===s?[]:s);e&&e.preventDefault(),a.length||(a=n.closest(".alert")),a.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(a.removeClass("in"),t.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",i).emulateTransitionEnd(o.TRANSITION_DURATION):i())};var n=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=o,t.fn.alert.noConflict=function(){return t.fn.alert=n,this},t(document).on("click.bs.alert.data-api",i,o.prototype.close)}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.button"),s="object"==typeof e&&e;n||o.data("bs.button",n=new i(this,s)),"toggle"==e?n.toggle():e&&n.setState(e)})}var i=function(e,o){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,o),this.isLoading=!1};i.VERSION="3.3.7",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",o=this.$element,n=o.is("input")?"val":"html",s=o.data();e+="Text",null==s.resetText&&o.data("resetText",o[n]()),setTimeout(t.proxy(function(){o[n](null==s[e]?this.options[e]:s[e]),"loadingText"==e?(this.isLoading=!0,o.addClass(i).attr(i,i).prop(i,!0)):this.isLoading&&(this.isLoading=!1,o.removeClass(i).removeAttr(i).prop(i,!1))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),t&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var o=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=o,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var o=t(i.target).closest(".btn");e.call(o,"toggle"),t(i.target).is('input[type="radio"], input[type="checkbox"]')||(i.preventDefault(),o.is("input,button")?o.trigger("focus"):o.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.carousel"),s=t.extend({},i.DEFAULTS,o.data(),"object"==typeof e&&e),a="string"==typeof e?e:s.slide;n||o.data("bs.carousel",n=new i(this,s)),"number"==typeof e?n.to(e):a?n[a]():s.interval&&n.pause().cycle()})}var i=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.3.7",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e);if(("prev"==t&&0===i||"next"==t&&i==this.$items.length-1)&&!this.options.wrap)return e;var n="prev"==t?-1:1,s=(i+n)%this.$items.length;return this.$items.eq(s)},i.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(e,o){var n=this.$element.find(".item.active"),s=o||this.getItemForDirection(e,n),a=this.interval,r="next"==e?"left":"right",l=this;if(s.hasClass("active"))return this.sliding=!1;var h=s[0],d=t.Event("slide.bs.carousel",{relatedTarget:h,direction:r});if(this.$element.trigger(d),!d.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var p=t(this.$indicators.children()[this.getItemIndex(s)]);p&&p.addClass("active")}var c=t.Event("slid.bs.carousel",{relatedTarget:h,direction:r});return t.support.transition&&this.$element.hasClass("slide")?(s.addClass(e),s[0].offsetWidth,n.addClass(r),s.addClass(r),n.one("bsTransitionEnd",function(){s.removeClass([e,r].join(" ")).addClass("active"),n.removeClass(["active",r].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(c)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(n.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(c)),a&&this.cycle(),this}};var o=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=o,this};var n=function(i){var o,n=t(this),s=t(n.attr("data-target")||(o=n.attr("href"))&&o.replace(/.*(?=#[^\s]+$)/,""));if(s.hasClass("carousel")){var a=t.extend({},s.data(),n.data()),r=n.attr("data-slide-to");r&&(a.interval=!1),e.call(s,a),r&&s.data("bs.carousel").to(r),i.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",n).on("click.bs.carousel.data-api","[data-slide-to]",n),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),function(t){"use strict";function e(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var o=i&&t(i);return o&&o.length?o:e.parent()}function i(i){i&&3===i.which||(t(n).remove(),t(s).each(function(){var o=t(this),n=e(o),s={relatedTarget:this};n.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&t.contains(n[0],i.target)||(n.trigger(i=t.Event("hide.bs.dropdown",s)),i.isDefaultPrevented()||(o.attr("aria-expanded","false"),n.removeClass("open").trigger(t.Event("hidden.bs.dropdown",s)))))}))}function o(e){return this.each(function(){var i=t(this),o=i.data("bs.dropdown");o||i.data("bs.dropdown",o=new a(this)),"string"==typeof e&&o[e].call(i)})}var n=".dropdown-backdrop",s='[data-toggle="dropdown"]',a=function(e){t(e).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.7",a.prototype.toggle=function(o){var n=t(this);if(!n.is(".disabled, :disabled")){var s=e(n),a=s.hasClass("open");if(i(),!a){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",i);var r={relatedTarget:this};if(s.trigger(o=t.Event("show.bs.dropdown",r)),o.isDefaultPrevented())return;n.trigger("focus").attr("aria-expanded","true"),s.toggleClass("open").trigger(t.Event("shown.bs.dropdown",r))}return!1}},a.prototype.keydown=function(i){if(/(38|40|27|32)/.test(i.which)&&!/input|textarea/i.test(i.target.tagName)){var o=t(this);if(i.preventDefault(),i.stopPropagation(),!o.is(".disabled, :disabled")){var n=e(o),a=n.hasClass("open");if(!a&&27!=i.which||a&&27==i.which)return 27==i.which&&n.find(s).trigger("focus"),o.trigger("click");var l=n.find(".dropdown-menu li:not(.disabled):visible a");if(l.length){var h=l.index(i.target);38==i.which&&h>0&&h--,40==i.which&&h<l.length-1&&h++,~h||(h=0),l.eq(h).trigger("focus")}}}};var r=t.fn.dropdown;t.fn.dropdown=o,t.fn.dropdown.Constructor=a,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=r,this},t(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",s,a.prototype.toggle).on("keydown.bs.dropdown.data-api",s,a.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",a.prototype.keydown)}(jQuery),function(t){"use strict";function e(e,o){return this.each(function(){var n=t(this),s=n.data("bs.modal"),a=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);s||n.data("bs.modal",s=new i(this,a)),"string"==typeof e?s[e](o):a.show&&s.show(o)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.7",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var o=this,n=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){o.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(o.$element)&&(o.ignoreBackdropClick=!0)})}),this.backdrop(function(){var n=t.support.transition&&o.$element.hasClass("fade");o.$element.parent().length||o.$element.appendTo(o.$body),o.$element.show().scrollTop(0),o.adjustDialog(),n&&o.$element[0].offsetWidth,o.$element.addClass("in"),o.enforceFocus();var s=t.Event("shown.bs.modal",{relatedTarget:e});n?o.$dialog.one("bsTransitionEnd",function(){o.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(i.TRANSITION_DURATION):o.$element.trigger("focus").trigger(s)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){document===t.target||this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var o=this,n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=t.support.transition&&n;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+n).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;s?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){o.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):a()}else e&&e()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var o=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=o,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var o=t(this),n=o.attr("href"),s=t(o.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),a=s.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(n)&&n},s.data(),o.data());o.is("a")&&i.preventDefault(),s.one("show.bs.modal",function(t){t.isDefaultPrevented()||s.one("hidden.bs.modal",function(){o.is(":visible")&&o.trigger("focus")})}),e.call(s,a,this)})}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.tooltip"),s="object"==typeof e&&e;!n&&/destroy|hide/.test(e)||(n||o.data("bs.tooltip",n=new i(this,s)),"string"==typeof e&&n[e]())})}var i=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};i.VERSION="3.3.7",i.TRANSITION_DURATION=150,i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,o){if(this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(o),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var n=this.options.trigger.split(" "),s=n.length;s--;){var a=n[s];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var r="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,o){i[t]!=o&&(e[t]=o)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusin"==e.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState?void(i.hoverState="in"):(clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},i.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},i.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusout"==e.type?"focus":"hover"]=!1),i.isInStateTrue()?void 0:(clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide())},i.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var o=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!o)return;var n=this,s=this.tip(),a=this.getUID(this.type);this.setContent(),s.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&s.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,h=l.test(r);h&&(r=r.replace(l,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var d=this.getPosition(),p=s[0].offsetWidth,c=s[0].offsetHeight;if(h){var f=r,u=this.getPosition(this.$viewport);r="bottom"==r&&d.bottom+c>u.bottom?"top":"top"==r&&d.top-c<u.top?"bottom":"right"==r&&d.right+p>u.width?"left":"left"==r&&d.left-p<u.left?"right":r,s.removeClass(f).addClass(r)}var g=this.getCalculatedOffset(r,d,p,c);this.applyPlacement(g,r);var v=function(){var t=n.hoverState;n.$element.trigger("shown.bs."+n.type),n.hoverState=null,"out"==t&&n.leave(n)};t.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",v).emulateTransitionEnd(i.TRANSITION_DURATION):v()}},i.prototype.applyPlacement=function(e,i){var o=this.tip(),n=o[0].offsetWidth,s=o[0].offsetHeight,a=parseInt(o.css("margin-top"),10),r=parseInt(o.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(r)&&(r=0),e.top+=a,e.left+=r,t.offset.setOffset(o[0],t.extend({using:function(t){o.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),o.addClass("in");var l=o[0].offsetWidth,h=o[0].offsetHeight;"top"==i&&h!=s&&(e.top=e.top+s-h);var d=this.getViewportAdjustedDelta(i,e,l,h);d.left?e.left+=d.left:e.top+=d.top;var p=/top|bottom/.test(i),c=p?2*d.left-n+l:2*d.top-s+h,f=p?"offsetWidth":"offsetHeight";o.offset(e),this.replaceArrow(c,o[0][f],p)},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(e){function o(){"in"!=n.hoverState&&s.detach(),n.$element&&n.$element.removeAttr("aria-describedby").trigger("hidden.bs."+n.type),e&&e()}var n=this,s=t(this.$tip),a=t.Event("hide.bs."+this.type);return this.$element.trigger(a),a.isDefaultPrevented()?void 0:(s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",o).emulateTransitionEnd(i.TRANSITION_DURATION):o(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],o="BODY"==i.tagName,n=i.getBoundingClientRect();null==n.width&&(n=t.extend({},n,{width:n.right-n.left,height:n.bottom-n.top}));var s=window.SVGElement&&i instanceof window.SVGElement,a=o?{top:0,left:0}:s?null:e.offset(),r={scroll:o?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},l=o?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},n,r,l,a)},i.prototype.getCalculatedOffset=function(t,e,i,o){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-o,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-o/2,left:e.left-i}:{top:e.top+e.height/2-o/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,o){var n={top:0,left:0};if(!this.$viewport)return n;var s=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var r=e.top-s-a.scroll,l=e.top+s-a.scroll+o;r<a.top?n.top=a.top-r:l>a.top+a.height&&(n.top=a.top+a.height-l)}else{var h=e.left-s,d=e.left+s+i;h<a.left?n.left=a.left-h:d>a.right&&(n.left=a.left+a.width-d)}return n},i.prototype.getTitle=function(){var e=this.$element,i=this.options;return e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},i.prototype.getUID=function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},i.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&((i=t(e.currentTarget).data("bs."+this.type))||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),e?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null})};var o=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=o,this}}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.popover"),s="object"==typeof e&&e;!n&&/destroy|hide/.test(e)||(n||o.data("bs.popover",n=new i(this,s)),"string"==typeof e&&n[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.3.7",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var o=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=o,this}}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.tab");n||o.data("bs.tab",n=new i(this)),"string"==typeof e&&n[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.3.7",i.TRANSITION_DURATION=150,i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),o=e.data("target");if(o||(o=e.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var n=i.find(".active:last a"),s=t.Event("hide.bs.tab",{relatedTarget:e[0]}),a=t.Event("show.bs.tab",{relatedTarget:n[0]});if(n.trigger(s),e.trigger(a),!a.isDefaultPrevented()&&!s.isDefaultPrevented()){var r=t(o);this.activate(e.closest("li"),i),this.activate(r,r.parent(),function(){n.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:n[0]})})}}},i.prototype.activate=function(e,o,n){function s(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),r?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),n&&n()}var a=o.find("> .active"),r=n&&t.support.transition&&(a.length&&a.hasClass("fade")||!!o.find("> .fade").length);a.length&&r?a.one("bsTransitionEnd",s).emulateTransitionEnd(i.TRANSITION_DURATION):s(),a.removeClass("in")};var o=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=o,this};var n=function(i){i.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',n).on("click.bs.tab.data-api",'[data-toggle="pill"]',n)}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.affix"),s="object"==typeof e&&e;n||o.data("bs.affix",n=new i(this,s)),"string"==typeof e&&n[e]()})}var i=function(e,o){this.options=t.extend({},i.DEFAULTS,o),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.7",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(t,e,i,o){var n=this.$target.scrollTop(),s=this.$element.offset(),a=this.$target.height();if(null!=i&&"top"==this.affixed)return i>n&&"top";if("bottom"==this.affixed)return null!=i?!(n+this.unpin<=s.top)&&"bottom":!(t-o>=n+a)&&"bottom";var r=null==this.affixed,l=r?n:s.top,h=r?a:e;return null!=i&&i>=n?"top":null!=o&&l+h>=t-o&&"bottom"},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),o=this.options.offset,n=o.top,s=o.bottom,a=Math.max(t(document).height(),t(document.body).height());"object"!=typeof o&&(s=n=o),"function"==typeof n&&(n=o.top(this.$element)),"function"==typeof s&&(s=o.bottom(this.$element));var r=this.getState(a,e,n,s);if(this.affixed!=r){null!=this.unpin&&this.$element.css("top","");var l="affix"+(r?"-"+r:""),h=t.Event(l+".bs.affix");if(this.$element.trigger(h),h.isDefaultPrevented())return;this.affixed=r,this.unpin="bottom"==r?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==r&&this.$element.offset({top:a-e-s})}};var o=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=o,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),o=i.data();o.offset=o.offset||{},null!=o.offsetBottom&&(o.offset.bottom=o.offsetBottom),null!=o.offsetTop&&(o.offset.top=o.offsetTop),e.call(i,o)})})}(jQuery),function(t){"use strict";function e(e){var i,o=e.attr("data-target")||(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return t(o)}function i(e){return this.each(function(){var i=t(this),n=i.data("bs.collapse"),s=t.extend({},o.DEFAULTS,i.data(),"object"==typeof e&&e);!n&&s.toggle&&/show|hide/.test(e)&&(s.toggle=!1),n||i.data("bs.collapse",n=new o(this,s)),"string"==typeof e&&n[e]()})}var o=function(e,i){this.$element=t(e),this.options=t.extend({},o.DEFAULTS,i),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};o.VERSION="3.3.7",o.TRANSITION_DURATION=350,o.DEFAULTS={toggle:!0},o.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},o.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,n=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(n&&n.length&&(e=n.data("bs.collapse"))&&e.transitioning)){var s=t.Event("show.bs.collapse");if(this.$element.trigger(s),!s.isDefaultPrevented()){n&&n.length&&(i.call(n,"hide"),e||n.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,
this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return r.call(this);var l=t.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",t.proxy(r,this)).emulateTransitionEnd(o.TRANSITION_DURATION)[a](this.$element[0][l])}}}},o.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var n=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[i](0).one("bsTransitionEnd",t.proxy(n,this)).emulateTransitionEnd(o.TRANSITION_DURATION):n.call(this)}}},o.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},o.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(i,o){var n=t(o);this.addAriaAndCollapsedClass(e(n),n)},this)).end()},o.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var n=t.fn.collapse;t.fn.collapse=i,t.fn.collapse.Constructor=o,t.fn.collapse.noConflict=function(){return t.fn.collapse=n,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(o){var n=t(this);n.attr("data-target")||o.preventDefault();var s=e(n),a=s.data("bs.collapse"),r=a?"toggle":n.data();i.call(s,r)})}(jQuery),function(t){"use strict";function e(i,o){this.$body=t(document.body),this.$scrollElement=t(t(i).is(document.body)?window:i),this.options=t.extend({},e.DEFAULTS,o),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each(function(){var o=t(this),n=o.data("bs.scrollspy"),s="object"==typeof i&&i;n||o.data("bs.scrollspy",n=new e(this,s)),"string"==typeof i&&n[i]()})}e.VERSION="3.3.7",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,i="offset",o=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(i="position",o=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),n=e.data("target")||e.attr("href"),s=/^#./.test(n)&&t(n);return s&&s.length&&s.is(":visible")&&[[s[i]().top+o,n]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),o=this.options.offset+i-this.$scrollElement.height(),n=this.offsets,s=this.targets,a=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=o)return a!=(t=s[s.length-1])&&this.activate(t);if(a&&e<n[0])return this.activeTarget=null,this.clear();for(t=n.length;t--;)a!=s[t]&&e>=n[t]&&(void 0===n[t+1]||e<n[t+1])&&this.activate(s[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',o=t(i).parents("li").addClass("active");o.parent(".dropdown-menu").length&&(o=o.closest("li.dropdown").addClass("active")),o.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var o=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=o,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery),function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,o=this;t(this).one("bsTransitionEnd",function(){i=!0});var n=function(){i||t(o).trigger(t.support.transition.end)};return setTimeout(n,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery);var Arrive=function(window,$,undefined){"use strict";function exposeUnbindApi(eventObj,exposeTo,funcName){utils.addMethod(exposeTo,funcName,eventObj.unbindEvent),utils.addMethod(exposeTo,funcName,eventObj.unbindEventWithSelectorOrCallback),utils.addMethod(exposeTo,funcName,eventObj.unbindEventWithSelectorAndCallback)}function exposeApi(exposeTo){exposeTo.arrive=arriveEvents.bindEvent,exposeUnbindApi(arriveEvents,exposeTo,"unbindArrive"),exposeTo.leave=leaveEvents.bindEvent,exposeUnbindApi(leaveEvents,exposeTo,"unbindLeave")}if(window.MutationObserver&&"undefined"!=typeof HTMLElement){var arriveUniqueId=0,utils=function(){var matches=HTMLElement.prototype.matches||HTMLElement.prototype.webkitMatchesSelector||HTMLElement.prototype.mozMatchesSelector||HTMLElement.prototype.msMatchesSelector;return{matchesSelector:function(elem,selector){return elem instanceof HTMLElement&&matches.call(elem,selector)},addMethod:function(object,name,fn){var old=object[name];object[name]=function(){return fn.length==arguments.length?fn.apply(this,arguments):"function"==typeof old?old.apply(this,arguments):void 0}},callCallbacks:function(callbacksToBeCalled){for(var cb,i=0;cb=callbacksToBeCalled[i];i++)cb.callback.call(cb.elem)},checkChildNodesRecursively:function(nodes,registrationData,matchFunc,callbacksToBeCalled){for(var node,i=0;node=nodes[i];i++)matchFunc(node,registrationData,callbacksToBeCalled)&&callbacksToBeCalled.push({callback:registrationData.callback,elem:node}),node.childNodes.length>0&&utils.checkChildNodesRecursively(node.childNodes,registrationData,matchFunc,callbacksToBeCalled)},mergeArrays:function(firstArr,secondArr){var attrName,options={};for(attrName in firstArr)options[attrName]=firstArr[attrName];for(attrName in secondArr)options[attrName]=secondArr[attrName];return options},toElementsArray:function(elements){return void 0===elements||"number"==typeof elements.length&&elements!==window||(elements=[elements]),elements}}}(),EventsBucket=function(){var EventsBucket=function(){this._eventsBucket=[],this._beforeAdding=null,this._beforeRemoving=null};return EventsBucket.prototype.addEvent=function(target,selector,options,callback){var newEvent={target:target,selector:selector,options:options,callback:callback,firedElems:[]};return this._beforeAdding&&this._beforeAdding(newEvent),this._eventsBucket.push(newEvent),newEvent},EventsBucket.prototype.removeEvent=function(compareFunction){for(var registeredEvent,i=this._eventsBucket.length-1;registeredEvent=this._eventsBucket[i];i--)compareFunction(registeredEvent)&&(this._beforeRemoving&&this._beforeRemoving(registeredEvent),this._eventsBucket.splice(i,1))},EventsBucket.prototype.beforeAdding=function(beforeAdding){this._beforeAdding=beforeAdding},EventsBucket.prototype.beforeRemoving=function(beforeRemoving){this._beforeRemoving=beforeRemoving},EventsBucket}(),MutationEvents=function(getObserverConfig,onMutation){var eventsBucket=new EventsBucket,me=this,defaultOptions={fireOnAttributesModification:!1};return eventsBucket.beforeAdding(function(registrationData){var observer,target=registrationData.target;registrationData.selector,registrationData.callback;target!==window.document&&target!==window||(target=document.getElementsByTagName("html")[0]),observer=new MutationObserver(function(e){onMutation.call(this,e,registrationData)});var config=getObserverConfig(registrationData.options);observer.observe(target,config),registrationData.observer=observer,registrationData.me=me}),eventsBucket.beforeRemoving(function(eventData){eventData.observer.disconnect()}),this.bindEvent=function(selector,options,callback){options=utils.mergeArrays(defaultOptions,options);for(var elements=utils.toElementsArray(this),i=0;i<elements.length;i++)eventsBucket.addEvent(elements[i],selector,options,callback)},this.unbindEvent=function(){var elements=utils.toElementsArray(this);eventsBucket.removeEvent(function(eventObj){for(var i=0;i<elements.length;i++)if(this===undefined||eventObj.target===elements[i])return!0;return!1})},this.unbindEventWithSelectorOrCallback=function(selector){var compareFunction,elements=utils.toElementsArray(this),callback=selector;compareFunction="function"==typeof selector?function(eventObj){for(var i=0;i<elements.length;i++)if((this===undefined||eventObj.target===elements[i])&&eventObj.callback===callback)return!0;return!1}:function(eventObj){for(var i=0;i<elements.length;i++)if((this===undefined||eventObj.target===elements[i])&&eventObj.selector===selector)return!0;return!1},eventsBucket.removeEvent(compareFunction)},this.unbindEventWithSelectorAndCallback=function(selector,callback){var elements=utils.toElementsArray(this);eventsBucket.removeEvent(function(eventObj){for(var i=0;i<elements.length;i++)if((this===undefined||eventObj.target===elements[i])&&eventObj.selector===selector&&eventObj.callback===callback)return!0;return!1})},this},ArriveEvents=function(){function getArriveObserverConfig(options){var config={attributes:!1,childList:!0,subtree:!0};return options.fireOnAttributesModification&&(config.attributes=!0),config}function onArriveMutation(mutations,registrationData){mutations.forEach(function(mutation){var newNodes=mutation.addedNodes,targetNode=mutation.target,callbacksToBeCalled=[];null!==newNodes&&newNodes.length>0?utils.checkChildNodesRecursively(newNodes,registrationData,nodeMatchFunc,callbacksToBeCalled):"attributes"===mutation.type&&nodeMatchFunc(targetNode,registrationData,callbacksToBeCalled)&&callbacksToBeCalled.push({callback:registrationData.callback,elem:node}),utils.callCallbacks(callbacksToBeCalled)})}function nodeMatchFunc(node,registrationData,callbacksToBeCalled){if(utils.matchesSelector(node,registrationData.selector)&&(node._id===undefined&&(node._id=arriveUniqueId++),registrationData.firedElems.indexOf(node._id)==-1)){if(registrationData.options.onceOnly){if(0!==registrationData.firedElems.length)return;registrationData.me.unbindEventWithSelectorAndCallback.call(registrationData.target,registrationData.selector,registrationData.callback)}registrationData.firedElems.push(node._id),callbacksToBeCalled.push({callback:registrationData.callback,elem:node})}}var arriveDefaultOptions={fireOnAttributesModification:!1,onceOnly:!1,existing:!1};arriveEvents=new MutationEvents(getArriveObserverConfig,onArriveMutation);var mutationBindEvent=arriveEvents.bindEvent;return arriveEvents.bindEvent=function(selector,options,callback){void 0===callback?(callback=options,options=arriveDefaultOptions):options=utils.mergeArrays(arriveDefaultOptions,options);var elements=utils.toElementsArray(this);if(options.existing){for(var existing=[],i=0;i<elements.length;i++)for(var nodes=elements[i].querySelectorAll(selector),j=0;j<nodes.length;j++)existing.push({callback:callback,elem:nodes[j]});if(options.onceOnly&&existing.length)return callback.call(existing[0].elem);utils.callCallbacks(existing)}mutationBindEvent.call(this,selector,options,callback)},arriveEvents},LeaveEvents=function(){function getLeaveObserverConfig(options){return{childList:!0,subtree:!0}}function onLeaveMutation(mutations,registrationData){mutations.forEach(function(mutation){var removedNodes=mutation.removedNodes,callbacksToBeCalled=(mutation.target,[]);null!==removedNodes&&removedNodes.length>0&&utils.checkChildNodesRecursively(removedNodes,registrationData,nodeMatchFunc,callbacksToBeCalled),utils.callCallbacks(callbacksToBeCalled)})}function nodeMatchFunc(node,registrationData){return utils.matchesSelector(node,registrationData.selector)}var leaveDefaultOptions={};leaveEvents=new MutationEvents(getLeaveObserverConfig,onLeaveMutation);var mutationBindEvent=leaveEvents.bindEvent;return leaveEvents.bindEvent=function(selector,options,callback){void 0===callback?(callback=options,options=leaveDefaultOptions):options=utils.mergeArrays(leaveDefaultOptions,options),mutationBindEvent.call(this,selector,options,callback)},leaveEvents},arriveEvents=new ArriveEvents,leaveEvents=new LeaveEvents;$&&exposeApi($.fn),exposeApi(HTMLElement.prototype),exposeApi(NodeList.prototype),exposeApi(HTMLCollection.prototype),exposeApi(HTMLDocument.prototype),exposeApi(Window.prototype);var Arrive={};return exposeUnbindApi(arriveEvents,Arrive,"unbindAllArrive"),exposeUnbindApi(leaveEvents,Arrive,"unbindAllLeave"),Arrive}}(this,"undefined"==typeof jQuery?null:jQuery,void 0);!function($){function _isChar(evt){return void 0===evt.which||"number"==typeof evt.which&&evt.which>0&&(!evt.ctrlKey&&!evt.metaKey&&!evt.altKey&&8!=evt.which&&9!=evt.which&&13!=evt.which&&16!=evt.which&&17!=evt.which&&20!=evt.which&&27!=evt.which)}function _addFormGroupFocus(element){var $element=$(element);$element.prop("disabled")||$element.closest(".form-group").addClass("is-focused")}function _toggleTypeFocus($input){$input.closest("label").hover(function(){var $i=$(this).find("input");$i.prop("disabled")||_addFormGroupFocus($i)},function(){_removeFormGroupFocus($(this).find("input"))})}function _removeFormGroupFocus(element){$(element).closest(".form-group").removeClass("is-focused")}$.expr[":"].notmdproc=function(obj){return!$(obj).data("mdproc")},$.material={options:{validate:!0,input:!0,ripples:!0,checkbox:!0,togglebutton:!0,radio:!0,arrive:!0,autofill:!1,withRipples:[".btn:not(.btn-link)",".card-image",".navbar a:not(.withoutripple)",".dropdown-menu a",".nav-tabs a:not(.withoutripple)",".withripple",".pagination li:not(.active):not(.disabled) a:not(.withoutripple)"].join(","),inputElements:"input.form-control, textarea.form-control, select.form-control",checkboxElements:".checkbox > label > input[type=checkbox]",togglebuttonElements:".togglebutton > label > input[type=checkbox]",radioElements:".radio > label > input[type=radio]"},checkbox:function(selector){_toggleTypeFocus($(selector?selector:this.options.checkboxElements).filter(":notmdproc").data("mdproc",!0).after("<span class='checkbox-material'><span class='check'></span></span>"))},togglebutton:function(selector){_toggleTypeFocus($(selector?selector:this.options.togglebuttonElements).filter(":notmdproc").data("mdproc",!0).after("<span class='toggle'></span>"))},radio:function(selector){_toggleTypeFocus($(selector?selector:this.options.radioElements).filter(":notmdproc").data("mdproc",!0).after("<span class='circle'></span><span class='check'></span>"))},input:function(selector){$(selector?selector:this.options.inputElements).filter(":notmdproc").data("mdproc",!0).each(function(){var $input=$(this),$formGroup=$input.closest(".form-group");0===$formGroup.length&&($input.wrap("<div class='form-group'></div>"),$formGroup=$input.closest(".form-group")),$input.attr("data-hint")&&($input.after("<p class='help-block'>"+$input.attr("data-hint")+"</p>"),$input.removeAttr("data-hint"));var legacySizes={"input-lg":"form-group-lg","input-sm":"form-group-sm"};if($.each(legacySizes,function(legacySize,standardSize){$input.hasClass(legacySize)&&($input.removeClass(legacySize),$formGroup.addClass(standardSize))}),$input.hasClass("floating-label")){var placeholder=$input.attr("placeholder");$input.attr("placeholder",null).removeClass("floating-label");var id=$input.attr("id"),forAttribute="";id&&(forAttribute="for='"+id+"'"),$formGroup.addClass("label-floating"),$input.after("<label "+forAttribute+"class='control-label'>"+placeholder+"</label>")}null!==$input.val()&&"undefined"!=$input.val()&&""!==$input.val()||$formGroup.addClass("is-empty"),$formGroup.append("<span class='material-input'></span>"),$formGroup.find("input[type=file]").length>0&&$formGroup.addClass("is-fileinput")})},attachInputEventHandlers:function(){var validate=this.options.validate;$(document).on("change",".checkbox input[type=checkbox]",function(){$(this).blur()}).on("keydown paste",".form-control",function(e){_isChar(e)&&$(this).closest(".form-group").removeClass("is-empty")}).on("keyup change",".form-control",function(){var $input=$(this),$formGroup=$input.closest(".form-group"),isValid=void 0===$input[0].checkValidity||$input[0].checkValidity();""===$input.val()?$formGroup.addClass("is-empty"):$formGroup.removeClass("is-empty"),validate&&(isValid?$formGroup.removeClass("has-error"):$formGroup.addClass("has-error"))}).on("focus",".form-control, .form-group.is-fileinput",function(){_addFormGroupFocus(this)}).on("blur",".form-control, .form-group.is-fileinput",function(){_removeFormGroupFocus(this)}).on("change",".form-group input",function(){var $input=$(this);if("file"!=$input.attr("type")){var $formGroup=$input.closest(".form-group");$input.val()?$formGroup.removeClass("is-empty"):$formGroup.addClass("is-empty")}}).on("change",".form-group.is-fileinput input[type='file']",function(){var $input=$(this),$formGroup=$input.closest(".form-group"),value="";$.each(this.files,function(i,file){value+=file.name+", "}),value=value.substring(0,value.length-2),value?$formGroup.removeClass("is-empty"):$formGroup.addClass("is-empty"),$formGroup.find("input.form-control[readonly]").val(value)})},ripples:function(selector){$(selector?selector:this.options.withRipples).ripples()},autofill:function(){var loading=setInterval(function(){$("input[type!=checkbox]").each(function(){var $this=$(this);$this.val()&&$this.val()!==$this.attr("value")&&$this.trigger("change")})},100);setTimeout(function(){clearInterval(loading)},1e4)},attachAutofillEventHandlers:function(){var focused;$(document).on("focus","input",function(){var $inputs=$(this).parents("form").find("input").not("[type=file]");focused=setInterval(function(){$inputs.each(function(){var $this=$(this);$this.val()!==$this.attr("value")&&$this.trigger("change")})},100)}).on("blur",".form-group input",function(){clearInterval(focused)})},init:function(options){this.options=$.extend({},this.options,options);var $document=$(document);$.fn.ripples&&this.options.ripples&&this.ripples(),this.options.input&&(this.input(),this.attachInputEventHandlers()),this.options.checkbox&&this.checkbox(),this.options.togglebutton&&this.togglebutton(),this.options.radio&&this.radio(),this.options.autofill&&(this.autofill(),this.attachAutofillEventHandlers()),document.arrive&&this.options.arrive&&($.fn.ripples&&this.options.ripples&&$document.arrive(this.options.withRipples,function(){$.material.ripples($(this))}),this.options.input&&$document.arrive(this.options.inputElements,function(){$.material.input($(this))}),this.options.checkbox&&$document.arrive(this.options.checkboxElements,function(){$.material.checkbox($(this))}),this.options.radio&&$document.arrive(this.options.radioElements,function(){$.material.radio($(this))}),this.options.togglebutton&&$document.arrive(this.options.togglebuttonElements,function(){$.material.togglebutton($(this))}))}}}(jQuery),function(a,b,c,d){"use strict";function e(b,c){g=this,this.element=a(b),this.options=a.extend({},h,c),this._defaults=h,this._name=f,this.init()}var f="ripples",g=null,h={};e.prototype.init=function(){var c=this.element;c.on("mousedown touchstart",function(d){if(!g.isTouch()||"mousedown"!==d.type){c.find(".ripple-container").length||c.append('<div class="ripple-container"></div>');var e=c.children(".ripple-container"),f=g.getRelY(e,d),h=g.getRelX(e,d);if(f||h){var i=g.getRipplesColor(c),j=a("<div></div>");j.addClass("ripple").css({left:h,top:f,"background-color":i}),e.append(j),function(){b.getComputedStyle(j[0]).opacity}(),g.rippleOn(c,j),setTimeout(function(){g.rippleEnd(j)},500),c.on("mouseup mouseleave touchend",function(){j.data("mousedown","off"),"off"===j.data("animating")&&g.rippleOut(j)})}}})},e.prototype.getNewSize=function(a,b){return Math.max(a.outerWidth(),a.outerHeight())/b.outerWidth()*2.5},e.prototype.getRelX=function(a,b){var c=a.offset();return g.isTouch()?(b=b.originalEvent,1===b.touches.length&&b.touches[0].pageX-c.left):b.pageX-c.left},e.prototype.getRelY=function(a,b){var c=a.offset();return g.isTouch()?(b=b.originalEvent,1===b.touches.length&&b.touches[0].pageY-c.top):b.pageY-c.top},e.prototype.getRipplesColor=function(a){return a.data("ripple-color")?a.data("ripple-color"):b.getComputedStyle(a[0]).color},e.prototype.hasTransitionSupport=function(){var a=c.body||c.documentElement,b=a.style;return b.transition!==d||b.WebkitTransition!==d||b.MozTransition!==d||b.MsTransition!==d||b.OTransition!==d},e.prototype.isTouch=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},e.prototype.rippleEnd=function(a){a.data("animating","off"),"off"===a.data("mousedown")&&g.rippleOut(a)},e.prototype.rippleOut=function(a){a.off(),g.hasTransitionSupport()?a.addClass("ripple-out"):a.animate({opacity:0},100,function(){a.trigger("transitionend")}),a.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){a.remove()})},e.prototype.rippleOn=function(a,b){var c=g.getNewSize(a,b);g.hasTransitionSupport()?b.css({"-ms-transform":"scale("+c+")","-moz-transform":"scale("+c+")","-webkit-transform":"scale("+c+")",transform:"scale("+c+")"}).addClass("ripple-on").data("animating","on").data("mousedown","on"):b.animate({width:2*Math.max(a.outerWidth(),a.outerHeight()),height:2*Math.max(a.outerWidth(),a.outerHeight()),"margin-left":-1*Math.max(a.outerWidth(),a.outerHeight()),"margin-top":-1*Math.max(a.outerWidth(),a.outerHeight()),opacity:.2},500,function(){b.trigger("transitionend")})},a.fn.ripples=function(b){return this.each(function(){a.data(this,"plugin_"+f)||a.data(this,"plugin_"+f,new e(this,b))})}}(jQuery,window,document),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?module.exports=factory(require("jquery")):factory(jQuery)}(function($){var methods={options:{optionClass:"",dropdownClass:"",autoinit:!1,callback:!1,onSelected:!1,dynamicOptLabel:"Add a new option..."},init:function(options){function initElement($select){if(!$select.data("dropdownjs")&&$select.is("select")){var multi=$select.attr("multiple"),dynamicOptions=$select.attr("data-dynamic-opts"),$dynamicInput=$(),$dropdown=$("<div></div>");$dropdown.addClass("dropdownjs").addClass(options.dropdownStyle),$dropdown.data("select",$select);var $input=$("<input type=text readonly class=fakeinput>");$.material&&$input.data("mdproc",!0),$dropdown.append($input);var $ul=$("<ul></ul>");$ul.data("select",$select),$dropdown.append($ul),$input.attr("placeholder",$select.attr("placeholder")),$select.find("option").each(function(){var $this=$(this);methods._addOption($ul,$this)}),dynamicOptions&&($dynamicInput=$("<li class=dropdownjs-add></li>"),$dynamicInput.append("<input>"),$dynamicInput.find("input").attr("placeholder",options.dynamicOptLabel),$ul.append($dynamicInput));$dropdown.find("li");if(multi){var selectors=[],val=$select.val();for(var i in val)selectors.push("li[value="+val[i]+"]");selectors.length>0&&methods._select($dropdown,$dropdown.find(selectors.join(",")))}else{var $selected;$selected=$select.find(":selected").length?$select.find(":selected").last():$select.find("option, li").first(),methods._select($dropdown,$selected)}$input.addClass($select[0].className),$select.hide().attr("data-dropdownjs",!0),$select.after($dropdown),options.callback&&options.callback($dropdown),$ul.on("click","li:not(.dropdownjs-add)",function(e){methods._select($dropdown,$(this)),$select.change()}),$ul.on("keydown","li:not(.dropdownjs-add)",function(e){return 27===e.which?($(".dropdownjs > ul > li").attr("tabindex",-1),$input.removeClass("focus").blur()):32!==e.which||$(e.target).is("input")?void 0:(methods._select($dropdown,$(this)),!1)}),$ul.on("focus","li:not(.dropdownjs-add)",function(){$select.is(":disabled")||$input.addClass("focus")}),dynamicOptions&&dynamicOptions.length&&$dynamicInput.on("keydown",function(e){if(13===e.which){var $option=$("<option>"),val=$dynamicInput.find("input").val();$dynamicInput.find("input").val(""),$option.attr("value",val),$option.text(val),$select.append($option)}}),$select.on("DOMNodeInserted",function(e){var $this=$(e.target);$this.val().length&&(methods._addOption($ul,$this),$ul.find("li").not(".dropdownjs-add").attr("tabindex",0))}),$input.on("click focus",function(e){if(e.stopPropagation(),!$select.is(":disabled")){$(".dropdownjs > ul > li").attr("tabindex",-1),$(".dropdownjs > input").not($(this)).removeClass("focus").blur(),$(".dropdownjs > ul > li").not(".dropdownjs-add").attr("tabindex",0);var coords={top:$(this).offset().top-$(document).scrollTop(),left:$(this).offset().left-$(document).scrollLeft(),bottom:$(window).height()-($(this).offset().top-$(document).scrollTop()),right:$(window).width()-($(this).offset().left-$(document).scrollLeft())},height=coords.bottom;height<200&&coords.top>coords.bottom?(height=coords.top,$ul.attr("placement","top-left")):$ul.attr("placement","bottom-left"),$(this).next("ul").css("max-height",height-20),$(this).addClass("focus")}}),$(document).on("click",function(e){multi&&$(e.target).parents(".dropdownjs").length||$(e.target).parents(".dropdownjs-add").length||$(e.target).is(".dropdownjs-add")||($(".dropdownjs > ul > li").attr("tabindex",-1),$input.removeClass("focus"))})}}options=options?$.extend(methods.options,options):methods.options,options.autoinit&&$(document).on("DOMNodeInserted",function(e){var $this=$(e.target);$this.is("select")||($this=$this.find("select")),$this.is(options.autoinit)&&initElement($this)}),$(this).each(function(){initElement($(this))})},select:function(target){var $target=$(this).find('[value="'+target+'"]');methods._select($(this),$target)},_select:function($dropdown,$target){if(!$target.is(".dropdownjs-add")){var $select=$dropdown.data("select"),$input=$dropdown.find("input.fakeinput"),multi=$select.attr("multiple"),selectOptions=$dropdown.find("li");if(multi){$target.toggleClass("selected"),$target.each(function(){$select.find('[value="'+$(this).attr("value")+'"]').prop("selected",$(this).hasClass("selected"))});var text=[];selectOptions.each(function(){$(this).hasClass("selected")&&text.push($(this).text())}),$input.val(text.join(", "))}multi||(selectOptions.not($target).removeClass("selected"),$target.addClass("selected"),$select.val($target.attr("value")),$input.val($target.text().trim())),$.material&&($input.val().trim()?$select.removeClass("empty"):$select.addClass("empty")),this.options.onSelected&&this.options.onSelected($target.attr("value"))}},_addOption:function($ul,$this){var $option=$("<li></li>");$option.addClass(this.options.optionStyle),$this.text()?$option.text($this.text()):$option.html("&nbsp;"),$option.attr("value",$this.val()),$ul.data("select").attr("data-dynamic-opts")&&($option.append("<span class=close></span>"),$option.find(".close").on("click",function(){$option.remove(),$this.remove()})),$this.prop("selected")&&$option.attr("selected",!0),$ul.find(".dropdownjs-add").length?$ul.find(".dropdownjs-add").before($option):$ul.append($option)}};$.fn.dropdown=function(params){return methods[params]?methods[params].apply(this,Array.prototype.slice.call(arguments,1)):"object"==typeof params|!params?methods.init.apply(this,arguments):void $.error("Method "+params+" does not exists on jQuery.dropdown")}}),angular.module("btford.socket-io",[]).provider("socketFactory",function(){"use strict";this.$get=["$rootScope","$timeout","global",function($rootScope,$timeout,global){var asyncAngularify=function(socket,callback){return callback?function(){var args=arguments;$timeout(function(){callback.apply(socket,args)},0)}:angular.noop};return function(options){options=options||{},options.host||(options.host=socketHost);var socket=options.ioSocket||io.connect(options.host),prefix=void 0===options.prefix?"socket:":options.prefix,defaultScope=options.scope||$rootScope,addListener=function(eventName,callback){socket.on(eventName,callback.__ng=asyncAngularify(socket,callback))};return{on:addListener,addListener:addListener,once:function(eventName,callback){socket.once(eventName,callback.__ng=asyncAngularify(socket,callback))},emit:function(eventName,data,callback){var lastIndex=arguments.length-1,callback=arguments[lastIndex];return"function"==typeof callback&&(callback=asyncAngularify(socket,callback),arguments[lastIndex]=callback),socket.emit.apply(socket,arguments)},removeListener:function(ev,fn){return fn&&fn.__ng&&(arguments[1]=fn.__ng),socket.removeListener.apply(socket,arguments)},removeAllListeners:function(){return socket.removeAllListeners.apply(socket,arguments)},disconnect:function(close){return socket.disconnect(close)},connect:function(){return socket.connect()},forward:function(events,scope){events instanceof Array==0&&(events=[events]),scope||(scope=defaultScope),events.forEach(function(eventName){var prefixedEvent=prefix+eventName,forwardBroadcast=asyncAngularify(socket,function(){Array.prototype.unshift.call(arguments,prefixedEvent),scope.$broadcast.apply(scope,arguments)});scope.$on("$destroy",function(){socket.removeListener(eventName,forwardBroadcast)}),socket.on(eventName,forwardBroadcast)})}}}}]}),function(window,angular,undefined){"use strict";angular.module("ngCookies",["ng"]).factory("$cookies",["$rootScope","$browser",function($rootScope,$browser){function push(){var name,value,browserCookies,updated;for(name in lastCookies)isUndefined(cookies[name])&&($browser.cookies(name,undefined),delete lastCookies[name]);for(name in cookies)value=cookies[name],angular.isString(value)||(value=""+value,cookies[name]=value),value!==lastCookies[name]&&($browser.cookies(name,value),lastCookies[name]=value,updated=!0);if(updated){browserCookies=$browser.cookies();for(name in cookies)cookies[name]!==browserCookies[name]&&(isUndefined(browserCookies[name])?(delete cookies[name],delete lastCookies[name]):cookies[name]=lastCookies[name]=browserCookies[name])}}var lastBrowserCookies,cookies={},lastCookies={},runEval=!1,copy=angular.copy,isUndefined=angular.isUndefined;return $browser.addPollFn(function(){var currentCookies=$browser.cookies();lastBrowserCookies!=currentCookies&&(lastBrowserCookies=currentCookies,copy(currentCookies,lastCookies),copy(currentCookies,cookies),runEval&&$rootScope.$apply())})(),runEval=!0,$rootScope.$watch(push),cookies}]).factory("$cookieStore",["$cookies",function($cookies){return{get:function(key){var value=$cookies[key];return value?angular.fromJson(value):value},put:function(key,value){$cookies[key]=angular.toJson(value)},remove:function(key){delete $cookies[key]}}}])}(window,window.angular),function(window,angular,undefined){"use strict";function makeSwipeDirective(directiveName,direction,eventName){ngTouch.directive(directiveName,["$parse","$swipe",function($parse,$swipe){return function(scope,element,attr){function validSwipe(coords){if(!startCoords)return!1;var deltaY=Math.abs(coords.y-startCoords.y),deltaX=(coords.x-startCoords.x)*direction;return valid&&deltaY<75&&deltaX>0&&deltaX>30&&deltaY/deltaX<.3}var startCoords,valid,swipeHandler=$parse(attr[directiveName]);$swipe.bind(element,{start:function(coords,event){startCoords=coords,valid=!0},cancel:function(event){valid=!1},end:function(coords,event){validSwipe(coords)&&scope.$apply(function(){element.triggerHandler(eventName),swipeHandler(scope,{$event:event})})}})}}])}var ngTouch=angular.module("ngTouch",[])
;ngTouch.factory("$swipe",[function(){function getCoordinates(event){var touches=event.touches&&event.touches.length?event.touches:[event],e=event.changedTouches&&event.changedTouches[0]||event.originalEvent&&event.originalEvent.changedTouches&&event.originalEvent.changedTouches[0]||touches[0].originalEvent||touches[0];return{x:e.clientX,y:e.clientY}}return{bind:function(element,eventHandlers){var totalX,totalY,startCoords,lastPos,active=!1;element.on("touchstart mousedown",function(event){startCoords=getCoordinates(event),active=!0,totalX=0,totalY=0,lastPos=startCoords,eventHandlers.start&&eventHandlers.start(startCoords,event)}),element.on("touchcancel",function(event){active=!1,eventHandlers.cancel&&eventHandlers.cancel(event)}),element.on("touchmove mousemove",function(event){if(active&&startCoords){var coords=getCoordinates(event);if(totalX+=Math.abs(coords.x-lastPos.x),totalY+=Math.abs(coords.y-lastPos.y),lastPos=coords,!(totalX<10&&totalY<10))return totalY>totalX?(active=!1,void(eventHandlers.cancel&&eventHandlers.cancel(event))):(event.preventDefault(),void(eventHandlers.move&&eventHandlers.move(coords,event)))}}),element.on("touchend mouseup",function(event){active&&(active=!1,eventHandlers.end&&eventHandlers.end(getCoordinates(event),event))})}}}]),ngTouch.config(["$provide",function($provide){$provide.decorator("ngClickDirective",["$delegate",function($delegate){return $delegate.shift(),$delegate}])}]),ngTouch.directive("ngClick",["$parse","$timeout","$rootElement",function($parse,$timeout,$rootElement){function hit(x1,y1,x2,y2){return Math.abs(x1-x2)<CLICKBUSTER_THRESHOLD&&Math.abs(y1-y2)<CLICKBUSTER_THRESHOLD}function checkAllowableRegions(touchCoordinates,x,y){for(var i=0;i<touchCoordinates.length;i+=2)if(hit(touchCoordinates[i],touchCoordinates[i+1],x,y))return touchCoordinates.splice(i,i+2),!0;return!1}function onClick(event){if(!(Date.now()-lastPreventedTime>PREVENT_DURATION)){var touches=event.touches&&event.touches.length?event.touches:[event],x=touches[0].clientX,y=touches[0].clientY;x<1&&y<1||lastLabelClickCoordinates&&lastLabelClickCoordinates[0]===x&&lastLabelClickCoordinates[1]===y||(lastLabelClickCoordinates&&(lastLabelClickCoordinates=null),"label"===event.target.tagName.toLowerCase()&&(lastLabelClickCoordinates=[x,y]),checkAllowableRegions(touchCoordinates,x,y)||(event.stopPropagation(),event.preventDefault(),event.target&&event.target.blur()))}}function onTouchStart(event){var touches=event.touches&&event.touches.length?event.touches:[event],x=touches[0].clientX,y=touches[0].clientY;touchCoordinates.push(x,y),$timeout(function(){for(var i=0;i<touchCoordinates.length;i+=2)if(touchCoordinates[i]==x&&touchCoordinates[i+1]==y)return void touchCoordinates.splice(i,i+2)},PREVENT_DURATION,!1)}function preventGhostClick(x,y){touchCoordinates||($rootElement[0].addEventListener("click",onClick,!0),$rootElement[0].addEventListener("touchstart",onTouchStart,!0),touchCoordinates=[]),lastPreventedTime=Date.now(),checkAllowableRegions(touchCoordinates,x,y)}var lastPreventedTime,touchCoordinates,lastLabelClickCoordinates,PREVENT_DURATION=2500,CLICKBUSTER_THRESHOLD=25,ACTIVE_CLASS_NAME="ng-click-active";return function(scope,element,attr){function resetState(){tapping=!1,element.removeClass(ACTIVE_CLASS_NAME)}var tapElement,startTime,touchStartX,touchStartY,clickHandler=$parse(attr.ngClick),tapping=!1;element.on("touchstart",function(event){tapping=!0,tapElement=event.target?event.target:event.srcElement,3==tapElement.nodeType&&(tapElement=tapElement.parentNode),element.addClass(ACTIVE_CLASS_NAME),startTime=Date.now();var touches=event.touches&&event.touches.length?event.touches:[event],e=touches[0].originalEvent||touches[0];touchStartX=e.clientX,touchStartY=e.clientY}),element.on("touchmove",function(event){resetState()}),element.on("touchcancel",function(event){resetState()}),element.on("touchend",function(event){var diff=Date.now()-startTime,touches=event.changedTouches&&event.changedTouches.length?event.changedTouches:event.touches&&event.touches.length?event.touches:[event],e=touches[0].originalEvent||touches[0],x=e.clientX,y=e.clientY,dist=Math.sqrt(Math.pow(x-touchStartX,2)+Math.pow(y-touchStartY,2));tapping&&diff<750&&dist<12&&(preventGhostClick(x,y),tapElement&&tapElement.blur(),angular.isDefined(attr.disabled)&&attr.disabled!==!1||element.triggerHandler("click",[event])),resetState()}),element.onclick=function(event){},element.on("click",function(event,touchend){scope.$apply(function(){clickHandler(scope,{$event:touchend||event})})}),element.on("mousedown",function(event){element.addClass(ACTIVE_CLASS_NAME)}),element.on("mousemove mouseup",function(event){element.removeClass(ACTIVE_CLASS_NAME)})}}]),makeSwipeDirective("ngSwipeLeft",-1,"swipeleft"),makeSwipeDirective("ngSwipeRight",1,"swiperight")}(window,window.angular),function(){"use strict";angular.module("ui.mask",[]).value("uiMaskConfig",{maskDefinitions:{9:/\d/,A:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/},clearOnBlur:!0,clearOnBlurPlaceholder:!1,escChar:"\\",eventsToHandle:["input","keyup","click","focus"],addDefaultPlaceholder:!0,allowInvalidValue:!1}).provider("uiMask.Config",function(){var e={};this.maskDefinitions=function(n){return e.maskDefinitions=n},this.clearOnBlur=function(n){return e.clearOnBlur=n},this.clearOnBlurPlaceholder=function(n){return e.clearOnBlurPlaceholder=n},this.eventsToHandle=function(n){return e.eventsToHandle=n},this.addDefaultPlaceholder=function(n){return e.addDefaultPlaceholder=n},this.allowInvalidValue=function(n){return e.allowInvalidValue=n},this.$get=["uiMaskConfig",function(n){var t=n;for(var a in e)angular.isObject(e[a])&&!angular.isArray(e[a])?angular.extend(t[a],e[a]):t[a]=e[a];return t}]}).directive("uiMask",["uiMask.Config",function(e){function n(e){return e===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(e.type||e.href||~e.tabIndex)}return{priority:100,require:"ngModel",restrict:"A",compile:function(){var t=angular.copy(e);return function(e,a,i,r){function l(e){return angular.isDefined(e)?(w(e),K?(h(),d(),!0):f()):f()}function u(e){e&&(T=e,!K||0===a.val().length&&angular.isDefined(i.placeholder)||a.val(m(p(a.val()))))}function o(){return l(i.uiMask)}function c(e){return K?(j=p(e||""),R=g(j),r.$setValidity("mask",R),j.length&&(R||Q.allowInvalidValue)?m(j):void 0):e}function s(e){return K?(j=p(e||""),R=g(j),r.$viewValue=j.length?m(j):"",r.$setValidity("mask",R),R||Q.allowInvalidValue?J?r.$viewValue:j:void 0):e}function f(){return K=!1,v(),angular.isDefined(q)?a.attr("placeholder",q):a.removeAttr("placeholder"),angular.isDefined(W)?a.attr("maxlength",W):a.removeAttr("maxlength"),a.val(r.$modelValue),r.$viewValue=r.$modelValue,!1}function h(){j=F=p(r.$modelValue||""),H=_=m(j),R=g(j),i.maxlength&&a.attr("maxlength",2*S[S.length-1]),!q&&Q.addDefaultPlaceholder&&a.attr("placeholder",T);for(var e=r.$modelValue,n=r.$formatters.length;n--;)e=r.$formatters[n](e);r.$viewValue=e||"",r.$render()}function d(){Z||(a.bind("blur",y),a.bind("mousedown mouseup",V),a.bind("keydown",M),a.bind(Q.eventsToHandle.join(" "),O),Z=!0)}function v(){Z&&(a.unbind("blur",y),a.unbind("mousedown",V),a.unbind("mouseup",V),a.unbind("keydown",M),a.unbind("input",O),a.unbind("keyup",O),a.unbind("click",O),a.unbind("focus",O),Z=!1)}function g(e){return!e.length||e.length>=I}function p(e){var n,t,i="",r=a[0],l=A.slice(),u=L,o=u+C(r),c="";return e=e.toString(),n=0,t=e.length-T.length,angular.forEach(B,function(a){var i=a.position;i>=u&&o>i||(i>=u&&(i+=t),e.substring(i,i+a.value.length)===a.value&&(c+=e.slice(n,i),n=i+a.value.length))}),e=c+e.slice(n),angular.forEach(e.split(""),function(e){l.length&&l[0].test(e)&&(i+=e,l.shift())}),i}function m(e){var n="",t=S.slice();return angular.forEach(T.split(""),function(a,i){e.length&&i===t[0]?(n+=e.charAt(0)||"_",e=e.substr(1),t.shift()):n+=a}),n}function b(e){var n,t=angular.isDefined(i.uiMaskPlaceholder)?i.uiMaskPlaceholder:i.placeholder;return angular.isDefined(t)&&t[e]?t[e]:(n=angular.isDefined(i.uiMaskPlaceholderChar)&&i.uiMaskPlaceholderChar?i.uiMaskPlaceholderChar:"_","space"===n.toLowerCase()?" ":n[0])}function k(){var e,n,t=T.split("");S&&!isNaN(S[0])&&angular.forEach(S,function(e){t[e]="_"}),e=t.join(""),n=e.replace(/[_]+/g,"_").split("_"),n=n.filter(function(e){return""!==e});var a=0;return n.map(function(n){var t=e.indexOf(n,a);return a=t+1,{value:n,position:t}})}function w(e){var n=0;if(S=[],A=[],T="",angular.isString(e)){I=0;var t=!1,a=0,i=e.split(""),r=!1;angular.forEach(i,function(e,i){r?(r=!1,T+=e,n++):Q.escChar===e?r=!0:Q.maskDefinitions[e]?(S.push(n),T+=b(i-a),A.push(Q.maskDefinitions[e]),n++,t||I++,t=!1):"?"===e?(t=!0,a++):(T+=e,n++)})}S.push(S.slice().pop()+1),B=k(),K=S.length>1}function y(){if((Q.clearOnBlur||Q.clearOnBlurPlaceholder&&0===j.length&&i.placeholder)&&(L=0,N=0,R&&0!==j.length||(H="",a.val(""),e.$apply(function(){r.$pristine||r.$setViewValue("")}))),j!==U){var n=a.val(),t=""===j&&n&&angular.isDefined(i.uiMaskPlaceholderChar)&&"space"===i.uiMaskPlaceholderChar;t&&a.val(""),$(a[0]),t&&a.val(n)}U=j}function $(e){var n;if(angular.isFunction(window.Event)&&!e.fireEvent)try{n=new Event("change",{view:window,bubbles:!0,cancelable:!1})}catch(t){n=document.createEvent("HTMLEvents"),n.initEvent("change",!1,!0)}finally{e.dispatchEvent(n)}else"createEvent"in document?(n=document.createEvent("HTMLEvents"),n.initEvent("change",!1,!0),e.dispatchEvent(n)):e.fireEvent&&e.fireEvent("onchange")}function V(e){"mousedown"===e.type?a.bind("mouseout",E):a.unbind("mouseout",E)}function E(){N=C(this),a.unbind("mouseout",E)}function M(e){var n=8===e.which,t=P(this)-1||0,i=90===e.which&&e.ctrlKey;if(n){for(;t>=0;){if(D(t)){x(this,t+1);break}t--}z=-1===t}i&&(a.val(""),e.preventDefault())}function O(n){n=n||{};var t=n.which,i=n.type;if(16!==t&&91!==t){var l,u=a.val(),o=_,c=!1,s=p(u),f=F,h=P(this)||0,d=L||0,v=h-d,g=S[0],b=S[s.length]||S.slice().shift(),k=N||0,w=C(this)>0,y=k>0,$=u.length>o.length||k&&u.length>o.length-k,V=u.length<o.length||k&&u.length===o.length-k,E=t>=37&&40>=t&&n.shiftKey,M=37===t,O=8===t||"keyup"!==i&&V&&-1===v,A=46===t||"keyup"!==i&&V&&0===v&&!y,B=(M||O||"click"===i)&&h>g;if(N=C(this),!E&&(!w||"click"!==i&&"keyup"!==i&&"focus"!==i)){if(O&&z)return a.val(T),e.$apply(function(){r.$setViewValue("")}),void x(this,d);if("input"===i&&V&&!y&&s===f){for(;O&&h>g&&!D(h);)h--;for(;A&&b>h&&-1===S.indexOf(h);)h++;var I=S.indexOf(h);(s=s.substring(0,I)+s.substring(I+1))!==f&&(c=!0)}for(l=m(s),_=l,F=s,!c&&u.length>l.length&&(c=!0),a.val(l),c&&e.$apply(function(){r.$setViewValue(l)}),$&&g>=h&&(h=g+1),B&&h--,h=h>b?b:g>h?g:h;!D(h)&&h>g&&b>h;)h+=B?-1:1;(B&&b>h||$&&!D(d))&&h++,L=h,x(this,h)}}}function D(e){return S.indexOf(e)>-1}function P(e){if(!e)return 0;if(void 0!==e.selectionStart)return e.selectionStart;if(document.selection&&n(a[0])){e.focus();var t=document.selection.createRange();return t.moveStart("character",e.value?-e.value.length:0),t.text.length}return 0}function x(e,t){if(!e)return 0;if(0!==e.offsetWidth&&0!==e.offsetHeight)if(e.setSelectionRange)n(a[0])&&(e.focus(),e.setSelectionRange(t,t));else if(e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",t),i.select()}}function C(e){return e?void 0!==e.selectionStart?e.selectionEnd-e.selectionStart:window.getSelection?window.getSelection().toString().length:document.selection?document.selection.createRange().text.length:0:0}var S,A,T,B,I,j,H,R,_,F,L,N,z,K=!1,Z=!1,q=i.placeholder,W=i.maxlength,G=r.$isEmpty;r.$isEmpty=function(e){return G(K?p(e||""):e)};var J=!1;i.$observe("modelViewValue",function(e){"true"===e&&(J=!0)}),i.$observe("allowInvalidValue",function(e){Q.allowInvalidValue=""===e||!!e,c(r.$modelValue)});var Q={};i.uiOptions?(Q=e.$eval("["+i.uiOptions+"]"),Q=angular.isObject(Q[0])?function(e,n){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(void 0===n[t]?n[t]=angular.copy(e[t]):angular.isObject(n[t])&&!angular.isArray(n[t])&&(n[t]=angular.extend({},e[t],n[t])));return n}(t,Q[0]):t):Q=t,i.$observe("uiMask",l),angular.isDefined(i.uiMaskPlaceholder)?i.$observe("uiMaskPlaceholder",u):i.$observe("placeholder",u),angular.isDefined(i.uiMaskPlaceholderChar)&&i.$observe("uiMaskPlaceholderChar",o),r.$formatters.unshift(c),r.$parsers.unshift(s);var U=a.val();a.bind("mousedown mouseup",V),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var n=Object(this),t=n.length>>>0;if(0===t)return-1;var a=0;if(arguments.length>1&&(a=Number(arguments[1]),a!==a?a=0:0!==a&&a!==1/0&&a!==-(1/0)&&(a=(a>0||-1)*Math.floor(Math.abs(a)))),a>=t)return-1;for(var i=a>=0?a:Math.max(t-Math.abs(a),0);t>i;i++)if(i in n&&n[i]===e)return i;return-1})}}}}])}(),function(){"use strict";angular.module("toaster",[]).constant("toasterConfig",{limit:0,"tap-to-dismiss":!0,"close-button":!1,"newest-on-top":!0,"time-out":5e3,"icon-classes":{error:"toast-error",info:"toast-info",wait:"toast-wait",success:"toast-success",warning:"toast-warning"},"body-output-type":"","body-template":"toasterBodyTmpl.html","icon-class":"toast-info","position-class":"toast-top-right","title-class":"toast-title","message-class":"toast-message","prevent-duplicates":!1,"mouseover-timer-stop":!0}).service("toaster",["$rootScope","toasterConfig",function(t,e){this.pop=function(e,o,s,i,a,n,r,c,l,u,d){if(angular.isObject(e)){var p=e;this.toast={type:p.type,title:p.title,body:p.body,timeout:p.timeout,bodyOutputType:p.bodyOutputType,clickHandler:p.clickHandler,showCloseButton:p.showCloseButton,uid:p.toastId,onHideCallback:p.onHideCallback,directiveData:p.directiveData},l=p.toastId,r=p.toasterId}else this.toast={type:e,title:o,body:s,timeout:i,bodyOutputType:a,clickHandler:n,showCloseButton:c,uid:l,onHideCallback:u,directiveData:d};t.$emit("toaster-newToast",r,l)},this.clear=function(e,o){t.$emit("toaster-clearToasts",e,o)};for(var s in e["icon-classes"])this[s]=function(t){return function(e,o,s,i,a,n,r,c,l,u){angular.isString(e)?this.pop(t,e,o,s,i,a,n,r,c,l,u):this.pop(angular.extend(e,{type:t}))}}(s)}]).factory("toasterEventRegistry",["$rootScope",function(t){var e,o=null,s=null,i=[],a=[];return e={setup:function(){o||(o=t.$on("toaster-newToast",function(t,e,o){for(var s=0,a=i.length;a>s;s++)i[s](t,e,o)})),s||(s=t.$on("toaster-clearToasts",function(t,e,o){for(var s=0,i=a.length;i>s;s++)a[s](t,e,o)}))},subscribeToNewToastEvent:function(t){i.push(t)},subscribeToClearToastsEvent:function(t){a.push(t)},unsubscribeToNewToastEvent:function(t){var e=i.indexOf(t);e>=0&&i.splice(e,1),0===i.length&&(o(),o=null)},unsubscribeToClearToastsEvent:function(t){var e=a.indexOf(t);e>=0&&a.splice(e,1),0===a.length&&(s(),s=null)}},{setup:e.setup,subscribeToNewToastEvent:e.subscribeToNewToastEvent,subscribeToClearToastsEvent:e.subscribeToClearToastsEvent,unsubscribeToNewToastEvent:e.unsubscribeToNewToastEvent,unsubscribeToClearToastsEvent:e.unsubscribeToClearToastsEvent}}]).directive("directiveTemplate",["$compile","$injector",function(t,e){return{restrict:"A",scope:{directiveName:"@directiveName",directiveData:"@directiveData"},replace:!0,link:function(o,s,i){o.$watch("directiveName",function(a){if(angular.isUndefined(a)||a.length<=0)throw new Error("A valid directive name must be provided via the toast body argument when using bodyOutputType: directive");if(!e.has(i.$normalize(a)+"Directive"))throw new Error(a+" could not be found.");o.directiveData&&(o.directiveData=angular.fromJson(o.directiveData));var r=t("<div "+a+"></div>")(o);s.append(r)})}}}]).directive("toasterContainer",["$parse","$rootScope","$interval","$sce","toasterConfig","toaster","toasterEventRegistry",function(t,e,o,s,i,a,n){return{replace:!0,restrict:"EA",scope:!0,link:function(e,r,c){function l(t,s){t.timeoutPromise=o(function(){e.removeToast(t.id)},s,1)}function u(o,i){if(o.type=m["icon-classes"][o.type],o.type||(o.type=m["icon-class"]),m["prevent-duplicates"]===!0)if(v(i)){if(e.toasters.length>0&&e.toasters[e.toasters.length-1].body===o.body)return}else{var a,n;for(a=0,n=e.toasters.length;n>a;a++)e.toasters[a].uid===i&&(d(a),a--,n=e.toasters.length)}o.id=++f,v(i)||(o.uid=i);var r=m["close-button"];if("boolean"==typeof o.showCloseButton);else if("boolean"==typeof r)o.showCloseButton=r;else if("object"==typeof r){var c=r[o.type];void 0!==c&&null!==c&&(o.showCloseButton=c)}else o.showCloseButton=!1;switch(o.bodyOutputType=o.bodyOutputType||m["body-output-type"],o.bodyOutputType){case"trustedHtml":o.html=s.trustAsHtml(o.body);break;case"template":o.bodyTemplate=o.body||m["body-template"];break;case"templateWithData":var l=t(o.body||m["body-template"]),u=l(e);o.bodyTemplate=u.template,o.data=u.data;break;case"directive":o.html=o.body}e.configureTimer(o),m["newest-on-top"]===!0?(e.toasters.unshift(o),m.limit>0&&e.toasters.length>m.limit&&e.toasters.pop()):(e.toasters.push(o),m.limit>0&&e.toasters.length>m.limit&&e.toasters.shift())}function d(t){var s=e.toasters[t];s&&(s.timeoutPromise&&o.cancel(s.timeoutPromise),e.toasters.splice(t,1),angular.isFunction(s.onHideCallback)&&s.onHideCallback())}function p(t){for(var o=e.toasters.length-1;o>=0;o--)v(t)?d(o):e.toasters[o].uid==t&&d(o)}function v(t){return angular.isUndefined(t)||null===t}var m,f=0;m=angular.extend({},i,e.$eval(c.toasterOptions)),e.config={toasterId:m["toaster-id"],position:m["position-class"],title:m["title-class"],message:m["message-class"],tap:m["tap-to-dismiss"],closeButton:m["close-button"],animation:m["animation-class"],mouseoverTimer:m["mouseover-timer-stop"]},e.$on("$destroy",function(){n.unsubscribeToNewToastEvent(e._onNewToast),n.unsubscribeToClearToastsEvent(e._onClearToasts)}),e.configureTimer=function(t){var e=angular.isNumber(t.timeout)?t.timeout:m["time-out"];"object"==typeof e&&(e=e[t.type]),e>0&&l(t,e)},e.removeToast=function(t){var o,s;for(o=0,s=e.toasters.length;s>o;o++)if(e.toasters[o].id===t){d(o);break}},e.toasters=[],e._onNewToast=function(t,o,s){(v(e.config.toasterId)&&v(o)||!v(e.config.toasterId)&&!v(o)&&e.config.toasterId==o)&&u(a.toast,s)},e._onClearToasts=function(t,o,s){("*"==o||v(e.config.toasterId)&&v(o)||!v(e.config.toasterId)&&!v(o)&&e.config.toasterId==o)&&p(s)},n.setup(),n.subscribeToNewToastEvent(e._onNewToast),n.subscribeToClearToastsEvent(e._onClearToasts)},controller:["$scope","$element","$attrs",function(t){t.stopTimer=function(e){t.config.mouseoverTimer===!0&&e.timeoutPromise&&(o.cancel(e.timeoutPromise),e.timeoutPromise=null)},t.restartTimer=function(e){t.config.mouseoverTimer===!0?e.timeoutPromise||t.configureTimer(e):null===e.timeoutPromise&&t.removeToast(e.id)},t.click=function(e,o){if(t.config.tap===!0||e.showCloseButton===!0&&o===!0){var s=!0;e.clickHandler&&(angular.isFunction(e.clickHandler)?s=e.clickHandler(e,o):angular.isFunction(t.$parent.$eval(e.clickHandler))?s=t.$parent.$eval(e.clickHandler)(e,o):console.log("TOAST-NOTE: Your click handler is not inside a parent scope of toaster-container.")),s&&t.removeToast(e.id)}}}],template:'<div id="toast-container" ng-class="[config.position, config.animation]"><div ng-repeat="toaster in toasters" class="toast" ng-class="toaster.type" ng-click="click(toaster)" ng-mouseover="stopTimer(toaster)" ng-mouseout="restartTimer(toaster)"><button type="button" class="toast-close-button" ng-show="toaster.showCloseButton" ng-click="click(toaster, true)">&times;</button><div ng-class="config.title">{{toaster.title}}</div><div ng-class="config.message" ng-switch on="toaster.bodyOutputType"><div ng-switch-when="trustedHtml" ng-bind-html="toaster.html"></div><div ng-switch-when="template"><div ng-include="toaster.bodyTemplate"></div></div><div ng-switch-when="templateWithData"><div ng-include="toaster.bodyTemplate"></div></div><div ng-switch-when="directive"><div directive-template directive-name="{{toaster.html}}" directive-data="{{toaster.directiveData}}"></div></div><div ng-switch-default >{{toaster.body}}</div></div></div></div>'}}])}(window,document),function(root,factory){if("function"==typeof define&&define.amd)define(["moment","jquery","exports"],function(momentjs,$,exports){root.daterangepicker=factory(root,exports,momentjs,$)});else if("undefined"!=typeof exports){var momentjs=require("moment"),jQuery="undefined"!=typeof window?window.jQuery:void 0;if(!jQuery)try{jQuery=require("jquery"),jQuery.fn||(jQuery.fn={})}catch(err){if(!jQuery)throw new Error("jQuery dependency not found")}factory(root,exports,momentjs,jQuery)}else root.daterangepicker=factory(root,{},root.moment||moment,root.jQuery||root.Zepto||root.ender||root.$)}(this||{},function(root,daterangepicker,moment,$){var DateRangePicker=function(element,options,cb){if(this.parentEl="body",this.element=$(element),this.startDate=moment().startOf("day"),this.endDate=moment().endOf("day"),this.minDate=!1,this.maxDate=!1,this.dateLimit=!1,this.autoApply=!1,this.singleDatePicker=!1,this.showDropdowns=!1,this.showWeekNumbers=!1,this.timePicker=!1,this.timePicker24Hour=!1,this.timePickerIncrement=1,this.timePickerSeconds=!1,this.linkedCalendars=!0,this.autoUpdateInput=!0,this.ranges={},this.opens="right",this.element.hasClass("pull-right")&&(this.opens="left"),this.drops="down",this.element.hasClass("dropup")&&(this.drops="up"),this.buttonClasses="btn btn-sm",this.applyClass="btn-success",this.cancelClass="btn-default",this.locale={format:"MM/DD/YYYY",separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:moment.weekdaysMin(),monthNames:moment.monthsShort(),firstDay:moment.localeData().firstDayOfWeek()},this.callback=function(){},this.isShowing=!1,this.leftCalendar={},this.rightCalendar={},"object"==typeof options&&null!==options||(options={}),options=$.extend(this.element.data(),options),"string"!=typeof options.template&&(options.template='<div class="daterangepicker dropdown-menu"><div class="calendar left"><div class="daterangepicker_input"><input class="input-mini" type="text" name="daterangepicker_start" value="" /><i class="fa fa-calendar glyphicon glyphicon-calendar"></i><div class="calendar-time"><div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div></div><div class="calendar right"><div class="daterangepicker_input"><input class="input-mini" type="text" name="daterangepicker_end" value="" /><i class="fa fa-calendar glyphicon glyphicon-calendar"></i><div class="calendar-time"><div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div></div><div class="ranges"><div class="range_inputs"><button class="applyBtn" disabled="disabled" type="button"></button> <button class="cancelBtn" type="button"></button></div></div></div>'),this.parentEl=$(options.parentEl&&$(options.parentEl).length?options.parentEl:this.parentEl),this.container=$(options.template).appendTo(this.parentEl),"object"==typeof options.locale&&("string"==typeof options.locale.format&&(this.locale.format=options.locale.format),"string"==typeof options.locale.separator&&(this.locale.separator=options.locale.separator),"object"==typeof options.locale.daysOfWeek&&(this.locale.daysOfWeek=options.locale.daysOfWeek.slice()),"object"==typeof options.locale.monthNames&&(this.locale.monthNames=options.locale.monthNames.slice()),"number"==typeof options.locale.firstDay&&(this.locale.firstDay=options.locale.firstDay),"string"==typeof options.locale.applyLabel&&(this.locale.applyLabel=options.locale.applyLabel),"string"==typeof options.locale.cancelLabel&&(this.locale.cancelLabel=options.locale.cancelLabel),"string"==typeof options.locale.weekLabel&&(this.locale.weekLabel=options.locale.weekLabel),"string"==typeof options.locale.customRangeLabel&&(this.locale.customRangeLabel=options.locale.customRangeLabel)),"string"==typeof options.startDate&&(this.startDate=moment(options.startDate,this.locale.format)),"string"==typeof options.endDate&&(this.endDate=moment(options.endDate,this.locale.format)),"string"==typeof options.minDate&&(this.minDate=moment(options.minDate,this.locale.format)),"string"==typeof options.maxDate&&(this.maxDate=moment(options.maxDate,this.locale.format)),"object"==typeof options.startDate&&(this.startDate=moment(options.startDate)),"object"==typeof options.endDate&&(this.endDate=moment(options.endDate)),"object"==typeof options.minDate&&(this.minDate=moment(options.minDate)),"object"==typeof options.maxDate&&(this.maxDate=moment(options.maxDate)),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone()),"string"==typeof options.applyClass&&(this.applyClass=options.applyClass),"string"==typeof options.cancelClass&&(this.cancelClass=options.cancelClass),"object"==typeof options.dateLimit&&(this.dateLimit=options.dateLimit),"string"==typeof options.opens&&(this.opens=options.opens),"string"==typeof options.drops&&(this.drops=options.drops),"boolean"==typeof options.showWeekNumbers&&(this.showWeekNumbers=options.showWeekNumbers),"string"==typeof options.buttonClasses&&(this.buttonClasses=options.buttonClasses),"object"==typeof options.buttonClasses&&(this.buttonClasses=options.buttonClasses.join(" ")),"boolean"==typeof options.showDropdowns&&(this.showDropdowns=options.showDropdowns),"boolean"==typeof options.singleDatePicker&&(this.singleDatePicker=options.singleDatePicker,this.singleDatePicker&&(this.endDate=this.startDate.clone())),"boolean"==typeof options.timePicker&&(this.timePicker=options.timePicker),"boolean"==typeof options.timePickerSeconds&&(this.timePickerSeconds=options.timePickerSeconds),"number"==typeof options.timePickerIncrement&&(this.timePickerIncrement=options.timePickerIncrement),"boolean"==typeof options.timePicker24Hour&&(this.timePicker24Hour=options.timePicker24Hour),"boolean"==typeof options.autoApply&&(this.autoApply=options.autoApply),"boolean"==typeof options.autoUpdateInput&&(this.autoUpdateInput=options.autoUpdateInput),"boolean"==typeof options.linkedCalendars&&(this.linkedCalendars=options.linkedCalendars),"function"==typeof options.isInvalidDate&&(this.isInvalidDate=options.isInvalidDate),0!=this.locale.firstDay)for(var iterator=this.locale.firstDay;iterator>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),iterator--;var start,end,range;if(void 0===options.startDate&&void 0===options.endDate&&$(this.element).is("input[type=text]")){var val=$(this.element).val(),split=val.split(this.locale.separator);start=end=null,2==split.length?(start=moment(split[0],this.locale.format),end=moment(split[1],this.locale.format)):this.singleDatePicker&&""!==val&&(start=moment(val,this.locale.format),end=moment(val,this.locale.format)),null!==start&&null!==end&&(this.setStartDate(start),this.setEndDate(end))}if("object"==typeof options.ranges){for(range in options.ranges){start="string"==typeof options.ranges[range][0]?moment(options.ranges[range][0],this.locale.format):moment(options.ranges[range][0]),end="string"==typeof options.ranges[range][1]?moment(options.ranges[range][1],this.locale.format):moment(options.ranges[range][1]),this.minDate&&start.isBefore(this.minDate)&&(start=this.minDate.clone());var maxDate=this.maxDate;if(this.dateLimit&&start.clone().add(this.dateLimit).isAfter(maxDate)&&(maxDate=start.clone().add(this.dateLimit)),maxDate&&end.isAfter(maxDate)&&(end=maxDate.clone()),!(this.minDate&&end.isBefore(this.minDate)||maxDate&&start.isAfter(maxDate))){var elem=document.createElement("textarea");elem.innerHTML=range;var rangeHtml=elem.value;this.ranges[rangeHtml]=[start,end]}}var list="<ul>";for(range in this.ranges)list+="<li>"+range+"</li>";list+="<li>"+this.locale.customRangeLabel+"</li>",list+="</ul>",this.container.find(".ranges").prepend(list)}if("function"==typeof cb&&(this.callback=cb),this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.endOf("day"),this.container.find(".calendar-time").hide()),this.timePicker&&this.autoApply&&(this.autoApply=!1),this.autoApply&&"object"!=typeof options.ranges?this.container.find(".ranges").hide():this.autoApply&&this.container.find(".applyBtn, .cancelBtn").addClass("hide"),this.singleDatePicker&&(this.container.addClass("single"),this.container.find(".calendar.left").addClass("single"),this.container.find(".calendar.left").show(),this.container.find(".calendar.right").hide(),this.container.find(".daterangepicker_input input, .daterangepicker_input i").hide(),this.timePicker||this.container.find(".ranges").hide()),void 0!==options.ranges||this.singleDatePicker||this.container.addClass("show-calendar"),this.container.addClass("opens"+this.opens),void 0!==options.ranges&&"right"==this.opens){var ranges=this.container.find(".ranges"),html=ranges.clone();ranges.remove(),this.container.find(".calendar.left").parent().prepend(html)}this.container.find(".applyBtn, .cancelBtn").addClass(this.buttonClasses),this.applyClass.length&&this.container.find(".applyBtn").addClass(this.applyClass),this.cancelClass.length&&this.container.find(".cancelBtn").addClass(this.cancelClass),this.container.find(".applyBtn").html(this.locale.applyLabel),this.container.find(".cancelBtn").html(this.locale.cancelLabel),this.container.find(".calendar").on("click.daterangepicker",".prev",$.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",$.proxy(this.clickNext,this)).on("click.daterangepicker","td.available",$.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",$.proxy(this.hoverDate,this)).on("mouseleave.daterangepicker","td.available",$.proxy(this.updateFormInputs,this)).on("change.daterangepicker","select.yearselect",$.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.monthselect",$.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.secondselect,select.ampmselect",$.proxy(this.timeChanged,this)).on("click.daterangepicker",".daterangepicker_input input",$.proxy(this.showCalendars,this)).on("change.daterangepicker",".daterangepicker_input input",$.proxy(this.formInputsChanged,this)),this.container.find(".ranges").on("click.daterangepicker","button.applyBtn",$.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",$.proxy(this.clickCancel,this)).on("click.daterangepicker","li",$.proxy(this.clickRange,this)).on("mouseenter.daterangepicker","li",$.proxy(this.hoverRange,this)).on("mouseleave.daterangepicker","li",$.proxy(this.updateFormInputs,this)),this.element.is("input")?this.element.on({"click.daterangepicker":$.proxy(this.show,this),"focus.daterangepicker":$.proxy(this.show,this),"keyup.daterangepicker":$.proxy(this.elementChanged,this),"keydown.daterangepicker":$.proxy(this.keydown,this)}):this.element.on("click.daterangepicker",$.proxy(this.toggle,this)),this.element.is("input")&&!this.singleDatePicker&&this.autoUpdateInput?(this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.element.trigger("change")):this.element.is("input")&&this.autoUpdateInput&&(this.element.val(this.startDate.format(this.locale.format)),this.element.trigger("change"))};return DateRangePicker.prototype={constructor:DateRangePicker,setStartDate:function(startDate){"string"==typeof startDate&&(this.startDate=moment(startDate,this.locale.format)),"object"==typeof startDate&&(this.startDate=moment(startDate)),this.timePicker||(this.startDate=this.startDate.startOf("day")),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate),this.maxDate&&this.startDate.isAfter(this.maxDate)&&(this.startDate=this.maxDate),this.isShowing||this.updateElement(),this.updateMonthsInView()},setEndDate:function(endDate){"string"==typeof endDate&&(this.endDate=moment(endDate,this.locale.format)),"object"==typeof endDate&&(this.endDate=moment(endDate)),this.timePicker||(this.endDate=this.endDate.endOf("day")),
this.timePicker&&this.timePickerIncrement&&this.endDate.minute(Math.round(this.endDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.endDate.isBefore(this.startDate)&&(this.endDate=this.startDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate),this.dateLimit&&this.startDate.clone().add(this.dateLimit).isBefore(this.endDate)&&(this.endDate=this.startDate.clone().add(this.dateLimit)),this.isShowing||this.updateElement(),this.updateMonthsInView()},isInvalidDate:function(){return!1},updateView:function(){this.timePicker&&(this.renderTimePicker("left"),this.renderTimePicker("right"),this.endDate?this.container.find(".right .calendar-time select").removeAttr("disabled").removeClass("disabled"):this.container.find(".right .calendar-time select").attr("disabled","disabled").addClass("disabled")),this.endDate?(this.container.find('input[name="daterangepicker_end"]').removeClass("active"),this.container.find('input[name="daterangepicker_start"]').addClass("active")):(this.container.find('input[name="daterangepicker_end"]').addClass("active"),this.container.find('input[name="daterangepicker_start"]').removeClass("active")),this.updateMonthsInView(),this.updateCalendars(),this.updateFormInputs()},updateMonthsInView:function(){if(this.endDate){if(!this.singleDatePicker&&this.leftCalendar.month&&this.rightCalendar.month&&(this.startDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.startDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM"))&&(this.endDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.endDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM")))return;this.leftCalendar.month=this.startDate.clone().date(2),this.linkedCalendars||this.endDate.month()==this.startDate.month()&&this.endDate.year()==this.startDate.year()?this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"):this.rightCalendar.month=this.endDate.clone().date(2)}else this.leftCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&this.rightCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&(this.leftCalendar.month=this.startDate.clone().date(2),this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"))},updateCalendars:function(){if(this.timePicker){var hour,minute,second;if(this.endDate){if(hour=parseInt(this.container.find(".left .hourselect").val(),10),minute=parseInt(this.container.find(".left .minuteselect").val(),10),second=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0,!this.timePicker24Hour){var ampm=this.container.find(".left .ampmselect").val();"PM"===ampm&&hour<12&&(hour+=12),"AM"===ampm&&12===hour&&(hour=0)}}else if(hour=parseInt(this.container.find(".right .hourselect").val(),10),minute=parseInt(this.container.find(".right .minuteselect").val(),10),second=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0,!this.timePicker24Hour){var ampm=this.container.find(".right .ampmselect").val();"PM"===ampm&&hour<12&&(hour+=12),"AM"===ampm&&12===hour&&(hour=0)}this.leftCalendar.month.hour(hour).minute(minute).second(second),this.rightCalendar.month.hour(hour).minute(minute).second(second)}if(this.renderCalendar("left"),this.renderCalendar("right"),this.container.find(".ranges li").removeClass("active"),null!=this.endDate){var customRange=!0,i=0;for(var range in this.ranges){if(this.timePicker){if(this.startDate.isSame(this.ranges[range][0])&&this.endDate.isSame(this.ranges[range][1])){customRange=!1,this.chosenLabel=this.container.find(".ranges li:eq("+i+")").addClass("active").html();break}}else if(this.startDate.format("YYYY-MM-DD")==this.ranges[range][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[range][1].format("YYYY-MM-DD")){customRange=!1,this.chosenLabel=this.container.find(".ranges li:eq("+i+")").addClass("active").html();break}i++}customRange&&(this.chosenLabel=this.container.find(".ranges li:last").addClass("active").html(),this.showCalendars())}},renderCalendar:function(side){var calendar="left"==side?this.leftCalendar:this.rightCalendar,month=calendar.month.month(),year=calendar.month.year(),hour=calendar.month.hour(),minute=calendar.month.minute(),second=calendar.month.second(),daysInMonth=moment([year,month]).daysInMonth(),firstDay=moment([year,month,1]),lastDay=moment([year,month,daysInMonth]),lastMonth=moment(firstDay).subtract(1,"month").month(),lastYear=moment(firstDay).subtract(1,"month").year(),daysInLastMonth=moment([lastYear,lastMonth]).daysInMonth(),dayOfWeek=firstDay.day(),calendar=[];calendar.firstDay=firstDay,calendar.lastDay=lastDay;for(var i=0;i<6;i++)calendar[i]=[];var startDay=daysInLastMonth-dayOfWeek+this.locale.firstDay+1;startDay>daysInLastMonth&&(startDay-=7),dayOfWeek==this.locale.firstDay&&(startDay=daysInLastMonth-6);for(var col,row,curDate=moment([lastYear,lastMonth,startDay,12,minute,second]),i=0,col=0,row=0;i<42;i++,col++,curDate=moment(curDate).add(24,"hour"))i>0&&col%7==0&&(col=0,row++),calendar[row][col]=curDate.clone().hour(hour).minute(minute).second(second),curDate.hour(12),this.minDate&&calendar[row][col].format("YYYY-MM-DD")==this.minDate.format("YYYY-MM-DD")&&calendar[row][col].isBefore(this.minDate)&&"left"==side&&(calendar[row][col]=this.minDate.clone()),this.maxDate&&calendar[row][col].format("YYYY-MM-DD")==this.maxDate.format("YYYY-MM-DD")&&calendar[row][col].isAfter(this.maxDate)&&"right"==side&&(calendar[row][col]=this.maxDate.clone());"left"==side?this.leftCalendar.calendar=calendar:this.rightCalendar.calendar=calendar;var minDate="left"==side?this.minDate:this.startDate,maxDate=this.maxDate,html=("left"==side?this.startDate:this.endDate,'<table class="table-condensed">');html+="<thead>",html+="<tr>",this.showWeekNumbers&&(html+="<th></th>"),html+=minDate&&!minDate.isBefore(calendar.firstDay)||this.linkedCalendars&&"left"!=side?"<th></th>":'<th class="prev available"><i class="fa fa-chevron-left glyphicon glyphicon-chevron-left"></i></th>';var dateHtml=this.locale.monthNames[calendar[1][1].month()]+calendar[1][1].format(" YYYY");if(this.showDropdowns){for(var currentMonth=calendar[1][1].month(),currentYear=calendar[1][1].year(),maxYear=maxDate&&maxDate.year()||currentYear+5,minYear=minDate&&minDate.year()||currentYear-50,inMinYear=currentYear==minYear,inMaxYear=currentYear==maxYear,monthHtml='<select class="monthselect">',m=0;m<12;m++)monthHtml+=(!inMinYear||m>=minDate.month())&&(!inMaxYear||m<=maxDate.month())?"<option value='"+m+"'"+(m===currentMonth?" selected='selected'":"")+">"+this.locale.monthNames[m]+"</option>":"<option value='"+m+"'"+(m===currentMonth?" selected='selected'":"")+" disabled='disabled'>"+this.locale.monthNames[m]+"</option>";monthHtml+="</select>";for(var yearHtml='<select class="yearselect">',y=minYear;y<=maxYear;y++)yearHtml+='<option value="'+y+'"'+(y===currentYear?' selected="selected"':"")+">"+y+"</option>";yearHtml+="</select>",dateHtml=monthHtml+yearHtml}if(html+='<th colspan="5" class="month">'+dateHtml+"</th>",html+=maxDate&&!maxDate.isAfter(calendar.lastDay)||this.linkedCalendars&&"right"!=side&&!this.singleDatePicker?"<th></th>":'<th class="next available"><i class="fa fa-chevron-right glyphicon glyphicon-chevron-right"></i></th>',html+="</tr>",html+="<tr>",this.showWeekNumbers&&(html+='<th class="week">'+this.locale.weekLabel+"</th>"),$.each(this.locale.daysOfWeek,function(index,dayOfWeek){html+="<th>"+dayOfWeek+"</th>"}),html+="</tr>",html+="</thead>",html+="<tbody>",null==this.endDate&&this.dateLimit){var maxLimit=this.startDate.clone().add(this.dateLimit).endOf("day");maxDate&&!maxLimit.isBefore(maxDate)||(maxDate=maxLimit)}for(var row=0;row<6;row++){html+="<tr>",this.showWeekNumbers&&(html+='<td class="week">'+calendar[row][0].week()+"</td>");for(var col=0;col<7;col++){var classes=[];calendar[row][col].isSame(new Date,"day")&&classes.push("today"),calendar[row][col].isoWeekday()>5&&classes.push("weekend"),calendar[row][col].month()!=calendar[1][1].month()&&classes.push("off"),this.minDate&&calendar[row][col].isBefore(this.minDate,"day")&&classes.push("off","disabled"),maxDate&&calendar[row][col].isAfter(maxDate,"day")&&classes.push("off","disabled"),this.isInvalidDate(calendar[row][col])&&classes.push("off","disabled"),calendar[row][col].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&classes.push("active","start-date"),null!=this.endDate&&calendar[row][col].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&classes.push("active","end-date"),null!=this.endDate&&calendar[row][col]>this.startDate&&calendar[row][col]<this.endDate&&classes.push("in-range");for(var cname="",disabled=!1,i=0;i<classes.length;i++)cname+=classes[i]+" ","disabled"==classes[i]&&(disabled=!0);disabled||(cname+="available"),html+='<td class="'+cname.replace(/^\s+|\s+$/g,"")+'" data-title="r'+row+"c"+col+'">'+calendar[row][col].date()+"</td>"}html+="</tr>"}html+="</tbody>",html+="</table>",this.container.find(".calendar."+side+" .calendar-table").html(html)},renderTimePicker:function(side){var html,selected,minDate,maxDate=this.maxDate;if(!this.dateLimit||this.maxDate&&!this.startDate.clone().add(this.dateLimit).isAfter(this.maxDate)||(maxDate=this.startDate.clone().add(this.dateLimit)),"left"==side)selected=this.startDate.clone(),minDate=this.minDate;else if("right"==side){selected=this.endDate?this.endDate.clone():this.startDate.clone(),minDate=this.startDate;var timeSelector=this.container.find(".calendar.right .calendar-time div");""!=timeSelector.html()&&(selected.hour(timeSelector.find(".hourselect option:selected").val()||selected.hour()),selected.minute(timeSelector.find(".minuteselect option:selected").val()||selected.minute()),selected.second(timeSelector.find(".secondselect option:selected").val()||selected.second()),selected.isAfter(maxDate)&&(selected=maxDate.clone()))}html='<select class="hourselect">';for(var start=this.timePicker24Hour?0:1,end=this.timePicker24Hour?23:12,i=start;i<=end;i++){var i_in_24=i;this.timePicker24Hour||(i_in_24=selected.hour()>=12?12==i?12:i+12:12==i?0:i);var time=selected.clone().hour(i_in_24),disabled=!1;minDate&&time.minute(59).isBefore(minDate)&&(disabled=!0),maxDate&&time.minute(0).isAfter(maxDate)&&(disabled=!0),html+=i_in_24!=selected.hour()||disabled?disabled?'<option value="'+i+'" disabled="disabled" class="disabled">'+i+"</option>":'<option value="'+i+'">'+i+"</option>":'<option value="'+i+'" selected="selected">'+i+"</option>"}html+="</select> ",html+=': <select class="minuteselect">';for(var i=0;i<60;i+=this.timePickerIncrement){var padded=i<10?"0"+i:i,time=selected.clone().minute(i),disabled=!1;minDate&&time.second(59).isBefore(minDate)&&(disabled=!0),maxDate&&time.second(0).isAfter(maxDate)&&(disabled=!0),html+=selected.minute()!=i||disabled?disabled?'<option value="'+i+'" disabled="disabled" class="disabled">'+padded+"</option>":'<option value="'+i+'">'+padded+"</option>":'<option value="'+i+'" selected="selected">'+padded+"</option>"}if(html+="</select> ",this.timePickerSeconds){html+=': <select class="secondselect">';for(var i=0;i<60;i++){var padded=i<10?"0"+i:i,time=selected.clone().second(i),disabled=!1;minDate&&time.isBefore(minDate)&&(disabled=!0),maxDate&&time.isAfter(maxDate)&&(disabled=!0),html+=selected.second()!=i||disabled?disabled?'<option value="'+i+'" disabled="disabled" class="disabled">'+padded+"</option>":'<option value="'+i+'">'+padded+"</option>":'<option value="'+i+'" selected="selected">'+padded+"</option>"}html+="</select> "}if(!this.timePicker24Hour){html+='<select class="ampmselect">';var am_html="",pm_html="";minDate&&selected.clone().hour(12).minute(0).second(0).isBefore(minDate)&&(am_html=' disabled="disabled" class="disabled"'),maxDate&&selected.clone().hour(0).minute(0).second(0).isAfter(maxDate)&&(pm_html=' disabled="disabled" class="disabled"'),html+=selected.hour()>=12?'<option value="AM"'+am_html+'>AM</option><option value="PM" selected="selected"'+pm_html+">PM</option>":'<option value="AM" selected="selected"'+am_html+'>AM</option><option value="PM"'+pm_html+">PM</option>",html+="</select>"}this.container.find(".calendar."+side+" .calendar-time div").html(html)},updateFormInputs:function(){this.container.find("input[name=daterangepicker_start]").is(":focus")||this.container.find("input[name=daterangepicker_end]").is(":focus")||(this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.locale.format)),this.endDate&&this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.locale.format)),this.singleDatePicker||this.endDate&&(this.startDate.isBefore(this.endDate)||this.startDate.isSame(this.endDate))?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled"))},move:function(){var containerTop,parentOffset={top:0,left:0},parentRightEdge=$(window).width();this.parentEl.is("body")||(parentOffset={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()},parentRightEdge=this.parentEl[0].clientWidth+this.parentEl.offset().left),containerTop="up"==this.drops?this.element.offset().top-this.container.outerHeight()-parentOffset.top:this.element.offset().top+this.element.outerHeight()-parentOffset.top,this.container["up"==this.drops?"addClass":"removeClass"]("dropup"),"left"==this.opens?(this.container.css({top:containerTop,right:parentRightEdge-this.element.offset().left-this.element.outerWidth(),left:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):"center"==this.opens?(this.container.css({top:containerTop,left:this.element.offset().left-parentOffset.left+this.element.outerWidth()/2-this.container.outerWidth()/2,right:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):(this.container.css({top:containerTop,left:this.element.offset().left-parentOffset.left,right:"auto"}),this.container.offset().left+this.container.outerWidth()>$(window).width()&&this.container.css({left:"auto",right:0}))},show:function(e){this.isShowing||(this._outsideClickProxy=$.proxy(function(e){this.outsideClick(e)},this),$(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("touchend.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy),$(window).on("resize.daterangepicker",$.proxy(function(e){this.move(e)},this)),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.updateView(),this.container.show(),this.move(),this.element.trigger("show.daterangepicker",this),this.isShowing=!0)},hide:function(e){this.isShowing&&(this.endDate||(this.startDate=this.oldStartDate.clone(),this.endDate=this.oldEndDate.clone()),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.callback(this.startDate,this.endDate,this.chosenLabel),this.updateElement(),$(document).off(".daterangepicker"),$(window).off(".daterangepicker"),this.container.hide(),this.element.trigger("hide.daterangepicker",this),this.isShowing=!1)},toggle:function(e){this.isShowing?this.hide():this.show()},outsideClick:function(e){var target=$(e.target);"focusin"==e.type||target.closest(this.element).length||target.closest(this.container).length||target.closest(".calendar-table").length||this.hide()},showCalendars:function(){this.container.addClass("show-calendar"),this.move(),this.element.trigger("showCalendar.daterangepicker",this)},hideCalendars:function(){this.container.removeClass("show-calendar"),this.element.trigger("hideCalendar.daterangepicker",this)},hoverRange:function(e){if(!this.container.find("input[name=daterangepicker_start]").is(":focus")&&!this.container.find("input[name=daterangepicker_end]").is(":focus")){var label=e.target.innerHTML;if(label==this.locale.customRangeLabel)this.updateView();else{var dates=this.ranges[label];this.container.find("input[name=daterangepicker_start]").val(dates[0].format(this.locale.format)),this.container.find("input[name=daterangepicker_end]").val(dates[1].format(this.locale.format))}}},clickRange:function(e){var label=e.target.innerHTML;if(this.chosenLabel=label,label==this.locale.customRangeLabel)this.showCalendars();else{var dates=this.ranges[label];this.startDate=dates[0],this.endDate=dates[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.hideCalendars(),this.clickApply()}},clickPrev:function(e){$(e.target).parents(".calendar").hasClass("left")?(this.leftCalendar.month.subtract(1,"month"),this.linkedCalendars&&this.rightCalendar.month.subtract(1,"month")):this.rightCalendar.month.subtract(1,"month"),this.updateCalendars()},clickNext:function(e){$(e.target).parents(".calendar").hasClass("left")?this.leftCalendar.month.add(1,"month"):(this.rightCalendar.month.add(1,"month"),this.linkedCalendars&&this.leftCalendar.month.add(1,"month")),this.updateCalendars()},hoverDate:function(e){if(!this.container.find("input[name=daterangepicker_start]").is(":focus")&&!this.container.find("input[name=daterangepicker_end]").is(":focus")&&$(e.target).hasClass("available")){var title=$(e.target).attr("data-title"),row=title.substr(1,1),col=title.substr(3,1),cal=$(e.target).parents(".calendar"),date=cal.hasClass("left")?this.leftCalendar.calendar[row][col]:this.rightCalendar.calendar[row][col];this.endDate?this.container.find("input[name=daterangepicker_start]").val(date.format(this.locale.format)):this.container.find("input[name=daterangepicker_end]").val(date.format(this.locale.format));var leftCalendar=this.leftCalendar,rightCalendar=this.rightCalendar,startDate=this.startDate;this.endDate||this.container.find(".calendar td").each(function(index,el){if(!$(el).hasClass("week")){var title=$(el).attr("data-title"),row=title.substr(1,1),col=title.substr(3,1),cal=$(el).parents(".calendar"),dt=cal.hasClass("left")?leftCalendar.calendar[row][col]:rightCalendar.calendar[row][col];dt.isAfter(startDate)&&dt.isBefore(date)?$(el).addClass("in-range"):$(el).removeClass("in-range")}})}},clickDate:function(e){if($(e.target).hasClass("available")){var title=$(e.target).attr("data-title"),row=title.substr(1,1),col=title.substr(3,1),cal=$(e.target).parents(".calendar"),date=cal.hasClass("left")?this.leftCalendar.calendar[row][col]:this.rightCalendar.calendar[row][col];if(this.endDate||date.isBefore(this.startDate)){if(this.timePicker){var hour=parseInt(this.container.find(".left .hourselect").val(),10);if(!this.timePicker24Hour){var ampm=cal.find(".ampmselect").val();"PM"===ampm&&hour<12&&(hour+=12),"AM"===ampm&&12===hour&&(hour=0)}var minute=parseInt(this.container.find(".left .minuteselect").val(),10),second=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0;date=date.clone().hour(hour).minute(minute).second(second)}this.endDate=null,this.setStartDate(date.clone())}else{if(this.timePicker){var hour=parseInt(this.container.find(".right .hourselect").val(),10);if(!this.timePicker24Hour){var ampm=this.container.find(".right .ampmselect").val();"PM"===ampm&&hour<12&&(hour+=12),"AM"===ampm&&12===hour&&(hour=0)}var minute=parseInt(this.container.find(".right .minuteselect").val(),10),second=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0;date=date.clone().hour(hour).minute(minute).second(second)}this.setEndDate(date.clone()),this.autoApply&&this.clickApply()}this.singleDatePicker&&(this.setEndDate(this.startDate),this.timePicker||this.clickApply()),this.updateView()}},clickApply:function(e){this.hide(),this.element.trigger("apply.daterangepicker",this)},clickCancel:function(e){this.startDate=this.oldStartDate,this.endDate=this.oldEndDate,this.hide(),this.element.trigger("cancel.daterangepicker",this)},monthOrYearChanged:function(e){var isLeft=$(e.target).closest(".calendar").hasClass("left"),leftOrRight=isLeft?"left":"right",cal=this.container.find(".calendar."+leftOrRight),month=parseInt(cal.find(".monthselect").val(),10),year=cal.find(".yearselect").val();isLeft||(year<this.startDate.year()||year==this.startDate.year()&&month<this.startDate.month())&&(month=this.startDate.month(),year=this.startDate.year()),this.minDate&&(year<this.minDate.year()||year==this.minDate.year()&&month<this.minDate.month())&&(month=this.minDate.month(),year=this.minDate.year()),this.maxDate&&(year>this.maxDate.year()||year==this.maxDate.year()&&month>this.maxDate.month())&&(month=this.maxDate.month(),year=this.maxDate.year()),isLeft?(this.leftCalendar.month.month(month).year(year),this.linkedCalendars&&(this.rightCalendar.month=this.leftCalendar.month.clone().add(1,"month"))):(this.rightCalendar.month.month(month).year(year),this.linkedCalendars&&(this.leftCalendar.month=this.rightCalendar.month.clone().subtract(1,"month"))),this.updateCalendars()},timeChanged:function(e){var cal=$(e.target).closest(".calendar"),isLeft=cal.hasClass("left"),hour=parseInt(cal.find(".hourselect").val(),10),minute=parseInt(cal.find(".minuteselect").val(),10),second=this.timePickerSeconds?parseInt(cal.find(".secondselect").val(),10):0;if(!this.timePicker24Hour){var ampm=cal.find(".ampmselect").val();"PM"===ampm&&hour<12&&(hour+=12),"AM"===ampm&&12===hour&&(hour=0)}if(isLeft){var start=this.startDate.clone();start.hour(hour),start.minute(minute),start.second(second),this.setStartDate(start),this.singleDatePicker?this.endDate=this.startDate.clone():this.endDate&&this.endDate.format("YYYY-MM-DD")==start.format("YYYY-MM-DD")&&this.endDate.isBefore(start)&&this.setEndDate(start.clone())}else if(this.endDate){var end=this.endDate.clone();end.hour(hour),end.minute(minute),end.second(second),this.setEndDate(end)}this.updateCalendars(),this.updateFormInputs(),this.renderTimePicker("left"),this.renderTimePicker("right")},formInputsChanged:function(e){var isRight=$(e.target).closest(".calendar").hasClass("right"),start=moment(this.container.find('input[name="daterangepicker_start"]').val(),this.locale.format),end=moment(this.container.find('input[name="daterangepicker_end"]').val(),this.locale.format);start.isValid()&&end.isValid()&&(isRight&&end.isBefore(start)&&(start=end.clone()),this.setStartDate(start),this.setEndDate(end),isRight?this.container.find('input[name="daterangepicker_start"]').val(this.startDate.format(this.locale.format)):this.container.find('input[name="daterangepicker_end"]').val(this.endDate.format(this.locale.format))),this.updateCalendars(),this.timePicker&&(this.renderTimePicker("left"),this.renderTimePicker("right"))},elementChanged:function(){if(this.element.is("input")&&this.element.val().length&&!(this.element.val().length<this.locale.format.length)){var dateString=this.element.val().split(this.locale.separator),start=null,end=null;2===dateString.length&&(start=moment(dateString[0],this.locale.format),end=moment(dateString[1],this.locale.format)),(this.singleDatePicker||null===start||null===end)&&(start=moment(this.element.val(),this.locale.format),end=start),start.isValid()&&end.isValid()&&(this.setStartDate(start),this.setEndDate(end),this.updateView())}},keydown:function(e){9!==e.keyCode&&13!==e.keyCode||this.hide()},updateElement:function(){this.element.is("input")&&!this.singleDatePicker&&this.autoUpdateInput?(this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.element.trigger("change")):this.element.is("input")&&this.autoUpdateInput&&(this.element.val(this.startDate.format(this.locale.format)),this.element.trigger("change"))},remove:function(){this.container.remove(),this.element.off(".daterangepicker"),this.element.removeData()}},$.fn.daterangepicker=function(options,callback){return this.each(function(){var el=$(this);el.data("daterangepicker")&&el.data("daterangepicker").remove(),el.data("daterangepicker",new DateRangePicker(el,options,callback))}),this},DateRangePicker}),function(){var picker;picker=angular.module("daterangepicker",[]),picker.constant("dateRangePickerConfig",{clearLabel:"Clear",locale:{separator:" - ",format:"YYYY-MM-DD"}}),picker.directive("dateRangePicker",["$compile","$timeout","$parse","dateRangePickerConfig",function($compile,$timeout,$parse,dateRangePickerConfig){return{require:"ngModel",restrict:"A",scope:{min:"=",max:"=",model:"=ngModel",opts:"=options",clearable:"="},link:function($scope,element,attrs,modelCtrl){var _clear,_init,_initBoundaryField,_mergeOpts,_picker,_setDatePoint,_setEndDate,_setStartDate,_validate,_validateMax,_validateMin,customOpts,el,opts;return _mergeOpts=function(){var extend,localeExtend;return localeExtend=angular.extend.apply(angular,Array.prototype.slice.call(arguments).map(function(opt){return null!=opt?opt.locale:void 0}).filter(function(opt){return!!opt})),extend=angular.extend.apply(angular,arguments),extend.locale=localeExtend,extend},el=$(element),customOpts=$scope.opts,opts=_mergeOpts({},dateRangePickerConfig,customOpts),_picker=null,_clear=function(){return _picker.setStartDate(),_picker.setEndDate()},_setDatePoint=function(setter){return function(newValue){if(_picker&&newValue)return setter(moment(newValue))}},_setStartDate=_setDatePoint(function(m){return _picker.endDate<m&&_picker.setEndDate(m),opts.startDate=m,_picker.setStartDate(m)}),_setEndDate=_setDatePoint(function(m){return _picker.startDate>m&&_picker.setStartDate(m),opts.endDate=m,_picker.setEndDate(m)}),_validate=function(validator){return function(boundary,actual){return!boundary||!actual||validator(moment(boundary),moment(actual))}},_validateMin=_validate(function(min,start){return min.isBefore(start)||min.isSame(start,"day")}),_validateMax=_validate(function(max,end){return max.isAfter(end)||max.isSame(end,"day")}),modelCtrl.$formatters.push(function(objValue){var f;return f=function(date){return moment.isMoment(date)?date.format(opts.locale.format):moment(date).format(opts.locale.format)},opts.singleDatePicker&&objValue?f(objValue):objValue.startDate?[f(objValue.startDate),f(objValue.endDate)].join(opts.locale.separator):""}),modelCtrl.$render=function(){return modelCtrl.$modelValue&&modelCtrl.$modelValue.startDate?(_setStartDate(modelCtrl.$modelValue.startDate),_setEndDate(modelCtrl.$modelValue.endDate)):_clear(),el.val(modelCtrl.$viewValue)},modelCtrl.$parsers.push(function(val){var f,objValue,x;return f=function(value){return moment(value,opts.locale.format)},objValue={startDate:null,endDate:null},angular.isString(val)&&val.length>0&&(opts.singleDatePicker?objValue=f(val):(x=val.split(opts.locale.separator).map(f),objValue.startDate=x[0],objValue.endDate=x[1])),objValue}),modelCtrl.$isEmpty=function(val){return!(angular.isString(val)&&val.length>0)},_init=function(){var eventType,results;el.daterangepicker(angular.extend(opts,{autoUpdateInput:!1}),function(start,end){return $scope.$apply(function(){return $scope.model=opts.singleDatePicker?start:{startDate:start,endDate:end}})}),_picker=el.data("daterangepicker"),results=[];for(eventType in opts.eventHandlers)results.push(el.on(eventType,function(e){var eventName;return eventName=e.type+"."+e.namespace,$scope.$evalAsync(opts.eventHandlers[eventName])}));return results},_init(),$scope.$watch("model.startDate",function(n){return _setStartDate(n)}),$scope.$watch("model.endDate",function(n){return _setEndDate(n)}),_initBoundaryField=function(field,validator,modelField,optName){if(attrs[field])return modelCtrl.$validators[field]=function(value){return value&&validator(opts[optName],value[modelField])},$scope.$watch(field,function(date){return opts[optName]=!!date&&moment(date),_init()})},_initBoundaryField("min",_validateMin,"startDate","minDate"),_initBoundaryField("max",_validateMax,"endDate","maxDate"),attrs.options&&$scope.$watch("opts",function(newOpts){return opts=_mergeOpts(opts,newOpts),_init()},!0),attrs.clearable&&$scope.$watch("clearable",function(newClearable){if(newClearable&&(opts=_mergeOpts(opts,{locale:{cancelLabel:opts.clearLabel}})),_init(),newClearable)return el.on("cancel.daterangepicker",function(){return $scope.$apply(function(){return $scope.model=opts.singleDatePicker?null:{startDate:null,endDate:null}})})}),$scope.$on("$destroy",function(){return null!=_picker?_picker.remove():void 0})}}}])}.call(this),angular.module("dndLists",[]).directive("dndDraggable",["$parse","$timeout","dndDropEffectWorkaround","dndDragTypeWorkaround",function($parse,$timeout,dndDropEffectWorkaround,dndDragTypeWorkaround){return function(scope,element,attr){element.attr("draggable","true"),attr.dndDisableIf&&scope.$watch(attr.dndDisableIf,function(disabled){element.attr("draggable",!disabled)}),element.on("dragstart",function(event){event=event.originalEvent||event,event.dataTransfer.setData("Text",angular.toJson(scope.$eval(attr.dndDraggable))),event.dataTransfer.effectAllowed=attr.dndEffectAllowed||"move",element.addClass("dndDragging"),$timeout(function(){element.addClass("dndDraggingSource")},0),dndDropEffectWorkaround.dropEffect="none",dndDragTypeWorkaround.isDragging=!0,dndDragTypeWorkaround.dragType=attr.dndType?scope.$eval(attr.dndType):void 0,$parse(attr.dndDragstart)(scope,{event:event}),event.stopPropagation()}),element.on("dragend",function(event){event=event.originalEvent||event;var dropEffect=dndDropEffectWorkaround.dropEffect;scope.$apply(function(){switch(dropEffect){case"move":$parse(attr.dndMoved)(scope,{event:event});break;case"copy":$parse(attr.dndCopied)(scope,{event:event});break;case"none":$parse(attr.dndCanceled)(scope,{event:event})}$parse(attr.dndDragend)(scope,{event:event,dropEffect:dropEffect})}),element.removeClass("dndDragging"),$timeout(function(){element.removeClass("dndDraggingSource")},0),dndDragTypeWorkaround.isDragging=!1,event.stopPropagation()}),element.on("click",function(event){attr.dndSelected&&(event=event.originalEvent||event,scope.$apply(function(){$parse(attr.dndSelected)(scope,{event:event})}),event.stopPropagation())}),element.on("selectstart",function(){this.dragDrop&&this.dragDrop()})}}]).directive("dndList",["$parse","$timeout","dndDropEffectWorkaround","dndDragTypeWorkaround",function($parse,$timeout,dndDropEffectWorkaround,dndDragTypeWorkaround){return function(scope,element,attr){function isMouseInFirstHalf(event,targetNode,relativeToParent){var mousePointer=horizontal?event.offsetX||event.layerX:event.offsetY||event.layerY,targetSize=horizontal?targetNode.offsetWidth:targetNode.offsetHeight,targetPosition=horizontal?targetNode.offsetLeft:targetNode.offsetTop;return targetPosition=relativeToParent?targetPosition:0,mousePointer<targetPosition+targetSize/2}function getPlaceholderIndex(){return Array.prototype.indexOf.call(listNode.children,placeholderNode)}function isDropAllowed(event){if(!dndDragTypeWorkaround.isDragging&&!externalSources)return!1;if(!hasTextMimetype(event.dataTransfer.types))return!1;if(attr.dndAllowedTypes&&dndDragTypeWorkaround.isDragging){var allowed=scope.$eval(attr.dndAllowedTypes);if(angular.isArray(allowed)&&allowed.indexOf(dndDragTypeWorkaround.dragType)===-1)return!1}return!attr.dndDisableIf||!scope.$eval(attr.dndDisableIf)}function stopDragover(){return placeholder.remove(),element.removeClass("dndDragover"),!0}function invokeCallback(expression,event,index,item){return $parse(expression)(scope,{event:event,index:index,item:item||void 0,external:!dndDragTypeWorkaround.isDragging,type:dndDragTypeWorkaround.isDragging?dndDragTypeWorkaround.dragType:void 0})}function hasTextMimetype(types){if(!types)return!0;for(var i=0;i<types.length;i++)if("Text"===types[i]||"text/plain"===types[i])return!0;return!1}var placeholder=function(){var placeholder;return angular.forEach(element.children(),function(childNode){var child=angular.element(childNode);child.hasClass("dndPlaceholder")&&(placeholder=child)}),placeholder||angular.element("<li class='dndPlaceholder'></li>")}(),placeholderNode=placeholder[0],listNode=element[0];placeholder.remove()
;var horizontal=attr.dndHorizontalList&&scope.$eval(attr.dndHorizontalList),externalSources=attr.dndExternalSources&&scope.$eval(attr.dndExternalSources);element.on("dragover",function(event){if(event=event.originalEvent||event,!isDropAllowed(event))return!0;if(placeholderNode.parentNode!=listNode&&element.append(placeholder),event.target!==listNode){for(var listItemNode=event.target;listItemNode.parentNode!==listNode&&listItemNode.parentNode;)listItemNode=listItemNode.parentNode;listItemNode.parentNode===listNode&&listItemNode!==placeholderNode&&(isMouseInFirstHalf(event,listItemNode)?listNode.insertBefore(placeholderNode,listItemNode):listNode.insertBefore(placeholderNode,listItemNode.nextSibling))}else if(isMouseInFirstHalf(event,placeholderNode,!0))for(;placeholderNode.previousElementSibling&&(isMouseInFirstHalf(event,placeholderNode.previousElementSibling,!0)||0===placeholderNode.previousElementSibling.offsetHeight);)listNode.insertBefore(placeholderNode,placeholderNode.previousElementSibling);else for(;placeholderNode.nextElementSibling&&!isMouseInFirstHalf(event,placeholderNode.nextElementSibling,!0);)listNode.insertBefore(placeholderNode,placeholderNode.nextElementSibling.nextElementSibling);return attr.dndDragover&&!invokeCallback(attr.dndDragover,event,getPlaceholderIndex())?stopDragover():(element.addClass("dndDragover"),event.preventDefault(),event.stopPropagation(),!1)}),element.on("drop",function(event){if(event=event.originalEvent||event,!isDropAllowed(event))return!0;event.preventDefault();var transferredObject,data=event.dataTransfer.getData("Text")||event.dataTransfer.getData("text/plain");try{transferredObject=JSON.parse(data)}catch(e){return stopDragover()}var index=getPlaceholderIndex();if(attr.dndDrop&&!(transferredObject=invokeCallback(attr.dndDrop,event,index,transferredObject)))return stopDragover();var targetArray=scope.$eval(attr.dndList);return scope.$apply(function(){targetArray.splice(index,0,transferredObject)}),invokeCallback(attr.dndInserted,event,index,transferredObject),"none"===event.dataTransfer.dropEffect?"copy"===event.dataTransfer.effectAllowed||"move"===event.dataTransfer.effectAllowed?dndDropEffectWorkaround.dropEffect=event.dataTransfer.effectAllowed:dndDropEffectWorkaround.dropEffect=event.ctrlKey?"copy":"move":dndDropEffectWorkaround.dropEffect=event.dataTransfer.dropEffect,stopDragover(),event.stopPropagation(),!1}),element.on("dragleave",function(event){event=event.originalEvent||event,element.removeClass("dndDragover"),$timeout(function(){element.hasClass("dndDragover")||placeholder.remove()},100)})}}]).directive("dndNodrag",function(){return function(scope,element,attr){element.attr("draggable","true"),element.on("dragstart",function(event){event=event.originalEvent||event,event.dataTransfer.types&&event.dataTransfer.types.length||event.preventDefault(),event.stopPropagation()}),element.on("dragend",function(event){event=event.originalEvent||event,event.stopPropagation()})}}).factory("dndDragTypeWorkaround",function(){return{}}).factory("dndDropEffectWorkaround",function(){return{}}),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?module.exports=factory(require("jquery")):factory(jQuery)}(function(jQuery){"use strict";var domfocus=!1,mousefocus=!1,tabindexcounter=0,ascrailcounter=2e3,globalmaxzindex=0,$=jQuery,vendors=["webkit","ms","moz","o"],setAnimationFrame=window.requestAnimationFrame||!1,clearAnimationFrame=window.cancelAnimationFrame||!1;if(!setAnimationFrame)for(var vx in vendors){var v=vendors[vx];setAnimationFrame||(setAnimationFrame=window[v+"RequestAnimationFrame"]),clearAnimationFrame||(clearAnimationFrame=window[v+"CancelAnimationFrame"]||window[v+"CancelRequestAnimationFrame"])}var ClsMutationObserver=window.MutationObserver||window.WebKitMutationObserver||!1,_globaloptions={zindex:"auto",cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"5px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:60,mousescrollstep:24,touchbehavior:!1,hwacceleration:!0,usetransition:!0,boxzoom:!1,dblclickzoom:!0,gesturezoom:!0,grabcursorenabled:!0,autohidemode:!0,background:"",iframeautoresize:!0,cursorminheight:32,preservenativescrolling:!0,railoffset:!1,railhoffset:!1,bouncescroll:!0,spacebarenabled:!0,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:!0,horizrailenabled:!0,railalign:"right",railvalign:"bottom",enabletranslate3d:!0,enablemousewheel:!0,enablekeyboard:!0,smoothscroll:!0,sensitiverail:!0,enablemouselockapi:!0,cursorfixedheight:!1,directionlockdeadzone:6,hidecursordelay:400,nativeparentscrolling:!0,enablescrollonselection:!0,overflowx:!0,overflowy:!0,cursordragspeed:.3,rtlmode:"auto",cursordragontouch:!1,oneaxismousemode:"auto",scriptpath:function(){var scripts=document.getElementsByTagName("script"),path=scripts.length?scripts[scripts.length-1].src.split("?")[0]:"";return path.split("/").length>0?path.split("/").slice(0,-1).join("/")+"/":""}(),preventmultitouchscrolling:!0},browserdetected=!1,getBrowserDetection=function(){if(browserdetected)return browserdetected;var _el=document.createElement("DIV"),_style=_el.style,_agent=navigator.userAgent,_platform=navigator.platform,d={};d.haspointerlock="pointerLockElement"in document||"webkitPointerLockElement"in document||"mozPointerLockElement"in document,d.isopera="opera"in window,d.isopera12=d.isopera&&"getUserMedia"in navigator,d.isoperamini="[object OperaMini]"===Object.prototype.toString.call(window.operamini),d.isie="all"in document&&"attachEvent"in _el&&!d.isopera,d.isieold=d.isie&&!("msInterpolationMode"in _style),d.isie7=d.isie&&!d.isieold&&(!("documentMode"in document)||7==document.documentMode),d.isie8=d.isie&&"documentMode"in document&&8==document.documentMode,d.isie9=d.isie&&"performance"in window&&document.documentMode>=9,d.isie10=d.isie&&"performance"in window&&10==document.documentMode,d.isie11="msRequestFullscreen"in _el&&document.documentMode>=11,d.isieedge=navigator.userAgent.match(/Edge\/12\./),d.isie9mobile=/iemobile.9/i.test(_agent),d.isie9mobile&&(d.isie9=!1),d.isie7mobile=!d.isie9mobile&&d.isie7&&/iemobile/i.test(_agent),d.ismozilla="MozAppearance"in _style,d.iswebkit="WebkitAppearance"in _style,d.ischrome="chrome"in window,d.ischrome22=d.ischrome&&d.haspointerlock,d.ischrome26=d.ischrome&&"transition"in _style,d.cantouch="ontouchstart"in document.documentElement||"ontouchstart"in window,d.hasmstouch=window.MSPointerEvent||!1,d.hasw3ctouch=(window.PointerEvent||!1)&&(navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0),d.ismac=/^mac$/i.test(_platform),d.isios=d.cantouch&&/iphone|ipad|ipod/i.test(_platform),d.isios4=d.isios&&!("seal"in Object),d.isios7=d.isios&&"webkitHidden"in document,d.isandroid=/android/i.test(_agent),d.haseventlistener="addEventListener"in _el,d.trstyle=!1,d.hastransform=!1,d.hastranslate3d=!1,d.transitionstyle=!1,d.hastransition=!1,d.transitionend=!1;var a,check=["transform","msTransform","webkitTransform","MozTransform","OTransform"];for(a=0;a<check.length;a++)if(void 0!==_style[check[a]]){d.trstyle=check[a];break}d.hastransform=!!d.trstyle,d.hastransform&&(_style[d.trstyle]="translate3d(1px,2px,3px)",d.hastranslate3d=/translate3d/.test(_style[d.trstyle])),d.transitionstyle=!1,d.prefixstyle="",d.transitionend=!1,check=["transition","webkitTransition","msTransition","MozTransition","OTransition","OTransition","KhtmlTransition"];var prefix=["","-webkit-","-ms-","-moz-","-o-","-o","-khtml-"],evs=["transitionend","webkitTransitionEnd","msTransitionEnd","transitionend","otransitionend","oTransitionEnd","KhtmlTransitionEnd"];for(a=0;a<check.length;a++)if(check[a]in _style){d.transitionstyle=check[a],d.prefixstyle=prefix[a],d.transitionend=evs[a];break}return d.ischrome26&&(d.prefixstyle=prefix[1]),d.hastransition=d.transitionstyle,d.cursorgrabvalue=function(){var lst=["-webkit-grab","-moz-grab","grab"];(d.ischrome&&!d.ischrome22||d.isie)&&(lst=[]);for(var a=0;a<lst.length;a++){var p=lst[a];if(_style.cursor=p,_style.cursor==p)return p}return"url(//mail.google.com/mail/images/2/openhand.cur),n-resize"}(),d.hasmousecapture="setCapture"in _el,d.hasMutationObserver=ClsMutationObserver!==!1,_el=null,browserdetected=d,d},NiceScrollClass=function(myopt,me){function getMatrixValues(){var tr=self.doc.css(cap.trstyle);return!(!tr||"matrix"!=tr.substr(0,6))&&tr.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/)}function getZIndex(){var dom=self.win;if("zIndex"in dom)return dom.zIndex();for(;dom.length>0;){if(9==dom[0].nodeType)return!1;var zi=dom.css("zIndex");if(!isNaN(zi)&&0!=zi)return parseInt(zi);dom=dom.parent()}return!1}function getWidthToPixel(dom,prop,chkheight){var wd=dom.css(prop),px=parseFloat(wd);if(isNaN(px)){px=_convertBorderWidth[wd]||0;var brd=3==px?chkheight?self.win.outerHeight()-self.win.innerHeight():self.win.outerWidth()-self.win.innerWidth():1;return self.isie8&&px&&(px+=1),brd?px:0}return px}function _modernWheelEvent(dom,name,fn,bubble){self._bind(dom,name,function(e){var e=e?e:window.event,event={original:e,target:e.target||e.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==e.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){return e.preventDefault?e.preventDefault():e.returnValue=!1,!1},stopImmediatePropagation:function(){e.stopImmediatePropagation?e.stopImmediatePropagation():e.cancelBubble=!0}};return"mousewheel"==name?(event.deltaY=-.025*e.wheelDelta,e.wheelDeltaX&&(event.deltaX=-.025*e.wheelDeltaX)):event.deltaY=e.detail,fn.call(dom,event)},bubble)}function execScrollWheel(e,hr,chkscroll){var px,py;if(0==e.deltaMode?(px=-Math.floor(e.deltaX*(self.opt.mousescrollstep/54)),py=-Math.floor(e.deltaY*(self.opt.mousescrollstep/54))):1==e.deltaMode&&(px=-Math.floor(e.deltaX*self.opt.mousescrollstep),py=-Math.floor(e.deltaY*self.opt.mousescrollstep)),hr&&self.opt.oneaxismousemode&&0==px&&py&&(px=py,py=0,chkscroll)){(px<0?self.getScrollLeft()>=self.page.maxw:self.getScrollLeft()<=0)&&(py=px,px=0)}if(px&&(self.scrollmom&&self.scrollmom.stop(),self.lastdeltax+=px,self.debounced("mousewheelx",function(){var dt=self.lastdeltax;self.lastdeltax=0,self.rail.drag||self.doScrollLeftBy(dt)},15)),py){if(self.opt.nativeparentscrolling&&chkscroll&&!self.ispage&&!self.zoomactive)if(py<0){if(self.getScrollTop()>=self.page.maxh)return!0}else if(self.getScrollTop()<=0)return!0;self.scrollmom&&self.scrollmom.stop(),self.lastdeltay+=py,self.debounced("mousewheely",function(){var dt=self.lastdeltay;self.lastdeltay=0,self.rail.drag||self.doScrollBy(dt)},15)}return e.stopImmediatePropagation(),e.preventDefault()}var self=this;if(this.version="3.6.6",this.name="nicescroll",this.me=me,this.opt={doc:$("body"),win:!1},$.extend(this.opt,_globaloptions),this.opt.snapbackspeed=80,myopt)for(var a in self.opt)void 0!==myopt[a]&&(self.opt[a]=myopt[a]);this.doc=self.opt.doc,this.iddoc=this.doc&&this.doc[0]?this.doc[0].id||"":"",this.ispage=/^BODY|HTML/.test(self.opt.win?self.opt.win[0].nodeName:this.doc[0].nodeName),this.haswrapper=self.opt.win!==!1,this.win=self.opt.win||(this.ispage?$(window):this.doc),this.docscroll=this.ispage&&!this.haswrapper?$(window):this.win,this.body=$("body"),this.viewport=!1,this.isfixed=!1,this.iframe=!1,this.isiframe="IFRAME"==this.doc[0].nodeName&&"IFRAME"==this.win[0].nodeName,this.istextarea="TEXTAREA"==this.win[0].nodeName,this.forcescreen=!1,this.canshowonmouseevent="scroll"!=self.opt.autohidemode,this.onmousedown=!1,this.onmouseup=!1,this.onmousemove=!1,this.onmousewheel=!1,this.onkeypress=!1,this.ongesturezoom=!1,this.onclick=!1,this.onscrollstart=!1,this.onscrollend=!1,this.onscrollcancel=!1,this.onzoomin=!1,this.onzoomout=!1,this.view=!1,this.page=!1,this.scroll={x:0,y:0},this.scrollratio={x:0,y:0},this.cursorheight=20,this.scrollvaluemax=0,this.isrtlmode="auto"==this.opt.rtlmode?"rtl"==(this.win[0]==window?this.body:this.win).css("direction"):this.opt.rtlmode===!0,this.scrollrunning=!1,this.scrollmom=!1,this.observer=!1,this.observerremover=!1,this.observerbody=!1;do{this.id="ascrail"+ascrailcounter++}while(document.getElementById(this.id));this.rail=!1,this.cursor=!1,this.cursorfreezed=!1,this.selectiondrag=!1,this.zoom=!1,this.zoomactive=!1,this.hasfocus=!1,this.hasmousefocus=!1,this.visibility=!0,this.railslocked=!1,this.locked=!1,this.hidden=!1,this.cursoractive=!0,this.wheelprevented=!1,this.overflowx=self.opt.overflowx,this.overflowy=self.opt.overflowy,this.nativescrollingarea=!1,this.checkarea=0,this.events=[],this.saved={},this.delaylist={},this.synclist={},this.lastdeltax=0,this.lastdeltay=0,this.detected=getBrowserDetection();var cap=$.extend({},this.detected);this.canhwscroll=cap.hastransform&&self.opt.hwacceleration,this.ishwscroll=this.canhwscroll&&self.haswrapper,this.hasreversehr=this.isrtlmode&&!cap.iswebkit,this.istouchcapable=!1,!cap.cantouch||cap.isios||cap.isandroid||!cap.iswebkit&&!cap.ismozilla||(this.istouchcapable=!0,cap.cantouch=!1),self.opt.enablemouselockapi||(cap.hasmousecapture=!1,cap.haspointerlock=!1),this.debounced=function(name,fn,tm){var dd=self.delaylist[name];self.delaylist[name]=fn,dd||(self.debouncedelayed=setTimeout(function(){if(self){var fn=self.delaylist[name];self.delaylist[name]=!1,fn.call(self)}},tm))};var _onsync=!1;this.synched=function(name,fn){return self.synclist[name]=fn,function(){_onsync||(setAnimationFrame(function(){_onsync=!1;for(var nn in self.synclist){var fn=self.synclist[nn];fn&&fn.call(self),self.synclist[nn]=!1}}),_onsync=!0)}(),name},this.unsynched=function(name){self.synclist[name]&&(self.synclist[name]=!1)},this.css=function(el,pars){for(var n in pars)self.saved.css.push([el,n,el.css(n)]),el.css(n,pars[n])},this.scrollTop=function(val){return void 0===val?self.getScrollTop():self.setScrollTop(val)},this.scrollLeft=function(val){return void 0===val?self.getScrollLeft():self.setScrollLeft(val)};var BezierClass=function(st,ed,spd,p1,p2,p3,p4){this.st=st,this.ed=ed,this.spd=spd,this.p1=p1||0,this.p2=p2||1,this.p3=p3||0,this.p4=p4||1,this.ts=(new Date).getTime(),this.df=this.ed-this.st};if(BezierClass.prototype={B2:function(t){return 3*t*t*(1-t)},B3:function(t){return 3*t*(1-t)*(1-t)},B4:function(t){return(1-t)*(1-t)*(1-t)},getNow:function(){var nw=(new Date).getTime(),pc=1-(nw-this.ts)/this.spd,bz=this.B2(pc)+this.B3(pc)+this.B4(pc);return pc<0?this.ed:this.st+Math.round(this.df*bz)},update:function(ed,spd){return this.st=this.getNow(),this.ed=ed,this.spd=spd,this.ts=(new Date).getTime(),this.df=this.ed-this.st,this}},this.ishwscroll){this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"},cap.hastranslate3d&&cap.isios&&this.doc.css("-webkit-backface-visibility","hidden"),this.getScrollTop=function(last){if(!last){var mtx=getMatrixValues();if(mtx)return 16==mtx.length?-mtx[13]:-mtx[5];if(self.timerscroll&&self.timerscroll.bz)return self.timerscroll.bz.getNow()}return self.doc.translate.y},this.getScrollLeft=function(last){if(!last){var mtx=getMatrixValues();if(mtx)return 16==mtx.length?-mtx[12]:-mtx[4];if(self.timerscroll&&self.timerscroll.bh)return self.timerscroll.bh.getNow()}return self.doc.translate.x},this.notifyScrollEvent=function(el){var e=document.createEvent("UIEvents");e.initUIEvent("scroll",!1,!0,window,1),e.niceevent=!0,el.dispatchEvent(e)};var cxscrollleft=this.isrtlmode?1:-1;cap.hastranslate3d&&self.opt.enabletranslate3d?(this.setScrollTop=function(val,silent){self.doc.translate.y=val,self.doc.translate.ty=val*-1+"px",self.doc.css(cap.trstyle,"translate3d("+self.doc.translate.tx+","+self.doc.translate.ty+",0px)"),silent||self.notifyScrollEvent(self.win[0])},this.setScrollLeft=function(val,silent){self.doc.translate.x=val,self.doc.translate.tx=val*cxscrollleft+"px",self.doc.css(cap.trstyle,"translate3d("+self.doc.translate.tx+","+self.doc.translate.ty+",0px)"),silent||self.notifyScrollEvent(self.win[0])}):(this.setScrollTop=function(val,silent){self.doc.translate.y=val,self.doc.translate.ty=val*-1+"px",self.doc.css(cap.trstyle,"translate("+self.doc.translate.tx+","+self.doc.translate.ty+")"),silent||self.notifyScrollEvent(self.win[0])},this.setScrollLeft=function(val,silent){self.doc.translate.x=val,self.doc.translate.tx=val*cxscrollleft+"px",self.doc.css(cap.trstyle,"translate("+self.doc.translate.tx+","+self.doc.translate.ty+")"),silent||self.notifyScrollEvent(self.win[0])})}else this.getScrollTop=function(){return self.docscroll.scrollTop()},this.setScrollTop=function(val){return setTimeout(function(){self.docscroll.scrollTop(val)},1)},this.getScrollLeft=function(){return self.detected.ismozilla&&self.isrtlmode?Math.abs(self.docscroll.scrollLeft()):self.docscroll.scrollLeft()},this.setScrollLeft=function(val){return setTimeout(function(){self.docscroll.scrollLeft(self.detected.ismozilla&&self.isrtlmode?-val:val)},1)};this.getTarget=function(e){return!!e&&(e.target?e.target:!!e.srcElement&&e.srcElement)},this.hasParent=function(e,id){if(!e)return!1;for(var el=e.target||e.srcElement||e||!1;el&&el.id!=id;)el=el.parentNode||!1;return el!==!1};var _convertBorderWidth={thin:1,medium:3,thick:5};this.getDocumentScrollOffset=function(){return{top:window.pageYOffset||document.documentElement.scrollTop,left:window.pageXOffset||document.documentElement.scrollLeft}},this.getOffset=function(){if(self.isfixed){var ofs=self.win.offset(),scrl=self.getDocumentScrollOffset();return ofs.top-=scrl.top,ofs.left-=scrl.left,ofs}var ww=self.win.offset();if(!self.viewport)return ww;var vp=self.viewport.offset();return{top:ww.top-vp.top,left:ww.left-vp.left}},this.updateScrollBar=function(len){if(self.ishwscroll)self.rail.css({height:self.win.innerHeight()-(self.opt.railpadding.top+self.opt.railpadding.bottom)}),self.railh&&self.railh.css({width:self.win.innerWidth()-(self.opt.railpadding.left+self.opt.railpadding.right)});else{var wpos=self.getOffset(),pos={top:wpos.top,left:wpos.left-(self.opt.railpadding.left+self.opt.railpadding.right)};pos.top+=getWidthToPixel(self.win,"border-top-width",!0),pos.left+=self.rail.align?self.win.outerWidth()-getWidthToPixel(self.win,"border-right-width")-self.rail.width:getWidthToPixel(self.win,"border-left-width");var off=self.opt.railoffset;if(off&&(off.top&&(pos.top+=off.top),off.left&&(pos.left+=off.left)),self.railslocked||self.rail.css({top:pos.top,left:pos.left,height:(len?len.h:self.win.innerHeight())-(self.opt.railpadding.top+self.opt.railpadding.bottom)}),self.zoom&&self.zoom.css({top:pos.top+1,left:1==self.rail.align?pos.left-20:pos.left+self.rail.width+4}),self.railh&&!self.railslocked){var pos={top:wpos.top,left:wpos.left},off=self.opt.railhoffset;off&&(off.top&&(pos.top+=off.top),off.left&&(pos.left+=off.left));var y=self.railh.align?pos.top+getWidthToPixel(self.win,"border-top-width",!0)+self.win.innerHeight()-self.railh.height:pos.top+getWidthToPixel(self.win,"border-top-width",!0),x=pos.left+getWidthToPixel(self.win,"border-left-width");self.railh.css({top:y-(self.opt.railpadding.top+self.opt.railpadding.bottom),left:x,width:self.railh.width})}}},this.doRailClick=function(e,dbl,hr){var fn,pg,cur,pos;self.railslocked||(self.cancelEvent(e),dbl?(fn=hr?self.doScrollLeft:self.doScrollTop,cur=hr?(e.pageX-self.railh.offset().left-self.cursorwidth/2)*self.scrollratio.x:(e.pageY-self.rail.offset().top-self.cursorheight/2)*self.scrollratio.y,fn(cur)):(fn=hr?self.doScrollLeftBy:self.doScrollBy,cur=hr?self.scroll.x:self.scroll.y,pos=hr?e.pageX-self.railh.offset().left:e.pageY-self.rail.offset().top,pg=hr?self.view.w:self.view.h,fn(cur>=pos?pg:-pg)))},self.hasanimationframe=setAnimationFrame,self.hascancelanimationframe=clearAnimationFrame,self.hasanimationframe?self.hascancelanimationframe||(clearAnimationFrame=function(){self.cancelAnimationFrame=!0}):(setAnimationFrame=function(fn){return setTimeout(fn,15-Math.floor(+new Date/1e3)%16)},clearAnimationFrame=clearInterval),this.init=function(){if(self.saved.css=[],cap.isie7mobile)return!0;if(cap.isoperamini)return!0;if(cap.hasmstouch&&self.css(self.ispage?$("html"):self.win,{"-ms-touch-action":"none"}),self.zindex="auto",self.ispage||"auto"!=self.opt.zindex?self.zindex=self.opt.zindex:self.zindex=getZIndex()||"auto",self.ispage||"auto"==self.zindex||self.zindex>globalmaxzindex&&(globalmaxzindex=self.zindex),self.isie&&0==self.zindex&&"auto"==self.opt.zindex&&(self.zindex="auto"),!self.ispage||!cap.cantouch&&!cap.isieold&&!cap.isie9mobile){var cont=self.docscroll;self.ispage&&(cont=self.haswrapper?self.win:self.doc),cap.isie9mobile||self.css(cont,{"overflow-y":"hidden"}),self.ispage&&cap.isie7&&("BODY"==self.doc[0].nodeName?self.css($("html"),{"overflow-y":"hidden"}):"HTML"==self.doc[0].nodeName&&self.css($("body"),{"overflow-y":"hidden"})),!cap.isios||self.ispage||self.haswrapper||self.css($("body"),{"-webkit-overflow-scrolling":"touch"});var cursor=$(document.createElement("div"));cursor.css({position:"relative",top:0,float:"right",width:self.opt.cursorwidth,height:"0px","background-color":self.opt.cursorcolor,border:self.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":self.opt.cursorborderradius,"-moz-border-radius":self.opt.cursorborderradius,"border-radius":self.opt.cursorborderradius}),cursor.hborder=parseFloat(cursor.outerHeight()-cursor.innerHeight()),cursor.addClass("nicescroll-cursors"),self.cursor=cursor;var rail=$(document.createElement("div"));rail.attr("id",self.id),rail.addClass("nicescroll-rails nicescroll-rails-vr");var v,a,kp=["left","right","top","bottom"];for(var n in kp)a=kp[n],v=self.opt.railpadding[a],v?rail.css("padding-"+a,v+"px"):self.opt.railpadding[a]=0;rail.append(cursor),rail.width=Math.max(parseFloat(self.opt.cursorwidth),cursor.outerWidth()),rail.css({width:rail.width+"px",zIndex:self.zindex,background:self.opt.background,cursor:"default"}),rail.visibility=!0,rail.scrollable=!0,rail.align="left"==self.opt.railalign?0:1,self.rail=rail,self.rail.drag=!1;var zoom=!1;!self.opt.boxzoom||self.ispage||cap.isieold||(zoom=document.createElement("div"),self.bind(zoom,"click",self.doZoom),self.bind(zoom,"mouseenter",function(){self.zoom.css("opacity",self.opt.cursoropacitymax)}),self.bind(zoom,"mouseleave",function(){self.zoom.css("opacity",self.opt.cursoropacitymin)}),self.zoom=$(zoom),self.zoom.css({cursor:"pointer","z-index":self.zindex,backgroundImage:"url("+self.opt.scriptpath+"zoomico.png)",height:18,width:18,backgroundPosition:"0px 0px"}),self.opt.dblclickzoom&&self.bind(self.win,"dblclick",self.doZoom),cap.cantouch&&self.opt.gesturezoom&&(self.ongesturezoom=function(e){return e.scale>1.5&&self.doZoomIn(e),e.scale<.8&&self.doZoomOut(e),self.cancelEvent(e)},self.bind(self.win,"gestureend",self.ongesturezoom))),self.railh=!1;var railh;if(self.opt.horizrailenabled){self.css(cont,{"overflow-x":"hidden"});var cursor=$(document.createElement("div"));cursor.css({position:"absolute",top:0,height:self.opt.cursorwidth,width:"0px","background-color":self.opt.cursorcolor,border:self.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":self.opt.cursorborderradius,"-moz-border-radius":self.opt.cursorborderradius,"border-radius":self.opt.cursorborderradius}),cap.isieold&&cursor.css({overflow:"hidden"}),cursor.wborder=parseFloat(cursor.outerWidth()-cursor.innerWidth()),cursor.addClass("nicescroll-cursors"),self.cursorh=cursor,railh=$(document.createElement("div")),railh.attr("id",self.id+"-hr"),railh.addClass("nicescroll-rails nicescroll-rails-hr"),railh.height=Math.max(parseFloat(self.opt.cursorwidth),cursor.outerHeight()),railh.css({height:railh.height+"px",zIndex:self.zindex,background:self.opt.background}),railh.append(cursor),railh.visibility=!0,railh.scrollable=!0,railh.align="top"==self.opt.railvalign?0:1,self.railh=railh,self.railh.drag=!1}if(self.ispage)rail.css({position:"fixed",top:"0px",height:"100%"}),rail.align?rail.css({right:"0px"}):rail.css({left:"0px"}),self.body.append(rail),self.railh&&(railh.css({position:"fixed",left:"0px",width:"100%"}),railh.align?railh.css({bottom:"0px"}):railh.css({top:"0px"}),self.body.append(railh));else{if(self.ishwscroll){"static"==self.win.css("position")&&self.css(self.win,{position:"relative"});var bd="HTML"==self.win[0].nodeName?self.body:self.win;$(bd).scrollTop(0).scrollLeft(0),self.zoom&&(self.zoom.css({position:"absolute",top:1,right:0,"margin-right":rail.width+4}),bd.append(self.zoom)),rail.css({position:"absolute",top:0}),rail.align?rail.css({right:0}):rail.css({left:0}),bd.append(rail),railh&&(railh.css({position:"absolute",left:0,bottom:0}),railh.align?railh.css({bottom:0}):railh.css({top:0}),bd.append(railh))}else{self.isfixed="fixed"==self.win.css("position");var rlpos=self.isfixed?"fixed":"absolute";self.isfixed||(self.viewport=self.getViewport(self.win[0])),self.viewport&&(self.body=self.viewport,0==/fixed|absolute/.test(self.viewport.css("position"))&&self.css(self.viewport,{position:"relative"})),rail.css({position:rlpos}),self.zoom&&self.zoom.css({position:rlpos}),self.updateScrollBar(),self.body.append(rail),self.zoom&&self.body.append(self.zoom),self.railh&&(railh.css({position:rlpos}),self.body.append(railh))}cap.isios&&self.css(self.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"}),cap.isie&&self.opt.disableoutline&&self.win.attr("hideFocus","true"),cap.iswebkit&&self.opt.disableoutline&&self.win.css({outline:"none"})}if(self.opt.autohidemode===!1?(self.autohidedom=!1,self.rail.css({opacity:self.opt.cursoropacitymax}),self.railh&&self.railh.css({opacity:self.opt.cursoropacitymax})):self.opt.autohidemode===!0||"leave"===self.opt.autohidemode?(self.autohidedom=$().add(self.rail),cap.isie8&&(self.autohidedom=self.autohidedom.add(self.cursor)),self.railh&&(self.autohidedom=self.autohidedom.add(self.railh)),self.railh&&cap.isie8&&(self.autohidedom=self.autohidedom.add(self.cursorh))):"scroll"==self.opt.autohidemode?(self.autohidedom=$().add(self.rail),self.railh&&(self.autohidedom=self.autohidedom.add(self.railh))):"cursor"==self.opt.autohidemode?(self.autohidedom=$().add(self.cursor),self.railh&&(self.autohidedom=self.autohidedom.add(self.cursorh))):"hidden"==self.opt.autohidemode&&(self.autohidedom=!1,self.hide(),self.railslocked=!1),cap.isie9mobile){self.scrollmom=new ScrollMomentumClass2D(self),self.onmangotouch=function(){var py=self.getScrollTop(),px=self.getScrollLeft();if(py==self.scrollmom.lastscrolly&&px==self.scrollmom.lastscrollx)return!0;var dfy=py-self.mangotouch.sy,dfx=px-self.mangotouch.sx;if(0!=Math.round(Math.sqrt(Math.pow(dfx,2)+Math.pow(dfy,2)))){var dry=dfy<0?-1:1,drx=dfx<0?-1:1,tm=+new Date;if(self.mangotouch.lazy&&clearTimeout(self.mangotouch.lazy),tm-self.mangotouch.tm>80||self.mangotouch.dry!=dry||self.mangotouch.drx!=drx)self.scrollmom.stop(),self.scrollmom.reset(px,py),self.mangotouch.sy=py,self.mangotouch.ly=py,self.mangotouch.sx=px,self.mangotouch.lx=px,self.mangotouch.dry=dry,self.mangotouch.drx=drx,self.mangotouch.tm=tm;else{self.scrollmom.stop(),self.scrollmom.update(self.mangotouch.sx-dfx,self.mangotouch.sy-dfy),self.mangotouch.tm=tm;var ds=Math.max(Math.abs(self.mangotouch.ly-py),Math.abs(self.mangotouch.lx-px));self.mangotouch.ly=py,self.mangotouch.lx=px,ds>2&&(self.mangotouch.lazy=setTimeout(function(){self.mangotouch.lazy=!1,self.mangotouch.dry=0,self.mangotouch.drx=0,self.mangotouch.tm=0,self.scrollmom.doMomentum(30)},100))}}};var top=self.getScrollTop(),lef=self.getScrollLeft();self.mangotouch={sy:top,ly:top,dry:0,sx:lef,lx:lef,drx:0,lazy:!1,tm:0},self.bind(self.docscroll,"scroll",self.onmangotouch)}else{if(cap.cantouch||self.istouchcapable||self.opt.touchbehavior||cap.hasmstouch){self.scrollmom=new ScrollMomentumClass2D(self),self.ontouchstart=function(e){if(e.pointerType&&2!=e.pointerType&&"touch"!=e.pointerType)return!1;if(self.hasmoving=!1,!self.railslocked){var tg;if(cap.hasmstouch)for(tg=!!e.target&&e.target;tg;){var nc=$(tg).getNiceScroll();if(nc.length>0&&nc[0].me==self.me)break;if(nc.length>0)return!1;if("DIV"==tg.nodeName&&tg.id==self.id)break;tg=!!tg.parentNode&&tg.parentNode}if(self.cancelScroll(),tg=self.getTarget(e)){if(/INPUT/i.test(tg.nodeName)&&/range/i.test(tg.type))return self.stopPropagation(e)}if(!("clientX"in e)&&"changedTouches"in e&&(e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),self.forcescreen){var le=e;e={original:e.original?e.original:e},e.clientX=le.screenX,e.clientY=le.screenY}if(self.rail.drag={x:e.clientX,y:e.clientY,sx:self.scroll.x,sy:self.scroll.y,st:self.getScrollTop(),sl:self.getScrollLeft(),pt:2,dl:!1},self.ispage||!self.opt.directionlockdeadzone)self.rail.drag.dl="f";else{var view={w:$(window).width(),h:$(window).height()},page={w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},maxh=Math.max(0,page.h-view.h),maxw=Math.max(0,page.w-view.w);!self.rail.scrollable&&self.railh.scrollable?self.rail.drag.ck=maxh>0&&"v":self.rail.scrollable&&!self.railh.scrollable?self.rail.drag.ck=maxw>0&&"h":self.rail.drag.ck=!1,self.rail.drag.ck||(self.rail.drag.dl="f")}if(self.opt.touchbehavior&&self.isiframe&&cap.isie){var wp=self.win.position();self.rail.drag.x+=wp.left,self.rail.drag.y+=wp.top}if(self.hasmoving=!1,self.lastmouseup=!1,self.scrollmom.reset(e.clientX,e.clientY),!cap.cantouch&&!this.istouchcapable&&!e.pointerType){if(!(!!tg&&/INPUT|SELECT|TEXTAREA/i.test(tg.nodeName)))return!self.ispage&&cap.hasmousecapture&&tg.setCapture(),self.opt.touchbehavior?(tg.onclick&&!tg._onclick&&(tg._onclick=tg.onclick,tg.onclick=function(e){if(self.hasmoving)return!1;tg._onclick.call(this,e)}),self.cancelEvent(e)):self.stopPropagation(e);/SUBMIT|CANCEL|BUTTON/i.test($(tg).attr("type"))&&(pc={tg:tg,click:!1},self.preventclick=pc)}}},self.ontouchend=function(e){if(!self.rail.drag)return!0;if(2==self.rail.drag.pt){if(e.pointerType&&2!=e.pointerType&&"touch"!=e.pointerType)return!1;if(self.scrollmom.doMomentum(),self.rail.drag=!1,self.hasmoving&&(self.lastmouseup=!0,self.hideCursor(),cap.hasmousecapture&&document.releaseCapture(),!cap.cantouch))return self.cancelEvent(e)}else if(1==self.rail.drag.pt)return self.onmouseup(e)};var moveneedoffset=self.opt.touchbehavior&&self.isiframe&&!cap.hasmousecapture;self.ontouchmove=function(e,byiframe){if(!self.rail.drag)return!1;if(e.targetTouches&&self.opt.preventmultitouchscrolling&&e.targetTouches.length>1)return!1;if(e.pointerType&&2!=e.pointerType&&"touch"!=e.pointerType)return!1;if(2==self.rail.drag.pt){if(cap.cantouch&&cap.isios&&void 0===e.original)return!0;self.hasmoving=!0,self.preventclick&&!self.preventclick.click&&(self.preventclick.click=self.preventclick.tg.onclick||!1,self.preventclick.tg.onclick=self.onpreventclick);if(e=$.extend({original:e},e),"changedTouches"in e&&(e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),self.forcescreen){var le=e;e={original:e.original?e.original:e},e.clientX=le.screenX,e.clientY=le.screenY}var ofy,ofx;if(ofx=ofy=0,moveneedoffset&&!byiframe){var wp=self.win.position();ofx=-wp.left,ofy=-wp.top}var fy=e.clientY+ofy,my=fy-self.rail.drag.y,fx=e.clientX+ofx,mx=fx-self.rail.drag.x,ny=self.rail.drag.st-my;self.ishwscroll&&self.opt.bouncescroll?ny<0?ny=Math.round(ny/2):ny>self.page.maxh&&(ny=self.page.maxh+Math.round((ny-self.page.maxh)/2)):(ny<0&&(ny=0,fy=0),ny>self.page.maxh&&(ny=self.page.maxh,fy=0));var nx;self.railh&&self.railh.scrollable&&(nx=self.isrtlmode?mx-self.rail.drag.sl:self.rail.drag.sl-mx,self.ishwscroll&&self.opt.bouncescroll?nx<0?nx=Math.round(nx/2):nx>self.page.maxw&&(nx=self.page.maxw+Math.round((nx-self.page.maxw)/2)):(nx<0&&(nx=0,fx=0),nx>self.page.maxw&&(nx=self.page.maxw,fx=0)));var grabbed=!1;if(self.rail.drag.dl)grabbed=!0,"v"==self.rail.drag.dl?nx=self.rail.drag.sl:"h"==self.rail.drag.dl&&(ny=self.rail.drag.st);else{var ay=Math.abs(my),ax=Math.abs(mx),dz=self.opt.directionlockdeadzone;if("v"==self.rail.drag.ck){if(ay>dz&&ax<=.3*ay)return self.rail.drag=!1,!0;ax>dz&&(self.rail.drag.dl="f",$("body").scrollTop($("body").scrollTop()))}else if("h"==self.rail.drag.ck){if(ax>dz&&ay<=.3*ax)return self.rail.drag=!1,!0;ay>dz&&(self.rail.drag.dl="f",$("body").scrollLeft($("body").scrollLeft()))}}
if(self.synched("touchmove",function(){self.rail.drag&&2==self.rail.drag.pt&&(self.prepareTransition&&self.prepareTransition(0),self.rail.scrollable&&self.setScrollTop(ny),self.scrollmom.update(fx,fy),self.railh&&self.railh.scrollable?(self.setScrollLeft(nx),self.showCursor(ny,nx)):self.showCursor(ny),cap.isie10&&document.selection.clear())}),cap.ischrome&&self.istouchcapable&&(grabbed=!1),grabbed)return self.cancelEvent(e)}else if(1==self.rail.drag.pt)return self.onmousemove(e)}}if(self.onmousedown=function(e,hronly){if(!self.rail.drag||1==self.rail.drag.pt){if(self.railslocked)return self.cancelEvent(e);self.cancelScroll(),self.rail.drag={x:e.clientX,y:e.clientY,sx:self.scroll.x,sy:self.scroll.y,pt:1,hr:!!hronly};var tg=self.getTarget(e);return!self.ispage&&cap.hasmousecapture&&tg.setCapture(),self.isiframe&&!cap.hasmousecapture&&(self.saved.csspointerevents=self.doc.css("pointer-events"),self.css(self.doc,{"pointer-events":"none"})),self.hasmoving=!1,self.cancelEvent(e)}},self.onmouseup=function(e){if(self.rail.drag)return 1!=self.rail.drag.pt||(cap.hasmousecapture&&document.releaseCapture(),self.isiframe&&!cap.hasmousecapture&&self.doc.css("pointer-events",self.saved.csspointerevents),self.rail.drag=!1,self.hasmoving&&self.triggerScrollEnd(),self.cancelEvent(e))},self.onmousemove=function(e){if(self.rail.drag){if(1!=self.rail.drag.pt)return;if(cap.ischrome&&0==e.which)return self.onmouseup(e);if(self.cursorfreezed=!0,self.hasmoving=!0,self.rail.drag.hr){self.scroll.x=self.rail.drag.sx+(e.clientX-self.rail.drag.x),self.scroll.x<0&&(self.scroll.x=0);var mw=self.scrollvaluemaxw;self.scroll.x>mw&&(self.scroll.x=mw)}else{self.scroll.y=self.rail.drag.sy+(e.clientY-self.rail.drag.y),self.scroll.y<0&&(self.scroll.y=0);var my=self.scrollvaluemax;self.scroll.y>my&&(self.scroll.y=my)}return self.synched("mousemove",function(){self.rail.drag&&1==self.rail.drag.pt&&(self.showCursor(),self.rail.drag.hr?self.hasreversehr?self.doScrollLeft(self.scrollvaluemaxw-Math.round(self.scroll.x*self.scrollratio.x),self.opt.cursordragspeed):self.doScrollLeft(Math.round(self.scroll.x*self.scrollratio.x),self.opt.cursordragspeed):self.doScrollTop(Math.round(self.scroll.y*self.scrollratio.y),self.opt.cursordragspeed))}),self.cancelEvent(e)}self.checkarea=0},cap.cantouch||self.opt.touchbehavior)self.onpreventclick=function(e){if(self.preventclick)return self.preventclick.tg.onclick=self.preventclick.click,self.preventclick=!1,self.cancelEvent(e)},self.bind(self.win,"mousedown",self.ontouchstart),self.onclick=!cap.isios&&function(e){return!self.lastmouseup||(self.lastmouseup=!1,self.cancelEvent(e))},self.opt.grabcursorenabled&&cap.cursorgrabvalue&&(self.css(self.ispage?self.doc:self.win,{cursor:cap.cursorgrabvalue}),self.css(self.rail,{cursor:cap.cursorgrabvalue}));else{var checkSelectionScroll=function(e){if(self.selectiondrag){if(e){var ww=self.win.outerHeight(),df=e.pageY-self.selectiondrag.top;df>0&&df<ww&&(df=0),df>=ww&&(df-=ww),self.selectiondrag.df=df}if(0!=self.selectiondrag.df){var rt=2*-Math.floor(self.selectiondrag.df/6);self.doScrollBy(rt),self.debounced("doselectionscroll",function(){checkSelectionScroll()},50)}}};"getSelection"in document?self.hasTextSelected=function(){return document.getSelection().rangeCount>0}:"selection"in document?self.hasTextSelected=function(){return"None"!=document.selection.type}:self.hasTextSelected=function(){return!1},self.onselectionstart=function(e){self.ispage||(self.selectiondrag=self.win.offset())},self.onselectionend=function(e){self.selectiondrag=!1},self.onselectiondrag=function(e){self.selectiondrag&&self.hasTextSelected()&&self.debounced("selectionscroll",function(){checkSelectionScroll(e)},250)}}cap.hasw3ctouch?(self.css(self.rail,{"touch-action":"none"}),self.css(self.cursor,{"touch-action":"none"}),self.bind(self.win,"pointerdown",self.ontouchstart),self.bind(document,"pointerup",self.ontouchend),self.bind(document,"pointermove",self.ontouchmove)):cap.hasmstouch?(self.css(self.rail,{"-ms-touch-action":"none"}),self.css(self.cursor,{"-ms-touch-action":"none"}),self.bind(self.win,"MSPointerDown",self.ontouchstart),self.bind(document,"MSPointerUp",self.ontouchend),self.bind(document,"MSPointerMove",self.ontouchmove),self.bind(self.cursor,"MSGestureHold",function(e){e.preventDefault()}),self.bind(self.cursor,"contextmenu",function(e){e.preventDefault()})):this.istouchcapable&&(self.bind(self.win,"touchstart",self.ontouchstart),self.bind(document,"touchend",self.ontouchend),self.bind(document,"touchcancel",self.ontouchend),self.bind(document,"touchmove",self.ontouchmove)),(self.opt.cursordragontouch||!cap.cantouch&&!self.opt.touchbehavior)&&(self.rail.css({cursor:"default"}),self.railh&&self.railh.css({cursor:"default"}),self.jqbind(self.rail,"mouseenter",function(){if(!self.ispage&&!self.win.is(":visible"))return!1;self.canshowonmouseevent&&self.showCursor(),self.rail.active=!0}),self.jqbind(self.rail,"mouseleave",function(){self.rail.active=!1,self.rail.drag||self.hideCursor()}),self.opt.sensitiverail&&(self.bind(self.rail,"click",function(e){self.doRailClick(e,!1,!1)}),self.bind(self.rail,"dblclick",function(e){self.doRailClick(e,!0,!1)}),self.bind(self.cursor,"click",function(e){self.cancelEvent(e)}),self.bind(self.cursor,"dblclick",function(e){self.cancelEvent(e)})),self.railh&&(self.jqbind(self.railh,"mouseenter",function(){if(!self.ispage&&!self.win.is(":visible"))return!1;self.canshowonmouseevent&&self.showCursor(),self.rail.active=!0}),self.jqbind(self.railh,"mouseleave",function(){self.rail.active=!1,self.rail.drag||self.hideCursor()}),self.opt.sensitiverail&&(self.bind(self.railh,"click",function(e){self.doRailClick(e,!1,!0)}),self.bind(self.railh,"dblclick",function(e){self.doRailClick(e,!0,!0)}),self.bind(self.cursorh,"click",function(e){self.cancelEvent(e)}),self.bind(self.cursorh,"dblclick",function(e){self.cancelEvent(e)})))),cap.cantouch||self.opt.touchbehavior?(self.bind(cap.hasmousecapture?self.win:document,"mouseup",self.ontouchend),self.bind(document,"mousemove",self.ontouchmove),self.onclick&&self.bind(document,"click",self.onclick),self.opt.cursordragontouch&&(self.bind(self.cursor,"mousedown",self.onmousedown),self.bind(self.cursor,"mouseup",self.onmouseup),self.cursorh&&self.bind(self.cursorh,"mousedown",function(e){self.onmousedown(e,!0)}),self.cursorh&&self.bind(self.cursorh,"mouseup",self.onmouseup))):(self.bind(cap.hasmousecapture?self.win:document,"mouseup",self.onmouseup),self.bind(document,"mousemove",self.onmousemove),self.onclick&&self.bind(document,"click",self.onclick),self.bind(self.cursor,"mousedown",self.onmousedown),self.bind(self.cursor,"mouseup",self.onmouseup),self.railh&&(self.bind(self.cursorh,"mousedown",function(e){self.onmousedown(e,!0)}),self.bind(self.cursorh,"mouseup",self.onmouseup)),!self.ispage&&self.opt.enablescrollonselection&&(self.bind(self.win[0],"mousedown",self.onselectionstart),self.bind(document,"mouseup",self.onselectionend),self.bind(self.cursor,"mouseup",self.onselectionend),self.cursorh&&self.bind(self.cursorh,"mouseup",self.onselectionend),self.bind(document,"mousemove",self.onselectiondrag)),self.zoom&&(self.jqbind(self.zoom,"mouseenter",function(){self.canshowonmouseevent&&self.showCursor(),self.rail.active=!0}),self.jqbind(self.zoom,"mouseleave",function(){self.rail.active=!1,self.rail.drag||self.hideCursor()}))),self.opt.enablemousewheel&&(self.isiframe||self.bind(cap.isie&&self.ispage?document:self.win,"mousewheel",self.onmousewheel),self.bind(self.rail,"mousewheel",self.onmousewheel),self.railh&&self.bind(self.railh,"mousewheel",self.onmousewheelhr)),self.ispage||cap.cantouch||/HTML|^BODY/.test(self.win[0].nodeName)||(self.win.attr("tabindex")||self.win.attr({tabindex:tabindexcounter++}),self.jqbind(self.win,"focus",function(e){domfocus=self.getTarget(e).id||!0,self.hasfocus=!0,self.canshowonmouseevent&&self.noticeCursor()}),self.jqbind(self.win,"blur",function(e){domfocus=!1,self.hasfocus=!1}),self.jqbind(self.win,"mouseenter",function(e){mousefocus=self.getTarget(e).id||!0,self.hasmousefocus=!0,self.canshowonmouseevent&&self.noticeCursor()}),self.jqbind(self.win,"mouseleave",function(){mousefocus=!1,self.hasmousefocus=!1,self.rail.drag||self.hideCursor()}))}if(self.onkeypress=function(e){if(self.railslocked&&0==self.page.maxh)return!0;e=e?e:window.e;var tg=self.getTarget(e);if(tg&&/INPUT|TEXTAREA|SELECT|OPTION/.test(tg.nodeName)){if(!(tg.getAttribute("type")||tg.type||!1)||!/submit|button|cancel/i.tp)return!0}if($(tg).attr("contenteditable"))return!0;if(self.hasfocus||self.hasmousefocus&&!domfocus||self.ispage&&!domfocus&&!mousefocus){var key=e.keyCode;if(self.railslocked&&27!=key)return self.cancelEvent(e);var ctrl=e.ctrlKey||!1,shift=e.shiftKey||!1,ret=!1;switch(key){case 38:case 63233:self.doScrollBy(72),ret=!0;break;case 40:case 63235:self.doScrollBy(-72),ret=!0;break;case 37:case 63232:self.railh&&(ctrl?self.doScrollLeft(0):self.doScrollLeftBy(72),ret=!0);break;case 39:case 63234:self.railh&&(ctrl?self.doScrollLeft(self.page.maxw):self.doScrollLeftBy(-72),ret=!0);break;case 33:case 63276:self.doScrollBy(self.view.h),ret=!0;break;case 34:case 63277:self.doScrollBy(-self.view.h),ret=!0;break;case 36:case 63273:self.railh&&ctrl?self.doScrollPos(0,0):self.doScrollTo(0),ret=!0;break;case 35:case 63275:self.railh&&ctrl?self.doScrollPos(self.page.maxw,self.page.maxh):self.doScrollTo(self.page.maxh),ret=!0;break;case 32:self.opt.spacebarenabled&&(shift?self.doScrollBy(self.view.h):self.doScrollBy(-self.view.h),ret=!0);break;case 27:self.zoomactive&&(self.doZoom(),ret=!0)}if(ret)return self.cancelEvent(e)}},self.opt.enablekeyboard&&self.bind(document,cap.isopera&&!cap.isopera12?"keypress":"keydown",self.onkeypress),self.bind(document,"keydown",function(e){(e.ctrlKey||!1)&&(self.wheelprevented=!0)}),self.bind(document,"keyup",function(e){e.ctrlKey||!1||(self.wheelprevented=!1)}),self.bind(window,"blur",function(e){self.wheelprevented=!1}),self.bind(window,"resize",self.lazyResize),self.bind(window,"orientationchange",self.lazyResize),self.bind(window,"load",self.lazyResize),cap.ischrome&&!self.ispage&&!self.haswrapper){var tmp=self.win.attr("style"),ww=parseFloat(self.win.css("width"))+1;self.win.css("width",ww),self.synched("chromefix",function(){self.win.attr("style",tmp)})}self.onAttributeChange=function(e){self.lazyResize(self.isieold?250:30)},ClsMutationObserver!==!1&&(self.observerbody=new ClsMutationObserver(function(mutations){if(mutations.forEach(function(mut){if("attributes"==mut.type)return $("body").hasClass("modal-open")&&!$.contains($(".modal-dialog")[0],self.doc[0])?self.hide():self.show()}),document.body.scrollHeight!=self.page.maxh)return self.lazyResize(30)}),self.observerbody.observe(document.body,{childList:!0,subtree:!0,characterData:!1,attributes:!0,attributeFilter:["class"]})),self.ispage||self.haswrapper||(ClsMutationObserver!==!1?(self.observer=new ClsMutationObserver(function(mutations){mutations.forEach(self.onAttributeChange)}),self.observer.observe(self.win[0],{childList:!0,characterData:!1,attributes:!0,subtree:!1}),self.observerremover=new ClsMutationObserver(function(mutations){mutations.forEach(function(mo){if(mo.removedNodes.length>0)for(var dd in mo.removedNodes)if(self&&mo.removedNodes[dd]==self.win[0])return self.remove()})}),self.observerremover.observe(self.win[0].parentNode,{childList:!0,characterData:!1,attributes:!1,subtree:!1})):(self.bind(self.win,cap.isie&&!cap.isie9?"propertychange":"DOMAttrModified",self.onAttributeChange),cap.isie9&&self.win[0].attachEvent("onpropertychange",self.onAttributeChange),self.bind(self.win,"DOMNodeRemoved",function(e){e.target==self.win[0]&&self.remove()}))),!self.ispage&&self.opt.boxzoom&&self.bind(window,"resize",self.resizeZoom),self.istextarea&&(self.bind(self.win,"keydown",self.lazyResize),self.bind(self.win,"mouseup",self.lazyResize)),self.lazyResize(30)}if("IFRAME"==this.doc[0].nodeName){var oniframeload=function(){self.iframexd=!1;var doc;try{doc="contentDocument"in this?this.contentDocument:this.contentWindow.document;doc.domain}catch(e){self.iframexd=!0,doc=!1}if(self.iframexd)return"console"in window&&console.log("NiceScroll error: policy restriced iframe"),!0;if(self.forcescreen=!0,self.isiframe&&(self.iframe={doc:$(doc),html:self.doc.contents().find("html")[0],body:self.doc.contents().find("body")[0]},self.getContentSize=function(){return{w:Math.max(self.iframe.html.scrollWidth,self.iframe.body.scrollWidth),h:Math.max(self.iframe.html.scrollHeight,self.iframe.body.scrollHeight)}},self.docscroll=$(self.iframe.body)),!cap.isios&&self.opt.iframeautoresize&&!self.isiframe){self.win.scrollTop(0),self.doc.height("");var hh=Math.max(doc.getElementsByTagName("html")[0].scrollHeight,doc.body.scrollHeight);self.doc.height(hh)}self.lazyResize(30),cap.isie7&&self.css($(self.iframe.html),{"overflow-y":"hidden"}),self.css($(self.iframe.body),{"overflow-y":"hidden"}),cap.isios&&self.haswrapper&&self.css($(doc.body),{"-webkit-transform":"translate3d(0,0,0)"}),"contentWindow"in this?self.bind(this.contentWindow,"scroll",self.onscroll):self.bind(doc,"scroll",self.onscroll),self.opt.enablemousewheel&&self.bind(doc,"mousewheel",self.onmousewheel),self.opt.enablekeyboard&&self.bind(doc,cap.isopera?"keypress":"keydown",self.onkeypress),(cap.cantouch||self.opt.touchbehavior)&&(self.bind(doc,"mousedown",self.ontouchstart),self.bind(doc,"mousemove",function(e){return self.ontouchmove(e,!0)}),self.opt.grabcursorenabled&&cap.cursorgrabvalue&&self.css($(doc.body),{cursor:cap.cursorgrabvalue})),self.bind(doc,"mouseup",self.ontouchend),self.zoom&&(self.opt.dblclickzoom&&self.bind(doc,"dblclick",self.doZoom),self.ongesturezoom&&self.bind(doc,"gestureend",self.ongesturezoom))};this.doc[0].readyState&&"complete"==this.doc[0].readyState&&setTimeout(function(){oniframeload.call(self.doc[0],!1)},500),self.bind(this.doc,"load",oniframeload)}},this.showCursor=function(py,px){if(self.cursortimeout&&(clearTimeout(self.cursortimeout),self.cursortimeout=0),self.rail){if(self.autohidedom&&(self.autohidedom.stop().css({opacity:self.opt.cursoropacitymax}),self.cursoractive=!0),self.rail.drag&&1==self.rail.drag.pt||(void 0!==py&&py!==!1&&(self.scroll.y=Math.round(1*py/self.scrollratio.y)),void 0!==px&&(self.scroll.x=Math.round(1*px/self.scrollratio.x))),self.cursor.css({height:self.cursorheight,top:self.scroll.y}),self.cursorh){var lx=self.hasreversehr?self.scrollvaluemaxw-self.scroll.x:self.scroll.x;!self.rail.align&&self.rail.visibility?self.cursorh.css({width:self.cursorwidth,left:lx+self.rail.width}):self.cursorh.css({width:self.cursorwidth,left:lx}),self.cursoractive=!0}self.zoom&&self.zoom.stop().css({opacity:self.opt.cursoropacitymax})}},this.hideCursor=function(tm){self.cursortimeout||self.rail&&self.autohidedom&&(self.hasmousefocus&&"leave"==self.opt.autohidemode||(self.cursortimeout=setTimeout(function(){self.rail.active&&self.showonmouseevent||(self.autohidedom.stop().animate({opacity:self.opt.cursoropacitymin}),self.zoom&&self.zoom.stop().animate({opacity:self.opt.cursoropacitymin}),self.cursoractive=!1),self.cursortimeout=0},tm||self.opt.hidecursordelay)))},this.noticeCursor=function(tm,py,px){self.showCursor(py,px),self.rail.active||self.hideCursor(tm)},this.getContentSize=self.ispage?function(){return{w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}}:self.haswrapper?function(){return{w:self.doc.outerWidth()+parseInt(self.win.css("paddingLeft"))+parseInt(self.win.css("paddingRight")),h:self.doc.outerHeight()+parseInt(self.win.css("paddingTop"))+parseInt(self.win.css("paddingBottom"))}}:function(){return{w:self.docscroll[0].scrollWidth,h:self.docscroll[0].scrollHeight}},this.onResize=function(e,page){if(!self||!self.win)return!1;if(!self.haswrapper&&!self.ispage){if("none"==self.win.css("display"))return self.visibility&&self.hideRail().hideRailHr(),!1;self.hidden||self.visibility||self.showRail().showRailHr()}var premaxh=self.page.maxh,premaxw=self.page.maxw,preview={h:self.view.h,w:self.view.w};if(self.view={w:self.ispage?self.win.width():parseInt(self.win[0].clientWidth),h:self.ispage?self.win.height():parseInt(self.win[0].clientHeight)},self.page=page?page:self.getContentSize(),self.page.maxh=Math.max(0,self.page.h-self.view.h),self.page.maxw=Math.max(0,self.page.w-self.view.w),self.page.maxh==premaxh&&self.page.maxw==premaxw&&self.view.w==preview.w&&self.view.h==preview.h){if(self.ispage)return self;var pos=self.win.offset();if(self.lastposition){var lst=self.lastposition;if(lst.top==pos.top&&lst.left==pos.left)return self}self.lastposition=pos}return 0==self.page.maxh?(self.hideRail(),self.scrollvaluemax=0,self.scroll.y=0,self.scrollratio.y=0,self.cursorheight=0,self.setScrollTop(0),self.rail&&(self.rail.scrollable=!1)):(self.page.maxh-=self.opt.railpadding.top+self.opt.railpadding.bottom,self.rail.scrollable=!0),0==self.page.maxw?(self.hideRailHr(),self.scrollvaluemaxw=0,self.scroll.x=0,self.scrollratio.x=0,self.cursorwidth=0,self.setScrollLeft(0),self.railh&&(self.railh.scrollable=!1)):(self.page.maxw-=self.opt.railpadding.left+self.opt.railpadding.right,self.railh&&(self.railh.scrollable=self.opt.horizrailenabled)),self.railslocked=self.locked||0==self.page.maxh&&0==self.page.maxw,self.railslocked?(self.ispage||self.updateScrollBar(self.view),!1):(self.hidden||self.visibility?!self.railh||self.hidden||self.railh.visibility||self.showRailHr():self.showRail().showRailHr(),self.istextarea&&self.win.css("resize")&&"none"!=self.win.css("resize")&&(self.view.h-=20),self.cursorheight=Math.min(self.view.h,Math.round(self.view.h*(self.view.h/self.page.h))),self.cursorheight=self.opt.cursorfixedheight?self.opt.cursorfixedheight:Math.max(self.opt.cursorminheight,self.cursorheight),self.cursorwidth=Math.min(self.view.w,Math.round(self.view.w*(self.view.w/self.page.w))),self.cursorwidth=self.opt.cursorfixedheight?self.opt.cursorfixedheight:Math.max(self.opt.cursorminheight,self.cursorwidth),self.scrollvaluemax=self.view.h-self.cursorheight-self.cursor.hborder-(self.opt.railpadding.top+self.opt.railpadding.bottom),self.railh&&(self.railh.width=self.page.maxh>0?self.view.w-self.rail.width:self.view.w,self.scrollvaluemaxw=self.railh.width-self.cursorwidth-self.cursorh.wborder-(self.opt.railpadding.left+self.opt.railpadding.right)),self.ispage||self.updateScrollBar(self.view),self.scrollratio={x:self.page.maxw/self.scrollvaluemaxw,y:self.page.maxh/self.scrollvaluemax},self.getScrollTop()>self.page.maxh?self.doScrollTop(self.page.maxh):(self.scroll.y=Math.round(self.getScrollTop()*(1/self.scrollratio.y)),self.scroll.x=Math.round(self.getScrollLeft()*(1/self.scrollratio.x)),self.cursoractive&&self.noticeCursor()),self.scroll.y&&0==self.getScrollTop()&&self.doScrollTo(Math.floor(self.scroll.y*self.scrollratio.y)),self)},this.resize=self.onResize,this.lazyResize=function(tm){return tm=isNaN(tm)?30:tm,self.debounced("resize",self.resize,tm),self},this.jqbind=function(dom,name,fn){self.events.push({e:dom,n:name,f:fn,q:!0}),$(dom).bind(name,fn)},this.bind=function(dom,name,fn,bubble){var el="jquery"in dom?dom[0]:dom;if("mousewheel"==name)if("onwheel"in self.win)self._bind(el,"wheel",fn,bubble||!1);else{var wname=void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";_modernWheelEvent(el,wname,fn,bubble||!1),"DOMMouseScroll"==wname&&_modernWheelEvent(el,"MozMousePixelScroll",fn,bubble||!1)}else if(el.addEventListener){if(cap.cantouch&&/mouseup|mousedown|mousemove/.test(name)){var tt="mousedown"==name?"touchstart":"mouseup"==name?"touchend":"touchmove";self._bind(el,tt,function(e){if(e.touches){if(e.touches.length<2){var ev=e.touches.length?e.touches[0]:e;ev.original=e,fn.call(this,ev)}}else if(e.changedTouches){var ev=e.changedTouches[0];ev.original=e,fn.call(this,ev)}},bubble||!1)}self._bind(el,name,fn,bubble||!1),cap.cantouch&&"mouseup"==name&&self._bind(el,"touchcancel",fn,bubble||!1)}else self._bind(el,name,function(e){return e=e||window.event||!1,e&&e.srcElement&&(e.target=e.srcElement),"pageY"in e||(e.pageX=e.clientX+document.documentElement.scrollLeft,e.pageY=e.clientY+document.documentElement.scrollTop),fn.call(el,e)!==!1&&bubble!==!1||self.cancelEvent(e)})},cap.haseventlistener?(this._bind=function(el,name,fn,bubble){self.events.push({e:el,n:name,f:fn,b:bubble,q:!1}),el.addEventListener(name,fn,bubble||!1)},this.cancelEvent=function(e){if(!e)return!1;var e=e.original?e.original:e;return e.preventDefault(),e.stopPropagation(),e.preventManipulation&&e.preventManipulation(),!1},this.stopPropagation=function(e){if(!e)return!1;var e=e.original?e.original:e;return e.stopPropagation(),!1},this._unbind=function(el,name,fn,bub){el.removeEventListener(name,fn,bub)}):(this._bind=function(el,name,fn,bubble){self.events.push({e:el,n:name,f:fn,b:bubble,q:!1}),el.attachEvent?el.attachEvent("on"+name,fn):el["on"+name]=fn},this.cancelEvent=function(e){var e=window.event||!1;return!!e&&(e.cancelBubble=!0,e.cancel=!0,e.returnValue=!1,!1)},this.stopPropagation=function(e){var e=window.event||!1;return!!e&&(e.cancelBubble=!0,!1)},this._unbind=function(el,name,fn,bub){el.detachEvent?el.detachEvent("on"+name,fn):el["on"+name]=!1}),this.unbindAll=function(){for(var a=0;a<self.events.length;a++){var r=self.events[a];r.q?r.e.unbind(r.n,r.f):self._unbind(r.e,r.n,r.f,r.b)}},this.showRail=function(){return 0==self.page.maxh||!self.ispage&&"none"==self.win.css("display")||(self.visibility=!0,self.rail.visibility=!0,self.rail.css("display","block")),self},this.showRailHr=function(){return self.railh?(0==self.page.maxw||!self.ispage&&"none"==self.win.css("display")||(self.railh.visibility=!0,self.railh.css("display","block")),self):self},this.hideRail=function(){return self.visibility=!1,self.rail.visibility=!1,self.rail.css("display","none"),self},this.hideRailHr=function(){return self.railh?(self.railh.visibility=!1,self.railh.css("display","none"),self):self},this.show=function(){return self.hidden=!1,self.railslocked=!1,self.showRail().showRailHr()},this.hide=function(){return self.hidden=!0,self.railslocked=!0,self.hideRail().hideRailHr()},this.toggle=function(){return self.hidden?self.show():self.hide()},this.remove=function(){self.stop(),self.cursortimeout&&clearTimeout(self.cursortimeout),self.debouncedelayed&&clearTimeout(self.debouncedelayed),self.doZoomOut(),self.unbindAll(),cap.isie9&&self.win[0].detachEvent("onpropertychange",self.onAttributeChange),self.observer!==!1&&self.observer.disconnect(),self.observerremover!==!1&&self.observerremover.disconnect(),self.observerbody!==!1&&self.observerbody.disconnect(),self.events=null,self.cursor&&self.cursor.remove(),self.cursorh&&self.cursorh.remove(),self.rail&&self.rail.remove(),self.railh&&self.railh.remove(),self.zoom&&self.zoom.remove();for(var a=0;a<self.saved.css.length;a++){var d=self.saved.css[a];d[0].css(d[1],void 0===d[2]?"":d[2])}self.saved=!1,self.me.data("__nicescroll","");var lst=$.nicescroll;lst.each(function(i){if(this&&this.id===self.id){delete lst[i];for(var b=++i;b<lst.length;b++,i++)lst[i]=lst[b];lst.length--,lst.length&&delete lst[lst.length]}});for(var i in self)self[i]=null,delete self[i];self=null},this.scrollstart=function(fn){return this.onscrollstart=fn,self},this.scrollend=function(fn){return this.onscrollend=fn,self},this.scrollcancel=function(fn){return this.onscrollcancel=fn,self},this.zoomin=function(fn){return this.onzoomin=fn,self},this.zoomout=function(fn){return this.onzoomout=fn,self},this.isScrollable=function(e){var dom=e.target?e.target:e;if("OPTION"==dom.nodeName)return!0;for(;dom&&1==dom.nodeType&&!/^BODY|HTML/.test(dom.nodeName);){var dd=$(dom),ov=dd.css("overflowY")||dd.css("overflowX")||dd.css("overflow")||"";if(/scroll|auto/.test(ov))return dom.clientHeight!=dom.scrollHeight;dom=!!dom.parentNode&&dom.parentNode}return!1},this.getViewport=function(me){for(var dom=!(!me||!me.parentNode)&&me.parentNode;dom&&1==dom.nodeType&&!/^BODY|HTML/.test(dom.nodeName);){var dd=$(dom);if(/fixed|absolute/.test(dd.css("position")))return dd;var ov=dd.css("overflowY")||dd.css("overflowX")||dd.css("overflow")||"";if(/scroll|auto/.test(ov)&&dom.clientHeight!=dom.scrollHeight)return dd;if(dd.getNiceScroll().length>0)return dd;dom=!!dom.parentNode&&dom.parentNode}return!1},this.triggerScrollEnd=function(){if(self.onscrollend){var px=self.getScrollLeft(),py=self.getScrollTop(),info={type:"scrollend",current:{x:px,y:py},end:{x:px,y:py}};self.onscrollend.call(self,info)}},this.onmousewheel=function(e){if(!self.wheelprevented){if(self.railslocked)return self.debounced("checkunlock",self.resize,250),!0;if(self.rail.drag)return self.cancelEvent(e);if("auto"==self.opt.oneaxismousemode&&0!=e.deltaX&&(self.opt.oneaxismousemode=!1),self.opt.oneaxismousemode&&0==e.deltaX&&!self.rail.scrollable)return!self.railh||!self.railh.scrollable||self.onmousewheelhr(e);var nw=+new Date,chk=!1;if(self.opt.preservenativescrolling&&self.checkarea+600<nw&&(self.nativescrollingarea=self.isScrollable(e),chk=!0),self.checkarea=nw,self.nativescrollingarea)return!0;var ret=execScrollWheel(e,!1,chk);return ret&&(self.checkarea=0),ret}},this.onmousewheelhr=function(e){if(!self.wheelprevented){if(self.railslocked||!self.railh.scrollable)return!0;if(self.rail.drag)return self.cancelEvent(e);var nw=+new Date,chk=!1;return self.opt.preservenativescrolling&&self.checkarea+600<nw&&(self.nativescrollingarea=self.isScrollable(e),chk=!0),self.checkarea=nw,!!self.nativescrollingarea||(self.railslocked?self.cancelEvent(e):execScrollWheel(e,!0,chk))}},this.stop=function(){return self.cancelScroll(),self.scrollmon&&self.scrollmon.stop(),self.cursorfreezed=!1,self.scroll.y=Math.round(self.getScrollTop()*(1/self.scrollratio.y)),self.noticeCursor(),self},this.getTransitionSpeed=function(dif){var sp=Math.round(10*self.opt.scrollspeed),ex=Math.min(sp,Math.round(dif/20*self.opt.scrollspeed));return ex>20?ex:0},self.opt.smoothscroll?self.ishwscroll&&cap.hastransition&&self.opt.usetransition&&self.opt.smoothscroll?(this.prepareTransition=function(dif,istime){var ex=istime?dif>20?dif:0:self.getTransitionSpeed(dif),trans=ex?cap.prefixstyle+"transform "+ex+"ms ease-out":"";return self.lasttransitionstyle&&self.lasttransitionstyle==trans||(self.lasttransitionstyle=trans,self.doc.css(cap.transitionstyle,trans)),ex},this.doScrollLeft=function(x,spd){var y=self.scrollrunning?self.newscrolly:self.getScrollTop();self.doScrollPos(x,y,spd)},this.doScrollTop=function(y,spd){var x=self.scrollrunning?self.newscrollx:self.getScrollLeft();self.doScrollPos(x,y,spd)},this.doScrollPos=function(x,y,spd){var py=self.getScrollTop(),px=self.getScrollLeft();return((self.newscrolly-py)*(y-py)<0||(self.newscrollx-px)*(x-px)<0)&&self.cancelScroll(),0==self.opt.bouncescroll&&(y<0?y=0:y>self.page.maxh&&(y=self.page.maxh),x<0?x=0:x>self.page.maxw&&(x=self.page.maxw)),(!self.scrollrunning||x!=self.newscrollx||y!=self.newscrolly)&&(self.newscrolly=y,self.newscrollx=x,self.newscrollspeed=spd||!1,!self.timer&&void(self.timer=setTimeout(function(){var top=self.getScrollTop(),lft=self.getScrollLeft(),dst={};dst.x=x-lft,dst.y=y-top,dst.px=lft,dst.py=top;var dd=Math.round(Math.sqrt(Math.pow(dst.x,2)+Math.pow(dst.y,2))),ms=self.newscrollspeed&&self.newscrollspeed>1?self.newscrollspeed:self.getTransitionSpeed(dd);if(self.newscrollspeed&&self.newscrollspeed<=1&&(ms*=self.newscrollspeed),self.prepareTransition(ms,!0),self.timerscroll&&self.timerscroll.tm&&clearInterval(self.timerscroll.tm),ms>0){if(!self.scrollrunning&&self.onscrollstart){var info={type:"scrollstart",current:{x:lft,y:top},request:{x:x,y:y},end:{x:self.newscrollx,y:self.newscrolly},speed:ms};self.onscrollstart.call(self,info)}cap.transitionend?self.scrollendtrapped||(self.scrollendtrapped=!0,self.bind(self.doc,cap.transitionend,self.onScrollTransitionEnd,!1)):(self.scrollendtrapped&&clearTimeout(self.scrollendtrapped),self.scrollendtrapped=setTimeout(self.onScrollTransitionEnd,ms));var py=top,px=lft;self.timerscroll={bz:new BezierClass(py,self.newscrolly,ms,0,0,.58,1),bh:new BezierClass(px,self.newscrollx,ms,0,0,.58,1)},self.cursorfreezed||(self.timerscroll.tm=setInterval(function(){self.showCursor(self.getScrollTop(),self.getScrollLeft())},60))}self.synched("doScroll-set",function(){self.timer=0,self.scrollendtrapped&&(self.scrollrunning=!0),self.setScrollTop(self.newscrolly),self.setScrollLeft(self.newscrollx),self.scrollendtrapped||self.onScrollTransitionEnd()})},50)))},this.cancelScroll=function(){if(!self.scrollendtrapped)return!0;var py=self.getScrollTop(),px=self.getScrollLeft();return self.scrollrunning=!1,cap.transitionend||clearTimeout(cap.transitionend),self.scrollendtrapped=!1,self._unbind(self.doc[0],cap.transitionend,self.onScrollTransitionEnd),self.prepareTransition(0),self.setScrollTop(py),self.railh&&self.setScrollLeft(px),self.timerscroll&&self.timerscroll.tm&&clearInterval(self.timerscroll.tm),self.timerscroll=!1,self.cursorfreezed=!1,self.showCursor(py,px),self},this.onScrollTransitionEnd=function(){self.scrollendtrapped&&self._unbind(self.doc[0],cap.transitionend,self.onScrollTransitionEnd),self.scrollendtrapped=!1,self.prepareTransition(0),self.timerscroll&&self.timerscroll.tm&&clearInterval(self.timerscroll.tm),self.timerscroll=!1;var py=self.getScrollTop(),px=self.getScrollLeft();if(self.setScrollTop(py),self.railh&&self.setScrollLeft(px),self.noticeCursor(!1,py,px),self.cursorfreezed=!1,py<0?py=0:py>self.page.maxh&&(py=self.page.maxh),px<0?px=0:px>self.page.maxw&&(px=self.page.maxw),py!=self.newscrolly||px!=self.newscrollx)return self.doScrollPos(px,py,self.opt.snapbackspeed);self.onscrollend&&self.scrollrunning&&self.triggerScrollEnd(),self.scrollrunning=!1}):(this.doScrollLeft=function(x,spd){var y=self.scrollrunning?self.newscrolly:self.getScrollTop();self.doScrollPos(x,y,spd)},this.doScrollTop=function(y,spd){var x=self.scrollrunning?self.newscrollx:self.getScrollLeft();self.doScrollPos(x,y,spd)},this.doScrollPos=function(x,y,spd){function scrolling(){if(self.cancelAnimationFrame)return!0;if(self.scrollrunning=!0,sync=1-sync)return self.timer=setAnimationFrame(scrolling)||1;var sx,sy,done=0,sc=sy=self.getScrollTop();if(self.dst.ay){sc=self.bzscroll?self.dst.py+self.bzscroll.getNow()*self.dst.ay:self.newscrolly;var dr=sc-sy;(dr<0&&sc<self.newscrolly||dr>0&&sc>self.newscrolly)&&(sc=self.newscrolly),self.setScrollTop(sc),sc==self.newscrolly&&(done=1)}else done=1;var scx=sx=self.getScrollLeft();if(self.dst.ax){scx=self.bzscroll?self.dst.px+self.bzscroll.getNow()*self.dst.ax:self.newscrollx;var dr=scx-sx;(dr<0&&scx<self.newscrollx||dr>0&&scx>self.newscrollx)&&(scx=self.newscrollx),self.setScrollLeft(scx),scx==self.newscrollx&&(done+=1)}else done+=1;2==done?(self.timer=0,self.cursorfreezed=!1,self.bzscroll=!1,self.scrollrunning=!1,sc<0?sc=0:sc>self.page.maxh&&(sc=self.page.maxh),scx<0?scx=0:scx>self.page.maxw&&(scx=self.page.maxw),scx!=self.newscrollx||sc!=self.newscrolly?self.doScrollPos(scx,sc):self.onscrollend&&self.triggerScrollEnd()):self.timer=setAnimationFrame(scrolling)||1}var y=void 0===y||y===!1?self.getScrollTop(!0):y;if(self.timer&&self.newscrolly==y&&self.newscrollx==x)return!0;self.timer&&clearAnimationFrame(self.timer),self.timer=0;var py=self.getScrollTop(),px=self.getScrollLeft();((self.newscrolly-py)*(y-py)<0||(self.newscrollx-px)*(x-px)<0)&&self.cancelScroll(),self.newscrolly=y,self.newscrollx=x,self.bouncescroll&&self.rail.visibility||(self.newscrolly<0?self.newscrolly=0:self.newscrolly>self.page.maxh&&(self.newscrolly=self.page.maxh)),self.bouncescroll&&self.railh.visibility||(self.newscrollx<0?self.newscrollx=0:self.newscrollx>self.page.maxw&&(self.newscrollx=self.page.maxw)),self.dst={},self.dst.x=x-px,self.dst.y=y-py,self.dst.px=px,self.dst.py=py;var dst=Math.round(Math.sqrt(Math.pow(self.dst.x,2)+Math.pow(self.dst.y,2)));self.dst.ax=self.dst.x/dst,self.dst.ay=self.dst.y/dst;var pa=0,pe=dst;0==self.dst.x?(pa=py,pe=y,self.dst.ay=1,self.dst.py=0):0==self.dst.y&&(pa=px,pe=x,self.dst.ax=1,self.dst.px=0);var ms=self.getTransitionSpeed(dst);if(spd&&spd<=1&&(ms*=spd),
self.bzscroll=ms>0&&(self.bzscroll?self.bzscroll.update(pe,ms):new BezierClass(pa,pe,ms,0,1,0,1)),!self.timer){(py==self.page.maxh&&y>=self.page.maxh||px==self.page.maxw&&x>=self.page.maxw)&&self.checkContentSize();var sync=1;if(self.cancelAnimationFrame=!1,self.timer=1,self.onscrollstart&&!self.scrollrunning){var info={type:"scrollstart",current:{x:px,y:py},request:{x:x,y:y},end:{x:self.newscrollx,y:self.newscrolly},speed:ms};self.onscrollstart.call(self,info)}scrolling(),(py==self.page.maxh&&y>=py||px==self.page.maxw&&x>=px)&&self.checkContentSize(),self.noticeCursor()}},this.cancelScroll=function(){return self.timer&&clearAnimationFrame(self.timer),self.timer=0,self.bzscroll=!1,self.scrollrunning=!1,self}):(this.doScrollLeft=function(x,spd){var y=self.getScrollTop();self.doScrollPos(x,y,spd)},this.doScrollTop=function(y,spd){var x=self.getScrollLeft();self.doScrollPos(x,y,spd)},this.doScrollPos=function(x,y,spd){var nx=x>self.page.maxw?self.page.maxw:x;nx<0&&(nx=0);var ny=y>self.page.maxh?self.page.maxh:y;ny<0&&(ny=0),self.synched("scroll",function(){self.setScrollTop(ny),self.setScrollLeft(nx)})},this.cancelScroll=function(){}),this.doScrollBy=function(stp,relative){var ny=0;if(relative)ny=Math.floor((self.scroll.y-stp)*self.scrollratio.y);else{ny=(self.timer?self.newscrolly:self.getScrollTop(!0))-stp}if(self.bouncescroll){var haf=Math.round(self.view.h/2);ny<-haf?ny=-haf:ny>self.page.maxh+haf&&(ny=self.page.maxh+haf)}self.cursorfreezed=!1;var py=self.getScrollTop(!0);return ny<0&&py<=0?self.noticeCursor():ny>self.page.maxh&&py>=self.page.maxh?(self.checkContentSize(),self.noticeCursor()):void self.doScrollTop(ny)},this.doScrollLeftBy=function(stp,relative){var nx=0;if(relative)nx=Math.floor((self.scroll.x-stp)*self.scrollratio.x);else{nx=(self.timer?self.newscrollx:self.getScrollLeft(!0))-stp}if(self.bouncescroll){var haf=Math.round(self.view.w/2);nx<-haf?nx=-haf:nx>self.page.maxw+haf&&(nx=self.page.maxw+haf)}self.cursorfreezed=!1;var px=self.getScrollLeft(!0);return nx<0&&px<=0?self.noticeCursor():nx>self.page.maxw&&px>=self.page.maxw?self.noticeCursor():void self.doScrollLeft(nx)},this.doScrollTo=function(pos,relative){var ny=relative?Math.round(pos*self.scrollratio.y):pos;ny<0?ny=0:ny>self.page.maxh&&(ny=self.page.maxh),self.cursorfreezed=!1,self.doScrollTop(pos)},this.checkContentSize=function(){var pg=self.getContentSize();pg.h==self.page.h&&pg.w==self.page.w||self.resize(!1,pg)},self.onscroll=function(e){self.rail.drag||self.cursorfreezed||self.synched("scroll",function(){self.scroll.y=Math.round(self.getScrollTop()*(1/self.scrollratio.y)),self.railh&&(self.scroll.x=Math.round(self.getScrollLeft()*(1/self.scrollratio.x))),self.noticeCursor()})},self.bind(self.docscroll,"scroll",self.onscroll),this.doZoomIn=function(e){if(!self.zoomactive){self.zoomactive=!0,self.zoomrestore={style:{}};var lst=["position","top","left","zIndex","backgroundColor","marginTop","marginBottom","marginLeft","marginRight"],win=self.win[0].style;for(var a in lst){var pp=lst[a];self.zoomrestore.style[pp]=void 0!==win[pp]?win[pp]:""}self.zoomrestore.style.width=self.win.css("width"),self.zoomrestore.style.height=self.win.css("height"),self.zoomrestore.padding={w:self.win.outerWidth()-self.win.width(),h:self.win.outerHeight()-self.win.height()},cap.isios4&&(self.zoomrestore.scrollTop=$(window).scrollTop(),$(window).scrollTop(0)),self.win.css({position:cap.isios4?"absolute":"fixed",top:0,left:0,"z-index":globalmaxzindex+100,margin:"0px"});var bkg=self.win.css("backgroundColor");return(""==bkg||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(bkg))&&self.win.css("backgroundColor","#fff"),self.rail.css({"z-index":globalmaxzindex+101}),self.zoom.css({"z-index":globalmaxzindex+102}),self.zoom.css("backgroundPosition","0px -18px"),self.resizeZoom(),self.onzoomin&&self.onzoomin.call(self),self.cancelEvent(e)}},this.doZoomOut=function(e){if(self.zoomactive)return self.zoomactive=!1,self.win.css("margin",""),self.win.css(self.zoomrestore.style),cap.isios4&&$(window).scrollTop(self.zoomrestore.scrollTop),self.rail.css({"z-index":self.zindex}),self.zoom.css({"z-index":self.zindex}),self.zoomrestore=!1,self.zoom.css("backgroundPosition","0px 0px"),self.onResize(),self.onzoomout&&self.onzoomout.call(self),self.cancelEvent(e)},this.doZoom=function(e){return self.zoomactive?self.doZoomOut(e):self.doZoomIn(e)},this.resizeZoom=function(){if(self.zoomactive){var py=self.getScrollTop();self.win.css({width:$(window).width()-self.zoomrestore.padding.w+"px",height:$(window).height()-self.zoomrestore.padding.h+"px"}),self.onResize(),self.setScrollTop(Math.min(self.page.maxh,py))}},this.init(),$.nicescroll.push(this)},ScrollMomentumClass2D=function(nc){var self=this;this.nc=nc,this.lastx=0,this.lasty=0,this.speedx=0,this.speedy=0,this.lasttime=0,this.steptime=0,this.snapx=!1,this.snapy=!1,this.demulx=0,this.demuly=0,this.lastscrollx=-1,this.lastscrolly=-1,this.chkx=0,this.chky=0,this.timer=0,this.time=function(){return+new Date},this.reset=function(px,py){self.stop();var now=self.time();self.steptime=0,self.lasttime=now,self.speedx=0,self.speedy=0,self.lastx=px,self.lasty=py,self.lastscrollx=-1,self.lastscrolly=-1},this.update=function(px,py){var now=self.time();self.steptime=now-self.lasttime,self.lasttime=now;var dy=py-self.lasty,dx=px-self.lastx,sy=self.nc.getScrollTop(),sx=self.nc.getScrollLeft(),newy=sy+dy,newx=sx+dx;self.snapx=newx<0||newx>self.nc.page.maxw,self.snapy=newy<0||newy>self.nc.page.maxh,self.speedx=dx,self.speedy=dy,self.lastx=px,self.lasty=py},this.stop=function(){self.nc.unsynched("domomentum2d"),self.timer&&clearTimeout(self.timer),self.timer=0,self.lastscrollx=-1,self.lastscrolly=-1},this.doSnapy=function(nx,ny){var snap=!1;ny<0?(ny=0,snap=!0):ny>self.nc.page.maxh&&(ny=self.nc.page.maxh,snap=!0),nx<0?(nx=0,snap=!0):nx>self.nc.page.maxw&&(nx=self.nc.page.maxw,snap=!0),snap?self.nc.doScrollPos(nx,ny,self.nc.opt.snapbackspeed):self.nc.triggerScrollEnd()},this.doMomentum=function(gp){var t=self.time(),l=gp?t+gp:self.lasttime,sl=self.nc.getScrollLeft(),st=self.nc.getScrollTop(),pageh=self.nc.page.maxh,pagew=self.nc.page.maxw;self.speedx=pagew>0?Math.min(60,self.speedx):0,self.speedy=pageh>0?Math.min(60,self.speedy):0;var chk=l&&t-l<=60;(st<0||st>pageh||sl<0||sl>pagew)&&(chk=!1);var sy=!(!self.speedy||!chk)&&self.speedy,sx=!(!self.speedx||!chk)&&self.speedx;if(sy||sx){var tm=Math.max(16,self.steptime);if(tm>50){var xm=tm/50;self.speedx*=xm,self.speedy*=xm,tm=50}self.demulxy=0,self.lastscrollx=self.nc.getScrollLeft(),self.chkx=self.lastscrollx,self.lastscrolly=self.nc.getScrollTop(),self.chky=self.lastscrolly;var nx=self.lastscrollx,ny=self.lastscrolly,onscroll=function(){var df=self.time()-t>600?.04:.02;self.speedx&&(nx=Math.floor(self.lastscrollx-self.speedx*(1-self.demulxy)),self.lastscrollx=nx,(nx<0||nx>pagew)&&(df=.1)),self.speedy&&(ny=Math.floor(self.lastscrolly-self.speedy*(1-self.demulxy)),self.lastscrolly=ny,(ny<0||ny>pageh)&&(df=.1)),self.demulxy=Math.min(1,self.demulxy+df),self.nc.synched("domomentum2d",function(){if(self.speedx){self.nc.getScrollLeft()!=self.chkx&&self.stop(),self.chkx=nx,self.nc.setScrollLeft(nx)}if(self.speedy){self.nc.getScrollTop()!=self.chky&&self.stop(),self.chky=ny,self.nc.setScrollTop(ny)}self.timer||(self.nc.hideCursor(),self.doSnapy(nx,ny))}),self.demulxy<1?self.timer=setTimeout(onscroll,tm):(self.stop(),self.nc.hideCursor(),self.doSnapy(nx,ny))};onscroll()}else self.doSnapy(self.nc.getScrollLeft(),self.nc.getScrollTop())}},_scrollTop=jQuery.fn.scrollTop;jQuery.cssHooks.pageYOffset={get:function(elem,computed,extra){var nice=$.data(elem,"__nicescroll")||!1;return nice&&nice.ishwscroll?nice.getScrollTop():_scrollTop.call(elem)},set:function(elem,value){var nice=$.data(elem,"__nicescroll")||!1;return nice&&nice.ishwscroll?nice.setScrollTop(parseInt(value)):_scrollTop.call(elem,value),this}},jQuery.fn.scrollTop=function(value){if(void 0===value){var nice=!!this[0]&&($.data(this[0],"__nicescroll")||!1);return nice&&nice.ishwscroll?nice.getScrollTop():_scrollTop.call(this)}return this.each(function(){var nice=$.data(this,"__nicescroll")||!1;nice&&nice.ishwscroll?nice.setScrollTop(parseInt(value)):_scrollTop.call($(this),value)})};var _scrollLeft=jQuery.fn.scrollLeft;$.cssHooks.pageXOffset={get:function(elem,computed,extra){var nice=$.data(elem,"__nicescroll")||!1;return nice&&nice.ishwscroll?nice.getScrollLeft():_scrollLeft.call(elem)},set:function(elem,value){var nice=$.data(elem,"__nicescroll")||!1;return nice&&nice.ishwscroll?nice.setScrollLeft(parseInt(value)):_scrollLeft.call(elem,value),this}},jQuery.fn.scrollLeft=function(value){if(void 0===value){var nice=!!this[0]&&($.data(this[0],"__nicescroll")||!1);return nice&&nice.ishwscroll?nice.getScrollLeft():_scrollLeft.call(this)}return this.each(function(){var nice=$.data(this,"__nicescroll")||!1;nice&&nice.ishwscroll?nice.setScrollLeft(parseInt(value)):_scrollLeft.call($(this),value)})};var NiceScrollArray=function(doms){var self=this;if(this.length=0,this.name="nicescrollarray",this.each=function(fn){for(var a=0,i=0;a<self.length;a++)fn.call(self[a],i++);return self},this.push=function(nice){self[self.length]=nice,self.length++},this.eq=function(idx){return self[idx]},doms)for(var a=0;a<doms.length;a++){var nice=$.data(doms[a],"__nicescroll")||!1;nice&&(this[this.length]=nice,this.length++)}return this};!function(el,lst,fn){for(var a=0;a<lst.length;a++)fn(el,lst[a])}(NiceScrollArray.prototype,["show","hide","toggle","onResize","resize","remove","stop","doScrollPos"],function(e,n){e[n]=function(){var args=arguments;return this.each(function(){this[n].apply(this,args)})}}),jQuery.fn.getNiceScroll=function(index){return void 0===index?new NiceScrollArray(this):this[index]&&$.data(this[index],"__nicescroll")||!1},jQuery.extend(jQuery.expr[":"],{nicescroll:function(a){return!!$.data(a,"__nicescroll")}}),$.fn.niceScroll=function(wrapper,opt){void 0===opt&&("object"!=typeof wrapper||"jquery"in wrapper||(opt=wrapper,wrapper=!1)),opt=$.extend({},opt);var ret=new NiceScrollArray;void 0===opt&&(opt={}),wrapper&&(opt.doc=$(wrapper),opt.win=$(this));var docundef=!("doc"in opt);return docundef||"win"in opt||(opt.win=$(this)),this.each(function(){var nice=$(this).data("__nicescroll")||!1;nice||(opt.doc=docundef?$(this):opt.doc,nice=new NiceScrollClass(opt,$(this)),$(this).data("__nicescroll",nice)),ret.push(nice)}),1==ret.length?ret[0]:ret},window.NiceScroll={getjQuery:function(){return jQuery}},$.nicescroll||($.nicescroll=new NiceScrollArray,$.nicescroll.options=_globaloptions)}),function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";function maybeBootstrap(){if(!angular.resumeBootstrap)return setTimeout(maybeBootstrap,1);var modules=loadModules();angular.resumeBootstrap(modules)}function loadModules(){var elt,modules=[];return angular.version.minor<2?modules:((elt=document.querySelector("[ng-hint-include]"))?modules=hintModulesFromElement(elt):(elt=document.querySelector("[ng-hint-exclude]"))?modules=excludeModules(hintModulesFromElement(elt)):document.querySelector("[ng-hint]")?modules=AVAILABLE_MODULES:angular.hint.emit("general:noinclude","ngHint is included on the page, but is not active because there is no `ng-hint` attribute present",SEVERITY_WARNING),modules)}function excludeModules(modulesToExclude){return AVAILABLE_MODULES.filter(function(module){return modulesToExclude.indexOf(module)===-1})}function hintModulesFromElement(elt){return(elt.attributes["ng-hint-include"]||elt.attributes["ng-hint-exclude"]).value.split(" ").map(hintModuleName).filter(function(name){return AVAILABLE_MODULES.indexOf(name)>-1||angular.hint.emit("general:404module","Module "+name+" could not be found",SEVERITY_WARNING)})}function hintModuleName(name){return"ngHint"+title(name)}function title(str){return str[0].toUpperCase()+str.substr(1)}require("./src/modules/hintEmitter"),require("./src/modules/controllers"),require("./src/modules/events"),require("./src/modules/modules"),require("./src/modules/scopes");var AVAILABLE_MODULES=["ngHintControllers","ngHintEvents","ngHintModules","ngHintScopes"],SEVERITY_WARNING=2,deferRegex=new RegExp("^NG_DEFER_BOOTSTRAP!.*");if(deferRegex.test(window.name)){var originalResumeBootstrap;Object.defineProperty(angular,"resumeBootstrap",{get:function(){return function(modules){return originalResumeBootstrap.call(angular,modules.concat(loadModules()))}},set:function(resumeBootstrap){originalResumeBootstrap=resumeBootstrap}})}else window.name="NG_DEFER_BOOTSTRAP!"+window.name,document.addEventListener("DOMContentLoaded",maybeBootstrap),window.addEventListener("beforeunload",function(){deferRegex.test(window.name)&&(window.name=window.name.substring("NG_DEFER_BOOTSTRAP!".length))})},{"./src/modules/controllers":23,"./src/modules/events":24,"./src/modules/hintEmitter":25,"./src/modules/modules":26,"./src/modules/scopes":27}],2:[function(require,module,exports){function defaultHash(){return Array.prototype.join.call(arguments,"::")}module.exports=function(fn,timeout,hash){var timeouts={};return timeout="number"==typeof timeout?timeout:(hash=timeout,100),hash="function"==typeof hash?hash:defaultHash,function(){var key=hash.apply(null,arguments),args=arguments;return void 0===timeouts[key]&&(timeouts[key]=setTimeout(function(){delete timeouts[key],fn.apply(null,args)},timeout)),function(){return!!timeouts[key]&&(clearTimeout(timeouts[key]),delete timeouts[key],!0)}}}},{}],3:[function(require,module,exports){!function(undefined){function init(){this._events={},this._conf&&configure.call(this,this._conf)}function configure(conf){conf&&(this._conf=conf,conf.delimiter&&(this.delimiter=conf.delimiter),conf.maxListeners&&(this._events.maxListeners=conf.maxListeners),conf.wildcard&&(this.wildcard=conf.wildcard),conf.newListener&&(this.newListener=conf.newListener),this.wildcard&&(this.listenerTree={}))}function EventEmitter(conf){this._events={},this.newListener=!1,configure.call(this,conf)}function searchListenerTree(handlers,type,tree,i){if(!tree)return[];var leaf,len,branch,xTree,xxTree,isolatedBranch,endReached,listeners=[],typeLength=type.length,currentType=type[i],nextType=type[i+1];if(i===typeLength&&tree._listeners){if("function"==typeof tree._listeners)return handlers&&handlers.push(tree._listeners),[tree];for(leaf=0,len=tree._listeners.length;leaf<len;leaf++)handlers&&handlers.push(tree._listeners[leaf]);return[tree]}if("*"===currentType||"**"===currentType||tree[currentType]){if("*"===currentType){for(branch in tree)"_listeners"!==branch&&tree.hasOwnProperty(branch)&&(listeners=listeners.concat(searchListenerTree(handlers,type,tree[branch],i+1)));return listeners}if("**"===currentType){endReached=i+1===typeLength||i+2===typeLength&&"*"===nextType,endReached&&tree._listeners&&(listeners=listeners.concat(searchListenerTree(handlers,type,tree,typeLength)));for(branch in tree)"_listeners"!==branch&&tree.hasOwnProperty(branch)&&("*"===branch||"**"===branch?(tree[branch]._listeners&&!endReached&&(listeners=listeners.concat(searchListenerTree(handlers,type,tree[branch],typeLength))),listeners=listeners.concat(searchListenerTree(handlers,type,tree[branch],i))):listeners=branch===nextType?listeners.concat(searchListenerTree(handlers,type,tree[branch],i+2)):listeners.concat(searchListenerTree(handlers,type,tree[branch],i)));return listeners}listeners=listeners.concat(searchListenerTree(handlers,type,tree[currentType],i+1))}if(xTree=tree["*"],xTree&&searchListenerTree(handlers,type,xTree,i+1),xxTree=tree["**"])if(i<typeLength){xxTree._listeners&&searchListenerTree(handlers,type,xxTree,typeLength);for(branch in xxTree)"_listeners"!==branch&&xxTree.hasOwnProperty(branch)&&(branch===nextType?searchListenerTree(handlers,type,xxTree[branch],i+2):branch===currentType?searchListenerTree(handlers,type,xxTree[branch],i+1):(isolatedBranch={},isolatedBranch[branch]=xxTree[branch],searchListenerTree(handlers,type,{"**":isolatedBranch},i+1)))}else xxTree._listeners?searchListenerTree(handlers,type,xxTree,typeLength):xxTree["*"]&&xxTree["*"]._listeners&&searchListenerTree(handlers,type,xxTree["*"],typeLength);return listeners}function growListenerTree(type,listener){type="string"==typeof type?type.split(this.delimiter):type.slice();for(var i=0,len=type.length;i+1<len;i++)if("**"===type[i]&&"**"===type[i+1])return;for(var tree=this.listenerTree,name=type.shift();name;){if(tree[name]||(tree[name]={}),tree=tree[name],0===type.length){if(tree._listeners){if("function"==typeof tree._listeners)tree._listeners=[tree._listeners,listener];else if(isArray(tree._listeners)&&(tree._listeners.push(listener),!tree._listeners.warned)){var m=defaultMaxListeners;void 0!==this._events.maxListeners&&(m=this._events.maxListeners),m>0&&tree._listeners.length>m&&(tree._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",tree._listeners.length),console.trace())}}else tree._listeners=listener;return!0}name=type.shift()}return!0}var isArray=Array.isArray?Array.isArray:function(obj){return"[object Array]"===Object.prototype.toString.call(obj)},defaultMaxListeners=10;EventEmitter.prototype.delimiter=".",EventEmitter.prototype.setMaxListeners=function(n){this._events||init.call(this),this._events.maxListeners=n,this._conf||(this._conf={}),this._conf.maxListeners=n},EventEmitter.prototype.event="",EventEmitter.prototype.once=function(event,fn){return this.many(event,1,fn),this},EventEmitter.prototype.many=function(event,ttl,fn){function listener(){0==--ttl&&self.off(event,listener),fn.apply(this,arguments)}var self=this;if("function"!=typeof fn)throw new Error("many only accepts instances of Function");return listener._origin=fn,this.on(event,listener),self},EventEmitter.prototype.emit=function(){this._events||init.call(this);var type=arguments[0];if("newListener"===type&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var l=arguments.length,args=new Array(l-1),i=1;i<l;i++)args[i-1]=arguments[i];for(i=0,l=this._all.length;i<l;i++)this.event=type,this._all[i].apply(this,args)}if("error"===type&&!(this._all||this._events.error||this.wildcard&&this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var handler;if(this.wildcard){handler=[];var ns="string"==typeof type?type.split(this.delimiter):type.slice();searchListenerTree.call(this,handler,ns,this.listenerTree,0)}else handler=this._events[type];if("function"==typeof handler){if(this.event=type,1===arguments.length)handler.call(this);else if(arguments.length>1)switch(arguments.length){case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:for(var l=arguments.length,args=new Array(l-1),i=1;i<l;i++)args[i-1]=arguments[i];handler.apply(this,args)}return!0}if(handler){for(var l=arguments.length,args=new Array(l-1),i=1;i<l;i++)args[i-1]=arguments[i];for(var listeners=handler.slice(),i=0,l=listeners.length;i<l;i++)this.event=type,listeners[i].apply(this,args);return listeners.length>0||!!this._all}return!!this._all},EventEmitter.prototype.on=function(type,listener){if("function"==typeof type)return this.onAny(type),this;if("function"!=typeof listener)throw new Error("on only accepts instances of Function");if(this._events||init.call(this),this.emit("newListener",type,listener),this.wildcard)return growListenerTree.call(this,type,listener),this;if(this._events[type]){if("function"==typeof this._events[type])this._events[type]=[this._events[type],listener];else if(isArray(this._events[type])&&(this._events[type].push(listener),!this._events[type].warned)){var m=defaultMaxListeners;void 0!==this._events.maxListeners&&(m=this._events.maxListeners),m>0&&this._events[type].length>m&&(this._events[type].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[type].length),console.trace())}}else this._events[type]=listener;return this},EventEmitter.prototype.onAny=function(fn){if("function"!=typeof fn)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(fn),this},EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prototype.off=function(type,listener){if("function"!=typeof listener)throw new Error("removeListener only takes instances of Function");var handlers,leafs=[];if(this.wildcard){var ns="string"==typeof type?type.split(this.delimiter):type.slice();leafs=searchListenerTree.call(this,null,ns,this.listenerTree,0)}else{if(!this._events[type])return this;handlers=this._events[type],leafs.push({_listeners:handlers})}for(var iLeaf=0;iLeaf<leafs.length;iLeaf++){var leaf=leafs[iLeaf];if(handlers=leaf._listeners,isArray(handlers)){for(var position=-1,i=0,length=handlers.length;i<length;i++)if(handlers[i]===listener||handlers[i].listener&&handlers[i].listener===listener||handlers[i]._origin&&handlers[i]._origin===listener){position=i;break}if(position<0)continue;return this.wildcard?leaf._listeners.splice(position,1):this._events[type].splice(position,1),0===handlers.length&&(this.wildcard?delete leaf._listeners:delete this._events[type]),this}(handlers===listener||handlers.listener&&handlers.listener===listener||handlers._origin&&handlers._origin===listener)&&(this.wildcard?delete leaf._listeners:delete this._events[type])}return this},EventEmitter.prototype.offAny=function(fn){var fns,i=0,l=0;if(fn&&this._all&&this._all.length>0){for(fns=this._all,i=0,l=fns.length;i<l;i++)if(fn===fns[i])return fns.splice(i,1),this}else this._all=[];return this},EventEmitter.prototype.removeListener=EventEmitter.prototype.off,EventEmitter.prototype.removeAllListeners=function(type){if(0===arguments.length)return!this._events||init.call(this),this;if(this.wildcard)for(var ns="string"==typeof type?type.split(this.delimiter):type.slice(),leafs=searchListenerTree.call(this,null,ns,this.listenerTree,0),iLeaf=0;iLeaf<leafs.length;iLeaf++){var leaf=leafs[iLeaf];leaf._listeners=null}else{if(!this._events[type])return this;this._events[type]=null}return this},EventEmitter.prototype.listeners=function(type){if(this.wildcard){var handlers=[],ns="string"==typeof type?type.split(this.delimiter):type.slice();return searchListenerTree.call(this,handlers,ns,this.listenerTree,0),handlers}return this._events||init.call(this),this._events[type]||(this._events[type]=[]),isArray(this._events[type])||(this._events[type]=[this._events[type]]),this._events[type]},EventEmitter.prototype.listenersAny=function(){return this._all?this._all:[]},"function"==typeof define&&define.amd?define(function(){return EventEmitter}):"object"==typeof exports?exports.EventEmitter2=EventEmitter:window.EventEmitter2=EventEmitter}()},{}],4:[function(require,module,exports){function distance(a,b){var table=[];if(0===a.length||0===b.length)return Math.max(a.length,b.length);for(var ii=0,ilen=a.length+1;ii!==ilen;++ii){table[ii]=[];for(var jj=0,jlen=b.length+1;jj!==jlen;++jj)if(0===ii||0===jj)table[ii][jj]=Math.max(ii,jj);else{var diagPenalty=Number(a[ii-1]!==b[jj-1]),diag=table[ii-1][jj-1]+diagPenalty,top=table[ii-1][jj]+1,left=table[ii][jj-1]+1;table[ii][jj]=Math.min(left,top,diag)}}return table[a.length][b.length]}module.exports=distance},{}],5:[function(require,module,exports){function suggestDictionary(dict,opts){opts=opts||{};var threshold=opts.threshold||.5;return function(word){var length=word.length;return dict.reduce(function(result,dictEntry){var score=distance(dictEntry,word);return result.score>score&&score/length<threshold&&(result.score=score,result.word=dictEntry),result},{score:1/0}).word}}module.exports=suggestDictionary;var distance=require("./levenstein_distance");suggestDictionary.distance=distance},{"./levenstein_distance":4}],6:[function(require,module,exports){"use strict";var list="click submit mouseenter mouseleave mousemove mousedown mouseover mouseup dblclick keyup keydown keypress blur focus submit cut copy paste".split(" ");module.exports=list.map(function(eventName){return"ng"+eventName.charAt(0).toUpperCase()+eventName.substr(1)})},{}],7:[function(require,module,exports){"use strict";function isAngularPrivatePropertyName(key){return!("$"===key[0]&&"$"===key[1])&&"$parent"!==key&&"$root"!==key}function summarizeProperty(obj){return obj instanceof Array?{"~array-length":obj.length}:null===obj?null:"object"==typeof obj?{"~object":!0}:obj}module.exports=function(model){function shallowSummary(obj,prop){return obj[prop]=summarizeProperty(model[prop]),obj}return model instanceof Array?JSON.stringify(model.map(summarizeProperty)):"object"==typeof model?JSON.stringify(Object.keys(model).filter(isAngularPrivatePropertyName).reduce(shallowSummary,{})):model}},{}],8:[function(require,module,exports){module.exports=function(modules){modules.forEach(function(module){angular.hint.emit("Modules",module.message,module.severity)})}},{}],9:[function(require,module,exports){var modData=require("./moduleData");MODULE_NAME="Modules",SEVERITY_WARNING=2,module.exports=function(){var multiLoaded=[];for(var modName in modData.createdMulti){var message='Multiple modules with name "'+modName+'" are being created and they will overwrite each other.',multi=modData.createdMulti[modName],multiLength=multi.length,details={existingModule:multi[multiLength-1],overwrittenModules:multi.slice(0,multiLength-1)};multiLoaded.push({module:details,message:message,name:MODULE_NAME,severity:SEVERITY_WARNING})}return multiLoaded}},{"./moduleData":16}],10:[function(require,module,exports){var modData=require("./moduleData");module.exports=function(moduleName,getCreated){return getCreated?modData.createdModules[moduleName]:modData.loadedModules[moduleName]}},{"./moduleData":16}],11:[function(require,module,exports){module.exports=function(attrs,ngAppFound){return attrs["ng-app"]&&ngAppFound&&angular.hint.emit("Modules",'ng-app may only be included once. The module "'+attrs["ng-app"].value+'" was not used to bootstrap because ng-app was already included.',1),attrs["ng-app"]?attrs["ng-app"].value:void 0}},{}],12:[function(require,module,exports){var getModule=require("./getModule"),dictionary=Object.keys(require("./moduleData").createdModules),suggest=require("suggest-it")(dictionary);module.exports=function(loadedModules){var undeclaredModules=[];for(var module in loadedModules){if(!getModule(module,!0)){var match=suggest(module),suggestion=match?'; Try: "'+match+'"':"",message='Module "'+module+'" was loaded but does not exist'+suggestion+".";undeclaredModules.push({module:null,message:message,severity:1})}}return undeclaredModules}},{"./getModule":10,"./moduleData":16,"suggest-it":5}],13:[function(require,module,exports){var getModule=require("./getModule"),IGNORED=["ngHintControllers","ngHintDirectives","ngHintDom","ngHintEvents","ngHintInterpolation","ngHintModules","ngHintScopes","ng","ngLocale","protractorBaseModule_"];module.exports=function(createdModules){var unusedModules=[];for(var module in createdModules)if(!getModule(module)){var cModule=createdModules[module],message='Module "'+cModule.name+'" was created but never loaded.';IGNORED.indexOf(cModule.name)===-1&&unusedModules.push({module:cModule,message:message,severity:2})}return unusedModules}},{"./getModule":10}],14:[function(require,module,exports){module.exports=function(str){return"ng"===str||(str.charAt(0).toUpperCase()===str.charAt(0)?(angular.hint.emit("Modules",'The best practice for module names is to use dot.case or lowerCamelCase. Check the name of "'+str+'".',3),!1):str.toLowerCase()!==str||str.indexOf(".")!==-1||(angular.hint.emit("Modules",'Module names should be namespaced with a dot (app.dashboard) or lowerCamelCase (appDashboard). Check the name of "'+str+'".',3),!1))}},{}],15:[function(require,module,exports){var normalizeAttribute=require("./normalizeAttribute");module.exports=function(attrs){for(var i=0,length=attrs.length;i<length;i++)if("ng-view"===normalizeAttribute(attrs[i].nodeName)||attrs[i].value.indexOf("ng-view")>-1)return!0}},{"./normalizeAttribute":18}],16:[function(require,module,exports){module.exports={createdModules:{},createdMulti:{},loadedModules:{}}},{}],17:[function(require,module,exports){var modData=require("./moduleData"),getModule=require("./getModule");module.exports=function(){if(modData.ngViewExists&&!getModule("ngRoute"))return{message:'Directive "ngView" was used in the application however "ngRoute" was not loaded into any module.'}}},{"./getModule":10,"./moduleData":16}],18:[function(require,module,exports){module.exports=function(attribute){return attribute.replace(/^(?:data|x)[-_:]/,"").replace(/[:_]/g,"-")}},{}],19:[function(require,module,exports){var display=require("./display"),formatMultiLoaded=require("./formatMultiLoaded"),getUnusedModules=require("./getUnusedModules"),getUndeclaredModules=require("./getUndeclaredModules"),modData=require("./moduleData"),ngViewNoNgRoute=require("./ngViewNoNgRoute");module.exports=function(){var unusedModules=getUnusedModules(modData.createdModules),undeclaredModules=getUndeclaredModules(modData.loadedModules),multiLoaded=formatMultiLoaded(),noNgRoute=ngViewNoNgRoute();if(unusedModules.length||undeclaredModules.length||multiLoaded.length||noNgRoute){var toSend=unusedModules.concat(undeclaredModules).concat(multiLoaded);noNgRoute&&(toSend=toSend.concat(noNgRoute)),display(toSend)}}},{"./display":8,"./formatMultiLoaded":9,"./getUndeclaredModules":12,"./getUnusedModules":13,"./moduleData":16,"./ngViewNoNgRoute":17}],20:[function(require,module,exports){var modData=require("./moduleData");module.exports=function(module,isNgAppMod){var name=module.name||module;isNgAppMod?(modData.loadedModules[name]=name,modData.ngAppMod=name):module.requires.forEach(function(dependency){modData.loadedModules[dependency]=dependency})}},{"./moduleData":16}],21:[function(require,module,exports){var getNgAppMod=require("./getNgAppMod"),inAttrsOrClasses=require("./inAttrsOrClasses"),storeDependencies=require("./storeDependencies"),modData=require("./moduleData");module.exports=function(doms){for(var ngViewFound,elem,isElemName,isInAttrsOrClasses,ngAppMod,i=0;i<doms.length;i++){elem=doms[i];var attributes=elem.attributes;isElemName="ng-view"===elem.nodeName.toLowerCase(),isInAttrsOrClasses=inAttrsOrClasses(attributes),ngViewFound=isElemName||isInAttrsOrClasses,ngAppMod=getNgAppMod(attributes,modData.ngAppFound),modData.ngAppFound=modData.ngAppFound||ngAppMod,ngAppMod&&storeDependencies(ngAppMod,!0),modData.ngViewExists=!!ngViewFound||modData.ngViewExists}}},{"./getNgAppMod":11,"./inAttrsOrClasses":15,"./moduleData":16,"./storeDependencies":20}],22:[function(require,module,exports){var storeDependencies=require("./storeDependencies"),seen=[],storeUsedModules=module.exports=function(module,modules){var name=module.name||module;module&&seen.indexOf(name)===-1&&(seen.push(name),storeDependencies(module),module.requires.forEach(function(modName){var mod=modules[modName];storeUsedModules(mod,modules)}))}},{"./storeDependencies":20}],23:[function(require,module,exports){"use strict";function controllerDecorator($delegate){return function(ctrl){if("string"==typeof ctrl){var match=ctrl.match(CNTRL_REG),ctrlName=match&&match[1]||ctrl;nameToControllerMap[ctrlName]||sendMessageForControllerName(ctrlName),nameToControllerMap[ctrlName]||"function"!=typeof window[ctrlName]||sendMessageForGlobalController(ctrlName)}return $delegate.apply(this,arguments)}}function stringOrObjectRegister(controllerName){
null!==controllerName&&"object"==typeof controllerName?Object.keys(controllerName).forEach(processController):processController(controllerName)}function processController(ctrlName){nameToControllerMap[ctrlName]=!0,sendMessageForControllerName(ctrlName)}function sendMessageForGlobalController(name){angular.hint.emit(MODULE_NAME+":global","add `"+name+"` to a module",angular.version.minor<=2?SEVERITY_WARNING:SEVERITY_ERROR,CATEGORY_GLOBAL_CONTROLLER)}function sendMessageForControllerName(name){var newName=name;startsWithUpperCase(name)||(newName=title(newName)),endsWithController(name)||(newName=addControllerSuffix(newName)),name!==newName&&angular.hint.emit(MODULE_NAME+":rename","Consider renaming `"+name+"` to `"+newName+"`.",SEVERITY_WARNING,CATEGORY_CONTROLLER_NAME)}function startsWithUpperCase(name){var firstChar=name.charAt(0);return firstChar===firstChar.toUpperCase()&&firstChar!==firstChar.toLowerCase()}function title(name){return name[0].toUpperCase()+name.substr(1)}function endsWithController(name){return CONTROLLER_RE.test(name)}function addControllerSuffix(name){return name.replace(RE,"Controller")}var MODULE_NAME="Controllers",CNTRL_REG=/^(\S+)(\s+as\s+(\w+))?$/,CATEGORY_CONTROLLER_NAME="Name controllers according to best practices",CATEGORY_GLOBAL_CONTROLLER="Using global functions as controllers is against Angular best practices and depricated in Angular 1.3 and up",SEVERITY_ERROR=1,SEVERITY_WARNING=2,nameToControllerMap={};angular.module("ngHintControllers",[]).config(["$provide","$controllerProvider",function($provide,$controllerProvider){$provide.decorator("$controller",["$delegate",controllerDecorator]);var originalRegister=$controllerProvider.register;$controllerProvider.register=function(name,constructor){stringOrObjectRegister(name),originalRegister.apply($controllerProvider,arguments)}}]);var originalModule=angular.module,CONTROLLER_RE=/Controller$/,RE=/(Ctrl|Kontroller)?$/;angular.module=function(){var module=originalModule.apply(this,arguments),originalController=module.controller;return module.controller=function(controllerName,controllerConstructor){return stringOrObjectRegister(controllerName),originalController.apply(this,arguments)},module}},{}],24:[function(require,module,exports){"use strict";function removeStringExp(str){return str.replace(/"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'/g,function(match,pos,full){return 0!==pos&&match.length+pos!==full.length&&"["===full[pos-1]&&"]"===full[pos+match.length]?match:""})}function ngEventDirectivesDecorator(ngEventAttrName){return function($delegate,$parse){var originalCompileFn=$delegate[0].compile;return $delegate[0].compile=function(element,attrs,transclude){var linkFn=originalCompileFn.apply(this,arguments);return function(scope,element,attrs){var boundFuncs=getFunctionNames(attrs[ngEventAttrName]);try{boundFuncs.forEach(function(boundFn){for(var property,propChain,lastProp="";null!==(property=boundFn.match(/^.+?([^\.\[])*/));)property=property[0],propChain=lastProp+property,void 0===$parse(propChain)(scope)&&angular.hint.emit(MODULE_NAME+":undef",propChain+" is undefined"),boundFn=boundFn.replace(property,""),lastProp+=property,"."===boundFn.charAt(0)&&(lastProp+=".",boundFn=boundFn.substr(1))})}catch(e){angular.hint.emit(MODULE_NAME+":undef","parsing error: please inform the angular-hint or batarang teams. expression: "+boundFuncs.join(""))}return linkFn.apply(this,arguments)}},$delegate}}var ngEventAttributes=require("../lib/event-directives"),MODULE_NAME="Events",getFunctionNames=function(str){return"string"!=typeof str?[]:removeStringExp(str.replace(/\s+/g,"")).replace(/\(.*?\)/g,"").split(/[\+\-\/\|\<\>\^=&!%~?:;]/g).map(function(x){if(isNaN(+x))return x.match(/\w+\(.*\)$/)?x.substr(0,x.indexOf("(")):x}).filter(function(x){return x})};angular.module("ngHintEvents",[]).config(["$provide",function($provide){for(var i=0;i<ngEventAttributes.length;i++)try{$provide.decorator(ngEventAttributes[i]+"Directive",["$delegate","$parse",ngEventDirectivesDecorator(ngEventAttributes[i])])}catch(e){}}])},{"../lib/event-directives":6}],25:[function(require,module,exports){"use strict";var EventEmitter2=require("eventemitter2").EventEmitter2;angular.hint=new EventEmitter2({wildcard:!0,delimiter:":"})},{eventemitter2:3}],26:[function(require,module,exports){"use strict";var getModule=require("./angular-hint-modules/getModule"),start=require("./angular-hint-modules/start"),storeNgAppAndView=require("./angular-hint-modules/storeNgAppAndView"),storeUsedModules=require("./angular-hint-modules/storeUsedModules"),hasNameSpace=require("./angular-hint-modules/hasNameSpace"),modData=require("./angular-hint-modules/moduleData"),doc=Array.prototype.slice.call(document.getElementsByTagName("*")),originalAngularModule=angular.module,modules={};storeNgAppAndView(doc),angular.module=function(name,requiresOriginal){var module=originalAngularModule.apply(this,arguments),name=module.name;module.requiresOriginal=requiresOriginal,modules[name]=module;var modToCheck=getModule(name,!0),modIsSetter=arguments.length>1;return modIsSetter&&hasNameSpace(name),modToCheck&&modToCheck.requiresOriginal!==module.requiresOriginal&&modIsSetter&&(modData.createdMulti[name]||(modData.createdMulti[name]=[getModule(name,!0)]),modData.createdMulti[name].push(module)),modData.createdModules[name]=module,module},angular.module("ngHintModules",[]).config(function(){var ngAppMod=modules[modData.ngAppMod];ngAppMod&&storeUsedModules(ngAppMod,modules),start()})},{"./angular-hint-modules/getModule":10,"./angular-hint-modules/hasNameSpace":14,"./angular-hint-modules/moduleData":16,"./angular-hint-modules/start":19,"./angular-hint-modules/storeNgAppAndView":21,"./angular-hint-modules/storeUsedModules":22}],27:[function(require,module,exports){"use strict";function decorateRootScope($delegate,$parse){function emitScopeElt(scope){var scopeId=scope.$id,elt=findElt(scopeId),descriptor=scopeDescriptor(elt,scope);hint.emit("scope:link",{id:scopeId,descriptor:descriptor})}function findElt(scopeId){for(var elt,scope,elts=document.querySelectorAll(".ng-scope"),i=0;i<elts.length;i++)if(elt=angular.element(elts[i]),scope=elt.scope(),scope.$id===scopeId)return elt}function gettterer(scopeId,path){if(""===path)return function(){return scopes[scopeId]};var getter=$parse(path);return function(){return getter(scopes[scopeId])}}function emitModelChange(){Object.keys(watching).forEach(function(scopeId){Object.keys(watching[scopeId]).forEach(function(path){var model=watching[scopeId][path],value=summarize(model.get());value!==model.value&&(hint.emit("model:change",{id:convertIdToOriginalType(scopeId),path:path,oldValue:model.value,value:value}),model.value=value)})})}var perf=window.performance||{now:function(){return 0}},scopes={},watching={},debouncedEmitModelChange=debounceOn(emitModelChange,10);hint.watch=function(scopeId,path){path="string"==typeof path?path.split("."):path,watching[scopeId]||(watching[scopeId]={});for(var i=1,ii=path.length;i<=ii;i+=1){var partialPath=path.slice(0,i).join(".");if(!watching[scopeId][partialPath]){var get=gettterer(scopeId,partialPath),value=summarize(get());watching[scopeId][partialPath]={get:get,value:value},hint.emit("model:change",{id:convertIdToOriginalType(scopeId),path:partialPath,value:value})}}},hint.assign=function(scopeId,path,value){var scope;(scope=scopes[scopeId])&&scope.$apply(function(){return $parse(path).assign(scope,value)})},hint.inspectScope=function(scopeId){var scope;(scope=scopes[scopeId])&&(window.$scope=scope)},hint.unwatch=function(scopeId,unwatchPath){Object.keys(watching[scopeId]).forEach(function(path){0===path.indexOf(unwatchPath)&&delete watching[scopeId][path]})};var scopePrototype="getPrototypeOf"in Object?Object.getPrototypeOf($delegate):$delegate.__proto__,_watch=scopePrototype.$watch,_digestEvents=[],skipNextPerfWatchers=!1;scopePrototype.$watch=function(watchExpression,reactionFunction){if(skipNextPerfWatchers)return skipNextPerfWatchers=!1,_watch.apply(this,arguments);if("string"==typeof watchExpression&&isOneTimeBindExp(watchExpression))return skipNextPerfWatchers=!0,_watch.apply(this,arguments);var watchStr=humanReadableWatchExpression(watchExpression),scopeId=this.$id,expressions=null;if("function"==typeof watchExpression){if(expressions=watchExpression.expressions,"[object Array]"===Object.prototype.toString.call(expressions)&&expressions.some(isOneTimeBindExp))return skipNextPerfWatchers=!0,_watch.apply(this,arguments);arguments[0]=function(){var start=perf.now(),ret=watchExpression.apply(this,arguments),end=perf.now();return _digestEvents.push({eventType:"scope:watch",id:scopeId,watch:watchStr,time:end-start}),ret}}else{var thatScope=this;arguments[0]=function(){var start=perf.now(),ret=thatScope.$eval(watchExpression),end=perf.now();return _digestEvents.push({eventType:"scope:watch",id:scopeId,watch:watchStr,time:end-start}),ret}}return"function"==typeof reactionFunction&&(arguments[1]=function(){var start=perf.now(),ret=reactionFunction.apply(this,arguments),end=perf.now();return _digestEvents.push({eventType:"scope:reaction",id:this.$id,watch:watchStr,time:end-start}),ret}),_watch.apply(this,arguments)};var _digest=scopePrototype.$digest;scopePrototype.$digest=function(fn){_digestEvents=[];var start=perf.now(),ret=_digest.apply(this,arguments),end=perf.now();return hint.emit("scope:digest",{id:this.$id,time:end-start,events:_digestEvents}),ret};var _destroy=scopePrototype.$destroy;scopePrototype.$destroy=function(){var id=this.$id;return hint.emit("scope:destroy",{id:id}),delete scopes[id],delete watching[id],_destroy.apply(this,arguments)};var _new=scopePrototype.$new;scopePrototype.$new=function(){var child=_new.apply(this,arguments);return scopes[child.$id]=child,watching[child.$id]={},hint.emit("scope:new",{parent:this.$id,child:child.$id}),setTimeout(function(){emitScopeElt(child)},0),child};var _apply=scopePrototype.$apply;return scopePrototype.$apply=function(fn){var ret=_apply.apply(this,arguments);return debouncedEmitModelChange(),ret},hint.emit("scope:new",{parent:null,child:$delegate.$id}),scopes[$delegate.$id]=$delegate,watching[$delegate.$id]={},$delegate}function decorateDollaCompile($delegate){var newCompile=function(){var link=$delegate.apply(this,arguments);return function(scope){var elt=link.apply(this,arguments),descriptor=scopeDescriptor(elt,scope);return hint.emit("scope:link",{id:scope.$id,descriptor:descriptor}),elt}};for(var prop in $delegate)$delegate.hasOwnProperty(prop)&&(newCompile[prop]=$delegate[prop]);return newCompile}function scopeDescriptor(elt,scope){var val,type,theseTypes=[];if(elt)for(var i=0,ii=TYPES.length;i<ii;i++)type=TYPES[i],(val=elt.attr(type))&&theseTypes.push(type+'="'+val+'"');return 0===theseTypes.length?"scope.$id="+scope.$id:theseTypes.join(" ")}function humanReadableWatchExpression(fn){return null==fn?null:(fn.exp?fn=fn.exp:fn.name&&(fn=fn.name),fn.toString())}function isOneTimeBindExp(exp){return":"===exp.charAt(0)&&":"===exp.charAt(1)}function convertIdToOriginalType(scopeId){return angular.version.minor<3?scopeId:parseInt(scopeId,10)}var summarize=require("../lib/summarize-model"),debounceOn=require("debounce-on"),hint=angular.hint;hint.emit=hint.emit||function(){},module.exports=angular.module("ngHintScopes",[]).config(["$provide",function($provide){$provide.decorator("$rootScope",["$delegate","$parse",decorateRootScope]),$provide.decorator("$compile",["$delegate",decorateDollaCompile])}]);var TYPES=["ng-app","ng-controller","ng-repeat","ng-include"]},{"../lib/summarize-model":7,"debounce-on":2}]},{},[1]),angular.module("colorpicker.module",[]).factory("Helper",function(){"use strict";return{closestSlider:function(e){return(e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector).bind(e)("I")?e.parentNode:e},getOffset:function(e,o){for(var t=0,n=0,r=e.getBoundingClientRect();e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)o||"BODY"!==e.tagName?(t+=e.scrollLeft,n+=e.scrollTop):(t+=document.documentElement.scrollLeft||e.scrollLeft,n+=document.documentElement.scrollTop||e.scrollTop),e=e.offsetParent;return{top:r.top+window.pageYOffset,left:r.left+window.pageXOffset,scrollX:t,scrollY:n}},stringParsers:[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}]}}).factory("Color",["Helper",function(e){"use strict";return{value:{h:1,s:1,b:1,a:1},rgb:function(){var e=this.toRGB();return"rgb("+e.r+","+e.g+","+e.b+")"},rgba:function(){var e=this.toRGB();return"rgba("+e.r+","+e.g+","+e.b+","+e.a+")"},hex:function(){return this.toHex()},RGBtoHSB:function(e,o,t,n){e/=255,o/=255,t/=255;var r,i,l,s;return l=Math.max(e,o,t),s=l-Math.min(e,o,t),r=0===s?null:l===e?(o-t)/s:l===o?(t-e)/s+2:(e-o)/s+4,r=(r+360)%6*60/360,i=0===s?0:s/l,{h:r||1,s:i,b:l,a:n||1}},setColor:function(o){o=o?o.toLowerCase():o;for(var t in e.stringParsers)if(e.stringParsers.hasOwnProperty(t)){var n=e.stringParsers[t],r=n.re.exec(o),i=r&&n.parse(r);if(i)return this.value=this.RGBtoHSB.apply(null,i),!1}},setHue:function(e){this.value.h=1-e},setSaturation:function(e){this.value.s=e},setLightness:function(e){this.value.b=1-e},setAlpha:function(e){this.value.a=parseInt(100*(1-e),10)/100},toRGB:function(e,o,t,n){e||(e=this.value.h,o=this.value.s,t=this.value.b),e*=360;var r,i,l,s,c;return e=e%360/60,c=t*o,s=c*(1-Math.abs(e%2-1)),r=i=l=t-c,e=~~e,r+=[c,s,0,0,s,c][e],i+=[s,c,c,s,0,0][e],l+=[0,0,s,c,c,s][e],{r:Math.round(255*r),g:Math.round(255*i),b:Math.round(255*l),a:n||this.value.a}},toHex:function(e,o,t,n){var r=this.toRGB(e,o,t,n);return"#"+(1<<24|parseInt(r.r,10)<<16|parseInt(r.g,10)<<8|parseInt(r.b,10)).toString(16).substr(1)}}}]).factory("Slider",["Helper",function(e){"use strict";var o={maxLeft:0,maxTop:0,callLeft:null,callTop:null,knob:{top:0,left:0}},t={};return{getSlider:function(){return o},getLeftPosition:function(e){return Math.max(0,Math.min(o.maxLeft,o.left+((e.pageX||t.left)-t.left)))},getTopPosition:function(e){return Math.max(0,Math.min(o.maxTop,o.top+((e.pageY||t.top)-t.top)))},setSlider:function(n,r){var i=e.closestSlider(n.target),l=e.getOffset(i,r),s=i.getBoundingClientRect(),c=n.clientX-s.left,a=n.clientY-s.top;o.knob=i.children[0].style,o.left=n.pageX-l.left-window.pageXOffset+l.scrollX,o.top=n.pageY-l.top-window.pageYOffset+l.scrollY,t={left:n.pageX-(c-o.left),top:n.pageY-(a-o.top)}},setSaturation:function(e,t,n){o={maxLeft:n,maxTop:n,callLeft:"setSaturation",callTop:"setLightness"},this.setSlider(e,t)},setHue:function(e,t,n){o={maxLeft:0,maxTop:n,callLeft:!1,callTop:"setHue"},this.setSlider(e,t)},setAlpha:function(e,t,n){o={maxLeft:0,maxTop:n,callLeft:!1,callTop:"setAlpha"},this.setSlider(e,t)},setKnob:function(e,t){o.knob.top=e+"px",o.knob.left=t+"px"}}}]).directive("colorpicker",["$document","$compile","Color","Slider","Helper",function(e,o,t,n,r){"use strict";return{require:"?ngModel",restrict:"A",link:function(i,l,s,c){function a(){e.on("mousemove",u),e.on("mouseup",f)}function p(){try{D.css("backgroundColor",M[w]())}catch(e){D.css("backgroundColor",M.toHex())}B.css("backgroundColor",M.toHex(M.value.h,1,1,1)),"rgba"===w&&(x.css.backgroundColor=M.toHex())}function u(e){var o=n.getLeftPosition(e),t=n.getTopPosition(e),r=n.getSlider();n.setKnob(t,o),r.callLeft&&M[r.callLeft].call(M,o/P),r.callTop&&M[r.callTop].call(M,t/P),p();var s=M[w]();return l.val(s),c&&i.$apply(c.$setViewValue(s)),$&&F.val(s),!1}function f(){m("colorpicker-selected"),e.off("mousemove",u),e.off("mouseup",f)}function d(e){M.setColor(l.val()),$&&!e&&F.val(l.val()),Y.eq(0).css({left:M.value.s*P+"px",top:P-M.value.b*P+"px"}),Y.eq(1).css("top",P*(1-M.value.h)+"px"),Y.eq(2).css("top",P*(1-M.value.a)+"px"),p()}function h(){var e,o=r.getOffset(l[0]);return angular.isDefined(s.colorpickerParent)&&(o.left=0,o.top=0),"top"===S?e={top:o.top-147,left:o.left}:"right"===S?e={top:o.top,left:o.left+126}:"bottom"===S?e={top:o.top+l[0].offsetHeight+2,left:o.left}:"left"===S&&(e={top:o.top,left:o.left-150}),{top:e.top+"px",left:e.left+"px"}}function g(){v()}function k(){y.hasClass("colorpicker-visible")||(d(),y.addClass("colorpicker-visible").css(h()),m("colorpicker-shown"),I===!1&&e.on("mousedown",g),s.colorpickerIsOpen&&(i[s.colorpickerIsOpen]=!0,i.$$phase||i.$digest()))}function m(e){c&&i.$emit(e,{name:s.ngModel,value:c.$modelValue})}function v(){y.hasClass("colorpicker-visible")&&(y.removeClass("colorpicker-visible"),m("colorpicker-closed"),e.off("mousedown",g),s.colorpickerIsOpen&&(i[s.colorpickerIsOpen]=!1,i.$$phase||i.$digest()))}var b,x,w=s.colorpicker?s.colorpicker:"hex",S=angular.isDefined(s.colorpickerPosition)?s.colorpickerPosition:"bottom",I=!!angular.isDefined(s.colorpickerInline)&&s.colorpickerInline,C=!!angular.isDefined(s.colorpickerFixedPosition)&&s.colorpickerFixedPosition,L=angular.isDefined(s.colorpickerParent)?l.parent():angular.element(document.body),$=!!angular.isDefined(s.colorpickerWithInput)&&s.colorpickerWithInput,P=angular.isDefined(s.colorpickerSize)?s.colorpickerSize:100,b=P+"px",H=$?'<input type="text" name="colorpicker-input" spellcheck="false">':"",T=I?"":'<button type="button" class="close close-colorpicker">&times;</button>',O='<div class="colorpicker dropdown"><div class="dropdown-menu"><colorpicker-saturation><i></i></colorpicker-saturation><colorpicker-hue><i></i></colorpicker-hue><colorpicker-alpha><i></i></colorpicker-alpha><colorpicker-preview></colorpicker-preview>'+H+T+"</div></div>",y=angular.element(O),M=t,A=y.find("colorpicker-hue"),B=y.find("colorpicker-saturation"),D=y.find("colorpicker-preview"),Y=y.find("i");if(o(y)(i),y.css("min-width",parseInt(P)+29+"px"),B.css({width:b,height:b}),A.css("height",b),$){var F=y.find("input");F.css("width",b),F.on("mousedown",function(e){e.stopPropagation()}).on("keyup",function(){var e=this.value;l.val(e),c&&c.$modelValue!==e&&(i.$apply(c.$setViewValue(e)),d(!0))})}"rgba"===w&&(y.addClass("alpha"),x=y.find("colorpicker-alpha"),x.css("height",b),x.on("click",function(e){n.setAlpha(e,C,P),u(e)}).on("mousedown",function(e){n.setAlpha(e,C,P),a()}).on("mouseup",function(e){m("colorpicker-selected-alpha")})),A.on("click",function(e){n.setHue(e,C,P),u(e)}).on("mousedown",function(e){n.setHue(e,C,P),a()}).on("mouseup",function(e){m("colorpicker-selected-hue")}),B.on("click",function(e){n.setSaturation(e,C,P),u(e),angular.isDefined(s.colorpickerCloseOnSelect)&&v()}).on("mousedown",function(e){n.setSaturation(e,C,P),a()}).on("mouseup",function(e){m("colorpicker-selected-saturation")}),C&&y.addClass("colorpicker-fixed-position"),y.addClass("colorpicker-position-"+S),"true"===I&&y.addClass("colorpicker-inline"),L.append(y),c&&(c.$render=function(){l.val(c.$viewValue),d()}),l.on("blur keyup change",function(){d()}),l.on("$destroy",function(){y.remove()}),I===!1?l.on("click",k):k(),y.on("mousedown",function(e){e.stopPropagation(),e.preventDefault()}),y.find("button").on("click",function(){v()}),s.colorpickerIsOpen&&i.$watch(s.colorpickerIsOpen,function(e){e===!0?k():e===!1&&v()})}}}]),function(B,n){"object"==typeof exports?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(B)}(this,function(B){function n(a){this._targetElement=a,this._options={nextLabel:"Next &rarr;",prevLabel:"&larr; Back",skipLabel:"Skip",doneLabel:"Done",tooltipPosition:"bottom",tooltipClass:"",highlightClass:"",exitOnEsc:!0,exitOnOverlayClick:!0,showStepNumbers:!0,keyboardNavigation:!0,showButtons:!0,showBullets:!0,showProgress:!1,scrollToElement:!0,overlayOpacity:.8,positionPrecedence:["bottom","top","right","left"],disableInteraction:!1}}function M(a){var b=[],c=this;if(this._options.steps)for(var e=0,d=this._options.steps.length;e<d;e++){var f=H(this._options.steps[e]);if(f.step=b.length+1,"string"==typeof f.element&&(f.element=document.querySelector(f.element)),void 0===f.element||null==f.element){var h=document.querySelector(".introjsFloatingElement");null==h&&(h=document.createElement("div"),h.className="introjsFloatingElement",document.body.appendChild(h)),f.element=h,f.position="floating"}null!=f.element&&b.push(f)}else{if(d=a.querySelectorAll("*[data-intro]"),1>d.length)return!1;for(e=0,f=d.length;e<f;e++){var h=d[e],q=parseInt(h.getAttribute("data-step"),10);0<q&&(b[q-1]={element:h,intro:h.getAttribute("data-intro"),step:parseInt(h.getAttribute("data-step"),10),tooltipClass:h.getAttribute("data-tooltipClass"),highlightClass:h.getAttribute("data-highlightClass"),position:h.getAttribute("data-position")||this._options.tooltipPosition})}for(e=q=0,f=d.length;e<f;e++)if(h=d[e],null==h.getAttribute("data-step")){for(;void 0!==b[q];)q++;b[q]={element:h,intro:h.getAttribute("data-intro"),step:q+1,tooltipClass:h.getAttribute("data-tooltipClass"),highlightClass:h.getAttribute("data-highlightClass"),position:h.getAttribute("data-position")||this._options.tooltipPosition}}}for(e=[],d=0;d<b.length;d++)b[d]&&e.push(b[d]);return b=e,b.sort(function(a,b){return a.step-b.step}),c._introItems=b,N.call(c,a)&&(x.call(c),a.querySelector(".introjs-skipbutton"),a.querySelector(".introjs-nextbutton"),c._onKeyDown=function(b){if(27===b.keyCode&&1==c._options.exitOnEsc)void 0!=c._introExitCallback&&c._introExitCallback.call(c),y.call(c,a);else if(37===b.keyCode)C.call(c);else if(39===b.keyCode)x.call(c);else if(13===b.keyCode){var d=b.target||b.srcElement;d&&0<d.className.indexOf("introjs-prevbutton")?C.call(c):d&&0<d.className.indexOf("introjs-skipbutton")?(c._introItems.length-1==c._currentStep&&"function"==typeof c._introCompleteCallback&&c._introCompleteCallback.call(c),void 0!=c._introExitCallback&&c._introExitCallback.call(c),y.call(c,a)):x.call(c),b.preventDefault?b.preventDefault():b.returnValue=!1}},c._onResize=function(a){t.call(c,document.querySelector(".introjs-helperLayer")),t.call(c,document.querySelector(".introjs-tooltipReferenceLayer"))},window.addEventListener?(this._options.keyboardNavigation&&window.addEventListener("keydown",c._onKeyDown,!0),window.addEventListener("resize",c._onResize,!0)):document.attachEvent&&(this._options.keyboardNavigation&&document.attachEvent("onkeydown",c._onKeyDown),document.attachEvent("onresize",c._onResize))),!1}function H(a){if(null==a||"object"!=typeof a||void 0!==a.nodeType)return a;var c,b={};for(c in a)b[c]="undefined"!=typeof jQuery&&a[c]instanceof jQuery?a[c]:H(a[c]);return b}function x(){if(this._direction="forward",void 0===this._currentStep?this._currentStep=0:++this._currentStep,this._introItems.length<=this._currentStep)"function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this),y.call(this,this._targetElement);else{var a=this._introItems[this._currentStep];void 0!==this._introBeforeChangeCallback&&this._introBeforeChangeCallback.call(this,a.element),I.call(this,a)}}function C(){if(this._direction="backward",0===this._currentStep)return!1;var a=this._introItems[--this._currentStep];void 0!==this._introBeforeChangeCallback&&this._introBeforeChangeCallback.call(this,a.element),I.call(this,a)}function y(a){var b=a.querySelector(".introjs-overlay");if(null!=b){b.style.opacity=0,setTimeout(function(){b.parentNode&&b.parentNode.removeChild(b)},500);var c=a.querySelector(".introjs-helperLayer");if(c&&c.parentNode.removeChild(c),(c=a.querySelector(".introjs-tooltipReferenceLayer"))&&c.parentNode.removeChild(c),(a=a.querySelector(".introjs-disableInteraction"))&&a.parentNode.removeChild(a),(a=document.querySelector(".introjsFloatingElement"))&&a.parentNode.removeChild(a),(a=document.querySelector(".introjs-showElement"))&&(a.className=a.className.replace(/introjs-[a-zA-Z]+/g,"").replace(/^\s+|\s+$/g,"")),(a=document.querySelectorAll(".introjs-fixParent"))&&0<a.length)for(c=a.length-1;0<=c;c--)a[c].className=a[c].className.replace(/introjs-fixParent/g,"").replace(/^\s+|\s+$/g,"");window.removeEventListener?window.removeEventListener("keydown",this._onKeyDown,!0):document.detachEvent&&document.detachEvent("onkeydown",this._onKeyDown),this._currentStep=void 0}}function J(a,b,c,e){var f,h,d="";if(b.style.top=null,b.style.right=null,b.style.bottom=null,b.style.left=null,b.style.marginLeft=null,b.style.marginTop=null,c.style.display="inherit",void 0!==e&&null!=e&&(e.style.top=null,e.style.left=null),this._introItems[this._currentStep]){if(d=this._introItems[this._currentStep],d="string"==typeof d.tooltipClass?d.tooltipClass:this._options.tooltipClass,b.className=("introjs-tooltip "+d).replace(/^\s+|\s+$/g,""),("auto"==(h=this._introItems[this._currentStep].position)||"auto"==this._options.tooltipPosition)&&"floating"!=h){d=h,f=this._options.positionPrecedence.slice(),h=F();var q=v(b).height+10,r=v(b).width+20,k=v(a),l="floating";k.left+r>h.width||0>k.left+k.width/2-r?(s(f,"bottom"),s(f,"top")):(k.height+k.top+q>h.height&&s(f,"bottom"),0>k.top-q&&s(f,"top")),k.width+k.left+r>h.width&&s(f,"right"),0>k.left-r&&s(f,"left"),0<f.length&&(l=f[0]),d&&"auto"!=d&&-1<f.indexOf(d)&&(l=d),h=l}switch(d=v(a),a=v(b),f=F(),h){case"top":c.className="introjs-arrow bottom",z(d,15,a,f,b),b.style.bottom=d.height+20+"px";break;case"right":b.style.left=d.width+20+"px",d.top+a.height>f.height?(c.className="introjs-arrow left-bottom",b.style.top="-"+(a.height-d.height-20)+"px"):c.className="introjs-arrow left";break;case"left":1==this._options.showStepNumbers&&(b.style.top="15px"),d.top+a.height>f.height?(b.style.top="-"+(a.height-d.height-20)+"px",c.className="introjs-arrow right-bottom"):c.className="introjs-arrow right",b.style.right=d.width+20+"px";break;case"floating":c.style.display="none",b.style.left="50%",b.style.top="50%",b.style.marginLeft="-"+a.width/2+"px",b.style.marginTop="-"+a.height/2+"px",void 0!==e&&null!=e&&(e.style.left="-"+(a.width/2+18)+"px",e.style.top="-"+(a.height/2+18)+"px");break;case"bottom-right-aligned":c.className="introjs-arrow top-right",K(d,0,a,b),b.style.top=d.height+20+"px";break;case"bottom-middle-aligned":c.className="introjs-arrow top-middle",c=d.width/2-a.width/2,K(d,c,a,b)&&(b.style.right=null,z(d,c,a,f,b)),b.style.top=d.height+20+"px";break;default:c.className="introjs-arrow top",z(d,0,a,f,b),b.style.top=d.height+20+"px"}}}function z(a,b,c,e,d){return a.left+b+c.width>e.width?(d.style.left=e.width-c.width-a.left+"px",!1):(d.style.left=b+"px",!0)}function K(a,b,c,e){return 0>a.left+a.width-b-c.width?(e.style.left=-a.left+"px",!1):(e.style.right=b+"px",!0)}function s(a,b){-1<a.indexOf(b)&&a.splice(a.indexOf(b),1)}function t(a){if(a&&this._introItems[this._currentStep]){var b=this._introItems[this._currentStep],c=v(b.element),e=10;"floating"==b.position&&(e=0),a.setAttribute("style","width: "+(c.width+e)+"px; height:"+(c.height+e)+"px; top:"+(c.top-5)+"px;left: "+(c.left-5)+"px;")}}function O(){var a=document.querySelector(".introjs-disableInteraction");null===a&&(a=document.createElement("div"),a.className="introjs-disableInteraction",this._targetElement.appendChild(a)),t.call(this,a)}function I(a){void 0!==this._introChangeCallback&&this._introChangeCallback.call(this,a.element);var b=this,c=document.querySelector(".introjs-helperLayer"),e=document.querySelector(".introjs-tooltipReferenceLayer"),d="introjs-helperLayer";if(v(a.element),"string"==typeof a.highlightClass&&(d+=" "+a.highlightClass),"string"==typeof this._options.highlightClass&&(d+=" "+this._options.highlightClass),null!=c){var f=e.querySelector(".introjs-helperNumberLayer"),h=e.querySelector(".introjs-tooltiptext"),q=e.querySelector(".introjs-arrow"),r=e.querySelector(".introjs-tooltip"),k=e.querySelector(".introjs-skipbutton"),l=e.querySelector(".introjs-prevbutton"),p=e.querySelector(".introjs-nextbutton");if(c.className=d,r.style.opacity=0,r.style.display="none",null!=f){var g=this._introItems[0<=a.step-2?a.step-2:0];(null!=g&&"forward"==this._direction&&"floating"==g.position||"backward"==this._direction&&"floating"==a.position)&&(f.style.opacity=0)}if(t.call(b,c),t.call(b,e),(g=document.querySelectorAll(".introjs-fixParent"))&&0<g.length)for(d=g.length-1;0<=d;d--)g[d].className=g[d].className.replace(/introjs-fixParent/g,"").replace(/^\s+|\s+$/g,"");g=document.querySelector(".introjs-showElement"),g.className=g.className.replace(/introjs-[a-zA-Z]+/g,"").replace(/^\s+|\s+$/g,""),b._lastShowElementTimer&&clearTimeout(b._lastShowElementTimer),b._lastShowElementTimer=setTimeout(function(){null!=f&&(f.innerHTML=a.step),h.innerHTML=a.intro,r.style.display="block",J.call(b,a.element,r,q,f),e.querySelector(".introjs-bullets li > a.active").className="",e.querySelector('.introjs-bullets li > a[data-stepnumber="'+a.step+'"]').className="active",e.querySelector(".introjs-progress .introjs-progressbar").setAttribute("style","width:"+L.call(b)+"%;"),r.style.opacity=1,f&&(f.style.opacity=1),-1===p.tabIndex?k.focus():p.focus()},350)}else{var n=document.createElement("div"),l=document.createElement("div"),c=document.createElement("div"),m=document.createElement("div"),s=document.createElement("div"),D=document.createElement("div"),E=document.createElement("div"),u=document.createElement("div");n.className=d,l.className="introjs-tooltipReferenceLayer",t.call(b,n),t.call(b,l),this._targetElement.appendChild(n),this._targetElement.appendChild(l),c.className="introjs-arrow",s.className="introjs-tooltiptext",s.innerHTML=a.intro,D.className="introjs-bullets",!1===this._options.showBullets&&(D.style.display="none");for(var n=document.createElement("ul"),d=0,B=this._introItems.length;d<B;d++){var z=document.createElement("li"),A=document.createElement("a");A.onclick=function(){b.goToStep(this.getAttribute("data-stepnumber"))},d===a.step-1&&(A.className="active"),A.href="javascript:void(0);",A.innerHTML="&nbsp;",A.setAttribute("data-stepnumber",this._introItems[d].step),z.appendChild(A),n.appendChild(z)}D.appendChild(n),E.className="introjs-progress",!1===this._options.showProgress&&(E.style.display="none"),d=document.createElement("div"),d.className="introjs-progressbar",d.setAttribute("style","width:"+L.call(this)+"%;"),E.appendChild(d),u.className="introjs-tooltipbuttons",!1===this._options.showButtons&&(u.style.display="none"),m.className="introjs-tooltip",m.appendChild(s),m.appendChild(D),m.appendChild(E),1==this._options.showStepNumbers&&(g=document.createElement("span"),g.className="introjs-helperNumberLayer",g.innerHTML=a.step,l.appendChild(g)),m.appendChild(c),l.appendChild(m),p=document.createElement("a"),p.onclick=function(){b._introItems.length-1!=b._currentStep&&x.call(b)},p.href="javascript:void(0);",p.innerHTML=this._options.nextLabel,l=document.createElement("a"),l.onclick=function(){0!=b._currentStep&&C.call(b)},l.href="javascript:void(0);",l.innerHTML=this._options.prevLabel,k=document.createElement("a"),k.className="introjs-button introjs-skipbutton",k.href="javascript:void(0);",k.innerHTML=this._options.skipLabel,k.onclick=function(){b._introItems.length-1==b._currentStep&&"function"==typeof b._introCompleteCallback&&b._introCompleteCallback.call(b),b._introItems.length-1!=b._currentStep&&"function"==typeof b._introExitCallback&&b._introExitCallback.call(b),y.call(b,b._targetElement)},u.appendChild(k),1<this._introItems.length&&(u.appendChild(l),u.appendChild(p)),m.appendChild(u),J.call(b,a.element,m,c,g)}for(!0===this._options.disableInteraction&&O.call(b),l.removeAttribute("tabIndex"),p.removeAttribute("tabIndex"),0==this._currentStep&&1<this._introItems.length?(l.className="introjs-button introjs-prevbutton introjs-disabled",l.tabIndex="-1",p.className="introjs-button introjs-nextbutton",k.innerHTML=this._options.skipLabel):this._introItems.length-1==this._currentStep||1==this._introItems.length?(k.innerHTML=this._options.doneLabel,
l.className="introjs-button introjs-prevbutton",p.className="introjs-button introjs-nextbutton introjs-disabled",p.tabIndex="-1"):(l.className="introjs-button introjs-prevbutton",p.className="introjs-button introjs-nextbutton",k.innerHTML=this._options.skipLabel),p.focus(),a.element.className+=" introjs-showElement",g=w(a.element,"position"),"absolute"!==g&&"relative"!==g&&(a.element.className+=" introjs-relativePosition"),g=a.element.parentNode;null!=g&&"body"!==g.tagName.toLowerCase();)c=w(g,"z-index"),m=parseFloat(w(g,"opacity")),u=w(g,"transform")||w(g,"-webkit-transform")||w(g,"-moz-transform")||w(g,"-ms-transform")||w(g,"-o-transform"),(/[0-9]+/.test(c)||1>m||"none"!==u&&void 0!==u)&&(g.className+=" introjs-fixParent"),g=g.parentNode;P(a.element)||!0!==this._options.scrollToElement||(m=a.element.getBoundingClientRect(),g=F().height,c=m.bottom-(m.bottom-m.top),m=m.bottom-g,0>c||a.element.clientHeight>g?window.scrollBy(0,c-30):window.scrollBy(0,m+100)),void 0!==this._introAfterChangeCallback&&this._introAfterChangeCallback.call(this,a.element)}function w(a,b){var c="";return a.currentStyle?c=a.currentStyle[b]:document.defaultView&&document.defaultView.getComputedStyle&&(c=document.defaultView.getComputedStyle(a,null).getPropertyValue(b)),c&&c.toLowerCase?c.toLowerCase():c}function F(){if(void 0!=window.innerWidth)return{width:window.innerWidth,height:window.innerHeight};var a=document.documentElement;return{width:a.clientWidth,height:a.clientHeight}}function P(a){return a=a.getBoundingClientRect(),0<=a.top&&0<=a.left&&a.bottom+80<=window.innerHeight&&a.right<=window.innerWidth}function N(a){var b=document.createElement("div"),c="",e=this;if(b.className="introjs-overlay","body"===a.tagName.toLowerCase())c+="top: 0;bottom: 0; left: 0;right: 0;position: fixed;",b.setAttribute("style",c);else{var d=v(a);d&&(c+="width: "+d.width+"px; height:"+d.height+"px; top:"+d.top+"px;left: "+d.left+"px;",b.setAttribute("style",c))}return a.appendChild(b),b.onclick=function(){1==e._options.exitOnOverlayClick&&(void 0!=e._introExitCallback&&e._introExitCallback.call(e),y.call(e,a))},setTimeout(function(){c+="opacity: "+e._options.overlayOpacity.toString()+";",b.setAttribute("style",c)},10),!0}function v(a){var b={};b.width=a.offsetWidth,b.height=a.offsetHeight;for(var c=0,e=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)c+=a.offsetLeft,e+=a.offsetTop,a=a.offsetParent;return b.top=e,b.left=c,b}function L(){return parseInt(this._currentStep+1,10)/this._introItems.length*100}var G=function(a){if("object"==typeof a)return new n(a);if("string"==typeof a){if(a=document.querySelector(a))return new n(a);throw Error("There is no element with given selector.")}return new n(document.body)};return G.version="1.1.1",G.fn=n.prototype={clone:function(){return new n(this)},setOption:function(a,b){return this._options[a]=b,this},setOptions:function(a){var e,b=this._options,c={};for(e in b)c[e]=b[e];for(e in a)c[e]=a[e];return this._options=c,this},start:function(){return M.call(this,this._targetElement),this},goToStep:function(a){return this._currentStep=a-2,void 0!==this._introItems&&x.call(this),this},nextStep:function(){return x.call(this),this},previousStep:function(){return C.call(this),this},exit:function(){return y.call(this,this._targetElement),this},refresh:function(){return t.call(this,document.querySelector(".introjs-helperLayer")),t.call(this,document.querySelector(".introjs-tooltipReferenceLayer")),this},onbeforechange:function(a){if("function"!=typeof a)throw Error("Provided callback for onbeforechange was not a function");return this._introBeforeChangeCallback=a,this},onchange:function(a){if("function"!=typeof a)throw Error("Provided callback for onchange was not a function.");return this._introChangeCallback=a,this},onafterchange:function(a){if("function"!=typeof a)throw Error("Provided callback for onafterchange was not a function");return this._introAfterChangeCallback=a,this},oncomplete:function(a){if("function"!=typeof a)throw Error("Provided callback for oncomplete was not a function.");return this._introCompleteCallback=a,this},onexit:function(a){if("function"!=typeof a)throw Error("Provided callback for onexit was not a function.");return this._introExitCallback=a,this}},B.introJs=G}),function(root,factory){"function"==typeof define&&define.amd?define(["angular","intro"],factory):"object"==typeof exports?module.exports=factory(require("angular"),require("intro")):root.angularIntroJs=factory(root.angular,root.introJs)}(this,function(angular,introJs){"object"==typeof introJs&&(introJs=introJs.introJs);var ngIntroDirective=angular.module("angular-intro",[]);return ngIntroDirective.directive("ngIntroOptions",["$timeout",function($timeout){return{restrict:"A",scope:{ngIntroMethod:"=",ngIntroExitMethod:"=?",ngIntroNextMethod:"=?",ngIntroPreviousMethod:"=?",ngIntroOptions:"=",ngIntroOncomplete:"=",ngIntroOnexit:"=",ngIntroOnchange:"=",ngIntroOnbeforechange:"=",ngIntroOnafterchange:"=",ngIntroAutostart:"=",ngIntroAutorefresh:"="},link:function(scope,element,attrs){var intro;scope.ngIntroMethod=function(step){var navigationWatch=scope.$on("$locationChangeStart",function(){intro.exit()});intro="string"==typeof step?introJs(step):introJs(),console.log(scope.ngIntroOptions),intro.setOptions(scope.ngIntroOptions),scope.ngIntroAutorefresh&&scope.$watch(function(){intro.refresh()}),scope.ngIntroOncomplete&&intro.oncomplete(function(){scope.ngIntroOncomplete.call(this,scope),$timeout(function(){scope.$digest()}),navigationWatch()}),scope.ngIntroOnexit&&intro.onexit(function(){scope.ngIntroOnexit.call(this,scope),$timeout(function(){scope.$digest()}),navigationWatch()}),scope.ngIntroOnchange&&intro.onchange(function(targetElement){scope.ngIntroOnchange.call(this,targetElement,scope),$timeout(function(){scope.$digest()})}),scope.ngIntroOnbeforechange&&intro.onbeforechange(function(targetElement){scope.ngIntroOnbeforechange.call(this,targetElement,scope),$timeout(function(){scope.$digest()})}),scope.ngIntroOnafterchange&&intro.onafterchange(function(targetElement){scope.ngIntroOnafterchange.call(this,targetElement,scope),$timeout(function(){scope.$digest()})}),"number"==typeof step?intro.goToStep(step).start():(console.log("start"),intro.start())},scope.ngIntroNextMethod=function(){intro.nextStep()},scope.ngIntroPreviousMethod=function(){intro.previousStep()},scope.ngIntroExitMethod=function(callback){intro.exit(),callback()};var autoStartWatch=scope.$watch("ngIntroAutostart",function(){scope.ngIntroAutostart&&$timeout(function(){scope.ngIntroMethod()}),autoStartWatch()});scope.$on("$locationChangeSuccess",function(){void 0!==intro&&intro.exit()})}}}]),ngIntroDirective}),function(){"use strict";var angular=window.angular?window.angular:"undefined"!=typeof require?require("angular"):void 0,circular=angular.module("angularCircularNavigation",[]).directive("circular",["$compile",function($compile){return{restrict:"EA",scope:{options:"="},template:'<button ng-click="toggleMenu()" class="cn-button {{options.button.size}}" ng-class="options.button.cssClass" style="background: {{options.button.background ? options.button.background : options.background}}; color: {{options.button.color ? options.button.color :options.color}};">{{options.content}}</button><div class="cn-wrapper {{options.size}} items-{{options.items.length}}" ng-class="{\'opened-nav\': options.isOpen}"><ul><li ng-repeat="item in options.items"><a ng-hide="item.empty" ng-click="perform(options, item)" ng-class="{\'is-active\': item.isActive}" class="{{item.cssClass}}" style="background: {{item.background ? item.background : options.background}}; color: {{item.color ? item.color : options.color}};"><span>{{item.content}}</span></a></li></ul></div>',controller:["$scope","$element","$attrs",function($scope,$element,$attrs){$scope.toggleMenu=function(){$scope.options.isOpen=!$scope.options.isOpen},$scope.perform=function(options,item){"function"==typeof item.onclick&&item.onclick(options,item),$scope.options.toggleOnClick&&$scope.toggleMenu()}}]}}]);"function"==typeof define&&define.amd?define("circular",["angular"],circular):"undefined"!=typeof exports&&"undefined"!=typeof module&&(module.exports=circular)}(),function(a,b){b.true=a,function(b,c){"function"==typeof define&&define.amd?define(b):"undefined"!=typeof module&&"object"==typeof a?module.exports=b():c.rangy=b()}(function(){function a(a,b){var c=typeof a[b];return c==u||!(c!=t||!a[b])||"unknown"==c}function b(a,b){return!(typeof a[b]!=t||!a[b])}function c(a,b){return typeof a[b]!=v}function d(a){return function(b,c){for(var d=c.length;d--;)if(!a(b,c[d]))return!1;return!0}}function e(a){return a&&A(a,z)&&C(a,y)}function f(a){return b(a,"body")?a.body:a.getElementsByTagName("body")[0]}function g(b){typeof console!=v&&a(console,"log")&&console.log(b)}function h(a,b){F&&b?alert(a):g(a)}function i(a){H.initialized=!0,H.supported=!1,h("Rangy is not supported in this environment. Reason: "+a,H.config.alertOnFail)}function j(a){h("Rangy warning: "+a,H.config.alertOnWarn)}function k(a){return a.message||a.description||String(a)}function l(){if(F&&!H.initialized){var b,c=!1,d=!1;a(document,"createRange")&&(b=document.createRange(),A(b,x)&&C(b,w)&&(c=!0));var h=f(document);if(!h||"body"!=h.nodeName.toLowerCase())return void i("No body element found");if(h&&a(h,"createTextRange")&&(b=h.createTextRange(),e(b)&&(d=!0)),!c&&!d)return void i("Neither Range nor TextRange are available");H.initialized=!0,H.features={implementsDomRange:c,implementsTextRange:d};var j,l;for(var m in E)(j=E[m])instanceof p&&j.init(j,H);for(var n=0,o=K.length;o>n;++n)try{K[n](H)}catch(q){l="Rangy init listener threw an exception. Continuing. Detail: "+k(q),g(l)}}}function m(a,b,c){c&&(a+=" in module "+c.name),H.warn("DEPRECATED: "+a+" is deprecated. Please use "+b+" instead.")}function n(a,b,c,d){a[b]=function(){return m(b,c,d),a[c].apply(a,G.toArray(arguments))}}function o(a){a=a||window,l();for(var b=0,c=L.length;c>b;++b)L[b](a)}function p(a,b,c){this.name=a,this.dependencies=b,this.initialized=!1,this.supported=!1,this.initializer=c}function q(a,b,c){var d=new p(a,b,function(b){if(!b.initialized){b.initialized=!0;try{c(H,b),b.supported=!0}catch(d){var e="Module '"+a+"' failed to load: "+k(d);g(e),d.stack&&g(d.stack)}}});return E[a]=d,d}function r(){}function s(){}var t="object",u="function",v="undefined",w=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],x=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],y=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],z=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"],A=d(a),B=d(b),C=d(c),D=[].forEach?function(a,b){a.forEach(b)}:function(a,b){for(var c=0,d=a.length;d>c;++c)b(a[c],c)},E={},F=typeof window!=v&&typeof document!=v,G={isHostMethod:a,isHostObject:b,isHostProperty:c,areHostMethods:A,areHostObjects:B,areHostProperties:C,isTextRange:e,getBody:f,forEach:D},H={version:"1.3.0",initialized:!1,isBrowser:F,supported:!0,util:G,features:{},modules:E,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==v||rangyAutoInitialize}};H.fail=i,H.warn=j;var I;!{}.hasOwnProperty?i("hasOwnProperty not supported"):(G.extend=I=function(a,b,c){var d,e;for(var f in b)b.hasOwnProperty(f)&&(d=a[f],e=b[f],c&&null!==d&&"object"==typeof d&&null!==e&&"object"==typeof e&&I(d,e,!0),a[f]=e);return b.hasOwnProperty("toString")&&(a.toString=b.toString),a},G.createOptions=function(a,b){var c={};return I(c,b),a&&I(c,a),c}),F||i("Rangy can only run in a browser"),function(){var a;if(F){var b=document.createElement("div");b.appendChild(document.createElement("span"));var c=[].slice;try{1==c.call(b.childNodes,0)[0].nodeType&&(a=function(a){return c.call(a,0)})}catch(d){}}a||(a=function(a){for(var b=[],c=0,d=a.length;d>c;++c)b[c]=a[c];return b}),G.toArray=a}();var J;F&&(a(document,"addEventListener")?J=function(a,b,c){a.addEventListener(b,c,!1)}:a(document,"attachEvent")?J=function(a,b,c){a.attachEvent("on"+b,c)}:i("Document does not have required addEventListener or attachEvent method"),G.addListener=J);var K=[];G.deprecationNotice=m,G.createAliasForDeprecatedMethod=n,H.init=l,H.addInitListener=function(a){H.initialized?a(H):K.push(a)};var L=[];H.addShimListener=function(a){L.push(a)},F&&(H.shim=H.createMissingNativeApi=o,n(H,"createMissingNativeApi","shim")),p.prototype={init:function(){for(var a,b,c=this.dependencies||[],d=0,e=c.length;e>d;++d){if(b=c[d],!((a=E[b])&&a instanceof p))throw new Error("required module '"+b+"' not found");if(a.init(),!a.supported)throw new Error("required module '"+b+"' not supported")}this.initializer(this)},fail:function(a){throw this.initialized=!0,this.supported=!1,new Error(a)},warn:function(a){H.warn("Module "+this.name+": "+a)},deprecationNotice:function(a,b){H.warn("DEPRECATED: "+a+" in module "+this.name+" is deprecated. Please use "+b+" instead")},createError:function(a){return new Error("Error in Rangy "+this.name+" module: "+a)}},H.createModule=function(a){var b,c;2==arguments.length?(b=arguments[1],c=[]):(b=arguments[2],c=arguments[1]);var d=q(a,c,b);H.initialized&&H.supported&&d.init()},H.createCoreModule=function(a,b,c){q(a,b,c)},H.RangePrototype=r,H.rangePrototype=new r,H.selectionPrototype=new s,H.createCoreModule("DomUtil",[],function(a,b){function c(a){var b;return typeof a.namespaceURI==F||null===(b=a.namespaceURI)||"http://www.w3.org/1999/xhtml"==b}function d(a){var b=a.parentNode;return 1==b.nodeType?b:null}function e(a){for(var b=0;a=a.previousSibling;)++b;return b}function f(a){switch(a.nodeType){case 7:case 10:return 0;case 3:case 8:return a.length;default:return a.childNodes.length}}function g(a,b){var c,d=[];for(c=a;c;c=c.parentNode)d.push(c);for(c=b;c;c=c.parentNode)if(K(d,c))return c;return null}function h(a,b,c){for(var d=c?b:b.parentNode;d;){if(d===a)return!0;d=d.parentNode}return!1}function i(a,b){return h(a,b,!0)}function j(a,b,c){for(var d,e=c?a:a.parentNode;e;){if((d=e.parentNode)===b)return e;e=d}return null}function k(a){var b=a.nodeType;return 3==b||4==b||8==b}function l(a){if(!a)return!1;var b=a.nodeType;return 3==b||8==b}function m(a,b){var c=b.nextSibling,d=b.parentNode;return c?d.insertBefore(a,c):d.appendChild(a),a}function n(a,b,c){var d=a.cloneNode(!1);if(d.deleteData(0,b),a.deleteData(b,a.length-b),m(d,a),c)for(var f,g=0;f=c[g++];)f.node==a&&f.offset>b?(f.node=d,f.offset-=b):f.node==a.parentNode&&f.offset>e(a)&&++f.offset;return d}function o(a){if(9==a.nodeType)return a;if(typeof a.ownerDocument!=F)return a.ownerDocument;if(typeof a.document!=F)return a.document;if(a.parentNode)return o(a.parentNode);throw b.createError("getDocument: no document found for node")}function p(a){var c=o(a);if(typeof c.defaultView!=F)return c.defaultView;if(typeof c.parentWindow!=F)return c.parentWindow;throw b.createError("Cannot get a window object for node")}function q(a){if(typeof a.contentDocument!=F)return a.contentDocument;if(typeof a.contentWindow!=F)return a.contentWindow.document;throw b.createError("getIframeDocument: No Document object found for iframe element")}function r(a){if(typeof a.contentWindow!=F)return a.contentWindow;if(typeof a.contentDocument!=F)return a.contentDocument.defaultView;throw b.createError("getIframeWindow: No Window object found for iframe element")}function s(a){return a&&G.isHostMethod(a,"setTimeout")&&G.isHostObject(a,"document")}function t(a,b,c){var d;if(a?G.isHostProperty(a,"nodeType")?d=1==a.nodeType&&"iframe"==a.tagName.toLowerCase()?q(a):o(a):s(a)&&(d=a.document):d=document,!d)throw b.createError(c+"(): Parameter must be a Window object or DOM node");return d}function u(a){for(var b;b=a.parentNode;)a=b;return a}function v(a,c,d,f){var h,i,k,l,m;if(a==d)return c===f?0:f>c?-1:1;if(h=j(d,a,!0))return c<=e(h)?-1:1;if(h=j(a,d,!0))return e(h)<f?-1:1;if(!(i=g(a,d)))throw new Error("comparePoints error: nodes have no common ancestor");if(k=a===i?i:j(a,i,!0),l=d===i?i:j(d,i,!0),k===l)throw b.createError("comparePoints got to case 4 and childA and childB are the same!");for(m=i.firstChild;m;){if(m===k)return-1;if(m===l)return 1;m=m.nextSibling}}function w(a){try{return a.parentNode,!1}catch(c){return!0}}function x(a){if(!a)return"[No node]";if(L&&w(a))return"[Broken node]";if(k(a))return'"'+a.data+'"';if(1==a.nodeType){var b=a.id?' id="'+a.id+'"':"";return"<"+a.nodeName+b+">[index:"+e(a)+",length:"+a.childNodes.length+"]["+(a.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return a.nodeName}function y(a){for(var b,c=o(a).createDocumentFragment();b=a.firstChild;)c.appendChild(b);return c}function z(a,b,c){var d=H(a),e=a.createElement("div");e.contentEditable=""+!!c,b&&(e.innerHTML=b);var f=d.firstChild;return f?d.insertBefore(e,f):d.appendChild(e),e}function A(a){return a.parentNode.removeChild(a)}function B(a){this.root=a,this._next=a}function C(a){return new B(a)}function D(a,b){this.node=a,this.offset=b}function E(a){this.code=this[a],this.codeName=a,this.message="DOMException: "+this.codeName}var F="undefined",G=a.util,H=G.getBody;G.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||b.fail("document missing a Node creation method"),G.isHostMethod(document,"getElementsByTagName")||b.fail("document missing getElementsByTagName method");var I=document.createElement("div");G.areHostMethods(I,["insertBefore","appendChild","cloneNode"]||!G.areHostObjects(I,["previousSibling","nextSibling","childNodes","parentNode"]))||b.fail("Incomplete Element implementation"),G.isHostProperty(I,"innerHTML")||b.fail("Element is missing innerHTML property");var J=document.createTextNode("test");G.areHostMethods(J,["splitText","deleteData","insertData","appendData","cloneNode"]||!G.areHostObjects(I,["previousSibling","nextSibling","childNodes","parentNode"])||!G.areHostProperties(J,["data"]))||b.fail("Incomplete Text Node implementation");var K=function(a,b){for(var c=a.length;c--;)if(a[c]===b)return!0;return!1},L=!1;!function(){var b=document.createElement("b");b.innerHTML="1";var c=b.firstChild;b.innerHTML="<br />",L=w(c),a.features.crashyTextNodes=L}();var M;typeof window.getComputedStyle!=F?M=function(a,b){return p(a).getComputedStyle(a,null)[b]}:typeof document.documentElement.currentStyle!=F?M=function(a,b){return a.currentStyle?a.currentStyle[b]:""}:b.fail("No means of obtaining computed style properties found"),B.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var a,b,c=this._current=this._next;if(this._current)if(a=c.firstChild)this._next=a;else{for(b=null;c!==this.root&&!(b=c.nextSibling);)c=c.parentNode;this._next=b}return this._current},detach:function(){this._current=this._next=this.root=null}},D.prototype={equals:function(a){return!!a&&this.node===a.node&&this.offset==a.offset},inspect:function(){return"[DomPosition("+x(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},E.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},E.prototype.toString=function(){return this.message},a.dom={arrayContains:K,isHtmlNamespace:c,parentElement:d,getNodeIndex:e,getNodeLength:f,getCommonAncestor:g,isAncestorOf:h,isOrIsAncestorOf:i,getClosestAncestorIn:j,isCharacterDataNode:k,isTextOrCommentNode:l,insertAfter:m,splitDataNode:n,getDocument:o,getWindow:p,getIframeWindow:r,getIframeDocument:q,getBody:H,isWindow:s,getContentDocument:t,getRootContainer:u,comparePoints:v,isBrokenNode:w,inspectNode:x,getComputedStyleProperty:M,createTestElement:z,removeNode:A,fragmentFromNodeChildren:y,createIterator:C,DomPosition:D},a.DOMException=E}),H.createCoreModule("DomRange",["DomUtil"],function(a,b){function c(a,b){return 3!=a.nodeType&&(P(a,b.startContainer)||P(a,b.endContainer))}function d(a){return a.document||Q(a.startContainer)}function e(a){return W(a.startContainer)}function f(a){return new L(a.parentNode,O(a))}function g(a){return new L(a.parentNode,O(a)+1)}function h(a,b,c){var d=11==a.nodeType?a.firstChild:a;return N(b)?c==b.length?J.insertAfter(a,b):b.parentNode.insertBefore(a,0==c?b:S(b,c)):c>=b.childNodes.length?b.appendChild(a):b.insertBefore(a,b.childNodes[c]),d}function i(a,b,c){if(z(a),z(b),d(b)!=d(a))throw new M("WRONG_DOCUMENT_ERR");var e=R(a.startContainer,a.startOffset,b.endContainer,b.endOffset),f=R(a.endContainer,a.endOffset,b.startContainer,b.startOffset);return c?0>=e&&f>=0:0>e&&f>0}function j(a){for(var b,c,e,f=d(a.range).createDocumentFragment();c=a.next();){if(b=a.isPartiallySelectedSubtree(),c=c.cloneNode(!b),b&&(e=a.getSubtreeIterator(),c.appendChild(j(e)),e.detach()),10==c.nodeType)throw new M("HIERARCHY_REQUEST_ERR");f.appendChild(c)}return f}function k(a,b,c){var d,e;c=c||{stop:!1};for(var f,g;f=a.next();)if(a.isPartiallySelectedSubtree()){if(b(f)===!1)return void(c.stop=!0);if(g=a.getSubtreeIterator(),k(g,b,c),g.detach(),c.stop)return}else for(d=J.createIterator(f);e=d.next();)if(b(e)===!1)return void(c.stop=!0)}function l(a){for(var b;a.next();)a.isPartiallySelectedSubtree()?(b=a.getSubtreeIterator(),l(b),b.detach()):a.remove()}function m(a){for(var b,c,e=d(a.range).createDocumentFragment();b=a.next();){if(a.isPartiallySelectedSubtree()?(b=b.cloneNode(!1),c=a.getSubtreeIterator(),b.appendChild(m(c)),c.detach()):a.remove(),10==b.nodeType)throw new M("HIERARCHY_REQUEST_ERR");e.appendChild(b)}return e}function n(a,b,c){var d,e=!(!b||!b.length),f=!!c;e&&(d=new RegExp("^("+b.join("|")+")$"));var g=[];return k(new p(a,!1),function(b){if((!e||d.test(b.nodeType))&&(!f||c(b))){var h=a.startContainer;if(b!=h||!N(h)||a.startOffset!=h.length){var i=a.endContainer;b==i&&N(i)&&0==a.endOffset||g.push(b)}}}),g}function o(a){return"["+(void 0===a.getName?"Range":a.getName())+"("+J.inspectNode(a.startContainer)+":"+a.startOffset+", "+J.inspectNode(a.endContainer)+":"+a.endOffset+")]"}function p(a,b){if(this.range=a,this.clonePartiallySelectedTextNodes=b,!a.collapsed){this.sc=a.startContainer,this.so=a.startOffset,this.ec=a.endContainer,this.eo=a.endOffset;var c=a.commonAncestorContainer;this.sc===this.ec&&N(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==c||N(this.sc)?T(this.sc,c,!0):this.sc.childNodes[this.so],this._last=this.ec!==c||N(this.ec)?T(this.ec,c,!0):this.ec.childNodes[this.eo-1])}}function q(a){return function(b,c){for(var d,e=c?b:b.parentNode;e;){if(d=e.nodeType,V(a,d))return e;e=e.parentNode}return null}}function r(a,b){if(ea(a,b))throw new M("INVALID_NODE_TYPE_ERR")}function s(a,b){if(!V(b,a.nodeType))throw new M("INVALID_NODE_TYPE_ERR")}function t(a,b){if(0>b||b>(N(a)?a.length:a.childNodes.length))throw new M("INDEX_SIZE_ERR")}function u(a,b){if(ca(a,!0)!==ca(b,!0))throw new M("WRONG_DOCUMENT_ERR")}function v(a){if(da(a,!0))throw new M("NO_MODIFICATION_ALLOWED_ERR")}function w(a,b){if(!a)throw new M(b)}function x(a,b){return b<=(N(a)?a.length:a.childNodes.length)}function y(a){return!!a.startContainer&&!!a.endContainer&&!(X&&(J.isBrokenNode(a.startContainer)||J.isBrokenNode(a.endContainer)))&&W(a.startContainer)==W(a.endContainer)&&x(a.startContainer,a.startOffset)&&x(a.endContainer,a.endOffset)}function z(a){if(!y(a))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+a.inspect()+")")}function A(a,b){z(a);var c=a.startContainer,d=a.startOffset,e=a.endContainer,f=a.endOffset,g=c===e;N(e)&&f>0&&f<e.length&&S(e,f,b),N(c)&&d>0&&d<c.length&&(c=S(c,d,b),g?(f-=d,e=c):e==c.parentNode&&f>=O(c)&&f++,d=0),a.setStartAndEnd(c,d,e,f)}function B(a){z(a);var b=a.commonAncestorContainer.parentNode.cloneNode(!1);return b.appendChild(a.cloneContents()),b.innerHTML}function C(a){a.START_TO_START=ka,a.START_TO_END=la,a.END_TO_END=ma,a.END_TO_START=na,a.NODE_BEFORE=oa,a.NODE_AFTER=pa,a.NODE_BEFORE_AND_AFTER=qa,a.NODE_INSIDE=ra}function D(a){C(a),C(a.prototype)}function E(a,b){return function(){z(this);var c,d,e=this.startContainer,f=this.startOffset,h=this.commonAncestorContainer,i=new p(this,!0);e!==h&&(c=T(e,h,!0),d=g(c),e=d.node,f=d.offset),k(i,v),i.reset();var j=a(i);return i.detach(),b(this,e,f,e,f),j}}function F(b,d){function e(a,b){return function(c){s(c,Z),s(W(c),$);var d=(a?f:g)(c);(b?h:i)(this,d.node,d.offset)}}function h(a,b,c){var e=a.endContainer,f=a.endOffset;(b!==a.startContainer||c!==a.startOffset)&&((W(b)!=W(e)||1==R(b,c,e,f))&&(e=b,f=c),d(a,b,c,e,f))}function i(a,b,c){var e=a.startContainer,f=a.startOffset;(b!==a.endContainer||c!==a.endOffset)&&((W(b)!=W(e)||-1==R(b,c,e,f))&&(e=b,f=c),d(a,e,f,b,c))}var j=function(){};j.prototype=a.rangePrototype,b.prototype=new j,K.extend(b.prototype,{setStart:function(a,b){r(a,!0),t(a,b),h(this,a,b)},setEnd:function(a,b){r(a,!0),t(a,b),i(this,a,b)},setStartAndEnd:function(){var a=arguments,b=a[0],c=a[1],e=b,f=c;switch(a.length){case 3:f=a[2];break;case 4:e=a[2],f=a[3]}d(this,b,c,e,f)},setBoundary:function(a,b,c){this["set"+(c?"Start":"End")](a,b)},setStartBefore:e(!0,!0),setStartAfter:e(!1,!0),setEndBefore:e(!0,!1),setEndAfter:e(!1,!1),collapse:function(a){z(this),a?d(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):d(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(a){r(a,!0),d(this,a,0,a,U(a))},selectNode:function(a){r(a,!1),s(a,Z);var b=f(a),c=g(a);d(this,b.node,b.offset,c.node,c.offset)},extractContents:E(m,d),deleteContents:E(l,d),canSurroundContents:function(){z(this),v(this.startContainer),v(this.endContainer);var a=new p(this,!0),b=a._first&&c(a._first,this)||a._last&&c(a._last,this);return a.detach(),!b},splitBoundaries:function(){A(this)},splitBoundariesPreservingPositions:function(a){A(this,a)},normalizeBoundaries:function(){z(this);var a,b=this.startContainer,c=this.startOffset,e=this.endContainer,f=this.endOffset,g=function(a){var b=a.nextSibling;b&&b.nodeType==a.nodeType&&(e=a,f=a.length,a.appendData(b.data),Y(b))},h=function(a){var d=a.previousSibling;if(d&&d.nodeType==a.nodeType){b=a;var g=a.length;if(c=d.length,a.insertData(0,d.data),Y(d),b==e)f+=c,e=b;else if(e==a.parentNode){var h=O(a);f==h?(e=a,f=g):f>h&&f--}}},i=!0;if(N(e))f==e.length?g(e):0==f&&(a=e.previousSibling)&&a.nodeType==e.nodeType&&(f=a.length,b==e&&(i=!1),a.appendData(e.data),Y(e),e=a);else{if(f>0){var j=e.childNodes[f-1];j&&N(j)&&g(j)}i=!this.collapsed}if(i){if(N(b))0==c?h(b):c==b.length&&(a=b.nextSibling)&&a.nodeType==b.nodeType&&(e==a&&(e=b,f+=b.length),b.appendData(a.data),Y(a));else if(c<b.childNodes.length){var k=b.childNodes[c];k&&N(k)&&h(k)}}else b=e,c=f;d(this,b,c,e,f)},collapseToPoint:function(a,b){r(a,!0),t(a,b),this.setStartAndEnd(a,b)}}),D(b)}function G(a){a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset,a.commonAncestorContainer=a.collapsed?a.startContainer:J.getCommonAncestor(a.startContainer,a.endContainer)}function H(a,b,c,d,e){a.startContainer=b,a.startOffset=c,a.endContainer=d,a.endOffset=e,a.document=J.getDocument(b),G(a)}function I(a){this.startContainer=a,this.startOffset=0,this.endContainer=a,this.endOffset=0,this.document=a,G(this)}var J=a.dom,K=a.util,L=J.DomPosition,M=a.DOMException,N=J.isCharacterDataNode,O=J.getNodeIndex,P=J.isOrIsAncestorOf,Q=J.getDocument,R=J.comparePoints,S=J.splitDataNode,T=J.getClosestAncestorIn,U=J.getNodeLength,V=J.arrayContains,W=J.getRootContainer,X=a.features.crashyTextNodes,Y=J.removeNode;p.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var a=this._current=this._next;return a&&(this._next=a!==this._last?a.nextSibling:null,N(a)&&this.clonePartiallySelectedTextNodes&&(a===this.ec&&(a=a.cloneNode(!0)).deleteData(this.eo,a.length-this.eo),this._current===this.sc&&(a=a.cloneNode(!0)).deleteData(0,this.so))),a},remove:function(){var a,b,c=this._current;!N(c)||c!==this.sc&&c!==this.ec?c.parentNode&&Y(c):(a=c===this.sc?this.so:0,b=c===this.ec?this.eo:c.length,a!=b&&c.deleteData(a,b-a))},isPartiallySelectedSubtree:function(){return c(this._current,this.range)},getSubtreeIterator:function(){var a;if(this.isSingleCharacterDataNode)a=this.range.cloneRange(),a.collapse(!1);else{a=new I(d(this.range));var b=this._current,c=b,e=0,f=b,g=U(b);P(b,this.sc)&&(c=this.sc,e=this.so),P(b,this.ec)&&(f=this.ec,g=this.eo),H(a,c,e,f,g)}return new p(a,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var Z=[1,3,4,5,7,8,10],$=[2,9,11],_=[5,6,10,12],aa=[1,3,4,5,7,8,10,11],ba=[1,3,4,5,7,8],ca=q([9,11]),da=q(_),ea=q([6,10,12]),fa=document.createElement("style"),ga=!1;try{fa.innerHTML="<b>x</b>",ga=3==fa.firstChild.nodeType}catch(ha){}a.features.htmlParsingConforms=ga;var ia=ga?function(a){var b=this.startContainer,c=Q(b);if(!b)throw new M("INVALID_STATE_ERR");var d=null;return 1==b.nodeType?d=b:N(b)&&(d=J.parentElement(b)),d=null===d||"HTML"==d.nodeName&&J.isHtmlNamespace(Q(d).documentElement)&&J.isHtmlNamespace(d)?c.createElement("body"):d.cloneNode(!1),d.innerHTML=a,J.fragmentFromNodeChildren(d)}:function(a){var b=d(this),c=b.createElement("body");return c.innerHTML=a,J.fragmentFromNodeChildren(c)},ja=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],ka=0,la=1,ma=2,na=3,oa=0,pa=1,qa=2,ra=3;K.extend(a.rangePrototype,{compareBoundaryPoints:function(a,b){z(this),u(this.startContainer,b.startContainer);var c,d,e,f,g=a==na||a==ka?"start":"end",h=a==la||a==ka?"start":"end";return c=this[g+"Container"],d=this[g+"Offset"],e=b[h+"Container"],f=b[h+"Offset"],R(c,d,e,f)},insertNode:function(a){if(z(this),s(a,aa),v(this.startContainer),P(a,this.startContainer))throw new M("HIERARCHY_REQUEST_ERR");var b=h(a,this.startContainer,this.startOffset);this.setStartBefore(b)},cloneContents:function(){z(this);var a,b;if(this.collapsed)return d(this).createDocumentFragment();if(this.startContainer===this.endContainer&&N(this.startContainer))return a=this.startContainer.cloneNode(!0),a.data=a.data.slice(this.startOffset,this.endOffset),b=d(this).createDocumentFragment(),b.appendChild(a),b;var c=new p(this,!0);return a=j(c),c.detach(),a},canSurroundContents:function(){z(this),v(this.startContainer),v(this.endContainer);var a=new p(this,!0),b=a._first&&c(a._first,this)||a._last&&c(a._last,this);return a.detach(),!b},surroundContents:function(a){if(s(a,ba),!this.canSurroundContents())throw new M("INVALID_STATE_ERR");var b=this.extractContents();if(a.hasChildNodes())for(;a.lastChild;)a.removeChild(a.lastChild);h(a,this.startContainer,this.startOffset),a.appendChild(b),this.selectNode(a)},cloneRange:function(){z(this);for(var a,b=new I(d(this)),c=ja.length;c--;)a=ja[c],b[a]=this[a];return b},toString:function(){z(this);var a=this.startContainer;if(a===this.endContainer&&N(a))return 3==a.nodeType||4==a.nodeType?a.data.slice(this.startOffset,this.endOffset):"";var b=[],c=new p(this,!0);return k(c,function(a){(3==a.nodeType||4==a.nodeType)&&b.push(a.data)}),c.detach(),b.join("")},compareNode:function(a){z(this);var b=a.parentNode,c=O(a);if(!b)throw new M("NOT_FOUND_ERR");var d=this.comparePoint(b,c),e=this.comparePoint(b,c+1);return 0>d?e>0?qa:oa:e>0?pa:ra},comparePoint:function(a,b){return z(this),w(a,"HIERARCHY_REQUEST_ERR"),u(a,this.startContainer),R(a,b,this.startContainer,this.startOffset)<0?-1:R(a,b,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:ia,toHtml:function(){return B(this)},intersectsNode:function(a,b){if(z(this),W(a)!=e(this))return!1;var c=a.parentNode,d=O(a);if(!c)return!0
;var f=R(c,d,this.endContainer,this.endOffset),g=R(c,d+1,this.startContainer,this.startOffset);return b?0>=f&&g>=0:0>f&&g>0},isPointInRange:function(a,b){return z(this),w(a,"HIERARCHY_REQUEST_ERR"),u(a,this.startContainer),R(a,b,this.startContainer,this.startOffset)>=0&&R(a,b,this.endContainer,this.endOffset)<=0},intersectsRange:function(a){return i(this,a,!1)},intersectsOrTouchesRange:function(a){return i(this,a,!0)},intersection:function(a){if(this.intersectsRange(a)){var b=R(this.startContainer,this.startOffset,a.startContainer,a.startOffset),c=R(this.endContainer,this.endOffset,a.endContainer,a.endOffset),d=this.cloneRange();return-1==b&&d.setStart(a.startContainer,a.startOffset),1==c&&d.setEnd(a.endContainer,a.endOffset),d}return null},union:function(a){if(this.intersectsOrTouchesRange(a)){var b=this.cloneRange();return-1==R(a.startContainer,a.startOffset,this.startContainer,this.startOffset)&&b.setStart(a.startContainer,a.startOffset),1==R(a.endContainer,a.endOffset,this.endContainer,this.endOffset)&&b.setEnd(a.endContainer,a.endOffset),b}throw new M("Ranges do not intersect")},containsNode:function(a,b){return b?this.intersectsNode(a,!1):this.compareNode(a)==ra},containsNodeContents:function(a){return this.comparePoint(a,0)>=0&&this.comparePoint(a,U(a))<=0},containsRange:function(a){var b=this.intersection(a);return null!==b&&a.equals(b)},containsNodeText:function(a){var b=this.cloneRange();b.selectNode(a);var c=b.getNodes([3]);if(c.length>0){b.setStart(c[0],0);var d=c.pop();return b.setEnd(d,d.length),this.containsRange(b)}return this.containsNodeContents(a)},getNodes:function(a,b){return z(this),n(this,a,b)},getDocument:function(){return d(this)},collapseBefore:function(a){this.setEndBefore(a),this.collapse(!1)},collapseAfter:function(a){this.setStartAfter(a),this.collapse(!0)},getBookmark:function(b){var c=d(this),e=a.createRange(c);b=b||J.getBody(c),e.selectNodeContents(b);var f=this.intersection(e),g=0,h=0;return f&&(e.setEnd(f.startContainer,f.startOffset),g=e.toString().length,h=g+f.toString().length),{start:g,end:h,containerNode:b}},moveToBookmark:function(a){var b=a.containerNode,c=0;this.setStart(b,0),this.collapse(!0);for(var d,e,f,g,h=[b],i=!1,j=!1;!j&&(d=h.pop());)if(3==d.nodeType)e=c+d.length,!i&&a.start>=c&&a.start<=e&&(this.setStart(d,a.start-c),i=!0),i&&a.end>=c&&a.end<=e&&(this.setEnd(d,a.end-c),j=!0),c=e;else for(g=d.childNodes,f=g.length;f--;)h.push(g[f])},getName:function(){return"DomRange"},equals:function(a){return I.rangesEqual(this,a)},isValid:function(){return y(this)},inspect:function(){return o(this)},detach:function(){}}),F(I,H),K.extend(I,{rangeProperties:ja,RangeIterator:p,copyComparisonConstants:D,createPrototypeRange:F,inspect:o,toHtml:B,getRangeDocument:d,rangesEqual:function(a,b){return a.startContainer===b.startContainer&&a.startOffset===b.startOffset&&a.endContainer===b.endContainer&&a.endOffset===b.endOffset}}),a.DomRange=I}),H.createCoreModule("WrappedRange",["DomRange"],function(a,b){var c,d,e=a.dom,f=a.util,g=e.DomPosition,h=a.DomRange,i=e.getBody,j=e.getContentDocument,k=e.isCharacterDataNode;if(a.features.implementsDomRange&&function(){function d(a){for(var b,c=m.length;c--;)b=m[c],a[b]=a.nativeRange[b];a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset}function g(a,b,c,d,e){var f=a.startContainer!==b||a.startOffset!=c,g=a.endContainer!==d||a.endOffset!=e,h=!a.equals(a.nativeRange);(f||g||h)&&(a.setEnd(d,e),a.setStart(b,c))}var k,l,m=h.rangeProperties;c=function(a){if(!a)throw b.createError("WrappedRange: Range must be specified");this.nativeRange=a,d(this)},h.createPrototypeRange(c,g),k=c.prototype,k.selectNode=function(a){this.nativeRange.selectNode(a),d(this)},k.cloneContents=function(){return this.nativeRange.cloneContents()},k.surroundContents=function(a){this.nativeRange.surroundContents(a),d(this)},k.collapse=function(a){this.nativeRange.collapse(a),d(this)},k.cloneRange=function(){return new c(this.nativeRange.cloneRange())},k.refresh=function(){d(this)},k.toString=function(){return this.nativeRange.toString()};var n=document.createTextNode("test");i(document).appendChild(n);var o=document.createRange();o.setStart(n,0),o.setEnd(n,0);try{o.setStart(n,1),k.setStart=function(a,b){this.nativeRange.setStart(a,b),d(this)},k.setEnd=function(a,b){this.nativeRange.setEnd(a,b),d(this)},l=function(a){return function(b){this.nativeRange[a](b),d(this)}}}catch(p){k.setStart=function(a,b){try{this.nativeRange.setStart(a,b)}catch(c){this.nativeRange.setEnd(a,b),this.nativeRange.setStart(a,b)}d(this)},k.setEnd=function(a,b){try{this.nativeRange.setEnd(a,b)}catch(c){this.nativeRange.setStart(a,b),this.nativeRange.setEnd(a,b)}d(this)},l=function(a,b){return function(c){try{this.nativeRange[a](c)}catch(e){this.nativeRange[b](c),this.nativeRange[a](c)}d(this)}}}k.setStartBefore=l("setStartBefore","setEndBefore"),k.setStartAfter=l("setStartAfter","setEndAfter"),k.setEndBefore=l("setEndBefore","setStartBefore"),k.setEndAfter=l("setEndAfter","setStartAfter"),k.selectNodeContents=function(a){this.setStartAndEnd(a,0,e.getNodeLength(a))},o.selectNodeContents(n),o.setEnd(n,3);var q=document.createRange();q.selectNodeContents(n),q.setEnd(n,4),q.setStart(n,2),-1==o.compareBoundaryPoints(o.START_TO_END,q)&&1==o.compareBoundaryPoints(o.END_TO_START,q)?k.compareBoundaryPoints=function(a,b){return b=b.nativeRange||b,a==b.START_TO_END?a=b.END_TO_START:a==b.END_TO_START&&(a=b.START_TO_END),this.nativeRange.compareBoundaryPoints(a,b)}:k.compareBoundaryPoints=function(a,b){return this.nativeRange.compareBoundaryPoints(a,b.nativeRange||b)};var r=document.createElement("div");r.innerHTML="123";var s=r.firstChild,t=i(document);t.appendChild(r),o.setStart(s,1),o.setEnd(s,2),o.deleteContents(),"13"==s.data&&(k.deleteContents=function(){this.nativeRange.deleteContents(),d(this)},k.extractContents=function(){var a=this.nativeRange.extractContents();return d(this),a}),t.removeChild(r),t=null,f.isHostMethod(o,"createContextualFragment")&&(k.createContextualFragment=function(a){return this.nativeRange.createContextualFragment(a)}),i(document).removeChild(n),k.getName=function(){return"WrappedRange"},a.WrappedRange=c,a.createNativeRange=function(a){return a=j(a,b,"createNativeRange"),a.createRange()}}(),a.features.implementsTextRange){var l=function(a){var b=a.parentElement(),c=a.duplicate();c.collapse(!0);var d=c.parentElement();c=a.duplicate(),c.collapse(!1);var f=c.parentElement(),g=d==f?d:e.getCommonAncestor(d,f);return g==b?g:e.getCommonAncestor(b,g)},m=function(a){return 0==a.compareEndPoints("StartToEnd",a)},n=function(a,b,c,d,f){var h=a.duplicate();h.collapse(c);var i=h.parentElement();if(e.isOrIsAncestorOf(b,i)||(i=b),!i.canHaveHTML){var j=new g(i.parentNode,e.getNodeIndex(i));return{boundaryPosition:j,nodeInfo:{nodeIndex:j.offset,containerElement:j.node}}}var l=e.getDocument(i).createElement("span");l.parentNode&&e.removeNode(l);for(var m,n,o,p,q,r=c?"StartToStart":"StartToEnd",s=f&&f.containerElement==i?f.nodeIndex:0,t=i.childNodes.length,u=t,v=u;v==t?i.appendChild(l):i.insertBefore(l,i.childNodes[v]),h.moveToElementText(l),0!=(m=h.compareEndPoints(r,a))&&s!=u;){if(-1==m){if(u==s+1)break;s=v}else u=u==s+1?s:v;v=Math.floor((s+u)/2),i.removeChild(l)}if(q=l.nextSibling,-1==m&&q&&k(q)){h.setEndPoint(c?"EndToStart":"EndToEnd",a);var w;if(/[\r\n]/.test(q.data)){var x=h.duplicate(),y=x.text.replace(/\r\n/g,"\r").length;for(w=x.moveStart("character",y);-1==(m=x.compareEndPoints("StartToEnd",x));)w++,x.moveStart("character",1)}else w=h.text.length;p=new g(q,w)}else n=(d||!c)&&l.previousSibling,o=(d||c)&&l.nextSibling,p=o&&k(o)?new g(o,0):n&&k(n)?new g(n,n.data.length):new g(i,e.getNodeIndex(l));return e.removeNode(l),{boundaryPosition:p,nodeInfo:{nodeIndex:v,containerElement:i}}},o=function(a,b){var c,d,f,g,h=a.offset,j=e.getDocument(a.node),l=i(j).createTextRange(),m=k(a.node);return m?(c=a.node,d=c.parentNode):(g=a.node.childNodes,c=h<g.length?g[h]:null,d=a.node),f=j.createElement("span"),f.innerHTML="&#feff;",c?d.insertBefore(f,c):d.appendChild(f),l.moveToElementText(f),l.collapse(!b),d.removeChild(f),m&&l[b?"moveStart":"moveEnd"]("character",h),l};d=function(a){this.textRange=a,this.refresh()},d.prototype=new h(document),d.prototype.refresh=function(){var a,b,c,d=l(this.textRange);m(this.textRange)?b=a=n(this.textRange,d,!0,!0).boundaryPosition:(c=n(this.textRange,d,!0,!1),a=c.boundaryPosition,b=n(this.textRange,d,!1,!1,c.nodeInfo).boundaryPosition),this.setStart(a.node,a.offset),this.setEnd(b.node,b.offset)},d.prototype.getName=function(){return"WrappedTextRange"},h.copyComparisonConstants(d);var p=function(a){if(a.collapsed)return o(new g(a.startContainer,a.startOffset),!0);var b=o(new g(a.startContainer,a.startOffset),!0),c=o(new g(a.endContainer,a.endOffset),!1),d=i(h.getRangeDocument(a)).createTextRange();return d.setEndPoint("StartToStart",b),d.setEndPoint("EndToEnd",c),d};if(d.rangeToTextRange=p,d.prototype.toTextRange=function(){return p(this)},a.WrappedTextRange=d,!a.features.implementsDomRange||a.config.preferTextRange){var q=function(a){return a("return this;")()}(Function);void 0===q.Range&&(q.Range=d),a.createNativeRange=function(a){return a=j(a,b,"createNativeRange"),i(a).createTextRange()},a.WrappedRange=d}}a.createRange=function(c){return c=j(c,b,"createRange"),new a.WrappedRange(a.createNativeRange(c))},a.createRangyRange=function(a){return a=j(a,b,"createRangyRange"),new h(a)},f.createAliasForDeprecatedMethod(a,"createIframeRange","createRange"),f.createAliasForDeprecatedMethod(a,"createIframeRangyRange","createRangyRange"),a.addShimListener(function(b){var c=b.document;void 0===c.createRange&&(c.createRange=function(){return a.createRange(c)}),c=b=null})}),H.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(a,b){function c(a){return"string"==typeof a?/^backward(s)?$/i.test(a):!!a}function d(a,c){if(a){if(C.isWindow(a))return a;if(a instanceof r)return a.win;var d=C.getContentDocument(a,b,c);return C.getWindow(d)}return window}function e(a){return d(a,"getWinSelection").getSelection()}function f(a){return d(a,"getDocSelection").document.selection}function g(a){var b=!1;return a.anchorNode&&(b=1==C.comparePoints(a.anchorNode,a.anchorOffset,a.focusNode,a.focusOffset)),b}function h(a,b,c){var d=c?"end":"start",e=c?"start":"end";a.anchorNode=b[d+"Container"],a.anchorOffset=b[d+"Offset"],a.focusNode=b[e+"Container"],a.focusOffset=b[e+"Offset"]}function i(a){var b=a.nativeSelection;a.anchorNode=b.anchorNode,a.anchorOffset=b.anchorOffset,a.focusNode=b.focusNode,a.focusOffset=b.focusOffset}function j(a){a.anchorNode=a.focusNode=null,a.anchorOffset=a.focusOffset=0,a.rangeCount=0,a.isCollapsed=!0,a._ranges.length=0}function k(b){var c;return b instanceof F?(c=a.createNativeRange(b.getDocument()),c.setEnd(b.endContainer,b.endOffset),c.setStart(b.startContainer,b.startOffset)):b instanceof G?c=b.nativeRange:J.implementsDomRange&&b instanceof C.getWindow(b.startContainer).Range&&(c=b),c}function l(a){if(!a.length||1!=a[0].nodeType)return!1;for(var b=1,c=a.length;c>b;++b)if(!C.isAncestorOf(a[0],a[b]))return!1;return!0}function m(a){var c=a.getNodes();if(!l(c))throw b.createError("getSingleElementFromRange: range "+a.inspect()+" did not consist of a single element");return c[0]}function n(a){return!!a&&void 0!==a.text}function o(a,b){var c=new G(b);a._ranges=[c],h(a,c,!1),a.rangeCount=1,a.isCollapsed=c.collapsed}function p(b){if(b._ranges.length=0,"None"==b.docSelection.type)j(b);else{var c=b.docSelection.createRange();if(n(c))o(b,c);else{b.rangeCount=c.length;for(var d,e=L(c.item(0)),f=0;f<b.rangeCount;++f)d=a.createRange(e),d.selectNode(c.item(f)),b._ranges.push(d);b.isCollapsed=1==b.rangeCount&&b._ranges[0].collapsed,h(b,b._ranges[b.rangeCount-1],!1)}}}function q(a,c){for(var d=a.docSelection.createRange(),e=m(c),f=L(d.item(0)),g=M(f).createControlRange(),h=0,i=d.length;i>h;++h)g.add(d.item(h));try{g.add(e)}catch(j){throw b.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}g.select(),p(a)}function r(a,b,c){this.nativeSelection=a,this.docSelection=b,this._ranges=[],this.win=c,this.refresh()}function s(a){a.win=a.anchorNode=a.focusNode=a._ranges=null,a.rangeCount=a.anchorOffset=a.focusOffset=0,a.detached=!0}function t(a,b){for(var c,d,e=ba.length;e--;)if(c=ba[e],d=c.selection,"deleteAll"==b)s(d);else if(c.win==a)return"delete"==b?(ba.splice(e,1),!0):d;return"deleteAll"==b&&(ba.length=0),null}function u(a,c){for(var d,e=L(c[0].startContainer),f=M(e).createControlRange(),g=0,h=c.length;h>g;++g){d=m(c[g]);try{f.add(d)}catch(i){throw b.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}f.select(),p(a)}function v(a,b){if(a.win.document!=L(b))throw new H("WRONG_DOCUMENT_ERR")}function w(b){return function(c,d){var e;this.rangeCount?(e=this.getRangeAt(0),e["set"+(b?"Start":"End")](c,d)):(e=a.createRange(this.win.document),e.setStartAndEnd(c,d)),this.setSingleRange(e,this.isBackward())}}function x(a){var b=[],c=new I(a.anchorNode,a.anchorOffset),d=new I(a.focusNode,a.focusOffset),e="function"==typeof a.getName?a.getName():"Selection";if(void 0!==a.rangeCount)for(var f=0,g=a.rangeCount;g>f;++f)b[f]=F.inspect(a.getRangeAt(f));return"["+e+"(Ranges: "+b.join(", ")+")(anchor: "+c.inspect()+", focus: "+d.inspect()+"]"}a.config.checkSelectionRanges=!0;var y,z,A="boolean",B="number",C=a.dom,D=a.util,E=D.isHostMethod,F=a.DomRange,G=a.WrappedRange,H=a.DOMException,I=C.DomPosition,J=a.features,K="Control",L=C.getDocument,M=C.getBody,N=F.rangesEqual,O=E(window,"getSelection"),P=D.isHostObject(document,"selection");J.implementsWinGetSelection=O,J.implementsDocSelection=P;var Q=P&&(!O||a.config.preferTextRange);if(Q)y=f,a.isSelectionValid=function(a){var b=d(a,"isSelectionValid").document,c=b.selection;return"None"!=c.type||L(c.createRange().parentElement())==b};else{if(!O)return b.fail("Neither document.selection or window.getSelection() detected."),!1;y=e,a.isSelectionValid=function(){return!0}}a.getNativeSelection=y;var R=y();if(!R)return b.fail("Native selection was null (possibly issue 138?)"),!1;var S=a.createNativeRange(document),T=M(document),U=D.areHostProperties(R,["anchorNode","focusNode","anchorOffset","focusOffset"]);J.selectionHasAnchorAndFocus=U;var V=E(R,"extend");J.selectionHasExtend=V;var W=typeof R.rangeCount==B;J.selectionHasRangeCount=W;var X=!1,Y=!0,Z=V?function(b,c){var d=F.getRangeDocument(c),e=a.createRange(d);e.collapseToPoint(c.endContainer,c.endOffset),b.addRange(k(e)),b.extend(c.startContainer,c.startOffset)}:null;D.areHostMethods(R,["addRange","getRangeAt","removeAllRanges"])&&typeof R.rangeCount==B&&J.implementsDomRange&&function(){var b=window.getSelection();if(b){for(var c=b.rangeCount,d=c>1,e=[],f=g(b),h=0;c>h;++h)e[h]=b.getRangeAt(h);var i=C.createTestElement(document,"",!1),j=i.appendChild(document.createTextNode("   ")),k=document.createRange();if(k.setStart(j,1),k.collapse(!0),b.removeAllRanges(),b.addRange(k),Y=1==b.rangeCount,b.removeAllRanges(),!d){var l=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(l&&parseInt(l[1])>=36)X=!1;else{var m=k.cloneRange();k.setStart(j,0),m.setEnd(j,3),m.setStart(j,2),b.addRange(k),b.addRange(m),X=2==b.rangeCount}}for(C.removeNode(i),b.removeAllRanges(),h=0;c>h;++h)0==h&&f?Z?Z(b,e[h]):(a.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),b.addRange(e[h])):b.addRange(e[h])}}(),J.selectionSupportsMultipleRanges=X,J.collapsedNonEditableSelectionsSupported=Y;var $,_=!1;T&&E(T,"createControlRange")&&($=T.createControlRange(),D.areHostProperties($,["item","add"])&&(_=!0)),J.implementsControlRange=_,z=U?function(a){return a.anchorNode===a.focusNode&&a.anchorOffset===a.focusOffset}:function(a){return!!a.rangeCount&&a.getRangeAt(a.rangeCount-1).collapsed};var aa;E(R,"getRangeAt")?aa=function(a,b){try{return a.getRangeAt(b)}catch(c){return null}}:U&&(aa=function(b){var c=L(b.anchorNode),d=a.createRange(c);return d.setStartAndEnd(b.anchorNode,b.anchorOffset,b.focusNode,b.focusOffset),d.collapsed!==this.isCollapsed&&d.setStartAndEnd(b.focusNode,b.focusOffset,b.anchorNode,b.anchorOffset),d}),r.prototype=a.selectionPrototype;var ba=[],ca=function(a){if(a&&a instanceof r)return a.refresh(),a;a=d(a,"getNativeSelection");var b=t(a),c=y(a),e=P?f(a):null;return b?(b.nativeSelection=c,b.docSelection=e,b.refresh()):(b=new r(c,e,a),ba.push({win:a,selection:b})),b};a.getSelection=ca,D.createAliasForDeprecatedMethod(a,"getIframeSelection","getSelection");var da=r.prototype;if(!Q&&U&&D.areHostMethods(R,["removeAllRanges","addRange"])){da.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),j(this)};var ea=function(a,b){Z(a.nativeSelection,b),a.refresh()};da.addRange=W?function(b,d){if(_&&P&&this.docSelection.type==K)q(this,b);else if(c(d)&&V)ea(this,b);else{var e;X?e=this.rangeCount:(this.removeAllRanges(),e=0);var f=k(b).cloneRange();try{this.nativeSelection.addRange(f)}catch(g){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==e+1){if(a.config.checkSelectionRanges){var i=aa(this.nativeSelection,this.rangeCount-1);i&&!N(i,b)&&(b=new G(i))}this._ranges[this.rangeCount-1]=b,h(this,b,ha(this.nativeSelection)),this.isCollapsed=z(this)}else this.refresh()}}:function(a,b){c(b)&&V?ea(this,a):(this.nativeSelection.addRange(k(a)),this.refresh())},da.setRanges=function(a){if(_&&P&&a.length>1)u(this,a);else{this.removeAllRanges();for(var b=0,c=a.length;c>b;++b)this.addRange(a[b])}}}else{if(!(E(R,"empty")&&E(S,"select")&&_&&Q))return b.fail("No means of selecting a Range or TextRange was found"),!1;da.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var a;if(this.anchorNode)a=L(this.anchorNode);else if(this.docSelection.type==K){var b=this.docSelection.createRange();b.length&&(a=L(b.item(0)))}if(a){M(a).createTextRange().select(),this.docSelection.empty()}}}catch(d){}j(this)},da.addRange=function(b){this.docSelection.type==K?q(this,b):(a.WrappedTextRange.rangeToTextRange(b).select(),this._ranges[0]=b,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,h(this,b,!1))},da.setRanges=function(a){this.removeAllRanges();var b=a.length;b>1?u(this,a):b&&this.addRange(a[0])}}da.getRangeAt=function(a){if(0>a||a>=this.rangeCount)throw new H("INDEX_SIZE_ERR");return this._ranges[a].cloneRange()};var fa;if(Q)fa=function(b){var c;a.isSelectionValid(b.win)?c=b.docSelection.createRange():(c=M(b.win.document).createTextRange(),c.collapse(!0)),b.docSelection.type==K?p(b):n(c)?o(b,c):j(b)};else if(E(R,"getRangeAt")&&typeof R.rangeCount==B)fa=function(b){if(_&&P&&b.docSelection.type==K)p(b);else if(b._ranges.length=b.rangeCount=b.nativeSelection.rangeCount,b.rangeCount){for(var c=0,d=b.rangeCount;d>c;++c)b._ranges[c]=new a.WrappedRange(b.nativeSelection.getRangeAt(c));h(b,b._ranges[b.rangeCount-1],ha(b.nativeSelection)),b.isCollapsed=z(b)}else j(b)};else{if(!U||typeof R.isCollapsed!=A||typeof S.collapsed!=A||!J.implementsDomRange)return b.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;fa=function(a){var b,c=a.nativeSelection;c.anchorNode?(b=aa(c,0),a._ranges=[b],a.rangeCount=1,i(a),a.isCollapsed=z(a)):j(a)}}da.refresh=function(a){var b=a?this._ranges.slice(0):null,c=this.anchorNode,d=this.anchorOffset;if(fa(this),a){var e=b.length;if(e!=this._ranges.length)return!0;if(this.anchorNode!=c||this.anchorOffset!=d)return!0;for(;e--;)if(!N(b[e],this._ranges[e]))return!0;return!1}};var ga=function(a,b){var c=a.getAllRanges();a.removeAllRanges();for(var d=0,e=c.length;e>d;++d)N(b,c[d])||a.addRange(c[d]);a.rangeCount||j(a)};da.removeRange=_&&P?function(a){if(this.docSelection.type==K){for(var b,c=this.docSelection.createRange(),d=m(a),e=L(c.item(0)),f=M(e).createControlRange(),g=!1,h=0,i=c.length;i>h;++h)b=c.item(h),b!==d||g?f.add(c.item(h)):g=!0;f.select(),p(this)}else ga(this,a)}:function(a){ga(this,a)};var ha;!Q&&U&&J.implementsDomRange?(ha=g,da.isBackward=function(){return ha(this)}):ha=da.isBackward=function(){return!1},da.isBackwards=da.isBackward,da.toString=function(){for(var a=[],b=0,c=this.rangeCount;c>b;++b)a[b]=""+this._ranges[b];return a.join("")},da.collapse=function(b,c){v(this,b);var d=a.createRange(b);d.collapseToPoint(b,c),this.setSingleRange(d),this.isCollapsed=!0},da.collapseToStart=function(){if(!this.rangeCount)throw new H("INVALID_STATE_ERR");var a=this._ranges[0];this.collapse(a.startContainer,a.startOffset)},da.collapseToEnd=function(){if(!this.rangeCount)throw new H("INVALID_STATE_ERR");var a=this._ranges[this.rangeCount-1];this.collapse(a.endContainer,a.endOffset)},da.selectAllChildren=function(b){v(this,b);var c=a.createRange(b);c.selectNodeContents(b),this.setSingleRange(c)},da.deleteFromDocument=function(){if(_&&P&&this.docSelection.type==K){for(var a,b=this.docSelection.createRange();b.length;)a=b.item(0),b.remove(a),C.removeNode(a);this.refresh()}else if(this.rangeCount){var c=this.getAllRanges();if(c.length){this.removeAllRanges();for(var d=0,e=c.length;e>d;++d)c[d].deleteContents();this.addRange(c[e-1])}}},da.eachRange=function(a,b){for(var c=0,d=this._ranges.length;d>c;++c)if(a(this.getRangeAt(c)))return b},da.getAllRanges=function(){var a=[];return this.eachRange(function(b){a.push(b)}),a},da.setSingleRange=function(a,b){this.removeAllRanges(),this.addRange(a,b)},da.callMethodOnEachRange=function(a,b){var c=[];return this.eachRange(function(d){c.push(d[a].apply(d,b||[]))}),c},da.setStart=w(!0),da.setEnd=w(!1),a.rangePrototype.select=function(a){ca(this.getDocument()).setSingleRange(this,a)},da.changeEachRange=function(a){var b=[],c=this.isBackward();this.eachRange(function(c){a(c),b.push(c)}),this.removeAllRanges(),c&&1==b.length?this.addRange(b[0],"backward"):this.setRanges(b)},da.containsNode=function(a,b){return this.eachRange(function(c){return c.containsNode(a,b)},!0)||!1},da.getBookmark=function(a){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[a])}},da.moveToBookmark=function(b){for(var c,d,e=[],f=0;c=b.rangeBookmarks[f++];)d=a.createRange(this.win),d.moveToBookmark(c),e.push(d);b.backward?this.setSingleRange(e[0],"backward"):this.setRanges(e)},da.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},da.restoreRanges=function(a){this.removeAllRanges();for(var b,c=0;b=a.ranges[c];++c)this.addRange(b,a.backward&&0==c)},da.toHtml=function(){var a=[];return this.eachRange(function(b){a.push(F.toHtml(b))}),a.join("")},J.implementsTextRange&&(da.getNativeTextRange=function(){var c;if(c=this.docSelection){var d=c.createRange();if(n(d))return d;throw b.createError("getNativeTextRange: selection is a control selection")}if(this.rangeCount>0)return a.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw b.createError("getNativeTextRange: selection contains no range")}),da.getName=function(){return"WrappedSelection"},da.inspect=function(){return x(this)},da.detach=function(){t(this.win,"delete"),s(this)},r.detachAll=function(){t(null,"deleteAll")},r.inspect=x,r.isDirectionBackward=c,a.Selection=r,a.selectionPrototype=da,a.addShimListener(function(a){void 0===a.getSelection&&(a.getSelection=function(){return ca(a)}),a=null})});var M=!1,N=function(a){M||(M=!0,!H.initialized&&H.config.autoInitialize&&l())};return F&&("complete"==document.readyState?N():(a(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",N,!1),J(window,"load",N))),H},this),function(b,c){"function"==typeof define&&define.amd?define(["./rangy-core"],b):"undefined"!=typeof module&&"object"==typeof a?module.exports=b(require("rangy")):b(c.rangy)}(function(a){return a.createModule("SaveRestore",["WrappedRange"],function(a,b){function c(a,b){return(b||document).getElementById(a)}function d(a,b){var c,d="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),e=o.getDocument(a.startContainer),f=a.cloneRange();return f.collapse(b),c=e.createElement("span"),c.id=d,c.style.lineHeight="0",c.style.display="none",c.className="rangySelectionBoundary",c.appendChild(e.createTextNode(r)),f.insertNode(c),c}function e(a,d,e,f){var g=c(e,a);g?(d[f?"setStartBefore":"setEndBefore"](g),p(g)):b.warn("Marker element has been removed. Cannot restore selection.")}function f(a,b){return b.compareBoundaryPoints(a.START_TO_START,a)}function g(b,c){var e,f,g=a.DomRange.getRangeDocument(b),h=b.toString(),i=q(c);return b.collapsed?(f=d(b,!1),{document:g,markerId:f.id,collapsed:!0}):(f=d(b,!1),e=d(b,!0),{document:g,startMarkerId:e.id,endMarkerId:f.id,collapsed:!1,backward:i,toString:function(){return"original text: '"+h+"', new text: '"+b.toString()+"'"}})}function h(d,f){var g=d.document;void 0===f&&(f=!0);var h=a.createRange(g);if(d.collapsed){var i=c(d.markerId,g);if(i){i.style.display="inline";var j=i.previousSibling;j&&3==j.nodeType?(p(i),h.collapseToPoint(j,j.length)):(h.collapseBefore(i),p(i))}else b.warn("Marker element has been removed. Cannot restore selection.")}else e(g,h,d.startMarkerId,!0),e(g,h,d.endMarkerId,!1);return f&&h.normalizeBoundaries(),h}function i(b,d){var e,h,i=[],j=q(d);b=b.slice(0),b.sort(f);for(var k=0,l=b.length;l>k;++k)i[k]=g(b[k],j);for(k=l-1;k>=0;--k)e=b[k],h=a.DomRange.getRangeDocument(e),e.collapsed?e.collapseAfter(c(i[k].markerId,h)):(e.setEndBefore(c(i[k].endMarkerId,h)),e.setStartAfter(c(i[k].startMarkerId,h)));return i}function j(c){if(!a.isSelectionValid(c))return b.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus."),null;var d=a.getSelection(c),e=d.getAllRanges(),f=1==e.length&&d.isBackward(),g=i(e,f);return f?d.setSingleRange(e[0],f):d.setRanges(e),{win:c,rangeInfos:g,restored:!1}}function k(a){for(var b=[],c=a.length,d=c-1;d>=0;d--)b[d]=h(a[d],!0);return b}function l(b,c){if(!b.restored){var d=b.rangeInfos,e=a.getSelection(b.win),f=k(d);1==d.length&&c&&a.features.selectionHasExtend&&d[0].backward?(e.removeAllRanges(),e.addRange(f[0],!0)):e.setRanges(f),b.restored=!0}}function m(a,b){var d=c(b,a);d&&p(d)}function n(a){for(var b,c=a.rangeInfos,d=0,e=c.length;e>d;++d)b=c[d],b.collapsed?m(a.doc,b.markerId):(m(a.doc,b.startMarkerId),m(a.doc,b.endMarkerId))}var o=a.dom,p=o.removeNode,q=a.Selection.isDirectionBackward,r="\ufeff";a.util.extend(a,{saveRange:g,restoreRange:h,saveRanges:i,restoreRanges:k,saveSelection:j,restoreSelection:l,removeMarkerElement:m,removeMarkers:n})}),a},this)}({},function(){return this}()),function(window,angular,undefined){"use strict";function $SanitizeProvider(){this.$get=["$$sanitizeUri",function($$sanitizeUri){return function(html){void 0!==arguments[1]&&(arguments[1].version="taSanitize");var buf=[];return htmlParser(html,htmlSanitizeWriter(buf,function(uri,isImage){return!/^unsafe/.test($$sanitizeUri(uri,isImage))})),buf.join("")}}]}function sanitizeText(chars){var buf=[];return htmlSanitizeWriter(buf,angular.noop).chars(chars),buf.join("")}function makeMap(str){var i,obj={},items=str.split(",");for(i=0;i<items.length;i++)obj[items[i]]=!0;return obj}function htmlParser(html,handler){function parseStartTag(tag,tagName,rest,unary){if(tagName=angular.lowercase(tagName),blockElements[tagName])for(;stack.last()&&inlineElements[stack.last()];)parseEndTag("",stack.last());optionalEndTagElements[tagName]&&stack.last()==tagName&&parseEndTag("",tagName),(unary=voidElements[tagName]||!!unary)||stack.push(tagName);var attrs={};rest.replace(ATTR_REGEXP,function(match,name,doubleQuotedValue,singleQuotedValue,unquotedValue){var value=doubleQuotedValue||singleQuotedValue||unquotedValue||"";attrs[name]=decodeEntities(value)}),handler.start&&handler.start(tagName,attrs,unary)}function parseEndTag(tag,tagName){var i,pos=0;if(tagName=angular.lowercase(tagName))for(pos=stack.length-1;pos>=0&&stack[pos]!=tagName;pos--);if(pos>=0){for(i=stack.length-1;i>=pos;i--)handler.end&&handler.end(stack[i]);stack.length=pos}}"string"!=typeof html&&(html=null===html||void 0===html?"":""+html);var index,chars,match,text,stack=[],last=html;for(stack.last=function(){return stack[stack.length-1]};html;){if(text="",chars=!0,stack.last()&&specialElements[stack.last()])html=html.replace(new RegExp("([^]*)<\\s*\\/\\s*"+stack.last()+"[^>]*>","i"),function(all,text){return text=text.replace(COMMENT_REGEXP,"$1").replace(CDATA_REGEXP,"$1"),handler.chars&&handler.chars(decodeEntities(text)),""}),parseEndTag("",stack.last());else{if(WHITE_SPACE_REGEXP.test(html)){if(match=html.match(WHITE_SPACE_REGEXP)){match[0];handler.whitespace&&handler.whitespace(match[0]),html=html.replace(match[0],""),chars=!1}}else SINGLE_COMMENT_REGEXP.test(html)?(match=html.match(SINGLE_COMMENT_REGEXP))&&(handler.comment&&handler.comment(match[1]),html=html.replace(match[0],""),chars=!1):DOCTYPE_REGEXP.test(html)?(match=html.match(DOCTYPE_REGEXP))&&(html=html.replace(match[0],""),chars=!1):BEGING_END_TAGE_REGEXP.test(html)?(match=html.match(END_TAG_REGEXP))&&(html=html.substring(match[0].length),match[0].replace(END_TAG_REGEXP,parseEndTag),chars=!1):BEGIN_TAG_REGEXP.test(html)&&(match=html.match(START_TAG_REGEXP),match?(match[4]&&(html=html.substring(match[0].length),match[0].replace(START_TAG_REGEXP,parseStartTag)),chars=!1):(text+="<",html=html.substring(1)));chars&&(index=html.indexOf("<"),text+=index<0?html:html.substring(0,index),html=index<0?"":html.substring(index),handler.chars&&handler.chars(decodeEntities(text)))}if(html==last)throw $sanitizeMinErr("badparse","The sanitizer was unable to parse the following block of html: {0}",html);last=html}parseEndTag()}function decodeEntities(value){if(!value)return"";var parts=spaceRe.exec(value),spaceBefore=parts[1],spaceAfter=parts[3],content=parts[2];return content&&(hiddenPre.innerHTML=content.replace(/</g,"&lt;"),content="textContent"in hiddenPre?hiddenPre.textContent:hiddenPre.innerText),spaceBefore+content+spaceAfter}function encodeEntities(value){return value.replace(/&/g,"&amp;").replace(SURROGATE_PAIR_REGEXP,function(value){return"&#"+(1024*(value.charCodeAt(0)-55296)+(value.charCodeAt(1)-56320)+65536)+";"}).replace(NON_ALPHANUMERIC_REGEXP,function(value){var c=value.charCodeAt(0);return c<=159||173==c||c>=1536&&c<=1540||1807==c||6068==c||6069==c||c>=8204&&c<=8207||c>=8232&&c<=8239||c>=8288&&c<=8303||65279==c||c>=65520&&c<=65535?"&#"+c+";":value}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function validStyles(styleAttr){var result="",styleArray=styleAttr.split(";");return angular.forEach(styleArray,function(value){var v=value.split(":");if(2==v.length){var key=trim(angular.lowercase(v[0])),value=trim(angular.lowercase(v[1]));(("color"===key||"background-color"===key)&&(value.match(/^rgb\([0-9%,\. ]*\)$/i)||value.match(/^rgba\([0-9%,\. ]*\)$/i)||value.match(/^hsl\([0-9%,\. ]*\)$/i)||value.match(/^hsla\([0-9%,\. ]*\)$/i)||value.match(/^#[0-9a-f]{3,6}$/i)||value.match(/^[a-z]*$/i))||"text-align"===key&&("left"===value||"right"===value||"center"===value||"justify"===value)||"text-decoration"===key&&("underline"===value||"line-through"===value)||"font-weight"===key&&"bold"===value||"float"===key&&("left"===value||"right"===value||"none"===value)||("width"===key||"height"===key)&&value.match(/[0-9\.]*(px|em|rem|%)/)||"direction"===key&&value.match(/^ltr|rtl|initial|inherit$/))&&(result+=key+": "+value+";")}}),result}function validCustomTag(tag,attrs,lkey,value){return!("img"!==tag||!attrs["ta-insert-video"]||"ta-insert-video"!==lkey&&"allowfullscreen"!==lkey&&"frameborder"!==lkey&&("contenteditable"!==lkey||"false"!==value))}function htmlSanitizeWriter(buf,uriValidator){var ignore=!1,out=angular.bind(buf,buf.push);return{start:function(tag,attrs,unary){tag=angular.lowercase(tag),!ignore&&specialElements[tag]&&(ignore=tag),ignore||validElements[tag]!==!0||(out("<"),out(tag),angular.forEach(attrs,function(value,key){var lkey=angular.lowercase(key),isImage="img"===tag&&"src"===lkey||"background"===lkey
;("style"===lkey&&""!==(value=validStyles(value))||validCustomTag(tag,attrs,lkey,value)||validAttrs[lkey]===!0&&(uriAttrs[lkey]!==!0||uriValidator(value,isImage)))&&(out(" "),out(key),out('="'),out(encodeEntities(value)),out('"'))}),out(unary?"/>":">"))},comment:function(com){out(com)},whitespace:function(ws){out(encodeEntities(ws))},end:function(tag){tag=angular.lowercase(tag),ignore||validElements[tag]!==!0||(out("</"),out(tag),out(">")),tag==ignore&&(ignore=!1)},chars:function(chars){ignore||out(encodeEntities(chars))}}}var $sanitizeMinErr=angular.$$minErr("$sanitize"),START_TAG_REGEXP=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,END_TAG_REGEXP=/^<\/\s*([\w:-]+)[^>]*>/,ATTR_REGEXP=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,BEGIN_TAG_REGEXP=/^</,BEGING_END_TAGE_REGEXP=/^<\//,COMMENT_REGEXP=/<!--(.*?)-->/g,SINGLE_COMMENT_REGEXP=/(^<!--.*?-->)/,DOCTYPE_REGEXP=/<!DOCTYPE([^>]*?)>/i,CDATA_REGEXP=/<!\[CDATA\[(.*?)]]>/g,SURROGATE_PAIR_REGEXP=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NON_ALPHANUMERIC_REGEXP=/([^\#-~| |!])/g,WHITE_SPACE_REGEXP=/^(\s+)/,voidElements=makeMap("area,br,col,hr,img,wbr,input"),optionalEndTagBlockElements=makeMap("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),optionalEndTagInlineElements=makeMap("rp,rt"),optionalEndTagElements=angular.extend({},optionalEndTagInlineElements,optionalEndTagBlockElements),blockElements=angular.extend({},optionalEndTagBlockElements,makeMap("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),inlineElements=angular.extend({},optionalEndTagInlineElements,makeMap("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),svgElements=makeMap("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),specialElements=makeMap("script,style"),validElements=angular.extend({},voidElements,blockElements,inlineElements,optionalEndTagElements,svgElements),uriAttrs=makeMap("background,cite,href,longdesc,src,usemap,xlink:href,ng-click"),htmlAttrs=makeMap("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,id,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),svgAttrs=makeMap("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),validAttrs=angular.extend({},uriAttrs,svgAttrs,htmlAttrs),hiddenPre=document.createElement("pre"),spaceRe=/^(\s*)([\s\S]*?)(\s*)$/,trim=function(){return String.prototype.trim?function(value){return angular.isString(value)?value.trim():value}:function(value){return angular.isString(value)?value.replace(/^\s\s*/,"").replace(/\s\s*$/,""):value}}();angular.module("ngSanitize",[]).provider("$sanitize",$SanitizeProvider),angular.module("ngSanitize").filter("linky",["$sanitize",function($sanitize){return function(text,target){function addText(text){text&&html.push(sanitizeText(text))}if(!text)return text;for(var match,url,i,raw=text,html=[];match=raw.match(/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"”’]/);)url=match[0],match[2]||match[4]||(url=(match[3]?"http://":"mailto:")+url),i=match.index,addText(raw.substr(0,i)),function(url,text){html.push("<a "),angular.isDefined(target)&&html.push('target="',target,'" '),html.push('href="',url.replace(/"/g,"&quot;"),'">'),addText(text),html.push("</a>")}(url,match[0].replace(/^mailto:/,"")),raw=raw.substring(i+match[0].length);return addText(raw),$sanitize(html.join(""))}}])}(window,window.angular),function(a,b){function c(a){try{return 0!==angular.element(a).length}catch(b){return!1}}function d(a,b){if(!a||""===a||e.hasOwnProperty(a))throw"textAngular Error: A unique name is required for a Tool Definition";if(b.display&&(""===b.display||!c(b.display))||!b.display&&!b.buttontext&&!b.iconclass)throw'textAngular Error: Tool Definition for "'+a+'" does not have a valid display/iconclass/buttontext value';e[a]=b}b.true=a;var e={};angular.module("textAngularSetup",[]).constant("taRegisterTool",d).value("taTools",e).value("taOptions",{forceTextAngularSanitize:!0,keyMappings:[],toolbar:[["h1","h2","h3","h4","h5","h6","p","pre","quote"],["bold","italics","underline","strikeThrough","ul","ol","redo","undo","clear"],["justifyLeft","justifyCenter","justifyRight","justifyFull","indent","outdent"],["html","insertImage","insertLink","insertVideo","wordcount","charcount"]],classes:{focussed:"focussed",toolbar:"btn-toolbar",toolbarGroup:"btn-group",toolbarButton:"btn btn-default",toolbarButtonActive:"active",disabled:"disabled",textEditor:"form-control",htmlEditor:"form-control"},defaultTagAttributes:{a:{target:""}},setup:{textEditorSetup:function(a){},htmlEditorSetup:function(a){}},defaultFileDropHandler:function(a,b){var c=new FileReader;return"image"===a.type.substring(0,5)&&(c.onload=function(){""!==c.result&&b("insertImage",c.result,!0)},c.readAsDataURL(a),!0)}}).value("taSelectableElements",["a","img"]).value("taCustomRenderers",[{selector:"img",customAttribute:"ta-insert-video",renderLogic:function(a){var b=angular.element("<iframe></iframe>"),c=a.prop("attributes");angular.forEach(c,function(a){b.attr(a.name,a.value)}),b.attr("src",b.attr("ta-insert-video")),a.replaceWith(b)}}]).value("taTranslations",{html:{tooltip:"Toggle html / Rich Text"},heading:{tooltip:"Heading "},p:{tooltip:"Paragraph"},pre:{tooltip:"Preformatted text"},ul:{tooltip:"Unordered List"},ol:{tooltip:"Ordered List"},quote:{tooltip:"Quote/unquote selection or paragraph"},undo:{tooltip:"Undo"},redo:{tooltip:"Redo"},bold:{tooltip:"Bold"},italic:{tooltip:"Italic"},underline:{tooltip:"Underline"},strikeThrough:{tooltip:"Strikethrough"},justifyLeft:{tooltip:"Align text left"},justifyRight:{tooltip:"Align text right"},justifyFull:{tooltip:"Justify text"},justifyCenter:{tooltip:"Center"},indent:{tooltip:"Increase indent"},outdent:{tooltip:"Decrease indent"},clear:{tooltip:"Clear formatting"},insertImage:{dialogPrompt:"Please enter an image URL to insert",tooltip:"Insert image",hotkey:"the - possibly language dependent hotkey ... for some future implementation"},insertVideo:{tooltip:"Insert video",dialogPrompt:"Please enter a youtube URL to embed"},insertLink:{tooltip:"Insert / edit link",dialogPrompt:"Please enter a URL to insert"},editLink:{reLinkButton:{tooltip:"Relink"},unLinkButton:{tooltip:"Unlink"},targetToggle:{buttontext:"Open in New Window"}},wordcount:{tooltip:"Display words Count"},charcount:{tooltip:"Display characters Count"}}).factory("taToolFunctions",["$window","taTranslations",function(a,b){return{imgOnSelectAction:function(a,b,c){var d=function(){c.updateTaBindtaTextElement(),c.hidePopover()};a.preventDefault(),c.displayElements.popover.css("width","375px");var e=c.displayElements.popoverContainer;e.empty();var f=angular.element('<div class="btn-group" style="padding-right: 6px;">'),g=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">100% </button>');g.on("click",function(a){a.preventDefault(),b.css({width:"100%",height:""}),d()});var h=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">50% </button>');h.on("click",function(a){a.preventDefault(),b.css({width:"50%",height:""}),d()});var i=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">25% </button>');i.on("click",function(a){a.preventDefault(),b.css({width:"25%",height:""}),d()});var j=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">Reset</button>');j.on("click",function(a){a.preventDefault(),b.css({width:"",height:""}),d()}),f.append(g),f.append(h),f.append(i),f.append(j),e.append(f),f=angular.element('<div class="btn-group" style="padding-right: 6px;">');var k=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-left"></i></button>');k.on("click",function(a){a.preventDefault(),b.css("float","left"),b.css("cssFloat","left"),b.css("styleFloat","left"),d()});var l=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-right"></i></button>');l.on("click",function(a){a.preventDefault(),b.css("float","right"),b.css("cssFloat","right"),b.css("styleFloat","right"),d()});var m=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-justify"></i></button>');m.on("click",function(a){a.preventDefault(),b.css("float",""),b.css("cssFloat",""),b.css("styleFloat",""),d()}),f.append(k),f.append(m),f.append(l),e.append(f),f=angular.element('<div class="btn-group">');var n=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-trash-o"></i></button>');n.on("click",function(a){a.preventDefault(),b.remove(),d()}),f.append(n),e.append(f),c.showPopover(b),c.showResizeOverlay(b)},aOnSelectAction:function(c,d,e){c.preventDefault(),e.displayElements.popover.css("width","436px");var f=e.displayElements.popoverContainer;f.empty(),f.css("line-height","28px");var g=angular.element('<a href="'+d.attr("href")+'" target="_blank">'+d.attr("href")+"</a>");g.css({display:"inline-block","max-width":"200px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","vertical-align":"middle"}),f.append(g);var h=angular.element('<div class="btn-group pull-right">'),i=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+b.editLink.reLinkButton.tooltip+'"><i class="fa fa-edit icon-edit"></i></button>');i.on("click",function(c){c.preventDefault();var f=a.prompt(b.insertLink.dialogPrompt,d.attr("href"));f&&""!==f&&"http://"!==f&&(d.attr("href",f),e.updateTaBindtaTextElement()),e.hidePopover()}),h.append(i);var j=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+b.editLink.unLinkButton.tooltip+'"><i class="fa fa-unlink icon-unlink"></i></button>');j.on("click",function(a){a.preventDefault(),d.replaceWith(d.contents()),e.updateTaBindtaTextElement(),e.hidePopover()}),h.append(j);var k=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on">'+b.editLink.targetToggle.buttontext+"</button>");"_blank"===d.attr("target")&&k.addClass("active"),k.on("click",function(a){a.preventDefault(),d.attr("target","_blank"===d.attr("target")?"":"_blank"),k.toggleClass("active"),e.updateTaBindtaTextElement()}),h.append(k),f.append(h),e.showPopover(d)},extractYoutubeVideoId:function(a){var c=a.match(/(?:youtube(?:-nocookie)?\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/i);return c&&c[1]||null}}}]).run(["taRegisterTool","$window","taTranslations","taSelection","taToolFunctions","$sanitize","taOptions",function(a,b,c,d,e,f,g){var h={};if(f("",h),g.forceTextAngularSanitize===!0&&"taSanitize"!==h.version)throw angular.$$minErr("textAngular")("textAngularSetup","The textAngular-sanitize provider has been replaced by another -- have you included angular-sanitize by mistake?");a("html",{iconclass:"fa fa-code",tooltiptext:c.html.tooltip,action:function(){this.$editor().switchView()},activeState:function(){return this.$editor().showHtml}});var i=function(a){return function(){return this.$editor().queryFormatBlockState(a)}},j=function(){return this.$editor().wrapSelection("formatBlock","<"+this.name.toUpperCase()+">")};angular.forEach(["h1","h2","h3","h4","h5","h6"],function(b){a(b.toLowerCase(),{buttontext:b.toUpperCase(),tooltiptext:c.heading.tooltip+b.charAt(1),action:j,activeState:i(b.toLowerCase())})}),a("p",{buttontext:"P",tooltiptext:c.p.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<P>")},activeState:function(){return this.$editor().queryFormatBlockState("p")}}),a("pre",{buttontext:"pre",tooltiptext:c.pre.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<PRE>")},activeState:function(){return this.$editor().queryFormatBlockState("pre")}}),a("ul",{iconclass:"fa fa-list-ul",tooltiptext:c.ul.tooltip,action:function(){return this.$editor().wrapSelection("insertUnorderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertUnorderedList")}}),a("ol",{iconclass:"fa fa-list-ol",tooltiptext:c.ol.tooltip,action:function(){return this.$editor().wrapSelection("insertOrderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertOrderedList")}}),a("quote",{iconclass:"fa fa-quote-right",tooltiptext:c.quote.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<BLOCKQUOTE>")},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")}}),a("undo",{iconclass:"fa fa-undo",tooltiptext:c.undo.tooltip,action:function(){return this.$editor().wrapSelection("undo",null)}}),a("redo",{iconclass:"fa fa-repeat",tooltiptext:c.redo.tooltip,action:function(){return this.$editor().wrapSelection("redo",null)}}),a("bold",{iconclass:"fa fa-bold",tooltiptext:c.bold.tooltip,action:function(){return this.$editor().wrapSelection("bold",null)},activeState:function(){return this.$editor().queryCommandState("bold")},commandKeyCode:98}),a("justifyLeft",{iconclass:"fa fa-align-left",tooltiptext:c.justifyLeft.tooltip,action:function(){return this.$editor().wrapSelection("justifyLeft",null)},activeState:function(a){if(a&&"#document"===a.nodeName)return!1;var b=!1;return a&&(b="left"===a.css("text-align")||"left"===a.attr("align")||"right"!==a.css("text-align")&&"center"!==a.css("text-align")&&"justify"!==a.css("text-align")&&!this.$editor().queryCommandState("justifyRight")&&!this.$editor().queryCommandState("justifyCenter")&&!this.$editor().queryCommandState("justifyFull")),b=b||this.$editor().queryCommandState("justifyLeft")}}),a("justifyRight",{iconclass:"fa fa-align-right",tooltiptext:c.justifyRight.tooltip,action:function(){return this.$editor().wrapSelection("justifyRight",null)},activeState:function(a){if(a&&"#document"===a.nodeName)return!1;var b=!1;return a&&(b="right"===a.css("text-align")),b=b||this.$editor().queryCommandState("justifyRight")}}),a("justifyFull",{iconclass:"fa fa-align-justify",tooltiptext:c.justifyFull.tooltip,action:function(){return this.$editor().wrapSelection("justifyFull",null)},activeState:function(a){var b=!1;return a&&(b="justify"===a.css("text-align")),b=b||this.$editor().queryCommandState("justifyFull")}}),a("justifyCenter",{iconclass:"fa fa-align-center",tooltiptext:c.justifyCenter.tooltip,action:function(){return this.$editor().wrapSelection("justifyCenter",null)},activeState:function(a){if(a&&"#document"===a.nodeName)return!1;var b=!1;return a&&(b="center"===a.css("text-align")),b=b||this.$editor().queryCommandState("justifyCenter")}}),a("indent",{iconclass:"fa fa-indent",tooltiptext:c.indent.tooltip,action:function(){return this.$editor().wrapSelection("indent",null)},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")},commandKeyCode:"TabKey"}),a("outdent",{iconclass:"fa fa-outdent",tooltiptext:c.outdent.tooltip,action:function(){return this.$editor().wrapSelection("outdent",null)},activeState:function(){return!1},commandKeyCode:"ShiftTabKey"}),a("italics",{iconclass:"fa fa-italic",tooltiptext:c.italic.tooltip,action:function(){return this.$editor().wrapSelection("italic",null)},activeState:function(){return this.$editor().queryCommandState("italic")},commandKeyCode:105}),a("underline",{iconclass:"fa fa-underline",tooltiptext:c.underline.tooltip,action:function(){return this.$editor().wrapSelection("underline",null)},activeState:function(){return this.$editor().queryCommandState("underline")},commandKeyCode:117}),a("strikeThrough",{iconclass:"fa fa-strikethrough",tooltiptext:c.strikeThrough.tooltip,action:function(){return this.$editor().wrapSelection("strikeThrough",null)},activeState:function(){return document.queryCommandState("strikeThrough")}}),a("clear",{iconclass:"fa fa-ban",tooltiptext:c.clear.tooltip,action:function(a,b){var c;this.$editor().wrapSelection("removeFormat",null);var e=angular.element(d.getSelectionElement()),f=function(a){a=angular.element(a);var b=a;angular.forEach(a.children(),function(a){var c=angular.element("<p></p>");c.html(angular.element(a).html()),b.after(c),b=c}),a.remove()};if(angular.forEach(e.find("ul"),f),angular.forEach(e.find("ol"),f),"li"===e[0].tagName.toLowerCase()){var g=e[0].parentNode.childNodes,h=[],i=[],j=!1;for(c=0;c<g.length;c++)g[c]===e[0]?j=!0:j?i.push(g[c]):h.push(g[c]);var k=angular.element(e[0].parentNode),l=angular.element("<p></p>");if(l.html(angular.element(e[0]).html()),0===h.length||0===i.length)0===i.length?k.after(l):k[0].parentNode.insertBefore(l[0],k[0]),0===h.length&&0===i.length?k.remove():angular.element(e[0]).remove();else{var m=angular.element("<"+k[0].tagName+"></"+k[0].tagName+">"),n=angular.element("<"+k[0].tagName+"></"+k[0].tagName+">");for(c=0;c<h.length;c++)m.append(angular.element(h[c]));for(c=0;c<i.length;c++)n.append(angular.element(i[c]));k.after(n),k.after(l),k.after(m),k.remove()}d.setSelectionToElementEnd(l[0])}var o=this.$editor(),p=function(a){a=angular.element(a),a[0]!==o.displayElements.text[0]&&a.removeAttr("class"),angular.forEach(a.children(),p)};angular.forEach(e,p),"li"!==e[0].tagName.toLowerCase()&&"ol"!==e[0].tagName.toLowerCase()&&"ul"!==e[0].tagName.toLowerCase()&&this.$editor().wrapSelection("formatBlock","default"),b()}}),a("insertImage",{iconclass:"fa fa-picture-o",tooltiptext:c.insertImage.tooltip,action:function(){var a;return a=b.prompt(c.insertImage.dialogPrompt,"http://"),a&&""!==a&&"http://"!==a?this.$editor().wrapSelection("insertImage",a,!0):void 0},onElementSelect:{element:"img",action:e.imgOnSelectAction}}),a("insertVideo",{iconclass:"fa fa-youtube-play",tooltiptext:c.insertVideo.tooltip,action:function(){var a;if((a=b.prompt(c.insertVideo.dialogPrompt,"https://"))&&""!==a&&"https://"!==a&&(videoId=e.extractYoutubeVideoId(a),videoId)){var d="https://www.youtube.com/embed/"+videoId,f='<img class="ta-insert-video" src="https://img.youtube.com/vi/'+videoId+'/hqdefault.jpg" ta-insert-video="'+d+'" contenteditable="false" allowfullscreen="true" frameborder="0" />';return this.$editor().wrapSelection("insertHTML",f,!0)}},onElementSelect:{element:"img",onlyWithAttrs:["ta-insert-video"],action:e.imgOnSelectAction}}),a("insertLink",{tooltiptext:c.insertLink.tooltip,iconclass:"fa fa-link",action:function(){var a;return a=b.prompt(c.insertLink.dialogPrompt,"http://"),a&&""!==a&&"http://"!==a?this.$editor().wrapSelection("createLink",a,!0):void 0},activeState:function(a){return!!a&&"A"===a[0].tagName},onElementSelect:{element:"a",action:e.aOnSelectAction}}),a("wordcount",{display:'<div id="toolbarWC" style="display:block; min-width:100px;">Words: <span ng-bind="wordcount"></span></div>',disabled:!0,wordcount:0,activeState:function(){var a=this.$editor().displayElements.text,b=a[0].innerHTML||"",c=0;return""!==b.replace(/\s*<[^>]*?>\s*/g,"")&&(c=b.replace(/<\/?(b|i|em|strong|span|u|strikethrough|a|img|small|sub|sup|label)( [^>*?])?>/gi,"").replace(/(<[^>]*?>\s*<[^>]*?>)/gi," ").replace(/(<[^>]*?>)/gi,"").replace(/\s+/gi," ").match(/\S+/g).length),this.wordcount=c,this.$editor().wordcount=c,!1}}),a("charcount",{display:'<div id="toolbarCC" style="display:block; min-width:120px;">Characters: <span ng-bind="charcount"></span></div>',disabled:!0,charcount:0,activeState:function(){var a=this.$editor().displayElements.text,b=a[0].innerText||a[0].textContent,c=b.replace(/(\r\n|\n|\r)/gm,"").replace(/^\s+/g," ").replace(/\s+$/g," ").length;return this.charcount=c,this.$editor().charcount=c,!1}})}]),"undefined"!=typeof module&&void 0!==a&&module.exports===a&&(module.exports="textAngular"),function(){"use strict";var b={ie:function(){for(var b=3,c=document.createElement("div"),d=c.getElementsByTagName("i");c.innerHTML="<!--[if gt IE "+ ++b+"]><i></i><![endif]-->",d[0];);return b>4?b:void 0}(),webkit:/AppleWebKit\/([\d.]+)/i.test(navigator.userAgent)},c=!1;b.webkit&&(document.addEventListener("mousedown",function(a){var b=a||window.event,d=b.target;if(c&&null!==d){for(var e=!1,f=d;null!==f&&"html"!==f.tagName.toLowerCase()&&!e;)e="true"===f.contentEditable,f=f.parentNode;e||(document.getElementById("textAngular-editableFix-010203040506070809").setSelectionRange(0,0),d.focus(),d.select&&d.select())}c=!1},!1),angular.element(document).ready(function(){angular.element(document.body).append(angular.element('<input id="textAngular-editableFix-010203040506070809" class="ta-hidden-input" aria-hidden="true" unselectable="on" tabIndex="-1">'))}));var d=/^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video)$/i,g=/^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video|li)$/i;String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var h,i,j,k,l,m;if(b.ie>8||void 0===b.ie){for(var n=document.styleSheets,o=0;o<n.length;o++)if((0===n[o].media.length||n[o].media.mediaText.match(/(all|screen)/gi))&&n[o].href&&n[o].href.match(/textangular\.(min\.|)css/gi)){h=n[o];break}h||(h=function(){var a=document.createElement("style");return b.webkit&&a.appendChild(document.createTextNode("")),document.getElementsByTagName("head")[0].appendChild(a),a.sheet}()),i=function(a,b){return k(h,a,b)},k=function(a,b,c){var d,e;return a.cssRules?d=Math.max(a.cssRules.length-1,0):a.rules&&(d=Math.max(a.rules.length-1,0)),a.insertRule?a.insertRule(b+"{"+c+"}",d):a.addRule(b,c,d),h.rules?e=h.rules[d]:h.cssRules&&(e=h.cssRules[d]),e},m=function(a,b){var c,d;for(c=0;c<b.length;c++)if(b[c].cssText===a.cssText){d=c;break}return d},j=function(a){l(h,a)},l=function(a,b){var c=a.cssRules||a.rules;if(c&&0!==c.length){var d=m(b,c);a.removeRule?a.removeRule(d):a.deleteRule(d)}}}angular.module("textAngular.factories",[]).factory("taBrowserTag",[function(){return function(a){return a?""===a?void 0===b.ie?"div":b.ie<=8?"P":"p":b.ie<=8?a.toUpperCase():a:b.ie<=8?"P":"p"}}]).factory("taApplyCustomRenderers",["taCustomRenderers","taDOM",function(a,b){return function(c){var d=angular.element("<div></div>");return d[0].innerHTML=c,angular.forEach(a,function(a){var c=[];a.selector&&""!==a.selector?c=d.find(a.selector):a.customAttribute&&""!==a.customAttribute&&(c=b.getByAttribute(d,a.customAttribute)),angular.forEach(c,function(b){b=angular.element(b),a.selector&&""!==a.selector&&a.customAttribute&&""!==a.customAttribute?void 0!==b.attr(a.customAttribute)&&a.renderLogic(b):a.renderLogic(b)})}),d[0].innerHTML}}]).factory("taFixChrome",function(){return function(a){if(!a||!angular.isString(a)||a.length<=0)return a;for(var b,c,d,e=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi,f="",g=0;b=e.exec(a);)(c=b[3]||b[4])&&c.match(/line-height: 1.[0-9]{3,12};|color: inherit; line-height: 1.1;/i)&&(c=c.replace(/( |)font-family: inherit;|( |)line-height: 1.[0-9]{3,12};|( |)color: inherit;/gi,""),d="<"+b[1].trim(),c.trim().length>0&&(d+=" style="+b[2].substring(0,1)+c+b[2].substring(0,1)),d+=b[5].trim()+">",f+=a.substring(g,b.index)+d,g=b.index+b[0].length);return f+=a.substring(g),g>0?f.replace(/<span\s?>(.*?)<\/span>(<br(\/|)>|)/gi,"$1"):a}}).factory("taSanitize",["$sanitize",function(a){function b(a,b){for(var c,d=0,e=0,f=/<[^>]*>/gi;c=f.exec(a);)if(e=c.index,"/"===c[0].substr(1,1)){if(0===d)break;d--}else d++;return b+a.substring(0,e)+angular.element(b)[0].outerHTML.substring(b.length)+a.substring(e)}function c(a){if(!a||!angular.isString(a)||a.length<=0)return a;for(var d,f,g,h,i,k,l=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi,m="",n="",o=0;f=l.exec(a);){h=f[3]||f[4];var p=new RegExp(j,"i");if(angular.isString(h)&&p.test(h)){i="";for(var q=new RegExp(j,"ig");g=q.exec(h);)for(d=0;d<e.length;d++)g[2*d+2]&&(i+="<"+e[d].tag+">");k=c(a.substring(o,f.index)),n+=m.length>0?b(k,m):k,h=h.replace(new RegExp(j,"ig"),""),n+="<"+f[1].trim(),h.length>0&&(n+=' style="'+h+'"'),n+=f[5]+">",o=f.index+f[0].length,m=i}}return n+=m.length>0?b(a.substring(o),m):a.substring(o)}function d(a){if(!a||!angular.isString(a)||a.length<=0)return a;for(var b,c=/<([^>\/]+?)align=("([^"]+)"|'([^']+)')([^>]*)>/gi,d="",e=0;b=c.exec(a);){d+=a.substring(e,b.index),e=b.index+b[0].length;var f="<"+b[1]+b[5];/style=("([^"]+)"|'([^']+)')/gi.test(f)?f=f.replace(/style=("([^"]+)"|'([^']+)')/i,'style="$2$3 text-align:'+(b[3]||b[4])+';"'):f+=' style="text-align:'+(b[3]||b[4])+';"',f+=">",d+=f}return d+a.substring(e)}for(var e=[{property:"font-weight",values:["bold"],tag:"b"},{property:"font-style",values:["italic"],tag:"i"}],f=[],g=0;g<e.length;g++){for(var h="("+e[g].property+":\\s*(",i=0;i<e[g].values.length;i++)i>0&&(h+="|"),h+=e[g].values[i];h+=");)",f.push(h)}var j="("+f.join("|")+")";return function(b,e,f){if(!f)try{b=c(b)}catch(g){}b=d(b);var h;try{h=a(b),f&&(h=b)}catch(g){h=e||""}var i,j=h.match(/(<pre[^>]*>.*?<\/pre[^>]*>)/gi),k=h.replace(/(&#(9|10);)*/gi,""),l=/<pre[^>]*>.*?<\/pre[^>]*>/gi,m=0,n=0;for(h="";null!==(i=l.exec(k))&&m<j.length;)h+=k.substring(n,i.index)+j[m],n=i.index+i[0].length,m++;return h+k.substring(n)}}]).factory("taToolExecuteAction",["$q","$log",function(a,b){return function(c){void 0!==c&&(this.$editor=function(){return c});var d,e=a.defer(),f=e.promise,g=this.$editor();try{d=this.action(e,g.startAction()),f.finally(function(){g.endAction.call(g)})}catch(h){b.error(h)}(d||void 0===d)&&e.resolve()}}]),angular.module("textAngular.DOM",["textAngular.factories"]).factory("taExecCommand",["taSelection","taBrowserTag","$document",function(a,b,c){var e=function(b,c){var d,e,f=b.find("li");for(e=f.length-1;e>=0;e--)d=angular.element("<"+c+">"+f[e].innerHTML+"</"+c+">"),b.after(d);b.remove(),a.setSelectionToElementEnd(d[0])},g=function(b){/(<br(|\/)>)$/i.test(b.innerHTML.trim())?a.setSelectionBeforeElement(angular.element(b).find("br")[0]):a.setSelectionToElementEnd(b)},h=function(a,b){var c=angular.element("<"+b+">"+a[0].innerHTML+"</"+b+">");a.after(c),a.remove(),g(c.find("li")[0])},i=function(a,c,d){for(var e="",f=0;f<a.length;f++)e+="<"+b("li")+">"+a[f].innerHTML+"</"+b("li")+">";var h=angular.element("<"+d+">"+e+"</"+d+">");c.after(h),c.remove(),g(h.find("li")[0])};return function(g,j){return g=b(g),function(k,l,m,n){var o,p,q,r,s,t,u,v=angular.element("<"+g+">");try{u=a.getSelectionElement()}catch(w){}var x=angular.element(u);if(void 0!==u){var y=u.tagName.toLowerCase();if("insertorderedlist"===k.toLowerCase()||"insertunorderedlist"===k.toLowerCase()){var z=b("insertorderedlist"===k.toLowerCase()?"ol":"ul");if(y===z)return e(x,g);if("li"===y&&x.parent()[0].tagName.toLowerCase()===z&&1===x.parent().children().length)return e(x.parent(),g);if("li"===y&&x.parent()[0].tagName.toLowerCase()!==z&&1===x.parent().children().length)return h(x.parent(),z);if(y.match(d)&&!x.hasClass("ta-bind")){if("ol"===y||"ul"===y)return h(x,z);var A=!1;return angular.forEach(x.children(),function(a){a.tagName.match(d)&&(A=!0)}),A?i(x.children(),x,z):i([angular.element("<div>"+u.innerHTML+"</div>")[0]],x,z)}if(y.match(d)){if(r=a.getOnlySelectedElements(),0===r.length)p=angular.element("<"+z+"><li>"+u.innerHTML+"</li></"+z+">"),x.html(""),x.append(p);else{if(1===r.length&&("ol"===r[0].tagName.toLowerCase()||"ul"===r[0].tagName.toLowerCase()))return r[0].tagName.toLowerCase()===z?e(angular.element(r[0]),g):h(angular.element(r[0]),z);q="";var B=[];for(o=0;o<r.length;o++)if(3!==r[o].nodeType){var C=angular.element(r[o]);if("li"===r[o].tagName.toLowerCase())continue;q+="ol"===r[o].tagName.toLowerCase()||"ul"===r[o].tagName.toLowerCase()?C[0].innerHTML:"span"!==r[o].tagName.toLowerCase()||"ol"!==r[o].childNodes[0].tagName.toLowerCase()&&"ul"!==r[o].childNodes[0].tagName.toLowerCase()?"<"+b("li")+">"+C[0].innerHTML+"</"+b("li")+">":C[0].childNodes[0].innerHTML,B.unshift(C)}p=angular.element("<"+z+">"+q+"</"+z+">"),B.pop().replaceWith(p),angular.forEach(B,function(a){a.remove()})}return void a.setSelectionToElementEnd(p[0])}}else{if("formatblock"===k.toLowerCase()){for(t=m.toLowerCase().replace(/[<>]/gi,""),"default"===t.trim()&&(t=g,m="<"+g+">"),p="li"===y?x.parent():x;!p[0].tagName||!p[0].tagName.match(d)&&!p.parent().attr("contenteditable");)p=p.parent(),y=(p[0].tagName||"").toLowerCase();if(y===t){r=p.children();var D=!1;for(o=0;o<r.length;o++)D=D||r[o].tagName.match(d);D?(p.after(r),s=p.next(),p.remove(),p=s):(v.append(p[0].childNodes),p.after(v),p.remove(),p=v)}else if(p.parent()[0].tagName.toLowerCase()!==t||p.parent().hasClass("ta-bind"))if(y.match(/^(ul|li|ol)$/i))p.wrap(m);else{for(r=a.getOnlySelectedElements(),0===r.length&&(r=[p[0]]),o=0;o<r.length;o++)if(3===r[o].nodeType||!r[o].tagName.match(d))for(;3===r[o].nodeType||!r[o].tagName||!r[o].tagName.match(d);)r[o]=r[o].parentNode;if(angular.element(r[0]).hasClass("ta-bind"))p=angular.element(m),p[0].innerHTML=r[0].innerHTML,r[0].innerHTML=p[0].outerHTML;else if("blockquote"===t){for(q="",o=0;o<r.length;o++)q+=r[o].outerHTML;for(p=angular.element(m),p[0].innerHTML=q,r[0].parentNode.insertBefore(p[0],r[0]),o=r.length-1;o>=0;o--)r[o].parentNode&&r[o].parentNode.removeChild(r[o])}else for(o=0;o<r.length;o++)p=angular.element(m),p[0].innerHTML=r[o].innerHTML,r[o].parentNode.insertBefore(p[0],r[o]),r[o].parentNode.removeChild(r[o])}else{var E=p.parent(),F=E.contents();for(o=0;o<F.length;o++)E.parent().hasClass("ta-bind")&&3===F[o].nodeType&&(v=angular.element("<"+g+">"),v[0].innerHTML=F[o].outerHTML,F[o]=v[0]),E.parent()[0].insertBefore(F[o],E[0]);E.remove()}return void a.setSelectionToElementEnd(p[0])}if("createlink"===k.toLowerCase()){var G='<a href="'+m+'" target="'+(n.a.target?n.a.target:"")+'">',H="</a>";if(a.getSelection().collapsed)a.insertHtml(G+m+H,j);else if(rangy.getSelection().getRangeAt(0).canSurroundContents()){var J=angular.element(G+H)[0];rangy.getSelection().getRangeAt(0).surroundContents(J)}return}if("inserthtml"===k.toLowerCase())return void a.insertHtml(m,j)}}try{
c[0].execCommand(k,l,m)}catch(w){}}}}]).service("taSelection",["$window","$document","taDOM",function(a,b,c){var e=b[0],f=a.rangy,h=function(a,b){return a.tagName&&a.tagName.match(/^br$/i)&&0===b&&!a.previousSibling?{element:a.parentNode,offset:0}:{element:a,offset:b}},i={getSelection:function(){var a=f.getSelection().getRangeAt(0),b=a.commonAncestorContainer,c={start:h(a.startContainer,a.startOffset),end:h(a.endContainer,a.endOffset),collapsed:a.collapsed};return b=3===b.nodeType?b.parentNode:b,b.parentNode===c.start.element||b.parentNode===c.end.element?c.container=b.parentNode:c.container=b,c},getOnlySelectedElements:function(){var a=f.getSelection().getRangeAt(0),b=a.commonAncestorContainer;return b=3===b.nodeType?b.parentNode:b,a.getNodes([1],function(a){return a.parentNode===b})},getSelectionElement:function(){return i.getSelection().container},setSelection:function(a,b,c){var d=f.createRange();d.setStart(a,b),d.setEnd(a,c),f.getSelection().setSingleRange(d)},setSelectionBeforeElement:function(a){var b=f.createRange();b.selectNode(a),b.collapse(!0),f.getSelection().setSingleRange(b)},setSelectionAfterElement:function(a){var b=f.createRange();b.selectNode(a),b.collapse(!1),f.getSelection().setSingleRange(b)},setSelectionToElementStart:function(a){var b=f.createRange();b.selectNodeContents(a),b.collapse(!0),f.getSelection().setSingleRange(b)},setSelectionToElementEnd:function(a){var b=f.createRange();b.selectNodeContents(a),b.collapse(!1),a.childNodes&&a.childNodes[a.childNodes.length-1]&&"br"===a.childNodes[a.childNodes.length-1].nodeName&&(b.startOffset=b.endOffset=b.startOffset-1),f.getSelection().setSingleRange(b)},insertHtml:function(a,b){var h,j,k,l,m,n,o,p=angular.element("<div>"+a+"</div>"),q=f.getSelection().getRangeAt(0),r=e.createDocumentFragment(),s=p[0].childNodes,t=!0;if(s.length>0){for(l=[],k=0;k<s.length;k++)"p"===s[k].nodeName.toLowerCase()&&""===s[k].innerHTML.trim()||3===s[k].nodeType&&""===s[k].nodeValue.trim()||(t=t&&!d.test(s[k].nodeName),l.push(s[k]));for(var u=0;u<l.length;u++)n=r.appendChild(l[u]);!t&&q.collapsed&&/^(|<br(|\/)>)$/i.test(q.startContainer.innerHTML)&&q.selectNode(q.startContainer)}else t=!0,n=r=e.createTextNode(a);if(t)q.deleteContents();else if(q.collapsed&&q.startContainer!==b)if(q.startContainer.innerHTML&&q.startContainer.innerHTML.match(/^<[^>]*>$/i))h=q.startContainer,1===q.startOffset?(q.setStartAfter(h),q.setEndAfter(h)):(q.setStartBefore(h),q.setEndBefore(h));else{if(3===q.startContainer.nodeType&&q.startContainer.parentNode!==b)for(h=q.startContainer.parentNode,j=h.cloneNode(),c.splitNodes(h.childNodes,h,j,q.startContainer,q.startOffset);!g.test(h.nodeName);){angular.element(h).after(j),h=h.parentNode;var v=j;j=h.cloneNode(),c.splitNodes(h.childNodes,h,j,v)}else h=q.startContainer,j=h.cloneNode(),c.splitNodes(h.childNodes,h,j,void 0,void 0,q.startOffset);if(angular.element(h).after(j),q.setStartAfter(h),q.setEndAfter(h),/^(|<br(|\/)>)$/i.test(h.innerHTML.trim())&&(q.setStartBefore(h),q.setEndBefore(h),angular.element(h).remove()),/^(|<br(|\/)>)$/i.test(j.innerHTML.trim())&&angular.element(j).remove(),"li"===h.nodeName.toLowerCase()){for(o=e.createDocumentFragment(),m=0;m<r.childNodes.length;m++)p=angular.element("<li>"),c.transferChildNodes(r.childNodes[m],p[0]),c.transferNodeAttributes(r.childNodes[m],p[0]),o.appendChild(p[0]);r=o,n&&(n=r.childNodes[r.childNodes.length-1],n=n.childNodes[n.childNodes.length-1])}}else q.deleteContents();q.insertNode(r),n&&i.setSelectionToElementEnd(n)}};return i}]).service("taDOM",function(){var a={getByAttribute:function(b,c){var d=[],e=b.children();return e.length&&angular.forEach(e,function(b){d=d.concat(a.getByAttribute(angular.element(b),c))}),void 0!==b.attr(c)&&d.push(b),d},transferChildNodes:function(a,b){for(b.innerHTML="";a.childNodes.length>0;)b.appendChild(a.childNodes[0]);return b},splitNodes:function(b,c,d,e,f,g){if(!e&&isNaN(g))throw new Error("taDOM.splitNodes requires a splitNode or splitIndex");for(var h=document.createDocumentFragment(),i=document.createDocumentFragment(),j=0;b.length>0&&(isNaN(g)||g!==j)&&b[0]!==e;)h.appendChild(b[0]),j++;for(!isNaN(f)&&f>=0&&b[0]&&(h.appendChild(document.createTextNode(b[0].nodeValue.substring(0,f))),b[0].nodeValue=b[0].nodeValue.substring(f));b.length>0;)i.appendChild(b[0]);a.transferChildNodes(h,c),a.transferChildNodes(i,d)},transferNodeAttributes:function(a,b){for(var c=0;c<a.attributes.length;c++)b.setAttribute(a.attributes[c].name,a.attributes[c].value);return b}};return a}),angular.module("textAngular.validators",[]).directive("taMaxText",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e=parseInt(a.$eval(c.taMaxText));if(isNaN(e))throw"Max text must be an integer";c.$observe("taMaxText",function(a){if(e=parseInt(a),isNaN(e))throw"Max text must be an integer";d.$dirty&&d.$validate()}),d.$validators.taMaxText=function(a){var b=angular.element("<div/>");return b.html(a),b.text().length<=e}}}}).directive("taMinText",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e=parseInt(a.$eval(c.taMinText));if(isNaN(e))throw"Min text must be an integer";c.$observe("taMinText",function(a){if(e=parseInt(a),isNaN(e))throw"Min text must be an integer";d.$dirty&&d.$validate()}),d.$validators.taMinText=function(a){var b=angular.element("<div/>");return b.html(a),!b.text().length||b.text().length>=e}}}}),angular.module("textAngular.taBind",["textAngular.factories","textAngular.DOM"]).service("_taBlankTest",[function(){var a=/<(a|abbr|acronym|bdi|bdo|big|cite|code|del|dfn|img|ins|kbd|label|map|mark|q|ruby|rp|rt|s|samp|time|tt|var)[^>]*(>|$)/i;return function(b){return function(c){if(!c)return!0;var d,e=/(^[^<]|>)[^<]/i.exec(c);return e?d=e.index:(c=c.toString().replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,""),d=c.indexOf(">")),c=c.trim().substring(d,d+100),!/^[^<>]+$/i.test(c)&&(!(0!==c.length&&c!==b&&!/^>(\s|&nbsp;)*<\/[^>]+>$/gi.test(c))||!/>\s*[^\s<]/i.test(c)&&!a.test(c))}}}]).directive("taButton",[function(){return{link:function(a,b,c){b.attr("unselectable","on"),b.on("mousedown",function(a,b){return b&&angular.extend(a,b),a.preventDefault(),!1})}}}]).directive("taBind",["taSanitize","$timeout","$window","$document","taFixChrome","taBrowserTag","taSelection","taSelectableElements","taApplyCustomRenderers","taOptions","_taBlankTest","$parse","taDOM","textAngularManager",function(a,e,f,h,k,l,m,n,o,q,r,s,t,u){return{priority:2,require:["ngModel","?ngModelOptions"],link:function(l,v,w,x){function y(a){var b;return R.forEach(function(c){if(c.keyCode===a.keyCode){var d=(a.metaKey?O:0)+(a.ctrlKey?N:0)+(a.shiftKey?Q:0)+(a.altKey?P:0);if(c.forbiddenModifiers&d)return;c.mustHaveModifiers.every(function(a){return d&a})&&(b=c.specialKey)}}),b}var z,A,B,C,D=x[0],E=x[1]||{},F=void 0!==v.attr("contenteditable")&&v.attr("contenteditable"),G=F||"textarea"===v[0].tagName.toLowerCase()||"input"===v[0].tagName.toLowerCase(),H=!1,I=!1,J=!1,K=w.taUnsafeSanitizer||q.disableSanitizer,L=/^(9|19|20|27|33|34|35|36|37|38|39|40|45|112|113|114|115|116|117|118|119|120|121|122|123|144|145)$/i,M=/^(8|13|32|46|59|61|107|109|173|186|187|188|189|190|191|192|219|220|221|222)$/i,N=1,O=2,P=4,Q=8,R=[{specialKey:"UndoKey",forbiddenModifiers:P+Q,mustHaveModifiers:[O+N],keyCode:90},{specialKey:"RedoKey",forbiddenModifiers:P,mustHaveModifiers:[O+N,Q],keyCode:90},{specialKey:"RedoKey",forbiddenModifiers:P+Q,mustHaveModifiers:[O+N],keyCode:89},{specialKey:"TabKey",forbiddenModifiers:O+Q+P+N,mustHaveModifiers:[],keyCode:9},{specialKey:"ShiftTabKey",forbiddenModifiers:O+P+N,mustHaveModifiers:[Q],keyCode:9}];void 0===w.taDefaultWrap&&(w.taDefaultWrap="p"),""===w.taDefaultWrap?(B="",C=void 0===b.ie?"<div><br></div>":b.ie>=11?"<p><br></p>":b.ie<=8?"<P>&nbsp;</P>":"<p>&nbsp;</p>"):(B=void 0===b.ie||b.ie>=11?"<"+w.taDefaultWrap+"><br></"+w.taDefaultWrap+">":b.ie<=8?"<"+w.taDefaultWrap.toUpperCase()+"></"+w.taDefaultWrap.toUpperCase()+">":"<"+w.taDefaultWrap+"></"+w.taDefaultWrap+">",C=void 0===b.ie||b.ie>=11?"<"+w.taDefaultWrap+"><br></"+w.taDefaultWrap+">":b.ie<=8?"<"+w.taDefaultWrap.toUpperCase()+">&nbsp;</"+w.taDefaultWrap.toUpperCase()+">":"<"+w.taDefaultWrap+">&nbsp;</"+w.taDefaultWrap+">"),E.$options||(E.$options={});var S=r(C),T=function(a){if(S(a))return a;var b=angular.element("<div>"+a+"</div>");if(0===b.children().length)a="<"+w.taDefaultWrap+">"+a+"</"+w.taDefaultWrap+">";else{var c,e=b[0].childNodes,f=!1;for(c=0;c<e.length&&!(f=e[c].nodeName.toLowerCase().match(d));c++);if(f)for(a="",c=0;c<e.length;c++){var g=e[c],h=g.nodeName.toLowerCase();if("#comment"===h)a+="<!--"+g.nodeValue+"-->";else if("#text"===h){var i=g.textContent;a+=i.trim()?"<"+w.taDefaultWrap+">"+i+"</"+w.taDefaultWrap+">":i}else if(h.match(d))a+=g.outerHTML;else{var j=g.outerHTML||g.nodeValue;a+=""!==j.trim()?"<"+w.taDefaultWrap+">"+j+"</"+w.taDefaultWrap+">":j}}else a="<"+w.taDefaultWrap+">"+a+"</"+w.taDefaultWrap+">"}return a};w.taPaste&&(A=s(w.taPaste)),v.addClass("ta-bind");var U;l["$undoManager"+(w.id||"")]=D.$undoManager={_stack:[],_index:0,_max:1e3,push:function(a){return void 0===a||null===a||void 0!==this.current()&&null!==this.current()&&a===this.current()?a:(this._index<this._stack.length-1&&(this._stack=this._stack.slice(0,this._index+1)),this._stack.push(a),U&&e.cancel(U),this._stack.length>this._max&&this._stack.shift(),this._index=this._stack.length-1,a)},undo:function(){return this.setToIndex(this._index-1)},redo:function(){return this.setToIndex(this._index+1)},setToIndex:function(a){return 0>a||a>this._stack.length-1?void 0:(this._index=a,this.current())},current:function(){return this._stack[this._index]}};var V,W=l["$undoTaBind"+(w.id||"")]=function(){if(!H&&F){var a=D.$undoManager.undo();void 0!==a&&null!==a&&(ka(a),Z(a,!1),V&&e.cancel(V),V=e(function(){v[0].focus(),m.setSelectionToElementEnd(v[0])},1))}},X=l["$redoTaBind"+(w.id||"")]=function(){if(!H&&F){var a=D.$undoManager.redo();void 0!==a&&null!==a&&(ka(a),Z(a,!1),V&&e.cancel(V),V=e(function(){v[0].focus(),m.setSelectionToElementEnd(v[0])},1))}},Y=function(){if(F)return v[0].innerHTML;if(G)return v.val();throw"textAngular Error: attempting to update non-editable taBind"},Z=function(a,b,c){J=c||!1,(void 0===b||null===b)&&(b=F),(void 0===a||null===a)&&(a=Y()),S(a)?(""!==D.$viewValue&&D.$setViewValue(""),b&&""!==D.$undoManager.current()&&D.$undoManager.push("")):(ja(),D.$viewValue!==a&&(D.$setViewValue(a),b&&D.$undoManager.push(a))),D.$render()};l["updateTaBind"+(w.id||"")]=function(){H||Z(void 0,void 0,!0)};var $=function(b){return D.$oldViewValue=a(k(b),D.$oldViewValue,K)};if(v.attr("required")&&(D.$validators.required=function(a,b){return!S(a||b)}),D.$parsers.push($),D.$parsers.unshift(T),D.$formatters.push($),D.$formatters.unshift(T),D.$formatters.unshift(function(a){return D.$undoManager.push(a||"")}),G)if(l.events={},F){var _=!1,aa=function(b){if(b&&b.trim().length){if(b.match(/class=["']*Mso(Normal|List)/i)||b.match(/content=["']*Word.Document/i)){var c=b.match(/<!--StartFragment-->([\s\S]*?)<!--EndFragment-->/i);c=c?c[1]:b,c=c.replace(/<o:p>[\s\S]*?<\/o:p>/gi,"").replace(/class=(["']|)MsoNormal(["']|)/gi,"");var d=angular.element("<div>"+c+"</div>"),f=angular.element("<div></div>"),g={element:null,lastIndent:[],lastLi:null,isUl:!1};g.lastIndent.peek=function(){var a=this.length;return a>0?this[a-1]:void 0};for(var h=function(a){g.isUl=a,g.element=angular.element(a?"<ul>":"<ol>"),g.lastIndent=[],g.lastIndent.peek=function(){var a=this.length;return a>0?this[a-1]:void 0},g.lastLevelMatch=null},i=0;i<=d[0].childNodes.length;i++)if(d[0].childNodes[i]&&"#text"!==d[0].childNodes[i].nodeName){var j=d[0].childNodes[i].tagName.toLowerCase();if("p"===j||"h1"===j||"h2"===j||"h3"===j||"h4"===j||"h5"===j||"h6"===j){var k=angular.element(d[0].childNodes[i]),n=(k.attr("class")||"").match(/MsoList(Bullet|Number|Paragraph)(CxSp(First|Middle|Last)|)/i);if(n){if(k[0].childNodes.length<2||k[0].childNodes[1].childNodes.length<1)continue;var o="bullet"===n[1].toLowerCase()||"number"!==n[1].toLowerCase()&&!(/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(k[0].childNodes[1].innerHTML)||/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(k[0].childNodes[1].childNodes[0].innerHTML)),p=(k.attr("style")||"").match(/margin-left:([\-\.0-9]*)/i),q=parseFloat(p?p[1]:0),r=(k.attr("style")||"").match(/mso-list:l([0-9]+) level([0-9]+) lfo[0-9+]($|;)/i);if(r&&r[2]&&(q=parseInt(r[2])),r&&(!g.lastLevelMatch||r[1]!==g.lastLevelMatch[1])||!n[3]||"first"===n[3].toLowerCase()||null===g.lastIndent.peek()||g.isUl!==o&&g.lastIndent.peek()===q)h(o),f.append(g.element);else if(null!=g.lastIndent.peek()&&g.lastIndent.peek()<q)g.element=angular.element(o?"<ul>":"<ol>"),g.lastLi.append(g.element);else if(null!=g.lastIndent.peek()&&g.lastIndent.peek()>q){for(;null!=g.lastIndent.peek()&&g.lastIndent.peek()>q;)if("li"!==g.element.parent()[0].tagName.toLowerCase()){if(!/[uo]l/i.test(g.element.parent()[0].tagName.toLowerCase()))break;g.element=g.element.parent(),g.lastIndent.pop()}else g.element=g.element.parent();g.isUl="ul"===g.element[0].tagName.toLowerCase(),o!==g.isUl&&(h(o),f.append(g.element))}g.lastLevelMatch=r,q!==g.lastIndent.peek()&&g.lastIndent.push(q),g.lastLi=angular.element("<li>"),g.element.append(g.lastLi),g.lastLi.html(k.html().replace(/<!(--|)\[if !supportLists\](--|)>[\s\S]*?<!(--|)\[endif\](--|)>/gi,"")),k.remove()}else h(!1),f.append(k)}}var s=function(a){a=angular.element(a);for(var b=a[0].childNodes.length-1;b>=0;b--)a.after(a[0].childNodes[b]);a.remove()};angular.forEach(f.find("span"),function(a){a.removeAttribute("lang"),a.attributes.length<=0&&s(a)}),angular.forEach(f.find("font"),s),b=f.html()}else{if(b=b.replace(/<(|\/)meta[^>]*?>/gi,""),b.match(/<[^>]*?(ta-bind)[^>]*?>/)){if(b.match(/<[^>]*?(text-angular)[^>]*?>/)){var u=angular.element("<div>"+b+"</div>");u.find("textarea").remove();for(var w=t.getByAttribute(u,"ta-bind"),x=0;x<w.length;x++){for(var y=w[x][0].parentNode.parentNode,z=0;z<w[x][0].childNodes.length;z++)y.parentNode.insertBefore(w[x][0].childNodes[z],y);y.parentNode.removeChild(y)}b=u.html().replace('<br class="Apple-interchange-newline">',"")}}else b.match(/^<span/)&&(b.match(/<span class=(\"Apple-converted-space\"|\'Apple-converted-space\')>.<\/span>/gi)||(b=b.replace(/<(|\/)span[^>]*?>/gi,"")));b=b.replace(/<br class="Apple-interchange-newline"[^>]*?>/gi,"").replace(/<span class="Apple-converted-space">( |&nbsp;)<\/span>/gi,"&nbsp;")}/<li(\s.*)?>/i.test(b)&&/(<ul(\s.*)?>|<ol(\s.*)?>).*<li(\s.*)?>/i.test(b)===!1&&(b=b.replace(/<li(\s.*)?>.*<\/li(\s.*)?>/i,"<ul>$&</ul>")),b=b.replace(/^[ |\u00A0]+/gm,function(a){for(var b="",c=0;c<a.length;c++)b+="&nbsp;";return b}).replace(/\n|\r\n|\r/g,"<br />").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"),A&&(b=A(l,{$html:b})||b),b=a(b,"",K),m.insertHtml(b,v[0]),e(function(){D.$setViewValue(Y()),_=!1,v.removeClass("processing-paste")},0)}else _=!1,v.removeClass("processing-paste")};v.on("paste",l.events.paste=function(a,b){if(b&&angular.extend(a,b),H||_)return a.stopPropagation(),a.preventDefault(),!1;_=!0,v.addClass("processing-paste");var c,d=(a.originalEvent||a).clipboardData;if(d&&d.getData&&d.types.length>0){for(var g="",i=0;i<d.types.length;i++)g+=" "+d.types[i];return/text\/html/i.test(g)?c=d.getData("text/html"):/text\/plain/i.test(g)&&(c=d.getData("text/plain")),aa(c),a.stopPropagation(),a.preventDefault(),!1}var j=f.rangy.saveSelection(),k=angular.element('<div class="ta-hidden-input" contenteditable="true"></div>');h.find("body").append(k),k[0].focus(),e(function(){f.rangy.restoreSelection(j),aa(k[0].innerHTML),v[0].focus(),k.remove()},0)}),v.on("cut",l.events.cut=function(a){H?a.preventDefault():e(function(){D.$setViewValue(Y())},0)}),v.on("keydown",l.events.keydown=function(a,b){b&&angular.extend(a,b),a.specialKey=y(a);var c;if(q.keyMappings.forEach(function(b){a.specialKey===b.commandKeyCode&&(a.specialKey=void 0),b.testForKey(a)&&(c=b.commandKeyCode),("UndoKey"===b.commandKeyCode||"RedoKey"===b.commandKeyCode)&&(b.enablePropagation||a.preventDefault())}),void 0!==c&&(a.specialKey=c),void 0===a.specialKey||"UndoKey"===a.specialKey&&"RedoKey"===a.specialKey||(a.preventDefault(),u.sendKeyCommand(l,a)),!H&&("UndoKey"===a.specialKey&&(W(),a.preventDefault()),"RedoKey"===a.specialKey&&(X(),a.preventDefault()),13===a.keyCode&&!a.shiftKey)){var d,f=m.getSelectionElement();if(!f.tagName.match(g))return;var h=angular.element(B),i=["blockquote","ul","ol"];if(function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return!0;return!1}(i,f.parentNode.tagName.toLowerCase())){if(/^<br(|\/)>$/i.test(f.innerHTML.trim())&&!f.nextSibling){d=angular.element(f);var j=d.parent();j.after(h),d.remove(),0===j.children().length&&j.remove(),m.setSelectionToElementStart(h[0]),a.preventDefault()}/^<[^>]+><br(|\/)><\/[^>]+>$/i.test(f.innerHTML.trim())&&(d=angular.element(f),d.after(h),d.remove(),m.setSelectionToElementStart(h[0]),a.preventDefault())}}});var ba;if(v.on("keyup",l.events.keyup=function(a,b){if(b&&angular.extend(a,b),9===a.keyCode){return void(m.getSelection().start.element===v[0]&&v.children().length&&m.setSelectionToElementStart(v.children()[0]))}if(U&&e.cancel(U),!H&&!L.test(a.keyCode)){if(""!==B&&13===a.keyCode&&!a.shiftKey){for(var d=m.getSelectionElement();!d.tagName.match(g)&&d!==v[0];)d=d.parentNode;if(d.tagName.toLowerCase()!==w.taDefaultWrap&&"li"!==d.tagName.toLowerCase()&&(""===d.innerHTML.trim()||"<br>"===d.innerHTML.trim())){var f=angular.element(B);angular.element(d).replaceWith(f),m.setSelectionToElementStart(f[0])}}var h=Y();""!==B&&""===h.trim()?(ka(B),m.setSelectionToElementStart(v.children()[0])):"<"!==h.substring(0,1)&&w.taDefaultWrap;var i=z!==a.keyCode&&M.test(a.keyCode);ba&&e.cancel(ba),ba=e(function(){Z(h,i,!0)},E.$options.debounce||400),i||(U=e(function(){D.$undoManager.push(h)},250)),z=a.keyCode}}),v.on("blur",l.events.blur=function(){I=!1,H?(J=!0,D.$render()):Z(void 0,void 0,!0)}),w.placeholder&&(b.ie>8||void 0===b.ie)){var ca;if(!w.id)throw"textAngular Error: An unique ID is required for placeholders to work";ca=i("#"+w.id+".placeholder-text:before",'content: "'+w.placeholder+'"'),l.$on("$destroy",function(){j(ca)})}v.on("focus",l.events.focus=function(){I=!0,v.removeClass("placeholder-text"),ja()}),v.on("mouseup",l.events.mouseup=function(){m.getSelection().start.element===v[0]&&v.children().length&&m.setSelectionToElementStart(v.children()[0])}),v.on("mousedown",l.events.mousedown=function(a,b){b&&angular.extend(a,b),a.stopPropagation()})}else{v.on("change blur",l.events.change=l.events.blur=function(){H||D.$setViewValue(Y())}),v.on("keydown",l.events.keydown=function(a,b){if(b&&angular.extend(a,b),9===a.keyCode){var c=this.selectionStart,d=this.selectionEnd,e=v.val();if(a.shiftKey){var f=e.lastIndexOf("\n",c),g=e.lastIndexOf("\t",c);-1!==g&&g>=f&&(v.val(e.substring(0,g)+e.substring(g+1)),this.selectionStart=this.selectionEnd=c-1)}else v.val(e.substring(0,c)+"\t"+e.substring(d)),this.selectionStart=this.selectionEnd=c+1;a.preventDefault()}});var da=function(a,b){for(var c="",d=0;b>d;d++)c+=a;return c},ea=function(a,b,c){for(var d=0;d<a.length;d++)b.call(c,d,a[d])},fa=function(a,b){var c="",d=a.childNodes;return b++,c+=da("\t",b-1)+a.outerHTML.substring(0,4),ea(d,function(a,d){var e=d.nodeName.toLowerCase();return"#comment"===e?void(c+="<!--"+d.nodeValue+"-->"):"#text"===e?void(c+=d.textContent):void(d.outerHTML&&(c+="ul"===e||"ol"===e?"\n"+fa(d,b):"\n"+da("\t",b)+d.outerHTML))}),c+="\n"+da("\t",b-1)+a.outerHTML.substring(a.outerHTML.lastIndexOf("<"))};D.$formatters.unshift(function(a){var b=angular.element("<div>"+a+"</div>")[0].childNodes;return b.length>0&&(a="",ea(b,function(b,c){var d=c.nodeName.toLowerCase();return"#comment"===d?void(a+="<!--"+c.nodeValue+"-->"):"#text"===d?void(a+=c.textContent):void(c.outerHTML&&(a.length>0&&(a+="\n"),a+="ul"===d||"ol"===d?""+fa(c,0):""+c.outerHTML))})),a})}var ga,ha=function(a){return l.$emit("ta-element-select",this),a.preventDefault(),!1},ia=function(a,b){if(b&&angular.extend(a,b),!p&&!H){p=!0;var c;c=a.originalEvent?a.originalEvent.dataTransfer:a.dataTransfer,l.$emit("ta-drop-event",this,a,c),e(function(){p=!1,Z(void 0,void 0,!0)},100)}},ja=l["reApplyOnSelectorHandlers"+(w.id||"")]=function(){H||angular.forEach(n,function(a){v.find(a).off("click",ha).on("click",ha)})},ka=function(a){v[0].innerHTML=a},la=!1;D.$render=function(){if(!la){la=!0;var a=D.$viewValue||"";J||(F&&I&&(v.removeClass("placeholder-text"),ga&&e.cancel(ga),ga=e(function(){I||(v[0].focus(),m.setSelectionToElementEnd(v.children()[v.children().length-1])),ga=void 0},1)),F?(ka((w.placeholder,""===a?B:a)),H?v.off("drop",ia):(ja(),v.on("drop",ia))):"textarea"!==v[0].tagName.toLowerCase()&&"input"!==v[0].tagName.toLowerCase()?ka(o(a)):v.val(a)),F&&w.placeholder&&(""===a?I?v.removeClass("placeholder-text"):v.addClass("placeholder-text"):v.removeClass("placeholder-text")),la=J=!1}},w.taReadonly&&(H=l.$eval(w.taReadonly),H?(v.addClass("ta-readonly"),("textarea"===v[0].tagName.toLowerCase()||"input"===v[0].tagName.toLowerCase())&&v.attr("disabled","disabled"),void 0!==v.attr("contenteditable")&&v.attr("contenteditable")&&v.removeAttr("contenteditable")):(v.removeClass("ta-readonly"),"textarea"===v[0].tagName.toLowerCase()||"input"===v[0].tagName.toLowerCase()?v.removeAttr("disabled"):F&&v.attr("contenteditable","true")),l.$watch(w.taReadonly,function(a,b){b!==a&&(a?(v.addClass("ta-readonly"),("textarea"===v[0].tagName.toLowerCase()||"input"===v[0].tagName.toLowerCase())&&v.attr("disabled","disabled"),void 0!==v.attr("contenteditable")&&v.attr("contenteditable")&&v.removeAttr("contenteditable"),angular.forEach(n,function(a){v.find(a).on("click",ha)}),v.off("drop",ia)):(v.removeClass("ta-readonly"),"textarea"===v[0].tagName.toLowerCase()||"input"===v[0].tagName.toLowerCase()?v.removeAttr("disabled"):F&&v.attr("contenteditable","true"),angular.forEach(n,function(a){v.find(a).off("click",ha)}),v.on("drop",ia)),H=a)})),F&&!H&&(angular.forEach(n,function(a){v.find(a).on("click",ha)}),v.on("drop",ia),v.on("blur",function(){b.webkit&&(c=!0)}))}}}]);var p=!1,q=angular.module("textAngular",["ngSanitize","textAngularSetup","textAngular.factories","textAngular.DOM","textAngular.validators","textAngular.taBind"]);q.config([function(){angular.forEach(e,function(a,b){delete e[b]})}]),q.run([function(){if("function"==typeof define&&define.amd)define(function(a){window.rangy=a("rangy"),window.rangy.saveSelection=a("rangy/lib/rangy-selectionsaverestore")});else if("function"==typeof require&&"undefined"!=typeof module&&"object"==typeof a)window.rangy=require("rangy"),window.rangy.saveSelection=require("rangy/lib/rangy-selectionsaverestore");else{if(!window.rangy)throw"rangy-core.js and rangy-selectionsaverestore.js are required for textAngular to work correctly, rangy-core is not yet loaded.";if(window.rangy.init(),!window.rangy.saveSelection)throw"rangy-selectionsaverestore.js is required for textAngular to work correctly."}}]),q.directive("textAngular",["$compile","$timeout","taOptions","taSelection","taExecCommand","textAngularManager","$window","$document","$animate","$log","$q","$parse",function(a,b,c,d,e,f,g,h,i,j,k,l){return{require:"?ngModel",scope:{},restrict:"EA",priority:2,link:function(m,n,o,p){var q,r,s,t,u,v,w,x,y,z,A,B=o.serial?o.serial:Math.floor(1e16*Math.random());m._name=o.name?o.name:"textAngularEditor"+B;var C=function(a,c,d){b(function(){var b=function(){a.off(c,b),d.apply(this,arguments)};a.on(c,b)},100)};if(y=e(o.taDefaultWrap),angular.extend(m,angular.copy(c),{wrapSelection:function(a,b,c){"undo"===a.toLowerCase()?m["$undoTaBindtaTextElement"+B]():"redo"===a.toLowerCase()?m["$redoTaBindtaTextElement"+B]():(y(a,!1,b,m.defaultTagAttributes),c&&m["reApplyOnSelectorHandlerstaTextElement"+B](),m.displayElements.text[0].focus())},showHtml:m.$eval(o.taShowHtml)||!1}),o.taFocussedClass&&(m.classes.focussed=o.taFocussedClass),o.taTextEditorClass&&(m.classes.textEditor=o.taTextEditorClass),o.taHtmlEditorClass&&(m.classes.htmlEditor=o.taHtmlEditorClass),o.taDefaultTagAttributes)try{angular.extend(m.defaultTagAttributes,angular.fromJson(o.taDefaultTagAttributes))}catch(D){j.error(D)}o.taTextEditorSetup&&(m.setup.textEditorSetup=m.$parent.$eval(o.taTextEditorSetup)),o.taHtmlEditorSetup&&(m.setup.htmlEditorSetup=m.$parent.$eval(o.taHtmlEditorSetup)),o.taFileDrop?m.fileDropHandler=m.$parent.$eval(o.taFileDrop):m.fileDropHandler=m.defaultFileDropHandler,w=n[0].innerHTML,n[0].innerHTML="",m.displayElements={forminput:angular.element("<input type='hidden' tabindex='-1' style='display: none;'>"),html:angular.element("<textarea></textarea>"),text:angular.element("<div></div>"),scrollWindow:angular.element("<div class='ta-scroll-window'></div>"),popover:angular.element('<div class="popover fade bottom" style="max-width: none; width: 305px;"></div>'),popoverArrow:angular.element('<div class="arrow"></div>'),popoverContainer:angular.element('<div class="popover-content"></div>'),resize:{overlay:angular.element('<div class="ta-resizer-handle-overlay"></div>'),background:angular.element('<div class="ta-resizer-handle-background"></div>'),anchors:[angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tr"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-bl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-br"></div>')],info:angular.element('<div class="ta-resizer-handle-info"></div>')}},m.displayElements.popover.append(m.displayElements.popoverArrow),m.displayElements.popover.append(m.displayElements.popoverContainer),m.displayElements.scrollWindow.append(m.displayElements.popover),m.displayElements.popover.on("mousedown",function(a,b){return b&&angular.extend(a,b),a.preventDefault(),!1}),m.showPopover=function(a){m.displayElements.popover.css("display","block"),m.reflowPopover(a),i.addClass(m.displayElements.popover,"in"),C(h.find("body"),"click keyup",function(){m.hidePopover()})},m.reflowPopover=function(a){m.displayElements.text[0].offsetHeight-51>a[0].offsetTop?(m.displayElements.popover.css("top",a[0].offsetTop+a[0].offsetHeight+m.displayElements.scrollWindow[0].scrollTop+"px"),m.displayElements.popover.removeClass("top").addClass("bottom")):(m.displayElements.popover.css("top",a[0].offsetTop-54+m.displayElements.scrollWindow[0].scrollTop+"px"),m.displayElements.popover.removeClass("bottom").addClass("top"));var b=m.displayElements.text[0].offsetWidth-m.displayElements.popover[0].offsetWidth,c=a[0].offsetLeft+a[0].offsetWidth/2-m.displayElements.popover[0].offsetWidth/2;m.displayElements.popover.css("left",Math.max(0,Math.min(b,c))+"px"),m.displayElements.popoverArrow.css("margin-left",Math.min(c,Math.max(0,c-b))-11+"px")},m.hidePopover=function(){m.displayElements.popover.css("display",""),m.displayElements.popoverContainer.attr("style",""),m.displayElements.popoverContainer.attr("class","popover-content"),m.displayElements.popover.removeClass("in")},m.displayElements.resize.overlay.append(m.displayElements.resize.background),angular.forEach(m.displayElements.resize.anchors,function(a){m.displayElements.resize.overlay.append(a)}),m.displayElements.resize.overlay.append(m.displayElements.resize.info),m.displayElements.scrollWindow.append(m.displayElements.resize.overlay),m.reflowResizeOverlay=function(a){a=angular.element(a)[0],m.displayElements.resize.overlay.css({display:"block",left:a.offsetLeft-5+"px",top:a.offsetTop-5+"px",width:a.offsetWidth+10+"px",height:a.offsetHeight+10+"px"}),m.displayElements.resize.info.text(a.offsetWidth+" x "+a.offsetHeight)},m.showResizeOverlay=function(a){var b=h.find("body");z=function(c){var d={width:parseInt(a.attr("width")),height:parseInt(a.attr("height")),x:c.clientX,y:c.clientY};(void 0===d.width||isNaN(d.width))&&(d.width=a[0].offsetWidth),(void 0===d.height||isNaN(d.height))&&(d.height=a[0].offsetHeight),m.hidePopover();var e=d.height/d.width,f=function(b){function c(a){return Math.round(Math.max(0,a))}var f={x:Math.max(0,d.width+(b.clientX-d.x)),y:Math.max(0,d.height+(b.clientY-d.y))},g=void 0!==o.taResizeForceAspectRatio,h=o.taResizeMaintainAspectRatio;if(g||h&&!b.shiftKey){var j=f.y/f.x;f.x=e>j?f.x:f.y/e,f.y=e>j?f.x*e:f.y}var k=angular.element(a);k.css("height",c(f.y)+"px"),k.css("width",c(f.x)+"px"),m.reflowResizeOverlay(a)};b.on("mousemove",f),C(b,"mouseup",function(a){a.preventDefault(),a.stopPropagation(),b.off("mousemove",f),m.$apply(function(){m.hidePopover(),m.updateTaBindtaTextElement()},100)}),c.stopPropagation(),c.preventDefault()},m.displayElements.resize.anchors[3].off("mousedown"),m.displayElements.resize.anchors[3].on("mousedown",z),m.reflowResizeOverlay(a),C(b,"click",function(){m.hideResizeOverlay()})},m.hideResizeOverlay=function(){m.displayElements.resize.anchors[3].off("mousedown",z),m.displayElements.resize.overlay.css("display","")},m.setup.htmlEditorSetup(m.displayElements.html),m.setup.textEditorSetup(m.displayElements.text),m.displayElements.html.attr({id:"taHtmlElement"+B,"ng-show":"showHtml","ta-bind":"ta-bind","ng-model":"html","ng-model-options":n.attr("ng-model-options")}),m.displayElements.text.attr({id:"taTextElement"+B,contentEditable:"true","ta-bind":"ta-bind","ng-model":"html","ng-model-options":n.attr("ng-model-options")}),m.displayElements.scrollWindow.attr({"ng-hide":"showHtml"}),o.taDefaultWrap&&m.displayElements.text.attr("ta-default-wrap",o.taDefaultWrap),o.taUnsafeSanitizer&&(m.displayElements.text.attr("ta-unsafe-sanitizer",o.taUnsafeSanitizer),m.displayElements.html.attr("ta-unsafe-sanitizer",o.taUnsafeSanitizer)),m.displayElements.scrollWindow.append(m.displayElements.text),n.append(m.displayElements.scrollWindow),n.append(m.displayElements.html),m.displayElements.forminput.attr("name",m._name),n.append(m.displayElements.forminput),o.tabindex&&(n.removeAttr("tabindex"),m.displayElements.text.attr("tabindex",o.tabindex),m.displayElements.html.attr("tabindex",o.tabindex)),o.placeholder&&(m.displayElements.text.attr("placeholder",o.placeholder),m.displayElements.html.attr("placeholder",o.placeholder)),o.taDisabled&&(m.displayElements.text.attr("ta-readonly","disabled"),m.displayElements.html.attr("ta-readonly","disabled"),m.disabled=m.$parent.$eval(o.taDisabled),m.$parent.$watch(o.taDisabled,function(a){m.disabled=a,m.disabled?n.addClass(m.classes.disabled):n.removeClass(m.classes.disabled)})),o.taPaste&&(m._pasteHandler=function(a){return l(o.taPaste)(m.$parent,{$html:a})},m.displayElements.text.attr("ta-paste","_pasteHandler($html)")),a(m.displayElements.scrollWindow)(m),a(m.displayElements.html)(m),m.updateTaBindtaTextElement=m["updateTaBindtaTextElement"+B],m.updateTaBindtaHtmlElement=m["updateTaBindtaHtmlElement"+B],n.addClass("ta-root"),m.displayElements.scrollWindow.addClass("ta-text ta-editor "+m.classes.textEditor),m.displayElements.html.addClass("ta-html ta-editor "+m.classes.htmlEditor),m._actionRunning=!1;var E=!1;if(m.startAction=function(){return m._actionRunning=!0,E=g.rangy.saveSelection(),function(){E&&g.rangy.restoreSelection(E)}},m.endAction=function(){m._actionRunning=!1,E&&(m.showHtml?m.displayElements.html[0].focus():m.displayElements.text[0].focus(),g.rangy.removeMarkers(E)),E=!1,m.updateSelectedStyles(),m.showHtml||m["updateTaBindtaTextElement"+B]()},u=function(){m.focussed=!0,n.addClass(m.classes.focussed),x.focus(),n.triggerHandler("focus")},m.displayElements.html.on("focus",u),m.displayElements.text.on("focus",u),v=function(a){return m._actionRunning||h[0].activeElement===m.displayElements.html[0]||h[0].activeElement===m.displayElements.text[0]||(n.removeClass(m.classes.focussed),x.unfocus(),b(function(){m._bUpdateSelectedStyles=!1,n.triggerHandler("blur"),m.focussed=!1},0)),a.preventDefault(),!1},m.displayElements.html.on("blur",v),m.displayElements.text.on("blur",v),m.displayElements.text.on("paste",function(a){n.triggerHandler("paste",a)}),m.queryFormatBlockState=function(a){
return!m.showHtml&&a.toLowerCase()===h[0].queryCommandValue("formatBlock").toLowerCase()},m.queryCommandState=function(a){return m.showHtml?"":h[0].queryCommandState(a)},m.switchView=function(){m.showHtml=!m.showHtml,i.enabled(!1,m.displayElements.html),i.enabled(!1,m.displayElements.text),m.showHtml?b(function(){return i.enabled(!0,m.displayElements.html),i.enabled(!0,m.displayElements.text),m.displayElements.html[0].focus()},100):b(function(){return i.enabled(!0,m.displayElements.html),i.enabled(!0,m.displayElements.text),m.displayElements.text[0].focus()},100)},o.ngModel){var F=!0;p.$render=function(){if(F){F=!1;var a=m.$parent.$eval(o.ngModel);void 0!==a&&null!==a||!w||""===w||p.$setViewValue(w)}m.displayElements.forminput.val(p.$viewValue),m.html=p.$viewValue||""},n.attr("required")&&(p.$validators.required=function(a,b){var c=a||b;return!(!c||""===c.trim())})}else m.displayElements.forminput.val(w),m.html=w;if(m.$watch("html",function(a,b){a!==b&&(o.ngModel&&p.$viewValue!==a&&p.$setViewValue(a),m.displayElements.forminput.val(a))}),o.taTargetToolbars)x=f.registerEditor(m._name,m,o.taTargetToolbars.split(","));else{var G=angular.element('<div text-angular-toolbar name="textAngularToolbar'+B+'">');o.taToolbar&&G.attr("ta-toolbar",o.taToolbar),o.taToolbarClass&&G.attr("ta-toolbar-class",o.taToolbarClass),o.taToolbarGroupClass&&G.attr("ta-toolbar-group-class",o.taToolbarGroupClass),o.taToolbarButtonClass&&G.attr("ta-toolbar-button-class",o.taToolbarButtonClass),o.taToolbarActiveButtonClass&&G.attr("ta-toolbar-active-button-class",o.taToolbarActiveButtonClass),o.taFocussedClass&&G.attr("ta-focussed-class",o.taFocussedClass),n.prepend(G),a(G)(m.$parent),x=f.registerEditor(m._name,m,["textAngularToolbar"+B])}m.$on("$destroy",function(){f.unregisterEditor(m._name),angular.element(window).off("blur")}),m.$on("ta-element-select",function(a,b){x.triggerElementSelect(a,b)&&m["reApplyOnSelectorHandlerstaTextElement"+B]()}),m.$on("ta-drop-event",function(a,c,d,e){m.displayElements.text[0].focus(),e&&e.files&&e.files.length>0?(angular.forEach(e.files,function(a){try{k.when(m.fileDropHandler(a,m.wrapSelection)||m.fileDropHandler!==m.defaultFileDropHandler&&k.when(m.defaultFileDropHandler(a,m.wrapSelection))).then(function(){m["updateTaBindtaTextElement"+B]()})}catch(b){j.error(b)}}),d.preventDefault(),d.stopPropagation()):b(function(){m["updateTaBindtaTextElement"+B]()},0)}),m._bUpdateSelectedStyles=!1,angular.element(window).on("blur",function(){m._bUpdateSelectedStyles=!1,m.focussed=!1}),m.updateSelectedStyles=function(){var a;A&&b.cancel(A),void 0!==(a=d.getSelectionElement())&&a.parentNode!==m.displayElements.text[0]?x.updateSelectedStyles(angular.element(a)):x.updateSelectedStyles(),m._bUpdateSelectedStyles&&(A=b(m.updateSelectedStyles,200))},q=function(){return m.focussed?void(m._bUpdateSelectedStyles||(m._bUpdateSelectedStyles=!0,m.$apply(function(){m.updateSelectedStyles()}))):void(m._bUpdateSelectedStyles=!1)},m.displayElements.html.on("keydown",q),m.displayElements.text.on("keydown",q),r=function(){m._bUpdateSelectedStyles=!1},m.displayElements.html.on("keyup",r),m.displayElements.text.on("keyup",r),s=function(a,b){b&&angular.extend(a,b),m.$apply(function(){return x.sendKeyCommand(a)?(m._bUpdateSelectedStyles||m.updateSelectedStyles(),a.preventDefault(),!1):void 0})},m.displayElements.html.on("keypress",s),m.displayElements.text.on("keypress",s),t=function(){m._bUpdateSelectedStyles=!1,m.$apply(function(){m.updateSelectedStyles()})},m.displayElements.html.on("mouseup",t),m.displayElements.text.on("mouseup",t)}}}]),q.service("textAngularManager",["taToolExecuteAction","taTools","taRegisterTool",function(a,b,c){var d={},e={};return{registerEditor:function(c,f,g){if(!c||""===c)throw"textAngular Error: An editor requires a name";if(!f)throw"textAngular Error: An editor requires a scope";if(e[c])throw'textAngular Error: An Editor with name "'+c+'" already exists';var h=[];return angular.forEach(g,function(a){d[a]&&h.push(d[a])}),e[c]={scope:f,toolbars:g,_registerToolbar:function(a){this.toolbars.indexOf(a.name)>=0&&h.push(a)},editorFunctions:{disable:function(){angular.forEach(h,function(a){a.disabled=!0})},enable:function(){angular.forEach(h,function(a){a.disabled=!1})},focus:function(){angular.forEach(h,function(a){a._parent=f,a.disabled=!1,a.focussed=!0,f.focussed=!0})},unfocus:function(){angular.forEach(h,function(a){a.disabled=!0,a.focussed=!1}),f.focussed=!1},updateSelectedStyles:function(a){angular.forEach(h,function(b){angular.forEach(b.tools,function(c){c.activeState&&(b._parent=f,c.active=c.activeState(a))})})},sendKeyCommand:function(c){var d=!1;return(c.ctrlKey||c.metaKey||c.specialKey)&&angular.forEach(b,function(b,e){if(b.commandKeyCode&&(b.commandKeyCode===c.which||b.commandKeyCode===c.specialKey))for(var g=0;g<h.length;g++)if(void 0!==h[g].tools[e]){a.call(h[g].tools[e],f),d=!0;break}}),d},triggerElementSelect:function(a,c){var d=function(a,b){for(var c=!0,d=0;d<b.length;d++)c=c&&a.attr(b[d]);return c},e=[],g={},i=!1;c=angular.element(c);var j=!1;if(angular.forEach(b,function(a,b){a.onElementSelect&&a.onElementSelect.element&&a.onElementSelect.element.toLowerCase()===c[0].tagName.toLowerCase()&&(!a.onElementSelect.filter||a.onElementSelect.filter(c))&&(j=j||angular.isArray(a.onElementSelect.onlyWithAttrs)&&d(c,a.onElementSelect.onlyWithAttrs),(!a.onElementSelect.onlyWithAttrs||d(c,a.onElementSelect.onlyWithAttrs))&&(g[b]=a))}),j?(angular.forEach(g,function(a,b){a.onElementSelect.onlyWithAttrs&&d(c,a.onElementSelect.onlyWithAttrs)&&e.push({name:b,tool:a})}),e.sort(function(a,b){return b.tool.onElementSelect.onlyWithAttrs.length-a.tool.onElementSelect.onlyWithAttrs.length})):angular.forEach(g,function(a,b){e.push({name:b,tool:a})}),e.length>0)for(var k=0;k<e.length;k++){for(var l=e[k].tool,m=e[k].name,n=0;n<h.length;n++)if(void 0!==h[n].tools[m]){l.onElementSelect.action.call(h[n].tools[m],a,c,f),i=!0;break}if(i)break}return i}}},e[c].editorFunctions},retrieveEditor:function(a){return e[a]},unregisterEditor:function(a){delete e[a]},registerToolbar:function(a){if(!a)throw"textAngular Error: A toolbar requires a scope";if(!a.name||""===a.name)throw"textAngular Error: A toolbar requires a name";if(d[a.name])throw'textAngular Error: A toolbar with name "'+a.name+'" already exists';d[a.name]=a,angular.forEach(e,function(b){b._registerToolbar(a)})},retrieveToolbar:function(a){return d[a]},retrieveToolbarsViaEditor:function(a){var b=[],c=this;return angular.forEach(this.retrieveEditor(a).toolbars,function(a){b.push(c.retrieveToolbar(a))}),b},unregisterToolbar:function(a){delete d[a]},updateToolsDisplay:function(a){var b=this;angular.forEach(a,function(a,c){b.updateToolDisplay(c,a)})},resetToolsDisplay:function(){var a=this;angular.forEach(b,function(b,c){a.resetToolDisplay(c)})},updateToolDisplay:function(a,b){var c=this;angular.forEach(d,function(d,e){c.updateToolbarToolDisplay(e,a,b)})},resetToolDisplay:function(a){var b=this;angular.forEach(d,function(c,d){b.resetToolbarToolDisplay(d,a)})},updateToolbarToolDisplay:function(a,b,c){if(!d[a])throw'textAngular Error: No Toolbar with name "'+a+'" exists';d[a].updateToolDisplay(b,c)},resetToolbarToolDisplay:function(a,c){if(!d[a])throw'textAngular Error: No Toolbar with name "'+a+'" exists';d[a].updateToolDisplay(c,b[c],!0)},removeTool:function(a){delete b[a],angular.forEach(d,function(b){delete b.tools[a];for(var c=0;c<b.toolbar.length;c++){for(var d,e=0;e<b.toolbar[c].length;e++){if(b.toolbar[c][e]===a){d={group:c,index:e};break}if(void 0!==d)break}void 0!==d&&(b.toolbar[d.group].slice(d.index,1),b._$element.children().eq(d.group).children().eq(d.index).remove())}})},addTool:function(a,b,e,f){c(a,b),angular.forEach(d,function(c){c.addTool(a,b,e,f)})},addToolToToolbar:function(a,b,e,f,g){c(a,b),d[e].addTool(a,b,f,g)},refreshEditor:function(a){if(!e[a])throw'textAngular Error: No Editor with name "'+a+'" exists';e[a].scope.updateTaBindtaTextElement(),e[a].scope.$$phase||e[a].scope.$digest()},sendKeyCommand:function(a,b){var c=e[a._name];return c&&c.editorFunctions.sendKeyCommand(b)?(a._bUpdateSelectedStyles||a.updateSelectedStyles(),b.preventDefault(),!1):void 0}}}]),q.directive("textAngularToolbar",["$compile","textAngularManager","taOptions","taTools","taToolExecuteAction","$window",function(a,b,c,d,e,f){return{scope:{name:"@"},restrict:"EA",link:function(g,h,i){if(!g.name||""===g.name)throw"textAngular Error: A toolbar requires a name";angular.extend(g,angular.copy(c)),i.taToolbar&&(g.toolbar=g.$parent.$eval(i.taToolbar)),i.taToolbarClass&&(g.classes.toolbar=i.taToolbarClass),i.taToolbarGroupClass&&(g.classes.toolbarGroup=i.taToolbarGroupClass),i.taToolbarButtonClass&&(g.classes.toolbarButton=i.taToolbarButtonClass),i.taToolbarActiveButtonClass&&(g.classes.toolbarButtonActive=i.taToolbarActiveButtonClass),i.taFocussedClass&&(g.classes.focussed=i.taFocussedClass),g.disabled=!0,g.focussed=!1,g._$element=h,h[0].innerHTML="",h.addClass("ta-toolbar "+g.classes.toolbar),g.$watch("focussed",function(){g.focussed?h.addClass(g.classes.focussed):h.removeClass(g.classes.focussed)});var j=function(b,c){var d;if(d=b&&b.display?angular.element(b.display):angular.element("<button type='button'>"),b&&b.class?d.addClass(b.class):d.addClass(g.classes.toolbarButton),d.attr("name",c.name),d.attr("ta-button","ta-button"),d.attr("ng-disabled","isDisabled()"),d.attr("tabindex","-1"),d.attr("ng-click","executeAction()"),d.attr("ng-class","displayActiveToolClass(active)"),b&&b.tooltiptext&&d.attr("title",b.tooltiptext),b&&!b.display&&!c._display&&(d[0].innerHTML="",b.buttontext&&(d[0].innerHTML=b.buttontext),b.iconclass)){var e=angular.element("<i>"),f=d[0].innerHTML;e.addClass(b.iconclass),d[0].innerHTML="",d.append(e),f&&""!==f&&d.append("&nbsp;"+f)}return c._lastToolDefinition=angular.copy(b),a(d)(c)};g.tools={},g._parent={disabled:!0,showHtml:!1,queryFormatBlockState:function(){return!1},queryCommandState:function(){return!1}};var k={$window:f,$editor:function(){return g._parent},isDisabled:function(){return"function"!=typeof this.$eval("disabled")&&this.$eval("disabled")||this.$eval("disabled()")||"html"!==this.name&&this.$editor().showHtml||this.$parent.disabled||this.$editor().disabled},displayActiveToolClass:function(a){return a?g.classes.toolbarButtonActive:""},executeAction:e};angular.forEach(g.toolbar,function(a){var b=angular.element("<div>");b.addClass(g.classes.toolbarGroup),angular.forEach(a,function(a){g.tools[a]=angular.extend(g.$new(!0),d[a],k,{name:a}),g.tools[a].$element=j(d[a],g.tools[a]),b.append(g.tools[a].$element)}),h.append(b)}),g.updateToolDisplay=function(a,b,c){var d=g.tools[a];if(d){if(d._lastToolDefinition&&!c&&(b=angular.extend({},d._lastToolDefinition,b)),null===b.buttontext&&null===b.iconclass&&null===b.display)throw'textAngular Error: Tool Definition for updating "'+a+'" does not have a valid display/iconclass/buttontext value';null===b.buttontext&&delete b.buttontext,null===b.iconclass&&delete b.iconclass,null===b.display&&delete b.display;var e=j(b,d);d.$element.replaceWith(e),d.$element=e}},g.addTool=function(a,b,c,e){g.tools[a]=angular.extend(g.$new(!0),d[a],k,{name:a}),g.tools[a].$element=j(d[a],g.tools[a]);var f;void 0===c&&(c=g.toolbar.length-1),f=angular.element(h.children()[c]),void 0===e?(f.append(g.tools[a].$element),g.toolbar[c][g.toolbar[c].length-1]=a):(f.children().eq(e).after(g.tools[a].$element),g.toolbar[c][e]=a)},b.registerToolbar(g),g.$on("$destroy",function(){b.unregisterToolbar(g.name)})}}}])}()}({},function(){return this}()),angular.module("pageslide-directive",[]).directive("pageslide",["$document","$timeout",function($document,$timeout){return{restrict:"EAC",transclude:!1,scope:{psOpen:"=?",psAutoClose:"=?",psSide:"@",psSpeed:"@",psClass:"@",psSize:"@",psSqueeze:"@",psCloak:"@",psPush:"@",psContainer:"@",psKeyListener:"@",psBodyClass:"@"},link:function($scope,el,attrs){function setBodyClass(value){if(param.bodyClass){var bodyClass=param.className[param.className.length-1]+"-body",bodyClassRe=new RegExp(" "+bodyClass+"-closed| "+bodyClass+"-open|"+bodyClass+"-closed|"+bodyClass+"-open/g");body.className=body.className.replace(bodyClassRe,""),body.className?body.className.indexOf(bodyClass+"-"+value)<0&&(body.className+=" "+bodyClass+"-"+value):body.className+=" "+bodyClass+"-"+value}}function psClose(slider,param){if(slider&&0!==slider.style.width)switch(param.cloak&&content.css("display","none"),param.side){case"right":slider.style.width="0px",param.squeeze&&(body.style.right="0px"),param.push&&(body.style.right="0px",body.style.left="0px");break;case"left":slider.style.width="0px",param.squeeze&&(body.style.left="0px"),param.push&&(body.style.left="0px",body.style.right="0px");break;case"top":slider.style.height="0px",param.squeeze&&(body.style.top="0px"),param.push&&(body.style.top="0px",body.style.bottom="0px");break;case"bottom":slider.style.height="0px",param.squeeze&&(body.style.bottom="0px"),param.push&&(body.style.bottom="0px",body.style.top="0px")}$scope.psOpen=!1,param.keyListener&&$document.off("keydown",keyListener),setBodyClass("closed")}function psOpen(slider,param){if(0!==slider.style.width){switch(param.side){case"right":slider.style.width=param.size,param.squeeze&&(body.style.right=param.size),param.push&&(body.style.right=param.size,body.style.left="-"+param.size);break;case"left":slider.style.width=param.size,param.squeeze&&(body.style.left=param.size),param.push&&(body.style.left=param.size,body.style.right="-"+param.size);break;case"top":slider.style.height=param.size,param.squeeze&&(body.style.top=param.size),param.push&&(body.style.top=param.size,body.style.bottom="-"+param.size);break;case"bottom":slider.style.height=param.size,param.squeeze&&(body.style.bottom=param.size),param.push&&(body.style.bottom=param.size,body.style.top="-"+param.size)}$timeout(function(){param.cloak&&content.css("display","block")},1e3*param.speed),$scope.psOpen=!0,param.keyListener&&$document.on("keydown",keyListener),setBodyClass("open")}}function keyListener(e){27===(e.keyCode||e.which)&&psClose(slider,param)}var param={};param.side=$scope.psSide||"right",param.speed=$scope.psSpeed||"0.5",param.size=$scope.psSize||"300px",param.zindex=1e3,param.className=$scope.psClass||"ng-pageslide",param.cloak=!$scope.psCloak||"false"!=$scope.psCloak.toLowerCase(),param.squeeze=Boolean($scope.psSqueeze)||!1,param.push=Boolean($scope.psPush)||!1,param.container=$scope.psContainer||!1,param.keyListener=Boolean($scope.psKeyListener)||!1,param.bodyClass=$scope.psBodyClass||!1,param.className=param.className.split(" "),param.className.forEach(function(cl){el.addClass(cl)});var content=null,slider=null,body=param.container?document.getElementById(param.container):document.body;if(setBodyClass("closed"),slider=el[0],"div"!==slider.tagName.toLowerCase()&&"pageslide"!==slider.tagName.toLowerCase())throw new Error("Pageslide can only be applied to <div> or <pageslide> elements");if(0===slider.children.length)throw new Error("You have to content inside the <pageslide>");switch(content=angular.element(slider.children),body.appendChild(slider),slider.style.zIndex=param.zindex,slider.style.position=param.container!==!1?"absolute":"fixed",slider.style.width=0,slider.style.height=0,slider.style.overflow="auto",slider.style.transitionDuration=param.speed+"s",slider.style.webkitTransitionDuration=param.speed+"s",slider.style.transitionProperty="width, height",param.squeeze&&(body.style.position="absolute",body.style.transitionDuration=param.speed+"s",body.style.webkitTransitionDuration=param.speed+"s",body.style.transitionProperty="top, bottom, left, right"),param.side){case"right":slider.style.height=attrs.psCustomHeight||"100%",slider.style.top=attrs.psCustomTop||"0px",slider.style.bottom=attrs.psCustomBottom||"0px",slider.style.right=attrs.psCustomRight||"0px";break;case"left":slider.style.height=attrs.psCustomHeight||"100%",slider.style.top=attrs.psCustomTop||"0px",slider.style.bottom=attrs.psCustomBottom||"0px",slider.style.left=attrs.psCustomLeft||"0px";break;case"top":slider.style.width=attrs.psCustomWidth||"100%",slider.style.left=attrs.psCustomLeft||"0px",slider.style.top=attrs.psCustomTop||"0px",slider.style.right=attrs.psCustomRight||"0px";break;case"bottom":slider.style.width=attrs.psCustomWidth||"100%",slider.style.bottom=attrs.psCustomBottom||"0px",slider.style.left=attrs.psCustomLeft||"0px",slider.style.right=attrs.psCustomRight||"0px"}$scope.$watch("psOpen",function(value){value?psOpen(slider,param):psClose(slider,param)}),$scope.$watch("psSize",function(newValue,oldValue){oldValue!==newValue&&(param.size=newValue,psOpen(slider,param))}),$scope.$on("$destroy",function(){body.removeChild(slider)}),$scope.psAutoClose&&($scope.$on("$locationChangeStart",function(){psClose(slider,param)}),$scope.$on("$stateChangeStart",function(){psClose(slider,param)}))}}}]),function(){"use strict";function clickOutside($document,$parse,$timeout){return{restrict:"A",link:function($scope,elem,attr){$timeout(function(){function eventHandler(e){if(e&&e.target&&("pac-matched"==e.target.className||"pac-item-query"==e.target.className||"pac-item"==e.target.className||"pac-icon"==e.target.className||"pac-container"==e.target.className||"pac-icon-marker"==e.target.className||"pac-logo"==e.target.className||"pac-matched"==e.target.className))return void event.stopPropagation();var i,element,r,id,classNames,l;if(!angular.element(elem).hasClass("ng-hide")&&e&&e.target){for(element=e.target;element;element=element.parentNode){if(element===elem[0])return;if(id=element.id,classNames=element.className,l=classList.length,classNames&&void 0!==classNames.baseVal&&(classNames=classNames.baseVal),classNames||id)for(i=0;i<l;i++)if(r=new RegExp("\\b"+classList[i]+"\\b"),void 0!==id&&id===classList[i]||classNames&&r.test(classNames))return}$timeout(function(){(fn=$parse(attr.clickOutside))($scope,{event:e})})}}function _hasTouch(){return"ontouchstart"in window||navigator.maxTouchPoints}var fn,classList=void 0!==attr.outsideIfNot?attr.outsideIfNot.split(/[ ,]+/):[];_hasTouch()&&$document.on("touchstart",eventHandler),$document.on("click",eventHandler),$scope.$on("$destroy",function(){_hasTouch()&&$document.off("touchstart",eventHandler),$document.off("click",eventHandler)})})}}}angular.module("angular-click-outside",[]).directive("clickOutside",["$document","$parse","$timeout",clickOutside])}(),function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["angular"],b);else if("object"==typeof module&&module.exports){var c=angular||require("angular");c&&c.module||"undefined"==typeof angular||(c=angular),module.exports=b(c)}else b(a.angular)}(this,function(a){"use strict";var b=a.module("rzModule",[]).factory("RzSliderOptions",function(){var b={floor:0,ceil:null,step:1,precision:0,minRange:null,maxRange:null,pushRange:!1,minLimit:null,maxLimit:null,id:null,translate:null,getLegend:null,stepsArray:null,bindIndexForStepsArray:!1,draggableRange:!1,draggableRangeOnly:!1,showSelectionBar:!1,showSelectionBarEnd:!1,showSelectionBarFromValue:null,hidePointerLabels:!1,hideLimitLabels:!1,autoHideLimitLabels:!0,readOnly:!1,disabled:!1,interval:350,showTicks:!1,showTicksValues:!1,ticksArray:null,ticksTooltip:null,ticksValuesTooltip:null,vertical:!1,getSelectionBarColor:null,getTickColor:null,getPointerColor:null,keyboardSupport:!0,scale:1,enforceStep:!0,enforceRange:!1,noSwitching:!1,onlyBindHandles:!1,onStart:null,onChange:null,onEnd:null,rightToLeft:!1,boundPointerLabels:!0,mergeRangeLabelsIfSame:!1,customTemplateScope:null,logScale:!1,customValueToPosition:null,customPositionToValue:null,selectionBarGradient:null},c={},d={};return d.options=function(b){a.extend(c,b)},d.getOptions=function(d){return a.extend({},b,c,d)},d}).factory("rzThrottle",["$timeout",function(a){return function(b,c,d){var e,f,g,h=Date.now||function(){return(new Date).getTime()},i=null,j=0;d=d||{};var k=function(){j=h(),i=null,g=b.apply(e,f),e=f=null};return function(){var l=h(),m=c-(l-j);return e=this,f=arguments,0>=m?(a.cancel(i),i=null,j=l,g=b.apply(e,f),e=f=null):i||d.trailing===!1||(i=a(k,m)),g}}}]).factory("RzSlider",["$timeout","$document","$window","$compile","RzSliderOptions","rzThrottle",function(b,c,d,e,f,g){var h=function(a,b){this.scope=a,this.lowValue=0,this.highValue=0,this.sliderElem=b,this.range=void 0!==this.scope.rzSliderModel&&void 0!==this.scope.rzSliderHigh,this.dragging={active:!1,value:0,difference:0,position:0,lowLimit:0,highLimit:0},this.positionProperty="left",this.dimensionProperty="width",this.handleHalfDim=0,this.maxPos=0,this.precision=0,this.step=1,this.tracking="",this.minValue=0,this.maxValue=0,this.valueRange=0,this.intermediateTicks=!1,this.initHasRun=!1,this.firstKeyDown=!1,this.internalChange=!1,this.cmbLabelShown=!1,this.currentFocusElement=null,this.fullBar=null,this.selBar=null,this.minH=null,this.maxH=null,this.flrLab=null,this.ceilLab=null,this.minLab=null,this.maxLab=null,this.cmbLab=null,this.ticks=null,this.init()};return h.prototype={init:function(){var b,c,e=this,f=function(){e.calcViewDimensions()};this.applyOptions(),this.syncLowValue(),this.range&&this.syncHighValue(),this.initElemHandles(),this.manageElementsStyle(),this.setDisabledState(),this.calcViewDimensions(),this.setMinAndMax(),this.addAccessibility(),this.updateCeilLab(),this.updateFloorLab(),this.initHandles(),this.manageEventsBindings(),this.scope.$on("reCalcViewDimensions",f),a.element(d).on("resize",f),this.initHasRun=!0,b=g(function(){e.onLowHandleChange()},e.options.interval),c=g(function(){e.onHighHandleChange()},e.options.interval),this.scope.$on("rzSliderForceRender",function(){e.resetLabelsValue(),b(),e.range&&c(),e.resetSlider()}),this.scope.$watch("rzSliderOptions()",function(a,b){a!==b&&(e.applyOptions(),e.syncLowValue(),e.range&&e.syncHighValue(),e.resetSlider())},!0),this.scope.$watch("rzSliderModel",function(a,c){e.internalChange||a!==c&&b()}),this.scope.$watch("rzSliderHigh",function(a,b){e.internalChange||a!==b&&(null!=a&&c(),(e.range&&null==a||!e.range&&null!=a)&&(e.applyOptions(),e.resetSlider()))}),this.scope.$on("$destroy",function(){e.unbindEvents(),a.element(d).off("resize",f),e.currentFocusElement=null})},findStepIndex:function(b){for(var c=0,d=0;d<this.options.stepsArray.length;d++){var e=this.options.stepsArray[d];if(e===b){c=d;break}if(a.isDate(e)){if(e.getTime()===b.getTime()){c=d;break}}else if(a.isObject(e)&&(a.isDate(e.value)&&e.value.getTime()===b.getTime()||e.value===b)){c=d;break}}return c},syncLowValue:function(){this.options.stepsArray?this.options.bindIndexForStepsArray?this.lowValue=this.scope.rzSliderModel:this.lowValue=this.findStepIndex(this.scope.rzSliderModel):this.lowValue=this.scope.rzSliderModel},syncHighValue:function(){this.options.stepsArray?this.options.bindIndexForStepsArray?this.highValue=this.scope.rzSliderHigh:this.highValue=this.findStepIndex(this.scope.rzSliderHigh):this.highValue=this.scope.rzSliderHigh},getStepValue:function(b){var c=this.options.stepsArray[b];return a.isDate(c)?c:a.isObject(c)?c.value:c},applyLowValue:function(){this.options.stepsArray?this.options.bindIndexForStepsArray?this.scope.rzSliderModel=this.lowValue:this.scope.rzSliderModel=this.getStepValue(this.lowValue):this.scope.rzSliderModel=this.lowValue},applyHighValue:function(){this.options.stepsArray?this.options.bindIndexForStepsArray?this.scope.rzSliderHigh=this.highValue:this.scope.rzSliderHigh=this.getStepValue(this.highValue):this.scope.rzSliderHigh=this.highValue},onLowHandleChange:function(){this.syncLowValue(),this.range&&this.syncHighValue(),this.setMinAndMax(),this.updateLowHandle(this.valueToPosition(this.lowValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateAriaAttributes(),this.range&&this.updateCmbLabel()},onHighHandleChange:function(){this.syncLowValue(),this.syncHighValue(),this.setMinAndMax(),this.updateHighHandle(this.valueToPosition(this.highValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateCmbLabel(),this.updateAriaAttributes()},applyOptions:function(){var b;b=this.scope.rzSliderOptions?this.scope.rzSliderOptions():{},this.options=f.getOptions(b),this.options.step<=0&&(this.options.step=1),this.range=void 0!==this.scope.rzSliderModel&&void 0!==this.scope.rzSliderHigh,this.options.draggableRange=this.range&&this.options.draggableRange,this.options.draggableRangeOnly=this.range&&this.options.draggableRangeOnly,this.options.draggableRangeOnly&&(this.options.draggableRange=!0),this.options.showTicks=this.options.showTicks||this.options.showTicksValues||!!this.options.ticksArray,this.scope.showTicks=this.options.showTicks,(a.isNumber(this.options.showTicks)||this.options.ticksArray)&&(this.intermediateTicks=!0),this.options.showSelectionBar=this.options.showSelectionBar||this.options.showSelectionBarEnd||null!==this.options.showSelectionBarFromValue,this.options.stepsArray?this.parseStepsArray():(this.options.translate?this.customTrFn=this.options.translate:this.customTrFn=function(a){return String(a)},this.getLegend=this.options.getLegend),this.options.vertical&&(this.positionProperty="bottom",this.dimensionProperty="height"),this.options.customTemplateScope&&(this.scope.custom=this.options.customTemplateScope)},parseStepsArray:function(){this.options.floor=0,this.options.ceil=this.options.stepsArray.length-1,this.options.step=1,this.options.translate?this.customTrFn=this.options.translate:this.customTrFn=function(a){return this.options.bindIndexForStepsArray?this.getStepValue(a):a},this.getLegend=function(b){var c=this.options.stepsArray[b];return a.isObject(c)?c.legend:null}},resetSlider:function(){this.manageElementsStyle(),this.addAccessibility(),this.setMinAndMax(),this.updateCeilLab(),this.updateFloorLab(),this.unbindEvents(),this.manageEventsBindings(),this.setDisabledState(),this.calcViewDimensions(),this.refocusPointerIfNeeded()},refocusPointerIfNeeded:function(){this.currentFocusElement&&(this.onPointerFocus(this.currentFocusElement.pointer,this.currentFocusElement.ref),this.focusElement(this.currentFocusElement.pointer))},initElemHandles:function(){a.forEach(this.sliderElem.children(),function(b,c){var d=a.element(b);switch(c){case 0:this.fullBar=d;break;case 1:this.selBar=d;break;case 2:this.minH=d;break;case 3:this.maxH=d;break;case 4:this.flrLab=d;break;case 5:this.ceilLab=d;break;case 6:this.minLab=d;break;case 7:this.maxLab=d;break;case 8:this.cmbLab=d;break;case 9:this.ticks=d}},this),this.selBar.rzsp=0,this.minH.rzsp=0,this.maxH.rzsp=0,this.flrLab.rzsp=0,this.ceilLab.rzsp=0,this.minLab.rzsp=0,this.maxLab.rzsp=0,this.cmbLab.rzsp=0},manageElementsStyle:function(){this.range?this.maxH.css("display",""):this.maxH.css("display","none"),this.alwaysHide(this.flrLab,this.options.showTicksValues||this.options.hideLimitLabels),this.alwaysHide(this.ceilLab,this.options.showTicksValues||this.options.hideLimitLabels);var a=this.options.showTicksValues&&!this.intermediateTicks;this.alwaysHide(this.minLab,a||this.options.hidePointerLabels),this.alwaysHide(this.maxLab,a||!this.range||this.options.hidePointerLabels),this.alwaysHide(this.cmbLab,a||!this.range||this.options.hidePointerLabels),this.alwaysHide(this.selBar,!this.range&&!this.options.showSelectionBar),this.options.vertical&&this.sliderElem.addClass("rz-vertical"),this.options.draggableRange?this.selBar.addClass("rz-draggable"):this.selBar.removeClass("rz-draggable"),this.intermediateTicks&&this.options.showTicksValues&&this.ticks.addClass("rz-ticks-values-under")},alwaysHide:function(a,b){a.rzAlwaysHide=b,b?this.hideEl(a):this.showEl(a)},manageEventsBindings:function(){this.options.disabled||this.options.readOnly?this.unbindEvents():this.bindEvents()},setDisabledState:function(){this.options.disabled?this.sliderElem.attr("disabled","disabled"):this.sliderElem.attr("disabled",null)},resetLabelsValue:function(){this.minLab.rzsv=void 0,this.maxLab.rzsv=void 0},initHandles:function(){this.updateLowHandle(this.valueToPosition(this.lowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.highValue)),this.updateSelectionBar(),this.range&&this.updateCmbLabel(),this.updateTicksScale()},translateFn:function(a,b,c,d){d=void 0===d||d;var e="",f=!1,g=b.hasClass("no-label-injection");d?(this.options.stepsArray&&!this.options.bindIndexForStepsArray&&(a=this.getStepValue(a)),e=String(this.customTrFn(a,this.options.id,c))):e=String(a),(void 0===b.rzsv||b.rzsv.length!==e.length||b.rzsv.length>0&&0===b.rzsd)&&(f=!0,b.rzsv=e),g||b.html(e),this.scope[c+"Label"]=e,f&&this.getDimension(b)},setMinAndMax:function(){if(this.step=+this.options.step,this.precision=+this.options.precision,this.minValue=this.options.floor,this.options.logScale&&0===this.minValue)throw Error("Can't use floor=0 with logarithmic scale");this.options.enforceStep&&(this.lowValue=this.roundStep(this.lowValue),this.range&&(this.highValue=this.roundStep(this.highValue))),null!=this.options.ceil?this.maxValue=this.options.ceil:this.maxValue=this.options.ceil=this.range?this.highValue:this.lowValue,this.options.enforceRange&&(this.lowValue=this.sanitizeValue(this.lowValue),this.range&&(this.highValue=this.sanitizeValue(this.highValue))),this.applyLowValue(),this.range&&this.applyHighValue(),this.valueRange=this.maxValue-this.minValue},addAccessibility:function(){this.minH.attr("role","slider"),this.updateAriaAttributes(),!this.options.keyboardSupport||this.options.readOnly||this.options.disabled?this.minH.attr("tabindex",""):this.minH.attr("tabindex","0"),this.options.vertical&&this.minH.attr("aria-orientation","vertical"),this.range&&(this.maxH.attr("role","slider"),!this.options.keyboardSupport||this.options.readOnly||this.options.disabled?this.maxH.attr("tabindex",""):this.maxH.attr("tabindex","0"),this.options.vertical&&this.maxH.attr("aria-orientation","vertical"))},updateAriaAttributes:function(){this.minH.attr({"aria-valuenow":this.scope.rzSliderModel,"aria-valuetext":this.customTrFn(this.scope.rzSliderModel,this.options.id,"model"),"aria-valuemin":this.minValue,"aria-valuemax":this.maxValue}),this.range&&this.maxH.attr({"aria-valuenow":this.scope.rzSliderHigh,"aria-valuetext":this.customTrFn(this.scope.rzSliderHigh,this.options.id,"high"),"aria-valuemin":this.minValue,"aria-valuemax":this.maxValue})},calcViewDimensions:function(){var a=this.getDimension(this.minH);if(this.handleHalfDim=a/2,this.barDimension=this.getDimension(this.fullBar),this.maxPos=this.barDimension-a,this.getDimension(this.sliderElem),this.sliderElem.rzsp=this.sliderElem[0].getBoundingClientRect()[this.positionProperty],this.initHasRun){this.updateFloorLab(),this.updateCeilLab(),this.initHandles();var c=this;b(function(){c.updateTicksScale()})}},updateTicksScale:function(){if(this.options.showTicks){var a=this.options.ticksArray||this.getTicksArray(),b=this.options.vertical?"translateY":"translateX",c=this;this.options.rightToLeft&&a.reverse(),this.scope.ticks=a.map(function(a){var d=c.valueToPosition(a);c.options.vertical&&(d=c.maxPos-d);var e={selected:c.isTickSelected(a),style:{transform:b+"("+Math.round(d)+"px)"}};if(e.selected&&c.options.getSelectionBarColor&&(e.style["background-color"]=c.getSelectionBarColor()),!e.selected&&c.options.getTickColor&&(e.style["background-color"]=c.getTickColor(a)),c.options.ticksTooltip&&(e.tooltip=c.options.ticksTooltip(a),e.tooltipPlacement=c.options.vertical?"right":"top"),c.options.showTicksValues&&(e.value=c.getDisplayValue(a,"tick-value"),c.options.ticksValuesTooltip&&(e.valueTooltip=c.options.ticksValuesTooltip(a),e.valueTooltipPlacement=c.options.vertical?"right":"top")),c.getLegend){var f=c.getLegend(a,c.options.id);f&&(e.legend=f)}return e})}},getTicksArray:function(){var a=this.step,b=[];this.intermediateTicks&&(a=this.options.showTicks);for(var c=this.minValue;c<=this.maxValue;c+=a)b.push(c);return b},isTickSelected:function(a){if(!this.range)if(null!==this.options.showSelectionBarFromValue){var b=this.options.showSelectionBarFromValue;if(this.lowValue>b&&a>=b&&a<=this.lowValue)return!0;if(this.lowValue<b&&b>=a&&a>=this.lowValue)return!0
}else if(this.options.showSelectionBarEnd){if(a>=this.lowValue)return!0}else if(this.options.showSelectionBar&&a<=this.lowValue)return!0;return!!(this.range&&a>=this.lowValue&&a<=this.highValue)},updateFloorLab:function(){this.translateFn(this.minValue,this.flrLab,"floor"),this.getDimension(this.flrLab);var a=this.options.rightToLeft?this.barDimension-this.flrLab.rzsd:0;this.setPosition(this.flrLab,a)},updateCeilLab:function(){this.translateFn(this.maxValue,this.ceilLab,"ceil"),this.getDimension(this.ceilLab);var a=this.options.rightToLeft?0:this.barDimension-this.ceilLab.rzsd;this.setPosition(this.ceilLab,a)},updateHandles:function(a,b){"lowValue"===a?this.updateLowHandle(b):this.updateHighHandle(b),this.updateSelectionBar(),this.updateTicksScale(),this.range&&this.updateCmbLabel()},getHandleLabelPos:function(a,b){var c=this[a].rzsd,d=b-c/2+this.handleHalfDim,e=this.barDimension-c;return this.options.boundPointerLabels?this.options.rightToLeft&&"minLab"===a||!this.options.rightToLeft&&"maxLab"===a?Math.min(d,e):Math.min(Math.max(d,0),e):d},updateLowHandle:function(a){if(this.setPosition(this.minH,a),this.translateFn(this.lowValue,this.minLab,"model"),this.setPosition(this.minLab,this.getHandleLabelPos("minLab",a)),this.options.getPointerColor){var b=this.getPointerColor("min");this.scope.minPointerStyle={backgroundColor:b}}this.options.autoHideLimitLabels&&this.shFloorCeil()},updateHighHandle:function(a){if(this.setPosition(this.maxH,a),this.translateFn(this.highValue,this.maxLab,"high"),this.setPosition(this.maxLab,this.getHandleLabelPos("maxLab",a)),this.options.getPointerColor){var b=this.getPointerColor("max");this.scope.maxPointerStyle={backgroundColor:b}}this.options.autoHideLimitLabels&&this.shFloorCeil()},shFloorCeil:function(){if(!this.options.hidePointerLabels){var a=!1,b=!1,c=this.isLabelBelowFloorLab(this.minLab),d=this.isLabelAboveCeilLab(this.minLab),e=this.isLabelAboveCeilLab(this.maxLab),f=this.isLabelBelowFloorLab(this.cmbLab),g=this.isLabelAboveCeilLab(this.cmbLab);if(c?(a=!0,this.hideEl(this.flrLab)):(a=!1,this.showEl(this.flrLab)),d?(b=!0,this.hideEl(this.ceilLab)):(b=!1,this.showEl(this.ceilLab)),this.range){var h=this.cmbLabelShown?g:e,i=this.cmbLabelShown?f:c;h?this.hideEl(this.ceilLab):b||this.showEl(this.ceilLab),i?this.hideEl(this.flrLab):a||this.showEl(this.flrLab)}}},isLabelBelowFloorLab:function(a){var b=this.options.rightToLeft,c=a.rzsp,d=a.rzsd,e=this.flrLab.rzsp,f=this.flrLab.rzsd;return b?c+d>=e-2:e+f+2>=c},isLabelAboveCeilLab:function(a){var b=this.options.rightToLeft,c=a.rzsp,d=a.rzsd,e=this.ceilLab.rzsp,f=this.ceilLab.rzsd;return b?e+f+2>=c:c+d>=e-2},updateSelectionBar:function(){var a=0,b=0,c=this.options.rightToLeft?!this.options.showSelectionBarEnd:this.options.showSelectionBarEnd,d=this.options.rightToLeft?this.maxH.rzsp+this.handleHalfDim:this.minH.rzsp+this.handleHalfDim;if(this.range)b=Math.abs(this.maxH.rzsp-this.minH.rzsp),a=d;else if(null!==this.options.showSelectionBarFromValue){var e=this.options.showSelectionBarFromValue,f=this.valueToPosition(e),g=this.options.rightToLeft?this.lowValue<=e:this.lowValue>e;g?(b=this.minH.rzsp-f,a=f+this.handleHalfDim):(b=f-this.minH.rzsp,a=this.minH.rzsp+this.handleHalfDim)}else c?(b=Math.abs(this.maxPos-this.minH.rzsp)+this.handleHalfDim,a=this.minH.rzsp+this.handleHalfDim):(b=Math.abs(this.maxH.rzsp-this.minH.rzsp)+this.handleHalfDim,a=0);if(this.setDimension(this.selBar,b),this.setPosition(this.selBar,a),this.options.getSelectionBarColor){var h=this.getSelectionBarColor();this.scope.barStyle={backgroundColor:h}}else if(this.options.selectionBarGradient){var i=null!==this.options.showSelectionBarFromValue?this.valueToPosition(this.options.showSelectionBarFromValue):0,j=i-a>0^c,k=this.options.vertical?j?"bottom":"top":j?"left":"right";this.scope.barStyle={backgroundImage:"linear-gradient(to "+k+", "+this.options.selectionBarGradient.from+" 0%,"+this.options.selectionBarGradient.to+" 100%)"},this.options.vertical?(this.scope.barStyle.backgroundPosition="center "+(i+b+a+(j?-this.handleHalfDim:0))+"px",this.scope.barStyle.backgroundSize="100% "+(this.barDimension-this.handleHalfDim)+"px"):(this.scope.barStyle.backgroundPosition=i-a+(j?this.handleHalfDim:0)+"px center",this.scope.barStyle.backgroundSize=this.barDimension-this.handleHalfDim+"px 100%")}},getSelectionBarColor:function(){return this.range?this.options.getSelectionBarColor(this.scope.rzSliderModel,this.scope.rzSliderHigh):this.options.getSelectionBarColor(this.scope.rzSliderModel)},getPointerColor:function(a){return"max"===a?this.options.getPointerColor(this.scope.rzSliderHigh,a):this.options.getPointerColor(this.scope.rzSliderModel,a)},getTickColor:function(a){return this.options.getTickColor(a)},updateCmbLabel:function(){if(this.options.rightToLeft?this.minLab.rzsp-this.minLab.rzsd-10<=this.maxLab.rzsp:this.minLab.rzsp+this.minLab.rzsd+10>=this.maxLab.rzsp){var b=this.getDisplayValue(this.lowValue,"model"),c=this.getDisplayValue(this.highValue,"high"),d="";d=this.options.mergeRangeLabelsIfSame&&b===c?b:this.options.rightToLeft?c+" - "+b:b+" - "+c,this.translateFn(d,this.cmbLab,"cmb",!1);var e=this.options.boundPointerLabels?Math.min(Math.max(this.selBar.rzsp+this.selBar.rzsd/2-this.cmbLab.rzsd/2,0),this.barDimension-this.cmbLab.rzsd):this.selBar.rzsp+this.selBar.rzsd/2-this.cmbLab.rzsd/2;this.setPosition(this.cmbLab,e),this.cmbLabelShown=!0,this.hideEl(this.minLab),this.hideEl(this.maxLab),this.showEl(this.cmbLab)}else this.cmbLabelShown=!1,this.showEl(this.maxLab),this.showEl(this.minLab),this.hideEl(this.cmbLab);this.options.autoHideLimitLabels&&this.shFloorCeil()},getDisplayValue:function(a,b){return this.options.stepsArray&&!this.options.bindIndexForStepsArray&&(a=this.getStepValue(a)),this.customTrFn(a,this.options.id,b)},roundStep:function(a,b){var c=b?b:this.step,d=parseFloat((a-this.minValue)/c).toPrecision(12);return d=Math.round(+d)*c,+(this.minValue+d).toFixed(this.precision)},hideEl:function(a){return a.css({visibility:"hidden"})},showEl:function(a){return a.rzAlwaysHide?a:a.css({visibility:"visible"})},setPosition:function(a,b){a.rzsp=b;var c={};return c[this.positionProperty]=Math.round(b)+"px",a.css(c),b},getDimension:function(a){var b=a[0].getBoundingClientRect();return this.options.vertical?a.rzsd=(b.bottom-b.top)*this.options.scale:a.rzsd=(b.right-b.left)*this.options.scale,a.rzsd},setDimension:function(a,b){a.rzsd=b;var c={};return c[this.dimensionProperty]=Math.round(b)+"px",a.css(c),b},sanitizeValue:function(a){return Math.min(Math.max(a,this.minValue),this.maxValue)},valueToPosition:function(a){var b=this.linearValueToPosition;this.options.customValueToPosition?b=this.options.customValueToPosition:this.options.logScale&&(b=this.logValueToPosition),a=this.sanitizeValue(a);var c=b(a,this.minValue,this.maxValue)||0;return this.options.rightToLeft&&(c=1-c),c*this.maxPos},linearValueToPosition:function(a,b,c){return(a-b)/(c-b)},logValueToPosition:function(a,b,c){return a=Math.log(a),b=Math.log(b),c=Math.log(c),(a-b)/(c-b)},positionToValue:function(a){var b=a/this.maxPos;this.options.rightToLeft&&(b=1-b);var c=this.linearPositionToValue;return this.options.customPositionToValue?c=this.options.customPositionToValue:this.options.logScale&&(c=this.logPositionToValue),c(b,this.minValue,this.maxValue)||0},linearPositionToValue:function(a,b,c){return a*(c-b)+b},logPositionToValue:function(a,b,c){b=Math.log(b),c=Math.log(c);var d=a*(c-b)+b;return Math.exp(d)},getEventXY:function(a){var b=this.options.vertical?"clientY":"clientX";return void 0!==a[b]?a[b]:void 0===a.originalEvent?a.touches[0][b]:a.originalEvent.touches[0][b]},getEventPosition:function(a){var b=this.sliderElem.rzsp;return(this.options.vertical?-this.getEventXY(a)+b:this.getEventXY(a)-b)*this.options.scale-this.handleHalfDim},getEventNames:function(a){var b={moveEvent:"",endEvent:""};return a.touches||void 0!==a.originalEvent&&a.originalEvent.touches?(b.moveEvent="touchmove",b.endEvent="touchend"):(b.moveEvent="mousemove",b.endEvent="mouseup"),b},getNearestHandle:function(a){if(!this.range)return this.minH;var b=this.getEventPosition(a),c=Math.abs(b-this.minH.rzsp),d=Math.abs(b-this.maxH.rzsp);return d>c?this.minH:c>d?this.maxH:this.options.rightToLeft?b>this.minH.rzsp?this.minH:this.maxH:b<this.minH.rzsp?this.minH:this.maxH},focusElement:function(a){a[0].focus()},bindEvents:function(){var b,c,d;this.options.draggableRange?(b="rzSliderDrag",c=this.onDragStart,d=this.onDragMove):(b="lowValue",c=this.onStart,d=this.onMove),this.options.onlyBindHandles||(this.selBar.on("mousedown",a.bind(this,c,null,b)),this.selBar.on("mousedown",a.bind(this,d,this.selBar))),this.options.draggableRangeOnly?(this.minH.on("mousedown",a.bind(this,c,null,b)),this.maxH.on("mousedown",a.bind(this,c,null,b))):(this.minH.on("mousedown",a.bind(this,this.onStart,this.minH,"lowValue")),this.range&&this.maxH.on("mousedown",a.bind(this,this.onStart,this.maxH,"highValue")),this.options.onlyBindHandles||(this.fullBar.on("mousedown",a.bind(this,this.onStart,null,null)),this.fullBar.on("mousedown",a.bind(this,this.onMove,this.fullBar)),this.ticks.on("mousedown",a.bind(this,this.onStart,null,null)),this.ticks.on("mousedown",a.bind(this,this.onTickClick,this.ticks)))),this.options.onlyBindHandles||(this.selBar.on("touchstart",a.bind(this,c,null,b)),this.selBar.on("touchstart",a.bind(this,d,this.selBar))),this.options.draggableRangeOnly?(this.minH.on("touchstart",a.bind(this,c,null,b)),this.maxH.on("touchstart",a.bind(this,c,null,b))):(this.minH.on("touchstart",a.bind(this,this.onStart,this.minH,"lowValue")),this.range&&this.maxH.on("touchstart",a.bind(this,this.onStart,this.maxH,"highValue")),this.options.onlyBindHandles||(this.fullBar.on("touchstart",a.bind(this,this.onStart,null,null)),this.fullBar.on("touchstart",a.bind(this,this.onMove,this.fullBar)),this.ticks.on("touchstart",a.bind(this,this.onStart,null,null)),this.ticks.on("touchstart",a.bind(this,this.onTickClick,this.ticks)))),this.options.keyboardSupport&&(this.minH.on("focus",a.bind(this,this.onPointerFocus,this.minH,"lowValue")),this.range&&this.maxH.on("focus",a.bind(this,this.onPointerFocus,this.maxH,"highValue")))},unbindEvents:function(){this.minH.off(),this.maxH.off(),this.fullBar.off(),this.selBar.off(),this.ticks.off()},onStart:function(b,d,e){var f,g,h=this.getEventNames(e);e.stopPropagation(),e.preventDefault(),this.calcViewDimensions(),b?this.tracking=d:(b=this.getNearestHandle(e),this.tracking=b===this.minH?"lowValue":"highValue"),b.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(b),f=a.bind(this,this.dragging.active?this.onDragMove:this.onMove,b),g=a.bind(this,this.onEnd,f),c.on(h.moveEvent,f),c.one(h.endEvent,g),this.callOnStart()},onMove:function(b,c,d){var e,f=this.getEventPosition(c),g=this.options.rightToLeft?this.minValue:this.maxValue,h=this.options.rightToLeft?this.maxValue:this.minValue;0>=f?e=h:f>=this.maxPos?e=g:(e=this.positionToValue(f),e=d&&a.isNumber(this.options.showTicks)?this.roundStep(e,this.options.showTicks):this.roundStep(e)),this.positionTrackingHandle(e)},onEnd:function(a,b){var d=this.getEventNames(b).moveEvent;this.options.keyboardSupport||(this.minH.removeClass("rz-active"),this.maxH.removeClass("rz-active"),this.tracking=""),this.dragging.active=!1,c.off(d,a),this.callOnEnd()},onTickClick:function(a,b){this.onMove(a,b,!0)},onPointerFocus:function(b,c){this.tracking=c,b.one("blur",a.bind(this,this.onPointerBlur,b)),b.on("keydown",a.bind(this,this.onKeyboardEvent)),b.on("keyup",a.bind(this,this.onKeyUp)),this.firstKeyDown=!0,b.addClass("rz-active"),this.currentFocusElement={pointer:b,ref:c}},onKeyUp:function(){this.firstKeyDown=!0,this.callOnEnd()},onPointerBlur:function(a){a.off("keydown"),a.off("keyup"),this.tracking="",a.removeClass("rz-active"),this.currentFocusElement=null},getKeyActions:function(a){var b=a+this.step,c=a-this.step,d=a+this.valueRange/10,e=a-this.valueRange/10,f={UP:b,DOWN:c,LEFT:c,RIGHT:b,PAGEUP:d,PAGEDOWN:e,HOME:this.minValue,END:this.maxValue};return this.options.rightToLeft&&(f.LEFT=b,f.RIGHT=c,this.options.vertical&&(f.UP=c,f.DOWN=b)),f},onKeyboardEvent:function(a){var c=this[this.tracking],d=a.keyCode||a.which,e={38:"UP",40:"DOWN",37:"LEFT",39:"RIGHT",33:"PAGEUP",34:"PAGEDOWN",36:"HOME",35:"END"},f=this.getKeyActions(c),g=e[d],h=f[g];if(null!=h&&""!==this.tracking){a.preventDefault(),this.firstKeyDown&&(this.firstKeyDown=!1,this.callOnStart());var i=this;b(function(){var a=i.roundStep(i.sanitizeValue(h));if(i.options.draggableRangeOnly){var b,c,d=i.highValue-i.lowValue;"lowValue"===i.tracking?(b=a,(c=a+d)>i.maxValue&&(c=i.maxValue,b=c-d)):(c=a,(b=a-d)<i.minValue&&(b=i.minValue,c=b+d)),i.positionTrackingBar(b,c)}else i.positionTrackingHandle(a)})}},onDragStart:function(a,b,c){var d=this.getEventPosition(c);this.dragging={active:!0,value:this.positionToValue(d),difference:this.highValue-this.lowValue,lowLimit:this.options.rightToLeft?this.minH.rzsp-d:d-this.minH.rzsp,highLimit:this.options.rightToLeft?d-this.maxH.rzsp:this.maxH.rzsp-d},this.onStart(a,b,c)},getValue:function(a,b,c,d){var e=this.options.rightToLeft,f=null;return f="min"===a?c?d?e?this.minValue:this.maxValue-this.dragging.difference:e?this.maxValue-this.dragging.difference:this.minValue:e?this.positionToValue(b+this.dragging.lowLimit):this.positionToValue(b-this.dragging.lowLimit):c?d?e?this.minValue+this.dragging.difference:this.maxValue:e?this.maxValue:this.minValue+this.dragging.difference:e?this.positionToValue(b+this.dragging.lowLimit)+this.dragging.difference:this.positionToValue(b-this.dragging.lowLimit)+this.dragging.difference,this.roundStep(f)},onDragMove:function(a,b){var c,d,e,f,g,h,i,j,k=this.getEventPosition(b);if(this.options.rightToLeft?(e=this.dragging.lowLimit,f=this.dragging.highLimit,i=this.maxH,j=this.minH):(e=this.dragging.highLimit,f=this.dragging.lowLimit,i=this.minH,j=this.maxH),g=f>=k,h=k>=this.maxPos-e,g){if(0===i.rzsp)return;c=this.getValue("min",k,!0,!1),d=this.getValue("max",k,!0,!1)}else if(h){if(j.rzsp===this.maxPos)return;d=this.getValue("max",k,!0,!0),c=this.getValue("min",k,!0,!0)}else c=this.getValue("min",k,!1),d=this.getValue("max",k,!1);this.positionTrackingBar(c,d)},positionTrackingBar:function(a,b){null!=this.options.minLimit&&a<this.options.minLimit&&(a=this.options.minLimit,b=a+this.dragging.difference),null!=this.options.maxLimit&&b>this.options.maxLimit&&(b=this.options.maxLimit,a=b-this.dragging.difference),this.lowValue=a,this.highValue=b,this.applyLowValue(),this.range&&this.applyHighValue(),this.applyModel(!0),this.updateHandles("lowValue",this.valueToPosition(a)),this.updateHandles("highValue",this.valueToPosition(b))},positionTrackingHandle:function(a){var b=!1;a=this.applyMinMaxLimit(a),this.range&&(this.options.pushRange?(a=this.applyPushRange(a),b=!0):(this.options.noSwitching&&("lowValue"===this.tracking&&a>this.highValue?a=this.applyMinMaxRange(this.highValue):"highValue"===this.tracking&&a<this.lowValue&&(a=this.applyMinMaxRange(this.lowValue))),a=this.applyMinMaxRange(a),"lowValue"===this.tracking&&a>this.highValue?(this.lowValue=this.highValue,this.applyLowValue(),this.applyModel(),this.updateHandles(this.tracking,this.maxH.rzsp),this.updateAriaAttributes(),this.tracking="highValue",this.minH.removeClass("rz-active"),this.maxH.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(this.maxH),b=!0):"highValue"===this.tracking&&a<this.lowValue&&(this.highValue=this.lowValue,this.applyHighValue(),this.applyModel(),this.updateHandles(this.tracking,this.minH.rzsp),this.updateAriaAttributes(),this.tracking="lowValue",this.maxH.removeClass("rz-active"),this.minH.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(this.minH),b=!0))),this[this.tracking]!==a&&(this[this.tracking]=a,"lowValue"===this.tracking?this.applyLowValue():this.applyHighValue(),this.applyModel(),this.updateHandles(this.tracking,this.valueToPosition(a)),this.updateAriaAttributes(),b=!0),b&&this.applyModel(!0)},applyMinMaxLimit:function(a){return null!=this.options.minLimit&&a<this.options.minLimit?this.options.minLimit:null!=this.options.maxLimit&&a>this.options.maxLimit?this.options.maxLimit:a},applyMinMaxRange:function(a){var b="lowValue"===this.tracking?this.highValue:this.lowValue,c=Math.abs(a-b);return null!=this.options.minRange&&c<this.options.minRange?"lowValue"===this.tracking?this.highValue-this.options.minRange:this.lowValue+this.options.minRange:null!=this.options.maxRange&&c>this.options.maxRange?"lowValue"===this.tracking?this.highValue-this.options.maxRange:this.lowValue+this.options.maxRange:a},applyPushRange:function(a){var b="lowValue"===this.tracking?this.highValue-a:a-this.lowValue,c=null!==this.options.minRange?this.options.minRange:this.options.step,d=this.options.maxRange;return c>b?("lowValue"===this.tracking?(this.highValue=Math.min(a+c,this.maxValue),a=this.highValue-c,this.applyHighValue(),this.updateHandles("highValue",this.valueToPosition(this.highValue))):(this.lowValue=Math.max(a-c,this.minValue),a=this.lowValue+c,this.applyLowValue(),this.updateHandles("lowValue",this.valueToPosition(this.lowValue))),this.updateAriaAttributes()):null!==d&&b>d&&("lowValue"===this.tracking?(this.highValue=a+d,this.applyHighValue(),this.updateHandles("highValue",this.valueToPosition(this.highValue))):(this.lowValue=a-d,this.applyLowValue(),this.updateHandles("lowValue",this.valueToPosition(this.lowValue))),this.updateAriaAttributes()),a},applyModel:function(a){this.internalChange=!0,this.scope.$apply(),a&&this.callOnChange(),this.internalChange=!1},callOnStart:function(){if(this.options.onStart){var a=this,b="lowValue"===this.tracking?"min":"max";this.scope.$evalAsync(function(){a.options.onStart(a.options.id,a.scope.rzSliderModel,a.scope.rzSliderHigh,b)})}},callOnChange:function(){if(this.options.onChange){var a=this,b="lowValue"===this.tracking?"min":"max";this.scope.$evalAsync(function(){a.options.onChange(a.options.id,a.scope.rzSliderModel,a.scope.rzSliderHigh,b)})}},callOnEnd:function(){if(this.options.onEnd){var a=this,b="lowValue"===this.tracking?"min":"max";this.scope.$evalAsync(function(){a.options.onEnd(a.options.id,a.scope.rzSliderModel,a.scope.rzSliderHigh,b)})}this.scope.$emit("slideEnded")}},h}]).directive("rzslider",["RzSlider",function(a){return{restrict:"AE",replace:!0,scope:{rzSliderModel:"=?",rzSliderHigh:"=?",rzSliderOptions:"&?",rzSliderTplUrl:"@"},templateUrl:function(a,b){return b.rzSliderTplUrl||"rzSliderTpl.html"},link:function(b,c){b.slider=new a(b,c)}}}]);return b.run(["$templateCache",function(a){a.put("rzSliderTpl.html",'<div class=rzslider><span class=rz-bar-wrapper><span class=rz-bar></span></span> <span class=rz-bar-wrapper><span class="rz-bar rz-selection" ng-style=barStyle></span></span> <span class="rz-pointer rz-pointer-min" ng-style=minPointerStyle></span> <span class="rz-pointer rz-pointer-max" ng-style=maxPointerStyle></span> <span class="rz-bubble rz-limit rz-floor"></span> <span class="rz-bubble rz-limit rz-ceil"></span> <span class=rz-bubble></span> <span class=rz-bubble></span> <span class=rz-bubble></span><ul ng-show=showTicks class=rz-ticks><li ng-repeat="t in ticks track by $index" class=rz-tick ng-class="{\'rz-selected\': t.selected}" ng-style=t.style ng-attr-uib-tooltip="{{ t.tooltip }}" ng-attr-tooltip-placement={{t.tooltipPlacement}} ng-attr-tooltip-append-to-body="{{ t.tooltip ? true : undefined}}"><span ng-if="t.value != null" class=rz-tick-value ng-attr-uib-tooltip="{{ t.valueTooltip }}" ng-attr-tooltip-placement={{t.valueTooltipPlacement}}>{{ t.value }}</span> <span ng-if="t.legend != null" class=rz-tick-legend>{{ t.legend }}</span></li></ul></div>')}]),b.name}),function(){!function(){"use strict";function createCache(){function cache(key,value){return keys.push(key+" ")>Expr.cacheLength&&delete cache[keys.shift()],cache[key+" "]=value}var keys=[];return cache}function markFunction(fn){return fn[expando]=!0,fn}function siblingCheck(a,b){var cur=b&&a,diff=cur&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||MAX_NEGATIVE)-(~a.sourceIndex||MAX_NEGATIVE);if(diff)return diff;if(cur)for(;cur=cur.nextSibling;)if(cur===b)return-1;return a?1:-1}function createPositionalPseudo(fn){return markFunction(function(argument){return argument=+argument,markFunction(function(seed,matches){for(var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;i--;)seed[j=matchIndexes[i]]&&(seed[j]=!(matches[j]=seed[j]))})})}function testContext(context){return context&&typeof context.getElementsByTagName!==strundefined&&context}function setFilters(){}function toSelector(tokens){for(var i=0,len=tokens.length,selector="";i<len;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&"parentNode"===dir,doneName=done++;return combinator.first?function(elem,context,xml){for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)return matcher(elem,context,xml)}:function(elem,context,xml){var oldCache,outerCache,newCache=[dirruns,doneName];if(xml){for(;elem=elem[dir];)if((1===elem.nodeType||checkNonElements)&&matcher(elem,context,xml))return!0}else for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements){if(outerCache=elem[expando]||(elem[expando]={}),(oldCache=outerCache[dir])&&oldCache[0]===dirruns&&oldCache[1]===doneName)return newCache[2]=oldCache[2];if(outerCache[dir]=newCache,newCache[2]=matcher(elem,context,xml))return!0}}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){for(var i=matchers.length;i--;)if(!matchers[i](elem,context,xml))return!1;return!0}:matchers[0]}function multipleContexts(selector,contexts,results){for(var i=0,len=contexts.length;i<len;i++)Sizzle(selector,contexts[i],results);return results}function condense(unmatched,map,filter,context,xml){for(var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=null!=map;i<len;i++)(elem=unmatched[i])&&(filter&&!filter(elem,context,xml)||(newUnmatched.push(elem),mapped&&map.push(i)));return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){return postFilter&&!postFilter[expando]&&(postFilter=setMatcher(postFilter)),postFinder&&!postFinder[expando]&&(postFinder=setMatcher(postFinder,postSelector)),markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=!preFilter||!seed&&selector?elems:condense(elems,preMap,preFilter,context,xml),matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher&&matcher(matcherIn,matcherOut,context,xml),postFilter)for(temp=condense(matcherOut,postMap),postFilter(temp,[],context,xml),i=temp.length;i--;)(elem=temp[i])&&(matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem));if(seed){if(postFinder||preFilter){if(postFinder){for(temp=[],i=matcherOut.length;i--;)(elem=matcherOut[i])&&temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}for(i=matcherOut.length;i--;)(elem=matcherOut[i])&&(temp=postFinder?indexOf$1.call(seed,elem):preMap[i])>-1&&(seed[temp]=!(results[temp]=elem))}}else matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut),postFinder?postFinder(null,results,matcherOut,xml):push$1.apply(results,matcherOut)})}function matcherFromTokens(tokens){for(var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,!0),matchAnyContext=addCombinator(function(elem){return indexOf$1.call(checkContext,elem)>-1},implicitRelative,!0),matchers=[function(elem,context,xml){return!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml))}];i<len;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{if(matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches),matcher[expando]){for(j=++i;j<len&&!Expr.relative[tokens[j].type];j++);return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:" "===tokens[i-2].type?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",outermost),dirrunsUnique=dirruns+=null==contextBackup?1:Math.random()||.1,len=elems.length;for(outermost&&(outermostContext=context!==document$1&&context);i!==len&&null!=(elem=elems[i]);i++){if(byElement&&elem){for(j=0;matcher=elementMatchers[j++];)if(matcher(elem,context,xml)){results.push(elem);break}outermost&&(dirruns=dirrunsUnique)}bySet&&((elem=!matcher&&elem)&&matchedCount--,seed&&unmatched.push(elem))}if(matchedCount+=i,bySet&&i!==matchedCount){for(j=0;matcher=setMatchers[j++];)matcher(unmatched,setMatched,context,xml);if(seed){if(matchedCount>0)for(;i--;)unmatched[i]||setMatched[i]||(setMatched[i]=pop.call(results));setMatched=condense(setMatched)}push$1.apply(results,setMatched),outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1&&Sizzle.uniqueSort(results)}return outermost&&(dirruns=dirrunsUnique,outermostContext=contextBackup),unmatched};return bySet?markFunction(superMatcher):superMatcher}function DeviceType(os,browser,userAgent){var isiPad=os.isiOS()&&/ipad/i.test(userAgent)===!0,isiPhone=os.isiOS()&&!isiPad,isAndroid3=os.isAndroid()&&3===os.version.major,isAndroid4=os.isAndroid()&&4===os.version.major,isTablet=isiPad||isAndroid3||isAndroid4&&/mobile/i.test(userAgent)===!0,isTouch=os.isiOS()||os.isAndroid(),isPhone=isTouch&&!isTablet,iOSwebview=browser.isSafari()&&os.isiOS()&&/safari/i.test(userAgent)===!1;return{isiPad:$_60qu7r6jducwn73.constant(isiPad),isiPhone:$_60qu7r6jducwn73.constant(isiPhone),isTablet:$_60qu7r6jducwn73.constant(isTablet),isPhone:$_60qu7r6jducwn73.constant(isPhone),isTouch:$_60qu7r6jducwn73.constant(isTouch),isAndroid:os.isAndroid,isiOS:os.isiOS,isWebView:$_60qu7r6jducwn73.constant(iOSwebview)}}function Immutable(){var fields=arguments;return function(){for(var values=new Array(arguments.length),i=0;i<values.length;i++)values[i]=arguments[i];if(fields.length!==values.length)throw new Error('Wrong number of arguments to struct. Expected "['+fields.length+']", got '+values.length+" arguments");var struct={};return $_2dw1bj4jducwn6g.each(fields,function(name,i){struct[name]=$_60qu7r6jducwn73.constant(values[i])}),struct}}function MixedBag(required,optional){var everything=required.concat(optional);if(0===everything.length)throw new Error("You must specify at least one required or optional field.");return $_tfxv91bjducwnib.validateStrArr("required",required),$_tfxv91bjducwnib.validateStrArr("optional",optional),$_tfxv91bjducwnib.checkDupes(everything),function(obj){var keys=$_84vepq13jducwnh9.keys(obj);$_2dw1bj4jducwn6g.forall(required,function(req){return $_2dw1bj4jducwn6g.contains(keys,req)})||$_tfxv91bjducwnib.reqMessage(required,keys);var unsupported=$_2dw1bj4jducwn6g.filter(keys,function(key){return!$_2dw1bj4jducwn6g.contains(everything,key)});unsupported.length>0&&$_tfxv91bjducwnib.unsuppMessage(unsupported);var r={};return $_2dw1bj4jducwn6g.each(required,function(req){r[req]=$_60qu7r6jducwn73.constant(obj[req])}),$_2dw1bj4jducwn6g.each(optional,function(opt){r[opt]=$_60qu7r6jducwn73.constant(Object.prototype.hasOwnProperty.call(obj,opt)?Option.some(obj[opt]):Option.none())}),r}}function StyleSheetLoader(document,settings){var maxLoadTime,idCount=0,loadedStates={};settings=settings||{},maxLoadTime=settings.maxLoadTime||5e3;var appendToHead=function(node){document.getElementsByTagName("head")[0].appendChild(node)},load=function(url,loadedCallback,errorCallback){var link,style,startTime,state,passed=function(){for(var callbacks=state.passed,i=callbacks.length;i--;)callbacks[i]();state.status=2,state.passed=[],state.failed=[]},failed=function(){for(var callbacks=state.failed,i=callbacks.length;i--;)callbacks[i]();state.status=3,state.passed=[],state.failed=[]},wait=function(testCallback,waitCallback){testCallback()||((new Date).getTime()-startTime<maxLoadTime?$_83mf8ygjducwnbc.setTimeout(waitCallback):failed())},waitForWebKitLinkLoaded=function(){wait(function(){for(var styleSheet,owner,styleSheets=document.styleSheets,i=styleSheets.length;i--;)if(styleSheet=styleSheets[i],(owner=styleSheet.ownerNode?styleSheet.ownerNode:styleSheet.owningElement)&&owner.id===link.id)return passed(),!0},waitForWebKitLinkLoaded)},waitForGeckoLinkLoaded=function(){wait(function(){try{var cssRules=style.sheet.cssRules;return passed(),!!cssRules}catch(ex){}},waitForGeckoLinkLoaded)};if(url=$_8i2houjjducwnd2._addCacheSuffix(url),loadedStates[url]?state=loadedStates[url]:(state={passed:[],failed:[]},loadedStates[url]=state),loadedCallback&&state.passed.push(loadedCallback),errorCallback&&state.failed.push(errorCallback),1!==state.status){if(2===state.status)return void passed();if(3===state.status)return void failed();if(state.status=1,link=document.createElement("link"),link.rel="stylesheet",link.type="text/css",link.id="u"+idCount++,link.async=!1,link.defer=!1,startTime=(new Date).getTime(),"onload"in link&&!function(){var webKitChunks=navigator.userAgent.match(/WebKit\/(\d*)/);return!!(webKitChunks&&parseInt(webKitChunks[1],10)<536)}())link.onload=waitForWebKitLinkLoaded,link.onerror=failed;else{if(navigator.userAgent.indexOf("Firefox")>0)return style=document.createElement("style"),style.textContent='@import "'+url+'"',waitForGeckoLinkLoaded(),void appendToHead(style);waitForWebKitLinkLoaded()}appendToHead(link),link.href=url}},loadF=function(url){return Future.nu(function(resolve){load(url,$_60qu7r6jducwn73.compose(resolve,$_60qu7r6jducwn73.constant(Result.value(url))),$_60qu7r6jducwn73.compose(resolve,$_60qu7r6jducwn73.constant(Result.error(url))))})},unbox=function(result){return result.fold($_60qu7r6jducwn73.identity,$_60qu7r6jducwn73.identity)},loadAll=function(urls,success,failure){$_2m9thz1kjducwnj6.par($_2dw1bj4jducwn6g.map(urls,loadF)).get(function(result){var parts=$_2dw1bj4jducwn6g.partition(result,function(r){return r.isValue()});parts.fail.length>0?failure(parts.fail.map(unbox)):success(parts.pass.map(unbox))})};return{load:load,loadAll:loadAll}}function TreeWalker(startNode,rootNode){var node=startNode,findSibling=function(node,startName,siblingName,shallow){var sibling,parent;if(node){if(!shallow&&node[startName])return node[startName];if(node!==rootNode){if(sibling=node[siblingName])return sibling;for(parent=node.parentNode;parent&&parent!==rootNode;parent=parent.parentNode)if(sibling=parent[siblingName])return sibling}}},findPreviousNode=function(node,startName,siblingName,shallow){var sibling,parent,child;if(node){if(sibling=node[siblingName],rootNode&&sibling===rootNode)return;if(sibling){if(!shallow)for(child=sibling[startName];child;child=child[startName])if(!child[startName])return child;return sibling}if((parent=node.parentNode)&&parent!==rootNode)return parent}};this.current=function(){return node},this.next=function(shallow){return node=findSibling(node,"firstChild","nextSibling",shallow)},this.prev=function(shallow){return node=findSibling(node,"lastChild","previousSibling",shallow)},this.prev2=function(shallow){return node=findPreviousNode(node,"lastChild","previousSibling",shallow)}}function Schema(settings){
var validStyles,invalidStyles,schemaItems,whiteSpaceElementsMap,selfClosingElementsMap,shortEndedElementsMap,boolAttrMap,validClasses,blockElementsMap,nonEmptyElementsMap,moveCaretBeforeOnEnterElementsMap,textBlockElementsMap,textInlineElementsMap,elements={},children={},patternElements=[],customElementsMap={},specialElements={},createLookupTable=function(option,defaultValue,extendWith){var value=settings[option];return value?value=makeMap$2(value,/[, ]/,makeMap$2(value.toUpperCase(),/[, ]/)):(value=mapCache[option])||(value=makeMap$2(defaultValue," ",makeMap$2(defaultValue.toUpperCase()," ")),value=extend$1(value,extendWith),mapCache[option]=value),value};settings=settings||{},schemaItems=compileSchema(settings.schema),settings.verify_html===!1&&(settings.valid_elements="*[*]"),validStyles=compileElementMap(settings.valid_styles),invalidStyles=compileElementMap(settings.invalid_styles,"map"),validClasses=compileElementMap(settings.valid_classes,"map"),whiteSpaceElementsMap=createLookupTable("whitespace_elements","pre script noscript style textarea video audio iframe object code"),selfClosingElementsMap=createLookupTable("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),shortEndedElementsMap=createLookupTable("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),boolAttrMap=createLookupTable("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),nonEmptyElementsMap=createLookupTable("non_empty_elements","td th iframe video audio object script pre code",shortEndedElementsMap),moveCaretBeforeOnEnterElementsMap=createLookupTable("move_caret_before_on_enter_elements","table",nonEmptyElementsMap),textBlockElementsMap=createLookupTable("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),blockElementsMap=createLookupTable("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption",textBlockElementsMap),textInlineElementsMap=createLookupTable("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),each$4((settings.special||"script noscript noframes noembed title style textarea xmp").split(" "),function(name){specialElements[name]=new RegExp("</"+name+"[^>]*>","gi")});var patternToRegExp=function(str){return new RegExp("^"+str.replace(/([?+*])/g,".$1")+"$")},addValidElements=function(validElements){var ei,el,ai,al,matches,element,attr,attrData,elementName,attrName,attrType,attributes,attributesOrder,prefix,outputName,globalAttributes,globalAttributesOrder,key,value,elementRuleRegExp=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,attrRuleRegExp=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,hasPatternsRegExp=/[*?+]/;if(validElements)for(validElements=split(validElements,","),elements["@"]&&(globalAttributes=elements["@"].attributes,globalAttributesOrder=elements["@"].attributesOrder),ei=0,el=validElements.length;ei<el;ei++)if(matches=elementRuleRegExp.exec(validElements[ei])){if(prefix=matches[1],elementName=matches[2],outputName=matches[3],attrData=matches[5],attributes={},attributesOrder=[],element={attributes:attributes,attributesOrder:attributesOrder},"#"===prefix&&(element.paddEmpty=!0),"-"===prefix&&(element.removeEmpty=!0),"!"===matches[4]&&(element.removeEmptyAttrs=!0),globalAttributes){for(key in globalAttributes)attributes[key]=globalAttributes[key];attributesOrder.push.apply(attributesOrder,globalAttributesOrder)}if(attrData)for(attrData=split(attrData,"|"),ai=0,al=attrData.length;ai<al;ai++)if(matches=attrRuleRegExp.exec(attrData[ai])){if(attr={},attrType=matches[1],attrName=matches[2].replace(/[\\:]:/g,":"),prefix=matches[3],value=matches[4],"!"===attrType&&(element.attributesRequired=element.attributesRequired||[],element.attributesRequired.push(attrName),attr.required=!0),"-"===attrType){delete attributes[attrName],attributesOrder.splice(inArray$1(attributesOrder,attrName),1);continue}prefix&&("="===prefix&&(element.attributesDefault=element.attributesDefault||[],element.attributesDefault.push({name:attrName,value:value}),attr.defaultValue=value),":"===prefix&&(element.attributesForced=element.attributesForced||[],element.attributesForced.push({name:attrName,value:value}),attr.forcedValue=value),"<"===prefix&&(attr.validValues=makeMap$2(value,"?"))),hasPatternsRegExp.test(attrName)?(element.attributePatterns=element.attributePatterns||[],attr.pattern=patternToRegExp(attrName),element.attributePatterns.push(attr)):(attributes[attrName]||attributesOrder.push(attrName),attributes[attrName]=attr)}globalAttributes||"@"!==elementName||(globalAttributes=attributes,globalAttributesOrder=attributesOrder),outputName&&(element.outputName=elementName,elements[outputName]=element),hasPatternsRegExp.test(elementName)?(element.pattern=patternToRegExp(elementName),patternElements.push(element)):elements[elementName]=element}},setValidElements=function(validElements){elements={},patternElements=[],addValidElements(validElements),each$4(schemaItems,function(element,name){children[name]=element.children})},addCustomElements=function(customElements){var customElementRegExp=/^(~)?(.+)$/;customElements&&(mapCache.text_block_elements=mapCache.block_elements=null,each$4(split(customElements,","),function(rule){var matches=customElementRegExp.exec(rule),inline="~"===matches[1],cloneName=inline?"span":"div",name=matches[2];if(children[name]=children[cloneName],customElementsMap[name]=cloneName,inline||(blockElementsMap[name.toUpperCase()]={},blockElementsMap[name]={}),!elements[name]){var customRule=elements[cloneName];customRule=extend$1({},customRule),delete customRule.removeEmptyAttrs,delete customRule.removeEmpty,elements[name]=customRule}each$4(children,function(element,elmName){element[cloneName]&&(children[elmName]=element=extend$1({},children[elmName]),element[name]=element[cloneName])})}))},addValidChildren=function(validChildren){var childRuleRegExp=/^([+\-]?)(\w+)\[([^\]]+)\]$/;mapCache[settings.schema]=null,validChildren&&each$4(split(validChildren,","),function(rule){var parent,prefix,matches=childRuleRegExp.exec(rule);matches&&(prefix=matches[1],parent=prefix?children[matches[2]]:children[matches[2]]={"#comment":{}},parent=children[matches[2]],each$4(split(matches[3],"|"),function(child){"-"===prefix?delete parent[child]:parent[child]={}}))})},getElementRule=function(name){var i,element=elements[name];if(element)return element;for(i=patternElements.length;i--;)if(element=patternElements[i],element.pattern.test(name))return element};settings.valid_elements?setValidElements(settings.valid_elements):(each$4(schemaItems,function(element,name){elements[name]={attributes:element.attributes,attributesOrder:element.attributesOrder},children[name]=element.children}),"html5"!==settings.schema&&each$4(split("strong/b em/i"),function(item){item=split(item,"/"),elements[item[1]].outputName=item[0]}),each$4(split("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(name){elements[name]&&(elements[name].removeEmpty=!0)}),each$4(split("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(name){elements[name].paddEmpty=!0}),each$4(split("span"),function(name){elements[name].removeEmptyAttrs=!0})),addCustomElements(settings.custom_elements),addValidChildren(settings.valid_children),addValidElements(settings.extended_valid_elements),addValidChildren("+ol[ul|ol],+ul[ul|ol]"),each$4({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(parents,item){elements[item]&&(elements[item].parentsRequired=split(parents))}),settings.invalid_elements&&each$4(explode$1(settings.invalid_elements),function(item){elements[item]&&delete elements[item]}),getElementRule("span")||addValidElements("span[!data-mce-type|*]");var getValidStyles=function(){return validStyles},getInvalidStyles=function(){return invalidStyles},getValidClasses=function(){return validClasses},getBoolAttrs=function(){return boolAttrMap},getBlockElements=function(){return blockElementsMap},getTextBlockElements=function(){return textBlockElementsMap},getTextInlineElements=function(){return textInlineElementsMap},getShortEndedElements=function(){return shortEndedElementsMap},getSelfClosingElements=function(){return selfClosingElementsMap},getNonEmptyElements=function(){return nonEmptyElementsMap},getMoveCaretBeforeOnEnterElements=function(){return moveCaretBeforeOnEnterElementsMap},getWhiteSpaceElements=function(){return whiteSpaceElementsMap},getSpecialElements=function(){return specialElements},isValidChild=function(name,child){var parent=children[name.toLowerCase()];return!(!parent||!parent[child.toLowerCase()])},isValid=function(name,attr){var attrPatterns,i,rule=getElementRule(name);if(rule){if(!attr)return!0;if(rule.attributes[attr])return!0;if(attrPatterns=rule.attributePatterns)for(i=attrPatterns.length;i--;)if(attrPatterns[i].pattern.test(name))return!0}return!1},getCustomElements=function(){return customElementsMap};return{children:children,elements:elements,getValidStyles:getValidStyles,getValidClasses:getValidClasses,getBlockElements:getBlockElements,getInvalidStyles:getInvalidStyles,getShortEndedElements:getShortEndedElements,getTextBlockElements:getTextBlockElements,getTextInlineElements:getTextInlineElements,getBoolAttrs:getBoolAttrs,getElementRule:getElementRule,getSelfClosingElements:getSelfClosingElements,getNonEmptyElements:getNonEmptyElements,getMoveCaretBeforeOnEnterElements:getMoveCaretBeforeOnEnterElements,getWhiteSpaceElements:getWhiteSpaceElements,getSpecialElements:getSpecialElements,isValidChild:isValidChild,isValid:isValid,getCustomElements:getCustomElements,addValidElements:addValidElements,setValidElements:setValidElements,addCustomElements:addCustomElements,addValidChildren:addValidChildren}}function Styles(settings,schema){var i,encodingItems,validStyles,invalidStyles,rgbRegExp=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,styleRegExp=/\s*([^:]+):\s*([^;]+);?/g,encodingLookup={};for(settings=settings||{},schema&&(validStyles=schema.getValidStyles(),invalidStyles=schema.getInvalidStyles()),encodingItems="\\\" \\' \\; \\: ; : \ufeff".split(" "),i=0;i<encodingItems.length;i++)encodingLookup[encodingItems[i]]="\ufeff"+i,encodingLookup["\ufeff"+i]=encodingItems[i];return{toHex:function(color){return color.replace(rgbRegExp,toHex)},parse:function(css){var matches,name,value,isEncoded,styles={},urlConverter=settings.url_converter,urlConverterScope=settings.url_converter_scope||this,compress=function(prefix,suffix,noJoin){var top,right,bottom,left;if((top=styles[prefix+"-top"+suffix])&&(right=styles[prefix+"-right"+suffix])&&(bottom=styles[prefix+"-bottom"+suffix])&&(left=styles[prefix+"-left"+suffix])){var box=[top,right,bottom,left];for(i=box.length-1;i--&&box[i]===box[i+1];);i>-1&&noJoin||(styles[prefix+suffix]=i===-1?box[0]:box.join(" "),delete styles[prefix+"-top"+suffix],delete styles[prefix+"-right"+suffix],delete styles[prefix+"-bottom"+suffix],delete styles[prefix+"-left"+suffix])}},canCompress=function(key){var i,value=styles[key];if(value){for(value=value.split(" "),i=value.length;i--;)if(value[i]!==value[0])return!1;return styles[key]=value[0],!0}},encode=function(str){return isEncoded=!0,encodingLookup[str]},decode=function(str,keepSlashes){return isEncoded&&(str=str.replace(/\uFEFF[0-9]/g,function(str){return encodingLookup[str]})),keepSlashes||(str=str.replace(/\\([\'\";:])/g,"$1")),str},decodeSingleHexSequence=function(escSeq){return String.fromCharCode(parseInt(escSeq.slice(1),16))},decodeHexSequences=function(value){return value.replace(/\\[0-9a-f]+/gi,decodeSingleHexSequence)},processUrl=function(match,url,url2,url3,str,str2){if(str=str||str2)return str=decode(str),"'"+str.replace(/\'/g,"\\'")+"'";if(url=decode(url||url2||url3),!settings.allow_script_urls){var scriptUrl=url.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(scriptUrl))return"";if(!settings.allow_svg_data_urls&&/^data:image\/svg/i.test(scriptUrl))return""}return urlConverter&&(url=urlConverter.call(urlConverterScope,url,"style")),"url('"+url.replace(/\'/g,"\\'")+"')"};if(css){for(css=css.replace(/[\u0000-\u001F]/g,""),css=css.replace(/\\[\"\';:\uFEFF]/g,encode).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(str){return str.replace(/[;:]/g,encode)});matches=styleRegExp.exec(css);)if(styleRegExp.lastIndex=matches.index+matches[0].length,name=matches[1].replace(/\s+$/,"").toLowerCase(),value=matches[2].replace(/\s+$/,""),name&&value){if(name=decodeHexSequences(name),value=decodeHexSequences(value),name.indexOf("\ufeff")!==-1||name.indexOf('"')!==-1)continue;if(!settings.allow_script_urls&&("behavior"===name||/expression\s*\(|\/\*|\*\//.test(value)))continue;"font-weight"===name&&"700"===value?value="bold":"color"!==name&&"background-color"!==name||(value=value.toLowerCase()),value=value.replace(rgbRegExp,toHex),value=value.replace(/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,processUrl),styles[name]=isEncoded?decode(value,!0):value}compress("border","",!0),compress("border","-width"),compress("border","-color"),compress("border","-style"),compress("padding",""),compress("margin",""),function(target,a,b,c){canCompress(a)&&canCompress(b)&&canCompress(c)&&(styles[target]=styles[a]+" "+styles[b]+" "+styles[c],delete styles[a],delete styles[b],delete styles[c])}("border","border-width","border-style","border-color"),"medium none"===styles.border&&delete styles.border,"none"===styles["border-image"]&&delete styles["border-image"]}return styles},serialize:function(styles,elementName){var name,value,css="",serializeStyles=function(name){var styleList,i,l,value;if(styleList=validStyles[name])for(i=0,l=styleList.length;i<l;i++)name=styleList[i],(value=styles[name])&&(css+=(css.length>0?" ":"")+name+": "+value+";")};if(elementName&&validStyles)serializeStyles("*"),serializeStyles(elementName);else for(name in styles)!(value=styles[name])||invalidStyles&&!function(name,elementName){var styleMap;return(!(styleMap=invalidStyles["*"])||!styleMap[name])&&(!(styleMap=invalidStyles[elementName])||!styleMap[name])}(name,elementName)||(css+=(css.length>0?" ":"")+name+": "+value+";");return css}}}function CaretPosition(container,offset,clientRects){var isAtStart=function(){return isText$4(container),0===offset},isAtEnd=function(){return isText$4(container)?offset>=container.data.length:offset>=container.childNodes.length},toRange=function(){var range;return range=createRange(container.ownerDocument),range.setStart(container,offset),range.setEnd(container,offset),range},getClientRects=function(){return clientRects||(clientRects=getCaretPositionClientRects(CaretPosition(container,offset))),clientRects},isVisible=function(){return getClientRects().length>0},isEqual$$1=function(caretPosition){return caretPosition&&container===caretPosition.container()&&offset===caretPosition.offset()},getNode$$1=function(before){return resolveIndex(container,before?offset-1:offset)};return{container:$_6183wb25jducwnn2.constant(container),offset:$_6183wb25jducwnn2.constant(offset),toRange:toRange,getClientRects:getClientRects,isVisible:isVisible,isAtStart:isAtStart,isAtEnd:isAtEnd,isEqual:isEqual$$1,getNode:getNode$$1}}function Writer(settings){var indent,indentBefore,indentAfter,encode,htmlOutput,html=[];return settings=settings||{},indent=settings.indent,indentBefore=makeMap$3(settings.indent_before||""),indentAfter=makeMap$3(settings.indent_after||""),encode=$_g4jbz61rjducwnjq.getEncodeFunc(settings.entity_encoding||"raw",settings.entities),htmlOutput="html"===settings.element_format,{start:function(name,attrs,empty){var i,l,attr,value;if(indent&&indentBefore[name]&&html.length>0&&(value=html[html.length-1],value.length>0&&"\n"!==value&&html.push("\n")),html.push("<",name),attrs)for(i=0,l=attrs.length;i<l;i++)attr=attrs[i],html.push(" ",attr.name,'="',encode(attr.value,!0),'"');html[html.length]=!empty||htmlOutput?">":" />",empty&&indent&&indentAfter[name]&&html.length>0&&(value=html[html.length-1],value.length>0&&"\n"!==value&&html.push("\n"))},end:function(name){var value;html.push("</",name,">"),indent&&indentAfter[name]&&html.length>0&&(value=html[html.length-1],value.length>0&&"\n"!==value&&html.push("\n"))},text:function(text,raw){text.length>0&&(html[html.length]=raw?text:encode(text))},cdata:function(text){html.push("<![CDATA[",text,"]]>")},comment:function(text){html.push("<!--",text,"-->")},pi:function(name,text){text?html.push("<?",name," ",encode(text),"?>"):html.push("<?",name,"?>"),indent&&html.push("\n")},doctype:function(text){html.push("<!DOCTYPE",text,">",indent?"\n":"")},reset:function(){html.length=0},getContent:function(){return html.join("").replace(/\n$/,"")}}}function HtmlSerializer(settings,schema){void 0===schema&&(schema=Schema());var writer=Writer(settings);return settings=settings||{},settings.validate=!("validate"in settings)||settings.validate,{serialize:function(node){var handlers,validate;validate=settings.validate,handlers={3:function(node){writer.text(node.value,node.raw)},8:function(node){writer.comment(node.value)},7:function(node){writer.pi(node.name,node.value)},10:function(node){writer.doctype(node.value)},4:function(node){writer.cdata(node.value)},11:function(node){if(node=node.firstChild)do{walk(node)}while(node=node.next)}},writer.reset();var walk=function(node){var name,isEmpty,attrs,attrName,attrValue,sortedAttrs,i,l,elementRule,handler=handlers[node.type];if(handler)handler(node);else{if(name=node.name,isEmpty=node.shortEnded,attrs=node.attributes,validate&&attrs&&attrs.length>1&&(sortedAttrs=[],sortedAttrs.map={},elementRule=schema.getElementRule(node.name))){for(i=0,l=elementRule.attributesOrder.length;i<l;i++)(attrName=elementRule.attributesOrder[i])in attrs.map&&(attrValue=attrs.map[attrName],sortedAttrs.map[attrName]=attrValue,sortedAttrs.push({name:attrName,value:attrValue}));for(i=0,l=attrs.length;i<l;i++)(attrName=attrs[i].name)in sortedAttrs.map||(attrValue=attrs.map[attrName],sortedAttrs.map[attrName]=attrValue,sortedAttrs.push({name:attrName,value:attrValue}));attrs=sortedAttrs}if(writer.start(node.name,attrs,isEmpty),!isEmpty){if(node=node.firstChild)do{walk(node)}while(node=node.next);writer.end(name)}}};return 1!==node.type||settings.inner?handlers[11](node):walk(node),writer.getContent()}}}function ClosestOrAncestor(is,ancestor,scope,a,isRoot){return is(scope,a)?Option.some(scope):$_c7y6af12jducwnh8.isFunction(isRoot)&&isRoot(scope)?Option.none():ancestor(scope,a,isRoot)}function EditorCommands(editor){var dom,selection,formatter,bookmark,commands={state:{},exec:{},value:{}},settings=editor.settings;editor.on("PreInit",function(){dom=editor.dom,selection=editor.selection,settings=editor.settings,formatter=editor.formatter});var execCommand=function(command,ui,value,args){var func,customCommand,state=!1;if(!editor.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(command)||args&&args.skip_focus?$_exyelv3zjducwnzi.restore(editor):editor.focus(),args=editor.fire("BeforeExecCommand",{command:command,ui:ui,value:value}),args.isDefaultPrevented())return!1;if(customCommand=command.toLowerCase(),func=commands.exec[customCommand])return func(customCommand,ui,value),editor.fire("ExecCommand",{command:command,ui:ui,value:value}),!0;if(each$9(editor.plugins,function(p){if(p.execCommand&&p.execCommand(command,ui,value))return editor.fire("ExecCommand",{command:command,ui:ui,value:value}),state=!0,!1}),state)return state;if(editor.theme&&editor.theme.execCommand&&editor.theme.execCommand(command,ui,value))return editor.fire("ExecCommand",{command:command,ui:ui,value:value}),!0;try{state=editor.getDoc().execCommand(command,ui,value)}catch(ex){}return!!state&&(editor.fire("ExecCommand",{command:command,ui:ui,value:value}),!0)}},queryCommandState=function(command){var func;if(!editor.quirks.isHidden()&&!editor.removed){if(command=command.toLowerCase(),func=commands.state[command])return func(command);try{return editor.getDoc().queryCommandState(command)}catch(ex){}return!1}},queryCommandValue=function(command){var func;if(!editor.quirks.isHidden()&&!editor.removed){if(command=command.toLowerCase(),func=commands.value[command])return func(command);try{return editor.getDoc().queryCommandValue(command)}catch(ex){}}},addCommands=function(commandList,type){type=type||"exec",each$9(commandList,function(callback,command){each$9(command.toLowerCase().split(","),function(command){commands[type][command]=callback})})},addCommand=function(command,callback,scope){command=command.toLowerCase(),commands.exec[command]=function(command,ui,value,args){return callback.call(scope||editor,ui,value,args)}},queryCommandSupported=function(command){if(command=command.toLowerCase(),commands.exec[command])return!0;try{return editor.getDoc().queryCommandSupported(command)}catch(ex){}return!1},addQueryStateHandler=function(command,callback,scope){command=command.toLowerCase(),commands.state[command]=function(){return callback.call(scope||editor)}},addQueryValueHandler=function(command,callback,scope){command=command.toLowerCase(),commands.value[command]=function(){return callback.call(scope||editor)}},hasCustomCommand=function(command){return command=command.toLowerCase(),!!commands.exec[command]};extend$2(this,{execCommand:execCommand,queryCommandState:queryCommandState,queryCommandValue:queryCommandValue,queryCommandSupported:queryCommandSupported,addCommands:addCommands,addCommand:addCommand,addQueryStateHandler:addQueryStateHandler,addQueryValueHandler:addQueryValueHandler,hasCustomCommand:hasCustomCommand});var execNativeCommand=function(command,ui,value){return void 0===ui&&(ui=FALSE),void 0===value&&(value=null),editor.getDoc().execCommand(command,ui,value)},isFormatMatch=function(name){return formatter.match(name)},toggleFormat=function(name,value){formatter.toggle(name,value?{value:value}:void 0),editor.nodeChanged()},storeSelection=function(type){bookmark=selection.getBookmark(type)},restoreSelection=function(){selection.moveToBookmark(bookmark)};addCommands({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){editor.undoManager.add()},"Cut,Copy,Paste":function(command){var failed,doc=editor.getDoc();try{execNativeCommand(command)}catch(ex){failed=TRUE}if("paste"!==command||doc.queryCommandEnabled(command)||(failed=!0),failed||!doc.queryCommandSupported(command)){var msg=editor.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");$_cum1kc9jducwn99.mac&&(msg=msg.replace(/Ctrl\+/g,"⌘+")),editor.notificationManager.open({text:msg,type:"error"})}},unlink:function(){if(selection.isCollapsed()){var elm=editor.dom.getParent(editor.selection.getStart(),"a");return void(elm&&editor.dom.remove(elm,!0))}formatter.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(command){var align=command.substring(7);"full"===align&&(align="justify"),each$9("left,center,right,justify".split(","),function(name){align!==name&&formatter.remove("align"+name)}),"none"!==align&&toggleFormat("align"+align)},"InsertUnorderedList,InsertOrderedList":function(command){var listElm,listParent;execNativeCommand(command),(listElm=dom.getParent(selection.getNode(),"ol,ul"))&&(listParent=listElm.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(listParent.nodeName)&&(storeSelection(),dom.split(listParent,listElm),restoreSelection()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(command){toggleFormat(command)},"ForeColor,HiliteColor,FontName":function(command,ui,value){toggleFormat(command,value)},FontSize:function(command,ui,value){var fontClasses,fontSizes;value>=1&&value<=7&&(fontSizes=explode$2(settings.font_size_style_values),fontClasses=explode$2(settings.font_size_classes),value=fontClasses?fontClasses[value-1]||value:fontSizes[value-1]||value),toggleFormat(command,value)},RemoveFormat:function(command){formatter.remove(command)},mceBlockQuote:function(){toggleFormat("blockquote")},FormatBlock:function(command,ui,value){return toggleFormat(value||"p")},mceCleanup:function(){var bookmark=selection.getBookmark();editor.setContent(editor.getContent({cleanup:TRUE}),{cleanup:TRUE}),selection.moveToBookmark(bookmark)},mceRemoveNode:function(command,ui,value){var node=value||selection.getNode();node!==editor.getBody()&&(storeSelection(),editor.dom.remove(node,TRUE),restoreSelection())},mceSelectNodeDepth:function(command,ui,value){var counter=0;dom.getParent(selection.getNode(),function(node){if(1===node.nodeType&&counter++===value)return selection.select(node),FALSE},editor.getBody())},mceSelectNode:function(command,ui,value){selection.select(value)},mceInsertContent:function(command,ui,value){$_42g77d1wjducwnlx.insertAtCaret(editor,value)},mceInsertRawHTML:function(command,ui,value){selection.setContent("tiny_mce_marker"),editor.setContent(editor.getContent().replace(/tiny_mce_marker/g,function(){return value}))},mceToggleFormat:function(command,ui,value){toggleFormat(value)},mceSetContent:function(command,ui,value){editor.setContent(value)},"Indent,Outdent":function(command){handle(editor,command)},mceRepaint:function(){},InsertHorizontalRule:function(){editor.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){editor.hasVisual=!editor.hasVisual,editor.addVisual()},mceReplaceContent:function(command,ui,value){editor.execCommand("mceInsertContent",!1,value.replace(/\{\$selection\}/g,selection.getContent({format:"text"})))},mceInsertLink:function(command,ui,value){var anchor;"string"==typeof value&&(value={href:value}),anchor=dom.getParent(selection.getNode(),"a"),value.href=value.href.replace(" ","%20"),anchor&&value.href||formatter.remove("link"),value.href&&formatter.apply("link",value,anchor)},selectAll:function(){var editingHost=dom.getParent(selection.getStart(),$_fj238m1qjducwnjm.isContentEditableTrue);if(editingHost){var rng=dom.createRng();rng.selectNodeContents(editingHost),selection.setRng(rng)}},delete:function(){$_3jaaze2wjducwnqk.deleteCommand(editor)},forwardDelete:function(){$_3jaaze2wjducwnqk.forwardDeleteCommand(editor)},mceNewDocument:function(){editor.setContent("")},InsertLineBreak:function(command,ui,value){return $_6wifbs3wjducwnw6.insert(editor,value),!0}}),addCommands({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(command){var name="align"+command.substring(7),nodes=selection.isCollapsed()?[dom.getParent(selection.getNode(),dom.isBlock)]:selection.getSelectedBlocks(),matches=map$2(nodes,function(node){return!!formatter.matchNode(node,name)});return inArray$2(matches,TRUE)!==-1},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(command){return isFormatMatch(command)},mceBlockQuote:function(){return isFormatMatch("blockquote")},Outdent:function(){var node;if(settings.inline_styles){if((node=dom.getParent(selection.getStart(),dom.isBlock))&&parseInt(node.style.paddingLeft,10)>0)return TRUE;if((node=dom.getParent(selection.getEnd(),dom.isBlock))&&parseInt(node.style.paddingLeft,10)>0)return TRUE}return queryCommandState("InsertUnorderedList")||queryCommandState("InsertOrderedList")||!settings.inline_styles&&!!dom.getParent(selection.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(command){var list=dom.getParent(selection.getNode(),"ul,ol");return list&&("insertunorderedlist"===command&&"UL"===list.tagName||"insertorderedlist"===command&&"OL"===list.tagName)}},"state"),addCommands({"FontSize,FontName":function(command){var parent,value=0;return(parent=dom.getParent(selection.getNode(),"span"))&&(value="fontsize"===command?parent.style.fontSize:parent.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),value}},"value"),addCommands({Undo:function(){editor.undoManager.undo()},Redo:function(){editor.undoManager.redo()}})}function Shortcuts(editor){var self=this,shortcuts={},pendingPatterns=[],parseShortcut=function(pattern){var id,key,shortcut={};each$10(explode$3(pattern,"+"),function(value){value in modifierNames?shortcut[value]=!0:/^[0-9]{2,}$/.test(value)?shortcut.keyCode=parseInt(value,10):(shortcut.charCode=value.charCodeAt(0),shortcut.keyCode=keyCodeLookup[value]||value.toUpperCase().charCodeAt(0))}),id=[shortcut.keyCode];for(key in modifierNames)shortcut[key]?id.push(key):shortcut[key]=!1;return shortcut.id=id.join(","),shortcut.access&&(shortcut.alt=!0,$_cum1kc9jducwn99.mac?shortcut.ctrl=!0:shortcut.shift=!0),shortcut.meta&&($_cum1kc9jducwn99.mac?shortcut.meta=!0:(shortcut.ctrl=!0,shortcut.meta=!1)),shortcut},createShortcut=function(pattern,desc,cmdFunc,scope){var shortcuts;return shortcuts=$_8i2houjjducwnd2.map(explode$3(pattern,">"),parseShortcut),shortcuts[shortcuts.length-1]=$_8i2houjjducwnd2.extend(shortcuts[shortcuts.length-1],{func:cmdFunc,scope:scope||editor}),$_8i2houjjducwnd2.extend(shortcuts[0],{desc:editor.translate(desc),subpatterns:shortcuts.slice(1)})},hasModifier=function(e){return e.altKey||e.ctrlKey||e.metaKey},isFunctionKey=function(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123},matchShortcut=function(e,shortcut){return!!shortcut&&(shortcut.ctrl===e.ctrlKey&&shortcut.meta===e.metaKey&&(shortcut.alt===e.altKey&&shortcut.shift===e.shiftKey&&(!!(e.keyCode===shortcut.keyCode||e.charCode&&e.charCode===shortcut.charCode)&&(e.preventDefault(),!0))))},executeShortcutAction=function(shortcut){return shortcut.func?shortcut.func.call(shortcut.scope):null};editor.on("keyup keypress keydown",function(e){!hasModifier(e)&&!isFunctionKey(e)||e.isDefaultPrevented()||(each$10(shortcuts,function(shortcut){if(matchShortcut(e,shortcut))return pendingPatterns=shortcut.subpatterns.slice(0),"keydown"===e.type&&executeShortcutAction(shortcut),!0}),matchShortcut(e,pendingPatterns[0])&&(1===pendingPatterns.length&&"keydown"===e.type&&executeShortcutAction(pendingPatterns[0]),pendingPatterns.shift()))}),self.add=function(pattern,desc,cmdFunc,scope){var cmd;return cmd=cmdFunc,"string"==typeof cmdFunc?cmdFunc=function(){editor.execCommand(cmd,!1,null)}:$_8i2houjjducwnd2.isArray(cmd)&&(cmdFunc=function(){editor.execCommand(cmd[0],cmd[1],cmd[2])}),each$10(explode$3($_8i2houjjducwnd2.trim(pattern.toLowerCase())),function(pattern){var shortcut=createShortcut(pattern,desc,cmdFunc,scope);shortcuts[shortcut.id]=shortcut}),!0},self.remove=function(pattern){var shortcut=createShortcut(pattern);return!!shortcuts[shortcut.id]&&(delete shortcuts[shortcut.id],!0)}}function NotificationManagerImpl(){var unimplemented=function(){throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:unimplemented,close:unimplemented,reposition:unimplemented,getArgs:unimplemented}}function NotificationManager(editor){var notifications=[],getImplementation=function(){var theme=editor.theme;return theme&&theme.getNotificationManagerImpl?theme.getNotificationManagerImpl():NotificationManagerImpl()},getTopNotification=function(){return Option.from(notifications[0])},isEqual=function(a,b){return!(a.type!==b.type||a.text!==b.text||a.progressBar||a.timeout||b.progressBar||b.timeout)},reposition=function(){notifications.length>0&&getImplementation().reposition(notifications)},addNotification=function(notification){notifications.push(notification)},closeNotification=function(notification){$_2dw1bj4jducwn6g.findIndex(notifications,function(otherNotification){return otherNotification===notification}).each(function(index){notifications.splice(index,1)})},open=function(args){if(!editor.removed&&$_ahd3ne4djducwo1z.isEditorAttachedToDom(editor))return $_2dw1bj4jducwn6g.find(notifications,function(notification){
return isEqual(getImplementation().getArgs(notification),args)}).getOrThunk(function(){editor.editorManager.setActive(editor);var notification=getImplementation().open(args,function(){closeNotification(notification),reposition()});return addNotification(notification),reposition(),notification})},close=function(){getTopNotification().each(function(notification){getImplementation().close(notification),closeNotification(notification),reposition()})},getNotifications=function(){return notifications};return function(editor){editor.on("SkinLoaded",function(){var serviceMessage=editor.settings.service_message;serviceMessage&&open({text:serviceMessage,type:"warning",timeout:0,icon:""})}),editor.on("ResizeEditor ResizeWindow",function(){$_83mf8ygjducwnbc.requestAnimationFrame(reposition)}),editor.on("remove",function(){$_2dw1bj4jducwn6g.each(notifications,function(notification){getImplementation().close(notification)})})}(editor),{open:open,close:close,getNotifications:getNotifications}}function WindowManagerImpl(){var unimplemented=function(){throw new Error("Theme did not provide a WindowManager implementation.")};return{open:unimplemented,alert:unimplemented,confirm:unimplemented,close:unimplemented,getParams:unimplemented,setParams:unimplemented}}function WindowManager(editor){var windows=[],getImplementation=function(){var theme=editor.theme;return theme&&theme.getWindowManagerImpl?theme.getWindowManagerImpl():WindowManagerImpl()},funcBind=function(scope,f){return function(){return f?f.apply(scope,arguments):void 0}},fireOpenEvent=function(win){editor.fire("OpenWindow",{win:win})},fireCloseEvent=function(win){editor.fire("CloseWindow",{win:win})},addWindow=function(win){windows.push(win),fireOpenEvent(win)},closeWindow=function(win){$_2dw1bj4jducwn6g.findIndex(windows,function(otherWindow){return otherWindow===win}).each(function(index){windows.splice(index,1),fireCloseEvent(win),0===windows.length&&editor.focus()})},getTopWindow=function(){return Option.from(windows[windows.length-1])},open=function(args,params){editor.editorManager.setActive(editor),$_exyelv3zjducwnzi.store(editor);var win=getImplementation().open(args,params,closeWindow);return addWindow(win),win},alert=function(message,callback,scope){var win=getImplementation().alert(message,funcBind(scope?scope:this,callback),closeWindow);addWindow(win)},confirm=function(message,callback,scope){var win=getImplementation().confirm(message,funcBind(scope?scope:this,callback),closeWindow);addWindow(win)},close=function(){getTopWindow().each(function(win){getImplementation().close(win),closeWindow(win)})},getParams=function(){return getTopWindow().map(getImplementation().getParams).getOr(null)},setParams=function(params){getTopWindow().each(function(win){getImplementation().setParams(win,params)})},getWindows=function(){return windows};return editor.on("remove",function(){$_2dw1bj4jducwn6g.each(windows.slice(0),function(win){getImplementation().close(win)})}),{windows:windows,open:open,alert:alert,confirm:confirm,close:close,getParams:getParams,setParams:setParams,getWindows:getWindows}}function XMLHttpRequest(){return new($_850zr7bjducwn9g.getOrDie("XMLHttpRequest"))}function Uploader(uploadStatus,settings){var pendingPromises={},pathJoin=function(path1,path2){return path1?path1.replace(/\/$/,"")+"/"+path2.replace(/^\//,""):path2},defaultHandler=function(blobInfo,success,failure,progress){var xhr,formData;xhr=new XMLHttpRequest,xhr.open("POST",settings.url),xhr.withCredentials=settings.credentials,xhr.upload.onprogress=function(e){progress(e.loaded/e.total*100)},xhr.onerror=function(){failure("Image upload failed due to a XHR Transport error. Code: "+xhr.status)},xhr.onload=function(){var json;return xhr.status<200||xhr.status>=300?void failure("HTTP Error: "+xhr.status):(json=JSON.parse(xhr.responseText))&&"string"==typeof json.location?void success(pathJoin(settings.basePath,json.location)):void failure("Invalid JSON: "+xhr.responseText)},formData=new FormData,formData.append("file",blobInfo.blob(),blobInfo.filename()),xhr.send(formData)},noUpload=function(){return new promiseObj(function(resolve){resolve([])})},handlerSuccess=function(blobInfo,url){return{url:url,blobInfo:blobInfo,status:!0}},handlerFailure=function(blobInfo,error){return{url:"",blobInfo:blobInfo,status:!1,error:error}},resolvePending=function(blobUri,result){$_8i2houjjducwnd2.each(pendingPromises[blobUri],function(resolve){resolve(result)}),delete pendingPromises[blobUri]},uploadBlobInfo=function(blobInfo,handler,openNotification){return uploadStatus.markPending(blobInfo.blobUri()),new promiseObj(function(resolve){var notification,progress,noop=function(){};try{var closeNotification_1=function(){notification&&(notification.close(),progress=noop)},success=function(url){closeNotification_1(),uploadStatus.markUploaded(blobInfo.blobUri(),url),resolvePending(blobInfo.blobUri(),handlerSuccess(blobInfo,url)),resolve(handlerSuccess(blobInfo,url))},failure=function(error){closeNotification_1(),uploadStatus.removeFailed(blobInfo.blobUri()),resolvePending(blobInfo.blobUri(),handlerFailure(blobInfo,error)),resolve(handlerFailure(blobInfo,error))};progress=function(percent){percent<0||percent>100||(notification||(notification=openNotification()),notification.progressBar.value(percent))},handler(blobInfo,success,failure,progress)}catch(ex){resolve(handlerFailure(blobInfo,ex.message))}})},isDefaultHandler=function(handler){return handler===defaultHandler},pendingUploadBlobInfo=function(blobInfo){var blobUri=blobInfo.blobUri();return new promiseObj(function(resolve){pendingPromises[blobUri]=pendingPromises[blobUri]||[],pendingPromises[blobUri].push(resolve)})},uploadBlobs=function(blobInfos,openNotification){return blobInfos=$_8i2houjjducwnd2.grep(blobInfos,function(blobInfo){return!uploadStatus.isUploaded(blobInfo.blobUri())}),promiseObj.all($_8i2houjjducwnd2.map(blobInfos,function(blobInfo){return uploadStatus.isPending(blobInfo.blobUri())?pendingUploadBlobInfo(blobInfo):uploadBlobInfo(blobInfo,settings.handler,openNotification)}))},upload=function(blobInfos,openNotification){return!settings.url&&isDefaultHandler(settings.handler)?noUpload():uploadBlobs(blobInfos,openNotification)};return settings=$_8i2houjjducwnd2.extend({credentials:!1,handler:defaultHandler},settings),{upload:upload}}function Blob(parts,properties){return new($_850zr7bjducwn9g.getOrDie("Blob"))(parts,properties)}function FileReader(){return new($_850zr7bjducwn9g.getOrDie("FileReader"))}function Uint8Array(arr){return new($_850zr7bjducwn9g.getOrDie("Uint8Array"))(arr)}function ImageScanner(uploadStatus,blobCache){var cachedPromises={};return{findAll:function(elm,predicate){var images,promises;return predicate||(predicate=$_6183wb25jducwnn2.constant(!0)),images=$_e6e6g1kjducwnfd.filter(getAllImages(elm),function(img){var src=img.src;return!!$_cum1kc9jducwn99.fileApi&&(!img.hasAttribute("data-mce-bogus")&&(!img.hasAttribute("data-mce-placeholder")&&(!(!src||src===$_cum1kc9jducwn99.transparentSrc)&&(0===src.indexOf("blob:")?!uploadStatus.isUploaded(src):0===src.indexOf("data:")&&predicate(img)))))}),promises=$_e6e6g1kjducwnfd.map(images,function(img){var newPromise;return cachedPromises[img.src]?new promiseObj(function(resolve){cachedPromises[img.src].then(function(imageInfo){if("string"==typeof imageInfo)return imageInfo;resolve({image:img,blobInfo:imageInfo.blobInfo})})}):(newPromise=new promiseObj(function(resolve,reject){imageToBlobInfo(blobCache,img,resolve,reject)}).then(function(result){return delete cachedPromises[result.image.src],result}).catch(function(error){return delete cachedPromises[img.src],error}),cachedPromises[img.src]=newPromise,newPromise)}),promiseObj.all(promises)}}}function BlobCache(){var cache=[],constant=$_6183wb25jducwnn2.constant,mimeToExt=function(mime){return{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[mime.toLowerCase()]||"dat"},create=function(o,blob,base64,filename){return toBlobInfo("object"==typeof o?o:{id:o,name:filename,blob:blob,base64:base64})},toBlobInfo=function(o){var id,name;if(!o.blob||!o.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");return id=o.id||$_48t1mg4wjducwo4b.uuid("blobid"),name=o.name||id,{id:constant(id),name:constant(name),filename:constant(name+"."+mimeToExt(o.blob.type)),blob:constant(o.blob),base64:constant(o.base64),blobUri:constant(o.blobUri||$_bqa5nlajducwn9f.createObjectURL(o.blob)),uri:constant(o.uri)}},add=function(blobInfo){get(blobInfo.id())||cache.push(blobInfo)},get=function(id){return findFirst(function(cachedBlobInfo){return cachedBlobInfo.id()===id})},findFirst=function(predicate){return $_e6e6g1kjducwnfd.filter(cache,predicate)[0]},getByUri=function(blobUri){return findFirst(function(blobInfo){return blobInfo.blobUri()===blobUri})},removeByUri=function(blobUri){cache=$_e6e6g1kjducwnfd.filter(cache,function(blobInfo){return blobInfo.blobUri()!==blobUri||($_bqa5nlajducwn9f.revokeObjectURL(blobInfo.blobUri()),!1)})},destroy=function(){$_e6e6g1kjducwnfd.each(cache,function(cachedBlobInfo){$_bqa5nlajducwn9f.revokeObjectURL(cachedBlobInfo.blobUri())}),cache=[]};return{create:create,add:add,get:get,getByUri:getByUri,findFirst:findFirst,removeByUri:removeByUri,destroy:destroy}}function UploadStatus(){var blobUriStatuses={},createStatus=function(status,resultUri){return{status:status,resultUri:resultUri}},hasBlobUri=function(blobUri){return blobUri in blobUriStatuses},getResultUri=function(blobUri){var result=blobUriStatuses[blobUri];return result?result.resultUri:null},isPending=function(blobUri){return!!hasBlobUri(blobUri)&&1===blobUriStatuses[blobUri].status},isUploaded=function(blobUri){return!!hasBlobUri(blobUri)&&2===blobUriStatuses[blobUri].status},markPending=function(blobUri){blobUriStatuses[blobUri]=createStatus(1,null)},markUploaded=function(blobUri,resultUri){blobUriStatuses[blobUri]=createStatus(2,resultUri)},removeFailed=function(blobUri){delete blobUriStatuses[blobUri]},destroy=function(){blobUriStatuses={}};return{hasBlobUri:hasBlobUri,getResultUri:getResultUri,isPending:isPending,isUploaded:isUploaded,markPending:markPending,markUploaded:markUploaded,removeFailed:removeFailed,destroy:destroy}}function EditorUpload(editor){var uploader,imageScanner,blobCache=BlobCache(),settings=editor.settings,uploadStatus=UploadStatus(),aliveGuard=function(callback){return function(result){return editor.selection?callback(result):[]}},cacheInvalidator=function(){return"?"+(new Date).getTime()},replaceString=function(content,search,replace){var index=0;do{(index=content.indexOf(search,index))!==-1&&(content=content.substring(0,index)+replace+content.substr(index+search.length),index+=replace.length-search.length+1)}while(index!==-1);return content},replaceImageUrl=function(content,targetUrl,replacementUrl){return content=replaceString(content,'src="'+targetUrl+'"','src="'+replacementUrl+'"'),content=replaceString(content,'data-mce-src="'+targetUrl+'"','data-mce-src="'+replacementUrl+'"')},replaceUrlInUndoStack=function(targetUrl,replacementUrl){$_e6e6g1kjducwnfd.each(editor.undoManager.data,function(level){"fragmented"===level.type?level.fragments=$_e6e6g1kjducwnfd.map(level.fragments,function(fragment){return replaceImageUrl(fragment,targetUrl,replacementUrl)}):level.content=replaceImageUrl(level.content,targetUrl,replacementUrl)})},openNotification=function(){return editor.notificationManager.open({text:editor.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},replaceImageUri=function(image,resultUri){blobCache.removeByUri(image.src),replaceUrlInUndoStack(image.src,resultUri),editor.$(image).attr({src:settings.images_reuse_filename?resultUri+cacheInvalidator():resultUri,"data-mce-src":editor.convertURL(resultUri,"src")})},uploadImages=function(callback){return uploader||(uploader=Uploader(uploadStatus,{url:settings.images_upload_url,basePath:settings.images_upload_base_path,credentials:settings.images_upload_credentials,handler:settings.images_upload_handler})),scanForImages().then(aliveGuard(function(imageInfos){var blobInfos;return blobInfos=$_e6e6g1kjducwnfd.map(imageInfos,function(imageInfo){return imageInfo.blobInfo}),uploader.upload(blobInfos,openNotification).then(aliveGuard(function(result){var filteredResult=$_e6e6g1kjducwnfd.map(result,function(uploadInfo,index){var image=imageInfos[index].image;return uploadInfo.status&&editor.settings.images_replace_blob_uris!==!1?replaceImageUri(image,uploadInfo.url):uploadInfo.error&&$_9erk7k4hjducwo2e.uploadError(editor,uploadInfo.error),{element:image,status:uploadInfo.status}});return callback&&callback(filteredResult),filteredResult}))}))},uploadImagesAuto=function(callback){if(settings.automatic_uploads!==!1)return uploadImages(callback)},isValidDataUriImage=function(imgElm){return!settings.images_dataimg_filter||settings.images_dataimg_filter(imgElm)},scanForImages=function(){return imageScanner||(imageScanner=ImageScanner(uploadStatus,blobCache)),imageScanner.findAll(editor.getBody(),isValidDataUriImage).then(aliveGuard(function(result){return result=$_e6e6g1kjducwnfd.filter(result,function(resultItem){return"string"!=typeof resultItem||($_9erk7k4hjducwo2e.displayError(editor,resultItem),!1)}),$_e6e6g1kjducwnfd.each(result,function(resultItem){replaceUrlInUndoStack(resultItem.image.src,resultItem.blobInfo.blobUri()),resultItem.image.src=resultItem.blobInfo.blobUri(),resultItem.image.removeAttribute("data-mce-src")}),result}))},destroy=function(){blobCache.destroy(),uploadStatus.destroy(),imageScanner=uploader=null},replaceBlobUris=function(content){return content.replace(/src="(blob:[^"]+)"/g,function(match,blobUri){var resultUri=uploadStatus.getResultUri(blobUri);if(resultUri)return'src="'+resultUri+'"';var blobInfo=blobCache.getByUri(blobUri);return blobInfo||(blobInfo=$_e6e6g1kjducwnfd.reduce(editor.editorManager.get(),function(result,editor){return result||editor.editorUpload&&editor.editorUpload.blobCache.getByUri(blobUri)},null)),blobInfo?'src="data:'+blobInfo.blob().type+";base64,"+blobInfo.base64()+'"':match})};return editor.on("setContent",function(){editor.settings.automatic_uploads!==!1?uploadImagesAuto():scanForImages()}),editor.on("RawSaveContent",function(e){e.content=replaceBlobUris(e.content)}),editor.on("getContent",function(e){e.source_view||"raw"===e.format||(e.content=replaceBlobUris(e.content))}),editor.on("PostRender",function(){editor.parser.addNodeFilter("img",function(images){$_e6e6g1kjducwnfd.each(images,function(img){var src=img.attr("src");if(!blobCache.getByUri(src)){var resultUri=uploadStatus.getResultUri(src);resultUri&&img.attr("src",resultUri)}})})}),{blobCache:blobCache,uploadImages:uploadImages,uploadImagesAuto:uploadImagesAuto,scanForImages:scanForImages,destroy:destroy}}function NodeChange(editor){var lastRng,lastPath=[],isSameElementPath=function(startElm){var i,currentPath;if(currentPath=editor.$(startElm).parentsUntil(editor.getBody()).add(startElm),currentPath.length===lastPath.length){for(i=currentPath.length;i>=0&&currentPath[i]===lastPath[i];i--);if(i===-1)return lastPath=currentPath,!0}return lastPath=currentPath,!1};"onselectionchange"in editor.getDoc()||editor.on("NodeChange Click MouseUp KeyUp Focus",function(e){var nativeRng,fakeRng;nativeRng=editor.selection.getRng(),fakeRng={startContainer:nativeRng.startContainer,startOffset:nativeRng.startOffset,endContainer:nativeRng.endContainer,endOffset:nativeRng.endOffset},"nodechange"!==e.type&&$_18bpcb3yjducwnzh.isEq(fakeRng,lastRng)||editor.fire("SelectionChange"),lastRng=fakeRng}),editor.on("contextmenu",function(){editor.fire("SelectionChange")}),editor.on("SelectionChange",function(){var startElm=editor.selection.getStart(!0);!startElm||!$_cum1kc9jducwn99.range&&editor.selection.isCollapsed()||!isSameElementPath(startElm)&&editor.dom.isChildOf(startElm,editor.getBody())&&editor.nodeChanged({selectionChange:!0})}),editor.on("MouseUp",function(e){e.isDefaultPrevented()||("IMG"===editor.selection.getNode().nodeName?$_83mf8ygjducwnbc.setEditorTimeout(editor,function(){editor.nodeChanged()}):editor.nodeChanged())}),this.nodeChanged=function(args){var node,parents,root,selection=editor.selection;editor.initialized&&selection&&!editor.settings.disable_nodechange&&!editor.readonly&&(root=editor.getBody(),node=selection.getStart(!0)||root,node.ownerDocument===editor.getDoc()&&editor.dom.isChildOf(node,root)||(node=root),parents=[],editor.dom.getParent(node,function(node){if(node===root)return!0;parents.push(node)}),args=args||{},args.element=node,args.parents=parents,editor.fire("NodeChange",args))}}function SaxParser(settings,schema){void 0===schema&&(schema=Schema());var noop=function(){};settings=settings||{},settings.fix_self_closing!==!1&&(settings.fix_self_closing=!0),each$11("comment cdata text start end pi doctype".split(" "),function(name){name&&(self[name]=settings[name]||noop)});var comment=settings.comment?settings.comment:noop,cdata=settings.cdata?settings.cdata:noop,text=settings.text?settings.text:noop,start=settings.start?settings.start:noop,end=settings.end?settings.end:noop,pi=settings.pi?settings.pi:noop,doctype=settings.doctype?settings.doctype:noop;return{parse:function(html){var matches,value,endRegExp,attrList,i,textData,name,isInternalElement,removeInternalElements,shortEndedElements,fillAttrsMap,isShortEnded,validate,elementRule,isValidElement,attr,attribsValue,validAttributesMap,validAttributePatterns,attributesRequired,attributesDefault,attributesForced,processHtml,anyAttributesRequired,selfClosing,tokenRegExp,attrRegExp,specialElements,attrValue,fixSelfClosing,index=0,stack=[],idCount=0,decode=$_g4jbz61rjducwnjq.decode,filteredUrlAttrs=$_8i2houjjducwnd2.makeMap("src,href,data,background,formaction,poster"),scriptUriRegExp=/((java|vb)script|mhtml):/i,dataUriRegExp=/^data:/i,processEndTag=function(name){var pos,i;for(pos=stack.length;pos--&&stack[pos].name!==name;);if(pos>=0){for(i=stack.length-1;i>=pos;i--)name=stack[i],name.valid&&end(name.name);stack.length=pos}},parseAttribute=function(match,name,value,val2,val3){var attrRule,i;if(name=name.toLowerCase(),value=name in fillAttrsMap?name:decode(value||val2||val3||""),validate&&!isInternalElement&&isValidPrefixAttrName(name)===!1){if(!(attrRule=validAttributesMap[name])&&validAttributePatterns){for(i=validAttributePatterns.length;i--&&(attrRule=validAttributePatterns[i],!attrRule.pattern.test(name)););i===-1&&(attrRule=null)}if(!attrRule)return;if(attrRule.validValues&&!(value in attrRule.validValues))return}if(filteredUrlAttrs[name]&&!settings.allow_script_urls){var uri=value.replace(/[\s\u0000-\u001F]+/g,"");try{uri=decodeURIComponent(uri)}catch(ex){uri=unescape(uri)}if(scriptUriRegExp.test(uri))return;if(!settings.allow_html_data_urls&&dataUriRegExp.test(uri)&&!/^data:image\//i.test(uri))return}isInternalElement&&(name in filteredUrlAttrs||0===name.indexOf("on"))||(attrList.map[name]=value,attrList.push({name:name,value:value}))};for(tokenRegExp=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),attrRegExp=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,shortEndedElements=schema.getShortEndedElements(),selfClosing=settings.self_closing_elements||schema.getSelfClosingElements(),fillAttrsMap=schema.getBoolAttrs(),validate=settings.validate,removeInternalElements=settings.remove_internals,fixSelfClosing=settings.fix_self_closing,specialElements=schema.getSpecialElements(),processHtml=html+">";matches=tokenRegExp.exec(processHtml);){if(index<matches.index&&text(decode(html.substr(index,matches.index-index))),value=matches[6])value=value.toLowerCase(),":"===value.charAt(0)&&(value=value.substr(1)),processEndTag(value);else if(value=matches[7]){if(matches.index+matches[0].length>html.length){text(decode(html.substr(matches.index))),index=matches.index+matches[0].length;continue}if(value=value.toLowerCase(),":"===value.charAt(0)&&(value=value.substr(1)),isShortEnded=value in shortEndedElements,fixSelfClosing&&selfClosing[value]&&stack.length>0&&stack[stack.length-1].name===value&&processEndTag(value),!validate||(elementRule=schema.getElementRule(value))){if(isValidElement=!0,validate&&(validAttributesMap=elementRule.attributes,validAttributePatterns=elementRule.attributePatterns),(attribsValue=matches[8])?(isInternalElement=attribsValue.indexOf("data-mce-type")!==-1,isInternalElement&&removeInternalElements&&(isValidElement=!1),attrList=[],attrList.map={},attribsValue.replace(attrRegExp,parseAttribute)):(attrList=[],attrList.map={}),validate&&!isInternalElement){if(attributesRequired=elementRule.attributesRequired,attributesDefault=elementRule.attributesDefault,attributesForced=elementRule.attributesForced,anyAttributesRequired=elementRule.removeEmptyAttrs,anyAttributesRequired&&!attrList.length&&(isValidElement=!1),attributesForced)for(i=attributesForced.length;i--;)attr=attributesForced[i],name=attr.name,attrValue=attr.value,"{$uid}"===attrValue&&(attrValue="mce_"+idCount++),attrList.map[name]=attrValue,attrList.push({name:name,value:attrValue});if(attributesDefault)for(i=attributesDefault.length;i--;)attr=attributesDefault[i],(name=attr.name)in attrList.map||(attrValue=attr.value,"{$uid}"===attrValue&&(attrValue="mce_"+idCount++),attrList.map[name]=attrValue,attrList.push({name:name,value:attrValue}));if(attributesRequired){for(i=attributesRequired.length;i--&&!(attributesRequired[i]in attrList.map););i===-1&&(isValidElement=!1)}if(attr=attrList.map["data-mce-bogus"]){if("all"===attr){index=findEndTagIndex(schema,html,tokenRegExp.lastIndex),tokenRegExp.lastIndex=index;continue}isValidElement=!1}}isValidElement&&start(value,attrList,isShortEnded)}else isValidElement=!1;if(endRegExp=specialElements[value]){endRegExp.lastIndex=index=matches.index+matches[0].length,(matches=endRegExp.exec(html))?(isValidElement&&(textData=html.substr(index,matches.index-index)),index=matches.index+matches[0].length):(textData=html.substr(index),index=html.length),isValidElement&&(textData.length>0&&text(textData,!0),end(value)),tokenRegExp.lastIndex=index;continue}isShortEnded||(attribsValue&&attribsValue.indexOf("/")===attribsValue.length-1?isValidElement&&end(value):stack.push({name:value,valid:isValidElement}))}else(value=matches[1])?(">"===value.charAt(0)&&(value=" "+value),settings.allow_conditional_comments||"[if"!==value.substr(0,3).toLowerCase()||(value=" "+value),comment(value)):(value=matches[2])?cdata(trimComments(value)):(value=matches[3])?doctype(value):(value=matches[4])&&pi(value,matches[5]);index=matches.index+matches[0].length}for(index<html.length&&text(decode(html.substr(index))),i=stack.length-1;i>=0;i--)value=stack[i],value.valid&&end(value.name)}}}function UndoManager(editor){var beforeBookmark,isFirstTypedCharacter,self=this,index=0,data=[],locks=0,isUnlocked=function(){return 0===locks},setTyping=function(typing){isUnlocked()&&(self.typing=typing)},setDirty=function(state){editor.setDirty(state)},addNonTypingUndoLevel=function(e){setTyping(!1),self.add({},e)},endTyping=function(){self.typing&&(setTyping(!1),self.add())};return editor.on("init",function(){self.add()}),editor.on("BeforeExecCommand",function(e){var cmd=e.command;"Undo"!==cmd&&"Redo"!==cmd&&"mceRepaint"!==cmd&&(endTyping(),self.beforeChange())}),editor.on("ExecCommand",function(e){var cmd=e.command;"Undo"!==cmd&&"Redo"!==cmd&&"mceRepaint"!==cmd&&addNonTypingUndoLevel(e)}),editor.on("ObjectResizeStart Cut",function(){self.beforeChange()}),editor.on("SaveContent ObjectResized blur",addNonTypingUndoLevel),editor.on("DragEnd",addNonTypingUndoLevel),editor.on("KeyUp",function(e){var keyCode=e.keyCode;e.isDefaultPrevented()||((keyCode>=33&&keyCode<=36||keyCode>=37&&keyCode<=40||45===keyCode||e.ctrlKey)&&(addNonTypingUndoLevel(),editor.nodeChanged()),46!==keyCode&&8!==keyCode||editor.nodeChanged(),isFirstTypedCharacter&&self.typing&&$_9n3h945bjducwo6y.isEq($_9n3h945bjducwo6y.createFromEditor(editor),data[0])===!1&&(editor.isDirty()===!1&&(setDirty(!0),editor.fire("change",{level:data[0],lastLevel:null})),editor.fire("TypingUndo"),isFirstTypedCharacter=!1,editor.nodeChanged()))}),editor.on("KeyDown",function(e){var keyCode=e.keyCode;if(!e.isDefaultPrevented()){if(keyCode>=33&&keyCode<=36||keyCode>=37&&keyCode<=40||45===keyCode)return void(self.typing&&addNonTypingUndoLevel(e));var modKey=e.ctrlKey&&!e.altKey||e.metaKey;!(keyCode<16||keyCode>20)||224===keyCode||91===keyCode||self.typing||modKey||(self.beforeChange(),setTyping(!0),self.add({},e),isFirstTypedCharacter=!0)}}),editor.on("MouseDown",function(e){self.typing&&addNonTypingUndoLevel(e)}),editor.addShortcut("meta+z","","Undo"),editor.addShortcut("meta+y,meta+shift+z","","Redo"),editor.on("AddUndo Undo Redo ClearUndos",function(e){e.isDefaultPrevented()||editor.nodeChanged()}),self={data:data,typing:!1,beforeChange:function(){isUnlocked()&&(beforeBookmark=$_epzga02kjducwnp2.getUndoBookmark(editor.selection))},add:function(level,event){var i,lastLevel,currentLevel,settings=editor.settings;if(currentLevel=$_9n3h945bjducwo6y.createFromEditor(editor),level=level||{},level=$_8i2houjjducwnd2.extend(level,currentLevel),isUnlocked()===!1||editor.removed)return null;if(lastLevel=data[index],editor.fire("BeforeAddUndo",{level:level,lastLevel:lastLevel,originalEvent:event}).isDefaultPrevented())return null;if(lastLevel&&$_9n3h945bjducwo6y.isEq(lastLevel,level))return null;if(data[index]&&(data[index].beforeBookmark=beforeBookmark),settings.custom_undo_redo_levels&&data.length>settings.custom_undo_redo_levels){for(i=0;i<data.length-1;i++)data[i]=data[i+1];data.length--,index=data.length}level.bookmark=$_epzga02kjducwnp2.getUndoBookmark(editor.selection),index<data.length-1&&(data.length=index+1),data.push(level),index=data.length-1;var args={level:level,lastLevel:lastLevel,originalEvent:event};return editor.fire("AddUndo",args),index>0&&(setDirty(!0),editor.fire("change",args)),level},undo:function(){var level;return self.typing&&(self.add(),self.typing=!1,setTyping(!1)),index>0&&(level=data[--index],$_9n3h945bjducwo6y.applyToEditor(editor,level,!0),setDirty(!0),editor.fire("undo",{level:level})),level},redo:function(){var level;return index<data.length-1&&(level=data[++index],$_9n3h945bjducwo6y.applyToEditor(editor,level,!1),setDirty(!0),editor.fire("redo",{level:level})),level},clear:function(){data=[],index=0,self.typing=!1,self.data=data,editor.fire("ClearUndos")},hasUndo:function(){return index>0||self.typing&&data[0]&&!$_9n3h945bjducwo6y.isEq($_9n3h945bjducwo6y.createFromEditor(editor),data[0])},hasRedo:function(){return index<data.length-1&&!self.typing},transact:function(callback){return endTyping(),self.beforeChange(),self.ignore(callback),self.add()},ignore:function(callback){try{locks++,callback()}finally{locks--}},extra:function(callback1,callback2){var lastLevel,bookmark;self.transact(callback1)&&(bookmark=data[index].bookmark,lastLevel=data[index-1],$_9n3h945bjducwo6y.applyToEditor(editor,lastLevel,!0),self.transact(callback2)&&(data[index-1].beforeBookmark=bookmark))}}}function FormatRegistry(editor){var formats={},get=function(name){return name?formats[name]:formats},register=function(name,format){name&&("string"!=typeof name?$_8i2houjjducwnd2.each(name,function(format,name){register(name,format)}):(format=format.length?format:[format],$_8i2houjjducwnd2.each(format,function(format){void 0===format.deep&&(format.deep=!format.selector),void 0===format.split&&(format.split=!format.selector||format.inline),void 0===format.remove&&format.selector&&!format.inline&&(format.remove="none"),format.selector&&format.inline&&(format.mixed=!0,format.block_expand=!0),"string"==typeof format.classes&&(format.classes=format.classes.split(/\s+/))}),formats[name]=format))},unregister=function(name){return name&&formats[name]&&delete formats[name],formats};return register($_892yun5ojducwo9d.get(editor.dom)),register(editor.settings.formats),{get:get,register:register,unregister:unregister}}function Formatter(editor){var formats=FormatRegistry(editor),formatChangeState=Cell(null);return $_283uwp5rjducwo9v.setup(editor),$_gizh813jjducwnu6.setup(editor),{get:formats.get,register:formats.register,unregister:formats.unregister,apply:$_60qu7r6jducwn73.curry($_3sj7pb5hjducwo7z.applyFormat,editor),remove:$_60qu7r6jducwn73.curry($_2kyh3s5kjducwo8m.remove,editor),toggle:$_60qu7r6jducwn73.curry($_arphd45qjducwo9s.toggle,editor,formats),match:$_60qu7r6jducwn73.curry($_4os6t23mjducwnv0.match,editor),matchAll:$_60qu7r6jducwn73.curry($_4os6t23mjducwnv0.matchAll,editor),matchNode:$_60qu7r6jducwn73.curry($_4os6t23mjducwnv0.matchNode,editor),canApply:$_60qu7r6jducwn73.curry($_4os6t23mjducwnv0.canApply,editor),formatChanged:$_60qu7r6jducwn73.curry($_gdfg785mjducwo99.formatChanged,editor,formatChangeState),getCssText:$_60qu7r6jducwn73.curry($_2e4qhs5pjducwo9j.getCssText,editor)}}function DomParser(settings,schema){void 0===schema&&(schema=Schema());var nodeFilters={},attributeFilters=[],matchedNodes={},matchedAttributes={};settings=settings||{},settings.validate=!("validate"in settings)||settings.validate,settings.root_name=settings.root_name||"body";var fixInvalidChildren=function(nodes){var ni,node,parent,parents,newParent,currentNode,tempNode,childNode,i,nonEmptyElements,whitespaceElements,nonSplitableElements,textBlockElements,specialElements,sibling,nextNode;for(nonSplitableElements=makeMap$4("tr,td,th,tbody,thead,tfoot,table"),nonEmptyElements=schema.getNonEmptyElements(),whitespaceElements=schema.getWhiteSpaceElements(),textBlockElements=schema.getTextBlockElements(),specialElements=schema.getSpecialElements(),ni=0;ni<nodes.length;ni++)if(node=nodes[ni],node.parent&&!node.fixed)if(textBlockElements[node.name]&&"li"===node.parent.name){for(sibling=node.next;sibling&&textBlockElements[sibling.name];)sibling.name="li",sibling.fixed=!0,node.parent.insert(sibling,node.parent),sibling=sibling.next;node.unwrap(node)}else{for(parents=[node],parent=node.parent;parent&&!schema.isValidChild(parent.name,node.name)&&!nonSplitableElements[parent.name];parent=parent.parent)parents.push(parent);if(parent&&parents.length>1){for(parents.reverse(),newParent=currentNode=filterNode(parents[0].clone()),i=0;i<parents.length-1;i++){for(schema.isValidChild(currentNode.name,parents[i].name)?(tempNode=filterNode(parents[i].clone()),currentNode.append(tempNode)):tempNode=currentNode,childNode=parents[i].firstChild;childNode&&childNode!==parents[i+1];)nextNode=childNode.next,tempNode.append(childNode),childNode=nextNode;currentNode=tempNode}isEmpty$1(schema,nonEmptyElements,whitespaceElements,newParent)?parent.insert(node,parents[0],!0):(parent.insert(newParent,parents[0],!0),parent.insert(node,newParent)),parent=parents[0],(isEmpty$1(schema,nonEmptyElements,whitespaceElements,parent)||hasOnlyChild(parent,"br"))&&parent.empty().remove()}else if(node.parent){if("li"===node.name){if((sibling=node.prev)&&("ul"===sibling.name||"ul"===sibling.name)){sibling.append(node);continue}if((sibling=node.next)&&("ul"===sibling.name||"ul"===sibling.name)){sibling.insert(node,sibling.firstChild,!0);continue}node.wrap(filterNode(new Node$2("ul",1)));continue}schema.isValidChild(node.parent.name,"div")&&schema.isValidChild("div",node.name)?node.wrap(filterNode(new Node$2("div",1))):specialElements[node.name]?node.empty().remove():node.unwrap()}}},filterNode=function(node){var i,name,list;name in nodeFilters&&(list=matchedNodes[name],list?list.push(node):matchedNodes[name]=[node]),i=attributeFilters.length;for(;i--;)(name=attributeFilters[i].name)in node.attributes.map&&(list=matchedAttributes[name],list?list.push(node):matchedAttributes[name]=[node]);return node},addNodeFilter=function(name,callback){each$19(explode$4(name),function(name){var list=nodeFilters[name];list||(nodeFilters[name]=list=[]),
list.push(callback)})},getNodeFilters=function(){var out=[];for(var name_1 in nodeFilters)nodeFilters.hasOwnProperty(name_1)&&out.push({name:name_1,callbacks:nodeFilters[name_1]});return out},addAttributeFilter=function(name,callback){each$19(explode$4(name),function(name){var i;for(i=0;i<attributeFilters.length;i++)if(attributeFilters[i].name===name)return void attributeFilters[i].callbacks.push(callback);attributeFilters.push({name:name,callbacks:[callback]})})},getAttributeFilters=function(){return[].concat(attributeFilters)},parse=function(html,args){var parser,nodes,i,l,fi,fl,list,name,blockElements,isInWhiteSpacePreservedElement,node,invalidChildren=[];args=args||{},matchedNodes={},matchedAttributes={},blockElements=extend$3(makeMap$4("script,style,head,html,body,title,meta,param"),schema.getBlockElements());var nonEmptyElements=schema.getNonEmptyElements(),children=schema.children,validate=settings.validate,rootBlockName="forced_root_block"in args?args.forced_root_block:settings.forced_root_block,whiteSpaceElements=schema.getWhiteSpaceElements(),isAllWhiteSpaceRegExp=/^[ \t\r\n]+$/,createNode=function(name,type){var list,node=new Node$2(name,type);return name in nodeFilters&&(list=matchedNodes[name],list?list.push(node):matchedNodes[name]=[node]),node},removeWhitespaceBefore=function(node){var textNode,textNodeNext,textVal,sibling,blockElements=schema.getBlockElements();for(textNode=node.prev;textNode&&3===textNode.type;){if(textVal=textNode.value.replace(/[ \t\r\n]+$/,""),textVal.length>0)return void(textNode.value=textVal);if(textNodeNext=textNode.next){if(3===textNodeNext.type&&textNodeNext.value.length){textNode=textNode.prev;continue}if(!blockElements[textNodeNext.name]&&"script"!==textNodeNext.name&&"style"!==textNodeNext.name){textNode=textNode.prev;continue}}sibling=textNode.prev,textNode.remove(),textNode=sibling}};parser=SaxParser$1({validate:validate,allow_script_urls:settings.allow_script_urls,allow_conditional_comments:settings.allow_conditional_comments,self_closing_elements:function(input){var name,output={};for(name in input)"li"!==name&&"p"!==name&&(output[name]=input[name]);return output}(schema.getSelfClosingElements()),cdata:function(text){node.append(createNode("#cdata",4)).value=text},text:function(text,raw){var textNode;isInWhiteSpacePreservedElement||(text=text.replace(/[ \t\r\n]+/g," "),isLineBreakNode(node.lastChild,blockElements)&&(text=text.replace(/^[ \t\r\n]+/,""))),0!==text.length&&(textNode=createNode("#text",3),textNode.raw=!!raw,node.append(textNode).value=text)},comment:function(text){node.append(createNode("#comment",8)).value=text},pi:function(name,text){node.append(createNode(name,7)).value=text,removeWhitespaceBefore(node)},doctype:function(text){var newNode;newNode=node.append(createNode("#doctype",10)),newNode.value=text,removeWhitespaceBefore(node)},start:function(name,attrs,empty){var newNode,attrFiltersLen,elementRule,attrName,parent;if(elementRule=validate?schema.getElementRule(name):{}){for(newNode=createNode(elementRule.outputName||name,1),newNode.attributes=attrs,newNode.shortEnded=empty,node.append(newNode),parent=children[node.name],parent&&children[newNode.name]&&!parent[newNode.name]&&invalidChildren.push(newNode),attrFiltersLen=attributeFilters.length;attrFiltersLen--;)(attrName=attributeFilters[attrFiltersLen].name)in attrs.map&&(list=matchedAttributes[attrName],list?list.push(newNode):matchedAttributes[attrName]=[newNode]);blockElements[name]&&removeWhitespaceBefore(newNode),empty||(node=newNode),!isInWhiteSpacePreservedElement&&whiteSpaceElements[name]&&(isInWhiteSpacePreservedElement=!0)}},end:function(name){var textNode,elementRule,text,sibling,tempNode;if(elementRule=validate?schema.getElementRule(name):{}){if(blockElements[name]&&!isInWhiteSpacePreservedElement){if((textNode=node.firstChild)&&3===textNode.type)if(text=textNode.value.replace(/^[ \t\r\n]+/,""),text.length>0)textNode.value=text,textNode=textNode.next;else for(sibling=textNode.next,textNode.remove(),textNode=sibling;textNode&&3===textNode.type;)text=textNode.value,sibling=textNode.next,(0===text.length||isAllWhiteSpaceRegExp.test(text))&&(textNode.remove(),textNode=sibling),textNode=sibling;if((textNode=node.lastChild)&&3===textNode.type)if(text=textNode.value.replace(/[ \t\r\n]+$/,""),text.length>0)textNode.value=text,textNode=textNode.prev;else for(sibling=textNode.prev,textNode.remove(),textNode=sibling;textNode&&3===textNode.type;)text=textNode.value,sibling=textNode.prev,(0===text.length||isAllWhiteSpaceRegExp.test(text))&&(textNode.remove(),textNode=sibling),textNode=sibling}if(isInWhiteSpacePreservedElement&&whiteSpaceElements[name]&&(isInWhiteSpacePreservedElement=!1),elementRule.removeEmpty&&isEmpty$1(schema,nonEmptyElements,whiteSpaceElements,node)&&!node.attributes.map.name&&!node.attr("id"))return tempNode=node.parent,blockElements[node.name]?node.empty().remove():node.unwrap(),void(node=tempNode);elementRule.paddEmpty&&(isPaddedWithNbsp(node)||isEmpty$1(schema,nonEmptyElements,whiteSpaceElements,node))&&paddEmptyNode(settings,args,blockElements,node),node=node.parent}}},schema);var rootNode=node=new Node$2(args.context||settings.root_name,11);if(parser.parse(html),validate&&invalidChildren.length&&(args.context?args.invalid=!0:fixInvalidChildren(invalidChildren)),rootBlockName&&("body"===rootNode.name||args.isRootContent)&&function(){var next,rootBlockNode,node=rootNode.firstChild,trim=function(rootBlockNode){rootBlockNode&&(node=rootBlockNode.firstChild,node&&3===node.type&&(node.value=node.value.replace(/^[ \t\r\n]+/,"")),(node=rootBlockNode.lastChild)&&3===node.type&&(node.value=node.value.replace(/[ \t\r\n]+$/,"")))};if(schema.isValidChild(rootNode.name,rootBlockName.toLowerCase())){for(;node;)next=node.next,3===node.type||1===node.type&&"p"!==node.name&&!blockElements[node.name]&&!node.attr("data-mce-type")?rootBlockNode?rootBlockNode.append(node):(rootBlockNode=createNode(rootBlockName,1),rootBlockNode.attr(settings.forced_root_block_attrs),rootNode.insert(rootBlockNode,node),rootBlockNode.append(node)):(trim(rootBlockNode),rootBlockNode=null),node=next;trim(rootBlockNode)}}(),!args.invalid){for(name in matchedNodes){for(list=nodeFilters[name],nodes=matchedNodes[name],fi=nodes.length;fi--;)nodes[fi].parent||nodes.splice(fi,1);for(i=0,l=list.length;i<l;i++)list[i](nodes,name,args)}for(i=0,l=attributeFilters.length;i<l;i++)if(list=attributeFilters[i],list.name in matchedAttributes){for(nodes=matchedAttributes[list.name],fi=nodes.length;fi--;)nodes[fi].parent||nodes.splice(fi,1);for(fi=0,fl=list.callbacks.length;fi<fl;fi++)list.callbacks[fi](nodes,list.name,args)}}return rootNode},exports={schema:schema,addAttributeFilter:addAttributeFilter,getAttributeFilters:getAttributeFilters,addNodeFilter:addNodeFilter,getNodeFilters:getNodeFilters,filterNode:filterNode,parse:parse};return register$2(exports,settings),$_bpec6l5zjducwobh.register(exports,settings),exports}function DomSerializer(settings,editor){var dom,schema,htmlParser,tempAttrs=["data-mce-selected"];dom=editor&&editor.dom?editor.dom:DOMUtils.DOM,schema=editor&&editor.schema?editor.schema:Schema(settings),settings.entity_encoding=settings.entity_encoding||"named",settings.remove_trailing_brs=!("remove_trailing_brs"in settings)||settings.remove_trailing_brs,htmlParser=DomParser(settings,schema),$_7ho7i95wjducwoaj.register(htmlParser,settings,dom);var serialize=function(node,parserArgs){var args=$_7sum4s5ujducwoab.merge({format:"html"},parserArgs?parserArgs:{}),targetNode=$_j6l1k5xjducwoao.process(editor,node,args),html=getHtmlFromNode(dom,targetNode,args),rootNode=parseHtml(htmlParser,dom,html,args);return"tree"===args.format?rootNode:toHtml(editor,settings,schema,rootNode,args)};return{schema:schema,addNodeFilter:htmlParser.addNodeFilter,addAttributeFilter:htmlParser.addAttributeFilter,serialize:serialize,addRules:function(rules){schema.addValidElements(rules)},setRules:function(rules){schema.setValidElements(rules)},addTempAttr:$_60qu7r6jducwn73.curry(addTempAttr,htmlParser,tempAttrs),getTempAttrs:function(){return tempAttrs}}}function DomSerializer$1(settings,editor){var domSerializer=DomSerializer(settings,editor);return{schema:domSerializer.schema,addNodeFilter:domSerializer.addNodeFilter,addAttributeFilter:domSerializer.addAttributeFilter,serialize:domSerializer.serialize,addRules:domSerializer.addRules,setRules:domSerializer.setRules,addTempAttr:domSerializer.addTempAttr,getTempAttrs:domSerializer.getTempAttrs}}function BookmarkManager(selection){return{getBookmark:$_60qu7r6jducwn73.curry($_dcl0u12jjducwnp0.getBookmark,selection),moveToBookmark:$_60qu7r6jducwn73.curry($_dcl0u12jjducwnp0.moveToBookmark,selection)}}function Quirks(editor){var each=$_8i2houjjducwnd2.each,BACKSPACE=$_1xm2zi59jducwo6l.BACKSPACE,DELETE=$_1xm2zi59jducwo6l.DELETE,dom=editor.dom,selection=editor.selection,settings=editor.settings,parser=editor.parser,isGecko=$_cum1kc9jducwn99.gecko,isIE=$_cum1kc9jducwn99.ie,isWebKit=$_cum1kc9jducwn99.webkit,mceInternalDataType=isIE?"Text":"URL",setEditorCommandState=function(cmd,state){try{editor.getDoc().execCommand(cmd,!1,state)}catch(ex){}},isDefaultPrevented=function(e){return e.isDefaultPrevented()},setMceInternalContent=function(e){var selectionHtml,internalContent;e.dataTransfer&&(editor.selection.isCollapsed()&&"IMG"===e.target.tagName&&selection.select(e.target),selectionHtml=editor.selection.getContent(),selectionHtml.length>0&&(internalContent="data:text/mce-internal,"+escape(editor.id)+","+escape(selectionHtml),e.dataTransfer.setData(mceInternalDataType,internalContent)))},getMceInternalContent=function(e){var internalContent;return e.dataTransfer&&(internalContent=e.dataTransfer.getData(mceInternalDataType))&&internalContent.indexOf("data:text/mce-internal,")>=0?(internalContent=internalContent.substr("data:text/mce-internal,".length).split(","),{id:unescape(internalContent[0]),html:unescape(internalContent[1])}):null},insertClipboardContents=function(content,internal){editor.queryCommandSupported("mceInsertClipboardContent")?editor.execCommand("mceInsertClipboardContent",!1,{content:content,internal:internal}):editor.execCommand("mceInsertContent",!1,content)},selectAll=function(){editor.shortcuts.add("meta+a",null,"SelectAll")},disableBackspaceIntoATable=function(){editor.on("keydown",function(e){if(!isDefaultPrevented(e)&&e.keyCode===BACKSPACE&&selection.isCollapsed()&&0===selection.getRng().startOffset){var previousSibling=selection.getNode().previousSibling;if(previousSibling&&previousSibling.nodeName&&"table"===previousSibling.nodeName.toLowerCase())return e.preventDefault(),!1}})},bodyHeight=function(){editor.inline||(editor.contentStyles.push("body {min-height: 150px}"),editor.on("click",function(e){var rng;if("HTML"===e.target.nodeName){if($_cum1kc9jducwn99.ie>11)return void editor.getBody().focus();rng=editor.selection.getRng(),editor.getBody().focus(),editor.selection.setRng(rng),editor.selection.normalize(),editor.nodeChanged()}}))},refreshContentEditable=function(){},isHidden=function(){var sel;return!isGecko||editor.removed?0:!(sel=editor.selection.getSel())||!sel.rangeCount||0===sel.rangeCount};return function(){editor.on("keydown",function(e){var rng,container,offset,root,parent;if(!isDefaultPrevented(e)&&e.keyCode===$_1xm2zi59jducwo6l.BACKSPACE&&(rng=selection.getRng(),container=rng.startContainer,offset=rng.startOffset,root=dom.getRoot(),parent=container,rng.collapsed&&0===offset)){for(;parent&&parent.parentNode&&parent.parentNode.firstChild===parent&&parent.parentNode!==root;)parent=parent.parentNode;"BLOCKQUOTE"===parent.tagName&&(editor.formatter.toggle("blockquote",null,parent),rng=dom.createRng(),rng.setStart(container,0),rng.setEnd(container,0),selection.setRng(rng))}})}(),function(){var serializeRng=function(rng){var body=dom.create("body"),contents=rng.cloneContents();return body.appendChild(contents),selection.serializer.serialize(body,{format:"html"})},allContentsSelected=function(rng){var selection=serializeRng(rng),allRng=dom.createRng();return allRng.selectNode(editor.getBody()),selection===serializeRng(allRng)};editor.on("keydown",function(e){var isCollapsed,body,keyCode=e.keyCode;if(!isDefaultPrevented(e)&&(keyCode===DELETE||keyCode===BACKSPACE)){if(isCollapsed=editor.selection.isCollapsed(),body=editor.getBody(),isCollapsed&&!dom.isEmpty(body))return;if(!isCollapsed&&!allContentsSelected(editor.selection.getRng()))return;e.preventDefault(),editor.setContent(""),body.firstChild&&dom.isBlock(body.firstChild)?editor.selection.setCursorLocation(body.firstChild,0):editor.selection.setCursorLocation(body,0),editor.nodeChanged()}})}(),$_cum1kc9jducwn99.windowsPhone||function(){editor.on("keyup focusin mouseup",function(e){$_1xm2zi59jducwo6l.modifierPressed(e)||selection.normalize()},!0)}(),isWebKit&&(function(){editor.settings.content_editable||dom.bind(editor.getDoc(),"mousedown mouseup",function(e){var rng;if(e.target===editor.getDoc().documentElement)if(rng=selection.getRng(),editor.getBody().focus(),"mousedown"===e.type){if(isCaretContainer(rng.startContainer))return;selection.placeCaretAt(e.clientX,e.clientY)}else selection.setRng(rng)})}(),function(){editor.on("click",function(e){var target=e.target;/^(IMG|HR)$/.test(target.nodeName)&&"false"!==dom.getContentEditableParent(target)&&(e.preventDefault(),editor.selection.select(target),editor.nodeChanged()),"A"===target.nodeName&&dom.hasClass(target,"mce-item-anchor")&&(e.preventDefault(),selection.select(target))})}(),function(){settings.forced_root_block&&editor.on("init",function(){setEditorCommandState("DefaultParagraphSeparator",settings.forced_root_block)})}(),function(){editor.on("init",function(){editor.dom.bind(editor.getBody(),"submit",function(e){e.preventDefault()})})}(),disableBackspaceIntoATable(),function(){parser.addNodeFilter("br",function(nodes){for(var i=nodes.length;i--;)"Apple-interchange-newline"===nodes[i].attr("class")&&nodes[i].remove()})}(),$_cum1kc9jducwn99.iOS?(function(){editor.inline||editor.on("keydown",function(){document.activeElement===document.body&&editor.getWin().focus()})}(),bodyHeight(),function(){editor.on("click",function(e){var elm=e.target;do{if("A"===elm.tagName)return void e.preventDefault()}while(elm=elm.parentNode)}),editor.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")}()):selectAll()),$_cum1kc9jducwn99.ie>=11&&(bodyHeight(),disableBackspaceIntoATable()),$_cum1kc9jducwn99.ie&&(selectAll(),function(){setEditorCommandState("AutoUrlDetect",!1)}(),function(){editor.on("dragstart",function(e){setMceInternalContent(e)}),editor.on("drop",function(e){if(!isDefaultPrevented(e)){var internalContent=getMceInternalContent(e);if(internalContent&&internalContent.id!==editor.id){e.preventDefault();var rng=$_ghraby68jducwodg.fromPoint(e.x,e.y,editor.getDoc());selection.setRng(rng),insertClipboardContents(internalContent.html,!0)}}})}()),isGecko&&(!function(){editor.on("keydown",function(e){if(!isDefaultPrevented(e)&&e.keyCode===BACKSPACE){if(!editor.getBody().getElementsByTagName("hr").length)return;if(selection.isCollapsed()&&0===selection.getRng().startOffset){var node=selection.getNode(),previousSibling=node.previousSibling;if("HR"===node.nodeName)return dom.remove(node),void e.preventDefault();previousSibling&&previousSibling.nodeName&&"hr"===previousSibling.nodeName.toLowerCase()&&(dom.remove(previousSibling),e.preventDefault())}}})}(),function(){Range.prototype.getClientRects||editor.on("mousedown",function(e){if(!isDefaultPrevented(e)&&"HTML"===e.target.nodeName){var body_1=editor.getBody();body_1.blur(),$_83mf8ygjducwnbc.setEditorTimeout(editor,function(){body_1.focus()})}})}(),function(){var getAttributeApplyFunction=function(){var template=dom.getAttribs(selection.getStart().cloneNode(!1));return function(){var target=selection.getStart();target!==editor.getBody()&&(dom.setAttrib(target,"style",null),each(template,function(attr){target.setAttributeNode(attr.cloneNode(!0))}))}},isSelectionAcrossElements=function(){return!selection.isCollapsed()&&dom.getParent(selection.getStart(),dom.isBlock)!==dom.getParent(selection.getEnd(),dom.isBlock)};editor.on("keypress",function(e){var applyAttributes;if(!isDefaultPrevented(e)&&(8===e.keyCode||46===e.keyCode)&&isSelectionAcrossElements())return applyAttributes=getAttributeApplyFunction(),editor.getDoc().execCommand("delete",!1,null),applyAttributes(),e.preventDefault(),!1}),dom.bind(editor.getDoc(),"cut",function(e){var applyAttributes;!isDefaultPrevented(e)&&isSelectionAcrossElements()&&(applyAttributes=getAttributeApplyFunction(),$_83mf8ygjducwnbc.setEditorTimeout(editor,function(){applyAttributes()}))})}(),function(){var setOpts=function(){setEditorCommandState("StyleWithCSS",!1),setEditorCommandState("enableInlineTableEditing",!1),settings.object_resizing||setEditorCommandState("enableObjectResizing",!1)};settings.readonly||editor.on("BeforeExecCommand MouseDown",setOpts)}(),function(){var fixLinks=function(){each(dom.select("a"),function(node){var parentNode=node.parentNode,root=dom.getRoot();if(parentNode.lastChild===node){for(;parentNode&&!dom.isBlock(parentNode);){if(parentNode.parentNode.lastChild!==parentNode||parentNode===root)return;parentNode=parentNode.parentNode}dom.add(parentNode,"br",{"data-mce-bogus":1})}})};editor.on("SetContent ExecCommand",function(e){"setcontent"!==e.type&&"mceInsertLink"!==e.command||fixLinks()})}(),function(){editor.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")}(),function(){$_cum1kc9jducwn99.mac&&editor.on("keydown",function(e){!$_1xm2zi59jducwo6l.metaKeyPressed(e)||e.shiftKey||37!==e.keyCode&&39!==e.keyCode||(e.preventDefault(),editor.selection.getSel().modify("move",37===e.keyCode?"backward":"forward","lineboundary"))})}(),disableBackspaceIntoATable()),{refreshContentEditable:refreshContentEditable,isHidden:isHidden}}function RangeUtils(dom){return{walk:function(rng,callback){return $_ee8wld5ljducwo96.walk(dom,rng,callback)},split:$_9e24g13njducwnv4.split,normalize:function(rng){return $_altsby3xjducwnz5.normalize(dom,rng).fold($_60qu7r6jducwn73.constant(!1),function(normalizedRng){return rng.setStart(normalizedRng.startContainer,normalizedRng.startOffset),rng.setEnd(normalizedRng.endContainer,normalizedRng.endOffset),!0})}}}var opera,webkit,ie,ie11,ie12,gecko,mac,iDevice,android,fileApi,phone,tablet,windowsPhone,noop=function(){},noarg=function(f){return function(){return f()}},compose=function(fa,fb){return function(){return fa(fb.apply(null,arguments))}},constant=function(value){return function(){return value}},identity=function(x){return x},tripleEquals=function(a,b){return a===b},curry=function(f){for(var args=new Array(arguments.length-1),i=1;i<arguments.length;i++)args[i-1]=arguments[i];return function(){for(var newArgs=new Array(arguments.length),j=0;j<newArgs.length;j++)newArgs[j]=arguments[j];var all=args.concat(newArgs);return f.apply(null,all)}},not=function(f){return function(){return!f.apply(null,arguments)}},die=function(msg){return function(){throw new Error(msg)}},apply=function(f){return f()},call=function(f){f()},never=constant(!1),always=constant(!0),$_60qu7r6jducwn73={noop:noop,noarg:noarg,compose:compose,constant:constant,identity:identity,tripleEquals:tripleEquals,curry:curry,not:not,die:die,apply:apply,call:call,never:never,always:always},never$1=$_60qu7r6jducwn73.never,always$1=$_60qu7r6jducwn73.always,none=function(){return NONE},NONE=function(){var eq=function(o){return o.isNone()},call=function(thunk){return thunk()},id=function(n){return n},noop=function(){},me={fold:function(n,s){return n()},is:never$1,isSome:never$1,isNone:always$1,getOr:id,getOrThunk:call,getOrDie:function(msg){throw new Error(msg||"error: getOrDie called on none.")},or:id,orThunk:call,map:none,ap:none,each:noop,bind:none,flatten:none,exists:never$1,forall:always$1,filter:none,equals:eq,equals_:eq,toArray:function(){return[]},toString:$_60qu7r6jducwn73.constant("none()")};return Object.freeze&&Object.freeze(me),me}(),some=function(a){var constant_a=function(){return a},self=function(){return me},map=function(f){return some(f(a))},bind=function(f){return f(a)},me={fold:function(n,s){return s(a)},is:function(v){return a===v},isSome:always$1,isNone:never$1,getOr:constant_a,getOrThunk:constant_a,getOrDie:constant_a,or:self,orThunk:self,map:map,ap:function(optfab){return optfab.fold(none,function(fab){return some(fab(a))})},each:function(f){f(a)},bind:bind,flatten:constant_a,exists:bind,forall:bind,filter:function(f){return f(a)?me:NONE},equals:function(o){return o.is(a)},equals_:function(o,elementEq){return o.fold(never$1,function(b){return elementEq(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return me},from=function(value){return null===value||void 0===value?NONE:some(value)},Option={some:some,none:none,from:from},rawIndexOf=function(){var pIndexOf=Array.prototype.indexOf,fastIndex=function(xs,x){return pIndexOf.call(xs,x)},slowIndex=function(xs,x){return slowIndexOf(xs,x)};return void 0===pIndexOf?slowIndex:fastIndex}(),indexOf=function(xs,x){var r=rawIndexOf(xs,x);return r===-1?Option.none():Option.some(r)},contains=function(xs,x){return rawIndexOf(xs,x)>-1},exists=function(xs,pred){return findIndex(xs,pred).isSome()},range=function(num,f){for(var r=[],i=0;i<num;i++)r.push(f(i));return r},chunk=function(array,size){for(var r=[],i=0;i<array.length;i+=size){var s=array.slice(i,i+size);r.push(s)}return r},map=function(xs,f){for(var len=xs.length,r=new Array(len),i=0;i<len;i++){var x=xs[i];r[i]=f(x,i,xs)}return r},each=function(xs,f){for(var i=0,len=xs.length;i<len;i++){f(xs[i],i,xs)}},eachr=function(xs,f){for(var i=xs.length-1;i>=0;i--){f(xs[i],i,xs)}},partition=function(xs,pred){for(var pass=[],fail=[],i=0,len=xs.length;i<len;i++){var x=xs[i];(pred(x,i,xs)?pass:fail).push(x)}return{pass:pass,fail:fail}},filter=function(xs,pred){for(var r=[],i=0,len=xs.length;i<len;i++){var x=xs[i];pred(x,i,xs)&&r.push(x)}return r},groupBy=function(xs,f){if(0===xs.length)return[];for(var wasType=f(xs[0]),r=[],group=[],i=0,len=xs.length;i<len;i++){var x=xs[i],type=f(x);type!==wasType&&(r.push(group),group=[]),wasType=type,group.push(x)}return 0!==group.length&&r.push(group),r},foldr=function(xs,f,acc){return eachr(xs,function(x){acc=f(acc,x)}),acc},foldl=function(xs,f,acc){return each(xs,function(x){acc=f(acc,x)}),acc},find=function(xs,pred){for(var i=0,len=xs.length;i<len;i++){var x=xs[i];if(pred(x,i,xs))return Option.some(x)}return Option.none()},findIndex=function(xs,pred){for(var i=0,len=xs.length;i<len;i++){if(pred(xs[i],i,xs))return Option.some(i)}return Option.none()},slowIndexOf=function(xs,x){for(var i=0,len=xs.length;i<len;++i)if(xs[i]===x)return i;return-1},push=Array.prototype.push,flatten=function(xs){for(var r=[],i=0,len=xs.length;i<len;++i){if(!Array.prototype.isPrototypeOf(xs[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+xs);push.apply(r,xs[i])}return r},bind=function(xs,f){var output=map(xs,f);return flatten(output)},forall=function(xs,pred){for(var i=0,len=xs.length;i<len;++i){if(pred(xs[i],i,xs)!==!0)return!1}return!0},equal=function(a1,a2){return a1.length===a2.length&&forall(a1,function(x,i){return x===a2[i]})},slice=Array.prototype.slice,reverse=function(xs){var r=slice.call(xs,0);return r.reverse(),r},difference=function(a1,a2){return filter(a1,function(x){return!contains(a2,x)})},mapToObject=function(xs,f){for(var r={},i=0,len=xs.length;i<len;i++){var x=xs[i];r[String(x)]=f(x,i)}return r},pure=function(x){return[x]},sort=function(xs,comparator){var copy=slice.call(xs,0);return copy.sort(comparator),copy},head=function(xs){return 0===xs.length?Option.none():Option.some(xs[0])},last=function(xs){return 0===xs.length?Option.none():Option.some(xs[xs.length-1])},$_2dw1bj4jducwn6g={map:map,each:each,eachr:eachr,partition:partition,filter:filter,groupBy:groupBy,indexOf:indexOf,foldr:foldr,foldl:foldl,find:find,findIndex:findIndex,flatten:flatten,bind:bind,forall:forall,exists:exists,contains:contains,equal:equal,reverse:reverse,chunk:chunk,difference:difference,mapToObject:mapToObject,pure:pure,sort:sort,range:range,head:head,last:last},global="undefined"!=typeof window?window:Function("return this;")(),path=function(parts,scope){for(var o=void 0!==scope&&null!==scope?scope:global,i=0;i<parts.length&&void 0!==o&&null!==o;++i)o=o[parts[i]];return o},resolve=function(p,scope){var parts=p.split(".");return path(parts,scope)},step=function(o,part){return void 0!==o[part]&&null!==o[part]||(o[part]={}),o[part]},forge=function(parts,target){for(var o=void 0!==target?target:global,i=0;i<parts.length;++i)o=step(o,parts[i]);return o},namespace=function(name,target){var parts=name.split(".");return forge(parts,target)},$_4e16w2cjducwn9k={path:path,resolve:resolve,forge:forge,namespace:namespace},unsafe=function(name,scope){return $_4e16w2cjducwn9k.resolve(name,scope)},getOrDie=function(name,scope){var actual=unsafe(name,scope);if(void 0===actual||null===actual)throw name+" not available on this browser";return actual},$_850zr7bjducwn9g={getOrDie:getOrDie},url=function(){return $_850zr7bjducwn9g.getOrDie("URL")},createObjectURL=function(blob){return url().createObjectURL(blob)},revokeObjectURL=function(u){url().revokeObjectURL(u)},$_bqa5nlajducwn9f={createObjectURL:createObjectURL,revokeObjectURL:revokeObjectURL},nav=navigator,userAgent=nav.userAgent,matchMediaQuery=function(query){return"matchMedia"in window&&matchMedia(query).matches};opera=!1,android=/Android/.test(userAgent),webkit=/WebKit/.test(userAgent),ie=!webkit&&!opera&&/MSIE/gi.test(userAgent)&&/Explorer/gi.test(nav.appName),ie=ie&&/MSIE (\w+)\./.exec(userAgent)[1],ie11=userAgent.indexOf("Trident/")!==-1&&(userAgent.indexOf("rv:")!==-1||nav.appName.indexOf("Netscape")!==-1)&&11,ie12=userAgent.indexOf("Edge/")!==-1&&!ie&&!ie11&&12,ie=ie||ie11||ie12,gecko=!webkit&&!ie11&&/Gecko/.test(userAgent),mac=userAgent.indexOf("Mac")!==-1,iDevice=/(iPad|iPhone)/.test(userAgent),fileApi="FormData"in window&&"FileReader"in window&&"URL"in window&&!!$_bqa5nlajducwn9f.createObjectURL,phone=matchMediaQuery("only screen and (max-device-width: 480px)")&&(android||iDevice),tablet=matchMediaQuery("only screen and (min-width: 800px)")&&(android||iDevice),windowsPhone=userAgent.indexOf("Windows Phone")!==-1,ie12&&(webkit=!1);var requestAnimationFramePromise,contentEditable=!iDevice||fileApi||parseInt(userAgent.match(/AppleWebKit\/(\d*)/)[1],10)>=534,$_cum1kc9jducwn99={opera:opera,webkit:webkit,ie:ie,gecko:gecko,mac:mac,iOS:iDevice,android:android,contentEditable:contentEditable,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!==ie,range:window.getSelection&&"Range"in window,documentMode:ie&&!ie12?document.documentMode||7:10,fileApi:fileApi,ceFalse:ie===!1||ie>8,cacheSuffix:"",container:null,overrideViewPort:null,experimentalShadowDom:!1,canHaveCSP:ie===!1||ie>11,desktop:!phone&&!tablet,windowsPhone:windowsPhone},promiseObj=window.Promise?window.Promise:function(){function bind(fn,thisArg){return function(){fn.apply(thisArg,arguments)}}function handle(deferred){var me=this;if(null===this._state)return void this._deferreds.push(deferred);asap(function(){var cb=me._state?deferred.onFulfilled:deferred.onRejected;if(null===cb)return void(me._state?deferred.resolve:deferred.reject)(me._value);var ret;try{ret=cb(me._value)}catch(e){return void deferred.reject(e)}deferred.resolve(ret)})}function resolve(newValue){try{if(newValue===this)throw new TypeError("A promise cannot be resolved with itself.");if(newValue&&("object"==typeof newValue||"function"==typeof newValue)){var then=newValue.then;if("function"==typeof then)return void doResolve(bind(then,newValue),bind(resolve,this),bind(reject,this))}this._state=!0,this._value=newValue,finale.call(this)}catch(e){reject.call(this,e)}}function reject(newValue){this._state=!1,this._value=newValue,finale.call(this)}function finale(){for(var i=0,len=this._deferreds.length;i<len;i++)handle.call(this,this._deferreds[i]);this._deferreds=null}function Handler(onFulfilled,onRejected,resolve,reject){this.onFulfilled="function"==typeof onFulfilled?onFulfilled:null,this.onRejected="function"==typeof onRejected?onRejected:null,this.resolve=resolve,this.reject=reject}function doResolve(fn,onFulfilled,onRejected){var done=!1;try{fn(function(value){done||(done=!0,onFulfilled(value))},function(reason){done||(done=!0,onRejected(reason))})}catch(ex){if(done)return;done=!0,onRejected(ex)}}var isArray=Array.isArray||function(value){return"[object Array]"===Object.prototype.toString.call(value)},Promise=function(fn){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof fn)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],doResolve(fn,bind(resolve,this),bind(reject,this))},asap=Promise.immediateFn||"function"==typeof setImmediate&&setImmediate||function(fn){setTimeout(fn,1)};return Promise.prototype.catch=function(onRejected){return this.then(null,onRejected)},Promise.prototype.then=function(onFulfilled,onRejected){var me=this;return new Promise(function(resolve,reject){handle.call(me,new Handler(onFulfilled,onRejected,resolve,reject))})},Promise.all=function(){var args=Array.prototype.slice.call(1===arguments.length&&isArray(arguments[0])?arguments[0]:arguments);return new Promise(function(resolve,reject){function res(i,val){try{if(val&&("object"==typeof val||"function"==typeof val)){var then=val.then;if("function"==typeof then)return void then.call(val,function(val){res(i,val)},reject)}args[i]=val,0==--remaining&&resolve(args)}catch(ex){reject(ex)}}if(0===args.length)return resolve([]);for(var remaining=args.length,i=0;i<args.length;i++)res(i,args[i])})},Promise.resolve=function(value){return value&&"object"==typeof value&&value.constructor===Promise?value:new Promise(function(resolve){resolve(value)})},Promise.reject=function(value){return new Promise(function(resolve,reject){reject(value)})},Promise.race=function(values){return new Promise(function(resolve,reject){for(var i=0,len=values.length;i<len;i++)values[i].then(resolve,reject)})},Promise}(),requestAnimationFrame=function(callback,element){var i,requestAnimationFrameFunc=window.requestAnimationFrame,vendors=["ms","moz","webkit"],featurefill=function(callback){window.setTimeout(callback,0)};for(i=0;i<vendors.length&&!requestAnimationFrameFunc;i++)requestAnimationFrameFunc=window[vendors[i]+"RequestAnimationFrame"];requestAnimationFrameFunc||(requestAnimationFrameFunc=featurefill),requestAnimationFrameFunc(callback,element)},wrappedSetTimeout=function(callback,time){return"number"!=typeof time&&(time=0),setTimeout(callback,time)},wrappedSetInterval=function(callback,time){return"number"!=typeof time&&(time=1),setInterval(callback,time)},wrappedClearTimeout=function(id){return clearTimeout(id)},wrappedClearInterval=function(id){return clearInterval(id)},debounce=function(callback,time){var timer,func;return func=function(){var args=arguments;clearTimeout(timer),timer=wrappedSetTimeout(function(){callback.apply(this,args)},time)},func.stop=function(){clearTimeout(timer)},func},$_83mf8ygjducwnbc={requestAnimationFrame:function(callback,element){if(requestAnimationFramePromise)return void requestAnimationFramePromise.then(callback);requestAnimationFramePromise=new promiseObj(function(resolve){element||(element=document.body),requestAnimationFrame(resolve,element)}).then(callback)},setTimeout:wrappedSetTimeout,setInterval:wrappedSetInterval,setEditorTimeout:function(editor,callback,time){return wrappedSetTimeout(function(){editor.removed||callback()},time)},setEditorInterval:function(editor,callback,time){var timer;return timer=wrappedSetInterval(function(){editor.removed?clearInterval(timer):callback()},time)},debounce:debounce,throttle:debounce,clearInterval:wrappedClearInterval,clearTimeout:wrappedClearTimeout},mouseEventRe=/^(?:mouse|contextmenu)|click/,deprecated={
keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},hasIsDefaultPrevented=function(event){return event.isDefaultPrevented===returnTrue||event.isDefaultPrevented===returnFalse},returnFalse=function(){return!1},returnTrue=function(){return!0},addEvent=function(target,name,callback,capture){target.addEventListener?target.addEventListener(name,callback,capture||!1):target.attachEvent&&target.attachEvent("on"+name,callback)},removeEvent=function(target,name,callback,capture){target.removeEventListener?target.removeEventListener(name,callback,capture||!1):target.detachEvent&&target.detachEvent("on"+name,callback)},getTargetFromShadowDom=function(event,defaultTarget){var path,target=defaultTarget;return path=event.path,path&&path.length>0&&(target=path[0]),event.composedPath&&(path=event.composedPath())&&path.length>0&&(target=path[0]),target},fix=function(originalEvent,data){var name,event=data||{};for(name in originalEvent)deprecated[name]||(event[name]=originalEvent[name]);if(event.target||(event.target=event.srcElement||document),$_cum1kc9jducwn99.experimentalShadowDom&&(event.target=getTargetFromShadowDom(originalEvent,event.target)),originalEvent&&mouseEventRe.test(originalEvent.type)&&void 0===originalEvent.pageX&&void 0!==originalEvent.clientX){var eventDoc=event.target.ownerDocument||document,doc=eventDoc.documentElement,body=eventDoc.body;event.pageX=originalEvent.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),event.pageY=originalEvent.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}return event.preventDefault=function(){event.isDefaultPrevented=returnTrue,originalEvent&&(originalEvent.preventDefault?originalEvent.preventDefault():originalEvent.returnValue=!1)},event.stopPropagation=function(){event.isPropagationStopped=returnTrue,originalEvent&&(originalEvent.stopPropagation?originalEvent.stopPropagation():originalEvent.cancelBubble=!0)},event.stopImmediatePropagation=function(){event.isImmediatePropagationStopped=returnTrue,event.stopPropagation()},hasIsDefaultPrevented(event)===!1&&(event.isDefaultPrevented=returnFalse,event.isPropagationStopped=returnFalse,event.isImmediatePropagationStopped=returnFalse),void 0===event.metaKey&&(event.metaKey=!1),event},bindOnReady=function(win,callback,eventUtils){var doc=win.document,event={type:"ready"};if(eventUtils.domLoaded)return void callback(event);var isDocReady=function(){return"complete"===doc.readyState||"interactive"===doc.readyState&&doc.body},readyHandler=function(){eventUtils.domLoaded||(eventUtils.domLoaded=!0,callback(event))},waitForDomLoaded=function(){isDocReady()&&(removeEvent(doc,"readystatechange",waitForDomLoaded),readyHandler())},tryScroll=function(){try{doc.documentElement.doScroll("left")}catch(ex){return void $_83mf8ygjducwnbc.setTimeout(tryScroll)}readyHandler()};!doc.addEventListener||$_cum1kc9jducwn99.ie&&$_cum1kc9jducwn99.ie<11?(addEvent(doc,"readystatechange",waitForDomLoaded),doc.documentElement.doScroll&&win.self===win.top&&tryScroll()):isDocReady()?readyHandler():addEvent(win,"DOMContentLoaded",readyHandler),addEvent(win,"load",readyHandler)},EventUtils=function(){var count,expando,hasFocusIn,hasMouseEnterLeave,mouseEnterLeave,self=this,events={};expando="mce-data-"+(+new Date).toString(32),hasMouseEnterLeave="onmouseenter"in document.documentElement,hasFocusIn="onfocusin"in document.documentElement,mouseEnterLeave={mouseenter:"mouseover",mouseleave:"mouseout"},count=1,self.domLoaded=!1,self.events=events;var executeHandlers=function(evt,id){var callbackList,i,l,callback,container=events[id];if(callbackList=container&&container[evt.type])for(i=0,l=callbackList.length;i<l;i++)if(callback=callbackList[i],callback&&callback.func.call(callback.scope,evt)===!1&&evt.preventDefault(),evt.isImmediatePropagationStopped())return};self.bind=function(target,names,callback,scope){var id,callbackList,i,name,fakeName,nativeHandler,capture,win=window,defaultNativeHandler=function(evt){executeHandlers(fix(evt||win.event),id)};if(target&&3!==target.nodeType&&8!==target.nodeType){for(target[expando]?id=target[expando]:(id=count++,target[expando]=id,events[id]={}),scope=scope||target,names=names.split(" "),i=names.length;i--;)name=names[i],nativeHandler=defaultNativeHandler,fakeName=capture=!1,"DOMContentLoaded"===name&&(name="ready"),self.domLoaded&&"ready"===name&&"complete"===target.readyState?callback.call(scope,fix({type:name})):(hasMouseEnterLeave||(fakeName=mouseEnterLeave[name])&&(nativeHandler=function(evt){var current,related;if(current=evt.currentTarget,(related=evt.relatedTarget)&&current.contains)related=current.contains(related);else for(;related&&related!==current;)related=related.parentNode;related||(evt=fix(evt||win.event),evt.type="mouseout"===evt.type?"mouseleave":"mouseenter",evt.target=current,executeHandlers(evt,id))}),hasFocusIn||"focusin"!==name&&"focusout"!==name||(capture=!0,fakeName="focusin"===name?"focus":"blur",nativeHandler=function(evt){evt=fix(evt||win.event),evt.type="focus"===evt.type?"focusin":"focusout",executeHandlers(evt,id)}),callbackList=events[id][name],callbackList?"ready"===name&&self.domLoaded?callback({type:name}):callbackList.push({func:callback,scope:scope}):(events[id][name]=callbackList=[{func:callback,scope:scope}],callbackList.fakeName=fakeName,callbackList.capture=capture,callbackList.nativeHandler=nativeHandler,"ready"===name?bindOnReady(target,nativeHandler,self):addEvent(target,fakeName||name,nativeHandler,capture)));return target=callbackList=0,callback}},self.unbind=function(target,names,callback){var id,callbackList,i,ci,name,eventMap;if(!target||3===target.nodeType||8===target.nodeType)return self;if(id=target[expando]){if(eventMap=events[id],names){for(names=names.split(" "),i=names.length;i--;)if(name=names[i],callbackList=eventMap[name]){if(callback)for(ci=callbackList.length;ci--;)if(callbackList[ci].func===callback){var nativeHandler=callbackList.nativeHandler,fakeName=callbackList.fakeName,capture=callbackList.capture;callbackList=callbackList.slice(0,ci).concat(callbackList.slice(ci+1)),callbackList.nativeHandler=nativeHandler,callbackList.fakeName=fakeName,callbackList.capture=capture,eventMap[name]=callbackList}callback&&0!==callbackList.length||(delete eventMap[name],removeEvent(target,callbackList.fakeName||name,callbackList.nativeHandler,callbackList.capture))}}else{for(name in eventMap)callbackList=eventMap[name],removeEvent(target,callbackList.fakeName||name,callbackList.nativeHandler,callbackList.capture);eventMap={}}for(name in eventMap)return self;delete events[id];try{delete target[expando]}catch(ex){target[expando]=null}}return self},self.fire=function(target,name,args){var id;if(!target||3===target.nodeType||8===target.nodeType)return self;args=fix(null,args),args.type=name,args.target=target;do{id=target[expando],id&&executeHandlers(args,id),target=target.parentNode||target.ownerDocument||target.defaultView||target.parentWindow}while(target&&!args.isPropagationStopped());return self},self.clean=function(target){var i,children,unbind=self.unbind;if(!target||3===target.nodeType||8===target.nodeType)return self;if(target[expando]&&unbind(target),target.getElementsByTagName||(target=target.document),target&&target.getElementsByTagName)for(unbind(target),children=target.getElementsByTagName("*"),i=children.length;i--;)target=children[i],target[expando]&&unbind(target);return self},self.destroy=function(){events={}},self.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}};EventUtils.Event=new EventUtils,EventUtils.Event.bind(window,"ready",function(){});var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document$1,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains$1,expando="sizzle"+-new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){return a===b&&(hasDuplicate=!0),0},strundefined="undefined",MAX_NEGATIVE=1<<31,hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push$1=arr.push,slice$1=arr.slice,indexOf$1=arr.indexOf||function(elem){for(var i=0,len=this.length;i<len;i++)if(this[i]===elem)return i;return-1},whitespace="[\\x20\\t\\r\\n\\f]",identifier="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",attributes="\\["+whitespace+"*("+identifier+")(?:"+whitespace+"*([*^$|!~]?=)"+whitespace+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+whitespace+"*\\]",pseudos=":("+identifier+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|.*)\\)|)",rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+identifier+")"),CLASS:new RegExp("^\\.("+identifier+")"),TAG:new RegExp("^("+identifier+"|[*])"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!==high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,1023&high|56320)};try{push$1.apply(arr=slice$1.call(preferredDoc.childNodes),preferredDoc.childNodes),arr[preferredDoc.childNodes.length].nodeType}catch(e){push$1={apply:arr.length?function(target,els){push_native.apply(target,slice$1.call(els))}:function(target,els){for(var j=target.length,i=0;target[j++]=els[i++];);target.length=j-1}}}var Sizzle=function(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument||context:preferredDoc)!==document$1&&setDocument(context),context=context||document$1,results=results||[],!selector||"string"!=typeof selector)return results;if(1!==(nodeType=context.nodeType)&&9!==nodeType)return[];if(documentIsHTML&&!seed){if(match=rquickExpr.exec(selector))if(m=match[1]){if(9===nodeType){if(!(elem=context.getElementById(m))||!elem.parentNode)return results;if(elem.id===m)return results.push(elem),results}else if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains$1(context,elem)&&elem.id===m)return results.push(elem),results}else{if(match[2])return push$1.apply(results,context.getElementsByTagName(selector)),results;if((m=match[3])&&support.getElementsByClassName)return push$1.apply(results,context.getElementsByClassName(m)),results}if(support.qsa&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(nid=old=expando,newContext=context,newSelector=9===nodeType&&selector,1===nodeType&&"object"!==context.nodeName.toLowerCase()){for(groups=tokenize(selector),(old=context.getAttribute("id"))?nid=old.replace(/'|\\/g,"\\$&"):context.setAttribute("id",nid),nid="[id='"+nid+"'] ",i=groups.length;i--;)groups[i]=nid+toSelector(groups[i]);newContext=rsibling.test(selector)&&testContext(context.parentNode)||context,newSelector=groups.join(",")}if(newSelector)try{return push$1.apply(results,newContext.querySelectorAll(newSelector)),results}catch(qsaError){}finally{old||context.removeAttribute("id")}}}return select(selector.replace(rtrim,"$1"),context,results,seed)};support=Sizzle.support={},isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return!!documentElement&&"HTML"!==documentElement.nodeName},setDocument=Sizzle.setDocument=function(node){var hasCompare,doc=node?node.ownerDocument||node:preferredDoc,parent=doc.defaultView;return doc!==document$1&&9===doc.nodeType&&doc.documentElement?(document$1=doc,docElem=doc.documentElement,documentIsHTML=!isXML(doc),parent&&parent!==function(win){try{return win.top}catch(ex){}return null}(parent)&&(parent.addEventListener?parent.addEventListener("unload",function(){setDocument()},!1):parent.attachEvent&&parent.attachEvent("onunload",function(){setDocument()})),support.attributes=!0,support.getElementsByTagName=!0,support.getElementsByClassName=rnative.test(doc.getElementsByClassName),support.getById=!0,Expr.find.ID=function(id,context){if(typeof context.getElementById!==strundefined&&documentIsHTML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}},Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}},Expr.find.TAG=support.getElementsByTagName?function(tag,context){if(typeof context.getElementsByTagName!==strundefined)return context.getElementsByTagName(tag)}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if("*"===tag){for(;elem=results[i++];)1===elem.nodeType&&tmp.push(elem);return tmp}return results},Expr.find.CLASS=support.getElementsByClassName&&function(className,context){if(documentIsHTML)return context.getElementsByClassName(className)},rbuggyMatches=[],rbuggyQSA=[],support.disconnectedMatch=!0,rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|")),rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|")),hasCompare=rnative.test(docElem.compareDocumentPosition),contains$1=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!(!bup||1!==bup.nodeType||!(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},sortOrder=hasCompare?function(a,b){if(a===b)return hasDuplicate=!0,0;var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;return compare?compare:(compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&compare||!support.sortDetached&&b.compareDocumentPosition(a)===compare?a===doc||a.ownerDocument===preferredDoc&&contains$1(preferredDoc,a)?-1:b===doc||b.ownerDocument===preferredDoc&&contains$1(preferredDoc,b)?1:sortInput?indexOf$1.call(sortInput,a)-indexOf$1.call(sortInput,b):0:4&compare?-1:1)}:function(a,b){if(a===b)return hasDuplicate=!0,0;var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup)return a===doc?-1:b===doc?1:aup?-1:bup?1:sortInput?indexOf$1.call(sortInput,a)-indexOf$1.call(sortInput,b):0;if(aup===bup)return siblingCheck(a,b);for(cur=a;cur=cur.parentNode;)ap.unshift(cur);for(cur=b;cur=cur.parentNode;)bp.unshift(cur);for(;ap[i]===bp[i];)i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0},doc):document$1},Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)},Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document$1&&setDocument(elem),expr=expr.replace(rattributeQuotes,"='$1']"),support.matchesSelector&&documentIsHTML&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr)))try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&11!==elem.document.nodeType)return ret}catch(e){}return Sizzle(expr,document$1,null,[elem]).length>0},Sizzle.contains=function(context,elem){return(context.ownerDocument||context)!==document$1&&setDocument(context),contains$1(context,elem)},Sizzle.attr=function(elem,name){(elem.ownerDocument||elem)!==document$1&&setDocument(elem);var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):void 0;return void 0!==val?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null},Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)},Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;if(hasDuplicate=!support.detectDuplicates,sortInput=!support.sortStable&&results.slice(0),results.sort(sortOrder),hasDuplicate){for(;elem=results[i++];)elem===results[i]&&(j=duplicates.push(i));for(;j--;)results.splice(duplicates[j],1)}return sortInput=null,results},getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(1===nodeType||9===nodeType||11===nodeType){if("string"==typeof elem.textContent)return elem.textContent;for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem)}else if(3===nodeType||4===nodeType)return elem.nodeValue}else for(;node=elem[i++];)ret+=getText(node);return ret},Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){return match[1]=match[1].replace(runescape,funescape),match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape),"~="===match[2]&&(match[3]=" "+match[3]+" "),match.slice(0,4)},CHILD:function(match){return match[1]=match[1].toLowerCase(),"nth"===match[1].slice(0,3)?(match[3]||Sizzle.error(match[0]),match[4]=+(match[4]?match[5]+(match[6]||1):2*("even"===match[3]||"odd"===match[3])),match[5]=+(match[7]+match[8]||"odd"===match[3])):match[3]&&Sizzle.error(match[0]),match},PSEUDO:function(match){var excess,unquoted=!match[6]&&match[2];return matchExpr.CHILD.test(match[0])?null:(match[3]?match[2]=match[4]||match[5]||"":unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,!0))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)&&(match[0]=match[0].slice(0,excess),match[2]=unquoted.slice(0,excess)),match.slice(0,3))}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return"*"===nodeNameSelector?function(){return!0}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test("string"==typeof elem.className&&elem.className||typeof elem.getAttribute!==strundefined&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);return null==result?"!="===operator:!operator||(result+="","="===operator?result===check:"!="===operator?result!==check:"^="===operator?check&&0===result.indexOf(check):"*="===operator?check&&result.indexOf(check)>-1:"$="===operator?check&&result.slice(-check.length)===check:"~="===operator?(" "+result+" ").indexOf(check)>-1:"|="===operator&&(result===check||result.slice(0,check.length+1)===check+"-"))}},CHILD:function(type,what,argument,first,last){var simple="nth"!==type.slice(0,3),forward="last"!==type.slice(-4),ofType="of-type"===what;return 1===first&&0===last?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){for(;dir;){for(node=elem;node=node[dir];)if(ofType?node.nodeName.toLowerCase()===name:1===node.nodeType)return!1;start=dir="only"===type&&!start&&"nextSibling"}return!0}if(start=[forward?parent.firstChild:parent.lastChild],forward&&useCache){for(outerCache=parent[expando]||(parent[expando]={}),cache=outerCache[type]||[],nodeIndex=cache[0]===dirruns&&cache[1],diff=cache[0]===dirruns&&cache[2],node=nodeIndex&&parent.childNodes[nodeIndex];node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop();)if(1===node.nodeType&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];break}}else if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns)diff=cache[1];else for(;(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())&&((ofType?node.nodeName.toLowerCase()!==name:1!==node.nodeType)||!++diff||(useCache&&((node[expando]||(node[expando]={}))[type]=[dirruns,diff]),node!==elem)););return(diff-=last)===first||diff%first==0&&diff/first>=0}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);return fn[expando]?fn(argument):fn.length>1?(args=[pseudo,pseudo,"",argument],Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){for(var idx,matched=fn(seed,argument),i=matched.length;i--;)idx=indexOf$1.call(seed,matched[i]),seed[idx]=!(matches[idx]=matched[i])}):function(elem){return fn(elem,0,args)}):fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){for(var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;i--;)(elem=unmatched[i])&&(seed[i]=!(matches[i]=elem))}):function(elem,context,xml){return input[0]=elem,matcher(input,null,xml,results),!results.pop()}}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),contains:markFunction(function(text){return text=text.replace(runescape,funescape),function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),lang:markFunction(function(lang){return ridentifier.test(lang||"")||Sizzle.error("unsupported lang: "+lang),lang=lang.replace(runescape,funescape).toLowerCase(),function(elem){var elemLang;do{if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))return(elemLang=elemLang.toLowerCase())===lang||0===elemLang.indexOf(lang+"-")}while((elem=elem.parentNode)&&1===elem.nodeType);return!1}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document$1.activeElement&&(!document$1.hasFocus||document$1.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:function(elem){return elem.disabled===!1},disabled:function(elem){return elem.disabled===!0},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return"input"===nodeName&&!!elem.checked||"option"===nodeName&&!!elem.selected},selected:function(elem){return elem.parentNode&&elem.parentNode.selectedIndex,elem.selected===!0},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling)if(elem.nodeType<6)return!1;return!0},parent:function(elem){return!Expr.pseudos.empty(elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},text:function(elem){var attr;return"input"===elem.nodeName.toLowerCase()&&"text"===elem.type&&(null==(attr=elem.getAttribute("type"))||"text"===attr.toLowerCase())},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){for(var i=0;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){for(var i=1;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;--i>=0;)matchIndexes.push(i);return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;++i<length;)matchIndexes.push(i);return matchIndexes})}},Expr.pseudos.nth=Expr.pseudos.eq;for(i in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Expr.pseudos[i]=function(type){return function(elem){return"input"===elem.nodeName.toLowerCase()&&elem.type===type}}(i);for(i in{submit:!0,reset:!0})Expr.pseudos[i]=function(type){return function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&elem.type===type}}(i);setFilters.prototype=Expr.filters=Expr.pseudos,Expr.setFilters=new setFilters,tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached)return parseOnly?0:cached.slice(0);for(soFar=selector,groups=[],preFilters=Expr.preFilter;soFar;){matched&&!(match=rcomma.exec(soFar))||(match&&(soFar=soFar.slice(match[0].length)||soFar),groups.push(tokens=[])),matched=!1,(match=rcombinators.exec(soFar))&&(matched=match.shift(),tokens.push({value:matched,type:match[0].replace(rtrim," ")}),soFar=soFar.slice(matched.length));for(type in Expr.filter)!(match=matchExpr[type].exec(soFar))||preFilters[type]&&!(match=preFilters[type](match))||(matched=match.shift(),tokens.push({value:matched,type:type,matches:match}),soFar=soFar.slice(matched.length));if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)},compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){for(match||(match=tokenize(selector)),i=match.length;i--;)cached=matcherFromTokens(match[i]),cached[expando]?setMatchers.push(cached):elementMatchers.push(cached);cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers)),cached.selector=selector}return cached},select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled="function"==typeof selector&&selector,match=!seed&&tokenize(selector=compiled.selector||selector);if(results=results||[],1===match.length){if(tokens=match[0]=match[0].slice(0),tokens.length>2&&"ID"===(token=tokens[0]).type&&support.getById&&9===context.nodeType&&documentIsHTML&&Expr.relative[tokens[1].type]){if(!(context=(Expr.find.ID(token.matches[0].replace(runescape,funescape),context)||[])[0]))return results;compiled&&(context=context.parentNode),selector=selector.slice(tokens.shift().value.length)}for(i=matchExpr.needsContext.test(selector)?0:tokens.length;i--&&(token=tokens[i],!Expr.relative[type=token.type]);)if((find=Expr.find[type])&&(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context))){if(tokens.splice(i,1),!(selector=seed.length&&toSelector(tokens)))return push$1.apply(results,seed),results;break}}return(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,rsibling.test(selector)&&testContext(context.parentNode)||context),results},support.sortStable=expando.split("").sort(sortOrder).join("")===expando,support.detectDuplicates=!!hasDuplicate,setDocument(),support.sortDetached=!0;var isArray=Array.isArray||function(obj){return"[object Array]"===Object.prototype.toString.call(obj)},toArray=function(obj){var i,l,array=obj;if(!isArray(obj))for(array=[],i=0,l=obj.length;i<l;i++)array[i]=obj[i];return array},each$1=function(o,cb,s){var n,l;if(!o)return 0;if(s=s||o,void 0!==o.length){for(n=0,l=o.length;n<l;n++)if(cb.call(s,o[n],n,o)===!1)return 0}else for(n in o)if(o.hasOwnProperty(n)&&cb.call(s,o[n],n,o)===!1)return 0;return 1},map$1=function(array,callback){var out=[];return each$1(array,function(item,index){out.push(callback(item,index,array))}),out},filter$1=function(a,f){var o=[];return each$1(a,function(v,index){f&&!f(v,index,a)||o.push(v)}),o},indexOf$2=function(a,v){var i,l;if(a)for(i=0,l=a.length;i<l;i++)if(a[i]===v)return i;return-1},reduce=function(collection,iteratee,accumulator,thisArg){var i=0;for(arguments.length<3&&(accumulator=collection[0]);i<collection.length;i++)accumulator=iteratee.call(thisArg,accumulator,collection[i],i);return accumulator},findIndex$1=function(array,predicate,thisArg){var i,l;for(i=0,l=array.length;i<l;i++)if(predicate.call(thisArg,array[i],i,array))return i;return-1},find$1=function(array,predicate,thisArg){var idx=findIndex$1(array,predicate,thisArg);if(idx!==-1)return array[idx]},last$1=function(collection){return collection[collection.length-1]},$_e6e6g1kjducwnfd={isArray:isArray,toArray:toArray,each:each$1,map:map$1,filter:filter$1,indexOf:indexOf$2,reduce:reduce,findIndex:findIndex$1,find:find$1,last:last$1},trim=function(str){return null===str||void 0===str?"":(""+str).replace(/^\s*|\s*$/g,"")},is=function(obj,type){return type?!("array"!==type||!$_e6e6g1kjducwnfd.isArray(obj))||typeof obj===type:void 0!==obj},makeMap=function(items,delim,map){var i;for(items=items||[],delim=delim||",","string"==typeof items&&(items=items.split(delim)),map=map||{},i=items.length;i--;)map[items[i]]={};return map},hasOwnProperty=function(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)},create=function(s,p,root){var sp,ns,cn,scn,c,self=this,de=0;if(s=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(s),cn=s[3].match(/(^|\.)(\w+)$/i)[2],ns=self.createNS(s[3].replace(/\.\w+$/,""),root),!ns[cn]){if("static"===s[2])return ns[cn]=p,void(this.onCreate&&this.onCreate(s[2],s[3],ns[cn]));p[cn]||(p[cn]=function(){},de=1),ns[cn]=p[cn],self.extend(ns[cn].prototype,p),s[5]&&(sp=self.resolve(s[5]).prototype,scn=s[5].match(/\.(\w+)$/i)[1],c=ns[cn],ns[cn]=de?function(){return sp[scn].apply(this,arguments)}:function(){return this.parent=sp[scn],c.apply(this,arguments)},ns[cn].prototype[cn]=ns[cn],self.each(sp,function(f,n){ns[cn].prototype[n]=sp[n]}),self.each(p,function(f,n){sp[n]?ns[cn].prototype[n]=function(){return this.parent=sp[n],f.apply(this,arguments)}:n!==cn&&(ns[cn].prototype[n]=f)})),self.each(p.static,function(f,n){ns[cn][n]=f})}},extend=function(obj,ext){for(var x=[],_i=2;_i<arguments.length;_i++)x[_i-2]=arguments[_i];var i,l,name,value,args=arguments;for(i=1,l=args.length;i<l;i++){ext=args[i];for(name in ext)ext.hasOwnProperty(name)&&void 0!==(value=ext[name])&&(obj[name]=value)}return obj},walk=function(o,f,n,s){s=s||this,o&&(n&&(o=o[n]),$_e6e6g1kjducwnfd.each(o,function(o,i){if(f.call(s,o,i,n)===!1)return!1;walk(o,f,n,s)}))},createNS=function(n,o){var i,v;for(o=o||window,n=n.split("."),i=0;i<n.length;i++)v=n[i],o[v]||(o[v]={}),o=o[v];return o},resolve$1=function(n,o){var i,l;for(o=o||window,n=n.split("."),i=0,l=n.length;i<l&&(o=o[n[i]]);i++);return o},explode=function(s,d){return!s||is(s,"array")?s:$_e6e6g1kjducwnfd.map(s.split(d||","),trim)},_addCacheSuffix=function(url){var cacheSuffix=$_cum1kc9jducwn99.cacheSuffix;return cacheSuffix&&(url+=(url.indexOf("?")===-1?"?":"&")+cacheSuffix),url},$_8i2houjjducwnd2={trim:trim,isArray:$_e6e6g1kjducwnfd.isArray,is:is,toArray:$_e6e6g1kjducwnfd.toArray,makeMap:makeMap,each:$_e6e6g1kjducwnfd.each,map:$_e6e6g1kjducwnfd.map,grep:$_e6e6g1kjducwnfd.filter,inArray:$_e6e6g1kjducwnfd.indexOf,hasOwn:hasOwnProperty,extend:extend,create:create,walk:walk,createNS:createNS,resolve:resolve$1,explode:explode,_addCacheSuffix:_addCacheSuffix
},doc=document,push$2=Array.prototype.push,slice$2=Array.prototype.slice,rquickExpr$1=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,Event=EventUtils.Event,skipUniques=$_8i2houjjducwnd2.makeMap("children,contents,next,prev"),isDefined=function(obj){return void 0!==obj},isString=function(obj){return"string"==typeof obj},isWindow=function(obj){return obj&&obj===obj.window},createFragment=function(html,fragDoc){var frag,node,container;for(fragDoc=fragDoc||doc,container=fragDoc.createElement("div"),frag=fragDoc.createDocumentFragment(),container.innerHTML=html;node=container.firstChild;)frag.appendChild(node);return frag},domManipulate=function(targetNodes,sourceItem,callback,reverse){var i;if(isString(sourceItem))sourceItem=createFragment(sourceItem,getElementDocument(targetNodes[0]));else if(sourceItem.length&&!sourceItem.nodeType){if(sourceItem=DomQuery.makeArray(sourceItem),reverse)for(i=sourceItem.length-1;i>=0;i--)domManipulate(targetNodes,sourceItem[i],callback,reverse);else for(i=0;i<sourceItem.length;i++)domManipulate(targetNodes,sourceItem[i],callback,reverse);return targetNodes}if(sourceItem.nodeType)for(i=targetNodes.length;i--;)callback.call(targetNodes[i],sourceItem);return targetNodes},hasClass=function(node,className){return node&&className&&(" "+node.className+" ").indexOf(" "+className+" ")!==-1},wrap=function(elements,wrapper,all){var lastParent,newWrapper;return wrapper=DomQuery(wrapper)[0],elements.each(function(){var self=this;all&&lastParent===self.parentNode?newWrapper.appendChild(self):(lastParent=self.parentNode,newWrapper=wrapper.cloneNode(!1),self.parentNode.insertBefore(newWrapper,self),newWrapper.appendChild(self))}),elements},numericCssMap=$_8i2houjjducwnd2.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),booleanMap=$_8i2houjjducwnd2.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),propFix={for:"htmlFor",class:"className",readonly:"readOnly"},cssFix={float:"cssFloat"},attrHooks={},cssHooks={},DomQuery=function(selector,context){return new DomQuery.fn.init(selector,context)},inArray=function(item,array){var i;if(array.indexOf)return array.indexOf(item);for(i=array.length;i--;)if(array[i]===item)return i;return-1},trim$1=function(str){return null===str||void 0===str?"":(""+str).replace(/^\s*|\s*$/g,"")},each$2=function(obj,callback){var length,key,i,value;if(obj)if(void 0===(length=obj.length)){for(key in obj)if(obj.hasOwnProperty(key)&&(value=obj[key],callback.call(value,key,value)===!1))break}else for(i=0;i<length&&(value=obj[i],callback.call(value,i,value)!==!1);i++);return obj},grep=function(array,callback){var out=[];return each$2(array,function(i,item){callback(item,i)&&out.push(item)}),out},getElementDocument=function(element){return element?9===element.nodeType?element:element.ownerDocument:doc};DomQuery.fn=DomQuery.prototype={constructor:DomQuery,selector:"",context:null,length:0,init:function(selector,context){var match,node,self=this;if(!selector)return self;if(selector.nodeType)return self.context=self[0]=selector,self.length=1,self;if(context&&context.nodeType)self.context=context;else{if(context)return DomQuery(selector).attr(context);self.context=context=document}if(isString(selector)){if(self.selector=selector,!(match="<"===selector.charAt(0)&&">"===selector.charAt(selector.length-1)&&selector.length>=3?[null,selector,null]:rquickExpr$1.exec(selector)))return DomQuery(context).find(selector);if(match[1])for(node=createFragment(selector,getElementDocument(context)).firstChild;node;)push$2.call(self,node),node=node.nextSibling;else{if(!(node=getElementDocument(context).getElementById(match[2])))return self;if(node.id!==match[2])return self.find(selector);self.length=1,self[0]=node}}else this.add(selector,!1);return self},toArray:function(){return $_8i2houjjducwnd2.toArray(this)},add:function(items,sort){var nodes,i,self=this;if(isString(items))return self.add(DomQuery(items));if(sort!==!1)for(nodes=DomQuery.unique(self.toArray().concat(DomQuery.makeArray(items))),self.length=nodes.length,i=0;i<nodes.length;i++)self[i]=nodes[i];else push$2.apply(self,DomQuery.makeArray(items));return self},attr:function(name,value){var hook,self=this;if("object"==typeof name)each$2(name,function(name,value){self.attr(name,value)});else{if(!isDefined(value)){if(self[0]&&1===self[0].nodeType){if((hook=attrHooks[name])&&hook.get)return hook.get(self[0],name);if(booleanMap[name])return self.prop(name)?name:void 0;value=self[0].getAttribute(name,2),null===value&&(value=void 0)}return value}this.each(function(){var hook;if(1===this.nodeType){if((hook=attrHooks[name])&&hook.set)return void hook.set(this,value);null===value?this.removeAttribute(name,2):this.setAttribute(name,value,2)}})}return self},removeAttr:function(name){return this.attr(name,null)},prop:function(name,value){var self=this;if("object"==typeof(name=propFix[name]||name))each$2(name,function(name,value){self.prop(name,value)});else{if(!isDefined(value))return self[0]&&self[0].nodeType&&name in self[0]?self[0][name]:value;this.each(function(){1===this.nodeType&&(this[name]=value)})}return self},css:function(name,value){var elm,hook,self=this,camel=function(name){return name.replace(/-(\D)/g,function(a,b){return b.toUpperCase()})},dashed=function(name){return name.replace(/[A-Z]/g,function(a){return"-"+a})};if("object"==typeof name)each$2(name,function(name,value){self.css(name,value)});else if(isDefined(value))name=camel(name),"number"!=typeof value||numericCssMap[name]||(value=value.toString()+"px"),self.each(function(){var style=this.style;if((hook=cssHooks[name])&&hook.set)return void hook.set(this,value);try{this.style[cssFix[name]||name]=value}catch(ex){}null!==value&&""!==value||(style.removeProperty?style.removeProperty(dashed(name)):style.removeAttribute(name))});else{if(elm=self[0],(hook=cssHooks[name])&&hook.get)return hook.get(elm);if(elm.ownerDocument.defaultView)try{return elm.ownerDocument.defaultView.getComputedStyle(elm,null).getPropertyValue(dashed(name))}catch(ex){return}else if(elm.currentStyle)return elm.currentStyle[camel(name)]}return self},remove:function(){for(var node,self=this,i=this.length;i--;)node=self[i],Event.clean(node),node.parentNode&&node.parentNode.removeChild(node);return this},empty:function(){for(var node,self=this,i=this.length;i--;)for(node=self[i];node.firstChild;)node.removeChild(node.firstChild);return this},html:function(value){var i,self=this;if(isDefined(value)){i=self.length;try{for(;i--;)self[i].innerHTML=value}catch(ex){DomQuery(self[i]).empty().append(value)}return self}return self[0]?self[0].innerHTML:""},text:function(value){var i,self=this;if(isDefined(value)){for(i=self.length;i--;)"innerText"in self[i]?self[i].innerText=value:self[0].textContent=value;return self}return self[0]?self[0].innerText||self[0].textContent:""},append:function(){return domManipulate(this,arguments,function(node){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(node)})},prepend:function(){return domManipulate(this,arguments,function(node){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(node,this.firstChild)},!0)},before:function(){var self=this;return self[0]&&self[0].parentNode?domManipulate(self,arguments,function(node){this.parentNode.insertBefore(node,this)}):self},after:function(){var self=this;return self[0]&&self[0].parentNode?domManipulate(self,arguments,function(node){this.parentNode.insertBefore(node,this.nextSibling)},!0):self},appendTo:function(val){return DomQuery(val).append(this),this},prependTo:function(val){return DomQuery(val).prepend(this),this},replaceWith:function(content){return this.before(content).remove()},wrap:function(content){return wrap(this,content)},wrapAll:function(content){return wrap(this,content,!0)},wrapInner:function(content){return this.each(function(){DomQuery(this).contents().wrapAll(content)}),this},unwrap:function(){return this.parent().each(function(){DomQuery(this).replaceWith(this.childNodes)})},clone:function(){var result=[];return this.each(function(){result.push(this.cloneNode(!0))}),DomQuery(result)},addClass:function(className){return this.toggleClass(className,!0)},removeClass:function(className){return this.toggleClass(className,!1)},toggleClass:function(className,state){var self=this;return"string"!=typeof className?self:(className.indexOf(" ")!==-1?each$2(className.split(" "),function(){self.toggleClass(this,state)}):self.each(function(index,node){var existingClassName,classState;(classState=hasClass(node,className))!==state&&(existingClassName=node.className,classState?node.className=trim$1((" "+existingClassName+" ").replace(" "+className+" "," ")):node.className+=existingClassName?" "+className:className)}),self)},hasClass:function(className){return hasClass(this[0],className)},each:function(callback){return each$2(this,callback)},on:function(name,callback){return this.each(function(){Event.bind(this,name,callback)})},off:function(name,callback){return this.each(function(){Event.unbind(this,name,callback)})},trigger:function(name){return this.each(function(){"object"==typeof name?Event.fire(this,name.type,name):Event.fire(this,name)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new DomQuery(slice$2.apply(this,arguments))},eq:function(index){return index===-1?this.slice(index):this.slice(index,+index+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(selector){var i,l,ret=[];for(i=0,l=this.length;i<l;i++)DomQuery.find(selector,this[i],ret);return DomQuery(ret)},filter:function(selector){return DomQuery("function"==typeof selector?grep(this.toArray(),function(item,i){return selector(i,item)}):DomQuery.filter(selector,this.toArray()))},closest:function(selector){var result=[];return selector instanceof DomQuery&&(selector=selector[0]),this.each(function(i,node){for(;node;){if("string"==typeof selector&&DomQuery(node).is(selector)){result.push(node);break}if(node===selector){result.push(node);break}node=node.parentNode}}),DomQuery(result)},offset:function(offset){var elm,doc,docElm,pos,x=0,y=0;return offset?this.css(offset):(elm=this[0],elm&&(doc=elm.ownerDocument,docElm=doc.documentElement,elm.getBoundingClientRect&&(pos=elm.getBoundingClientRect(),x=pos.left+(docElm.scrollLeft||doc.body.scrollLeft)-docElm.clientLeft,y=pos.top+(docElm.scrollTop||doc.body.scrollTop)-docElm.clientTop)),{left:x,top:y})},push:push$2,sort:[].sort,splice:[].splice},$_8i2houjjducwnd2.extend(DomQuery,{extend:$_8i2houjjducwnd2.extend,makeArray:function(object){return isWindow(object)||object.nodeType?[object]:$_8i2houjjducwnd2.toArray(object)},inArray:inArray,isArray:$_8i2houjjducwnd2.isArray,each:each$2,trim:trim$1,grep:grep,find:Sizzle,expr:Sizzle.selectors,unique:Sizzle.uniqueSort,text:Sizzle.getText,contains:Sizzle.contains,filter:function(expr,elems,not){var i=elems.length;for(not&&(expr=":not("+expr+")");i--;)1!==elems[i].nodeType&&elems.splice(i,1);return elems=1===elems.length?DomQuery.find.matchesSelector(elems[0],expr)?[elems[0]]:[]:DomQuery.find.matches(expr,elems)}});var dir=function(el,prop,until){var matched=[],cur=el[prop];for("string"!=typeof until&&until instanceof DomQuery&&(until=until[0]);cur&&9!==cur.nodeType;){if(void 0!==until){if(cur===until)break;if("string"==typeof until&&DomQuery(cur).is(until))break}1===cur.nodeType&&matched.push(cur),cur=cur[prop]}return matched},sibling=function(node,siblingName,nodeType,until){var result=[];for(until instanceof DomQuery&&(until=until[0]);node;node=node[siblingName])if(!nodeType||node.nodeType===nodeType){if(void 0!==until){if(node===until)break;if("string"==typeof until&&DomQuery(node).is(until))break}result.push(node)}return result},firstSibling=function(node,siblingName,nodeType){for(node=node[siblingName];node;node=node[siblingName])if(node.nodeType===nodeType)return node;return null};each$2({parent:function(node){var parent=node.parentNode;return parent&&11!==parent.nodeType?parent:null},parents:function(node){return dir(node,"parentNode")},next:function(node){return firstSibling(node,"nextSibling",1)},prev:function(node){return firstSibling(node,"previousSibling",1)},children:function(node){return sibling(node.firstChild,"nextSibling",1)},contents:function(node){return $_8i2houjjducwnd2.toArray(("iframe"===node.nodeName?node.contentDocument||node.contentWindow.document:node).childNodes)}},function(name,fn){DomQuery.fn[name]=function(selector){var self=this,result=[];return self.each(function(){var nodes=fn.call(result,this,selector,result);nodes&&(DomQuery.isArray(nodes)?result.push.apply(result,nodes):result.push(nodes))}),this.length>1&&(skipUniques[name]||(result=DomQuery.unique(result)),0===name.indexOf("parents")&&(result=result.reverse())),result=DomQuery(result),selector?result.filter(selector):result}}),each$2({parentsUntil:function(node,until){return dir(node,"parentNode",until)},nextUntil:function(node,until){return sibling(node,"nextSibling",1,until).slice(1)},prevUntil:function(node,until){return sibling(node,"previousSibling",1,until).slice(1)}},function(name,fn){DomQuery.fn[name]=function(selector,filter){var self=this,result=[];return self.each(function(){var nodes=fn.call(result,this,selector,result);nodes&&(DomQuery.isArray(nodes)?result.push.apply(result,nodes):result.push(nodes))}),this.length>1&&(result=DomQuery.unique(result),0!==name.indexOf("parents")&&"prevUntil"!==name||(result=result.reverse())),result=DomQuery(result),filter?result.filter(filter):result}}),DomQuery.fn.is=function(selector){return!!selector&&this.filter(selector).length>0},DomQuery.fn.init.prototype=DomQuery.fn,DomQuery.overrideDefaults=function(callback){var defaults,sub=function(selector,context){return defaults=defaults||callback(),0===arguments.length&&(selector=defaults.element),context||(context=defaults.context),new sub.fn.init(selector,context)};return DomQuery.extend(sub,this),sub};var appendHooks=function(targetHooks,prop,hooks){each$2(hooks,function(name,func){targetHooks[name]=targetHooks[name]||{},targetHooks[name][prop]=func})};$_cum1kc9jducwn99.ie&&$_cum1kc9jducwn99.ie<8&&(appendHooks(attrHooks,"get",{maxlength:function(elm){var value=elm.maxLength;if(2147483647!==value)return value},size:function(elm){var value=elm.size;if(20!==value)return value},class:function(elm){return elm.className},style:function(elm){var value=elm.style.cssText;if(0!==value.length)return value}}),appendHooks(attrHooks,"set",{class:function(elm,value){elm.className=value},style:function(elm,value){elm.style.cssText=value}})),$_cum1kc9jducwn99.ie&&$_cum1kc9jducwn99.ie<9&&(cssFix.float="styleFloat",appendHooks(cssHooks,"set",{opacity:function(elm,value){var style=elm.style;null===value||""===value?style.removeAttribute("filter"):(style.zoom=1,style.filter="alpha(opacity="+100*value+")")}})),DomQuery.attrHooks=attrHooks,DomQuery.cssHooks=cssHooks;var namedEntities,baseEntities,reverseEntities,cached=function(f){var r,called=!1;return function(){return called||(called=!0,r=f.apply(null,arguments)),r}},$_2tix6bnjducwnfu={cached:cached},firstMatch=function(regexes,s){for(var i=0;i<regexes.length;i++){var x=regexes[i];if(x.test(s))return x}},find$2=function(regexes,agent){var r=firstMatch(regexes,agent);if(!r)return{major:0,minor:0};var group=function(i){return Number(agent.replace(r,"$"+i))};return nu(group(1),group(2))},detect=function(versionRegexes,agent){var cleanedAgent=String(agent).toLowerCase();return 0===versionRegexes.length?unknown():find$2(versionRegexes,cleanedAgent)},unknown=function(){return nu(0,0)},nu=function(major,minor){return{major:major,minor:minor}},$_84ynlaqjducwng0={nu:nu,detect:detect,unknown:unknown},isBrowser=function(name,current){return function(){return current===name}},unknown$1=function(){return nu$1({current:void 0,version:$_84ynlaqjducwng0.unknown()})},nu$1=function(info){var current=info.current;return{current:current,version:info.version,isEdge:isBrowser("Edge",current),isChrome:isBrowser("Chrome",current),isIE:isBrowser("IE",current),isOpera:isBrowser("Opera",current),isFirefox:isBrowser("Firefox",current),isSafari:isBrowser("Safari",current)}},$_g5txropjducwnfw={unknown:unknown$1,nu:nu$1,edge:$_60qu7r6jducwn73.constant("Edge"),chrome:$_60qu7r6jducwn73.constant("Chrome"),ie:$_60qu7r6jducwn73.constant("IE"),opera:$_60qu7r6jducwn73.constant("Opera"),firefox:$_60qu7r6jducwn73.constant("Firefox"),safari:$_60qu7r6jducwn73.constant("Safari")},isOS=function(name,current){return function(){return current===name}},unknown$2=function(){return nu$2({current:void 0,version:$_84ynlaqjducwng0.unknown()})},nu$2=function(info){var current=info.current;return{current:current,version:info.version,isWindows:isOS("Windows",current),isiOS:isOS("iOS",current),isAndroid:isOS("Android",current),isOSX:isOS("OSX",current),isLinux:isOS("Linux",current),isSolaris:isOS("Solaris",current),isFreeBSD:isOS("FreeBSD",current)}},$_3jpctqrjducwng2={unknown:unknown$2,nu:nu$2,windows:$_60qu7r6jducwn73.constant("Windows"),ios:$_60qu7r6jducwn73.constant("iOS"),android:$_60qu7r6jducwn73.constant("Android"),linux:$_60qu7r6jducwn73.constant("Linux"),osx:$_60qu7r6jducwn73.constant("OSX"),solaris:$_60qu7r6jducwn73.constant("Solaris"),freebsd:$_60qu7r6jducwn73.constant("FreeBSD")},detect$1=function(candidates,userAgent){var agent=String(userAgent).toLowerCase();return $_2dw1bj4jducwn6g.find(candidates,function(candidate){return candidate.search(agent)})},detectBrowser=function(browsers,userAgent){return detect$1(browsers,userAgent).map(function(browser){var version=$_84ynlaqjducwng0.detect(browser.versionRegexes,userAgent);return{current:browser.name,version:version}})},detectOs=function(oses,userAgent){return detect$1(oses,userAgent).map(function(os){var version=$_84ynlaqjducwng0.detect(os.versionRegexes,userAgent);return{current:os.name,version:version}})},$_9uwohctjducwng7={detectBrowser:detectBrowser,detectOs:detectOs},addToStart=function(str,prefix){return prefix+str},addToEnd=function(str,suffix){return str+suffix},removeFromStart=function(str,numChars){return str.substring(numChars)},removeFromEnd=function(str,numChars){return str.substring(0,str.length-numChars)},$_ezyal9wjducwngi={addToStart:addToStart,addToEnd:addToEnd,removeFromStart:removeFromStart,removeFromEnd:removeFromEnd},first=function(str,count){return str.substr(0,count)},last$2=function(str,count){return str.substr(str.length-count,str.length)},head$1=function(str){return""===str?Option.none():Option.some(str.substr(0,1))},tail=function(str){return""===str?Option.none():Option.some(str.substring(1))},$_a5k34jxjducwngk={first:first,last:last$2,head:head$1,tail:tail},checkRange=function(str,substr,start){return""===substr||!(str.length<substr.length)&&str.substr(start,start+substr.length)===substr},supplant=function(str,obj){var isStringOrNumber=function(a){var t=typeof a;return"string"===t||"number"===t};return str.replace(/\${([^{}]*)}/g,function(a,b){var value=obj[b];return isStringOrNumber(value)?value:a})},removeLeading=function(str,prefix){return startsWith(str,prefix)?$_ezyal9wjducwngi.removeFromStart(str,prefix.length):str},removeTrailing=function(str,prefix){return endsWith(str,prefix)?$_ezyal9wjducwngi.removeFromEnd(str,prefix.length):str},ensureLeading=function(str,prefix){return startsWith(str,prefix)?str:$_ezyal9wjducwngi.addToStart(str,prefix)},ensureTrailing=function(str,prefix){return endsWith(str,prefix)?str:$_ezyal9wjducwngi.addToEnd(str,prefix)},contains$2=function(str,substr){return str.indexOf(substr)!==-1},capitalize=function(str){return $_a5k34jxjducwngk.head(str).bind(function(head){return $_a5k34jxjducwngk.tail(str).map(function(tail){return head.toUpperCase()+tail})}).getOr(str)},startsWith=function(str,prefix){return checkRange(str,prefix,0)},endsWith=function(str,suffix){return checkRange(str,suffix,str.length-suffix.length)},trim$2=function(str){return str.replace(/^\s+|\s+$/g,"")},lTrim=function(str){return str.replace(/^\s+/g,"")},rTrim=function(str){return str.replace(/\s+$/g,"")},$_vrlmtvjducwngg={supplant:supplant,startsWith:startsWith,removeLeading:removeLeading,removeTrailing:removeTrailing,ensureLeading:ensureLeading,ensureTrailing:ensureTrailing,endsWith:endsWith,contains:contains$2,trim:trim$2,lTrim:lTrim,rTrim:rTrim,capitalize:capitalize},checkContains=function(target){return function(uastring){return $_vrlmtvjducwngg.contains(uastring,target)}},browsers=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(uastring){return $_vrlmtvjducwngg.contains(uastring,"edge/")&&$_vrlmtvjducwngg.contains(uastring,"chrome")&&$_vrlmtvjducwngg.contains(uastring,"safari")&&$_vrlmtvjducwngg.contains(uastring,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,/.*?version\/\ ?([0-9]+)\.([0-9]+).*/],search:function(uastring){return $_vrlmtvjducwngg.contains(uastring,"chrome")&&!$_vrlmtvjducwngg.contains(uastring,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(uastring){return $_vrlmtvjducwngg.contains(uastring,"msie")||$_vrlmtvjducwngg.contains(uastring,"trident")}},{name:"Opera",versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:checkContains("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:checkContains("firefox")},{name:"Safari",versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(uastring){return($_vrlmtvjducwngg.contains(uastring,"safari")||$_vrlmtvjducwngg.contains(uastring,"mobile/"))&&$_vrlmtvjducwngg.contains(uastring,"applewebkit")}}],oses=[{name:"Windows",search:checkContains("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(uastring){return $_vrlmtvjducwngg.contains(uastring,"iphone")||$_vrlmtvjducwngg.contains(uastring,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:checkContains("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:checkContains("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:checkContains("linux"),versionRegexes:[]},{name:"Solaris",search:checkContains("sunos"),versionRegexes:[]},{name:"FreeBSD",search:checkContains("freebsd"),versionRegexes:[]}],$_fywjeoujducwnga={browsers:$_60qu7r6jducwn73.constant(browsers),oses:$_60qu7r6jducwn73.constant(oses)},detect$2=function(userAgent){var browsers=$_fywjeoujducwnga.browsers(),oses=$_fywjeoujducwnga.oses(),browser=$_9uwohctjducwng7.detectBrowser(browsers,userAgent).fold($_g5txropjducwnfw.unknown,$_g5txropjducwnfw.nu),os=$_9uwohctjducwng7.detectOs(oses,userAgent).fold($_3jpctqrjducwng2.unknown,$_3jpctqrjducwng2.nu);return{browser:browser,os:os,deviceType:DeviceType(os,browser,userAgent)}},$_12k257ojducwnfv={detect:detect$2},detect$3=$_2tix6bnjducwnfu.cached(function(){var userAgent=navigator.userAgent;return $_12k257ojducwnfv.detect(userAgent)}),$_5hshlmmjducwnfr={detect:detect$3},fromHtml=function(html,scope){var doc=scope||document,div=doc.createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1)throw console.error("HTML does not have a single root node",html),"HTML must have a single root node";return fromDom(div.childNodes[0])},fromTag=function(tag,scope){var doc=scope||document,node=doc.createElement(tag);return fromDom(node)},fromText=function(text,scope){var doc=scope||document,node=doc.createTextNode(text);return fromDom(node)},fromDom=function(node){if(null===node||void 0===node)throw new Error("Node cannot be null or undefined");return{dom:$_60qu7r6jducwn73.constant(node)}},fromPoint=function(doc,x,y){return Option.from(doc.dom().elementFromPoint(x,y)).map(fromDom)},$_5s4uzoyjducwngo={fromHtml:fromHtml,fromTag:fromTag,fromText:fromText,fromDom:fromDom,fromPoint:fromPoint},$_1iw4nj10jducwngu={ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12},name=function(element){return element.dom().nodeName.toLowerCase()},type=function(element){return element.dom().nodeType},value=function(element){return element.dom().nodeValue},isType=function(t){return function(element){return type(element)===t}},isComment=function(element){return type(element)===$_1iw4nj10jducwngu.COMMENT||"#comment"===name(element)},isElement=isType($_1iw4nj10jducwngu.ELEMENT),isText=isType($_1iw4nj10jducwngu.TEXT),isDocument=isType($_1iw4nj10jducwngu.DOCUMENT),$_47qy15zjducwngt={name:name,type:type,value:value,isElement:isElement,isText:isText,isDocument:isDocument,isComment:isComment},typeOf=function(x){if(null===x)return"null";var t=typeof x;return"object"===t&&Array.prototype.isPrototypeOf(x)?"array":"object"===t&&String.prototype.isPrototypeOf(x)?"string":t},isType$1=function(type){return function(value){return typeOf(value)===type}},$_c7y6af12jducwnh8={isString:isType$1("string"),isObject:isType$1("object"),isArray:isType$1("array"),isNull:isType$1("null"),isBoolean:isType$1("boolean"),isUndefined:isType$1("undefined"),isFunction:isType$1("function"),isNumber:isType$1("number")},keys=function(){var fastKeys=Object.keys,slowKeys=function(o){var r=[];for(var i in o)o.hasOwnProperty(i)&&r.push(i);return r};return void 0===fastKeys?slowKeys:fastKeys}(),each$3=function(obj,f){for(var props=keys(obj),k=0,len=props.length;k<len;k++){var i=props[k];f(obj[i],i,obj)}},objectMap=function(obj,f){return tupleMap(obj,function(x,i,obj){return{k:i,v:f(x,i,obj)}})},tupleMap=function(obj,f){var r={};return each$3(obj,function(x,i){var tuple=f(x,i,obj);r[tuple.k]=tuple.v}),r},bifilter=function(obj,pred){var t={},f={};return each$3(obj,function(x,i){(pred(x,i)?t:f)[i]=x}),{t:t,f:f}},mapToArray=function(obj,f){var r=[];return each$3(obj,function(value,name){r.push(f(value,name))}),r},find$3=function(obj,pred){for(var props=keys(obj),k=0,len=props.length;k<len;k++){var i=props[k],x=obj[i];if(pred(x,i,obj))return Option.some(x)}return Option.none()},values=function(obj){return mapToArray(obj,function(v){return v})},size=function(obj){return values(obj).length},$_84vepq13jducwnh9={bifilter:bifilter,each:each$3,map:objectMap,mapToArray:mapToArray,tupleMap:tupleMap,find:find$3,keys:keys,values:values,size:size},rawSet=function(dom,key,value){if(!($_c7y6af12jducwnh8.isString(value)||$_c7y6af12jducwnh8.isBoolean(value)||$_c7y6af12jducwnh8.isNumber(value)))throw console.error("Invalid call to Attr.set. Key ",key,":: Value ",value,":: Element ",dom),new Error("Attribute value was not simple");dom.setAttribute(key,value+"")},set=function(element,key,value){rawSet(element.dom(),key,value)},setAll=function(element,attrs){var dom=element.dom();$_84vepq13jducwnh9.each(attrs,function(v,k){rawSet(dom,k,v)})},get=function(element,key){var v=element.dom().getAttribute(key);return null===v?void 0:v},has=function(element,key){var dom=element.dom();return!(!dom||!dom.hasAttribute)&&dom.hasAttribute(key)},remove=function(element,key){element.dom().removeAttribute(key)},hasNone=function(element){var attrs=element.dom().attributes;return void 0===attrs||null===attrs||0===attrs.length},clone=function(element){return $_2dw1bj4jducwn6g.foldl(element.dom().attributes,function(acc,attr){return acc[attr.name]=attr.value,acc},{})},transferOne=function(source,destination,attr){has(source,attr)&&!has(destination,attr)&&set(destination,attr,get(source,attr))},transfer=function(source,destination,attrs){$_47qy15zjducwngt.isElement(source)&&$_47qy15zjducwngt.isElement(destination)&&$_2dw1bj4jducwn6g.each(attrs,function(attr){transferOne(source,destination,attr)})},$_60196814jducwnhd={clone:clone,set:set,setAll:setAll,get:get,has:has,remove:remove,hasNone:hasNone,transfer:transfer},inBody=function(element){var dom=$_47qy15zjducwngt.isText(element)?element.dom().parentNode:element.dom();return void 0!==dom&&null!==dom&&dom.ownerDocument.body.contains(dom)},body=$_2tix6bnjducwnfu.cached(function(){return getBody($_5s4uzoyjducwngo.fromDom(document))}),getBody=function(doc){var body=doc.dom().body;if(null===body||void 0===body)throw"Body is not available yet";return $_5s4uzoyjducwngo.fromDom(body)},$_4u3ohv15jducwnhl={body:body,getBody:getBody,inBody:inBody},isSupported=function(dom){return void 0!==dom.style},$_97xer116jducwnho={isSupported:isSupported},internalSet=function(dom,property,value){if(!$_c7y6af12jducwnh8.isString(value))throw console.error("Invalid call to CSS.set. Property ",property,":: Value ",value,":: Element ",dom),new Error("CSS value must be a string: "+value);$_97xer116jducwnho.isSupported(dom)&&dom.style.setProperty(property,value)},internalRemove=function(dom,property){$_97xer116jducwnho.isSupported(dom)&&dom.style.removeProperty(property)},set$1=function(element,property,value){var dom=element.dom();internalSet(dom,property,value)},setAll$1=function(element,css){var dom=element.dom();$_84vepq13jducwnh9.each(css,function(v,k){internalSet(dom,k,v)})},setOptions=function(element,css){var dom=element.dom();$_84vepq13jducwnh9.each(css,function(v,k){v.fold(function(){internalRemove(dom,k)},function(value){internalSet(dom,k,value)})})},get$1=function(element,property){var dom=element.dom(),styles=window.getComputedStyle(dom),r=styles.getPropertyValue(property),v=""!==r||$_4u3ohv15jducwnhl.inBody(element)?r:getUnsafeProperty(dom,property);return null===v?void 0:v},getUnsafeProperty=function(dom,property){return $_97xer116jducwnho.isSupported(dom)?dom.style.getPropertyValue(property):""},getRaw=function(element,property){var dom=element.dom(),raw=getUnsafeProperty(dom,property);return Option.from(raw).filter(function(r){return r.length>0})},getAllRaw=function(element){var css={},dom=element.dom();if($_97xer116jducwnho.isSupported(dom))for(var i=0;i<dom.style.length;i++){var ruleName=dom.style.item(i);css[ruleName]=dom.style[ruleName]}return css},isValidValue=function(tag,property,value){var element=$_5s4uzoyjducwngo.fromTag(tag);return set$1(element,property,value),getRaw(element,property).isSome()},remove$1=function(element,property){var dom=element.dom();internalRemove(dom,property),$_60196814jducwnhd.has(element,"style")&&""===$_vrlmtvjducwngg.trim($_60196814jducwnhd.get(element,"style"))&&$_60196814jducwnhd.remove(element,"style")},preserve=function(element,f){var oldStyles=$_60196814jducwnhd.get(element,"style"),result=f(element);return(void 0===oldStyles?$_60196814jducwnhd.remove:$_60196814jducwnhd.set)(element,"style",oldStyles),result},copy=function(source,target){var sourceDom=source.dom(),targetDom=target.dom();$_97xer116jducwnho.isSupported(sourceDom)&&$_97xer116jducwnho.isSupported(targetDom)&&(targetDom.style.cssText=sourceDom.style.cssText)},reflow=function(e){return e.dom().offsetWidth},transferOne$1=function(source,destination,style){getRaw(source,style).each(function(value){getRaw(destination,style).isNone()&&set$1(destination,style,value)})},transfer$1=function(source,destination,styles){$_47qy15zjducwngt.isElement(source)&&$_47qy15zjducwngt.isElement(destination)&&$_2dw1bj4jducwn6g.each(styles,function(style){transferOne$1(source,destination,style)})},$_6dooji11jducwngx={copy:copy,set:set$1,preserve:preserve,setAll:setAll$1,setOptions:setOptions,remove:remove$1,get:get$1,getRaw:getRaw,getAllRaw:getAllRaw,isValidValue:isValidValue,reflow:reflow,transfer:transfer$1},sort$1=function(arr){return arr.slice(0).sort()},reqMessage=function(required,keys){throw new Error("All required keys ("+sort$1(required).join(", ")+") were not specified. Specified keys were: "+sort$1(keys).join(", ")+".")},unsuppMessage=function(unsupported){throw new Error("Unsupported keys for object: "+sort$1(unsupported).join(", "))},validateStrArr=function(label,array){
if(!$_c7y6af12jducwnh8.isArray(array))throw new Error("The "+label+" fields must be an array. Was: "+array+".");$_2dw1bj4jducwn6g.each(array,function(a){if(!$_c7y6af12jducwnh8.isString(a))throw new Error("The value "+a+" in the "+label+" fields was not a string.")})},invalidTypeMessage=function(incorrect,type){throw new Error("All values need to be of type: "+type+". Keys ("+sort$1(incorrect).join(", ")+") were not.")},checkDupes=function(everything){var sorted=sort$1(everything);$_2dw1bj4jducwn6g.find(sorted,function(s,i){return i<sorted.length-1&&s===sorted[i+1]}).each(function(d){throw new Error("The field: "+d+" occurs more than once in the combined fields: ["+sorted.join(", ")+"].")})},$_tfxv91bjducwnib={sort:sort$1,reqMessage:reqMessage,unsuppMessage:unsuppMessage,validateStrArr:validateStrArr,invalidTypeMessage:invalidTypeMessage,checkDupes:checkDupes},$_295afp18jducwni4={immutable:Immutable,immutableBag:MixedBag},toArray$1=function(target,f){var r=[],recurse=function(e){return r.push(e),f(e)},cur=f(target);do{cur=cur.bind(recurse)}while(cur.isSome());return r},$_8cslsm1cjducwnid={toArray:toArray$1},node=function(){return $_850zr7bjducwn9g.getOrDie("Node")},compareDocumentPosition=function(a,b,match){return 0!=(a.compareDocumentPosition(b)&match)},documentPositionPreceding=function(a,b){return compareDocumentPosition(a,b,node().DOCUMENT_POSITION_PRECEDING)},documentPositionContainedBy=function(a,b){return compareDocumentPosition(a,b,node().DOCUMENT_POSITION_CONTAINED_BY)},$_94urfo1ejducwnik={documentPositionPreceding:documentPositionPreceding,documentPositionContainedBy:documentPositionContainedBy},ELEMENT=$_1iw4nj10jducwngu.ELEMENT,DOCUMENT=$_1iw4nj10jducwngu.DOCUMENT,is$1=function(element,selector){var elem=element.dom();if(elem.nodeType!==ELEMENT)return!1;if(void 0!==elem.matches)return elem.matches(selector);if(void 0!==elem.msMatchesSelector)return elem.msMatchesSelector(selector);if(void 0!==elem.webkitMatchesSelector)return elem.webkitMatchesSelector(selector);if(void 0!==elem.mozMatchesSelector)return elem.mozMatchesSelector(selector);throw new Error("Browser lacks native selectors")},bypassSelector=function(dom){return dom.nodeType!==ELEMENT&&dom.nodeType!==DOCUMENT||0===dom.childElementCount},all=function(selector,scope){var base=void 0===scope?document:scope.dom();return bypassSelector(base)?[]:$_2dw1bj4jducwn6g.map(base.querySelectorAll(selector),$_5s4uzoyjducwngo.fromDom)},one=function(selector,scope){var base=void 0===scope?document:scope.dom();return bypassSelector(base)?Option.none():Option.from(base.querySelector(selector)).map($_5s4uzoyjducwngo.fromDom)},$_3yrc4b1fjducwnim={all:all,is:is$1,one:one},eq=function(e1,e2){return e1.dom()===e2.dom()},isEqualNode=function(e1,e2){return e1.dom().isEqualNode(e2.dom())},member=function(element,elements){return $_2dw1bj4jducwn6g.exists(elements,$_60qu7r6jducwn73.curry(eq,element))},regularContains=function(e1,e2){var d1=e1.dom(),d2=e2.dom();return d1!==d2&&d1.contains(d2)},ieContains=function(e1,e2){return $_94urfo1ejducwnik.documentPositionContainedBy(e1.dom(),e2.dom())},browser=$_5hshlmmjducwnfr.detect().browser,contains$3=browser.isIE()?ieContains:regularContains,$_4qdq5m1djducwnie={eq:eq,isEqualNode:isEqualNode,member:member,contains:contains$3,is:$_3yrc4b1fjducwnim.is},owner=function(element){return $_5s4uzoyjducwngo.fromDom(element.dom().ownerDocument)},documentElement=function(element){var doc=owner(element);return $_5s4uzoyjducwngo.fromDom(doc.dom().documentElement)},defaultView=function(element){var el=element.dom(),defaultView=el.ownerDocument.defaultView;return $_5s4uzoyjducwngo.fromDom(defaultView)},parent=function(element){var dom=element.dom();return Option.from(dom.parentNode).map($_5s4uzoyjducwngo.fromDom)},findIndex$2=function(element){return parent(element).bind(function(p){var kin=children(p);return $_2dw1bj4jducwn6g.findIndex(kin,function(elem){return $_4qdq5m1djducwnie.eq(element,elem)})})},parents=function(element,isRoot){for(var stop=$_c7y6af12jducwnh8.isFunction(isRoot)?isRoot:$_60qu7r6jducwn73.constant(!1),dom=element.dom(),ret=[];null!==dom.parentNode&&void 0!==dom.parentNode;){var rawParent=dom.parentNode,parent=$_5s4uzoyjducwngo.fromDom(rawParent);if(ret.push(parent),stop(parent)===!0)break;dom=rawParent}return ret},siblings=function(element){var filterSelf=function(elements){return $_2dw1bj4jducwn6g.filter(elements,function(x){return!$_4qdq5m1djducwnie.eq(element,x)})};return parent(element).map(children).map(filterSelf).getOr([])},offsetParent=function(element){var dom=element.dom();return Option.from(dom.offsetParent).map($_5s4uzoyjducwngo.fromDom)},prevSibling=function(element){var dom=element.dom();return Option.from(dom.previousSibling).map($_5s4uzoyjducwngo.fromDom)},nextSibling=function(element){var dom=element.dom();return Option.from(dom.nextSibling).map($_5s4uzoyjducwngo.fromDom)},prevSiblings=function(element){return $_2dw1bj4jducwn6g.reverse($_8cslsm1cjducwnid.toArray(element,prevSibling))},nextSiblings=function(element){return $_8cslsm1cjducwnid.toArray(element,nextSibling)},children=function(element){var dom=element.dom();return $_2dw1bj4jducwn6g.map(dom.childNodes,$_5s4uzoyjducwngo.fromDom)},child=function(element,index){var children=element.dom().childNodes;return Option.from(children[index]).map($_5s4uzoyjducwngo.fromDom)},firstChild=function(element){return child(element,0)},lastChild=function(element){return child(element,element.dom().childNodes.length-1)},childNodesCount=function(element){return element.dom().childNodes.length},hasChildNodes=function(element){return element.dom().hasChildNodes()},spot=$_295afp18jducwni4.immutable("element","offset"),leaf=function(element,offset){var cs=children(element);return cs.length>0&&offset<cs.length?spot(cs[offset],0):spot(element,offset)},$_f0qt4317jducwnhq={owner:owner,defaultView:defaultView,documentElement:documentElement,parent:parent,findIndex:findIndex$2,parents:parents,siblings:siblings,prevSibling:prevSibling,offsetParent:offsetParent,prevSiblings:prevSiblings,nextSibling:nextSibling,nextSiblings:nextSiblings,children:children,child:child,firstChild:firstChild,lastChild:lastChild,childNodesCount:childNodesCount,hasChildNodes:hasChildNodes,leaf:leaf},browser$1=$_5hshlmmjducwnfr.detect().browser,firstElement=function(nodes){return $_2dw1bj4jducwn6g.find(nodes,$_47qy15zjducwngt.isElement)},getTableCaptionDeltaY=function(elm){return browser$1.isFirefox()&&"table"===$_47qy15zjducwngt.name(elm)?firstElement($_f0qt4317jducwnhq.children(elm)).filter(function(elm){return"caption"===$_47qy15zjducwngt.name(elm)}).bind(function(caption){return firstElement($_f0qt4317jducwnhq.nextSiblings(caption)).map(function(body){var bodyTop=body.dom().offsetTop,captionTop=caption.dom().offsetTop,captionHeight=caption.dom().offsetHeight;return bodyTop<=captionTop?-captionHeight:0})}).getOr(0):0},getPos=function(body,elm,rootElm){var offsetParent,pos,x=0,y=0,doc=body.ownerDocument;if(rootElm=rootElm?rootElm:body,elm){if(rootElm===body&&elm.getBoundingClientRect&&"static"===$_6dooji11jducwngx.get($_5s4uzoyjducwngo.fromDom(body),"position"))return pos=elm.getBoundingClientRect(),x=pos.left+(doc.documentElement.scrollLeft||body.scrollLeft)-doc.documentElement.clientLeft,y=pos.top+(doc.documentElement.scrollTop||body.scrollTop)-doc.documentElement.clientTop,{x:x,y:y};for(offsetParent=elm;offsetParent&&offsetParent!==rootElm&&offsetParent.nodeType;)x+=offsetParent.offsetLeft||0,y+=offsetParent.offsetTop||0,offsetParent=offsetParent.offsetParent;for(offsetParent=elm.parentNode;offsetParent&&offsetParent!==rootElm&&offsetParent.nodeType;)x-=offsetParent.scrollLeft||0,y-=offsetParent.scrollTop||0,offsetParent=offsetParent.parentNode;y+=getTableCaptionDeltaY($_5s4uzoyjducwngo.fromDom(elm))}return{x:x,y:y}},$_4jv3c6ljducwnfj={getPos:getPos},nu$3=function(baseFn){var data=Option.none(),callbacks=[],map=function(f){return nu$3(function(nCallback){get(function(data){nCallback(f(data))})})},get=function(nCallback){isReady()?call(nCallback):callbacks.push(nCallback)},set=function(x){data=Option.some(x),run(callbacks),callbacks=[]},isReady=function(){return data.isSome()},run=function(cbs){$_2dw1bj4jducwn6g.each(cbs,call)},call=function(cb){data.each(function(x){setTimeout(function(){cb(x)},0)})};return baseFn(set),{get:get,map:map,isReady:isReady}},pure$1=function(a){return nu$3(function(callback){callback(a)})},LazyValue={nu:nu$3,pure:pure$1},bounce=function(f){return function(){var args=Array.prototype.slice.call(arguments),me=this;setTimeout(function(){f.apply(me,args)},0)}},$_bzefsp1jjducwnj5={bounce:bounce},nu$4=function(baseFn){var get=function(callback){baseFn($_bzefsp1jjducwnj5.bounce(callback))};return{map:function(fab){return nu$4(function(callback){get(function(a){var value=fab(a);callback(value)})})},bind:function(aFutureB){return nu$4(function(callback){get(function(a){aFutureB(a).get(callback)})})},anonBind:function(futureB){return nu$4(function(callback){get(function(a){futureB.get(callback)})})},toLazy:function(){return LazyValue.nu(get)},get:get}},pure$2=function(a){return nu$4(function(callback){callback(a)})},Future={nu:nu$4,pure:pure$2},par=function(asyncValues,nu){return nu(function(callback){var r=[],count=0,cb=function(i){return function(value){r[i]=value,++count>=asyncValues.length&&callback(r)}};0===asyncValues.length?callback([]):$_2dw1bj4jducwn6g.each(asyncValues,function(asyncValue,i){asyncValue.get(cb(i))})})},$_ax3akv1ljducwnj8={par:par},par$1=function(futures){return $_ax3akv1ljducwnj8.par(futures,Future.nu)},mapM=function(array,fn){var futures=$_2dw1bj4jducwn6g.map(array,fn);return par$1(futures)},compose$1=function(f,g){return function(a){return g(a).bind(f)}},$_2m9thz1kjducwnj6={par:par$1,mapM:mapM,compose:compose$1},value$1=function(o){var is=function(v){return o===v},or=function(opt){return value$1(o)},orThunk=function(f){return value$1(o)},map=function(f){return value$1(f(o))},each=function(f){f(o)},bind=function(f){return f(o)},fold=function(_,onValue){return onValue(o)},exists=function(f){return f(o)},forall=function(f){return f(o)},toOption=function(){return Option.some(o)};return{is:is,isValue:$_60qu7r6jducwn73.always,isError:$_60qu7r6jducwn73.never,getOr:$_60qu7r6jducwn73.constant(o),getOrThunk:$_60qu7r6jducwn73.constant(o),getOrDie:$_60qu7r6jducwn73.constant(o),or:or,orThunk:orThunk,fold:fold,map:map,each:each,bind:bind,exists:exists,forall:forall,toOption:toOption}},error=function(message){var getOrThunk=function(f){return f()},getOrDie=function(){return $_60qu7r6jducwn73.die(message)()},or=function(opt){return opt},orThunk=function(f){return f()},map=function(f){return error(message)},bind=function(f){return error(message)},fold=function(onError,_){return onError(message)};return{is:$_60qu7r6jducwn73.never,isValue:$_60qu7r6jducwn73.never,isError:$_60qu7r6jducwn73.always,getOr:$_60qu7r6jducwn73.identity,getOrThunk:getOrThunk,getOrDie:getOrDie,or:or,orThunk:orThunk,fold:fold,map:map,each:$_60qu7r6jducwn73.noop,bind:bind,exists:$_60qu7r6jducwn73.never,forall:$_60qu7r6jducwn73.always,toOption:Option.none}},Result={value:value$1,error:error},blocks=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],voids=["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"],tableCells=["td","th"],tableSections=["thead","tbody","tfoot"],textBlocks=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],headings=["h1","h2","h3","h4","h5","h6"],listItems=["li","dd","dt"],lists=["ul","ol","dl"],lazyLookup=function(items){var lookup;return function(node){return lookup=lookup?lookup:$_2dw1bj4jducwn6g.mapToObject(items,$_60qu7r6jducwn73.constant(!0)),lookup.hasOwnProperty($_47qy15zjducwngt.name(node))}},isHeading=lazyLookup(headings),isBlock=lazyLookup(blocks),isInline=function(node){return $_47qy15zjducwngt.isElement(node)&&!isBlock(node)},isBr=function(node){return $_47qy15zjducwngt.isElement(node)&&"br"===$_47qy15zjducwngt.name(node)},isTextBlock=lazyLookup(textBlocks),isList=lazyLookup(lists),isListItem=lazyLookup(listItems),isVoid=lazyLookup(voids),isTableSection=lazyLookup(tableSections),isTableCell=lazyLookup(tableCells),isNodeType=function(type){return function(node){return!!node&&node.nodeType===type}},isElement$1=isNodeType(1),matchNodeNames=function(names){var items=names.toLowerCase().split(" ");return function(node){var i,name;if(node&&node.nodeType)for(name=node.nodeName.toLowerCase(),i=0;i<items.length;i++)if(name===items[i])return!0;return!1}},matchStyleValues=function(name,values){var items=values.toLowerCase().split(" ");return function(node){var i;if(isElement$1(node))for(i=0;i<items.length;i++)if(node.ownerDocument.defaultView.getComputedStyle(node,null).getPropertyValue(name)===items[i])return!0;return!1}},hasPropValue=function(propName,propValue){return function(node){return isElement$1(node)&&node[propName]===propValue}},hasAttribute=function(attrName,attrValue){return function(node){return isElement$1(node)&&node.hasAttribute(attrName)}},hasAttributeValue=function(attrName,attrValue){return function(node){return isElement$1(node)&&node.getAttribute(attrName)===attrValue}},isBogus=function(node){return isElement$1(node)&&node.hasAttribute("data-mce-bogus")},isBogusAll=function(node){return isElement$1(node)&&"all"===node.getAttribute("data-mce-bogus")},isTable=function(node){return isElement$1(node)&&"TABLE"===node.tagName},hasContentEditableState=function(value){return function(node){if(isElement$1(node)){if(node.contentEditable===value)return!0;if(node.getAttribute("data-mce-contenteditable")===value)return!0}return!1}},isText$1=isNodeType(3),isComment$1=isNodeType(8),isDocument$1=isNodeType(9),isBr$1=matchNodeNames("br"),isContentEditableTrue=hasContentEditableState("true"),isContentEditableFalse=hasContentEditableState("false"),$_fj238m1qjducwnjm={isText:isText$1,isElement:isElement$1,isComment:isComment$1,isDocument:isDocument$1,isBr:isBr$1,isContentEditableTrue:isContentEditableTrue,isContentEditableFalse:isContentEditableFalse,matchNodeNames:matchNodeNames,hasPropValue:hasPropValue,hasAttribute:hasAttribute,hasAttributeValue:hasAttributeValue,matchStyleValues:matchStyleValues,isBogus:isBogus,isBogusAll:isBogusAll,isTable:isTable},surroundedBySpans=function(node){var previousIsSpan=node.previousSibling&&"SPAN"===node.previousSibling.nodeName,nextIsSpan=node.nextSibling&&"SPAN"===node.nextSibling.nodeName;return previousIsSpan&&nextIsSpan},isBookmarkNode=function(node){return node&&"SPAN"===node.tagName&&"bookmark"===node.getAttribute("data-mce-type")},trimNode=function(dom,node){var i,children=node.childNodes;if(!$_fj238m1qjducwnjm.isElement(node)||!isBookmarkNode(node)){for(i=children.length-1;i>=0;i--)trimNode(dom,children[i]);if($_fj238m1qjducwnjm.isDocument(node)===!1){if($_fj238m1qjducwnjm.isText(node)&&node.nodeValue.length>0){var trimmedLength=$_8i2houjjducwnd2.trim(node.nodeValue).length;if(dom.isBlock(node.parentNode)||trimmedLength>0)return;if(0===trimmedLength&&surroundedBySpans(node))return}else if($_fj238m1qjducwnjm.isElement(node)&&(children=node.childNodes,1===children.length&&isBookmarkNode(children[0])&&node.parentNode.insertBefore(children[0],node),children.length||isVoid($_5s4uzoyjducwngo.fromDom(node))))return;dom.remove(node)}return node}},$_f6ekvb1ojducwnje={trimNode:trimNode},makeMap$1=$_8i2houjjducwnd2.makeMap,attrsCharsRegExp=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,textCharsRegExp=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,asciiMap={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};baseEntities={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},reverseEntities={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};var nativeDecode=function(text){var elm;return elm=$_5s4uzoyjducwngo.fromTag("div").dom(),elm.innerHTML=text,elm.textContent||elm.innerText||text},buildEntitiesLookup=function(items,radix){var i,chr,entity,lookup={};if(items){for(items=items.split(","),radix=radix||10,i=0;i<items.length;i+=2)chr=String.fromCharCode(parseInt(items[i],radix)),baseEntities[chr]||(entity="&"+items[i+1]+";",lookup[chr]=entity,lookup[entity]=chr);return lookup}};namedEntities=buildEntitiesLookup("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var encodeRaw=function(text,attr){return text.replace(attr?attrsCharsRegExp:textCharsRegExp,function(chr){return baseEntities[chr]||chr})},encodeAllRaw=function(text){return(""+text).replace(/[<>&\"\']/g,function(chr){return baseEntities[chr]||chr})},encodeNumeric=function(text,attr){return text.replace(attr?attrsCharsRegExp:textCharsRegExp,function(chr){return chr.length>1?"&#"+(1024*(chr.charCodeAt(0)-55296)+(chr.charCodeAt(1)-56320)+65536)+";":baseEntities[chr]||"&#"+chr.charCodeAt(0)+";"})},encodeNamed=function(text,attr,entities){return entities=entities||namedEntities,text.replace(attr?attrsCharsRegExp:textCharsRegExp,function(chr){return baseEntities[chr]||entities[chr]||chr})},getEncodeFunc=function(name,entities){var entitiesMap=buildEntitiesLookup(entities)||namedEntities,encodeNamedAndNumeric=function(text,attr){return text.replace(attr?attrsCharsRegExp:textCharsRegExp,function(chr){return void 0!==baseEntities[chr]?baseEntities[chr]:void 0!==entitiesMap[chr]?entitiesMap[chr]:chr.length>1?"&#"+(1024*(chr.charCodeAt(0)-55296)+(chr.charCodeAt(1)-56320)+65536)+";":"&#"+chr.charCodeAt(0)+";"})},encodeCustomNamed=function(text,attr){return encodeNamed(text,attr,entitiesMap)},nameMap=makeMap$1(name.replace(/\+/g,","));return nameMap.named&&nameMap.numeric?encodeNamedAndNumeric:nameMap.named?entities?encodeCustomNamed:encodeNamed:nameMap.numeric?encodeNumeric:encodeRaw},decode=function(text){return text.replace(/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,function(all,numeric){return numeric?(numeric="x"===numeric.charAt(0).toLowerCase()?parseInt(numeric.substr(1),16):parseInt(numeric,10),numeric>65535?(numeric-=65536,String.fromCharCode(55296+(numeric>>10),56320+(1023&numeric))):asciiMap[numeric]||String.fromCharCode(numeric)):reverseEntities[all]||namedEntities[all]||nativeDecode(all)})},$_g4jbz61rjducwnjq={encodeRaw:encodeRaw,encodeAllRaw:encodeAllRaw,encodeNumeric:encodeNumeric,encodeNamed:encodeNamed,getEncodeFunc:getEncodeFunc,decode:decode},mapCache={},dummyObj={},makeMap$2=$_8i2houjjducwnd2.makeMap,each$4=$_8i2houjjducwnd2.each,extend$1=$_8i2houjjducwnd2.extend,explode$1=$_8i2houjjducwnd2.explode,inArray$1=$_8i2houjjducwnd2.inArray,split=function(items,delim){return items=$_8i2houjjducwnd2.trim(items),items?items.split(delim||" "):[]},compileSchema=function(type){var globalAttributes,blockContent,phrasingContent,flowContent,html4BlockContent,html4PhrasingContent,schema={},add=function(name,attributes,children){var ni,attributesOrder,element,arrayToMap=function(array,obj){var i,l,map={};for(i=0,l=array.length;i<l;i++)map[array[i]]=obj||{};return map};for(children=children||[],attributes=attributes||"","string"==typeof children&&(children=split(children)),name=split(name),ni=name.length;ni--;)attributesOrder=split([globalAttributes,attributes].join(" ")),element={attributes:arrayToMap(attributesOrder),attributesOrder:attributesOrder,children:arrayToMap(children,dummyObj)},schema[name[ni]]=element},addAttrs=function(name,attributes){var ni,schemaItem,i,l;for(name=split(name),ni=name.length,attributes=split(attributes);ni--;)for(schemaItem=schema[name[ni]],i=0,l=attributes.length;i<l;i++)schemaItem.attributes[attributes[i]]={},schemaItem.attributesOrder.push(attributes[i])};return mapCache[type]?mapCache[type]:(globalAttributes="id accesskey class dir lang style tabindex title role",blockContent="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",phrasingContent="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==type&&(globalAttributes+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",blockContent+=" article aside details dialog figure header footer hgroup section nav",phrasingContent+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==type&&(globalAttributes+=" xml:lang",html4PhrasingContent="acronym applet basefont big font strike tt",phrasingContent=[phrasingContent,html4PhrasingContent].join(" "),each$4(split(html4PhrasingContent),function(name){add(name,"",phrasingContent)}),html4BlockContent="center dir isindex noframes",blockContent=[blockContent,html4BlockContent].join(" "),flowContent=[blockContent,phrasingContent].join(" "),each$4(split(html4BlockContent),function(name){add(name,"",flowContent)})),flowContent=flowContent||[blockContent,phrasingContent].join(" "),add("html","manifest","head body"),add("head","","base command link meta noscript script style title"),add("title hr noscript br"),add("base","href target"),add("link","href rel media hreflang type sizes hreflang"),add("meta","name http-equiv content charset"),add("style","media type scoped"),add("script","src async defer type charset"),add("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",flowContent),add("address dt dd div caption","",flowContent),add("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",phrasingContent),add("blockquote","cite",flowContent),add("ol","reversed start type","li"),add("ul","","li"),add("li","value",flowContent),add("dl","","dt dd"),add("a","href target rel media hreflang type",phrasingContent),add("q","cite",phrasingContent),add("ins del","cite datetime",flowContent),add("img","src sizes srcset alt usemap ismap width height"),add("iframe","src name width height",flowContent),add("embed","src type width height"),add("object","data type typemustmatch name usemap form width height",[flowContent,"param"].join(" ")),add("param","name value"),add("map","name",[flowContent,"area"].join(" ")),add("area","alt coords shape href target rel media hreflang type"),add("table","border","caption colgroup thead tfoot tbody tr"+("html4"===type?" col":"")),add("colgroup","span","col"),add("col","span"),add("tbody thead tfoot","","tr"),add("tr","","td th"),add("td","colspan rowspan headers",flowContent),add("th","colspan rowspan headers scope abbr",flowContent),add("form","accept-charset action autocomplete enctype method name novalidate target",flowContent),add("fieldset","disabled form name",[flowContent,"legend"].join(" ")),add("label","form for",phrasingContent),add("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),add("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===type?flowContent:phrasingContent),add("select","disabled form multiple name required size","option optgroup"),add("optgroup","disabled label","option"),add("option","disabled label selected value"),add("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),add("menu","type label",[flowContent,"li"].join(" ")),add("noscript","",flowContent),"html4"!==type&&(add("wbr"),add("ruby","",[phrasingContent,"rt rp"].join(" ")),add("figcaption","",flowContent),add("mark rt rp summary bdi","",phrasingContent),add("canvas","width height",flowContent),add("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[flowContent,"track source"].join(" ")),add("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[flowContent,"track source"].join(" ")),add("picture","","img source"),add("source","src srcset type media sizes"),add("track","kind src srclang label default"),add("datalist","",[phrasingContent,"option"].join(" ")),add("article section nav aside header footer","",flowContent),add("hgroup","","h1 h2 h3 h4 h5 h6"),add("figure","",[flowContent,"figcaption"].join(" ")),add("time","datetime",phrasingContent),add("dialog","open",flowContent),add("command","type label icon disabled checked radiogroup command"),add("output","for form name",phrasingContent),add("progress","value max",phrasingContent),add("meter","value min max low high optimum",phrasingContent),add("details","open",[flowContent,"summary"].join(" ")),add("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==type&&(addAttrs("script","language xml:space"),addAttrs("style","xml:space"),addAttrs("object","declare classid code codebase codetype archive standby align border hspace vspace"),addAttrs("embed","align name hspace vspace"),addAttrs("param","valuetype type"),addAttrs("a","charset name rev shape coords"),addAttrs("br","clear"),addAttrs("applet","codebase archive code object alt name width height align hspace vspace"),addAttrs("img","name longdesc align border hspace vspace"),addAttrs("iframe","longdesc frameborder marginwidth marginheight scrolling align"),addAttrs("font basefont","size color face"),addAttrs("input","usemap align"),addAttrs("select","onchange"),addAttrs("textarea"),addAttrs("h1 h2 h3 h4 h5 h6 div p legend caption","align"),addAttrs("ul","type compact"),addAttrs("li","type"),addAttrs("ol dl menu dir","compact"),addAttrs("pre","width xml:space"),addAttrs("hr","align noshade size width"),addAttrs("isindex","prompt"),addAttrs("table","summary width frame rules cellspacing cellpadding align bgcolor"),addAttrs("col","width align char charoff valign"),addAttrs("colgroup","width align char charoff valign"),addAttrs("thead","align char charoff valign"),addAttrs("tr","align char charoff valign bgcolor"),addAttrs("th","axis align char charoff valign nowrap bgcolor width height"),addAttrs("form","accept"),addAttrs("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),addAttrs("tfoot","align char charoff valign"),addAttrs("tbody","align char charoff valign"),addAttrs("area","nohref"),addAttrs("body","background bgcolor text link vlink alink")),"html4"!==type&&(addAttrs("input button select textarea","autofocus"),addAttrs("input textarea","placeholder"),addAttrs("a","download"),addAttrs("link script img","crossorigin"),addAttrs("iframe","sandbox seamless allowfullscreen")),each$4(split("a form meter progress dfn"),function(name){schema[name]&&delete schema[name].children[name]}),delete schema.caption.children.table,delete schema.script,mapCache[type]=schema,schema)},compileElementMap=function(value,mode){var styles;return value&&(styles={},"string"==typeof value&&(value={"*":value}),each$4(value,function(value,key){styles[key]=styles[key.toUpperCase()]="map"===mode?makeMap$2(value,/[, ]/):explode$1(value,/[, ]/)})),styles},toHex=function(match,r,g,b){var hex=function(val){return val=parseInt(val,10).toString(16),val.length>1?val:"0"+val};return"#"+hex(r)+hex(g)+hex(b)},each$5=$_8i2houjjducwnd2.each,is$2=$_8i2houjjducwnd2.is,grep$1=$_8i2houjjducwnd2.grep,isIE=$_cum1kc9jducwn99.ie,simpleSelectorRe=/^([a-z0-9],?)+$/i,whiteSpaceRegExp$2=/^[ \t\r\n]*$/,setupAttrHooks=function(domUtils,settings){var keepUrlHook,attrHooks={},keepValues=settings.keep_values;return keepUrlHook={set:function($elm,value,name){settings.url_converter&&(value=settings.url_converter.call(settings.url_converter_scope||domUtils,value,name,$elm[0])),$elm.attr("data-mce-"+name,value).attr(name,value)},get:function($elm,name){return $elm.attr("data-mce-"+name)||$elm.attr(name)}},attrHooks={style:{set:function($elm,value){if(null!==value&&"object"==typeof value)return void $elm.css(value);keepValues&&$elm.attr("data-mce-style",value),$elm.attr("style",value)},get:function($elm){var value=$elm.attr("data-mce-style")||$elm.attr("style");return value=domUtils.serializeStyle(domUtils.parseStyle(value),$elm[0].nodeName)}}},keepValues&&(attrHooks.href=attrHooks.src=keepUrlHook),attrHooks},updateInternalStyleAttr=function(domUtils,$elm){var value=$elm.attr("style");value=domUtils.serializeStyle(domUtils.parseStyle(value),$elm[0].nodeName),value||(value=null),$elm.attr("data-mce-style",value)},nodeIndex=function(node,normalized){var lastNodeType,nodeType,idx=0;if(node)for(lastNodeType=node.nodeType,node=node.previousSibling;node;node=node.previousSibling)nodeType=node.nodeType,(!normalized||3!==nodeType||nodeType!==lastNodeType&&node.nodeValue.length)&&(idx++,lastNodeType=nodeType);return idx},DOMUtils=function(doc,settings){var blockElementsMap,self=this;self.doc=doc,self.win=window,self.files={},self.counter=0,self.stdMode=!isIE||doc.documentMode>=8,self.boxModel=!isIE||"CSS1Compat"===doc.compatMode||self.stdMode,self.styleSheetLoader=StyleSheetLoader(doc),self.boundEvents=[],self.settings=settings=settings||{},self.schema=settings.schema?settings.schema:Schema({}),self.styles=Styles({url_converter:settings.url_converter,url_converter_scope:settings.url_converter_scope},settings.schema),self.fixDoc(doc),
self.events=settings.ownEvents?new EventUtils(settings.proxy):EventUtils.Event,self.attrHooks=setupAttrHooks(self,settings),blockElementsMap=self.schema.getBlockElements(),self.$=DomQuery.overrideDefaults(function(){return{context:doc,element:self.getRoot()}}),self.isBlock=function(node){if(!node)return!1;var type=node.nodeType;return type?!(1!==type||!blockElementsMap[node.nodeName]):!!blockElementsMap[node]}};DOMUtils.prototype={$$:function(elm){return"string"==typeof elm&&(elm=this.get(elm)),this.$(elm)},root:null,fixDoc:function(doc){},clone:function(node,deep){var clone,doc,self=this;return!isIE||1!==node.nodeType||deep?node.cloneNode(deep):(doc=self.doc,deep?clone.firstChild:(clone=doc.createElement(node.nodeName),each$5(self.getAttribs(node),function(attr){self.setAttrib(clone,attr.nodeName,self.getAttrib(node,attr.nodeName))}),clone))},getRoot:function(){var self=this;return self.settings.root_element||self.doc.body},getViewPort:function(win){var doc,rootElm;return win=win?win:this.win,doc=win.document,rootElm=this.boxModel?doc.documentElement:doc.body,{x:win.pageXOffset||rootElm.scrollLeft,y:win.pageYOffset||rootElm.scrollTop,w:win.innerWidth||rootElm.clientWidth,h:win.innerHeight||rootElm.clientHeight}},getRect:function(elm){var pos,size,self=this;return elm=self.get(elm),pos=self.getPos(elm),size=self.getSize(elm),{x:pos.x,y:pos.y,w:size.w,h:size.h}},getSize:function(elm){var w,h,self=this;return elm=self.get(elm),w=self.getStyle(elm,"width"),h=self.getStyle(elm,"height"),w.indexOf("px")===-1&&(w=0),h.indexOf("px")===-1&&(h=0),{w:parseInt(w,10)||elm.offsetWidth||elm.clientWidth,h:parseInt(h,10)||elm.offsetHeight||elm.clientHeight}},getParent:function(node,selector,root){return this.getParents(node,selector,root,!1)},getParents:function(node,selector,root,collect){var selectorVal,self=this,result=[];for(node=self.get(node),collect=void 0===collect,root=root||("BODY"!==self.getRoot().nodeName?self.getRoot().parentNode:null),is$2(selector,"string")&&(selectorVal=selector,selector="*"===selector?function(node){return 1===node.nodeType}:function(node){return self.is(node,selectorVal)});node&&node!==root&&node.nodeType&&9!==node.nodeType;){if(!selector||selector(node)){if(!collect)return node;result.push(node)}node=node.parentNode}return collect?result:null},get:function(elm){var name;return elm&&this.doc&&"string"==typeof elm&&(name=elm,(elm=this.doc.getElementById(elm))&&elm.id!==name)?this.doc.getElementsByName(name)[1]:elm},getNext:function(node,selector){return this._findSib(node,selector,"nextSibling")},getPrev:function(node,selector){return this._findSib(node,selector,"previousSibling")},select:function(selector,scope){var self=this;return Sizzle(selector,self.get(scope)||self.settings.root_element||self.doc,[])},is:function(elm,selector){var i;if(!elm)return!1;if(void 0===elm.length){if("*"===selector)return 1===elm.nodeType;if(simpleSelectorRe.test(selector)){for(selector=selector.toLowerCase().split(/,/),elm=elm.nodeName.toLowerCase(),i=selector.length-1;i>=0;i--)if(selector[i]===elm)return!0;return!1}}if(elm.nodeType&&1!==elm.nodeType)return!1;var elms=elm.nodeType?[elm]:elm;return Sizzle(selector,elms[0].ownerDocument||elms[0],null,elms).length>0},add:function(parentElm,name,attrs,html,create){var self=this;return this.run(parentElm,function(parentElm){var newElm;return newElm=is$2(name,"string")?self.doc.createElement(name):name,self.setAttribs(newElm,attrs),html&&(html.nodeType?newElm.appendChild(html):self.setHTML(newElm,html)),create?newElm:parentElm.appendChild(newElm)})},create:function(name,attrs,html){return this.add(this.doc.createElement(name),name,attrs,html,1)},createHTML:function(name,attrs,html){var key,outHtml="";outHtml+="<"+name;for(key in attrs)attrs.hasOwnProperty(key)&&null!==attrs[key]&&void 0!==attrs[key]&&(outHtml+=" "+key+'="'+this.encode(attrs[key])+'"');return void 0!==html?outHtml+">"+html+"</"+name+">":outHtml+" />"},createFragment:function(html){var frag,node,container,doc=this.doc;for(container=doc.createElement("div"),frag=doc.createDocumentFragment(),html&&(container.innerHTML=html);node=container.firstChild;)frag.appendChild(node);return frag},remove:function(node,keepChildren){return node=this.$$(node),keepChildren?node.each(function(){for(var child;child=this.firstChild;)3===child.nodeType&&0===child.data.length?this.removeChild(child):this.parentNode.insertBefore(child,this)}).remove():node.remove(),node.length>1?node.toArray():node[0]},setStyle:function(elm,name,value){elm=this.$$(elm).css(name,value),this.settings.update_styles&&updateInternalStyleAttr(this,elm)},getStyle:function(elm,name,computed){return elm=this.$$(elm),computed?elm.css(name):(name=name.replace(/-(\D)/g,function(a,b){return b.toUpperCase()}),"float"===name&&(name=$_cum1kc9jducwn99.ie&&$_cum1kc9jducwn99.ie<12?"styleFloat":"cssFloat"),elm[0]&&elm[0].style?elm[0].style[name]:void 0)},setStyles:function(elm,styles){elm=this.$$(elm).css(styles),this.settings.update_styles&&updateInternalStyleAttr(this,elm)},removeAllAttribs:function(e){return this.run(e,function(e){var i,attrs=e.attributes;for(i=attrs.length-1;i>=0;i--)e.removeAttributeNode(attrs.item(i))})},setAttrib:function(elm,name,value){var originalValue,hook,self=this,settings=self.settings;""===value&&(value=null),elm=self.$$(elm),originalValue=elm.attr(name),elm.length&&(hook=self.attrHooks[name],hook&&hook.set?hook.set(elm,value,name):elm.attr(name,value),originalValue!==value&&settings.onSetAttrib&&settings.onSetAttrib({attrElm:elm,attrName:name,attrValue:value}))},setAttribs:function(elm,attrs){var self=this;self.$$(elm).each(function(i,node){each$5(attrs,function(value,name){self.setAttrib(node,name,value)})})},getAttrib:function(elm,name,defaultVal){var hook,value,self=this;return elm=self.$$(elm),elm.length&&(hook=self.attrHooks[name],value=hook&&hook.get?hook.get(elm,name):elm.attr(name)),void 0===value&&(value=defaultVal||""),value},getPos:function(elm,rootElm){return $_4jv3c6ljducwnfj.getPos(this.doc.body,this.get(elm),rootElm)},parseStyle:function(cssText){return this.styles.parse(cssText)},serializeStyle:function(styles,name){return this.styles.serialize(styles,name)},addStyle:function(cssText){var head,styleElm,self=this,doc=self.doc;if(self!==DOMUtils.DOM&&doc===document){var addedStyles=DOMUtils.DOM.addedStyles;if(addedStyles=addedStyles||[],addedStyles[cssText])return;addedStyles[cssText]=!0,DOMUtils.DOM.addedStyles=addedStyles}styleElm=doc.getElementById("mceDefaultStyles"),styleElm||(styleElm=doc.createElement("style"),styleElm.id="mceDefaultStyles",styleElm.type="text/css",head=doc.getElementsByTagName("head")[0],head.firstChild?head.insertBefore(styleElm,head.firstChild):head.appendChild(styleElm)),styleElm.styleSheet?styleElm.styleSheet.cssText+=cssText:styleElm.appendChild(doc.createTextNode(cssText))},loadCSS:function(url){var head,self=this,doc=self.doc;if(self!==DOMUtils.DOM&&doc===document)return void DOMUtils.DOM.loadCSS(url);url||(url=""),head=doc.getElementsByTagName("head")[0],each$5(url.split(","),function(url){var link;url=$_8i2houjjducwnd2._addCacheSuffix(url),self.files[url]||(self.files[url]=!0,link=self.create("link",{rel:"stylesheet",href:url}),isIE&&doc.documentMode&&doc.recalc&&(link.onload=function(){doc.recalc&&doc.recalc(),link.onload=null}),head.appendChild(link))})},addClass:function(elm,cls){this.$$(elm).addClass(cls)},removeClass:function(elm,cls){this.toggleClass(elm,cls,!1)},hasClass:function(elm,cls){return this.$$(elm).hasClass(cls)},toggleClass:function(elm,cls,state){this.$$(elm).toggleClass(cls,state).each(function(){""===this.className&&DomQuery(this).attr("class",null)})},show:function(elm){this.$$(elm).show()},hide:function(elm){this.$$(elm).hide()},isHidden:function(elm){return"none"===this.$$(elm).css("display")},uniqueId:function(prefix){return(prefix?prefix:"mce_")+this.counter++},setHTML:function(elm,html){elm=this.$$(elm),isIE?elm.each(function(i,target){if(target.canHaveHTML!==!1){for(;target.firstChild;)target.removeChild(target.firstChild);try{target.innerHTML="<br>"+html,target.removeChild(target.firstChild)}catch(ex){DomQuery("<div></div>").html("<br>"+html).contents().slice(1).appendTo(target)}return html}}):elm.html(html)},getOuterHTML:function(elm){return elm=this.get(elm),1===elm.nodeType&&"outerHTML"in elm?elm.outerHTML:DomQuery("<div></div>").append(DomQuery(elm).clone()).html()},setOuterHTML:function(elm,html){var self=this;self.$$(elm).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=html)}catch(ex){}self.remove(DomQuery(this).html(html),!0)})},decode:$_g4jbz61rjducwnjq.decode,encode:$_g4jbz61rjducwnjq.encodeAllRaw,insertAfter:function(node,referenceNode){return referenceNode=this.get(referenceNode),this.run(node,function(node){var parent,nextSibling;return parent=referenceNode.parentNode,nextSibling=referenceNode.nextSibling,nextSibling?parent.insertBefore(node,nextSibling):parent.appendChild(node),node})},replace:function(newElm,oldElm,keepChildren){return this.run(oldElm,function(oldElm){return is$2(oldElm,"array")&&(newElm=newElm.cloneNode(!0)),keepChildren&&each$5(grep$1(oldElm.childNodes),function(node){newElm.appendChild(node)}),oldElm.parentNode.replaceChild(newElm,oldElm)})},rename:function(elm,name){var newElm,self=this;return elm.nodeName!==name.toUpperCase()&&(newElm=self.create(name),each$5(self.getAttribs(elm),function(attrNode){self.setAttrib(newElm,attrNode.nodeName,self.getAttrib(elm,attrNode.nodeName))}),self.replace(newElm,elm,1)),newElm||elm},findCommonAncestor:function(a,b){for(var pe,ps=a;ps;){for(pe=b;pe&&ps!==pe;)pe=pe.parentNode;if(ps===pe)break;ps=ps.parentNode}return!ps&&a.ownerDocument?a.ownerDocument.documentElement:ps},toHex:function(rgbVal){return this.styles.toHex($_8i2houjjducwnd2.trim(rgbVal))},run:function(elm,func,scope){var result,self=this;return"string"==typeof elm&&(elm=self.get(elm)),!!elm&&(scope=scope||this,elm.nodeType||!elm.length&&0!==elm.length?func.call(scope,elm):(result=[],each$5(elm,function(elm,i){elm&&("string"==typeof elm&&(elm=self.get(elm)),result.push(func.call(scope,elm,i)))}),result))},getAttribs:function(elm){var attrs;if(!(elm=this.get(elm)))return[];if(isIE){if(attrs=[],"OBJECT"===elm.nodeName)return elm.attributes;"OPTION"===elm.nodeName&&this.getAttrib(elm,"selected")&&attrs.push({specified:1,nodeName:"selected"});return elm.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(a){attrs.push({specified:1,nodeName:a})}),attrs}return elm.attributes},isEmpty:function(node,elements){var i,attributes,type,whitespace,walker,name,self=this,brCount=0;if(node=node.firstChild){walker=new TreeWalker(node,node.parentNode),elements=elements||(self.schema?self.schema.getNonEmptyElements():null),whitespace=self.schema?self.schema.getWhiteSpaceElements():{};do{if(1===(type=node.nodeType)){var bogusVal=node.getAttribute("data-mce-bogus");if(bogusVal){node=walker.next("all"===bogusVal);continue}if(name=node.nodeName.toLowerCase(),elements&&elements[name]){if("br"===name){brCount++,node=walker.next();continue}return!1}for(attributes=self.getAttribs(node),i=attributes.length;i--;)if("name"===(name=attributes[i].nodeName)||"data-mce-bookmark"===name)return!1}if(8===type)return!1;if(3===type&&!whiteSpaceRegExp$2.test(node.nodeValue))return!1;if(3===type&&node.parentNode&&whitespace[node.parentNode.nodeName]&&whiteSpaceRegExp$2.test(node.nodeValue))return!1;node=walker.next()}while(node)}return brCount<=1},createRng:function(){return this.doc.createRange()},nodeIndex:nodeIndex,split:function(parentElm,splitElm,replacementElm){var bef,aft,pa,self=this,r=self.createRng();if(parentElm&&splitElm)return r.setStart(parentElm.parentNode,self.nodeIndex(parentElm)),r.setEnd(splitElm.parentNode,self.nodeIndex(splitElm)),bef=r.extractContents(),r=self.createRng(),r.setStart(splitElm.parentNode,self.nodeIndex(splitElm)+1),r.setEnd(parentElm.parentNode,self.nodeIndex(parentElm)+1),aft=r.extractContents(),pa=parentElm.parentNode,pa.insertBefore($_f6ekvb1ojducwnje.trimNode(self,bef),parentElm),replacementElm?pa.insertBefore(replacementElm,parentElm):pa.insertBefore(splitElm,parentElm),pa.insertBefore($_f6ekvb1ojducwnje.trimNode(self,aft),parentElm),self.remove(parentElm),replacementElm||splitElm},bind:function(target,name,func,scope){var self=this;if($_8i2houjjducwnd2.isArray(target)){for(var i=target.length;i--;)target[i]=self.bind(target[i],name,func,scope);return target}return!self.settings.collect||target!==self.doc&&target!==self.win||self.boundEvents.push([target,name,func,scope]),self.events.bind(target,name,func,scope||self)},unbind:function(target,name,func){var i,self=this;if($_8i2houjjducwnd2.isArray(target)){for(i=target.length;i--;)target[i]=self.unbind(target[i],name,func);return target}if(self.boundEvents&&(target===self.doc||target===self.win))for(i=self.boundEvents.length;i--;){var item=self.boundEvents[i];target!==item[0]||name&&name!==item[1]||func&&func!==item[2]||this.events.unbind(item[0],item[1],item[2])}return this.events.unbind(target,name,func)},fire:function(target,name,evt){return this.events.fire(target,name,evt)},getContentEditable:function(node){var contentEditable;return node&&1===node.nodeType?(contentEditable=node.getAttribute("data-mce-contenteditable"),contentEditable&&"inherit"!==contentEditable?contentEditable:"inherit"!==node.contentEditable?node.contentEditable:null):null},getContentEditableParent:function(node){for(var root=this.getRoot(),state=null;node&&node!==root&&null===(state=this.getContentEditable(node));node=node.parentNode);return state},destroy:function(){var self=this;if(self.boundEvents){for(var i=self.boundEvents.length;i--;){var item=self.boundEvents[i];this.events.unbind(item[0],item[1],item[2])}self.boundEvents=null}Sizzle.setDocument&&Sizzle.setDocument(),self.win=self.doc=self.root=self.events=self.frag=null},isChildOf:function(node,parent){for(;node;){if(parent===node)return!0;node=node.parentNode}return!1},dumpRng:function(r){return"startContainer: "+r.startContainer.nodeName+", startOffset: "+r.startOffset+", endContainer: "+r.endContainer.nodeName+", endOffset: "+r.endOffset},_findSib:function(node,selector,name){var self=this,func=selector;if(node)for("string"==typeof func&&(func=function(node){return self.is(node,selector)}),node=node[name];node;node=node[name])if(func(node))return node;return null}},DOMUtils.DOM=new DOMUtils(document),DOMUtils.nodeIndex=nodeIndex;var DOM=DOMUtils.DOM,each$6=$_8i2houjjducwnd2.each,grep$2=$_8i2houjjducwnd2.grep,isFunction=function(f){return"function"==typeof f},ScriptLoader=function(){var states={},queue=[],scriptLoadedCallbacks={},queueLoadedCallbacks=[],loading=0,loadScript=function(url,success,failure){var elm,id,dom=DOM,done=function(){dom.remove(id),elm&&(elm.onreadystatechange=elm.onload=elm=null),success()},error=function(){isFunction(failure)?failure():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+url)};id=dom.uniqueId(),elm=document.createElement("script"),elm.id=id,elm.type="text/javascript",elm.src=$_8i2houjjducwnd2._addCacheSuffix(url),"onreadystatechange"in elm?elm.onreadystatechange=function(){/loaded|complete/.test(elm.readyState)&&done()}:elm.onload=done,elm.onerror=error,(document.getElementsByTagName("head")[0]||document.body).appendChild(elm)};this.isDone=function(url){return 2===states[url]},this.markDone=function(url){states[url]=2},this.add=this.load=function(url,success,scope,failure){void 0===states[url]&&(queue.push(url),states[url]=0),success&&(scriptLoadedCallbacks[url]||(scriptLoadedCallbacks[url]=[]),scriptLoadedCallbacks[url].push({success:success,failure:failure,scope:scope||this}))},this.remove=function(url){delete states[url],delete scriptLoadedCallbacks[url]},this.loadQueue=function(success,scope,failure){this.loadScripts(queue,success,scope,failure)},this.loadScripts=function(scripts,success,scope,failure){var loadScripts,failures=[],execCallbacks=function(name,url){each$6(scriptLoadedCallbacks[url],function(callback){isFunction(callback[name])&&callback[name].call(callback.scope)}),scriptLoadedCallbacks[url]=void 0};queueLoadedCallbacks.push({success:success,failure:failure,scope:scope||this}),(loadScripts=function(){var loadingScripts=grep$2(scripts);if(scripts.length=0,each$6(loadingScripts,function(url){return 2===states[url]?void execCallbacks("success",url):3===states[url]?void execCallbacks("failure",url):void(1!==states[url]&&(states[url]=1,loading++,loadScript(url,function(){states[url]=2,loading--,execCallbacks("success",url),loadScripts()},function(){states[url]=3,loading--,failures.push(url),execCallbacks("failure",url),loadScripts()})))}),!loading){var notifyCallbacks=queueLoadedCallbacks.slice(0);queueLoadedCallbacks.length=0,each$6(notifyCallbacks,function(callback){0===failures.length?isFunction(callback.success)&&callback.success.call(callback.scope):isFunction(callback.failure)&&callback.failure.call(callback.scope,failures)})}})()}};ScriptLoader.ScriptLoader=new ScriptLoader;var each$7=$_8i2houjjducwnd2.each,AddOnManager=function(){var self=this;self.items=[],self.urls={},self.lookup={},self._listeners=[]};AddOnManager.prototype={get:function(name){if(this.lookup[name])return this.lookup[name].instance},dependencies:function(name){var result;return this.lookup[name]&&(result=this.lookup[name].dependencies),result||[]},requireLangPack:function(name,languages){var language=AddOnManager.language;if(language&&AddOnManager.languageLoad!==!1){if(languages)if(languages=","+languages+",",languages.indexOf(","+language.substr(0,2)+",")!==-1)language=language.substr(0,2);else if(languages.indexOf(","+language+",")===-1)return;ScriptLoader.ScriptLoader.add(this.urls[name]+"/langs/"+language+".js")}},add:function(id,addOn,dependencies){this.items.push(addOn),this.lookup[id]={instance:addOn,dependencies:dependencies};var result=$_2dw1bj4jducwn6g.partition(this._listeners,function(listener){return listener.name===id});return this._listeners=result.fail,each$7(result.pass,function(listener){listener.callback()}),addOn},remove:function(name){delete this.urls[name],delete this.lookup[name]},createUrl:function(baseUrl,dep){return"object"==typeof dep?dep:{prefix:baseUrl.prefix,resource:dep,suffix:baseUrl.suffix}},addComponents:function(pluginName,scripts){var pluginUrl=this.urls[pluginName];each$7(scripts,function(script){ScriptLoader.ScriptLoader.add(pluginUrl+"/"+script)})},load:function(name,addOnUrl,success,scope,failure){var self=this,url=addOnUrl,loadDependencies=function(){var dependencies=self.dependencies(name);each$7(dependencies,function(dep){var newUrl=self.createUrl(addOnUrl,dep);self.load(newUrl.resource,newUrl,void 0,void 0)}),success&&(scope?success.call(scope):success.call(ScriptLoader))};self.urls[name]||("object"==typeof addOnUrl&&(url=addOnUrl.prefix+addOnUrl.resource+addOnUrl.suffix),0!==url.indexOf("/")&&url.indexOf("://")===-1&&(url=AddOnManager.baseURL+"/"+url),self.urls[name]=url.substring(0,url.lastIndexOf("/")),self.lookup[name]?loadDependencies():ScriptLoader.ScriptLoader.add(url,loadDependencies,scope,failure))},waitFor:function(name,callback){this.lookup.hasOwnProperty(name)?callback():this._listeners.push({name:name,callback:callback})}},AddOnManager.PluginManager=new AddOnManager,AddOnManager.ThemeManager=new AddOnManager;var isZwsp=function(chr){return"\ufeff"===chr},trim$3=function(text){return text.replace(new RegExp("\ufeff","g"),"")},$_fz0k4u21jducwnmu={isZwsp:isZwsp,ZWSP:"\ufeff",trim:trim$3},isElement$2=$_fj238m1qjducwnjm.isElement,isText$2=$_fj238m1qjducwnjm.isText,isCaretContainerBlock=function(node){return isText$2(node)&&(node=node.parentNode),isElement$2(node)&&node.hasAttribute("data-mce-caret")},isCaretContainerInline=function(node){return isText$2(node)&&$_fz0k4u21jducwnmu.isZwsp(node.data)},isCaretContainer=function(node){return isCaretContainerBlock(node)||isCaretContainerInline(node)},hasContent=function(node){return node.firstChild!==node.lastChild||!$_fj238m1qjducwnjm.isBr(node.firstChild)},insertInline=function(node,before){var doc,sibling,textNode,parentNode;if(doc=node.ownerDocument,textNode=doc.createTextNode($_fz0k4u21jducwnmu.ZWSP),parentNode=node.parentNode,before){if(sibling=node.previousSibling,isText$2(sibling)){if(isCaretContainer(sibling))return sibling;if(endsWithCaretContainer(sibling))return sibling.splitText(sibling.data.length-1)}parentNode.insertBefore(textNode,node)}else{if(sibling=node.nextSibling,isText$2(sibling)){if(isCaretContainer(sibling))return sibling;if(startsWithCaretContainer(sibling))return sibling.splitText(1),sibling}node.nextSibling?parentNode.insertBefore(textNode,node.nextSibling):parentNode.appendChild(textNode)}return textNode},isBeforeInline=function(pos){var container=pos.container();return pos&&$_fj238m1qjducwnjm.isText(container)&&container.data.charAt(pos.offset())===$_fz0k4u21jducwnmu.ZWSP},isAfterInline=function(pos){var container=pos.container();return pos&&$_fj238m1qjducwnjm.isText(container)&&container.data.charAt(pos.offset()-1)===$_fz0k4u21jducwnmu.ZWSP},createBogusBr=function(){var br=document.createElement("br");return br.setAttribute("data-mce-bogus","1"),br},insertBlock=function(blockName,node,before){var doc,blockNode,parentNode;return doc=node.ownerDocument,blockNode=doc.createElement(blockName),blockNode.setAttribute("data-mce-caret",before?"before":"after"),blockNode.setAttribute("data-mce-bogus","all"),blockNode.appendChild(createBogusBr()),parentNode=node.parentNode,before?parentNode.insertBefore(blockNode,node):node.nextSibling?parentNode.insertBefore(blockNode,node.nextSibling):parentNode.appendChild(blockNode),blockNode},startsWithCaretContainer=function(node){return isText$2(node)&&node.data[0]===$_fz0k4u21jducwnmu.ZWSP},endsWithCaretContainer=function(node){return isText$2(node)&&node.data[node.data.length-1]===$_fz0k4u21jducwnmu.ZWSP},trimBogusBr=function(elm){var brs=elm.getElementsByTagName("br"),lastBr=brs[brs.length-1];$_fj238m1qjducwnjm.isBogus(lastBr)&&lastBr.parentNode.removeChild(lastBr)},showCaretContainerBlock=function(caretContainer){return caretContainer&&caretContainer.hasAttribute("data-mce-caret")?(trimBogusBr(caretContainer),caretContainer.removeAttribute("data-mce-caret"),caretContainer.removeAttribute("data-mce-bogus"),caretContainer.removeAttribute("style"),caretContainer.removeAttribute("_moz_abspos"),caretContainer):null},isRangeInCaretContainerBlock=function(range){return isCaretContainerBlock(range.startContainer)},isContentEditableTrue$1=$_fj238m1qjducwnjm.isContentEditableTrue,isContentEditableFalse$1=$_fj238m1qjducwnjm.isContentEditableFalse,isBr$2=$_fj238m1qjducwnjm.isBr,isText$3=$_fj238m1qjducwnjm.isText,isInvalidTextElement=$_fj238m1qjducwnjm.matchNodeNames("script style textarea"),isAtomicInline=$_fj238m1qjducwnjm.matchNodeNames("img input textarea hr iframe video audio object"),isTable$1=$_fj238m1qjducwnjm.matchNodeNames("table"),isCaretContainer$1=isCaretContainer,isCaretCandidate=function(node){return!isCaretContainer$1(node)&&(isText$3(node)?!isInvalidTextElement(node.parentNode):isAtomicInline(node)||isBr$2(node)||isTable$1(node)||isContentEditableFalse$1(node))},isInEditable=function(node,root){for(node=node.parentNode;node&&node!==root;node=node.parentNode){if(isContentEditableFalse$1(node))return!1;if(isContentEditableTrue$1(node))return!0}return!0},isAtomicContentEditableFalse=function(node){return!!isContentEditableFalse$1(node)&&$_e6e6g1kjducwnfd.reduce(node.getElementsByTagName("*"),function(result,elm){return result||isContentEditableTrue$1(elm)},!1)!==!0},isAtomic=function(node){return isAtomicInline(node)||isAtomicContentEditableFalse(node)},isEditableCaretCandidate=function(node,root){return isCaretCandidate(node)&&isInEditable(node,root)},round=Math.round,clone$1=function(rect){return rect?{left:round(rect.left),top:round(rect.top),bottom:round(rect.bottom),right:round(rect.right),width:round(rect.width),height:round(rect.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},collapse=function(rect,toStart){return rect=clone$1(rect),toStart?rect.right=rect.left:(rect.left=rect.left+rect.width,rect.right=rect.left),rect.width=0,rect},isEqual=function(rect1,rect2){return rect1.left===rect2.left&&rect1.top===rect2.top&&rect1.bottom===rect2.bottom&&rect1.right===rect2.right},isValidOverflow=function(overflowY,rect1,rect2){return overflowY>=0&&overflowY<=Math.min(rect1.height,rect2.height)/2},isAbove=function(rect1,rect2){return rect1.bottom-rect1.height/2<rect2.top||!(rect1.top>rect2.bottom)&&isValidOverflow(rect2.top-rect1.bottom,rect1,rect2)},isBelow=function(rect1,rect2){return rect1.top>rect2.bottom||!(rect1.bottom<rect2.top)&&isValidOverflow(rect2.bottom-rect1.top,rect1,rect2)},containsXY=function(rect,clientX,clientY){return clientX>=rect.left&&clientX<=rect.right&&clientY>=rect.top&&clientY<=rect.bottom},getSelectedNode=function(range){var startContainer=range.startContainer,startOffset=range.startOffset;return startContainer.hasChildNodes()&&range.endOffset===startOffset+1?startContainer.childNodes[startOffset]:null},getNode=function(container,offset){return 1===container.nodeType&&container.hasChildNodes()&&(offset>=container.childNodes.length&&(offset=container.childNodes.length-1),container=container.childNodes[offset]),container},extendingChars=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),isExtendingChar=function(ch){return"string"==typeof ch&&ch.charCodeAt(0)>=768&&extendingChars.test(ch)},slice$3=[].slice,constant$1=function(value){return function(){return value}},negate=function(predicate){return function(x){return!predicate(x)}},compose$2=function(f,g){return function(x){return f(g(x))}},or=function(){for(var x=[],_i=0;_i<arguments.length;_i++)x[_i]=arguments[_i];var args=slice$3.call(arguments);return function(x){for(var i=0;i<args.length;i++)if(args[i](x))return!0;return!1}},and=function(){for(var x=[],_i=0;_i<arguments.length;_i++)x[_i]=arguments[_i];var args=slice$3.call(arguments);return function(x){for(var i=0;i<args.length;i++)if(!args[i](x))return!1;return!0}},curry$1=function(fn){for(var x=[],_i=1;_i<arguments.length;_i++)x[_i-1]=arguments[_i];var args=slice$3.call(arguments);return args.length-1>=fn.length?fn.apply(this,args.slice(1)):function(){var tempArgs=args.concat([].slice.call(arguments));return curry$1.apply(this,tempArgs)}},noop$1=function(){},$_6183wb25jducwnn2={constant:constant$1,negate:negate,and:and,or:or,curry:curry$1,compose:compose$2,noop:noop$1},isElement$3=$_fj238m1qjducwnjm.isElement,isCaretCandidate$1=isCaretCandidate,isBlock$1=$_fj238m1qjducwnjm.matchStyleValues("display","block table"),isFloated=$_fj238m1qjducwnjm.matchStyleValues("float","left right"),isValidElementCaretCandidate=$_6183wb25jducwnn2.and(isElement$3,isCaretCandidate$1,$_6183wb25jducwnn2.negate(isFloated)),isNotPre=$_6183wb25jducwnn2.negate($_fj238m1qjducwnjm.matchStyleValues("white-space","pre pre-line pre-wrap")),isText$4=$_fj238m1qjducwnjm.isText,isBr$3=$_fj238m1qjducwnjm.isBr,nodeIndex$1=DOMUtils.nodeIndex,resolveIndex=getNode,createRange=function(doc){return"createRange"in doc?doc.createRange():DOMUtils.DOM.createRng()},isWhiteSpace=function(chr){return chr&&/[\r\n\t ]/.test(chr)},isRange=function(rng){return!!rng.setStart&&!!rng.setEnd},isHiddenWhiteSpaceRange=function(range){var text,container=range.startContainer,offset=range.startOffset;return!!(isWhiteSpace(range.toString())&&isNotPre(container.parentNode)&&$_fj238m1qjducwnjm.isText(container)&&(text=container.data,isWhiteSpace(text[offset-1])||isWhiteSpace(text[offset+1])))},getBrClientRect=function(brNode){var clientRect,doc=brNode.ownerDocument,rng=createRange(doc),nbsp=doc.createTextNode(" "),parentNode=brNode.parentNode;return parentNode.insertBefore(nbsp,brNode),rng.setStart(nbsp,0),rng.setEnd(nbsp,1),clientRect=clone$1(rng.getBoundingClientRect()),parentNode.removeChild(nbsp),clientRect},getBoundingClientRectWebKitText=function(rng){var sc=rng.startContainer,ec=rng.endContainer,so=rng.startOffset,eo=rng.endOffset;if(sc===ec&&$_fj238m1qjducwnjm.isText(ec)&&0===so&&1===eo){var newRng=rng.cloneRange();return newRng.setEndAfter(ec),getBoundingClientRect(newRng)}return null},isZeroRect=function(r){return 0===r.left&&0===r.right&&0===r.top&&0===r.bottom},getBoundingClientRect=function(item){var clientRect,clientRects;return clientRects=item.getClientRects(),clientRect=clone$1(clientRects.length>0?clientRects[0]:item.getBoundingClientRect()),!isRange(item)&&isBr$3(item)&&isZeroRect(clientRect)?getBrClientRect(item):isZeroRect(clientRect)&&isRange(item)?getBoundingClientRectWebKitText(item):clientRect},collapseAndInflateWidth=function(clientRect,toStart){var newClientRect=collapse(clientRect,toStart);return newClientRect.width=1,newClientRect.right=newClientRect.left+1,newClientRect},getCaretPositionClientRects=function(caretPosition){var beforeNode,node,clientRects=[],addUniqueAndValidRect=function(clientRect){0!==clientRect.height&&(clientRects.length>0&&isEqual(clientRect,clientRects[clientRects.length-1])||clientRects.push(clientRect))},addCharacterOffset=function(container,offset){var range=createRange(container.ownerDocument);if(offset<container.data.length){if(isExtendingChar(container.data[offset]))return clientRects;if(isExtendingChar(container.data[offset-1])&&(range.setStart(container,offset),range.setEnd(container,offset+1),!isHiddenWhiteSpaceRange(range)))return addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(range),!1)),clientRects}offset>0&&(range.setStart(container,offset-1),range.setEnd(container,offset),isHiddenWhiteSpaceRange(range)||addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(range),!1))),offset<container.data.length&&(range.setStart(container,offset),range.setEnd(container,offset+1),isHiddenWhiteSpaceRange(range)||addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(range),!0)))};if(isText$4(caretPosition.container()))return addCharacterOffset(caretPosition.container(),caretPosition.offset()),clientRects;if(isElement$3(caretPosition.container()))if(caretPosition.isAtEnd())node=resolveIndex(caretPosition.container(),caretPosition.offset()),isText$4(node)&&addCharacterOffset(node,node.data.length),isValidElementCaretCandidate(node)&&!isBr$3(node)&&addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node),!1));else{if(node=resolveIndex(caretPosition.container(),caretPosition.offset()),isText$4(node)&&addCharacterOffset(node,0),isValidElementCaretCandidate(node)&&caretPosition.isAtEnd())return addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node),!1)),clientRects;beforeNode=resolveIndex(caretPosition.container(),caretPosition.offset()-1),isValidElementCaretCandidate(beforeNode)&&!isBr$3(beforeNode)&&(isBlock$1(beforeNode)||isBlock$1(node)||!isValidElementCaretCandidate(node))&&addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(beforeNode),!1)),isValidElementCaretCandidate(node)&&addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node),!0))}return clientRects};!function(CaretPosition){CaretPosition.fromRangeStart=function(range){return CaretPosition(range.startContainer,range.startOffset)},CaretPosition.fromRangeEnd=function(range){return CaretPosition(range.endContainer,range.endOffset)},CaretPosition.after=function(node){return CaretPosition(node.parentNode,nodeIndex$1(node)+1)},CaretPosition.before=function(node){return CaretPosition(node.parentNode,nodeIndex$1(node))},CaretPosition.isAtStart=function(pos){
return!!pos&&pos.isAtStart()},CaretPosition.isAtEnd=function(pos){return!!pos&&pos.isAtEnd()},CaretPosition.isTextPosition=function(pos){return!!pos&&$_fj238m1qjducwnjm.isText(pos.container())}}(CaretPosition||(CaretPosition={}));var BreakType,CaretPosition$1=CaretPosition,isElement$4=$_fj238m1qjducwnjm.isElement,isText$5=$_fj238m1qjducwnjm.isText,removeNode=function(node){var parentNode=node.parentNode;parentNode&&parentNode.removeChild(node)},getNodeValue=function(node){try{return node.nodeValue}catch(ex){return""}},setNodeValue=function(node,text){0===text.length?removeNode(node):node.nodeValue=text},trimCount=function(text){var trimmedText=$_fz0k4u21jducwnmu.trim(text);return{count:text.length-trimmedText.length,text:trimmedText}},removeUnchanged=function(caretContainer,pos){return remove$2(caretContainer),pos},removeTextAndReposition=function(caretContainer,pos){var before=trimCount(caretContainer.data.substr(0,pos.offset())),after=trimCount(caretContainer.data.substr(pos.offset())),text=before.text+after.text;return text.length>0?(setNodeValue(caretContainer,text),CaretPosition$1(caretContainer,pos.offset()-before.count)):pos},removeElementAndReposition=function(caretContainer,pos){var parentNode=pos.container(),newPosition=$_2dw1bj4jducwn6g.indexOf(parentNode.childNodes,caretContainer).map(function(index){return index<pos.offset()?CaretPosition$1(parentNode,pos.offset()-1):pos}).getOr(pos);return remove$2(caretContainer),newPosition},removeTextCaretContainer=function(caretContainer,pos){return isText$5(caretContainer)&&pos.container()===caretContainer?removeTextAndReposition(caretContainer,pos):removeUnchanged(caretContainer,pos)},removeElementCaretContainer=function(caretContainer,pos){return pos.container()===caretContainer.parentNode?removeElementAndReposition(caretContainer,pos):removeUnchanged(caretContainer,pos)},removeAndReposition=function(container,pos){return CaretPosition$1.isTextPosition(pos)?removeTextCaretContainer(container,pos):removeElementCaretContainer(container,pos)},remove$2=function(caretContainerNode){if(isElement$4(caretContainerNode)&&isCaretContainer(caretContainerNode)&&(hasContent(caretContainerNode)?caretContainerNode.removeAttribute("data-mce-caret"):removeNode(caretContainerNode)),isText$5(caretContainerNode)){var text=$_fz0k4u21jducwnmu.trim(getNodeValue(caretContainerNode));setNodeValue(caretContainerNode,text)}},$_53zrlo29jducwnnv={removeAndReposition:removeAndReposition,remove:remove$2},walkToPositionIn=function(forward,root,start){var position=forward?CaretPosition$1.before(start):CaretPosition$1.after(start);return fromPosition(forward,root,position)},afterElement=function(node){return $_fj238m1qjducwnjm.isBr(node)?CaretPosition$1.before(node):CaretPosition$1.after(node)},isBeforeOrStart=function(position){return CaretPosition$1.isTextPosition(position)?0===position.offset():isCaretCandidate(position.getNode())},isAfterOrEnd=function(position){if(CaretPosition$1.isTextPosition(position)){var container=position.container();return position.offset()===container.data.length}return isCaretCandidate(position.getNode(!0))},isBeforeAfterSameElement=function(from,to){return!CaretPosition$1.isTextPosition(from)&&!CaretPosition$1.isTextPosition(to)&&from.getNode()===to.getNode(!0)},isAtBr=function(position){return!CaretPosition$1.isTextPosition(position)&&$_fj238m1qjducwnjm.isBr(position.getNode())},shouldSkipPosition=function(forward,from,to){return forward?!isBeforeAfterSameElement(from,to)&&!isAtBr(from)&&isAfterOrEnd(from)&&isBeforeOrStart(to):!isBeforeAfterSameElement(to,from)&&isBeforeOrStart(from)&&isAfterOrEnd(to)},fromPosition=function(forward,root,pos){var walker=CaretWalker(root);return Option.from(forward?walker.next(pos):walker.prev(pos))},navigate=function(forward,root,from){return fromPosition(forward,root,from).bind(function(to){return isInSameBlock(from,to,root)&&shouldSkipPosition(forward,from,to)?fromPosition(forward,root,to):Option.some(to)})},positionIn=function(forward,element){var startNode=forward?element.firstChild:element.lastChild;return $_fj238m1qjducwnjm.isText(startNode)?Option.some(CaretPosition$1(startNode,forward?0:startNode.data.length)):startNode?isCaretCandidate(startNode)?Option.some(forward?CaretPosition$1.before(startNode):afterElement(startNode)):walkToPositionIn(forward,element,startNode):Option.none()},$_dq07eg2bjducwno6={fromPosition:fromPosition,nextPosition:$_60qu7r6jducwn73.curry(fromPosition,!0),prevPosition:$_60qu7r6jducwn73.curry(fromPosition,!1),navigate:navigate,positionIn:positionIn,firstPositionIn:$_60qu7r6jducwn73.curry(positionIn,!0),lastPositionIn:$_60qu7r6jducwn73.curry(positionIn,!1)},isContentEditableTrue$2=$_fj238m1qjducwnjm.isContentEditableTrue,isContentEditableFalse$2=$_fj238m1qjducwnjm.isContentEditableFalse,showCaret=function(direction,editor,node,before){return editor._selectionOverrides.showCaret(direction,node,before)},getNodeRange=function(node){var rng=node.ownerDocument.createRange();return rng.selectNode(node),rng},selectNode=function(editor,node){var e;return e=editor.fire("BeforeObjectSelected",{target:node}),e.isDefaultPrevented()?null:getNodeRange(node)},renderCaretAtRange=function(editor,range){var caretPosition,ceRoot;return range=normalizeRange(1,editor.getBody(),range),caretPosition=CaretPosition$1.fromRangeStart(range),isContentEditableFalse$2(caretPosition.getNode())?showCaret(1,editor,caretPosition.getNode(),!caretPosition.isAtEnd()):isContentEditableFalse$2(caretPosition.getNode(!0))?showCaret(1,editor,caretPosition.getNode(!0),!1):(ceRoot=editor.dom.getParent(caretPosition.getNode(),function(node){return isContentEditableFalse$2(node)||isContentEditableTrue$2(node)}),isContentEditableFalse$2(ceRoot)?showCaret(1,editor,ceRoot,!1):null)},renderRangeCaret=function(editor,range){var caretRange;return range&&range.collapsed?(caretRange=renderCaretAtRange(editor,range),caretRange?caretRange:range):range},cat=function(arr){for(var r=[],push=function(x){r.push(x)},i=0;i<arr.length;i++)arr[i].each(push);return r},findMap=function(arr,f){for(var i=0;i<arr.length;i++){var r=f(arr[i],i);if(r.isSome())return r}return Option.none()},liftN=function(arr,f){for(var r=[],i=0;i<arr.length;i++){var x=arr[i];if(!x.isSome())return Option.none();r.push(x.getOrDie())}return Option.some(f.apply(null,r))},$_87ppqy2ejducwnol={cat:cat,findMap:findMap,liftN:liftN};!function(BreakType){BreakType[BreakType.Br=0]="Br",BreakType[BreakType.Block=1]="Block",BreakType[BreakType.Wrap=2]="Wrap",BreakType[BreakType.Eol=3]="Eol"}(BreakType||(BreakType={}));var HDirection,isAbove$1=function(pos1,pos2){return $_87ppqy2ejducwnol.liftN([$_2dw1bj4jducwn6g.head(pos2.getClientRects()),$_2dw1bj4jducwn6g.last(pos1.getClientRects())],isAbove).getOr(!1)},isBelow$1=function(pos1,pos2){return $_87ppqy2ejducwnol.liftN([$_2dw1bj4jducwn6g.last(pos2.getClientRects()),$_2dw1bj4jducwn6g.head(pos1.getClientRects())],function(r1,r2){return isBelow(r1,r2)}).getOr(!1)},flip=function(direction,positions){return direction===HDirection.Backwards?positions.reverse():positions},walk$1=function(direction,caretWalker,pos){return direction===HDirection.Forwards?caretWalker.next(pos):caretWalker.prev(pos)},getBreakType=function(scope,direction,currentPos,nextPos){return $_fj238m1qjducwnjm.isBr(nextPos.getNode(direction===HDirection.Forwards))?BreakType.Br:isInSameBlock(currentPos,nextPos)===!1?BreakType.Block:BreakType.Wrap},getPositionsUntil=function(predicate,direction,scope,start){for(var nextPos,caretWalker=CaretWalker(scope),currentPos=start,positions=[];currentPos&&(nextPos=walk$1(direction,caretWalker,currentPos));){if($_fj238m1qjducwnjm.isBr(nextPos.getNode(!1)))return direction===HDirection.Forwards?{positions:flip(direction,positions).concat([nextPos]),breakType:BreakType.Br,breakAt:Option.some(nextPos)}:{positions:flip(direction,positions),breakType:BreakType.Br,breakAt:Option.some(nextPos)};if(nextPos.isVisible()){if(predicate(currentPos,nextPos)){var breakType=getBreakType(0,direction,currentPos,nextPos);return{positions:flip(direction,positions),breakType:breakType,breakAt:Option.some(nextPos)}}positions.push(nextPos),currentPos=nextPos}else currentPos=nextPos}return{positions:flip(direction,positions),breakType:BreakType.Eol,breakAt:Option.none()}},getAdjacentLinePositions=function(direction,getPositionsUntilBreak,scope,start){return getPositionsUntilBreak(scope,start).breakAt.map(function(pos){var positions=getPositionsUntilBreak(scope,pos).positions;return direction===HDirection.Backwards?positions.concat(pos):[pos].concat(positions)}).getOr([])},findClosestHorizontalPositionFromPoint=function(positions,x){return $_2dw1bj4jducwn6g.foldl(positions,function(acc,newPos){return acc.fold(function(){return Option.some(newPos)},function(lastPos){return $_87ppqy2ejducwnol.liftN([$_2dw1bj4jducwn6g.head(lastPos.getClientRects()),$_2dw1bj4jducwn6g.head(newPos.getClientRects())],function(lastRect,newRect){var lastDist=Math.abs(x-lastRect.left);return Math.abs(x-newRect.left)<=lastDist?newPos:lastPos}).or(acc)})},Option.none())},findClosestHorizontalPosition=function(positions,pos){return $_2dw1bj4jducwn6g.head(pos.getClientRects()).bind(function(targetRect){return findClosestHorizontalPositionFromPoint(positions,targetRect.left)})},getPositionsUntilPreviousLine=$_60qu7r6jducwn73.curry(getPositionsUntil,isAbove$1,-1),getPositionsUntilNextLine=$_60qu7r6jducwn73.curry(getPositionsUntil,isBelow$1,1),getPositionsAbove=$_60qu7r6jducwn73.curry(getAdjacentLinePositions,-1,getPositionsUntilPreviousLine),getPositionsBelow=$_60qu7r6jducwn73.curry(getAdjacentLinePositions,1,getPositionsUntilNextLine),getFirstLinePositions=function(scope){return $_dq07eg2bjducwno6.firstPositionIn(scope).map(function(pos){return[pos].concat(getPositionsUntilNextLine(scope,pos).positions)}).getOr([])},getLastLinePositions=function(scope){return $_dq07eg2bjducwno6.lastPositionIn(scope).map(function(pos){return getPositionsUntilPreviousLine(scope,pos).positions.concat(pos)}).getOr([])},all$1=function(predicate){return descendants($_4u3ohv15jducwnhl.body(),predicate)},ancestors=function(scope,predicate,isRoot){return $_2dw1bj4jducwn6g.filter($_f0qt4317jducwnhq.parents(scope,isRoot),predicate)},siblings$1=function(scope,predicate){return $_2dw1bj4jducwn6g.filter($_f0qt4317jducwnhq.siblings(scope),predicate)},children$1=function(scope,predicate){return $_2dw1bj4jducwn6g.filter($_f0qt4317jducwnhq.children(scope),predicate)},descendants=function(scope,predicate){var result=[];return $_2dw1bj4jducwn6g.each($_f0qt4317jducwnhq.children(scope),function(x){predicate(x)&&(result=result.concat([x])),result=result.concat(descendants(x,predicate))}),result},$_4h43y02hjducwnov={all:all$1,ancestors:ancestors,siblings:siblings$1,children:children$1,descendants:descendants},all$2=function(selector){return $_3yrc4b1fjducwnim.all(selector)},ancestors$1=function(scope,selector,isRoot){return $_4h43y02hjducwnov.ancestors(scope,function(e){return $_3yrc4b1fjducwnim.is(e,selector)},isRoot)},siblings$2=function(scope,selector){return $_4h43y02hjducwnov.siblings(scope,function(e){return $_3yrc4b1fjducwnim.is(e,selector)})},children$2=function(scope,selector){return $_4h43y02hjducwnov.children(scope,function(e){return $_3yrc4b1fjducwnim.is(e,selector)})},descendants$1=function(scope,selector){return $_3yrc4b1fjducwnim.all(selector,scope)},$_47k8tx2gjducwnot={all:all$2,ancestors:ancestors$1,siblings:siblings$2,children:children$2,descendants:descendants$1},deflate=function(rect,delta){return{left:rect.left-delta,top:rect.top-delta,right:rect.right+2*delta,bottom:rect.bottom+2*delta,width:rect.width+delta,height:rect.height+delta}},getCorners=function(getYAxisValue,tds){return $_2dw1bj4jducwn6g.bind(tds,function(td){var rect=deflate(td.getBoundingClientRect(),-1);return[{x:rect.left,y:getYAxisValue(rect),cell:td},{x:rect.right,y:getYAxisValue(rect),cell:td}]})},findClosestCorner=function(corners,x,y){return $_2dw1bj4jducwn6g.foldl(corners,function(acc,newCorner){return acc.fold(function(){return Option.some(newCorner)},function(oldCorner){var oldDist=Math.sqrt(Math.abs(oldCorner.x-x)+Math.abs(oldCorner.y-y)),newDist=Math.sqrt(Math.abs(newCorner.x-x)+Math.abs(newCorner.y-y));return Option.some(newDist<oldDist?newCorner:oldCorner)})},Option.none())},getClosestCell=function(getYAxisValue,isTargetCorner,table,x,y){var cells=$_47k8tx2gjducwnot.descendants($_5s4uzoyjducwngo.fromDom(table),"td,th").map(function(e){return e.dom()}),corners=$_2dw1bj4jducwn6g.filter(getCorners(getYAxisValue,cells),function(corner){return isTargetCorner(corner,y)});return findClosestCorner(corners,x,y).map(function(corner){return corner.cell})},getBottomValue=function(rect){return rect.bottom},getTopValue=function(rect){return rect.top},isAbove$2=function(corner,y){return corner.y<y},isBelow$2=function(corner,y){return corner.y>y},getClosestCellAbove=$_60qu7r6jducwn73.curry(getClosestCell,getBottomValue,isAbove$2),getClosestCellBelow=$_60qu7r6jducwn73.curry(getClosestCell,getTopValue,isBelow$2),findClosestPositionInAboveCell=function(table,pos){return $_2dw1bj4jducwn6g.head(pos.getClientRects()).bind(function(rect){return getClosestCellAbove(table,rect.left,rect.top)}).bind(function(cell){return findClosestHorizontalPosition(getLastLinePositions(cell),pos)})},findClosestPositionInBelowCell=function(table,pos){return $_2dw1bj4jducwn6g.last(pos.getClientRects()).bind(function(rect){return getClosestCellBelow(table,rect.left,rect.top)}).bind(function(cell){return findClosestHorizontalPosition(getFirstLinePositions(cell),pos)})},browser$2=$_5hshlmmjducwnfr.detect().browser,isFakeCaretTableBrowser=function(){return browser$2.isIE()||browser$2.isEdge()||browser$2.isFirefox()},isAtTableCellLine=function(getPositionsUntil,scope,pos){var lineInfo=getPositionsUntil(scope,pos);return lineInfo.breakType===BreakType.Wrap&&0===lineInfo.positions.length?lineInfo.breakAt.map(function(breakPos){return getPositionsUntil(scope,breakPos).breakAt.isNone()}).getOr(!0):lineInfo.breakAt.isNone()},isAtFirstTableCellLine=$_6183wb25jducwnn2.curry(isAtTableCellLine,getPositionsUntilPreviousLine),isAtLastTableCellLine=$_6183wb25jducwnn2.curry(isAtTableCellLine,getPositionsUntilNextLine),isCaretAtStartOrEndOfTable=function(forward,rng,table){var caretPos=CaretPosition$1.fromRangeStart(rng);return $_dq07eg2bjducwno6.positionIn(!forward,table).map(function(pos){return pos.isEqual(caretPos)}).getOr(!1)},navigateHorizontally=function(editor,forward,table,td){var rng=editor.selection.getRng(),direction=forward?1:-1;if(isFakeCaretTableBrowser()&&isCaretAtStartOrEndOfTable(forward,rng,table)){var newRng=showCaret(direction,editor,table,!forward);return editor.selection.setRng(newRng),!0}return!1},getClosestAbovePosition=function(root,table,start){return findClosestPositionInAboveCell(table,start).orThunk(function(){return $_2dw1bj4jducwn6g.head(start.getClientRects()).bind(function(rect){return findClosestHorizontalPositionFromPoint(getPositionsAbove(root,CaretPosition$1.before(table)),rect.left)})}).getOr(CaretPosition$1.before(table))},getClosestBelowPosition=function(root,table,start){return findClosestPositionInBelowCell(table,start).orThunk(function(){return $_2dw1bj4jducwn6g.head(start.getClientRects()).bind(function(rect){return findClosestHorizontalPositionFromPoint(getPositionsBelow(root,CaretPosition$1.after(table)),rect.left)})}).getOr(CaretPosition$1.after(table))},navigateVertically=function(editor,down,table,td){var rng=editor.selection.getRng(),pos=CaretPosition$1.fromRangeStart(rng),root=editor.getBody();if(!down&&isAtFirstTableCellLine(td,pos)){var newPos=getClosestAbovePosition(root,table,pos);return editor.selection.setRng(newPos.toRange()),!0}if(down&&isAtLastTableCellLine(td,pos)){var newPos=getClosestBelowPosition(root,table,pos);return editor.selection.setRng(newPos.toRange()),!0}return!1},moveH=function(editor,forward){return function(){return Option.from(editor.dom.getParent(editor.selection.getNode(),"td,th")).bind(function(td){return Option.from(editor.dom.getParent(td,"table")).map(function(table){return navigateHorizontally(editor,forward,table)})}).getOr(!1)}},moveV=function(editor,forward){return function(){return Option.from(editor.dom.getParent(editor.selection.getNode(),"td,th")).bind(function(td){return Option.from(editor.dom.getParent(td,"table")).map(function(table){return navigateVertically(editor,forward,table,td)})}).getOr(!1)}},isContentEditableFalse$3=$_fj238m1qjducwnjm.isContentEditableFalse,isTableCell$1=function(node){return $_fj238m1qjducwnjm.isElement(node)&&/^(TD|TH)$/i.test(node.tagName)},hasFocus=function(root){return root.ownerDocument.activeElement===root},getAbsoluteClientRect=function(root,element,before){var docElm,scrollX,scrollY,margin,rootRect,clientRect=collapse(element.getBoundingClientRect(),before);return"BODY"===root.tagName?(docElm=root.ownerDocument.documentElement,scrollX=root.scrollLeft||docElm.scrollLeft,scrollY=root.scrollTop||docElm.scrollTop):(rootRect=root.getBoundingClientRect(),scrollX=root.scrollLeft-rootRect.left,scrollY=root.scrollTop-rootRect.top),clientRect.left+=scrollX,clientRect.right+=scrollX,clientRect.top+=scrollY,clientRect.bottom+=scrollY,clientRect.width=1,margin=element.offsetWidth-element.clientWidth,margin>0&&(before&&(margin*=-1),clientRect.left+=margin,clientRect.right+=margin),clientRect},trimInlineCaretContainers=function(root){var contentEditableFalseNodes,node,sibling,i,data;for(contentEditableFalseNodes=DomQuery("*[contentEditable=false]",root),i=0;i<contentEditableFalseNodes.length;i++)node=contentEditableFalseNodes[i],sibling=node.previousSibling,endsWithCaretContainer(sibling)&&(data=sibling.data,1===data.length?sibling.parentNode.removeChild(sibling):sibling.deleteData(data.length-1,1)),sibling=node.nextSibling,startsWithCaretContainer(sibling)&&(data=sibling.data,1===data.length?sibling.parentNode.removeChild(sibling):sibling.deleteData(0,1))},FakeCaret=function(root,isBlock){var cursorInterval,caretContainerNode,$lastVisualCaret=null,show=function(before,element){var clientRect,rng;return hide(),isTableCell$1(element)?null:isBlock(element)?(caretContainerNode=insertBlock("p",element,before),clientRect=getAbsoluteClientRect(root,element,before),DomQuery(caretContainerNode).css("top",clientRect.top),$lastVisualCaret=DomQuery('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(clientRect).appendTo(root),before&&$lastVisualCaret.addClass("mce-visual-caret-before"),startBlink(),rng=element.ownerDocument.createRange(),rng.setStart(caretContainerNode,0),rng.setEnd(caretContainerNode,0),rng):(caretContainerNode=insertInline(element,before),rng=element.ownerDocument.createRange(),isContentEditableFalse$3(caretContainerNode.nextSibling)?(rng.setStart(caretContainerNode,0),rng.setEnd(caretContainerNode,0)):(rng.setStart(caretContainerNode,1),rng.setEnd(caretContainerNode,1)),rng)},hide=function(){trimInlineCaretContainers(root),caretContainerNode&&($_53zrlo29jducwnnv.remove(caretContainerNode),caretContainerNode=null),$lastVisualCaret&&($lastVisualCaret.remove(),$lastVisualCaret=null),clearInterval(cursorInterval)},startBlink=function(){cursorInterval=$_83mf8ygjducwnbc.setInterval(function(){hasFocus(root)?DomQuery("div.mce-visual-caret",root).toggleClass("mce-visual-caret-hidden"):DomQuery("div.mce-visual-caret",root).addClass("mce-visual-caret-hidden")},500)},destroy=function(){return $_83mf8ygjducwnbc.clearInterval(cursorInterval)},getCss=function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"};return{show:show,hide:hide,getCss:getCss,destroy:destroy}},isFakeCaretTarget=function(node){return isContentEditableFalse$3(node)||$_fj238m1qjducwnjm.isTable(node)&&isFakeCaretTableBrowser()},isContentEditableFalse$4=$_fj238m1qjducwnjm.isContentEditableFalse,isBlockLike=$_fj238m1qjducwnjm.matchStyleValues("display","block table table-cell table-caption list-item"),isCaretContainer$2=isCaretContainer,isCaretContainerBlock$1=isCaretContainerBlock,curry$2=$_6183wb25jducwnn2.curry,isElement$5=$_fj238m1qjducwnjm.isElement,isCaretCandidate$2=isCaretCandidate,isForwards=function(direction){return direction>0},isBackwards=function(direction){return direction<0},skipCaretContainers=function(walk,shallow){for(var node;node=walk(shallow);)if(!isCaretContainerBlock$1(node))return node;return null},findNode=function(node,direction,predicateFn,rootNode,shallow){var walker=new TreeWalker(node,rootNode);if(isBackwards(direction)){if((isContentEditableFalse$4(node)||isCaretContainerBlock$1(node))&&(node=skipCaretContainers(walker.prev,!0),predicateFn(node)))return node;for(;node=skipCaretContainers(walker.prev,shallow);)if(predicateFn(node))return node}if(isForwards(direction)){if((isContentEditableFalse$4(node)||isCaretContainerBlock$1(node))&&(node=skipCaretContainers(walker.next,!0),predicateFn(node)))return node;for(;node=skipCaretContainers(walker.next,shallow);)if(predicateFn(node))return node}return null},getParentBlock=function(node,rootNode){for(;node&&node!==rootNode;){if(isBlockLike(node))return node;node=node.parentNode}return null},isInSameBlock=function(caretPosition1,caretPosition2,rootNode){return getParentBlock(caretPosition1.container(),rootNode)===getParentBlock(caretPosition2.container(),rootNode)},getChildNodeAtRelativeOffset=function(relativeOffset,caretPosition){var container,offset;return caretPosition?(container=caretPosition.container(),offset=caretPosition.offset(),isElement$5(container)?container.childNodes[offset+relativeOffset]:null):null},beforeAfter=function(before,node){var range=node.ownerDocument.createRange();return before?(range.setStartBefore(node),range.setEndBefore(node)):(range.setStartAfter(node),range.setEndAfter(node)),range},isNodesInSameBlock=function(root,node1,node2){return getParentBlock(node1,root)===getParentBlock(node2,root)},lean=function(left,root,node){var sibling,siblingName;for(siblingName=left?"previousSibling":"nextSibling";node&&node!==root;){if(sibling=node[siblingName],isCaretContainer$2(sibling)&&(sibling=sibling[siblingName]),isContentEditableFalse$4(sibling)){if(isNodesInSameBlock(root,sibling,node))return sibling;break}if(isCaretCandidate$2(sibling))break;node=node.parentNode}return null},before=curry$2(beforeAfter,!0),after=curry$2(beforeAfter,!1),normalizeRange=function(direction,root,range){var node,container,offset,location,leanLeft=curry$2(lean,!0,root),leanRight=curry$2(lean,!1,root);if(container=range.startContainer,offset=range.startOffset,isCaretContainerBlock(container)){if(isElement$5(container)||(container=container.parentNode),"before"===(location=container.getAttribute("data-mce-caret"))&&(node=container.nextSibling,isFakeCaretTarget(node)))return before(node);if("after"===location&&(node=container.previousSibling,isFakeCaretTarget(node)))return after(node)}if(!range.collapsed)return range;if($_fj238m1qjducwnjm.isText(container)){if(isCaretContainer$2(container)){if(1===direction){if(node=leanRight(container))return before(node);if(node=leanLeft(container))return after(node)}if(direction===-1){if(node=leanLeft(container))return after(node);if(node=leanRight(container))return before(node)}return range}if(endsWithCaretContainer(container)&&offset>=container.data.length-1)return 1===direction&&(node=leanRight(container))?before(node):range;if(startsWithCaretContainer(container)&&offset<=1)return direction===-1&&(node=leanLeft(container))?after(node):range;if(offset===container.data.length)return node=leanRight(container),node?before(node):range;if(0===offset)return node=leanLeft(container),node?after(node):range}return range},isNextToContentEditableFalse=function(relativeOffset,caretPosition){var node=getChildNodeAtRelativeOffset(relativeOffset,caretPosition);return isContentEditableFalse$4(node)&&!$_fj238m1qjducwnjm.isBogusAll(node)},isNextToTable=function(relativeOffset,caretPosition){return $_fj238m1qjducwnjm.isTable(getChildNodeAtRelativeOffset(relativeOffset,caretPosition))},getRelativeCefElm=function(forward,caretPosition){return Option.from(getChildNodeAtRelativeOffset(forward?0:-1,caretPosition)).filter(isContentEditableFalse$4)},getNormalizedRangeEndPoint=function(direction,root,range){var normalizedRange=normalizeRange(direction,root,range);return direction===-1?CaretPosition.fromRangeStart(normalizedRange):CaretPosition.fromRangeEnd(normalizedRange)},isBeforeContentEditableFalse=curry$2(isNextToContentEditableFalse,0),isAfterContentEditableFalse=curry$2(isNextToContentEditableFalse,-1),isBeforeTable=curry$2(isNextToTable,0),isAfterTable=curry$2(isNextToTable,-1);!function(HDirection){HDirection[HDirection.Backwards=-1]="Backwards",HDirection[HDirection.Forwards=1]="Forwards"}(HDirection||(HDirection={}));var isContentEditableFalse$5=$_fj238m1qjducwnjm.isContentEditableFalse,isText$6=$_fj238m1qjducwnjm.isText,isElement$6=$_fj238m1qjducwnjm.isElement,isBr$4=$_fj238m1qjducwnjm.isBr,isCaretCandidate$3=isCaretCandidate,isAtomic$1=isAtomic,isEditableCaretCandidate$1=isEditableCaretCandidate,getParents=function(node,root){for(var parents=[];node&&node!==root;)parents.push(node),node=node.parentNode;return parents},nodeAtIndex=function(container,offset){return container.hasChildNodes()&&offset<container.childNodes.length?container.childNodes[offset]:null},getCaretCandidatePosition=function(direction,node){if(isForwards(direction)){if(isCaretCandidate$3(node.previousSibling)&&!isText$6(node.previousSibling))return CaretPosition$1.before(node);if(isText$6(node))return CaretPosition$1(node,0)}if(isBackwards(direction)){if(isCaretCandidate$3(node.nextSibling)&&!isText$6(node.nextSibling))return CaretPosition$1.after(node);if(isText$6(node))return CaretPosition$1(node,node.data.length)}return isBackwards(direction)?isBr$4(node)?CaretPosition$1.before(node):CaretPosition$1.after(node):CaretPosition$1.before(node)},isBrBeforeBlock=function(node,root){var next;return!!$_fj238m1qjducwnjm.isBr(node)&&(!!(next=findCaretPosition(1,CaretPosition$1.after(node),root))&&!isInSameBlock(CaretPosition$1.before(node),CaretPosition$1.before(next),root))},findCaretPosition=function(direction,startPos,root){var node,nextNode,innerNode,rootContentEditableFalseElm,caretPosition;if(!isElement$6(root)||!startPos)return null;if(startPos.isEqual(CaretPosition$1.after(root))&&root.lastChild){if(caretPosition=CaretPosition$1.after(root.lastChild),isBackwards(direction)&&isCaretCandidate$3(root.lastChild)&&isElement$6(root.lastChild))return isBr$4(root.lastChild)?CaretPosition$1.before(root.lastChild):caretPosition}else caretPosition=startPos;var container=caretPosition.container(),offset=caretPosition.offset();if(isText$6(container)){if(isBackwards(direction)&&offset>0)return CaretPosition$1(container,--offset);if(isForwards(direction)&&offset<container.length)return CaretPosition$1(container,++offset);node=container}else{if(isBackwards(direction)&&offset>0&&(nextNode=nodeAtIndex(container,offset-1),isCaretCandidate$3(nextNode)))return!isAtomic$1(nextNode)&&(innerNode=findNode(nextNode,direction,isEditableCaretCandidate$1,nextNode))?isText$6(innerNode)?CaretPosition$1(innerNode,innerNode.data.length):CaretPosition$1.after(innerNode):isText$6(nextNode)?CaretPosition$1(nextNode,nextNode.data.length):CaretPosition$1.before(nextNode);if(isForwards(direction)&&offset<container.childNodes.length&&(nextNode=nodeAtIndex(container,offset),isCaretCandidate$3(nextNode)))return isBrBeforeBlock(nextNode,root)?findCaretPosition(direction,CaretPosition$1.after(nextNode),root):!isAtomic$1(nextNode)&&(innerNode=findNode(nextNode,direction,isEditableCaretCandidate$1,nextNode))?isText$6(innerNode)?CaretPosition$1(innerNode,0):CaretPosition$1.before(innerNode):isText$6(nextNode)?CaretPosition$1(nextNode,0):CaretPosition$1.after(nextNode);node=nextNode?nextNode:caretPosition.getNode()}return(isForwards(direction)&&caretPosition.isAtEnd()||isBackwards(direction)&&caretPosition.isAtStart())&&(node=findNode(node,direction,$_6183wb25jducwnn2.constant(!0),root,!0),isEditableCaretCandidate$1(node,root))?getCaretCandidatePosition(direction,node):(nextNode=findNode(node,direction,isEditableCaretCandidate$1,root),rootContentEditableFalseElm=$_e6e6g1kjducwnfd.last($_e6e6g1kjducwnfd.filter(getParents(container,root),isContentEditableFalse$5)),!rootContentEditableFalseElm||nextNode&&rootContentEditableFalseElm.contains(nextNode)?nextNode?getCaretCandidatePosition(direction,nextNode):null:caretPosition=isForwards(direction)?CaretPosition$1.after(rootContentEditableFalseElm):CaretPosition$1.before(rootContentEditableFalseElm))},CaretWalker=function(root){return{next:function(caretPosition){return findCaretPosition(HDirection.Forwards,caretPosition,root)},prev:function(caretPosition){return findCaretPosition(HDirection.Backwards,caretPosition,root)}}},hasOnlyOneChild=function(node){return node.firstChild&&node.firstChild===node.lastChild},isPaddingNode=function(node){return"br"===node.name||" "===node.value},isPaddedEmptyBlock=function(schema,node){return schema.getBlockElements()[node.name]&&hasOnlyOneChild(node)&&isPaddingNode(node.firstChild)},isEmptyFragmentElement=function(schema,node){var nonEmptyElements=schema.getNonEmptyElements();return node&&(node.isEmpty(nonEmptyElements)||isPaddedEmptyBlock(schema,node))},isListFragment=function(schema,fragment){var firstChild=fragment.firstChild,lastChild=fragment.lastChild;return firstChild&&"meta"===firstChild.name&&(firstChild=firstChild.next),lastChild&&"mce_marker"===lastChild.attr("id")&&(lastChild=lastChild.prev),isEmptyFragmentElement(schema,lastChild)&&(lastChild=lastChild.prev),!(!firstChild||firstChild!==lastChild)&&("ul"===firstChild.name||"ol"===firstChild.name)},cleanupDomFragment=function(domFragment){var firstChild=domFragment.firstChild,lastChild=domFragment.lastChild;return firstChild&&"META"===firstChild.nodeName&&firstChild.parentNode.removeChild(firstChild),lastChild&&"mce_marker"===lastChild.id&&lastChild.parentNode.removeChild(lastChild),domFragment},toDomFragment=function(dom,serializer,fragment){var html=serializer.serialize(fragment),domFragment=dom.createFragment(html);return cleanupDomFragment(domFragment)},listItems$1=function(elm){return $_8i2houjjducwnd2.grep(elm.childNodes,function(child){return"LI"===child.nodeName})},isPadding=function(node){return" "===node.data||$_fj238m1qjducwnjm.isBr(node)},isListItemPadded=function(node){return node&&node.firstChild&&node.firstChild===node.lastChild&&isPadding(node.firstChild)},isEmptyOrPadded=function(elm){return!elm.firstChild||isListItemPadded(elm)},trimListItems=function(elms){return elms.length>0&&isEmptyOrPadded(elms[elms.length-1])?elms.slice(0,-1):elms},getParentLi=function(dom,node){var parentBlock=dom.getParent(node,dom.isBlock);return parentBlock&&"LI"===parentBlock.nodeName?parentBlock:null},isParentBlockLi=function(dom,node){return!!getParentLi(dom,node)},getSplit=function(parentNode,rng){var beforeRng=rng.cloneRange(),afterRng=rng.cloneRange();return beforeRng.setStartBefore(parentNode),afterRng.setEndAfter(parentNode),[beforeRng.cloneContents(),afterRng.cloneContents()]},findFirstIn=function(node,rootNode){var caretPos=CaretPosition$1.before(node),caretWalker=CaretWalker(rootNode),newCaretPos=caretWalker.next(caretPos);return newCaretPos?newCaretPos.toRange():null},findLastOf=function(node,rootNode){var caretPos=CaretPosition$1.after(node),caretWalker=CaretWalker(rootNode),newCaretPos=caretWalker.prev(caretPos);return newCaretPos?newCaretPos.toRange():null},insertMiddle=function(target,elms,rootNode,rng){var parts=getSplit(target,rng),parentElm=target.parentNode;return parentElm.insertBefore(parts[0],target),$_8i2houjjducwnd2.each(elms,function(li){parentElm.insertBefore(li,target)}),parentElm.insertBefore(parts[1],target),parentElm.removeChild(target),findLastOf(elms[elms.length-1],rootNode)},insertBefore=function(target,elms,rootNode){
var parentElm=target.parentNode;return $_8i2houjjducwnd2.each(elms,function(elm){parentElm.insertBefore(elm,target)}),findFirstIn(target,rootNode)},insertAfter=function(target,elms,rootNode,dom){return dom.insertAfter(elms.reverse(),target),findLastOf(elms[0],rootNode)},insertAtCaret=function(serializer,dom,rng,fragment){var domFragment=toDomFragment(dom,serializer,fragment),liTarget=getParentLi(dom,rng.startContainer),liElms=trimListItems(listItems$1(domFragment.firstChild)),rootNode=dom.getRoot(),isAt=function(location){var caretPos=CaretPosition$1.fromRangeStart(rng),caretWalker=CaretWalker(dom.getRoot()),newPos=1===location?caretWalker.prev(caretPos):caretWalker.next(caretPos);return!newPos||getParentLi(dom,newPos.getNode())!==liTarget};return isAt(1)?insertBefore(liTarget,liElms,rootNode):isAt(2)?insertAfter(liTarget,liElms,rootNode,dom):insertMiddle(liTarget,liElms,rootNode,rng)},$_g0kxnx1xjducwnm8={isListFragment:isListFragment,insertAtCaret:insertAtCaret,isParentBlockLi:isParentBlockLi,trimListItems:trimListItems,listItems:listItems$1},isText$7=$_fj238m1qjducwnjm.isText,isBogus$1=$_fj238m1qjducwnjm.isBogus,nodeIndex$2=DOMUtils.nodeIndex,normalizedParent=function(node){var parentNode=node.parentNode;return isBogus$1(parentNode)?normalizedParent(parentNode):parentNode},getChildNodes=function(node){return node?$_e6e6g1kjducwnfd.reduce(node.childNodes,function(result,node){return isBogus$1(node)&&"BR"!==node.nodeName?result=result.concat(getChildNodes(node)):result.push(node),result},[]):[]},normalizedTextOffset=function(node,offset){for(;(node=node.previousSibling)&&isText$7(node);)offset+=node.data.length;return offset},equal$1=function(a){return function(b){return a===b}},normalizedNodeIndex=function(node){var nodes,index,numTextFragments;return nodes=getChildNodes(normalizedParent(node)),index=$_e6e6g1kjducwnfd.findIndex(nodes,equal$1(node),node),nodes=nodes.slice(0,index+1),numTextFragments=$_e6e6g1kjducwnfd.reduce(nodes,function(result,node,i){return isText$7(node)&&isText$7(nodes[i-1])&&result++,result},0),nodes=$_e6e6g1kjducwnfd.filter(nodes,$_fj238m1qjducwnjm.matchNodeNames(node.nodeName)),(index=$_e6e6g1kjducwnfd.findIndex(nodes,equal$1(node),node))-numTextFragments},createPathItem=function(node){return(isText$7(node)?"text()":node.nodeName.toLowerCase())+"["+normalizedNodeIndex(node)+"]"},parentsUntil=function(root,node,predicate){var parents=[];for(node=node.parentNode;node!==root&&(!predicate||!predicate(node));node=node.parentNode)parents.push(node);return parents},create$1=function(root,caretPosition){var container,offset,outputOffset,childNodes,parents,path=[];return container=caretPosition.container(),offset=caretPosition.offset(),isText$7(container)?outputOffset=normalizedTextOffset(container,offset):(childNodes=container.childNodes,offset>=childNodes.length?(outputOffset="after",offset=childNodes.length-1):outputOffset="before",container=childNodes[offset]),path.push(createPathItem(container)),parents=parentsUntil(root,container),parents=$_e6e6g1kjducwnfd.filter(parents,$_6183wb25jducwnn2.negate($_fj238m1qjducwnjm.isBogus)),path=path.concat($_e6e6g1kjducwnfd.map(parents,function(node){return createPathItem(node)})),path.reverse().join("/")+","+outputOffset},resolvePathItem=function(node,name,index){var nodes=getChildNodes(node);return nodes=$_e6e6g1kjducwnfd.filter(nodes,function(node,index){return!isText$7(node)||!isText$7(nodes[index-1])}),nodes=$_e6e6g1kjducwnfd.filter(nodes,$_fj238m1qjducwnjm.matchNodeNames(name)),nodes[index]},findTextPosition=function(container,offset){for(var dataLen,node=container,targetOffset=0;isText$7(node);){if(dataLen=node.data.length,offset>=targetOffset&&offset<=targetOffset+dataLen){container=node,offset-=targetOffset;break}if(!isText$7(node.nextSibling)){container=node,offset=dataLen;break}targetOffset+=dataLen,node=node.nextSibling}return isText$7(container)&&offset>container.data.length&&(offset=container.data.length),CaretPosition$1(container,offset)},resolve$2=function(root,path){var parts,container,offset;return path?(parts=path.split(","),path=parts[0].split("/"),offset=parts.length>1?parts[1]:"before",container=$_e6e6g1kjducwnfd.reduce(path,function(result,value){return(value=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(value))?("text()"===value[1]&&(value[1]="#text"),resolvePathItem(result,value[1],parseInt(value[2],10))):null},root),container?isText$7(container)?findTextPosition(container,parseInt(offset,10)):(offset="after"===offset?nodeIndex$2(container)+1:nodeIndex$2(container),CaretPosition$1(container.parentNode,offset)):null):null},isContentEditableFalse$6=$_fj238m1qjducwnjm.isContentEditableFalse,getNormalizedTextOffset=function(trim,container,offset){var node,trimmedOffset;for(trimmedOffset=trim(container.data.slice(0,offset)).length,node=container.previousSibling;node&&$_fj238m1qjducwnjm.isText(node);node=node.previousSibling)trimmedOffset+=trim(node.data).length;return trimmedOffset},getPoint=function(dom,trim,normalized,rng,start){var childNodes,container=rng[start?"startContainer":"endContainer"],offset=rng[start?"startOffset":"endOffset"],point=[],after=0,root=dom.getRoot();for($_fj238m1qjducwnjm.isText(container)?point.push(normalized?getNormalizedTextOffset(trim,container,offset):offset):(childNodes=container.childNodes,offset>=childNodes.length&&childNodes.length&&(after=1,offset=Math.max(0,childNodes.length-1)),point.push(dom.nodeIndex(childNodes[offset],normalized)+after));container&&container!==root;container=container.parentNode)point.push(dom.nodeIndex(container,normalized));return point},getLocation=function(trim,selection,normalized,rng){var dom=selection.dom,bookmark={};return bookmark.start=getPoint(dom,trim,normalized,rng,!0),selection.isCollapsed()||(bookmark.end=getPoint(dom,trim,normalized,rng,!1)),bookmark},trimEmptyTextNode=function(node){$_fj238m1qjducwnjm.isText(node)&&0===node.data.length&&node.parentNode.removeChild(node)},findIndex$3=function(dom,name,element){var count=0;return $_8i2houjjducwnd2.each(dom.select(name),function(node){if("all"!==node.getAttribute("data-mce-bogus"))return node!==element&&void count++}),count},moveEndPoint=function(rng,start){var container,offset,childNodes,prefix=start?"start":"end";container=rng[prefix+"Container"],offset=rng[prefix+"Offset"],$_fj238m1qjducwnjm.isElement(container)&&"TR"===container.nodeName&&(childNodes=container.childNodes,(container=childNodes[Math.min(start?offset:offset-1,childNodes.length-1)])&&(offset=start?0:container.childNodes.length,rng["set"+(start?"Start":"End")](container,offset)))},normalizeTableCellSelection=function(rng){return moveEndPoint(rng,!0),moveEndPoint(rng,!1),rng},findSibling=function(node,offset){var sibling;if($_fj238m1qjducwnjm.isElement(node)&&(node=getNode(node,offset),isContentEditableFalse$6(node)))return node;if(isCaretContainer(node)){if($_fj238m1qjducwnjm.isText(node)&&isCaretContainerBlock(node)&&(node=node.parentNode),sibling=node.previousSibling,isContentEditableFalse$6(sibling))return sibling;if(sibling=node.nextSibling,isContentEditableFalse$6(sibling))return sibling}},findAdjacentContentEditableFalseElm=function(rng){return findSibling(rng.startContainer,rng.startOffset)||findSibling(rng.endContainer,rng.endOffset)},getOffsetBookmark=function(trim,normalized,selection){var element=selection.getNode(),name=element?element.nodeName:null,rng=selection.getRng();return isContentEditableFalse$6(element)||"IMG"===name?{name:name,index:findIndex$3(selection.dom,name,element)}:(element=findAdjacentContentEditableFalseElm(rng),element?(name=element.tagName,{name:name,index:findIndex$3(selection.dom,name,element)}):getLocation(trim,selection,normalized,rng))},getCaretBookmark=function(selection){var rng=selection.getRng();return{start:create$1(selection.dom.getRoot(),CaretPosition$1.fromRangeStart(rng)),end:create$1(selection.dom.getRoot(),CaretPosition$1.fromRangeEnd(rng))}},getRangeBookmark=function(selection){return{rng:selection.getRng()}},getPersistentBookmark=function(selection){var dom=selection.dom,rng=selection.getRng(),id=dom.uniqueId(),collapsed=selection.isCollapsed(),styles="overflow:hidden;line-height:0px",element=selection.getNode(),name=element.nodeName;if("IMG"===name)return{name:name,index:findIndex$3(dom,name,element)};var rng2=normalizeTableCellSelection(rng.cloneRange());if(!collapsed){rng2.collapse(!1);var endBookmarkNode=dom.create("span",{"data-mce-type":"bookmark",id:id+"_end",style:styles},"&#xFEFF;");rng2.insertNode(endBookmarkNode),trimEmptyTextNode(endBookmarkNode.nextSibling)}rng=normalizeTableCellSelection(rng),rng.collapse(!0);var startBookmarkNode=dom.create("span",{"data-mce-type":"bookmark",id:id+"_start",style:styles},"&#xFEFF;");return rng.insertNode(startBookmarkNode),trimEmptyTextNode(startBookmarkNode.previousSibling),selection.moveToBookmark({id:id,keep:1}),{id:id}},getBookmark=function(selection,type,normalized){return 2===type?getOffsetBookmark($_fz0k4u21jducwnmu.trim,normalized,selection):3===type?getCaretBookmark(selection):type?getRangeBookmark(selection):getPersistentBookmark(selection)},$_epzga02kjducwnp2={getBookmark:getBookmark,getUndoBookmark:$_60qu7r6jducwn73.curry(getOffsetBookmark,$_60qu7r6jducwn73.identity,!0)},addBogus=function(dom,node){return!dom.isBlock(node)||node.innerHTML||$_cum1kc9jducwn99.ie||(node.innerHTML='<br data-mce-bogus="1" />'),node},resolveCaretPositionBookmark=function(dom,bookmark){var rng,pos;return rng=dom.createRng(),pos=resolve$2(dom.getRoot(),bookmark.start),rng.setStart(pos.container(),pos.offset()),pos=resolve$2(dom.getRoot(),bookmark.end),rng.setEnd(pos.container(),pos.offset()),rng},setEndPoint=function(dom,start,bookmark,rng){var i,node,offset,children,point=bookmark[start?"start":"end"],root=dom.getRoot();if(point){for(offset=point[0],node=root,i=point.length-1;i>=1;i--){if(children=node.childNodes,point[i]>children.length-1)return;node=children[point[i]]}3===node.nodeType&&(offset=Math.min(point[0],node.nodeValue.length)),1===node.nodeType&&(offset=Math.min(point[0],node.childNodes.length)),start?rng.setStart(node,offset):rng.setEnd(node,offset)}return!0},restoreEndPoint=function(dom,suffix,bookmark){var node,idx,next,prev,container,offset,marker=dom.get(bookmark.id+"_"+suffix),keep=bookmark.keep;if(marker){if(node=marker.parentNode,keep?(node=marker.firstChild,idx=1):idx=dom.nodeIndex(marker),container=node,offset=idx,!keep){for(prev=marker.previousSibling,next=marker.nextSibling,$_8i2houjjducwnd2.each($_8i2houjjducwnd2.grep(marker.childNodes),function(node){$_fj238m1qjducwnjm.isText(node)&&(node.nodeValue=node.nodeValue.replace(/\uFEFF/g,""))});marker=dom.get(bookmark.id+"_"+suffix);)dom.remove(marker,1);prev&&next&&prev.nodeType===next.nodeType&&$_fj238m1qjducwnjm.isText(prev)&&!$_cum1kc9jducwn99.opera&&(idx=prev.nodeValue.length,prev.appendData(next.nodeValue),dom.remove(next),container=prev,offset=idx)}return Option.some(CaretPosition$1(container,offset))}return Option.none()},alt=function(o1,o2){return o1.isSome()?o1:o2},resolvePaths=function(dom,bookmark){var rng=dom.createRng();return setEndPoint(dom,!0,bookmark,rng)&&setEndPoint(dom,!1,bookmark,rng)?Option.some(rng):Option.none()},resolveId=function(dom,bookmark){var startPos=restoreEndPoint(dom,"start",bookmark),endPos=restoreEndPoint(dom,"end",bookmark);return $_87ppqy2ejducwnol.liftN([startPos,alt(endPos,startPos)],function(spos,epos){var rng=dom.createRng();return rng.setStart(addBogus(dom,spos.container()),spos.offset()),rng.setEnd(addBogus(dom,epos.container()),epos.offset()),rng})},resolveIndex$1=function(dom,bookmark){return Option.from(dom.select(bookmark.name)[bookmark.index]).map(function(elm){var rng=dom.createRng();return rng.selectNode(elm),rng})},resolve$3=function(selection,bookmark){var dom=selection.dom;if(bookmark){if($_8i2houjjducwnd2.isArray(bookmark.start))return resolvePaths(dom,bookmark);if("string"==typeof bookmark.start)return Option.some(resolveCaretPositionBookmark(dom,bookmark));if(bookmark.id)return resolveId(dom,bookmark);if(bookmark.name)return resolveIndex$1(dom,bookmark);if(bookmark.rng)return Option.some(bookmark.rng)}return Option.none()},$_azom222mjducwnph={resolve:resolve$3},getBookmark$1=function(selection,type,normalized){return $_epzga02kjducwnp2.getBookmark(selection,type,normalized)},moveToBookmark=function(selection,bookmark){$_azom222mjducwnph.resolve(selection,bookmark).each(function(rng){selection.setRng(rng)})},isBookmarkNode$1=function(node){return $_fj238m1qjducwnjm.isElement(node)&&"SPAN"===node.tagName&&"bookmark"===node.getAttribute("data-mce-type")},$_dcl0u12jjducwnp0={getBookmark:getBookmark$1,moveToBookmark:moveToBookmark,isBookmarkNode:isBookmarkNode$1},each$8=$_8i2houjjducwnd2.each,ElementUtils=function(dom){this.compare=function(node1,node2){if(node1.nodeName!==node2.nodeName)return!1;var getAttribs=function(node){var attribs={};return each$8(dom.getAttribs(node),function(attr){var name=attr.nodeName.toLowerCase();0!==name.indexOf("_")&&"style"!==name&&0!==name.indexOf("data-")&&(attribs[name]=dom.getAttrib(node,name))}),attribs},compareObjects=function(obj1,obj2){var value,name;for(name in obj1)if(obj1.hasOwnProperty(name)){if(void 0===(value=obj2[name]))return!1;if(obj1[name]!==value)return!1;delete obj2[name]}for(name in obj2)if(obj2.hasOwnProperty(name))return!1;return!0};return!!compareObjects(getAttribs(node1),getAttribs(node2))&&(!!compareObjects(dom.parseStyle(dom.getAttrib(node1,"style")),dom.parseStyle(dom.getAttrib(node2,"style")))&&(!$_dcl0u12jjducwnp0.isBookmarkNode(node1)&&!$_dcl0u12jjducwnp0.isBookmarkNode(node2)))}},before$1=function(marker,element){$_f0qt4317jducwnhq.parent(marker).each(function(v){v.dom().insertBefore(element.dom(),marker.dom())})},after$1=function(marker,element){$_f0qt4317jducwnhq.nextSibling(marker).fold(function(){$_f0qt4317jducwnhq.parent(marker).each(function(v){append(v,element)})},function(v){before$1(v,element)})},prepend=function(parent,element){$_f0qt4317jducwnhq.firstChild(parent).fold(function(){append(parent,element)},function(v){parent.dom().insertBefore(element.dom(),v.dom())})},append=function(parent,element){parent.dom().appendChild(element.dom())},appendAt=function(parent,element,index){$_f0qt4317jducwnhq.child(parent,index).fold(function(){append(parent,element)},function(v){before$1(v,element)})},wrap$1=function(element,wrapper){before$1(element,wrapper),append(wrapper,element)},$_ejmufn2ojducwnpy={before:before$1,after:after$1,prepend:prepend,append:append,appendAt:appendAt,wrap:wrap$1},before$2=function(marker,elements){$_2dw1bj4jducwn6g.each(elements,function(x){$_ejmufn2ojducwnpy.before(marker,x)})},after$2=function(marker,elements){$_2dw1bj4jducwn6g.each(elements,function(x,i){var e=0===i?marker:elements[i-1];$_ejmufn2ojducwnpy.after(e,x)})},prepend$1=function(parent,elements){$_2dw1bj4jducwn6g.each(elements.slice().reverse(),function(x){$_ejmufn2ojducwnpy.prepend(parent,x)})},append$1=function(parent,elements){$_2dw1bj4jducwn6g.each(elements,function(x){$_ejmufn2ojducwnpy.append(parent,x)})},$_ehpp912qjducwnq3={before:before$2,after:after$2,prepend:prepend$1,append:append$1},empty=function(element){element.dom().textContent="",$_2dw1bj4jducwn6g.each($_f0qt4317jducwnhq.children(element),function(rogue){remove$3(rogue)})},remove$3=function(element){var dom=element.dom();null!==dom.parentNode&&dom.parentNode.removeChild(dom)},unwrap=function(wrapper){var children=$_f0qt4317jducwnhq.children(wrapper);children.length>0&&$_ehpp912qjducwnq3.before(wrapper,children),remove$3(wrapper)},$_34vweg2pjducwnq0={empty:empty,remove:remove$3,unwrap:unwrap},api=function(is,name){var get=function(element){if(!is(element))throw new Error("Can only get "+name+" value of a "+name+" node");return getOption(element).getOr("")},getOptionIE10=function(element){try{return getOptionSafe(element)}catch(e){return Option.none()}},getOptionSafe=function(element){return is(element)?Option.from(element.dom().nodeValue):Option.none()},browser=$_5hshlmmjducwnfr.detect().browser,getOption=browser.isIE()&&10===browser.version.major?getOptionIE10:getOptionSafe,set=function(element,value){if(!is(element))throw new Error("Can only set raw "+name+" value of a "+name+" node");element.dom().nodeValue=value};return{get:get,getOption:getOption,set:set}}($_47qy15zjducwngt.isText,"text"),get$2=function(element){return api.get(element)},getOption=function(element){return api.getOption(element)},set$2=function(element,value){api.set(element,value)},$_8l99zr2rjducwnq7={get:get$2,getOption:getOption,set:set$2},getLastChildren=function(elm){for(var children=[],rawNode=elm.dom();rawNode;)children.push($_5s4uzoyjducwngo.fromDom(rawNode)),rawNode=rawNode.lastChild;return children},removeTrailingBr=function(elm){var allBrs=$_47k8tx2gjducwnot.descendants(elm,"br"),brs=$_2dw1bj4jducwn6g.filter(getLastChildren(elm).slice(-1),isBr);allBrs.length===brs.length&&$_2dw1bj4jducwn6g.each(brs,$_34vweg2pjducwnq0.remove)},fillWithPaddingBr=function(elm){$_34vweg2pjducwnq0.empty(elm),$_ejmufn2ojducwnpy.append(elm,$_5s4uzoyjducwngo.fromHtml('<br data-mce-bogus="1">'))},isPaddingContents=function(elm){return $_47qy15zjducwngt.isText(elm)?" "===$_8l99zr2rjducwnq7.get(elm):isBr(elm)},isPaddedElement=function(elm){return 1===$_2dw1bj4jducwn6g.filter($_f0qt4317jducwnhq.children(elm),isPaddingContents).length},trimBlockTrailingBr=function(elm){$_f0qt4317jducwnhq.lastChild(elm).each(function(lastChild){$_f0qt4317jducwnhq.prevSibling(lastChild).each(function(lastChildPrevSibling){isBlock(elm)&&isBr(lastChild)&&isBlock(lastChildPrevSibling)&&$_34vweg2pjducwnq0.remove(lastChild)})})},$_7sfvvk2njducwnpo={removeTrailingBr:removeTrailingBr,fillWithPaddingBr:fillWithPaddingBr,isPaddedElement:isPaddedElement,trimBlockTrailingBr:trimBlockTrailingBr},makeMap$3=$_8i2houjjducwnd2.makeMap,createRange$1=function(sc,so,ec,eo){var rng=document.createRange();return rng.setStart(sc,so),rng.setEnd(ec,eo),rng},normalizeBlockSelectionRange=function(rng){var startPos=CaretPosition$1.fromRangeStart(rng),endPos=CaretPosition$1.fromRangeEnd(rng),rootNode=rng.commonAncestorContainer;return $_dq07eg2bjducwno6.fromPosition(!1,rootNode,endPos).map(function(newEndPos){return!isInSameBlock(startPos,endPos,rootNode)&&isInSameBlock(startPos,newEndPos,rootNode)?createRange$1(startPos.container(),startPos.offset(),newEndPos.container(),newEndPos.offset()):rng}).getOr(rng)},normalizeBlockSelection=function(rng){return rng.collapsed?rng:normalizeBlockSelectionRange(rng)},normalize=function(rng){return normalizeBlockSelection(rng)},$_5b11cd2vjducwnqi={normalize:normalize},isTableCell$2=$_fj238m1qjducwnjm.matchNodeNames("td th"),validInsertion=function(editor,value,parentNode){if("all"===parentNode.getAttribute("data-mce-bogus"))parentNode.parentNode.insertBefore(editor.dom.createFragment(value),parentNode);else{var node=parentNode.firstChild,node2=parentNode.lastChild;!node||node===node2&&"BR"===node.nodeName?editor.dom.setHTML(parentNode,value):editor.selection.setContent(value)}},trimBrsFromTableCell=function(dom,elm){Option.from(dom.getParent(elm,"td,th")).map($_5s4uzoyjducwngo.fromDom).each($_7sfvvk2njducwnpo.trimBlockTrailingBr)},insertHtmlAtCaret=function(editor,value,details){var parser,serializer,parentNode,rootNode,fragment,args,marker,rng,node,node2,bookmarkHtml,merge,textInlineElements=editor.schema.getTextInlineElements(),selection=editor.selection,dom=editor.dom,isPartOfFragment=function(node){return!!node.getAttribute("data-mce-fragment")};if(/^ | $/.test(value)&&(value=function(html){var rng,container,offset;rng=selection.getRng(),container=rng.startContainer,offset=rng.startOffset;var hasSiblingText=function(siblingName){return container[siblingName]&&3===container[siblingName].nodeType};return 3===container.nodeType&&(offset>0?html=html.replace(/^&nbsp;/," "):hasSiblingText("previousSibling")||(html=html.replace(/^ /,"&nbsp;")),offset<container.length?html=html.replace(/&nbsp;(<br>|)$/," "):hasSiblingText("nextSibling")||(html=html.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),html}(value)),parser=editor.parser,merge=details.merge,serializer=HtmlSerializer({validate:editor.settings.validate},editor.schema),bookmarkHtml='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',args={content:value,format:"html",selection:!0,paste:details.paste},args=editor.fire("BeforeSetContent",args),args.isDefaultPrevented())return void editor.fire("SetContent",{content:args.content,format:"html",selection:!0,paste:details.paste});value=args.content,value.indexOf("{$caret}")===-1&&(value+="{$caret}"),value=value.replace(/\{\$caret\}/,bookmarkHtml),rng=selection.getRng();var caretElement=rng.startContainer||(rng.parentElement?rng.parentElement():null),body=editor.getBody();caretElement===body&&selection.isCollapsed()&&dom.isBlock(body.firstChild)&&function(node){return node&&!editor.schema.getShortEndedElements()[node.nodeName]}(body.firstChild)&&dom.isEmpty(body.firstChild)&&(rng=dom.createRng(),rng.setStart(body.firstChild,0),rng.setEnd(body.firstChild,0),selection.setRng(rng)),selection.isCollapsed()||(editor.selection.setRng($_5b11cd2vjducwnqi.normalize(editor.selection.getRng())),editor.getDoc().execCommand("Delete",!1,null),function(){var rng,container,offset;rng=selection.getRng(),container=rng.startContainer,offset=rng.startOffset,3===container.nodeType&&rng.collapsed&&(" "===container.data[offset]?(container.deleteData(offset,1),/[\u00a0| ]$/.test(value)||(value+=" ")):" "===container.data[offset-1]&&(container.deleteData(offset-1,1),/[\u00a0| ]$/.test(value)||(value=" "+value)))}()),parentNode=selection.getNode();var parserArgs={context:parentNode.nodeName.toLowerCase(),data:details.data,insert:!0};if(fragment=parser.parse(value,parserArgs),details.paste===!0&&$_g0kxnx1xjducwnm8.isListFragment(editor.schema,fragment)&&$_g0kxnx1xjducwnm8.isParentBlockLi(dom,parentNode))return rng=$_g0kxnx1xjducwnm8.insertAtCaret(serializer,dom,editor.selection.getRng(!0),fragment),editor.selection.setRng(rng),void editor.fire("SetContent",args);if(function(fragment){for(var node=fragment;node=node.walk();)1===node.type&&node.attr("data-mce-fragment","1")}(fragment),node=fragment.lastChild,"mce_marker"===node.attr("id"))for(marker=node,node=node.prev;node;node=node.walk(!0))if(3===node.type||!dom.isBlock(node.name)){editor.schema.isValidChild(node.parent.name,"span")&&node.parent.insert(marker,node,"br"===node.name);break}if(editor._selectionOverrides.showBlockCaretContainer(parentNode),parserArgs.invalid){for(selection.setContent(bookmarkHtml),parentNode=selection.getNode(),rootNode=editor.getBody(),9===parentNode.nodeType?parentNode=node=rootNode:node=parentNode;node!==rootNode;)parentNode=node,node=node.parentNode;value=parentNode===rootNode?rootNode.innerHTML:dom.getOuterHTML(parentNode),value=serializer.serialize(parser.parse(value.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return serializer.serialize(fragment)}))),parentNode===rootNode?dom.setHTML(rootNode,value):dom.setOuterHTML(parentNode,value)}else value=serializer.serialize(fragment),validInsertion(editor,value,parentNode);!function(){if(merge){var root_1=editor.getBody(),elementUtils_1=new ElementUtils(dom);$_8i2houjjducwnd2.each(dom.select("*[data-mce-fragment]"),function(node){for(var testNode=node.parentNode;testNode&&testNode!==root_1;testNode=testNode.parentNode)textInlineElements[node.nodeName.toLowerCase()]&&elementUtils_1.compare(testNode,node)&&dom.remove(node,!0)})}}(),function(marker){var parentEditableFalseElm,parentBlock,nextRng;if(marker){if(selection.scrollIntoView(marker),parentEditableFalseElm=function(node){for(var root=editor.getBody();node&&node!==root;node=node.parentNode)if("false"===editor.dom.getContentEditable(node))return node;return null}(marker))return dom.remove(marker),void selection.select(parentEditableFalseElm);rng=dom.createRng(),node=marker.previousSibling,node&&3===node.nodeType?(rng.setStart(node,node.nodeValue.length),$_cum1kc9jducwn99.ie||(node2=marker.nextSibling)&&3===node2.nodeType&&(node.appendData(node2.data),node2.parentNode.removeChild(node2))):(rng.setStartBefore(marker),rng.setEndBefore(marker));parentBlock=dom.getParent(marker,dom.isBlock),dom.remove(marker),parentBlock&&dom.isEmpty(parentBlock)&&(editor.$(parentBlock).empty(),rng.setStart(parentBlock,0),rng.setEnd(parentBlock,0),isTableCell$2(parentBlock)||isPartOfFragment(parentBlock)||!(nextRng=function(rng){var caretPos=CaretPosition$1.fromRangeStart(rng);if(caretPos=CaretWalker(editor.getBody()).next(caretPos))return caretPos.toRange()}(rng))?dom.add(parentBlock,dom.create("br",{"data-mce-bogus":"1"})):(rng=nextRng,dom.remove(parentBlock))),selection.setRng(rng)}}(dom.get("mce_marker")),function(elm){$_8i2houjjducwnd2.each(elm.getElementsByTagName("*"),function(elm){elm.removeAttribute("data-mce-fragment")})}(editor.getBody()),trimBrsFromTableCell(editor.dom,editor.selection.getStart()),editor.fire("SetContent",args),editor.addVisual()},processValue=function(value){var details;return"string"!=typeof value?(details=$_8i2houjjducwnd2.extend({paste:value.paste,data:{paste:value.paste}},value),{content:value.content,details:details}):{content:value,details:{}}},insertAtCaret$1=function(editor,value){var result=processValue(value);insertHtmlAtCaret(editor,result.content,result.details)},$_42g77d1wjducwnlx={insertAtCaret:insertAtCaret$1},first$1=function(predicate){return descendant($_4u3ohv15jducwnhl.body(),predicate)},ancestor=function(scope,predicate,isRoot){for(var element=scope.dom(),stop=$_c7y6af12jducwnh8.isFunction(isRoot)?isRoot:$_60qu7r6jducwn73.constant(!1);element.parentNode;){element=element.parentNode;var el=$_5s4uzoyjducwngo.fromDom(element);if(predicate(el))return Option.some(el);if(stop(el))break}return Option.none()},closest=function(scope,predicate,isRoot){return ClosestOrAncestor(function(scope){return predicate(scope)},ancestor,scope,predicate,isRoot)},sibling$1=function(scope,predicate){var element=scope.dom();return element.parentNode?child$1($_5s4uzoyjducwngo.fromDom(element.parentNode),function(x){return!$_4qdq5m1djducwnie.eq(scope,x)&&predicate(x)}):Option.none()},child$1=function(scope,predicate){return $_2dw1bj4jducwn6g.find(scope.dom().childNodes,$_60qu7r6jducwn73.compose(predicate,$_5s4uzoyjducwngo.fromDom)).map($_5s4uzoyjducwngo.fromDom)},descendant=function(scope,predicate){var descend=function(element){for(var i=0;i<element.childNodes.length;i++){if(predicate($_5s4uzoyjducwngo.fromDom(element.childNodes[i])))return Option.some($_5s4uzoyjducwngo.fromDom(element.childNodes[i]));var res=descend(element.childNodes[i]);if(res.isSome())return res}return Option.none()};return descend(scope.dom())},$_3et3di30jducwnr0={first:first$1,ancestor:ancestor,closest:closest,sibling:sibling$1,child:child$1,descendant:descendant},sectionResult=$_295afp18jducwni4.immutable("sections","settings"),detection=$_5hshlmmjducwnfr.detect(),isTouch=detection.deviceType.isTouch(),mobilePlugins=["lists","autolink","autosave"],defaultMobileSettings={theme:"mobile"},normalizePlugins=function(plugins){var pluginNames=$_c7y6af12jducwnh8.isArray(plugins)?plugins.join(" "):plugins,trimmedPlugins=$_2dw1bj4jducwn6g.map($_c7y6af12jducwnh8.isString(pluginNames)?pluginNames.split(" "):[],$_vrlmtvjducwngg.trim);return $_2dw1bj4jducwn6g.filter(trimmedPlugins,function(item){return item.length>0})},filterMobilePlugins=function(plugins){return $_2dw1bj4jducwn6g.filter(plugins,$_60qu7r6jducwn73.curry($_2dw1bj4jducwn6g.contains,mobilePlugins))},extractSections=function(keys,settings){var result=$_84vepq13jducwnh9.bifilter(settings,function(value,key){return $_2dw1bj4jducwn6g.contains(keys,key)});return sectionResult(result.t,result.f)},getSection=function(sectionResult,name,defaults){var sections=sectionResult.sections(),sectionSettings=sections.hasOwnProperty(name)?sections[name]:{};return $_8i2houjjducwnd2.extend({},defaults,sectionSettings)},hasSection=function(sectionResult,name){return sectionResult.sections().hasOwnProperty(name)},getDefaultSettings=function(id,documentBaseUrl,editor){return{id:id,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:documentBaseUrl,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:editor.convertURL,url_converter_scope:editor,ie7_compat:!0}},getExternalPlugins=function(overrideSettings,settings){var userDefinedExternalPlugins=settings.external_plugins?settings.external_plugins:{};return overrideSettings&&overrideSettings.external_plugins?$_8i2houjjducwnd2.extend({},overrideSettings.external_plugins,userDefinedExternalPlugins):userDefinedExternalPlugins},combinePlugins=function(forcedPlugins,plugins){return[].concat(normalizePlugins(forcedPlugins)).concat(normalizePlugins(plugins))},processPlugins=function(isTouchDevice,sectionResult,defaultOverrideSettings,settings){var forcedPlugins=normalizePlugins(defaultOverrideSettings.forced_plugins),plugins=normalizePlugins(settings.plugins),platformPlugins=isTouchDevice&&hasSection(sectionResult,"mobile")?filterMobilePlugins(plugins):plugins,combinedPlugins=combinePlugins(forcedPlugins,platformPlugins);return $_8i2houjjducwnd2.extend(settings,{plugins:combinedPlugins.join(" ")})},isOnMobile=function(isTouchDevice,sectionResult){var isInline=sectionResult.settings().inline;return isTouchDevice&&hasSection(sectionResult,"mobile")&&!isInline},combineSettings=function(isTouchDevice,defaultSettings,defaultOverrideSettings,settings){var sectionResult=extractSections(["mobile"],settings),extendedSettings=$_8i2houjjducwnd2.extend(defaultSettings,defaultOverrideSettings,sectionResult.settings(),isOnMobile(isTouchDevice,sectionResult)?getSection(sectionResult,"mobile",defaultMobileSettings):{},{validate:!0,content_editable:sectionResult.settings().inline,external_plugins:getExternalPlugins(defaultOverrideSettings,sectionResult.settings())});return processPlugins(isTouchDevice,sectionResult,defaultOverrideSettings,extendedSettings)},getEditorSettings=function(editor,id,documentBaseUrl,defaultOverrideSettings,settings){var defaultSettings=getDefaultSettings(id,documentBaseUrl,editor);return combineSettings(isTouch,defaultSettings,defaultOverrideSettings,settings)},getFiltered=function(predicate,editor,name){return Option.from(editor.settings[name]).filter(predicate)},getString=$_60qu7r6jducwn73.curry(getFiltered,$_c7y6af12jducwnh8.isString),getParamObject=function(value){var output={};return"string"==typeof value?$_2dw1bj4jducwn6g.each(value.indexOf("=")>0?value.split(/[;,](?![^=;,]*(?:[;,]|$))/):value.split(","),function(value){value=value.split("="),value.length>1?output[$_8i2houjjducwnd2.trim(value[0])]=$_8i2houjjducwnd2.trim(value[1]):output[$_8i2houjjducwnd2.trim(value[0])]=$_8i2houjjducwnd2.trim(value)}):output=value,output},getParam=function(editor,name,defaultVal,type){var value=name in editor.settings?editor.settings[name]:defaultVal
;return"hash"===type?getParamObject(value):"string"===type?getFiltered($_c7y6af12jducwnh8.isString,editor,name).getOr(defaultVal):"number"===type?getFiltered($_c7y6af12jducwnh8.isNumber,editor,name).getOr(defaultVal):"boolean"===type?getFiltered($_c7y6af12jducwnh8.isBoolean,editor,name).getOr(defaultVal):"object"===type?getFiltered($_c7y6af12jducwnh8.isObject,editor,name).getOr(defaultVal):"array"===type?getFiltered($_c7y6af12jducwnh8.isArray,editor,name).getOr(defaultVal):"function"===type?getFiltered($_c7y6af12jducwnh8.isFunction,editor,name).getOr(defaultVal):value},strongRtl=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,hasStrongRtl=function(text){return strongRtl.test(text)},isInlineTarget=function(editor,elm){var selector=getString(editor,"inline_boundaries_selector").getOr("a[href],code");return $_3yrc4b1fjducwnim.is($_5s4uzoyjducwngo.fromDom(elm),selector)},isRtl=function(element){return"rtl"===DOMUtils.DOM.getStyle(element,"direction",!0)||hasStrongRtl(element.textContent)},findInlineParents=function(isInlineTarget,rootNode,pos){return $_2dw1bj4jducwn6g.filter(DOMUtils.DOM.getParents(pos.container(),"*",rootNode),isInlineTarget)},findRootInline=function(isInlineTarget,rootNode,pos){var parents=findInlineParents(isInlineTarget,rootNode,pos);return Option.from(parents[parents.length-1])},hasSameParentBlock=function(rootNode,node1,node2){var block1=getParentBlock(node1,rootNode),block2=getParentBlock(node2,rootNode);return block1&&block1===block2},isAtZwsp=function(pos){return isBeforeInline(pos)||isAfterInline(pos)},normalizePosition=function(forward,pos){var container=pos.container(),offset=pos.offset();return forward?isCaretContainerInline(container)?$_fj238m1qjducwnjm.isText(container.nextSibling)?CaretPosition$1(container.nextSibling,0):CaretPosition$1.after(container):isBeforeInline(pos)?CaretPosition$1(container,offset+1):pos:isCaretContainerInline(container)?$_fj238m1qjducwnjm.isText(container.previousSibling)?CaretPosition$1(container.previousSibling,container.previousSibling.data.length):CaretPosition$1.before(container):isAfterInline(pos)?CaretPosition$1(container,offset-1):pos},normalizeForwards=$_60qu7r6jducwn73.curry(normalizePosition,!0),normalizeBackwards=$_60qu7r6jducwn73.curry(normalizePosition,!1),$_4m240x32jducwnrf={isInlineTarget:isInlineTarget,findRootInline:findRootInline,isRtl:isRtl,isAtZwsp:isAtZwsp,normalizePosition:normalizePosition,normalizeForwards:normalizeForwards,normalizeBackwards:normalizeBackwards,hasSameParentBlock:hasSameParentBlock},isBeforeRoot=function(rootNode){return function(elm){return $_4qdq5m1djducwnie.eq(rootNode,$_5s4uzoyjducwngo.fromDom(elm.dom().parentNode))}},getParentBlock$1=function(rootNode,elm){return $_4qdq5m1djducwnie.contains(rootNode,elm)?$_3et3di30jducwnr0.closest(elm,function(element){return isTextBlock(element)||isListItem(element)},isBeforeRoot(rootNode)):Option.none()},placeCaretInEmptyBody=function(editor){var body=editor.getBody(),node=body.firstChild&&editor.dom.isBlock(body.firstChild)?body.firstChild:body;editor.selection.setCursorLocation(node,0)},paddEmptyBody=function(editor){editor.dom.isEmpty(editor.getBody())&&(editor.setContent(""),placeCaretInEmptyBody(editor))},willDeleteLastPositionInElement=function(forward,fromPos,elm){return $_87ppqy2ejducwnol.liftN([$_dq07eg2bjducwno6.firstPositionIn(elm),$_dq07eg2bjducwno6.lastPositionIn(elm)],function(firstPos,lastPos){var normalizedFirstPos=$_4m240x32jducwnrf.normalizePosition(!0,firstPos),normalizedLastPos=$_4m240x32jducwnrf.normalizePosition(!1,lastPos),normalizedFromPos=$_4m240x32jducwnrf.normalizePosition(!1,fromPos);return forward?$_dq07eg2bjducwno6.nextPosition(elm,normalizedFromPos).map(function(nextPos){return nextPos.isEqual(normalizedLastPos)&&fromPos.isEqual(normalizedFirstPos)}).getOr(!1):$_dq07eg2bjducwno6.prevPosition(elm,normalizedFromPos).map(function(prevPos){return prevPos.isEqual(normalizedFirstPos)&&fromPos.isEqual(normalizedLastPos)}).getOr(!1)}).getOr(!0)},$_5jcxyf2zjducwnqv={getParentBlock:getParentBlock$1,paddEmptyBody:paddEmptyBody,willDeleteLastPositionInElement:willDeleteLastPositionInElement},first$2=function(selector){return $_3yrc4b1fjducwnim.one(selector)},ancestor$1=function(scope,selector,isRoot){return $_3et3di30jducwnr0.ancestor(scope,function(e){return $_3yrc4b1fjducwnim.is(e,selector)},isRoot)},sibling$2=function(scope,selector){return $_3et3di30jducwnr0.sibling(scope,function(e){return $_3yrc4b1fjducwnim.is(e,selector)})},child$2=function(scope,selector){return $_3et3di30jducwnr0.child(scope,function(e){return $_3yrc4b1fjducwnim.is(e,selector)})},descendant$1=function(scope,selector){return $_3yrc4b1fjducwnim.one(selector,scope)},closest$1=function(scope,selector,isRoot){return ClosestOrAncestor($_3yrc4b1fjducwnim.is,ancestor$1,scope,selector,isRoot)},$_eh73s937jducwns3={first:first$2,ancestor:ancestor$1,sibling:sibling$2,child:child$2,descendant:descendant$1,closest:closest$1},any=function(selector){return $_eh73s937jducwns3.first(selector).isSome()},ancestor$2=function(scope,selector,isRoot){return $_eh73s937jducwns3.ancestor(scope,selector,isRoot).isSome()},sibling$3=function(scope,selector){return $_eh73s937jducwns3.sibling(scope,selector).isSome()},child$3=function(scope,selector){return $_eh73s937jducwns3.child(scope,selector).isSome()},descendant$2=function(scope,selector){return $_eh73s937jducwns3.descendant(scope,selector).isSome()},closest$2=function(scope,selector,isRoot){return $_eh73s937jducwns3.closest(scope,selector,isRoot).isSome()},$_7siog436jducwns2={any:any,ancestor:ancestor$2,sibling:sibling$3,child:child$3,descendant:descendant$2,closest:closest$2},hasWhitespacePreserveParent=function(rootNode,node){var rootElement=$_5s4uzoyjducwngo.fromDom(rootNode),startNode=$_5s4uzoyjducwngo.fromDom(node);return $_7siog436jducwns2.ancestor(startNode,"pre,code",$_60qu7r6jducwn73.curry($_4qdq5m1djducwnie.eq,rootElement))},isWhitespace=function(rootNode,node){return $_fj238m1qjducwnjm.isText(node)&&/^[ \t\r\n]*$/.test(node.data)&&hasWhitespacePreserveParent(rootNode,node)===!1},isNamedAnchor=function(node){return $_fj238m1qjducwnjm.isElement(node)&&"A"===node.nodeName&&node.hasAttribute("name")},isContent=function(rootNode,node){return isCaretCandidate(node)&&isWhitespace(rootNode,node)===!1||isNamedAnchor(node)||isBookmark(node)},isBookmark=$_fj238m1qjducwnjm.hasAttribute("data-mce-bookmark"),isBogus$2=$_fj238m1qjducwnjm.hasAttribute("data-mce-bogus"),isBogusAll$1=$_fj238m1qjducwnjm.hasAttributeValue("data-mce-bogus","all"),isEmptyNode=function(targetNode){var walker,node,brCount=0;if(isContent(targetNode,targetNode))return!1;if(!(node=targetNode.firstChild))return!0;walker=new TreeWalker(node,targetNode);do{if(isBogusAll$1(node))node=walker.next(!0);else if(isBogus$2(node))node=walker.next();else if($_fj238m1qjducwnjm.isBr(node))brCount++,node=walker.next();else{if(isContent(targetNode,node))return!1;node=walker.next()}}while(node);return brCount<=1},isEmpty=function(elm){return isEmptyNode(elm.dom())},$_baf2ia35jducwnrx={isEmpty:isEmpty},BlockPosition=$_295afp18jducwni4.immutable("block","position"),BlockBoundary=$_295afp18jducwni4.immutable("from","to"),getBlockPosition=function(rootNode,pos){var rootElm=$_5s4uzoyjducwngo.fromDom(rootNode),containerElm=$_5s4uzoyjducwngo.fromDom(pos.container());return $_5jcxyf2zjducwnqv.getParentBlock(rootElm,containerElm).map(function(block){return BlockPosition(block,pos)})},isDifferentBlocks=function(blockBoundary){return $_4qdq5m1djducwnie.eq(blockBoundary.from().block(),blockBoundary.to().block())===!1},hasSameParent=function(blockBoundary){return $_f0qt4317jducwnhq.parent(blockBoundary.from().block()).bind(function(parent1){return $_f0qt4317jducwnhq.parent(blockBoundary.to().block()).filter(function(parent2){return $_4qdq5m1djducwnie.eq(parent1,parent2)})}).isSome()},isEditable=function(blockBoundary){return $_fj238m1qjducwnjm.isContentEditableFalse(blockBoundary.from().block())===!1&&$_fj238m1qjducwnjm.isContentEditableFalse(blockBoundary.to().block())===!1},skipLastBr=function(rootNode,forward,blockPosition){return $_fj238m1qjducwnjm.isBr(blockPosition.position().getNode())&&$_baf2ia35jducwnrx.isEmpty(blockPosition.block())===!1?$_dq07eg2bjducwno6.positionIn(!1,blockPosition.block().dom()).bind(function(lastPositionInBlock){return lastPositionInBlock.isEqual(blockPosition.position())?$_dq07eg2bjducwno6.fromPosition(forward,rootNode,lastPositionInBlock).bind(function(to){return getBlockPosition(rootNode,to)}):Option.some(blockPosition)}).getOr(blockPosition):blockPosition},readFromRange=function(rootNode,forward,rng){var fromBlockPos=getBlockPosition(rootNode,CaretPosition$1.fromRangeStart(rng)),toBlockPos=fromBlockPos.bind(function(blockPos){return $_dq07eg2bjducwno6.fromPosition(forward,rootNode,blockPos.position()).bind(function(to){return getBlockPosition(rootNode,to).map(function(blockPos){return skipLastBr(rootNode,forward,blockPos)})})});return $_87ppqy2ejducwnol.liftN([fromBlockPos,toBlockPos],BlockBoundary).filter(function(blockBoundary){return isDifferentBlocks(blockBoundary)&&hasSameParent(blockBoundary)&&isEditable(blockBoundary)})},read=function(rootNode,forward,rng){return rng.collapsed?readFromRange(rootNode,forward,rng):Option.none()},$_eqrydb2yjducwnqo={read:read},dropLast=function(xs){return xs.slice(0,-1)},parentsUntil$1=function(startNode,rootElm,predicate){return $_4qdq5m1djducwnie.contains(rootElm,startNode)?dropLast($_f0qt4317jducwnhq.parents(startNode,function(elm){return predicate(elm)||$_4qdq5m1djducwnie.eq(elm,rootElm)})):[]},parents$1=function(startNode,rootElm){return parentsUntil$1(startNode,rootElm,$_60qu7r6jducwn73.constant(!1))},parentsAndSelf=function(startNode,rootElm){return[startNode].concat(parents$1(startNode,rootElm))},$_b22jto39jducwnsg={parentsUntil:parentsUntil$1,parents:parents$1,parentsAndSelf:parentsAndSelf},getChildrenUntilBlockBoundary=function(block){var children=$_f0qt4317jducwnhq.children(block);return $_2dw1bj4jducwn6g.findIndex(children,isBlock).fold(function(){return children},function(index){return children.slice(0,index)})},extractChildren=function(block){var children=getChildrenUntilBlockBoundary(block);return $_2dw1bj4jducwn6g.each(children,function(node){$_34vweg2pjducwnq0.remove(node)}),children},trimBr=function(first,block){$_dq07eg2bjducwno6.positionIn(first,block.dom()).each(function(position){var node=position.getNode();$_fj238m1qjducwnjm.isBr(node)&&$_34vweg2pjducwnq0.remove($_5s4uzoyjducwngo.fromDom(node))})},removeEmptyRoot=function(rootNode,block){var parents=$_b22jto39jducwnsg.parentsAndSelf(block,rootNode);return $_2dw1bj4jducwn6g.find(parents.reverse(),$_baf2ia35jducwnrx.isEmpty).each($_34vweg2pjducwnq0.remove)},findParentInsertPoint=function(toBlock,block){var parents=$_f0qt4317jducwnhq.parents(block,function(elm){return $_4qdq5m1djducwnie.eq(elm,toBlock)});return Option.from(parents[parents.length-2])},getInsertionPoint=function(fromBlock,toBlock){return $_4qdq5m1djducwnie.contains(toBlock,fromBlock)?$_f0qt4317jducwnhq.parent(fromBlock).bind(function(parent){return $_4qdq5m1djducwnie.eq(parent,toBlock)?Option.some(fromBlock):findParentInsertPoint(toBlock,fromBlock)}):Option.none()},mergeBlockInto=function(rootNode,fromBlock,toBlock){if($_baf2ia35jducwnrx.isEmpty(toBlock))return $_34vweg2pjducwnq0.remove(toBlock),$_baf2ia35jducwnrx.isEmpty(fromBlock)&&$_7sfvvk2njducwnpo.fillWithPaddingBr(fromBlock),$_dq07eg2bjducwno6.firstPositionIn(fromBlock.dom());trimBr(!0,fromBlock),trimBr(!1,toBlock);var children_1=extractChildren(fromBlock);return getInsertionPoint(fromBlock,toBlock).fold(function(){removeEmptyRoot(rootNode,fromBlock);var position=$_dq07eg2bjducwno6.lastPositionIn(toBlock.dom());return $_2dw1bj4jducwn6g.each(children_1,function(node){$_ejmufn2ojducwnpy.append(toBlock,node)}),position},function(target){var position=$_dq07eg2bjducwno6.prevPosition(toBlock.dom(),CaretPosition$1.before(target.dom()));return $_2dw1bj4jducwn6g.each(children_1,function(node){$_ejmufn2ojducwnpy.before(target,node)}),removeEmptyRoot(rootNode,fromBlock),position})},mergeBlocks=function(rootNode,forward,block1,block2){return forward?mergeBlockInto(rootNode,block2,block1):mergeBlockInto(rootNode,block1,block2)},$_eqe3hs38jducwns7={mergeBlocks:mergeBlocks},backspaceDelete=function(editor,forward){var position,rootNode=$_5s4uzoyjducwngo.fromDom(editor.getBody());return position=$_eqrydb2yjducwnqo.read(rootNode.dom(),forward,editor.selection.getRng()).bind(function(blockBoundary){return $_eqe3hs38jducwns7.mergeBlocks(rootNode,forward,blockBoundary.from().block(),blockBoundary.to().block())}),position.each(function(pos){editor.selection.setRng(pos.toRange())}),position.isSome()},$_d0w5iz2xjducwnqm={backspaceDelete:backspaceDelete},deleteRangeMergeBlocks=function(rootNode,selection){var rng=selection.getRng();return $_87ppqy2ejducwnol.liftN([$_5jcxyf2zjducwnqv.getParentBlock(rootNode,$_5s4uzoyjducwngo.fromDom(rng.startContainer)),$_5jcxyf2zjducwnqv.getParentBlock(rootNode,$_5s4uzoyjducwngo.fromDom(rng.endContainer))],function(block1,block2){return $_4qdq5m1djducwnie.eq(block1,block2)===!1&&(rng.deleteContents(),$_eqe3hs38jducwns7.mergeBlocks(rootNode,!0,block1,block2).each(function(pos){selection.setRng(pos.toRange())}),!0)}).getOr(!1)},isRawNodeInTable=function(root,rawNode){var node=$_5s4uzoyjducwngo.fromDom(rawNode),isRoot=$_60qu7r6jducwn73.curry($_4qdq5m1djducwnie.eq,root);return $_3et3di30jducwnr0.ancestor(node,isTableCell,isRoot).isSome()},isSelectionInTable=function(root,rng){return isRawNodeInTable(root,rng.startContainer)||isRawNodeInTable(root,rng.endContainer)},isEverythingSelected=function(root,rng){var noPrevious=$_dq07eg2bjducwno6.prevPosition(root.dom(),CaretPosition$1.fromRangeStart(rng)).isNone(),noNext=$_dq07eg2bjducwno6.nextPosition(root.dom(),CaretPosition$1.fromRangeEnd(rng)).isNone();return!isSelectionInTable(root,rng)&&noPrevious&&noNext},emptyEditor=function(editor){return editor.setContent(""),editor.selection.setCursorLocation(),!0},deleteRange=function(editor){var rootNode=$_5s4uzoyjducwngo.fromDom(editor.getBody()),rng=editor.selection.getRng();return isEverythingSelected(rootNode,rng)?emptyEditor(editor):deleteRangeMergeBlocks(rootNode,editor.selection)},backspaceDelete$1=function(editor,forward){return!editor.selection.isCollapsed()&&deleteRange(editor)},$_3kdgsv3ajducwnsk={backspaceDelete:backspaceDelete$1},generate=function(cases){if(!$_c7y6af12jducwnh8.isArray(cases))throw new Error("cases must be an array");if(0===cases.length)throw new Error("there must be at least one case");var constructors=[],adt={};return $_2dw1bj4jducwn6g.each(cases,function(acase,count){var keys=$_84vepq13jducwnh9.keys(acase);if(1!==keys.length)throw new Error("one and only one name per case");var key=keys[0],value=acase[key];if(void 0!==adt[key])throw new Error("duplicate key detected:"+key);if("cata"===key)throw new Error("cannot have a case named cata (sorry)");if(!$_c7y6af12jducwnh8.isArray(value))throw new Error("case arguments must be an array");constructors.push(key),adt[key]=function(){var argLength=arguments.length;if(argLength!==value.length)throw new Error("Wrong number of arguments to case "+key+". Expected "+value.length+" ("+value+"), got "+argLength);for(var args=new Array(argLength),i=0;i<args.length;i++)args[i]=arguments[i];var match=function(branches){var branchKeys=$_84vepq13jducwnh9.keys(branches);if(constructors.length!==branchKeys.length)throw new Error("Wrong number of arguments to match. Expected: "+constructors.join(",")+"\nActual: "+branchKeys.join(","));if(!$_2dw1bj4jducwn6g.forall(constructors,function(reqKey){return $_2dw1bj4jducwn6g.contains(branchKeys,reqKey)}))throw new Error("Not all branches were specified when using match. Specified: "+branchKeys.join(", ")+"\nRequired: "+constructors.join(", "));return branches[key].apply(null,args)};return{fold:function(){if(arguments.length!==cases.length)throw new Error("Wrong number of arguments to fold. Expected "+cases.length+", got "+arguments.length);return arguments[count].apply(null,args)},match:match,log:function(label){console.log(label,{constructors:constructors,constructor:key,params:args})}}}}),adt},$_elh5kq3djducwnt6={generate:generate},isCompoundElement=function(node){return isTableCell($_5s4uzoyjducwngo.fromDom(node))||isListItem($_5s4uzoyjducwngo.fromDom(node))},DeleteAction=$_elh5kq3djducwnt6.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),isAtContentEditableBlockCaret=function(forward,from){var elm=from.getNode(forward===!1),caretLocation=forward?"after":"before";return $_fj238m1qjducwnjm.isElement(elm)&&elm.getAttribute("data-mce-caret")===caretLocation},isDeleteFromCefDifferentBlocks=function(root,forward,from,to){var inSameBlock=function(elm){return isInline($_5s4uzoyjducwngo.fromDom(elm))&&!isInSameBlock(from,to,root)};return getRelativeCefElm(!forward,from).fold(function(){return getRelativeCefElm(forward,to).fold($_60qu7r6jducwn73.constant(!1),inSameBlock)},inSameBlock)},deleteEmptyBlockOrMoveToCef=function(root,forward,from,to){var toCefElm=to.getNode(forward===!1);return $_5jcxyf2zjducwnqv.getParentBlock($_5s4uzoyjducwngo.fromDom(root),$_5s4uzoyjducwngo.fromDom(from.getNode())).map(function(blockElm){return $_baf2ia35jducwnrx.isEmpty(blockElm)?DeleteAction.remove(blockElm.dom()):DeleteAction.moveToElement(toCefElm)}).orThunk(function(){return Option.some(DeleteAction.moveToElement(toCefElm))})},findCefPosition=function(root,forward,from){return $_dq07eg2bjducwno6.fromPosition(forward,root,from).bind(function(to){return isCompoundElement(to.getNode())?Option.none():isDeleteFromCefDifferentBlocks(root,forward,from,to)?Option.none():forward&&$_fj238m1qjducwnjm.isContentEditableFalse(to.getNode())?deleteEmptyBlockOrMoveToCef(root,forward,from,to):forward===!1&&$_fj238m1qjducwnjm.isContentEditableFalse(to.getNode(!0))?deleteEmptyBlockOrMoveToCef(root,forward,from,to):forward&&isAfterContentEditableFalse(from)?Option.some(DeleteAction.moveToPosition(to)):forward===!1&&isBeforeContentEditableFalse(from)?Option.some(DeleteAction.moveToPosition(to)):Option.none()})},getContentEditableBlockAction=function(forward,elm){return forward&&$_fj238m1qjducwnjm.isContentEditableFalse(elm.nextSibling)?Option.some(DeleteAction.moveToElement(elm.nextSibling)):forward===!1&&$_fj238m1qjducwnjm.isContentEditableFalse(elm.previousSibling)?Option.some(DeleteAction.moveToElement(elm.previousSibling)):Option.none()},skipMoveToActionFromInlineCefToContent=function(root,from,deleteAction){return deleteAction.fold(function(elm){return Option.some(DeleteAction.remove(elm))},function(elm){return Option.some(DeleteAction.moveToElement(elm))},function(to){return isInSameBlock(from,to,root)?Option.none():Option.some(DeleteAction.moveToPosition(to))})},getContentEditableAction=function(root,forward,from){return isAtContentEditableBlockCaret(forward,from)?getContentEditableBlockAction(forward,from.getNode(forward===!1)).fold(function(){return findCefPosition(root,forward,from)},Option.some):findCefPosition(root,forward,from).bind(function(deleteAction){return skipMoveToActionFromInlineCefToContent(root,from,deleteAction)})},read$1=function(root,forward,rng){var normalizedRange=normalizeRange(forward?1:-1,root,rng),from=CaretPosition$1.fromRangeStart(normalizedRange);return forward===!1&&isAfterContentEditableFalse(from)?Option.some(DeleteAction.remove(from.getNode(!0))):forward&&isBeforeContentEditableFalse(from)?Option.some(DeleteAction.remove(from.getNode())):getContentEditableAction(root,forward,from)},needsReposition=function(pos,elm){var container=pos.container(),offset=pos.offset();return CaretPosition$1.isTextPosition(pos)===!1&&container===elm.parentNode&&offset>CaretPosition$1.before(elm).offset()},reposition=function(elm,pos){return needsReposition(pos,elm)?CaretPosition$1(pos.container(),pos.offset()-1):pos},beforeOrStartOf=function(node){return $_fj238m1qjducwnjm.isText(node)?CaretPosition$1(node,0):CaretPosition$1.before(node)},afterOrEndOf=function(node){return $_fj238m1qjducwnjm.isText(node)?CaretPosition$1(node,node.data.length):CaretPosition$1.after(node)},getPreviousSiblingCaretPosition=function(elm){return isCaretCandidate(elm.previousSibling)?Option.some(afterOrEndOf(elm.previousSibling)):elm.previousSibling?$_dq07eg2bjducwno6.lastPositionIn(elm.previousSibling):Option.none()},getNextSiblingCaretPosition=function(elm){return isCaretCandidate(elm.nextSibling)?Option.some(beforeOrStartOf(elm.nextSibling)):elm.nextSibling?$_dq07eg2bjducwno6.firstPositionIn(elm.nextSibling):Option.none()},findCaretPositionBackwardsFromElm=function(rootElement,elm){var startPosition=CaretPosition$1.before(elm.previousSibling?elm.previousSibling:elm.parentNode);return $_dq07eg2bjducwno6.prevPosition(rootElement,startPosition).fold(function(){return $_dq07eg2bjducwno6.nextPosition(rootElement,CaretPosition$1.after(elm))},Option.some)},findCaretPositionForwardsFromElm=function(rootElement,elm){return $_dq07eg2bjducwno6.nextPosition(rootElement,CaretPosition$1.after(elm)).fold(function(){return $_dq07eg2bjducwno6.prevPosition(rootElement,CaretPosition$1.before(elm))},Option.some)},findCaretPositionBackwards=function(rootElement,elm){return getPreviousSiblingCaretPosition(elm).orThunk(function(){return getNextSiblingCaretPosition(elm)}).orThunk(function(){return findCaretPositionBackwardsFromElm(rootElement,elm)})},findCaretPositionForward=function(rootElement,elm){return getNextSiblingCaretPosition(elm).orThunk(function(){return getPreviousSiblingCaretPosition(elm)}).orThunk(function(){return findCaretPositionForwardsFromElm(rootElement,elm)})},findCaretPosition$1=function(forward,rootElement,elm){return forward?findCaretPositionForward(rootElement,elm):findCaretPositionBackwards(rootElement,elm)},findCaretPosOutsideElmAfterDelete=function(forward,rootElement,elm){return findCaretPosition$1(forward,rootElement,elm).map($_60qu7r6jducwn73.curry(reposition,elm))},setSelection=function(editor,forward,pos){pos.fold(function(){editor.focus()},function(pos){editor.selection.setRng(pos.toRange(),forward)})},eqRawNode=function(rawNode){return function(elm){return elm.dom()===rawNode}},isBlock$2=function(editor,elm){return elm&&editor.schema.getBlockElements().hasOwnProperty($_47qy15zjducwngt.name(elm))},paddEmptyBlock=function(elm){if($_baf2ia35jducwnrx.isEmpty(elm)){var br=$_5s4uzoyjducwngo.fromHtml('<br data-mce-bogus="1">');return $_34vweg2pjducwnq0.empty(elm),$_ejmufn2ojducwnpy.append(elm,br),Option.some(CaretPosition$1.before(br.dom()))}return Option.none()},deleteNormalized=function(elm,afterDeletePosOpt){return $_87ppqy2ejducwnol.liftN([$_f0qt4317jducwnhq.prevSibling(elm),$_f0qt4317jducwnhq.nextSibling(elm),afterDeletePosOpt],function(prev,next,afterDeletePos){var offset,prevNode=prev.dom(),nextNode=next.dom();return $_fj238m1qjducwnjm.isText(prevNode)&&$_fj238m1qjducwnjm.isText(nextNode)?(offset=prevNode.data.length,prevNode.appendData(nextNode.data),$_34vweg2pjducwnq0.remove(next),$_34vweg2pjducwnq0.remove(elm),afterDeletePos.container()===nextNode?CaretPosition$1(prevNode,offset):afterDeletePos):($_34vweg2pjducwnq0.remove(elm),afterDeletePos)}).orThunk(function(){return $_34vweg2pjducwnq0.remove(elm),afterDeletePosOpt})},deleteElement=function(editor,forward,elm){var afterDeletePos=findCaretPosOutsideElmAfterDelete(forward,editor.getBody(),elm.dom()),parentBlock=$_3et3di30jducwnr0.ancestor(elm,$_60qu7r6jducwn73.curry(isBlock$2,editor),eqRawNode(editor.getBody())),normalizedAfterDeletePos=deleteNormalized(elm,afterDeletePos);editor.dom.isEmpty(editor.getBody())?(editor.setContent(""),editor.selection.setCursorLocation()):parentBlock.bind(paddEmptyBlock).fold(function(){setSelection(editor,forward,normalizedAfterDeletePos)},function(paddPos){setSelection(editor,forward,Option.some(paddPos))})},$_92j5pe3ejducwnta={deleteElement:deleteElement},deleteElement$1=function(editor,forward){return function(element){return editor._selectionOverrides.hideFakeCaret(),$_92j5pe3ejducwnta.deleteElement(editor,forward,$_5s4uzoyjducwngo.fromDom(element)),!0}},moveToElement=function(editor,forward){return function(element){var pos=forward?CaretPosition$1.before(element):CaretPosition$1.after(element);return editor.selection.setRng(pos.toRange()),!0}},moveToPosition=function(editor){return function(pos){return editor.selection.setRng(pos.toRange()),!0}},backspaceDeleteCaret=function(editor,forward){return read$1(editor.getBody(),forward,editor.selection.getRng()).map(function(deleteAction){return deleteAction.fold(deleteElement$1(editor,forward),moveToElement(editor,forward),moveToPosition(editor))}).getOr(!1)},deleteOffscreenSelection=function(rootElement){$_2dw1bj4jducwn6g.each($_47k8tx2gjducwnot.descendants(rootElement,".mce-offscreen-selection"),$_34vweg2pjducwnq0.remove)},backspaceDeleteRange=function(editor,forward){var selectedElement=editor.selection.getNode();return!!$_fj238m1qjducwnjm.isContentEditableFalse(selectedElement)&&(deleteOffscreenSelection($_5s4uzoyjducwngo.fromDom(editor.getBody())),$_92j5pe3ejducwnta.deleteElement(editor,forward,$_5s4uzoyjducwngo.fromDom(editor.selection.getNode())),$_5jcxyf2zjducwnqv.paddEmptyBody(editor),!0)},getContentEditableRoot=function(root,node){for(;node&&node!==root;){if($_fj238m1qjducwnjm.isContentEditableTrue(node)||$_fj238m1qjducwnjm.isContentEditableFalse(node))return node;node=node.parentNode}return null},paddEmptyElement=function(editor){var br,ceRoot=getContentEditableRoot(editor.getBody(),editor.selection.getNode());return $_fj238m1qjducwnjm.isContentEditableTrue(ceRoot)&&editor.dom.isBlock(ceRoot)&&editor.dom.isEmpty(ceRoot)&&(br=editor.dom.create("br",{"data-mce-bogus":"1"}),editor.dom.setHTML(ceRoot,""),ceRoot.appendChild(br),editor.selection.setRng(CaretPosition$1.before(br).toRange())),!0},backspaceDelete$2=function(editor,forward){return editor.selection.isCollapsed()?backspaceDeleteCaret(editor,forward):backspaceDeleteRange(editor,forward)},$_52c8ph3bjducwnsq={backspaceDelete:backspaceDelete$2,paddEmptyElement:paddEmptyElement},isText$8=$_fj238m1qjducwnjm.isText,startsWithCaretContainer$1=function(node){return isText$8(node)&&node.data[0]===$_fz0k4u21jducwnmu.ZWSP},endsWithCaretContainer$1=function(node){return isText$8(node)&&node.data[node.data.length-1]===$_fz0k4u21jducwnmu.ZWSP},createZwsp=function(node){return node.ownerDocument.createTextNode($_fz0k4u21jducwnmu.ZWSP)},insertBefore$1=function(node){if(isText$8(node.previousSibling))return endsWithCaretContainer$1(node.previousSibling)?node.previousSibling:(node.previousSibling.appendData($_fz0k4u21jducwnmu.ZWSP),node.previousSibling);if(isText$8(node))return startsWithCaretContainer$1(node)?node:(node.insertData(0,$_fz0k4u21jducwnmu.ZWSP),node);var newNode=createZwsp(node);return node.parentNode.insertBefore(newNode,node),newNode},insertAfter$1=function(node){if(isText$8(node.nextSibling))return startsWithCaretContainer$1(node.nextSibling)?node.nextSibling:(node.nextSibling.insertData(0,$_fz0k4u21jducwnmu.ZWSP),node.nextSibling);if(isText$8(node))return endsWithCaretContainer$1(node)?node:(node.appendData($_fz0k4u21jducwnmu.ZWSP),node);var newNode=createZwsp(node);return node.nextSibling?node.parentNode.insertBefore(newNode,node.nextSibling):node.parentNode.appendChild(newNode),newNode},insertInline$1=function(before,node){return before?insertBefore$1(node):insertAfter$1(node)},insertInlineBefore=$_60qu7r6jducwn73.curry(insertInline$1,!0),insertInlineAfter=$_60qu7r6jducwn73.curry(insertInline$1,!1),insertInlinePos=function(pos,before){return $_fj238m1qjducwnjm.isText(pos.container())?insertInline$1(before,pos.container()):insertInline$1(before,pos.getNode())},isPosCaretContainer=function(pos,caret){var caretNode=caret.get();return caretNode&&pos.container()===caretNode&&isCaretContainerInline(caretNode)},renderCaret=function(caret,location){return location.fold(function(element){$_53zrlo29jducwnnv.remove(caret.get());var text=insertInlineBefore(element);return caret.set(text),Option.some(CaretPosition$1(text,text.length-1))},function(element){return $_dq07eg2bjducwno6.firstPositionIn(element).map(function(pos){if(isPosCaretContainer(pos,caret))return CaretPosition$1(caret.get(),1);$_53zrlo29jducwnnv.remove(caret.get());var text=insertInlinePos(pos,!0);return caret.set(text),CaretPosition$1(text,1)})},function(element){return $_dq07eg2bjducwno6.lastPositionIn(element).map(function(pos){if(isPosCaretContainer(pos,caret))return CaretPosition$1(caret.get(),caret.get().length-1);$_53zrlo29jducwnnv.remove(caret.get());var text=insertInlinePos(pos,!1);return caret.set(text),CaretPosition$1(text,text.length-1)})},function(element){$_53zrlo29jducwnnv.remove(caret.get());var text=insertInlineAfter(element);return caret.set(text),Option.some(CaretPosition$1(text,1))})},$_ctvf7p3gjducwntr={renderCaret:renderCaret},isInlineBlock=function(node){return node&&/^(IMG)$/.test(node.nodeName)},moveStart=function(dom,selection,rng){var walker,node,nodes,container=rng.startContainer,offset=rng.startOffset;if((rng.startContainer!==rng.endContainer||!isInlineBlock(rng.startContainer.childNodes[rng.startOffset]))&&(3===container.nodeType&&offset>=container.nodeValue.length&&(offset=dom.nodeIndex(container),container=container.parentNode),1===container.nodeType))for(nodes=container.childNodes,offset<nodes.length?(container=nodes[offset],walker=new TreeWalker(container,dom.getParent(container,dom.isBlock))):(container=nodes[nodes.length-1],walker=new TreeWalker(container,dom.getParent(container,dom.isBlock)),walker.next(!0)),node=walker.current();node;node=walker.next())if(3===node.nodeType&&!isWhiteSpaceNode(node))return rng.setStart(node,0),void selection.setRng(rng)},getNonWhiteSpaceSibling=function(node,next,inc){if(node)for(next=next?"nextSibling":"previousSibling",node=inc?node:node[next];node;node=node[next])if(1===node.nodeType||!isWhiteSpaceNode(node))return node},isTextBlock$1=function(editor,name){return name.nodeType&&(name=name.nodeName),!!editor.schema.getTextBlockElements()[name.toLowerCase()]},isValid=function(ed,parent,child){return ed.schema.isValidChild(parent,child)},isWhiteSpaceNode=function(node){return node&&3===node.nodeType&&/^([\t \r\n]+|)$/.test(node.nodeValue)},replaceVars=function(value,vars){return"string"!=typeof value?value=value(vars):vars&&(value=value.replace(/%(\w+)/g,function(str,name){return vars[name]||str})),value},isEq=function(str1,str2){return str1=str1||"",str2=str2||"",str1=""+(str1.nodeName||str1),str2=""+(str2.nodeName||str2),str1.toLowerCase()===str2.toLowerCase()},normalizeStyleValue=function(dom,value,name){return"color"!==name&&"backgroundColor"!==name||(value=dom.toHex(value)),"fontWeight"===name&&700===value&&(value="bold"),"fontFamily"===name&&(value=value.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+value},getStyle=function(dom,node,name){return normalizeStyleValue(dom,dom.getStyle(node,name),name)},getTextDecoration=function(dom,node){var decoration;return dom.getParent(node,function(n){return(decoration=dom.getStyle(n,"text-decoration"))&&"none"!==decoration}),decoration},getParents$1=function(dom,node,selector){return dom.getParents(node,selector,dom.getRoot())},$_fyc2yy3ljducwnuu={isInlineBlock:isInlineBlock,moveStart:moveStart,getNonWhiteSpaceSibling:getNonWhiteSpaceSibling,isTextBlock:isTextBlock$1,isValid:isValid,isWhiteSpaceNode:isWhiteSpaceNode,replaceVars:replaceVars,isEq:isEq,normalizeStyleValue:normalizeStyleValue,getStyle:getStyle,getTextDecoration:getTextDecoration,getParents:getParents$1},isBookmarkNode$2=$_dcl0u12jjducwnp0.isBookmarkNode,getParents$2=$_fyc2yy3ljducwnuu.getParents,isWhiteSpaceNode$1=$_fyc2yy3ljducwnuu.isWhiteSpaceNode,isTextBlock$2=$_fyc2yy3ljducwnuu.isTextBlock,findLeaf=function(node,offset){for(void 0===offset&&(offset=3===node.nodeType?node.length:node.childNodes.length);node&&node.hasChildNodes();)(node=node.childNodes[offset])&&(offset=3===node.nodeType?node.length:node.childNodes.length);return{node:node,offset:offset}
},excludeTrailingWhitespace=function(endContainer,endOffset){var leaf=findLeaf(endContainer,endOffset);if(leaf.node){for(;leaf.node&&0===leaf.offset&&leaf.node.previousSibling;)leaf=findLeaf(leaf.node.previousSibling);leaf.node&&leaf.offset>0&&3===leaf.node.nodeType&&" "===leaf.node.nodeValue.charAt(leaf.offset-1)&&leaf.offset>1&&(endContainer=leaf.node,endContainer.splitText(leaf.offset-1))}return endContainer},isBogusBr=function(node){return"BR"===node.nodeName&&node.getAttribute("data-mce-bogus")&&!node.nextSibling},findParentContentEditable=function(dom,node){for(var parent=node;parent;){if(1===parent.nodeType&&dom.getContentEditable(parent))return"false"===dom.getContentEditable(parent)?parent:node;parent=parent.parentNode}return node},findSpace=function(start,remove,node,offset){var pos,pos2,str=node.nodeValue;return void 0===offset&&(offset=start?str.length:0),start?(pos=str.lastIndexOf(" ",offset),pos2=str.lastIndexOf(" ",offset),(pos=pos>pos2?pos:pos2)===-1||remove||pos++):(pos=str.indexOf(" ",offset),pos2=str.indexOf(" ",offset),pos=pos!==-1&&(pos2===-1||pos<pos2)?pos:pos2),pos},findWordEndPoint=function(dom,body,container,offset,start,remove){var walker,node,pos,lastTextNode;if(3===container.nodeType){if((pos=findSpace(start,remove,container,offset))!==-1)return{container:container,offset:pos};lastTextNode=container}for(walker=new TreeWalker(container,dom.getParent(container,dom.isBlock)||body);node=walker[start?"prev":"next"]();)if(3===node.nodeType){if(lastTextNode=node,(pos=findSpace(start,remove,node))!==-1)return{container:node,offset:pos}}else if(dom.isBlock(node))break;if(lastTextNode)return offset=start?0:lastTextNode.length,{container:lastTextNode,offset:offset}},findSelectorEndPoint=function(dom,format,rng,container,siblingName){var parents,i,y,curFormat;for(3===container.nodeType&&0===container.nodeValue.length&&container[siblingName]&&(container=container[siblingName]),parents=getParents$2(dom,container),i=0;i<parents.length;i++)for(y=0;y<format.length;y++)if(!("collapsed"in(curFormat=format[y])&&curFormat.collapsed!==rng.collapsed)&&dom.is(parents[i],curFormat.selector))return parents[i];return container},findBlockEndPoint=function(editor,format,container,siblingName){var node,dom=editor.dom,root=dom.getRoot();if(format[0].wrapper||(node=dom.getParent(container,format[0].block,root)),!node){var scopeRoot=dom.getParent(container,"LI,TD,TH");node=dom.getParent(3===container.nodeType?container.parentNode:container,function(node){return node!==root&&isTextBlock$2(editor,node)},scopeRoot)}if(node&&format[0].wrapper&&(node=getParents$2(dom,node,"ul,ol").reverse()[0]||node),!node)for(node=container;node[siblingName]&&!dom.isBlock(node[siblingName])&&(node=node[siblingName],!$_fyc2yy3ljducwnuu.isEq(node,"br")););return node||container},findParentContainer=function(dom,format,startContainer,startOffset,endContainer,endOffset,start){var container,parent,sibling,siblingName,root;if(container=parent=start?startContainer:endContainer,siblingName=start?"previousSibling":"nextSibling",root=dom.getRoot(),3===container.nodeType&&!isWhiteSpaceNode$1(container)&&(start?startOffset>0:endOffset<container.nodeValue.length))return container;for(;;){if(!format[0].block_expand&&dom.isBlock(parent))return parent;for(sibling=parent[siblingName];sibling;sibling=sibling[siblingName])if(!isBookmarkNode$2(sibling)&&!isWhiteSpaceNode$1(sibling)&&!isBogusBr(sibling))return parent;if(parent===root||parent.parentNode===root){container=parent;break}parent=parent.parentNode}return container},expandRng=function(editor,rng,format,remove){var endPoint,startContainer=rng.startContainer,startOffset=rng.startOffset,endContainer=rng.endContainer,endOffset=rng.endOffset,dom=editor.dom;return 1===startContainer.nodeType&&startContainer.hasChildNodes()&&(startContainer=getNode(startContainer,startOffset),3===startContainer.nodeType&&(startOffset=0)),1===endContainer.nodeType&&endContainer.hasChildNodes()&&(endContainer=getNode(endContainer,rng.collapsed?endOffset:endOffset-1),3===endContainer.nodeType&&(endOffset=endContainer.nodeValue.length)),startContainer=findParentContentEditable(dom,startContainer),endContainer=findParentContentEditable(dom,endContainer),(isBookmarkNode$2(startContainer.parentNode)||isBookmarkNode$2(startContainer))&&(startContainer=isBookmarkNode$2(startContainer)?startContainer:startContainer.parentNode,startContainer=startContainer.nextSibling||startContainer,3===startContainer.nodeType&&(startOffset=0)),(isBookmarkNode$2(endContainer.parentNode)||isBookmarkNode$2(endContainer))&&(endContainer=isBookmarkNode$2(endContainer)?endContainer:endContainer.parentNode,endContainer=endContainer.previousSibling||endContainer,3===endContainer.nodeType&&(endOffset=endContainer.length)),format[0].inline&&(rng.collapsed&&(endPoint=findWordEndPoint(dom,editor.getBody(),startContainer,startOffset,!0,remove),endPoint&&(startContainer=endPoint.container,startOffset=endPoint.offset),(endPoint=findWordEndPoint(dom,editor.getBody(),endContainer,endOffset,!1,remove))&&(endContainer=endPoint.container,endOffset=endPoint.offset)),endContainer=remove?endContainer:excludeTrailingWhitespace(endContainer,endOffset)),(format[0].inline||format[0].block_expand)&&(format[0].inline&&3===startContainer.nodeType&&0!==startOffset||(startContainer=findParentContainer(dom,format,startContainer,startOffset,endContainer,endOffset,!0)),format[0].inline&&3===endContainer.nodeType&&endOffset!==endContainer.nodeValue.length||(endContainer=findParentContainer(dom,format,startContainer,startOffset,endContainer,endOffset,!1))),format[0].selector&&format[0].expand!==!1&&!format[0].inline&&(startContainer=findSelectorEndPoint(dom,format,rng,startContainer,"previousSibling"),endContainer=findSelectorEndPoint(dom,format,rng,endContainer,"nextSibling")),(format[0].block||format[0].selector)&&(startContainer=findBlockEndPoint(editor,format,startContainer,"previousSibling"),endContainer=findBlockEndPoint(editor,format,endContainer,"nextSibling"),format[0].block&&(dom.isBlock(startContainer)||(startContainer=findParentContainer(dom,format,startContainer,startOffset,endContainer,endOffset,!0)),dom.isBlock(endContainer)||(endContainer=findParentContainer(dom,format,startContainer,startOffset,endContainer,endOffset,!1)))),1===startContainer.nodeType&&(startOffset=dom.nodeIndex(startContainer),startContainer=startContainer.parentNode),1===endContainer.nodeType&&(endOffset=dom.nodeIndex(endContainer)+1,endContainer=endContainer.parentNode),{startContainer:startContainer,startOffset:startOffset,endContainer:endContainer,endOffset:endOffset}},$_ceajqh3kjducwnui={expandRng:expandRng},isEq$1=$_fyc2yy3ljducwnuu.isEq,matchesUnInheritedFormatSelector=function(ed,node,name){var formatList=ed.formatter.get(name);if(formatList)for(var i=0;i<formatList.length;i++)if(formatList[i].inherit===!1&&ed.dom.is(node,formatList[i].selector))return!0;return!1},matchParents=function(editor,node,name,vars){var root=editor.dom.getRoot();return node!==root&&(node=editor.dom.getParent(node,function(node){return!!matchesUnInheritedFormatSelector(editor,node,name)||(node.parentNode===root||!!matchNode(editor,node,name,vars,!0))}),matchNode(editor,node,name,vars))},matchName=function(dom,node,format){return!!isEq$1(node,format.inline)||(!!isEq$1(node,format.block)||(format.selector?1===node.nodeType&&dom.is(node,format.selector):void 0))},matchItems=function(dom,node,format,itemName,similar,vars){var key,value,i,items=format[itemName];if(format.onmatch)return format.onmatch(node,format,itemName);if(items)if(void 0===items.length){for(key in items)if(items.hasOwnProperty(key)){if(value="attributes"===itemName?dom.getAttrib(node,key):$_fyc2yy3ljducwnuu.getStyle(dom,node,key),similar&&!value&&!format.exact)return;if((!similar||format.exact)&&!isEq$1(value,$_fyc2yy3ljducwnuu.normalizeStyleValue(dom,$_fyc2yy3ljducwnuu.replaceVars(items[key],vars),key)))return}}else for(i=0;i<items.length;i++)if("attributes"===itemName?dom.getAttrib(node,items[i]):$_fyc2yy3ljducwnuu.getStyle(dom,node,items[i]))return format;return format},matchNode=function(ed,node,name,vars,similar){var format,i,x,classes,formatList=ed.formatter.get(name),dom=ed.dom;if(formatList&&node)for(i=0;i<formatList.length;i++)if(format=formatList[i],matchName(ed.dom,node,format)&&matchItems(dom,node,format,"attributes",similar,vars)&&matchItems(dom,node,format,"styles",similar,vars)){if(classes=format.classes)for(x=0;x<classes.length;x++)if(!ed.dom.hasClass(node,classes[x]))return;return format}},match=function(editor,name,vars,node){var startNode;return node?matchParents(editor,node,name,vars):(node=editor.selection.getNode(),!!matchParents(editor,node,name,vars)||!((startNode=editor.selection.getStart())===node||!matchParents(editor,startNode,name,vars)))},matchAll=function(editor,names,vars){var startElement,matchedFormatNames=[],checkedMap={};return startElement=editor.selection.getStart(),editor.dom.getParent(startElement,function(node){var i,name;for(i=0;i<names.length;i++)name=names[i],!checkedMap[name]&&matchNode(editor,node,name,vars)&&(checkedMap[name]=!0,matchedFormatNames.push(name))},editor.dom.getRoot()),matchedFormatNames},canApply=function(editor,name){var startNode,parents,i,x,selector,formatList=editor.formatter.get(name),dom=editor.dom;if(formatList)for(startNode=editor.selection.getStart(),parents=$_fyc2yy3ljducwnuu.getParents(dom,startNode),x=formatList.length-1;x>=0;x--){if(!(selector=formatList[x].selector)||formatList[x].defaultBlock)return!0;for(i=parents.length-1;i>=0;i--)if(dom.is(parents[i],selector))return!0}return!1},$_4os6t23mjducwnv0={matchNode:matchNode,matchName:matchName,match:match,matchAll:matchAll,canApply:canApply,matchesUnInheritedFormatSelector:matchesUnInheritedFormatSelector},splitText=function(node,offset){return node.splitText(offset)},split$1=function(rng){var startContainer=rng.startContainer,startOffset=rng.startOffset,endContainer=rng.endContainer,endOffset=rng.endOffset;return startContainer===endContainer&&$_fj238m1qjducwnjm.isText(startContainer)?startOffset>0&&startOffset<startContainer.nodeValue.length&&(endContainer=splitText(startContainer,startOffset),startContainer=endContainer.previousSibling,endOffset>startOffset?(endOffset-=startOffset,startContainer=endContainer=splitText(endContainer,endOffset).previousSibling,endOffset=endContainer.nodeValue.length,startOffset=0):endOffset=0):($_fj238m1qjducwnjm.isText(startContainer)&&startOffset>0&&startOffset<startContainer.nodeValue.length&&(startContainer=splitText(startContainer,startOffset),startOffset=0),$_fj238m1qjducwnjm.isText(endContainer)&&endOffset>0&&endOffset<endContainer.nodeValue.length&&(endContainer=splitText(endContainer,endOffset).previousSibling,endOffset=endContainer.nodeValue.length)),{startContainer:startContainer,startOffset:startOffset,endContainer:endContainer,endOffset:endOffset}},$_9e24g13njducwnv4={split:split$1},ZWSP$1=$_fz0k4u21jducwnmu.ZWSP,importNode=function(ownerDocument,node){return ownerDocument.importNode(node,!0)},isCaretNode=function(node){return 1===node.nodeType&&"_mce_caret"===node.id},getEmptyCaretContainers=function(node){for(var nodes=[];node;){if(3===node.nodeType&&node.nodeValue!==ZWSP$1||node.childNodes.length>1)return[];1===node.nodeType&&nodes.push(node),node=node.firstChild}return nodes},isCaretContainerEmpty=function(node){return getEmptyCaretContainers(node).length>0},findFirstTextNode=function(node){var walker;if(node)for(walker=new TreeWalker(node,node),node=walker.current();node;node=walker.next())if(3===node.nodeType)return node;return null},createCaretContainer=function(fill){var caretContainer=$_5s4uzoyjducwngo.fromTag("span");return $_60196814jducwnhd.setAll(caretContainer,{id:"_mce_caret","data-mce-bogus":"1","data-mce-type":"format-caret"}),fill&&$_ejmufn2ojducwnpy.append(caretContainer,$_5s4uzoyjducwngo.fromText(ZWSP$1)),caretContainer},getParentCaretContainer=function(body,node){for(;node&&node!==body;){if("_mce_caret"===node.id)return node;node=node.parentNode}return null},trimZwspFromCaretContainer=function(caretContainerNode){var textNode=findFirstTextNode(caretContainerNode);return textNode&&textNode.nodeValue.charAt(0)===ZWSP$1&&textNode.deleteData(0,1),textNode},removeCaretContainerNode=function(dom,selection,node,moveCaret){var rng,block,textNode;rng=selection.getRng(!0),block=dom.getParent(node,dom.isBlock),isCaretContainerEmpty(node)?(moveCaret!==!1&&(rng.setStartBefore(node),rng.setEndBefore(node)),dom.remove(node)):(textNode=trimZwspFromCaretContainer(node),rng.startContainer===textNode&&rng.startOffset>0&&rng.setStart(textNode,rng.startOffset-1),rng.endContainer===textNode&&rng.endOffset>0&&rng.setEnd(textNode,rng.endOffset-1),dom.remove(node,!0)),block&&dom.isEmpty(block)&&$_7sfvvk2njducwnpo.fillWithPaddingBr($_5s4uzoyjducwngo.fromDom(block)),selection.setRng(rng)},removeCaretContainer=function(body,dom,selection,node,moveCaret){if(node)removeCaretContainerNode(dom,selection,node,moveCaret);else if(!(node=getParentCaretContainer(body,selection.getStart())))for(;node=dom.get("_mce_caret");)removeCaretContainerNode(dom,selection,node,!1)},insertCaretContainerNode=function(editor,caretContainer,formatNode){var dom=editor.dom,block=dom.getParent(formatNode,$_6183wb25jducwnn2.curry($_fyc2yy3ljducwnuu.isTextBlock,editor));block&&dom.isEmpty(block)?formatNode.parentNode.replaceChild(caretContainer,formatNode):($_7sfvvk2njducwnpo.removeTrailingBr($_5s4uzoyjducwngo.fromDom(formatNode)),dom.isEmpty(formatNode)?formatNode.parentNode.replaceChild(caretContainer,formatNode):dom.insertAfter(caretContainer,formatNode))},appendNode=function(parentNode,node){return parentNode.appendChild(node),node},insertFormatNodesIntoCaretContainer=function(formatNodes,caretContainer){var innerMostFormatNode=$_2dw1bj4jducwn6g.foldr(formatNodes,function(parentNode,formatNode){return appendNode(parentNode,formatNode.cloneNode(!1))},caretContainer);return appendNode(innerMostFormatNode,innerMostFormatNode.ownerDocument.createTextNode(ZWSP$1))},applyCaretFormat=function(editor,name,vars){var rng,caretContainer,textNode,offset,bookmark,container,text,selection=editor.selection;rng=selection.getRng(!0),offset=rng.startOffset,container=rng.startContainer,text=container.nodeValue,(caretContainer=getParentCaretContainer(editor.getBody(),selection.getStart()))&&(textNode=findFirstTextNode(caretContainer));var wordcharRegex=/[^\s\u00a0\u00ad\u200b\ufeff]/;text&&offset>0&&offset<text.length&&wordcharRegex.test(text.charAt(offset))&&wordcharRegex.test(text.charAt(offset-1))?(bookmark=selection.getBookmark(),rng.collapse(!0),rng=$_ceajqh3kjducwnui.expandRng(editor,rng,editor.formatter.get(name)),rng=$_9e24g13njducwnv4.split(rng),editor.formatter.apply(name,vars,rng),selection.moveToBookmark(bookmark)):(caretContainer&&textNode.nodeValue===ZWSP$1?editor.formatter.apply(name,vars,caretContainer):(caretContainer=importNode(editor.getDoc(),createCaretContainer(!0).dom()),textNode=caretContainer.firstChild,rng.insertNode(caretContainer),offset=1,editor.formatter.apply(name,vars,caretContainer)),selection.setCursorLocation(textNode,offset))},removeCaretFormat=function(editor,name,vars,similar){var container,offset,bookmark,hasContentAfter,node,formatNode,caretContainer,dom=editor.dom,selection=editor.selection,parents=[],rng=selection.getRng();for(container=rng.startContainer,offset=rng.startOffset,node=container,3===container.nodeType&&(offset!==container.nodeValue.length&&(hasContentAfter=!0),node=node.parentNode);node;){if($_4os6t23mjducwnv0.matchNode(editor,node,name,vars,similar)){formatNode=node;break}node.nextSibling&&(hasContentAfter=!0),parents.push(node),node=node.parentNode}if(formatNode)if(hasContentAfter){bookmark=selection.getBookmark(),rng.collapse(!0);var expandedRng=$_ceajqh3kjducwnui.expandRng(editor,rng,editor.formatter.get(name),!0);expandedRng=$_9e24g13njducwnv4.split(expandedRng),editor.formatter.remove(name,vars,expandedRng),selection.moveToBookmark(bookmark)}else{caretContainer=getParentCaretContainer(editor.getBody(),formatNode);var newCaretContainer=createCaretContainer(!1).dom(),caretNode=insertFormatNodesIntoCaretContainer(parents,newCaretContainer);caretContainer?insertCaretContainerNode(editor,newCaretContainer,caretContainer):insertCaretContainerNode(editor,newCaretContainer,formatNode),removeCaretContainerNode(dom,selection,caretContainer,!1),selection.setCursorLocation(caretNode,1),dom.isEmpty(formatNode)&&dom.remove(formatNode)}},disableCaretContainer=function(body,dom,selection,keyCode){removeCaretContainer(body,dom,selection,null,!1),8===keyCode&&selection.isCollapsed()&&selection.getStart().innerHTML===ZWSP$1&&removeCaretContainer(body,dom,selection,getParentCaretContainer(body,selection.getStart())),37!==keyCode&&39!==keyCode||removeCaretContainer(body,dom,selection,getParentCaretContainer(body,selection.getStart()))},setup=function(editor){var dom=editor.dom,selection=editor.selection,body=editor.getBody();editor.on("mouseup keydown",function(e){disableCaretContainer(body,dom,selection,e.keyCode)})},replaceWithCaretFormat=function(targetNode,formatNodes){var caretContainer=createCaretContainer(!1),innerMost=insertFormatNodesIntoCaretContainer(formatNodes,caretContainer.dom());return $_ejmufn2ojducwnpy.before($_5s4uzoyjducwngo.fromDom(targetNode),caretContainer),$_34vweg2pjducwnq0.remove($_5s4uzoyjducwngo.fromDom(targetNode)),CaretPosition$1(innerMost,0)},isFormatElement=function(editor,element){return editor.schema.getTextInlineElements().hasOwnProperty($_47qy15zjducwngt.name(element))&&!isCaretNode(element.dom())&&!$_fj238m1qjducwnjm.isBogus(element.dom())},$_gizh813jjducwnu6={setup:setup,applyCaretFormat:applyCaretFormat,removeCaretFormat:removeCaretFormat,isCaretNode:isCaretNode,getParentCaretContainer:getParentCaretContainer,replaceWithCaretFormat:replaceWithCaretFormat,isFormatElement:isFormatElement},evaluateUntil=function(fns,args){for(var i=0;i<fns.length;i++){var result=fns[i].apply(null,args);if(result.isSome())return result}return Option.none()},$_fx53xj3ojducwnv6={evaluateUntil:evaluateUntil},Location=$_elh5kq3djducwnt6.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),rescope=function(rootNode,node){var parentBlock=getParentBlock(node,rootNode);return parentBlock?parentBlock:rootNode},before$3=function(isInlineTarget,rootNode,pos){var nPos=$_4m240x32jducwnrf.normalizeForwards(pos),scope=rescope(rootNode,nPos.container());return $_4m240x32jducwnrf.findRootInline(isInlineTarget,scope,nPos).fold(function(){return $_dq07eg2bjducwno6.nextPosition(scope,nPos).bind($_60qu7r6jducwn73.curry($_4m240x32jducwnrf.findRootInline,isInlineTarget,scope)).map(function(inline){return Location.before(inline)})},Option.none)},isNotInsideFormatCaretContainer=function(rootNode,elm){return null===$_gizh813jjducwnu6.getParentCaretContainer(rootNode,elm)},findInsideRootInline=function(isInlineTarget,rootNode,pos){return $_4m240x32jducwnrf.findRootInline(isInlineTarget,rootNode,pos).filter($_60qu7r6jducwn73.curry(isNotInsideFormatCaretContainer,rootNode))},start=function(isInlineTarget,rootNode,pos){var nPos=$_4m240x32jducwnrf.normalizeBackwards(pos);return findInsideRootInline(isInlineTarget,rootNode,nPos).bind(function(inline){return $_dq07eg2bjducwno6.prevPosition(inline,nPos).isNone()?Option.some(Location.start(inline)):Option.none()})},end=function(isInlineTarget,rootNode,pos){var nPos=$_4m240x32jducwnrf.normalizeForwards(pos);return findInsideRootInline(isInlineTarget,rootNode,nPos).bind(function(inline){return $_dq07eg2bjducwno6.nextPosition(inline,nPos).isNone()?Option.some(Location.end(inline)):Option.none()})},after$3=function(isInlineTarget,rootNode,pos){var nPos=$_4m240x32jducwnrf.normalizeBackwards(pos),scope=rescope(rootNode,nPos.container());return $_4m240x32jducwnrf.findRootInline(isInlineTarget,scope,nPos).fold(function(){return $_dq07eg2bjducwno6.prevPosition(scope,nPos).bind($_60qu7r6jducwn73.curry($_4m240x32jducwnrf.findRootInline,isInlineTarget,scope)).map(function(inline){return Location.after(inline)})},Option.none)},isValidLocation=function(location){return $_4m240x32jducwnrf.isRtl(getElement(location))===!1},readLocation=function(isInlineTarget,rootNode,pos){return $_fx53xj3ojducwnv6.evaluateUntil([before$3,start,end,after$3],[isInlineTarget,rootNode,pos]).filter(isValidLocation)},getElement=function(location){return location.fold($_60qu7r6jducwn73.identity,$_60qu7r6jducwn73.identity,$_60qu7r6jducwn73.identity,$_60qu7r6jducwn73.identity)},getName=function(location){return location.fold($_60qu7r6jducwn73.constant("before"),$_60qu7r6jducwn73.constant("start"),$_60qu7r6jducwn73.constant("end"),$_60qu7r6jducwn73.constant("after"))},outside=function(location){return location.fold(Location.before,Location.before,Location.after,Location.after)},inside=function(location){return location.fold(Location.start,Location.start,Location.end,Location.end)},isEq$2=function(location1,location2){return getName(location1)===getName(location2)&&getElement(location1)===getElement(location2)},betweenInlines=function(forward,isInlineTarget,rootNode,from,to,location){return $_87ppqy2ejducwnol.liftN([$_4m240x32jducwnrf.findRootInline(isInlineTarget,rootNode,from),$_4m240x32jducwnrf.findRootInline(isInlineTarget,rootNode,to)],function(fromInline,toInline){return fromInline!==toInline&&$_4m240x32jducwnrf.hasSameParentBlock(rootNode,fromInline,toInline)?Location.after(forward?fromInline:toInline):location}).getOr(location)},skipNoMovement=function(fromLocation,toLocation){return fromLocation.fold($_60qu7r6jducwn73.constant(!0),function(fromLocation){return!isEq$2(fromLocation,toLocation)})},findLocationTraverse=function(forward,isInlineTarget,rootNode,fromLocation,pos){var from=$_4m240x32jducwnrf.normalizePosition(forward,pos);return $_dq07eg2bjducwno6.fromPosition(forward,rootNode,from).map($_60qu7r6jducwn73.curry($_4m240x32jducwnrf.normalizePosition,forward)).fold(function(){return fromLocation.map(outside)},function(to){return readLocation(isInlineTarget,rootNode,to).map($_60qu7r6jducwn73.curry(betweenInlines,forward,isInlineTarget,rootNode,from,to)).filter($_60qu7r6jducwn73.curry(skipNoMovement,fromLocation))}).filter(isValidLocation)},findLocationSimple=function(forward,location){return forward?location.fold($_60qu7r6jducwn73.compose(Option.some,Location.start),Option.none,$_60qu7r6jducwn73.compose(Option.some,Location.after),Option.none):location.fold(Option.none,$_60qu7r6jducwn73.compose(Option.some,Location.before),Option.none,$_60qu7r6jducwn73.compose(Option.some,Location.end))},findLocation=function(forward,isInlineTarget,rootNode,pos){var from=$_4m240x32jducwnrf.normalizePosition(forward,pos),fromLocation=readLocation(isInlineTarget,rootNode,from);return readLocation(isInlineTarget,rootNode,from).bind($_60qu7r6jducwn73.curry(findLocationSimple,forward)).orThunk(function(){return findLocationTraverse(forward,isInlineTarget,rootNode,fromLocation,pos)})},$_681q3b3ijducwnty={readLocation:readLocation,findLocation:findLocation,prevLocation:$_60qu7r6jducwn73.curry(findLocation,!1),nextLocation:$_60qu7r6jducwn73.curry(findLocation,!0),getElement:getElement,outside:outside,inside:inside},Cell=function(initial){var value=initial,get=function(){return value},set=function(v){value=v},clone=function(){return Cell(get())};return{get:get,set:set,clone:clone}},hasSelectionModifyApi=function(editor){return $_c7y6af12jducwnh8.isFunction(editor.selection.getSel().modify)},moveRel=function(forward,selection,pos){var delta=forward?1:-1;return selection.setRng(CaretPosition$1(pos.container(),pos.offset()+delta).toRange()),selection.getSel().modify("move",forward?"forward":"backward","word"),!0},moveByWord=function(forward,editor){var rng=editor.selection.getRng(),pos=forward?CaretPosition$1.fromRangeEnd(rng):CaretPosition$1.fromRangeStart(rng);return!!hasSelectionModifyApi(editor)&&(forward&&isBeforeInline(pos)?moveRel(!0,editor.selection,pos):!(forward||!isAfterInline(pos))&&moveRel(!1,editor.selection,pos))},$_cifmuh3rjducwnve={hasSelectionModifyApi:hasSelectionModifyApi,moveByWord:moveByWord},setCaretPosition=function(editor,pos){var rng=editor.dom.createRng();rng.setStart(pos.container(),pos.offset()),rng.setEnd(pos.container(),pos.offset()),editor.selection.setRng(rng)},isFeatureEnabled=function(editor){return editor.settings.inline_boundaries!==!1},setSelected=function(state,elm){state?elm.setAttribute("data-mce-selected","inline-boundary"):elm.removeAttribute("data-mce-selected")},renderCaretLocation=function(editor,caret,location){return $_ctvf7p3gjducwntr.renderCaret(caret,location).map(function(pos){return setCaretPosition(editor,pos),location})},findLocation$1=function(editor,caret,forward){var rootNode=editor.getBody(),from=CaretPosition$1.fromRangeStart(editor.selection.getRng()),isInlineTarget=$_60qu7r6jducwn73.curry($_4m240x32jducwnrf.isInlineTarget,editor);return $_681q3b3ijducwnty.findLocation(forward,isInlineTarget,rootNode,from).bind(function(location){return renderCaretLocation(editor,caret,location)})},toggleInlines=function(isInlineTarget,dom,elms){var selectedInlines=$_2dw1bj4jducwn6g.filter(dom.select('*[data-mce-selected="inline-boundary"]'),isInlineTarget),targetInlines=$_2dw1bj4jducwn6g.filter(elms,isInlineTarget);$_2dw1bj4jducwn6g.each($_2dw1bj4jducwn6g.difference(selectedInlines,targetInlines),$_60qu7r6jducwn73.curry(setSelected,!1)),$_2dw1bj4jducwn6g.each($_2dw1bj4jducwn6g.difference(targetInlines,selectedInlines),$_60qu7r6jducwn73.curry(setSelected,!0))},safeRemoveCaretContainer=function(editor,caret){if(editor.selection.isCollapsed()&&editor.composing!==!0&&caret.get()){var pos=CaretPosition$1.fromRangeStart(editor.selection.getRng());CaretPosition$1.isTextPosition(pos)&&$_4m240x32jducwnrf.isAtZwsp(pos)===!1&&(setCaretPosition(editor,$_53zrlo29jducwnnv.removeAndReposition(caret.get(),pos)),caret.set(null))}},renderInsideInlineCaret=function(isInlineTarget,editor,caret,elms){if(editor.selection.isCollapsed()){var inlines=$_2dw1bj4jducwn6g.filter(elms,isInlineTarget);$_2dw1bj4jducwn6g.each(inlines,function(inline){var pos=CaretPosition$1.fromRangeStart(editor.selection.getRng());$_681q3b3ijducwnty.readLocation(isInlineTarget,editor.getBody(),pos).bind(function(location){return renderCaretLocation(editor,caret,location)})})}},move=function(editor,caret,forward){return function(){return!!isFeatureEnabled(editor)&&findLocation$1(editor,caret,forward).isSome()}},moveWord=function(forward,editor,caret){return function(){return!!isFeatureEnabled(editor)&&$_cifmuh3rjducwnve.moveByWord(forward,editor)}},setupSelectedState=function(editor){var caret=new Cell(null),isInlineTarget=$_60qu7r6jducwn73.curry($_4m240x32jducwnrf.isInlineTarget,editor);return editor.on("NodeChange",function(e){isFeatureEnabled(editor)&&(toggleInlines(isInlineTarget,editor.dom,e.parents),safeRemoveCaretContainer(editor,caret),renderInsideInlineCaret(isInlineTarget,editor,caret,e.parents))}),caret},$_41ufni3pjducwnv8={move:move,moveNextWord:$_60qu7r6jducwn73.curry(moveWord,!0),movePrevWord:$_60qu7r6jducwn73.curry(moveWord,!1),setupSelectedState:setupSelectedState,setCaretPosition:setCaretPosition},isFeatureEnabled$1=function(editor){return editor.settings.inline_boundaries!==!1},rangeFromPositions=function(from,to){var range=document.createRange();return range.setStart(from.container(),from.offset()),range.setEnd(to.container(),to.offset()),range},hasOnlyTwoOrLessPositionsLeft=function(elm){return $_87ppqy2ejducwnol.liftN([$_dq07eg2bjducwno6.firstPositionIn(elm),$_dq07eg2bjducwno6.lastPositionIn(elm)],function(firstPos,lastPos){var normalizedFirstPos=$_4m240x32jducwnrf.normalizePosition(!0,firstPos),normalizedLastPos=$_4m240x32jducwnrf.normalizePosition(!1,lastPos);return $_dq07eg2bjducwno6.nextPosition(elm,normalizedFirstPos).map(function(pos){return pos.isEqual(normalizedLastPos)}).getOr(!0)}).getOr(!0)},setCaretLocation=function(editor,caret){return function(location){return $_ctvf7p3gjducwntr.renderCaret(caret,location).map(function(pos){return $_41ufni3pjducwnv8.setCaretPosition(editor,pos),!0}).getOr(!1)}},deleteFromTo=function(editor,caret,from,to){var rootNode=editor.getBody(),isInlineTarget=$_60qu7r6jducwn73.curry($_4m240x32jducwnrf.isInlineTarget,editor);editor.undoManager.ignore(function(){editor.selection.setRng(rangeFromPositions(from,to)),editor.execCommand("Delete"),$_681q3b3ijducwnty.readLocation(isInlineTarget,rootNode,CaretPosition$1.fromRangeStart(editor.selection.getRng())).map($_681q3b3ijducwnty.inside).map(setCaretLocation(editor,caret))}),editor.nodeChanged()},rescope$1=function(rootNode,node){var parentBlock=getParentBlock(node,rootNode);return parentBlock?parentBlock:rootNode},backspaceDeleteCollapsed=function(editor,caret,forward,from){var rootNode=rescope$1(editor.getBody(),from.container()),isInlineTarget=$_60qu7r6jducwn73.curry($_4m240x32jducwnrf.isInlineTarget,editor),fromLocation=$_681q3b3ijducwnty.readLocation(isInlineTarget,rootNode,from);return fromLocation.bind(function(location){return forward?location.fold($_60qu7r6jducwn73.constant(Option.some($_681q3b3ijducwnty.inside(location))),Option.none,$_60qu7r6jducwn73.constant(Option.some($_681q3b3ijducwnty.outside(location))),Option.none):location.fold(Option.none,$_60qu7r6jducwn73.constant(Option.some($_681q3b3ijducwnty.outside(location))),Option.none,$_60qu7r6jducwn73.constant(Option.some($_681q3b3ijducwnty.inside(location))))}).map(setCaretLocation(editor,caret)).getOrThunk(function(){var toPosition=$_dq07eg2bjducwno6.navigate(forward,rootNode,from),toLocation=toPosition.bind(function(pos){return $_681q3b3ijducwnty.readLocation(isInlineTarget,rootNode,pos)});return fromLocation.isSome()&&toLocation.isSome()?$_4m240x32jducwnrf.findRootInline(isInlineTarget,rootNode,from).map(function(elm){return!!hasOnlyTwoOrLessPositionsLeft(elm)&&($_92j5pe3ejducwnta.deleteElement(editor,forward,$_5s4uzoyjducwngo.fromDom(elm)),!0)}).getOr(!1):toLocation.bind(function(_){return toPosition.map(function(to){return forward?deleteFromTo(editor,caret,from,to):deleteFromTo(editor,caret,to,from),!0})}).getOr(!1)})},backspaceDelete$3=function(editor,caret,forward){if(editor.selection.isCollapsed()&&isFeatureEnabled$1(editor)){var from=CaretPosition$1.fromRangeStart(editor.selection.getRng());return backspaceDeleteCollapsed(editor,caret,forward,from)}return!1},$_a4ivlq3fjducwntl={backspaceDelete:backspaceDelete$3},tableCellRng=$_295afp18jducwni4.immutable("start","end"),tableSelection=$_295afp18jducwni4.immutable("rng","table","cells"),deleteAction=$_elh5kq3djducwnt6.generate([{removeTable:["element"]},{emptyCells:["cells"]}]),getClosestCell$1=function(container,isRoot){return $_eh73s937jducwns3.closest($_5s4uzoyjducwngo.fromDom(container),"td,th",isRoot)},getClosestTable=function(cell,isRoot){return $_eh73s937jducwns3.ancestor(cell,"table",isRoot)},isExpandedCellRng=function(cellRng){return $_4qdq5m1djducwnie.eq(cellRng.start(),cellRng.end())===!1},getTableFromCellRng=function(cellRng,isRoot){return getClosestTable(cellRng.start(),isRoot).bind(function(startParentTable){return getClosestTable(cellRng.end(),isRoot).bind(function(endParentTable){return $_4qdq5m1djducwnie.eq(startParentTable,endParentTable)?Option.some(startParentTable):Option.none()})})},getCellRng=function(rng,isRoot){return $_87ppqy2ejducwnol.liftN([getClosestCell$1(rng.startContainer,isRoot),getClosestCell$1(rng.endContainer,isRoot)],tableCellRng).filter(isExpandedCellRng)},getTableSelectionFromCellRng=function(cellRng,isRoot){return getTableFromCellRng(cellRng,isRoot).bind(function(table){var cells=$_47k8tx2gjducwnot.descendants(table,"td,th");return tableSelection(cellRng,table,cells)})},getTableSelectionFromRng=function(rootNode,rng){var isRoot=$_60qu7r6jducwn73.curry($_4qdq5m1djducwnie.eq,rootNode);return getCellRng(rng,isRoot).map(function(cellRng){return getTableSelectionFromCellRng(cellRng,isRoot)})},getCellIndex=function(cellArray,cell){return $_2dw1bj4jducwn6g.findIndex(cellArray,function(x){
return $_4qdq5m1djducwnie.eq(x,cell)})},getSelectedCells=function(tableSelection){return $_87ppqy2ejducwnol.liftN([getCellIndex(tableSelection.cells(),tableSelection.rng().start()),getCellIndex(tableSelection.cells(),tableSelection.rng().end())],function(startIndex,endIndex){return tableSelection.cells().slice(startIndex,endIndex+1)})},getAction=function(tableSelection){return getSelectedCells(tableSelection).bind(function(selected){var cells=tableSelection.cells();return selected.length===cells.length?deleteAction.removeTable(tableSelection.table()):deleteAction.emptyCells(selected)})},getActionFromCells=function(cells){return deleteAction.emptyCells(cells)},getActionFromRange=function(rootNode,rng){return getTableSelectionFromRng(rootNode,rng).map(getAction)},$_cwch063tjducwnvp={getActionFromRange:getActionFromRange,getActionFromCells:getActionFromCells},getRanges=function(selection){var ranges=[];if(selection)for(var i=0;i<selection.rangeCount;i++)ranges.push(selection.getRangeAt(i));return ranges},getSelectedNodes=function(ranges){return $_2dw1bj4jducwn6g.bind(ranges,function(range){var node=getSelectedNode(range);return node?[$_5s4uzoyjducwngo.fromDom(node)]:[]})},hasMultipleRanges=function(selection){return getRanges(selection).length>1},$_bqfspz3vjducwnw3={getRanges:getRanges,getSelectedNodes:getSelectedNodes,hasMultipleRanges:hasMultipleRanges},getCellsFromRanges=function(ranges){return $_2dw1bj4jducwn6g.filter($_bqfspz3vjducwnw3.getSelectedNodes(ranges),isTableCell)},getCellsFromElement=function(elm){return $_47k8tx2gjducwnot.descendants(elm,"td[data-mce-selected],th[data-mce-selected]")},getCellsFromElementOrRanges=function(ranges,element){var selectedCells=getCellsFromElement(element),rangeCells=getCellsFromRanges(ranges);return selectedCells.length>0?selectedCells:rangeCells},getCellsFromEditor=function(editor){return getCellsFromElementOrRanges($_bqfspz3vjducwnw3.getRanges(editor.selection.getSel()),$_5s4uzoyjducwngo.fromDom(editor.getBody()))},$_7ksohe3ujducwnvz={getCellsFromRanges:getCellsFromRanges,getCellsFromElement:getCellsFromElement,getCellsFromElementOrRanges:getCellsFromElementOrRanges,getCellsFromEditor:getCellsFromEditor},emptyCells=function(editor,cells){return $_2dw1bj4jducwn6g.each(cells,$_7sfvvk2njducwnpo.fillWithPaddingBr),editor.selection.setCursorLocation(cells[0].dom(),0),!0},deleteTableElement=function(editor,table){return $_92j5pe3ejducwnta.deleteElement(editor,!1,table),!0},deleteCellRange=function(editor,rootElm,rng){return $_cwch063tjducwnvp.getActionFromRange(rootElm,rng).map(function(action){return action.fold($_60qu7r6jducwn73.curry(deleteTableElement,editor),$_60qu7r6jducwn73.curry(emptyCells,editor))})},deleteCaptionRange=function(editor,caption){return emptyElement(editor,caption)},deleteTableRange=function(editor,rootElm,rng,startElm){return getParentCaption(rootElm,startElm).fold(function(){return deleteCellRange(editor,rootElm,rng)},function(caption){return deleteCaptionRange(editor,caption)}).getOr(!1)},deleteRange$1=function(editor,startElm){var rootNode=$_5s4uzoyjducwngo.fromDom(editor.getBody()),rng=editor.selection.getRng(),selectedCells=$_7ksohe3ujducwnvz.getCellsFromEditor(editor);return 0!==selectedCells.length?emptyCells(editor,selectedCells):deleteTableRange(editor,rootNode,rng,startElm)},getParentCell=function(rootElm,elm){return $_2dw1bj4jducwn6g.find($_b22jto39jducwnsg.parentsAndSelf(elm,rootElm),isTableCell)},getParentCaption=function(rootElm,elm){return $_2dw1bj4jducwn6g.find($_b22jto39jducwnsg.parentsAndSelf(elm,rootElm),function(elm){return"caption"===$_47qy15zjducwngt.name(elm)})},deleteBetweenCells=function(editor,rootElm,forward,fromCell,from){return $_dq07eg2bjducwno6.navigate(forward,editor.getBody(),from).bind(function(to){return getParentCell(rootElm,$_5s4uzoyjducwngo.fromDom(to.getNode())).map(function(toCell){return $_4qdq5m1djducwnie.eq(toCell,fromCell)===!1})})},emptyElement=function(editor,elm){return $_7sfvvk2njducwnpo.fillWithPaddingBr(elm),editor.selection.setCursorLocation(elm.dom(),0),Option.some(!0)},isDeleteOfLastCharPos=function(fromCaption,forward,from,to){return $_dq07eg2bjducwno6.firstPositionIn(fromCaption.dom()).bind(function(first){return $_dq07eg2bjducwno6.lastPositionIn(fromCaption.dom()).map(function(last){return forward?from.isEqual(first)&&to.isEqual(last):from.isEqual(last)&&to.isEqual(first)})}).getOr(!0)},emptyCaretCaption=function(editor,elm){return emptyElement(editor,elm)},validateCaretCaption=function(rootElm,fromCaption,to){return getParentCaption(rootElm,$_5s4uzoyjducwngo.fromDom(to.getNode())).map(function(toCaption){return $_4qdq5m1djducwnie.eq(toCaption,fromCaption)===!1})},deleteCaretInsideCaption=function(editor,rootElm,forward,fromCaption,from){return $_dq07eg2bjducwno6.navigate(forward,editor.getBody(),from).bind(function(to){return isDeleteOfLastCharPos(fromCaption,forward,from,to)?emptyCaretCaption(editor,fromCaption):validateCaretCaption(rootElm,fromCaption,to)}).or(Option.some(!0))},deleteCaretCells=function(editor,forward,rootElm,startElm){var from=CaretPosition$1.fromRangeStart(editor.selection.getRng());return getParentCell(rootElm,startElm).bind(function(fromCell){return $_baf2ia35jducwnrx.isEmpty(fromCell)?emptyElement(editor,fromCell):deleteBetweenCells(editor,rootElm,forward,fromCell,from)})},deleteCaretCaption=function(editor,forward,rootElm,fromCaption){var from=CaretPosition$1.fromRangeStart(editor.selection.getRng());return $_baf2ia35jducwnrx.isEmpty(fromCaption)?emptyElement(editor,fromCaption):deleteCaretInsideCaption(editor,rootElm,forward,fromCaption,from)},deleteCaret=function(editor,forward,startElm){var rootElm=$_5s4uzoyjducwngo.fromDom(editor.getBody());return getParentCaption(rootElm,startElm).fold(function(){return deleteCaretCells(editor,forward,rootElm,startElm)},function(fromCaption){return deleteCaretCaption(editor,forward,rootElm,fromCaption)}).getOr(!1)},backspaceDelete$4=function(editor,forward){var startElm=$_5s4uzoyjducwngo.fromDom(editor.selection.getStart(!0));return editor.selection.isCollapsed()?deleteCaret(editor,forward,startElm):deleteRange$1(editor,startElm)},$_fo6mx3sjducwnvh={backspaceDelete:backspaceDelete$4},nativeCommand=function(editor,command){editor.getDoc().execCommand(command,!1,null)},deleteCommand=function(editor){$_52c8ph3bjducwnsq.backspaceDelete(editor,!1)||$_a4ivlq3fjducwntl.backspaceDelete(editor,!1)||$_d0w5iz2xjducwnqm.backspaceDelete(editor,!1)||$_fo6mx3sjducwnvh.backspaceDelete(editor)||$_3kdgsv3ajducwnsk.backspaceDelete(editor,!1)||(nativeCommand(editor,"Delete"),$_5jcxyf2zjducwnqv.paddEmptyBody(editor))},forwardDeleteCommand=function(editor){$_52c8ph3bjducwnsq.backspaceDelete(editor,!0)||$_a4ivlq3fjducwntl.backspaceDelete(editor,!0)||$_d0w5iz2xjducwnqm.backspaceDelete(editor,!0)||$_fo6mx3sjducwnvh.backspaceDelete(editor)||$_3kdgsv3ajducwnsk.backspaceDelete(editor,!0)||nativeCommand(editor,"ForwardDelete")},$_3jaaze2wjducwnqk={deleteCommand:deleteCommand,forwardDeleteCommand:forwardDeleteCommand},isEq$3=function(rng1,rng2){return rng1&&rng2&&rng1.startContainer===rng2.startContainer&&rng1.startOffset===rng2.startOffset&&rng1.endContainer===rng2.endContainer&&rng1.endOffset===rng2.endOffset},$_18bpcb3yjducwnzh={isEq:isEq$3},position=$_295afp18jducwni4.immutable("container","offset"),findParent=function(node,rootNode,predicate){for(;node&&node!==rootNode;){if(predicate(node))return node;node=node.parentNode}return null},hasParent=function(node,rootNode,predicate){return null!==findParent(node,rootNode,predicate)},hasParentWithName=function(node,rootNode,name){return hasParent(node,rootNode,function(node){return node.nodeName===name})},isTable$2=function(node){return node&&"TABLE"===node.nodeName},isTableCell$3=function(node){return node&&/^(TD|TH|CAPTION)$/.test(node.nodeName)},isCeFalseCaretContainer=function(node,rootNode){return isCaretContainer(node)&&hasParent(node,rootNode,$_gizh813jjducwnu6.isCaretNode)===!1},hasBrBeforeAfter=function(dom,node,left){for(var walker=new TreeWalker(node,dom.getParent(node.parentNode,dom.isBlock)||dom.getRoot());node=walker[left?"prev":"next"]();)if($_fj238m1qjducwnjm.isBr(node))return!0},isPrevNode=function(node,name){return node.previousSibling&&node.previousSibling.nodeName===name},hasContentEditableFalseParent=function(body,node){for(;node&&node!==body;){if($_fj238m1qjducwnjm.isContentEditableFalse(node))return!0;node=node.parentNode}return!1},findTextNodeRelative=function(dom,isAfterNode,collapsed,left,startNode){var walker,lastInlineElement,parentBlockContainer,node,body=dom.getRoot(),nonEmptyElementsMap=dom.schema.getNonEmptyElements();if(parentBlockContainer=dom.getParent(startNode.parentNode,dom.isBlock)||body,left&&$_fj238m1qjducwnjm.isBr(startNode)&&isAfterNode&&dom.isEmpty(parentBlockContainer))return Option.some(position(startNode.parentNode,dom.nodeIndex(startNode)));for(walker=new TreeWalker(startNode,parentBlockContainer);node=walker[left?"prev":"next"]();){if("false"===dom.getContentEditableParent(node)||isCeFalseCaretContainer(node,body))return Option.none();if($_fj238m1qjducwnjm.isText(node)&&node.nodeValue.length>0)return hasParentWithName(node,body,"A")===!1?Option.some(position(node,left?node.nodeValue.length:0)):Option.none();if(dom.isBlock(node)||nonEmptyElementsMap[node.nodeName.toLowerCase()])return Option.none();lastInlineElement=node}return collapsed&&lastInlineElement?Option.some(position(lastInlineElement,0)):Option.none()},normalizeEndPoint=function(dom,collapsed,start,rng){var container,offset,walker,node,nonEmptyElementsMap,directionLeft,isAfterNode,body=dom.getRoot(),normalized=!1;if(container=rng[(start?"start":"end")+"Container"],offset=rng[(start?"start":"end")+"Offset"],isAfterNode=$_fj238m1qjducwnjm.isElement(container)&&offset===container.childNodes.length,nonEmptyElementsMap=dom.schema.getNonEmptyElements(),directionLeft=start,isCaretContainer(container))return Option.none();if($_fj238m1qjducwnjm.isElement(container)&&offset>container.childNodes.length-1&&(directionLeft=!1),$_fj238m1qjducwnjm.isDocument(container)&&(container=body,offset=0),container===body){if(directionLeft&&(node=container.childNodes[offset>0?offset-1:0])){if(isCaretContainer(node))return Option.none();if(nonEmptyElementsMap[node.nodeName]||isTable$2(node))return Option.none()}if(container.hasChildNodes()){if(offset=Math.min(!directionLeft&&offset>0?offset-1:offset,container.childNodes.length-1),container=container.childNodes[offset],offset=$_fj238m1qjducwnjm.isText(container)&&isAfterNode?container.data.length:0,!collapsed&&container===body.lastChild&&isTable$2(container))return Option.none();if(hasContentEditableFalseParent(body,container)||isCaretContainer(container))return Option.none();if(container.hasChildNodes()&&isTable$2(container)===!1){node=container,walker=new TreeWalker(container,body);do{if($_fj238m1qjducwnjm.isContentEditableFalse(node)||isCaretContainer(node)){normalized=!1;break}if($_fj238m1qjducwnjm.isText(node)&&node.nodeValue.length>0){offset=directionLeft?0:node.nodeValue.length,container=node,normalized=!0;break}if(nonEmptyElementsMap[node.nodeName.toLowerCase()]&&!isTableCell$3(node)){offset=dom.nodeIndex(node),container=node.parentNode,"IMG"!==node.nodeName&&"PRE"!==node.nodeName||directionLeft||offset++,normalized=!0;break}}while(node=directionLeft?walker.next():walker.prev())}}}return collapsed&&($_fj238m1qjducwnjm.isText(container)&&0===offset&&findTextNodeRelative(dom,isAfterNode,collapsed,!0,container).each(function(pos){container=pos.container(),offset=pos.offset(),normalized=!0}),$_fj238m1qjducwnjm.isElement(container)&&(node=container.childNodes[offset],node||(node=container.childNodes[offset-1]),!node||!$_fj238m1qjducwnjm.isBr(node)||isPrevNode(node,"A")||hasBrBeforeAfter(dom,node,!1)||hasBrBeforeAfter(dom,node,!0)||findTextNodeRelative(dom,isAfterNode,collapsed,!0,node).each(function(pos){container=pos.container(),offset=pos.offset(),normalized=!0}))),directionLeft&&!collapsed&&$_fj238m1qjducwnjm.isText(container)&&offset===container.nodeValue.length&&findTextNodeRelative(dom,isAfterNode,collapsed,!1,container).each(function(pos){container=pos.container(),offset=pos.offset(),normalized=!0}),normalized?Option.some(position(container,offset)):Option.none()},normalize$1=function(dom,rng){var collapsed=rng.collapsed,normRng=rng.cloneRange();return normalizeEndPoint(dom,collapsed,!0,normRng).each(function(pos){normRng.setStart(pos.container(),pos.offset())}),collapsed||normalizeEndPoint(dom,collapsed,!1,normRng).each(function(pos){normRng.setEnd(pos.container(),pos.offset())}),collapsed&&normRng.collapse(!0),$_18bpcb3yjducwnzh.isEq(rng,normRng)?Option.none():Option.some(normRng)},$_altsby3xjducwnz5={normalize:normalize$1},hasRightSideContent=function(schema,container,parentBlock){for(var node,walker=new TreeWalker(container,parentBlock),nonEmptyElementsMap=schema.getNonEmptyElements();node=walker.next();)if(nonEmptyElementsMap[node.nodeName.toLowerCase()]||node.length>0)return!0},scrollToBr=function(dom,selection,brElm){var marker=dom.create("span",{},"&nbsp;");brElm.parentNode.insertBefore(marker,brElm),selection.scrollIntoView(marker),dom.remove(marker)},moveSelectionToBr=function(dom,selection,brElm,extraBr){var rng=dom.createRng();extraBr?(rng.setStartBefore(brElm),rng.setEndBefore(brElm)):(rng.setStartAfter(brElm),rng.setEndAfter(brElm)),selection.setRng(rng)},insertBrAtCaret=function(editor,evt){var brElm,extraBr,selection=editor.selection,dom=editor.dom,rng=selection.getRng();$_altsby3xjducwnz5.normalize(dom,rng).each(function(normRng){rng.setStart(normRng.startContainer,normRng.startOffset),rng.setEnd(normRng.endContainer,normRng.endOffset)});var offset=rng.startOffset,container=rng.startContainer;if(1===container.nodeType&&container.hasChildNodes()){var isAfterLastNodeInContainer=offset>container.childNodes.length-1;container=container.childNodes[Math.min(offset,container.childNodes.length-1)]||container,offset=isAfterLastNodeInContainer&&3===container.nodeType?container.nodeValue.length:0}var parentBlock=dom.getParent(container,dom.isBlock),containerBlock=parentBlock?dom.getParent(parentBlock.parentNode,dom.isBlock):null,containerBlockName=containerBlock?containerBlock.nodeName.toUpperCase():"",isControlKey=evt&&evt.ctrlKey;"LI"!==containerBlockName||isControlKey||(parentBlock=containerBlock),container&&3===container.nodeType&&offset>=container.nodeValue.length&&(hasRightSideContent(editor.schema,container,parentBlock)||(brElm=dom.create("br"),rng.insertNode(brElm),rng.setStartAfter(brElm),rng.setEndAfter(brElm),extraBr=!0)),brElm=dom.create("br"),rng.insertNode(brElm),scrollToBr(dom,selection,brElm),moveSelectionToBr(dom,selection,brElm,extraBr),editor.undoManager.add()},insertBrBefore=function(editor,inline){var br=$_5s4uzoyjducwngo.fromTag("br");$_ejmufn2ojducwnpy.before($_5s4uzoyjducwngo.fromDom(inline),br),editor.undoManager.add()},insertBrAfter=function(editor,inline){hasBrAfter(editor.getBody(),inline)||$_ejmufn2ojducwnpy.after($_5s4uzoyjducwngo.fromDom(inline),$_5s4uzoyjducwngo.fromTag("br"));var br=$_5s4uzoyjducwngo.fromTag("br");$_ejmufn2ojducwnpy.after($_5s4uzoyjducwngo.fromDom(inline),br),scrollToBr(editor.dom,editor.selection,br.dom()),moveSelectionToBr(editor.dom,editor.selection,br.dom(),!1),editor.undoManager.add()},isBeforeBr=function(pos){return $_fj238m1qjducwnjm.isBr(pos.getNode())},hasBrAfter=function(rootNode,startNode){return!!isBeforeBr(CaretPosition$1.after(startNode))||$_dq07eg2bjducwno6.nextPosition(rootNode,CaretPosition$1.after(startNode)).map(function(pos){return $_fj238m1qjducwnjm.isBr(pos.getNode())}).getOr(!1)},isAnchorLink=function(elm){return elm&&"A"===elm.nodeName&&"href"in elm},isInsideAnchor=function(location){return location.fold($_60qu7r6jducwn73.constant(!1),isAnchorLink,isAnchorLink,$_60qu7r6jducwn73.constant(!1))},readInlineAnchorLocation=function(editor){var isInlineTarget=$_60qu7r6jducwn73.curry($_4m240x32jducwnrf.isInlineTarget,editor),position=CaretPosition$1.fromRangeStart(editor.selection.getRng());return $_681q3b3ijducwnty.readLocation(isInlineTarget,editor.getBody(),position).filter(isInsideAnchor)},insertBrOutsideAnchor=function(editor,location){location.fold($_60qu7r6jducwn73.noop,$_60qu7r6jducwn73.curry(insertBrBefore,editor),$_60qu7r6jducwn73.curry(insertBrAfter,editor),$_60qu7r6jducwn73.noop)},insert=function(editor,evt){var anchorLocation=readInlineAnchorLocation(editor);anchorLocation.isSome()?anchorLocation.each($_60qu7r6jducwn73.curry(insertBrOutsideAnchor,editor)):insertBrAtCaret(editor,evt)},$_6wifbs3wjducwnw6={insert:insert},adt=$_elh5kq3djducwnt6.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),cata=function(subject,onBefore,onOn,onAfter){return subject.fold(onBefore,onOn,onAfter)},getStart=function(situ){return situ.fold($_60qu7r6jducwn73.identity,$_60qu7r6jducwn73.identity,$_60qu7r6jducwn73.identity)},$_acm40u41jducwnzz={before:adt.before,on:adt.on,after:adt.after,cata:cata,getStart:getStart},type$1=$_elh5kq3djducwnt6.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),range$1=$_295afp18jducwni4.immutable("start","soffset","finish","foffset"),exactFromRange=function(simRange){return type$1.exact(simRange.start(),simRange.soffset(),simRange.finish(),simRange.foffset())},getStart$1=function(selection){return selection.match({domRange:function(rng){return $_5s4uzoyjducwngo.fromDom(rng.startContainer)},relative:function(startSitu,finishSitu){return $_acm40u41jducwnzz.getStart(startSitu)},exact:function(start,soffset,finish,foffset){return start}})},getWin=function(selection){var start=getStart$1(selection);return $_f0qt4317jducwnhq.defaultView(start)},$_ckicvm40jducwnzr={domRange:type$1.domRange,relative:type$1.relative,exact:type$1.exact,exactFromRange:exactFromRange,range:range$1,getWin:getWin},browser$3=$_5hshlmmjducwnfr.detect().browser,clamp=function(offset,element){var max=$_47qy15zjducwngt.isText(element)?$_8l99zr2rjducwnq7.get(element).length:$_f0qt4317jducwnhq.children(element).length+1;return offset>max?max:offset<0?0:offset},normalizeRng=function(rng){return $_ckicvm40jducwnzr.range(rng.start(),clamp(rng.soffset(),rng.start()),rng.finish(),clamp(rng.foffset(),rng.finish()))},isOrContains=function(root,elm){return $_4qdq5m1djducwnie.contains(root,elm)||$_4qdq5m1djducwnie.eq(root,elm)},isRngInRoot=function(root){return function(rng){return isOrContains(root,rng.start())&&isOrContains(root,rng.finish())}},shouldStore=function(editor){return editor.inline===!0||browser$3.isIE()},nativeRangeToSelectionRange=function(r){return $_ckicvm40jducwnzr.range($_5s4uzoyjducwngo.fromDom(r.startContainer),r.startOffset,$_5s4uzoyjducwngo.fromDom(r.endContainer),r.endOffset)},readRange=function(win){var selection=win.getSelection();return(selection&&0!==selection.rangeCount?Option.from(selection.getRangeAt(0)):Option.none()).map(nativeRangeToSelectionRange)},getBookmark$2=function(root){var win=$_f0qt4317jducwnhq.defaultView(root);return readRange(win.dom()).filter(isRngInRoot(root))},validate=function(root,bookmark){return Option.from(bookmark).filter(isRngInRoot(root)).map(normalizeRng)},bookmarkToNativeRng=function(bookmark){var rng=document.createRange();return rng.setStart(bookmark.start().dom(),bookmark.soffset()),rng.setEnd(bookmark.finish().dom(),bookmark.foffset()),Option.some(rng)},store=function(editor){var newBookmark=shouldStore(editor)?getBookmark$2($_5s4uzoyjducwngo.fromDom(editor.getBody())):Option.none();editor.bookmark=newBookmark.isSome()?newBookmark:editor.bookmark},storeNative=function(editor,rng){var root=$_5s4uzoyjducwngo.fromDom(editor.getBody()),range=shouldStore(editor)?Option.from(rng):Option.none(),newBookmark=range.map(nativeRangeToSelectionRange).filter(isRngInRoot(root));editor.bookmark=newBookmark.isSome()?newBookmark:editor.bookmark},getRng=function(editor){return(editor.bookmark?editor.bookmark:Option.none()).bind($_60qu7r6jducwn73.curry(validate,$_5s4uzoyjducwngo.fromDom(editor.getBody()))).bind(bookmarkToNativeRng)},restore=function(editor){getRng(editor).each(function(rng){editor.selection.setRng(rng)})},$_exyelv3zjducwnzi={store:store,storeNative:storeNative,readRange:readRange,restore:restore,getRng:getRng,getBookmark:getBookmark$2,validate:validate},indentElement=function(dom,command,useMargin,value,unit,element){if("false"!==dom.getContentEditable(element)&&"LI"!==element.nodeName){var indentStyleName=useMargin?"margin":"padding";if(indentStyleName="TABLE"===element.nodeName?"margin":indentStyleName,indentStyleName+="rtl"===dom.getStyle(element,"direction",!0)?"Right":"Left","outdent"===command){var styleValue=Math.max(0,parseInt(element.style[indentStyleName]||0,10)-value);dom.setStyle(element,indentStyleName,styleValue?styleValue+unit:"")}else{var styleValue=parseInt(element.style[indentStyleName]||0,10)+value+unit;dom.setStyle(element,indentStyleName,styleValue)}}},handle=function(editor,command){var settings=editor.settings,dom=editor.dom,selection=editor.selection,formatter=editor.formatter,indentUnit=/[a-z%]+$/i.exec(settings.indentation)[0],indentValue=parseInt(settings.indentation,10),useMargin=editor.getParam("indent_use_margin",!1);editor.queryCommandState("InsertUnorderedList")||editor.queryCommandState("InsertOrderedList")||(settings.forced_root_block||dom.getParent(selection.getNode(),dom.isBlock)||formatter.apply("div"),$_2dw1bj4jducwn6g.each(selection.getSelectedBlocks(),function(element){return indentElement(dom,command,useMargin,indentValue,indentUnit,element)}))},each$9=$_8i2houjjducwnd2.each,extend$2=$_8i2houjjducwnd2.extend,map$2=$_8i2houjjducwnd2.map,inArray$2=$_8i2houjjducwnd2.inArray,explode$2=$_8i2houjjducwnd2.explode,TRUE=!0,FALSE=!1,nativeEvents=$_8i2houjjducwnd2.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," "),Dispatcher=function(settings){var scope,toggleEvent,self=this,bindings={},returnFalse=function(){return!1},returnTrue=function(){return!0};settings=settings||{},scope=settings.scope||self,toggleEvent=settings.toggleEvent||returnFalse;var fire=function(name,args){var handlers,i,l,callback;if(name=name.toLowerCase(),args=args||{},args.type=name,args.target||(args.target=scope),args.preventDefault||(args.preventDefault=function(){args.isDefaultPrevented=returnTrue},args.stopPropagation=function(){args.isPropagationStopped=returnTrue},args.stopImmediatePropagation=function(){args.isImmediatePropagationStopped=returnTrue},args.isDefaultPrevented=returnFalse,args.isPropagationStopped=returnFalse,args.isImmediatePropagationStopped=returnFalse),settings.beforeFire&&settings.beforeFire(args),handlers=bindings[name])for(i=0,l=handlers.length;i<l;i++){if(callback=handlers[i],callback.once&&off(name,callback.func),args.isImmediatePropagationStopped())return args.stopPropagation(),args;if(callback.func.call(scope,args)===!1)return args.preventDefault(),args}return args},on=function(name,callback,prepend,extra){var handlers,names,i;if(callback===!1&&(callback=returnFalse),callback)for(callback={func:callback},extra&&$_8i2houjjducwnd2.extend(callback,extra),names=name.toLowerCase().split(" "),i=names.length;i--;)name=names[i],handlers=bindings[name],handlers||(handlers=bindings[name]=[],toggleEvent(name,!0)),prepend?handlers.unshift(callback):handlers.push(callback);return self},off=function(name,callback){var i,handlers,bindingName,names,hi;if(name)for(names=name.toLowerCase().split(" "),i=names.length;i--;){if(name=names[i],handlers=bindings[name],!name){for(bindingName in bindings)toggleEvent(bindingName,!1),delete bindings[bindingName];return self}if(handlers){if(callback)for(hi=handlers.length;hi--;)handlers[hi].func===callback&&(handlers=handlers.slice(0,hi).concat(handlers.slice(hi+1)),bindings[name]=handlers);else handlers.length=0;handlers.length||(toggleEvent(name,!1),delete bindings[name])}}else{for(name in bindings)toggleEvent(name,!1);bindings={}}return self},once=function(name,callback,prepend){return on(name,callback,prepend,{once:!0})},has=function(name){return name=name.toLowerCase(),!(!bindings[name]||0===bindings[name].length)};self.fire=fire,self.on=on,self.off=off,self.once=once,self.has=has};Dispatcher.isNative=function(name){return!!nativeEvents[name.toLowerCase()]};var customEventRootDelegates,getEventDispatcher=function(obj){return obj._eventDispatcher||(obj._eventDispatcher=new Dispatcher({scope:obj,toggleEvent:function(name,state){Dispatcher.isNative(name)&&obj.toggleNativeEvent&&obj.toggleNativeEvent(name,state)}})),obj._eventDispatcher},$_5ie1x944jducwo0j={fire:function(name,args,bubble){var self=this;if(self.removed&&"remove"!==name)return args;if(args=getEventDispatcher(self).fire(name,args,bubble),bubble!==!1&&self.parent)for(var parent_1=self.parent();parent_1&&!args.isPropagationStopped();)parent_1.fire(name,args,!1),parent_1=parent_1.parent();return args},on:function(name,callback,prepend){return getEventDispatcher(this).on(name,callback,prepend)},off:function(name,callback){return getEventDispatcher(this).off(name,callback)},once:function(name,callback){return getEventDispatcher(this).once(name,callback)},hasEventListeners:function(name){return getEventDispatcher(this).has(name)}},DOM$1=DOMUtils.DOM,getEventTarget=function(editor,eventName){return"selectionchange"===eventName?editor.getDoc():!editor.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(eventName)?editor.getDoc().documentElement:editor.settings.event_root?(editor.eventRoot||(editor.eventRoot=DOM$1.select(editor.settings.event_root)[0]),editor.eventRoot):editor.getBody()},bindEventDelegate=function(editor,eventName){var eventRootElm,delegate,isListening=function(editor){return!editor.hidden&&!editor.readonly};if(editor.delegates||(editor.delegates={}),!editor.delegates[eventName]&&!editor.removed)if(eventRootElm=getEventTarget(editor,eventName),editor.settings.event_root){if(customEventRootDelegates||(customEventRootDelegates={},editor.editorManager.on("removeEditor",function(){var name;if(!editor.editorManager.activeEditor&&customEventRootDelegates){for(name in customEventRootDelegates)editor.dom.unbind(getEventTarget(editor,name));customEventRootDelegates=null}})),customEventRootDelegates[eventName])return;delegate=function(e){for(var target=e.target,editors=editor.editorManager.get(),i=editors.length;i--;){var body=editors[i].getBody();(body===target||DOM$1.isChildOf(target,body))&&isListening(editors[i])&&editors[i].fire(eventName,e)}},customEventRootDelegates[eventName]=delegate,DOM$1.bind(eventRootElm,eventName,delegate)}else delegate=function(e){isListening(editor)&&editor.fire(eventName,e)},DOM$1.bind(eventRootElm,eventName,delegate),editor.delegates[eventName]=delegate},EditorObservable={bindPendingEventDelegates:function(){var self=this;$_8i2houjjducwnd2.each(self._pendingNativeEvents,function(name){bindEventDelegate(self,name)})},toggleNativeEvent:function(name,state){var self=this;"focus"!==name&&"blur"!==name&&(state?self.initialized?bindEventDelegate(self,name):self._pendingNativeEvents?self._pendingNativeEvents.push(name):self._pendingNativeEvents=[name]:self.initialized&&(self.dom.unbind(getEventTarget(self,name),name,self.delegates[name]),delete self.delegates[name]))},unbindAllNativeEvents:function(){var name,self=this,body=self.getBody(),dom=self.dom;if(self.delegates){for(name in self.delegates)self.dom.unbind(getEventTarget(self,name),name,self.delegates[name]);delete self.delegates}!self.inline&&body&&dom&&(body.onload=null,dom.unbind(self.getWin()),dom.unbind(self.getDoc())),dom&&(dom.unbind(body),dom.unbind(self.getContainer()))}};EditorObservable=$_8i2houjjducwnd2.extend({},$_5ie1x944jducwo0j,EditorObservable);var VDirection,EditorObservable$1=EditorObservable,setEditorCommandState=function(editor,cmd,state){try{editor.getDoc().execCommand(cmd,!1,state)}catch(ex){}},clickBlocker=function(editor){var target,handler;return target=editor.getBody(),handler=function(e){editor.dom.getParents(e.target,"a").length>0&&e.preventDefault()},editor.dom.bind(target,"click",handler),{unbind:function(){editor.dom.unbind(target,"click",handler)}}},toggleReadOnly=function(editor,state){editor._clickBlocker&&(editor._clickBlocker.unbind(),editor._clickBlocker=null),state?(editor._clickBlocker=clickBlocker(editor),editor.selection.controlSelection.hideResizeRect(),editor.readonly=!0,editor.getBody().contentEditable=!1):(editor.readonly=!1,editor.getBody().contentEditable=!0,setEditorCommandState(editor,"StyleWithCSS",!1),setEditorCommandState(editor,"enableInlineTableEditing",!1),setEditorCommandState(editor,"enableObjectResizing",!1),editor.focus(),editor.nodeChanged())},setMode=function(editor,mode){var currentMode=editor.readonly?"readonly":"design";mode!==currentMode&&(editor.initialized?toggleReadOnly(editor,"readonly"===mode):editor.on("init",function(){toggleReadOnly(editor,"readonly"===mode)}),editor.fire("SwitchMode",{mode:mode}))},$_awagyr46jducwo0r={setMode:setMode},each$10=$_8i2houjjducwnd2.each,explode$3=$_8i2houjjducwnd2.explode,keyCodeLookup={f9:120,f10:121,f11:122},modifierNames=$_8i2houjjducwnd2.makeMap("alt,ctrl,shift,meta,access"),any$1=function(predicate){return $_3et3di30jducwnr0.first(predicate).isSome()},ancestor$3=function(scope,predicate,isRoot){return $_3et3di30jducwnr0.ancestor(scope,predicate,isRoot).isSome()},closest$3=function(scope,predicate,isRoot){return $_3et3di30jducwnr0.closest(scope,predicate,isRoot).isSome()},sibling$4=function(scope,predicate){return $_3et3di30jducwnr0.sibling(scope,predicate).isSome()},child$4=function(scope,predicate){return $_3et3di30jducwnr0.child(scope,predicate).isSome()},descendant$3=function(scope,predicate){return $_3et3di30jducwnr0.descendant(scope,predicate).isSome()},$_g5pgou4ajducwo19={any:any$1,ancestor:ancestor$3,closest:closest$3,sibling:sibling$4,child:child$4,descendant:descendant$3},focus=function(element){element.dom().focus()},blur=function(element){element.dom().blur()},hasFocus$1=function(element){var doc=$_f0qt4317jducwnhq.owner(element).dom();return element.dom()===doc.activeElement},active=function(_doc){var doc=void 0!==_doc?_doc.dom():document;return Option.from(doc.activeElement).map($_5s4uzoyjducwngo.fromDom)},focusInside=function(element){var doc=$_f0qt4317jducwnhq.owner(element);active(doc).filter(function(a){return $_g5pgou4ajducwo19.closest(a,$_60qu7r6jducwn73.curry($_4qdq5m1djducwnie.eq,element))}).fold(function(){focus(element)},$_60qu7r6jducwn73.noop)},search=function(element){return active($_f0qt4317jducwnhq.owner(element)).filter(function(e){return element.dom().contains(e.dom())})},$_br1qde49jducwo13={hasFocus:hasFocus$1,focus:focus,blur:blur,active:active,search:search,focusInside:focusInside},getContentEditableHost=function(editor,node){return editor.dom.getParent(node,function(node){return"true"===editor.dom.getContentEditable(node)})},getCollapsedNode=function(rng){return rng.collapsed?Option.from(getNode(rng.startContainer,rng.startOffset)).map($_5s4uzoyjducwngo.fromDom):Option.none()},getFocusInElement=function(root,rng){return getCollapsedNode(rng).bind(function(node){return isTableSection(node)?Option.some(node):$_4qdq5m1djducwnie.contains(root,node)===!1?Option.some(root):Option.none()})},normalizeSelection=function(editor,rng){getFocusInElement($_5s4uzoyjducwngo.fromDom(editor.getBody()),rng).bind(function(elm){return $_dq07eg2bjducwno6.firstPositionIn(elm.dom())}).fold(function(){return editor.selection.normalize()},function(caretPos){return editor.selection.setRng(caretPos.toRange())})},focusBody=function(body){if(body.setActive)try{body.setActive()}catch(ex){body.focus()}else body.focus()},hasElementFocus=function(elm){
return $_br1qde49jducwo13.hasFocus(elm)||$_br1qde49jducwo13.search(elm).isSome()},hasIframeFocus=function(editor){return editor.iframeElement&&$_br1qde49jducwo13.hasFocus($_5s4uzoyjducwngo.fromDom(editor.iframeElement))},hasInlineFocus=function(editor){var rawBody=editor.getBody();return rawBody&&hasElementFocus($_5s4uzoyjducwngo.fromDom(rawBody))},hasFocus$2=function(editor){return editor.inline?hasInlineFocus(editor):hasIframeFocus(editor)},focusEditor=function(editor){var contentEditableHost,selection=editor.selection,contentEditable=editor.settings.content_editable,body=editor.getBody(),rng=selection.getRng();if(editor.quirks.refreshContentEditable(),contentEditableHost=getContentEditableHost(editor,selection.getNode()),editor.$.contains(body,contentEditableHost))return focusBody(contentEditableHost),normalizeSelection(editor,rng),void activateEditor(editor);void 0!==editor.bookmark&&hasFocus$2(editor)===!1&&$_exyelv3zjducwnzi.getRng(editor).each(function(bookmarkRng){editor.selection.setRng(bookmarkRng),rng=bookmarkRng}),contentEditable||($_cum1kc9jducwn99.opera||focusBody(body),editor.getWin().focus()),($_cum1kc9jducwn99.gecko||contentEditable)&&(focusBody(body),normalizeSelection(editor,rng)),activateEditor(editor)},activateEditor=function(editor){editor.editorManager.setActive(editor)},focus$1=function(editor,skipFocus){editor.removed||(skipFocus?activateEditor(editor):focusEditor(editor))},$_egbtag48jducwo0y={focus:focus$1,hasFocus:hasFocus$2},getProp=function(propName,elm){return elm.dom()[propName]},getComputedSizeProp=function(propName,elm){return parseInt($_6dooji11jducwngx.get(elm,propName),10)},getClientWidth=$_60qu7r6jducwn73.curry(getProp,"clientWidth"),getClientHeight=$_60qu7r6jducwn73.curry(getProp,"clientHeight"),getMarginTop=$_60qu7r6jducwn73.curry(getComputedSizeProp,"margin-top"),getMarginLeft=$_60qu7r6jducwn73.curry(getComputedSizeProp,"margin-left"),getBoundingClientRect$1=function(elm){return elm.dom().getBoundingClientRect()},isInsideElementContentArea=function(bodyElm,clientX,clientY){var clientWidth=getClientWidth(bodyElm),clientHeight=getClientHeight(bodyElm);return clientX>=0&&clientY>=0&&clientX<=clientWidth&&clientY<=clientHeight},transpose=function(inline,elm,clientX,clientY){var clientRect=getBoundingClientRect$1(elm);return{x:clientX-(inline?clientRect.left+elm.dom().clientLeft+getMarginLeft(elm):0),y:clientY-(inline?clientRect.top+elm.dom().clientTop+getMarginTop(elm):0)}},isXYInContentArea=function(editor,clientX,clientY){var bodyElm=$_5s4uzoyjducwngo.fromDom(editor.getBody()),targetElm=editor.inline?bodyElm:$_f0qt4317jducwnhq.documentElement(bodyElm),transposedPoint=transpose(editor.inline,targetElm,clientX,clientY);return isInsideElementContentArea(targetElm,transposedPoint.x,transposedPoint.y)},fromDomSafe=function(node){return Option.from(node).map($_5s4uzoyjducwngo.fromDom)},isEditorAttachedToDom=function(editor){var rawContainer=editor.inline?editor.getBody():editor.getContentAreaContainer();return fromDomSafe(rawContainer).map(function(container){return $_4qdq5m1djducwnie.contains($_f0qt4317jducwnhq.owner(container),container)}).getOr(!1)},$_ahd3ne4djducwo1z={isXYInContentArea:isXYInContentArea,isEditorAttachedToDom:isEditorAttachedToDom},PluginManager=AddOnManager.PluginManager,resolvePluginName=function(targetUrl,suffix){for(var name_1 in PluginManager.urls){if(PluginManager.urls[name_1]+"/plugin"+suffix+".js"===targetUrl)return name_1}return null},pluginUrlToMessage=function(editor,url){var plugin=resolvePluginName(url,editor.suffix);return plugin?"Failed to load plugin: "+plugin+" from url "+url:"Failed to load plugin url: "+url},displayNotification=function(editor,message){editor.notificationManager.open({type:"error",text:message})},displayError=function(editor,message){editor._skinLoaded?displayNotification(editor,message):editor.on("SkinLoaded",function(){displayNotification(editor,message)})},uploadError=function(editor,message){displayError(editor,"Failed to upload image: "+message)},pluginLoadError=function(editor,url){displayError(editor,pluginUrlToMessage(editor,url))},initError=function(message){for(var x=[],_i=1;_i<arguments.length;_i++)x[_i-1]=arguments[_i];var console=window.console;console&&(console.error?console.error.apply(console,arguments):console.log.apply(console,arguments))},$_9erk7k4hjducwo2e={pluginLoadError:pluginLoadError,uploadError:uploadError,displayError:displayError,initError:initError},PluginManager$1=AddOnManager.PluginManager,ThemeManager=AddOnManager.ThemeManager,requestAnimationFrame$1=function(callback){$_850zr7bjducwn9g.getOrDie("requestAnimationFrame")(callback)},atob=function(base64){return $_850zr7bjducwn9g.getOrDie("atob")(base64)},$_ap55c04ujducwo3z={atob:atob,requestAnimationFrame:requestAnimationFrame$1},blobUriToBlob=function(url){return new promiseObj(function(resolve,reject){var rejectWithError=function(){reject("Cannot convert "+url+" to Blob. Resource might not exist or is inaccessible.")};try{var xhr=new XMLHttpRequest;xhr.open("GET",url,!0),xhr.responseType="blob",xhr.onload=function(){200===this.status?resolve(this.response):rejectWithError()},xhr.onerror=rejectWithError,xhr.send()}catch(ex){rejectWithError()}})},parseDataUri=function(uri){var type,matches;return uri=decodeURIComponent(uri).split(","),matches=/data:([^;]+)/.exec(uri[0]),matches&&(type=matches[1]),{type:type,data:uri[1]}},dataUriToBlob=function(uri){return new promiseObj(function(resolve){var str,arr,i;uri=parseDataUri(uri);try{str=$_ap55c04ujducwo3z.atob(uri.data)}catch(e){return void resolve(new Blob([]))}for(arr=new Uint8Array(str.length),i=0;i<arr.length;i++)arr[i]=str.charCodeAt(i);resolve(new Blob([arr],{type:uri.type}))})},uriToBlob=function(url){return 0===url.indexOf("blob:")?blobUriToBlob(url):0===url.indexOf("data:")?dataUriToBlob(url):null},blobToDataUri=function(blob){return new promiseObj(function(resolve){var reader=new FileReader;reader.onloadend=function(){resolve(reader.result)},reader.readAsDataURL(blob)})},$_1ywx9h4qjducwo3p={uriToBlob:uriToBlob,blobToDataUri:blobToDataUri,parseDataUri:parseDataUri},count=0,uniqueId=function(prefix){return(prefix||"blobid")+count++},imageToBlobInfo=function(blobCache,img,resolve,reject){var base64,blobInfo;if(0===img.src.indexOf("blob:"))return blobInfo=blobCache.getByUri(img.src),void(blobInfo?resolve({image:img,blobInfo:blobInfo}):$_1ywx9h4qjducwo3p.uriToBlob(img.src).then(function(blob){$_1ywx9h4qjducwo3p.blobToDataUri(blob).then(function(dataUri){base64=$_1ywx9h4qjducwo3p.parseDataUri(dataUri).data,blobInfo=blobCache.create(uniqueId(),blob,base64),blobCache.add(blobInfo),resolve({image:img,blobInfo:blobInfo})})},function(err){reject(err)}));base64=$_1ywx9h4qjducwo3p.parseDataUri(img.src).data,blobInfo=blobCache.findFirst(function(cachedBlobInfo){return cachedBlobInfo.base64()===base64}),blobInfo?resolve({image:img,blobInfo:blobInfo}):$_1ywx9h4qjducwo3p.uriToBlob(img.src).then(function(blob){blobInfo=blobCache.create(uniqueId(),blob,base64),blobCache.add(blobInfo),resolve({image:img,blobInfo:blobInfo})},function(err){reject(err)})},getAllImages=function(elm){return elm?elm.getElementsByTagName("img"):[]},count$1=0,seed=function(){var rnd=function(){return Math.round(4294967295*Math.random()).toString(36)};return"s"+(new Date).getTime().toString(36)+rnd()+rnd()+rnd()},uuid=function(prefix){return prefix+count$1+++seed()},$_48t1mg4wjducwo4b={uuid:uuid},isBlockElement=function(blockElements,node){return blockElements.hasOwnProperty(node.nodeName)},isValidTarget=function(blockElements,node){return!!$_fj238m1qjducwnjm.isText(node)||!!$_fj238m1qjducwnjm.isElement(node)&&(!isBlockElement(blockElements,node)&&!$_dcl0u12jjducwnp0.isBookmarkNode(node))},hasBlockParent=function(blockElements,root,node){return $_2dw1bj4jducwn6g.exists($_b22jto39jducwnsg.parents($_5s4uzoyjducwngo.fromDom(node),$_5s4uzoyjducwngo.fromDom(root)),function(elm){return isBlockElement(blockElements,elm.dom())})},shouldRemoveTextNode=function(blockElements,node){if($_fj238m1qjducwnjm.isText(node)){if(0===node.nodeValue.length)return!0;if(/^\s+$/.test(node.nodeValue)&&(!node.nextSibling||isBlockElement(blockElements,node.nextSibling)))return!0}return!1},addRootBlocks=function(editor){var rng,startContainer,startOffset,endContainer,endOffset,rootBlockNode,tempNode,wrapped,restoreSelection,rootNodeName,forcedRootBlock,settings=editor.settings,dom=editor.dom,selection=editor.selection,schema=editor.schema,blockElements=schema.getBlockElements(),node=selection.getStart(),rootNode=editor.getBody();if(forcedRootBlock=settings.forced_root_block,node&&$_fj238m1qjducwnjm.isElement(node)&&forcedRootBlock&&(rootNodeName=rootNode.nodeName.toLowerCase(),schema.isValidChild(rootNodeName,forcedRootBlock.toLowerCase())&&!hasBlockParent(blockElements,rootNode,node))){for(rng=selection.getRng(),startContainer=rng.startContainer,startOffset=rng.startOffset,endContainer=rng.endContainer,endOffset=rng.endOffset,restoreSelection=$_egbtag48jducwo0y.hasFocus(editor),node=rootNode.firstChild;node;)if(isValidTarget(blockElements,node)){if(shouldRemoveTextNode(blockElements,node)){tempNode=node,node=node.nextSibling,dom.remove(tempNode);continue}rootBlockNode||(rootBlockNode=dom.create(forcedRootBlock,editor.settings.forced_root_block_attrs),node.parentNode.insertBefore(rootBlockNode,node),wrapped=!0),tempNode=node,node=node.nextSibling,rootBlockNode.appendChild(tempNode)}else rootBlockNode=null,node=node.nextSibling;wrapped&&restoreSelection&&(rng.setStart(startContainer,startOffset),rng.setEnd(endContainer,endOffset),selection.setRng(rng),editor.nodeChanged())}},setup$1=function(editor){editor.settings.forced_root_block&&editor.on("NodeChange",$_60qu7r6jducwn73.curry(addRootBlocks,editor))},$_eu4mtv4yjducwo4f={setup:setup$1},getAbsolutePosition=function(elm){var doc,docElem,win,clientRect;return clientRect=elm.getBoundingClientRect(),doc=elm.ownerDocument,docElem=doc.documentElement,win=doc.defaultView,{top:clientRect.top+win.pageYOffset-docElem.clientTop,left:clientRect.left+win.pageXOffset-docElem.clientLeft}},getBodyPosition=function(editor){return editor.inline?getAbsolutePosition(editor.getBody()):{left:0,top:0}},getScrollPosition=function(editor){var body=editor.getBody();return editor.inline?{left:body.scrollLeft,top:body.scrollTop}:{left:0,top:0}},getBodyScroll=function(editor){var body=editor.getBody(),docElm=editor.getDoc().documentElement,inlineScroll={left:body.scrollLeft,top:body.scrollTop},iframeScroll={left:body.scrollLeft||docElm.scrollLeft,top:body.scrollTop||docElm.scrollTop};return editor.inline?inlineScroll:iframeScroll},getMousePosition=function(editor,event){if(event.target.ownerDocument!==editor.getDoc()){var iframePosition=getAbsolutePosition(editor.getContentAreaContainer()),scrollPosition=getBodyScroll(editor);return{left:event.pageX-iframePosition.left+scrollPosition.left,top:event.pageY-iframePosition.top+scrollPosition.top}}return{left:event.pageX,top:event.pageY}},calculatePosition=function(bodyPosition,scrollPosition,mousePosition){return{pageX:mousePosition.left-bodyPosition.left+scrollPosition.left,pageY:mousePosition.top-bodyPosition.top+scrollPosition.top}},calc=function(editor,event){return calculatePosition(getBodyPosition(editor),getScrollPosition(editor),getMousePosition(editor,event))},$_bi2rbv52jducwo5n={calc:calc},isContentEditableFalse$7=$_fj238m1qjducwnjm.isContentEditableFalse,isContentEditableTrue$4=$_fj238m1qjducwnjm.isContentEditableTrue,isDraggable=function(rootElm,elm){return isContentEditableFalse$7(elm)&&elm!==rootElm},isValidDropTarget=function(editor,targetElement,dragElement){return targetElement!==dragElement&&!editor.dom.isChildOf(targetElement,dragElement)&&!isContentEditableFalse$7(targetElement)},cloneElement=function(elm){var cloneElm=elm.cloneNode(!0);return cloneElm.removeAttribute("data-mce-selected"),cloneElm},createGhost=function(editor,elm,width,height){var clonedElm=elm.cloneNode(!0);editor.dom.setStyles(clonedElm,{width:width,height:height}),editor.dom.setAttrib(clonedElm,"data-mce-selected",null);var ghostElm=editor.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return editor.dom.setStyles(ghostElm,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:width,height:height}),editor.dom.setStyles(clonedElm,{margin:0,boxSizing:"border-box"}),ghostElm.appendChild(clonedElm),ghostElm},appendGhostToBody=function(ghostElm,bodyElm){ghostElm.parentNode!==bodyElm&&bodyElm.appendChild(ghostElm)},moveGhost=function(ghostElm,position,width,height,maxX,maxY){var overflowX=0,overflowY=0;ghostElm.style.left=position.pageX+"px",ghostElm.style.top=position.pageY+"px",position.pageX+width>maxX&&(overflowX=position.pageX+width-maxX),position.pageY+height>maxY&&(overflowY=position.pageY+height-maxY),ghostElm.style.width=width-overflowX+"px",ghostElm.style.height=height-overflowY+"px"},removeElement=function(elm){elm&&elm.parentNode&&elm.parentNode.removeChild(elm)},isLeftMouseButtonPressed=function(e){return 0===e.button},hasDraggableElement=function(state){return state.element},applyRelPos=function(state,position){return{pageX:position.pageX-state.relX,pageY:position.pageY+5}},start$1=function(state,editor){return function(e){if(isLeftMouseButtonPressed(e)){var ceElm=$_e6e6g1kjducwnfd.find(editor.dom.getParents(e.target),$_6183wb25jducwnn2.or(isContentEditableFalse$7,isContentEditableTrue$4));if(isDraggable(editor.getBody(),ceElm)){var elmPos=editor.dom.getPos(ceElm),bodyElm=editor.getBody(),docElm=editor.getDoc().documentElement;state.element=ceElm,state.screenX=e.screenX,state.screenY=e.screenY,state.maxX=(editor.inline?bodyElm.scrollWidth:docElm.offsetWidth)-2,state.maxY=(editor.inline?bodyElm.scrollHeight:docElm.offsetHeight)-2,state.relX=e.pageX-elmPos.x,state.relY=e.pageY-elmPos.y,state.width=ceElm.offsetWidth,state.height=ceElm.offsetHeight,state.ghost=createGhost(editor,ceElm,state.width,state.height)}}}},move$1=function(state,editor){var throttledPlaceCaretAt=$_83mf8ygjducwnbc.throttle(function(clientX,clientY){editor._selectionOverrides.hideFakeCaret(),editor.selection.placeCaretAt(clientX,clientY)},0);return function(e){var movement=Math.max(Math.abs(e.screenX-state.screenX),Math.abs(e.screenY-state.screenY));if(hasDraggableElement(state)&&!state.dragging&&movement>10){if(editor.fire("dragstart",{target:state.element}).isDefaultPrevented())return;state.dragging=!0,editor.focus()}if(state.dragging){var targetPos=applyRelPos(state,$_bi2rbv52jducwo5n.calc(editor,e));appendGhostToBody(state.ghost,editor.getBody()),moveGhost(state.ghost,targetPos,state.width,state.height,state.maxX,state.maxY),throttledPlaceCaretAt(e.clientX,e.clientY)}}},getRawTarget=function(selection){var rng=selection.getSel().getRangeAt(0),startContainer=rng.startContainer;return 3===startContainer.nodeType?startContainer.parentNode:startContainer},drop=function(state,editor){return function(e){if(state.dragging&&isValidDropTarget(editor,getRawTarget(editor.selection),state.element)){var targetClone_1=cloneElement(state.element),args=editor.fire("drop",{targetClone:targetClone_1,clientX:e.clientX,clientY:e.clientY});args.isDefaultPrevented()||(targetClone_1=args.targetClone,editor.undoManager.transact(function(){removeElement(state.element),editor.insertContent(editor.dom.getOuterHTML(targetClone_1)),editor._selectionOverrides.hideFakeCaret()}))}removeDragState(state)}},stop=function(state,editor){return function(){removeDragState(state),state.dragging&&editor.fire("dragend")}},removeDragState=function(state){state.dragging=!1,state.element=null,removeElement(state.ghost)},bindFakeDragEvents=function(editor){var pageDom,dragStartHandler,dragHandler,dropHandler,dragEndHandler,rootDocument,state={};pageDom=DOMUtils.DOM,rootDocument=document,dragStartHandler=start$1(state,editor),dragHandler=move$1(state,editor),dropHandler=drop(state,editor),dragEndHandler=stop(state,editor),editor.on("mousedown",dragStartHandler),editor.on("mousemove",dragHandler),editor.on("mouseup",dropHandler),pageDom.bind(rootDocument,"mousemove",dragHandler),pageDom.bind(rootDocument,"mouseup",dragEndHandler),editor.on("remove",function(){pageDom.unbind(rootDocument,"mousemove",dragHandler),pageDom.unbind(rootDocument,"mouseup",dragEndHandler)})},blockIeDrop=function(editor){editor.on("drop",function(e){var realTarget=void 0!==e.clientX?editor.getDoc().elementFromPoint(e.clientX,e.clientY):null;(isContentEditableFalse$7(realTarget)||isContentEditableFalse$7(editor.dom.getContentEditableParent(realTarget)))&&e.preventDefault()})},init=function(editor){bindFakeDragEvents(editor),blockIeDrop(editor)},$_56sftn51jducwo5f={init:init},getNodeClientRects=function(node){var toArrayWithNode=function(clientRects){return $_e6e6g1kjducwnfd.map(clientRects,function(clientRect){return clientRect=clone$1(clientRect),clientRect.node=node,clientRect})};if($_fj238m1qjducwnjm.isElement(node))return toArrayWithNode(node.getClientRects());if($_fj238m1qjducwnjm.isText(node)){var rng=node.ownerDocument.createRange();return rng.setStart(node,0),rng.setEnd(node,node.data.length),toArrayWithNode(rng.getClientRects())}},getClientRects=function(node){return $_e6e6g1kjducwnfd.reduce(node,function(result,node){return result.concat(getNodeClientRects(node))},[])};!function(VDirection){VDirection[VDirection.Up=-1]="Up",VDirection[VDirection.Down=1]="Down"}(VDirection||(VDirection={}));var findUntil=function(direction,root,predicateFn,node){for(;node=findNode(node,direction,isEditableCaretCandidate,root);)if(predicateFn(node))return},walkUntil=function(direction,isAboveFn,isBeflowFn,root,predicateFn,caretPosition){var node,targetClientRect,line=0,result=[],add=function(node){var i,clientRect,clientRects;for(clientRects=getClientRects([node]),direction===-1&&(clientRects=clientRects.reverse()),i=0;i<clientRects.length;i++)if(clientRect=clientRects[i],!isBeflowFn(clientRect,targetClientRect)){if(result.length>0&&isAboveFn(clientRect,$_e6e6g1kjducwnfd.last(result))&&line++,clientRect.line=line,predicateFn(clientRect))return!0;result.push(clientRect)}};return(targetClientRect=$_e6e6g1kjducwnfd.last(caretPosition.getClientRects()))?(node=caretPosition.getNode(),add(node),findUntil(direction,root,add,node),result):result},aboveLineNumber=function(lineNumber,clientRect){return clientRect.line>lineNumber},isLineNumber=function(lineNumber,clientRect){return clientRect.line===lineNumber},upUntil=$_60qu7r6jducwn73.curry(walkUntil,VDirection.Up,isAbove,isBelow),downUntil=$_60qu7r6jducwn73.curry(walkUntil,VDirection.Down,isBelow,isAbove),positionsUntil=function(direction,root,predicateFn,node){var walkFn,isBelowFn,isAboveFn,caretPosition,clientRect,targetClientRect,caretWalker=CaretWalker(root),result=[],line=0,getClientRect=function(caretPosition){return $_e6e6g1kjducwnfd.last(caretPosition.getClientRects())};1===direction?(walkFn=caretWalker.next,isBelowFn=isBelow,isAboveFn=isAbove,caretPosition=CaretPosition$1.after(node)):(walkFn=caretWalker.prev,isBelowFn=isAbove,isAboveFn=isBelow,caretPosition=CaretPosition$1.before(node)),targetClientRect=getClientRect(caretPosition);do{if(caretPosition.isVisible()&&(clientRect=getClientRect(caretPosition),!isAboveFn(clientRect,targetClientRect))){if(result.length>0&&isBelowFn(clientRect,$_e6e6g1kjducwnfd.last(result))&&line++,clientRect=clone$1(clientRect),clientRect.position=caretPosition,clientRect.line=line,predicateFn(clientRect))return result;result.push(clientRect)}}while(caretPosition=walkFn(caretPosition));return result},isAboveLine=function(lineNumber){return function(clientRect){return aboveLineNumber(lineNumber,clientRect)}},isLine=function(lineNumber){return function(clientRect){return isLineNumber(lineNumber,clientRect)}},isContentEditableFalse$8=$_fj238m1qjducwnjm.isContentEditableFalse,findNode$1=findNode,distanceToRectLeft=function(clientRect,clientX){return Math.abs(clientRect.left-clientX)},distanceToRectRight=function(clientRect,clientX){return Math.abs(clientRect.right-clientX)},isInside=function(clientX,clientRect){return clientX>=clientRect.left&&clientX<=clientRect.right},findClosestClientRect=function(clientRects,clientX){return $_e6e6g1kjducwnfd.reduce(clientRects,function(oldClientRect,clientRect){var oldDistance,newDistance;return oldDistance=Math.min(distanceToRectLeft(oldClientRect,clientX),distanceToRectRight(oldClientRect,clientX)),newDistance=Math.min(distanceToRectLeft(clientRect,clientX),distanceToRectRight(clientRect,clientX)),isInside(clientX,clientRect)?clientRect:isInside(clientX,oldClientRect)?oldClientRect:newDistance===oldDistance&&isContentEditableFalse$8(clientRect.node)?clientRect:newDistance<oldDistance?clientRect:oldClientRect})},walkUntil$1=function(direction,root,predicateFn,node){for(;node=findNode$1(node,direction,isEditableCaretCandidate,root);)if(predicateFn(node))return},findLineNodeRects=function(root,targetNodeRect){var clientRects=[],collect=function(checkPosFn,node){var lineRects;return lineRects=$_e6e6g1kjducwnfd.filter(getClientRects([node]),function(clientRect){return!checkPosFn(clientRect,targetNodeRect)}),clientRects=clientRects.concat(lineRects),0===lineRects.length};return clientRects.push(targetNodeRect),walkUntil$1(VDirection.Up,root,$_60qu7r6jducwn73.curry(collect,isAbove),targetNodeRect.node),walkUntil$1(VDirection.Down,root,$_60qu7r6jducwn73.curry(collect,isBelow),targetNodeRect.node),clientRects},getFakeCaretTargets=function(root){return $_e6e6g1kjducwnfd.filter($_e6e6g1kjducwnfd.toArray(root.getElementsByTagName("*")),isFakeCaretTarget)},caretInfo=function(clientRect,clientX){return{node:clientRect.node,before:distanceToRectLeft(clientRect,clientX)<distanceToRectRight(clientRect,clientX)}},closestCaret=function(root,clientX,clientY){var closestNodeRect,contentEditableFalseNodeRects=getClientRects(getFakeCaretTargets(root)),targetNodeRects=$_e6e6g1kjducwnfd.filter(contentEditableFalseNodeRects,function(rect){return clientY>=rect.top&&clientY<=rect.bottom});return closestNodeRect=findClosestClientRect(targetNodeRects,clientX),closestNodeRect&&(closestNodeRect=findClosestClientRect(findLineNodeRects(root,closestNodeRect),clientX))&&isFakeCaretTarget(closestNodeRect.node)?caretInfo(closestNodeRect,clientX):null},isXYWithinRange=function(clientX,clientY,range){return!range.collapsed&&$_2dw1bj4jducwn6g.foldl(range.getClientRects(),function(state,rect){return state||containsXY(rect,clientX,clientY)},!1)},$_cy7fd256jducwo68={isXYWithinRange:isXYWithinRange},adaptable=function(fn,rate){var timer=null,args=null;return{cancel:function(){null!==timer&&(clearTimeout(timer),timer=null,args=null)},throttle:function(){args=arguments,null===timer&&(timer=setTimeout(function(){fn.apply(null,args),timer=null,args=null},rate))}}},first$3=function(fn,rate){var timer=null;return{cancel:function(){null!==timer&&(clearTimeout(timer),timer=null)},throttle:function(){var args=arguments;null===timer&&(timer=setTimeout(function(){fn.apply(null,args),timer=null,args=null},rate))}}},last$3=function(fn,rate){var timer=null;return{cancel:function(){null!==timer&&(clearTimeout(timer),timer=null)},throttle:function(){var args=arguments;null!==timer&&clearTimeout(timer),timer=setTimeout(function(){fn.apply(null,args),timer=null,args=null},rate)}}},$_15mtnw58jducwo6f={adaptable:adaptable,first:first$3,last:last$3},setup$2=function(editor){var renderFocusCaret=$_15mtnw58jducwo6f.first(function(){if(!editor.removed){if(editor.selection.getRng().collapsed){var caretRange=renderRangeCaret(editor,editor.selection.getRng());editor.selection.setRng(caretRange)}}},0);editor.on("focus",function(){renderFocusCaret.throttle()}),editor.on("blur",function(){renderFocusCaret.cancel()})},$_vc72057jducwo6c={setup:setup$2},$_1xm2zi59jducwo6l={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(e){return $_cum1kc9jducwn99.mac?e.metaKey:e.ctrlKey&&!e.altKey}},isContentEditableTrue$5=$_fj238m1qjducwnjm.isContentEditableTrue,isContentEditableFalse$9=$_fj238m1qjducwnjm.isContentEditableFalse,isAfterContentEditableFalse$1=isAfterContentEditableFalse,isBeforeContentEditableFalse$1=isBeforeContentEditableFalse,SelectionOverrides=function(editor){var selectedContentEditableNode,isBlock=function(node){return editor.dom.isBlock(node)},rootNode=editor.getBody(),fakeCaret=FakeCaret(editor.getBody(),isBlock),realSelectionId="sel-"+editor.dom.uniqueId(),isFakeSelectionElement=function(elm){return editor.dom.hasClass(elm,"mce-offscreen-selection")},getRealSelectionElement=function(){var container=editor.dom.get(realSelectionId);return container?container.getElementsByTagName("*")[0]:container},setRange=function(range){range&&editor.selection.setRng(range)},getRange=function(){return editor.selection.getRng()},scrollIntoView=function(node,alignToTop){editor.selection.scrollIntoView(node,alignToTop)},showCaret$$1=function(direction,node,before){var e;return e=editor.fire("ShowCaret",{target:node,direction:direction,before:before}),e.isDefaultPrevented()?null:(scrollIntoView(node,direction===-1),fakeCaret.show(before,node))},getNormalizedRangeEndPoint$$1=function(direction,range){return range=normalizeRange(direction,rootNode,range),direction===-1?CaretPosition$1.fromRangeStart(range):CaretPosition$1.fromRangeEnd(range)},showBlockCaretContainer=function(blockCaretContainer){blockCaretContainer.hasAttribute("data-mce-caret")&&(showCaretContainerBlock(blockCaretContainer),setRange(getRange()),scrollIntoView(blockCaretContainer[0]))},isWithinCaretContainer=function(node){return isCaretContainer(node)||startsWithCaretContainer(node)||endsWithCaretContainer(node)},isRangeInCaretContainer=function(rng){return isWithinCaretContainer(rng.startContainer)||isWithinCaretContainer(rng.endContainer)},setContentEditableSelection=function(range,forward){var node,$realSelectionContainer,sel,startContainer,startOffset,endOffset,e,caretPosition,targetClone,origTargetClone,$=editor.$,dom=editor.dom;if(!range)return null;if(range.collapsed){if(!isRangeInCaretContainer(range))if(forward===!1){if(caretPosition=getNormalizedRangeEndPoint$$1(-1,range),isFakeCaretTarget(caretPosition.getNode(!0)))return showCaret$$1(-1,caretPosition.getNode(!0),!1);if(isFakeCaretTarget(caretPosition.getNode()))return showCaret$$1(-1,caretPosition.getNode(),!caretPosition.isAtEnd())}else{if(caretPosition=getNormalizedRangeEndPoint$$1(1,range),isFakeCaretTarget(caretPosition.getNode()))return showCaret$$1(1,caretPosition.getNode(),!caretPosition.isAtEnd());if(isFakeCaretTarget(caretPosition.getNode(!0)))return showCaret$$1(1,caretPosition.getNode(!0),!1)}return null}return startContainer=range.startContainer,startOffset=range.startOffset,endOffset=range.endOffset,3===startContainer.nodeType&&0===startOffset&&isContentEditableFalse$9(startContainer.parentNode)&&(startContainer=startContainer.parentNode,startOffset=dom.nodeIndex(startContainer),startContainer=startContainer.parentNode),1!==startContainer.nodeType?null:(endOffset===startOffset+1&&(node=startContainer.childNodes[startOffset]),isContentEditableFalse$9(node)?(targetClone=origTargetClone=node.cloneNode(!0),e=editor.fire("ObjectSelected",{target:node,targetClone:targetClone}),e.isDefaultPrevented()?null:($realSelectionContainer=$_eh73s937jducwns3.descendant($_5s4uzoyjducwngo.fromDom(editor.getBody()),"#"+realSelectionId).fold(function(){return $([])},function(elm){return $([elm.dom()])}),targetClone=e.targetClone,0===$realSelectionContainer.length&&($realSelectionContainer=$('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",realSelectionId),$realSelectionContainer.appendTo(editor.getBody())),range=editor.dom.createRng(),targetClone===origTargetClone&&$_cum1kc9jducwn99.ie?($realSelectionContainer.empty().append('<p style="font-size: 0" data-mce-bogus="all"> </p>').append(targetClone),range.setStartAfter($realSelectionContainer[0].firstChild.firstChild),range.setEndAfter(targetClone)):($realSelectionContainer.empty().append(" ").append(targetClone).append(" "),range.setStart($realSelectionContainer[0].firstChild,1),range.setEnd($realSelectionContainer[0].lastChild,0)),$realSelectionContainer.css({top:dom.getPos(node,editor.getBody()).y}),$realSelectionContainer[0].focus(),sel=editor.selection.getSel(),sel.removeAllRanges(),sel.addRange(range),$_2dw1bj4jducwn6g.each($_47k8tx2gjducwnot.descendants($_5s4uzoyjducwngo.fromDom(editor.getBody()),"*[data-mce-selected]"),function(elm){$_60196814jducwnhd.remove(elm,"data-mce-selected")}),node.setAttribute("data-mce-selected","1"),selectedContentEditableNode=node,hideFakeCaret(),range)):null)},removeContentEditableSelection=function(){selectedContentEditableNode&&(selectedContentEditableNode.removeAttribute("data-mce-selected"),$_eh73s937jducwns3.descendant($_5s4uzoyjducwngo.fromDom(editor.getBody()),"#"+realSelectionId).each($_34vweg2pjducwnq0.remove),selectedContentEditableNode=null)},destroy=function(){fakeCaret.destroy(),selectedContentEditableNode=null},hideFakeCaret=function(){fakeCaret.hide()};return $_cum1kc9jducwn99.ceFalse&&(function(){var getContentEditableRoot=function(node){for(var root=editor.getBody();node&&node!==root;){if(isContentEditableTrue$5(node)||isContentEditableFalse$9(node))return node;node=node.parentNode}return null};editor.on("mouseup",function(e){var range=getRange();range.collapsed&&$_ahd3ne4djducwo1z.isXYInContentArea(editor,e.clientX,e.clientY)&&setRange(renderCaretAtRange(editor,range))}),editor.on("click",function(e){var contentEditableRoot;(contentEditableRoot=getContentEditableRoot(e.target))&&(isContentEditableFalse$9(contentEditableRoot)&&(e.preventDefault(),editor.focus()),isContentEditableTrue$5(contentEditableRoot)&&editor.dom.isChildOf(contentEditableRoot,editor.selection.getNode())&&removeContentEditableSelection())}),editor.on("blur NewBlock",function(){removeContentEditableSelection()});var hasNormalCaretPosition=function(elm){var caretWalker=CaretWalker(elm);if(!elm.firstChild)return!1;var startPos=CaretPosition$1.before(elm.firstChild),newPos=caretWalker.next(startPos);return newPos&&!isBeforeContentEditableFalse$1(newPos)&&!isAfterContentEditableFalse$1(newPos)},isInSameBlock$$1=function(node1,node2){return editor.dom.getParent(node1,editor.dom.isBlock)===editor.dom.getParent(node2,editor.dom.isBlock)},hasBetterMouseTarget=function(targetNode,caretNode){var targetBlock=editor.dom.getParent(targetNode,editor.dom.isBlock),caretBlock=editor.dom.getParent(caretNode,editor.dom.isBlock);return targetBlock&&!isInSameBlock$$1(targetBlock,caretBlock)&&hasNormalCaretPosition(targetBlock)};!function(editor){var moved=!1;editor.on("touchstart",function(){moved=!1}),editor.on("touchmove",function(){moved=!0}),editor.on("touchend",function(e){var contentEditableRoot=getContentEditableRoot(e.target);isContentEditableFalse$9(contentEditableRoot)&&(moved||(e.preventDefault(),setContentEditableSelection(selectNode(editor,contentEditableRoot))))})}(editor),editor.on("mousedown",function(e){var contentEditableRoot,targetElm=e.target;if((targetElm===rootNode||"HTML"===targetElm.nodeName||editor.dom.isChildOf(targetElm,rootNode))&&$_ahd3ne4djducwo1z.isXYInContentArea(editor,e.clientX,e.clientY)!==!1)if(contentEditableRoot=getContentEditableRoot(targetElm))isContentEditableFalse$9(contentEditableRoot)?(e.preventDefault(),setContentEditableSelection(selectNode(editor,contentEditableRoot))):(removeContentEditableSelection(),isContentEditableTrue$5(contentEditableRoot)&&e.shiftKey||$_cy7fd256jducwo68.isXYWithinRange(e.clientX,e.clientY,editor.selection.getRng())||editor.selection.placeCaretAt(e.clientX,e.clientY));else if(isFakeCaretTarget(targetElm)===!1){removeContentEditableSelection(),hideFakeCaret();var caretInfo=closestCaret(rootNode,e.clientX,e.clientY);caretInfo&&(hasBetterMouseTarget(e.target,caretInfo.node)||(e.preventDefault(),editor.getBody().focus(),
setRange(showCaret$$1(1,caretInfo.node,caretInfo.before))))}}),editor.on("keypress",function(e){if(!$_1xm2zi59jducwo6l.modifierPressed(e))switch(e.keyCode){default:isContentEditableFalse$9(editor.selection.getNode())&&e.preventDefault()}}),editor.on("getSelectionRange",function(e){var rng=e.range;if(selectedContentEditableNode){if(!selectedContentEditableNode.parentNode)return void(selectedContentEditableNode=null);rng=rng.cloneRange(),rng.selectNode(selectedContentEditableNode),e.range=rng}}),editor.on("setSelectionRange",function(e){var rng;(rng=setContentEditableSelection(e.range,e.forward))&&(e.range=rng)}),editor.on("AfterSetSelectionRange",function(e){var rng=e.range;isRangeInCaretContainer(rng)||hideFakeCaret(),isFakeSelectionElement(rng.startContainer.parentNode)||removeContentEditableSelection()}),editor.on("copy",function(e){var clipboardData=e.clipboardData;if(!e.isDefaultPrevented()&&e.clipboardData&&!$_cum1kc9jducwn99.ie){var realSelectionElement=getRealSelectionElement();realSelectionElement&&(e.preventDefault(),clipboardData.clearData(),clipboardData.setData("text/html",realSelectionElement.outerHTML),clipboardData.setData("text/plain",realSelectionElement.outerText))}}),$_56sftn51jducwo5f.init(editor),$_vc72057jducwo6c.setup(editor)}(),function(){var styles=editor.contentStyles;styles.push(fakeCaret.getCss()),styles.push(".mce-content-body .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}.mce-content-body *[contentEditable=false] {cursor: default;}.mce-content-body *[contentEditable=true] {cursor: text;}")}()),{showCaret:showCaret$$1,showBlockCaretContainer:showBlockCaretContainer,hideFakeCaret:hideFakeCaret,destroy:destroy}},each$11=$_8i2houjjducwnd2.each,isValidPrefixAttrName=function(name){return 0===name.indexOf("data-")||0===name.indexOf("aria-")},trimComments=function(text){return text.replace(/<!--|-->/g,"")},findEndTagIndex=function(schema,html,startIndex){var index,matches,tokenRegExp,shortEndedElements,count=1;for(shortEndedElements=schema.getShortEndedElements(),tokenRegExp=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g,tokenRegExp.lastIndex=index=startIndex;matches=tokenRegExp.exec(html);){if(index=tokenRegExp.lastIndex,"/"===matches[1])count--;else if(!matches[1]){if(matches[2]in shortEndedElements)continue;count++}if(0===count)break}return index};!function(SaxParser){SaxParser.findEndTag=findEndTagIndex}(SaxParser||(SaxParser={}));var SaxParser$1=SaxParser,trimHtml=function(tempAttrs,html){var trimContentRegExp=new RegExp(["\\s?("+tempAttrs.join("|")+')="[^"]+"'].join("|"),"gi");return html.replace(trimContentRegExp,"")},trimInternal=function(serializer,html){var endTagIndex,index,matchLength,matches,shortEndedElements,content=html,bogusAllRegExp=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,schema=serializer.schema;for(content=trimHtml(serializer.getTempAttrs(),content),shortEndedElements=schema.getShortEndedElements();matches=bogusAllRegExp.exec(content);)index=bogusAllRegExp.lastIndex,matchLength=matches[0].length,endTagIndex=shortEndedElements[matches[1]]?index:SaxParser$1.findEndTag(schema,content,index),content=content.substring(0,index-matchLength)+content.substring(endTagIndex),bogusAllRegExp.lastIndex=index-matchLength;return content},trimExternal=function(serializer,html){return $_fz0k4u21jducwnmu.trim(trimInternal(serializer,html))},$_9wn54m5cjducwo73={trimExternal:trimExternal,trimInternal:trimInternal},diff=function(left,right){var size=left.length+right.length+2,vDown=new Array(size),vUp=new Array(size),snake=function(start,end,diag){return{start:start,end:end,diag:diag}},buildScript=function(start1,end1,start2,end2,script){var middle=getMiddleSnake(start1,end1,start2,end2);if(null===middle||middle.start===end1&&middle.diag===end1-end2||middle.end===start1&&middle.diag===start1-start2)for(var i=start1,j=start2;i<end1||j<end2;)i<end1&&j<end2&&left[i]===right[j]?(script.push([0,left[i]]),++i,++j):end1-start1>end2-start2?(script.push([2,left[i]]),++i):(script.push([1,right[j]]),++j);else{buildScript(start1,middle.start,start2,middle.start-middle.diag,script);for(var i2=middle.start;i2<middle.end;++i2)script.push([0,left[i2]]);buildScript(middle.end,end1,middle.end-middle.diag,end2,script)}},buildSnake=function(start,diag,end1,end2){for(var end=start;end-diag<end2&&end<end1&&left[end]===right[end-diag];)++end;return snake(start,end,diag)},getMiddleSnake=function(start1,end1,start2,end2){var m=end1-start1,n=end2-start2;if(0===m||0===n)return null;var delta=m-n,sum=n+m,offset=(sum%2==0?sum:sum+1)/2;vDown[1+offset]=start1,vUp[1+offset]=end1+1;var d,k,i,x,y;for(d=0;d<=offset;++d){for(k=-d;k<=d;k+=2){for(i=k+offset,k===-d||k!==d&&vDown[i-1]<vDown[i+1]?vDown[i]=vDown[i+1]:vDown[i]=vDown[i-1]+1,x=vDown[i],y=x-start1+start2-k;x<end1&&y<end2&&left[x]===right[y];)vDown[i]=++x,++y;if(delta%2!=0&&delta-d<=k&&k<=delta+d&&vUp[i-delta]<=vDown[i])return buildSnake(vUp[i-delta],k+start1-start2,end1,end2)}for(k=delta-d;k<=delta+d;k+=2){for(i=k+offset-delta,k===delta-d||k!==delta+d&&vUp[i+1]<=vUp[i-1]?vUp[i]=vUp[i+1]-1:vUp[i]=vUp[i-1],x=vUp[i]-1,y=x-start1+start2-k;x>=start1&&y>=start2&&left[x]===right[y];)vUp[i]=x--,y--;if(delta%2==0&&-d<=k&&k<=d&&vUp[i]<=vDown[i+delta])return buildSnake(vUp[i],k+start1-start2,end1,end2)}}},script=[];return buildScript(0,left.length,0,right.length,script),script},$_3rz1t15fjducwo7r={KEEP:0,DELETE:2,INSERT:1,diff:diff},getOuterHtml=function(elm){return 1===elm.nodeType?elm.outerHTML:3===elm.nodeType?$_g4jbz61rjducwnjq.encodeRaw(elm.data,!1):8===elm.nodeType?"<!--"+elm.data+"-->":""},createFragment$1=function(html){var frag,node,container;for(container=document.createElement("div"),frag=document.createDocumentFragment(),html&&(container.innerHTML=html);node=container.firstChild;)frag.appendChild(node);return frag},insertAt=function(elm,html,index){var fragment=createFragment$1(html);if(elm.hasChildNodes()&&index<elm.childNodes.length){var target=elm.childNodes[index];target.parentNode.insertBefore(fragment,target)}else elm.appendChild(fragment)},removeAt=function(elm,index){if(elm.hasChildNodes()&&index<elm.childNodes.length){var target=elm.childNodes[index];target.parentNode.removeChild(target)}},applyDiff=function(diff,elm){var index=0;$_e6e6g1kjducwnfd.each(diff,function(action){action[0]===$_3rz1t15fjducwo7r.KEEP?index++:action[0]===$_3rz1t15fjducwo7r.INSERT?(insertAt(elm,action[1],index),index++):action[0]===$_3rz1t15fjducwo7r.DELETE&&removeAt(elm,index)})},read$2=function(elm){return $_e6e6g1kjducwnfd.filter($_e6e6g1kjducwnfd.map(elm.childNodes,getOuterHtml),function(item){return item.length>0})},write=function(fragments,elm){var currentFragments=$_e6e6g1kjducwnfd.map(elm.childNodes,getOuterHtml);return applyDiff($_3rz1t15fjducwo7r.diff(currentFragments,fragments),elm),elm},$_51p2my5ejducwo7o={read:read$2,write:write},hasIframes=function(html){return html.indexOf("</iframe>")!==-1},createFragmentedLevel=function(fragments){return{type:"fragmented",fragments:fragments,content:"",bookmark:null,beforeBookmark:null}},createCompleteLevel=function(content){return{type:"complete",fragments:null,content:content,bookmark:null,beforeBookmark:null}},createFromEditor=function(editor){var fragments,content,trimmedFragments;return fragments=$_51p2my5ejducwo7o.read(editor.getBody()),trimmedFragments=$_2dw1bj4jducwn6g.bind(fragments,function(html){var trimmed=$_9wn54m5cjducwo73.trimInternal(editor.serializer,html);return trimmed.length>0?[trimmed]:[]}),content=trimmedFragments.join(""),hasIframes(content)?createFragmentedLevel(trimmedFragments):createCompleteLevel(content)},applyToEditor=function(editor,level,before){"fragmented"===level.type?$_51p2my5ejducwo7o.write(level.fragments,editor.getBody()):editor.setContent(level.content,{format:"raw"}),editor.selection.moveToBookmark(before?level.beforeBookmark:level.bookmark)},getLevelContent=function(level){return"fragmented"===level.type?level.fragments.join(""):level.content},isEq$4=function(level1,level2){return!!level1&&!!level2&&getLevelContent(level1)===getLevelContent(level2)},$_9n3h945bjducwo6y={createFragmentedLevel:createFragmentedLevel,createCompleteLevel:createCompleteLevel,createFromEditor:createFromEditor,applyToEditor:applyToEditor,isEq:isEq$4},postProcessHooks={},filter$2=$_e6e6g1kjducwnfd.filter,each$12=$_e6e6g1kjducwnfd.each,postProcess=function(name,editor){each$12(postProcessHooks[name],function(hook){hook(editor)})};!function(name,hook){var hooks=postProcessHooks[name];hooks||(postProcessHooks[name]=hooks=[]),postProcessHooks[name].push(hook)}("pre",function(editor){var isPre,blocks,rng=editor.selection.getRng(),hasPreSibling=function(pre){return isPre(pre.previousSibling)&&$_e6e6g1kjducwnfd.indexOf(blocks,pre.previousSibling)!==-1},joinPre=function(pre1,pre2){DomQuery(pre2).remove(),DomQuery(pre1).append("<br><br>").append(pre2.childNodes)};isPre=$_fj238m1qjducwnjm.matchNodeNames("pre"),rng.collapsed||(blocks=editor.selection.getSelectedBlocks(),each$12(filter$2(filter$2(blocks,isPre),hasPreSibling),function(pre){joinPre(pre.previousSibling,pre)}))});var $_ez60zk5ijducwo86={postProcess:postProcess},each$13=$_8i2houjjducwnd2.each,getEndChild=function(container,index){var childNodes=container.childNodes;return index--,index>childNodes.length-1?index=childNodes.length-1:index<0&&(index=0),childNodes[index]||container},walk$2=function(dom,rng,callback){var ancestor,startPoint,endPoint,node,parent,siblings,nodes,startContainer=rng.startContainer,startOffset=rng.startOffset,endContainer=rng.endContainer,endOffset=rng.endOffset;if(nodes=dom.select("td[data-mce-selected],th[data-mce-selected]"),nodes.length>0)return void each$13(nodes,function(node){callback([node])});var exclude=function(nodes){var node;return node=nodes[0],3===node.nodeType&&node===startContainer&&startOffset>=node.nodeValue.length&&nodes.splice(0,1),node=nodes[nodes.length-1],0===endOffset&&nodes.length>0&&node===endContainer&&3===node.nodeType&&nodes.splice(nodes.length-1,1),nodes},collectSiblings=function(node,name,endNode){for(var siblings=[];node&&node!==endNode;node=node[name])siblings.push(node);return siblings},findEndPoint=function(node,root){do{if(node.parentNode===root)return node;node=node.parentNode}while(node)},walkBoundary=function(startNode,endNode,next){var siblingName=next?"nextSibling":"previousSibling";for(node=startNode,parent=node.parentNode;node&&node!==endNode;node=parent)parent=node.parentNode,siblings=collectSiblings(node===startNode?node:node[siblingName],siblingName),siblings.length&&(next||siblings.reverse(),callback(exclude(siblings)))};if(1===startContainer.nodeType&&startContainer.hasChildNodes()&&(startContainer=startContainer.childNodes[startOffset]),1===endContainer.nodeType&&endContainer.hasChildNodes()&&(endContainer=getEndChild(endContainer,endOffset)),startContainer===endContainer)return callback(exclude([startContainer]));for(ancestor=dom.findCommonAncestor(startContainer,endContainer),node=startContainer;node;node=node.parentNode){if(node===endContainer)return walkBoundary(startContainer,ancestor,!0);if(node===ancestor)break}for(node=endContainer;node;node=node.parentNode){if(node===startContainer)return walkBoundary(endContainer,ancestor);if(node===ancestor)break}startPoint=findEndPoint(startContainer,ancestor)||startContainer,endPoint=findEndPoint(endContainer,ancestor)||endContainer,walkBoundary(startContainer,startPoint,!0),siblings=collectSiblings(startPoint===startContainer?startPoint:startPoint.nextSibling,"nextSibling",endPoint===endContainer?endPoint.nextSibling:endPoint),siblings.length&&callback(exclude(siblings)),walkBoundary(endContainer,endPoint)},$_ee8wld5ljducwo96={walk:walk$2},MCE_ATTR_RE=/^(src|href|style)$/,each$14=$_8i2houjjducwnd2.each,isEq$5=$_fyc2yy3ljducwnuu.isEq,isTableCell$4=function(node){return/^(TH|TD)$/.test(node.nodeName)},getContainer=function(ed,rng,start){var container,offset,lastIdx;return container=rng[start?"startContainer":"endContainer"],offset=rng[start?"startOffset":"endOffset"],$_fj238m1qjducwnjm.isElement(container)&&(lastIdx=container.childNodes.length-1,!start&&offset&&offset--,container=container.childNodes[offset>lastIdx?lastIdx:offset]),$_fj238m1qjducwnjm.isText(container)&&start&&offset>=container.nodeValue.length&&(container=new TreeWalker(container,ed.getBody()).next()||container),$_fj238m1qjducwnjm.isText(container)&&!start&&0===offset&&(container=new TreeWalker(container,ed.getBody()).prev()||container),container},wrap$2=function(dom,node,name,attrs){var wrapper=dom.create(name,attrs);return node.parentNode.insertBefore(wrapper,node),wrapper.appendChild(node),wrapper},matchName$1=function(dom,node,format){return!!isEq$5(node,format.inline)||(!!isEq$5(node,format.block)||(format.selector?$_fj238m1qjducwnjm.isElement(node)&&dom.is(node,format.selector):void 0))},isColorFormatAndAnchor=function(node,format){return format.links&&"A"===node.tagName},find$4=function(dom,node,next,inc){return!(node=$_fyc2yy3ljducwnuu.getNonWhiteSpaceSibling(node,next,inc))||"BR"===node.nodeName||dom.isBlock(node)},removeNode$1=function(ed,node,format){var rootBlockElm,parentNode=node.parentNode,dom=ed.dom,forcedRootBlock=ed.settings.forced_root_block;format.block&&(forcedRootBlock?parentNode===dom.getRoot()&&(format.list_block&&isEq$5(node,format.list_block)||each$14($_8i2houjjducwnd2.grep(node.childNodes),function(node){$_fyc2yy3ljducwnuu.isValid(ed,forcedRootBlock,node.nodeName.toLowerCase())?rootBlockElm?rootBlockElm.appendChild(node):(rootBlockElm=wrap$2(dom,node,forcedRootBlock),dom.setAttribs(rootBlockElm,ed.settings.forced_root_block_attrs)):rootBlockElm=0})):dom.isBlock(node)&&!dom.isBlock(parentNode)&&(find$4(dom,node,!1)||find$4(dom,node.firstChild,!0,1)||node.insertBefore(dom.create("br"),node.firstChild),find$4(dom,node,!0)||find$4(dom,node.lastChild,!1,1)||node.appendChild(dom.create("br")))),format.selector&&format.inline&&!isEq$5(format.inline,node)||dom.remove(node,1)},removeFormat=function(ed,format,vars,node,compareNode){var i,attrs,stylesModified,dom=ed.dom;if(!matchName$1(dom,node,format)&&!isColorFormatAndAnchor(node,format))return!1;if("all"!==format.remove)for(each$14(format.styles,function(value,name){value=$_fyc2yy3ljducwnuu.normalizeStyleValue(dom,$_fyc2yy3ljducwnuu.replaceVars(value,vars),name),"number"==typeof name&&(name=value,compareNode=0),(format.remove_similar||!compareNode||isEq$5($_fyc2yy3ljducwnuu.getStyle(dom,compareNode,name),value))&&dom.setStyle(node,name,""),stylesModified=1}),stylesModified&&""===dom.getAttrib(node,"style")&&(node.removeAttribute("style"),node.removeAttribute("data-mce-style")),each$14(format.attributes,function(value,name){var valueOut;if(value=$_fyc2yy3ljducwnuu.replaceVars(value,vars),"number"==typeof name&&(name=value,compareNode=0),!compareNode||isEq$5(dom.getAttrib(compareNode,name),value)){if("class"===name&&(value=dom.getAttrib(node,name))&&(valueOut="",each$14(value.split(/\s+/),function(cls){/mce\-\w+/.test(cls)&&(valueOut+=(valueOut?" ":"")+cls)}),valueOut))return void dom.setAttrib(node,name,valueOut);"class"===name&&node.removeAttribute("className"),MCE_ATTR_RE.test(name)&&node.removeAttribute("data-mce-"+name),node.removeAttribute(name)}}),each$14(format.classes,function(value){value=$_fyc2yy3ljducwnuu.replaceVars(value,vars),compareNode&&!dom.hasClass(compareNode,value)||dom.removeClass(node,value)}),attrs=dom.getAttribs(node),i=0;i<attrs.length;i++){var attrName=attrs[i].nodeName;if(0!==attrName.indexOf("_")&&0!==attrName.indexOf("data-"))return!1}return"none"!==format.remove?(removeNode$1(ed,node,format),!0):void 0},findFormatRoot=function(editor,container,name,vars,similar){var formatRoot;return each$14($_fyc2yy3ljducwnuu.getParents(editor.dom,container.parentNode).reverse(),function(parent){var format;formatRoot||"_start"===parent.id||"_end"===parent.id||(format=$_4os6t23mjducwnv0.matchNode(editor,parent,name,vars,similar))&&format.split!==!1&&(formatRoot=parent)}),formatRoot},wrapAndSplit=function(editor,formatList,formatRoot,container,target,split,format,vars){var parent,clone,lastClone,firstClone,i,formatRootParent,dom=editor.dom;if(formatRoot){for(formatRootParent=formatRoot.parentNode,parent=container.parentNode;parent&&parent!==formatRootParent;parent=parent.parentNode){for(clone=dom.clone(parent,!1),i=0;i<formatList.length;i++)if(removeFormat(editor,formatList[i],vars,clone,clone)){clone=0;break}clone&&(lastClone&&clone.appendChild(lastClone),firstClone||(firstClone=clone),lastClone=clone)}!split||format.mixed&&dom.isBlock(formatRoot)||(container=dom.split(formatRoot,container)),lastClone&&(target.parentNode.insertBefore(lastClone,target),firstClone.appendChild(target))}return container},remove$4=function(ed,name,vars,node,similar){var bookmark,rng,formatList=ed.formatter.get(name),format=formatList[0],contentEditable=!0,dom=ed.dom,selection=ed.selection,splitToFormatRoot=function(container){var formatRoot=findFormatRoot(ed,container,name,vars,similar);return wrapAndSplit(ed,formatList,formatRoot,container,container,!0,format,vars)},process=function(node){var children,i,l,lastContentEditable,hasContentEditableState;if($_fj238m1qjducwnjm.isElement(node)&&dom.getContentEditable(node)&&(lastContentEditable=contentEditable,contentEditable="true"===dom.getContentEditable(node),hasContentEditableState=!0),children=$_8i2houjjducwnd2.grep(node.childNodes),contentEditable&&!hasContentEditableState)for(i=0,l=formatList.length;i<l&&!removeFormat(ed,formatList[i],vars,node,node);i++);if(format.deep&&children.length){for(i=0,l=children.length;i<l;i++)process(children[i]);hasContentEditableState&&(contentEditable=lastContentEditable)}},unwrap=function(start){var node=dom.get(start?"_start":"_end"),out=node[start?"firstChild":"lastChild"];return $_dcl0u12jjducwnp0.isBookmarkNode(out)&&(out=out[start?"firstChild":"lastChild"]),$_fj238m1qjducwnjm.isText(out)&&0===out.data.length&&(out=start?node.previousSibling||node.nextSibling:node.nextSibling||node.previousSibling),dom.remove(node,!0),out},removeRngStyle=function(rng){var startContainer,endContainer,commonAncestorContainer=rng.commonAncestorContainer;if(rng=$_ceajqh3kjducwnui.expandRng(ed,rng,formatList,!0),format.split){if(startContainer=getContainer(ed,rng,!0),endContainer=getContainer(ed,rng),startContainer!==endContainer){if(/^(TR|TH|TD)$/.test(startContainer.nodeName)&&startContainer.firstChild&&(startContainer="TR"===startContainer.nodeName?startContainer.firstChild.firstChild||startContainer:startContainer.firstChild||startContainer),commonAncestorContainer&&/^T(HEAD|BODY|FOOT|R)$/.test(commonAncestorContainer.nodeName)&&isTableCell$4(endContainer)&&endContainer.firstChild&&(endContainer=endContainer.firstChild||endContainer),dom.isChildOf(startContainer,endContainer)&&startContainer!==endContainer&&!dom.isBlock(endContainer)&&!isTableCell$4(startContainer)&&!isTableCell$4(endContainer))return startContainer=wrap$2(dom,startContainer,"span",{id:"_start","data-mce-type":"bookmark"}),splitToFormatRoot(startContainer),void(startContainer=unwrap(!0));startContainer=wrap$2(dom,startContainer,"span",{id:"_start","data-mce-type":"bookmark"}),endContainer=wrap$2(dom,endContainer,"span",{id:"_end","data-mce-type":"bookmark"}),splitToFormatRoot(startContainer),splitToFormatRoot(endContainer),startContainer=unwrap(!0),endContainer=unwrap()}else startContainer=endContainer=splitToFormatRoot(startContainer);rng.startContainer=startContainer.parentNode?startContainer.parentNode:startContainer,rng.startOffset=dom.nodeIndex(startContainer),rng.endContainer=endContainer.parentNode?endContainer.parentNode:endContainer,rng.endOffset=dom.nodeIndex(endContainer)+1}$_ee8wld5ljducwo96.walk(dom,rng,function(nodes){each$14(nodes,function(node){process(node),$_fj238m1qjducwnjm.isElement(node)&&"underline"===ed.dom.getStyle(node,"text-decoration")&&node.parentNode&&"underline"===$_fyc2yy3ljducwnuu.getTextDecoration(dom,node.parentNode)&&removeFormat(ed,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,node)})})};if(node)return void(node.nodeType?(rng=dom.createRng(),rng.setStartBefore(node),rng.setEndAfter(node),removeRngStyle(rng)):removeRngStyle(node));if("false"!==dom.getContentEditable(selection.getNode()))selection.isCollapsed()&&format.inline&&!dom.select("td[data-mce-selected],th[data-mce-selected]").length?$_gizh813jjducwnu6.removeCaretFormat(ed,name,vars,similar):(bookmark=selection.getBookmark(),removeRngStyle(selection.getRng()),selection.moveToBookmark(bookmark),format.inline&&$_4os6t23mjducwnv0.match(ed,name,vars,selection.getStart())&&$_fyc2yy3ljducwnuu.moveStart(dom,selection,selection.getRng()),ed.nodeChanged());else{node=selection.getNode();for(var i=0,l=formatList.length;i<l&&(!formatList[i].ceFalseOverride||!removeFormat(ed,formatList[i],vars,node,node));i++);}},$_2kyh3s5kjducwo8m={removeFormat:removeFormat,remove:remove$4},each$15=$_8i2houjjducwnd2.each,isElementNode=function(node){return node&&1===node.nodeType&&!$_dcl0u12jjducwnp0.isBookmarkNode(node)&&!$_gizh813jjducwnu6.isCaretNode(node)&&!$_fj238m1qjducwnjm.isBogus(node)},findElementSibling=function(node,siblingName){var sibling;for(sibling=node;sibling;sibling=sibling[siblingName]){if(3===sibling.nodeType&&0!==sibling.nodeValue.length)return node;if(1===sibling.nodeType&&!$_dcl0u12jjducwnp0.isBookmarkNode(sibling))return sibling}return node},mergeSiblingsNodes=function(dom,prev,next){var sibling,tmpSibling,elementUtils=new ElementUtils(dom);if(prev&&next&&(prev=findElementSibling(prev,"previousSibling"),next=findElementSibling(next,"nextSibling"),elementUtils.compare(prev,next))){for(sibling=prev.nextSibling;sibling&&sibling!==next;)tmpSibling=sibling,sibling=sibling.nextSibling,prev.appendChild(tmpSibling);return dom.remove(next),$_8i2houjjducwnd2.each($_8i2houjjducwnd2.grep(next.childNodes),function(node){prev.appendChild(node)}),prev}return next},processChildElements=function(node,filter,process){each$15(node.childNodes,function(node){isElementNode(node)&&(filter(node)&&process(node),node.hasChildNodes()&&processChildElements(node,filter,process))})},hasStyle=function(dom,name){return $_60qu7r6jducwn73.curry(function(name,node){return!(!node||!$_fyc2yy3ljducwnuu.getStyle(dom,node,name))},name)},applyStyle=function(dom,name,value){return $_60qu7r6jducwn73.curry(function(name,value,node){dom.setStyle(node,name,value),""===node.getAttribute("style")&&node.removeAttribute("style"),unwrapEmptySpan(dom,node)},name,value)},unwrapEmptySpan=function(dom,node){"SPAN"===node.nodeName&&0===dom.getAttribs(node).length&&dom.remove(node,!0)},processUnderlineAndColor=function(dom,node){var textDecoration;1===node.nodeType&&node.parentNode&&1===node.parentNode.nodeType&&(textDecoration=$_fyc2yy3ljducwnuu.getTextDecoration(dom,node.parentNode),dom.getStyle(node,"color")&&textDecoration?dom.setStyle(node,"text-decoration",textDecoration):dom.getStyle(node,"text-decoration")===textDecoration&&dom.setStyle(node,"text-decoration",null))},mergeUnderlineAndColor=function(dom,format,vars,node){(format.styles.color||format.styles.textDecoration)&&($_8i2houjjducwnd2.walk(node,$_60qu7r6jducwn73.curry(processUnderlineAndColor,dom),"childNodes"),processUnderlineAndColor(dom,node))},mergeBackgroundColorAndFontSize=function(dom,format,vars,node){format.styles&&format.styles.backgroundColor&&processChildElements(node,hasStyle(dom,"fontSize"),applyStyle(dom,"backgroundColor",$_fyc2yy3ljducwnuu.replaceVars(format.styles.backgroundColor,vars)))},mergeSubSup=function(dom,format,vars,node){"sub"!==format.inline&&"sup"!==format.inline||(processChildElements(node,hasStyle(dom,"fontSize"),applyStyle(dom,"fontSize","")),dom.remove(dom.select("sup"===format.inline?"sub":"sup",node),!0))},mergeSiblings=function(dom,format,vars,node){node&&format.merge_siblings!==!1&&(node=mergeSiblingsNodes(dom,$_fyc2yy3ljducwnuu.getNonWhiteSpaceSibling(node),node),node=mergeSiblingsNodes(dom,node,$_fyc2yy3ljducwnuu.getNonWhiteSpaceSibling(node,!0)))},clearChildStyles=function(dom,format,node){if(format.clear_child_styles){var selector=format.links?"*:not(a)":"*";each$15(dom.select(selector,node),function(node){isElementNode(node)&&each$15(format.styles,function(value,name){dom.setStyle(node,name,"")})})}},mergeWithChildren=function(editor,formatList,vars,node){each$15(formatList,function(format){each$15(editor.dom.select(format.inline,node),function(child){isElementNode(child)&&$_2kyh3s5kjducwo8m.removeFormat(editor,format,vars,child,format.exact?child:null)}),clearChildStyles(editor.dom,format,node)})},mergeWithParents=function(editor,format,name,vars,node){$_4os6t23mjducwnv0.matchNode(editor,node.parentNode,name,vars)&&$_2kyh3s5kjducwo8m.removeFormat(editor,format,vars,node)||format.merge_with_parents&&editor.dom.getParent(node.parentNode,function(parent){if($_4os6t23mjducwnv0.matchNode(editor,parent,name,vars))return $_2kyh3s5kjducwo8m.removeFormat(editor,format,vars,node),!0})},$_4ut1b55jjducwo8a={mergeWithChildren:mergeWithChildren,mergeUnderlineAndColor:mergeUnderlineAndColor,mergeBackgroundColorAndFontSize:mergeBackgroundColorAndFontSize,mergeSubSup:mergeSubSup,mergeSiblings:mergeSiblings,mergeWithParents:mergeWithParents},each$16=$_8i2houjjducwnd2.each,isElementNode$1=function(node){return node&&1===node.nodeType&&!$_dcl0u12jjducwnp0.isBookmarkNode(node)&&!$_gizh813jjducwnu6.isCaretNode(node)&&!$_fj238m1qjducwnjm.isBogus(node)},applyFormat=function(ed,name,vars,node){var bookmark,rng,formatList=ed.formatter.get(name),format=formatList[0],isCollapsed=!node&&ed.selection.isCollapsed(),dom=ed.dom,selection=ed.selection,setElementFormat=function(elm,fmt){if(fmt=fmt||format,elm){if(fmt.onformat&&fmt.onformat(elm,fmt,vars,node),each$16(fmt.styles,function(value,name){dom.setStyle(elm,name,$_fyc2yy3ljducwnuu.replaceVars(value,vars))}),fmt.styles){var styleVal=dom.getAttrib(elm,"style");styleVal&&elm.setAttribute("data-mce-style",styleVal)}each$16(fmt.attributes,function(value,name){dom.setAttrib(elm,name,$_fyc2yy3ljducwnuu.replaceVars(value,vars))}),each$16(fmt.classes,function(value){value=$_fyc2yy3ljducwnuu.replaceVars(value,vars),dom.hasClass(elm,value)||dom.addClass(elm,value)})}},applyNodeStyle=function(formatList,node){var found=!1;return!!format.selector&&(each$16(formatList,function(format){if(!("collapsed"in format&&format.collapsed!==isCollapsed))return dom.is(node,format.selector)&&!$_gizh813jjducwnu6.isCaretNode(node)?(setElementFormat(node,format),found=!0,!1):void 0}),found)},applyRngStyle=function(dom,rng,bookmark,nodeSpecific){var wrapName,wrapElm,newWrappers=[],contentEditable=!0;wrapName=format.inline||format.block,wrapElm=dom.create(wrapName),setElementFormat(wrapElm),$_ee8wld5ljducwo96.walk(dom,rng,function(nodes){var currentWrapElm,process=function(node){var nodeName,parentName,hasContentEditableState,lastContentEditable;if(lastContentEditable=contentEditable,nodeName=node.nodeName.toLowerCase(),parentName=node.parentNode.nodeName.toLowerCase(),1===node.nodeType&&dom.getContentEditable(node)&&(lastContentEditable=contentEditable,contentEditable="true"===dom.getContentEditable(node),hasContentEditableState=!0),$_fyc2yy3ljducwnuu.isEq(nodeName,"br"))return currentWrapElm=0,void(format.block&&dom.remove(node));if(format.wrapper&&$_4os6t23mjducwnv0.matchNode(ed,node,name,vars))return void(currentWrapElm=0);if(contentEditable&&!hasContentEditableState&&format.block&&!format.wrapper&&$_fyc2yy3ljducwnuu.isTextBlock(ed,nodeName)&&$_fyc2yy3ljducwnuu.isValid(ed,parentName,wrapName))return node=dom.rename(node,wrapName),setElementFormat(node),newWrappers.push(node),void(currentWrapElm=0);if(format.selector){var found=applyNodeStyle(formatList,node);if(!format.inline||found)return void(currentWrapElm=0)}!contentEditable||hasContentEditableState||!$_fyc2yy3ljducwnuu.isValid(ed,wrapName,nodeName)||!$_fyc2yy3ljducwnuu.isValid(ed,parentName,wrapName)||!nodeSpecific&&3===node.nodeType&&1===node.nodeValue.length&&65279===node.nodeValue.charCodeAt(0)||$_gizh813jjducwnu6.isCaretNode(node)||format.inline&&dom.isBlock(node)?(currentWrapElm=0,each$16($_8i2houjjducwnd2.grep(node.childNodes),process),hasContentEditableState&&(contentEditable=lastContentEditable),currentWrapElm=0):(currentWrapElm||(currentWrapElm=dom.clone(wrapElm,!1),node.parentNode.insertBefore(currentWrapElm,node),newWrappers.push(currentWrapElm)),currentWrapElm.appendChild(node))};each$16(nodes,process)}),format.links===!0&&each$16(newWrappers,function(node){var process=function(node){"A"===node.nodeName&&setElementFormat(node,format),each$16($_8i2houjjducwnd2.grep(node.childNodes),process)};process(node)}),each$16(newWrappers,function(node){var childCount,getChildElementNode=function(root){var child=!1;return each$16(root.childNodes,function(node){if(isElementNode$1(node))return child=node,!1}),child};if(childCount=function(node){var count=0;return each$16(node.childNodes,function(node){$_fyc2yy3ljducwnuu.isWhiteSpaceNode(node)||$_dcl0u12jjducwnp0.isBookmarkNode(node)||count++}),count}(node),(newWrappers.length>1||!dom.isBlock(node))&&0===childCount)return void dom.remove(node,1);(format.inline||format.wrapper)&&(format.exact||1!==childCount||(node=function(node){var child,clone;return child=getChildElementNode(node),child&&!$_dcl0u12jjducwnp0.isBookmarkNode(child)&&$_4os6t23mjducwnv0.matchName(dom,child,format)&&(clone=dom.clone(child,!1),setElementFormat(clone),dom.replace(clone,node,!0),dom.remove(child,1)),clone||node}(node)),$_4ut1b55jjducwo8a.mergeWithChildren(ed,formatList,vars,node),$_4ut1b55jjducwo8a.mergeWithParents(ed,format,name,vars,node),$_4ut1b55jjducwo8a.mergeBackgroundColorAndFontSize(dom,format,vars,node),$_4ut1b55jjducwo8a.mergeSubSup(dom,format,vars,node),$_4ut1b55jjducwo8a.mergeSiblings(dom,format,vars,node))})};if("false"!==dom.getContentEditable(selection.getNode())){if(format){if(node)node.nodeType?applyNodeStyle(formatList,node)||(rng=dom.createRng(),rng.setStartBefore(node),rng.setEndAfter(node),applyRngStyle(dom,$_ceajqh3kjducwnui.expandRng(ed,rng,formatList),0,!0)):applyRngStyle(dom,node,0,!0);else if(isCollapsed&&format.inline&&!dom.select("td[data-mce-selected],th[data-mce-selected]").length)$_gizh813jjducwnu6.applyCaretFormat(ed,name,vars);else{var curSelNode=ed.selection.getNode();ed.settings.forced_root_block||!formatList[0].defaultBlock||dom.getParent(curSelNode,dom.isBlock)||applyFormat(ed,formatList[0].defaultBlock),ed.selection.setRng($_5b11cd2vjducwnqi.normalize(ed.selection.getRng())),bookmark=selection.getBookmark(),applyRngStyle(dom,$_ceajqh3kjducwnui.expandRng(ed,selection.getRng(),formatList)),format.styles&&$_4ut1b55jjducwo8a.mergeUnderlineAndColor(dom,format,vars,curSelNode),selection.moveToBookmark(bookmark),$_fyc2yy3ljducwnuu.moveStart(dom,selection,selection.getRng()),ed.nodeChanged()}$_ez60zk5ijducwo86.postProcess(name,ed)}}else{node=selection.getNode();for(var i=0,l=formatList.length;i<l;i++)if(formatList[i].ceFalseOverride&&dom.is(node,formatList[i].selector))return void setElementFormat(node,formatList[i])}},$_3sj7pb5hjducwo7z={applyFormat:applyFormat},each$17=$_8i2houjjducwnd2.each,setup$3=function(formatChangeData,editor){var currentFormats={};formatChangeData.set({}),editor.on("NodeChange",function(e){var parents=$_fyc2yy3ljducwnuu.getParents(editor.dom,e.element),matchedFormats={};parents=$_8i2houjjducwnd2.grep(parents,function(node){return 1===node.nodeType&&!node.getAttribute("data-mce-bogus")}),each$17(formatChangeData.get(),function(callbacks,format){each$17(parents,function(node){return editor.formatter.matchNode(node,format,{},callbacks.similar)?(currentFormats[format]||(each$17(callbacks,function(callback){callback(!0,{node:node,format:format,parents:parents})}),currentFormats[format]=callbacks),matchedFormats[format]=callbacks,!1):!$_4os6t23mjducwnv0.matchesUnInheritedFormatSelector(editor,node,format)&&void 0})}),each$17(currentFormats,function(callbacks,format){matchedFormats[format]||(delete currentFormats[format],each$17(callbacks,function(callback){callback(!1,{
node:e.element,format:format,parents:parents})}))})})},addListeners=function(formatChangeData,formats,callback,similar){var formatChangeItems=formatChangeData.get();each$17(formats.split(","),function(format){formatChangeItems[format]||(formatChangeItems[format]=[],formatChangeItems[format].similar=similar),formatChangeItems[format].push(callback)}),formatChangeData.set(formatChangeItems)},formatChanged=function(editor,formatChangeState,formats,callback,similar){null===formatChangeState.get()&&setup$3(formatChangeState,editor),addListeners(formatChangeState,formats,callback,similar)},$_gdfg785mjducwo99={formatChanged:formatChanged},get$4=function(dom){var formats={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(elm,fmt,vars){$_8i2houjjducwnd2.each(vars,function(value,key){dom.setAttrib(elm,key,value)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return $_8i2houjjducwnd2.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(name){formats[name]={block:name,remove:"all"}}),formats},$_892yun5ojducwo9d={get:get$4},each$18=$_8i2houjjducwnd2.each,dom=DOMUtils.DOM,parsedSelectorToHtml=function(ancestry,editor){var elm,item,fragment,schema=editor&&editor.schema||Schema({}),decorate=function(elm,item){item.classes.length&&dom.addClass(elm,item.classes.join(" ")),dom.setAttribs(elm,item.attrs)},createElement=function(sItem){var elm;return item="string"==typeof sItem?{name:sItem,classes:[],attrs:{}}:sItem,elm=dom.create(item.name),decorate(elm,item),elm},getRequiredParent=function(elm,candidate){var name="string"!=typeof elm?elm.nodeName.toLowerCase():elm,elmRule=schema.getElementRule(name),parentsRequired=elmRule&&elmRule.parentsRequired;return!(!parentsRequired||!parentsRequired.length)&&(candidate&&$_8i2houjjducwnd2.inArray(parentsRequired,candidate)!==-1?candidate:parentsRequired[0])},wrapInHtml=function(elm,ancestry,siblings){var parent,parentCandidate,parentRequired,ancestor=ancestry.length>0&&ancestry[0],ancestorName=ancestor&&ancestor.name;if(parentRequired=getRequiredParent(elm,ancestorName))ancestorName===parentRequired?(parentCandidate=ancestry[0],ancestry=ancestry.slice(1)):parentCandidate=parentRequired;else if(ancestor)parentCandidate=ancestry[0],ancestry=ancestry.slice(1);else if(!siblings)return elm;return parentCandidate&&(parent=createElement(parentCandidate),parent.appendChild(elm)),siblings&&(parent||(parent=dom.create("div"),parent.appendChild(elm)),$_8i2houjjducwnd2.each(siblings,function(sibling){var siblingElm=createElement(sibling);parent.insertBefore(siblingElm,elm)})),wrapInHtml(parent,ancestry,parentCandidate&&parentCandidate.siblings)};return ancestry&&ancestry.length?(item=ancestry[0],elm=createElement(item),fragment=dom.create("div"),fragment.appendChild(wrapInHtml(elm,ancestry.slice(1),item.siblings)),fragment):""},selectorToHtml=function(selector,editor){return parsedSelectorToHtml(parseSelector(selector),editor)},parseSelectorItem=function(item){var tagName,obj={classes:[],attrs:{}};return item=obj.selector=$_8i2houjjducwnd2.trim(item),"*"!==item&&(tagName=item.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function($0,$1,$2,$3,$4){switch($1){case"#":obj.attrs.id=$2;break;case".":obj.classes.push($2);break;case":":$_8i2houjjducwnd2.inArray("checked disabled enabled read-only required".split(" "),$2)!==-1&&(obj.attrs[$2]=$2)}if("["===$3){var m=$4.match(/([\w\-]+)(?:\=\"([^\"]+))?/);m&&(obj.attrs[m[1]]=m[2])}return""})),obj.name=tagName||"div",obj},parseSelector=function(selector){return selector&&"string"==typeof selector?(selector=selector.split(/\s*,\s*/)[0],selector=selector.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),$_8i2houjjducwnd2.map(selector.split(/(?:>|\s+(?![^\[\]]+\]))/),function(item){var siblings=$_8i2houjjducwnd2.map(item.split(/(?:~\+|~|\+)/),parseSelectorItem),obj=siblings.pop();return siblings.length&&(obj.siblings=siblings),obj}).reverse()):[]},getCssText=function(editor,format){var name,previewFrag,previewElm,items,parentFontSize,previewStyles,previewCss="";if((previewStyles=editor.settings.preview_styles)===!1)return"";"string"!=typeof previewStyles&&(previewStyles="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");var removeVars=function(val){return val.replace(/%(\w+)/g,"")};if("string"==typeof format){if(!(format=editor.formatter.get(format)))return;format=format[0]}return"preview"in format&&(previewStyles=format.preview)===!1?"":(name=format.block||format.inline||"span",items=parseSelector(format.selector),items.length?(items[0].name||(items[0].name=name),name=format.selector,previewFrag=parsedSelectorToHtml(items,editor)):previewFrag=parsedSelectorToHtml([name],editor),previewElm=dom.select(name,previewFrag)[0]||previewFrag.firstChild,each$18(format.styles,function(value,name){(value=removeVars(value))&&dom.setStyle(previewElm,name,value)}),each$18(format.attributes,function(value,name){(value=removeVars(value))&&dom.setAttrib(previewElm,name,value)}),each$18(format.classes,function(value){value=removeVars(value),dom.hasClass(previewElm,value)||dom.addClass(previewElm,value)}),editor.fire("PreviewFormats"),dom.setStyles(previewFrag,{position:"absolute",left:-65535}),editor.getBody().appendChild(previewFrag),parentFontSize=dom.getStyle(editor.getBody(),"fontSize",!0),parentFontSize=/px$/.test(parentFontSize)?parseInt(parentFontSize,10):0,each$18(previewStyles.split(" "),function(name){var value=dom.getStyle(previewElm,name,!0);if(!("background-color"===name&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(value)&&(value=dom.getStyle(editor.getBody(),name,!0),"#ffffff"===dom.toHex(value).toLowerCase())||"color"===name&&"#000000"===dom.toHex(value).toLowerCase())){if("font-size"===name&&/em|%$/.test(value)){if(0===parentFontSize)return;value=parseFloat(value)/(/%$/.test(value)?100:1),value=value*parentFontSize+"px"}"border"===name&&value&&(previewCss+="padding:0 2px;"),previewCss+=name+":"+value+";"}}),editor.fire("AfterPreviewFormats"),dom.remove(previewFrag),previewCss)},$_2e4qhs5pjducwo9j={getCssText:getCssText,parseSelector:parseSelector,selectorToHtml:selectorToHtml},toggle=function(editor,formats,name,vars,node){var fmt=formats.get(name);!$_4os6t23mjducwnv0.match(editor,name,vars,node)||"toggle"in fmt[0]&&!fmt[0].toggle?$_3sj7pb5hjducwo7z.applyFormat(editor,name,vars,node):$_2kyh3s5kjducwo8m.remove(editor,name,vars,node)},$_arphd45qjducwo9s={toggle:toggle},setup$4=function(editor){editor.addShortcut("meta+b","","Bold"),editor.addShortcut("meta+i","","Italic"),editor.addShortcut("meta+u","","Underline");for(var i=1;i<=6;i++)editor.addShortcut("access+"+i,"",["FormatBlock",!1,"h"+i]);editor.addShortcut("access+7","",["FormatBlock",!1,"p"]),editor.addShortcut("access+8","",["FormatBlock",!1,"div"]),editor.addShortcut("access+9","",["FormatBlock",!1,"address"])},$_283uwp5rjducwo9v={setup:setup$4},shallow=function(old,nu){return nu},deep=function(old,nu){return $_c7y6af12jducwnh8.isObject(old)&&$_c7y6af12jducwnh8.isObject(nu)?deepMerge(old,nu):nu},baseMerge=function(merger){return function(){for(var objects=new Array(arguments.length),i=0;i<objects.length;i++)objects[i]=arguments[i];if(0===objects.length)throw new Error("Can't merge zero objects");for(var ret={},j=0;j<objects.length;j++){var curObject=objects[j];for(var key in curObject)curObject.hasOwnProperty(key)&&(ret[key]=merger(ret[key],curObject[key]))}return ret}},deepMerge=baseMerge(deep),merge=baseMerge(shallow),$_7sum4s5ujducwoab={deepMerge:deepMerge,merge:merge},firePreProcess=function(editor,args){return editor.fire("PreProcess",args)},firePostProcess=function(editor,args){return editor.fire("PostProcess",args)},fireRemove=function(editor){return editor.fire("remove")},$_zfmxp5vjducwoaf={firePreProcess:firePreProcess,firePostProcess:firePostProcess,fireRemove:fireRemove},register=function(htmlParser,settings,dom){htmlParser.addAttributeFilter("data-mce-tabindex",function(nodes,name){for(var node,i=nodes.length;i--;)node=nodes[i],node.attr("tabindex",node.attributes.map["data-mce-tabindex"]),node.attr(name,null)}),htmlParser.addAttributeFilter("src,href,style",function(nodes,name){for(var node,value,i=nodes.length,internalName="data-mce-"+name,urlConverter=settings.url_converter,urlConverterScope=settings.url_converter_scope;i--;)node=nodes[i],value=node.attributes.map[internalName],void 0!==value?(node.attr(name,value.length>0?value:null),node.attr(internalName,null)):(value=node.attributes.map[name],"style"===name?value=dom.serializeStyle(dom.parseStyle(value),node.name):urlConverter&&(value=urlConverter.call(urlConverterScope,value,name,node.name)),node.attr(name,value.length>0?value:null))}),htmlParser.addAttributeFilter("class",function(nodes){for(var node,value,i=nodes.length;i--;)node=nodes[i],(value=node.attr("class"))&&(value=node.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),node.attr("class",value.length>0?value:null))}),htmlParser.addAttributeFilter("data-mce-type",function(nodes,name,args){for(var node,i=nodes.length;i--;)node=nodes[i],"bookmark"!==node.attributes.map["data-mce-type"]||args.cleanup||node.remove()}),htmlParser.addNodeFilter("noscript",function(nodes){for(var node,i=nodes.length;i--;)(node=nodes[i].firstChild)&&(node.value=$_g4jbz61rjducwnjq.decode(node.value))}),htmlParser.addNodeFilter("script,style",function(nodes,name){for(var node,value,type,i=nodes.length,trim=function(value){return value.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};i--;)node=nodes[i],value=node.firstChild?node.firstChild.value:"","script"===name?(type=node.attr("type"),type&&node.attr("type","mce-no/type"===type?null:type.replace(/^mce\-/,"")),"xhtml"===settings.element_format&&value.length>0&&(node.firstChild.value="// <![CDATA[\n"+trim(value)+"\n// ]]>")):"xhtml"===settings.element_format&&value.length>0&&(node.firstChild.value="<!--\n"+trim(value)+"\n-->")}),htmlParser.addNodeFilter("#comment",function(nodes){for(var node,i=nodes.length;i--;)node=nodes[i],0===node.value.indexOf("[CDATA[")?(node.name="#cdata",node.type=4,node.value=node.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===node.value.indexOf("mce:protected ")&&(node.name="#text",node.type=3,node.raw=!0,node.value=unescape(node.value).substr(14))}),htmlParser.addNodeFilter("xml:namespace,input",function(nodes,name){for(var node,i=nodes.length;i--;)node=nodes[i],7===node.type?node.remove():1===node.type&&("input"!==name||"type"in node.attributes.map||node.attr("type","text"))}),htmlParser.addAttributeFilter("data-mce-type",function(nodes){$_2dw1bj4jducwn6g.each(nodes,function(node){"format-caret"===node.attr("data-mce-type")&&(node.isEmpty(htmlParser.schema.getNonEmptyElements())?node.remove():node.unwrap())})}),htmlParser.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(nodes,name){for(var i=nodes.length;i--;)nodes[i].attr(name,null)})},trimTrailingBr=function(rootNode){var brNode1,brNode2,isBr=function(node){return node&&"br"===node.name};brNode1=rootNode.lastChild,isBr(brNode1)&&(brNode2=brNode1.prev,isBr(brNode2)&&(brNode1.remove(),brNode2.remove()))},$_7ho7i95wjducwoaj={register:register,trimTrailingBr:trimTrailingBr},preProcess=function(editor,node,args){var impl,doc,oldDoc,dom=editor.dom;return node=node.cloneNode(!0),impl=document.implementation,impl.createHTMLDocument&&(doc=impl.createHTMLDocument(""),$_8i2houjjducwnd2.each("BODY"===node.nodeName?node.childNodes:[node],function(node){doc.body.appendChild(doc.importNode(node,!0))}),node="BODY"!==node.nodeName?doc.body.firstChild:doc.body,oldDoc=dom.doc,dom.doc=doc),$_zfmxp5vjducwoaf.firePreProcess(editor,$_7sum4s5ujducwoab.merge(args,{node:node})),oldDoc&&(dom.doc=oldDoc),node},shouldFireEvent=function(editor,args){return editor&&editor.hasEventListeners("PreProcess")&&!args.no_events},process=function(editor,node,args){return shouldFireEvent(editor,args)?preProcess(editor,node,args):node},$_j6l1k5xjducwoao={process:process},removeAttrs=function(node,names){$_2dw1bj4jducwn6g.each(names,function(name){node.attr(name,null)})},addFontToSpansFilter=function(domParser,styles,fontSizes){domParser.addNodeFilter("font",function(nodes){$_2dw1bj4jducwn6g.each(nodes,function(node){var props=styles.parse(node.attr("style")),color=node.attr("color"),face=node.attr("face"),size=node.attr("size");color&&(props.color=color),face&&(props["font-family"]=face),size&&(props["font-size"]=fontSizes[parseInt(node.attr("size"),10)-1]),node.name="span",node.attr("style",styles.serialize(props)),removeAttrs(node,["color","face","size"])})})},addStrikeToSpanFilter=function(domParser,styles){domParser.addNodeFilter("strike",function(nodes){$_2dw1bj4jducwn6g.each(nodes,function(node){var props=styles.parse(node.attr("style"));props["text-decoration"]="line-through",node.name="span",node.attr("style",styles.serialize(props))})})},addFilters=function(domParser,settings){var styles=Styles();settings.convert_fonts_to_spans&&addFontToSpansFilter(domParser,styles,$_8i2houjjducwnd2.explode(settings.font_size_legacy_values)),addStrikeToSpanFilter(domParser,styles)},register$1=function(domParser,settings){settings.inline_styles&&addFilters(domParser,settings)},$_bpec6l5zjducwobh={register:register$1},whiteSpaceRegExp$3=/^[ \t\r\n]*$/,typeLookup={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},walk$3=function(node,root,prev){var sibling,parent,startName=prev?"lastChild":"firstChild",siblingName=prev?"prev":"next";if(node[startName])return node[startName];if(node!==root){if(sibling=node[siblingName])return sibling;for(parent=node.parent;parent&&parent!==root;parent=parent.parent)if(sibling=parent[siblingName])return sibling}},Node$2=function(){function Node(name,type){this.name=name,this.type=type,1===type&&(this.attributes=[],this.attributes.map={})}return Node.create=function(name,attrs){var node,attrName;if(node=new Node(name,typeLookup[name]||1),attrs)for(attrName in attrs)node.attr(attrName,attrs[attrName]);return node},Node.prototype.replace=function(node){var self=this;return node.parent&&node.remove(),self.insert(node,self),self.remove(),self},Node.prototype.attr=function(name,value){var attrs,i,self=this;if("string"!=typeof name){for(i in name)self.attr(i,name[i]);return self}if(attrs=self.attributes){if(void 0!==value){if(null===value){if(name in attrs.map)for(delete attrs.map[name],i=attrs.length;i--;)if(attrs[i].name===name)return attrs=attrs.splice(i,1),self;return self}if(name in attrs.map){for(i=attrs.length;i--;)if(attrs[i].name===name){attrs[i].value=value;break}}else attrs.push({name:name,value:value});return attrs.map[name]=value,self}return attrs.map[name]}},Node.prototype.clone=function(){var i,l,selfAttrs,selfAttr,cloneAttrs,self=this,clone=new Node(self.name,self.type);if(selfAttrs=self.attributes){for(cloneAttrs=[],cloneAttrs.map={},i=0,l=selfAttrs.length;i<l;i++)selfAttr=selfAttrs[i],"id"!==selfAttr.name&&(cloneAttrs[cloneAttrs.length]={name:selfAttr.name,value:selfAttr.value},cloneAttrs.map[selfAttr.name]=selfAttr.value);clone.attributes=cloneAttrs}return clone.value=self.value,clone.shortEnded=self.shortEnded,clone},Node.prototype.wrap=function(wrapper){var self=this;return self.parent.insert(wrapper,self),wrapper.append(self),self},Node.prototype.unwrap=function(){var node,next,self=this;for(node=self.firstChild;node;)next=node.next,self.insert(node,self,!0),node=next;self.remove()},Node.prototype.remove=function(){var self=this,parent=self.parent,next=self.next,prev=self.prev;return parent&&(parent.firstChild===self?(parent.firstChild=next,next&&(next.prev=null)):prev.next=next,parent.lastChild===self?(parent.lastChild=prev,prev&&(prev.next=null)):next.prev=prev,self.parent=self.next=self.prev=null),self},Node.prototype.append=function(node){var last,self=this;return node.parent&&node.remove(),last=self.lastChild,last?(last.next=node,node.prev=last,self.lastChild=node):self.lastChild=self.firstChild=node,node.parent=self,node},Node.prototype.insert=function(node,refNode,before){var parent;return node.parent&&node.remove(),parent=refNode.parent||this,before?(refNode===parent.firstChild?parent.firstChild=node:refNode.prev.next=node,node.prev=refNode.prev,node.next=refNode,refNode.prev=node):(refNode===parent.lastChild?parent.lastChild=node:refNode.next.prev=node,node.next=refNode.next,node.prev=refNode,refNode.next=node),node.parent=parent,node},Node.prototype.getAll=function(name){var node,self=this,collection=[];for(node=self.firstChild;node;node=walk$3(node,self))node.name===name&&collection.push(node);return collection},Node.prototype.empty=function(){var nodes,i,node,self=this;if(self.firstChild){for(nodes=[],node=self.firstChild;node;node=walk$3(node,self))nodes.push(node);for(i=nodes.length;i--;)node=nodes[i],node.parent=node.firstChild=node.lastChild=node.next=node.prev=null}return self.firstChild=self.lastChild=null,self},Node.prototype.isEmpty=function(elements,whitespace,predicate){var i,name,self=this,node=self.firstChild;if(whitespace=whitespace||{},node)do{if(1===node.type){if(node.attributes.map["data-mce-bogus"])continue;if(elements[node.name])return!1;for(i=node.attributes.length;i--;)if("name"===(name=node.attributes[i].name)||0===name.indexOf("data-mce-bookmark"))return!1}if(8===node.type)return!1;if(3===node.type&&!whiteSpaceRegExp$3.test(node.value))return!1;if(3===node.type&&node.parent&&whitespace[node.parent.name]&&whiteSpaceRegExp$3.test(node.value))return!1;if(predicate&&predicate(node))return!1}while(node=walk$3(node,self));return!0},Node.prototype.walk=function(prev){return walk$3(this,null,prev)},Node}(),paddEmptyNode=function(settings,args,blockElements,node){(settings.padd_empty_with_br||args.insert)&&blockElements[node.name]?node.empty().append(new Node$2("br",1)).shortEnded=!0:node.empty().append(new Node$2("#text",3)).value=" "},isPaddedWithNbsp=function(node){return hasOnlyChild(node,"#text")&&" "===node.firstChild.value},hasOnlyChild=function(node,name){return node&&node.firstChild&&node.firstChild===node.lastChild&&node.firstChild.name===name},isPadded=function(schema,node){var rule=schema.getElementRule(node.name);return rule&&rule.paddEmpty},isEmpty$1=function(schema,nonEmptyElements,whitespaceElements,node){return node.isEmpty(nonEmptyElements,whitespaceElements,function(node){return isPadded(schema,node)})},isLineBreakNode=function(node,blockElements){return node&&(blockElements[node.name]||"br"===node.name)},register$2=function(parser,settings){var schema=parser.schema;settings.remove_trailing_brs&&parser.addNodeFilter("br",function(nodes,_,args){var i,node,parent,lastParent,prev,prevName,elementRule,textNode,l=nodes.length,blockElements=$_8i2houjjducwnd2.extend({},schema.getBlockElements()),nonEmptyElements=schema.getNonEmptyElements(),whiteSpaceElements=schema.getNonEmptyElements();for(blockElements.body=1,i=0;i<l;i++)if(node=nodes[i],parent=node.parent,blockElements[node.parent.name]&&node===parent.lastChild){for(prev=node.prev;prev;){if("span"!==(prevName=prev.name)||"bookmark"!==prev.attr("data-mce-type")){if("br"!==prevName)break;if("br"===prevName){node=null;break}}prev=prev.prev}node&&(node.remove(),isEmpty$1(schema,nonEmptyElements,whiteSpaceElements,parent)&&(elementRule=schema.getElementRule(parent.name))&&(elementRule.removeEmpty?parent.remove():elementRule.paddEmpty&&paddEmptyNode(settings,args,blockElements,parent)))}else{for(lastParent=node;parent&&parent.firstChild===lastParent&&parent.lastChild===lastParent&&(lastParent=parent,!blockElements[parent.name]);)parent=parent.parent;lastParent===parent&&settings.padd_empty_with_br!==!0&&(textNode=new Node$2("#text",3),textNode.value=" ",node.replace(textNode))}}),parser.addAttributeFilter("href",function(nodes){var node,i=nodes.length,appendRel=function(rel){return rel.split(" ").filter(function(p){return p.length>0}).concat(["noopener"]).sort().join(" ")};if(!settings.allow_unsafe_link_target)for(;i--;)node=nodes[i],"a"===node.name&&"_blank"===node.attr("target")&&node.attr("rel",function(rel){var newRel=rel?$_8i2houjjducwnd2.trim(rel):"";return/\b(noopener)\b/g.test(newRel)?newRel:appendRel(newRel)}(node.attr("rel")))}),settings.allow_html_in_named_anchor||parser.addAttributeFilter("id,name",function(nodes){for(var sibling,prevSibling,parent,node,i=nodes.length;i--;)if(node=nodes[i],"a"===node.name&&node.firstChild&&!node.attr("href")){parent=node.parent,sibling=node.lastChild;do{prevSibling=sibling.prev,parent.insert(sibling,node),sibling=prevSibling}while(sibling)}}),settings.fix_list_elements&&parser.addNodeFilter("ul,ol",function(nodes){for(var node,parentNode,i=nodes.length;i--;)if(node=nodes[i],parentNode=node.parent,"ul"===parentNode.name||"ol"===parentNode.name)if(node.prev&&"li"===node.prev.name)node.prev.append(node);else{var li=new Node$2("li",1);li.attr("style","list-style-type: none"),node.wrap(li)}}),settings.validate&&schema.getValidClasses()&&parser.addAttributeFilter("class",function(nodes){for(var node,classList,ci,className,classValue,validClassesMap,valid,i=nodes.length,validClasses=schema.getValidClasses();i--;){for(node=nodes[i],classList=node.attr("class").split(" "),classValue="",ci=0;ci<classList.length;ci++)className=classList[ci],valid=!1,validClassesMap=validClasses["*"],validClassesMap&&validClassesMap[className]&&(valid=!0),validClassesMap=validClasses[node.name],!valid&&validClassesMap&&validClassesMap[className]&&(valid=!0),valid&&(classValue&&(classValue+=" "),classValue+=className);classValue.length||(classValue=null),node.attr("class",classValue)}})},makeMap$4=$_8i2houjjducwnd2.makeMap,each$19=$_8i2houjjducwnd2.each,explode$4=$_8i2houjjducwnd2.explode,extend$3=$_8i2houjjducwnd2.extend,addTempAttr=function(htmlParser,tempAttrs,name){$_8i2houjjducwnd2.inArray(tempAttrs,name)===-1&&(htmlParser.addAttributeFilter(name,function(nodes,name){for(var i=nodes.length;i--;)nodes[i].attr(name,null)}),tempAttrs.push(name))},postProcess$1=function(editor,args,content){if(!args.no_events&&editor){return $_zfmxp5vjducwoaf.firePostProcess(editor,$_7sum4s5ujducwoab.merge(args,{content:content})).content}return content},getHtmlFromNode=function(dom,node,args){var html=$_fz0k4u21jducwnmu.trim(args.getInner?node.innerHTML:dom.getOuterHTML(node));return args.selection?html:$_8i2houjjducwnd2.trim(html)},parseHtml=function(htmlParser,dom,html,args){var parserArgs=args.selection?$_7sum4s5ujducwoab.merge({forced_root_block:!1},args):args,rootNode=htmlParser.parse(html,parserArgs);return $_7ho7i95wjducwoaj.trimTrailingBr(rootNode),rootNode},serializeNode=function(settings,schema,node){return HtmlSerializer(settings,schema).serialize(node)},toHtml=function(editor,settings,schema,rootNode,args){var content=serializeNode(settings,schema,rootNode);return postProcess$1(editor,args,content)},findBlockCaretContainer=function(editor){return $_eh73s937jducwns3.descendant($_5s4uzoyjducwngo.fromDom(editor.getBody()),"*[data-mce-caret]").fold($_60qu7r6jducwn73.constant(null),function(elm){return elm.dom()})},removeIeControlRect=function(editor){editor.selection.setRng(editor.selection.getRng())},showBlockCaretContainer=function(editor,blockCaretContainer){blockCaretContainer.hasAttribute("data-mce-caret")&&(showCaretContainerBlock(blockCaretContainer),removeIeControlRect(editor),editor.selection.scrollIntoView(blockCaretContainer))},handleBlockContainer=function(editor,e){var blockCaretContainer=findBlockCaretContainer(editor);if(blockCaretContainer)return"compositionstart"===e.type?(e.preventDefault(),e.stopPropagation(),void showBlockCaretContainer(editor,blockCaretContainer)):void(hasContent(blockCaretContainer)&&showBlockCaretContainer(editor,blockCaretContainer))},setup$5=function(editor){editor.on("keyup compositionstart",$_60qu7r6jducwn73.curry(handleBlockContainer,editor))},$_cmllon63jducwoc2={setup:setup$5};!function(BookmarkManager){BookmarkManager.isBookmarkNode=$_dcl0u12jjducwnp0.isBookmarkNode}(BookmarkManager||(BookmarkManager={}));var BookmarkManager$1=BookmarkManager,isContentEditableFalse$10=$_fj238m1qjducwnjm.isContentEditableFalse,isContentEditableTrue$6=$_fj238m1qjducwnjm.isContentEditableTrue,getContentEditableRoot$1=function(root,node){for(;node&&node!==root;){if(isContentEditableTrue$6(node)||isContentEditableFalse$10(node))return node;node=node.parentNode}return null},ControlSelection=function(selection,editor){var selectedElm,selectedElmGhost,resizeHelper,resizeHandles,selectedHandle,startX,startY,selectedElmX,selectedElmY,startW,startH,ratio,resizeStarted,width,height,startScrollWidth,startScrollHeight,dom=editor.dom,each=$_8i2houjjducwnd2.each,editableDoc=editor.getDoc(),rootDocument=document,abs=Math.abs,round=Math.round,rootElement=editor.getBody();resizeHandles={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var rootClass=".mce-content-body";editor.contentStyles.push(rootClass+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: content-box;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+rootClass+" .mce-resizehandle:hover {background: #000}"+rootClass+" img[data-mce-selected],"+rootClass+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+rootClass+" .mce-clonedresizable {position: absolute;"+($_cum1kc9jducwn99.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+rootClass+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}");var isImage=function(elm){return elm&&("IMG"===elm.nodeName||editor.dom.is(elm,"figure.image"))},isEventOnImageOutsideRange=function(evt,range){return isImage(evt.target)&&!$_cy7fd256jducwo68.isXYWithinRange(evt.clientX,evt.clientY,range)},contextMenuSelectImage=function(evt){var target=evt.target;isEventOnImageOutsideRange(evt,editor.selection.getRng())&&!evt.isDefaultPrevented()&&(evt.preventDefault(),editor.selection.select(target))},getResizeTarget=function(elm){return editor.dom.is(elm,"figure.image")?elm.querySelector("img"):elm},isResizable=function(elm){var selector=editor.settings.object_resizing;return selector!==!1&&!$_cum1kc9jducwn99.iOS&&("string"!=typeof selector&&(selector="table,img,figure.image,div"),"false"!==elm.getAttribute("data-mce-resize")&&(elm!==editor.getBody()&&$_3yrc4b1fjducwnim.is($_5s4uzoyjducwngo.fromDom(elm),selector)))},resizeGhostElement=function(e){var deltaX,deltaY,proportional,resizeHelperX,resizeHelperY;deltaX=e.screenX-startX,deltaY=e.screenY-startY,width=deltaX*selectedHandle[2]+startW,height=deltaY*selectedHandle[3]+startH,width=width<5?5:width,height=height<5?5:height,proportional=isImage(selectedElm)&&editor.settings.resize_img_proportional!==!1?!$_1xm2zi59jducwo6l.modifierPressed(e):$_1xm2zi59jducwo6l.modifierPressed(e)||isImage(selectedElm)&&selectedHandle[2]*selectedHandle[3]!=0,proportional&&(abs(deltaX)>abs(deltaY)?(height=round(width*ratio),width=round(height/ratio)):(width=round(height/ratio),height=round(width*ratio))),dom.setStyles(getResizeTarget(selectedElmGhost),{width:width,height:height}),resizeHelperX=selectedHandle.startPos.x+deltaX,resizeHelperY=selectedHandle.startPos.y+deltaY,resizeHelperX=resizeHelperX>0?resizeHelperX:0,resizeHelperY=resizeHelperY>0?resizeHelperY:0,dom.setStyles(resizeHelper,{left:resizeHelperX,top:resizeHelperY,display:"block"}),resizeHelper.innerHTML=width+" &times; "+height,selectedHandle[2]<0&&selectedElmGhost.clientWidth<=width&&dom.setStyle(selectedElmGhost,"left",selectedElmX+(startW-width)),selectedHandle[3]<0&&selectedElmGhost.clientHeight<=height&&dom.setStyle(selectedElmGhost,"top",selectedElmY+(startH-height)),deltaX=rootElement.scrollWidth-startScrollWidth,deltaY=rootElement.scrollHeight-startScrollHeight,deltaX+deltaY!==0&&dom.setStyles(resizeHelper,{left:resizeHelperX-deltaX,top:resizeHelperY-deltaY}),resizeStarted||(editor.fire("ObjectResizeStart",{target:selectedElm,width:startW,height:startH}),resizeStarted=!0)},endGhostResize=function(){resizeStarted=!1;var setSizeProp=function(name,value){value&&(selectedElm.style[name]||!editor.schema.isValid(selectedElm.nodeName.toLowerCase(),name)?dom.setStyle(getResizeTarget(selectedElm),name,value):dom.setAttrib(getResizeTarget(selectedElm),name,value))};setSizeProp("width",width),setSizeProp("height",height),dom.unbind(editableDoc,"mousemove",resizeGhostElement),dom.unbind(editableDoc,"mouseup",endGhostResize),rootDocument!==editableDoc&&(dom.unbind(rootDocument,"mousemove",resizeGhostElement),dom.unbind(rootDocument,"mouseup",endGhostResize)),dom.remove(selectedElmGhost),dom.remove(resizeHelper),showResizeRect(selectedElm),editor.fire("ObjectResized",{target:selectedElm,width:width,height:height}),
dom.setAttrib(selectedElm,"style",dom.getAttrib(selectedElm,"style")),editor.nodeChanged()},showResizeRect=function(targetElm){var position,targetWidth,targetHeight,e,rect;hideResizeRect(),unbindResizeHandleEvents(),position=dom.getPos(targetElm,rootElement),selectedElmX=position.x,selectedElmY=position.y,rect=targetElm.getBoundingClientRect(),targetWidth=rect.width||rect.right-rect.left,targetHeight=rect.height||rect.bottom-rect.top,selectedElm!==targetElm&&(selectedElm=targetElm,width=height=0),e=editor.fire("ObjectSelected",{target:targetElm}),isResizable(targetElm)&&!e.isDefaultPrevented()?each(resizeHandles,function(handle,name){var handleElm,startDrag=function(e){startX=e.screenX,startY=e.screenY,startW=getResizeTarget(selectedElm).clientWidth,startH=getResizeTarget(selectedElm).clientHeight,ratio=startH/startW,selectedHandle=handle,handle.startPos={x:targetWidth*handle[0]+selectedElmX,y:targetHeight*handle[1]+selectedElmY},startScrollWidth=rootElement.scrollWidth,startScrollHeight=rootElement.scrollHeight,selectedElmGhost=selectedElm.cloneNode(!0),dom.addClass(selectedElmGhost,"mce-clonedresizable"),dom.setAttrib(selectedElmGhost,"data-mce-bogus","all"),selectedElmGhost.contentEditable=!1,selectedElmGhost.unSelectabe=!0,dom.setStyles(selectedElmGhost,{left:selectedElmX,top:selectedElmY,margin:0}),selectedElmGhost.removeAttribute("data-mce-selected"),rootElement.appendChild(selectedElmGhost),dom.bind(editableDoc,"mousemove",resizeGhostElement),dom.bind(editableDoc,"mouseup",endGhostResize),rootDocument!==editableDoc&&(dom.bind(rootDocument,"mousemove",resizeGhostElement),dom.bind(rootDocument,"mouseup",endGhostResize)),resizeHelper=dom.add(rootElement,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},startW+" &times; "+startH)};handleElm=dom.get("mceResizeHandle"+name),handleElm&&dom.remove(handleElm),handleElm=dom.add(rootElement,"div",{id:"mceResizeHandle"+name,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+name+"-resize; margin:0; padding:0"}),$_cum1kc9jducwn99.ie&&(handleElm.contentEditable=!1),dom.bind(handleElm,"mousedown",function(e){e.stopImmediatePropagation(),e.preventDefault(),startDrag(e)}),handle.elm=handleElm,dom.setStyles(handleElm,{left:targetWidth*handle[0]+selectedElmX-handleElm.offsetWidth/2,top:targetHeight*handle[1]+selectedElmY-handleElm.offsetHeight/2})}):hideResizeRect(),selectedElm.setAttribute("data-mce-selected","1")},hideResizeRect=function(){var name,handleElm;unbindResizeHandleEvents(),selectedElm&&selectedElm.removeAttribute("data-mce-selected");for(name in resizeHandles)(handleElm=dom.get("mceResizeHandle"+name))&&(dom.unbind(handleElm),dom.remove(handleElm))},updateResizeRect=function(e){var startElm,controlElm,isChildOrEqual=function(node,parent){if(node)do{if(node===parent)return!0}while(node=node.parentNode)};if(!resizeStarted&&!editor.removed){if(each(dom.select("img[data-mce-selected],hr[data-mce-selected]"),function(img){img.removeAttribute("data-mce-selected")}),controlElm="mousedown"===e.type?e.target:selection.getNode(),controlElm=dom.$(controlElm).closest("table,img,figure.image,hr")[0],isChildOrEqual(controlElm,rootElement)&&(disableGeckoResize(),startElm=selection.getStart(!0),isChildOrEqual(startElm,controlElm)&&isChildOrEqual(selection.getEnd(!0),controlElm)))return void showResizeRect(controlElm);hideResizeRect()}},isWithinContentEditableFalse=function(elm){return isContentEditableFalse$10(getContentEditableRoot$1(editor.getBody(),elm))},unbindResizeHandleEvents=function(){for(var name_1 in resizeHandles){var handle=resizeHandles[name_1];handle.elm&&(dom.unbind(handle.elm),delete handle.elm)}},disableGeckoResize=function(){try{editor.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(ex){}};editor.on("init",function(){disableGeckoResize(),$_cum1kc9jducwn99.ie&&$_cum1kc9jducwn99.ie>=11&&(editor.on("mousedown click",function(e){var target=e.target,nodeName=target.nodeName;resizeStarted||!/^(TABLE|IMG|HR)$/.test(nodeName)||isWithinContentEditableFalse(target)||(2!==e.button&&editor.selection.select(target,"TABLE"===nodeName),"mousedown"===e.type&&editor.nodeChanged())}),editor.dom.bind(rootElement,"mscontrolselect",function(e){var delayedSelect=function(node){$_83mf8ygjducwnbc.setEditorTimeout(editor,function(){editor.selection.select(node)})};if(isWithinContentEditableFalse(e.target))return e.preventDefault(),void delayedSelect(e.target);/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"===e.target.tagName&&delayedSelect(e.target))}));var throttledUpdateResizeRect=$_83mf8ygjducwnbc.throttle(function(e){editor.composing||updateResizeRect(e)});editor.on("nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged",throttledUpdateResizeRect),editor.on("keyup compositionend",function(e){selectedElm&&"TABLE"===selectedElm.nodeName&&throttledUpdateResizeRect(e)}),editor.on("hide blur",hideResizeRect),editor.on("contextmenu",contextMenuSelectImage)}),editor.on("remove",unbindResizeHandleEvents);var destroy=function(){selectedElm=selectedElmGhost=null};return{isResizable:isResizable,showResizeRect:showResizeRect,hideResizeRect:hideResizeRect,updateResizeRect:updateResizeRect,destroy:destroy}},getPos$1=function(elm){for(var x=0,y=0,offsetParent=elm;offsetParent&&offsetParent.nodeType;)x+=offsetParent.offsetLeft||0,y+=offsetParent.offsetTop||0,offsetParent=offsetParent.offsetParent;return{x:x,y:y}},fireScrollIntoViewEvent=function(editor,elm,alignToTop){var scrollEvent={elm:elm,alignToTop:alignToTop};return editor.fire("scrollIntoView",scrollEvent),scrollEvent.isDefaultPrevented()},scrollIntoView=function(editor,elm,alignToTop){var y,viewPort,viewPortY,viewPortH,dom=editor.dom,root=dom.getRoot(),offsetY=0;if(!fireScrollIntoViewEvent(editor,elm,alignToTop)&&$_fj238m1qjducwnjm.isElement(elm)){if(alignToTop===!1&&(offsetY=elm.offsetHeight),"BODY"!==root.nodeName){var scrollContainer=editor.selection.getScrollContainer();if(scrollContainer)return y=getPos$1(elm).y-getPos$1(scrollContainer).y+offsetY,viewPortH=scrollContainer.clientHeight,viewPortY=scrollContainer.scrollTop,void((y<viewPortY||y+25>viewPortY+viewPortH)&&(scrollContainer.scrollTop=y<viewPortY?y:y-viewPortH+25))}viewPort=dom.getViewPort(editor.getWin()),y=dom.getPos(elm).y+offsetY,viewPortY=viewPort.y,viewPortH=viewPort.h,(y<viewPort.y||y+25>viewPortY+viewPortH)&&editor.getWin().scrollTo(0,y<viewPortY?y:y-viewPortH+25)}},$_7yly5s67jducwode={scrollIntoView:scrollIntoView},hasCeProperty=function(node){return $_fj238m1qjducwnjm.isContentEditableTrue(node)||$_fj238m1qjducwnjm.isContentEditableFalse(node)},findParent$1=function(node,rootNode,predicate){for(;node&&node!==rootNode;){if(predicate(node))return node;node=node.parentNode}return null},findClosestIeRange=function(clientX,clientY,doc){var element,rng,rects;if(element=doc.elementFromPoint(clientX,clientY),rng=doc.body.createTextRange(),element&&"HTML"!==element.tagName||(element=doc.body),rng.moveToElementText(element),rects=$_8i2houjjducwnd2.toArray(rng.getClientRects()),rects=rects.sort(function(a,b){return a=Math.abs(Math.max(a.top-clientY,a.bottom-clientY)),b=Math.abs(Math.max(b.top-clientY,b.bottom-clientY)),a-b}),rects.length>0){clientY=(rects[0].bottom+rects[0].top)/2;try{return rng.moveToPoint(clientX,clientY),rng.collapse(!0),rng}catch(ex){}}return null},moveOutOfContentEditableFalse=function(rng,rootNode){var parentElement=rng&&rng.parentElement?rng.parentElement():null;return $_fj238m1qjducwnjm.isContentEditableFalse(findParent$1(parentElement,rootNode,hasCeProperty))?null:rng},fromPoint$1=function(clientX,clientY,doc){var rng,point,pointDoc=doc;if(pointDoc.caretPositionFromPoint)(point=pointDoc.caretPositionFromPoint(clientX,clientY))&&(rng=doc.createRange(),rng.setStart(point.offsetNode,point.offset),rng.collapse(!0));else if(doc.caretRangeFromPoint)rng=doc.caretRangeFromPoint(clientX,clientY);else if(pointDoc.body.createTextRange){rng=pointDoc.body.createTextRange();try{rng.moveToPoint(clientX,clientY),rng.collapse(!0)}catch(ex){rng=findClosestIeRange(clientX,clientY,doc)}return moveOutOfContentEditableFalse(rng,doc.body)}return rng},$_ghraby68jducwodg={fromPoint:fromPoint$1},processRanges=function(editor,ranges){return $_2dw1bj4jducwn6g.map(ranges,function(range){var evt=editor.fire("GetSelectionRange",{range:range});return evt.range!==range?evt.range:range})},$_at5d1y69jducwodi={processRanges:processRanges},clone$2=function(original,deep){return $_5s4uzoyjducwngo.fromDom(original.dom().cloneNode(deep))},shallow$1=function(original){return clone$2(original,!1)},deep$1=function(original){return clone$2(original,!0)},shallowAs=function(original,tag){var nu=$_5s4uzoyjducwngo.fromTag(tag),attributes=$_60196814jducwnhd.clone(original);return $_60196814jducwnhd.setAll(nu,attributes),nu},copy$1=function(original,tag){var nu=shallowAs(original,tag),cloneChildren=$_f0qt4317jducwnhq.children(deep$1(original));return $_ehpp912qjducwnq3.append(nu,cloneChildren),nu},mutate=function(original,tag){var nu=shallowAs(original,tag);$_ejmufn2ojducwnpy.before(original,nu);var children=$_f0qt4317jducwnhq.children(original);return $_ehpp912qjducwnq3.append(nu,children),$_34vweg2pjducwnq0.remove(original),nu},$_pck3w6cjducwoe4={shallow:shallow$1,shallowAs:shallowAs,deep:deep$1,copy:copy$1,mutate:mutate},fromElements=function(elements,scope){var doc=scope||document,fragment=doc.createDocumentFragment();return $_2dw1bj4jducwn6g.each(elements,function(element){fragment.appendChild(element.dom())}),$_5s4uzoyjducwngo.fromDom(fragment)},$_4i1qfz6djducwoe7={fromElements:fromElements},getStartNode=function(rng){var sc=rng.startContainer,so=rng.startOffset;return $_fj238m1qjducwnjm.isText(sc)?0===so?Option.some($_5s4uzoyjducwngo.fromDom(sc)):Option.none():Option.from(sc.childNodes[so]).map($_5s4uzoyjducwngo.fromDom)},getEndNode=function(rng){var ec=rng.endContainer,eo=rng.endOffset;return $_fj238m1qjducwnjm.isText(ec)?eo===ec.data.length?Option.some($_5s4uzoyjducwngo.fromDom(ec)):Option.none():Option.from(ec.childNodes[eo-1]).map($_5s4uzoyjducwngo.fromDom)},getFirstChildren=function(node){return $_f0qt4317jducwnhq.firstChild(node).fold($_60qu7r6jducwn73.constant([node]),function(child){return[node].concat(getFirstChildren(child))})},getLastChildren$1=function(node){return $_f0qt4317jducwnhq.lastChild(node).fold($_60qu7r6jducwn73.constant([node]),function(child){return"br"===$_47qy15zjducwngt.name(child)?$_f0qt4317jducwnhq.prevSibling(child).map(function(sibling){return[node].concat(getLastChildren$1(sibling))}).getOr([]):[node].concat(getLastChildren$1(child))})},hasAllContentsSelected=function(elm,rng){return $_87ppqy2ejducwnol.liftN([getStartNode(rng),getEndNode(rng)],function(startNode,endNode){var start=$_2dw1bj4jducwn6g.find(getFirstChildren(elm),$_60qu7r6jducwn73.curry($_4qdq5m1djducwnie.eq,startNode)),end=$_2dw1bj4jducwn6g.find(getLastChildren$1(elm),$_60qu7r6jducwn73.curry($_4qdq5m1djducwnie.eq,endNode));return start.isSome()&&end.isSome()}).getOr(!1)},moveEndPoint$1=function(dom,rng,node,start){var root=node,walker=new TreeWalker(node,root),nonEmptyElementsMap=dom.schema.getNonEmptyElements();do{if(3===node.nodeType&&0!==$_8i2houjjducwnd2.trim(node.nodeValue).length)return void(start?rng.setStart(node,0):rng.setEnd(node,node.nodeValue.length));if(nonEmptyElementsMap[node.nodeName]&&!/^(TD|TH)$/.test(node.nodeName))return void(start?rng.setStartBefore(node):"BR"===node.nodeName?rng.setEndBefore(node):rng.setEndAfter(node));if($_cum1kc9jducwn99.ie&&$_cum1kc9jducwn99.ie<11&&dom.isBlock(node)&&dom.isEmpty(node))return void(start?rng.setStart(node,0):rng.setEnd(node,0))}while(node=start?walker.next():walker.prev());"BODY"===root.nodeName&&(start?rng.setStart(root,0):rng.setEnd(root,root.childNodes.length))},tableModel=$_295afp18jducwni4.immutable("element","width","rows"),tableRow=$_295afp18jducwni4.immutable("element","cells"),cellPosition=$_295afp18jducwni4.immutable("x","y"),getSpan=function(td,key){var value=parseInt($_60196814jducwnhd.get(td,key),10);return isNaN(value)?1:value},fillout=function(table,x,y,tr,td){for(var rowspan=getSpan(td,"rowspan"),colspan=getSpan(td,"colspan"),rows=table.rows(),y2=y;y2<y+rowspan;y2++){rows[y2]||(rows[y2]=tableRow($_pck3w6cjducwoe4.deep(tr),[]));for(var x2=x;x2<x+colspan;x2++){rows[y2].cells()[x2]=y2===y&&x2===x?td:$_pck3w6cjducwoe4.shallow(td)}}},cellExists=function(table,x,y){var rows=table.rows();return!!(rows[y]?rows[y].cells():[])[x]},skipCellsX=function(table,x,y){for(;cellExists(table,x,y);)x++;return x},getWidth=function(rows){return $_2dw1bj4jducwn6g.foldl(rows,function(acc,row){return row.cells().length>acc?row.cells().length:acc},0)},findElementPos=function(table,element){for(var rows=table.rows(),y=0;y<rows.length;y++)for(var cells=rows[y].cells(),x=0;x<cells.length;x++)if($_4qdq5m1djducwnie.eq(cells[x],element))return Option.some(cellPosition(x,y));return Option.none()},extractRows=function(table,sx,sy,ex,ey){for(var newRows=[],rows=table.rows(),y=sy;y<=ey;y++){var cells=rows[y].cells(),slice=sx<ex?cells.slice(sx,ex+1):cells.slice(ex,sx+1);newRows.push(tableRow(rows[y].element(),slice))}return newRows},subTable=function(table,startPos,endPos){var sx=startPos.x(),sy=startPos.y(),ex=endPos.x(),ey=endPos.y(),newRows=sy<ey?extractRows(table,sx,sy,ex,ey):extractRows(table,sx,ey,ex,sy);return tableModel(table.element(),getWidth(newRows),newRows)},createDomTable=function(table,rows){var tableElement=$_pck3w6cjducwoe4.shallow(table.element()),tableBody=$_5s4uzoyjducwngo.fromTag("tbody");return $_ehpp912qjducwnq3.append(tableBody,rows),$_ejmufn2ojducwnpy.append(tableElement,tableBody),tableElement},modelRowsToDomRows=function(table){return $_2dw1bj4jducwn6g.map(table.rows(),function(row){var cells=$_2dw1bj4jducwn6g.map(row.cells(),function(cell){var td=$_pck3w6cjducwoe4.deep(cell);return $_60196814jducwnhd.remove(td,"colspan"),$_60196814jducwnhd.remove(td,"rowspan"),td}),tr=$_pck3w6cjducwoe4.shallow(row.element());return $_ehpp912qjducwnq3.append(tr,cells),tr})},fromDom$1=function(tableElm){var table=tableModel($_pck3w6cjducwoe4.shallow(tableElm),0,[]);return $_2dw1bj4jducwn6g.each($_47k8tx2gjducwnot.descendants(tableElm,"tr"),function(tr,y){$_2dw1bj4jducwn6g.each($_47k8tx2gjducwnot.descendants(tr,"td,th"),function(td,x){fillout(table,skipCellsX(table,x,y),y,tr,td)})}),tableModel(table.element(),getWidth(table.rows()),table.rows())},toDom=function(table){return createDomTable(table,modelRowsToDomRows(table))},subsection=function(table,startElement,endElement){return findElementPos(table,startElement).bind(function(startPos){return findElementPos(table,endElement).map(function(endPos){return subTable(table,startPos,endPos)})})},$_7f9nl26fjducwoeq={fromDom:fromDom$1,toDom:toDom,subsection:subsection},findParentListContainer=function(parents){return $_2dw1bj4jducwn6g.find(parents,function(elm){return"ul"===$_47qy15zjducwngt.name(elm)||"ol"===$_47qy15zjducwngt.name(elm)})},getFullySelectedListWrappers=function(parents,rng){return $_2dw1bj4jducwn6g.find(parents,function(elm){return"li"===$_47qy15zjducwngt.name(elm)&&hasAllContentsSelected(elm,rng)}).fold($_60qu7r6jducwn73.constant([]),function(li){return findParentListContainer(parents).map(function(listCont){return[$_5s4uzoyjducwngo.fromTag("li"),$_5s4uzoyjducwngo.fromTag($_47qy15zjducwngt.name(listCont))]}).getOr([])})},wrap$3=function(innerElm,elms){var wrapped=$_2dw1bj4jducwn6g.foldl(elms,function(acc,elm){return $_ejmufn2ojducwnpy.append(elm,acc),elm},innerElm);return elms.length>0?$_4i1qfz6djducwoe7.fromElements([wrapped]):wrapped},directListWrappers=function(commonAnchorContainer){return isListItem(commonAnchorContainer)?$_f0qt4317jducwnhq.parent(commonAnchorContainer).filter(isList).fold($_60qu7r6jducwn73.constant([]),function(listElm){return[commonAnchorContainer,listElm]}):isList(commonAnchorContainer)?[commonAnchorContainer]:[]},getWrapElements=function(rootNode,rng){var commonAnchorContainer=$_5s4uzoyjducwngo.fromDom(rng.commonAncestorContainer),parents=$_b22jto39jducwnsg.parentsAndSelf(commonAnchorContainer,rootNode),wrapElements=$_2dw1bj4jducwn6g.filter(parents,function(elm){return isInline(elm)||isHeading(elm)}),listWrappers=getFullySelectedListWrappers(parents,rng),allWrappers=wrapElements.concat(listWrappers.length?listWrappers:directListWrappers(commonAnchorContainer));return $_2dw1bj4jducwn6g.map(allWrappers,$_pck3w6cjducwoe4.shallow)},emptyFragment=function(){return $_4i1qfz6djducwoe7.fromElements([])},getFragmentFromRange=function(rootNode,rng){return wrap$3($_5s4uzoyjducwngo.fromDom(rng.cloneContents()),getWrapElements(rootNode,rng))},getParentTable=function(rootElm,cell){return $_eh73s937jducwns3.ancestor(cell,"table",$_60qu7r6jducwn73.curry($_4qdq5m1djducwnie.eq,rootElm))},getTableFragment=function(rootNode,selectedTableCells){return getParentTable(rootNode,selectedTableCells[0]).bind(function(tableElm){var firstCell=selectedTableCells[0],lastCell=selectedTableCells[selectedTableCells.length-1],fullTableModel=$_7f9nl26fjducwoeq.fromDom(tableElm);return $_7f9nl26fjducwoeq.subsection(fullTableModel,firstCell,lastCell).map(function(sectionedTableModel){return $_4i1qfz6djducwoe7.fromElements([$_7f9nl26fjducwoeq.toDom(sectionedTableModel)])})}).getOrThunk(emptyFragment)},getSelectionFragment=function(rootNode,ranges){return ranges.length>0&&ranges[0].collapsed?emptyFragment():getFragmentFromRange(rootNode,ranges[0])},read$3=function(rootNode,ranges){var selectedCells=$_7ksohe3ujducwnvz.getCellsFromElementOrRanges(ranges,rootNode);return selectedCells.length>0?getTableFragment(rootNode,selectedCells):getSelectionFragment(rootNode,ranges)},$_32ri926bjducwodq={read:read$3},getContent=function(editor,args){var fragment,rng=editor.selection.getRng(),tmpElm=editor.dom.create("body"),sel=editor.selection.getSel(),ranges=$_at5d1y69jducwodi.processRanges(editor,$_bqfspz3vjducwnw3.getRanges(sel));if(args=args||{},args.get=!0,args.format=args.format||"html",args.selection=!0,args=editor.fire("BeforeGetContent",args),args.isDefaultPrevented())return editor.fire("GetContent",args),args.content;if("text"===args.format)return editor.selection.isCollapsed()?"":$_fz0k4u21jducwnmu.trim(rng.text||(sel.toString?sel.toString():""));rng.cloneContents?(fragment=args.contextual?$_32ri926bjducwodq.read($_5s4uzoyjducwngo.fromDom(editor.getBody()),ranges).dom():rng.cloneContents())&&tmpElm.appendChild(fragment):void 0!==rng.item||void 0!==rng.htmlText?(tmpElm.innerHTML="<br>"+(rng.item?rng.item(0).outerHTML:rng.htmlText),tmpElm.removeChild(tmpElm.firstChild)):tmpElm.innerHTML=rng.toString(),args.getInner=!0;var content=editor.selection.serializer.serialize(tmpElm,args);return"tree"===args.format?content:(args.content=editor.selection.isCollapsed()?"":content,editor.fire("GetContent",args),args.content)},$_dtdsc16ajducwodl={getContent:getContent},setContent=function(editor,content,args){var caretNode,frag,temp,rng=editor.selection.getRng(),doc=editor.getDoc();if(args=args||{format:"html"},args.set=!0,args.selection=!0,args.content=content,!args.no_events&&(args=editor.fire("BeforeSetContent",args),args.isDefaultPrevented()))return void editor.fire("SetContent",args);if(content=args.content,rng.insertNode){content+='<span id="__caret">_</span>',rng.startContainer===doc&&rng.endContainer===doc?doc.body.innerHTML=content:(rng.deleteContents(),0===doc.body.childNodes.length?doc.body.innerHTML=content:rng.createContextualFragment?rng.insertNode(rng.createContextualFragment(content)):(frag=doc.createDocumentFragment(),temp=doc.createElement("div"),frag.appendChild(temp),temp.outerHTML=content,rng.insertNode(frag))),caretNode=editor.dom.get("__caret"),rng=doc.createRange(),rng.setStartBefore(caretNode),rng.setEndBefore(caretNode),editor.selection.setRng(rng),editor.dom.remove("__caret");try{editor.selection.setRng(rng)}catch(ex){}}else rng.item&&(doc.execCommand("Delete",!1,null),rng=editor.getRng()),/^\s+/.test(content)?(rng.pasteHTML('<span id="__mce_tmp">_</span>'+content),editor.dom.remove("__mce_tmp")):rng.pasteHTML(content);args.no_events||editor.fire("SetContent",args)},$_83khmf6gjducwof2={setContent:setContent},getEndpointElement=function(root,rng,start,real,resolve){var container=start?rng.startContainer:rng.endContainer,offset=start?rng.startOffset:rng.endOffset;return Option.from(container).map($_5s4uzoyjducwngo.fromDom).map(function(elm){return real&&rng.collapsed?elm:$_f0qt4317jducwnhq.child(elm,resolve(elm,offset)).getOr(elm)}).bind(function(elm){return $_47qy15zjducwngt.isElement(elm)?Option.some(elm):$_f0qt4317jducwnhq.parent(elm)}).map(function(elm){return elm.dom()}).getOr(root)},getStart$2=function(root,rng,real){return getEndpointElement(root,rng,!0,real,function(elm,offset){return Math.min($_f0qt4317jducwnhq.childNodesCount(elm),offset)})},getEnd=function(root,rng,real){return getEndpointElement(root,rng,!1,real,function(elm,offset){return offset>0?offset-1:offset})},skipEmptyTextNodes=function(node,forwards){for(var orig=node;node&&$_fj238m1qjducwnjm.isText(node)&&0===node.length;)node=forwards?node.nextSibling:node.previousSibling;return node||orig},getNode$1=function(root,rng){var elm,startContainer,endContainer,startOffset,endOffset;return rng?(startContainer=rng.startContainer,endContainer=rng.endContainer,startOffset=rng.startOffset,endOffset=rng.endOffset,elm=rng.commonAncestorContainer,!rng.collapsed&&(startContainer===endContainer&&endOffset-startOffset<2&&startContainer.hasChildNodes()&&(elm=startContainer.childNodes[startOffset]),3===startContainer.nodeType&&3===endContainer.nodeType&&(startContainer=startContainer.length===startOffset?skipEmptyTextNodes(startContainer.nextSibling,!0):startContainer.parentNode,endContainer=0===endOffset?skipEmptyTextNodes(endContainer.previousSibling,!1):endContainer.parentNode,startContainer&&startContainer===endContainer))?startContainer:elm&&3===elm.nodeType?elm.parentNode:elm):root},getSelectedBlocks=function(dom,rng,startElm,endElm){var node,root,selectedBlocks=[];if(root=dom.getRoot(),startElm=dom.getParent(startElm||getStart$2(root,rng,!1),dom.isBlock),endElm=dom.getParent(endElm||getEnd(root,rng,!1),dom.isBlock),startElm&&startElm!==root&&selectedBlocks.push(startElm),startElm&&endElm&&startElm!==endElm){node=startElm;for(var walker=new TreeWalker(startElm,root);(node=walker.next())&&node!==endElm;)dom.isBlock(node)&&selectedBlocks.push(node)}return endElm&&startElm!==endElm&&endElm!==root&&selectedBlocks.push(endElm),selectedBlocks},select$1=function(dom,node,content){return Option.from(node).map(function(node){var idx=dom.nodeIndex(node),rng=dom.createRng();return rng.setStart(node.parentNode,idx),rng.setEnd(node.parentNode,idx+1),content&&(moveEndPoint$1(dom,rng,node,!0),moveEndPoint$1(dom,rng,node,!1)),rng})},each$20=$_8i2houjjducwnd2.each,isNativeIeSelection=function(rng){return!!rng.select},isAttachedToDom=function(node){return!(!node||!node.ownerDocument)&&$_4qdq5m1djducwnie.contains($_5s4uzoyjducwngo.fromDom(node.ownerDocument),$_5s4uzoyjducwngo.fromDom(node))},isValidRange=function(rng){return!!rng&&(!!isNativeIeSelection(rng)||isAttachedToDom(rng.startContainer)&&isAttachedToDom(rng.endContainer))},Selection$1=function(dom,win,serializer,editor){var bookmarkManager,controlSelection,selectedRange,explicitRange,selectorChangedData,setCursorLocation=function(node,offset){var rng=dom.createRng();node?(rng.setStart(node,offset),rng.setEnd(node,offset),setRng(rng),collapse(!1)):(moveEndPoint$1(dom,rng,editor.getBody(),!0),setRng(rng))},getContent=function(args){return $_dtdsc16ajducwodl.getContent(editor,args)},setContent=function(content,args){return $_83khmf6gjducwof2.setContent(editor,content,args)},getStart=function(real){return getStart$2(editor.getBody(),getRng(),real)},getEnd$$1=function(real){return getEnd(editor.getBody(),getRng(),real)},getBookmark=function(type,normalized){return bookmarkManager.getBookmark(type,normalized)},moveToBookmark=function(bookmark){return bookmarkManager.moveToBookmark(bookmark)},select=function(node,content){return select$1(dom,node,content).each(setRng),node},isCollapsed=function(){var rng=getRng(),sel=getSel();return!(!rng||rng.item)&&(rng.compareEndPoints?0===rng.compareEndPoints("StartToEnd",rng):!sel||rng.collapsed)},collapse=function(toStart){var rng=getRng();rng.collapse(!!toStart),setRng(rng)},getSel=function(){return win.getSelection?win.getSelection():win.document.selection},getRng=function(){var selection,rng,elm,doc,tryCompareBoundaryPoints=function(how,sourceRange,destinationRange){try{return sourceRange.compareBoundaryPoints(how,destinationRange)}catch(ex){return-1}};if(!win)return null;if(void 0===(doc=win.document)||null===doc)return null;if(void 0!==editor.bookmark&&$_egbtag48jducwo0y.hasFocus(editor)===!1){var bookmark=$_exyelv3zjducwnzi.getRng(editor);if(bookmark.isSome())return bookmark.map(function(r){return $_at5d1y69jducwodi.processRanges(editor,[r])[0]}).getOr(doc.createRange())}try{(selection=getSel())&&(rng=selection.rangeCount>0?selection.getRangeAt(0):selection.createRange?selection.createRange():doc.createRange())}catch(ex){}return rng=$_at5d1y69jducwodi.processRanges(editor,[rng])[0],rng||(rng=doc.createRange?doc.createRange():doc.body.createTextRange()),rng.setStart&&9===rng.startContainer.nodeType&&rng.collapsed&&(elm=dom.getRoot(),rng.setStart(elm,0),rng.setEnd(elm,0)),selectedRange&&explicitRange&&(0===tryCompareBoundaryPoints(rng.START_TO_START,rng,selectedRange)&&0===tryCompareBoundaryPoints(rng.END_TO_END,rng,selectedRange)?rng=explicitRange:(selectedRange=null,explicitRange=null)),rng},setRng=function(rng,forward){var sel,node,evt;if(isValidRange(rng)){var ieRange=isNativeIeSelection(rng)?rng:null;if(ieRange){explicitRange=null;try{ieRange.select()}catch(ex){}}else{if(sel=getSel(),evt=editor.fire("SetSelectionRange",{range:rng,forward:forward}),rng=evt.range,sel){explicitRange=rng;try{sel.removeAllRanges(),sel.addRange(rng)}catch(ex){}forward===!1&&sel.extend&&(sel.collapse(rng.endContainer,rng.endOffset),sel.extend(rng.startContainer,rng.startOffset)),selectedRange=sel.rangeCount>0?sel.getRangeAt(0):null}rng.collapsed||rng.startContainer!==rng.endContainer||!sel.setBaseAndExtent||$_cum1kc9jducwn99.ie||rng.endOffset-rng.startOffset<2&&rng.startContainer.hasChildNodes()&&(node=rng.startContainer.childNodes[rng.startOffset])&&"IMG"===node.tagName&&(sel.setBaseAndExtent(rng.startContainer,rng.startOffset,rng.endContainer,rng.endOffset),sel.anchorNode===rng.startContainer&&sel.focusNode===rng.endContainer||sel.setBaseAndExtent(node,0,node,1)),editor.fire("AfterSetSelectionRange",{range:rng,forward:forward})}}},setNode=function(elm){return setContent(dom.getOuterHTML(elm)),elm},getNode=function(){return getNode$1(editor.getBody(),getRng())},getSelectedBlocks$$1=function(startElm,endElm){return getSelectedBlocks(dom,getRng(),startElm,endElm)},isForward=function(){var anchorRange,focusRange,sel=getSel();return!(sel&&sel.anchorNode&&sel.focusNode)||(anchorRange=dom.createRng(),anchorRange.setStart(sel.anchorNode,sel.anchorOffset),anchorRange.collapse(!0),focusRange=dom.createRng(),focusRange.setStart(sel.focusNode,sel.focusOffset),focusRange.collapse(!0),anchorRange.compareBoundaryPoints(anchorRange.START_TO_START,focusRange)<=0)},normalize=function(){var rng=getRng();if(!$_bqfspz3vjducwnw3.hasMultipleRanges(getSel())){var normRng=$_altsby3xjducwnz5.normalize(dom,rng);return normRng.each(function(normRng){setRng(normRng,isForward())}),normRng.getOr(rng)}return rng},selectorChanged=function(selector,callback){var currentSelectors;return selectorChangedData||(selectorChangedData={},currentSelectors={},editor.on("NodeChange",function(e){var node=e.element,parents=dom.getParents(node,null,dom.getRoot()),matchedSelectors={};each$20(selectorChangedData,function(callbacks,selector){each$20(parents,function(node){if(dom.is(node,selector))return currentSelectors[selector]||(each$20(callbacks,function(callback){callback(!0,{node:node,selector:selector,parents:parents})}),currentSelectors[selector]=callbacks),matchedSelectors[selector]=callbacks,!1})}),each$20(currentSelectors,function(callbacks,selector){matchedSelectors[selector]||(delete currentSelectors[selector],each$20(callbacks,function(callback){callback(!1,{node:node,selector:selector,parents:parents})}))})})),selectorChangedData[selector]||(selectorChangedData[selector]=[]),selectorChangedData[selector].push(callback),exports},getScrollContainer=function(){for(var scrollContainer,node=dom.getRoot();node&&"BODY"!==node.nodeName;){if(node.scrollHeight>node.clientHeight){scrollContainer=node;break}node=node.parentNode}return scrollContainer},scrollIntoView=function(elm,alignToTop){return $_7yly5s67jducwode.scrollIntoView(editor,elm,alignToTop)},placeCaretAt=function(clientX,clientY){return setRng($_ghraby68jducwodg.fromPoint(clientX,clientY,editor.getDoc()))},getBoundingClientRect=function(){var rng=getRng();return rng.collapsed?CaretPosition$1.fromRangeStart(rng).getClientRects()[0]:rng.getBoundingClientRect()},destroy=function(){win=null,controlSelection.destroy()},exports={bookmarkManager:null,controlSelection:null,dom:dom,win:win,serializer:serializer,editor:editor,collapse:collapse,setCursorLocation:setCursorLocation,getContent:getContent,setContent:setContent,getBookmark:getBookmark,moveToBookmark:moveToBookmark,select:select,isCollapsed:isCollapsed,isForward:isForward,setNode:setNode,getNode:getNode,getSel:getSel,setRng:setRng,getRng:getRng,getStart:getStart,getEnd:getEnd$$1,getSelectedBlocks:getSelectedBlocks$$1,normalize:normalize,selectorChanged:selectorChanged,getScrollContainer:getScrollContainer,scrollIntoView:scrollIntoView,placeCaretAt:placeCaretAt,getBoundingClientRect:getBoundingClientRect,destroy:destroy};return bookmarkManager=BookmarkManager$1(exports),controlSelection=ControlSelection(exports,editor),exports.bookmarkManager=bookmarkManager,exports.controlSelection=controlSelection,exports},isContentEditableFalse$11=$_fj238m1qjducwnjm.isContentEditableFalse,getSelectedNode$1=getSelectedNode,isAfterContentEditableFalse$2=isAfterContentEditableFalse,isBeforeContentEditableFalse$2=isBeforeContentEditableFalse,getVisualCaretPosition=function(walkFn,caretPosition){for(;caretPosition=walkFn(caretPosition);)if(caretPosition.isVisible())return caretPosition;return caretPosition},isMoveInsideSameBlock=function(from,to){var inSameBlock=isInSameBlock(from,to);return!(inSameBlock||!$_fj238m1qjducwnjm.isBr(from.getNode()))||inSameBlock},moveToCeFalseHorizontally=function(direction,editor,getNextPosFn,range){var node,caretPosition,peekCaretPosition,rangeIsInContainerBlock,forwards=direction===HDirection.Forwards,isBeforeContentEditableFalseFn=forwards?isBeforeContentEditableFalse$2:isAfterContentEditableFalse$2;return!range.collapsed&&(node=getSelectedNode$1(range),isContentEditableFalse$11(node))?showCaret(direction,editor,node,direction===HDirection.Backwards):(rangeIsInContainerBlock=isRangeInCaretContainerBlock(range),caretPosition=getNormalizedRangeEndPoint(direction,editor.getBody(),range),isBeforeContentEditableFalseFn(caretPosition)?selectNode(editor,caretPosition.getNode(!forwards)):(caretPosition=getNextPosFn(caretPosition))?isBeforeContentEditableFalseFn(caretPosition)?showCaret(direction,editor,caretPosition.getNode(!forwards),forwards):(peekCaretPosition=getNextPosFn(caretPosition),isBeforeContentEditableFalseFn(peekCaretPosition)&&isMoveInsideSameBlock(caretPosition,peekCaretPosition)?showCaret(direction,editor,peekCaretPosition.getNode(!forwards),forwards):rangeIsInContainerBlock?renderRangeCaret(editor,caretPosition.toRange()):null):rangeIsInContainerBlock?range:null)},moveToCeFalseVertically=function(direction,editor,walkerFn,range){var caretPosition,linePositions,nextLinePositions,closestNextLineRect,caretClientRect,clientX,dist1,dist2,contentEditableFalseNode;if(contentEditableFalseNode=getSelectedNode$1(range),caretPosition=getNormalizedRangeEndPoint(direction,editor.getBody(),range),linePositions=walkerFn(editor.getBody(),isAboveLine(1),caretPosition),
nextLinePositions=$_e6e6g1kjducwnfd.filter(linePositions,isLine(1)),caretClientRect=$_e6e6g1kjducwnfd.last(caretPosition.getClientRects()),(isBeforeContentEditableFalse$2(caretPosition)||isBeforeTable(caretPosition))&&(contentEditableFalseNode=caretPosition.getNode()),(isAfterContentEditableFalse$2(caretPosition)||isAfterTable(caretPosition))&&(contentEditableFalseNode=caretPosition.getNode(!0)),!caretClientRect)return null;if(clientX=caretClientRect.left,(closestNextLineRect=findClosestClientRect(nextLinePositions,clientX))&&isContentEditableFalse$11(closestNextLineRect.node))return dist1=Math.abs(clientX-closestNextLineRect.left),dist2=Math.abs(clientX-closestNextLineRect.right),showCaret(direction,editor,closestNextLineRect.node,dist1<dist2);if(contentEditableFalseNode){var caretPositions=positionsUntil(direction,editor.getBody(),isAboveLine(1),contentEditableFalseNode);if(closestNextLineRect=findClosestClientRect($_e6e6g1kjducwnfd.filter(caretPositions,isLine(1)),clientX))return renderRangeCaret(editor,closestNextLineRect.position.toRange());if(closestNextLineRect=$_e6e6g1kjducwnfd.last($_e6e6g1kjducwnfd.filter(caretPositions,isLine(0))))return renderRangeCaret(editor,closestNextLineRect.position.toRange())}},createTextBlock=function(editor){var textBlock=editor.dom.create(editor.settings.forced_root_block);return(!$_cum1kc9jducwn99.ie||$_cum1kc9jducwn99.ie>=11)&&(textBlock.innerHTML='<br data-mce-bogus="1">'),textBlock},exitPreBlock=function(editor,direction,range){var pre,caretPos,newBlock,caretWalker=CaretWalker(editor.getBody()),getNextVisualCaretPosition=$_6183wb25jducwnn2.curry(getVisualCaretPosition,caretWalker.next),getPrevVisualCaretPosition=$_6183wb25jducwnn2.curry(getVisualCaretPosition,caretWalker.prev);if(range.collapsed&&editor.settings.forced_root_block){if(!(pre=editor.dom.getParent(range.startContainer,"PRE")))return;caretPos=1===direction?getNextVisualCaretPosition(CaretPosition$1.fromRangeStart(range)):getPrevVisualCaretPosition(CaretPosition$1.fromRangeStart(range)),caretPos||(newBlock=createTextBlock(editor),1===direction?editor.$(pre).after(newBlock):editor.$(pre).before(newBlock),editor.selection.select(newBlock,!0),editor.selection.collapse())}},getHorizontalRange=function(editor,forward){var newRange,caretWalker=CaretWalker(editor.getBody()),getNextVisualCaretPosition=$_6183wb25jducwnn2.curry(getVisualCaretPosition,caretWalker.next),getPrevVisualCaretPosition=$_6183wb25jducwnn2.curry(getVisualCaretPosition,caretWalker.prev),direction=forward?HDirection.Forwards:HDirection.Backwards,getNextPosFn=forward?getNextVisualCaretPosition:getPrevVisualCaretPosition,range=editor.selection.getRng();return(newRange=moveToCeFalseHorizontally(direction,editor,getNextPosFn,range))?newRange:(newRange=exitPreBlock(editor,direction,range),newRange?newRange:null)},getVerticalRange=function(editor,down){var newRange,direction=down?1:-1,walkerFn=down?downUntil:upUntil,range=editor.selection.getRng();return(newRange=moveToCeFalseVertically(direction,editor,walkerFn,range))?newRange:(newRange=exitPreBlock(editor,direction,range),newRange?newRange:null)},moveH$1=function(editor,forward){return function(){var newRng=getHorizontalRange(editor,forward);return!!newRng&&(editor.selection.setRng(newRng),!0)}},moveV$1=function(editor,down){return function(){var newRng=getVerticalRange(editor,down);return!!newRng&&(editor.selection.setRng(newRng),!0)}},defaultPatterns=function(patterns){return $_2dw1bj4jducwn6g.map(patterns,function(pattern){return $_7sum4s5ujducwoab.merge({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:$_60qu7r6jducwn73.noop},pattern)})},matchesEvent=function(pattern,evt){return evt.keyCode===pattern.keyCode&&evt.shiftKey===pattern.shiftKey&&evt.altKey===pattern.altKey&&evt.ctrlKey===pattern.ctrlKey&&evt.metaKey===pattern.metaKey},match$1=function(patterns,evt){return $_2dw1bj4jducwn6g.bind(defaultPatterns(patterns),function(pattern){return matchesEvent(pattern,evt)?[pattern]:[]})},action=function(f){for(var x=[],_i=1;_i<arguments.length;_i++)x[_i-1]=arguments[_i];var args=Array.prototype.slice.call(arguments,1);return function(){return f.apply(null,args)}},execute=function(patterns,evt){return $_2dw1bj4jducwn6g.find(match$1(patterns,evt),function(pattern){return pattern.action()})},$_acfmrn6ljducwog1={match:match$1,action:action,execute:execute},executeKeydownOverride=function(editor,caret,evt){var os=$_5hshlmmjducwnfr.detect().os;$_acfmrn6ljducwog1.execute([{keyCode:$_1xm2zi59jducwo6l.RIGHT,action:moveH$1(editor,!0)},{keyCode:$_1xm2zi59jducwo6l.LEFT,action:moveH$1(editor,!1)},{keyCode:$_1xm2zi59jducwo6l.UP,action:moveV$1(editor,!1)},{keyCode:$_1xm2zi59jducwo6l.DOWN,action:moveV$1(editor,!0)},{keyCode:$_1xm2zi59jducwo6l.RIGHT,action:moveH(editor,!0)},{keyCode:$_1xm2zi59jducwo6l.LEFT,action:moveH(editor,!1)},{keyCode:$_1xm2zi59jducwo6l.UP,action:moveV(editor,!1)},{keyCode:$_1xm2zi59jducwo6l.DOWN,action:moveV(editor,!0)},{keyCode:$_1xm2zi59jducwo6l.RIGHT,action:$_41ufni3pjducwnv8.move(editor,caret,!0)},{keyCode:$_1xm2zi59jducwo6l.LEFT,action:$_41ufni3pjducwnv8.move(editor,caret,!1)},{keyCode:$_1xm2zi59jducwo6l.RIGHT,ctrlKey:!os.isOSX(),altKey:os.isOSX(),action:$_41ufni3pjducwnv8.moveNextWord(editor,caret)},{keyCode:$_1xm2zi59jducwo6l.LEFT,ctrlKey:!os.isOSX(),altKey:os.isOSX(),action:$_41ufni3pjducwnv8.movePrevWord(editor,caret)}],evt).each(function(_){evt.preventDefault()})},setup$6=function(editor,caret){editor.on("keydown",function(evt){evt.isDefaultPrevented()===!1&&executeKeydownOverride(editor,caret,evt)})},$_fdi5rz6jjducwofn={setup:setup$6},getParentInlines=function(rootElm,startElm){var parents=$_b22jto39jducwnsg.parentsAndSelf(startElm,rootElm);return $_2dw1bj4jducwn6g.findIndex(parents,isBlock).fold($_60qu7r6jducwn73.constant(parents),function(index){return parents.slice(0,index)})},hasOnlyOneChild$1=function(elm){return 1===$_f0qt4317jducwnhq.children(elm).length},deleteLastPosition=function(forward,editor,target,parentInlines){var isFormatElement=$_60qu7r6jducwn73.curry($_gizh813jjducwnu6.isFormatElement,editor),formatNodes=$_2dw1bj4jducwn6g.map($_2dw1bj4jducwn6g.filter(parentInlines,isFormatElement),function(elm){return elm.dom()});if(0===formatNodes.length)$_92j5pe3ejducwnta.deleteElement(editor,forward,target);else{var pos=$_gizh813jjducwnu6.replaceWithCaretFormat(target.dom(),formatNodes);editor.selection.setRng(pos.toRange())}},deleteCaret$1=function(editor,forward){var rootElm=$_5s4uzoyjducwngo.fromDom(editor.getBody()),startElm=$_5s4uzoyjducwngo.fromDom(editor.selection.getStart()),parentInlines=$_2dw1bj4jducwn6g.filter(getParentInlines(rootElm,startElm),hasOnlyOneChild$1);return $_2dw1bj4jducwn6g.last(parentInlines).map(function(target){var fromPos=CaretPosition$1.fromRangeStart(editor.selection.getRng());return!!$_5jcxyf2zjducwnqv.willDeleteLastPositionInElement(forward,fromPos,target.dom())&&(deleteLastPosition(forward,editor,target,parentInlines),!0)}).getOr(!1)},backspaceDelete$5=function(editor,forward){return!!editor.selection.isCollapsed()&&deleteCaret$1(editor,forward)},$_dtw1xc6njducwog7={backspaceDelete:backspaceDelete$5},executeKeydownOverride$1=function(editor,caret,evt){$_acfmrn6ljducwog1.execute([{keyCode:$_1xm2zi59jducwo6l.BACKSPACE,action:$_acfmrn6ljducwog1.action($_52c8ph3bjducwnsq.backspaceDelete,editor,!1)},{keyCode:$_1xm2zi59jducwo6l.DELETE,action:$_acfmrn6ljducwog1.action($_52c8ph3bjducwnsq.backspaceDelete,editor,!0)},{keyCode:$_1xm2zi59jducwo6l.BACKSPACE,action:$_acfmrn6ljducwog1.action($_a4ivlq3fjducwntl.backspaceDelete,editor,caret,!1)},{keyCode:$_1xm2zi59jducwo6l.DELETE,action:$_acfmrn6ljducwog1.action($_a4ivlq3fjducwntl.backspaceDelete,editor,caret,!0)},{keyCode:$_1xm2zi59jducwo6l.BACKSPACE,action:$_acfmrn6ljducwog1.action($_3kdgsv3ajducwnsk.backspaceDelete,editor,!1)},{keyCode:$_1xm2zi59jducwo6l.DELETE,action:$_acfmrn6ljducwog1.action($_3kdgsv3ajducwnsk.backspaceDelete,editor,!0)},{keyCode:$_1xm2zi59jducwo6l.BACKSPACE,action:$_acfmrn6ljducwog1.action($_d0w5iz2xjducwnqm.backspaceDelete,editor,!1)},{keyCode:$_1xm2zi59jducwo6l.DELETE,action:$_acfmrn6ljducwog1.action($_d0w5iz2xjducwnqm.backspaceDelete,editor,!0)},{keyCode:$_1xm2zi59jducwo6l.BACKSPACE,action:$_acfmrn6ljducwog1.action($_fo6mx3sjducwnvh.backspaceDelete,editor,!1)},{keyCode:$_1xm2zi59jducwo6l.DELETE,action:$_acfmrn6ljducwog1.action($_fo6mx3sjducwnvh.backspaceDelete,editor,!0)},{keyCode:$_1xm2zi59jducwo6l.BACKSPACE,action:$_acfmrn6ljducwog1.action($_dtw1xc6njducwog7.backspaceDelete,editor,!1)},{keyCode:$_1xm2zi59jducwo6l.DELETE,action:$_acfmrn6ljducwog1.action($_dtw1xc6njducwog7.backspaceDelete,editor,!0)}],evt).each(function(_){evt.preventDefault()})},executeKeyupOverride=function(editor,evt){$_acfmrn6ljducwog1.execute([{keyCode:$_1xm2zi59jducwo6l.BACKSPACE,action:$_acfmrn6ljducwog1.action($_52c8ph3bjducwnsq.paddEmptyElement,editor)},{keyCode:$_1xm2zi59jducwo6l.DELETE,action:$_acfmrn6ljducwog1.action($_52c8ph3bjducwnsq.paddEmptyElement,editor)}],evt)},setup$7=function(editor,caret){editor.on("keydown",function(evt){evt.isDefaultPrevented()===!1&&executeKeydownOverride$1(editor,caret,evt)}),editor.on("keyup",function(evt){evt.isDefaultPrevented()===!1&&executeKeyupOverride(editor,evt)})},$_2cbs3w6mjducwog5={setup:setup$7},getBodySetting=function(editor,name,defaultValue){var value=editor.getParam(name,defaultValue);if(value.indexOf("=")!==-1){var bodyObj=editor.getParam(name,"","hash");return bodyObj.hasOwnProperty(editor.id)?bodyObj[editor.id]:defaultValue}return value},getIframeAttrs=function(editor){return editor.getParam("iframe_attrs",{})},getDocType=function(editor){return editor.getParam("doctype","<!DOCTYPE html>")},getDocumentBaseUrl=function(editor){return editor.getParam("document_base_url","")},getBodyId=function(editor){return getBodySetting(editor,"body_id","tinymce")},getBodyClass=function(editor){return getBodySetting(editor,"body_class","")},getContentSecurityPolicy=function(editor){return editor.getParam("content_security_policy","")},shouldPutBrInPre=function(editor){return editor.getParam("br_in_pre",!0)},getForcedRootBlock=function(editor){if(editor.getParam("force_p_newlines",!1))return"p";var block=editor.getParam("forced_root_block","p");return block===!1?"":block},getForcedRootBlockAttrs=function(editor){return editor.getParam("forced_root_block_attrs",{})},getBrNewLineSelector=function(editor){return editor.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")},getNoNewLineSelector=function(editor){return editor.getParam("no_newline_selector","")},shouldKeepStyles=function(editor){return editor.getParam("keep_styles",!0)},shouldEndContainerOnEmtpyBlock=function(editor){return editor.getParam("end_container_on_empty_block",!1)},$_d8dkl56rjducwogt={getIframeAttrs:getIframeAttrs,getDocType:getDocType,getDocumentBaseUrl:getDocumentBaseUrl,getBodyId:getBodyId,getBodyClass:getBodyClass,getContentSecurityPolicy:getContentSecurityPolicy,shouldPutBrInPre:shouldPutBrInPre,getForcedRootBlock:getForcedRootBlock,getForcedRootBlockAttrs:getForcedRootBlockAttrs,getBrNewLineSelector:getBrNewLineSelector,getNoNewLineSelector:getNoNewLineSelector,shouldKeepStyles:shouldKeepStyles,shouldEndContainerOnEmtpyBlock:shouldEndContainerOnEmtpyBlock},firstNonWhiteSpaceNodeSibling=function(node){for(;node;){if(1===node.nodeType||3===node.nodeType&&node.data&&/[\r\n\s]/.test(node.data))return node;node=node.nextSibling}},moveToCaretPosition=function(editor,root){var walker,node,rng,lastNode=root,dom=editor.dom,moveCaretBeforeOnEnterElementsMap=editor.schema.getMoveCaretBeforeOnEnterElements();if(root){if(/^(LI|DT|DD)$/.test(root.nodeName)){var firstChild=firstNonWhiteSpaceNodeSibling(root.firstChild);firstChild&&/^(UL|OL|DL)$/.test(firstChild.nodeName)&&root.insertBefore(dom.doc.createTextNode(" "),root.firstChild)}if(rng=dom.createRng(),root.normalize(),root.hasChildNodes()){for(walker=new TreeWalker(root,root);node=walker.current();){if($_fj238m1qjducwnjm.isText(node)){rng.setStart(node,0),rng.setEnd(node,0);break}if(moveCaretBeforeOnEnterElementsMap[node.nodeName.toLowerCase()]){rng.setStartBefore(node),rng.setEndBefore(node);break}lastNode=node,node=walker.next()}node||(rng.setStart(lastNode,0),rng.setEnd(lastNode,0))}else $_fj238m1qjducwnjm.isBr(root)?root.nextSibling&&dom.isBlock(root.nextSibling)?(rng.setStartBefore(root),rng.setEndBefore(root)):(rng.setStartAfter(root),rng.setEndAfter(root)):(rng.setStart(root,0),rng.setEnd(root,0));editor.selection.setRng(rng),dom.remove(void 0),editor.selection.scrollIntoView(root)}},getEditableRoot=function(dom,node){var parent,editableRoot,root=dom.getRoot();for(parent=node;parent!==root&&"false"!==dom.getContentEditable(parent);)"true"===dom.getContentEditable(parent)&&(editableRoot=parent),parent=parent.parentNode;return parent!==root?editableRoot:root},getParentBlock$2=function(editor){return Option.from(editor.dom.getParent(editor.selection.getStart(!0),editor.dom.isBlock))},getParentBlockName=function(editor){return getParentBlock$2(editor).fold($_60qu7r6jducwn73.constant(""),function(parentBlock){return parentBlock.nodeName.toUpperCase()})},isListItemParentBlock=function(editor){return getParentBlock$2(editor).filter(function(elm){return isListItem($_5s4uzoyjducwngo.fromDom(elm))}).isSome()},$_8sw2ec6tjducwoh3={moveToCaretPosition:moveToCaretPosition,getEditableRoot:getEditableRoot,getParentBlock:getParentBlock$2,getParentBlockName:getParentBlockName,isListItemParentBlock:isListItemParentBlock},hasFirstChild=function(elm,name){return elm.firstChild&&elm.firstChild.nodeName===name},hasParent$1=function(elm,parentName){return elm&&elm.parentNode&&elm.parentNode.nodeName===parentName},isListBlock=function(elm){return elm&&/^(OL|UL|LI)$/.test(elm.nodeName)},isNestedList=function(elm){return isListBlock(elm)&&isListBlock(elm.parentNode)},getContainerBlock=function(containerBlock){var containerBlockParent=containerBlock.parentNode;return/^(LI|DT|DD)$/.test(containerBlockParent.nodeName)?containerBlockParent:containerBlock},isFirstOrLastLi=function(containerBlock,parentBlock,first){for(var node=containerBlock[first?"firstChild":"lastChild"];node&&!$_fj238m1qjducwnjm.isElement(node);)node=node[first?"nextSibling":"previousSibling"];return node===parentBlock},insert$1=function(editor,createNewBlock,containerBlock,parentBlock,newBlockName){var dom=editor.dom,rng=editor.selection.getRng();if(containerBlock!==editor.getBody()){isNestedList(containerBlock)&&(newBlockName="LI");var newBlock=newBlockName?createNewBlock(newBlockName):dom.create("BR");if(isFirstOrLastLi(containerBlock,parentBlock,!0)&&isFirstOrLastLi(containerBlock,parentBlock,!1))hasParent$1(containerBlock,"LI")?dom.insertAfter(newBlock,getContainerBlock(containerBlock)):dom.replace(newBlock,containerBlock);else if(isFirstOrLastLi(containerBlock,parentBlock,!0))hasParent$1(containerBlock,"LI")?(dom.insertAfter(newBlock,getContainerBlock(containerBlock)),newBlock.appendChild(dom.doc.createTextNode(" ")),newBlock.appendChild(containerBlock)):containerBlock.parentNode.insertBefore(newBlock,containerBlock);else if(isFirstOrLastLi(containerBlock,parentBlock,!1))dom.insertAfter(newBlock,getContainerBlock(containerBlock));else{containerBlock=getContainerBlock(containerBlock);var tmpRng=rng.cloneRange();tmpRng.setStartAfter(parentBlock),tmpRng.setEndAfter(containerBlock);var fragment=tmpRng.extractContents();"LI"===newBlockName&&hasFirstChild(fragment,"LI")?(newBlock=fragment.firstChild,dom.insertAfter(fragment,containerBlock)):(dom.insertAfter(fragment,containerBlock),dom.insertAfter(newBlock,containerBlock))}dom.remove(parentBlock),$_8sw2ec6tjducwoh3.moveToCaretPosition(editor,newBlock)}},$_dpgp6x6sjducwogx={insert:insert$1},isEmptyAnchor=function(elm){return elm&&"A"===elm.nodeName&&0===$_8i2houjjducwnd2.trim($_fz0k4u21jducwnmu.trim(elm.innerText||elm.textContent)).length},isTableCell$5=function(node){return node&&/^(TD|TH|CAPTION)$/.test(node.nodeName)},emptyBlock=function(elm){elm.innerHTML='<br data-mce-bogus="1">'},containerAndSiblingName=function(container,nodeName){return container.nodeName===nodeName||container.previousSibling&&container.previousSibling.nodeName===nodeName},canSplitBlock=function(dom,node){return node&&dom.isBlock(node)&&!/^(TD|TH|CAPTION|FORM)$/.test(node.nodeName)&&!/^(fixed|absolute)/i.test(node.style.position)&&"true"!==dom.getContentEditable(node)},trimInlineElementsOnLeftSideOfBlock=function(dom,nonEmptyElementsMap,block){var i,node=block,firstChilds=[];if(node){for(;node=node.firstChild;){if(dom.isBlock(node))return;$_fj238m1qjducwnjm.isElement(node)&&!nonEmptyElementsMap[node.nodeName.toLowerCase()]&&firstChilds.push(node)}for(i=firstChilds.length;i--;)node=firstChilds[i],!node.hasChildNodes()||node.firstChild===node.lastChild&&""===node.firstChild.nodeValue?dom.remove(node):isEmptyAnchor(node)&&dom.remove(node)}},normalizeZwspOffset=function(start,container,offset){return $_fj238m1qjducwnjm.isText(container)===!1?offset:start?1===offset&&container.data.charAt(offset-1)===$_fz0k4u21jducwnmu.ZWSP?0:offset:offset===container.data.length-1&&container.data.charAt(offset)===$_fz0k4u21jducwnmu.ZWSP?container.data.length:offset},includeZwspInRange=function(rng){var newRng=rng.cloneRange();return newRng.setStart(rng.startContainer,normalizeZwspOffset(!0,rng.startContainer,rng.startOffset)),newRng.setEnd(rng.endContainer,normalizeZwspOffset(!1,rng.endContainer,rng.endOffset)),newRng},trimLeadingLineBreaks=function(node){do{$_fj238m1qjducwnjm.isText(node)&&(node.nodeValue=node.nodeValue.replace(/^[\r\n]+/,"")),node=node.firstChild}while(node)},getEditableRoot$1=function(dom,node){var parent,editableRoot,root=dom.getRoot();for(parent=node;parent!==root&&"false"!==dom.getContentEditable(parent);)"true"===dom.getContentEditable(parent)&&(editableRoot=parent),parent=parent.parentNode;return parent!==root?editableRoot:root},setForcedBlockAttrs=function(editor,node){var forcedRootBlockName=$_d8dkl56rjducwogt.getForcedRootBlock(editor);forcedRootBlockName&&forcedRootBlockName.toLowerCase()===node.tagName.toLowerCase()&&editor.dom.setAttribs(node,$_d8dkl56rjducwogt.getForcedRootBlockAttrs(editor))},wrapSelfAndSiblingsInDefaultBlock=function(editor,newBlockName,rng,container,offset){var newBlock,parentBlock,startNode,node,next,rootBlockName,blockName=newBlockName||"P",dom=editor.dom,editableRoot=getEditableRoot$1(dom,container);if(!(parentBlock=dom.getParent(container,dom.isBlock))||!canSplitBlock(dom,parentBlock)){if(parentBlock=parentBlock||editableRoot,rootBlockName=parentBlock===editor.getBody()||isTableCell$5(parentBlock)?parentBlock.nodeName.toLowerCase():parentBlock.parentNode.nodeName.toLowerCase(),!parentBlock.hasChildNodes())return newBlock=dom.create(blockName),setForcedBlockAttrs(editor,newBlock),parentBlock.appendChild(newBlock),rng.setStart(newBlock,0),rng.setEnd(newBlock,0),newBlock;for(node=container;node.parentNode!==parentBlock;)node=node.parentNode;for(;node&&!dom.isBlock(node);)startNode=node,node=node.previousSibling;if(startNode&&editor.schema.isValidChild(rootBlockName,blockName.toLowerCase())){for(newBlock=dom.create(blockName),setForcedBlockAttrs(editor,newBlock),startNode.parentNode.insertBefore(newBlock,startNode),node=startNode;node&&!dom.isBlock(node);)next=node.nextSibling,newBlock.appendChild(node),node=next;rng.setStart(container,offset),rng.setEnd(container,offset)}}return container},addBrToBlockIfNeeded=function(dom,block){var lastChild;block.normalize(),(lastChild=block.lastChild)&&!/^(left|right)$/gi.test(dom.getStyle(lastChild,"float",!0))||dom.add(block,"br")},insert$2=function(editor,evt){var tmpRng,editableRoot,container,offset,parentBlock,shiftKey,newBlock,fragment,containerBlock,parentBlockName,containerBlockName,newBlockName,isAfterLastNodeInContainer,dom=editor.dom,schema=editor.schema,nonEmptyElementsMap=schema.getNonEmptyElements(),rng=editor.selection.getRng(),createNewBlock=function(name){var block,clonedNode,caretNode,node=container,textInlineElements=schema.getTextInlineElements();if(name||"TABLE"===parentBlockName||"HR"===parentBlockName?(block=dom.create(name||newBlockName),setForcedBlockAttrs(editor,block)):block=parentBlock.cloneNode(!1),caretNode=block,$_d8dkl56rjducwogt.shouldKeepStyles(editor)===!1)dom.setAttrib(block,"style",null),dom.setAttrib(block,"class",null);else do{if(textInlineElements[node.nodeName]){if($_gizh813jjducwnu6.isCaretNode(node))continue;clonedNode=node.cloneNode(!1),dom.setAttrib(clonedNode,"id",""),block.hasChildNodes()?(clonedNode.appendChild(block.firstChild),block.appendChild(clonedNode)):(caretNode=clonedNode,block.appendChild(clonedNode))}}while((node=node.parentNode)&&node!==editableRoot);return emptyBlock(caretNode),block},isCaretAtStartOrEndOfBlock=function(start){var walker,node,name,normalizedOffset;if(normalizedOffset=normalizeZwspOffset(start,container,offset),$_fj238m1qjducwnjm.isText(container)&&(start?normalizedOffset>0:normalizedOffset<container.nodeValue.length))return!1;if(container.parentNode===parentBlock&&isAfterLastNodeInContainer&&!start)return!0;if(start&&$_fj238m1qjducwnjm.isElement(container)&&container===parentBlock.firstChild)return!0;if(containerAndSiblingName(container,"TABLE")||containerAndSiblingName(container,"HR"))return isAfterLastNodeInContainer&&!start||!isAfterLastNodeInContainer&&start;for(walker=new TreeWalker(container,parentBlock),$_fj238m1qjducwnjm.isText(container)&&(start&&0===normalizedOffset?walker.prev():start||normalizedOffset!==container.nodeValue.length||walker.next());node=walker.current();){if($_fj238m1qjducwnjm.isElement(node)){if(!node.getAttribute("data-mce-bogus")&&(name=node.nodeName.toLowerCase(),nonEmptyElementsMap[name]&&"br"!==name))return!1}else if($_fj238m1qjducwnjm.isText(node)&&!/^[ \t\r\n]*$/.test(node.nodeValue))return!1;start?walker.prev():walker.next()}return!0},insertNewBlockAfter=function(){newBlock=/^(H[1-6]|PRE|FIGURE)$/.test(parentBlockName)&&"HGROUP"!==containerBlockName?createNewBlock(newBlockName):createNewBlock(),$_d8dkl56rjducwogt.shouldEndContainerOnEmtpyBlock(editor)&&canSplitBlock(dom,containerBlock)&&dom.isEmpty(parentBlock)?newBlock=dom.split(containerBlock,parentBlock):dom.insertAfter(newBlock,parentBlock),$_8sw2ec6tjducwoh3.moveToCaretPosition(editor,newBlock)};if($_altsby3xjducwnz5.normalize(dom,rng).each(function(normRng){rng.setStart(normRng.startContainer,normRng.startOffset),rng.setEnd(normRng.endContainer,normRng.endOffset)}),container=rng.startContainer,offset=rng.startOffset,newBlockName=$_d8dkl56rjducwogt.getForcedRootBlock(editor),shiftKey=evt.shiftKey,$_fj238m1qjducwnjm.isElement(container)&&container.hasChildNodes()&&(isAfterLastNodeInContainer=offset>container.childNodes.length-1,container=container.childNodes[Math.min(offset,container.childNodes.length-1)]||container,offset=isAfterLastNodeInContainer&&$_fj238m1qjducwnjm.isText(container)?container.nodeValue.length:0),editableRoot=getEditableRoot$1(dom,container)){if((newBlockName&&!shiftKey||!newBlockName&&shiftKey)&&(container=wrapSelfAndSiblingsInDefaultBlock(editor,newBlockName,rng,container,offset)),parentBlock=dom.getParent(container,dom.isBlock),containerBlock=parentBlock?dom.getParent(parentBlock.parentNode,dom.isBlock):null,parentBlockName=parentBlock?parentBlock.nodeName.toUpperCase():"",containerBlockName=containerBlock?containerBlock.nodeName.toUpperCase():"","LI"!==containerBlockName||evt.ctrlKey||(parentBlock=containerBlock,containerBlock=containerBlock.parentNode,parentBlockName=containerBlockName),/^(LI|DT|DD)$/.test(parentBlockName)&&dom.isEmpty(parentBlock))return void $_dpgp6x6sjducwogx.insert(editor,createNewBlock,containerBlock,parentBlock,newBlockName);newBlockName&&parentBlock===editor.getBody()||(newBlockName=newBlockName||"P",isCaretContainerBlock(parentBlock)?(newBlock=showCaretContainerBlock(parentBlock),dom.isEmpty(parentBlock)&&emptyBlock(parentBlock),$_8sw2ec6tjducwoh3.moveToCaretPosition(editor,newBlock)):isCaretAtStartOrEndOfBlock()?insertNewBlockAfter():isCaretAtStartOrEndOfBlock(!0)?(newBlock=parentBlock.parentNode.insertBefore(createNewBlock(),parentBlock),$_8sw2ec6tjducwoh3.moveToCaretPosition(editor,containerAndSiblingName(parentBlock,"HR")?newBlock:parentBlock)):(tmpRng=includeZwspInRange(rng).cloneRange(),tmpRng.setEndAfter(parentBlock),fragment=tmpRng.extractContents(),trimLeadingLineBreaks(fragment),newBlock=fragment.firstChild,dom.insertAfter(fragment,parentBlock),trimInlineElementsOnLeftSideOfBlock(dom,nonEmptyElementsMap,newBlock),addBrToBlockIfNeeded(dom,parentBlock),dom.isEmpty(parentBlock)&&emptyBlock(parentBlock),newBlock.normalize(),dom.isEmpty(newBlock)?(dom.remove(newBlock),insertNewBlockAfter()):$_8sw2ec6tjducwoh3.moveToCaretPosition(editor,newBlock)),dom.setAttrib(newBlock,"id",""),editor.fire("NewBlock",{newBlock:newBlock}))}},$_8i6vic6qjducwogh={insert:insert$2},matchesSelector=function(editor,selector){return $_8sw2ec6tjducwoh3.getParentBlock(editor).filter(function(parentBlock){return selector.length>0&&$_3yrc4b1fjducwnim.is($_5s4uzoyjducwngo.fromDom(parentBlock),selector)}).isSome()},shouldInsertBr=function(editor){return matchesSelector(editor,$_d8dkl56rjducwogt.getBrNewLineSelector(editor))},shouldBlockNewLine=function(editor){return matchesSelector(editor,$_d8dkl56rjducwogt.getNoNewLineSelector(editor))},$_8a308n6vjducwohj={shouldInsertBr:shouldInsertBr,shouldBlockNewLine:shouldBlockNewLine},newLineAction=$_elh5kq3djducwnt6.generate([{br:[]},{block:[]},{none:[]}]),shouldBlockNewLine$1=function(editor,shiftKey){return $_8a308n6vjducwohj.shouldBlockNewLine(editor)},isBrMode=function(requiredState){return function(editor,shiftKey){return""===$_d8dkl56rjducwogt.getForcedRootBlock(editor)===requiredState}},inListBlock=function(requiredState){return function(editor,shiftKey){return $_8sw2ec6tjducwoh3.isListItemParentBlock(editor)===requiredState}},inPreBlock=function(requiredState){return function(editor,shiftKey){return"PRE"===$_8sw2ec6tjducwoh3.getParentBlockName(editor)===requiredState}},shouldPutBrInPre$1=function(requiredState){return function(editor,shiftKey){return $_d8dkl56rjducwogt.shouldPutBrInPre(editor)===requiredState}},inBrContext=function(editor,shiftKey){return $_8a308n6vjducwohj.shouldInsertBr(editor)},hasShiftKey=function(editor,shiftKey){return shiftKey},canInsertIntoEditableRoot=function(editor){var forcedRootBlock=$_d8dkl56rjducwogt.getForcedRootBlock(editor),rootEditable=$_8sw2ec6tjducwoh3.getEditableRoot(editor.dom,editor.selection.getStart());return rootEditable&&editor.schema.isValidChild(rootEditable.nodeName,forcedRootBlock?forcedRootBlock:"P")},match$2=function(predicates,action){return function(editor,shiftKey){return $_2dw1bj4jducwn6g.foldl(predicates,function(res,p){return res&&p(editor,shiftKey)},!0)?Option.some(action):Option.none()}},getAction$1=function(editor,evt){return $_fx53xj3ojducwnv6.evaluateUntil([match$2([shouldBlockNewLine$1],newLineAction.none()),match$2([inPreBlock(!0),shouldPutBrInPre$1(!1),hasShiftKey],newLineAction.br()),match$2([inPreBlock(!0),shouldPutBrInPre$1(!1)],newLineAction.block()),match$2([inPreBlock(!0),shouldPutBrInPre$1(!0),hasShiftKey],newLineAction.block()),match$2([inPreBlock(!0),shouldPutBrInPre$1(!0)],newLineAction.br()),match$2([inListBlock(!0),hasShiftKey],newLineAction.br()),match$2([inListBlock(!0)],newLineAction.block()),match$2([isBrMode(!0),hasShiftKey,canInsertIntoEditableRoot],newLineAction.block()),match$2([isBrMode(!0)],newLineAction.br()),match$2([inBrContext],newLineAction.br()),match$2([isBrMode(!1),hasShiftKey],newLineAction.br()),match$2([canInsertIntoEditableRoot],newLineAction.block())],[editor,evt.shiftKey]).getOr(newLineAction.none())},$_9sdqnq6ujducwohe={getAction:getAction$1},insert$3=function(editor,evt){$_9sdqnq6ujducwohe.getAction(editor,evt).fold(function(){$_6wifbs3wjducwnw6.insert(editor,evt)},function(){$_8i6vic6qjducwogh.insert(editor,evt)},$_60qu7r6jducwn73.noop)},$_3bay526pjducwogd={insert:insert$3},endTypingLevel=function(undoManager){undoManager.typing&&(undoManager.typing=!1,undoManager.add())},handleEnterKeyEvent=function(editor,event){event.isDefaultPrevented()||(event.preventDefault(),endTypingLevel(editor.undoManager),editor.undoManager.transact(function(){editor.selection.isCollapsed()===!1&&editor.execCommand("Delete"),$_3bay526pjducwogd.insert(editor,event)}))},setup$8=function(editor){editor.on("keydown",function(event){event.keyCode===$_1xm2zi59jducwo6l.ENTER&&handleEnterKeyEvent(editor,event)})},$_fe17ce6ojducwogc={setup:setup$8},isValidInsertPoint=function(location,caretPosition){return isAtStartOrEnd(location)&&$_fj238m1qjducwnjm.isText(caretPosition.container())},insertNbspAtPosition=function(editor,caretPosition){var container=caretPosition.container(),offset=caretPosition.offset();container.insertData(offset," "),editor.selection.setCursorLocation(container,offset+1)},insertAtLocation=function(editor,caretPosition,location){return!!isValidInsertPoint(location,caretPosition)&&(insertNbspAtPosition(editor,caretPosition),!0)},insertAtCaret$2=function(editor){var isInlineTarget=$_60qu7r6jducwn73.curry($_4m240x32jducwnrf.isInlineTarget,editor),caretPosition=CaretPosition$1.fromRangeStart(editor.selection.getRng());return $_681q3b3ijducwnty.readLocation(isInlineTarget,editor.getBody(),caretPosition).map($_60qu7r6jducwn73.curry(insertAtLocation,editor,caretPosition)).getOr(!1)},isAtStartOrEnd=function(location){return location.fold($_60qu7r6jducwn73.constant(!1),$_60qu7r6jducwn73.constant(!0),$_60qu7r6jducwn73.constant(!0),$_60qu7r6jducwn73.constant(!1))},insertAtSelection=function(editor){return!!editor.selection.isCollapsed()&&insertAtCaret$2(editor)},$_4tz7xy6xjducwohn={insertAtSelection:insertAtSelection},executeKeydownOverride$2=function(editor,evt){$_acfmrn6ljducwog1.execute([{keyCode:$_1xm2zi59jducwo6l.SPACEBAR,action:$_acfmrn6ljducwog1.action($_4tz7xy6xjducwohn.insertAtSelection,editor)}],evt).each(function(_){evt.preventDefault()})},setup$9=function(editor){editor.on("keydown",function(evt){evt.isDefaultPrevented()===!1&&executeKeydownOverride$2(editor,evt)})},$_ayhero6wjducwohl={setup:setup$9},setup$10=function(editor){var caret=$_41ufni3pjducwnv8.setupSelectedState(editor);$_fdi5rz6jjducwofn.setup(editor,caret),$_2cbs3w6mjducwog5.setup(editor,caret),$_fe17ce6ojducwogc.setup(editor),$_ayhero6wjducwohl.setup(editor)},$_6wywm26ijducwofm={setup:setup$10},DOM$2=DOMUtils.DOM,appendStyle=function(editor,text){var head=$_5s4uzoyjducwngo.fromDom(editor.getDoc().head),tag=$_5s4uzoyjducwngo.fromTag("style");$_60196814jducwnhd.set(tag,"type","text/css"),$_ejmufn2ojducwnpy.append(tag,$_5s4uzoyjducwngo.fromText(text)),$_ejmufn2ojducwnpy.append(head,tag)},createParser=function(editor){var parser=DomParser(editor.settings,editor.schema);return parser.addAttributeFilter("src,href,style,tabindex",function(nodes,name){for(var node,value,internalName,i=nodes.length,dom=editor.dom;i--;)if(node=nodes[i],value=node.attr(name),internalName="data-mce-"+name,!node.attributes.map[internalName]){if(0===value.indexOf("data:")||0===value.indexOf("blob:"))continue;"style"===name?(value=dom.serializeStyle(dom.parseStyle(value),node.name),value.length||(value=null),node.attr(internalName,value),node.attr(name,value)):"tabindex"===name?(node.attr(internalName,value),node.attr(name,null)):node.attr(internalName,editor.convertURL(value,name,node.name))}}),parser.addNodeFilter("script",function(nodes){for(var node,type,i=nodes.length;i--;)node=nodes[i],type=node.attr("type")||"no/type",0!==type.indexOf("mce-")&&node.attr("type","mce-"+type)}),parser.addNodeFilter("#cdata",function(nodes){for(var node,i=nodes.length;i--;)node=nodes[i],node.type=8,node.name="#comment",node.value="[CDATA["+node.value+"]]"}),parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(nodes){for(var node,i=nodes.length,nonEmptyElements=editor.schema.getNonEmptyElements();i--;)node=nodes[i],node.isEmpty(nonEmptyElements)&&0===node.getAll("br").length&&(node.append(new Node$2("br",1)).shortEnded=!0)}),parser},autoFocus=function(editor){
editor.settings.auto_focus&&$_83mf8ygjducwnbc.setEditorTimeout(editor,function(){var focusEditor;focusEditor=editor.settings.auto_focus===!0?editor:editor.editorManager.get(editor.settings.auto_focus),focusEditor.destroyed||focusEditor.focus()},100)},initEditor=function(editor){editor.bindPendingEventDelegates(),editor.initialized=!0,editor.fire("init"),editor.focus(!0),editor.nodeChanged({initial:!0}),editor.execCallback("init_instance_callback",editor),autoFocus(editor)},getStyleSheetLoader=function(editor){return editor.inline?DOM$2.styleSheetLoader:editor.dom.styleSheetLoader},initContentBody=function(editor,skipWrite){var body,contentCssText,settings=editor.settings,targetElm=editor.getElement(),doc=editor.getDoc();settings.inline||(editor.getElement().style.visibility=editor.orgVisibility),skipWrite||settings.content_editable||(doc.open(),doc.write(editor.iframeHTML),doc.close()),settings.content_editable&&(editor.on("remove",function(){var bodyEl=this.getBody();DOM$2.removeClass(bodyEl,"mce-content-body"),DOM$2.removeClass(bodyEl,"mce-edit-focus"),DOM$2.setAttrib(bodyEl,"contentEditable",null)}),DOM$2.addClass(targetElm,"mce-content-body"),editor.contentDocument=doc=settings.content_document||document,editor.contentWindow=settings.content_window||window,editor.bodyElement=targetElm,settings.content_document=settings.content_window=null,settings.root_name=targetElm.nodeName.toLowerCase()),body=editor.getBody(),body.disabled=!0,editor.readonly=settings.readonly,editor.readonly||(editor.inline&&"static"===DOM$2.getStyle(body,"position",!0)&&(body.style.position="relative"),body.contentEditable=editor.getParam("content_editable_state",!0)),body.disabled=!1,editor.editorUpload=EditorUpload(editor),editor.schema=Schema(settings),editor.dom=new DOMUtils(doc,{keep_values:!0,url_converter:editor.convertURL,url_converter_scope:editor,hex_colors:settings.force_hex_style_colors,class_filter:settings.class_filter,update_styles:!0,root_element:editor.inline?editor.getBody():null,collect:settings.content_editable,schema:editor.schema,onSetAttrib:function(e){editor.fire("SetAttrib",e)}}),editor.parser=createParser(editor),editor.serializer=DomSerializer$1(settings,editor),editor.selection=Selection$1(editor.dom,editor.getWin(),editor.serializer,editor),editor.formatter=Formatter(editor),editor.undoManager=UndoManager(editor),editor._nodeChangeDispatcher=new NodeChange(editor),editor._selectionOverrides=SelectionOverrides(editor),$_cmllon63jducwoc2.setup(editor),$_6wywm26ijducwofm.setup(editor),$_eu4mtv4yjducwo4f.setup(editor),editor.fire("PreInit"),settings.browser_spellcheck||settings.gecko_spellcheck||(doc.body.spellcheck=!1,DOM$2.setAttrib(body,"spellcheck","false")),editor.quirks=Quirks(editor),editor.fire("PostRender"),settings.directionality&&(body.dir=settings.directionality),settings.nowrap&&(body.style.whiteSpace="nowrap"),settings.protect&&editor.on("BeforeSetContent",function(e){$_8i2houjjducwnd2.each(settings.protect,function(pattern){e.content=e.content.replace(pattern,function(str){return"<!--mce:protected "+escape(str)+"-->"})})}),editor.on("SetContent",function(){editor.addVisual(editor.getBody())}),settings.padd_empty_editor&&editor.on("PostProcess",function(e){e.content=e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|<br \/>|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),editor.load({initial:!0,format:"html"}),editor.startContent=editor.getContent({format:"raw"}),editor.on("compositionstart compositionend",function(e){editor.composing="compositionstart"===e.type}),editor.contentStyles.length>0&&(contentCssText="",$_8i2houjjducwnd2.each(editor.contentStyles,function(style){contentCssText+=style+"\r\n"}),editor.dom.addStyle(contentCssText)),getStyleSheetLoader(editor).loadAll(editor.contentCSS,function(_){initEditor(editor)},function(urls){initEditor(editor)}),settings.content_style&&appendStyle(editor,settings.content_style)},$_ecyfcj4ljducwo2r={initContentBody:initContentBody},DOM$3=DOMUtils.DOM,relaxDomain=function(editor,ifr){if(document.domain!==window.location.hostname&&$_cum1kc9jducwn99.ie&&$_cum1kc9jducwn99.ie<12){var bodyUuid=$_48t1mg4wjducwo4b.uuid("mce");editor[bodyUuid]=function(){$_ecyfcj4ljducwo2r.initContentBody(editor)};var domainRelaxUrl='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+editor.id+'");document.write(ed.iframeHTML);document.close();ed.'+bodyUuid+"(true);})()";return DOM$3.setAttrib(ifr,"src",domainRelaxUrl),!0}return!1},normalizeHeight=function(height){var normalizedHeight="number"==typeof height?height+"px":height;return normalizedHeight?normalizedHeight:""},createIframeElement=function(id,title,height,customAttrs){var iframe=$_5s4uzoyjducwngo.fromTag("iframe");return $_60196814jducwnhd.setAll(iframe,customAttrs),$_60196814jducwnhd.setAll(iframe,{id:id+"_ifr",frameBorder:"0",allowTransparency:"true",title:title}),$_6dooji11jducwngx.setAll(iframe,{width:"100%",height:normalizeHeight(height),display:"block"}),iframe},getIframeHtml=function(editor){var bodyId,bodyClass,iframeHTML;return iframeHTML=$_d8dkl56rjducwogt.getDocType(editor)+"<html><head>",$_d8dkl56rjducwogt.getDocumentBaseUrl(editor)!==editor.documentBaseUrl&&(iframeHTML+='<base href="'+editor.documentBaseURI.getURI()+'" />'),iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',bodyId=$_d8dkl56rjducwogt.getBodyId(editor),bodyClass=$_d8dkl56rjducwogt.getBodyClass(editor),$_d8dkl56rjducwogt.getContentSecurityPolicy(editor)&&(iframeHTML+='<meta http-equiv="Content-Security-Policy" content="'+$_d8dkl56rjducwogt.getContentSecurityPolicy(editor)+'" />'),iframeHTML+='</head><body id="'+bodyId+'" class="mce-content-body '+bodyClass+'" data-id="'+editor.id+'"><br></body></html>'},createIframe=function(editor,o){var title=editor.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),ifr=createIframeElement(editor.id,title,o.height,$_d8dkl56rjducwogt.getIframeAttrs(editor)).dom();ifr.onload=function(){ifr.onload=null,editor.fire("load")};var isDomainRelaxed=relaxDomain(editor,ifr);return editor.contentAreaContainer=o.iframeContainer,editor.iframeElement=ifr,editor.iframeHTML=getIframeHtml(editor),DOM$3.add(o.iframeContainer,ifr),isDomainRelaxed},init$1=function(editor,boxInfo){var isDomainRelaxed=createIframe(editor,boxInfo);boxInfo.editorContainer&&(DOM$3.get(boxInfo.editorContainer).style.display=editor.orgDisplay,editor.hidden=DOM$3.isHidden(boxInfo.editorContainer)),editor.getElement().style.display="none",DOM$3.setAttrib(editor.id,"aria-hidden",!0),isDomainRelaxed||$_ecyfcj4ljducwo2r.initContentBody(editor)},$_gd1a706zjducwoi3={init:init$1},DOM$4=DOMUtils.DOM,initPlugin=function(editor,initializedPlugins,plugin){var pluginUrl,pluginInstance,Plugin=PluginManager$1.get(plugin);if(pluginUrl=PluginManager$1.urls[plugin]||editor.documentBaseUrl.replace(/\/$/,""),plugin=$_8i2houjjducwnd2.trim(plugin),Plugin&&$_8i2houjjducwnd2.inArray(initializedPlugins,plugin)===-1){if($_8i2houjjducwnd2.each(PluginManager$1.dependencies(plugin),function(dep){initPlugin(editor,initializedPlugins,dep)}),editor.plugins[plugin])return;pluginInstance=new Plugin(editor,pluginUrl,editor.$),editor.plugins[plugin]=pluginInstance,pluginInstance.init&&(pluginInstance.init(editor,pluginUrl),initializedPlugins.push(plugin))}},trimLegacyPrefix=function(name){return name.replace(/^\-/,"")},initPlugins=function(editor){var initializedPlugins=[];$_8i2houjjducwnd2.each(editor.settings.plugins.split(/[ ,]/),function(name){initPlugin(editor,initializedPlugins,trimLegacyPrefix(name))})},initTheme=function(editor){var Theme,theme=editor.settings.theme;$_c7y6af12jducwnh8.isString(theme)?(editor.settings.theme=trimLegacyPrefix(theme),Theme=ThemeManager.get(theme),editor.theme=new Theme(editor,ThemeManager.urls[theme]),editor.theme.init&&editor.theme.init(editor,ThemeManager.urls[theme]||editor.documentBaseUrl.replace(/\/$/,""),editor.$)):editor.theme={}},renderFromLoadedTheme=function(editor){var w,h,minHeight,re,info,settings=editor.settings,elm=editor.getElement();return w=settings.width||DOM$4.getStyle(elm,"width")||"100%",h=settings.height||DOM$4.getStyle(elm,"height")||elm.offsetHeight,minHeight=settings.min_height||100,re=/^[0-9\.]+(|px)$/i,re.test(""+w)&&(w=Math.max(parseInt(w,10),100)),re.test(""+h)&&(h=Math.max(parseInt(h,10),minHeight)),info=editor.theme.renderUI({targetNode:elm,width:w,height:h,deltaWidth:settings.delta_width,deltaHeight:settings.delta_height}),settings.content_editable||(h=(info.iframeHeight||h)+("number"==typeof h?info.deltaHeight||0:""))<minHeight&&(h=minHeight),info.height=h,info},renderFromThemeFunc=function(editor){var info,elm=editor.getElement();return info=editor.settings.theme(editor,elm),info.editorContainer.nodeType&&(info.editorContainer.id=info.editorContainer.id||editor.id+"_parent"),info.iframeContainer&&info.iframeContainer.nodeType&&(info.iframeContainer.id=info.iframeContainer.id||editor.id+"_iframecontainer"),info.height=info.iframeHeight?info.iframeHeight:elm.offsetHeight,info},createThemeFalseResult=function(element){return{editorContainer:element,iframeContainer:element}},renderThemeFalseIframe=function(targetElement){var iframeContainer=DOM$4.create("div");return DOM$4.insertAfter(iframeContainer,targetElement),createThemeFalseResult(iframeContainer)},renderThemeFalse=function(editor){var targetElement=editor.getElement();return editor.inline?createThemeFalseResult(null):renderThemeFalseIframe(targetElement)},renderThemeUi=function(editor){var settings=editor.settings,elm=editor.getElement();return editor.orgDisplay=elm.style.display,$_c7y6af12jducwnh8.isString(settings.theme)?renderFromLoadedTheme(editor):$_c7y6af12jducwnh8.isFunction(settings.theme)?renderFromThemeFunc(editor):renderThemeFalse(editor)},init$2=function(editor){var boxInfo,settings=editor.settings,elm=editor.getElement();return editor.rtl=settings.rtl_ui||editor.editorManager.i18n.rtl,editor.editorManager.i18n.setCode(settings.language),settings.aria_label=settings.aria_label||DOM$4.getAttrib(elm,"aria-label",editor.getLang("aria.rich_text_area")),editor.fire("ScriptsLoaded"),initTheme(editor),initPlugins(editor),boxInfo=renderThemeUi(editor),editor.editorContainer=boxInfo.editorContainer?boxInfo.editorContainer:null,settings.content_css&&$_8i2houjjducwnd2.each($_8i2houjjducwnd2.explode(settings.content_css),function(u){editor.contentCSS.push(editor.documentBaseURI.toAbsolute(u))}),settings.content_editable?$_ecyfcj4ljducwo2r.initContentBody(editor):$_gd1a706zjducwoi3.init(editor,boxInfo)},$_e8f9kd4ijducwo2h={init:init$2},DOM$5=DOMUtils.DOM,hasSkipLoadPrefix=function(name){return"-"===name.charAt(0)},loadLanguage=function(scriptLoader,editor){var settings=editor.settings;settings.language&&"en"!==settings.language&&!settings.language_url&&(settings.language_url=editor.editorManager.baseURL+"/langs/"+settings.language+".js"),settings.language_url&&!editor.editorManager.i18n.data[settings.language]&&scriptLoader.add(settings.language_url)},loadTheme=function(scriptLoader,editor,suffix,callback){var settings=editor.settings,theme=settings.theme;if($_c7y6af12jducwnh8.isString(theme)){if(!hasSkipLoadPrefix(theme)&&!ThemeManager.urls.hasOwnProperty(theme)){var themeUrl=settings.theme_url;themeUrl?ThemeManager.load(theme,editor.documentBaseURI.toAbsolute(themeUrl)):ThemeManager.load(theme,"themes/"+theme+"/theme"+suffix+".js")}scriptLoader.loadQueue(function(){ThemeManager.waitFor(theme,callback)})}else callback()},loadPlugins=function(settings,suffix){$_8i2houjjducwnd2.isArray(settings.plugins)&&(settings.plugins=settings.plugins.join(" ")),$_8i2houjjducwnd2.each(settings.external_plugins,function(url,name){PluginManager$1.load(name,url),settings.plugins+=" "+name}),$_8i2houjjducwnd2.each(settings.plugins.split(/[ ,]/),function(plugin){if((plugin=$_8i2houjjducwnd2.trim(plugin))&&!PluginManager$1.urls[plugin])if(hasSkipLoadPrefix(plugin)){plugin=plugin.substr(1,plugin.length);var dependencies=PluginManager$1.dependencies(plugin);$_8i2houjjducwnd2.each(dependencies,function(dep){var defaultSettings={prefix:"plugins/",resource:dep,suffix:"/plugin"+suffix+".js"};dep=PluginManager$1.createUrl(defaultSettings,dep),PluginManager$1.load(dep.resource,dep)})}else PluginManager$1.load(plugin,{prefix:"plugins/",resource:plugin,suffix:"/plugin"+suffix+".js"})})},loadScripts=function(editor,suffix){var scriptLoader=ScriptLoader.ScriptLoader;loadTheme(scriptLoader,editor,suffix,function(){loadLanguage(scriptLoader,editor),loadPlugins(editor.settings,suffix),scriptLoader.loadQueue(function(){editor.removed||$_e8f9kd4ijducwo2h.init(editor)},editor,function(urls){$_9erk7k4hjducwo2e.pluginLoadError(editor,urls[0]),editor.removed||$_e8f9kd4ijducwo2h.init(editor)})})},render=function(editor){var settings=editor.settings,id=editor.id,readyHandler=function(){DOM$5.unbind(window,"ready",readyHandler),editor.render()};if(!EventUtils.Event.domLoaded)return void DOM$5.bind(window,"ready",readyHandler);if(editor.getElement()&&$_cum1kc9jducwn99.contentEditable){settings.inline?editor.inline=!0:(editor.orgVisibility=editor.getElement().style.visibility,editor.getElement().style.visibility="hidden");var form=editor.getElement().form||DOM$5.getParent(id,"form");form&&(editor.formElement=form,settings.hidden_input&&!/TEXTAREA|INPUT/i.test(editor.getElement().nodeName)&&(DOM$5.insertAfter(DOM$5.create("input",{type:"hidden",name:id}),id),editor.hasHiddenInput=!0),editor.formEventDelegate=function(e){editor.fire(e.type,e)},DOM$5.bind(form,"submit reset",editor.formEventDelegate),editor.on("reset",function(){editor.setContent(editor.startContent,{format:"raw"})}),!settings.submit_patch||form.submit.nodeType||form.submit.length||form._mceOldSubmit||(form._mceOldSubmit=form.submit,form.submit=function(){return editor.editorManager.triggerSave(),editor.setDirty(!1),form._mceOldSubmit(form)})),editor.windowManager=WindowManager(editor),editor.notificationManager=NotificationManager(editor),"xml"===settings.encoding&&editor.on("GetContent",function(e){e.save&&(e.content=DOM$5.encode(e.content))}),settings.add_form_submit_trigger&&editor.on("submit",function(){editor.initialized&&editor.save()}),settings.add_unload_trigger&&(editor._beforeUnload=function(){!editor.initialized||editor.destroyed||editor.isHidden()||editor.save({format:"raw",no_events:!0,set_dirty:!1})},editor.editorManager.on("BeforeUnload",editor._beforeUnload)),editor.editorManager.add(editor),loadScripts(editor,editor.suffix)}},$_fcx95i4bjducwo1f={render:render},add=function(editor,name,settings){var sidebars=editor.sidebars?editor.sidebars:[];sidebars.push({name:name,settings:settings}),editor.sidebars=sidebars},$_fdgakl70jducwoi8={add:add},each$21=$_8i2houjjducwnd2.each,trim$4=$_8i2houjjducwnd2.trim,queryParts="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),DEFAULT_PORTS={ftp:21,http:80,https:443,mailto:25},URI=function(url,settings){var baseUri,baseUrl,self=this;if(url=trim$4(url),settings=self.settings=settings||{},baseUri=settings.base_uri,/^([\w\-]+):([^\/]{2})/i.test(url)||/^\s*#/.test(url))return void(self.source=url);var isProtocolRelative=0===url.indexOf("//");0!==url.indexOf("/")||isProtocolRelative||(url=(baseUri?baseUri.protocol||"http":"http")+"://mce_host"+url),/^[\w\-]*:?\/\//.test(url)||(baseUrl=settings.base_uri?settings.base_uri.path:new URI(document.location.href).directory,""==settings.base_uri.protocol?url="//mce_host"+self.toAbsPath(baseUrl,url):(url=/([^#?]*)([#?]?.*)/.exec(url),url=(baseUri&&baseUri.protocol||"http")+"://mce_host"+self.toAbsPath(baseUrl,url[1])+url[2])),url=url.replace(/@@/g,"(mce_at)"),url=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(url),each$21(queryParts,function(v,i){var part=url[i];part&&(part=part.replace(/\(mce_at\)/g,"@@")),self[v]=part}),baseUri&&(self.protocol||(self.protocol=baseUri.protocol),self.userInfo||(self.userInfo=baseUri.userInfo),self.port||"mce_host"!==self.host||(self.port=baseUri.port),self.host&&"mce_host"!==self.host||(self.host=baseUri.host),self.source=""),isProtocolRelative&&(self.protocol="")};URI.prototype={setPath:function(path){var self=this;path=/^(.*?)\/?(\w+)?$/.exec(path),self.path=path[0],self.directory=path[1],self.file=path[2],self.source="",self.getURI()},toRelative:function(uri){var output,self=this;if("./"===uri)return uri;if(uri=new URI(uri,{base_uri:self}),"mce_host"!==uri.host&&self.host!==uri.host&&uri.host||self.port!==uri.port||self.protocol!==uri.protocol&&""!==uri.protocol)return uri.getURI();var tu=self.getURI(),uu=uri.getURI();return tu===uu||"/"===tu.charAt(tu.length-1)&&tu.substr(0,tu.length-1)===uu?tu:(output=self.toRelPath(self.path,uri.path),uri.query&&(output+="?"+uri.query),uri.anchor&&(output+="#"+uri.anchor),output)},toAbsolute:function(uri,noHost){return uri=new URI(uri,{base_uri:this}),uri.getURI(noHost&&this.isSameOrigin(uri))},isSameOrigin:function(uri){if(this.host==uri.host&&this.protocol==uri.protocol){if(this.port==uri.port)return!0;var defaultPort=DEFAULT_PORTS[this.protocol];if(defaultPort&&(this.port||defaultPort)==(uri.port||defaultPort))return!0}return!1},toRelPath:function(base,path){var items,i,l,breakPoint=0,out="";if(base=base.substring(0,base.lastIndexOf("/")),base=base.split("/"),items=path.split("/"),base.length>=items.length)for(i=0,l=base.length;i<l;i++)if(i>=items.length||base[i]!==items[i]){breakPoint=i+1;break}if(base.length<items.length)for(i=0,l=items.length;i<l;i++)if(i>=base.length||base[i]!==items[i]){breakPoint=i+1;break}if(1===breakPoint)return path;for(i=0,l=base.length-(breakPoint-1);i<l;i++)out+="../";for(i=breakPoint-1,l=items.length;i<l;i++)out+=i!==breakPoint-1?"/"+items[i]:items[i];return out},toAbsPath:function(base,path){var i,tr,outPath,nb=0,o=[];for(tr=/\/$/.test(path)?"/":"",base=base.split("/"),path=path.split("/"),each$21(base,function(k){k&&o.push(k)}),base=o,i=path.length-1,o=[];i>=0;i--)0!==path[i].length&&"."!==path[i]&&(".."!==path[i]?nb>0?nb--:o.push(path[i]):nb++);return i=base.length-nb,outPath=i<=0?o.reverse().join("/"):base.slice(0,i).join("/")+"/"+o.reverse().join("/"),0!==outPath.indexOf("/")&&(outPath="/"+outPath),tr&&outPath.lastIndexOf("/")!==outPath.length-1&&(outPath+=tr),outPath},getURI:function(noProtoHost){var s,self=this;return self.source&&!noProtoHost||(s="",noProtoHost||(s+=self.protocol?self.protocol+"://":"//",self.userInfo&&(s+=self.userInfo+"@"),self.host&&(s+=self.host),self.port&&(s+=":"+self.port)),self.path&&(s+=self.path),self.query&&(s+="?"+self.query),self.anchor&&(s+="#"+self.anchor),self.source=s),self.source}},URI.parseDataUri=function(uri){var type,matches;return uri=decodeURIComponent(uri).split(","),matches=/data:([^;]+)/.exec(uri[0]),matches&&(type=matches[1]),{type:type,data:uri[1]}},URI.getDocumentBaseUrl=function(loc){var baseUrl;return baseUrl=0!==loc.protocol.indexOf("http")&&"file:"!==loc.protocol?loc.href:loc.protocol+"//"+loc.host+loc.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(baseUrl)&&(baseUrl=baseUrl.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(baseUrl)||(baseUrl+="/")),baseUrl};var traverse=function(node,fn){fn(node),node.firstChild&&traverse(node.firstChild,fn),node.next&&traverse(node.next,fn)},findMatchingNodes=function(nodeFilters,attributeFilters,node){var nodeMatches={},attrMatches={},matches=[];node.firstChild&&traverse(node.firstChild,function(node){$_2dw1bj4jducwn6g.each(nodeFilters,function(filter){filter.name===node.name&&(nodeMatches[filter.name]?nodeMatches[filter.name].nodes.push(node):nodeMatches[filter.name]={filter:filter,nodes:[node]})}),$_2dw1bj4jducwn6g.each(attributeFilters,function(filter){"string"==typeof node.attr(filter.name)&&(attrMatches[filter.name]?attrMatches[filter.name].nodes.push(node):attrMatches[filter.name]={filter:filter,nodes:[node]})})});for(var name_1 in nodeMatches)nodeMatches.hasOwnProperty(name_1)&&matches.push(nodeMatches[name_1]);for(var name_2 in attrMatches)attrMatches.hasOwnProperty(name_2)&&matches.push(attrMatches[name_2]);return matches},filter$3=function(nodeFilters,attributeFilters,node){var matches=findMatchingNodes(nodeFilters,attributeFilters,node);$_2dw1bj4jducwn6g.each(matches,function(match){$_2dw1bj4jducwn6g.each(match.filter.callbacks,function(callback){callback(match.nodes,match.filter.name,{})})})},isTreeNode=function(content){return content instanceof Node$2},setContentString=function(editor,content,args){var forcedRootBlockName,padd,body=editor.getBody();return 0===content.length||/^\s+$/.test(content)?(padd='<br data-mce-bogus="1">',"TABLE"===body.nodeName?content="<tr><td>"+padd+"</td></tr>":/^(UL|OL)$/.test(body.nodeName)&&(content="<li>"+padd+"</li>"),forcedRootBlockName=editor.settings.forced_root_block,forcedRootBlockName&&editor.schema.isValidChild(body.nodeName.toLowerCase(),forcedRootBlockName.toLowerCase())?(content=padd,content=editor.dom.createHTML(forcedRootBlockName,editor.settings.forced_root_block_attrs,content)):content||(content='<br data-mce-bogus="1">'),editor.dom.setHTML(body,content),editor.fire("SetContent",args)):("raw"!==args.format&&(content=HtmlSerializer({validate:editor.validate},editor.schema).serialize(editor.parser.parse(content,{isRootContent:!0,insert:!0}))),args.content=$_8i2houjjducwnd2.trim(content),editor.dom.setHTML(body,args.content),args.no_events||editor.fire("SetContent",args)),args.content},setContentTree=function(editor,content,args){filter$3(editor.parser.getNodeFilters(),editor.parser.getAttributeFilters(),content);var html=HtmlSerializer({validate:editor.validate},editor.schema).serialize(content);return args.content=$_8i2houjjducwnd2.trim(html),editor.dom.setHTML(editor.getBody(),args.content),args.no_events||editor.fire("SetContent",args),content},setContent$1=function(editor,content,args){return void 0===args&&(args={}),args.format=args.format?args.format:"html",args.set=!0,args.content=isTreeNode(content)?"":content,isTreeNode(content)||args.no_events||(editor.fire("BeforeSetContent",args),content=args.content),isTreeNode(content)?setContentTree(editor,content,args):setContentString(editor,content,args)},getContent$1=function(editor,args){void 0===args&&(args={});var content,body=editor.getBody();if(editor.removed)return"";if(args.format=args.format?args.format:"html",args.get=!0,args.getInner=!0,args.no_events||editor.fire("BeforeGetContent",args),"raw"===args.format)content=$_8i2houjjducwnd2.trim($_9wn54m5cjducwo73.trimExternal(editor.serializer,body.innerHTML));else if("text"===args.format)content=body.innerText||body.textContent;else{if("tree"===args.format)return editor.serializer.serialize(body,args);content=editor.serializer.serialize(body,args)}return"text"!==args.format?args.content=$_8i2houjjducwnd2.trim(content):args.content=content,args.no_events||editor.fire("GetContent",args),args.content},DOM$6=DOMUtils.DOM,restoreOriginalStyles=function(editor){editor.orgDisplay&&DOM$6.setStyle(editor.id,"display",editor.orgDisplay)},safeDestroy=function(x){return Option.from(x).each(function(x){return x.destroy()})},clearDomReferences=function(editor){editor.contentAreaContainer=editor.formElement=editor.container=editor.editorContainer=null,editor.bodyElement=editor.contentDocument=editor.contentWindow=null,editor.iframeElement=editor.targetElm=null,editor.selection&&(editor.selection=editor.selection.win=editor.selection.dom=editor.selection.dom.doc=null)},restoreForm=function(editor){var form=editor.formElement;form&&(form._mceOldSubmit&&(form.submit=form._mceOldSubmit,form._mceOldSubmit=null),DOM$6.unbind(form,"submit reset",editor.formEventDelegate))},remove$5=function(editor){if(!editor.removed){var _selectionOverrides=editor._selectionOverrides,editorUpload=editor.editorUpload,body=editor.getBody(),element=editor.getElement();body&&editor.save(),editor.removed=1,editor.unbindAllNativeEvents(),editor.hasHiddenInput&&element&&DOM$6.remove(element.nextSibling),!editor.inline&&body&&restoreOriginalStyles(editor),$_zfmxp5vjducwoaf.fireRemove(editor),editor.editorManager.remove(editor),DOM$6.remove(editor.getContainer()),safeDestroy(_selectionOverrides),safeDestroy(editorUpload),editor.destroy()}},destroy=function(editor,automatic){var selection=editor.selection,dom=editor.dom;if(!editor.destroyed){if(!automatic&&!editor.removed)return void editor.remove();automatic||(editor.editorManager.off("beforeunload",editor._beforeUnload),editor.theme&&editor.theme.destroy&&editor.theme.destroy(),safeDestroy(selection),safeDestroy(dom)),restoreForm(editor),clearDomReferences(editor),editor.destroyed=1}},DOM$7=DOMUtils.DOM,extend$4=$_8i2houjjducwnd2.extend,each$22=$_8i2houjjducwnd2.each,resolve$4=$_8i2houjjducwnd2.resolve,ie$2=$_cum1kc9jducwn99.ie,Editor=function(id,settings,editorManager){var documentBaseUrl,baseUri,self=this;documentBaseUrl=self.documentBaseUrl=editorManager.documentBaseURL,baseUri=editorManager.baseURI,settings=getEditorSettings(self,id,documentBaseUrl,editorManager.defaultSettings,settings),self.settings=settings,AddOnManager.language=settings.language||"en",AddOnManager.languageLoad=settings.language_load,AddOnManager.baseURL=editorManager.baseURL,self.id=id,self.setDirty(!1),self.plugins={},self.documentBaseURI=new URI(settings.document_base_url,{base_uri:baseUri}),self.baseURI=baseUri,self.contentCSS=[],self.contentStyles=[],self.shortcuts=new Shortcuts(self),self.loadedCSS={},self.editorCommands=new EditorCommands(self),self.suffix=editorManager.suffix,self.editorManager=editorManager,self.inline=settings.inline,self.buttons={},self.menuItems={},settings.cache_suffix&&($_cum1kc9jducwn99.cacheSuffix=settings.cache_suffix.replace(/^[\?\&]+/,"")),settings.override_viewport===!1&&($_cum1kc9jducwn99.overrideViewPort=!1),editorManager.fire("SetupEditor",{editor:self}),self.execCallback("setup",self),self.$=DomQuery.overrideDefaults(function(){return{context:self.inline?self.getBody():self.getDoc(),element:self.getBody()}})};Editor.prototype={render:function(){$_fcx95i4bjducwo1f.render(this)},focus:function(skipFocus){$_egbtag48jducwo0y.focus(this,skipFocus)},execCallback:function(name){var scope,self=this,callback=self.settings[name];if(callback)return self.callbackLookup&&(scope=self.callbackLookup[name])&&(callback=scope.func,scope=scope.scope),"string"==typeof callback&&(scope=callback.replace(/\.\w+$/,""),scope=scope?resolve$4(scope):0,callback=resolve$4(callback),self.callbackLookup=self.callbackLookup||{},self.callbackLookup[name]={func:callback,scope:scope}),callback.apply(scope||self,Array.prototype.slice.call(arguments,1))},translate:function(text){if(text&&$_8i2houjjducwnd2.is(text,"string")){var lang_1=this.settings.language||"en",i18n_1=this.editorManager.i18n;text=i18n_1.data[lang_1+"."+text]||text.replace(/\{\#([^\}]+)\}/g,function(a,b){return i18n_1.data[lang_1+"."+b]||"{#"+b+"}"})}return this.editorManager.translate(text)},getLang:function(name,defaultVal){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+name]||(void 0!==defaultVal?defaultVal:"{#"+name+"}")},getParam:function(name,defaultVal,type){return getParam(this,name,defaultVal,type)},nodeChanged:function(args){this._nodeChangeDispatcher.nodeChanged(args)},addButton:function(name,settings){var self=this;settings.cmd&&(settings.onclick=function(){self.execCommand(settings.cmd)}),settings.stateSelector&&void 0===settings.active&&(settings.active=!1),settings.text||settings.icon||(settings.icon=name),self.buttons=self.buttons,settings.tooltip=settings.tooltip||settings.title,self.buttons[name]=settings},addSidebar:function(name,settings){return $_fdgakl70jducwoi8.add(this,name,settings)},addMenuItem:function(name,settings){var self=this;settings.cmd&&(settings.onclick=function(){self.execCommand(settings.cmd)}),self.menuItems=self.menuItems,self.menuItems[name]=settings},addContextToolbar:function(predicate,items){var selector,self=this;self.contextToolbars=self.contextToolbars||[],"string"==typeof predicate&&(selector=predicate,predicate=function(elm){return self.dom.is(elm,selector)}),self.contextToolbars.push({id:$_48t1mg4wjducwo4b.uuid("mcet"),predicate:predicate,items:items})},addCommand:function(name,callback,scope){this.editorCommands.addCommand(name,callback,scope)},addQueryStateHandler:function(name,callback,scope){this.editorCommands.addQueryStateHandler(name,callback,scope)},addQueryValueHandler:function(name,callback,scope){this.editorCommands.addQueryValueHandler(name,callback,scope)},addShortcut:function(pattern,desc,cmdFunc,scope){this.shortcuts.add(pattern,desc,cmdFunc,scope)},execCommand:function(cmd,ui,value,args){return this.editorCommands.execCommand(cmd,ui,value,args)},queryCommandState:function(cmd){return this.editorCommands.queryCommandState(cmd)},queryCommandValue:function(cmd){return this.editorCommands.queryCommandValue(cmd)},queryCommandSupported:function(cmd){return this.editorCommands.queryCommandSupported(cmd)},show:function(){var self=this;self.hidden&&(self.hidden=!1,self.inline?self.getBody().contentEditable=!0:(DOM$7.show(self.getContainer()),DOM$7.hide(self.id)),self.load(),self.fire("show"))},hide:function(){var self=this,doc=self.getDoc();self.hidden||(ie$2&&doc&&!self.inline&&doc.execCommand("SelectAll"),self.save(),self.inline?(self.getBody().contentEditable=!1,self===self.editorManager.focusedEditor&&(self.editorManager.focusedEditor=null)):(DOM$7.hide(self.getContainer()),DOM$7.setStyle(self.id,"display",self.orgDisplay)),self.hidden=!0,self.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(state,time){this.fire("ProgressState",{state:state,time:time})},load:function(args){var html,self=this,elm=self.getElement();return self.removed?"":elm?(args=args||{},args.load=!0,html=self.setContent(void 0!==elm.value?elm.value:elm.innerHTML,args),args.element=elm,args.no_events||self.fire("LoadContent",args),args.element=elm=null,html):void 0},save:function(args){var html,form,self=this,elm=self.getElement();if(elm&&self.initialized&&!self.removed)return args=args||{},args.save=!0,args.element=elm,html=args.content=self.getContent(args),args.no_events||self.fire("SaveContent",args),"raw"===args.format&&self.fire("RawSaveContent",args),html=args.content,/TEXTAREA|INPUT/i.test(elm.nodeName)?elm.value=html:(self.inline||(elm.innerHTML=html),(form=DOM$7.getParent(self.id,"form"))&&each$22(form.elements,function(elm){if(elm.name===self.id)return elm.value=html,!1})),args.element=elm=null,args.set_dirty!==!1&&self.setDirty(!1),html},setContent:function(content,args){return setContent$1(this,content,args)},getContent:function(args){return getContent$1(this,args)},insertContent:function(content,args){args&&(content=extend$4({content:content},args)),this.execCommand("mceInsertContent",!1,content)},isDirty:function(){return!this.isNotDirty},setDirty:function(state){var oldState=!this.isNotDirty;this.isNotDirty=!state,state&&state!==oldState&&this.fire("dirty")},setMode:function(mode){$_awagyr46jducwo0r.setMode(this,mode)},getContainer:function(){var self=this;return self.container||(self.container=DOM$7.get(self.editorContainer||self.id+"_parent")),self.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=DOM$7.get(this.id)),this.targetElm},getWin:function(){var elm,self=this;return self.contentWindow||(elm=self.iframeElement)&&(self.contentWindow=elm.contentWindow),self.contentWindow},getDoc:function(){var win,self=this;return self.contentDocument||(win=self.getWin())&&(self.contentDocument=win.document),self.contentDocument},getBody:function(){var doc=this.getDoc();return this.bodyElement||(doc?doc.body:null)},convertURL:function(url,name,elm){var self=this,settings=self.settings
;return settings.urlconverter_callback?self.execCallback("urlconverter_callback",url,elm,!0,name):!settings.convert_urls||elm&&"LINK"===elm.nodeName||0===url.indexOf("file:")||0===url.length?url:settings.relative_urls?self.documentBaseURI.toRelative(url):url=self.documentBaseURI.toAbsolute(url,settings.remove_script_host)},addVisual:function(elm){var cls,self=this,settings=self.settings,dom=self.dom;elm=elm||self.getBody(),void 0===self.hasVisual&&(self.hasVisual=settings.visual),each$22(dom.select("table,a",elm),function(elm){var value;switch(elm.nodeName){case"TABLE":return cls=settings.visual_table_class||"mce-item-table",value=dom.getAttrib(elm,"border"),void(value&&"0"!==value||!self.hasVisual?dom.removeClass(elm,cls):dom.addClass(elm,cls));case"A":return void(dom.getAttrib(elm,"href",!1)||(value=dom.getAttrib(elm,"name")||elm.id,cls=settings.visual_anchor_class||"mce-item-anchor",value&&self.hasVisual?dom.addClass(elm,cls):dom.removeClass(elm,cls)))}}),self.fire("VisualAid",{element:elm,hasVisual:self.hasVisual})},remove:function(){remove$5(this)},destroy:function(automatic){destroy(this,automatic)},uploadImages:function(callback){return this.editorUpload.uploadImages(callback)},_scanForImages:function(){return this.editorUpload.scanForImages()}},extend$4(Editor.prototype,EditorObservable$1);var documentFocusInHandler,beforeUnloadDelegate,EditorManager,isEditorUIElement=function(elm){return elm.className.toString().indexOf("mce-")!==-1},$_duu6az77jducwoji={isEditorUIElement:isEditorUIElement},isManualNodeChange=function(e){return"nodechange"===e.type&&e.selectionChange},registerPageMouseUp=function(editor,throttledStore){var mouseUpPage=function(){throttledStore.throttle()};DOMUtils.DOM.bind(document,"mouseup",mouseUpPage),editor.on("remove",function(){DOMUtils.DOM.unbind(document,"mouseup",mouseUpPage)})},registerFocusOut=function(editor){editor.on("focusout",function(){$_exyelv3zjducwnzi.store(editor)})},registerMouseUp=function(editor,throttledStore){editor.on("mouseup touchend",function(e){throttledStore.throttle()})},registerEditorEvents=function(editor,throttledStore){var browser=$_5hshlmmjducwnfr.detect().browser;browser.isIE()||browser.isEdge()?registerFocusOut(editor):registerMouseUp(editor,throttledStore),editor.on("keyup nodechange",function(e){isManualNodeChange(e)||$_exyelv3zjducwnzi.store(editor)})},register$3=function(editor){var throttledStore=$_15mtnw58jducwo6f.first(function(){$_exyelv3zjducwnzi.store(editor)},0);editor.inline&&registerPageMouseUp(editor,throttledStore),editor.on("init",function(){registerEditorEvents(editor,throttledStore)}),editor.on("remove",function(){throttledStore.cancel()})},$_aj05kn78jducwojl={register:register$3},DOM$8=DOMUtils.DOM,isEditorUIElement$1=function(elm){return $_duu6az77jducwoji.isEditorUIElement(elm)},isUIElement=function(editor,elm){var customSelector=editor?editor.settings.custom_ui_selector:"";return null!==DOM$8.getParent(elm,function(elm){return isEditorUIElement$1(elm)||!!customSelector&&editor.dom.is(elm,customSelector)})},getActiveElement=function(){try{return document.activeElement}catch(ex){return document.body}},registerEvents=function(editorManager,e){var editor=e.editor;$_aj05kn78jducwojl.register(editor),editor.on("focusin",function(){var self=this,focusedEditor=editorManager.focusedEditor;focusedEditor!==self&&(focusedEditor&&focusedEditor.fire("blur",{focusedEditor:self}),editorManager.setActive(self),editorManager.focusedEditor=self,self.fire("focus",{blurredEditor:focusedEditor}),self.focus(!0))}),editor.on("focusout",function(){var self=this;$_83mf8ygjducwnbc.setEditorTimeout(self,function(){var focusedEditor=editorManager.focusedEditor;isUIElement(self,getActiveElement())||focusedEditor!==self||(self.fire("blur",{focusedEditor:null}),editorManager.focusedEditor=null)})}),documentFocusInHandler||(documentFocusInHandler=function(e){var target,activeEditor=editorManager.activeEditor;target=e.target,activeEditor&&target.ownerDocument===document&&(target===document.body||isUIElement(activeEditor,target)||editorManager.focusedEditor!==activeEditor||(activeEditor.fire("blur",{focusedEditor:null}),editorManager.focusedEditor=null))},DOM$8.bind(document,"focusin",documentFocusInHandler))},unregisterDocumentEvents=function(editorManager,e){editorManager.focusedEditor===e.editor&&(editorManager.focusedEditor=null),editorManager.activeEditor||(DOM$8.unbind(document,"focusin",documentFocusInHandler),documentFocusInHandler=null)},setup$11=function(editorManager){editorManager.on("AddEditor",$_60qu7r6jducwn73.curry(registerEvents,editorManager)),editorManager.on("RemoveEditor",$_60qu7r6jducwn73.curry(unregisterDocumentEvents,editorManager))},$_7bvj4v76jducwoje={setup:setup$11,isEditorUIElement:isEditorUIElement$1,isUIElement:isUIElement},data={},code="en",$_236kh79jducwojr={setCode:function(newCode){newCode&&(code=newCode,this.rtl=!!this.data[newCode]&&"rtl"===this.data[newCode]._dir)},getCode:function(){return code},rtl:!1,add:function(code,items){var langData=data[code];langData||(data[code]=langData={});for(var name_1 in items)langData[name_1]=items[name_1];this.setCode(code)},translate:function(text){var langData=data[code]||{},toString=function(obj){return $_8i2houjjducwnd2.is(obj,"function")?Object.prototype.toString.call(obj):isEmpty(obj)?"":""+obj},isEmpty=function(text){return""===text||null===text||$_8i2houjjducwnd2.is(text,"undefined")},getLangData=function(text){return text=toString(text),$_8i2houjjducwnd2.hasOwn(langData,text)?toString(langData[text]):text};if(isEmpty(text))return"";if($_8i2houjjducwnd2.is(text,"object")&&$_8i2houjjducwnd2.hasOwn(text,"raw"))return toString(text.raw);if($_8i2houjjducwnd2.is(text,"array")){var values_1=text.slice(1);text=getLangData(text[0]).replace(/\{([0-9]+)\}/g,function($1,$2){return $_8i2houjjducwnd2.hasOwn(values_1,$2)?toString(values_1[$2]):$1})}return getLangData(text).replace(/{context:\w+}$/,"")},data:data},DOM$9=DOMUtils.DOM,explode$5=$_8i2houjjducwnd2.explode,each$23=$_8i2houjjducwnd2.each,extend$5=$_8i2houjjducwnd2.extend,instanceCounter=0,boundGlobalEvents=!1,legacyEditors=[],editors=[],isValidLegacyKey=function(id){return"length"!==id},globalEventDelegate=function(e){each$23(EditorManager.get(),function(editor){"scroll"===e.type?editor.fire("ScrollWindow",e):editor.fire("ResizeWindow",e)})},toggleGlobalEvents=function(state){state!==boundGlobalEvents&&(state?DomQuery(window).on("resize scroll",globalEventDelegate):DomQuery(window).off("resize scroll",globalEventDelegate),boundGlobalEvents=state)},removeEditorFromList=function(targetEditor){var oldEditors=editors;delete legacyEditors[targetEditor.id];for(var i=0;i<legacyEditors.length;i++)if(legacyEditors[i]===targetEditor){legacyEditors.splice(i,1);break}return editors=$_2dw1bj4jducwn6g.filter(editors,function(editor){return targetEditor!==editor}),EditorManager.activeEditor===targetEditor&&(EditorManager.activeEditor=editors.length>0?editors[0]:null),EditorManager.focusedEditor===targetEditor&&(EditorManager.focusedEditor=null),oldEditors.length!==editors.length},purgeDestroyedEditor=function(editor){return editor&&editor.initialized&&!(editor.getContainer()||editor.getBody()).parentNode&&(removeEditorFromList(editor),editor.unbindAllNativeEvents(),editor.destroy(!0),editor.removed=!0,editor=null),editor};EditorManager={defaultSettings:{},$:DomQuery,majorVersion:"4",minorVersion:"7.7",releaseDate:"2018-02-19",editors:legacyEditors,i18n:$_236kh79jducwojr,activeEditor:null,settings:{},setup:function(){var baseURL,documentBaseURL,preInit,src,self=this,suffix="";if(documentBaseURL=URI.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(documentBaseURL)&&(documentBaseURL=documentBaseURL.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(documentBaseURL)||(documentBaseURL+="/")),preInit=window.tinymce||window.tinyMCEPreInit)baseURL=preInit.base||preInit.baseURL,suffix=preInit.suffix;else{for(var scripts=document.getElementsByTagName("script"),i=0;i<scripts.length;i++){src=scripts[i].src;var srcScript=src.substring(src.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(src)){srcScript.indexOf(".min")!==-1&&(suffix=".min"),baseURL=src.substring(0,src.lastIndexOf("/"));break}}!baseURL&&document.currentScript&&(src=document.currentScript.src,src.indexOf(".min")!==-1&&(suffix=".min"),baseURL=src.substring(0,src.lastIndexOf("/")))}self.baseURL=new URI(documentBaseURL).toAbsolute(baseURL),self.documentBaseURL=documentBaseURL,self.baseURI=new URI(self.baseURL),self.suffix=suffix,$_7bvj4v76jducwoje.setup(self)},overrideDefaults:function(defaultSettings){var baseUrl,suffix;baseUrl=defaultSettings.base_url,baseUrl&&(this.baseURL=new URI(this.documentBaseURL).toAbsolute(baseUrl.replace(/\/+$/,"")),this.baseURI=new URI(this.baseURL)),suffix=defaultSettings.suffix,defaultSettings.suffix&&(this.suffix=suffix),this.defaultSettings=defaultSettings;var pluginBaseUrls=defaultSettings.plugin_base_urls;for(var name_1 in pluginBaseUrls)AddOnManager.PluginManager.urls[name_1]=pluginBaseUrls[name_1]},init:function(settings){var result,invalidInlineTargets,self=this;invalidInlineTargets=$_8i2houjjducwnd2.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var isInvalidInlineTarget=function(settings,elm){return settings.inline&&elm.tagName.toLowerCase()in invalidInlineTargets},createId=function(elm){var id=elm.id;return id||(id=elm.name,id=id&&!DOM$9.get(id)?elm.name:DOM$9.uniqueId(),elm.setAttribute("id",id)),id},execCallback=function(name){var callback=settings[name];if(callback)return callback.apply(self,Array.prototype.slice.call(arguments,2))},hasClass=function(elm,className){return className.constructor===RegExp?className.test(elm.className):DOM$9.hasClass(elm,className)},findTargets=function(settings){var l,targets=[];if($_cum1kc9jducwn99.ie&&$_cum1kc9jducwn99.ie<11)return $_9erk7k4hjducwo2e.initError("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(settings.types)return each$23(settings.types,function(type){targets=targets.concat(DOM$9.select(type.selector))}),targets;if(settings.selector)return DOM$9.select(settings.selector);if(settings.target)return[settings.target];switch(settings.mode){case"exact":l=settings.elements||"",l.length>0&&each$23(explode$5(l),function(id){var elm;(elm=DOM$9.get(id))?targets.push(elm):each$23(document.forms,function(f){each$23(f.elements,function(e){e.name===id&&(id="mce_editor_"+instanceCounter++,DOM$9.setAttrib(e,"id",id),targets.push(e))})})});break;case"textareas":case"specific_textareas":each$23(DOM$9.select("textarea"),function(elm){settings.editor_deselector&&hasClass(elm,settings.editor_deselector)||settings.editor_selector&&!hasClass(elm,settings.editor_selector)||targets.push(elm)})}return targets},provideResults=function(editors){result=editors},initEditors=function(){var targets,initCount=0,editors=[],createEditor=function(id,settings,targetElm){var editor=new Editor(id,settings,self);editors.push(editor),editor.on("init",function(){++initCount===targets.length&&provideResults(editors)}),editor.targetElm=editor.targetElm||targetElm,editor.render()};if(DOM$9.unbind(window,"ready",initEditors),execCallback("onpageload"),targets=DomQuery.unique(findTargets(settings)),settings.types)return void each$23(settings.types,function(type){$_8i2houjjducwnd2.each(targets,function(elm){return!DOM$9.is(elm,type.selector)||(createEditor(createId(elm),extend$5({},settings,type),elm),!1)})});$_8i2houjjducwnd2.each(targets,function(elm){purgeDestroyedEditor(self.get(elm.id))}),targets=$_8i2houjjducwnd2.grep(targets,function(elm){return!self.get(elm.id)}),0===targets.length?provideResults([]):each$23(targets,function(elm){isInvalidInlineTarget(settings,elm)?$_9erk7k4hjducwo2e.initError("Could not initialize inline editor on invalid inline target element",elm):createEditor(createId(elm),settings,elm)})};return self.settings=settings,DOM$9.bind(window,"ready",initEditors),new promiseObj(function(resolve){result?resolve(result):provideResults=function(editors){resolve(editors)}})},get:function(id){return 0===arguments.length?editors.slice(0):$_c7y6af12jducwnh8.isString(id)?$_2dw1bj4jducwn6g.find(editors,function(editor){return editor.id===id}).getOr(null):$_c7y6af12jducwnh8.isNumber(id)&&editors[id]?editors[id]:null},add:function(editor){var self=this;return legacyEditors[editor.id]===editor?editor:(null===self.get(editor.id)&&(isValidLegacyKey(editor.id)&&(legacyEditors[editor.id]=editor),legacyEditors.push(editor),editors.push(editor)),toggleGlobalEvents(!0),self.activeEditor=editor,self.fire("AddEditor",{editor:editor}),beforeUnloadDelegate||(beforeUnloadDelegate=function(){self.fire("BeforeUnload")},DOM$9.bind(window,"beforeunload",beforeUnloadDelegate)),editor)},createEditor:function(id,settings){return this.add(new Editor(id,settings,this))},remove:function(selector){var i,editor,self=this;if(selector)return $_c7y6af12jducwnh8.isString(selector)?(selector=selector.selector||selector,void each$23(DOM$9.select(selector),function(elm){(editor=self.get(elm.id))&&self.remove(editor)})):(editor=selector,$_c7y6af12jducwnh8.isNull(self.get(editor.id))?null:(removeEditorFromList(editor)&&self.fire("RemoveEditor",{editor:editor}),0===editors.length&&DOM$9.unbind(window,"beforeunload",beforeUnloadDelegate),editor.remove(),toggleGlobalEvents(editors.length>0),editor));for(i=editors.length-1;i>=0;i--)self.remove(editors[i])},execCommand:function(cmd,ui,value){var self=this,editor=self.get(value);switch(cmd){case"mceAddEditor":return self.get(value)||new Editor(value,self.settings,self).render(),!0;case"mceRemoveEditor":return editor&&editor.remove(),!0;case"mceToggleEditor":return editor?(editor.isHidden()?editor.show():editor.hide(),!0):(self.execCommand("mceAddEditor",0,value),!0)}return!!self.activeEditor&&self.activeEditor.execCommand(cmd,ui,value)},triggerSave:function(){each$23(editors,function(editor){editor.save()})},addI18n:function(code,items){$_236kh79jducwojr.add(code,items)},translate:function(text){return $_236kh79jducwojr.translate(text)},setActive:function(editor){var activeEditor=this.activeEditor;this.activeEditor!==editor&&(activeEditor&&activeEditor.fire("deactivate",{relatedTarget:editor}),editor.fire("activate",{relatedTarget:activeEditor})),this.activeEditor=editor}},extend$5(EditorManager,$_5ie1x944jducwo0j),EditorManager.setup();var EditorManager$1=EditorManager;!function(RangeUtils){RangeUtils.compareRanges=$_18bpcb3yjducwnzh.isEq,RangeUtils.getCaretRangeFromPoint=$_ghraby68jducwodg.fromPoint,RangeUtils.getSelectedNode=getSelectedNode,RangeUtils.getNode=getNode}(RangeUtils||(RangeUtils={}));var extendClass,initializing,RangeUtils$1=RangeUtils,min=Math.min,max=Math.max,round$1=Math.round,relativePosition=function(rect,targetRect,rel){var x,y,w,h,targetW,targetH;return x=targetRect.x,y=targetRect.y,w=rect.w,h=rect.h,targetW=targetRect.w,targetH=targetRect.h,rel=(rel||"").split(""),"b"===rel[0]&&(y+=targetH),"r"===rel[1]&&(x+=targetW),"c"===rel[0]&&(y+=round$1(targetH/2)),"c"===rel[1]&&(x+=round$1(targetW/2)),"b"===rel[3]&&(y-=h),"r"===rel[4]&&(x-=w),"c"===rel[3]&&(y-=round$1(h/2)),"c"===rel[4]&&(x-=round$1(w/2)),create$2(x,y,w,h)},findBestRelativePosition=function(rect,targetRect,constrainRect,rels){var pos,i;for(i=0;i<rels.length;i++)if(pos=relativePosition(rect,targetRect,rels[i]),pos.x>=constrainRect.x&&pos.x+pos.w<=constrainRect.w+constrainRect.x&&pos.y>=constrainRect.y&&pos.y+pos.h<=constrainRect.h+constrainRect.y)return rels[i];return null},inflate=function(rect,w,h){return create$2(rect.x-w,rect.y-h,rect.w+2*w,rect.h+2*h)},intersect=function(rect,cropRect){var x1,y1,x2,y2;return x1=max(rect.x,cropRect.x),y1=max(rect.y,cropRect.y),x2=min(rect.x+rect.w,cropRect.x+cropRect.w),y2=min(rect.y+rect.h,cropRect.y+cropRect.h),x2-x1<0||y2-y1<0?null:create$2(x1,y1,x2-x1,y2-y1)},clamp$1=function(rect,clampRect,fixedSize){var underflowX1,underflowY1,overflowX2,overflowY2,x1,y1,x2,y2,cx2,cy2;return x1=rect.x,y1=rect.y,x2=rect.x+rect.w,y2=rect.y+rect.h,cx2=clampRect.x+clampRect.w,cy2=clampRect.y+clampRect.h,underflowX1=max(0,clampRect.x-x1),underflowY1=max(0,clampRect.y-y1),overflowX2=max(0,x2-cx2),overflowY2=max(0,y2-cy2),x1+=underflowX1,y1+=underflowY1,fixedSize&&(x2+=underflowX1,y2+=underflowY1,x1-=overflowX2,y1-=overflowY2),x2-=overflowX2,y2-=overflowY2,create$2(x1,y1,x2-x1,y2-y1)},create$2=function(x,y,w,h){return{x:x,y:y,w:w,h:h}},fromClientRect=function(clientRect){return create$2(clientRect.left,clientRect.top,clientRect.width,clientRect.height)},$_5udvi37bjducwok2={inflate:inflate,relativePosition:relativePosition,findBestRelativePosition:findBestRelativePosition,intersect:intersect,clamp:clamp$1,create:create$2,fromClientRect:fromClientRect},types={},$_eqvctj7cjducwok6={add:function(type,typeClass){types[type.toLowerCase()]=typeClass},has:function(type){return!!types[type.toLowerCase()]},get:function(type){var lctype=type.toLowerCase(),controlType=types.hasOwnProperty(lctype)?types[lctype]:null;if(null===controlType)throw new Error("Could not find module for type: "+type);return controlType},create:function(type,settings){var ControlType;if("string"==typeof type?(settings=settings||{},settings.type=type):(settings=type,type=settings.type),type=type.toLowerCase(),!(ControlType=types[type]))throw new Error("Could not find control by type: "+type);return ControlType=new ControlType(settings),ControlType.type=type,ControlType}},each$24=$_8i2houjjducwnd2.each,extend$6=$_8i2houjjducwnd2.extend,Class=function(){};Class.extend=extendClass=function(prop){var prototype,name,member,self=this,_super=self.prototype,Class=function(){var i,mixins,mixin,self=this;if(!initializing&&(self.init&&self.init.apply(self,arguments),mixins=self.Mixins))for(i=mixins.length;i--;)mixin=mixins[i],mixin.init&&mixin.init.apply(self,arguments)},dummy=function(){return this};initializing=!0,prototype=new self,initializing=!1,prop.Mixins&&(each$24(prop.Mixins,function(mixin){for(var name_1 in mixin)"init"!==name_1&&(prop[name_1]=mixin[name_1])}),_super.Mixins&&(prop.Mixins=_super.Mixins.concat(prop.Mixins))),prop.Methods&&each$24(prop.Methods.split(","),function(name){prop[name]=dummy}),prop.Properties&&each$24(prop.Properties.split(","),function(name){var fieldName="_"+name;prop[name]=function(value){var self=this;return void 0!==value?(self[fieldName]=value,self):self[fieldName]}}),prop.Statics&&each$24(prop.Statics,function(func,name){Class[name]=func}),prop.Defaults&&_super.Defaults&&(prop.Defaults=extend$6({},_super.Defaults,prop.Defaults));for(name in prop)member=prop[name],"function"==typeof member&&_super[name]?prototype[name]=function(name,fn){return function(){var ret,self=this,tmp=self._super;return self._super=_super[name],ret=fn.apply(self,arguments),self._super=tmp,ret}}(name,member):prototype[name]=member;return Class.prototype=prototype,Class.constructor=Class,Class.extend=extendClass,Class};var min$1=Math.min,max$1=Math.max,round$2=Math.round,Color=function(value){var self={},r=0,g=0,b=0,rgb2hsv=function(r,g,b){var h,s,v,d,minRGB,maxRGB;return h=0,s=0,v=0,r/=255,g/=255,b/=255,minRGB=min$1(r,min$1(g,b)),maxRGB=max$1(r,max$1(g,b)),minRGB===maxRGB?(v=minRGB,{h:0,s:0,v:100*v}):(d=r===minRGB?g-b:b===minRGB?r-g:b-r,h=r===minRGB?3:b===minRGB?1:5,h=60*(h-d/(maxRGB-minRGB)),s=(maxRGB-minRGB)/maxRGB,v=maxRGB,{h:round$2(h),s:round$2(100*s),v:round$2(100*v)})},hsvToRgb=function(hue,saturation,brightness){var side,chroma,x,match;if(hue=(parseInt(hue,10)||0)%360,saturation=parseInt(saturation,10)/100,brightness=parseInt(brightness,10)/100,saturation=max$1(0,min$1(saturation,1)),brightness=max$1(0,min$1(brightness,1)),0===saturation)return void(r=g=b=round$2(255*brightness));switch(side=hue/60,chroma=brightness*saturation,x=chroma*(1-Math.abs(side%2-1)),match=brightness-chroma,Math.floor(side)){case 0:r=chroma,g=x,b=0;break;case 1:r=x,g=chroma,b=0;break;case 2:r=0,g=chroma,b=x;break;case 3:r=0,g=x,b=chroma;break;case 4:r=x,g=0,b=chroma;break;case 5:r=chroma,g=0,b=x;break;default:r=g=b=0}r=round$2(255*(r+match)),g=round$2(255*(g+match)),b=round$2(255*(b+match))},toHex=function(){var hex=function(val){return val=parseInt(val,10).toString(16),val.length>1?val:"0"+val};return"#"+hex(r)+hex(g)+hex(b)},toRgb=function(){return{r:r,g:g,b:b}},toHsv=function(){return rgb2hsv(r,g,b)},parse=function(value){var matches;return"object"==typeof value?"r"in value?(r=value.r,g=value.g,b=value.b):"v"in value&&hsvToRgb(value.h,value.s,value.v):(matches=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(value))?(r=parseInt(matches[1],10),g=parseInt(matches[2],10),b=parseInt(matches[3],10)):(matches=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(value))?(r=parseInt(matches[1],16),g=parseInt(matches[2],16),b=parseInt(matches[3],16)):(matches=/#([0-F])([0-F])([0-F])/gi.exec(value))&&(r=parseInt(matches[1]+matches[1],16),g=parseInt(matches[2]+matches[2],16),b=parseInt(matches[3]+matches[3],16)),r=r<0?0:r>255?255:r,g=g<0?0:g>255?255:g,b=b<0?0:b>255?255:b,self};return value&&parse(value),self.toRgb=toRgb,self.toHsv=toHsv,self.toHex=toHex,self.parse=parse,self},serialize=function(o,quote){var i,v,t,name;if(quote=quote||'"',null===o)return"null";if("string"===(t=typeof o))return v="\bb\tt\nn\ff\rr\"\"''\\\\",quote+o.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,b){return'"'===quote&&"'"===a?a:(i=v.indexOf(b))+1?"\\"+v.charAt(i+1):(a=b.charCodeAt().toString(16),"\\u"+"0000".substring(a.length)+a)})+quote;if("object"===t){if(o.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(o)){for(i=0,v="[";i<o.length;i++)v+=(i>0?",":"")+serialize(o[i],quote);return v+"]"}v="{";for(name in o)o.hasOwnProperty(name)&&(v+="function"!=typeof o[name]?(v.length>1?","+quote:quote)+name+quote+":"+serialize(o[name],quote):"");return v+"}"}return""+o},$_3u1nw7fjducwokg={serialize:serialize,parse:function(text){try{return JSON.parse(text)}catch(ex){}}},$_ed3gtj7gjducwoki={callbacks:{},count:0,send:function(settings){var self=this,dom=DOMUtils.DOM,count=void 0!==settings.count?settings.count:self.count,id="tinymce_jsonp_"+count;self.callbacks[count]=function(json){dom.remove(id),delete self.callbacks[count],settings.callback(json)},dom.add(dom.doc.body,"script",{id:id,src:settings.url,type:"text/javascript"}),self.count++}},XHR={send:function(settings){var xhr,count=0,ready=function(){!settings.async||4===xhr.readyState||count++>1e4?(settings.success&&count<1e4&&200===xhr.status?settings.success.call(settings.success_scope,""+xhr.responseText,xhr,settings):settings.error&&settings.error.call(settings.error_scope,count>1e4?"TIMED_OUT":"GENERAL",xhr,settings),xhr=null):setTimeout(ready,10)};if(settings.scope=settings.scope||this,settings.success_scope=settings.success_scope||settings.scope,settings.error_scope=settings.error_scope||settings.scope,settings.async=settings.async!==!1,settings.data=settings.data||"",XHR.fire("beforeInitialize",{settings:settings}),xhr=new XMLHttpRequest){if(xhr.overrideMimeType&&xhr.overrideMimeType(settings.content_type),xhr.open(settings.type||(settings.data?"POST":"GET"),settings.url,settings.async),settings.crossDomain&&(xhr.withCredentials=!0),settings.content_type&&xhr.setRequestHeader("Content-Type",settings.content_type),settings.requestheaders&&$_8i2houjjducwnd2.each(settings.requestheaders,function(header){xhr.setRequestHeader(header.key,header.value)}),xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),xhr=XHR.fire("beforeSend",{xhr:xhr,settings:settings}).xhr,xhr.send(settings.data),!settings.async)return ready();setTimeout(ready,10)}}};$_8i2houjjducwnd2.extend(XHR,$_5ie1x944jducwo0j);var extend$7=$_8i2houjjducwnd2.extend,JSONRequest=function(settings){this.settings=extend$7({},settings),this.count=0};JSONRequest.sendRPC=function(o){return(new JSONRequest).send(o)},JSONRequest.prototype={send:function(args){var ecb=args.error,scb=args.success;args=extend$7(this.settings,args),args.success=function(c,x){c=$_3u1nw7fjducwokg.parse(c),void 0===c&&(c={error:"JSON Parse error."}),c.error?ecb.call(args.error_scope||args.scope,c.error,x):scb.call(args.success_scope||args.scope,c.result)},args.error=function(ty,x){ecb&&ecb.call(args.error_scope||args.scope,ty,x)},args.data=$_3u1nw7fjducwokg.serialize({id:args.id||"c"+this.count++,method:args.method,params:args.params}),args.content_type="application/json",XHR.send(args)}};var localStorage=window.localStorage,tinymce=EditorManager$1,publicApi={geom:{Rect:$_5udvi37bjducwok2},util:{Promise:promiseObj,Delay:$_83mf8ygjducwnbc,Tools:$_8i2houjjducwnd2,VK:$_1xm2zi59jducwo6l,URI:URI,Class:Class,EventDispatcher:Dispatcher,Observable:$_5ie1x944jducwo0j,I18n:$_236kh79jducwojr,XHR:XHR,JSON:$_3u1nw7fjducwokg,JSONRequest:JSONRequest,JSONP:$_ed3gtj7gjducwoki,LocalStorage:localStorage,Color:Color},dom:{EventUtils:EventUtils,Sizzle:Sizzle,DomQuery:DomQuery,TreeWalker:TreeWalker,DOMUtils:DOMUtils,ScriptLoader:ScriptLoader,RangeUtils:RangeUtils$1,Serializer:DomSerializer$1,ControlSelection:ControlSelection,BookmarkManager:BookmarkManager$1,Selection:Selection$1,Event:EventUtils.Event},html:{Styles:Styles,Entities:$_g4jbz61rjducwnjq,Node:Node$2,Schema:Schema,SaxParser:SaxParser$1,DomParser:DomParser,Writer:Writer,Serializer:HtmlSerializer},ui:{Factory:$_eqvctj7cjducwok6},Env:$_cum1kc9jducwn99,AddOnManager:AddOnManager,Formatter:Formatter,UndoManager:UndoManager,EditorCommands:EditorCommands,WindowManager:WindowManager,NotificationManager:NotificationManager,EditorObservable:EditorObservable$1,Shortcuts:Shortcuts,Editor:Editor,FocusManager:$_duu6az77jducwoji,EditorManager:EditorManager$1,DOM:DOMUtils.DOM,ScriptLoader:ScriptLoader.ScriptLoader,PluginManager:AddOnManager.PluginManager,ThemeManager:AddOnManager.ThemeManager,trim:$_8i2houjjducwnd2.trim,isArray:$_8i2houjjducwnd2.isArray,is:$_8i2houjjducwnd2.is,toArray:$_8i2houjjducwnd2.toArray,makeMap:$_8i2houjjducwnd2.makeMap,each:$_8i2houjjducwnd2.each,map:$_8i2houjjducwnd2.map,grep:$_8i2houjjducwnd2.grep,inArray:$_8i2houjjducwnd2.inArray,extend:$_8i2houjjducwnd2.extend,create:$_8i2houjjducwnd2.create,walk:$_8i2houjjducwnd2.walk,createNS:$_8i2houjjducwnd2.createNS,resolve:$_8i2houjjducwnd2.resolve,explode:$_8i2houjjducwnd2.explode,_addCacheSuffix:$_8i2houjjducwnd2._addCacheSuffix,isOpera:$_cum1kc9jducwn99.opera,isWebKit:$_cum1kc9jducwn99.webkit,isIE:$_cum1kc9jducwn99.ie,isGecko:$_cum1kc9jducwn99.gecko,isMac:$_cum1kc9jducwn99.mac};tinymce=$_8i2houjjducwnd2.extend(tinymce,publicApi);var Tinymce=tinymce;!function(tinymce){window.tinymce=tinymce,window.tinyMCE=tinymce}(Tinymce),function(tinymce){if("object"==typeof module)try{module.exports=tinymce}catch(_){}}(Tinymce)}()}(),angular.module("ui.tinymce",[]).value("uiTinymceConfig",{}).directive("uiTinymce",["$rootScope","$compile","$timeout","$window","$sce","uiTinymceConfig",function($rootScope,$compile,$timeout,$window,$sce,uiTinymceConfig){uiTinymceConfig=uiTinymceConfig||{};var generatedIds=0;return uiTinymceConfig.baseUrl&&(tinymce.baseURL=uiTinymceConfig.baseUrl),{require:["ngModel","^?form"],link:function(scope,element,attrs,ctrls){function toggleDisable(disabled){disabled?(ensureInstance(),tinyInstance&&tinyInstance.getBody().setAttribute("contenteditable",!1)):(ensureInstance(),tinyInstance&&!tinyInstance.settings.readonly&&tinyInstance.getBody().setAttribute("contenteditable",!0))}function ensureInstance(){tinyInstance||(tinyInstance=tinymce.get(attrs.id))}if($window.tinymce){var expression,tinyInstance,ngModel=ctrls[0],form=ctrls[1]||null,options={},updateView=function(editor){var content=editor.getContent({format:options.format}).trim();content=$sce.trustAsHtml(content),ngModel.$setViewValue(content),$rootScope.$$phase||scope.$apply()};attrs.$set("id","ui-tinymce-"+generatedIds++),expression={},angular.extend(expression,scope.$eval(attrs.uiTinymce));var setupOptions={setup:function(ed){ed.on("init",function(){ngModel.$render(),ngModel.$setPristine(),form&&form.$setPristine()}),ed.on("ExecCommand",function(){ed.save(),updateView(ed)}),ed.on("change",function(){ed.save(),updateView(ed)}),ed.on("blur",function(){element[0].blur()}),ed.on("ObjectResized",function(){ed.save(),updateView(ed)}),ed.on("remove",function(){element.remove()}),expression.setup&&expression.setup(ed,{updateView:updateView})},format:expression.format||"html",selector:"#"+attrs.id};angular.extend(options,uiTinymceConfig,expression,setupOptions),$timeout(function(){tinymce.init(options),toggleDisable(scope.$eval(attrs.ngDisabled))}),ngModel.$formatters.unshift(function(modelValue){return modelValue?$sce.trustAsHtml(modelValue):""}),ngModel.$parsers.unshift(function(viewValue){return viewValue?$sce.getTrustedHtml(viewValue):""}),ngModel.$render=function(){ensureInstance();var viewValue=ngModel.$viewValue?$sce.getTrustedHtml(ngModel.$viewValue):"";tinyInstance&&tinyInstance.getDoc()&&(tinyInstance.setContent(viewValue),tinyInstance.fire("change"))},attrs.$observe("disabled",toggleDisable),scope.$on("$tinymce:refresh",function(e,id){var eid=attrs.id;if(angular.isUndefined(id)||id===eid){var parentElement=element.parent(),clonedElement=element.clone();clonedElement.removeAttr("id"),clonedElement.removeAttr("style"),clonedElement.removeAttr("aria-hidden"),tinymce.execCommand("mceRemoveEditor",!1,eid),parentElement.append($compile(clonedElement)(scope))}}),scope.$on("$destroy",function(){ensureInstance(),tinyInstance&&(tinyInstance.remove(),tinyInstance=null)})}}}}]);
"use strict";function validateEmail(email){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(email)}function md5www(str){var k,AA,BB,CC,DD,a,b,c,d,RotateLeft=function(lValue,iShiftBits){return lValue<<iShiftBits|lValue>>>32-iShiftBits},AddUnsigned=function(lX,lY){var lX4,lY4,lX8,lY8,lResult;return lX8=2147483648&lX,lY8=2147483648&lY,lX4=1073741824&lX,lY4=1073741824&lY,lResult=(1073741823&lX)+(1073741823&lY),lX4&lY4?2147483648^lResult^lX8^lY8:lX4|lY4?1073741824&lResult?3221225472^lResult^lX8^lY8:1073741824^lResult^lX8^lY8:lResult^lX8^lY8},F=function(x,y,z){return x&y|~x&z},G=function(x,y,z){return x&z|y&~z},H=function(x,y,z){return x^y^z},I=function(x,y,z){return y^(x|~z)},FF=function(a,b,c,d,x,s,ac){return a=AddUnsigned(a,AddUnsigned(AddUnsigned(F(b,c,d),x),ac)),AddUnsigned(RotateLeft(a,s),b)},GG=function(a,b,c,d,x,s,ac){return a=AddUnsigned(a,AddUnsigned(AddUnsigned(G(b,c,d),x),ac)),AddUnsigned(RotateLeft(a,s),b)},HH=function(a,b,c,d,x,s,ac){return a=AddUnsigned(a,AddUnsigned(AddUnsigned(H(b,c,d),x),ac)),AddUnsigned(RotateLeft(a,s),b)},II=function(a,b,c,d,x,s,ac){return a=AddUnsigned(a,AddUnsigned(AddUnsigned(I(b,c,d),x),ac)),AddUnsigned(RotateLeft(a,s),b)},WordToHex=function(lValue){var lByte,lCount,WordToHexValue="",WordToHexValue_temp="";for(lCount=0;lCount<=3;lCount++)lByte=lValue>>>8*lCount&255,WordToHexValue_temp="0"+lByte.toString(16),WordToHexValue+=WordToHexValue_temp.substr(WordToHexValue_temp.length-2,2);return WordToHexValue},x=Array();for(str=unescape(encodeURIComponent(str)),x=function(str){for(var lWordCount,lMessageLength=str.length,lNumberOfWords_temp1=lMessageLength+8,lNumberOfWords_temp2=(lNumberOfWords_temp1-lNumberOfWords_temp1%64)/64,lNumberOfWords=16*(lNumberOfWords_temp2+1),lWordArray=Array(lNumberOfWords-1),lBytePosition=0,lByteCount=0;lByteCount<lMessageLength;)lWordCount=(lByteCount-lByteCount%4)/4,lBytePosition=lByteCount%4*8,lWordArray[lWordCount]=lWordArray[lWordCount]|str.charCodeAt(lByteCount)<<lBytePosition,lByteCount++;return lWordCount=(lByteCount-lByteCount%4)/4,lBytePosition=lByteCount%4*8,lWordArray[lWordCount]=lWordArray[lWordCount]|128<<lBytePosition,lWordArray[lNumberOfWords-2]=lMessageLength<<3,lWordArray[lNumberOfWords-1]=lMessageLength>>>29,lWordArray}(str),a=1732584193,b=4023233417,c=2562383102,d=271733878,k=0;k<x.length;k+=16)AA=a,BB=b,CC=c,DD=d,a=FF(a,b,c,d,x[k+0],7,3614090360),d=FF(d,a,b,c,x[k+1],12,3905402710),c=FF(c,d,a,b,x[k+2],17,606105819),b=FF(b,c,d,a,x[k+3],22,3250441966),a=FF(a,b,c,d,x[k+4],7,4118548399),d=FF(d,a,b,c,x[k+5],12,1200080426),c=FF(c,d,a,b,x[k+6],17,2821735955),b=FF(b,c,d,a,x[k+7],22,4249261313),a=FF(a,b,c,d,x[k+8],7,1770035416),d=FF(d,a,b,c,x[k+9],12,2336552879),c=FF(c,d,a,b,x[k+10],17,4294925233),b=FF(b,c,d,a,x[k+11],22,2304563134),a=FF(a,b,c,d,x[k+12],7,1804603682),d=FF(d,a,b,c,x[k+13],12,4254626195),c=FF(c,d,a,b,x[k+14],17,2792965006),b=FF(b,c,d,a,x[k+15],22,1236535329),a=GG(a,b,c,d,x[k+1],5,4129170786),d=GG(d,a,b,c,x[k+6],9,3225465664),c=GG(c,d,a,b,x[k+11],14,643717713),b=GG(b,c,d,a,x[k+0],20,3921069994),a=GG(a,b,c,d,x[k+5],5,3593408605),d=GG(d,a,b,c,x[k+10],9,38016083),c=GG(c,d,a,b,x[k+15],14,3634488961),b=GG(b,c,d,a,x[k+4],20,3889429448),a=GG(a,b,c,d,x[k+9],5,568446438),d=GG(d,a,b,c,x[k+14],9,3275163606),c=GG(c,d,a,b,x[k+3],14,4107603335),b=GG(b,c,d,a,x[k+8],20,1163531501),a=GG(a,b,c,d,x[k+13],5,2850285829),d=GG(d,a,b,c,x[k+2],9,4243563512),c=GG(c,d,a,b,x[k+7],14,1735328473),b=GG(b,c,d,a,x[k+12],20,2368359562),a=HH(a,b,c,d,x[k+5],4,4294588738),d=HH(d,a,b,c,x[k+8],11,2272392833),c=HH(c,d,a,b,x[k+11],16,1839030562),b=HH(b,c,d,a,x[k+14],23,4259657740),a=HH(a,b,c,d,x[k+1],4,2763975236),d=HH(d,a,b,c,x[k+4],11,1272893353),c=HH(c,d,a,b,x[k+7],16,4139469664),b=HH(b,c,d,a,x[k+10],23,3200236656),a=HH(a,b,c,d,x[k+13],4,681279174),d=HH(d,a,b,c,x[k+0],11,3936430074),c=HH(c,d,a,b,x[k+3],16,3572445317),b=HH(b,c,d,a,x[k+6],23,76029189),a=HH(a,b,c,d,x[k+9],4,3654602809),d=HH(d,a,b,c,x[k+12],11,3873151461),c=HH(c,d,a,b,x[k+15],16,530742520),b=HH(b,c,d,a,x[k+2],23,3299628645),a=II(a,b,c,d,x[k+0],6,4096336452),d=II(d,a,b,c,x[k+7],10,1126891415),c=II(c,d,a,b,x[k+14],15,2878612391),b=II(b,c,d,a,x[k+5],21,4237533241),a=II(a,b,c,d,x[k+12],6,1700485571),d=II(d,a,b,c,x[k+3],10,2399980690),c=II(c,d,a,b,x[k+10],15,4293915773),b=II(b,c,d,a,x[k+1],21,2240044497),a=II(a,b,c,d,x[k+8],6,1873313359),d=II(d,a,b,c,x[k+15],10,4264355552),c=II(c,d,a,b,x[k+6],15,2734768916),b=II(b,c,d,a,x[k+13],21,1309151649),a=II(a,b,c,d,x[k+4],6,4149444226),d=II(d,a,b,c,x[k+11],10,3174756917),c=II(c,d,a,b,x[k+2],15,718787259),b=II(b,c,d,a,x[k+9],21,3951481745),a=AddUnsigned(a,AA),b=AddUnsigned(b,BB),c=AddUnsigned(c,CC),d=AddUnsigned(d,DD);return(WordToHex(a)+WordToHex(b)+WordToHex(c)+WordToHex(d)).toLowerCase()}function url_slug(s,opt){s=String(s),opt=Object(opt);var defaults={delimiter:"-",limit:void 0,lowercase:!0,replacements:{},transliterate:"undefined"==typeof XRegExp};for(var k in defaults)opt.hasOwnProperty(k)||(opt[k]=defaults[k]);var char_map={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ő":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ű":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ő":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ű":"u","ý":"y","þ":"th","ÿ":"y","©":"(c)","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ά":"A","Έ":"E","Ί":"I","Ό":"O","Ύ":"Y","Ή":"H","Ώ":"W","Ϊ":"I","Ϋ":"Y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ά":"a","έ":"e","ί":"i","ό":"o","ύ":"y","ή":"h","ώ":"w","ς":"s","ϊ":"i","ΰ":"y","ϋ":"y","ΐ":"i","Ş":"S","İ":"I","Ç":"C","Ü":"U","Ö":"O","Ğ":"G","ş":"s","ı":"i","ç":"c","ü":"u","ö":"o","ğ":"g","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ё":"Yo","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"yo","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","Є":"Ye","І":"I","Ї":"Yi","Ґ":"G","є":"ye","і":"i","ї":"yi","ґ":"g","Č":"C","Ď":"D","Ě":"E","Ň":"N","Ř":"R","Š":"S","Ť":"T","Ů":"U","Ž":"Z","č":"c","ď":"d","ě":"e","ň":"n","ř":"r","š":"s","ť":"t","ů":"u","ž":"z","Ą":"A","Ć":"C","Ę":"e","Ł":"L","Ń":"N","Ó":"o","Ś":"S","Ź":"Z","Ż":"Z","ą":"a","ć":"c","ę":"e","ł":"l","ń":"n","ó":"o","ś":"s","ź":"z","ż":"z","Ā":"A","Č":"C","Ē":"E","Ģ":"G","Ī":"i","Ķ":"k","Ļ":"L","Ņ":"N","Š":"S","Ū":"u","Ž":"Z","ā":"a","č":"c","ē":"e","ģ":"g","ī":"i","ķ":"k","ļ":"l","ņ":"n","š":"s","ū":"u","ž":"z"};for(var k in opt.replacements)s=s.replace(RegExp(k,"g"),opt.replacements[k]);if(opt.transliterate)for(var k in char_map)s=s.replace(RegExp(k,"g"),char_map[k]);var alnum="undefined"==typeof XRegExp?RegExp("[^a-z0-9]+","ig"):XRegExp("[^\\p{L}\\p{N}]+","ig");return s=s.replace(alnum,opt.delimiter),s=s.replace(RegExp("["+opt.delimiter+"]{2,}","g"),opt.delimiter),s=s.substring(0,opt.limit),s=s.replace(RegExp("(^"+opt.delimiter+"|"+opt.delimiter+"$)","g"),""),opt.lowercase?s.toLowerCase():s}function exception(toaster){function catcher(header){return function(err){err?"object"==typeof err&&(err.data&&(err=err.data),err.message?err=err.message:err.error&&(err=err.error)):err="ошибка",toaster.pop("error",header,err)}}function showToaster(type,title,content){"object"==typeof content&&(content.message?content=content.message:content.error&&(content=content.error)),toaster.pop({type:type,title:title,body:content,bodyOutputType:"trustedHtml",showCloseButton:!0,delay:15e3,closeHtml:"<button>Close</button>"})}return{catcher:catcher,showToaster:showToaster}}function confirmFactory($q,$uibModal){function service(question){return $q(function(resolve,reject){var options={animation:!0,template:['<div class="modal-header">','<h3 class="modal-title text-center" ng-bind="$ctrl.question"></h3>','<span class="cancel-confirm"><span class="icon-cancel-img" ng-click=""$ctrl.cancel()"></span></span>',"</div>",'<div class="modal-body confirm">','<form ng-submit="$ctrl.ok()"><button autofocus class="btn btn-project btn-border  btn-modal pull-right" type="reset" ng-click="$ctrl.cancel()">{{global.get("langOrder").val.noo}}</button>','<button class="btn btn-project btn-modal pull-left" type="submit">{{global.get("langOrder").val.yes}}</button>','</form><div class="clearfix"></div>',"</div>"].join(""),controller:function($uibModalInstance,question){var self=this;self.question=question,self.ok=function(){$uibModalInstance.close()},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl",size:"sm",resolve:{question:function(){return question}}};$uibModal.open(options).result.then(function(){resolve()},function(){reject()})})}return service}function sectionServiceFunction($resource,$q,global,$uibModal,$timeout){function init(){Items.query(function(res){res.shift(),sections=res,setCategoriesFromSections(sections),pending=!1})}function reloadItems(){pending=!0,init()}function save(){return Items.save.apply(this,arguments).$promise.then(function(){})}function _getParentSection(sections,sectionUrl,id){if(!sections)return null;for(var i=0,l=sections.length;i<l;i++){if(id){if(sections[i]._id==sectionUrl)return sections[i]}else if(sections[i].url&&sections[i].url==sectionUrl)return sections[i];if(sections[i].child&&sections[i].child.length){var categories;if(categories=_getParentSection(sections[i].child,sectionUrl,id))return categories}}return null}function _getEmbededCategories(section,arr){return section.categories&&section.categories.length&&arr.push.apply(arr,section.categories),section.child&&section.child.length&&section.child.forEach(function(section){getEmbededCategories(section,arr)}),arr}function returnSections(resolve){pending?setTimeout(function(){returnSections(resolve)},100):resolve(sections)}function getSections(){return $q(function(resolve,reject){global.get("sections")&&global.get("sections").val?(sections||(sections=global.get("sections").val),resolve(global.get("sections").val)):pending?setTimeout(function(){returnSections(resolve)},100):sections?resolve(sections):(pending=!0,Items.query(function(res){res.shift(),sections=res,pending=!1,setCategoriesFromSections(sections),resolve(sections)},function(err){pending=!1,reject(err)}))})}function setSections(newSections){sections=newSections,setCategoriesFromSections(sections?sections:[])}function getSection(sections,sectionUrl){sections||(sections=getSections());for(var i=0,l=sections.length;i<l;i++){if(sections[i].url&&sections[i].url==sectionUrl)return sections[i];if(sections[i].child&&sections[i].child.length)for(var j=0,ll=sections[i].child.length;j<ll;j++)if(sections[i].child[j].url&&sections[i].child[j].url==sectionUrl)return sections[i].child[j]}return null}function getParentSection(sectionUrl,id){return _getParentSection(sections,sectionUrl,id)}function getEmbededCategories(section,arr){return _getEmbededCategories(section,arr)}function setCategoriesFromSections(sections){var categories=[],categoriesO={};sections.forEach(function(section){section.categories&&section.categories.length&&(section.categories.forEach(function(c){c.section={url:section.url},c.linkData={groupUrl:section.url,categoryUrl:c.url},categoriesO[c._id]=c}),categories.push.apply(categories,section.categories)),section.child&&section.child.length&&section.child.forEach(function(subSection){subSection.categories&&subSection.categories.length&&(subSection.categories.forEach(function(c){c.section={url:section.url},c.linkData={groupUrl:section.url,categoryUrl:c.url,parentGroup:subSection.url},categoriesO[c._id]=c}),categories.push.apply(categories,subSection.categories))})}),global.set("categories",categories),global.set("categoriesO",categoriesO)}function select(){var that=this;return $q(function(resolve,reject){var options={animation:!0,templateUrl:"components/sections/selectSubsectionModal.html",controller:selectSubsectionCtrl,size:"lg",resolve:{sections:function(){return that.getSections()}},controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(selectedItem){resolve(selectedItem)},function(){console.log("Modal dismissed at: "+new Date),reject()})})}function selectSubsectionCtrl($q,$uibModalInstance,sections){var self=this;self.sections=sections,console.log(sections),self.ok=function(section){$uibModalInstance.close(section)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}}var Items=$resource("/api/collections/Group/:id",{id:"@_id"}),sections=null,pending=!0;return function(){$timeout(function(){global.get("sections")&&global.get("sections").val||init()})}(),{query:Items.query,get:Items.get,delete:Items.delete,save:save,savePure:Items.save,getSections:getSections,getSection:getSection,getParentSection:getParentSection,getEmbededCategories:getEmbededCategories,setCategoriesFromSections:setCategoriesFromSections,select:select,setSections:setSections,reloadItems:reloadItems}}function brandEditCtrl($anchorScroll,Brands,global,$q,exception,$stateParams,$scope,$timeout){function activate(){$q.when().then(function(){return self.Items.get({id:$stateParams.id}).$promise}).then(function(res){self.item=res,console.log(self.item)}).catch(function(err){err&&exception.catch("получение данных")(err)})}function saveField(field,defer){defer=defer||0,setTimeout(function(){var o={_id:self.item._id};o[field]=self.item[field],self.Items.save({update:field},o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})},defer)}var self=this;self.Items=Brands,self.global=global,self.saveField=saveField,activate(),$scope.$on("changeLang",function(){activate()})}function brandTagEdit(){return{scope:{min:"="},bindToController:!0,controller:brandTagEditCtrl,controllerAs:"$ctrl",templateUrl:"components/brand/collectionEdit.html",restrict:"EA"}}function brandTagEditCtrl(BrandTags,$q,$state,global,$stateParams,$scope,$timeout){function activate(id){return getItem(id).then(function(){})}function getItem(id){return vm.Items.get({id:$stateParams.id}).$promise.then(function(res){vm.item=res},function(err){})}function saveField(field,defer){defer=defer||0,setTimeout(function(){var o={_id:vm.item._id};o[field]=vm.item[field],vm.Items.save({update:field},o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})},defer)}var vm=this;vm.Items=BrandTags,self.global=global,vm.saveField=saveField,activate($stateParams.id),$scope.$on("changeLang",function(){activate($stateParams.id)})}function driveSaleDirective(){return{restrict:"E",bindToController:!0,controllerAs:"$ctrl",controller:driveSaleCtrl}}function driveSaleCtrl($scope,$element,$uibModal){function editPriceSetting(data,field){$uibModal.open({animation:!0,templateUrl:"components/stuff/modal/editPriceSetting.html",controller:editPriceSettingModalCtrl,controllerAs:"$ctrl",resolve:{data:function(){return data},field:function(){return field}}}).result.then(function(data){console.log(data),$scope.saveField($scope.item,"driveSalePrice")},function(){})}$element.bind("click",function(){$scope.item.driveSalePrice||($scope.item.driveSalePrice={type:0,condition:!0,percent:0,sum:0}),editPriceSetting($scope.item.driveSalePrice,"driveSalePrice")})}function driveRetailDirective(){return{restrict:"E",bindToController:!0,controllerAs:"$ctrl",controller:driveRetailCtrl}}function driveRetailCtrl($scope,$element,$uibModal){function editPriceSetting(data,field){$uibModal.open({animation:!0,templateUrl:"components/stuff/modal/editPriceSetting.html",controller:editPriceSettingModalCtrl,controllerAs:"$ctrl",resolve:{data:function(){return data},field:function(){return field}}}).result.then(function(data){console.log(data),$scope.saveField($scope.item,"driveRetailPrice")},function(){})}$element.bind("click",function(){$scope.item.driveRetailPrice||($scope.item.driveRetailPrice={type:0,condition:!0,percent:0,sum:0}),editPriceSetting($scope.item.driveRetailPrice,"driveRetailPrice")})}function editPriceSettingModalCtrl(data,field,$uibModalInstance){var self=this;self.header="","driveSalePrice"==field?self.header="sale":"driveRetailPrice"==field&&(self.header="розница"),self.item=data,self.ok=function(){console.log(self.item),$uibModalInstance.close(self.item)},self.cancel=function(){$uibModalInstance.dismiss()}}function filterTagsService($resource,$uibModal,$q,global,$timeout,Sections){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return console.log("XHR Failed for getNews."+error),$q.reject(error)}return paginate||(paginate={page:0}),Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete).catch(getListFailed)}function getItem(id){function getItemComplete(response){return response}function getItemFailed(error){return $q.reject(error)}return Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}function getFilterTags(){return $q(function(resolve,reject){return global.get("filterTags")&&global.get("filterTags").val?(filterTags||(filterTags=global.get("filterTags").val),resolve(global.get("filterTags").val)):pending?$timeout(function(){return resolve(filterTags)},400):void(filterTags?resolve(filterTags):(pending=!0,Items.query(function(res){res.shift(),filterTags=res?res:[],pending=!1,resolve(filterTags)},function(err){pending=!1,reject(err)})))})}function getTagsByUrl(queryTags,cb){$q.when().then(function(){return getFilterTags()}).then(function(){queryTags=queryTags.map(function(url){return filterTags.getOFA("url",url)}),cb(queryTags)})}function selectFilterTag(data){var sections=data&&data.section?Sections.getSections():null;return $q(function(resolve,reject){var options={animation:!0,templateUrl:"components/filters/bindFilterTagToModel.html",controller:selectFilterTagCtrl,size:"lg",controllerAs:"$ctrl",resolve:{sections:function(){return sections}}};$uibModal.open(options).result.then(function(selectedFilterTag){resolve(selectedFilterTag)},function(){console.log("Modal dismissed at: "+new Date),reject()})})}function selectFilterTagCtrl(Filters,$uibModalInstance,$q,global,sections){var self=this;self.global=global,self.sections=sections,self.sections&&(self.section=self.sections[0].url),$q.when().then(function(){return Filters.getFilters()}).then(function(filters){self.filters=filters}),self.cancel=function(){$uibModalInstance.dismiss("cancel")},self.ok=function(filterTag){self.section&&(filterTag.section=self.section),$uibModalInstance.close(filterTag)}}function init(){Items.query(qu,function(res){res.shift(),filterTags=res,filterTags.forEach(function(t){_filterTagsO[t._id]=t}),pending=!1})}function reloadItems(){pending=!0,init()}function getSticker(tags){if(tags&&tags.length&&filterTags&&filterTags.length)for(var i=0;i<tags.length;i++)if(__filterTagsO[tags[i]]&&__filterTagsO[tags[i]].sticker)return __filterTagsO[tags[i]].sticker}var qu,Items=$resource("/api/collections/FilterTags/:_id",{_id:"@_id"}),filterTags=null,pending=!0;return filterTags=__filterTags,$timeout(function(){qu={query:JSON.stringify({store:global.get("store").val._id})},global.get("filterTags")&&global.get("filterTags").val?filterTags=global.get("filterTags").val:init()},50),{getList:getList,getItem:getItem,save:Items.save,delete:Items.delete,query:Items.query,get:Items.get,getFilterTags:getFilterTags,getTagsByUrl:getTagsByUrl,selectFilterTag:selectFilterTag,select:selectFilterTag,reloadItems:reloadItems,getSticker:getSticker,reloadItems:reloadItems}}function externalCatalogComponent(){return{scope:{},restrict:"E",bindToController:!0,controller:externalCatalogCtrl,controllerAs:"$ctrl",templateUrl:"components/externalCatalog/externalCatalog.html"}}function externalCatalogDownload(){return{scope:{},restrict:"E",bindToController:!0,controller:externalCatalogDownloadCtrl,controllerAs:"$ctrl",templateUrl:"components/externalCatalog/externalCatalogDownload.html"}}function externalCatalogDownloadCtrl(Items,$q,Confirm,exception,global,$timeout,$http,$resource,Sections,Brands,$uibModal){function getList(){var query={};return $q.when().then(function(){return Items.getList(null,query)}).then(function(res){res.forEach(function(item){item.brand&&(item.brand=self.brands.find(function(b){return b._id==item.brand})),item.group&&(item.group=self.sections.find(function(s){return s._id==item.group}))}),self.items=res})}function downloadCatalog(item){$q.when().then(function(){self.myFile;$uibModal.open({animation:!0,templateUrl:"components/externalCatalog/modal/uploadExternalCatalog.html",controller:function($uibModalInstance,$q,$resource,item){function confirmUpload(){fdata.append("confirm",!0),$resource(uploadUrl,{},{postWithFile:{method:"POST",params:fdata,transformRequest:angular.identity,headers:{"Content-Type":void 0}}}).postWithFile(fdata),$uibModalInstance.close()}var self=this;self.disabledUpload=!0;var uploadUrl=stuffHost+"/api/downLoadExternalCatalog";self.ok=function(){$uibModalInstance.close()},self.cancel=function(){$uibModalInstance.dismiss()},self.catalogName=item.name,self.confirmUpload=confirmUpload,console.log(item);var fdata=new FormData;item.file&&fdata.append("file",item.file),fdata.append("_id",item._id),fdata.append("url",item.url),fdata.append("link",item.link),fdata.append("index",item.index),item.group&&fdata.append("group",item.group._id),item.brand&&fdata.append("brand",item.brand._id),item.name&&fdata.append("name",item.name),item.desc&&fdata.append("desc",item.desc),item.price&&fdata.append("price",item.price),item.qty&&fdata.append("qty",item.qty),item.artikul&&fdata.append("artikul",item.artikul),item.tags&&fdata.append("tags",item.tags),$q.when().then(function(){return $http.post(uploadUrl,fdata,{withCredentials:!0,transformRequest:angular.identity,headers:{"Content-Type":void 0}})}).then(function(res){console.log(res),res.err?(self.errText=JSON.stringify(res.err),"{}"==self.errText&&(self.errText="произошла ошибка при обработке файла")):(self.disabledUpload=!1,self.disableSpinner=!0,self.updateStuffs=res.updateStuffs,self.newStuffs=res.newStuffs,self.newCategories=res.newCategories,self.newBrands=res.newBrands,self.newBrandTags=res.newBrandTags,self.newFilters=res.newFilters,self.newFilterTags=res.newFilterTags)})},controllerAs:"$ctrl",size:"lg",resolve:{item:function(){return item}}}).result}).catch(function(error){console.log(error)})}function setGroup(item){$q.when().then(function(){return Sections.select()}).then(function(group){item.group=group,saveField(item,"group",group._id)})}function setBrand(item){$q.when().then(function(){return Brands.select()}).then(function(brand){item.brand=brand,saveField(item,"brand",brand._id)})}function clearField(item,field){item[field]=null,saveField(item,field)}function saveField(item,field,value){console.log(item);var o={_id:item._id};o[field]="undefined"!=value?item[field]:value,Items.save({update:field},o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500);var url=stuffHost+"/api/changeTaskSchedule",i=angular.copy(item);i.brand&&(i.brand=i.brand._id),i.group&&(i.group=i.group._id),$http.post(url,i).success(function(res){exception.showToaster("info","schedule","was changed")}).error(function(err){exception.catcher("error")(err),console.log(err)})})}function viewLogFile(){$uibModal.open({animation:!0,templateUrl:"components/externalCatalog/modal/viewLog.html",controller:function($uibModalInstance,$q,$http,global,$sce){var self=this;self.$sce,self.url=stuffHost+"/log/"+global.get("store").val.subDomain+"_externalCatalog.log",self.ok=function(){$uibModalInstance.close()},self.cancel=function(){$uibModalInstance.dismiss()},$http.get(self.url).success(function(res){console.log(res.replace(/[\r\n]/g,"<br />")),self.loaded,self.logFile=$sce.getTrustedHtml(res.replace(/[\r\n]/g,"<br />"))}).error(function(err){self.loaded,console.log(err)})},controllerAs:"$ctrl",size:"lg"})}var self=this;self.downloadCatalog=downloadCatalog,self.setGroup=setGroup,self.setBrand=setBrand,self.viewLogFile=viewLogFile,self.clearField=clearField,self.saveField=saveField,self.updateList=updateExternalCatalogList,self.lang=global.get("store").val.lang,function(){$q.when().then(function(){return Brands.getBrands()}).then(function(brands){return self.brands=brands,Sections.getSections()}).then(function(sections){self.sections=sections}).then(function(){getList()})}()}function externalCatalogCtrl(Items,$q,Confirm,exception,global,$timeout){function getList(){var query={};return $q.when().then(function(){return Items.getList(null,query)}).then(function(res){console.log(res),self.items=res}).then(function(){var d=new Date;self.items.forEach(function(item){item.timezoneOffset||0==item.timezoneOffset||(item.timezoneOffset=Math.ceil(d.getTimezoneOffset()/60),saveField(item,"timezoneOffset"))})})}function saveField(item,field){var o={_id:item._id};o[field]=item[field],Items.save({update:field},o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})}function createItem(){$q.when().then(function(){return Items.create()}).then(function(item){var d=new Date;return item.timezoneOffset=d.getTimezoneOffset(),Items.save(item).$promise}).then(function(){return getList()}).catch(function(err){err&&exception.catcher("создание внешнего каталога")(err)})}function deleteItem(item){Confirm("удалить?").then(function(){item.actived=!1,saveField(item,"actived")}).then(function(){}).catch(function(err){(err=err&&err.data||err)&&exception.catcher("удаление внешнего каталога")(err)})}var self=this;self.saveField=saveField,self.createItem=createItem,self.deleteItem=deleteItem,function(){getList()}()}function photoFactory($http){return{deleteFolder:function(model,folder){return $http.post("/api/collections/Photo/deleteFolder",{folder:folder})},deleteFolders:function(model,folders){return $http.post("/api/collections/Photo/deleteFolders",{folders:folders})},deleteFiles:function(model,files){return $http.post("/api/collections/Photo/deleteFiles",{files:files})}}}function sortsOfStuffctrlCtrl($uibModal,$resource,Stuff,$q,createStuffService,exception,global,$timeout){function setDescForSort(stuff,tag){$uibModal.open({animation:!0,templateUrl:"components/sortsOfStuff/descForSort.html",controller:function($uibModalInstance,desc){var self=this;self.tinymceOption={plugins:"code print preview fullpage searchreplace autolink directionality  visualblocks visualchars fullscreen image link media template codesample table charmap hr pagebreak nonbreaking anchor toc insertdatetime advlist lists textcolor wordcount  imagetools  contextmenu colorpicker textpattern help",toolbar:"code | formatselect | bold italic strikethrough forecolor backcolor | link | alignleft aligncenter alignright alignjustify  | numlist bullist outdent indent  | removeformat | code "},self.desc=desc,self.ok=function(){$uibModalInstance.close(self.desc)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl",resolve:{desc:function(){return stuff.descLSort&&stuff.descLSort[tag]&&stuff.descLSort[tag][self.lang]?stuff.descLSort[tag][self.lang]:""}}}).result.then(function(desc){console.log(desc),stuff.descLSort||(stuff.descLSort={}),stuff.descLSort[tag]||(stuff.descLSort[tag]={}),stuff.descLSort[tag][self.lang]=desc,self.saveField(stuff,"descLSort")},function(){})}function setFilterInSort(filter){return $q(function(resolve,reject){self.stuff.sortsOfStuff.filter=filter,Items.save({update:"filter"},{_id:self.stuff.sortsOfStuff._id,filter:filter&&filter._id?filter._id:null},function(){resolve()},function(err){reject(err)})})}function setFilterGroupInSort(filter){return $q(function(resolve,reject){self.stuff.sortsOfStuff.filterGroup=filter,Items.save({update:"filterGroup"},{_id:self.stuff.sortsOfStuff._id,filterGroup:filter&&filter._id?filter._id:null},function(){resolve()},function(err){reject(err)})})}function getStuffPromise(stuff){return $q(function(resovle,reject){stuff&&stuff._id?resovle(stuff):stuff&&!stuff._id&&Stuff.get({_id:stuff}).$promise.then(function(res){resolve(res)},function(err){reject(err)})})}function addStuffInSorts(stuff){if(self.stuff.sortsOfStuff.stuffs.some(function(el){return el._id==stuff._id}))return void console.log("stuff already exist in sort");$q.when().then(function(){return $q(function(resolve,reject){stuff.sortsOfStuff?Items.get({id:stuff.sortsOfStuff._id}).$promise.then(function(megreSorts){stuff.sortsOfStuff=megreSorts,resolve()},function(err){reject(err)}):resolve(null)})}).then(function(){return $q(function(resolve,reject){stuff.sortsOfStuff&&stuff.sortsOfStuff.filter&&!self.stuff.sortsOfStuff.filter?Items.save({update:"filter"},{_id:self.stuff.sortsOfStuff._id,filter:stuff.sortsOfStuff.filter}).$promise.then(function(){resolve()},function(err){reject(err)}):resolve()})}).then(function(){return $q(function(resolve,reject){if(stuff.sortsOfStuff&&stuff.sortsOfStuff.filter&&!self.stuff.sortsOfStuff.filter)self.stuff.sortsOfStuff.filter=self.stuff.category.filters.getOFA("_id",stuff.sortsOfStuff.filter),self.stuff.sortsOfStuff.filter?self.setStockTableForSorts(self.stuff.sortsOfStuff.filter,self.stuff.sortsOfStuff.stuffs).then(function(){resolve()},function(err){reject(err)}):resolve();else{var stuffs=stuff.sortsOfStuff&&stuff.sortsOfStuff.stuffs?stuff.sortsOfStuff.stuffs:[stuff];self.setStockTableForSorts(self.stuff.sortsOfStuff.filter,stuffs).then(function(){resolve()},function(err){reject(err)})}})}).then(function(){return $q(function(resolve,reject){stuff.sortsOfStuff&&stuff.sortsOfStuff.stuffs?self.stuff.sortsOfStuff.stuffs.push.apply(self.stuff.sortsOfStuff.stuffs,stuff.sortsOfStuff.stuffs):self.stuff.sortsOfStuff.stuffs.push(stuff);var o={_id:self.stuff.sortsOfStuff._id};o.stuffs=self.stuff.sortsOfStuff.stuffs.filter(function(el){return el}).map(function(el){return el._id}),Items.save({update:"stuffs"},o).$promise.then(function(){resolve()},function(err){reject(err)})})}).then(function(){stuff.sortsOfStuff&&Items.delete({id:stuff.sortsOfStuff._id})}).then(function(){self.stuff.sortsOfStuff.stuffs.filter(function(el){return el.sortsOfStuff!=self.stuff.sortsOfStuff._id}).map(function(el){Stuff.Items.save({update:"sortsOfStuff"},{_id:el._id,sortsOfStuff:self.stuff.sortsOfStuff._id})})}).catch(function(){})}var Items=$resource("/api/collections/SortsOfStuff/:id",{id:"@_id"}),self=this;self.setDescForSort=setDescForSort,self.lang=global.get("store").val.lang,self.saveField=function(stuff,field){if(stuff._id==self.stuff._id){field.split(" ").forEach(function(el){"undefined"!=stuff[el]&&(self.stuff[el]=stuff[el])})}$q.when().then(function(){return Stuff.saveField(stuff,field)}).then(function(){$timeout(function(){global.set("saving",!1)},1500)}).catch(function(err){console.log(err),err&&exception.catcher("сохранение")(err)})},self.saveFieldsortsOfStuff=function(field){var o={_id:self.stuff.sortsOfStuff._id};self.stuff.sortsOfStuff[field]?o[field]=self.stuff.sortsOfStuff[field]:o[field]=null,Items.save({update:field},o,function(res){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})},self.changeDifferentPrice=function(){Items.save({update:"differentPrice"},{_id:self.stuff.sortsOfStuff._id,
differentPrice:self.stuff.sortsOfStuff.differentPrice},function(res){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})},self.changeStock=function(stuff,tag,value){stuff.priceForFilter=[];for(var key in stuff.stock)if(key!=stuff.sort||stuff.stock[key].quantity||(stuff.sort=null),stuff.stock[key].quantity){var c=stuff.currency?stuff.currency:global.get("store").val.mainCurrency,price=c==global.get("store").val.mainCurrency?stuff.stock[key].price:Math.ceil10(stuff.stock[key].price/global.get("store").val.currency[c][0],-2);stuff.priceForFilter.push(price)}if(tag&&tag._id){var i=stuff.tags.indexOf(tag._id);value&&i<0?(console.log("add"),stuff.tags.push(tag._id)):!value&&i>-1&&stuff.tags.splice(i,1),stuff.setTagsValue&&stuff.setTagsValue(),self.saveField(stuff,"stock tags sort priceForFilter")}else self.saveField(stuff,"stock sort priceForFilter")},self.getNameTag=function(tag){if(self.stuff.category&&self.stuff.category.filters&&self.stuff.category.filters.length)for(var i=0,l=self.stuff.category.filters.length;i<l;i++)for(var ii=0,ll=self.stuff.category.filters[i].tags.length;ii<ll;ii++)if(self.stuff.category.filters[i].tags[ii]._id==tag)return self.stuff.category.filters[i].tags[ii].name},self.createSort=function(filter){return $q(function(resolve,reject){self.stuff.sortsOfStuff={stuffs:[self.stuff._id]},filter&&(self.stuff.sortsOfStuff.filter=filter._id),Items.save(self.stuff.sortsOfStuff,function(res){self.stuff.sortsOfStuff._id=res.id,self.stuff.sortsOfStuff.stuffs[0]=self.stuff,filter&&(self.stuff.sortsOfStuff.filter=filter),Stuff.Items.save({update:"sortsOfStuff"},{_id:self.stuff._id,sortsOfStuff:self.stuff.sortsOfStuff._id},function(){resolve()},function(err){reject(err)})},function(err){reject(err)})})},self.setStockTableForSort=function(stuff,stockTemplate){return $q(function(resolve,reject){getStuffPromise(stuff).then(function(stuff){var fields="stock";stuff.sortsOfStuff&&self.stuff.sortsOfStuff._id!=stuff.sortsOfStuff._id&&(stuff.sortsOfStuff=self.stuff.sortsOfStuff._id,fields+=" sortsOfStuff");try{if(stockTemplate){var stock=angular.copy(stockTemplate);for(var key in stock){if(stuff.stock&&stuff.stock[key]&&(stock[key].quantity=stuff.stock[key].quantity),stuff.stock&&stuff.stock[key]&&stuff.stock[key].price&&(stock[key].price=stuff.stock[key].price),stuff.stock&&stuff.stock[key]&&stuff.stock[key].priceSale&&(stock[key].priceSale=stuff.stock[key].priceSale),stuff.stock&&stuff.stock[key]&&stuff.stock[key].retail&&(stock[key].retail=stuff.stock[key].retail),"notag"!=key){stuff.tags.indexOf(key)<0&&stuff.tags.push(key)}stock[key].price||(stock[key].price=stuff.price)}stuff.stock=stock,stuff.setTagsValue&&stuff.setTagsValue(),fields+=" tags"}else stock={notag:{quantity:1}}}catch(err){console.log(err)}console.log(stuff),Stuff.saveField(stuff,fields).then(function(){resolve()},function(err){reject(err)})},function(err){reject(err)})})},self.setStockTableForSorts=function(filter,stuffs){var stock,qty=global.get("store").val.settingContent&&global.get("store").val.settingContent.admin&&global.get("store").val.settingContent.admin.sortsDisable?0:1;filter&&filter.tags.forEach(function(tag){stock||(stock={}),stock[tag._id]={quantity:qty}});var actions=stuffs.map(function(stuff){return self.setStockTableForSort(stuff,stock)});return $q.all(actions)},self.changeFilter=function(filter){return $q.when().then(function(){return self.stuff.sortsOfStuff?setFilterInSort(filter):self.createSort(filter)}).then(function(newSort){$q(function(resolve,reject){self.setStockTableForSorts(filter,self.stuff.sortsOfStuff.stuffs).then(function(){resolve()},function(err){reject(err)})})}).catch(function(err){console.log(err)})},self.changeFilterGroup=function(filter){return $q.when().then(function(){return setFilterGroupInSort(filter)}).catch(function(err){console.log(err)})},self.selectFilter=function(){$uibModal.open({animation:!0,templateUrl:"components/sortsOfStuff/selectFilter.html",controller:function(filters,sortsOfStuff,$uibModalInstance){var self=this;self.filters=filters,self.selectFilter=function(filter){$uibModalInstance.close(filter)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl",resolve:{filters:function(){return self.stuff.category&&self.stuff.category[0].filters?self.stuff.category[0].filters:[]},sortsOfStuff:function(){return self.sortsOfStuff}}}).result.then(function(selectedfilter){self.changeFilter(selectedfilter)},function(){})},self.selectFilterGroup=function(){$uibModal.open({animation:!0,templateUrl:"components/sortsOfStuff/selectFilter.html",controller:function(filters,sortsOfStuff,$uibModalInstance){var self=this;self.filters=filters,self.selectFilter=function(filter){$uibModalInstance.close(filter)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl",resolve:{filters:function(){return self.stuff.category&&self.stuff.category[0]&&self.stuff.category[0].filters?self.stuff.category[0].filters:[]},sortsOfStuff:function(){return self.sortsOfStuff}}}).result.then(function(selectedfilter){self.changeFilterGroup(selectedfilter)},function(){})},self.clearFilterGroup=function(){self.changeFilterGroup(null)},self.selectStuff=function(){$q.when().then(function(){var query={category:self.stuff.category._id};return Stuff.selectItem(query)}).then(function(stuff){if(stuff&&stuff.sortsOfStuff&&self.stuff.sortsOfStuff.filter&&stuff.sortsOfStuff.filter!=self.stuff.sortsOfStuff.filter._id)throw"признаки разновидностей не совподают";addStuffInSorts(stuff)}).catch(function(err){(err=err.data||err)&&exception.catcher("добавление товара")(err)})},self.createAndAddStuff=function(){var newStuff=angular.copy(self.stuff);return void $q.when().then(function(){return Stuff.cloneStuff(newStuff,!0)}).then(function(stuffFromResolve){addStuffInSorts(stuffFromResolve)}).catch(function(err){console.log(err)})},self.deleteStuffFromSort=function(stuff,index){$q.when().then(function(){return $q(function(resolve,reject){if(1==self.stuff.sortsOfStuff.stuffs.length&&self.stuff.sortsOfStuff.stuffs[0]._id==stuff._id)Items.delete({id:self.stuff.sortsOfStuff._id},function(err){self.stuff.sortsOfStuff=null,resolve()},function(err){reject(err)});else{self.stuff.sortsOfStuff.stuffs.splice(index,1);var o={_id:self.stuff.sortsOfStuff._id};o.stuffs=self.stuff.sortsOfStuff.stuffs.map(function(el){return el._id}),Items.save({update:"stuffs"},o,function(res){resolve()},function(err){reject(err)})}})}).then(function(){return $q(function(resolve,reject){if(self.stuff.sortsOfStuff&&self.stuff.sortsOfStuff.filter){var o={filter:self.stuff.sortsOfStuff.filter._id,stuffs:[stuff._id]};Items.save(o,function(res){resolve(res.id)},function(err){reject(err)})}else resolve(null)})}).then(function(sort){return $q(function(resolve,reject){sort||(stuff.stock={notag:{quantity:1}}),Stuff.Items.save({update:"sortsOfStuff stock"},{_id:stuff._id,sortsOfStuff:sort,stock:stuff.stock},function(){resolve(sort)},function(err){reject(err)})})}).then(function(sort){return $q(function(resolve,reject){sort?Items.get({id:sort},function(res){self.stuff.sortsOfStuff=res,self.stuff.sortsOfStuff.filter=self.stuff.category.filters.getOFA("_id",self.stuff.sortsOfStuff.filter),resolve()},function(err){reject(err)}):resolve()})}).catch(function(err){console.log(err)})},self.additionalInfo=function(){$uibModal.open({animation:!0,templateUrl:"components/sortsOfStuff/additionalInfo.html",controller:function(filter,carrentAddInfo,AddInfo,$uibModalInstance,global){function initItem(){if(self.item={header:{},table:{},name:"",filter:filter._id},filter.tags.forEach(function(tag){self.item.table[tag._id]={}}),langArr&&langArr.forEach)langArr.forEach(function(lang){self.item.header[lang]=[""];for(var key in self.item.table)self.item.table[key][lang]=[""]});else{self.item.header[self.lang]=[""];for(var key in self.item.table)self.item.table[key][self.lang]=[""]}}var self=this;self.global=self.lang=global.get("store").val.lang;var langArr=global.get("store").val.langArr;console.log(langArr),filter?self.filter=filter:$uibModalInstance.dismiss("cancel");var query={filter:filter._id};self.items=[],initItem(),self.getTagName=function(id){for(var i=1,l=self.filter.tags.length;i<l;i++)if(self.filter.tags[i]._id==id)return self.filter.tags[i].name;return"noname"},function(){AddInfo.query({query:query},function(res){if(res.shift(),self.items=res,carrentAddInfo)for(var i=1,l=self.items.length;i<l;i++)if(self.items[i]._id==carrentAddInfo){self.item=self.items[i];break}},function(err){console.log(err)})}(),self.selectAddInfo=function(addInfo){$uibModalInstance.close(addInfo)},self.cancel=function(){$uibModalInstance.dismiss("cancel")},self.saveTable=function(){1!=self.item.header.length&&(self.item.header.pop(),filter.tags.forEach(function(tag){self.item.table[tag._id].pop()}),self.item.name||(self.item.name=filter.name),self.item._id?AddInfo.save({update:"header table name"},self.item,function(res){AddInfo.query({query:query},function(res){res.shift(),self.items=res}),initItem()}):AddInfo.save(self.item,function(res){AddInfo.query({query:query},function(res){res.shift(),self.items=res}),initItem()}))},self.addRow=function(){if(langArr&&langArr.forEach)langArr.forEach(function(lang){self.item.header[lang].push("");for(var key in self.item.table)self.item.table[key][lang].push("")});else{self.item.header[self.lang].push("");for(var key in self.item.table)self.item.table[key][self.lang].push("")}console.log(self.item)},self.deleteRow=function(i){if(langArr&&langArr.forEach)langArr.forEach(function(lang){self.item.header[lang].splice(i,1);for(var key in self.item.table)self.item.table[key][lang].splice(i,1)});else{self.item.header[self.lang].splice(i,1);for(var key in self.item.table)self.item.table[key][self.lang].splice(i,1)}},self.editTable=function(item){if(console.log(item),self.item=item,langArr&&langArr.forEach)langArr.forEach(function(lang){self.item.header[lang].push("");for(var key in self.item.table)self.item.table[key][lang].push("")});else{self.item.header[self.lang].push("");for(var key in self.item.table)self.item.table[key][self.lang].push("")}},self.setTable=function(item){}},controllerAs:"$ctrl",size:"lg",resolve:{filter:function(){return self.stuff.sortsOfStuff.filter},carrentAddInfo:function(){return self.stuff.sortsOfStuff.addInfo}}}).result.then(function(addInfo){self.stuff.sortsOfStuff.addInfo=addInfo._id,console.log(addInfo)},function(){})}}function HPtransform(HP,template){function setData(e){var o={type:e.name};return e.templ&&(o.templ=e.templ),e.style&&(o.style=e.style),"stuffs"==e.name?(HP.stuffs&&HP.stuffs.length&&(o.stuffs=HP.stuffs),e.namebox&&(o.name=e.namebox)):"brands"==e.name?(HP.brands&&HP.brands.length&&(o.brands=HP.brands),e.namebox&&(o.name=e.namebox)):"brandTags"==e.name?(HP.brandTags&&HP.brandTags.length&&(o.brandTags=HP.brandTags),e.namebox&&(o.name=e.namebox)):"filterTags"==e.name?(HP.filterTags&&HP.filterTags.length&&(o.filterTags=HP.filterTags),e.namebox&&(o.name=e.namebox)):"filters"==e.name?(HP.filters&&HP.filters.length&&(o.filters=HP.filters),e.namebox&&(o.name=e.namebox)):"categories"==e.name?(HP.categories&&HP.categories.length&&(o.categories=HP.categories),e.namebox&&(o.name=e.namebox)):"campaign"==e.name?(HP.campaign&&HP.campaign.length&&(o.campaign=HP.campaign),e.namebox&&(o.name=e.namebox)):"news"==e.name?(HP.news&&HP.news.length&&(o.news=HP.news),e.namebox&&(o.name=e.namebox)):"text"==e.name?(o.name=HP.textName,o.desc=HP.textDesc,HP.textButton&&(o.button={is:HP.textButton.button,link:HP.textButton.link,text:HP.textButton.text})):"mission"==e.name?(o.name=HP.name,o.desc=HP.desc,HP.descButton&&(o.button={is:HP.descButton.button,link:HP.descButton.link,text:HP.descButton.text})):"banner"==e.name?(o.img=HP.bannerSrc,HP.banner&&(o.desc=HP.banner.desc,o.button={is:HP.banner.button,link:HP.banner.link,text:HP.banner.text})):"video"==e.name?(o.video=HP.videoSrc,HP.video&&(o.audio=HP.video.audio,o.desc=HP.video.desc,o.button={is:HP.video.button,link:HP.video.link,text:HP.video.text})):"slider"==e.name?HP.imgs&&(o.imgs=HP.imgs):"info"==e.name&&(o.img=HP.infoImg,HP.info&&(o.name=HP.info.name,o.button={link:HP.info.link})),o}if(HP.url)var hp=HP;else{var hp={header:[],left:[],right:[]};template.left.forEach(function(e){hp.left.push(setData(e))}),template.right.forEach(function(e){hp.right.push(setData(e))})}return hp}function googlePlaceReviews(global){return{restrict:"C",scope:!0,link:function(scope,element){global.get("store").val.glPlaceId&&(console.log("global.get('store').val.glPlaceId",global.get("store").val.glPlaceId),$(element).googlePlaces({placeId:global.get("store").val.glPlaceId,render:["reviews"],min_rating:1,max_rows:4}))}}}function undefinedhpBlock(){return{templateUrl:"components/homePage/blocks/undefinedBlock.html"}}function styleBlock(){return{templateUrl:"components/homePage/blocks/styleBlock.html"}}function bannerHPBlock(){return{templateUrl:"components/homePage/blocks/bannerBlock.html"}}function banneroneHPBlock(){return{templateUrl:"components/homePage/blocks/banneroneBlock.html"}}function infohpBlock(){return{templateUrl:"components/homePage/blocks/infoBlock.html"}}function sliderhpBlock(){return{templateUrl:"components/homePage/blocks/sliderBlock.html"}}function texthpBlock(){return{templateUrl:"components/homePage/blocks/textBlock.html"}}function texttwohpBlock(){return{templateUrl:"components/homePage/blocks/texttwoBlock.html"}}function videohpBlock(){return{templateUrl:"components/homePage/blocks/videoBlock.html"}}function missionhpBlock(){return{templateUrl:"components/homePage/blocks/missionBlock.html"}}function brandshpBlock(){return{templateUrl:"components/homePage/blocks/brandsBlock.html"}}function stuffshpBlock(){return{templateUrl:"components/homePage/blocks/stuffsBlock.html"}}function newshpBlock(){return{templateUrl:"components/homePage/blocks/newsBlock.html"}}function campaignhpBlock(){return{templateUrl:"components/homePage/blocks/campaignBlock.html"}}function maphpBlock(){return{templateUrl:"components/homePage/blocks/mapBlock.html"}}function reviewhpBlock(){return{templateUrl:"components/homePage/blocks/reviewBlock.html"}}function subscriptionhpBlock(){return{templateUrl:"components/homePage/blocks/subscriptionBlock.html"}}function callhpBlock(){return{templateUrl:"components/homePage/blocks/callBlock.html"}}function feedbackhpBlock(){return{templateUrl:"components/homePage/blocks/feedbackBlock.html"}}function brandTagshpBlock(){return{templateUrl:"components/homePage/blocks/brandTagsBlock.html"}}function subscriptionAddhpBlock(){return{templateUrl:"components/homePage/blocks/subscriptionAddBlock.html"}}function filterTagshpBlock(){return{templateUrl:"components/homePage/blocks/filterTagsBlock.html"}}function filtershpBlock(){return{templateUrl:"components/homePage/blocks/filtersBlock.html"}}function categorieshpBlock(){return{templateUrl:"components/homePage/blocks/categoriesBlock.html"}}function calendarhpBlock(){return{templateUrl:"components/homePage/blocks/calendarBlock.html"}}function videolinkhpBlock(){return{templateUrl:"components/homePage/blocks/videolinkhpBlock.html"}}function pricegoodshpBlock(){return{templateUrl:"components/homePage/blocks/pricegoodsBlock.html"}}function priceserviceshpBlock(){return{templateUrl:"components/homePage/blocks/priceservicesBlock.html"}}function scheduleplacehpBlock(){return{templateUrl:"components/homePage/blocks/scheduleplaceBlock.html"}}function enterPhoneNumderCtrl($scope,global){function changePhone(){self.phone?self.enterPhoneNumder=self.phoneCode.substring(1)+self.phone.substring(0,10):self.enterPhoneNumder="",self.changeFoo&&"function"==typeof self.changeFoo&&self.changeFoo({phone:self.enterPhoneNumder})}function changeCode(){}var self=this;self.global=global,self.phoneCodes=global.get("store").val.phoneCodes?global.get("store").val.phoneCodes:[{code:"+38",country:"Украина"}],self.phoneCode=global.get("store").val.phoneCode?global.get("store").val.phoneCode.code:"+38",$scope.$watch(function(){return self.enterPhoneNumder},function(enterPhoneNumder,old){if(enterPhoneNumder){var phoneCode="+"+enterPhoneNumder.substring(0,enterPhoneNumder.length-10);self.phoneCodes.getOFA("code",phoneCode)&&(self.phoneCode=phoneCode),self.phone=enterPhoneNumder.substring(enterPhoneNumder.length-10)}}),self.changePhone=changePhone,self.changeCode=changeCode}function compileStyleForBlock(block){var elements=[],el="";if(block.blockStyle)for(var i=0;i<lengthStyleBlock;i++){var n;block.blockStyle[i]&&(n=getNamePropertyCSS(i,block.blockStyle[i]))&&(el+="\n"+n[0]+":"+n[1]+";")}if(el&&(el&&(el="{"+el+"}\n"),elements.push(el)),block.elements&&"object"==typeof block.elements)for(var key in block.elements){el="";for(var i=0;i<lengthStyleBlock;i++)if("a"!=key||1!=i){var n;block.elements[key][i]&&(n=getNamePropertyCSS(i,block.elements[key][i]))&&(el+="\n"+n[0]+":"+n[1]+";")}el&&(el=key.replace("@",".")+"{"+el+"}\n"),"a"==key&&block.elements.a[1]&&(el+="a:hover {color:"+block.elements.a[1]+"}"),el&&elements.push(el)}return elements}angular.module("ngLocale",[],["$provide",function($provide){function getDecimals(n){n+="";var i=n.indexOf(".");return i==-1?0:n.length-i-1}function getVF(n,opt_precision){var v=opt_precision;void 0===v&&(v=Math.min(getDecimals(n),3));var base=Math.pow(10,v);return{v:v,f:(n*base|0)%base}}var PLURAL_CATEGORY={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};$provide.value("$locale",{DATETIME_FORMATS:{AMPMS:["ДП","ПП"],DAY:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],ERANAMES:["до Рождества Христова","от Рождества Христова"],ERAS:["до н. э.","н. э."],FIRSTDAYOFWEEK:0,MONTH:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],SHORTDAY:["вс","пн","вт","ср","чт","пт","сб"],SHORTMONTH:["янв.","февр.","мар.","апр.","мая","июн.","июл.","авг.","сент.","окт.","нояб.","дек."],STANDALONEMONTH:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"],WEEKENDRANGE:[5,6],fullDate:"EEEE, d MMMM y 'г'.",longDate:"d MMMM y 'г'.",medium:"d MMM y 'г'. H:mm:ss",mediumDate:"d MMM y 'г'.",mediumTime:"H:mm:ss",short:"dd.MM.yy H:mm",shortDate:"dd.MM.yy",shortTime:"H:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"₽",DECIMAL_SEP:",",GROUP_SEP:" ",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:" ¤",posPre:"",posSuf:" ¤"}]},id:"ru",localeID:"ru",pluralCat:function(n,opt_precision){var i=0|n,vf=getVF(n,opt_precision);return 0==vf.v&&i%10==1&&i%100!=11?PLURAL_CATEGORY.ONE:0==vf.v&&i%10>=2&&i%10<=4&&(i%100<12||i%100>14)?PLURAL_CATEGORY.FEW:0==vf.v&&i%10==0||0==vf.v&&i%10>=5&&i%10<=9||0==vf.v&&i%100>=11&&i%100<=14?PLURAL_CATEGORY.MANY:PLURAL_CATEGORY.OTHER}})}]),angular.module("ngLocale",[],["$provide",function($provide){function getDecimals(n){n+="";var i=n.indexOf(".");return i==-1?0:n.length-i-1}function getVF(n,opt_precision){var v=opt_precision;void 0===v&&(v=Math.min(getDecimals(n),3));var base=Math.pow(10,v);return{v:v,f:(n*base|0)%base}}var PLURAL_CATEGORY={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};$provide.value("$locale",{DATETIME_FORMATS:{AMPMS:["ДП","ПП"],DAY:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],ERANAMES:["до Рождества Христова","от Рождества Христова"],ERAS:["до н. э.","н. э."],FIRSTDAYOFWEEK:0,MONTH:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],SHORTDAY:["вс","пн","вт","ср","чт","пт","сб"],SHORTMONTH:["янв.","февр.","мар.","апр.","мая","июн.","июл.","авг.","сент.","окт.","нояб.","дек."],STANDALONEMONTH:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"],WEEKENDRANGE:[5,6],fullDate:"EEEE, d MMMM y 'г'.",longDate:"d MMMM y 'г'.",medium:"d MMM y 'г'. H:mm:ss",mediumDate:"d MMM y 'г'.",mediumTime:"H:mm:ss",short:"dd.MM.yy H:mm",shortDate:"dd.MM.yy",shortTime:"H:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"₽",DECIMAL_SEP:",",GROUP_SEP:" ",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:" ¤",posPre:"",posSuf:" ¤"}]},id:"ru-ru",localeID:"ru_RU",pluralCat:function(n,opt_precision){var i=0|n,vf=getVF(n,opt_precision);return 0==vf.v&&i%10==1&&i%100!=11?PLURAL_CATEGORY.ONE:0==vf.v&&i%10>=2&&i%10<=4&&(i%100<12||i%100>14)?PLURAL_CATEGORY.FEW:0==vf.v&&i%10==0||0==vf.v&&i%10>=5&&i%10<=9||0==vf.v&&i%100>=11&&i%100<=14?PLURAL_CATEGORY.MANY:PLURAL_CATEGORY.OTHER}})}]),angular.module("ngLocale",[],["$provide",function($provide){function getDecimals(n){n+="";var i=n.indexOf(".");return i==-1?0:n.length-i-1}function getVF(n,opt_precision){var v=opt_precision;void 0===v&&(v=Math.min(getDecimals(n),3));var base=Math.pow(10,v);return{v:v,f:(n*base|0)%base}}var PLURAL_CATEGORY={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};$provide.value("$locale",{DATETIME_FORMATS:{AMPMS:["ДП","ПП"],DAY:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],ERANAMES:["до Рождества Христова","от Рождества Христова"],ERAS:["до н. э.","н. э."],FIRSTDAYOFWEEK:0,MONTH:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],SHORTDAY:["вс","пн","вт","ср","чт","пт","сб"],SHORTMONTH:["янв.","февр.","мар.","апр.","мая","июн.","июл.","авг.","сент.","окт.","нояб.","дек."],STANDALONEMONTH:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"],WEEKENDRANGE:[5,6],fullDate:"EEEE, d MMMM y 'г'.",longDate:"d MMMM y 'г'.",medium:"d MMM y 'г'. HH:mm:ss",mediumDate:"d MMM y 'г'.",mediumTime:"HH:mm:ss",short:"dd.MM.yy HH:mm",shortDate:"dd.MM.yy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"грн.",DECIMAL_SEP:",",GROUP_SEP:" ",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:" ¤",posPre:"",posSuf:" ¤"}]},id:"ru-ua",localeID:"ru_UA",pluralCat:function(n,opt_precision){var i=0|n,vf=getVF(n,opt_precision);return 0==vf.v&&i%10==1&&i%100!=11?PLURAL_CATEGORY.ONE:0==vf.v&&i%10>=2&&i%10<=4&&(i%100<12||i%100>14)?PLURAL_CATEGORY.FEW:0==vf.v&&i%10==0||0==vf.v&&i%10>=5&&i%10<=9||0==vf.v&&i%100>=11&&i%100<=14?PLURAL_CATEGORY.MANY:PLURAL_CATEGORY.OTHER}})}]),function(){function url_slug(s,opt){s=String(s),opt=Object(opt);var defaults={delimiter:"-",limit:void 0,lowercase:!0,replacements:{},transliterate:"undefined"==typeof XRegExp};for(var k in defaults)opt.hasOwnProperty(k)||(opt[k]=defaults[k]);var char_map={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ő":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ű":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ő":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ű":"u","ý":"y","þ":"th","ÿ":"y","©":"(c)","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ά":"A","Έ":"E","Ί":"I","Ό":"O","Ύ":"Y","Ή":"H","Ώ":"W","Ϊ":"I","Ϋ":"Y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ά":"a","έ":"e","ί":"i","ό":"o","ύ":"y","ή":"h","ώ":"w","ς":"s","ϊ":"i","ΰ":"y","ϋ":"y","ΐ":"i","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ё":"Yo","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"yo","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","Є":"Ye","І":"I","Ї":"Yi","Ґ":"G","є":"ye","і":"i","ї":"yi","ґ":"g","Č":"C","Ď":"D","Ě":"E","Ň":"N","Ř":"R","Š":"S","Ť":"T","Ů":"U","Ž":"Z","č":"c","ď":"d","ě":"e","ň":"n","ř":"r","š":"s","ť":"t","ů":"u","ž":"z"};for(var k in opt.replacements)s=s.replace(RegExp(k,"g"),opt.replacements[k]);if(opt.transliterate)for(var k in char_map)s=s.replace(RegExp(k,"g"),char_map[k]);var alnum="undefined"==typeof XRegExp?RegExp("[^a-z0-9]+","ig"):XRegExp("[^\\p{L}\\p{N}]+","ig");return s=s.replace(alnum,opt.delimiter),s=s.replace(RegExp("["+opt.delimiter+"]{2,}","g"),opt.delimiter),s=s.substring(0,opt.limit),s=s.replace(RegExp("(^"+opt.delimiter+"|"+opt.delimiter+"$)","g"),""),opt.lowercase?s.toLowerCase():s}function decimalAdjust(type,value,exp){return void 0===exp||0==+exp?Math[type](value):(value=+value,exp=+exp,isNaN(value)||"number"!=typeof exp||exp%1!=0?NaN:(value=value.toString().split("e"),value=Math[type](+(value[0]+"e"+(value[1]?+value[1]-exp:-exp))),value=value.toString().split("e"),+(value[0]+"e"+(value[1]?+value[1]+exp:exp))))}Math.round10||(Math.round10=function(value,exp){return decimalAdjust("round",value,exp)}),Math.floor10||(Math.floor10=function(value,exp){return decimalAdjust("floor",value,exp)}),Math.ceil10||(Math.ceil10=function(value,exp){return decimalAdjust("ceil",value,exp)}),Array.prototype.getObjectFromArray=function(prop,value,a,filter){for(var ar=[],i=0,l=this.length;i<l;i++)if(this[i][prop]&&this[i][prop].toString&&"function"==typeof this[i][prop].toString&&(this[i][prop]=this[i][prop].toString()),this[i][prop]&&this[i][prop]==value){if(!a)return this[i];filter?this[i][filter]&&ar.push(this[i]):ar.push(this[i])}return a?ar:void 0},Array.prototype.getOFA=function(prop,value,a,filter){prop=prop.split("."),1==prop.length&&(prop=prop[0]);for(var ar=[],i=0,l=this.length;i<l;i++)if(this[i]&&(this[i][prop]&&this[i][prop].toString&&"function"==typeof this[i][prop].toString&&(this[i][prop]=this[i][prop].toString()),this[i][prop]&&this[i][prop]==value||prop.length&&this[i][prop[0]]&&this[i][prop[0]][prop[1]]&&this[i][prop[0]][prop[1]]==value)){if(!a)return this[i];filter?this[i][filter]&&ar.push(this[i]):ar.push(this[i])}return a?ar:void 0},Array.prototype.removeOFA=function(prop,value){for(var i=this.length;i--;)this[i]&&this[i].hasOwnProperty(prop)&&arguments.length>1&&this[i][prop]===value&&this.splice(i,1);return this},Array.prototype.getArrayObjects=function(prop,value){for(var arr=[],i=0,l=this.length;i<l;i++)if(this[i][prop]&&this[i][prop].length){var _arr=this[i][prop].map(function(item){return"object"==typeof item?item._id:item});_arr.indexOf(value)>-1&&arr.push(this[i])}return arr},Array.prototype.diff=function(a){return this.filter(function(i){return a.indexOf(i)<0})},Array.prototype.divideArrayWithChunk=function(chunk,fillArrayToEquil){if(!chunk)return[[],[],[],[],[]];if((chunk=Number(chunk))<2)return this;for(var data=this,arr=[],j=0;j<chunk;j++){arr[j]=[];for(var i=j,l=data.length;i<l;i+=chunk)arr[j].push(data[i])}if(fillArrayToEquil)for(var i=1,l=arr.length;i<l;i++)arr[i].length<arr[0].length&&arr[i].push({});return arr},Array.prototype.extend=function(other_array){other_array.forEach(function(v){this.push(v)},this)},String.prototype.clearTag=function(num){if(num)var ss=this.replace(/<\/?[^>]+(>|$)/g,"").substring(0,num);else var ss=this.replace(/<\/?[^>]+(>|$)/g,"");return ss.replace(/\./g,". ")},String.prototype.myTrim=function(){return this.trim().split("\n").filter(function(str){return str}).map(function(str){return str.replace(/&nbsp;/g," ").trim()}).filter(function(str){return str}).join("")},String.prototype.clearFirstTag=function(tag){var i=tag.length;return this.substring(2+i,this.length-(3+i))},String.prototype.replaceBlanks=function(){if(this)return this.replace(/(["',.\/\s])/g,"-")},String.prototype.getFormatedDate=function(){var d=new Date(this);return d.getDate()+"-"+(d.getMonth()+1)+"-"+d.getFullYear()},String.prototype.splice||(String.prototype.splice=function(start,delCount,newSubStr){return this.slice(0,start)+newSubStr+this.slice(start+Math.abs(delCount))});new Array("Я","я","Ю","ю","Ч","ч","Ш","ш","Щ","щ","Ж","ж","А","а","Б","б","В","в","Г","г","Д","д","Е","е","Ё","ё","З","з","И","и","Й","й","К","к","Л","л","М","м","Н","н","О","о","П","п","Р","р","С","с","Т","т","У","у","Ф","ф","Х","х","Ц","ц","Ы","ы","Ь","ь","Ъ","ъ","Э","э","/","&"),new Array("Ya","ya","Yu","yu","Ch","ch","Sh","sh","Sh","sh","Zh","zh","A","a","B","b","V","v","G","g","D","d","E","e","E","e","Z","z","I","i","J","j","K","k","L","l","M","m","N","n","O","o","P","p","R","r","S","s","T","t","U","u","F","f","H","h","C","c","Y","y","","","'","'","E","e","-","-");String.prototype.getUrl=function(){return url_slug(this)},String.prototype.shuffle=function(len){len||(len=this.length);for(var parts=this.split(""),i=parts.length;i>0;){var random=parseInt(Math.random()*i),temp=parts[--i];parts[i]=parts[random],parts[random]=temp}return parts.join("").substring(0,len)}}(),function(){function checkMaxDiscount(stuff,price){stuff.maxDiscount&&100*(1-price/stuff.price)>stuff.maxDiscount&&(stuff.maxDiscountOver=!0)}function getOrder(){return new order}var order=function(){function _checkInCondition(__campaign,stuff){var stuffBrand=stuff.brand&&stuff.brand._id?stuff.brand._id:stuff.brand,stuffCategory="object"==typeof stuff.category&&stuff.category.length?stuff.category[0]:stuff.category;return!!(__campaign.conditionStuffs&&__campaign.conditionStuffs.length&&__campaign.conditionStuffs.indexOf(stuff._id)>-1)||(!!(__campaign.conditionTags&&__campaign.conditionTags.length&&__campaign.conditionTags.some(function(tag){return stuff.tags.indexOf(tag)>-1}))||(!!(__campaign.conditionBrandTags&&__campaign.conditionBrandTags.length&&__campaign.conditionBrandTags.indexOf(stuff.brandTag)>-1)||(!!(__campaign.conditionBrands&&__campaign.conditionBrands.length&&__campaign.conditionBrands.indexOf(stuffBrand)>-1)||(!!(__campaign.conditionCategories&&__campaign.conditionCategories.length&&__campaign.conditionCategories.indexOf(stuffCategory)>-1)||void 0))))}var self=this;this.cart={stuffs:[]},this.seller=null,this.cascade=[],this.opt={},this.campaign=[],this.coupon={},this.totalCount=0,this.sum=0,this.price,this.priceSale,this.retail,this.discount=null,this.currency,this.mainCurrency,this.currencyStore,this.messageForCampaign={},this.type,this.user,this.paySum,this._cartCount=function(campaign,cam){var i=0;return this.cart.stuffs.forEach(function(item){campaign?"withoutcampaign"==campaign?item.campaignId||(cam?_checkInCondition(cam,item)&&(i+=Number(item.quantity)):i+=Number(item.quantity)):item.campaignId==campaign&&(i+=Number(item.quantity)):item.quantity&&(i+=Number(item.quantity))}),i},this._checkDiscount=function(){var dis=this.discount;if(dis)return dis.value||(dis.value=0),1==dis.type||3==dis.type?self.price:2==dis.type||4==dis.type||5==dis.type?self.priceSale?self.priceSale:self.price:void 0},this._getDiscountPrice=function(dis,s){if(dis){if(dis.value||(dis.value=0),1==dis.type)return s.price;if(2==dis.type)return s.priceSale?s.priceSale:s.price;if(3==dis.type)return Math.ceil10(s.price-s.price/100*dis.value,-5);if(4==dis.type)return s.priceSale?s.priceSale:Math.ceil10(s.price-s.price/100*dis.value,-5);if(5==dis.type){var cena;return cena=s.priceSale?s.priceSale:s.price,Math.ceil10(cena-cena/100*dis.value,-5)}}},this._checkDiscount2302=function(){var dis=this.discount;if(dis){if(dis.value||(dis.value=0),1==dis.type)return self.price;if(2==dis.type)return self.priceSale?self.priceSale:self.price;if(3==dis.type)return Math.ceil10(self.price-self.price/100*dis.value,-5)
;if(4==dis.type)return self.priceSale?self.priceSale:Math.ceil10(self.price-self.price/100*dis.value,-5);if(5==dis.type){var cena;return cena=self.priceSale?self.priceSale:self.price,Math.ceil10(cena-cena/100*dis.value,-5)}}},this._isStuffInCampaign=function(stuff,campaign){function check(__campaign){return!!(__campaign.stuffs&&__campaign.stuffs.length&&__campaign.stuffs.indexOf(stuff._id)>-1)||(!!(__campaign.tags&&__campaign.tags.length&&stuff.tags&&__campaign.tags.some(function(tag){return stuff.tags.indexOf(tag)>-1}))||(!!(__campaign.brandTags&&__campaign.brandTags.length&&__campaign.brandTags.indexOf(stuffBrandTag)>-1)||(!!(__campaign.brands&&__campaign.brands.length&&__campaign.brands.indexOf(stuffBrand)>-1)||(!!(__campaign.categories&&__campaign.categories.length&&__campaign.categories.indexOf(stuffCategory)>-1)||void 0))))}function setCampaignPrice(__campaign){stuff.sticker=__campaign.sticker,stuff.campaignUrl=__campaign.url,stuff.campaignId=__campaign._id;var i=0;for(var key in stuff.stock){var price=Number(stuff.stock[key].price);stuff.stock[key].priceCampaign="percent"==__campaign.condition?Math.ceil10(price-Number(__campaign.percent)/100*price,-2):Math.ceil10(price-Number(__campaign.sum),-2),i||(i++,stuff.priceCampaign=stuff.stock[key].priceCampaign)}}var stuffCategory="object"==typeof stuff.category&&stuff.category.length?stuff.category[0]:stuff.category,stuffBrand=stuff.brand&&stuff.brand._id?stuff.brand._id:stuff.brand,stuffBrandTag=stuff.brandTag&&stuff.brandTag._id?stuff.brandTag._id:stuff.brandTag;if(!self.campaign||!self.campaign.length)return!1;if(campaign){var __campaign=self.campaign.getObjectFromArray("_id",campaign);if(__campaign){var is=check(__campaign);if(is&&!__campaign.revers||!is&&__campaign.revers)return setCampaignPrice(__campaign),__campaign}}else for(var j=0,ll=self.campaign.length;j<ll;j++){var is=check(self.campaign[j]);if(is&&!self.campaign[j].revers||!is&&self.campaign[j].revers)return setCampaignPrice(self.campaign[j]),self.campaign[j]}return!1},this._getCountForBaseStuffs=function(campaign){var q=0;return this.cart.stuffs.forEach(function(item){campaign.forGroupBase?campaign.groupBaseTag&&item.tags&&item.tags.indexOf(campaign.groupBaseTag)>-1?q+=Number(item.quantity):campaign.groupBaseCollection&&campaign.groupBaseCollection==stuff.brandTag&&(q+=Number(item.quantity)):campaign.baseStuffs.indexOf(item._id)>-1&&(q+=Number(item.quantity))}),q},this._checkCompaignCondition=function(id){if(self.campaign){var __campaign=self.campaign.getOFA("_id",id);if(!__campaign||__campaign.forAll||__campaign.revers)return!0;var countConditionStuffs=self._cartCount("withoutcampaign",__campaign);if(!__campaign.ratio)return!0;var countStuff=self._cartCount(__campaign._id);return parseInt(countConditionStuffs/__campaign.ratio)>=countStuff||void 0}},this._checkCompaignConditionForBase=function(id){var campaign=self.campaign.getObjectFromArray("_id",id);if(campaign.useBase&&self._getCountForBaseStuffs(campaign)>=campaign.condition&&!self._cartCount(campaign._id))return!0},this._getUnitOfMeasure=function(){var a=this.cart.stuffs.reduce(function(arr,i){return i.unitOfMeasure&&arr.indexOf(i.unitOfMeasure)<0&&arr.push(i.unitOfMeasure),arr},[]);return 1==a.length?a[0]:null}},_getCascadePrice=function(self){var newPrice=self.price,cascade=self.cascade;if(cascade&&cascade.length){for(var i=0,l=cascade.length;i<l;i++)self.totalCount>=cascade[i][0]&&(newPrice=Math.ceil10(self.price-self.price/100*cascade[i][1],-2));return newPrice}return self.price};order.prototype.init=function(campaign,mainCurrency,currencyStore){this.campaign=campaign,this.mainCurrency=mainCurrency,this.currencyStore=currencyStore},order.prototype.setCamapign=function(campaign){this.campaign=campaign;for(var i=0,l=campaign.length;i<l;i++)this.messageForCampaign[campaign[i].url]={base:null,stuff:null}},order.prototype.setCart=function(stuffs){this.cart.stuffs=stuffs,this.sortCart()},order.prototype.setSellerData=function(seller,cascade,opt){this.seller=seller,this.cascade=cascade,this.opt=opt},order.prototype.setCoupon=function(coupon){this.coupon=coupon},order.prototype.setDiscount=function(discount){this.discount=discount},order.prototype.setCurrency=function(currency){this.currency=currency},order.prototype.changeCurrency=function(currency){this.currency=currency,this.kurs=this.currencyStore[this.currency][0]},order.prototype.getPrice=function(i){var stuff=this.cart.stuffs[i];this.totalCount=this._cartCount(),this.price=stuff.price,this.priceSale=stuff.priceSale,this.retail=stuff.retail,this.priceCampaign=stuff.priceCampaign,stuff.maxDiscountOver=!1;var optIs=!1;(!this.opt||!this.opt.quantity||this.totalCount>=this.opt.quantity)&&(optIs=!0);var cena;return(cena=this._checkDiscount())?(this.discount&&this.discount.value&&stuff.maxDiscount&&this.discount.value>stuff.maxDiscount?stuff.maxDiscountOver=!0:checkMaxDiscount(stuff,cena),cena):stuff.priceCampaign&&optIs&&this._checkCompaignCondition(stuff.campaignId)?stuff.priceCampaign:optIs?this.priceSale?(checkMaxDiscount(stuff,this.priceSale),this.priceSale):_getCascadePrice(this):this.retail||this.price},order.prototype.getTotalSum=function(discount){var sum=0,self=this;if(this.cart.stuffs.forEach(function(c){var s=c.sum?c.sum:c.price;if(discount){var p=self._getDiscountPrice(self.discount,c);p&&(s=p*c.quantity)}sum+=s}),discount){var dis=this.discount;dis&&(6==dis.type?sum=Math.ceil10(sum-sum/100*dis.value,-5):7==dis.type&&(sum-=dis.value))}return sum},order.prototype.getTotalQuantity=function(){var q=0;return this.cart.stuffs.forEach(function(c){q+=Number(c.quantity)}),q},order.prototype.getCampaignQuantity=function(){return this._cartCount("campaign")},order.prototype.getConditionForDisplayMsg=function(){return this.messageForCampaign},order.prototype.getCouponSum=function(){if(!this.coupon||!Object.keys(this.coupon).length)return this.sum;if(!this.coupon.condition)return Math.ceil10(this.sum-this.sum/100*Number(this.coupon.val),-5);if(this.coupon.condition){var val=this.coupon.val;return this.coupon.currency&&this.currencyStore[this.coupon.currency]&&this.currencyStore[this.coupon.currency][0]&&(val=Math.round(val/this.currencyStore[this.coupon.currency][0])),this.sum-Number(val)}},order.prototype.clearOrder=function(){this.cart.stuffs.length=0,this.coupon={},this.totalCount=0,this.sum=0},order.prototype.checkInCart=function(itemTo){return this.cart.stuffs.some(function(c){return itemTo._id==c._id&&itemTo.sort==c.sort})},order.prototype.addStuffToOrder=function(itemTo){if(this.cart.stuffs.length>=150)return!1;if(this.cart.stuffs.some(function(c){return itemTo._id==c._id&&itemTo.sort==c.sort}))return!1;var itemToCart=angular.copy(itemTo);for(var key in itemToCart)"function"==typeof itemToCart[key]&&delete itemToCart[key];return delete itemToCart.comments,delete itemToCart.desc,delete itemToCart.gallery,delete itemToCart.imgs,delete itemToCart.nameL,delete itemToCart.checkInCart,delete itemToCart.addItemToOrder,delete itemToCart.addInfo,delete itemToCart.getDataForBooking,delete itemToCart.FullTags,delete itemToCart.changeSortOfStuff,delete itemToCart.checkInCart,delete itemToCart.driveRetailPrice,delete itemToCart.getBonus,delete itemToCart.zoomImg,delete itemToCart.stockKeysArray,delete itemToCart.sortsOfStuff,delete itemToCart.setPrice,this.cart.stuffs.push(itemToCart),this.sortCart(),!0},order.prototype.getShipCost=function(){return this.shipDetail.reduce(function(s,c){return isNaN(c.sum)?s:s+Number(c.sum)},0)},order.prototype.getTotalPay=function(){return this.pay||(this.pay=[]),this.pay.reduce(function(s,c){return isNaN(c.sum)?s:s+Number(c.sum)},0)},order.prototype.getTotalDiscount=function(){if(this.sum&&this.sum0)return this.sum>this.sum0?0:100-Math.round(100*this.sum/this.sum0)},order.prototype.checkCampaign=function(stuff){return this._isStuffInCampaign(stuff)},order.prototype.sortCart=function(){this.cart.stuffs.sort(function(a,b){if(!a.extCatalog&&!b.extCatalog)return a.category<b.category?-1:a.category>b.category?1:0;if(a.extCatalog&&!b.extCatalog)return 1;if(!a.extCatalog&&b.extCatalog)return-1;if(a.extCatalog&&b.extCatalog&&a.extCatalog!=b.extCatalog){if(a.category<b.category)return-1;if(a.category>b.category)return 1}else if(a.extCatalog&&b.extCatalog&&a.extCatalog==b.extCatalog)return a.category<b.category?-1:a.category>b.category?1:0})};var myShareData={getOrder:getOrder};"undefined"!=typeof window?(window.myShareData=myShareData,window.OrderModel=order):module.exports=myShareData}();var _filterTags=[],_filterTagsO={},myApp=angular.module("gmall",["ngRoute","ui.router","ngResource","ngCookies","ui.bootstrap","ngAnimate","gmall.controllers","gmall.services","gmall.directives","gmall.filters","ui.select","dndLists","daterangepicker","toaster","textAngular","angularCircularNavigation","gmall.exception","angular-intro","satellizer","ngMessages","pageslide-directive","angular-click-outside","rzModule","ui.mask","colorpicker.module","ui.tinymce"]).run(["$rootScope","$state","$stateParams","globalSrv","global","$timeout","$window","$location","$templateCache","Helper","$q","$order","$filter","$route","Stuff","Filters","FilterTags","Sections","Brands","BrandTags",function($rootScope,$state,$stateParams,globalSrv,global,$timeout,$window,$location,$templateCache,Helper,$q,$order,$filter,$route,Stuff,Filters,FilterTags,Sections,Brands,BrandTags){function _changeLocation(url){$window.location.href=url}function _logout(){$rootScope.$broadcast("logout"),$auth.logout(),global.set("user",null),location.reload()}function _logged(){$rootScope.$broadcast("logged")}function _taPaste($html){return $filter("htmlToPlaintextWithBr")($html)}function _getSection(sectionUrl,id){var sections=global.get("groups").val;if(!sections)return null;for(var field=id?"_id":"url",i=0,l=sections.length;i<l;i++){if(sections[i][field]&&sections[i][field]==sectionUrl)return sections[i];if(sections[i].child&&sections[i].child.length)for(var j=0,ll=sections[i].child.length;j<ll;j++)if(sections[i].child[j][field]&&sections[i].child[j][field]==sectionUrl)return sections[i].child[j]}return null}global.set("store",storeTemp),mobileFromServer&&global.set("mobile",mobileFromServer),moment.locale("ru"),$rootScope.displaySlideMenu=!1,$timeout(function(){$.material.togglebutton=function(selector){$(selector?selector:this.options.togglebuttonElements).filter(":notmdproc").filter(function(){return 0===$(this).parent().find(".toggle").length}).data("mdproc",!0).after("<span class=toggle></span>")},$.material.init()}),$rootScope.moment=moment,$rootScope.$state=$state,$rootScope.$state=$state,$rootScope.$stateParams=$stateParams,$rootScope.global=global;$rootScope.$watch(function(){return $location.path()},function(newLocation,oldLocation){if($rootScope.actualLocation===newLocation){$rootScope.$emit("$stateChangeEndToStuff");var back,historyState=$window.history.state;back=!!(historyState&&historyState.position<=$rootScope.stackPosition),back?$rootScope.stackPosition--:$rootScope.stackPosition++}else $route.current&&($window.history.replaceState({position:$rootScope.stackPosition}),$rootScope.stackPosition++)}),$rootScope.$on("$stateChangeStart",function(event,toState,toParams,fromState){"frame.sections"==fromState.name&&Sections.reloadItems(),"frame.filters"==fromState.name&&(Filters.reloadItems(),FilterTags.reloadItems(),Sections.reloadItems()),"frame.brands"==fromState.name&&(Brands.reloadItems(),Sections.reloadItems()),"frame.stuffs"==fromState.name&&"frame.stuffs.stuff"==toState.name&&($rootScope.srollPosition=$(window).scrollTop()),"frame.stuffs.stuff"==fromState.name&&"frame.stuffs"==toState.name&&(console.log("fromState.name=='frame.stuffs.stuff' && toState.name=='frame.stuffs'"),$rootScope.$broadcast("fromStuffToStuffs")),"frame.stuffs"==toState.name||"frame.stuffs.stuff"==toState.name?$rootScope.$emit("$stateChangeStartToStuff"):$rootScope.endLoadStuffs=!0,$rootScope.slideMenu=!1}),$rootScope.$on("$stateChangeSuccess",function(event,toState,toParams,fromState){$timeout(function(){if(!global.get("user").val)return void $state.go("frame")},4e3),$rootScope.actualLocation=$location.path(),"frame.stuffs.stuff"!=fromState.name||"frame.stuffs"!=toState.name||!$rootScope.srollPosition&&0!=$rootScope.srollPosition||$timeout(function(){window.scrollTo(0,$rootScope.srollPosition)},500),"frame"==toState.name&&$q.when().then(function(){return Sections.getSections()}).then(function(sections){$rootScope.sectopnsForMenu=sections})}),$rootScope.getIntro=function(){var intro=introJs();console.log($rootScope.IntroOptions.steps),intro.setOptions({steps:$rootScope.IntroOptions.steps}),$timeout(function(){intro.start()},300)},$rootScope.setInitData=function(store,mobile){console.log("start2"),global.set("store",store),mobile&&global.set("mobile",mobile)},$rootScope.changeLang=function(lang){global.get("store").val.lang=lang,$rootScope.$broadcast("changeLang",lang)},$rootScope.changeLocation=function(url){$window.location.href=url};var functions={changeLocation:_changeLocation,logout:_logout,logged:_logged,taPaste:_taPaste,getSection:_getSection};global.set("functions",functions);var lang,langError,langOrder,langForm,langNote;globalSrv.getData("lang").then(function(response){var d={};if(response.data&&response.data.length&&response.data[1].tags){lang=response.data[1].tags;for(var k in response.data[1].tags)d[k]=response.data[1].tags[k][global.get("store").val.lang]}global.set("lang",d)}),globalSrv.getData("langError").then(function(response){var d={};if(response.data&&response.data.length&&response.data[1].tags){langError=response.data[1].tags;for(var k in response.data[1].tags)d[k]=response.data[1].tags[k][global.get("store").val.lang]}global.set("langError",d)}),globalSrv.getData("langNote").then(function(response){var d={};if(response.data&&response.data.length&&response.data[1].tags){langNote=response.data[1].tags;for(var k in response.data[1].tags)d[k]=response.data[1].tags[k][global.get("store").val.lang]}global.set("langNote",d)}),globalSrv.getData("langOrder").then(function(response){var d={};if(response.data&&response.data.length&&response.data[1].tags){langOrder=response.data[1].tags;for(var k in response.data[1].tags)d[k]=response.data[1].tags[k][global.get("store").val.lang]}global.set("langOrder",d)}),globalSrv.getData("langForm").then(function(response){var d={};if(response.data&&response.data.length&&response.data[1].tags){langForm=response.data[1].tags;for(var k in response.data[1].tags)d[k]=response.data[1].tags[k][global.get("store").val.lang]}global.set("langForm",d)})}]).config(function($provide){$provide.decorator("$q",["$delegate",function($delegate){function whenFn(){$q.when("function"==typeof obj?obj():obj)}return $delegate.whenFn=whenFn,$delegate}]),$provide.decorator("$resource",["$delegate",function($delegate){return $delegate.updateFiled=function(){console.log(this)},$delegate}])}).config(["$stateProvider","$urlRouterProvider","$locationProvider","globalProvider","$authProvider","$httpProvider",function($stateProvider,$urlRouterProvider,$locationProvider,globalProvider,$authProvider,$httpProvider){$httpProvider.interceptors.push("myInterceptorService"),$authProvider.baseUrl=userHost,$locationProvider.html5Mode(!0),$locationProvider.hashPrefix("!"),globalProvider.setUrl({groups:"/api/collections/Group/",categories:"/api/collections/Category/",brands:"/api/collections/Brand/",campaign:'/api/collections/Campaign?query={"dateEnd":"dateEnd"}',notifications:"/api/notificationList",chatMessages:"/api/chatMessagesList",lang:'/api/collections/Lang?query={"name":"gmall.home"}',langError:'/api/collections/Lang?query={"name":"index.error"}',langNote:'/api/collections/Lang?query={"name":"index.note"}',langOrder:'/api/collections/Lang?query={"name":"index.order"}',langForm:'/api/collections/Lang?query={"name":"index.form"}'}),globalProvider.set("groups"),globalProvider.set("sections"),globalProvider.set("categories"),globalProvider.set("categoriesO"),globalProvider.set("campaign"),globalProvider.set("brands"),globalProvider.set("filters"),globalProvider.set("store"),globalProvider.set("user"),globalProvider.set("admin"),globalProvider.set("mobile"),globalProvider.set("nostore"),globalProvider.set("filterTagsSticker"),globalProvider.set("coupon"),globalProvider.set("sellers"),globalProvider.set("seller"),globalProvider.set("functions"),globalProvider.set("buff_stuffs"),globalProvider.set("lang"),globalProvider.set("langError"),globalProvider.set("langNote"),globalProvider.set("langOrder"),globalProvider.set("langForm"),$stateProvider.state("frame",{url:"/content?token",controller:"mainFrameCtrl",templateUrl:"modules/content/views/index.html"}).state("frame.schedule",{url:"/schedule",template:"<schedule-list></schedule-list>"}).state("frame.labels",{url:"/labels",template:"<labels></labels>"}).state("frame.sections",{url:"/sections",template:"<sections-list></sections-list>"}).state("frame.sections.editCategory",{abstract:!0,url:"/editCategory",template:"<ui-view/>"}).state("frame.sections.editCategory.category",{url:"/:id",template:"<category-edit></category-edit>"}).state("frame.sections.editSection",{abstract:!0,url:"/editSection",template:"<ui-view/>"}).state("frame.sections.editSection.section",{url:"/:id",template:"<section-edit></section-edit>"}).state("frame.filterEdit",{url:"/filterEdit",template:'<div ui-view=""></div>'}).state("frame.filterEdit.item",{url:"/:id",template:"<filter-item-edit></filter-item-edit>"}).state("frame.filters",{url:"/filters",templateUrl:function(){return"modules/content/views/filters.html"}}).state("frame.filters.tag",{url:"/:id",template:"<filter-tag-edit></filter-tag-edit>"}).state("frame.stuffs",{url:"/stuffs/:groupUrl/:categoryUrl?searchStr&queryTag&brand&brandTag&msg&filters",templateUrl:function(){return"modules/content/views/stuffs.html"},controller:function($scope){$scope.rate={val:1}}}).state("frame.stuffs.stuff",{url:"/:stuffUrl",template:'<stuff-edit back-state="frame.stuffs"></stuff-edit>'}).state("frame.brands",{url:"/brands",templateUrl:function(){return"modules/content/views/brands.html"}}).state("frame.brands.brand",{url:"/brand/:id",template:"<brand-edit></brand-edit>"}).state("frame.brands.category",{url:"/category/:id",resolve:{field:function(){return"brands"}},template:'<bind-model-to-category id="{{id}}" field="brands" backstate="frame.brands"></bind-model-to-category>',controller:function($scope,$stateParams,field){$scope.field=field,$scope.id=$stateParams.id}}).state("frame.brands.categoryTag",{url:"/categoryTag/:id",resolve:{field:function(){return"brandTags"}},template:'<bind-model-to-category id="{{id}}" revers="true" model="BrandTags" field="categories" backstate="frame.brands"></bind-model-to-category>',controller:function($scope,$stateParams,field){$scope.field=field,$scope.id=$stateParams.id}}).state("frame.brands.tag",{url:"/tag/:id",resolve:{item:function(BrandTags,$stateParams){}},template:"<brand-tag-edit ></brand-tag-edit>"}).state("frame.stats",{url:"/stats",template:"<static-pages></static-pages>"}).state("frame.stats.stat",{url:"/:id",template:"<static-page></static-page>"}).state("frame.additionals",{url:"/additionals",template:"<additional-pages></additional-pages>"}).state("frame.additionals.additional",{url:"/:id",template:"<additional-page></additional-page>"}).state("frame.homePage",{url:"/homePage",template:"<home-page></home-page>"}).state("frame.news",{url:"/news",template:"<news-list></news-list>"}).state("frame.news.item",{url:"/:id",template:"<news-item></news-item>"}).state("frame.lookbook",{url:"/lookbook",template:"<lookbook-list></lookbook-list>"}).state("frame.lookbook.item",{url:"/:id",template:"<lookbook-item></lookbook-item>"}).state("frame.master",{url:"/master",template:"<master-list></master-list>"}).state("frame.master.item",{url:"/:id",template:"<master-item></master-item>"}).state("frame.workplace",{url:"/workplace",template:"<workplace-list></workplace-list>"}).state("frame.workplace.item",{url:"/:id",template:"<workplace-item></workplace-item>"}).state("frame.groupStuffs",{url:"/groupStuffs",template:"<group-stuffs-list></group-stuffs-list>"}).state("frame.groupStuffs.item",{url:"/:id",template:"<group-stuffs-item></group-stuffs-item>"}).state("frame.paps",{url:"/paps",template:"<paps-list></paps-list>"}).state("frame.paps.item",{url:"/:id",template:"<paps-item></paps-item>"}).state("frame.info",{url:"/info",template:"<info-list></info-list>"}).state("frame.info.item",{url:"/:id",template:"<info-item></info-item>"}).state("frame.cart",{url:"/cart",template:"<cart-item></cart-item>"}).state("frame.externalCatalog",{url:"/externalCatalog",template:"<external-catalog-download></external-catalog-download>"}).state("frame.help",{url:"/help",template:"<help-component></help-component>"}).state("frame.help.category",{url:"/:category?store",template:"<help-category></help-category>"}).state("frame.help.category.stuff",{url:"/:stuff",template:"<help-stuff></help-stuff>"})}]).config(function($provide){function getExpressions(str){for(var left,right,offset=0,parts=[];(left=str.indexOf("{{",offset))>-1&&(right=str.indexOf("}}",offset))>-1;)parts.push(str.substr(left+2,right-left-2)),offset=right+1;return parts}$provide.decorator("ngSrcDirective",function($delegate,$parse){var ngSrc=$delegate[0];return ngSrc.compile=function(element,attrs){var expressions=getExpressions(attrs.ngSrc),getters=expressions.map($parse);return function(scope,element,attr){attr.$observe("ngSrc",function(value){getters.every(function(getter){return getter(scope)}),value&&value.indexOf("images/")>-1&&value.indexOf("http")<0&&photoHost?attr.$set("src",photoHost+"/"+value):attr.$set("src",value)})}},delete ngSrc.link,$delegate})});angular.module("gmall.directives",[]).directive("emptyList",["$timeout",function($timeout){return{restrict:"E",scope:{items:"=items",message:"@"},template:'<div ng-if="show" class="alert alert-dismissible alert-warning"><h3 ng-bind="message"></h3></div>',link:function(scope,element){scope.$watch("items",function(n,o){scope.show=0===n})}}}]).directive("contentLoaded",["$timeout","$rootScope","anchorSmoothScroll",function($timeout,$rootScope,anchorSmoothScroll){return{restrict:"AC",link:function(scope,element,attr){$rootScope.$on("$stateChangeStartToStuff",function(){console.log("$stateChangeStartToStuff"),$(element).fadeIn()}),$rootScope.$on("$stateChangeEndToStuff",function(){console.log("$stateChangeEndToStuff"),$(element).fadeOut()})}}}]),angular.module("gmall.controllers",[]).controller("mainFrameCtrl",["$rootScope","$auth","$location","Account","toaster","global","$user","$q",function($rootScope,$auth,$location,Account,toaster,global,$user,$q){function activate(){$q.when($auth.isAuthenticated()).then(function(auth){if(!auth)return $user.login()}).then(function(){return Account.getPermission()}).then(function(res){res?(global.set("user",res.data),global.set("seller",res.data.seller)):(toaster.error("у данного аккаунта нет прав"),logout())}).catch(function(error){return error&&error.data&&toaster.error(error.data.message,error.status),logout()})}function logout(){$q.when($auth.isAuthenticated()).then(function(auth){if(auth)return $auth.logout()}).then(function(){global.set("user",null),global.set("seller",null),activate()})}$rootScope.$stateParams.token&&($auth.setToken({data:{token:$rootScope.$stateParams.token}}),$location.search("token",null)),activate(),$rootScope.logout=logout}]),angular.module("gmall.services",[]).factory("socket",function(socketFactory){return socketFactory()}),angular.module("gmall.filters",[]).filter("unsafe",function($sce){return function(val){return $sce.trustAsHtml(val)}}).filter("trustUrl",["$sce",function($sce){return function(recordingUrl){return $sce.trustAsResourceUrl(recordingUrl)}}]).filter("htmlToPlaintext",function(){return function(text){if(text){var s=text.replace(/(<[^>]+) style=".*?"/i,"");return s?String(s).replace(/<[^>]+>/gm,""):""}}}).filter("htmlToPlaintextWithBr",function(){var walk_the_DOM=function walk(node,func){for(func(node),node=node.firstChild;node;)walk(node,func),node=node.nextSibling};return function(markup){var wrapper=document.createElement("div");wrapper.innerHTML=markup,walk_the_DOM(wrapper,function(el){el.removeAttribute&&(el.removeAttribute("id"),el.removeAttribute("style"),el.removeAttribute("class"))});var result=wrapper.innerHTML,arr=result.split("<br>");return arr.forEach(function(s,i){arr[i]=s.replace(/<[^>]+>/gm,"")}),result}}),function(){function userSign(){return{scope:{closeModal:"&",toaster:"@",social:"="},bindToController:!0,controller:signupCtrl,controllerAs:"$ctrl",templateUrl:"/components/sign-login/sign.html",restrict:"AE"}}function subscriptionAdd(){return{scope:{closeModal:"&",toaster:"@"},bindToController:!0,controller:signupCtrl,controllerAs:"$ctrl",templateUrl:"/components/sign-login/subscriptionAdd.html",restrict:"AE"}}function userSignShort(){return{scope:{toaster:"@",buttonName:"@"},bindToController:!0,controller:signupCtrl,controllerAs:"$ctrl",templateUrl:"/components/sign-login/sign-short.html",restrict:"AE"}}function userLogin(){return{scope:{closeModal:"&",modalClose:"&",toaster:"@",social:"=",successFoo:"&"},bindings:{toaster:"<",social:"=",successFoo:"&"},bindToController:!0,controller:loginCtrl,controllerAs:"$ctrl",templateUrl:"/components/sign-login/login.html",restrict:"AE"}}function userLoginPhone(){return{scope:{closeModal:"&",modalClose:"&",toaster:"@",social:"=",successFoo:"&"},bindings:{toaster:"<",social:"=",successFoo:"&"},bindToController:!0,controller:loginPhoneCtrl,controllerAs:"$ctrl",templateUrl:"/components/sign-login/loginPhone.html",restrict:"AE"}}function enterButton(){return{scope:{toaster:"@"},bindToController:!0,controller:enterButtonCtrl,controllerAs:"$ctrl",templateUrl:"/components/sign-login/enter-button.html",restrict:"AE"}}function signupCtrl($scope,$auth,toaster,$q,global,Account,$state,Stuff,CreateContent,$email,exception,$user,$http,$timeout,sendPhoneFactory){function checkUserEntry(phone){return $q.when().then(function(){return $user.getItem(phone,"profile.phone")}).then(function(res){return res?res:null})}function createUser(name,phone){var email=phone+"@gmall.io",user={email:email,name:name,profile:{phone:phone,fio:name}};return $auth.signup(user).then(function(response){if(console.log(response),response&&response.data&&response.data.token){if("update"==response.data.token)throw null;return $auth.setToken(response),Account.getProfile()}throw response}).then(function(response){console.log(response),response&&(global.set("user",response.data),global.get("functions").val.logged())}).catch(function(err){err&&exception.catcher("new client")(err)})}function sendCodeToPhone(phone){var o={phone:phone};self.sendCodeDisable=!0,$q.when().then(function(){return $http.post("/api/users/sendSMS",o)}).then(function(){exception.showToaster("info","send code","success"),$timeout(function(){self.sendCodeDisable=!1},1e4)}).catch(function(err){err&&exception.catcher("send code")(err),$timeout(function(){self.sendCodeDisable=!1},1e4)})}function verifyCode(form){self.sendVerifyCodeDisable||form.$invalid||self.code&&self.user.profile.phone&&(self.sendVerifyCodeDisable=!0,$q.when().then(function(){return sendPhoneFactory.verifyCode(self.code,self.phone)}).then(function(response){if(exception.showToaster("info","verify code","success"),$timeout(function(){self.sendVerifyCodeDisable=!1},5e3),response&&response.data&&response.data.token)return $auth.setToken(response),Account.getProfile();throw"wrong response"}).then(function(response){$scope.$emit("closeWitget"),toaster.info(global.get("langNote").val.authComplite),response&&(global.set("user",response.data),global.get("functions").val.logged(),$scope.$emit("cartslide",{event:"signLogin"}))}).catch(function(err){self.wrongCode=!0,global.set("user",null),err&&exception.catcher("verify code")(err),$timeout(function(){self.sendVerifyCodeDisable=!1},5e3)}))}function regitration(phone){$q.when().then(function(){return checkUserEntry(phone)}).then(function(res){return res&&res._id?(self.phoneExist=!0,sendCodeToPhone(),null):createUser(self.user.name,phone)}).catch(function(err){exception.catcher(global.get("lang").val.error)(err)})}function signup(form){if(console.log(form),form.$valid){if("phone"==self.typeOfReg&&self.user.profile.phone)return regitration(self.user.profile.phone);self.user.store=global.get("store").val._id,$auth.signup(self.user).then(function(response){if(response&&response.data&&response.data.token){if("update"==response.data.token)throw $scope.$emit("closeWitget"),toaster.info(response.data.message),null;$auth.setToken(response);var msg=global.get("langNote").val.subscriptionSuccess;return toaster.info(msg),Account.getProfile()}throw response}).then(function(response){if($scope.$emit("closeWitget"),response){if(global.set("user",response.data),global.get("functions").val.logged(),$scope.$emit("cartslide",{event:"signLogin"}),"cart"==$state.current.name||"stuffs.stuff"==$state.current.name)return;var states=$state.get();if(global.get("paps")&&global.get("paps").val&&states.some(function(state){return"thanksPage"==state.name})){var pap=global.get("paps").val.getOFA("action","subscription");pap&&pap.url&&$state.go("thanksPage",{id:pap.url})}}}).then(function(){if("subscription"==self.user.type){if(global.get("coupons")&&global.get("coupons").val&&global.get("coupons").val.length)return[{imgs:global.get("coupons").val}]}else if("subscriptionAdd"==self.user.type){var p={page:0,rows:100},query={$and:[{orderType:4},{actived:!0}]};return Stuff.getList(p,query)}}).then(function(stuffs){if(stuffs&&stuffs.length){if(!self.user||!self.user.email)throw"нет email";var content=CreateContent.emailBonus(stuffs),bonus=global.get("langNote").val.getBonus,domain=global.get("store").val.domain,o={email:self.user.email,content:content,subject:bonus+" ✔",from:"<promo@"+domain+">"};return $q(function(resolve,reject){$email.save(o,function(res){exception.showToaster("note","",global.get("langNote").val.emailSent),resolve()},function(err){exception.showToaster("warning",global.get("langNote").val.error,err.data),resolve()})})}}).catch(function(err){err&&exception.catcher("signup")(err)})}}function authenticate(provider){$auth.authenticate(provider).then(function(response){$scope.$emit("closeWitget"),$auth.setToken(response);var msg=global.get("langNote").val.subscriptionSuccess;toaster.info(msg)}).then(function(){return Account.getProfile()}).then(function(response){console.log(response),response&&(global.set("user",response.data),global.get("functions").val.logged(),$scope.$emit("cartslide",{event:"signLogin"}))}).catch(function(error){self.toaster&&(error.error?toaster.error(error.error):error.data?toaster.error(error.data.message,error.status):toaster.error(error))})}var self=this;self.global=global,self.formData=global.get("store").val.bonusForm?global.get("store").val.bonusForm:{phone:!0,fields:[]},self.user={email:"",profile:{},addInfo:{},subscription:!0},self.buttonName||self.buttonName,self.block="email",console.log(global.get("store").val.typeOfReg),global.get("store").val.typeOfReg&&(global.get("store").val.typeOfReg.phone?(self.typeOfReg="phone",self.block="phone"):global.get("store").val.typeOfReg.email&&(self.typeOfReg="email")),self.signup=signup,self.authenticate=authenticate,self.sendCodeToPhone=sendCodeToPhone,self.verifyCode=verifyCode,$scope.$watch(function(){return self.user.profile.phone},function(n,o){console.log(n,o),self.phoneExist=!1})}function loginCtrl($scope,$auth,toaster,$q,global,Account,exception,sendPhoneFactory,$timeout){function login(form){form.$valid||retrun,self.user.store=global.get("store").val._id,$auth.login(self.user).then(function(data){console.log(data),self.successFoo?self.successFoo():$scope.$emit("closeWitget"),self.toaster&&toaster.info(global.get("langNote").val.authComplite)}).then(function(){return Account.getProfile()}).then(function(response){response&&(global.set("user",response.data),
global.get("functions").val.logged(),$scope.$emit("cartslide",{event:"signLogin"})),$timeout(function(){$scope.$emit("closeWitget")},50)}).catch(function(err){global.set("user",null),self.toaster&&exception.catcher("login")(err)})}function authenticate(provider){$auth.authenticate(provider).then(function(response){$scope.$emit("closeWitget"),self.successFoo&&"function"==typeof self.successFoo?self.successFoo():$scope.$emit("closeWitget");var msg=global.get("langNote").val.authComplite;toaster.info(msg)}).then(function(){return Account.getProfile()}).then(function(response){response&&(global.set("user",response.data),global.get("functions").val.logged(),$scope.$emit("cartslide",{event:"signLogin"}))}).catch(function(error){self.toaster&&(error.error?toaster.error(error.error):error.data?toaster.error(error.data.message,error.status):toaster.error(error))})}function sendCodeToPhone(){self.sendCodeDisable||(self.sendCodeDisable=!0,console.log(self.phone),self.phone&&$q.when().then(function(){return sendPhoneFactory.sendCodeToPhone(self.phone)}).then(function(){self.codeSent=!0,exception.showToaster("info","send code","success"),$timeout(function(){self.sendCodeDisable=!1},1e4)}).catch(function(err){err&&exception.catcher("send code")(err),$timeout(function(){self.sendCodeDisable=!1},1e4)}))}function verifyCode(form){self.sendVerifyCodeDisable||form.$invalid||self.code&&self.phone&&(self.sendVerifyCodeDisable=!0,$q.when().then(function(){return sendPhoneFactory.verifyCode(self.code,self.phone)}).then(function(response){if(exception.showToaster("info","verify code","success"),$timeout(function(){self.sendVerifyCodeDisable=!1},5e3),response&&response.data&&response.data.token)return $auth.setToken(response),Account.getProfile();throw"wrong response"}).then(function(response){self.successFoo?self.successFoo():$scope.$emit("closeWitget"),$scope.$emit("closeWitget"),self.toaster&&toaster.info(global.get("langNote").val.authComplite),response&&(global.set("user",response.data),global.get("functions").val.logged(),$scope.$emit("cartslide",{event:"signLogin"}))}).catch(function(err){self.wrongCode=!0,global.set("user",null),err&&exception.catcher("verify code")(err),$timeout(function(){self.sendVerifyCodeDisable=!1},5e3)}))}var self=this;self.$onInit=function(){},self.block="email",global.get("store").val.typeOfReg&&(global.get("store").val.typeOfReg.phone?(self.typeOfReg="phone",self.block="online"):global.get("store").val.typeOfReg.email&&(self.typeOfReg="email")),self.login=login,self.authenticate=authenticate,self.sendCodeToPhone=sendCodeToPhone,self.verifyCode=verifyCode,self.global=global,self.phone=null,self.codeSent,self.sendCodeDisable,self.sendVerifyCodeDisable}function enterButtonCtrl(toaster,$q,Account,global,exception){function getEnterButton(form){form.$invalid||$q.when().then(function(){return self.blockButton=!0,setTimeout(function(){self.blockButton=!1},1e3),Account.getEnterButton(self.user)}).then(function(response){self.toaster&&toaster.info(response.data.message)}).catch(function(err){err&&exception.catcher(global.get("langNote").val.error)(err)})}var self=this;self.global=global,self.getEnterButton=getEnterButton}function loginPhoneCtrl($scope,$auth,toaster,$q,global,Account,exception,sendPhoneFactory,$timeout,$user){function sendCodeToPhone(form){form.$invalid||self.sendCodeDisable||(self.sendCodeDisable=!0,self.phone&&$q.when().then(function(){return sendPhoneFactory.checkPhone(self.phone)}).then(function(res){if(!res||!res._id)return $user.newUserByPhone(self.name,self.phone,self.confirmCondition)}).then(function(){return console.log("sendPhoneFactory.sendCodeToPhone(self.phone)"),sendPhoneFactory.sendCodeToPhone(self.phone)}).then(function(){self.codeSent=!0,exception.showToaster("info","send code","success"),$timeout(function(){self.sendCodeDisable=!1},1e4)}).catch(function(err){err&&exception.catcher("send code")(err),$timeout(function(){self.sendCodeDisable=!1},1e4)}))}function verifyCode(form){self.sendVerifyCodeDisable||form.$invalid||self.code&&self.phone&&(self.sendVerifyCodeDisable=!0,$q.when().then(function(){return sendPhoneFactory.verifyCode(self.code,self.phone)}).then(function(response){if(exception.showToaster("info","verify code","success"),$timeout(function(){self.sendVerifyCodeDisable=!1},5e3),response&&response.data&&response.data.token)return $auth.setToken(response),Account.getProfile();throw"wrong response"}).then(function(response){self.successFoo?self.successFoo():$scope.$emit("closeWitget"),$scope.$emit("closeWitget"),self.toaster&&toaster.info(global.get("langNote").val.authComplite),response&&(global.set("user",response.data),global.get("functions").val.logged(),$scope.$emit("cartslide",{event:"signLogin"}))}).catch(function(err){self.wrongCode=!0,global.set("user",null),err&&exception.catcher("verify code")(err),$timeout(function(){self.sendVerifyCodeDisable=!1},5e3)}))}var self=this;self.$onInit=function(){},global.get("store").val.typeOfReg&&global.get("store").val.typeOfReg.oferta&&(self.oferta=!0),global.get("store").val.texts&&global.get("store").val.texts.oferta&&(self.ofertaText=global.get("store").val.texts.oferta[global.get("store").val.lang]),self.sendCodeToPhone=sendCodeToPhone,self.verifyCode=verifyCode,self.global=global,self.phone=null,self.name="",self.codeSent,self.sendCodeDisable,self.sendVerifyCodeDisable}angular.module("gmall.directives").directive("userSign",userSign).directive("subscriptionAdd",subscriptionAdd).directive("userSignShort",userSignShort).directive("userLogin",userLogin).directive("userLoginPhone",userLoginPhone).directive("enterButton",enterButton),signupCtrl.$inject=["$scope","$auth","toaster","$q","global","Account","$state","Stuff","CreateContent","$email","exception","$user","$http","$timeout","sendPhoneFactory"],loginCtrl.$inject=["$scope","$auth","toaster","$q","global","Account","exception","sendPhoneFactory","$timeout"],loginPhoneCtrl.$inject=["$scope","$auth","toaster","$q","global","Account","exception","sendPhoneFactory","$timeout","$user"]}(),function(){angular.module("gmall.directives").directive("pswdCheck",["$timeout",function($timeout){return{require:"ngModel",link:function(scope,elem,attrs,ctrl){var firstPassword="#"+attrs.pswdCheck;$timeout(function(){elem.on("keyup",function(){scope.$apply(function(){var v=elem.val()===$(firstPassword).val();console.log(v),ctrl.$setValidity("pswdmatch",v)})})},100)}}}]).directive("passwordMatch",function(){return{require:"ngModel",scope:{otherModelValue:"=passwordMatch"},link:function(scope,element,attributes,ngModel){ngModel.$validators.compareTo=function(modelValue){return!("undefined"!==modelValue&&""!==modelValue&&modelValue||"undefined"!==scope.otherModelValue&&""!==scope.otherModelValue&&scope.otherModelValue)||modelValue===scope.otherModelValue},scope.$watch("otherModelValue",function(){ngModel.$validate()})}}}).directive("passwordStrength",function(){return{restrict:"A",require:"ngModel",link:function(scope,element,attrs,ngModel){var indicator=element.children(),dots=Array.prototype.slice.call(indicator.children()),weakest=dots.slice(-1)[0],weak=dots.slice(-2),strong=dots.slice(-3),strongest=dots.slice(-4);element.after(indicator),element.bind("keyup",function(){var tmp,matches={positive:{},negative:{}},counts={positive:{},negative:{}},strength=0;angular.forEach(dots,function(el){el.style.backgroundColor="#ebeef1"}),ngModel.$viewValue&&(matches.positive.lower=ngModel.$viewValue.match(/[a-z]/g),matches.positive.upper=ngModel.$viewValue.match(/[A-Z]/g),matches.positive.numbers=ngModel.$viewValue.match(/\d/g),matches.positive.symbols=ngModel.$viewValue.match(/[$-\/:-?{-~!^_`\[\]]/g),matches.positive.middleNumber=ngModel.$viewValue.slice(1,-1).match(/\d/g),matches.positive.middleSymbol=ngModel.$viewValue.slice(1,-1).match(/[$-\/:-?{-~!^_`\[\]]/g),counts.positive.lower=matches.positive.lower?matches.positive.lower.length:0,counts.positive.upper=matches.positive.upper?matches.positive.upper.length:0,counts.positive.numbers=matches.positive.numbers?matches.positive.numbers.length:0,counts.positive.symbols=matches.positive.symbols?matches.positive.symbols.length:0,counts.positive.numChars=ngModel.$viewValue.length,tmp+=counts.positive.numChars>=8?1:0,counts.positive.requirements=tmp>=3?tmp:0,counts.positive.middleNumber=matches.positive.middleNumber?matches.positive.middleNumber.length:0,counts.positive.middleSymbol=matches.positive.middleSymbol?matches.positive.middleSymbol.length:0,matches.negative.consecLower=ngModel.$viewValue.match(/(?=([a-z]{2}))/g),matches.negative.consecUpper=ngModel.$viewValue.match(/(?=([A-Z]{2}))/g),matches.negative.consecNumbers=ngModel.$viewValue.match(/(?=(\d{2}))/g),matches.negative.onlyNumbers=ngModel.$viewValue.match(/^[0-9]*$/g),matches.negative.onlyLetters=ngModel.$viewValue.match(/^([a-z]|[A-Z])*$/g),counts.negative.consecLower=matches.negative.consecLower?matches.negative.consecLower.length:0,counts.negative.consecUpper=matches.negative.consecUpper?matches.negative.consecUpper.length:0,counts.negative.consecNumbers=matches.negative.consecNumbers?matches.negative.consecNumbers.length:0,strength+=4*counts.positive.numChars,counts.positive.upper&&(strength+=2*(counts.positive.numChars-counts.positive.upper)),counts.positive.lower&&(strength+=2*(counts.positive.numChars-counts.positive.lower)),(counts.positive.upper||counts.positive.lower)&&(strength+=4*counts.positive.numbers),strength+=6*counts.positive.symbols,strength+=2*(counts.positive.middleSymbol+counts.positive.middleNumber),strength+=2*counts.positive.requirements,strength-=2*counts.negative.consecLower,strength-=2*counts.negative.consecUpper,strength-=2*counts.negative.consecNumbers,matches.negative.onlyNumbers&&(strength-=counts.positive.numChars),matches.negative.onlyLetters&&(strength-=counts.positive.numChars),strength=Math.max(0,Math.min(100,Math.round(strength))),strength>85?angular.forEach(strongest,function(el){el.style.backgroundColor="#008cdd"}):strength>65?angular.forEach(strong,function(el){el.style.backgroundColor="#6ead09"}):strength>30?angular.forEach(weak,function(el){el.style.backgroundColor="#e09115"}):weakest.style.backgroundColor="#e01414")})},template:'<span class="password-strength-indicator"><span></span><span></span><span></span><span></span></span>'}})}(),angular.module("gmall.exception",[]).factory("exception",exception),exception.$inject=["toaster"],angular.module("gmall.services").factory("Confirm",confirmFactory),confirmFactory.$inject=["$q","$uibModal"],angular.module("gmall.services").factory("myInterceptorService",function($q,$rootScope,$templateCache){var keys=$templateCache.getKeys(),store=globalStoreId;try{globalCrawler&&globalCrawler}catch(err){}return{request:function(config){return keys.indexOf(config.url)>-1?config:(config.params=config.params||{},config.params.store||(config.params.store=store),$rootScope.global&&$rootScope.global.get("store")&&$rootScope.global.get("store").val&&$rootScope.global.get("store").val.lang&&(config.params.lang=$rootScope.global.get("store").val.lang),config)},response:function(response){return response.status,response}}}),angular.module("gmall").config(["$provide",function($provide){$provide.decorator("$templateCache",["$delegate",function($delegate){var keys=[],origPut=$delegate.put;return $delegate.put=function(key,value){origPut(key,value),keys.push(key)},$delegate.getKeys=function(){return keys},$delegate}])}]),angular.module("gmall.services").service("Store",function($resource,$q,$uibModal,$http){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}var data={perPage:paginate.rows,page:paginate.page,query:query};return Items.query(data).$promise.then(getListComplete)}function getItem(id){function getItemComplete(response){return response}return Items.get({_id:id}).$promise.then(getItemComplete)}function upload(item){var url=storeHost?"http://"+storeHost+"/api/upload/"+item._id:"/api/upload/"+item._id;return $http.get(url)}function create(){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/storeSetting/createStore.html",controller:createStoreCtrl,controllerAs:"$ctrl"}).result.then(function(store){store.name?(store.name=store.name.substring(0,25),resolve(store)):reject("empty")},function(err){reject(err)})})}function selectPartOfTemplate(stores){return $uibModal.open({animation:!0,templateUrl:"components/storeSetting/modal/selectStore.html",controllerAs:"$ctrl",controller:function($uibModalInstance,global,stores){function selectStore(store){$uibModalInstance.close(store)}function cancel(){$uibModalInstance.dismiss()}var self=this;self.stores=stores,self.selectStore=selectStore,self.cancel=cancel},resolve:{stores:function(){return stores}}}).result}function selectItemFromList(items,header){return $uibModal.open({animation:!0,templateUrl:"components/storeSetting/modal/selectItem.html",controllerAs:"$ctrl",controller:function($uibModalInstance,global,items,header){function selectItem(item){$uibModalInstance.close(item)}function cancel(){$uibModalInstance.dismiss()}var self=this;self.items=items,self.header=header||"выберите из предложенного списка",self.selectItem=selectItem,self.cancel=cancel},resolve:{items:function(){return items},header:function(){return header}}}).result}function createStoreCtrl($uibModalInstance,exception,$user){function addOwner(){$user.selectItem().then(function(user){self.user=user})}var self=this;self.name="",self.addOwner=addOwner,self.ok=function(){if(!self.name)return void exception.catcher("создание магазина")("нужено название");$uibModalInstance.close({name:self.name})},self.cancel=function(){$uibModalInstance.dismiss("cancel")}}var Items=$resource("/api/collections/Store/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,query:Items.query,get:Items.get,save:Items.save,delete:Items.delete,upload:upload,create:create,selectPartOfTemplate:selectPartOfTemplate,selectItemFromList:selectItemFromList}}).service("Template",function($resource,$q,$uibModal){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return console.log("XHR Failed for getNews."+error),$q.reject(error)}return paginate||(paginate={page:0}),Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete).catch(getListFailed)}function getItem(id){function getItemComplete(response){return response}function getItemFailed(error){return $q.reject(error)}return Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}function create(){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/storeSetting/createTemplate.html",controller:createTemplateCtrl,controllerAs:"$ctrl"}).result.then(function(o){o.name?(o.name=o.name.substring(0,25),resolve(o)):reject("empty")},function(err){reject(err)})})}function createTemplateCtrl($uibModalInstance,exception){var self=this;self.name="",self.folder="",self.ok=function(){if(!self.name||!self.folder)return void exception.catcher("создание шаблона")("нужено имя и папка");$uibModalInstance.close({name:self.name,folder:self.folder})},self.cancel=function(){$uibModalInstance.dismiss("cancel")}}var Items=$resource("/api/collections/Template/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,query:Items.query,get:Items.get,save:Items.save,delete:Items.delete,create:create}}).service("BlocksConfig",function($resource,$q,$uibModal){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return console.log("XHR Failed for getNews."+error),$q.reject(error)}return paginate||(paginate={page:0,rows:500}),Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete).catch(getListFailed)}function getItem(id){function getItemComplete(response){return response}function getItemFailed(error){return $q.reject(error)}return Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}function selectItemFromList(items,header){return $uibModal.open({animation:!0,templateUrl:"components/storeSetting/modal/selectItemForBlocks.html",controllerAs:"$ctrl",controller:function($uibModalInstance,global,items,header){function selectItem(item){$uibModalInstance.close(item)}function cancel(){$uibModalInstance.dismiss()}var self=this;self.items=items,self.header=header||"выберите из предложенного списка",self.selectItem=selectItem,self.cancel=cancel},resolve:{items:function(){return items},header:function(){return header}}}).result}var Items=$resource("/api/collections/BlocksConfig/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,query:Items.query,get:Items.get,save:Items.save,delete:Items.delete,selectItemFromList:selectItemFromList}}).service("Config",function($resource){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return console.log("XHR Failed for getNews."+error),$q.reject(error)}return paginate||(paginate={page:0}),Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete).catch(getListFailed)}function getItem(id){function getItemComplete(response){return response}function getItemFailed(error){return $q.reject(error)}return Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}var Items=$resource("/api/collections/Config/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,query:Items.query,get:Items.get,save:Items.save,delete:Items.delete}}).service("ConfigData",function($resource,$q){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return console.log("XHR Failed for getNews."+error),$q.reject(error)}return paginate||(paginate={page:0}),Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete).catch(getListFailed)}function getItem(id){function getItemComplete(response){return response}function getItemFailed(error){return $q.reject(error)}return Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}var Items=$resource("/api/collections/ConfigData/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,query:Items.query,get:Items.get,save:Items.save,delete:Items.delete}}).service("Seller",function($resource){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}var data={perPage:paginate.rows,page:paginate.page,query:query};return Items.query(data).$promise.then(getListComplete)}function getItem(id,param){function getItemComplete(response){return response}return Items.get({_id:id,param:param}).$promise.then(getItemComplete)}var Items=$resource("/api/collections/Seller/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,query:Items.query,get:Items.get,save:Items.save,delete:Items.delete}}).service("siteName",function($uibModal){function choiceName(data){return $uibModal.open({animation:!0,templateUrl:"components/storeSetting/modal/websiteName.html",controller:function($uibModalInstance,global,Store,data){function checkSubDomain(name){if(name&&!(name.length>20)){var o={};o[self.field]=name.toLowerCase(),Store.query({query:o},function(res){res&&res.length?(console.log(!0),self.exist=!0):self.exist=!1},function(err){self.exist=!0})}}var self=this;self.global=global,self.item="",self.focus=!0,self.windowName="Выберите поддомен",self.field="subDomain",data&&(data.windowName&&(self.windowName=data.windowName),data.field&&(self.field=data.field)),self.checkSubDomain=checkSubDomain,self.exist=!1,self.re=/^[a-zA-Z0-9][a-zA-Z0-9-_\.]{1,20}$/,self.ok=function(websiteNameForm){websiteNameForm.$invalid||self.exist||$uibModalInstance.close(self.item.toLowerCase())},self.cancel=function(){$uibModalInstance.dismiss()}},controllerAs:"$ctrl",resolve:{data:function(){return data}}}).result}return{choiceName:choiceName}}),angular.module("gmall.services").service("Sections",sectionServiceFunction).service("selectCategoryFromModal",function($q,$uibModal){this.bind=function(categoryId){return $q(function(resolve,reject){var options={animation:!0,templateUrl:"components/selectCategoryModal/selectCategoryModal.html",controller:"selectCategoryModalCtrl",size:"lg",resolve:{categoryId:function(){return categoryId}}};$uibModal.open(options).result.then(function(selectedItem){resolve(selectedItem)},function(){console.log("Modal dismissed at: "+new Date),reject()})})}}),sectionServiceFunction.$inject=["$resource","$q","global","$uibModal","$timeout"],function(){function categoryService($resource,$uibModal,$q){function save(){return Items.save.apply(this,arguments).$promise.then(function(){})}function select(categoryId,selectSection,sections,forGroupStuffs){return $q(function(resolve,reject){var options={animation:!0,templateUrl:"components/sections/selectCategoryModal.html",controller:selectCategoryCtrl,size:"lg",resolve:{categoryId:function(){return categoryId},selectSection:function(){return selectSection},sections:function(){return sections?sections:null},forGroupStuffs:function(){return forGroupStuffs?forGroupStuffs:null}},controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(selectedItem){resolve(selectedItem)},function(){reject()})})}function selectWithSection(){return $q(function(resolve,reject){var options={animation:!0,templateUrl:"components/sections/selectCategoryWithSectionModal.html",controller:selectCategoryWithSectionCtrl,size:"lg",controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(selectedItem){resolve(selectedItem)},function(){reject()})})}var Items=$resource("/api/collections/Category/:_id",{_id:"@_id"});return{get:Items.get,query:Items.query,save:save,delete:Items.delete,select:select,selectWithSection:selectWithSection}}function selectCategoryCtrl($q,$uibModalInstance,Sections,categoryId,selectSection,sections,forGroupStuffs){var self=this;self.categoryId=categoryId,self.selectSection=selectSection,$q.when().then(function(){return sections?sections:Sections.getSections()}).then(function(sections){self.sections=sections.filter(function(s){return forGroupStuffs?s.groupStuffs:!s.groupStuffs})}),self.ok=function(selectedCategory){$uibModalInstance.close(selectedCategory)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}}function selectCategoryWithSectionCtrl($q,$uibModalInstance,Sections){var self=this;$q.when().then(function(){return Sections.getSections()}).then(function(sections){self.sections=sections}),self.ok=function(selectedCategory){$uibModalInstance.close(selectedCategory)},self.okSection=function(section){var categories=section.categories;$uibModalInstance.close(categories)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}}angular.module("gmall.services").service("Category",categoryService),categoryService.$inject=["$resource","$uibModal","$q"],selectCategoryCtrl.$inject=["$q","$uibModalInstance","Sections","categoryId","selectSection","sections","forGroupStuffs"],selectCategoryWithSectionCtrl.$inject=["$q","$uibModalInstance","Sections"]}(),angular.module("gmall.directives").directive("categoryTree",[function(){return{restrict:"E",templateUrl:"components/sections/categoryTree.html"}}]).directive("categoryHtml",[function(){return{restrict:"E",templateUrl:"components/sections/categoryHtml.html"}}]).directive("sectionsList",[function(){function sectionCtrl($state,global,$anchorScroll,Sections,Category,$q,$timeout,$scope){function activate(){$q.when().then(function(){return Sections.getSections()}).then(function(sections){self.sections=sections.filter(function(el){return!el.parent&&0===el.level}),self.sectionsList.sections=self.sections})}function timoutForShow(){return self.showRadio||$timeout(function(){self.showRadio=!0},300),self.showRadio}var self=this;self.$state=$state,self.global=global,self.sectionsList={},self.sectionTypes={good:"товар",service:"услуга",infp:"инфо",media:"медиа"},$scope.$on("changeLang",function(){Sections.setSections(null),activate()}),activate(),self.setTimeout=timoutForShow,self.showRadio;self.newSection=function(section){if(section.name){var index=0;self.sections.forEach(function(s){s.index>=index&&(index=s.index+1)});var newSection={name:section.name,child:[],categories:[],level:0,parent:null,index:index};Sections.save(newSection,function(res){section.name="",newSection._id=res.id,self.sections.push(newSection)})}},self.dragoverCallback=function(event){return!0},self.addSection=function(section){if(section.sectionNewName){var newSection={name:section.sectionNewName,child:[],categories:[],level:section.level+1,parent:section._id};section.child.push(newSection),Sections.save(newSection,function(res){newSection._id=res.id,newSection.url=res.url,newSection.section={url:section.url},console.log(section),section.sectionNewName="";var child=section.child.map(function(el){return el._id});Sections.save({update:"child"},{_id:section._id,child:child},function(res){})})}},self.saveSection=function(section,field){section.name||(section.name="раздел без названия");var o={_id:section._id};o[field]=section[field],Sections.save({update:field},o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)},function(err){})},self.deleteSection=function(parentSection,section){if(parentSection){var i=parentSection.child.indexOf(section);if(i>-1)return parentSection.child.splice(i,1),Sections.delete({id:section._id},function(res){console.log(res)}),void Sections.save(parentSection,function(res){console.log(res)})}else if(!section.child.length&&!section.categories.length){var i=self.sections.indexOf(section);i>-1&&(self.sections.splice(i,1),Sections.delete({id:section._id},function(res){console.log(res)}))}};var findSection=function(id,sections){for(var i=0,l=sections.length;i<l;i++)if(sections[i]._id==id)return sections[i];for(var res,i=0,l=sections.length;i<l;i++)if(sections[i].child&&sections[i].child.length&&(res=findSection(id,sections[i].child)))return res};self.dropSectionCallback=function(section,parentSection){return setTimeout(function(){var oldParent=findSection(section.parent,self.sections);Sections.save({update:"child"},{_id:parentSection._id,child:parentSection.child.map(function(el){return el._id})},function(res){console.log(res)}),oldParent._id!=parentSection._id&&(section.parent=parentSection._id,Sections.save({update:"parent"},{id:section._id},function(res){console.log(res)}),Sections.save({update:"child"},{_id:oldParent._id,child:oldParent.child.map(function(el){return el._id})},function(res){console.log(res)}))},50),section},self.dropMainSectionCallback=function(section){return setTimeout(function(){self.sections.forEach(function(section,i){section.index=i,Sections.save({update:"index"},{_id:section._id,index:section.index})})},50),section},self.addCategory=function(section,name){if(section.newCategoryName){var category={name:section.newCategoryName,group:section._id};section.categories.push(category),category.focus=!0,Category.save(category,function(res){section.newCategoryName="",category._id=res.id,category.url=res.url;var categories=section.categories.map(function(el){return el._id});Sections.save({update:"categories"},{_id:section._id,categories:categories})})}},self.saveCategoryName=function(c,section){c.name||(c.name="категория без названия"),Category.save({update:"name"},{_id:c._id,name:c.name},function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)},function(err){})},self.saveCategoryActive=function(c){console.log(c.name),Category.save({update:"notActive"},{_id:c._id,notActive:c.notActive},function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)},function(err){})},self.deleteCategory=function(section,idx){Category.delete({_id:section.categories[idx]._id},function(res){section.categories.splice(idx,1);Sections.save({update:"categories"},{_id:section._id,categories:section.categories.map(function(el){return el._id})},function(res){})},function(err){console.log(err)})},self.dropCategoryCallback=function(category,section){return setTimeout(function(){if(section.categories.forEach(function(c,i){c.index=i}),Sections.save({update:"categories"},{_id:section._id,categories:section.categories.map(function(el){return el._id})},function(res){}),category.group!=section._id){var oldSection=findSection(category.group,self.sections);oldSection.categories.forEach(function(c,i){c.index=i}),Sections.save({update:"categories"},{_id:oldSection._id,categories:oldSection.categories.map(function(el){return el._id})},function(res){})}category.group=section._id,Category.save({update:"group"},{_id:category._id,group:category.group},function(res){})},50),category},self.movedCategory=function(section,index){index!=section.categories[index].index&&index++,section.categories.splice(index,1)}}return{scope:{},bindToController:!0,controller:sectionCtrl,controllerAs:"$ctrl",restrict:"E",templateUrl:"components/sections/sections.html"}}]).directive("categoryEdit",[function(){function categoryCtrl($scope,Category,$q,$stateParams,Filters,Brands,global,$timeout,Sections,$http,Photo){function selectCategoryFromMP(mpId,data){var categoryId=data&&data._id?data._id:null;$q.when().then(function(){return Category.select(categoryId,null,self.mps[mpId])}).then(function(category){self.item.mp||(self.item.mp={}),self.item.mp[mpId]=category;var o={},categoriesMP=[];for(var key in self.item.mp)o[key]=self.item.mp[key]._id,categoriesMP.push(self.item.mp[key]._id);saveField("mp",o),changeCategoryForStuffs(self.item._id,categoriesMP)}).catch(function(err){console.log(err)})}function deleteCategoryFromMP(mp){self.item.mp[mp]._id;delete self.item.mp[mp];var o={};for(var key in self.item.mp)o[key]=self.item.mp[key]._id;saveField("mp",o)}function getPromiseForMPCategories(store){return Sections.query({store:store}).$promise}function changeCategoryForStuffs(category,categoriesMP){var o={category:category,categoriesMP:categoriesMP};$http.post("/api/stuffs/changeMPCategory",o)}function saveField(field,data){var o={_id:self.item._id};o[field]=data,Category.save({update:field},o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})}function refreshBlocks(){return Category.get({_id:$stateParams.id}).$promise.then(function(data){data.blocks.forEach(function(b,i){b.i=i,b.desc||(b.desc=""),b.descL||(b.descL={}),b.desc1||(b.desc1=""),b.desc1L||(b.desc1L={}),b.name||(b.name=""),b.nameL||(b.nameL={}),b.name1||(b.name1=""),b.name1L||(b.name1L={}),b.videoLink||(b.videoLink="")}),self.item.blocks=data.blocks})}function addBlock(type){type&&($scope.$broadcast("addNewBlock",{type:type}),self.newBlock=null)}function deleteBlock(block){console.log(block);var o={_id:self.item._id};o.id=block.id;var update={update:"id",embeddedName:"blocks"};update.embeddedPull=!0,console.log(update,o),Confirm("удалить?").then(function(){return self.Items.save(update,o).$promise}).then(function(res){self.item.blocks.splice(block.i,1),self.item.blocks.forEach(function(b,i){b.i=i});var images=[];if(block.img&&images.push(block.img),block.video&&images.push(block.video),block.videoCover&&images.push(block.videoCover),block.imgs&&block.imgs.length&&block.imgs.forEach(function(im){im.img&&images.push(im.img)}),images.length)return Photo.deleteFiles("Stuff",images)})}var self=this;self.Items=Category,self.global=global,self.block="desc",
self.listOfBlocks=angular.copy(listOfBlocksForAll),self.selectCategoryFromMP=selectCategoryFromMP,self.deleteCategoryFromMP=deleteCategoryFromMP,self.addBlock=addBlock,self.deleteBlock=deleteBlock,self.refreshBlocks=refreshBlocks,self.type="Category";var mps;$q.when().then(function(){return Category.get({_id:$stateParams.id}).$promise}).then(function(res){res.blocks||(res.blocks=[]),res.blocks.forEach(function(b,i){b.i=i}),res.filters=res.filters.map(function(el){return el._id}),self.item=res}).then(function(){return Filters.getFilters()}).then(function(filters){self.filters=filters}).then(function(){return Brands.getBrands()}).then(function(brands){self.brands=brands}).then(function(){if(global.get("store").val.mp&&global.get("store").val.mp.mps&&global.get("store").val.mp.mps.length&&(mps=global.get("store").val.mp.mps.map(function(mp){return mp._id}))&&mps.length){var acts=[];return mps.forEach(function(mp){acts.push(getPromiseForMPCategories(mp))}),$q.all(acts)}}).then(function(results){results&&results.length&&(self.mps={},self.mpsCategories={},mps.forEach(function(mp,i){results[i].shift(),self.mps[mp]=results[i],self.mpsCategories[mp]=results[i].reduce(function(o,sec){return sec.categories&&sec.categories.length&&sec.categories.forEach(function(c){o[c._id]=c}),sec.child&&sec.child.length&&sec.child.forEach(function(ch){ch.categories&&ch.categories.length&&ch.categories.forEach(function(c){o[c._id]=c})}),o},{}),self.item.mp&&self.item.mp[mp]&&(self.item.mp[mp]=self.mpsCategories[mp][self.item.mp[mp]])}))}).catch(function(err){self.edit=!1}),self.saveField=function(field,defer){console.log("field"),defer=defer||0,$timeout(function(){var o={_id:self.item._id};o[field]=self.item[field],Category.save({update:field},o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})},defer)},$scope.$on("changeLang",function(){$q.when().then(function(){return Category.get({_id:$stateParams.id}).$promise}).then(function(res){res.blocks||(res.blocks=[]),res.blocks.forEach(function(b,i){b.i=i}),res.filters=res.filters.map(function(el){return el._id}),self.item=res})})}return{scope:{},bindToController:!0,controller:categoryCtrl,controllerAs:"$ctrl",templateUrl:"components/sections/category.html"}}]).directive("sectionEdit",[function(){function sectionCtrl($scope,$q,$stateParams,Filters,global,$timeout,Sections,$http,Photo){function refreshBlocks(){return Category.get({_id:$stateParams.id}).$promise.then(function(data){data.blocks.forEach(function(b,i){b.i=i,b.desc||(b.desc=""),b.descL||(b.descL={}),b.desc1||(b.desc1=""),b.desc1L||(b.desc1L={}),b.name||(b.name=""),b.nameL||(b.nameL={}),b.name1||(b.name1=""),b.name1L||(b.name1L={}),b.videoLink||(b.videoLink="")}),self.item.blocks=data.blocks})}function addBlock(type){type&&($scope.$broadcast("addNewBlock",{type:type}),self.newBlock=null)}function deleteBlock(block){console.log(block);var o={_id:self.item._id};o.id=block.id;var update={update:"id",embeddedName:"blocks"};update.embeddedPull=!0,console.log(update,o),Confirm("удалить?").then(function(){return self.Items.save(update,o).$promise}).then(function(res){self.item.blocks.splice(block.i,1),self.item.blocks.forEach(function(b,i){b.i=i});var images=[];if(block.img&&images.push(block.img),block.video&&images.push(block.video),block.videoCover&&images.push(block.videoCover),block.imgs&&block.imgs.length&&block.imgs.forEach(function(im){im.img&&images.push(im.img)}),images.length)return Photo.deleteFiles("Stuff",images)})}var self=this;self.Items=Sections,self.global=global,self.block="desc",self.listOfBlocks=angular.copy(listOfBlocksForAll),self.addBlock=addBlock,self.deleteBlock=deleteBlock,self.refreshBlocks=refreshBlocks,$q.when().then(function(){return Sections.get({id:$stateParams.id}).$promise}).then(function(res){res.blocks||(res.blocks=[]),res.blocks.forEach(function(b,i){b.i=i}),self.item=res}).then(function(){return Filters.getFilters()}).then(function(filters){self.filters=filters.filter(function(f){return f.actived})}).catch(function(err){self.edit=!1}),self.saveField=function(field,defer){console.log("field"),defer=defer||0,$timeout(function(){var o={_id:self.item._id};o[field]=self.item[field],Sections.save({update:field},o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})},defer)},$scope.$on("changeLang",function(){$q.when().then(function(){return Sections.get({id:$stateParams.id}).$promise}).then(function(res){res.blocks||(res.blocks=[]),res.blocks.forEach(function(b,i){b.i=i}),self.item=res})})}return{scope:{},bindToController:!0,controller:sectionCtrl,controllerAs:"$ctrl",templateUrl:"components/sections/section.html"}}]).directive("fixSection",[function(){return{link:function(scope,element,attrs){function getOffsetTop(){return $(element).offset().top-$(window).scrollTop()}function getOffsetBorderElement(){return element.offset().top-$(window).scrollTop()+borderElement.height()}function setScrollBlock(){var posY=getOffsetTop(),posBottonBorderElement=getOffsetBorderElement();posY<70&&!clonedBlockDisplay&&posBottonBorderElement>150&&(clonedBlockDisplay=!0,clonedBlock.show(),$(element).css("opacity",0)),posY>70&&clonedBlockDisplay&&(clonedBlockDisplay=!1,$(element).css("opacity",1),clonedBlock.hide()),posBottonBorderElement<150&&clonedBlockDisplay&&(clonedBlockDisplay=!1,$(element).css("opacity",1),clonedBlock.hide())}function init(reload){setTimeout(function(){reload||(clonedBlock=element.clone().hide(),clonedBlock.css("position","fixed").css("top",43).css("height",element.height())),clonedBlock.css("left",$(element).offset().left).css("width",element.width()+15+sdvig),reload||(mainDiv.append(clonedBlock),borderElement=$("#borderBox"+attrs.fixSection),setScrollBlock())},200)}var delay,visible;if(scope.$on("changeMenuStatus",function(event,reload){delay||(delay=!0,clonedBlock.is(":visible")&&(visible=!0,clonedBlock.hide()),init("reload"),setTimeout(function(){delay=!1,visible&&(visible=!1,clonedBlock.fadeIn(200))},400))}),$(window).resize(function(){}),!($(window).width()<1200)){var borderElement,clonedBlock,mainDiv=$("#sectionsTree"),clonedBlockDisplay=!1,sdvig=attrs.subSection?15:0;init(),$(window).scroll(setScrollBlock)}}}}]),function(){function brandTagsService($resource,$uibModal,$q,Sections){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return console.log("XHR Failed for getNews."+error),$q.reject(error)}return Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete).catch(getListFailed)}function getItem(id){function getItemComplete(response){return response}function getItemFailed(error){return $q.reject(error)}return Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}function selectBrandTag(data){var sections=data&&data.section?Sections.getSections():null;return $q(function(resolve,reject){var options={animation:!0,templateUrl:"components/brand/selectBrandTag.html",controller:selectBrandTagCtrl,size:"lg",controllerAs:"$ctrl",resolve:{sections:function(){return sections}}};$uibModal.open(options).result.then(function(selectedFilterTag){resolve(selectedFilterTag)},function(){console.log("Modal dismissed at: "+new Date),reject()})})}function selectBrandTagCtrl(Brands,$uibModalInstance,$q,global,sections){var self=this;self.global=global,self.sections=sections,self.sections&&(self.section=self.sections[0].url),$q.when().then(function(){return Brands.getBrands()}).then(function(filters){self.filters=filters}),self.cancel=function(){$uibModalInstance.dismiss("cancel")},self.ok=function(filterTag){filterTag&&(self.section&&(filterTag.section=self.section),filterTag.brand=self.filters.find(function(b){return b._id==filterTag.brand})),$uibModalInstance.close(filterTag)}}var Items=$resource("/api/collections/BrandTags/:id",{id:"@_id"});return{getList:getList,getItem:getItem,save:Items.save,delete:Items.delete,query:Items.query,get:Items.get,selectBrandTag:selectBrandTag,select:selectBrandTag}}angular.module("gmall.services").service("Brands",function($resource,$q,global,$uibModal,Sections){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}paginate||(paginate={page:0});var data={perPage:paginate.rows,page:paginate.page,query:query};return global.get("crawler")&&global.get("crawler").val&&(data.subDomain=global.get("store").val.subDomain),Items.query(data).$promise.then(getListComplete)}function getItem(id){function getItemComplete(response){return response&&response.blocks&&response.blocks.length&&response.blocks.forEach(function(b){"stuffs"==b.type&&(b.stuffs&&b.stuffs.length?b.imgs=b.stuffs.map(function(s){return s.gallery&&s.gallery.length&&s.gallery[0].img&&(s.img=s.gallery[0].img),s}):b.imgs=[])}),response}return Items.get({_id:id}).$promise.then(getItemComplete)}function returnBrands(resolve){pending?setTimeout(function(){returnBrands(resolve)},300):resolve(brands)}function reloadItems(){pending=!0,Items.query(function(res){res.shift(),brands=res,global.set("brands",brands),pending=!1})}function selectBrand(data){var sections=data&&data.section?Sections.getSections():null;return $q(function(resolve,reject){var options={animation:!0,templateUrl:"components/brand/selectBrand.html",controller:selectBrandCtrl,size:"lg",controllerAs:"$ctrl",resolve:{sections:function(){return sections}}};$uibModal.open(options).result.then(function(selected){resolve(selected)},function(){console.log("Modal dismissed at: "+new Date),reject()})})}function selectBrandCtrl(Brands,$uibModalInstance,$q,global,sections){var self=this;self.global=global,self.sections=sections,self.sections&&(self.section=self.sections[0].url),$q.when().then(function(){return Brands.getBrands()}).then(function(filters){self.filters=filters}),self.cancel=function(){$uibModalInstance.dismiss("cancel")},self.ok=function(filterTag){self.section&&(filterTag.section=self.section),$uibModalInstance.close(filterTag)}}var Items=$resource("/api/collections/Brand/:id",{id:"@_id"}),brands=null,pending=!0;this.query=Items.query,this.get=Items.get,this.delete=Items.delete,this.save=Items.save,this.reloadItems=reloadItems,this.select=selectBrand,this.getList=getList,this.getItem=getItem,this.getBrands=function(){return $q(function(resolve,reject){if(global.get("brands")&&global.get("brands").val)return brands||(brands=global.get("brands").val),resolve(global.get("brands").val);pending?setTimeout(function(){returnBrands(resolve)},300):brands?resolve(brands):(pending=!0,Items.query(function(res){res.shift(),brands=res?res:[],pending=!1,resolve(brands)},function(err){pending=!1,reject(err)}))})},global.get("brands")&&global.get("brands").val||Items.query(function(res){res.shift(),brands=res,global.get("brands")&&!global.get("brands").val&&global.set("brands",brands),pending=!1}),selectBrandCtrl.$inject=["Brands","$uibModalInstance","$q","global","sections"]}).service("BrandTags",brandTagsService),brandTagsService.$inject=["$resource","$uibModal","$q","Sections"]}(),angular.module("gmall.directives").directive("brandsList",["$anchorScroll","Brands","BrandTags","$q","SelectCategory","$timeout","global","$http","Confirm","exception","Stuff",function($anchorScroll,Brands,BrandTags,$q,SelectCategory,$timeout,global,$http,Confirm,exception,Stuff){return{restrict:"E",templateUrl:"components/brand/brands.html",link:function($scope,element,attrs){function activate(){$q.when().then(function(){var q=$q.defer();return Brands.query(function(res){res.shift(),$scope.brands=res,q.resolve()},function(err){q.reject(err)}),q.promise}).then(function(){var q=$q.defer();return BrandTags.query(function(res){res.shift(),$scope.brandTags=res,q.resolve()},function(err){q.reject(err)}),q.promise}).then(function(){})}$scope.$on("changeLang",function(){activate()}),activate(),$scope.fixBrands=function(){Confirm("Подтверждаете?").then(function(){$scope.fixBrandsDesable=!0;var data={};return $http({method:"post",url:"/api/fixedDB/brand",data:data})}).then(function(){activate(),exception.showToaster("info","fix stucture","Ok")}).catch(function(err){exception.catcher("fix stucture")(err)})},$scope.addNewBrand=function(newBrand){if(newBrand.name){var brand={name:newBrand.name.substring(0,25),index:0,tags:[]};newBrand.name="",$scope.brands.unshift(brand),Brands.save(brand,function(res){console.log(res),brand._id=res.id})}},$scope.deleteBrand=function(brand,idx){Brands.delete({id:brand._id},function(res){$scope.brands.splice(idx,1)},function(err){console.log(err)})},$scope.saveBrand=function(brand,field){if(brand.name){var o={_id:brand._id};o[field]=brand[field],Brands.save({update:field},o,function(res){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})}},$scope.dropBrandCallback=function(brand){return console.log(brand),$timeout(function(){$scope.brands.forEach(function(brand,idx){brand.index=idx+1,Brands.save({update:"index"},brand)})},200),brand},$scope.addTag=function(brand,newTag){if(newTag.name){var tag={name:newTag.name.substring(0,25),brand:brand._id,actived:!0};newTag.name="",brand.tags.unshift(tag),BrandTags.save(tag,function(res){tag._id=res.id,Brands.save({update:"tags"},{_id:brand._id,tags:brand.tags.map(function(el){return el._id})},function(res){})})}},$scope.saveTag=function(tag,field){if(tag.name){var o={_id:tag._id};o[field]=tag[field],BrandTags.save({update:field},o,function(res){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)},function(err){})}},$scope.deleteTag=function(brand,idx){Confirm("Delete?").then(function(){return Stuff.getList({page:0,row:100},{brandTag:brand.tags[idx]._id})}).then(function(stuffs){if(stuffs&&stuffs.length){var s="привязаны товары";throw stuffs.forEach(function(st){s+=" "+st.name+" "+(st.artikul?st.artikul:"")+"|"}),s}}).then(function(){BrandTags.delete({id:brand.tags[idx]._id},function(res){brand.tags.splice(idx,1);Brands.save({update:"tags"},{_id:brand._id,tags:brand.tags.map(function(el){return el._id})},function(res){})},function(err){console.log(err)})}).catch(function(err){err&&exception.catcher("удаление")(err)})},$scope.dropTagCallback=function(tag,index,brand){return console.log(brand.tags.map(function(e){return e.name})),$timeout(function(){if(Brands.save({update:"tags"},{_id:brand._id,tags:brand.tags.map(function(el){return el._id})},function(res){}),tag.brand!=brand._id){brand.tags.forEach(function(tag,i){tag.index=i});var oldBrand=$scope.brands.getObjectFromArray("_id",tag.brand);Brands.save({update:"tags"},{_id:oldBrand._id,tags:oldBrand.tags.map(function(el){return el._id})},function(res){}),tag.brand=brand._id,BrandTags.save({update:"brand"},tag,function(res){})}},450),tag},$scope.tagMoved=function(brand,tag,idx){idx==tag.index?brand.tags.splice(idx,1):brand.tags.splice(idx+1,1),brand.tags.forEach(function(tag,i){tag.index=i})},$scope.selectCategory=function(id,revers){revers?SelectCategory.bindCategoryForFilterBrandCol(id,"categories",revers):SelectCategory.bindCategoryForFilterBrandCol(id,"brands")}}}}]).directive("brandEdit",function(){return{restrict:"E",templateUrl:"components/brand/brandEdit.html",scope:{},bindToController:!0,controller:brandEditCtrl,controllerAs:"$ctrl"}}).directive("brandTagEdit",brandTagEdit),brandEditCtrl.$inject=["$anchorScroll","Brands","global","$q","exception","$stateParams","$scope","$timeout"],brandTagEditCtrl.$inject=["BrandTags","$q","$state","global","$stateParams","$scope","$timeout"],angular.module("gmall.controllers").controller("stuffsFilterCtrl",["$scope","$resource","$rootScope","global","Stuff","$section","$location","$q","Collection","$anchorScroll","$timeout",function($scope,$resource,$rootScope,global,Stuff,$section,$location,$q,Collection,$anchorScroll,$timeout){function _getCollections(){var query={brand:$scope.stuffsFilterCtrl.query.brand,group:$scope.stuffsFilterCtrl.query.section};Collection.getCollectionsForBrand({query:query},function(res){if(res.shift(),$scope.stuffsFilterCtrl.brandCollections=res,$scope.stuffsFilterCtrl.brandCollections&&$stateParams.brandTag){var brandTag=$scope.stuffsFilterCtrl.brandCollections.getObjectFromArray("url",$stateParams.brandTag);brandTag?($scope.stuffsFilterCtrl.query.brandTag=brandTag._id,$location.search("brandTag",brandTag.url)):$location.search("brandTag",null)}})}function _getQueryTag(){var arr=[];return $scope.stuffsFilterCtrl.query.tags.forEach(function(tags){tags.length&&tags.forEach(function(tag){arr.push(tag)})}),arr.length?arr.map(function(tag){return global.get("filterTags").val.getObjectFromArray("_id",tag).url}).join("+"):void 0}function _getBrand(){if($scope.stuffsFilterCtrl.query.brand)return global.get("brands").val.getObjectFromArray("_id",$scope.stuffsFilterCtrl.query.brand).url}function _getBrandTag(){if($scope.stuffsFilterCtrl.query.brandTag)return $scope.stuffsFilterCtrl.brandCollections.getObjectFromArray("_id",$scope.stuffsFilterCtrl.query.brandTag).url}var $state=$rootScope.$state,$stateParams=$rootScope.$stateParams;$scope.stuffsFilterCtrl=this,$scope.stuffsFilterCtrl.paginate={page:0,rows:50,totalItems:0},$scope.stuffsFilterCtrl.query={section:"",brand:"",category:"",tags:[],artikul:$stateParams.searchStr?$stateParams.searchStr.clearTag(20):"",brandTag:""},$scope.stuffsFilterCtrl.categories=[];var queryTags,category;$scope.stuffsFilterCtrl.brands=[],$scope.stuffsFilterCtrl.brandCollections=[],$scope.stuffsFilterCtrl.filters=[],function(){var q=$q.defer();return q.resolve(),q.promise}().then(function(){var q=$q.defer();if("brand"!=$stateParams.groupUrl&&"group"!=$stateParams.groupUrl){var group=global.get("groups").val.getObjectFromArray("url",$stateParams.groupUrl);if(group){if($scope.stuffsFilterCtrl.query.section=group._id,$stateParams.parentGroup){var categories=$section.getCategories($stateParams.parentGroup).map(function(i){return i._id?i._id:i});categories&&($scope.stuffsFilterCtrl.categories=global.get("categories").val.filter(function(item){return categories.indexOf(item._id)>-1}))}q.resolve($scope.stuffsFilterCtrl.categories)}else $state.go("404")}else q.resolve(1);return q.promise}).then(function(r){var q=$q.defer();return $scope.stuffsFilterCtrl.categories.length&&$stateParams.categoryUrl?"id"!=$stateParams.categoryUrl&&(category=$scope.stuffsFilterCtrl.categories.getObjectFromArray("url",$stateParams.categoryUrl),category?$scope.stuffsFilterCtrl.query.category=category._id:$state.go("404")):"id"!=$stateParams.categoryUrl&&(category=global.get("categories").val.getObjectFromArray("url",$stateParams.categoryUrl))&&($scope.stuffsFilterCtrl.query.category=category._id,$scope.stuffsFilterCtrl.categories=$section.getCategories(category.group.url)),q.resolve(),q.promise}).then(function(){var q=$q.defer();if($scope.stuffsFilterCtrl.query.category&&($scope.stuffsFilterCtrl.brands=global.get("brands").val.getArrayObjects("categories",$scope.stuffsFilterCtrl.query.category)),1===$scope.stuffsFilterCtrl.brands.length)$scope.stuffsFilterCtrl.query.brand=$scope.stuffsFilterCtrl.brands[0]._id;else if($stateParams.brand){var brand=$scope.stuffsFilterCtrl.brands.getObjectFromArray("url",$stateParams.brand);brand&&($scope.stuffsFilterCtrl.query.brand=brand._id,$location.search("brand",brand.url))}return $scope.stuffsFilterCtrl.query.brand||$location.search("brand",null),q.resolve(),q.promise}).then(function(){var q=$q.defer();if($scope.stuffsFilterCtrl.query.brand){var query={brand:$scope.stuffsFilterCtrl.query.brand,group:$scope.stuffsFilterCtrl.query.section};Collection.getCollectionsForBrand({query:query},function(res){if(res.shift(),$scope.stuffsFilterCtrl.brandCollections=res,$stateParams.brandTag){var brandTag=$scope.stuffsFilterCtrl.brandCollections.getObjectFromArray("url",$stateParams.brandTag);brandTag?($scope.stuffsFilterCtrl.query.brandTag=brandTag._id,$location.search("brandTag",brandTag.url)):$location.search("brandTag",null)}q.resolve(1)},function(){q.resolve(3)})}else q.resolve(2);return q.promise}).then(function(){var q=$q.defer();return $stateParams.queryTag&&(queryTags=$stateParams.queryTag.split("+"),queryTags=queryTags.filter(function(item,pos){return queryTags.indexOf(item)==pos}),queryTags=queryTags.reduce(function(tags,tag){var t;return(t=global.get("filterTags").val.getObjectFromArray("url",tag))&&tags.push(t),tags},[])),q.resolve(),q.promise}).then(function(){var q=$q.defer();if($scope.stuffsFilterCtrl.query.category){var filters=global.get("filters").val.filter(function(item){return!item.dontshow&&category.filters.indexOf(item._id)>-1});filters.forEach(function(item,i){item.tags=[],global.get("filterTags").val.forEach(function(tag){tag.filter==item._id&&item.tags.push(tag)}),queryTags&&queryTags.length&&queryTags.forEach(function(tag){tag.filter==item._id&&($scope.stuffsFilterCtrl.query.tags[i]||($scope.stuffsFilterCtrl.query.tags[i]=[]),$scope.stuffsFilterCtrl.query.tags[i].push(tag._id))})}),$scope.stuffsFilterCtrl.filters=filters}else queryTags&&queryTags.length&&($scope.stuffsFilterCtrl.query.tags[0]=[queryTags[0]._id],$location.search("queryTag",queryTags[0].url));return q.resolve("finsh"),q.promise}).then(function(r){$scope.stuffsFilterCtrl.getList($scope.stuffsFilterCtrl.paginate.page,$scope.stuffsFilterCtrl.paginate.rows)});var prevBrand;$scope.stuffsFilterCtrl.getList=function(page,rows){prevBrand=$scope.stuffsFilterCtrl.query.brand;var query=[];global.get("nostore").val&&query.push({tags:{$nin:[global.get("nostore").val._id]}});var queryTag=[];for(var key in $scope.stuffsFilterCtrl.query)if($scope.stuffsFilterCtrl.query[key])if("tags"==key){var qu=[];$scope.stuffsFilterCtrl.query[key].filter(function(){return!0});$scope.stuffsFilterCtrl.query[key].forEach(function(obj,i){var q=[];obj&&obj.length&&(obj.forEach(function(objT){q.push({tags:objT})}),q.length>1?(q={$or:q},qu.push(q)):(q=q[0],qu.push(q)))}),qu.length&&(1==qu.length?query.push(qu[0]):query.push({$and:qu}))}else{var obj={};obj[key]=$scope.stuffsFilterCtrl.query[key],query.push(obj)}query=1==query.length?JSON.stringify(query[0]):query.length>1?JSON.stringify({$and:query}):"";var queryTag=_getQueryTag(),brandTag=_getBrandTag(),brand=_getBrand(),queryTagsForSEO="";queryTag&&(queryTagsForSEO+="queryTag="+queryTag),brand&&(queryTagsForSEO&&(queryTagsForSEO+="&"),queryTagsForSEO+="brand="+brand),brandTag&&(queryTagsForSEO&&(queryTagsForSEO+="&"),queryTagsForSEO+="brandTag="+brandTag),console.log(queryTagsForSEO),$rootScope.$broadcast("$allDataLoaded",{state:$state.current.name,data:queryTagsForSEO}),$scope.stuffsFilterCtrl.queryForDirective=query},$scope.stuffsFilterCtrl.changeFilter=function(c){$anchorScroll();var category=$scope.stuffsFilterCtrl.query.category?$scope.stuffsFilterCtrl.categories.getObjectFromArray("_id",$scope.stuffsFilterCtrl.query.category):{name:"category",url:"id"};if(c){$state.current.reloadOnSearch=!0;var o={groupUrl:$stateParams.groupUrl,categoryUrl:category.url,categoryName:category.name,queryTag:void 0,brand:void 0,brandTag:void 0};$state.go($state.current.name,o,{reload:!0}),$state.current.reloadOnSearch=!1}else{$location.search(""),$scope.stuffsFilterCtrl.query.artikul="",!$scope.stuffsFilterCtrl.query.brand||$scope.stuffsFilterCtrl.brandCollections&&prevBrand==$scope.stuffsFilterCtrl.query.brand?$scope.stuffsFilterCtrl.query.brand||($scope.stuffsFilterCtrl.brandCollections=null,$scope.stuffsFilterCtrl.query.brandTag=""):(_getCollections($scope.stuffsFilterCtrl.query.brand),$scope.stuffsFilterCtrl.query.brandTag=""),$scope.stuffsFilterCtrl.paginate.page=0,$scope.stuffsFilterCtrl.getList($scope.stuffsFilterCtrl.paginate.page,$scope.stuffsFilterCtrl.paginate.rows);var queryTag=_getQueryTag(),brandTag=_getBrandTag(),brand=_getBrand();queryTag&&$location.search("queryTag",queryTag),brandTag&&$location.search("brandTag",brandTag),brand&&$location.search("brand",brand),$stateParams.brandTag&&$location.search("brandTag",$stateParams.brandTag)}},$scope.stuffsFilterCtrl.clearFilter=function(){console.log("clear filetrs"),$scope.stuffsFilterCtrl.query.tags=[],$scope.stuffsFilterCtrl.changeFilter()}}]).controller("stuffsLWPCtrl",["$scope","$resource","$rootScope","global","Stuff","$section","$location","$q","Collection","$anchorScroll","$timeout",function($scope,$resource,$rootScope,global,Stuff,$section,$location,$q,Collection,$anchorScroll,$timeout){var $state=$rootScope.$state;$rootScope.$stateParams;$scope.stuffsLWPCtrl=this,$scope.stuffsLWPCtrl.query=null,$scope.stuffsLWPCtrl.paginate={page:0,rows:20,totalItems:0},$scope.stuffsLWPCtrl.query=null,$scope.stuffsLWPCtrl.getList=function(page,rows){Stuff.getList($scope.stuffsLWPCtrl.query,null,page,rows,$scope.stuffsLWPCtrl.paginate).then(function(res){$scope.stuffsLWPCtrl.items=res,$scope.stuffsLWPCtrl.query=null},function(err){$state.go("404")})},$scope.$watch(function(){return $scope.stuffsLWPCtrl.query},function(n){n&&($scope.stuffsLWPCtrl.paginate.page=0,$scope.stuffsLWPCtrl.getList($scope.stuffsLWPCtrl.paginate.page,$scope.stuffsLWPCtrl.paginate.rows))}),$timeout(function(){$scope.stuffsLWPCtrl.getList($scope.stuffsLWPCtrl.paginate.page,$scope.stuffsLWPCtrl.paginate.rows)}),$scope.getUrlParams=Stuff.getUrlParams,$scope.getCategoryName=Stuff.getCategoryName,$scope.getBrandName=Stuff.getBrandName}]),function(){function stuffService($resource,$uibModal,$q,Sections,$stateParams,$state,$location,Brands,FilterTags,global,$order,exception,$user,$email,CreateContent,$rootScope,Filters,$timeout){function _salePrice(doc,sale){if(doc.driveSalePrice&&doc.driveSalePrice.maxDiscount&&(doc.maxDiscount=doc.driveSalePrice.maxDiscount),doc.driveSalePrice&&0!=doc.driveSalePrice.type){if(2==doc.driveSalePrice.type){doc.priceSale=Math.ceil10(Number(doc.price)-sale*doc.price,-2);for(var key in doc.stock)doc.stock[key].priceSale=Math.ceil10(Number(doc.stock[key].price)-sale*doc.stock[key].price,-2)}else if(1==doc.driveSalePrice.type)if(doc.driveSalePrice.condition){sale=doc.driveSalePrice.percent/100,doc.priceSale=Math.ceil10(Number(doc.price)-sale*doc.price,-2);for(var key in doc.stock)doc.stock[key].priceSale=Math.ceil10(Number(doc.stock[key].price)-sale*doc.stock[key].price,-2)}else{sale=Number(doc.driveSalePrice.sum),doc.priceSale=Math.ceil10(Number(doc.price)-sale,-2);for(var key in doc.stock)doc.stock[key].priceSale=Math.ceil10(Number(doc.stock[key].price)-sale,-2)}}else{doc.priceSale=0;for(var key in doc.stock)doc.stock[key].priceSale=0}}function _retailPrice(doc,retail){if(doc.driveRetailPrice||(global.get("store").val.seller.retail?doc.driveRetailPrice={type:2}:doc.driveRetailPrice={type:0}),0==doc.driveRetailPrice.type){doc.retail=0;for(var key in doc.stock)doc.stock[key].retail=0}else if(2==doc.driveRetailPrice.type){doc.retail=Math.ceil10(Number(doc.price)+retail*Number(doc.price),-2);for(var key in doc.stock)doc.stock[key].retail=Math.ceil10(Number(doc.stock[key].price)+retail*doc.stock[key].price,-2)}else if(1==doc.driveRetailPrice.type)if(doc.driveRetailPrice.condition){retail=doc.driveRetailPrice.percent/100,doc.retail=Math.ceil10(Number(doc.price)+retail*doc.price,-2);for(var key in doc.stock)doc.stock[key].retail=Math.ceil10(Number(doc.stock[key].price)+retail*doc.stock[key].price,-2)}else{retail=Number(doc.driveRetailPrice.sum),doc.retail=Math.ceil10(Number(doc.price)+retail,-2);for(var key in doc.stock)doc.stock[key].retail=Math.ceil10(Number(doc.stock[key].price)+retail,-2)}}function _setPrice(doc){doc||(doc=this),doc.price<0&&(doc.price=0),doc.sort=null;var sale=(global.get("store").val.seller.sale||0)/100,retail=(global.get("store").val.seller.retail||0)/100,el=doc?doc:this;if(el.stock&&"object"==typeof el.stock?el.stock.notag&&(el.stock.notag.price=el.price):(el.stock={notag:{quantity:1,price:el.price}},el.sort="notag"),global.get("currency")&&el.currency&&global.get("store").val.mainCurrency!=el.currency){el.price=Math.ceil10(Number(el.price)/Number(global.get("store").val.currency[el.currency][0]),-2);for(var tag in el.stock)el.stock[tag].price=Math.ceil10(Number(el.stock[tag].price)/Number(global.get("store").val.currency[el.currency][0]),-2)}return _salePrice(el,sale),_retailPrice(el,retail),el}function _changeSortOfStuff(sort){if(this.stock[sort]?this.filterActiveTagName=this.stock[sort].name:this.filterActiveTagName="",!(this.stock&&sort&&this.stock[sort])||this.stock[sort].quantity)if(sort&&(this.sort=sort),this.sort){var sort=this.stock[this.sort];this.sortName=sort.name,this.price=sort.price,this.priceSale=sort.priceSale,this.retail=sort.retail,this.priceCampaign=sort.priceCampaign}else this.sortName=null,this.stock&&this.stock.notag||(this.price=0,this.priceSale=0,this.retail=0)}function _addItemToOrder(){var self=this;if(!this.sort)return this.unableToOrder=!0,$timeout(function(){self.unableToOrder=!1},2500),"nosort";this.sortsOfStuff&&this.sortsOfStuff.filter&&!this.sort?exception.catcher("ошибка")("выберите разновидность"):(this.stock[this.sort].name&&(this.sortName=this.stock[this.sort].name),$order.addItemToCart(this)),$rootScope.$emit("AddToCart")}function _dateTime(){var self=this;if(!this.sort)return this.unableToOrder=!0,$timeout(function(){self.unableToOrder=!1},2500),"nosort";global.get("functions").val.witget("dateTime",{stuff:this})}function _setSticker(stuff){return FilterTags.getSticker(stuff.tags)}function _checkInCart(){return $order.checkInCart(this)}function zoomImgGlobal(i,images,home){var img,horizontalOrient,squareH,squareV,w=Math.max(document.documentElement.clientWidth,window.innerWidth||0),h=Math.max(document.documentElement.clientHeight,window.innerHeight||0),imgs=$("img[src$='"+images[i].img+"']");if(imgs&&imgs[0]?(img=$(imgs[0]),img.width()&&img.height()&&(img.width()>img.height()&&(horizontalOrient=!0),(img.width()===img.height()||img.width()-img.height()<5)&&(w>h?squareH=!0:squareV=!0,horizontalOrient=!1))):(imgs=$("img[src$='"+images[i].thumb+"']"),imgs&&imgs[0]?(img=$(imgs[0]),img.width()&&img.height()&&(img.width()>img.height()&&(horizontalOrient=!0),(img.width()===img.height()||img.width()-img.height()<5)&&(horizontalOrient=!1,w>h?squareH=!0:squareV=!0))):images[i].el&&images[i].el.width&&images[i].el.height&&(images[i].el.width>images[i].el.height&&(horizontalOrient=!0),(images[i].el.width===images[i].el.height||images[i].el.width-images[i].el.height<5)&&(horizontalOrient=!1,w>h?squareH=!0:squareV=!0))),!delay){delay=!0,$timeout(function(){delay=!1},1e3);var content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no",viewPort=document.getElementById("viewport"),templ=global.get("store").val.template.addcomponents&&global.get("store").val.template.addcomponents.zoom&&global.get("store").val.template.addcomponents.zoom.templ?global.get("store").val.template.addcomponents.zoom.templ:"",templateUrl="views/template/partials/stuffDetail/modal/zoom"+templ+".html";viewPort.setAttribute("content","width=device-width, initial-scale=1, maximum-scale=3"),$rootScope.$emit("modalOpened");var options={animation:!0,bindToController:!0,controllerAs:"$ctrl",windowClass:function(){return squareH?"zoom zoom-modal-squareH":squareV?"zoom zoom-modal-squareV":horizontalOrient?"zoom zoom-modal-horizontal":"zoom zoom-modal-vertical"},templateUrl:templateUrl,controller:function($uibModalInstance,global,gallery,i,home,horizontalOrient){function next(i){delay||(delay=!0,i+1==self.gallery.length?(self.gallery[0].active=!0,self.idx=0):(self.gallery[i+1].active=!0,self.idx=i+1),$timeout(function(){delay=!1},500))}function prev(i){delay||(delay=!0,0==i?(self.gallery[self.gallery.length-1].active=!0,self.idx=self.gallery.length-1):(self.gallery[i-1].active=!0,self.idx=i-1),$timeout(function(){delay=!1},500))}function chancheActiveSlide(i){self.gallery[i].active=!0,self.idx=i}var self=this;self.style=home?horizontalOrient?"width:98vw;height:auto":"height:93vh;width:auto":"width:100%",self.modal=global.get("mobile").val,self.idx=i,
self.gallery=angular.copy(gallery),self.gallery[i].active=!0,self.next=next,self.prev=prev,self.chancheActiveSlide=chancheActiveSlide;var delay=!1;self.ok=function(){$uibModalInstance.close()},self.cancel=function(){$uibModalInstance.dismiss()}},resolve:{gallery:function(){return images},i:function(){return i},home:function(){return home},horizontalOrient:horizontalOrient}};home||(options.size="lg"),$q.when().then(function(){return $uibModal.open(options).result}).then(function(res){viewPort.setAttribute("content",content),$rootScope.$emit("modalClosed")}).catch(function(err){viewPort.setAttribute("content",content),$rootScope.$emit("modalClosed"),err&&"backdrop click"!=err&&(err=err.data||err,exception.catcher("zoom")(err))})}}function _zoomImg(i){zoomImgGlobal(i,this.gallery)}function _setCategoryName(item){if(item.category&&item.category._id&&(item.category=[item.category]),item.category&&item.category.length)for(var i=0,c=null;i<item.category.length&&!c;)"object"==typeof item.category[i]&&(item.category[i]=item.category[i]._id),global.get("categoriesO").val[item.category[i]]&&(c=global.get("categoriesO").val[item.category[i]]),i++;if(global.get("categories").val&&(c||(c=categoriesLink[item.category]?categoriesLink[item.category]:global.get("categories").val.getOFA("_id",item.category)),c?(item.categoryUrl=c.url,item.categoryName=c.name,c.linkData?(item.groupUrl=c.linkData.groupUrl,item.parentGroup=c.linkData.parentGroup||null):(item.groupUrl="group",item.categoryUrl="category",item.parentGroup=null)):(item.groupUrl="group",item.categoryUrl="category")),item.brand&&global.get("brands")&&global.get("brands").val){"object"==typeof item.brand&&(item.brand=item.brand._id);var b=global.get("brands").val.getOFA("_id",item.brand);if(b)if(item.brandUrl=b.url,item.brandName=b.name,item.brandTag&&!item.brandTag._id){var bt=b.tags.getOFA("_id",item.brandTag);bt&&(item.brandTagUrl=bt.url,item.brandTagName=bt.name)}else item.brandTag&&item.brandTag._id&&(item.brandTagUrl=item.brandTag.url,item.brandTagName=item.brandTag.name)}}function _setDataForStuff(stuff,filterTags,stuffsState){if(stuff.changeSortOfStuff=_changeSortOfStuff,stuff.addItemToOrder=_addItemToOrder,stuff.dateTime=_dateTime,stuff.onSelected=_onSelectedSort,stuff.order=_orderStuff,stuff.getBonus=_getBonus,stuff.zoomImg=_zoomImg,stuff.checkInCart=_checkInCart,stuff.getDataForBooking=_getDataForBooking,_setCategoryName(stuff),_setPrice(stuff),stuff.setPrice=_setPrice,stuff.multiple&&stuff.minQty?stuff.quantity=Number(stuff.minQty):(stuff.quantity=1,stuff.minQty=1),stuff.single||(stuff.maxQty=150),stuff.sale||_checkCamapign(stuff),stuff.expected=!0,stuff.stock&&"object"==typeof stuff.stock&&!stuff.stock.notag){if(stuff.sortsOfStuff&&stuff.sortsOfStuff.filterGroup&&global.get("filtersO")&&global.get("filtersO").val&&global.get("filtersO").val[stuff.sortsOfStuff.filterGroup]){var filterGroupTags,filterGroup=global.get("filtersO").val[stuff.sortsOfStuff.filterGroup];if(filterGroup){stuff.sortsOfStuff.name=filterGroup.name.charAt(0).toUpperCase()+filterGroup.name.slice(1).toLowerCase(),stuff.groupName=stuff.sortsOfStuff.name,filterGroupTags=filterGroup.tags.map(function(t){return t._id});for(var ii=0;ii<stuff.tags.length;ii++){var idx=filterGroupTags.indexOf(stuff.tags[ii]);if(idx>-1){stuff.groupTagName=filterGroup.tags[idx].name.charAt(0).toUpperCase()+filterGroup.tags[idx].name.slice(1).toLowerCase();break}}}}if(stuff.sortsOfStuff&&stuff.sortsOfStuff.filter&&global.get("filtersO")&&global.get("filtersO").val&&global.get("filtersO").val[stuff.sortsOfStuff.filter]&&(stuff.filterName=global.get("filtersO").val[stuff.sortsOfStuff.filter].name.toLowerCase(),stuff.filterName=stuff.filterName.charAt(0).toUpperCase()+stuff.filterName.slice(1).toLowerCase()),stuff.sortsOfStuff&&stuff.sortsOfStuff.stuffs)for(var i21=0;i21<stuff.sortsOfStuff.stuffs.length;i21++)if(stuff.sortsOfStuff.stuffs[i21]._id!=stuff._id&&stuff.sortsOfStuff.stuffs[i21].archived)stuff.sortsOfStuff.stuffs.splice(i21,1),i21--;else if(stuff.sortsOfStuff.stuffs[i21].stock&&"object"==typeof stuff.sortsOfStuff.stuffs[i21].stock)for(var k in stuff.sortsOfStuff.stuffs[i21].stock)stuff.sortsOfStuff.stuffs[i21].stock[k].quantity&&(stuff.sortsOfStuff.stuffs[i21].stock[k].quantity=Number(stuff.sortsOfStuff.stuffs[i21].stock[k].quantity));var keys=Object.keys(stuff.stock);stuff.stockKeysArray=keys.map(function(k){if(stuff.stock[k].quantity=Number(stuff.stock[k].quantity),global.get("filterTagsO")&&global.get("filterTagsO").val&&global.get("filterTagsO").val[k])var tag=global.get("filterTagsO").val[k];else var tag=filterTags.getOFA("_id",k);return tag?{_id:k,index:tag.index,name:tag.name,quantity:Number(stuff.stock[k].quantity)}:null}).filter(function(key){return key}).sort(function(a,b){return a&&b?a.index-b.index:1});var sort_Id=null;stuff.stockKeysArray.forEach(function(key){stuff.minPrice||(stuff.minPrice=Number(stuff.stock[key._id].price)),stuff.maxPrice||(stuff.maxPrice=Number(stuff.stock[key._id].price)),Number(stuff.stock[key._id].price)<stuff.minPrice&&(stuff.minPrice=Number(stuff.stock[key._id].price)),Number(stuff.stock[key._id].price)>stuff.maxPrice&&(stuff.maxPrice=Number(stuff.stock[key._id].price)),stuff.stock[key._id].priceSale&&(stuff.minPriceSale||(stuff.minPriceSale=Number(stuff.stock[key._id].priceSale)),stuff.maxPriceSale||(stuff.maxPriceSale=Number(stuff.stock[key._id].priceSale)),Number(stuff.stock[key._id].priceSale)<stuff.minPriceSale&&(stuff.minPriceSale=Number(stuff.stock[key._id].priceSale)),Number(stuff.stock[key._id].priceSale)>stuff.maxPriceSale&&(stuff.maxPriceSale=Number(stuff.stock[key._id].priceSale))),stuff.sort||global.get("sectionType")&&global.get("sectionType").val&&global.get("store").val.template.stuffListType[global.get("sectionType").val].unsetSort&&"stuffs.stuff"==$state.current.name&&!stuffsState||("stuffs"===$state.current.name||"likes"===$state.current.name?global.get("sectionType")&&global.get("sectionType").val&&global.get("store").val.template.stuffListType[global.get("sectionType").val].unsetSortList||!sort_Id&&stuff.stock[key._id].quantity&&(sort_Id=key._id,stuff.sort=sort_Id):!sort_Id&&stuff.stock[key._id].quantity&&(sort_Id=key._id,stuff.sort=sort_Id)),key.quantity=Number(stuff.stock[key._id].quantity),key.quantity&&stuff.expected&&(stuff.expected=!1),key.quantity&&(stuff.multiple&&stuff.minQty?key.quantity=Number(stuff.minQty):(key.quantity=1,stuff.minQty=1)),stuff.stock[key._id].name=key.name,key._id==stuff.sort&&(stuff.filterActiveTagName=stuff.stock[key._id].name)}),stuff.stockKeysArray.length&&sort_Id&&_changeSortOfStuff.call(stuff,sort_Id)}else stuff.stock&&"object"==typeof stuff.stock&&stuff.stock.notag&&(stuff.stock.notag.quantity&&(stuff.sort="notag",stuff.expected=!1),stuff.stockKeysArray=[{name:"notag",_id:"notag",quantity:stuff.stock.notag.quantity}]);if(stuff.campaignId||(stuff.sticker=_setSticker(stuff)),stuff.gallery&&stuff.gallery.length&&stuff.gallery.sort(function(a,b){return a.index-b.index}),!stuffsState&&"undefined"!=typeof _filtersO&&stuff.sortsOfStuff&&stuff.sortsOfStuff.stuffs&&stuff.sortsOfStuff.stuffs.length){var filterGroup,filterGroupTags=[];stuff.sortsOfStuff.filterGroup&&(filterGroup=_filtersO[stuff.sortsOfStuff.filterGroup])&&(filterGroupTags=filterGroup.tags.map(function(t){return t._id})),stuff.sortsOfStuff.stuffs.forEach(function(itemS,i){itemS.gallery.forEach(function(s,ii){s.active=!ii});for(var ii=0;ii<itemS.tags.length;ii++){var idx=filterGroupTags.indexOf(itemS.tags[ii]);if(idx>-1){itemS._id===stuff._id&&(stuff.sortsOfStuff.filterActiveTagName=filterGroup.tags[idx].name),filterGroup.tags[idx].img&&(stuff.sortsOfStuff.stuffs[i].gallery[0].thumbSmallTag=filterGroup.tags[idx].img);break}}})}return stuff}function _onSelectedSort(){setTimeout(function(){$(":focus").blur()},50)}function _orderStuff(){var stuff=this;$order.clearCart(),stuff.cena=stuff.price,stuff.sum=stuff.cena*stuff.quantity,"nosort"!=stuff.addItemToOrder()&&$q.when().then(function(){return $user.getInfo(stuff.service)}).then(function(user){return $order.checkOutFromList(user)}).then(function(){$order.clearCart()}).catch(function(err){$order.clearCart(),err&&exception.catcher("заказ")(err)})}function getAllBonus(){return _getBonus(!0)}function _getBonus(all){var stuffs,stuff=this;return $q.when().then(function(){if(all){return getList({page:0,rows:100},{$and:[{orderType:4},{actived:!0}]})}return[stuff]}).then(function(sts){stuffs=sts}).then(function(){return $user.getInfoBonus()}).then(function(user){if(!user||!user.email)throw"нет email";var content=CreateContent.emailBonus(stuffs),bonus=stuffs&&stuffs[0]&&stuffs[0].imgs&&stuffs[0].imgs[0]&&stuffs[0].imgs[0].name?stuffs[0].imgs[0].name:"получение контента",domain=global.get("store").val.domain,o={email:user.email,content:content,subject:bonus+" ✔",from:"<promo@"+domain+">"};return $q(function(resolve,reject){$email.save(o,function(res){exception.showToaster("note","Сообщение","На Ваш email отправлено письмо"),resolve()},function(err){exception.showToaster("warning","отправка уведомления",err.data),resolve()})})}).then(function(){var states=$state.get();if(global.get("paps")&&states.some(function(state){return"thanksPage"==state.name})){var pap=global.get("paps").val.getOFA("action","bonus");pap&&pap.url?$state.go("thanksPage",{id:pap.url}):exception.showToaster("note","Заказ","Все прошло успешно.")}else exception.showToaster("note","Заказ","Все прошло успешно.")}).catch(function(err){err&&exception.catcher("получение бонуса")(err)})}function _checkCamapign(stuff){return $order.checkCampaign(stuff)}function _getDataForBooking(){var el=this,stuff={_id:this._id,artikul:this.artikul,name:this.name,nameL:this.nameL,link:this.link,backgroundcolor:this.backgroundcolor,timePart:el.timePart?el.timePart:4,price:this.price,priceSale:this.priceSale,currency:this.currency};return el.sort&&(stuff.price=el.stock[el.sort].price,stuff.priceSale=el.stock[el.sort].priceSale,stuff.timePart=el.stock[el.sort].timePart?el.stock[el.sort].timePart:4),el.sortName&&(stuff.name=el.name+" "+el.sortName),stuff}function getList(paginate,query,search){function getListComplete(response){0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0);var maxIndex;return $q.when().then(function(){return FilterTags.getFilterTags()}).then(function(ft){response.forEach(function(el){99999==el.index&&maxIndex&&el.index--,99999==el.index&&(maxIndex=!0),_setDataForStuff(el,ft)})}).then(function(){return response})}function getListFailed(error){return console.log("XHR Failed for getStuffs."+error),$q.reject(error)}paginate||(paginate={page:0});var data={perPage:paginate.rows,page:paginate.page,query:query,search:search};return global.get("crawler")&&global.get("crawler").val&&(data.subDomain=global.get("store").val.subDomain),Items.query(data).$promise.then(getListComplete).catch(getListFailed)}function search(search,setData){function getListComplete(response){return setData?$q.when().then(function(){return FilterTags.getFilterTags()}).then(function(ft){response.forEach(function(el){99999==el.index&&maxIndex&&el.index--,99999==el.index&&(maxIndex=!0),_setDataForStuff(el,ft)})}).then(function(){return response}):response}function getListFailed(error){return console.log("XHR Failed for getStuffs."+error),$q.reject(error)}var data={search:search,setData:setData};return Items.query(data).$promise.then(getListComplete).catch(getListFailed)}function getItem(id,o){function getItemComplete(res){return $q.when().then(function(){return FilterTags.getFilterTags()}).then(function(ft){return _setDataForStuff(res,ft),res})}function getItemFailed(error){return $q.reject(error)}var query={_id:id};if(o)for(var k in o)query[k]=o[k];return Items.get(query).$promise.then(getItemComplete).catch(getItemFailed)}function create(){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/stuff/createStuff.html",controller:function($uibModalInstance){var self=this;self.item="",self.ok=function(){$uibModalInstance.close(self.item)},self.cancel=function(){$uibModalInstance.dismiss()}},controllerAs:"$ctrl"}).result.then(function(item){item.name?resolve(item):reject()},function(err){reject(err)})})}function getQueryFromUrl(campaignCondition){function setQueryForCampaign(campaign,campaignCondition){var query={};return $q.when().then(function(){return FilterTags.getFilterTags()}).then(function(filterTags){campaignCondition?(campaign.conditionTags&&campaign.conditionTags.length&&(query.queryTags={},campaign.conditionTags.forEach(function(tag){var t=filterTags.getOFA("_id",tag);t&&(query.queryTags[t.filter]||(query.queryTags[t.filter]=[]),query.queryTags[t.filter].push(t._id))})),campaign.conditionBrandTags&&campaign.conditionBrandTags.length&&(query.brandTag={$in:campaign.conditionBrandTags}),campaign.conditionBrands&&campaign.conditionBrands.length&&(query.brand={$in:campaign.conditionBrands}),campaign.conditionCategories&&campaign.conditionCategories.length&&(query.category={$in:campaign.conditionCategories}),campaign.conditionStuffs&&campaign.conditionStuffs.length&&(query._id={$in:campaign.conditionStuffs})):(campaign.tags&&campaign.tags.length&&(query.queryTags={},campaign.conditionTags.forEach(function(tag){var t=filterTags.getOFA("_id",tag);t&&(query.queryTags[t.filter]||(query.queryTags[t.filter]=[]),query.queryTags[t.filter].push(t._id))})),campaign.brandTags&&campaign.brandTags.length&&(query.brandTag={$in:campaign.brandTags}),campaign.brands&&campaign.brands.length&&(query.brand={$in:campaign.brands}),campaign.categories&&campaign.categories.length&&(query.category={$in:campaign.categories}),campaign.stuffs&&campaign.stuffs.length&&(query._id={$in:campaign.stuffs})),_setQueryForTags(query);var keys=Object.keys(query),q={};if(1==keys.length)q=query;else if(keys.length>1){q.$or=[];for(var k in query){var o={};o[k]=query[k],q.$or.push(o)}}return q.actived=!0,q})}return"campaign.detail"==$state.current.name?$q.when().then(function(){return global.get("campaign").val}).then(function(campaigns){var campaign=campaigns.getOFA("url",$stateParams.id);if(campaign)return setQueryForCampaign(campaign,campaignCondition)}):queryData}function getQuery(stateParams,to){return _setQuery(stateParams,to)}function _setQueryForTags(query,filters){if(query.queryTags&&"object"==typeof query.queryTags){try{var keys=Object.keys(query.queryTags)}catch(err){keys=[]}1==keys.length?query.tags={$in:query.queryTags[keys[0]]}:keys.length>1&&(query.$and=[],keys.forEach(function(k){query.$and.push({tags:{$in:query.queryTags[k]}})}))}if(delete query.queryTags,query.filters&&"object"==typeof query.filters){try{var keys=Object.keys(query.filters)}catch(err){keys=[]}if(1==keys.length){var filter;filters&&(filter=filters.getOFA("_id",keys[0])),filter&&filter.price?(query.priceForFilter=query.filters[keys[0]],console.log("query.filters[keys[0]]",query.filters[keys[0]])):query["filters."+keys[0]]=query.filters[keys[0]]}else if(keys.length>1&&(query.$and||(query.$and=[]),keys.forEach(function(k){var filter;if(filters&&(filter=filters.getOFA("_id",k)),filter&&filter.price)query.priceForFilter=query.filters[k];else{var o={};o["filters."+k]=query.filters[k],query.$and.push(o)}}),1==query.$and.length)){for(var k in query.$and[0])query[k]=query.$and[0][k];delete query.$and}}delete query.filters}function _setQuery(stateParams,to){global.set("category",null);var parentSection,sectionCategories,categoryBrands=[],categoryFilters=[],query={},breadcrumbs=[];return $q(function(resolve,reject){$q.when().then(function(){return $q.all([Sections.getSections(),Brands.getBrands(),Filters.getFilters()])}).then(function(data){var sections=data[0],brands=data[1],filters=data[2];if(parentSection=Sections.getSection(sections,stateParams.groupUrl),global.set("parentSection",parentSection),parentSection)if("category"!=stateParams.categoryUrl){if(!parentSection.categories||!parentSection.categories.length)throw 404;var categorySet;if(parentSection.categories.forEach(function(c){c.url==stateParams.categoryUrl?(global.set("category",c),categorySet=!0,c.set=!0,query.category=c._id,categoryBrands=c.brands,categoryFilters=c.filters):c.set=!1}),!query.category)throw 404}else sectionCategories=Sections.getEmbededCategories(parentSection,[]).map(function(el){return el._id}),sectionCategories.length?(query.category={$in:sectionCategories},sectionCategories.forEach(function(cat){var c=global.get("categoriesO").val[cat];parentSection&&parentSection.filters&&(categoryFilters=parentSection.filters),c.brands.forEach(function(b){categoryBrands.indexOf(b)<0&&categoryBrands.push(b)})})):query.category=null;var brandSet,brandTagSet,brandsArr,brandTagsArr;stateParams.brand&&(brandsArr=stateParams.brand.split("__")),stateParams.brandTag&&(brandTagsArr=stateParams.brandTag.split("__")),query.brand=[],query.brandTag=[],brands.forEach(function(b){b.inList=!1,b.showCollections=!1,"stuffs"==to.name||"stuffs.stuff"==to.name?categoryBrands&&categoryBrands.length&&categoryBrands.indexOf(b._id)>-1&&(b.inList=!0):b.inList=!0,brandsArr&&brandsArr.indexOf(b.url)>-1?(query.brand.push(b._id),b.set=!0,breadcrumbs.push({type:"brand",name:b.name,url:b.url}),brandSet=!0):b.set=!1,b.tags.forEach(function(t){brandTagsArr&&brandTagsArr.indexOf(t.url)>-1?(query.brandTag.push(t._id),t.set=!0,breadcrumbs.push({type:"brandTag",name:t.name,url:t.url}),b.showCollections=!0,brandTagSet=!0):t.set=!1})}),query.brand.length?1==query.brand.length?query.brand=query.brand[0]:query.brand={$in:query.brand}:query.brand=null,query.brandTag.length?1==query.brandTag.length?query.brandTag=query.brandTag[0]:query.brandTag={$in:query.brandTag}:query.brandTag=null,query.brandTag||delete query.brandTag,query.brand||delete query.brand,brandSet||$location.search("brand",null),brandTagSet||$location.search("brandTag",null);var queryTags;stateParams.queryTag&&(queryTags=stateParams.queryTag.split("__"),queryTags=queryTags.filter(function(item,pos){return queryTags.indexOf(item)==pos})),query.filters={};var filterTags;if(stateParams.filterTag&&(filterTags=stateParams.filterTag.split("__"),filterTags=filterTags.filter(function(item,pos){return filterTags.indexOf(item)==pos}),filterTags=filterTags.map(function(f){return f.split("_")}).filter(function(f){return 3==f.length}).forEach(function(f){query.filters[f[0]]={$gte:Number(f[1]),$lte:Number(f[2])}})),query.queryTags={},filters.forEach(function(f){f.inList=!1,"stuffs"==to.name||"stuffs.stuff"==to.name?categoryFilters.indexOf(f._id)>-1&&(f.inList=!0,f.open=!1):f.inList=!0,categoryFilters&&categoryFilters.length&&categoryFilters.indexOf(f._id)>-1&&(f.inList=!0,f.open=!1),f.count?query.filters[f._id]?(f.open=!0,f.set=!0,f.minValue=query.filters[f._id].$gte,f.maxValue=query.filters[f._id].$lte):(f.minValue=f.min,f.maxValue=f.max):f.tags.forEach(function(t){queryTags&&queryTags.indexOf(t.url)>-1?(query.queryTags[t.filter]||(query.queryTags[t.filter]=[]),query.queryTags[t.filter].push(t._id),f.open=!0,t.set=!0,breadcrumbs.push({type:"queryTag",name:t.name,url:t.url})):t.set=!1})}),_setQueryForTags(query,filters),global.set("breadcrumbs",breadcrumbs),"stuffs"!=to.name&&"stuffs.stuff"!=to.name||(query.actived=!0),stateParams.searchStr){var search=stateParams.searchStr.substring(0,20);query["keywords."+global.get("store").val.lang]=search}resolve(query)}).catch(function(err){reject(err)})})}function setFilters(){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/stuff/filterStuffsList.html",controller:setFiltersCtrl,controllerAs:"$ctrl",windowClass:"modalProject",backdropClass:"modalBackdropClass"}).result.then(function(){resolve()},function(){reject()})})}function cloneStuff(stuff,clone){if(global.get("seller").val)return $q.when().then(function(){if(stuff&&stuff._id)return Items.get({_id:stuff._id,clone:"clone"}).$promise;if($stateParams&&"category"!=$stateParams.categoryUrl){var category=global.get("categories").val.getOFA("url",$stateParams.categoryUrl);category&&category._id&&(stuff.category=category)}return stuff}).then(function(st){return console.log(st),stuff=angular.copy(st),stuff.category&&!stuff.category.length&&(stuff.category=[stuff.category]),stuff.index||(stuff.index=0),stuff.index++,delete stuff._id,delete stuff.url,delete stuff.link,delete stuff.__v,delete stuff.nameL,delete stuff.artikulL,delete stuff.gallery,delete stuff.sort,delete stuff.sortsOfStuff,delete stuff.keywords,delete stuff.groupStuffs,stuff.blocks&&stuff.blocks.length&&stuff.blocks.forEach(function(b){delete b._id,b.template=null,b.templateName=null,b.img&&(b.img=null),b.video&&(b.video=null),b.imgs&&(b.imgs=[])}),stuff.stock={notag:{price:stuff.price}},stuff.actived=!1,$q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/stuff/cloneStuffModal.html",controller:cloneStuffCtrl,controllerAs:"$ctrl",size:"lg",resolve:{stuff:function(){return stuff},clone:function(){return clone}}}).result.then(function(stuff){resolve(stuff)},function(){reject()})})})}function saveField(stuff,field){var f=field.split(" "),o={_id:stuff._id};return f.forEach(function(el){o[el]=stuff[el]}),Items.save({update:field},o).$promise}function selectItem(query){return console.log("внимание - сделать так же как и  selectItemWithSort"),$q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/stuff/modal/selectStuffModal.html",controller:selectStuffCtrl,controllerAs:"$ctrl",size:"lg",resolve:{query:function(){return query}}}).result.then(function(stuff){resolve(stuff)},function(){reject()})})}function selectItemWithSort(query){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/stuff/modal/selectStuffWithSortModal.html",controller:selectItemWithSortCtrl,controllerAs:"$ctrl",size:"lg",resolve:{query:function(){return query}}}).result.then(function(stuff){resolve(stuff)},function(){reject()})})}function getServicesForOnlineEntry(){function getListComplete(data){data.shift();var items=[];return data.forEach(function(el){_setPrice(el),el.sort=null;var category=el.category&&el.category.length?el.category[0]:el.category;if(global.get("categoriesO")&&global.get("categoriesO").val)var c=global.get("categoriesO").val[category];else var c=global.get("categories").val.getOFA("_id",category);c||(c={name:"Категория"}),el.category=c.name,el.timePart||(el.timePart=4);try{if(el.sortsOfStuff&&el.sortsOfStuff.differentPrice)for(var sort in el.stock){var s={_id:el._id,name:el.name+" "+_getTagName(sort),nameL:el.nameL,link:el.link,artikul:el.artikul,price:el.stock[sort].price,category:el.category,timePart:el.timePart};items.push(s)}else{if(el.stock.notag)el.price=el.stock.notag.price;else try{el.price=el.stock[Object.keys(el.stock)[0]].price}catch(err){console.log(err)}items.push(el)}}catch(err){console.log(err)}}),stuffsService=items,items}function getListFailed(error){return console.log("XHR Failed for getStuffs."+error),$q.reject(error)}function _getTagName(_id){return _id&&filterTags&&"notag"!=_id&&_filterTagsO[_id]?_filterTagsO[_id].name:""}if(stuffsService&&stuffsService.length)return stuffsService;var data={query:{orderType:{$in:[2,7]},actived:!0}},filterTags=[];return global.get("crawler")&&global.get("crawler").val&&(data.subDomain=global.get("store").val.subDomain),$q.when().then(function(){return FilterTags.getFilterTags()}).then(function(fts){filterTags=fts}).then(function(){return Items.query(data).$promise}).then(getListComplete).catch(getListFailed)}var Items=$resource("/api/collections/Stuff/:_id",{_id:"@_id"}),categoriesLink={},queryData={},stuffsService=[];return $rootScope.$on("$stateChangeStart",function(event,to,toParams,fromState,fromParams){"stuffs"!=to.name&&"stuffs.stuff"!=to.name&&"frame.stuffs"!=to.name&&"frame.stuffs.stuff"!=to.name||$q.when().then(function(){return getQuery(toParams,to)}).then(function(query){queryData=query})}),{Items:Items,query:Items.query,get:Items.get,getList:getList,search:search,getItem:getItem,save:Items.save,delete:Items.delete,create:create,getQuery:getQuery,getQueryFromUrl:getQueryFromUrl,setFilters:setFilters,cloneStuff:cloneStuff,saveField:saveField,selectItem:selectItem,select:selectItem,selectItemWithSort:selectItemWithSort,getServicesForOnlineEntry:getServicesForOnlineEntry,getAllBonus:getAllBonus,zoomImg:zoomImgGlobal,setDataForStuff:_setDataForStuff,getDataForBooking:_getDataForBooking};var delay}function setFiltersCtrl(global,$uibModalInstance){var self=this;self.global=global,self.cancel=function(){$uibModalInstance.dismiss()},self.ok=function(){$uibModalInstance.close()}}function cloneStuffCtrl($q,global,Stuff,stuff,$uibModalInstance,Category,clone){var self=this;self.Items=Stuff;self.stuff=stuff,self.clone=clone,self.categoryDisabled=!0,self.selectCategory=function(){$q.when().then(function(){return Category.select()}).then(function(selectedCategory){self.stuff.category||(self.categoryDisabled=!1,setTimeout(function(){$("#createStuffCategory").trigger("change"),self.categoryDisabled=!0},100)),self.stuff.category=selectedCategory}).catch(function(err){console.log(err)})},self.createNewStuff=function(){return self.stuff.category?self.stuff.name?(self.stuff.name=self.stuff.name.substring(0,100),self.stuff.artikul&&(self.stuff.artikul=self.stuff.artikul.substring(0,100)),!self.clone&&self.stuff.category&&self.stuff.category._id&&(self.stuff.category=self.stuff.category._id),stuff.stock&&stuff.stock.notag&&stuff.stock.notag.price!=stuff.price&&(stuff.stock.notag.price=stuff.price),void $q.when().then(function(){self.stuff.keywords={};var k=self.stuff.name;if(self.stuff.artikul&&(k+=" "+self.stuff.artikul),self.stuff.category){var c;if("object"==typeof self.stuff.category){var cc="object"==typeof self.stuff.category[0]?self.stuff.category[0]._id:self.stuff.category[0];c=global.get("categories").val.getOFA("_id",cc)}else c=global.get("categories").val.getOFA("_id",self.stuff.category);k+=" "+(c.nameL&&c.nameL[global.get("store").val.lang]?c.nameL[global.get("store").val.lang]:c.name)}if(self.stuff.brand){var bb="object"==typeof self.stuff.brand?self.stuff.brand._id:self.stuff.brand,b=global.get("brands").val.getOFA("_id",bb);if(k+=" "+(b.nameL&&b.nameL[global.get("store").val.lang]?b.nameL[global.get("store").val.lang]:b.name),self.stuff.brandTag){var bt=b.tags.getOFA("_id",self.stuff.brandTag);bt&&bt.nameL&&bt.nameL[global.get("store").val.lang]&&(k+=" "+bt.nameL[global.get("store").val.lang])}}return stuff.keywords[global.get("store").val.lang]=k,self.Items.save(self.stuff).$promise}).then(function(res){self.stuff._id=res.id,self.stuff.url=res.url;var c;if("object"==typeof self.stuff.category){var cc="object"==typeof self.stuff.category[0]?self.stuff.category[0]._id:self.stuff.category[0];c=global.get("categories").val.getOFA("_id",cc)}else c=global.get("categories").val.getOFA("_id",self.stuff.category);self.stuff.link="/"+c.linkData.groupUrl+"/"+c.linkData.categoryUrl+"/"+res.url,self.Items.save({update:"link"},{_id:self.stuff._id,link:self.stuff.link}),$uibModalInstance.close(self.stuff)}).catch(function(err){return $q.reject(err)})):(self.alertMessage2=!0,void setTimeout(function(){self.alertMessage2=!1},3e3)):(self.alertMessage2=!0,void setTimeout(function(){console.log("))))"),self.alertMessage2=!1},3e3))},self.cancel=function(){$uibModalInstance.dismiss("cancel")}}function selectStuffCtrl($q,Stuff,$uibModalInstance,query){var self=(angular.copy(query),this);self.stuffs=[],self.name="";self.search=function(name){name.length<3||(query?(query.$and||(query={$and:[query]}),query.$and.push({$or:[{name:name},{artikul:name}]})):query={$or:[{name:name},{artikul:name}]},$q.when().then(function(){return Stuff.search(name,!0)}).then(function(res){self.stuffs=res}))},self.selectStuff=function(stuff){stuff.imgThumb&&(stuff.img=stuff.imgThumb),stuff.link="/"+stuff.groupUrl+"/"+stuff.categoryUrl+"/"+stuff.url,$uibModalInstance.close(stuff)},self.cancel=function(){$uibModalInstance.dismiss()}}function selectItemWithSortCtrl($q,Stuff,$uibModalInstance,Filters,FilterTags,exception,query,global){function getFilterName(_id){return self.filters.getOFA("_id",_id).name||null}var self=(angular.copy(query),this);self.global=global,self.stuffs=[],self.name="";self.getFilterName=getFilterName,self.search=function(name){name.length<3||$q.when().then(function(){return Stuff.search(name,!0)}).then(function(res){global.get("seller")&&global.get("seller").val?self.stuffs=res:self.stuffs=res.map(function(s){for(var i=0;i<s.stockKeysArray.length;i++)s.stockKeysArray[i].quantity||(s.stockKeysArray.splice(i,1),i--);return s}).filter(function(s){return s.actived&&s.stockKeysArray.length})})},self.selectStuff=function(stuff){stuff.sortsOfStuff&&stuff.sortsOfStuff.filter&&!stuff.sort?exception.catcher("ошибка")("выберите разновидность"):$uibModalInstance.close(stuff)},self.cancel=function(){$uibModalInstance.dismiss()},function(){$q.when().then(function(){return Filters.getFilters()}).then(function(filters){self.filters=filters}).then(function(){return FilterTags.getFilterTags()}).then(function(filterTags){self.filterTags=filterTags}).catch(function(err){console.log(err)})}()}function commentService($resource,$uibModal,$q){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return console.log("XHR Failed for getNews."+error),$q.reject(error)}return Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete).catch(getListFailed)}function getItem(id){function getItemComplete(response){return response}function getItemFailed(error){return $q.reject(error)}return Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}function create(){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/stuff/modal/createComment.html",controller:function($uibModalInstance){var self=this;self.name="",self.ok=function(){$uibModalInstance.close(self.name)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl"}).result.then(function(name){name?resolve(name.substring(0,100)):reject("empty")},function(err){reject(err)})})}var Items=$resource("/api/collections/Comment/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,save:Items.save,delete:Items.delete,create:create}}angular.module("gmall.services").service("Stuff",stuffService).service("Comments",commentService),stuffService.$inject=["$resource","$uibModal","$q","Sections","$stateParams","$state","$location","Brands","FilterTags","global","$order","exception","$user","$email","CreateContent","$rootScope","Filters","$timeout"],setFiltersCtrl.$inject=["global","$uibModalInstance"],cloneStuffCtrl.$inject=["$q","global","Stuff","stuff","$uibModalInstance","Category","clone"],selectStuffCtrl.$inject=["$q","Stuff","$uibModalInstance","query"],selectItemWithSortCtrl.$inject=["$q","Stuff","$uibModalInstance","Filters","FilterTags","exception","query","global"],commentService.$inject=["$resource","$uibModal","$q"]}(),function(){function likesItem(){return{scope:{},bindToController:!0,controller:likesItemCtrl,controllerAs:"$ctrl",templateUrl:"",restrict:"E"}}function likesItemCtrl($compile,$timeout,localStorage,Stuff,global){return{restrict:"EA",scope:{current:"=",header:"@",mobile:"@",blockElement:"@"},template:'<h3 class="text-center" ng-bind="header"></h3><div id="lastViewedWrapper" class="owl-carousel owl-theme"><div ng-repeat="s in stuffs track by $index" class="item"><a ui-sref="stuffs.stuff(s.linkData)"><img style="max-width: 200px; border-color: transparent" ng-src="{{s.img}}" ></a></div></div>',link:function(scope,element,attrs){function activate(){scope.position=JSON.parse(scope.blockElement).position,scope.mobile?scope.itemsInList=3:scope.position&&"bottom"==scope.position&&(scope.itemsInList=6),setViewed(angular.copy(scope.current)),viewedStuffs.length>2?(scope.stuffs=viewedStuffs,
scope.stuffs.forEach(function(el){el.getUrlParams=Stuff.getUrlParams}),$timeout(function(){$("#lastViewedWrapper").owlCarousel({items:scope.itemsInList,itemsMobile:[479,3],itemsTablet:[768,scope.itemsInList],itemsDesktop:[1199,scope.itemsInList],itemsDesktopSmall:[979,scope.itemsInList]})},150)):scope.stuffs=[],scope.header||(scope.header="Последние просмотренные.")}function setViewed(stuff){for(var posItem=-1,i=0,l=viewedStuffs.length;i<l;i++)if(viewedStuffs[i]._id==stuff._id){posItem=i;break}if(posItem>-1&&viewedStuffs.splice(posItem,1),stuff.gallery[0])var img=stuff.gallery[0].thumbSmall?stuff.gallery[0].thumbSmall:stuff.gallery[0].thumb;else var img=null;var linkData=global.get("categories").val.getOFA("_id",stuff.category).linkData;linkData.stuffUrl=stuff.url,viewedStuffs.unshift({_id:stuff._id,linkData:linkData,url:stuff.url,img:img}),viewedStuffs.length>15&&viewedStuffs.splice(15,1),localStorage.set(subDomain+"-viewed",viewedStuffs)}var subDomain=global.get("store").val.subDomain;scope.localId=Date.now();var viewedStuffs=localStorage.get(subDomain+"-viewed");viewedStuffs||(viewedStuffs=[]),scope.itemsInList=4,scope.$watch("current",function(n){n&&activate()}),scope.$on("$destroy",function(){$("#carouse"+scope.localId).remove()})}}}function homePageHtmlCtrl($scope,$rootScope,$timeout,$element,$compile,global,$q,$http){function getHomePageHtml(){console.log("getHomePageHtml"),$q.when().then(function(){return $http.get("homepageHTML.html")}).then(function(response){var linkFn=$compile(response.data.html),content=linkFn($scope);$element.append(content),loaded=!0}).catch(function(err){})}var loaded=null;$rootScope.$on("$stateChangeStart",function(event,to,toParams,fromState,fromParams){"home"!=to.name||loaded||getHomePageHtml()})}function homePageStuffOwlCtrl($scope,$timeout,$element,$compile,global){function prev(){self.$owl.trigger("prev.owl.carousel",[self.selectedDay-3,300])}function next(){self.$owl.trigger("next.owl.carousel",[self.selectedDay+3,300])}function zoomSliderImg(i){$rootScope.zoomSliderImg(i,imgs)}var self=this;self.prev=prev,self.next=next,self.moment=moment,self.global=global;var imgs;self.zoomSliderImg=zoomSliderImg;var items=4,items3=3,items2=2,autoplay=!1,autoplayTimeout=4e3;this.$onInit=function(){$timeout(function(){if(self.items&&(items=self.items),2==items?items3=2:1==items&&(items3=1,items2=1),self.autoplay&&(autoplay=!0),self.duration)try{var duration=Number(self.duration);duration>0&&duration<10&&(autoplayTimeout=1e3*duration)}catch(err){console.log(err)}self.$owl=$("body").find("#"+self.homePageStuffOwl),self.$owl.on("initialized.owl.carousel",function(event){});var navLeft=$element.find(".nav-left");$(navLeft).click(function(){prev()});var navRight=$element.find(".nav-right");$(navRight).click(function(){next()}),activate()},100)},$scope.$watch(function(){return self.gallery},function(n,o){if(n&&n.length){var html="";imgs=[],n.forEach(function(item,i){photoHost?item.src=photoHost+"/"+item.img:item.src=item.img,html+='<a><span class="zoom-plus" data-i="'+i+'"><span class="icon-zoom-img"></span><span class="icon-zoom-inverse"></span></span><img class="img-responsive2" src="'+item.src+'"></a>'+imgs.push({index:i,img:item.src})}),self.$owl.trigger("replace.owl.carousel",html).trigger("to.owl.carousel",0).trigger("refresh.owl.carousel"),$timeout(function(){self.$owl.trigger("refresh.owl.carousel")},10),$timeout(function(){if(self.zoomImg){self.$owl.find("span.zoom-plus").each(function(i,img){$(img).click(function(event){var ii=$(img).data("i")>=0?$(img).data("i"):0;global.get("functions").val.zoomImg(ii,imgs,"home")})})}},400)}});var items=self.items?self.items:4,activate=function(){$timeout(function(){var carousel_Settings={loop:!0,margin:10,responsiveClass:!0,autoplay:autoplay,autoplayHoverPause:!0,autoplayTimeout:autoplayTimeout,responsive:{0:{items:1,nav:!1,dots:!0},380:{items:items2,nav:!1,dots:!0},1068:{items:items3,nav:!1,dots:!0},1400:{items:items,nav:!1,dots:!0}}};self.$owl.owlCarousel(carousel_Settings);var imgsEl=self.$owl.find("img");if(imgsEl&&imgsEl.each&&(imgs=[],imgsEl.each(function(i,img){imgs.push({index:i,img:img.src,el:imgsEl[i]})})),self.zoomImg){self.$owl.find("span.zoom-plus").each(function(i,img){$(img).click(function(event){for(var imgTemp=imgs[i].img,imgsTemp=imgs.reduce(function(o,item){return o.getOFA("img",item.img)||o.push(item),o},[]),ii=0,j=0;j<imgsTemp.length;j++)if(imgsTemp[j].img==imgTemp){ii=j;break}global.get("functions").val.zoomImg(ii,imgsTemp,"home")})})}},200)}}function emptyList(){return{templateUrl:"views/template/partials/stuffs/emptyList.html",restrict:"E"}}function stuffListDirective(){return{scope:{},bindToController:!0,controller:stuffListCtrl,controllerAs:"$ctrl",templateUrl:"components/stuff/stuffsAdminList.html",restrict:"E"}}function stuffListTemplateDirective(global){return{scope:{filtersBlock:"@"},bindToController:!0,controller:stuffListCtrl,controllerAs:"$ctrl",templateUrl:"views/template/partials/stuffs/stuffs-block.html",restrict:"E"}}function stuffListTemplateDirectiveList(global){return{scope:{},bindToController:!0,controller:stuffListCtrl,controllerAs:"$ctrl",templateUrl:function(){return"views/template/partials/stuffs/stuffs-list/"+global.get("sectionType").val},restrict:"E"}}function stuffInList(global,$timeout){return{scope:{stuffInList:"@"},bindToController:!0,controllerAs:"$ctrl",restrict:"A",controller:function($scope,Stuff,global,$attrs,$stateParams,$rootScope,localStorage){function getAveragePrice(price){if(price){var p=price*global.get("rate").val;return p=Math.round(100*p)/100,formatAverage&&(4==formatAverage?p=100*Math.round(p/100):3==formatAverage?p=10*Math.round(p/10):2==formatAverage?p=Math.round(p):1==formatAverage&&(p=Math.round(10*p)/10)),p}}function getMastersName(){self.stuff.masters=[],global.get("masters").val.forEach(function(m){if(m.stuffs&&m.stuffs.length&&m.stuffs.indexOf(self.stuff._id)>-1){var o={name:m.name,url:m.url};self.stuff.masters.push(o)}})}function addToLikes($event){$event.stopPropagation(),console.log("addToLikes"),(likes=localStorage.get(subDomain+"-likes"))||(likes=[]);var i=likes.indexOf($scope.stuff._id);i>-1?($scope.stuff.inLikes=!1,likes.splice(i,1)):($scope.stuff.inLikes=!0,likes.push($scope.stuff._id)),localStorage.set(subDomain+"-likes",likes),$rootScope.likes.totalCount=likes.length}var self=this;self.global=global,$scope.global=global;var subDomain=global.get("store").val.subDomain;if($scope.stuff=JSON.parse($attrs.stuffInList),$scope.stuff=Stuff.setDataForStuff($scope.stuff,global.get("filterTags").val,"stuffs"),$scope.stuff.sortsOfStuff&&$scope.stuff.sortsOfStuff.filterGroup&&global.get("filtersO").val[$scope.stuff.sortsOfStuff.filterGroup])for(var ttt,i=0;i<$scope.stuff.tags.length;i++)if(ttt=global.get("filtersO").val[$scope.stuff.sortsOfStuff.filterGroup].tags.getOFA("_id",$scope.stuff.tags[i])){$scope.stuff.tagFromFilterFromSortOfStuffs=ttt;break}$scope.stuff.stateObj=angular.copy($stateParams),$scope.stuff.stateObj.stuffUrl=$scope.stuff.url,self.stuff=$scope.stuff,self.getMastersName=getMastersName,self.getAveragePrice=getAveragePrice,self.addToLikes=addToLikes;var currency=global.get("currency").val,formatAverage=global.get("store").val.currency[currency][4],del=-1;1==formatAverage?del=-1:2==formatAverage?del=0:3==formatAverage?del=1:4==formatAverage&&(del=2),self.formatPrice=global.get("store").val.currency[currency][5],void 0===self.formatPrice&&(self.formatPrice=2),self.stuff.currencySymbol=global.get("store").val.currency[global.get("currency").val]&&global.get("store").val.currency[global.get("currency").val][2]?global.get("store").val.currency[global.get("currency").val][2]:"",$rootScope.$on("changeCurrency",function(){currency=global.get("currency").val,formatAverage=global.get("store").val.currency[currency][4],self.formatPrice=global.get("store").val.currency[currency][5],void 0===self.formatPrice&&(self.formatPrice=2),del=-1,1==formatAverage?del=-1:2==formatAverage?del=0:3==formatAverage?del=1:4==formatAverage&&(del=2),self.stuff.currencySymbol=global.get("store").val.currency[global.get("currency").val]&&global.get("store").val.currency[global.get("currency").val][2]?global.get("store").val.currency[global.get("currency").val][2]:global.get("currency").val}),getMastersName();var likes=localStorage.get(subDomain+"-likes");likes&&likes.length&&likes.some(function(s){return s===$scope.stuff._id})&&($scope.stuff.inLikes=!0)},transclude:!0,link:function(scope,element,attrs,ctrl,transclude){$timeout(function(){global.get("stuffsInList").val&&element[0].parentElement&&element[0].parentElement.parentElement&&element[0].parentElement.parentElement.id&&global.get("stuffsInList").val[element[0].parentElement.parentElement.id]&&global.get("stuffsInList").val[element[0].parentElement.parentElement.id].push(scope.stuff)},200),transclude(scope,function(clone){element.append(clone)})}}}function stuffListTemplateServer(){return{scope:{},bindToController:!0,controllerAs:"$ctrl",template:"<div></div>",controller:stuffListFromServerCtrl,restrict:"E"}}function stuffListFromServerCtrl($scope,$state,$compile,$element,$window,Stuff,$rootScope,$q,$uibModal,global,exception,FilterTags,Filters,Confirm,Helper,anchorSmoothScroll,Photo,$timeout,$anchorScroll,Category,Brands,BrandTags,seoContent,AddInfo,$http,$location,$sce){function filterList(){console.log("filterList22"),$q.when().then(function(){return self.Items.setFilters()}).catch(function(err){})}function setDataForStuff(stuff){return stuff=Stuff.setDataForStuff(stuff,global.get("filterTags").val),stuff=angular.copy(stuff),console.log(stuff.name+" "+stuff.artikul,stuff.sticker),stuff}function getList(){$q.when().then(function(){return $http.get(url.trim()+".html",{params:{pages:[self.paginate.page],perPage:perPage,rows:rows,query:self.query,url:$location.url()}})}).then(function(response){if(response){$anchorScroll(),lastElement=null;var addHtml=angular.element(response.data.html);if(addHtml.find("#td-list-1").html()){var atd1=$compile(addHtml.find("#td-list-1").html())($scope);td1.html(atd1)}if(addHtml.find("#td-list-2").html()){var atd2=$compile(addHtml.find("#td-list-2").html())($scope);td2.html(atd2)}if(addHtml.find("#td-list-3").html()){var atd3=$compile(addHtml.find("#td-list-3").html())($scope);td3.html(atd3)}if(addHtml.find("#td-list-4").html()){var atd4=$compile(addHtml.find("#td-list-4").html())($scope);td4.html(atd4)}self.lastItemId=addHtml.find("#paginateData"+page).data("lastItemId"),self.currentQty+=addHtml.find("#paginateData"+page).data("qty"),$timeout(function(){lastElement=null!=self.lastItemId?$("#list"+self.lastItemId):null},200)}})}var stuffsInList={"td-list-1":[],"td-list-2":[],"td-list-3":[],"td-list-4":[],"td-list-5":[],"td-list-6":[]};global.set("stuffsInList",stuffsInList);var self=this;$scope.global=global,global.get("category").val&&global.get("category").val.filters&&global.get("category").val.filters.length?self.displayableFilters=!0:global.get("section").val&&global.get("section").val.filters&&global.get("section").val.filters.length&&(self.displayableFilters=!0),self.stuffs={},self.Items=Stuff,self.mobile=global.get("mobile").val,self.global=global,self.globalProperty=$rootScope.globalProperty,self.$state=$rootScope.$state,self.$stateParams=$rootScope.$stateParams,self.query={},self.paginate={page:0,rows:20,items:0},self.filterList=filterList,self.initStuff=setDataForStuff,self.getList=getList,$scope.$on("addBlockAfterScroll",function(){$scope.addBlockAfterScroll()});var pages=[0],perPage=20,rows=global.get("functions").val.setRows();global.get("store").val.template.stuffListType[global.get("sectionType").val]&&global.get("store").val.template.stuffListType[global.get("sectionType").val].perPage&&(perPage=global.get("store").val.template.stuffListType[global.get("sectionType").val].perPage,self.paginate.rows=perPage);var waiting,lastElement,waitingDiv,td1,td2,td3,td4,td5,url="views/template/partials/stuffs/stuffs-list/"+global.get("sectionType").val+"/"+$rootScope.$stateParams.groupUrl+"/"+$rootScope.$stateParams.categoryUrl,page=0,color=global.get("store").val.template.dimScreenColor?global.get("store").val.template.dimScreenColor:"#000000",BGcolor=global.get("store").val.template.dimScreenBGColor?global.get("store").val.template.dimScreenBGColor:"#F5F5F5",innerWaitingDiv=['<div class="spinner-box clearfix text-center" style="width:100%;height:200px;background-color:'+BGcolor+";color:"+color+'">','<span class="icon-spinner-img"></span>',"</div>"].join("");$q.when().then(function(){var params={group:self.$stateParams.groupUrl,category:self.$stateParams.categoryUrl};self.$stateParams.brand,self.$stateParams.brandTag;for(var k in self.$stateParams)params[k]=self.$stateParams[k];if(self.query=dQ.getQuery(params),self.query&&self.query.priceForFilter&&1!=global.get("rate").val&&(self.query.priceForFilter.$gte=Math.ceil10(self.query.priceForFilter.$gte/global.get("rate").val,0),self.query.priceForFilter.$lte=Math.ceil10(self.query.priceForFilter.$lte/global.get("rate").val,0)),global.get("tempContent").val){if($state.current.name.indexOf(".stuff")<0){var html=$("#tempContent").detach().html(),o={data:{html:html}};return tempTitles&&(o.data.titles=tempTitles),o}return null}return $q.when(self.query).then(function(query){return $http.get(url.trim()+".html",{params:{pages:pages,perPage:perPage,rows:rows,query:query,url:$location.url()}})})}).then(function(response){if(!response)return void $rootScope.$emit("$stateChangeEndToStuff");if(global.get("tempContent").val){global.set("tempContent",null);var linkFn=$compile(response.data.html),content=linkFn($scope)}else var linkFn=$compile(response.data.html),content=linkFn($scope);$element.append(content);var style=$element.find("style");style&&style[0];var titles={};if(response.data.titles&&response.data.titles.title){for(var k in response.data.titles)response.data.titles[k]&&("canonical"==k?titles[k]=$sce.trustAsResourceUrl(response.data.titles[k]):"desc"!=k&&(titles[k]=response.data.titles[k]));global.set("titles",titles)}else seoContent.setSeopageData();waitingDiv=$("#paginateData"+page),self.totalQty=waitingDiv.data("total"),self.paginate.items=self.totalQty,self.currentQty=waitingDiv.data("qty"),self.page=waitingDiv.data("page"),self.lastItemId=waitingDiv.data("lastItemId"),td1=$("#td-list-1 .td-wrapper"),td2=$("#td-list-2 .td-wrapper"),td3=$("#td-list-3 .td-wrapper"),td4=$("#td-list-4 .td-wrapper"),td5=$("#td-list-5 .td-wrapper"),$timeout(function(){$anchorScroll(),lastElement=null!=self.lastItemId?$("#list"+self.lastItemId):null}),$timeout(function(){$scope.$broadcast("rzSliderForceRender")},500);var addBlockAfterScroll=function(){"stuffs"==$state.current.name&&!waiting&&lastElement&&$(lastElement).isOnScreen()&&self.currentQty<self.totalQty&&(waiting=!0,page++,$q.when().then(function(){return waitingDiv.html(innerWaitingDiv),$http.get(url.trim()+".html",{params:{pages:[page],perPage:perPage,rows:rows,query:self.query,url:$location.url()}})}).then(function(response){if(response){lastElement=null,waitingDiv.html("");var atd1,atd2,atd3,atd4,atd5,addHtml=angular.element(response.data.html);addHtml.find("#td-list-1 .td-wrapper").html()&&(atd1=$compile(addHtml.find("#td-list-1 .td-wrapper").html())($scope)),addHtml.find("#td-list-2 .td-wrapper").html()&&(atd2=$compile(addHtml.find("#td-list-2 .td-wrapper").html())($scope)),addHtml.find("#td-list-3 .td-wrapper").html()&&(atd3=$compile(addHtml.find("#td-list-3 .td-wrapper").html())($scope)),addHtml.find("#td-list-4 .td-wrapper").html()&&(atd4=$compile(addHtml.find("#td-list-4 .td-wrapper").html())($scope)),addHtml.find("#td-list-5 .td-wrapper").html()&&(atd5=$compile(addHtml.find("#td-list-5 .td-wrapper").html())($scope)),atd5&&td5.append(atd5),atd4&&td4.append(atd4),atd3&&td3.append(atd3),atd2&&td2.append(atd2),atd1&&td1.append(atd1),self.lastItemId=addHtml.find("#paginateData"+page).data("lastItemId"),self.currentQty+=addHtml.find("#paginateData"+page).data("qty"),$timeout(function(){lastElement=null!=self.lastItemId?$("#list"+self.lastItemId):null,waiting=!1},200)}}))};global.get("store").val.template.stuffListType[global.get("sectionType").val]&&global.get("store").val.template.stuffListType[global.get("sectionType").val].paginate||angular.element($window).on("scroll",addBlockAfterScroll),$scope.$on("$destroy",function(){angular.element($window).off("scroll",addBlockAfterScroll)}),$timeout(function(){$rootScope.$emit("$stateChangeEndToStuff")})}),$scope.addBlockAfterScroll=function(){!waiting&&lastElement&&self.currentQty<self.totalQty?(waiting=!0,page++,$rootScope.$emit("$stateChangeStartToStuff"),$q.when().then(function(){return waitingDiv.html(innerWaitingDiv),$http.get(url.trim()+".html",{params:{pages:[page],perPage:perPage,rows:rows,query:self.query,url:$location.url()}})}).then(function(response){if(response){lastElement=null,waitingDiv.html("");var atd1,atd2,atd3,atd4,atd5,addHtml=angular.element(response.data.html);addHtml.find("#td-list-1 .td-wrapper").html()&&(atd1=$compile(addHtml.find("#td-list-1 .td-wrapper").html())($scope)),addHtml.find("#td-list-2 .td-wrapper").html()&&(atd2=$compile(addHtml.find("#td-list-2 .td-wrapper").html())($scope)),addHtml.find("#td-list-3 .td-wrapper").html()&&(atd3=$compile(addHtml.find("#td-list-3 .td-wrapper").html())($scope)),addHtml.find("#td-list-4 .td-wrapper").html()&&(atd4=$compile(addHtml.find("#td-list-4 .td-wrapper").html())($scope)),addHtml.find("#td-list-5 .td-wrapper").html()&&(atd5=$compile(addHtml.find("#td-list-5 .td-wrapper").html())($scope)),atd5&&td5.append(atd5),atd4&&td4.append(atd4),atd3&&td3.append(atd3),atd2&&td2.append(atd2),atd1&&td1.append(atd1),self.lastItemId=addHtml.find("#paginateData"+page).data("lastItemId"),self.currentQty+=addHtml.find("#paginateData"+page).data("qty"),$timeout(function(){lastElement=null!=self.lastItemId?$("#list"+self.lastItemId):null,waiting=!1},200),$timeout(function(){$rootScope.$broadcast("addBlockAfterScrollDone"),$rootScope.$emit("$stateChangeEndToStuff")},300)}}).catch(function(){$rootScope.$emit("$stateChangeEndToStuff")})):$timeout(function(){$rootScope.$broadcast("addBlockAfterScrollDone")},200)}}function stuffListTemplateDirectiveCampaignList($state,global){return{scope:{campaignCondition:"@"},bindToController:!0,controller:campaignStuffListCtrl,controllerAs:"$ctrl",template:function(){if("likes"===$state.current.name)var s="<div><h1 class='wishlist-header'>"+global.get("lang").val.wishlist+"</h1></div>";else var s="<div></div>";return s},restrict:"E"}}function campaignStuffListCtrl($scope,$state,$compile,$element,$window,Stuff,$rootScope,$q,$uibModal,global,exception,FilterTags,Filters,Confirm,Helper,anchorSmoothScroll,Photo,$timeout,$anchorScroll,Category,Brands,BrandTags,seoContent,AddInfo,$http,$location,localStorage){function filterList(){$q.when().then(function(){return self.Items.setFilters()}).catch(function(err){})}function setDataForStuff(stuff){return console.log(stuff.name),stuff=Stuff.setDataForStuff(stuff,global.get("filterTags").val),stuff=angular.copy(stuff),console.log(stuff.name+" "+stuff.artikul,stuff.sticker),stuff}function getList(){$q.when().then(function(){return $http.get(url,{params:{pages:[self.paginate.page],perPage:self.paginate.rows,rows:rows}})}).then(function(response){if(response){$anchorScroll(),lastElement=null;var addHtml=angular.element(response.data.html);if(addHtml.find("#td-list-1").html()){var atd1=$compile(addHtml.find("#td-list-1").html())($scope);td1.html(atd1)}if(addHtml.find("#td-list-2").html()){var atd2=$compile(addHtml.find("#td-list-2").html())($scope);td2.html(atd2)}if(addHtml.find("#td-list-3").html()){var atd3=$compile(addHtml.find("#td-list-3").html())($scope);td3.html(atd3)}if(addHtml.find("#td-list-4").html()){var atd4=$compile(addHtml.find("#td-list-4").html())($scope);td4.html(atd4)}self.lastItemId=addHtml.find("#paginateData"+page).data("lastItemId"),self.currentQty+=addHtml.find("#paginateData"+page).data("qty"),$timeout(function(){lastElement=null!=self.lastItemId?$("#list"+self.lastItemId):null},200)}})}anchorSmoothScroll.scrollTo("topPage");var stuffsInList={"td-list-1":[],"td-list-2":[],"td-list-3":[],"td-list-4":[],"td-list-5":[],"td-list-6":[]};global.set("stuffsInList",stuffsInList);var self=this;self.stuffs={},self.Items=Stuff,self.mobile=global.get("mobile").val,self.global=global,self.globalProperty=$rootScope.globalProperty,self.$state=$rootScope.$state,self.$stateParams=$rootScope.$stateParams,self.query={},self.paginate={page:0,rows:20,items:0};var cartType=$element.data("cart")?$element.data("cart"):"good",campaignCondition=$element.data("condition")?$element.data("condition"):"stuffs";self.filterList=filterList,self.initStuff=setDataForStuff,self.getList=getList,$scope.$on("addBlockAfterScroll",function(){$scope.addBlockAfterScroll()});var pages=[0],perPage=20,rows=global.get("functions").val.setRows();global.get("store").val.template.stuffListType[cartType]&&global.get("store").val.template.stuffListType[cartType].perPage&&(perPage=global.get("store").val.template.stuffListType[cartType].perPage,self.paginate.rows=perPage);var waiting,lastElement,waitingDiv,td1,td2,td3,td4,td5,page=0,color=global.get("store").val.template.dimScreenColor?global.get("store").val.template.dimScreenColor:"#000000",BGcolor=global.get("store").val.template.dimScreenBGColor?global.get("store").val.template.dimScreenBGColor:"#F5F5F5",innerWaitingDiv=['<div class="spinner-box clearfix text-center" style="width:100%;height:200px;background-color:'+BGcolor+";color:"+color+'">','<span class="icon-spinner-img"></span>',"</div>"].join(""),campaign=$element.data("campaign");if("likes"===$rootScope.$state.current.name){campaign="likes";var likes=localStorage.get(global.get("store").val.subDomain+"-likes");campaignCondition=likes&&likes.length?likes.join("_"):"_"}var url="views/template/partials/"+campaign+"/"+campaignCondition;console.log(url),$q.when().then(function(){return $http.get(url,{params:{pages:pages,perPage:perPage,rows:rows}})}).then(function(response){if(!response)return void $rootScope.$emit("$stateChangeEndToStuff");var linkFn=$compile(response.data.html),content=linkFn($scope);$element.append(content);var style=$element.find("style");style&&style[0],waitingDiv=$("#paginateData"+page),self.totalQty=waitingDiv.data("total"),self.paginate.items=self.totalQty,self.currentQty=waitingDiv.data("qty"),self.page=waitingDiv.data("page"),self.lastItemId=waitingDiv.data("lastItemId"),td1=$("#td-list-1 .td-wrapper"),td2=$("#td-list-2 .td-wrapper"),td3=$("#td-list-3 .td-wrapper"),td4=$("#td-list-4 .td-wrapper"),td5=$("#td-list-5 .td-wrapper"),$timeout(function(){$anchorScroll(),lastElement=null!=self.lastItemId?$("#list"+self.lastItemId):null});var addBlockAfterScroll=function(){!waiting&&lastElement&&$(lastElement).isOnScreen()&&self.currentQty<self.totalQty&&(waiting=!0,page++,$q.when().then(function(){return waitingDiv.html(innerWaitingDiv),$http.get(url,{params:{pages:[page],perPage:perPage,rows:rows}})}).then(function(response){if(response){lastElement=null,waitingDiv.html("");var atd1,atd2,atd3,atd4,atd5,addHtml=angular.element(response.data.html);addHtml.find("#td-list-1 .td-wrapper").html()&&(atd1=$compile(addHtml.find("#td-list-1 .td-wrapper").html())($scope)),addHtml.find("#td-list-2 .td-wrapper").html()&&(atd2=$compile(addHtml.find("#td-list-2 .td-wrapper").html())($scope)),addHtml.find("#td-list-3 .td-wrapper").html()&&(atd3=$compile(addHtml.find("#td-list-3 .td-wrapper").html())($scope)),addHtml.find("#td-list-4 .td-wrapper").html()&&(atd4=$compile(addHtml.find("#td-list-4 .td-wrapper").html())($scope)),addHtml.find("#td-list-5 .td-wrapper").html()&&(atd5=$compile(addHtml.find("#td-list-5 .td-wrapper").html())($scope)),atd5&&td5.append(atd5),atd4&&td4.append(atd4),atd3&&td3.append(atd3),atd2&&td2.append(atd2),atd1&&td1.append(atd1),self.lastItemId=addHtml.find("#paginateData"+page).data("lastItemId"),self.currentQty+=addHtml.find("#paginateData"+page).data("qty"),$timeout(function(){lastElement=null!=self.lastItemId?$("#list"+self.lastItemId):null,waiting=!1},200)}}))};global.get("store").val.template.stuffListType[cartType]&&global.get("store").val.template.stuffListType[cartType].paginate||angular.element($window).on("scroll",addBlockAfterScroll),$scope.$on("$destroy",function(){angular.element($window).off("scroll",addBlockAfterScroll)}),$timeout(function(){$rootScope.$emit("$stateChangeEndToStuff")})}),$scope.addBlockAfterScroll=function(){!waiting&&lastElement&&self.currentQty<self.totalQty&&(waiting=!0,page++,$rootScope.$emit("$stateChangeStartToStuff"),$q.when().then(function(){return waitingDiv.html(innerWaitingDiv),$http.get(url,{params:{pages:[page],perPage:perPage,rows:rows}})}).then(function(response){if(response){lastElement=null,waitingDiv.html("");var atd1,atd2,atd3,atd4,atd5,addHtml=angular.element(response.data.html);addHtml.find("#td-list-1 .td-wrapper").html()&&(atd1=$compile(addHtml.find("#td-list-1 .td-wrapper").html())($scope)),addHtml.find("#td-list-2 .td-wrapper").html()&&(atd2=$compile(addHtml.find("#td-list-2 .td-wrapper").html())($scope)),addHtml.find("#td-list-3 .td-wrapper").html()&&(atd3=$compile(addHtml.find("#td-list-3 .td-wrapper").html())($scope)),addHtml.find("#td-list-4 .td-wrapper").html()&&(atd4=$compile(addHtml.find("#td-list-4 .td-wrapper").html())($scope)),addHtml.find("#td-list-5 .td-wrapper").html()&&(atd5=$compile(addHtml.find("#td-list-5 .td-wrapper").html())($scope)),atd5&&td5.append(atd5),atd4&&td4.append(atd4),atd3&&td3.append(atd3),atd2&&td2.append(atd2),atd1&&td1.append(atd1),self.lastItemId=addHtml.find("#paginateData"+page).data("lastItemId"),self.currentQty+=addHtml.find("#paginateData"+page).data("qty"),$timeout(function(){lastElement=null!=self.lastItemId?$("#list"+self.lastItemId):null,waiting=!1},200),$timeout(function(){$rootScope.$broadcast("addBlockAfterScrollDone"),$rootScope.$emit("$stateChangeEndToStuff")},300)}}).catch(function(){$rootScope.$emit("$stateChangeEndToStuff")}))}}function stuffListCtrl($scope,Stuff,$rootScope,$q,$uibModal,global,exception,FilterTags,Filters,Confirm,Helper,anchorSmoothScroll,Photo,$timeout,$anchorScroll,Category,Brands,BrandTags,seoContent,AddInfo,$http,$location,$element){function getList(reload){if(reload&&$rootScope.$emit("$stateChangeStartToStuff"),self.listCriteria&&!$rootScope.$stateParams.searchStr)for(var k in self.listCriteria)null!==self.listCriteria[k]?self.query[k]=self.listCriteria[k]:delete self.query[k];return self.Items.getList(self.paginate,self.query).then(function(data){return $anchorScroll(),self.items=data,data.length&&(self.maxIndex=data[0].index,data.forEach(function(el,i){el.index>self.maxIndex&&(self.maxIndex=el.index)})),"stuffs.stuff"==self.$state.current.name&&self.paginate.page&&(console.log(":::::"),self.$state.go("stuffs",self.$stateParams)),self.items}).then(function(items){items&&items.length?$timeout(function(){$rootScope.$emit("$stateChangeEndToStuff")},100):(self.stateComplite=!0,$rootScope.$emit("$stateChangeEndToStuff"))}).catch(function(err){err=err.data||err,exception.catcher("получение списка")(err)})}function setRows(){return global.get("functions").val.setRows?global.get("functions").val.setRows():2}function filteringList(item){return!self.filterStr||item.name.toLowerCase().indexOf(self.filterStr.toLowerCase())!=-1||item.artikul.toLowerCase().indexOf(self.filterStr.toLowerCase())!=-1}function searchItem(artikul){if(artikul&&!(artikul.length<3)){artikul=artikul.substring(0,20),self.$state.current.reloadOnSearch=!0;var o={groupUrl:"group",categoryUrl:"category",searchStr:artikul.substring(0,20),queryTag:null,brand:null,brandTag:null,categoryList:null};self.$state.go(self.$state.current.name,o,{reload:!0})}}function saveField(item,field,defer){var o={_id:item._id};if(o[field]=item[field],"name"==field||"artikul"==field){var lang=global.get("store").val.lang,k=item.name;if(item.artikul&&(k+=" "+item.artikul),item.category&&item.category[0]&&global.get("categoriesO").val&&global.get("categoriesO").val[item.category[0]]&&global.get("categoriesO").val[item.category[0]].nameL&&(k+=" "+global.get("categoriesO").val[item.category[0]].nameL[lang]),item.brand&&global.get("brands").val){var id=item.brand._id?item.brand._id:item.brand,b=global.get("brands").val.getOFA("_id",id);if(k+=" "+(b.nameL&&b.nameL[lang]?b.nameL[lang]:b.name),item.brandTag){var bt=b.tags.getOFA("_id",item.brandTag);bt&&bt.nameL&&bt.nameL[lang]&&(k+=" "+bt.nameL[lang])}}item.keywords||(item.keywords={}),item.keywords[lang]=k,field+=" keywords."+lang,o["keywords."+lang]=k}return"archived"==field&&item[field]&&(field+=" actived",o.actived=!1,item.actived=!1),self.Items.save({update:field},o).$promise.then(function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)},function(err){console.log(err)})}function createItem(stuff,clone){stuff||(stuff={name:""},stuff.index=self.items&&self.items[0]&&self.items[0].index?self.items[0].index:0),$q.when().then(function(){return self.Items.cloneStuff(stuff,clone)}).then(function(stuff){self.newStuff=stuff}).then(function(){var url=self.newStuff.url;global.get("categoriesO").val[self.newStuff.category];self.$state.go("frame.stuffs.stuff",{groupUrl:self.$stateParams.groupUrl,categoryUrl:self.$stateParams.categoryUrl,stuffUrl:url})}).catch(function(err){err&&(err=err.data||err,exception.catcher("создание товара")(err),console.log(err))})}function filterList(){$q.when().then(function(){return self.Items.setFilters()}).catch(function(err){})}function getTagName(_id){if(_id&&self.filterTags&&"notag"!=_id&&self.filterTags.length)return self.filterTags.getOFA("_id",_id).name||null}function getFilterName(_id){if(_id&&self.filters){var filter=self.filters.getOFA("_id",_id);return filter?filter.name:""}}function deleteItem(stuff){var folder="images/"+global.get("store").val.subDomain+"/Stuff/"+stuff.url;Confirm("Удалить?").then(function(){return self.whileActions=!0,Stuff.delete({_id:stuff._id}).$promise}).then(function(){return self.getList(!0)}).then(function(){return self.whileActions=null,Photo.deleteFolder("Stuff",folder)}).catch(function(err){self.whileActions=null,(err=err&&err.data||err)&&exception.catcher("удаление товара")(err)})}function zoomImg(stuff){if(stuff.gallery&&stuff.gallery.length){var options={animation:!0,bindToController:!0,controllerAs:"$ctrl",templateUrl:"views/template/partials/stuffDetail/modal/zoom.html",controller:function($uibModalInstance,gallery,i){var self=this;self.gallery=gallery,self.idx=i,self.ok=function(){$uibModalInstance.close()},self.cancel=function(){$uibModalInstance.dismiss()}},resolve:{gallery:function(){return stuff.gallery},i:function(){return 0}}};$uibModal.open(options)}}function markAllStuffs(m){self.items.forEach(function(el){el.select=m})}function selectCategory(){var acts=[];return $q.when().then(function(){return Category.select()}).then(function(item){return self.items.forEach(function(el){el.select&&("object"==typeof el.category?el.category[0]=item._id:el.category=[item._id],acts.push(saveField(el,"category")))}),$q.all(acts)}).then(function(){getList(0)})}function selectBrand(){return $q.when().then(function(){return Brands.select()}).then(function(item){var o={};o.brand=item?item._id:null,o.brandTag=null,massSaveField(o)})}function selectBrandTag(){return $q.when().then(function(){return BrandTags.select()}).then(function(item){var o={};item?(o.brand=item.brand._id,o.brandTag=item._id):o.brandTag=null,massSaveField(o)})}function selectFilterTag(){var acts=[];return $q.when().then(function(){return FilterTags.select()}).then(function(item){var tag=item._id;self.items.forEach(function(el){if(el.select){el.select=!1;el.tags.indexOf(tag)<0&&(el.tags.push(tag),acts.push(saveField(el,"tags")))}})}).then(function(){return $q.all(acts)})}function unSelectFilterTag(){var acts=[];return $q.when().then(function(){return FilterTags.select()}).then(function(item){var tag=item._id;self.items.forEach(function(el){
if(el.select){el.select=!1;var k=el.tags.indexOf(tag);k>-1&&(el.tags.splice(k,1),acts.push(saveField(el,"tags")))}})}).then(function(){return $q.all(acts)})}function selectAddInfo(){return $q.when().then(function(){return AddInfo.select()}).then(function(item){massSaveField({addInfo:item._id})})}function selectActived(){var options={animation:!0,templateUrl:"components/stuff/modal/selectActivedModal.html",bindToController:!0,controller:selectActivedCtrl,controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(actived){massSaveField({actived:actived}).then(function(){getList(0)})})}function selectActivedCtrl($uibModalInstance){var self=this;self.actived=!1,self.cancel=function(){$uibModalInstance.dismiss("cancel")},self.ok=function(){$uibModalInstance.close(self.actived)}}function selectPosition(){if(self.items.length){var options={animation:!0,templateUrl:"components/stuff/modal/selectPositionModal.html",bindToController:!0,controller:selectPositionCtrl,controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(position){if("down"==position){var minIndex=Number(self.items[self.items.length-1].index)-1;self.items.forEach(function(el){if(el.select){var i=minIndex--;el.index=i,saveField(el,"index")}})}else if("up"==position){var minIndex=Number(self.items[0].index)+1;self.items.forEach(function(el){if(el.select){var i=minIndex++;el.index=i,saveField(el,"index")}})}self.items.sort(function(a,b){return b.index-a.index})})}}function selectPositionCtrl($uibModalInstance){var self=this;self.position="up",self.cancel=function(){$uibModalInstance.dismiss("cancel")},self.ok=function(){$uibModalInstance.close(self.position)}}function changeOrderType(){var options={animation:!0,templateUrl:"components/stuff/modal/orderTypeModal.html",bindToController:!0,controller:orderTypeCtrl,controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(orderType){massSaveField({orderType:orderType})})}function orderTypeCtrl($uibModalInstance){var self=this;self.orderType=0,self.cancel=function(){$uibModalInstance.dismiss("cancel")},self.ok=function(){$uibModalInstance.close(self.orderType)}}function changeMinMax(){var options={animation:!0,templateUrl:"components/stuff/modal/changeMinMaxModal.html",bindToController:!0,controller:changeMinMaxCtrl,size:"lg",controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(item){massSaveField(item)})}function changeMinMaxCtrl($uibModalInstance){var self=this;self.item={minQty:1,maxQty:1,single:!1,multiple:!1},self.cancel=function(){$uibModalInstance.dismiss("cancel")},self.ok=function(){$uibModalInstance.close(self.item)}}function changePrice(){var options={animation:!0,templateUrl:"components/stuff/modal/changePriceModal.html",bindToController:!0,controller:changePriceCtrl,size:"lg",controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(item){item.ids=self.items.filter(function(el){return el.select}).map(function(el){return el._id}),item.price=Number(item.value),delete item.value;try{if(item.price)if(item.sum)item.$inc=!0,item.price<0&&self.items.forEach(function(el){if(el.select&&el.price+item.price<0)throw el.name+" price below 0"});else{if(item.$mul=!0,item.price<-99)throw"percent value -99 - ~";item.price+=100,item.price>0&&(item.price=item.price/100)}return delete item.sum,self.Items.save({update:"price"},item).$promise.then(function(){global.set("saving",!0),getList(!0),$timeout(function(){global.set("saving",!1)},1500)},function(err){console.log(err)})}catch(err){exception.catcher("error")(err)}})}function changePriceCtrl($uibModalInstance){var self=this;self.item={value:0,sum:!1},self.cancel=function(){$uibModalInstance.dismiss("cancel")},self.ok=function(){$uibModalInstance.close(self.item)}}function deleteStuffs(){Confirm("потверждаете?").then(function(){var ids=self.items.filter(function(el){return el.select}).map(function(el){return el._id}).join("_"),folders=self.items.filter(function(el){return el.select}).map(function(el){return"images/"+global.get("store").val.subDomain+"/Stuff/"+el.url});$q.when().then(function(){return self.Items.delete({ids:ids}).$promise.then(function(){global.set("saving",!0),getList(!0),$timeout(function(){global.set("saving",!1)},1500)},function(err){console.log(err)})}).then(function(){Photo.deleteFolders("Stuff",folders)})})}function massSaveField(item){var fields=Object.keys(item).join(" ");return item.ids=self.items.filter(function(el){return el.select}).map(function(el){return el._id}),self.Items.save({update:fields},item).$promise.then(function(){global.set("saving",!0),(item.actived||item.category)&&getList(!0),$timeout(function(){global.set("saving",!1)},1500)},function(err){console.log(err)})}function changeAction(){if(self.action){var a=angular.copy(self.action);switch(self.action=null,self.mark=!1,a){case"category":return selectCategory();case"brand":return selectBrand();case"brandTag":return selectBrandTag();case"filterTag":return selectFilterTag();case"unfilterTag":return unSelectFilterTag();case"addInfo":return selectAddInfo();case"actived":return selectActived();case"index":return selectPosition();case"order":return changeOrderType();case"changePrice":return changePrice();case"changeMinMax":return changeMinMax();case"deleteStuffs":return deleteStuffs()}}}function dropCallback(item){return item}function alignmentIndex(){Confirm("Подтверждаете?").then(function(){self.alignmentIndexDisable=!0;var data={};return $http({method:"post",url:"/api/alignmentIndex",data:data})}).then(function(){}).catch(function(err){console.log(err)})}function fixData(){Confirm("Подтверждаете?").then(function(){self.fixDesable=!0;var data={};return $http({method:"post",url:"/api/fixedDB/stuff",data:data})}).then(function(){self.fixDesable=!1,exception.showToaster("info","fix stucture","Ok")}).catch(function(err){exception.catcher("fix stucture")(err)})}function reNewKeyWords(){Confirm("Подтверждаете?").then(function(){self.reNewKeyWordsDisable=!0;var data={};return $http({method:"GET",url:"/api/reNewKeyWords",data:data})}).then(function(){self.reNewKeyWordsDisable=!1,exception.showToaster("info","reNewKeyWords","Ok")}).catch(function(err){exception.catcher("reNewKeyWords")(err)})}function changeRows(rows){if(self.paginate.rows!=rows){self.paginate.rows=rows,self.paginate.page=0,self.paginate.items=0;getList(!0)}}function clearSearch(){$location.search("searchStr",null)}function changeListCriteria(field,val){self.listCriteria&&(self.listCriteria.actived=null,self.listCriteria.archived=null),field&&(self.listCriteria[field]=val),"actived"!=field||val||(self.listCriteria.archived=!1),self.paginate.page=0,getList(!0)}function changeStock(stuff,tag){stuff.stock&&stuff.stock[tag._id]&&(stuff.stock[tag._id].quantity=tag.quantity,saveField(stuff,"stock"))}function deleteIndexPageHtml(){Confirm("перезаписать страницу?").then(function(){return $http.get("/api/deleteIndexPageHtml?catalog="+$rootScope.$stateParams.groupUrl+"_"+$rootScope.$stateParams.categoryUrl)}).then(function(res){exception.showToaster("info","все OK")}).catch(function(err){exception.catcher("сброс страницы")(err)})}anchorSmoothScroll.scrollTo("topPage"),$element.on("$destroy",function(){});var stamp=Date.now();console.log("stuffListCtrl from admin ",stamp);var self=this;self.Items=Stuff,self.mobile=global.get("mobile").val,self.global=global,self.globalProperty=$rootScope.globalProperty,self.$state=$rootScope.$state,self.$stateParams=$rootScope.$stateParams,self.query={},self.data={rows:2},self.itemsArr2=[[],[]],self.itemsArr3=[[],[],[]],self.itemsArr4=[[],[],[],[]],self.itemsArr5=[[],[],[],[],[]];self.paginate={page:0,rows:100,items:0},setTimeout(function(){$rootScope.displaySlideMenu=!0},400),self.newStuff={name:"",actived:!1},self.listOfActions={filterTag:"добавить характеристику",unfilterTag:"снять характеристику",addInfo:"таблица доп. параметров",category:"смена категории",brand:"смена бренда",order:"способ заказа",brandTag:"смена коллекции",changePrice:"смена цены",changeMinMax:"смена min max кол-ва для заказа",deleteStuffs:"удаление товаров",actived:"смена видимости",index:"смена позиции"},self.maxIndex=0,self.listCriteria={actived:!0},self.getList=getList,self.saveField=saveField,self.searchItem=searchItem,self.createItem=createItem,self.filterList=filterList,self.getTagName=getTagName,self.getFilterName=getFilterName,self.deleteItem=deleteItem,self.zoomImg=zoomImg,self.markAllStuffs=markAllStuffs,self.changeAction=changeAction,self.dropCallback=dropCallback,self.filteringList=filteringList,self.alignmentIndex=alignmentIndex,self.fixData=fixData,self.reNewKeyWords=reNewKeyWords,self.changeRows=changeRows,self.clearSearch=clearSearch,self.changeListCriteria=changeListCriteria,self.changeStock=changeStock,self.deleteIndexPageHtml=deleteIndexPageHtml,function(){global.get("tempContent")&&global.get("tempContent").val&&($("#tempContent").empty(),global.set("tempContent",null)),self.data.rows=setRows(),global.get("crawler")&&global.get("crawler").val&&"stuffs.stuff"==self.$state.current.name||$q.when().then(function(){return self.Items.getQueryFromUrl(self.campaignCondition)}).then(function(query){return self.query=query,getList()}).then(function(){return FilterTags.getFilterTags()}).then(function(filterTags){self.filterTags=filterTags}).then(function(){return Filters.getFilters()}).then(function(filters){self.filters=filters}).then(function(){$rootScope.reloadStuffId&&$timeout(function(){anchorSmoothScroll.scrollTo("stuff"+$rootScope.reloadStuffId,-150),$rootScope.reloadStuffId=null},1300)}).then(function(helper){helper&&(self.helper=helper,global.get("store").val.helper||(self.helper.popover=null))}).then(function(){seoContent.setDataCatalog()}).catch(function(err){console.log(err)})}(),$scope.$on("fromStuffToStuffs",function(){console.log("$rootScope.$on('fromStuffToStuffs'",stamp),getList(!0)}),$(window).resize(function(){$timeout(function(){self.data.rows=setRows()})}),selectActivedCtrl.$inject=["$uibModalInstance"],selectPositionCtrl.$inject=["$uibModalInstance"],orderTypeCtrl.$inject=["$uibModalInstance"],changeMinMaxCtrl.$inject=["$uibModalInstance"],changePriceCtrl.$inject=["$uibModalInstance"],console.log($rootScope.$stateParams)}function filtersWrapDirective(global){return{scope:{},restrict:"C",bindToController:!0,controller:filtersWrapCtrl,controllerAs:"$ctrl",templateUrl:function(){var s="";if(global.get("store").val){var type=global.get("sectionType")&&global.get("sectionType").val?global.get("sectionType").val:"good",sec=global.get("store").val.template.stuffListType[type];if(sec.filters)for(var i=0;i<sec.parts.length;i++)if("filters"==sec.parts[i].name){sec.parts[i].templ&&(s=sec.parts[i].templ);break}}return"views/template/partials/stuffs/filters/filtersWrap"+s+".html"}}}function filtersWrapCtrl($element,$timeout,$q,$stateParams,Sections,$location,Filters,global,Brands,Stuff,$scope,$rootScope,$state){function showReset(filter){return filter.tags.some(function(t){return t.set})}function AllshowReset(){return self.filters.some(function(f){return f.tags.some(function(t){return t.set})})}function changeTag(_filter,_tag){var queryTag="",brandTag="",brand="",filterTag="";self.filters.forEach(function(filter){filter.count?filter.set&&(filterTag&&(filterTag+="__"),filterTag+=filter._id+"_"+filter.minValue+"_"+filter.maxValue):filter.tags.forEach(function(tag){_filter&&_tag&&_filter._id===filter._id&&(_tag._id===tag._id||(tag.set=!1)),tag.set&&(queryTag&&(queryTag+="__"),queryTag+=tag.url)})}),self.brands.forEach(function(b){b.set&&(brand&&(brand+="__"),brand+=b.url),b.tags.forEach(function(tag){tag.set&&(brandTag&&(brandTag+="__"),brandTag+=tag.url)})}),brand.split("__").length>1&&(brandTag=null),queryTag?$location.search("queryTag",queryTag):$location.search("queryTag",null),brandTag?$location.search("brandTag",brandTag):$location.search("brandTag",null),brand?$location.search("brand",brand):$location.search("brand",null),filterTag?$location.search("filterTag",filterTag):$location.search("filterTag",null);$stateParams.groupUrl,$stateParams.categoryUrl,self.brand}function clearAllBrands(){self.brands.forEach(function(b){b.set=!1,b.tags&&b.tags.length&&b.tags.forEach(function(t){t.set=!1})})}function changeAllBrands(){clearAllBrands(),changeTag()}function clearFilter(filter){filter.set=null,filter.tags&&filter.tags.length&&filter.tags.forEach(function(t){t.set=!1})}function changeAllTags(filter){clearFilter(filter),changeTag()}function clearAll(){clearAllBrands(),self.filters.forEach(function(filter){clearFilter(filter)}),changeTag()}function setCountFilter(filter){filter.set=!0,changeTag()}function clearCountFilter(filter){filter.set=null,filter.minValue=filter.min,filter.maxValue=filter.max,changeTag()}function openFilterForBrands(){if(self.brands&&self.brands.length)return self.brands.some(function(b){return b.open})}function setCharForBrands(char){self.char=char}function filterBrands(item){return item.name.toUpperCase()[0]==self.char}function changeCategory(category){var o={groupUrl:category.linkData.groupUrl,categoryUrl:category.linkData.categoryUrl,queryTag:null,brand:null,brandTag:null,categoryList:null};$state.go("stuffs",o)}function changeAllCategories(s){self.sections.forEach(function(s){s.categories.forEach(function(c){c.set=!1}),s.child.forEach(function(child){child.categories&&child.categories.length&&child.categories.forEach(function(c){c.set=!1})})});var o={groupUrl:s.url,categoryUrl:"category",queryTag:null,brand:null,brandTag:null,categoryList:null};$state.go("stuffs",o)}function deleteCrumb(index){!function(type){var query=self.breadcrumbs.reduce(function(q,item){return item.type==type&&(q&&(q+="__"),q+=item.url),q},"");query||(query=null),$location.search(type,query)}(self.breadcrumbs.splice(index,1)[0].type)}var self=this;self.global=global,"category"!=$stateParams.categoryUrl?self.sectionName=global.get("category").val.name:self.sectionName=global.get("section").val.name,self.breadcrumbs=global.get("breadcrumbs").val,self.chars=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],self.char=self.chars[0],global.get("store").val.template.stuffListType[global.get("sectionType").val].filtersCategories?self.sections=global.get("sections").val.filter(function(s){return s.viewsFilters}):self.sections=[],self.changeAllBrands=changeAllBrands,self.changeAllTags=changeAllTags,self.clearAll=clearAll,self.setCountFilter=setCountFilter,self.clearCountFilter=clearCountFilter,self.openFilterForBrands=openFilterForBrands,self.filterBrands=filterBrands,self.setCharForBrands=setCharForBrands,self.changeCategory=changeCategory,self.changeAllCategories=changeAllCategories,self.deleteCrumb=deleteCrumb,self.showReset=showReset,self.showResetAll=AllshowReset,$rootScope.$on("changeCurrency",function(){console.log("changeCurrency",global.get("rate").val),self.filters.forEach(function(f){f.count&&f.price&&(console.log(f.mixSave,global.get("rate").val),f.min=Math.ceil10(f.mixSave*global.get("rate").val,0),console.log(f.min),f.max=Math.ceil10(f.maxSave*global.get("rate").val,0),f.maxValue=f.max,f.minValue=f.min,console.log(f))}),$timeout(function(){$scope.$broadcast("rzSliderForceRender")},500)}),function(){global.get("category").val&&global.get("category").val.filters&&global.get("category").val.filters.length?self.displayable=!0:global.get("section").val&&global.get("section").val.filters&&global.get("section").val.filters.length&&(self.displayable=!0),$q.when().then(function(){return Brands.getBrands()}).then(function(brands){self.brands=brands,self.checkedBrand=0,self.brands&&self.brands.forEach(function(b){b.set&&self.checkedBrand++})}).then(function(){return Filters.getFilters()}).then(function(filters){filters.forEach(function(f){var rate=global.get("rate")&&global.get("rate").val?global.get("rate").val:1;f.count&&(f.maxSave||(f.maxSave=f.max),f.mixSave||(f.mixSave=f.min),f.price&&(f.min=Math.ceil10(f.mixSave*rate,0),f.max=Math.ceil10(f.maxSave*rate,0)),f.set||(f.minValue=f.min,f.maxValue=f.max),$scope.$watch(function(){return f.open},function(n,o){n&&$timeout(function(){$scope.$broadcast("reCalcViewDimensions")},300)}))}),self.filters=filters.filter(function(f){if(self.displayable)return global.get("category").val?global.get("category").val.filters.indexOf(f._id)>-1:global.get("section").val.filters.indexOf(f._id)>-1})})}(),self.changeTag=changeTag;$element.offsetParent(),$element.find("div")[0];$timeout(function(){function filtersForScroll(event){if(list&&"stuffs"==$state.current.name){var docViewTop=win.scrollTop(),docViewBottom=docViewTop+win.height(),elemTop=$(filtersBox).offset().top,elemBottom=elemTop+$(filtersBox).height(),elemWidth=$(filtersBox).width(),listTop=$(list).offset().top,listBottom=listTop+$(list).height(),st=$(this).scrollTop();st>lastScrollTop?function(){if(elemBottom)if("fixed"==$(filtersBox).css("position"))if($(filtersBox).css("top")==sdvig+"px")if(elemBottom<docViewBottom);else{var t=elemTop-$(filtersFirstBox).offset().top;$(filtersFirstBox).css("height",t+"px"),$(filtersBox).css("position","absolute"),$(filtersBox).css("top",t+"px"),$(filtersBox).css("bottom","auto")}else"0px"==$(filtersBox).css("bottom")&&listBottom<=elemBottom&&($(filtersFirstBox).css("height",$(list).height()),$(filtersBox).css("position","absolute"),$(filtersBox).css("bottom","0px"),$(filtersBox).css("top","auto"));else"absolute"==$(filtersBox).css("position")&&(docViewTop-sdvig>=elemTop&&elemBottom<docViewBottom&&$(filtersBox).height()<docViewBottom-docViewTop-sdvig?($(filtersBox).css("position","fixed"),$(filtersBox).css("bottom","auto"),$(filtersBox).css("top",sdvig+"px"),$(filtersBox).css("width",elemWidth+"px")):elemBottom<=docViewBottom&&elemBottom<listBottom&&!($(filtersBox).height()<docViewBottom-docViewTop-sdvig)&&($(filtersBox).css("position","fixed"),$(filtersBox).css("bottom","0px"),$(filtersBox).css("top","auto"),$(filtersBox).css("width",elemWidth+"px")))}():function(){elemBottom&&("fixed"==$(filtersBox).css("position")?"0px"==$(filtersBox).css("bottom")?($(filtersFirstBox).css("height",docViewBottom-$(filtersFirstBox).offset().top),$(filtersBox).css("position","absolute"),$(filtersBox).css("bottom","0px"),$(filtersBox).css("top","auto"),$(filtersBox).css("width",elemWidth+"px"),$(filtersFirstBox).height()<$(filtersBox).height()&&$(filtersFirstBox).height($(filtersBox).height())):$(filtersBox).css("top")==sdvig+"px"?docViewTop+sdvig<=listTop&&($(filtersBox).css("position","absolute"),$(filtersBox).css("bottom","auto"),$(filtersBox).css("top","0px"),$(filtersBox).css("width",elemWidth+"px")):console.log("?????????????"):"absolute"==$(filtersBox).css("position")&&elemTop>docViewTop+sdvig&&elemTop>listTop&&($(filtersBox).css("position","fixed"),$(filtersBox).css("top",sdvig+"px"),$(filtersBox).css("bottom","auto"),$(filtersBox).css("width",elemWidth+"px")))}(),lastScrollTop=st}}var w=$element.parent().width(),list=(Math.round(w/5),$element.parent().children()[1]),nav=$(".navbar-fixed-top"),sdvig=0;nav.each(function(i,n){sdvig+=$(n).outerHeight()});var filtersFirstBox=$element.find(".filters-first-box")[0],filtersBox=$element.find(".filter-box")[0],win=$(window);win.scroll(filtersForScroll);var lastScrollTop=0;$(filtersFirstBox).height($(filtersBox).height()),$scope.$watch(function(){return $(filtersBox).height()},function(n,o){$(filtersFirstBox).height(n+"px")}),$rootScope.$on("$stateChangeSuccess",function(ev,to,toParams,from,fromParams){"stuffs"==to.name&&filtersForScroll()}),$scope.$on("$destroy",function(){angular.element(window).off("scroll",filtersForScroll)})},150)}angular.module("gmall.controllers").controller("stuffListFromServerCtrl",stuffListFromServerCtrl),angular.module("gmall.services").directive("stuffList",stuffListDirective).directive("stuffListTemplate",stuffListTemplateDirective).directive("stuffListTemplateList",stuffListTemplateDirectiveList).directive("stuffListTemplateServer",stuffListTemplateServer).directive("stuffListTemplateCampaignList",stuffListTemplateDirectiveCampaignList).directive("emptyList",emptyList).directive("stuffInList",stuffInList).directive("homePageStuffOwl",function(){return{scope:{homePageStuffOwl:"@",zoomImg:"@",stuffs:"@",items:"@",autoplay:"@",duration:"@",gallery:"="},bindToController:!0,controllerAs:"$ctrl",controller:homePageStuffOwlCtrl}}).directive("homePageHtml",function(){return{restrict:"C",scope:!0,bindToController:!0,controllerAs:"$ctrl",controller:homePageHtmlCtrl}}).directive("likesItem",likesItem),likesItemCtrl.$inject=["$compile","$timeout","localStorage","Stuff","global"],homePageHtmlCtrl.$inject=["$scope","$rootScope","$timeout","$element","$compile","global","$q","$http"],homePageStuffOwlCtrl.$inject=["$scope","$timeout","$element","$compile","global"],stuffListFromServerCtrl.$inject=["$scope","$state","$compile","$element","$window","Stuff","$rootScope","$q","$uibModal","global","exception","FilterTags","Filters","Confirm","Helper","anchorSmoothScroll","Photo","$timeout","$anchorScroll","Category","Brands","BrandTags","seoContent","AddInfo","$http","$location","$sce"],campaignStuffListCtrl.$inject=["$scope","$state","$compile","$element","$window","Stuff","$rootScope","$q","$uibModal","global","exception","FilterTags","Filters","Confirm","Helper","anchorSmoothScroll","Photo","$timeout","$anchorScroll","Category","Brands","BrandTags","seoContent","AddInfo","$http","$location","localStorage"],stuffListCtrl.$inject=["$scope","Stuff","$rootScope","$q","$uibModal","global","exception","FilterTags","Filters","Confirm","Helper","anchorSmoothScroll","Photo","$timeout","$anchorScroll","Category","Brands","BrandTags","seoContent","AddInfo","$http","$location","$element"],angular.module("gmall.directives").directive("filtersWrap",filtersWrapDirective),filtersWrapCtrl.$inject=["$element","$timeout","$q","$stateParams","Sections","$location","Filters","global","Brands","Stuff","$scope","$rootScope","$state"]}(),angular.module("gmall.directives").directive("driveSale",driveSaleDirective).directive("driveRetail",driveRetailDirective).directive("stuffEdit",["$anchorScroll","global","Stuff","$stateParams","$window","$q","$http","Category","Filters","Brands","$uibModal","$document","$location","AddInfo","Comments","exception","Photo","$timeout","$rootScope","Confirm","SetCSS","Blocks","$fileUpload",function($anchorScroll,global,Stuff,$stateParams,$window,$q,$http,Category,Filters,Brands,$uibModal,$document,$location,AddInfo,Comments,exception,Photo,$timeout,$rootScope,Confirm,SetCSS,Blocks,$fileUpload){return{restrict:"E",scope:{},templateUrl:"components/stuff/stuffEdit.html",link:function($scope,element,attrs){function loadVideo(item,field){item[field]||(item[field]={link:""}),$q.when().then(function(){return self.uploadVideoUrl="/api/collections/Stuff/uploadVideoFile?collectionName=Stuff",$fileUpload.fileUpload(self.uploadVideoUrl,field+".link",item.url)}).then(function(res){if(console.log(res),res&&res.length){var a=[];("video1"==field||"video"==field)&&res[0].data&&res[0].data.img&&(item[field]&&item[field].link&&a.push(item[field].link),item[field].link=res[0].data.img,saveField(item,field)),a.length&&Photo.deleteFiles(self.type,a)}}).catch(function(err){console.log(err)})}function deleteVideo(item,field){Confirm("Удалить?").then(function(){return Photo.deleteFiles(self.type,[item[field].link])}).then(function(response){item[field]=null,saveField(item,field)},function(err){console.log(err)})}function saveFieldBlocks(field,value,defer,indexImgs){console.log(field,value),defer=defer?defer:100,setTimeout(function(){var o={_id:$scope.item._id};o[field]=value;var query={update:field};field.indexOf(".imgs")>-1&&void 0!==indexImgs&&(query.indexImgs=indexImgs),$scope.Items.save(query,o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)},function(err){field.indexOf("desc1")>-1&&(o[field+"L"]={},$scope.Items.save({update:field+"L"},o,function(){o[field]=value,$scope.Items.save(query,o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})}))})},defer)}function refreshBlocks(){return Stuff.getItem($stateParams.stuffUrl).then(function(data){data.blocks.forEach(function(b,i){b.i=i,b.desc||(b.desc=""),b.descL||(b.descL={}),b.desc1||(b.desc1=""),b.desc1L||(b.desc1L={}),b.name||(b.name=""),b.nameL||(b.nameL={}),b.name1||(b.name1=""),b.name1L||(b.name1L={}),b.videoLink||(b.videoLink="")}),$scope.item.blocks=data.blocks})}function addBlock(type){if(type){return $scope.$broadcast("addNewBlock",{type:type}),void($scope.$ctrl.newBlock=null)}}function deleteBlock(block){console.log(block);var o={_id:$scope.item._id};o.id=block.id;var update={update:"id",embeddedName:"blocks"};update.embeddedPull=!0,console.log(update,o),Confirm("удалить?").then(function(){return $scope.Items.save(update,o).$promise}).then(function(res){$scope.item.blocks.splice(block.i,1),$scope.item.blocks.forEach(function(b,i){b.i=i});var images=[];if(block.img&&images.push(block.img),block.video&&images.push(block.video),block.videoCover&&images.push(block.videoCover),block.imgs&&block.imgs.length&&block.imgs.forEach(function(im){im.img&&images.push(im.img)}),images.length)return Photo.deleteFiles("Stuff",images)})}function getAddInfos(){return $q(function(resolve,reject){var query=$scope.item.category[0].filters.map(function(filter){return filter._id});query={filter:{$in:query}},AddInfo.query({query:query},function(res){res.shift(),$scope.item.addInfos=res,resolve()},function(err){reject(err)})})}function _setTagsValue(){if(this.category){!this.category[0]||this.category[0].filters&&this.category[0].filters.length||(this.category[0].filters=$scope.filters);var tags=this.tags;this.category[0].filters.length&&this.category[0].filters.forEach(function(filter){filter.tags.forEach(function(tag){tags.indexOf(tag._id)>-1?tag.set=!0:tag.set=!1})})}}function activate(){$q.when().then(function(){return Filters.getFilters()}).then(function(filters){$scope.filters=filters}).then(function(){return Stuff.getItem($stateParams.stuffUrl)}).then(function(item){console.log(item),item.addInfo&&item.addInfo._id&&(item.addInfo=item.addInfo._id),item.blocks||(item.blocks=[],saveField(item,"blocks")),item.blocks.forEach(function(b,i){b.i=i}),item.timePart||(item.timePart=0),$scope.slider.value=item.timePart/$scope.deltaTimePart;for(var key in item)item.hasOwnProperty(key)&&($scope.item[key]=item[key]);$scope.item.setTagsValue=_setTagsValue,$scope.$ctrl.checked=99999==item.index,$scope.$ctrl.getComments(),$scope.$ctrl.item=$scope.item}).then(function(){if($scope.item.category){"object"!=typeof $scope.item.category&&($scope.item.category=[$scope.item.category]);var q=$q.defer();return Category.get({_id:$scope.item.category[0]},function(res){$scope.item.category[0]=res,$scope.item.setTagsValue(),q.resolve()},function(err){q.reject(err)}),q.promise}}).then(function(){$timeout(function(){$scope.item.ready=!0},2e3),$rootScope.$emit("$stateChangeEndToStuff");var q=$q.defer();return $scope.item.brand?Brands.get({id:$scope.item.brand},function(res){$scope.item.brand=res,q.resolve()},function(err){q.reject(err)}):q.resolve(),q.promise}).then(function(){$scope.item.sortsOfStuff&&($scope.item.sortsOfStuff.filter&&($scope.item.sortsOfStuff.filter=angular.copy($scope.item.category[0].filters.getOFA("_id",$scope.item.sortsOfStuff.filter))),$scope.item.sortsOfStuff.filterGroup&&($scope.item.sortsOfStuff.filterGroup=angular.copy($scope.item.category[0].filters.getOFA("_id",$scope.item.sortsOfStuff.filterGroup))),$scope.item.sortsOfStuff.stuffs&&$scope.item.sortsOfStuff.stuffs.length&&$scope.item.sortsOfStuff.stuffs.forEach(function(stuff){if(stuff.stock&&"object"==typeof stuff.stock)for(var k21 in stuff.stock)stuff.stock[k21].quantity=Number(stuff.stock[k21].quantity)}))}).then(function(){return $anchorScroll(),getAddInfos()}).catch(function(err){console.log(err)})}function calculatePriceSale(price){return Math.ceil10(Number(price)-global.get("store").val.seller.sale/100*price,-2)}function calculatePriceRetail(price){return Math.ceil10(Number(price)+global.get("store").val.seller.retail/100*price,-2)}function saveField(stuff,field){if(console.log(stuff,field),"name"==field||"artikul"==field||"category"==field||"brand"==field||"brandTag"==field){var lang=global.get("store").val.lang,k=$scope.item.name;if($scope.item.artikul&&(k+=" "+$scope.item.artikul),$scope.item.category&&$scope.item.category[0]&&$scope.item.category[0].nameL&&$scope.item.category[0].nameL[lang]&&(k+=" "+$scope.item.category[0].nameL[lang]),$scope.item.brand&&$scope.item.brand.nameL&&$scope.item.brand.nameL[lang]&&(k+=" "+$scope.item.brand.nameL[lang],$scope.item.brandTag)){var bt=$scope.item.brand.tags.getOFA("_id",$scope.item.brandTag);bt&&bt.nameL&&bt.nameL[lang]&&(k+=" "+bt.nameL[lang])}$scope.item.keywords||($scope.item.keywords={}),$scope.item.keywords[lang]=k,field+=" keywords."+lang}if("price"!=field&&"name"!=field&&"artikul"!=field&&"actived"!=field&&"category"!=field&&"index"!=field||(reload=!0),"price"===field||"driveSalePrice"===field||"driveRetailPrice"===field){for(var key in stuff.stock)stuff.stock[key].price=stuff.price;stuff.setPrice(),field+=" stock"}if("stock"===field)if(stuff.sortsOfStuff&&stuff.sortsOfStuff.differentPrice&&stuff.store)for(var key in stuff.stock)key!=stuff.sort||stuff.stock[key].quantity||(stuff.sort=null,field+=" sort"),stuff.stock[key].priceSale=calculatePriceSale(stuff.stock[key].price),stuff.stock[key].retail=calculatePriceRetail(stuff.stock[key].price);else for(var key in stuff.stock)key!=stuff.sort||stuff.stock[key].quantity||(stuff.sort=null,field+=" sort");if("stock"===field||"price"===field){stuff.priceForFilter=[];for(var key in stuff.stock)if(stuff.stock[key].quantity){var c=stuff.currency?stuff.currency:global.get("store").val.mainCurrency,price=c==global.get("store").val.mainCurrency?stuff.stock[key].price:Math.ceil10(stuff.stock[key].price/global.get("store").val.currency[c][0],-2);stuff.priceForFilter.push(price)}field+=" priceForFilter"}var o={_id:stuff._id};field.split(" ").forEach(function(el){if(el.indexOf(".")>-1){var ks=el.split(".");if(ks.length){for(var d=$scope.item,i=0;i<ks.length;i++)d[ks[i]]&&(d=d[ks[i]]);d&&!d._id&&(o[el]=d)}}else o[el]=stuff[el]}),"archived"==field&&(stuff.archived?o.archivedDate=Date.now():o.archivedDate=null,field+=" archivedDate"),Stuff.Items.save({update:field},o,function(res){$scope.growlNotification="сохранено",global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})}function deleteSlideStuff(image,index){Photo.deleteFiles("Stuff",[image.img]).then(function(response){$scope.item.imgs.splice(index,1),$scope.saveField($scope.item,"imgs")},function(err){console.log(err)})}function editSlideStuff(slide,index){$uibModal.open({animation:!0,templateUrl:"components/stuff/modal/editSlide.html",controller:function(slide,$uibModalInstance){var self=this;self.item=slide,self.ok=function(){console.log(self.item),$uibModalInstance.close(self.item)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl",resolve:{slide:function(){return slide}}}).result.then(function(slide){console.log(slide),$scope.saveField($scope.item,"imgs")},function(){})}function changeStock(stuff,tag){stuff.stock&&stuff.stock[tag._id]&&(stuff.stock[tag._id].quantity=tag.quantity,saveField(stuff,"stock"))}$scope.$ctrl={},$scope.$ctrl.lang=global.get("store").val.lang,$scope.$ctrl.deleteSlideStuff=deleteSlideStuff,$scope.$ctrl.editSlideStuff=editSlideStuff,$scope.Items=Stuff.Items,$scope.$ctrl.Items=Stuff.Items,$scope.global=global,$scope.$stateParams=$stateParams,$scope.item={name:"name",artikul:"",index:0,price:0,minQty:0,maxQty:0},$scope.unitOfMeasure=global.get("store").val.unitOfMeasure,$scope.$ctrl.listOfBlocksForStuffDetailBlocks=listOfBlocksForStuffDetailBlocks,$scope.$ctrl.listOfBlocks=angular.copy(listOfBlocksForAll),$scope.$ctrl.addBlock=addBlock,$scope.$ctrl.deleteBlock=deleteBlock,$scope.$ctrl.saveField=saveFieldBlocks,$scope.$ctrl.saveFieldStuff=saveField,
$scope.$ctrl.type="Stuff",$scope.$ctrl.changeStock=changeStock,$scope.$ctrl.refreshBlocks=refreshBlocks,$scope.$ctrl.loadVideo=loadVideo,$scope.$ctrl.deleteVideo=deleteVideo,$scope.$ctrl.animationTypes=animationTypes,$scope.$ctrl.tinymceOption={plugins:"code print preview fullpage searchreplace autolink directionality  visualblocks visualchars fullscreen image link media template codesample table charmap hr pagebreak nonbreaking anchor toc insertdatetime advlist lists textcolor wordcount  imagetools  contextmenu colorpicker textpattern help",toolbar:"code | formatselect | bold italic strikethrough forecolor backcolor | link | alignleft aligncenter alignright alignjustify  | numlist bullist outdent indent  | removeformat | code "};var reload=!1;switch($stateParams.block?$scope.block=$stateParams.block:$scope.block="mainInfo",$scope.cnahgeBlock=function(block){$scope.block=block,$location.search("block",block)},$scope.textAngularToolBar="[['h1','h2','h3'],['bold','italics']]",self.minDurationForService=global.get("store").val.seller.minDurationForService||15,$scope.deltaTimePart=1,self.minDurationForService){case 30:$scope.deltaTimePart=2;break;case 60:$scope.deltaTimePart=4;break;case 90:$scope.deltaTimePart=6;break;case 120:$scope.deltaTimePart=8;break;default:$scope.deltaTimePart=1}$scope.slider={value:0,options:{ceil:12,floor:0,showSelectionBar:!0,showTicks:!0,getTickColor:function(value){return value<3?"red":value<6?"orange":value<9?"yellow":"#2AE02A"},onChange:function(){$scope.item.timePart=$scope.slider.value*$scope.deltaTimePart,saveField($scope.item,"timePart")}}},$scope.$on("changeLang",function(){activate()}),$scope.$ctrl.paginate1={rows:5,page:0,items:0},activate(),$scope.saveField=saveField,$scope.selectCategory=function(){$q.when().then(function(){return Category.select()}).then(function(selectedCategory){(!$scope.item.category||$scope.item.category[0]&&selectedCategory._id!=$scope.item.category[0]._id)&&Category.get({_id:selectedCategory._id},function(res){if($scope.item.category=[res],res.mp&&"object"==typeof res.mp)for(var key in res.mp)$scope.item.category.push(res.mp[key]);console.log($scope.item.category),$scope.item.setTagsValue();var brandsArr=$scope.item.category[0].brands.map(function(el){return el._id}),tagsArr=$scope.item.category[0].filters.reduce(function(tags,el){return el.tags.forEach(function(t){tags.push(t._id)}),tags},[]),link="/"+selectedCategory.linkData.groupUrl+"/"+selectedCategory.linkData.categoryUrl+"/"+$scope.item.url,o={_id:$scope.item._id,category:$scope.item.category.map(function(c){return c._id||c}),link:link},field="category link";$scope.item.brand&&$scope.item.brand._id&&brandsArr.indexOf($scope.item.brand._id)<0&&($scope.item.brand=null,$scope.item.brandTag=null,field+=" brand brandTag",o.brnad=null,o.brandTag=null);for(var oldLength=$scope.item.tags.length,i=0;i<$scope.item.tags.length;i++)tagsArr.indexOf($scope.item.tags[i])<0&&(console.log($scope.item.tags[i]),$scope.item.tags.splice(i,1),i--);oldLength!=$scope.item.tags.length&&(field+=" tags",o.tags=$scope.item.tags),$scope.saveField(o,field)})})};var editBody=$document.find("#filterBlock").eq(0);$scope.selectFilter=function(filter,tags){$uibModal.open({animation:!0,templateUrl:"components/selectCategoryModal/selectFilterModal.html",controller:"selectFilterModalCtrl",size:"sm",appendTo:editBody,resolve:{filter:function(){return filter},tags:function(){return tags}}}).result.then(function(selectedTags){},function(){$scope.item.tags=[],$scope.item.category[0].filters.length&&$scope.item.category[0].filters.forEach(function(filter){filter.tags.forEach(function(tag){tag.set&&$scope.item.tags.push(tag._id)})}),$scope.saveField($scope.item,"tags")})},$scope.selectBrand=function(){$uibModal.open({animation:!0,templateUrl:"components/selectCategoryModal/selectBrandModal.html",controller:function($scope,$uibModalInstance,brandItem,brands){$scope.brandItem=brandItem,$scope.brands=brands,$scope.cancel=function(){$uibModalInstance.dismiss("cancel")},$scope.ok=function(brandItem){$uibModalInstance.close(brandItem)}},size:"sm",resolve:{brandItem:function(){return $scope.item.brand&&$scope.item.brand._id?$scope.item.brand._id:null},brands:function(){return $scope.item.category[0]&&$scope.item.category[0].brands?$scope.item.category[0].brands:[]}}}).result.then(function(selectedBrand){(!$scope.item.brand||$scope.item.brand&&selectedBrand!=$scope.item.brand._id)&&($scope.item.brandTag=null,selectedBrand?Brands.get({id:selectedBrand},function(res){$scope.item.brand=res}):$scope.item.brand=selectedBrand,$scope.saveField({_id:$scope.item._id,brand:selectedBrand,brandTag:$scope.item.brandTag},"brand brandTag"))},function(){})},$scope.selectBrandTag=function(){$uibModal.open({animation:!0,templateUrl:"components/selectCategoryModal/selectBrandTagModal.html",controller:"selectBrandTagModalCtrl",size:"sm",resolve:{brandTag:function(){return $scope.item.brandTag||null},brandTags:function(){return $scope.item.brand.tags||null}}}).result.then(function(selectedBrandTag){selectedBrandTag!=$scope.item.brandTag&&($scope.item.brandTag=selectedBrandTag,$scope.saveField({_id:$scope.item._id,brandTag:$scope.item.brandTag},"brandTag"))},function(){})},$scope.setAddInfos=function(filter,currentAddInfo){$q.when().then(function(){return AddInfo.editTable(filter)}).then(function(){getAddInfos()}).catch(function(){getAddInfos()})},$scope.backState=function(){reload&&($rootScope.reloadStuffId=$scope.item._id),$rootScope.$state.go("frame.stuffs",$rootScope.$stateParams,{reload:reload})},$scope.getUrlParams=function(stuff){return $scope.stuff.getUrlParams.call(stuff)},$scope.movedImage=function(){$timeout(function(){$scope.item.gallery.forEach(function(el,i){el.index=i}),$scope.Items.save({update:"gallery"},{_id:$scope.item._id,gallery:$scope.item.gallery})},100)},$scope.deleteImage=function(images,index){var files=[];images&&(images.img&&files.push(images.img),images.thumb&&files.push(images.thumb),images.thumbSmall&&files.push(images.thumbSmall));$scope.item._id;$q.when().then(function(){return Photo.deleteFiles("Stuff",files)}).then(function(){$scope.item.gallery.splice(index,1),$scope.Items.save({update:"gallery"},{_id:$scope.item._id,gallery:$scope.item.gallery})}).catch(function(err){err=err.data||err,exception.catcher("удаление файла")(err)})},$scope.$ctrl.moment=moment,$scope.$ctrl.createNewComment=function(){$q.when().then(function(){return Comments.create()}).then(function(res){var newComment={text:res,stuff:$scope.item._id,user:global.get("user").val._id};return Comments.save(newComment).$promise}).then(function(){return $scope.$ctrl.getComments(0)}).catch(function(err){err=err.data||err,exception.catcher("создание комментария")(err)})},$scope.$ctrl.getComments=function(page){0===page&&($scope.$ctrl.paginate1.page=page);var query={stuff:$scope.item._id};return Comments.getList($scope.$ctrl.paginate1,query).then(function(data){return $scope.$ctrl.comments=data,$scope.$ctrl.comments}).catch(function(err){err=err.data||err,exception.catcher("получение списка")(err)})},$scope.$ctrl.deleteComment=function(id){$q.when().then(function(){return Comments.delete({_id:id}).$promise}).then(function(){return $scope.$ctrl.getComments(0)}).catch(function(err){err=err.data||err,exception.catcher("удаление комментария")(err)})},$scope.$ctrl.saveCommentField=function(item,field){$q.when().then(function(){var o={_id:item._id};return o[field]=item[field],Comments.save({update:field},o).$promise}).catch(function(err){err=err.data||err,exception.catcher("схранение комментария")(err)})},$scope.$ctrl.setBigIndex=function(checked){$scope.item.index=checked?99999:1,$scope.saveField($scope.item,"index")}}}}]),driveSaleCtrl.$inject=["$scope","$element","$uibModal"],driveRetailCtrl.$inject=["$scope","$element","$uibModal"],editPriceSettingModalCtrl.$inject=["data","field","$uibModalInstance"],angular.module("gmall.directives").directive("stuffsAdminListWithPaginate",["$rootScope","Stuff","$timeout","$q","Sections","createStuffService","queryFromUrlService","filterStuffsListService","FilterTags","Filters",function($rootScope,Stuff,$timeout,$q,Sections,createStuffService,queryFromUrlService,filterStuffsListService,FilterTags,Filters){return{restrict:"E",scope:{query:"=",rate:"=",mobile:"@"},templateUrl:"components/stuff/stuffsAdminListWithPaginate.html",link:function($scope,element,attrs,ctrl){function prepareQueryForRequest(queryStart){var query=[];for(var key in queryStart)if(queryStart[key])if("tags"==key){var qu=[];for(var key2 in queryStart[key]){var obj=queryStart[key][key2],q=[];obj&&obj.length&&(obj.forEach(function(objT){q.push({tags:objT})}),q.length>1?(q={$or:q},qu.push(q)):(q=q[0],qu.push(q)))}qu.length&&(1==qu.length?query.push(qu[0]):query.push({$and:qu}))}else{var obj={};obj[key]=queryStart[key],query.push(obj)}return query=1==query.length?JSON.stringify(query[0]):query.length>1?JSON.stringify({$and:query}):{}}var $state=$rootScope.$state;$rootScope.$stateParams;$scope.global=$rootScope.global,setTimeout(function(){$rootScope.displaySlideMenu=!0},400);var query,queryForFilter;$scope.paginate={page:0,rows:20,totalItems:0},$scope.newStuff={name:"",actived:!1},$scope.saveStuff=function(stuff,field){var f=field.split(" "),o={_id:stuff._id};f.forEach(function(el){o[el]=stuff[el]}),Stuff.Items.save({update:field},o,function(res){console.log(res),"index"==f[0]&&$scope.getList($scope.paginate.page,$scope.paginate.rows,"reload")})},$scope.getList=function(page,rows,reload){return $scope.paginate.page!=page&&($scope.paginate.page=page),$q(function(resolve,reject){var queryString;queryString=reload?query:$scope.query,Stuff.getList(queryString,null,page,rows,$scope.paginate).then(function(res){if($scope.items=res,$scope.newStuff.index=$scope.items&&$scope.items[0]?$scope.items[0].index:1,!reload){try{query=JSON.parse($scope.query)}catch(err){query={}}$scope.query=null}resolve()},function(err){reject(err)})})};$scope.getUrlParams=Stuff.getUrlParams,$scope.getCategoryName=Stuff.getCategoryName,$scope.getBrandName=Stuff.getBrandName,$scope.reloadList=function(){$scope.getList($scope.paginate.page,$scope.paginate.rows,"reload")},$scope.searchStuff=function(artikul){if(artikul&&!(artikul.length<3)){artikul=artikul.substring(0,20),$state.current.reloadOnSearch=!0;var o={groupUrl:"group",categoryUrl:"category",searchStr:artikul.substring(0,20),queryTag:null,brand:null,brandTag:null,categoryList:null};$state.go($state.current.name,o,{reload:!0})}},$scope.filterList=function(){$q.when().then(function(){return filterStuffsListService.setFilters(queryForFilter)}).then(function(query){return queryForFilter=query,$scope.query=prepareQueryForRequest(query),$scope.getList($scope.paginate.page,$scope.paginate.rows)}).then(function(){}).catch(function(err){console.log(err)})},$scope.cloneStuff=function(stuff){var newStuff=angular.copy(stuff);$q.when().then(function(){return createStuffService.cloneStuff(newStuff,!0)}).then(function(stuff){return console.log($scope.newStuff==stuff),$scope.newStuff=stuff,$scope.getList($scope.paginate.page,$scope.paginate.rows,"reload")}).then(function(){var url=newStuff.url;$state.go("frame.stuffs.stuff",{groupUrl:"group",categoryUrl:"category",stuffUrl:url})}).catch(function(err){console.log(err)})},$scope.createNewStuff=function(){$q.when().then(function(){return createStuffService.cloneStuff($scope.newStuff)}).then(function(stuff){return console.log($scope.newStuff==stuff),$scope.newStuff=stuff,$scope.getList($scope.paginate.page,$scope.paginate.rows,"reload")}).then(function(){var url=$scope.newStuff.url;$scope.newStuff={name:"",actived:!1},$state.go("frame.stuffs.stuff",{groupUrl:"group",categoryUrl:"category",stuffUrl:url})}).catch(function(err){console.log(err)})},$scope.deleteStuff=function(stuff){confirm("удалить???")&&Stuff.Items.delete({_id:stuff._id},function(res){$scope.getList($scope.paginate.page,$scope.paginate.rows,"reload")})},$q.when().then(function(){return queryFromUrlService.get()}).then(function(query){return queryForFilter=query,$scope.query=prepareQueryForRequest(query),$scope.getList($scope.paginate.page,$scope.paginate.rows)}).then(function(){return FilterTags.getFilterTags()}).then(function(filterTags){$scope.filterTags=filterTags}).then(function(){return Filters.getFilters()}).then(function(filters){$scope.filters=filters}).catch(function(err){console.log(err)}),$scope.getTagName=function(_id){if(_id)return $scope.filterTags.getOFA("_id",_id).name||null},$scope.getFilterName=function(_id){return $scope.filters.getOFA("_id",_id).name||null},$scope.changeSortOfStuff=function(stuff){var sort=stuff.stock[stuff.sort];stuff.price=sort.price,stuff.priceSale=sort.priceSale,stuff.retail=sort.retail},$scope.filterSorts=function(sort){return sort.value.quantity},$scope.onSelected=function(){setTimeout(function(){$(":focus").blur()})}}}}]),angular.module("gmall.directives").directive("filterForStuffs",["$rootScope","global","$q","$location","$section","Collection","Sections","Filter","FilterTags","Brands","Category",function($rootScope,global,$q,$location,$section,Collection,Sections,Filter,FilterTags,Brands,Category){return{scope:{query:"=",section:"=",admin:"@"},restrict:"E",templateUrl:"components/stuff/filterForStuffs.html",link:function($scope,element,attrs){function getTagFromCategoriesList(tag,field){var category=$scope.filterDirective.category;if(category&&category.filters&&category.filters.length)for(var ii=0,ll=category.filters.length;ii<ll;ii++){var filter=category.filters[ii];if(filter&&filter.tags&&filter.tags.length)for(var iii=0,lll=filter.tags.length;iii<lll;iii++)if(filter.tags[iii][field]==tag)return filter.tags[iii]}}function _setBrand(brandId,filed){brandId&&$scope.filterDirective.brands?($scope.filterDirective.brand=$scope.filterDirective.brands.getObjectFromArray(filed,brandId),$scope.filterDirective.brand?($scope.filterDirective.query.brand=$scope.filterDirective.brand._id,$location.search("brand",$scope.filterDirective.brand.url),$scope.filterDirective.brandCollections=$scope.filterDirective.brand.tags):($scope.filterDirective.brandCollections=[],$location.search("brand",null))):($scope.filterDirective.brandCollections=[],$location.search("brand",null))}function _setBrandTag(brandTagId,filed){if(brandTagId&&$scope.filterDirective.brandCollections){var brandTag=$scope.filterDirective.brandCollections.getObjectFromArray(filed,brandTagId);brandTag?($scope.filterDirective.query.brandTag=brandTag._id,$location.search("brandTag",brandTag.url)):$location.search("brandTag",null)}else $location.search("brandTag",null)}function _setFilterTagsUrl(){if($scope.filterDirective.filterTags&&$scope.filterDirective.filterTags.length){var queryTag=$scope.filterDirective.filterTags.map(function(tag){return tag.url}).join("+");$location.search("queryTag",queryTag||null)}else $location.search("queryTag",null)}function _getQueryTag(){var arr=[];return $scope.filterDirective.query.tags.forEach(function(tags){tags.length&&tags.forEach(function(tag){arr.push(tag)})}),arr}console.log("??????????????");var $state=$rootScope.$state,$stateParams=$rootScope.$stateParams;$scope.filterDirective={},$scope.filterDirective.query={section:"",brand:"",category:"",tags:[],artikul:$stateParams.searchStr?$stateParams.searchStr.clearTag(20):"",brandTag:""},$q.when().then(function(){return Sections.getSections()}).then(function(sections){var q=$q.defer();return"brand"!=$stateParams.groupUrl&&"group"!=$stateParams.groupUrl?($stateParams.parentGroup?$scope.parentSection=Sections.getParentSection($stateParams.parentGroup):$scope.parentSection=Sections.getParentSection($stateParams.groupUrl),"allCategories"==$stateParams.categoryList||"category"!=$stateParams.categoryUrl?($scope.filterDirective.categories=$scope.parentSection.categories,$scope.filterDirective.sectionCategories=$scope.filterDirective.categories.map(function(el){return el._id}),"category"!=$stateParams.categoryUrl?Category.get({id:$stateParams.categoryUrl},function(res){$scope.filterDirective.query.category=res._id,$scope.filterDirective.category=res,$scope.filterDirective.category.brands&&$scope.filterDirective.category.brands.length&&($scope.filterDirective.brands=$scope.filterDirective.category.brands),q.resolve()}):q.resolve()):($scope.filterDirective.sectionCategories=Sections.getEmbededCategories($scope.parentSection,[]).map(function(el){return el._id}),$scope.filterDirective.sectionCategories.length||($scope.filterDirective.sectionCategories=[null]),q.resolve())):q.resolve(),q.promise}).then(function(){console.log($scope.filterDirective.brands);var q=$q.defer();return $stateParams.brand&&!$scope.filterDirective.brands?Brands.query(function(res){res.shift(),$scope.filterDirective.brands=res,q.resolve()}):q.resolve(),q.promise}).then(function(){_setBrand($stateParams.brand,"url"),_setBrandTag($stateParams.brandTag,"url")}).then(function(){var q=$q.defer();if($stateParams.queryTag){var queryTags=$stateParams.queryTag.split("+");queryTags=queryTags.filter(function(item,pos){return queryTags.indexOf(item)==pos}),$scope.filterDirective.categories?($scope.filterDirective.filterTags=queryTags.map(function(tag){return getTagFromCategoriesList(tag,"url")}).filter(function(tag){return tag}),q.resolve()):FilterTags.getTagsByUrl(queryTags,function(res){$scope.filterDirective.filterTags=res,q.resolve()})}else q.resolve();return q.promise}).then(function(){_setFilterTagsUrl()}).then(function(){$scope.filterDirective.query.category&&$scope.filterDirective.category?$scope.filterDirective.category.filters&&$scope.filterDirective.category.filters.length&&($scope.filterDirective.category.filters.forEach(function(item,i){$scope.filterDirective.filterTags&&$scope.filterDirective.filterTags.length&&$scope.filterDirective.filterTags.forEach(function(tag){tag.filter==item._id&&($scope.filterDirective.query.tags[i]||($scope.filterDirective.query.tags[i]=[]),$scope.filterDirective.query.tags[i].push(tag._id))})}),$scope.filterDirective.filters=$scope.filterDirective.category.filters):$scope.filterDirective.filterTags&&$scope.filterDirective.filterTags.length&&($scope.filterDirective.query.tags[0]=[],$scope.filterDirective.filterTags.forEach(function(tag){$scope.filterDirective.query.tags[0].push(tag._id)}))}).then(function(){$scope.filterDirective.getQuery()}).catch(function(err){console.log(err)}),$scope.filterDirective.getQuery=function(){var query=[];global.get("nostore").val&&query.push({tags:{$nin:[global.get("nostore").val._id]}});for(var key in $scope.filterDirective.query)if($scope.filterDirective.query[key])if("tags"==key){var qu=[];$scope.filterDirective.query[key].filter(function(){return!0});$scope.filterDirective.query[key].forEach(function(obj,i){var q=[];obj&&obj.length&&(obj.forEach(function(objT){q.push({tags:objT})}),q.length>1?(q={$or:q},qu.push(q)):(q=q[0],qu.push(q)))}),qu.length&&(1==qu.length?query.push(qu[0]):query.push({$and:qu}))}else{var obj={};obj[key]=$scope.filterDirective.query[key],query.push(obj)}else if("category"==key&&$scope.filterDirective.sectionCategories&&$scope.filterDirective.sectionCategories.length){var obj={};obj.category={$in:$scope.filterDirective.sectionCategories},query.push(obj)}return query=1==query.length?JSON.stringify(query[0]):query.length>1?JSON.stringify({$and:query}):{},void($scope.query=query)},$scope.filterDirective.changeFilter=function(reloadController){if(reloadController){if($scope.filterDirective.category&&$scope.filterDirective.query.category==$scope.filterDirective.category._id)return;if($scope.filterDirective.query.category){var categoryUrl=$scope.filterDirective.categories.getObjectFromArray("_id",$scope.filterDirective.query.category);categoryUrl=categoryUrl?categoryUrl.url:"category",$location.search("categoryList",null)}else{var categoryUrl="category";$location.search("categoryList","allCategories")}$state.current.reloadOnSearch=!0;var o={groupUrl:$stateParams.groupUrl,categoryUrl:categoryUrl,queryTag:void 0,brand:void 0,brandTag:void 0};$state.go($state.current.name,o,{reload:!0}),$state.current.reloadOnSearch=!1}else $scope.filterDirective.query.artikul="",_setBrand($scope.filterDirective.query.brand,"_id"),_setBrandTag($scope.filterDirective.query.brandTag,"_id"),$scope.filterDirective.filterTags=_getQueryTag().map(function(tag){return getTagFromCategoriesList(tag,"_id")}).filter(function(tag){return tag}),_setFilterTagsUrl(),$scope.filterDirective.getQuery()},$scope.filterDirective.clearFilter=function(){console.log("clear filetrs"),$scope.filterDirective.query.tags=[],$scope.filterDirective.changeFilter()}}}}]).directive("filterForStuffsClinic",["$rootScope","global","$q","$location","$section","Collection","Sections","Filter","FilterTags","Brands","Category",function($rootScope,global,$q,$location,$section,Collection,Sections,Filter,FilterTags,Brands,Category){return{scope:{query:"=",section:"=",admin:"@"},restrict:"E",templateUrl:"views/clinic/partials/stuff/filterForStuffs.html",link:function($scope,element,attrs){function getTagFromCategoriesList(tag,field){var category=$scope.filterDirective.category;if(category&&category.filters&&category.filters.length)for(var ii=0,ll=category.filters.length;ii<ll;ii++){var filter=category.filters[ii];if(filter&&filter.tags&&filter.tags.length)for(var iii=0,lll=filter.tags.length;iii<lll;iii++)if(filter.tags[iii][field]==tag)return filter.tags[iii]}}function _setBrand(brandId,filed){brandId&&$scope.filterDirective.brands?($scope.filterDirective.brand=$scope.filterDirective.brands.getObjectFromArray(filed,brandId),$scope.filterDirective.brand?($scope.filterDirective.query.brand=$scope.filterDirective.brand._id,$location.search("brand",$scope.filterDirective.brand.url),$scope.filterDirective.brandCollections=$scope.filterDirective.brand.tags):($scope.filterDirective.brandCollections=[],$location.search("brand",null))):($scope.filterDirective.brandCollections=[],$location.search("brand",null))}function _setBrandTag(brandTagId,filed){if(brandTagId&&$scope.filterDirective.brandCollections){var brandTag=$scope.filterDirective.brandCollections.getObjectFromArray(filed,brandTagId);brandTag?($scope.filterDirective.query.brandTag=brandTag._id,$location.search("brandTag",brandTag.url)):$location.search("brandTag",null)}else $location.search("brandTag",null)}function _setFilterTagsUrl(){if($scope.filterDirective.filterTags&&$scope.filterDirective.filterTags.length){var queryTag=$scope.filterDirective.filterTags.map(function(tag){return tag.url}).join("+");$location.search("queryTag",queryTag||null)}else $location.search("queryTag",null)}function _getQueryTag(){var arr=[];return $scope.filterDirective.query.tags.forEach(function(tags){tags.length&&tags.forEach(function(tag){arr.push(tag)})}),arr}var $state=$rootScope.$state,$stateParams=$rootScope.$stateParams;$scope.filterDirective={},$scope.filterDirective.query={section:"",brand:"",category:"",tags:[],artikul:$stateParams.searchStr?$stateParams.searchStr.clearTag(20):"",brandTag:""},$q.when().then(function(){return Sections.getSections()}).then(function(sections){var q=$q.defer();return"brand"!=$stateParams.groupUrl&&"group"!=$stateParams.groupUrl?($stateParams.parentGroup?$scope.parentSection=Sections.getParentSection($stateParams.parentGroup):$scope.parentSection=Sections.getParentSection($stateParams.groupUrl),"allCategories"==$stateParams.categoryList||"category"!=$stateParams.categoryUrl?($scope.filterDirective.categories=$scope.parentSection.categories,$scope.filterDirective.sectionCategories=$scope.filterDirective.categories.map(function(el){return el._id}),"category"!=$stateParams.categoryUrl?Category.get({id:$stateParams.categoryUrl},function(res){$scope.filterDirective.query.category=res._id,$scope.filterDirective.category=res,$scope.filterDirective.category.brands&&$scope.filterDirective.category.brands.length&&($scope.filterDirective.brands=$scope.filterDirective.category.brands),console.log($scope.filterDirective.brands),q.resolve()}):q.resolve()):($scope.filterDirective.sectionCategories=Sections.getEmbededCategories($scope.parentSection,[]).map(function(el){return el._id}),$scope.filterDirective.sectionCategories.length||($scope.filterDirective.sectionCategories=[null]),q.resolve())):q.resolve(),q.promise}).then(function(){var q=$q.defer();return $stateParams.brand&&!$scope.filterDirective.brands?Brands.query(function(res){res.shift(),$scope.filterDirective.brands=res,q.resolve()}):q.resolve(),q.promise}).then(function(){_setBrand($stateParams.brand,"url"),_setBrandTag($stateParams.brandTag,"url")}).then(function(){var q=$q.defer();if($stateParams.queryTag){var queryTags=$stateParams.queryTag.split("+");queryTags=queryTags.filter(function(item,pos){return queryTags.indexOf(item)==pos}),$scope.filterDirective.categories?($scope.filterDirective.filterTags=queryTags.map(function(tag){return getTagFromCategoriesList(tag,"url")}).filter(function(tag){return tag}),q.resolve()):FilterTags.getTagsByUrl(queryTags,function(res){$scope.filterDirective.filterTags=res,q.resolve()})}else q.resolve();return q.promise}).then(function(){_setFilterTagsUrl()}).then(function(){$scope.filterDirective.query.category&&$scope.filterDirective.category?$scope.filterDirective.category.filters&&$scope.filterDirective.category.filters.length&&($scope.filterDirective.category.filters.forEach(function(item,i){$scope.filterDirective.filterTags&&$scope.filterDirective.filterTags.length&&$scope.filterDirective.filterTags.forEach(function(tag){tag.filter==item._id&&($scope.filterDirective.query.tags[i]||($scope.filterDirective.query.tags[i]=[]),$scope.filterDirective.query.tags[i].push(tag._id))})}),$scope.filterDirective.filters=$scope.filterDirective.category.filters):$scope.filterDirective.filterTags&&$scope.filterDirective.filterTags.length&&($scope.filterDirective.query.tags[0]=[],$scope.filterDirective.filterTags.forEach(function(tag){$scope.filterDirective.query.tags[0].push(tag._id)}))}).then(function(){$scope.filterDirective.getQuery()}).catch(function(err){console.log(err)}),$scope.filterDirective.getQuery=function(){var query=[];global.get("nostore").val&&query.push({tags:{$nin:[global.get("nostore").val._id]}});for(var key in $scope.filterDirective.query)if($scope.filterDirective.query[key])if("tags"==key){var qu=[];$scope.filterDirective.query[key].filter(function(){return!0});$scope.filterDirective.query[key].forEach(function(obj,i){var q=[];obj&&obj.length&&(obj.forEach(function(objT){q.push({tags:objT})}),q.length>1?(q={$or:q},qu.push(q)):(q=q[0],qu.push(q)))}),qu.length&&(1==qu.length?query.push(qu[0]):query.push({$and:qu}))}else{var obj={};obj[key]=$scope.filterDirective.query[key],query.push(obj)}else if("category"==key&&$scope.filterDirective.sectionCategories&&$scope.filterDirective.sectionCategories.length){var obj={};obj.category={$in:$scope.filterDirective.sectionCategories},query.push(obj)}return query=1==query.length?JSON.stringify(query[0]):query.length>1?JSON.stringify({$and:query}):{},void($scope.query=query)},$scope.filterDirective.changeFilter=function(reloadController){if(reloadController){if($scope.filterDirective.category&&$scope.filterDirective.query.category==$scope.filterDirective.category._id)return;if($scope.filterDirective.query.category){var categoryUrl=$scope.filterDirective.categories.getObjectFromArray("_id",$scope.filterDirective.query.category);categoryUrl=categoryUrl?categoryUrl.url:"category",$location.search("categoryList",null)}else{var categoryUrl="category";$location.search("categoryList","allCategories")}$state.current.reloadOnSearch=!0;var o={groupUrl:$stateParams.groupUrl,categoryUrl:categoryUrl,queryTag:void 0,brand:void 0,brandTag:void 0};$state.go($state.current.name,o,{reload:!0}),$state.current.reloadOnSearch=!1}else $scope.filterDirective.query.artikul="",_setBrand($scope.filterDirective.query.brand,"_id"),_setBrandTag($scope.filterDirective.query.brandTag,"_id"),$scope.filterDirective.filterTags=_getQueryTag().map(function(tag){return getTagFromCategoriesList(tag,"_id")}).filter(function(tag){return tag}),_setFilterTagsUrl(),$scope.filterDirective.getQuery()},$scope.filterDirective.clearFilter=function(){console.log("clear filetrs"),$scope.filterDirective.query.tags=[],$scope.filterDirective.changeFilter()}}}}]),function(){function menuSectionHorizontal(){return{scope:{},restrict:"AE",bindToController:!0,controller:directiveMenu,controllerAs:"$ctrl",templateUrl:"components/menu/menuSectionHorizontel.html"}}function menuSectionHorizontalPug(){return{scope:{},restrict:"AE",bindToController:!0,controller:directiveMenu,controllerAs:"$ctrl"}}function menuBrandsHorizontalPug(){return{scope:{},restrict:"AE",bindToController:!0,controller:directiveMenuBrands,controllerAs:"$ctrl"}}function menuSectionVirtical(){return{scope:{},restrict:"AE",bindToController:!0,controller:directiveMenuV,controllerAs:"$ctrl",templateUrl:"components/menu/menuSectionVertical.html"}}function menuSectionVirticalPug(){return{scope:{},restrict:"AE",bindToController:!0,controller:directiveMenuV,controllerAs:"$ctrl"}}function menuBrandsVirticalPug(){return{scope:{},restrict:"AE",bindToController:!0,controller:directiveMenuVBrands,controllerAs:"$ctrl"}}function dropdownOnHover(){return{scope:{},restrict:"AE",bindToController:!0,link:directiveDropdownOnHover,controllerAs:"$ctrl"}}function directiveMenu(Sections,$state,$q,global,$rootScope,$timeout){function closeRest(){for(var i=0,l=innerDivsBrand.length;i<l;i++)innerDivsBrand[i].hide()}function bindHoverLi(li,ii){self.clickMenu?li.click(function(e){if($(e.target).hasClass("sibsection"))li.find(".section-in-section").each(function(i,li2){$(li2).hover(function(){1==self.dropDownCatalog?$(li2).find(".sub-menu").stop(!0,!1,!0).slideDown("slow"):2==self.dropDownCatalog?$(li2).find(".sub-menu").stop(!0,!1,!0).slideDown("fast"):$(li2).find(".sub-menu").stop(!0,!1,!0).show()},function(){1==self.dropDownCatalog?$(li2).find(".sub-menu").stop(!0,!1,!0).hide():(self.dropDownCatalog,$(li2).find(".sub-menu").stop(!0,!1,!0).hide())})});else{closeRest();for(var i=0,l=sectionElements.length;i<l;i++)sectionElements[i][0].id==li[0].id?1==self.dropDownCatalog?li.innerDiv.stop(!0,!1,!0).slideToggle("slow"):2==self.dropDownCatalog?li.innerDiv.stop(!0,!1,!0).slideToggle("fast"):li.innerDiv.stop(!0,!1,!0).toggle():1==self.dropDownCatalog?sectionElements[i].innerDiv.slideUp("slow"):2==self.dropDownCatalog?sectionElements[i].innerDiv.slideUp("fast"):sectionElements[i].innerDiv.hide()}}):(li.hover(function(){1==self.dropDownCatalog?li.innerDiv.stop(!0,!1,!0).slideDown("slow"):2==self.dropDownCatalog?li.innerDiv.stop(!0,!1,!0).slideDown("fast"):li.innerDiv.stop(!0,!1,!0).show()},function(){1==self.dropDownCatalog?li.innerDiv.stop(!0,!1,!0).slideUp("slow"):2==self.dropDownCatalog?li.innerDiv.stop(!0,!1,!0).slideUp("fast"):li.innerDiv.stop(!0,!1,!0).hide()}),li.find(".section-in-section").each(function(i,li2){$(li2).hover(function(){1==self.dropDownCatalog?$(li2).find(".sub-menu").stop(!0,!1,!0).slideDown("slow"):2==self.dropDownCatalog?$(li2).find(".sub-menu").stop(!0,!1,!0).slideDown("fast"):$(li2).find(".sub-menu").stop(!0,!1,!0).show()},function(){1==self.dropDownCatalog?$(li2).find(".sub-menu").stop(!0,!1,!0).hide():(self.dropDownCatalog,$(li2).find(".sub-menu").stop(!0,!1,!0).hide())})}))}var self=this;self.clickMenu=global.get("store").val.template.clickMenu,self.dropDownCatalog=global.get("store").val.template.dropDownCatalog,self.global=global;var sectionElements=[],innerDivs=[],innerDivsBrand=[];!function(){$q.when().then(function(){return Sections.getSections()}).then(function(sections){global.get("brands").val.forEach(function(sec,i){var el=$("#s"+sec._id),innerDiv=$(el).find("#innerDivBrand"+sec._id);innerDivsBrand.push(innerDiv)}),self.sections=sections.filter(function(el){return!el.parent&&0===el.level}),setTimeout(function(){var w=$(window).width();self.sections.forEach(function(sec,i){var el=$("#s"+sec._id),elJS=document.getElementById("s"+sec._id);document.getElementById
;var sec_element_offset=el.offset();if(sec_element_offset){var offsetLeft;elJS&&elJS.getBoundingClientRect&&(offsetLeft=pageXOffset+elJS.getBoundingClientRect().x),!offsetLeft&&elJS&&elJS.DOMRect&&(offsetLeft=pageXOffset+elJS.DOMRect.left,console.log("offsetLeft DOMRect",offsetLeft,sec_element_offset.left)),offsetLeft||(offsetLeft=sec_element_offset.left);var innerDiv=$("#innerDiv"+sec._id),container=innerDiv.find("div");container.find(".sub-menu"),el.innerDiv=innerDiv,innerDiv.css("left","-"+offsetLeft+"px"),bindHoverLi(el,i),sectionElements.push(el)}}),$(".innerDiv").width(w)},300)}).catch(function(err){console.log(err)})}(),$rootScope.$on("$stateChangeStart",function(ev){for(var i=0,l=innerDivs.length;i<l;i++)if(innerDivs[i][0]&&innerDivs[i].is(":hover")){sectionElements[i].unbind(),innerDivs[i].slideUp(function(){$timeout(function(){bindHoverLi(sectionElements[i],i)},700)});break}})}function directiveMenuV(Sections,$state,$q,global,$rootScope,$element){function bindHoverLi(li,ii){self.sections[ii]&&self.sections[ii].openCatalog||$(innerDivs[ii]).slideToggle(),console.log(li,ii,self.clickMenu),self.clickMenu?li.click(function(e){for(var i=0,l=innerDivs.length;i<l;i++)i==ii&&$(innerDivs[i]).stop(!0,!1,!0).slideToggle(300)}):li.hover(function(){$(innerDivs[ii]).stop(!0,!1,!0).slideToggle(300)})}var self=this;self.clickMenu=global.get("store").val.template.clickMenu,self.global=global;var sectionElements=[],innerDivs=[];!function(){$q.when().then(function(){return Sections.getSections()}).then(function(sections){self.sections=sections.filter(function(el){return!el.parent&&0===el.level&&!el.hideSection}),setTimeout(function(){self.sections.forEach(function(sec,i){var el=$("#s"+sec._id),innerDiv=el.children("div");innerDivs.push(innerDiv),bindHoverLi(el,i),sectionElements.push(el)});var innerUl=$element.find(".category-in-section");$(innerUl).each(function(i,section){var ul=$(section).find("ul");$(ul).slideToggle(),$(section).click(function(e){console.log("section",section),$(ul).stop(!0,!1,!0).slideToggle(300)})})},100)}).catch(function(err){console.log(err)})}()}function directiveMenuBrands(Sections,$state,$q,global,$rootScope,$timeout,$element){function closeRest(){for(var i=0,l=innerDivsSection.length;i<l;i++)innerDivsSection[i].hide()}function bindHoverLi(li,ii){self.clickMenu?li.click(function(e){closeRest();for(var i=0,l=sectionElements.length;i<l;i++)sectionElements[i][0].id==li[0].id?li.innerDiv.stop(!0,!1,!0).toggle():sectionElements[i].innerDiv.hide()}):li.hover(function(){li.innerDiv.stop(!0,!1,!0).show()},function(){li.innerDiv.stop(!0,!1,!0).hide()})}var self=this;self.clickMenu=global.get("store").val.template.clickMenu,self.global=global;var sectionElements=[],innerDivs=[],innerDivsSection=[];!function(){$q.when().then(function(){return Sections.getSections()}).then(function(sections){sections.forEach(function(sec,i){var el=$("#s"+sec._id),innerDiv=$(el).find("#innerDiv"+sec._id);innerDivsSection.push(innerDiv)}),self.brands=global.get("brands").val?global.get("brands").val:[],setTimeout(function(){var w=$(window).width(),index=0;self.brands.forEach(function(sec,i){if(sec.display){var el=$("#s"+sec._id),sec_element_offset=el.offset();if(sec_element_offset){var offsetLeft=sec_element_offset.left,innerDiv=$element.find("#innerDivBrand"+sec._id);el.innerDiv=innerDiv,innerDiv.css("left","-"+offsetLeft+"px"),bindHoverLi(el,index),sectionElements.push(el),index++}}}),$(".innerDiv").width(w)},100)}).catch(function(err){console.log(err)})}(),$rootScope.$on("$stateChangeStart",function(ev){for(var i=0,l=innerDivs.length;i<l;i++)if(innerDivs[i][0]&&innerDivs[i].is(":hover")){sectionElements[i].unbind(),innerDivs[i].slideUp(function(){$timeout(function(){bindHoverLi(sectionElements[i],i)},700)});break}})}function directiveMenuVBrands(Sections,$state,$q,global,$rootScope){function bindHoverLi(li,ii){$(innerDivs[ii]).slideToggle(),self.clickMenu?li.click(function(e){for(var i=0,l=innerDivs.length;i<l;i++)i==ii&&innerDivs[i].stop(!0,!1,!0).slideToggle(300)}):li.hover(function(){innerDivs[ii].stop(!0,!1,!0).slideToggle(300)})}var self=this;self.clickMenu=global.get("store").val.template.clickMenu,self.global=global;var sectionElements=[],innerDivs=[];!function(){self.brands=global.get("brands").val?global.get("brands").val:[],setTimeout(function(){var index=0;self.brands.forEach(function(sec,i){if(sec.display){var el=$("#s"+sec._id),innerDiv=el.children("div");innerDivs.push(innerDiv),bindHoverLi(el,index),sectionElements.push(el),index++}})},100)}()}function directiveDropdownOnHover(scope,element,arrts){function bindHover(){$(element).hover(function(){$(this).children("ul").stop(!0,!1,!0).slideToggle(200)})}!function(){$(element).children("ul").hide(),bindHover()}()}function slideMenuAfterScroll(global,$timeout,$rootScope){return{restrict:"A",link:function(scope,element,attrs){function scrollHandlerMenu1(){if(!menuHide||"home"==$rootScope.$state.current.name){var scrolled=window.pageYOffset||document.documentElement.scrollTop;scrolled>offset&&!done?(done=!0,$rootScope.$emit("hideMenu1AfterScroll"),$(element).css("top","-"+h+"px")):scrolled<offset&&done&&(done=!1,$rootScope.$emit("showMenu1AfterScroll"),$(element).css("top",0))}}function scrollHandlerMenu2(){if(!menuHide||"home"==$rootScope.$state.current.name){var scrolled=window.pageYOffset||document.documentElement.scrollTop;scrolled>offset&&!done?(done=!0,$(element).css("top",0)):scrolled<offset&&done&&(done=!1,$(element).css("top",h+"px"))}}function inverseNone(){logoInverse.css("display","none"),logo.css("display","block"),likesInverse.css("display","none"),likes.css("display","block"),cartInverse.css("display","none"),cart.css("display","block"),humbInverse.css("display","none"),humb.css("display","block")}function inverseBlock(){logo.css("display","none"),logoInverse.css("display","block"),likes.css("display","none"),likesInverse.css("display","block"),cart.css("display","none"),cartInverse.css("display","block"),humb.css("display","none"),humbInverse.css("display","block")}function listenScroll(){$(window).scroll(function(){if("home"==$rootScope.$state.current.name&&(!template.inverseColor.homePage||"home"==$rootScope.$state.current.name)){(window.pageYOffset||document.documentElement.scrollTop)>10?(element.addClass("inverseColor"),inverseBlock()):(element.removeClass("inverseColor"),inverseNone())}})}function listenBanner(){var el=document.getElementById("arrowDownDiv");if(el){var elOffsetY=$(el).offset().top;$(window).scroll(function(){if("home"==$rootScope.$state.current.name){var scrolled=window.pageYOffset||document.documentElement.scrollTop;$(el).height()+elOffsetY-10>scrolled?(element.removeClass("inverseColor"),inverseNone()):(element.addClass("inverseColor"),inverseBlock())}})}}var done,firstLook=!0,menu=attrs.slideMenuAfterScroll,menuHide=attrs.hideMenu,template=global.get("store").val.template,offset=199,h=$("#menu1-section").height();"menu2"==menu&&template.menu2.fixed&&template.menu2.is&&template.menu2.position,"menu1"==menu&&template.menu1.fixed&&"top"==template.menu1.position&&template.menu1.scrollSlide?$(window).scroll(scrollHandlerMenu1):"menu2"==menu&&template.menu1.fixed&&"top"==template.menu1.position&&"top"==template.menu2.position&&template.menu1.scrollSlide&&$(window).scroll(scrollHandlerMenu2);var logo,logoInverse,cart,cartInverse,humb,humbInverse,likes,likesInverse;template.inverseColor&&template.inverseColor.use&&(template.inverseColor.homePage&&function(){$rootScope.$on("$stateChangeSuccess",function(event,to,toParams,fromState,fromParams){var delay=0;firstLook&&(delay=500,firstLook=!1),$timeout(function(){"home"==to.name?(element.removeClass("inverseColor"),inverseNone()):(element.addClass("inverseColor"),inverseBlock())},delay)})}(),$timeout(function(){logo=$("#mainLogo"),logoInverse=$("#inverseLogo"),cart=$("#mainCart"),cartInverse=$("#inverseCart"),humb=$("#mainHumb"),humbInverse=$("#inverseHumb"),likes=$("#mainLikes"),likesInverse=$("#inverseLikes"),template.inverseColor.startScroll?listenScroll():template.inverseColor.firstBanner&&listenBanner()},300)),$rootScope.$on("$stateChangeSuccess",function(event,to,toParams,fromState,fromParams){menuHide&&("home"==to.name?($rootScope.$emit("showMenu1AfterScroll"),"menu1"==menu?$(element).css("top",0):$(element).css("top",h+"px")):($rootScope.$emit("hideMenu1AfterScroll"),"menu1"==menu?$(element).css("top","-"+h+"px"):$(element).css("top",0)))})}}}angular.module("gmall.directives").directive("menuSections",menuSectionHorizontal).directive("menuSectionsPug",menuSectionHorizontalPug).directive("menuBrandsPug",menuBrandsHorizontalPug).directive("menuSectionsVirtical",menuSectionVirtical).directive("menuSectionsVirticalPug",menuSectionVirticalPug).directive("menuBrandsVirticalPug",menuBrandsVirticalPug).directive("dropdownOnHover",dropdownOnHover).directive("slideMenuAfterScroll",slideMenuAfterScroll).directive("setFonAfterStartScroll",["$timeout","$state","$rootScope","global",function($timeout,$state,$rootScope,global){return{restrict:"A",link:function(scope,element,attr){var h1,h2,mainContentDiv=$("#mainContentDiv"),templ=global.get("store").val.template;$timeout(function(){h1=$("#menu1-section").outerHeight(),h2=$("#menu2-section").outerHeight(),h2&&(h1+=h2),global.get("store").val.template.menu1.hideMenuIfNotHome&&(h1=h2),h2=h1}),$(element).hover(function(){$rootScope.$emit("menuHoverIn")},function(){$rootScope.$emit("menuHoverOut")}),$rootScope.$on("menuHoverIn",function(){global.get("store").val.template.menu1.BGColorOnHover&&$(element).addClass("menuColor")}),$rootScope.$on("menuHoverOut",function(){global.get("store").val.template.menu1.BGColorOnHover&&!global.get("store").val.template.menu1.background&&window.pageYOffset<5&&"home"==$rootScope.$state.current.name&&$(element).removeClass("menuColor")}),$rootScope.$on("$stateChangeStart",function(event,to){"home"!=to.name?(templ.menu1.marginOther||$(element).addClass("menuColor"),templ.margin||$timeout(function(){"left"!=templ.menu1.position&&"right"!=templ.menu1.position&&!templ.menu1.marginOther&&templ.menu1.fixed&&mainContentDiv.css("margin-top",h1)})):(global.get("store").val.template.menu1.background||(global.get("store").val.template.menu1.BGColorOnHover?window.pageYOffset<5&&$(element).removeClass("menuColor"):$(element).removeClass("menuColor")),templ.margin||"left"!=templ.menu1.position&&"right"!=templ.menu1.position&&mainContentDiv.css("margin-top",0))});var is=!1;attr.setFonAfterStartScroll?$(element).addClass("menuColor"):global.get("store").val.template.menu1.BGColorOnHover&&$(window).scroll(function(){window.pageYOffset>5?is||(is=!0,$(element).addClass("menuColor")):"home"==$rootScope.$state.current.name&&(is=!1,$(element).removeClass("menuColor"))})}}}]).directive("setMenuColorClass",["$rootScope",function($rootScope){return{restrict:"A",link:function(scope,element,attr){console.log(element),$rootScope.$on("$stateChangeStart",function(event,to){"home"!=to.name?$(element).addClass("menuColor"):window.pageYOffset<5&&$(element).removeClass("menuColor")}),$rootScope.$on("menuHoverIn",function(){console.log("menuHoverIn",console.log(element)),$(element).addClass("menuColor")}),$rootScope.$on("menuHoverOut",function(){"home"==$rootScope.$state.current.name&&window.pageYOffset<5&&$(element).removeClass("menuColor")}),$(window).scroll(function(){"home"==$rootScope.$state.current.name&&(window.pageYOffset>5?$(element).addClass("menuColor"):$(element).removeClass("menuColor"))})}}}]).directive("marginMainContent22",function(global,$timeout){return{restrict:"A",link:function(scope,element,attrs){var mainContentDiv=$("#mainContentDiv"),templ=global.get("store").val.template;$timeout(function(){templ.margin&&"left"!=templ.menu1.position&&"right"!=templ.menu1.position&&$timeout(function(){var m1=$("#menu1-section"),h1=m1.height(),m2=$("#menu2-section");if(m2)var h2=m2.height();h2&&(h1+=h2),mainContentDiv.css("margin-top",h1)})},100)}}}).directive("marginMainContent",function($rootScope,$timeout,global){return{restrict:"A",link:function(scope,element,attrs){$rootScope.$on("$stateChangeSuccess",function(ev,to,toParams,from,fromParams){$timeout(function(){if(global.get("store").val.template.menu1.fixed){var h=$(document.body).find("#firstDiv").height(),vh=Math.max(document.documentElement.clientHeight,window.innerHeight||0),delta=vh-h;if(delta>30){var mt=$(element[0].querySelector("#mainContentDiv")).css("margin-top");mt=mt?parseInt(mt,10):0;var elH=element.height();element.css("min-height",elH+delta)}}},200)})}}}).directive("footer22",function($timeout,$rootScope){return{restrict:"E",link:function(scope,element){$rootScope.$on("$stateChangeStart",function(event,to,toParams,fromState,fromParams){element.css("position","static")}),$rootScope.$on("$stateChangeSuccess",function(ev,to,toParams,from,fromParams){$timeout(function(){})})}}}),directiveMenu.$inject=["Sections","$state","$q","global","$rootScope","$timeout"],directiveMenuV.$inject=["Sections","$state","$q","global","$rootScope","$element"],directiveMenuBrands.$inject=["Sections","$state","$q","global","$rootScope","$timeout","$element"],directiveMenuVBrands.$inject=["Sections","$state","$q","global","$rootScope"]}(),angular.module("gmall.services").service("Filters",function($resource,$q,global,$uibModal){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}paginate||(paginate={page:0});var data={perPage:paginate.rows,page:paginate.page,query:query};return global.get("crawler")&&global.get("crawler").val&&(data.subDomain=global.get("store").val.subDomain),Items.query(data).$promise.then(getListComplete)}function getItem(id){function getItemComplete(response){return response&&response.blocks&&response.blocks.length&&response.blocks.forEach(function(b){"stuffs"==b.type&&(b.stuffs&&b.stuffs.length?b.imgs=b.stuffs.map(function(s){return s.gallery&&s.gallery.length&&s.gallery[0].img&&(s.img=s.gallery[0].img),s}):b.imgs=[])}),response}return Items.get({_id:id}).$promise.then(getItemComplete)}function returnFilters(resolve){pending?setTimeout(function(){returnFilters(resolve)},300):resolve(filters)}function reloadItems(){pending=!0,Items.query(function(res){res.shift(),filters=res,global.set("filters",filters),pending=!1})}function selectFilter(){return $q(function(resolve,reject){var options={animation:!0,templateUrl:"components/filters/selectFilter.html",controller:selectFilterCtrl,size:"lg",controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(selected){resolve(selected)},function(){console.log("Modal dismissed at: "+new Date),reject()})})}function selectFilterCtrl(Filters,$uibModalInstance,$q,global){var self=this;self.lang=global.get("lang").val,$q.when().then(function(){return Filters.getFilters()}).then(function(filters){self.filters=filters}),self.cancel=function(){$uibModalInstance.dismiss("cancel")},self.ok=function(filter){$uibModalInstance.close(filter)}}var Items=$resource("/api/collections/Filter/:_id",{_id:"@_id"}),filters=null,pending=!0;this.query=Items.query,this.get=Items.get,this.delete=Items.delete,this.save=Items.save,this.select=selectFilter,this.reloadItems=reloadItems,this.getItem=getItem,this.getList=getList,this.getFilters=function(){return $q(function(resolve,reject){if(global.get("filters")&&global.get("filters").val)return filters||(filters=global.get("filters").val),resolve(global.get("filters").val);pending?setTimeout(function(){returnFilters(resolve)},300):filters?resolve(filters):(pending=!0,Items.query(function(res){res.shift(),filters=res,pending=!1,resolve(filters)},function(err){pending=!1,reject(err)}))})},global.get("filters")&&global.get("filters").val||Items.query(function(res){res.shift(),filters=res,global.get("filters")&&!global.get("filters").val&&global.set("filters",filters),pending=!1}),selectFilterCtrl.$inject=["Filters","$uibModalInstance","$q","global"]});var __filterTagsO=_filterTagsO,__filterTags=_filterTags;angular.module("gmall.services").service("FilterTags",filterTagsService),filterTagsService.$inject=["$resource","$uibModal","$q","global","$timeout","Sections"],angular.module("gmall.services").service("SelectFilterTags",["$q","$uibModal",function($q,$uibModal){function bindFilterTagToModelCtrl(Filters,$uibModalInstance){var self=this;$q.when().then(function(){return Filters.getFilters()}).then(function(filters){self.filters=filters}),self.cancel=function(){$uibModalInstance.dismiss("cancel")},self.ok=function(filterTag){$uibModalInstance.close(filterTag)}}this.bindFiterTagToModel=function(){return $q(function(resolve,reject){var options={animation:!0,templateUrl:"components/filters/bindFilterTagToModel.html",controller:bindFilterTagToModelCtrl,size:"lg",controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(selectedFilterTag){resolve(selectedFilterTag)},function(){console.log("Modal dismissed at: "+new Date),reject()})})}}]),angular.module("gmall.directives").directive("filtersList",[function(){function filterCtrl($anchorScroll,Filters,FilterTags,$q,SelectCategory,$state,$timeout,$scope,global,Confirm,$http,$uibModal,exception,Stuff){function activate(){$q.when().then(function(){return Filters.getList({page:0,rows:200},{})}).then(function(res){self.filters=res}).then(function(){return FilterTags.query().$promise}).then(function(res){res.shift(),self.filterTags=res}).then(function(){self.filters.forEach(function(filter){filter.tags||(filter.tags=[]),filter.tags.length?filter.tags.forEach(function(tag,i){tag.index=i}):self.filterTags.forEach(function(tag){tag.filter==filter._id&&(tag.index=filter.tags.length,filter.tags.push(tag))})})})}function saveTagPromise(tag,field){return $q(function(res,rej){var o={_id:tag._id};o[field]=tag[field],FilterTags.save({update:field},o,function(){res()},function(err){rej(err)})})}function setCountData(filter){$uibModal.open({animation:!0,templateUrl:"components/filters/modal/countData.html",controller:function($uibModalInstance,$q,saveField,filter){var self=this;self.filter=filter,self.ok=function(){$uibModalInstance.close()},self.cancel=function(){$uibModalInstance.dismiss()},self.saveField=function(field){saveField(filter,field)}},resolve:{saveField:function(){return self.saveField},filter:function(){return filter}},controllerAs:"$ctrl",size:"lg"})}console.log("lskdjfl");var self=this;self.$state=$state,$scope.$on("changeLang",function(){activate()}),activate(),self.setCountData=setCountData,self.newFilter={name:""},self.addNewFilter=function(filter){if(console.log(filter),filter.name){var newFilter={name:filter.name.substring(0,50),index:0,type:1,tags:[],active:!1,showTags:!0};self.filters&&self.filters.length&&(newFilter.index=self.filters[self.filters.length-1].index),Filters.save(newFilter,function(res){newFilter._id=res.id,self.filters.push(newFilter),filter.name=""})}},self.deleteFilter=function(filter,idx){Confirm("Delete?").then(function(){Filters.delete({_id:filter._id},function(res){self.filters.splice(idx,1)},function(err){console.log(err)})})},self.saveFilter=function(filter,field){if(filter.name){var o={_id:filter._id};o[field]=filter[field],Filters.save({update:field},o,function(res){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})}},self.dropFilterCallback=function(filter){return setTimeout(function(){self.filters.forEach(function(filter,idx){filter.index=idx+1,Filters.save({update:"index"},filter)})},200),filter},self.saveField=function(item,field){var o={_id:item._id};o[field]=item[field],Filters.save({update:field},o,function(res){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})},self.fixBrands=function(){Confirm("Подтверждаете?").then(function(){$scope.fixBrandsDesable=!0;var data={};return $http({method:"post",url:"/api/fixedDB/filter",data:data})}).then(function(){exception.showToaster("info","fix stucture","Ok")}).catch(function(err){exception.catcher("fix stucture")(err)})},self.addTag=function(filter){if(filter.newTag){var newTag={name:filter.newTag.substring(0,50),index:1,filter:filter._id};filter.tags&&filter.tags.length&&(newTag.index=filter.tags[filter.tags.length-1].index),$q.when().then(function(){return FilterTags.save(newTag).$promise}).then(function(res){newTag._id=res.id,filter.tags.push(newTag),filter.newTag="",Filters.save({update:"tags"},{_id:filter._id,tags:filter.tags.map(function(el){return el._id})},function(res){})}).catch(function(err){console.log(err)})}},self.saveTag=function(tag,field){if(tag.name){var o={_id:tag._id};o[field]=tag[field],FilterTags.save({update:field},o,function(res){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)},function(err){})}},self.deleteTag=function(filter,idx){Confirm("Delete?").then(function(){return Stuff.getList({page:0,row:100},{tags:filter.tags[idx]._id})}).then(function(stuffs){if(stuffs&&stuffs.length){var s="привязаны товары";throw stuffs.forEach(function(st){s+=" "+st.name+" "+(st.artikul?st.artikul:"")+"|"}),s}}).then(function(){FilterTags.delete({_id:filter.tags[idx]._id},function(res){filter.tags.splice(idx,1);Filters.save({update:"tags"},{_id:filter._id,tags:filter.tags.map(function(el){return el._id})},function(res){})},function(err){console.log(err)})}).catch(function(err){err&&exception.catcher("удаление")(err)})},self.dropTagCallback=function(tag,index,filter){return setTimeout(function(){Filters.save({update:"tags"},{_id:filter._id,tags:filter.tags.map(function(el){return el._id})},function(res){});var acts=[];if(filter.tags.forEach(function(tag,i){tag.index=i,acts.push(saveTagPromise(tag,"index"))}),$q.all(acts),tag.filter!=filter._id&&tag.filter){filter.tags.forEach(function(tag,i){tag.index=i});var oldFilter=self.filters.getObjectFromArray("_id",tag.filter);Filters.save({update:"tags"},{_id:oldFilter._id,tags:oldFilter.tags.map(function(el){return el._id})},function(res){}),tag.filter=filter._id,FilterTags.save({update:"filter"},tag,function(res){})}},200),tag},self.tagMoved=function(filter,tag,idx){idx==tag.index?filter.tags.splice(idx,1):filter.tags.splice(idx+1,1),filter.tags.forEach(function(tag,i){tag.index=i})},self.selectCategory=function(id){SelectCategory.bindCategoryForFilterBrandCol(id,"filters")}}return{scope:{},bindToController:!0,controller:filterCtrl,controllerAs:"$ctrl",restrict:"E",templateUrl:"components/filters/filters.html"}}]).directive("filterTagEdit",[function(){function tagCtrl($stateParams,global,FilterTags,$q,$timeout,$scope){function activate(){$q.when().then(function(){return self.Items.get({_id:$stateParams.id}).$promise}).then(function(res){self.item=res}).catch(function(err){self.edit=!1})}var self=this;self.Items=FilterTags,self.global=global,$scope.$on("changeLang",function(){activate()}),activate(),self.saveField=function(field,defer){defer=defer||0,setTimeout(function(){var o={_id:self.item._id};o[field]=self.item[field],self.Items.save({update:field},o,function(res){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})},defer)}}return{scope:{},bindToController:!0,controller:tagCtrl,controllerAs:"$ctrl",restrict:"E",templateUrl:"components/filters/tagEdit.html"}}]).directive("filterItemEdit",[function(){function filterItemEditCtrl($stateParams,global,Filters,$q,$timeout,$scope){function activate(){console.log($stateParams.id),$q.when().then(function(){return self.Items.getItem($stateParams.id)}).then(function(res){console.log(res),self.item=res}).catch(function(err){self.edit=!1})}var self=this;self.Items=Filters,self.global=global,$scope.$on("changeLang",function(){activate()}),activate(),self.saveField=function(field,defer){defer=defer||0,setTimeout(function(){var o={_id:self.item._id};o[field]=self.item[field],self.Items.save({update:field},o,function(res){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})},defer)}}return{scope:{},bindToController:!0,controller:filterItemEditCtrl,controllerAs:"$ctrl",restrict:"E",templateUrl:"components/filters/filterEdit.html"}}]).directive("filterTagComponent",[function(){return{restrict:"E",templateUrl:"components/filters/filterTag.component.html"}}]).directive("filterComponent",[function(){return{restrict:"E",templateUrl:"components/filters/filter.component.html"}}]),angular.module("gmall.services").provider("global",[function(){var _data={},_urls={};this.setUrl=function(urls){_urls=urls};var _set=function(what,val){val=val||null,angular.isDefined(what)&&(_data[what]?_data[what].val=angular.isDefined(val)?val:null:_data[what]={val:val})},_getSticker=function(stuff){stuff._id?stuff._id:stuff.stuff;if(stuff.tags&&stuff.tags.length&&_data.filterTagsSticker.val){for(var i=0,l=_data.filterTagsSticker.val.length;i<l;i++){var tag=_data.filterTagsSticker.val[i]._id;if(stuff.tags.indexOf(tag)>-1)return!!_data.filterTagsSticker.val[i].sticker&&_data.filterTagsSticker.val[i].sticker}return!1}},_getDataForCart=function(stuff){return void console.log("не используется!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!")};this.set=_set,this.$get=["$http",function($http){return{request:function(url,vars){return angular.isDefined(vars)?$http.post(url,$.param(vars),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}):$http.get(url)},url:function(which){return _urls[which]},set:_set,get:function(what){return angular.isDefined(what)&&what in _data?_data[what]:void 0},del:function(what){if(angular.isDefined(what)){var i=_data.indexOf(what);if(i>=0)return _data.splice(i,1)}return!1},clear:function(){_data=[]},getAll:function(){return _data},getSticker:_getSticker,getDataForCart:_getDataForCart}}]}]).factory("globalSrv",["global",function(global){var _send=global.request;return{getData:function(name,param,abbr){var url=global.url(name);if(!angular.isDefined(param)||angular.equals(param,null)||angular.equals(param,"")||(url+="/"+param),angular.isDefined(abbr)&&!angular.equals(abbr,null)&&!angular.equals(abbr,"")&&"object"==typeof abbr){url+="?";for(var key in abbr)"?"!=url[url.length-1]&&(url+="&"),url+=key+"="+abbr[key]}return _send(url)}}}]),function(){function helperService($resource,$uibModal,$q,exception){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return console.log("XHR Failed for getNews."+error),$q.reject(error)}return Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete).catch(getListFailed)}function getItem(id){function getItemComplete(response){return _items[id]=response,response}function getItemFailed(error){return _items[id]=null,$q.reject(error)}return _items[id]?$q.when(_items[id]):Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}function getHelp(state){$q.when().then(function(){return getItem(state)}).then(function(helper){$uibModal.open({animation:!0,templateUrl:"components/helper/helperModal.html",controller:function($uibModalInstance,$sce,desc){var self=this;self.desc=desc,self.cancel=function(){$uibModalInstance.dismiss("cancel")}},resolve:{desc:function(){return helper.desc}},controllerAs:"$ctrl"})}).catch(function(err){var msg="ошибка";err&&("object"==typeof err?err.data?msg=err.data:err.message&&(msg=err.message):msg=err),err=err.data||err,exception.catcher("получение справки")(msg)})}var Items=$resource("/api/collections/Helper/:_id",{_id:"@_id"}),_items={};return{getList:getList,getItem:getItem,save:Items.save,delete:Items.delete,getHelp:getHelp}}angular.module("gmall.services").service("Helper",helperService),helperService.$inject=["$resource","$uibModal","$q","exception"]}(),angular.module("gmall.services").factory("$email",function($resource){return $resource("/api/sendEmail")}).factory("Email",function($resource){return $resource("/api/sendEmails")}),angular.module("gmall.services").factory("CreateContent",["global","$timeout",function(global,$timeout){function getHeader(user){var s='<table width="900px" cellpadding="0" cellspacing="0" style="max-width:900px;color: #333333;border-collapse:collapse; border:none;table-layout: fixed; padding: 0;margin: 20px 0 0 0" border="0"><tr width="100%" style="max-width:900px;"><td width="50%" style=" padding:5px 20px"><a href="'+global.get("store").val.link+'">';return global.get("store").val.logo&&(s+='<img  style="width: 100px;" src="'+photoHostForFactory+"/"+global.get("store").val.logo+'"></br>'),global.get("store").val.name&&(s+='<span  style="width: 100px;" src="'+photoHostForFactory+"/"+global.get("store").val.name+'"></span>'),s+="</a></td>",s+='<td width="50%"  style="text-align: right; padding:5px 20px">',global.get("store").val.seller.phone&&(s+="<p><span>"+global.get("langOrder").val.phone+'</span>: <a style="color:#666" href="tel:+'+global.get("store").val.seller.phone+'"><span>+'+global.get("store").val.seller.phone+"</span></a></p>"),global.get("store").val.feedbackEmail&&(s+='<p><span>e-mail</span>: <a style="color:#666" href="mailto:'+global.get("store").val.feedbackEmail+'"><span>'+global.get("store").val.feedbackEmail+"</span></a></p>"),s+="</td></tr>",global.get("sections")&&global.get("sections").val&&global.get("sections").val[0]&&(s+='<table width="860px" cellpadding="0" cellspacing="0" style="max-width:900px;background-color: #000;border-collapse:collapse; border:1px solid #000;table-layout: fixed; padding: 0;margin: 0px 20px"><td width="50%" style="background-color: #333;text-align: center; padding: 20px;border:1px solid #fff;"><a style="color: #fff; text-transform: uppercase" href="'+global.get("store").val.link+'/cabinet"><span>'+global.get("langOrder").val.mainCabinet+"</span></a></td>",s+='<td width="50%" style="background-color: #333;text-align: center; padding: 20px;border:1px solid #fff;"><a style="color: #fff; text-transform: uppercase" href="'+global.get("store").val.link+"/"+global.get("sections").val[0].url+'/category"><span>'+global.get("lang").val.catalog+"</span></a></td>",s+="</tr></table>",s+="</table>"),s}function getFooter(){var s='<style>.footer a</style><table class="footer" width="860px" cellpadding="0" cellspacing="0" style="margin: 20px;color: #000;border-collapse:collapse; border:none;table-layout: fixed; padding: 0;" border="0"><tr><td colspan="2" align="center" style="vertical-align: top; padding: 10px 20px;background-color:#333"><span style="font-family:Tahoma; font-size:12px; color:#e8e8e8;">';if(global.get("store").val.sn)for(var key in global.get("store").val.sn)global.get("store").val.sn[key].is&&global.get("store").val.template.index&&global.get("store").val.template.index.icons&&global.get("store").val.template.index.icons[key+"white"]&&(s+='<a href="'+global.get("store").val.sn[key].link+'"><img style="width: 24px; height: 24px;margin: 0 10px" src="'+global.get("store").val.link+global.get("store").val.template.index.icons[key+"white"].img+'"></a>');return s+='</span></td></tr><tr style="background-color: #fff;color: #000"><td align="left" style="vertical-align: top; padding: 10px 20px"><span style="font-size:14px; ">',global.get("store").val.texts.mailTextFooter&&global.get("store").val.texts.mailTextFooter[global.get("store").val.lang]&&(s+=global.get("store").val.texts.mailTextFooter[global.get("store").val.lang]),s+="</span></td>",s+='<td align="right" style="vertical-align: top; padding: 10px 20px"><span style="font-size:14px;">',global.get("store").val.texts.mailTextFooter1&&global.get("store").val.texts.mailTextFooter1[global.get("store").val.lang]&&(s+=global.get("store").val.texts.mailTextFooter1[global.get("store").val.lang]),s+="</span></td></tr></table>"}function empty(){return'<!DOCTYPE html><html><head><meta charset=utf-8/><style type="text/css">@media only screen and (max-device-width:660px){.table-mobile{display:none !important;}}</style></head><body onload="window.print()"><div style="max-width: 800px"><h1>информация  отсутствует</h1></div><body></html>'}
function getLink(t,u){if(!t||!u)return null;var d=global.get("store").val.domain;switch(console.log("global.get('store').val.domain",global.get("store").val.domain),t){case"stuffs":return d+"/group/category/"+u;case"categories":return d+"/group/"+u;case"brandTags":return d+"/group/category?brandTag="+u;case"brands":return d+"/group/category?brand="+u;case"filterTags":return d+"/group/category?queryTag="+u;case"campaign":return d+"/camapign/"+u}}function emailFromNews(item){console.log(global.get("store").val.texts.mailTextFooter[global.get("store").val.lang]),console.log(global.get("store").val.texts.mailTextFooter1[global.get("store").val.lang]);var s='<table width="100%" cellpadding="0" cellspacing="0" style="max-width:900px;color: #333333;border-collapse:collapse; border:none;table-layout: fixed; padding: 0;margin: 0" border="0"><tr width="100%" style="max-width:900px;"><td style="text-align: center; padding: 5px"><a href="'+global.get("store").val.link+'"><img  style="width: 100px;" src="'+photoHostForFactory+"/"+global.get("store").val.logo+'"></a></td></tr><tr width="100%" style="max-width:900px;"><td style="text-align: center; padding: 5px; font-size: 20px;"><h3>usernameforreplace</h3></td></tr><tr width="100%"><td><h2 style="font-weight: 500; letter-spacing: 2px; text-transform: uppercase; text-align: center; color: #333333; font-family:  Arial, sans-serif; line-height: 30px; -webkit-text-size-adjust:none;">'+item.name+"</h2></td></tr>";if(s+="</table>",s+='<table class="table-mobile" width="100%" cellpadding="0" cellspacing="0" style="max-width:900px;color: #333333; border-collapse:collapse; border:none;table-layout: fixed; padding: 0;margin: 0 " border="0">',item.blocks&&item.blocks.length&&item.blocks.forEach(function(block){if(block.name&&(s+="text2"==block.type?'<tr width="100%" style="max-width:900px;"><td style="padding: 5px"><h3 style="text-align: center; color: :#333333; font: 22px Arial, sans-serif; line-height: 30px; -webkit-text-size-adjust:none; text-transform: uppercase">'+(block.name?block.name:"")+'</h3></td><td style="padding: 5px"><h3 style="text-align: center; color: :#333333; font: 22px Arial, sans-serif; line-height: 30px; -webkit-text-size-adjust:none; text-transform: uppercase">'+(block.name1?block.name1:"")+"</h3></td></tr>":'<tr width="100%" style="max-width:900px;"><td colspan="2" style="padding: 5px"><h3 style="text-align: center; color: :#333333; font: 22px Arial, sans-serif; line-height: 30px; -webkit-text-size-adjust:none; text-transform: uppercase">'+block.name+"</h3></td></tr>"),block.img&&(s+='<tr width="100%" style="max-width:900px;"><td  colspan="2" width="100%" style=" padding: 5px" >',block.link&&(s+='<a href="'+global.get("store").val.link+block.link+'" style="cursor: pointer;">'),s+='<img alt="" style="width: 100%;margin-bottom: 10px; display: block" src="'+photoHostForFactory+"/"+block.img+'">',block.link&&(s+="</a>"),s+="</td></tr>"),block.desc&&(s+="text2"==block.type?'<tr width="100%" style="max-width:900px;"><td style="padding: 5px"><span style="text-align: justify;  color: :#333333; font: 18px Arial, sans-serif; line-height: 30px; -webkit-text-size-adjust:none;">'+(block.desc?block.desc:"")+'</span></td><td style="padding: 5px"><span style="text-align: justify;  color: :#333333; font: 18px Arial, sans-serif; line-height: 30px; -webkit-text-size-adjust:none;">'+(block.desc1?block.desc1:"")+"</span></td></tr>":'<tr width="100%" style="max-width:900px;"><td colspan="2" style="padding: 5px"><span style="text-align: justify;  color: :#333333; font: 18px Arial, sans-serif; line-height: 30px; -webkit-text-size-adjust:none;">'+block.desc+"</span></td></tr>"),block.imgs&&block.imgs.length)for(var i=0,l=block.imgs.length;i<l;i+=2){s+="<tr>";var link1;if(block.imgs[i].link?link1=block.imgs[i].link.indexOf("http")<0?global.get("store").val.link+block.imgs[i].link:block.imgs[i].link:block.imgs[i].url&&(link1=getLink(block.type,block.imgs[i].url)),s+='<td style="padding: 5px; text-align: center;vertical-align: top">',link1&&(s+='<a href="'+link1+'">'),s+='<img alt="" style="width: 100%; display: block" src="'+photoHostForFactory+"/"+block.imgs[i].img+'">',block.imgs[i].name&&(s+='<span style="font-weight: 700; color: #666666; font: 18px Arial, sans-serif; line-height: 30px; -webkit-text-size-adjust:none;">'+block.imgs[i].name+"</span>"),link1&&(s+="</a>"),s+="</td>",block.imgs[i+1]){var link2;block.imgs[i+1].link?block.imgs[i].link.indexOf("http")<0?link2=global.get("store").val.link+block.imgs[i+1].link:block.imgs[i+1].link&&(link2=block.imgs[i+1].link):link1=getLink(block.type,block.imgs[i+1].url),s+='<td style="padding: 5px; text-align: center;vertical-align: top">',link2&&(s+='<a href="'+link2+'">'),s+='<img alt="" style="width: 100%; display: block" src="'+photoHostForFactory+"/"+block.imgs[i+1].img+'">',block.imgs[i+1].name&&(s+='<span style="font-weight: 700; color: #666666; font: 18px Arial, sans-serif; line-height: 30px; -webkit-text-size-adjust:none;">'+block.imgs[i+1].name+"</span>"),link2&&(s+="</a>"),s+="</td>"}else s+='<td style="padding: 5px; text-align: center;vertical-align: top"></td>';s+="</tr>"}}),s+="</table>",s+='<style>.footer a</style><table class="footer" width="860px" cellpadding="0" cellspacing="0" style="margin: 20px;color: #000;border-collapse:collapse; border:none;table-layout: fixed; padding: 0;" border="0"><tr><td colspan="2" align="center" style="vertical-align: top; padding: 10px 20px;background-color:#333"><span style="font-family:Tahoma; font-size:12px; color:#e8e8e8;">',global.get("store").val.sn)for(var key in global.get("store").val.sn)global.get("store").val.sn[key].is&&global.get("store").val.template.index&&global.get("store").val.template.index.icons&&global.get("store").val.template.index.icons[key+"white"]&&(s+='<a href="'+global.get("store").val.sn[key].link+'"><img style="width: 24px; height: 24px;margin: 0 10px" src="'+global.get("store").val.link+global.get("store").val.template.index.icons[key+"white"].img+'"></a>');return s+='</span></td></tr><tr style="background-color: #fff;color: #000"><td align="left" style="vertical-align: top; padding: 10px 20px"><span style="font-size:14px; ">',global.get("store").val.texts.mailTextFooter&&global.get("store").val.texts.mailTextFooter[global.get("store").val.lang]&&(s+=global.get("store").val.texts.mailTextFooter[global.get("store").val.lang]),s+="</span></td>",s+='<td align="right" style="vertical-align: top; padding: 10px 20px"><span style="font-size:14px;">',global.get("store").val.texts.mailTextFooter1&&global.get("store").val.texts.mailTextFooter1[global.get("store").val.lang]&&(s+=global.get("store").val.texts.mailTextFooter1[global.get("store").val.lang]),s+="</span></td></tr></table>"}function emailBonus(stuffs){var item,s='<table width="100%" cellpadding="0" cellspacing="0" style="max-width:600px;color: #333333;border-collapse:collapse; border:none;table-layout: fixed; padding: 0;margin: 0" border="0"><tr width="100%" style="max-width:600px;"><td style="text-align: center; padding: 5px"><img alt="посмотреть на сайте" style="width: 100px;" src="'+photoHostForFactory+"/"+global.get("store").val.logo+'"></td></tr><tr width="100%"><td><h2 style="font-weight: 500; letter-spacing: 2px; text-transform: uppercase; text-align: center; color: #333333; font-family:  Arial, sans-serif; line-height: 30px; -webkit-text-size-adjust:none;">бонусы</h2></td></tr>';if(s+="</table>",stuffs.forEach(function(stuff){if(item=stuff,item.imgs&&item.imgs.length){s+='<table class="table-mobile" width="100%" cellpadding="0" cellspacing="0" style="max-width:600px;color: #333333; border-collapse:collapse; border:none;table-layout: fixed; padding: 0;margin: 0" border="0">';for(var i=0,l=item.imgs.length;i<l;i++)item.imgs[i].name&&(s+='<tr width="100%" style="max-width:600px;"><td style=" padding: 5px"><p style="color: #333333; font: 16px Arial, sans-serif; line-height: 30px; -webkit-text-size-adjust:none;">'+item.imgs[i].name+"</p></td></tr>"),s+='<tr><td style="padding: 5px;"><img alt="бонусный купон"  style="width: 100%; display: block"   src="'+photoHostForFactory+"/"+item.imgs[i].img+'"></td>',s+="</tr>",item.imgs[i].desc&&(s+='<tr width="100%" style="max-width:600px;"><td style=" padding: 5px"><p style="color: #333333; font: 16px Arial, sans-serif; line-height: 30px; -webkit-text-size-adjust:none;">'+item.imgs[i].desc+"</p></td></tr>");s+="</table>"}}),s+='<table width="600px" cellpadding="0" cellspacing="0" style="color: #333333;border-collapse:collapse; border:none;table-layout: fixed; padding: 0;margin: 0" border="0"><tr><td border="0" colspan="2" style="border:none; border-top:#cccccc 5px solid;"></td></tr><tr><td align="left" style="vertical-align: top"><span style="font-family:Tahoma; font-size:12px; color:#404040;">',global.get("store").val.sn)for(var key in global.get("store").val.sn)global.get("store").val.sn[key].is&&(s+='<a href="'+global.get("store").val.sn[key].link+'"><img style="width: 24px; height: 24px;margin: 15px 5px" src="'+global.get("store").val.link+"/views/template/img/icon/sn_natur/"+key+'.png"></a>');return s+='</span><td align="right"><span style="font-family:Tahoma; font-size:16px; color:#404040;">',global.get("store").val.footer&&global.get("store").val.footer.text&&(s+=global.get("store").val.footer.text),'<!DOCTYPE html><html><head><meta charset="UTF-8"></head><body><div>'+(s+="</span></td></tr></table>")+"</div></html>"}function orderNote(order){var s="";return s+='<h3 class="order-name">'+global.get("langOrder").val.order+" № "+order.num+"</h3> "+global.get("langOrder").val.from+" "+moment(order.date).format("lll"),s+="<p>"+global.get("langOrder").val.sum+" "+order.paySum.toFixed(2)+" "+order.currency+"</p>"}function dateTimeNote(entry,user){var s="";return s+='<h3 class="order-name">'+global.get("langOrder").val.dateTime+"</h3> "+global.get("langOrder").val.onn+" "+entry.dateForNote,s+="<p>"+global.get("store").val.texts.masterName[global.get("store").val.lang]+" - "+entry.masterName+"</p>",s+="<p>"+entry.service.name+"</p>",user&&(s+="<p>"+user.name+" "+user.phone+"</p>"),s}function dateTimeCancelNote(entry){var s="";return s+='<h3 class="order-name">'+global.get("langOrder").val.dateTime+'<span style="color:red"> '+global.get("langOrder").val.removed+"</span></h3> "+global.get("langOrder").val.onn+" "+entry.dateForNote,s+="<p>"+global.get("store").val.texts.masterName[global.get("store").val.lang]+" - "+entry.masterName+"</p>",s+="<p>"+entry.service.name+"</p>",s+="<p>"+entry.user.name+"- "+entry.user.phone+"</p>"}function order(order,invoice,commentPrint){var lang=global.get("store").val.lang,texts=global.get("store").val.texts,user=order.profile&&order.profile.admin?order.profile.admin:order.profile.fio;user||(user=order.user.name);var orderMailText=texts.orderMailText&&texts.orderMailText[lang]?texts.orderMailText[lang]:"";order.profile&&order.profile.admin&&(orderMailText="");var name=global.get("langOrder").val.order+" № "+order.num+"<small> "+global.get("langOrder").val.from+" "+moment(order.date).format("lll")+"</small>",status=global.get("langOrder").val.entered.toUpperCase();2==order.status?status=global.get("langOrder").val.accepted.toUpperCase():3==order.status?status=global.get("langOrder").val.statuspaid.toUpperCase():4==order.status?status=global.get("langOrder").val.statussent.toUpperCase():5==order.status&&(status=global.get("langOrder").val.statusdelivered.toUpperCase()),user=global.get("langOrder").val.hello+", "+user+"!";var s=getHeader(name);s+='<table width="900px" cellpadding="0" cellspacing="0" style="max-width:900px;color: #333333;border-collapse:collapse; border:none;table-layout: fixed; padding: 0;margin: 0" border="0"><tr  width="100%"><td colspan="2" style="padding: 0 20px;"><h3 style="font-size: 24px">'+user+"</h3></td></tr>",1==order.status&&(s+='<tr  width="100%"><td colspan="2" style="padding: 0 20px"><p>'+orderMailText+"</p></td></tr>"),s+='<tr style="max-width:900px;"><td width="50%" style="max-width:900px;padding: 10px 20px;font-size: 16px;vertical-align: top"><h4 style="font-weight: bold">'+status+'</h4><h4 style="font-weight: bold">'+global.get("langOrder").val.order.toUpperCase()+" № "+order.num+'</h4><p style="margin-bottom: 30px">'+global.get("langOrder").val.from+" "+moment(order.date).format("lll")+"</p>",commentPrint&&order.comment&&(s+='<div><h4 style="font-weight: bold">'+global.get("langOrder").val.comments+"</h4><p>"+order.comment+"</p></div>"),invoice&&order.payInfo&&(s+='<h4 style="font-weight: bold">'+global.get("langOrder").val.forpayment+"</h4>",s+="<p>"+order.payInfo+"</p>"),invoice&&order.checkOutLiqpayHtmlIs&&(s+="<p>"+order.checkOutLiqpayHtml+"</p>"),s+="</td>",s+='<td style=" padding: 10px 20px; font-size: 16px;vertical-align: top;">',s+='<h4 style="font-weight: bold">'+global.get("langOrder").val.customerdata+"</h4>",s+="<p> e-mail - "+order.user.email+"</p>",order.profile.fio&&(s+="<p> "+global.get("langOrder").val.name+"  - "+order.profile.fio+"</p>"),order.profile.phone&&(s+="<p> "+global.get("langOrder").val.phone+" - "+order.profile.phone+"</p>"),order.profile.city&&(s+="<p> "+global.get("langOrder").val.city+"  - "+order.profile.city+"</p></div>"),s+="</td></tr></table>",s+='<table style="margin: 20px" width="860px" cellspacing="0" cellpadding="5" border="1px">',s+='<thead><tr><th style="padding: 10px">#</th><th style="padding: 10px">'+global.get("langOrder").val.title+'</th><th class="text-center" style="padding: 10px; text-align: center">'+global.get("langOrder").val.species+'</th><th class="text-center" style="padding: 10px; text-align: center">'+global.get("langOrder").val.price+"</th>",s+='<th class="text-center" style="padding: 10px; text-align: center">'+global.get("langOrder").val.quantity+'</th><th class="text-center" style="padding: 10px; text-align: center">'+global.get("langOrder").val.sum+"</th></tr></thead>",s+="<tbody>";for(var cart=order.cart.stuffs,j=0,lj=cart.length;j<lj;j++){var good=cart[j];s+='<tr><td style="padding: 10px">'+(j+1)+'</td><td style="padding: 10px"> '+good.name+" "+(good.artikul?good.artikul:"")+'</td><td class="text-center" style="padding: 10px; text-align: center">'+(good.sortName?good.sortName:"")+'</td><td class="text-center" style="padding: 10px; text-align: center">'+(order.kurs*good.cena).toFixed(2)+" "+order.currency+'</td><td class="text-center" style="padding: 10px; text-align: center">'+good.quantity+'</td><td class="text-center">'+(order.kurs*good.sum).toFixed(2)+" "+order.currency+"</td></tr>"}s+="</tbody>",s+='<tbody class="cart-item-total">',s+='<tr><th colspan="4" style="padding: 10px">'+global.get("langOrder").val.sum+'</th><th class="text-center" style="padding: 10px; text-align: center">'+order.getTotalQuantity()+'</th><th style="padding: 10px; text-align: center" class="text-center">'+(order.kurs*(order.sum0?order.sum0:order.sum)).toFixed(2)+" "+order.currency+"</th></tr>",order.discount&&(s+='<tr><th colspan="4" style="padding: 10px">'+global.get("langOrder").val.withdiscount+"</th>",s+=order.sum<order.sum0?'<th class="text-center"  style="padding: 10px; text-align: center">'+Math.round(100*(1-order.sum/order.sum0))+"%</th>":'<th class="text-center" style="padding: 10px; text-align: center"></th>',s+='<th class="text-center"  style="padding: 10px; text-align: center">'+(order.kurs*order.sum).toFixed(2)+" "+order.currency+"</th></tr>"),order.coupon&&order.coupon._id&&(s+='<tr><th colspan="4" style="padding: 10px">'+global.get("langOrder").val.basedcoupon+'</th><th></th><th class="text-center"  style="padding: 10px; text-align: center">'+(order.kurs*order.getCouponSum()).toFixed(2)+" "+order.currency+"</th></tr>");order.getTotalDiscount();return order.shipCost&&(s+='<tr><th colspan="4">'+global.get("langOrder").val.delivery+'</th><th></th><th class="text-center" style="padding: 10px; text-align: center">'+order.shipCost.toFixed(2)+" "+order.currency+"</th></tr>"),order.totalPay&&(s+='<tr><th colspan="4">'+global.get("langOrder").val.paid+'</th><th></th><th class="text-center" style="padding: 10px; text-align: center">'+order.totalPay.toFixed(2)+" "+order.currency+"</th></tr>"),order.paySum!=order.getCouponSum()&&(s+='<tr><th colspan="4">'+global.get("langOrder").val.totaltopay+'</th><th></th><th class="text-center" style="padding: 10px; text-align: center">'+order.paySum.toFixed(2)+" "+order.currency+"</th></tr>"),s+="</tbody></table></div></div></div>",'<!DOCTYPE html><html><head><link rel="stylesheet" type="text/css" href="http://gmall.io/bower_components/bootstrap/dist/css/bootstrap.css" /></head><body onload="window.print()"><div class="reward-body">'+(s+=getFooter())+"</div></html>"}function orderShipInfo(order){var shipDetail=order.shipDetail,name=(global.get("store").val.lang,global.get("store").val.texts,global.get("langOrder").val.order+" № "+order.num+"<small> "+global.get("langOrder").val.from+" "+moment(order.date).format("lll")+"</small>"),user=global.get("user").val.profile.fio||global.get("user").val.name,status=global.get("langOrder").val.entered.toUpperCase();2==order.status?status=global.get("langOrder").val.accepted.toUpperCase():3==order.status?status=global.get("langOrder").val.statuspaid.toUpperCase():4==order.status?status=global.get("langOrder").val.statussent.toUpperCase():5==order.status&&(status=global.get("langOrder").val.statusdelivered.toUpperCase()),user=global.get("langOrder").val.hello+", "+user+"!";var s=getHeader(name);return s+='<table width="900px" cellpadding="0" cellspacing="0" style="max-width:900px;color: #333333;border-collapse:collapse; border:none;table-layout: fixed; padding: 0;margin: 0" border="0"><tr  width="100%"><td colspan="2" style="padding: 20px;"><h3 style="font-size: 24px">'+user+"</h3></td></tr></table>",s+='<table width="900px" cellpadding="0" cellspacing="0" style="max-width:900px;color: #333333;border-collapse:collapse; border:none;table-layout: fixed; padding: 0;margin: 0" border="0"><tr style="max-width:900px;"><td width="50%" style="max-width:900px;padding: 10px 20px;font-size: 16px;vertical-align: top"><h4 style="font-weight: bold">'+global.get("langOrder").val.order.toUpperCase()+" № "+order.num+"</h4><p>"+global.get("langOrder").val.from+" "+moment(order.date).format("lll")+'</p><h4 style="font-weight: bold;margin-bottom: 30px">'+status+'</h4><h4 style="font-weight: bold">'+global.get("langOrder").val.aboutdelivery+"</h4></td></tr></table>",shipDetail&&shipDetail.length?(s+='<table style="margin: 20px" width="860px" cellspacing="0" cellpadding="5" border="1px">',s+='<thead><tr><th class="text-center"  style="padding: 10px; text-align: center">'+global.get("langOrder").val.title+'</th><th class="text-center"  style="padding: 10px; text-align: center">'+global.get("langOrder").val.where+'</th><th class="text-center"  style="padding: 10px; text-align: center">'+global.get("langOrder").val.waybill+'</th><th class="text-center"  style="padding: 10px; text-align: center">'+global.get("langOrder").val.date+'</th><th class="text-center" style="padding: 10px; text-align: center">'+global.get("langOrder").val.sum+"</th>",shipDetail.forEach(function(ship){s+='<tr><td style="padding: 10px">',ship.stuffs.forEach(function(stuff){s+='<div style="width:80%;float:left">'+stuff.name+'</div><div style="float:left">'+stuff.qty+(stuff.unitOfMeasure?" "+stuff.unitOfMeasure:"")+'</div><div style="clear: both"></div><hr/>'}),s+=ship.qty,s+='</td><td style="padding: 10px; vertical-align: top">'+(ship.info||"")+"</td>",s+='<td style="padding: 10px; vertical-align: top">'+(ship.ttn||"")+"</td>",s+='<td style="padding: 10px; vertical-align: top">'+moment(ship.date).format("LLL")+"</td>",s+='<td style="padding: 10px; vertical-align: top">'+(ship.sum||0).toFixed(2)+"&nbsp;"+order.currency+"</td></tr>"}),s+="</table></br></br>"):s+="<h1>"+global.get("langOrder").val.infisnot+"</h1>",'<!DOCTYPE html><html><head><link rel="stylesheet" type="text/css" href="http://gmall.io/bower_components/bootstrap/dist/css/bootstrap.css" /></head><body onload="window.print()"><div class="reward-body">'+(s+=getFooter())+"</div></html>"}function shipInfoNote(order){var s="";return s+="<h3>"+global.get("langOrder").val.order+" № "+order.num+"</h3><br/> "+global.get("langOrder").val.from+" "+moment(order.date).format("lll"),order.user.profile&&(s+=order.user.profile.fio?"<p>"+order.user.profile.fio+"</p>":"<p>"+order.user.name+"</p>",order.user.profile.phone&&(s+="<p>"+order.user.profile.phone+"</p>")),s+="<p>"+global.get("langOrder").val.totaltopay+" <strong>"+order.paySum.toFixed(2)+" </strong>"+order.currency+"</p>",s+="<p>"+global.get("langOrder").val.sentshipinfo+"</p>"}function shipInfo(order,ship){if(ship.ttn&&ship.info){var s="<h3>"+global.get("langOrder").val.aboutdelivery+" </h3>";return global.get("langOrder").val.onawarrant,order.num,global.get("langOrder").val.from,moment(order.date).format("lll"),s+="<strong>"+global.get("langOrder").val.waybill+" - "+ship.ttn||"</strong> "+global.get("langOrder").val.from+" "+moment(ship.date).format("LL")+"</p>",ship.info&&(s+="<p>"+ship.info.substring(0,250)+"</p>"),ship.sum&&(s+="<strong>"+ship.sum.toFixed(2)+" "+order.currency+"</strong>"),ship.stuffs&&ship.stuffs.length&&(s+="<strong>  "+ship.stuffs.length+" ед.</strong>"),s}}function payInfo(order,pay){if(pay.sum){var s="<h3>"+global.get("langOrder").val.makepayment+" </h3>";return s+="<p>"+global.get("langOrder").val.onawarrant+" №"+order.num+"<br> "+global.get("langOrder").val.from+" "+moment(order.date).format("lll")+"</p>",s+="<p><strong>"+pay.sum.toFixed(2)+" "+order.currency+"</strong></p> "+moment(pay.date).format("LL"),pay.info&&(s+="<p>"+pay.info.substring(0,150)+"</p>"),s}}function acceptedInfo(order){var s="<h3>"+global.get("langOrder").val.byorders+" №"+order.num+"</h3>";return s+=" "+global.get("langOrder").val.from+" "+moment(order.date).format("lll")+".",order.user.profile&&(s+=order.user.profile.fio?"<p>"+order.user.profile.fio+"</p>":"<p>"+order.user.name+"</p>",order.user.profile.phone&&(s+="<p>"+order.user.profile.phone+"</p>")),s+="<p><strong>"+global.get("langOrder").val.accepted+" </strong></p>"}function invoiceInfo(order){var s="";return s+="<h3>"+global.get("langOrder").val.order+" № "+order.num+"</h3><br/> "+global.get("langOrder").val.from+" "+moment(order.date).format("lll"),order.user.profile&&(s+=order.user.profile.fio?"<p>"+order.user.profile.fio+"</p>":"<p>"+order.user.name+"</p>",order.user.profile.phone&&(s+="<p>"+order.user.profile.phone+"</p>")),s+="<p>"+global.get("langOrder").val.totaltopay+" <strong>"+order.paySum.toFixed(2)+" </strong>"+order.currency+"</p>",s+="<p>"+global.get("langOrder").val.sentthepost+"</p>"}function call(number,name){var s="";return s+="<h3>"+global.get("langOrder").val.requestacallback+"</h3>",s+="<p>"+number+(name?" "+name:"")+"</p>",s+="<p>"+moment().format("LLLL")+"</p>",console.log(s),s}if(void 0===photoHost)var photoHost;var photoHostForFactory;return $timeout(function(){photoHostForFactory=photoHost?photoHost:global.get("store").val.link},1e3),{empty:empty,order:order,orderNote:orderNote,dateTimeNote:dateTimeNote,shipInfo:shipInfo,payInfo:payInfo,invoiceInfo:invoiceInfo,acceptedInfo:acceptedInfo,orderShipInfo:orderShipInfo,call:call,emailFromNews:emailFromNews,emailBonus:emailBonus,shipInfoNote:shipInfoNote,dateTimeCancelNote:dateTimeCancelNote}}]),angular.module("gmall.services").service("$order",["localStorage","global","Orders","$q","$uibModal","CartInOrder","exception","$email","CreateContent","$notification","$state","$window","Coupon","$user","$rootScope","$timeout","$http",function(localStorage,global,Orders,$q,$uibModal,CartInOrder,exception,$email,CreateContent,$notification,$state,$window,Coupon,$user,$rootScope,$timeout,$http){function shipInfoCtrl($uibModalInstance,$rootScope,short){var self=this;self.short=short,$rootScope.$on("closeShipModal",function(){$uibModalInstance.close()}),self.ok=function(){$uibModalInstance.close()},self.cancel=function(){$uibModalInstance.dismiss()}}var order,storageName;this.type=null,this.reinitCart=function(){order.comment="",delete order.action,delete order._id,delete order.num,delete order.date,delete order.seller;var seller=global.get("store").val.seller;order.setSellerData(seller._id,seller.cascade,seller.opt)},this.initOrderInList=function(res){var order=myShareData.getOrder(),mainCurrency=(global.get("campaign")&&global.get("campaign").val,global.get("store").val.mainCarrency),currencyStore=global.get("store").val.currency;global.get("currency")&&global.get("currency").val&&global.get("currency").val,global.get("store").val.seller;return order.type="order",order._id=res._id,order.init(res.campaign,mainCurrency,currencyStore),order.setCurrency(res.currency),order.kurs=order.currencyStore[order.currency][0],order.payInfo=res.seller.payInfo,order.setSellerData(res.seller,res.cascade,res.opt),order.unitOfMeasure=order._getUnitOfMeasure(),order.cart._id=res.cart,order.setDiscount(res.discount),order.setCoupon(res.coupon),order.date=res.date,order.date2=res.date2,order.date3=res.date3,order.date4=res.date4,order.date5=res.date5,order.invoice=res.invoice,order.invoiceInfo=res.invoiceInfo,order.pay=res.pay,order.shipCost=res.shipCost,order.num=res.num,order.status=res.status,order.profile=res.profile,order.comment=res.comment,order.note=res.note,order.user=res.user,order.shipDetail=res.shipDetail,order.domain=global.get("store").val.domain||global.get("store").val.subDomain,order.paySum=res.paySum,order},this.init=function(type,id){storageName=global.get("store").val._id;var q=$q.defer();order=myShareData.getOrder();var campaign=global.get("campaign")?global.get("campaign").val:null,mainCurrency=global.get("store").val.mainCarrency,currencyStore=global.get("store").val.currency,currency=global.get("currency")&&global.get("currency").val?global.get("currency").val:"UAH",seller=global.get("store").val.seller;if(this.type=type,order.type=type,"cart"==type){order.init(campaign,mainCurrency,currencyStore),order.setSellerData(seller._id,seller.cascade,seller.opt),order.setCurrency(currency),order.kurs=order.currencyStore[order.currency][0];var o=localStorage.get(storageName);o||(o=[],localStorage.set(storageName,o)),order.setCart(o),order.unitOfMeasure=order._getUnitOfMeasure(),order.totalCount=order._cartCount(),q.resolve(order)}else"order"==type&&(Orders.get({_id:id},function(res){res&&res._id||q.reject("404"),order._id=res._id,order.init(res.campaign,mainCurrency,currencyStore),order.setCurrency(res.currency),order.kurs=order.currencyStore[order.currency][0],order.payInfo=res.seller.payInfo,order.setSellerData(res.seller,res.cascade,res.opt),order.setCart(res.cart.stuffs),order.unitOfMeasure=order._getUnitOfMeasure(),order.cart._id=res.cart._id,order.setDiscount(res.discount),order.setCoupon(res.coupon),order.totalCount=order._cartCount(),order.date=res.date,order.date2=res.date2,order.date3=res.date3,order.date4=res.date4,order.date5=res.date5,order.invoice=res.invoice,order.invoiceInfo=res.invoiceInfo,order.pay=res.pay,order.shipCost=res.shipCost,order.num=res.num,order.status=res.status,order.profile=res.profile,order.comment=res.comment,order.note=res.note,order.user=res.user,order.shipDetail=res.shipDetail,order.domain=global.get("store").val.domain||global.get("store").val.subDomain,q.resolve(order)},function(err){q.reject(order)}),order.totalCount=order._cartCount());return q.promise},this.getOrder=function(){return order},this.addItemToCart=function(itemTo){itemTo.seller=global.get("seller").val,itemTo.img=itemTo.gallery&&itemTo.gallery.length&&itemTo.gallery[0].thumbSmall?itemTo.gallery[0].thumbSmall:"",itemTo.quantity||(itemTo.quantity=1),order.addStuffToOrder(itemTo),this.updateOrder(itemTo)},this.checkInCart=function(item){return order.checkInCart(item)},this.updateOrder=function(itemTo){order.totalCount=order._cartCount(),order.unitOfMeasure=order._getUnitOfMeasure(),itemTo&&$rootScope.$broadcast("$updateOrder",itemTo),"cart"==this.type?(localStorage.set(storageName,order.cart.stuffs),order.totalCount=order._cartCount()):$timeout(function(){},100).then(function(){var o=angular.copy(order.cart);return o.order=order._id,CartInOrder.save(o).$promise}).then(function(){return order.priceSaleHandle=order.cart.stuffs.some(function(s){return s.priceSaleHandle}),order.maxDiscountOver=order.cart.stuffs.some(function(s){return s.maxDiscountOver}),Orders.save({update:"totalCount sum paySum maxDiscountOver priceSaleHandle"},{_id:order._id,totalCount:order.totalCount,sum:order.sum,paySum:order.paySum,priceSaleHandle:order.priceSaleHandle,maxDiscountOver:order.maxDiscountOver}).$promise}).then(function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)}).catch(function(error){exception.catcher("сохранение изменений")(error)})},this.removeItem=function(i){order.cart.stuffs.splice(i,1),this.updateOrder()},this.decreaseQty=function(i){var stuff=order.cart.stuffs[i];stuff&&stuff.quantity>1&&(stuff.multiple&&stuff.minQty?stuff.quantity-1>=stuff.minQty&&(stuff.quantity--,this.updateOrder()):(stuff.quantity--,this.updateOrder()))},this.increaseQty=function(i){var stuff=order.cart.stuffs[i];stuff&&(stuff.single&&stuff.maxQty?stuff.quantity+1<=stuff.maxQty&&(stuff.quantity++,this.updateOrder()):(stuff.quantity++,this.updateOrder()))},this.clearCart=function(){order.clearOrder(),this.updateOrder()},this.cartCount=function(){return order.totalCount},this.sendOrder=function(user){return $q.when().then(function(){try{if(user){if(!user._id)throw console.log(user),"не авторизирован!"}else{if(!global.get("user").val||!global.get("user").val._id)throw"не авторизирован!";order.user=global.get("user").val,order.profile=angular.copy(global.get("user").val.profile)}order.action="order",order.comment?order.comment.clearTag(400):order.comment="",order.coupon&&order.coupon._id?order.paySum=order.kurs*order.getCouponSum():order.paySum=order.kurs*order.getTotalSum()}catch(err){throw err}}).then(function(){return $q(function(resolve,reject){if(order.coupon&&order.coupon._id)if(global.get("user").val.coupons||(global.get("user").val.coupons=[]),global.get("user").val.coupons.indexOf(order.coupon._id)>-1)order.coupon=null,resolve();else{Date.now();Coupon.get({_id:order.coupon._id},function(coupon){coupon?(global.get("user").val.coupons||(global.get("user").val.coupons=[]),global.get("user").val.coupons=global.get("user").val.coupons.filter(function(el){return el}),global.get("user").val.coupons.push(coupon._id),$user.save({update:"coupons"},{_id:global.get("user").val._id,coupons:global.get("user").val.coupons},function(res){resolve()},function(err){if(err)return reject(err)})):(order.coupon=null,resolve())})}else resolve()})}).then(function(){return Orders.save(order).$promise}).then(function(res){if(!res.num||!res._id)throw"заказ не отправлен. произошла ошибка на сервере. не присвоен номер ордеру";try{order._id=res.id,order.num=res.num,order.date=Date.now(),order.seller=global.get("store").val.seller,order.status=1}catch(err){throw err}}).then(function(){if(global.get("store").val.seller.salemail){try{order.profile.admin="Admin";var email=global.get("store").val.seller.salemail,content=CreateContent.order(order,!1,!0);delete order.profile.admin;var domain=global.get("store").val.domain,subj=global.get("langOrder").val.neworder?global.get("langOrder").val.neworder.toUpperCase()+" ✔":"НОВЫЙ ЗАКАЗ ✔",o={email:email,content:content,subject:subj,from:global.get("store").val.name+"<sales@"+domain+">"}}catch(err){throw err}return $q(function(resolve,reject){$email.save(o,function(res){exception.showToaster("note",global.get("langNote").val.emailSent,""),resolve()},function(err){exception.showToaster("warning",global.get("langNote").val.error,err.data),resolve()})})}}).then(function(){try{order.user=user?user:global.get("user").val
;var email=user?user.email:global.get("user").val.email,content=CreateContent.order(order,!1,!0),domain=global.get("store").val.domain,subj=global.get("langOrder").val.neworder?global.get("langOrder").val.neworder.toUpperCase()+" ✔":"НОВЫЙ ЗАКАЗ ✔",o={email:email,content:content,subject:subj,from:global.get("store").val.name+"<sales@"+domain+">"}}catch(err){throw err}return $q(function(resolve,reject){$email.save(o,function(res){resolve()},function(err){exception.showToaster("warning",global.get("langNote").val.error,err.data),resolve()})})}).then(function(){try{var content=CreateContent.orderNote(order),o={addressee:"seller",type:"order",content:content,order:order._id,num:order.num,seller:order.seller._id}}catch(err){throw err}return $q(function(resolve,reject){$notification.save(o,function(res){exception.showToaster("note",global.get("langNote").val.sent,""),resolve()},function(err){exception.catcher("error")(err),resolve()})})}).then(function(){try{var states=$state.get();if(global.get("paps")&&states.some(function(state){return"thanksPage"==state.name})){var pap=global.get("paps").val.getOFA("action","order");pap&&pap.url?$state.go("thanksPage",{id:pap.url}):exception.showToaster("note",global.get("langNote").val.orderSuccess,"")}else exception.showToaster("note",global.get("langNote").val.orderSuccess,"")}catch(err){throw err}}).catch(function(err){throw err})},this.changeCurrency=function(lan){order.changeCurrency(lan)},this.checkCampaign=function(stuff){return order&&order.type?order.checkCampaign(stuff):null},this.checkOutFromList=function(user){return order.comment=user.comment?user.comment:"",order.profile=user.profile,order.user=user._id,order.seller=global.get("store").val.seller._id,this.sendOrder(user)},this.getShipInfo=function(short){return $q(function(resolve,reject){var modalInstance=$uibModal.open({animation:!0,templateUrl:"components/order/modal/shipInfo.html",controller:shipInfoCtrl,controllerAs:"$ctrl",windowClass:"modalProject",backdropClass:"modalBackdropClass",resolve:{short:function(){return short}}});$rootScope.$emit("modalOpened"),modalInstance.result.then(function(item){$rootScope.$emit("modalClosed"),resolve(item)},function(){$rootScope.$emit("modalClosed"),reject()})})},shipInfoCtrl.$inject=["$uibModalInstance","$rootScope","short"],this.getCheckOutLiqpayHtml=function(order,invoice){return $q.when().then(function(){return invoice?$http.post("/api/orders/checkoutLiqpayInvoice",order):$http.post("/api/orders/checkoutLiqpay",order)}).then(function(res){res&&res.data.html&&(order.checkOutLiqpayHtml=res.data.html,order.checkOutLiqpayHtmlIs=!0)}).then(function(res){}).catch(function(err){exception.catcher("error")(err)})},this.checkWarehouse=function(){return console.log(order),$q.when().then(function(){var acts=order.cart.stuffs.map(function(s){var q={stuff:s._id,sort:s.sort},url="/api/collections/Material?query="+JSON.stringify(q);return $http.get(url)});return $q.all(acts)}).then(function(checkResult){if(checkResult){return checkResult.map(function(rr,index){if(!(rr.data&&rr.data.length&&rr.data[1]&&rr.data[1].qty&&rr.data[1].qty>=order.cart.stuffs[index].quantity))return order.cart.stuffs[index]})}throw"не возможно проверить наличие на складе"}).then(function(stuffs){if(stuffs=stuffs.filter(function(s){return s}),stuffs.length){var error="";throw stuffs.forEach(function(s){error+="Необходимое количество "+s.name+" отсутствует. Перейдите на страницу товара и уточните наличие."}),error}})}}]).factory("localStorage",function(){return{getB:function(item){return JSON.parse(localStorage.getItem(item)||"false")},getN:function(item){var i=localStorage.getItem(item);return"undefined"!=i?JSON.parse(i):""},get:function(item){return JSON.parse(localStorage.getItem(item)||"[]")},set:function(item,value){localStorage.setItem(item,JSON.stringify(value))}}}),function(){function orderService($resource,$uibModal,$q){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response&&response.length&&response.forEach(function(o){o.totalPay=o.pay&&o.pay.length?o.pay.reduce(function(s,i){return s+=i.sum},0):0}),response}function getListFailed(error){return console.log("XHR Failed for getNews."+error),$q.reject(error)}return Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete).catch(getListFailed)}function getItem(id){function getItemComplete(o){return o}function getItemFailed(error){return $q.reject(error)}return Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}var Items=$resource("/api/collections/Order/:_id",{_id:"@_id"});return this.query=Items.query,this.get=Items.get,this.delete=Items.delete,this.save=Items.save,{getList:getList,getItem:getItem,get:Items.get,save:Items.save,delete:Items.delete}}angular.module("gmall.services").service("Orders",orderService),orderService.$inject=["$resource","$uibModal","$q"]}(),function(){function cartInOrderService($resource,$uibModal,$q){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return console.log("XHR Failed for getNews."+error),$q.reject(error)}return Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete).catch(getListFailed)}function getItem(id){function getItemComplete(response){return response}function getItemFailed(error){return $q.reject(error)}return Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}var Items=$resource("/api/collections/CartInOrder/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,get:Items.get,save:Items.save,delete:Items.delete}}angular.module("gmall.services").service("CartInOrder",cartInOrderService),cartInOrderService.$inject=["$resource","$uibModal","$q"]}(),function(){function itemDirective(){return{scope:{},restrict:"E",bindToController:!0,controller:itemCtrl,controllerAs:"$ctrl",templateUrl:"views/template/partials/cart.html"}}function previewCartDirective(){return{scope:{},restrict:"EA",bindToController:!0,controller:previewCartCtrl,controllerAs:"$ctrl",transclude:!0,templateUrl:"views/template/partials/cart/previewCart.html"}}function addedCartDirective(){return{scope:{},bindToController:!0,controller:function($scope,$element,$timeout,global){$($element).fadeOut();var self=this;self.global=global,self.addItem=null;var timer=null;$scope.$on("$updateOrder",function(event,itemTo){self.addItem=angular.copy(itemTo),timer?$timeout.cancel(timer):$($element).fadeIn(),timer=$timeout(function(){self.addItem=null,timer=null,$($element).fadeOut()},2500)}),$($element).hover(function(){timer&&($timeout.cancel(timer),timer=null)},function(){$($element).fadeOut()}),$($element).click(function(){$($element).fadeOut()})},controllerAs:"$ctrl",templateUrl:"views/template/partials/cart/addedCart.html"}}function itemCtrl($scope,$anchorScroll,$order,global,exception,Confirm,$user,$q,CreateContent,$email,$notification,$state,$rootScope,$timeout){function _setCoupons(){self.coupons=null,global.get("coupons")&&global.get("coupons").val&&global.get("coupons").val.length&&global.get("coupons").val.forEach(function(c){global.get("user").val?global.get("user").val.coupons.indexOf(c._id)<0&&(self.coupons||(self.coupons=[]),self.coupons.push(c)):(self.coupons||(self.coupons=[]),self.coupons.push(c))}),self.coupon=null,global.get("coupons")&&global.get("coupons").val&&global.get("user").val?global.get("coupons").val[0]&&global.get("user").val.coupons.indexOf(global.get("coupons").val[0]._id)<0?self.coupon=global.get("coupons").val[0]:global.get("coupons").val[1]&&global.get("user").val.coupons.indexOf(global.get("coupons").val[1]._id)<0&&(self.coupon=global.get("coupons").val[1]):!global.get("user").val&&global.get("coupons")&&global.get("coupons").val&&(self.coupon=global.get("coupons").val[0])}function clearCart(){Confirm(global.get("langNote").val.clean+"?").then(function(){$order.clearCart()}).catch(function(err){(err=err&&err.data||err)&&exception.catcher(global.get("langNote").val.error)(err)})}function removeItem(i){Confirm(global.get("lang").val.delete+"?").then(function(){$order.removeItem(i)})}function saveCart(stuff){stuff?stuff.quantity&&(stuff.quantity>stuff.maxQty?(stuff.quantity=stuff.maxQty,exception.catcher(global.get("langNote").val.error)("слишком много")):stuff.quantity<stuff.minQty?(stuff.quantity=stuff.minQty,exception.catcher(global.get("langNote").val.error)("слишком мало")):$order.updateOrder()):$order.updateOrder()}function decreaseQty(i){$order.decreaseQty(i)}function increaseQty(i){$order.increaseQty(i)}function checkOut(){$rootScope.$emit("InitiateCheckout"),self.order.cart.stuffs.length&&(global.get("store").val.cartSetting&&global.get("store").val.cartSetting.slide?global.get("user").val&&global.get("user").val._id?forward(2):forward():(self.order=$order.getOrder(),$q.when().then(function(){return global.get("user").val&&global.get("user").val._id?void 0:$user.login()}).then(function(){if(global.get("store").val.bookkeep)return $order.checkWarehouse()}).then(function(){return $order.getShipInfo()}).then(function(){return sendOrder()}).catch(function(err){console.log(err),err&&exception.catcher("заказ")(err)})))}function sendOrder(){return $q.when().then(function(){return $rootScope.$emit("$stateChangeStartToStuff"),$order.sendOrder()}).then(function(){}).then(function(){$rootScope.$emit("$stateChangeEndToStuff"),$rootScope.$emit("Purchase",{value:$order.paySum,currency:$order.currency}),$order.reinitCart(),$rootScope.order=$order.getOrder(),self.order.setCoupon(null),_setCoupons(),$order.clearCart(),$rootScope.checkedMenu.cart=!1}).then(function(){return $user.saveProfile(global.get("user").val)}).catch(function(err){if($rootScope.$emit("$stateChangeEndToStuff"),err){if(console.log("errerrerr ",err),err.data)var content=JSON.stringify(err.data);else var content=JSON.stringify(err,["message","arguments","type","name"]);global.get("user").val&&(content+="\r"+global.get("user").val.email),$order.getOrder()&&(content+="\r"+JSON.stringify($order.getOrder(),null,4));var domain=global.get("store").val.domain,o={email:["igorchugurov@gmail.com","vikachugurova@gmail.com"],content:content,subject:"error in order ✔",from:global.get("store").val.name+"<"+global.get("store").val.subDomain+"@"+domain+">"};$q(function(resolve,reject){$email.save(o,function(res){resolve()},function(err){resolve()})}),err&&exception.catcher(global.get("langNote").val.error)(err)}})}function enableCheckOut(){return!(!self.order.totalCount||!self.order.cart.stuffs.length)&&!(self.opt>1&&!retail&&self.order.totalCount<self.opt)}function goToStuff(o){var states=$state.get();states.some(function(state){return"frame.stuffs.stuff"==state.name})?$state.go("frame.stuffs.stuff",o):states.some(function(state){return"stuffs.stuff"==state.name})&&$state.go("stuffs.stuff",o)}function disabledCheckOut(){if(!self.order.cart.stuffs.length)return!0}function back(){2==self.currentBlock&&global.get("user").val&&(self.currentBlock=1),self.currentBlock&&self.currentBlock--}function forward(num){num?self.currentBlock+=num:self.currentBlock++,console.log(self.currentBlock)}function setSlide(s){self.currentBlock=s}function getFilterName(tag){var t=global.get("filterTags").val.getOFA("_id",tag);if(t&&t.filter){var f=global.get("filters").val.getOFA("_id",t.filter);return f?f.name:""}return""}function setCouponForOrder(c,e){e.stopPropagation(),self.order.setCoupon(c)}var self=this;$scope.myInterval=2e3,$scope.noWrapSlides=!0,$scope.active33=2;var slides=$scope.slides=[],currIndex=0;$scope.addSlide=function(){var newWidth=600+slides.length+1;slides.push({image:"//unsplash.it/"+newWidth+"/300",text:["Nice image","Awesome photograph","That is so cool","I love that"][slides.length%4],id:currIndex++})},$scope.randomize=function(){var indexes=generateIndexesArray();assignNewIndexesToSlides(indexes)};for(var i=0;i<4;i++)$scope.addSlide();self.currentBlock=0;self.global=global,self.mobile=global.get("mobile").val,self.opt=global.get("store").val.seller.opt&&global.get("store").val.seller.opt.quantity?global.get("store").val.seller.opt.quantity:0;var retail=global.get("store").val.seller.retail;self.disabledMessage=self.opt>1&&!retail,self.countryCode=global.get("country"),self.clearCart=clearCart,self.removeItem=removeItem,self.saveCart=saveCart,self.checkOut=checkOut,self.enableCheckOut=enableCheckOut,self.goToStuff=goToStuff,self.disabledCheckOut=disabledCheckOut,self.back=back,self.getFilterName=getFilterName,self.decreaseQty=decreaseQty,self.increaseQty=increaseQty,self.setCouponForOrder=setCouponForOrder,function(){$order.type&&"cart"==$order.type?self.order=$order.getOrder():$order.init("cart").then(function(order){self.order=order}),console.log(self.order),$anchorScroll(),_setCoupons(),$scope.$on("logged",function(){_setCoupons()}),global.get("store").val.cartSetting&&global.get("store").val.cartSetting.slide&&setSlide(0)}(),$rootScope.$on("cartslide",function(event,data){console.log(data),data&&("shipInfoDone"==data.event?sendOrder():"shipInfoDone"==data.event?setSlide(0):"signLogin"==data.event?forward():"init"==data.event&&setSlide(0))})}function previewCartCtrl($scope,$anchorScroll,global,exception,$q,$state,$order,$element,$timeout,$rootScope){function activate(){$order.type&&"cart"==$order.type?self.order=$order.getOrder():$order.init("cart").then(function(order){self.order=order}),$anchorScroll(),self.loaded=!0}function removeItem(i){$order.removeItem(i)}function saveCart(){$order.updateOrder()}function goToStuff(o){var states=$state.get();states.some(function(state){return"frame.stuffs.stuff"==state.name})?$state.go("frame.stuffs.stuff",o):states.some(function(state){return"stuffs.stuff"==state.name})&&$state.go("stuffs.stuff",o)}var self=this;self.global=global;var listDiv=$element.find(".cartItems")[0];$(listDiv).fadeOut();var hoverIn;$($element).hover(function(){hoverIn=!0,$timeout(function(){hoverIn&&$(listDiv).fadeIn(150)},50),$(listDiv).fadeIn(100)},function(){hoverIn=!1,$timeout(function(){hoverIn||$(listDiv).fadeOut(100)},100)}),self.global=global,self.mobile=global.get("mobile").val,self.opt=global.get("store").val.seller.opt&&global.get("store").val.seller.opt.quantity?global.get("store").val.seller.opt.quantity:0;var retail=global.get("store").val.seller.retail;self.disabledMessage=self.opt>1&&!retail,self.countryCode=global.get("country"),self.removeItem=removeItem,self.saveCart=saveCart,self.goToStuff=goToStuff,$timeout(function(){activate()},400),$rootScope.$on("Purchase",function(){self.order=$order.getOrder()})}angular.module("gmall.services").directive("cartItem",itemDirective).directive("previewCart",previewCartDirective).directive("addedCart",addedCartDirective),itemCtrl.$inject=["$scope","$anchorScroll","$order","global","exception","Confirm","$user","$q","CreateContent","$email","$notification","$state","$rootScope","$timeout"],previewCartCtrl.$inject=["$scope","$anchorScroll","global","exception","$q","$state","$order","$element","$timeout","$rootScope"]}(),angular.module("gmall.services").factory("$notification",function($resource){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}var data={perPage:paginate.rows,page:paginate.page,query:query};return Items.query(data).$promise.then(getListComplete)}var Items=$resource("/api/collections/Notification/:id",{id:"@_id"},{deleteArray:{method:"DELETE"},updateNote:{method:"POST",params:{update:"note"}}});return{getList:getList,query:Items.query,get:Items.get,save:Items.save,delete:Items.delete}}),function(){function userService($resource,$uibModal,$q,Session,User,global,exception,$state,$window,$rootScope,$http,$auth,Account){function newUser(name,email,password){return name||(name=email.split("@")[0]),User.save({name:name,email:email,password:password,action:"subscribtion"}).$promise.then(function(user){if($rootScope.emit("CompleteRegistration"),global&&global.get("user")&&global.set("user",user),global.get("local")&&!global.get("local").val&&$window.ga&&$window.ga("send","event","registration","complete"),"cart"!=$state.current.name&&"couponDetail"!=$state.current.name){var states=$state.get();if(global.get("paps")&&states.some(function(state){return"thanksPage"==state.name})){var pap=global.get("paps").val.getOFA("action","subscribtion");pap&&pap.url&&$state.go("thanksPage",{url:pap.url})}}return user})}function newUserByPhone(name,phone,confirmCondition){var email=phone+"@gmall.io",user={email:email,name:name,profile:{phone:phone,fio:name}};return confirmCondition&&(user.confirmCondition=confirmCondition),$auth.signup(user).then(function(response){if(console.log(response),!(response&&response.data&&response.data.token))throw response;if("update"==response.data.token)throw null}).then(function(response){}).catch(function(err){err&&exception.catcher("new client")(err)})}function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return $q.reject(error)}return paginate||(paginate={}),Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete).catch(getListFailed)}function getItem(id,param){function getItemComplete(response){return response}function getItemFailed(error){return $q.reject(error)}return Items.get({_id:id,param:param}).$promise.then(getItemComplete).catch(getItemFailed)}function selectItem(query){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/user/modal/selectUser.html",controller:function($user,$uibModalInstance,query){var self=(angular.copy(query),this);self.items=[],self.name="";var paginate={page:0,rows:30,items:0};self.search=function(name){var q=angular.copy(query);name.length<3||(q?(q.$and||(q={$and:[query]}),q.$and.push({$or:[{name:name},{email:name},{"profile.fio":name}]})):q={$or:[{name:name},{email:name},{"profile.fio":name}]},$user.getList(paginate,q).then(function(res){self.items=res}))},self.selectItem=function(item){$uibModalInstance.close(item)},self.cancel=function(){$uibModalInstance.dismiss()}},controllerAs:"$ctrl",size:"lg",resolve:{query:function(){return query}}}).result.then(function(item){resolve(item)},function(){reject()})})}function selectOrCreat(){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/user/modal/selectOrCreate.html",controller:function($user,UserEntry,$http,global,$uibModalInstance){function refreshUsers(str){str.length<3||searchUser(str)}function searchUser(str){isNumeric(str)?(str.length>10&&(self.oldPhone=str.substring(0,10)),self.userName=""):(self.oldPhone=null,self.userName=str),self.users=[];var users=[],q={$or:[{name:str},{email:str},{"profile.fio":str},{"profile.phone":str}]},acts=[];q={search:str},acts.push(get$user(q)),$q.all(acts).then(function(res){res[0]&&res[0].length&&res[0].forEach(function(item){item.type="user",users.push(item)}),self.users=users})}function get$user(q){return $user.query(q).$promise}function addUser(){console.log("add user");var user={name:self.userName,email:self.userEmail,profile:{fio:self.userName,phone:self.phoneCode.substring(1)+self.oldPhone.substring(0,10)}};return self.userEmail||(user.email=user.profile.phone+"@gmall.io"),$q.when().then(function(){return $user.checkEmailForExist(user.email)}).then(function(res){if(res&&res.exist)throw"email exist"}).then(function(){return $http.post(userHost+"/api/createUser",user)}).then(function(res){user._id=res.data&&res.data._id?res.data._id:res.data.id,self.addingUser=!1,self.userName="",self.user=user,self.oldPhone=""}).catch(function(err){err&&exception.catcher("новый клиент")(err)})}function clearUser(){self.user=null}function isNumeric(n){return!isNaN(parseFloat(n))&&isFinite(n)}var self=this;self.items=[],self.user="",self.oldPhone=null,self.userName="name",self.userEmail="",self.global=global,self.phoneCodes=global.get("store").val.phoneCodes?global.get("store").val.phoneCodes:[{code:"+38",country:"Украина"}],self.phoneCode=global.get("store").val.phoneCode?global.get("store").val.phoneCode.code:"+38";self.refreshUsers=refreshUsers,self.addUser=addUser,self.clearUser=clearUser;new RegExp(/^\d+$/);self.ok=function(){$uibModalInstance.close(self.user)},self.cancel=function(){$uibModalInstance.dismiss()}},controllerAs:"$ctrl",size:"lg"}).result.then(function(item){resolve(item)},function(){reject()})})}function saveProfile(user){return Items.save({update:"profile"},{_id:user._id,profile:user.profile}).$promise}function login(bookeep){return $q(function(resolve,reject){if(global.get("user")&&global.get("user").val&&global.get("user").val._id)return resolve();var modalInstance=$uibModal.open({animation:!0,templateUrl:function(){return bookeep?"components/user/modal/login-only.html":"components/user/modal/login-sign.html"},controller:loginCtrl2,controllerAs:"$ctrl",windowClass:"modalProject",backdropClass:"modalBackdropClass"});$rootScope.$emit("modalOpened"),modalInstance.result.then(function(item){$rootScope.$emit("modalClosed"),resolve(item)},function(){$rootScope.$emit("modalClosed"),reject()})})}function loginOnlyPhone(){return $q(function(resolve,reject){if(global.get("user")&&global.get("user").val&&global.get("user").val._id)return resolve();var modalInstance=$uibModal.open({animation:!0,templateUrl:"components/user/modal/login-sign.onlyPhone.html",controller:loginOnlyPhoneCtrl,controllerAs:"$ctrl",windowClass:"modalProject",backdropClass:"modalBackdropClass"});$rootScope.$emit("modalOpened"),modalInstance.result.then(function(item){$rootScope.$emit("modalClosed"),resolve(item)},function(){$rootScope.$emit("modalClosed"),reject()})})}function getInfo(service){return service=!1,service=service?"Service":"Good",$q(function(resolve,reject){var modalInstance=$uibModal.open({animation:!0,templateUrl:"components/user/modal/getInfo.html",controller:getInfoCtrl,controllerAs:"$ctrl",windowClass:"modalProject",backdropClass:"modalBackdropClass",resolve:{service:function(){return service}}});$rootScope.$emit("modalOpened"),modalInstance.result.then(function(item){$rootScope.$emit("modalClosed"),resolve(item)},function(){$rootScope.$emit("modalClosed"),reject()})})}function getInfoCtrl($uibModalInstance,exception,global,User,$q,$http,service,Account){function closeModal(){$q.when().then(function(){return self.user._id?Items.save({update:"profile"},{_id:self.user._id,profile:self.user.profile}).$promise:$http.post("/auth/signupOrder",self.user)}).then(function(response){if(response&&response.data&&response.data.token)return $auth.setToken(response),Account.getProfile();response&&response.data&&response.data._id&&(self.user._id=response.data._id)}).then(function(){global.get("user").val&&(self.user=global.get("user").val),$uibModalInstance.close(self.user)})}var self=this;self.service=service,self.global=global,self.user=global.get("user").val,self.user||(self.user={email:"",profile:{}}),self.ok=closeModal,self.cancel=function(){$uibModalInstance.dismiss()}}function getInfoBonus(){return $q(function(resolve,reject){var modalInstance=$uibModal.open({animation:!0,templateUrl:"components/user/modal/getInfoBonus.html",controller:getInfoBonusCtrl,controllerAs:"$ctrl",windowClass:"modalProject",backdropClass:"modalBackdropClass"});$rootScope.$emit("modalOpened"),modalInstance.result.then(function(item){$rootScope.$emit("modalClosed"),resolve(item)},function(){$rootScope.$emit("modalClosed"),reject()})})}function getInfoBonusCtrl($uibModalInstance,exception,global,User,$q,$http,Account,$auth){function closeModal(){$q.when().then(function(){return self.user._id?Items.save({update:"profile"},{_id:self.user._id,profile:self.user.profile}).$promise:$http.post("/auth/signupOrder",self.user)}).then(function(response){if(response&&response.data&&response.data.token)return $auth.setToken(response),Account.getProfile();response&&response.data&&response.data._id&&(self.user._id=response.data._id)}).then(function(){global.get("user").val&&(self.user=global.get("user").val),$uibModalInstance.close(self.user)})}var self=this;self.global=global,self.user=global.get("user").val,self.formData=global.get("store").val.bonusForm?global.get("store").val.bonusForm:null,self.user||(self.user={email:"",profile:{},addInfo:{}}),self.ok=closeModal,self.cancel=function(){$uibModalInstance.dismiss()}}function createUser(){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/user/modal/createUser.html",controller:function($user,$uibModalInstance,$http,$q,exception){var self=this;self.user={profile:{}},self.ok=function(form){form.$invalid||(self.blockButton=!0,$q.when().then(function(){if(self.user.profile&&self.user.profile.phone){var phone=self.user.profile.phone;return $user.getItem(phone,"profile.phone")}return null}).then(function(res){if(res&&res._id)throw"phone exist"}).then(function(){return $user.checkEmailForExist(self.user.email)}).then(function(res){if(res&&res.exist)throw"email exist"}).then(function(){return $http.post(userHost+"/api/createUser",self.user)}).then(function(res){$uibModalInstance.close(res)}).catch(function(err){err&&exception.catcher("error")(err),self.blockButton=!1}))},self.cancel=function(){$uibModalInstance.dismiss()}},controllerAs:"$ctrl"}).result.then(function(item){resolve(item)},function(){reject()})})}function changeEmail(userId){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/user/modal/changeEmail.html",controller:function($user,global,$uibModalInstance,$http,$q,exception){function checkEmail(email,valid){if(!valid)return void(self.cheched=!1);$q.when().then(function(){return $user.checkEmailForExist(email)}).then(function(res){if(!res||res.exist)throw"email exist";self.cheched=!0}).catch(function(err){err&&exception.catcher("change email")(err),self.cheched=!1})}var self=this;self.global=global,self.checkEmail=checkEmail,self.email="",self.ok=function(){if(!self.cheched)return void exception.catcher("change email")("email используется");self.blockButton=!0,$q.when().then(function(){return Items.save({update:"email"},{_id:userId,email:self.email})}).then(function(res){$uibModalInstance.close(self.email)}).catch(function(err){self.blockButton=!1})},self.cancel=function(){$uibModalInstance.dismiss()}},controllerAs:"$ctrl",windowClass:"modalProject"}).result.then(function(item){resolve(item)},function(){reject()})})}function checkEmailForExist(email,_id){return $q(function(rs,rj){var o={email:email};_id&&(o._id=_id),User.checkEmail(o,function(res){rs(res)},function(err){rj(err)})})}function checkPhoneForExist(phone,_id){return $q(function(rs,rj){var o={email:phone};_id&&(o._id=_id),User.checkPhone(o,function(res){rs(res)},function(err){rj(err)})})}function changePhone(userId){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/user/modal/changePhone.html",controller:function($user,global,$uibModalInstance,$http,$q,exception){function checkPhone(phone){return $q.when().then(function(){return $user.checkPhoneForExist(phone)}).then(function(res){if(!res||res.exist)throw"phone exist"})}var self=this;self.global=global,self.checkPhone=checkPhone,self.email="",self.ok=function(){if(!self.phone)return void exception.catcher("change phone")("phone???");self.blockButton=!0,$q.when().then(function(){return checkPhone(self.phone)}).then(function(){var o={_id:userId};return o["profile.phone"]=self.phone,Items.save({update:"profile.phone"},o)}).then(function(res){$uibModalInstance.close(self.phone)}).catch(function(err){exception.catcher("change phone")(err),self.blockButton=!1})},self.cancel=function(){$uibModalInstance.dismiss()}},controllerAs:"$ctrl"}).result.then(function(item){resolve(item)},function(){reject()})})}function changePswd(_id){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/user/modal/changePswd.html",controller:function($user,global,$uibModalInstance,$http,$q,_id){var self=this;self.global=global,self.user={_id:_id,password:""},self.ok=function(){$q.when().then(function(){return $http.post(userHost+"/api/changePswd",self.user)}).then(function(res){$uibModalInstance.close(res)}).catch(function(err){$uibModalInstance.dismiss(err)})},self.cancel=function(){$uibModalInstance.dismiss()}},controllerAs:"$ctrl",resolve:{_id:function(){return _id}},windowClass:"modalProject"}).result.then(function(item){resolve(item)},function(){reject()})})}function logout(callback){var cb=callback||angular.noop;return Session.delete(function(){return global.set("user",null),cb()},function(err){return cb(err)}).$promise}function loginCtrl2($scope,$uibModalInstance,exception,global,User,$state){var self=this;self.global=global,global.get("store").val.typeOfReg&&global.get("store").val.typeOfReg.phone&&(self.phone=!0),$scope.$on("closeWitget",function(){$uibModalInstance.close()}),self.cancel=function(){$uibModalInstance.dismiss()}}function loginOnlyPhoneCtrl($scope,$uibModalInstance,exception,global,User,$state){var self=this;self.global=global,$scope.$on("closeWitget",function(){$uibModalInstance.close()}),self.cancel=function(){$uibModalInstance.dismiss()}}var Items=$resource("/api/collections/User/:_id",{_id:"@_id"});return this.query=Items.query,this.get=Items.get,this.delete=Items.delete,this.save=Items.save,{getList:getList,getItem:getItem,save:Items.save,delete:Items.delete,selectItem:selectItem,selectOrCreat:selectOrCreat,login:login,loginOnlyPhone:loginOnlyPhone,logout:logout,saveProfile:saveProfile,newUser:newUser,newUserByPhone:newUserByPhone,query:Items.query,getInfo:getInfo,createUser:createUser,changePswd:changePswd,getInfoBonus:getInfoBonus,changeEmail:changeEmail,changePhone:changePhone,checkEmailForExist:checkEmailForExist,checkPhoneForExist:checkPhoneForExist}}function accountFactory($http,$state,global){return{getProfile:function(){var store=global.get("store").val._id;return $http.get("/api/me/"+store)},getPermission:function(){var store=global.get("store").val._id;return $http.get("/api/permission/"+store)},getPermissionTranslator:function(){var store=global.get("store").val._id;return $http.get("/api/permissionTranslator/"+store)},getPermissionOrder:function(){var store=global.get("store").val._id;return $http.get("/api/permissionOrder/"+store)},getPermissionMaster:function(master){var store=global.get("store").val._id;return $http.get("/api/permissionMaster/"+store+"/"+master)},getEnterButton:function(user){var store=global.get("store").val._id;return user.frame=$state.get("frame")?$state.get("frame").url:null,user.store=store,$http.post("/api/getEnterButton",user)},updateProfile:function(profileData){var store=global.get("store").val._id;return profileData.store=store,$http.put(userHost+"/api/me",profileData)},unsubscription:function(){global.get("store").val._id;return $http.get("/api/unsubscription/"+global.get("user").val._id)}}}function subscibtionListService($resource){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}return Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete)}function getItem(id){function getItemComplete(response){return response}function getItemFailed(error){return error}return Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}var Items=$resource("/api/collections/SubscribtionList/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,save:Items.save,delete:Items.delete,query:Items.query,get:Items.get}}function userEntryService($resource,$q){
function getList(paginate,query){function getListComplete(response){return paginate.page||(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return $q.reject(error)}return paginate||(paginate={}),Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete).catch(getListFailed)}function getItem(id,param){function getItemComplete(response){return response}function getItemFailed(error){return $q.reject(error)}return Items.get({_id:id,param:param}).$promise.then(getItemComplete).catch(getItemFailed)}var Items=$resource("/api/collections/UserEntry/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,save:Items.save,delete:Items.delete,query:Items.query}}function sendPhoneFactory($http,$q,$user){function sendCodeToPhone(phone){if(phone){var o={phone:phone};return $q.when().then(function(){return $http.post("/api/users/sendSMS",o)})}}function verifyCode(code,phone){var o={code:code,phone:phone};return $q.when().then(function(){return $http.post("/api/users/verifySMScode",o)})}function checkPhone(phone){return $q.when().then(function(){return $user.getItem(phone,"profile.phone")}).then(function(res){return res?res:null})}return{sendCodeToPhone:sendCodeToPhone,verifyCode:verifyCode,checkPhone:checkPhone}}angular.module("gmall.services").factory("Session",["$resource",function($resource){return $resource("/api/session/")}]).factory("User",function($resource){return $resource("/api/users/:id/:email",{id:"@id"},{update:{method:"PUT",params:{id:"profile",email:""}},updateCoupon:{method:"PUT",params:{id:"coupon",email:""}},updatePswd:{method:"PUT",params:{id:"changepswd",email:""}},resetPswd:{method:"POST",params:{id:"resetpswd",email:"@email"}},get:{method:"GET",params:{id:"me",email:""}},checkEmail:{method:"GET",params:{id:"checkemail"}},checkPhone:{method:"GET",params:{id:"checkphone"}},useCoupon:{method:"GET",params:{id:"useCoupon"}},cancelCoupon:{method:"GET",params:{id:"cancelCoupon"}},repeatMailForConfirm:{method:"GET",params:{id:"repeatMailForConfirm"}}})}).service("$user",userService).service("UserEntry",userEntryService).factory("Account",accountFactory).factory("sendPhoneFactory",sendPhoneFactory).service("SubscibtionList",subscibtionListService),userService.$inject=["$resource","$uibModal","$q","Session","User","global","exception","$state","$window","$rootScope","$http","$auth","Account"],accountFactory.$inject=["$http","$state","global"],subscibtionListService.$inject=["$resource"],userEntryService.$inject=["$resource","$q"],sendPhoneFactory.$inject=["$http","$q","$user"]}(),angular.module("gmall.directives").directive("focusElement",["$timeout",function($timeout){return{scope:{focusElement:"="},link:function($scope,$element,$attr){$scope.$watch("focusElement",function(value){if(console.log(value),value)return void setTimeout(function(){$element[0].focus(),$scope.focusElemen=!1},200)})}}}]).directive("simpleFocusElement",[function(){return{restrict:"A",link:function(scope,element,attrs){setTimeout(function(){element[0].focus()},300),"false"==attrs.simpleFocusElement&&(console.log("focus",element[0]),setTimeout(function(){element[0].focus()},200))}}}]).directive("focusMe1",function($timeout,$parse){return{link:function(scope,element,attrs){var model=$parse(attrs.focusMe);scope.$watch(model,function(value){console.log("value=",value),value===!0&&$timeout(function(){element[0].focus()},300,!1)}),element.bind("blur",function(){console.log("blur"),scope.$apply(model.assign(scope,!1))})}}}).directive("focusMe",function($timeout){return{link:function(scope,element,attrs){scope.$watch(attrs.focusMe,function(value){value===!0&&$timeout(function(){element[0].focus(),scope[attrs.focusMe]=!1},300,!1)})}}}),angular.module("gmall.directives").directive("selectDropDown",["$window",function($window){return{link:function(scope,element,attrs){var defer=50;"defer"==attrs.selectDropDown&&(defer=200),setTimeout(function(){$(element).dropdown({callback:function($dropdown){$dropdown.fadeIn("slow")}})},defer)}}}]),angular.module("gmall.directives").directive("paginatorMain",function(anchorSmoothScroll,$anchorScroll,global){return{restrict:"E",scope:{paginate:"=",getlist:"&",scroll:"@"},link:function(scope,element,attrs,controller){function getList(){scope.scroll&&anchorSmoothScroll.scrollTo(scope.scroll,200),scope.getlist()}var store=global.get("store").val,stuffListType=global.get("sectionType")?global.get("sectionType").val:"good",rows=store.template.stuffListType[stuffListType]&&store.template.stuffListType[stuffListType].rows||3,filterBlock=store.template.stuffListType[stuffListType].parts.find(function(e){return"filters"==e.name&&e.is&&"false"!=e.is}),filtersInModal=store.template.stuffListType[stuffListType].filtersInModal;if(!filterBlock||global.get("mobile").val||filtersInModal||rows--,scope.paginate&&"object"==typeof scope.paginate){var l;scope.paginator={},scope.$watch("paginate.items",function(n,o){(n||0===n)&&(scope.paginate.items=Number(n),l=scope.paginator.pageCount(),scope.arrayPage=scope.getListPage())}),scope.paginator.setPage=function(page){((page=Number(page))||0===page)&&(page>scope.paginator.pageCount()||page==scope.paginate.page||(scope.paginate.page=page,0==scope.paginate.page&&(scope.arrayPage=scope.getListPage(2)),scope.paginate.page==l-1&&(scope.arrayPage=scope.getListPage(6)),scope.paginate.page==scope.arrayPage[3]&&6==scope.arrayPage.length&&l-1-scope.paginate.page>2?scope.arrayPage=scope.getListPage():scope.paginate.page==scope.arrayPage[4]&&7==scope.arrayPage.length?scope.arrayPage=scope.getListPage():scope.paginate.page==scope.arrayPage[2]&&scope.paginate.page-scope.arrayPage[0]>=2&&(scope.arrayPage=scope.getListPage()),getList()))},scope.paginator.nextPage=function(){scope.paginator.isLastPage()||(scope.paginate.page++,scope.paginate.page==scope.arrayPage[3]&&6==scope.arrayPage.length&&l-1-scope.paginate.page>2?scope.arrayPage=scope.getListPage():scope.paginate.page==scope.arrayPage[4]&&7==scope.arrayPage.length?scope.arrayPage=scope.getListPage():scope.paginate.page==scope.arrayPage[2]&&scope.paginate.page-scope.arrayPage[0]>=2&&(scope.arrayPage=scope.getListPage()),getList())},scope.paginator.perviousPage=function(){scope.paginator.isFirstPage()||(scope.paginate.page--,scope.paginate.page==scope.arrayPage[3]&&6==scope.arrayPage.length&&l-1-scope.paginate.page>2?scope.arrayPage=scope.getListPage():scope.paginate.page==scope.arrayPage[4]&&7==scope.arrayPage.length?scope.arrayPage=scope.getListPage():scope.paginate.page==scope.arrayPage[2]&&scope.paginate.page-scope.arrayPage[0]>=2&&(scope.arrayPage=scope.getListPage()),getList())},scope.paginator.firstPage=function(){scope.paginate.page=0,getList()},scope.paginator.lastPage=function(){scope.paginate.page=scope.paginator.pageCount()-1,getList()},scope.paginator.isFirstPage=function(){return 0==scope.paginate.page},scope.paginator.isLastPage=function(){return scope.paginate.page==scope.paginator.pageCount()-1},scope.paginator.pageCount=function(){var perPage=scope.paginate.rows,delta=perPage%rows;delta>=Math.round(rows/2)?perPage+=rows-delta:perPage-=delta;var count=Math.ceil(parseInt(scope.paginate.items,10)/parseInt(perPage,10));return 1===count&&(scope.paginate.page=0),count},scope.changeRow=function(rows){for(scope.paginate.rows=rows;scope.paginator.pageCount()<scope.paginate.page-1;)scope.paginate.page--;getList()},scope.arrayPage=[],scope.getListPage=function(num){var page=scope.paginate.page,arrayPage=[];if((0===num||num)&&(page=num),l<=6)for(var i=0;i<l;i++)arrayPage.push(i);else{if(page>=3)arrayPage.push(0),arrayPage.push("..."),arrayPage.push(page-1),arrayPage.push(page),arrayPage.push(page+1);else for(var i=0;i<4;i++)arrayPage.push(i);l-1-page>2&&arrayPage.push("..."),arrayPage.push(l-1)}return arrayPage},scope.getPageStr=function(i){return Number(i)||0===i?i+1:i}}},templateUrl:"components/paginator/paginator.html"}}),angular.module("gmall.directives").directive("lostFocus",["$window",function($window){return{scope:{lostFocus:"&",focusElement:"="},link:function(scope,element){setTimeout(function(){scope.focusElement&&element[0].focus(),element.bind("blur",function(e){setTimeout(function(){scope.lostFocus()})}),element.trigger("change")},500)}}}]).directive("focusMe",[function(){return{scope:{focusMe:"="},link:function(scope,element){scope.$watch("focusMe",function(n){n&&setTimeout(function(){element[0].focus(),scope.focusMe=!1})})}}}]).directive("isScrolledIntoView",[function(){return{scope:{isScrolledIntoView:"="},link:function(scope,elem){function isScrolledIntoViewF(elem){var docViewTop=$(window).scrollTop(),docViewBottom=docViewTop+$(window).height(),elemTop=$(elem).offset().top-150;return elemTop+$(elem).height()<=docViewBottom&&elemTop>=docViewTop}$(window).scroll(function(){scope.isScrolledIntoView=isScrolledIntoViewF(elem),scope.$apply()})}}}]),function(){angular.module("gmall.directives").directive("ngAutocompleteCity",function($parse,$timeout,global){return{scope:{user:"=",change:"&"},link:function(scope,element,attrs,model,contorller){function activate(){scope.user||(scope.user={}),scope.user.profile||(scope.user.profile={}),scope.user.profile.city||(scope.user.profile.city=""),element[0].value=scope.user.profile.city,void 0==scope.gPlace&&(scope.gPlace=new google.maps.places.Autocomplete(element[0],{types:["(cities)"]})),google.maps.event.addListener(scope.gPlace,"place_changed",place_changed),google.maps.event.addDomListener(element[0],"keydown",function(e){13==e.keyCode&&e.preventDefault()})}function place_changed(){placeChosen=!0;var place=scope.gPlace.getPlace();place.place_id?setTimeout(function(){scope.user.profile.city=element.val(),$timeout(function(){scope.user.profile.cityId=place.place_id},200),scope.$apply(),scope.change&&"function"==typeof scope.change&&scope.change()},50):(scope.cityId=null,scope.user.profile.city=element.val(),scope.$apply()),$timeout(function(){placeChosen=!1},1e3)}var placeChosen=!1;setTimeout(function(){activate()},500),scope.$watch(function(){return element.val()},function(o,n){n&&n!=o&&!placeChosen&&(scope.user.profile.cityId=null,scope.user.profile.city=element.val())})}}})}(),angular.module("gmall.services").factory("Collection",function($resource){return $resource("/api/collections/Collection/:id",{id:"@id"},{getCollectionsForBrand:{method:"GET",isArray:!0,params:{id:"",query:"query"}}})}),angular.module("gmall.services").service("anchorSmoothScroll",function(){this.scrollTo=function(eID,diff){var startY=function(){return self.pageYOffset?self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0}(),stopY=function(eID){var elm=document.getElementById(eID);if(!elm)return 0;for(var y=elm.offsetTop,node=elm;node.offsetParent&&node.offsetParent!=document.body;)node=node.offsetParent,y+=node.offsetTop;return y}(eID)+(diff?diff:0),distance=stopY>startY?stopY-startY:startY-stopY;if(distance<100)return void scrollTo(0,stopY);var speed=Math.round(distance/100);speed>=20&&(speed=20);var step=Math.round(distance/25),leapY=stopY>startY?startY+step:startY-step,timer=0;if(stopY>startY)for(var i=startY;i<stopY;i+=step)setTimeout("window.scrollTo(0, "+leapY+")",timer*speed),leapY+=step,leapY>stopY&&(leapY=stopY),timer++;else for(var i=startY;i>stopY;i-=step)setTimeout("window.scrollTo(0, "+leapY+")",timer*speed),leapY-=step,leapY<stopY&&(leapY=stopY),timer++}}),function(){function serviceFunction($resource,$uibModal,$q){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return console.log("XHR Failed for getNews."+error),$q.reject(error)}return Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete).catch(getListFailed)}function getItem(id){function getItemComplete(response){return response}function getItemFailed(error){return $q.reject(error)}return console.log(id),Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}function create(){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/PROMO/coupon/createCoupon.html",controller:function($uibModalInstance){var self=this;self.name="",self.ok=function(){$uibModalInstance.close(self.name)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl"}).result.then(function(name){name?resolve(name.substring(0,100)):reject("empty")},function(err){reject(err)})})}var Items=$resource("/api/collections/Coupon/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,query:Items.query,get:Items.get,save:Items.save,delete:Items.delete,create:create}}angular.module("gmall.services").service("Coupon",serviceFunction),serviceFunction.$inject=["$resource","$uibModal","$q"]}(),angular.module("gmall.directives").directive("externalCatalog",externalCatalogComponent).directive("externalCatalogDownload",externalCatalogDownload),externalCatalogDownloadCtrl.$inject=["ExternalCatalog","$q","Confirm","exception","global","$timeout","$http","$resource","Sections","Brands","$uibModal"],externalCatalogCtrl.$inject=["ExternalCatalog","$q","Confirm","exception","global","$timeout"],angular.module("gmall.services").service("ExternalCatalog",function($resource,$q,$uibModal){function getItems(reload){return!items||reload?getList():items}function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),items=response,response}function getListFailed(error){return console.log("XHR Failed for getNews."+error),$q.reject(error)}return paginate||(paginate={page:0}),Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete).catch(getListFailed)}function getItem(id){function getItemComplete(response){return response}function getItemFailed(error){return $q.reject(error)}return Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}function create(){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/externalCatalog/createExternalCatalog.html",controllerAs:"$ctrl",controller:function($uibModalInstance){var self=this;self.name="",self.ok=function(){if(!self.name)return void exception.catcher("создание объекта")("нужено название");$uibModalInstance.close({name:self.name})},self.cancel=function(){$uibModalInstance.dismiss()}}}).result.then(function(item){item.name?(item.name=item.name.substring(0,25),resolve(item)):reject("empty")},function(err){reject(err)})})}var items,Items=$resource("/api/collections/ExternalCatalog/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,query:Items.query,get:Items.get,save:Items.save,delete:Items.delete,create:create,getItems:getItems}}),function(window){function extend(a,b){for(var key in b)b.hasOwnProperty(key)&&(a[key]=b[key]);return a}function Menu(options){this.options=extend({},this.options),extend(this.options,options),this._init()}Menu.prototype.options={type:"c-menu--push-left"},Menu.prototype._init=function(){this.menu=document.querySelector("#c-menu--"+this.options.type),console.log()},Menu.prototype.open=function(){this.menu.classList.add("is-active")},Menu.prototype.close=function(){this.menu.classList.remove("is-active")},window.MenuSlide=Menu}(window),angular.module("gmall.directives").directive("slideMenu",["$rootScope","$q","Sections","$state",function($rootScope,$q,Sections,$states){return{restrict:"E",scope:{displaySlideMenu:"="},templateUrl:"components/slideMenu/slideMenu.html",link:function($scope,element,attrs){function getSection(){$q.when().then(function(){return Sections.getSections()}).then(function(sections){$scope.sections=sections})}var slideLeft,initDone;setTimeout(function(){initDone=!0,slideLeft=new MenuSlide({type:"push-left"}),$("#c-menu--push-left").niceScroll(),$scope.displaySlideMenu&&$scope.openMenu()}),$scope.$watch("displaySlideMenu",function(n,o){n&&initDone?$scope.openMenu():!n&&initDone&&$scope.closeMenu()}),$scope.closeMenu=function(){$("#mainContent").hasClass("pl300")&&(slideLeft.close(),$("#mainContent").removeClass("pl300"),$("#mainContent").addClass("pl150"))},$scope.openMenu=function(){getSection(),slideLeft.open(),$("#mainContent").addClass("pl300"),$("#mainContent").removeClass("pl150")},getSection(),$scope.getSectionUrlParams=function(section){var params={groupUrl:"group",categoryUrl:"category",categoryList:null,parentGroup:null,brand:null,artikul:null,brandTag:null,queryTag:null,searchStr:null};return 0===section.level?(params.groupUrl=section.url,section.child&&section.child.length?params.categoryList=null:params.categoryList="allCategories"):params.parentUrl=section.url,params},$scope.getSectionUrlParamsAndGo=function(section){var params={groupUrl:"group",categoryUrl:"category",categoryList:null,parentGroup:null,brand:null,artikul:null,brandTag:null,queryTag:null,searchStr:null};0===section.level?(params.groupUrl=section.url,section.child&&section.child.length?params.categoryList=null:params.categoryList="allCategories"):(params.groupUrl=section.section.url,params.parentGroup=section.url,params.categoryList="allCategories"),$state.go("frame.stuffs",params)}}}}]),angular.module("gmall.controllers").controller("selectCategoryModalCtrl",function($scope,$uibModalInstance,$q,Sections,categoryId){$scope.categoryId=categoryId,console.log($scope.categoryId),$q.when().then(function(){return Sections.getSections()}).then(function(sections){$scope.sections=sections}),$scope.selectCategory=function(selectedCategory){$uibModalInstance.close(selectedCategory)},$scope.cancel=function(){$uibModalInstance.dismiss("cancel")}}).controller("bindCategoryToFilterCtrl",function($scope,$uibModalInstance,Category,Sections,$resource,$q,sections,field,id,revers){function checkField(section){return $scope.revers||section[field].indexOf($scope.id)>-1&&(section.checked=!0),section.showCheck=!1,section.categories&&section.categories.length&&(section.checkAll=!0,section.showCheck=!0,section.categories.forEach(function(category){$scope.revers?$scope.item[field].indexOf(category._id)>-1?category.checked=!0:section.checkAll=!1:category[field].indexOf($scope.id)>-1?category.checked=!0:section.checkAll=!1})),section.child&&section.child.length&&(section.checkAll=!1,section.child.forEach(function(s){checkField(s)&&(section.showCheck=!0)})),section.showCheck}function checkCategory(category){if(category.checked)$scope.revers?($scope.item[field].indexOf(category._id)<0&&$scope.item[field].push(category._id),category=$scope.item):category[field]?category[field].indexOf($scope.id)<0&&category[field].push($scope.id):(category[field]=[],category[field].push($scope.id));else if($scope.revers){if($scope.item[field]&&$scope.item[field].length){var i=$scope.item[field].indexOf(category._id);i>-1&&$scope.item[field].splice(i,1)}category=$scope.item}else if(category[field]&&category[field].length){var i=category[field].indexOf($scope.id);i>-1&&category[field].splice(i,1)}({_id:category._id})[field]=category[field].filter(function(el){return el}),Category.save({update:field},category)}function foo(s){if(s.child&&s.child.length){for(var i=0,l=s.child.length;i<l;i++){var section=s.child[i];if(section.showCheck)if(section.child&&section.child.length){if(section.checkAll=foo(section),!section.checkAll)return!1}else if(!section.checkAll)return!1}return!0}}$scope.id=id,$scope.revers=revers,sections.forEach(function(s){s.checked=!1,s.categories&&s.categories.length&&s.categories.forEach(function(c){c.checked=!1}),s.child&&s.child.length&&s.child.forEach(function(s){s.checked=!1,s.categories&&s.categories.length&&s.categories.forEach(function(c){c.checked=!1})})}),$scope.bindFilter=function(category,section){checkCategory(category),section.checkAll=!0;for(var i=0,l=section.categories.length;i<l;i++)if($scope.revers){if($scope.item[field].indexOf(section.categories[i]._id)<0){section.checkAll=!1;break}}else if(section.categories[i][field].indexOf($scope.id)<0){section.checkAll=!1;break}},$scope.bindFilterForSection=function(section,checkAll){if(!$scope.revers){if(section.checked)section[field].indexOf($scope.id)<0&&section[field].push($scope.id);else{var pos=section[field].indexOf($scope.id);section[field].splice(pos,1)}var o={_id:section._id};o[field]=section[field],Sections.save({update:field},o)}},$q.when().then(function(){var q=$q.defer();if($scope.revers){var Item=$resource("/api/collections/BrandTags/:id",{id:"@_id"});Item.get({id:$scope.id},function(res){res[$scope.field]||(res[$scope.field]=[]),$scope.item=res,q.resolve()}),Category=Item}else q.resolve();return q.promise}).then(function(){$scope.sections=sections.filter(function(el){return 0===el.level}),$scope.sections.forEach(checkField),$scope.sections.forEach(function(s){s.showCheck&&(s.checkAll=foo(s))})}),$scope.cancel=function(){$uibModalInstance.dismiss("cancel")}}).controller("selectFilterModalCtrl",function($scope,$uibModalInstance,filter,tags){$scope.filter=filter,$scope.allTags=!1,$scope.changeAllTags=function(criteria){filter.tags.forEach(function(tag){tag.set=criteria})},$scope.cancel=function(){$uibModalInstance.dismiss("cancel")}}).controller("selectBrandModalCtrl",function($scope,$uibModalInstance,$q,Brands,brandItem,brands){$scope.brandItem=brandItem,$scope.brands=brands,$scope.cancel=function(){$uibModalInstance.dismiss("cancel")},$scope.ok=function(brandItem){$uibModalInstance.close(brandItem)},$q.when().then(function(){var q=$q.defer();return brands&&brands.length?($scope.brands=brands,q.resolve()):Brands.query(function(res){res.shift(),$scope.brands=res,q.resolve()},function(err){q.reject(err)}),q.promise})}).controller("selectBrandTagModalCtrl",function($scope,$uibModalInstance,brandTag,brandTags){setTimeout(function(){$scope.brandTag=brandTag},200),$scope.brandTags=brandTags,console.log(brandTag,brandTags),$scope.ok=function(brandTag){$uibModalInstance.close(brandTag)},$scope.cancel=function(){$uibModalInstance.dismiss("cancel")}}),angular.module("gmall.services").service("SelectCategory",["$q","$uibModal","Sections",function($q,$uibModal,Sections){this.bindCategoryForFilterBrandCol=function(id,field,revers){$q.when().then(function(){return Sections.getSections()}).then(function(sections){return{animation:!0,templateUrl:"components/selectCategoryModal/bindCategoryToFilter.html",controller:"bindCategoryToFilterCtrl",size:"lg",resolve:{sections:function(){return sections},field:function(){return field},id:function(){return id},revers:function(){return revers}}}}).then(function(options){$uibModal.open(options).result.then(function(selectedCategory){console.log(selectedCategory),selectedCategory._id!=$scope.item.category._id&&Category.get({id:selectedCategory._id},function(res){$scope.tagsValue=setTagsValue($scope.item.tags,res.filters),$scope.item.category=res})},function(){console.log("Modal dismissed at: "+new Date)})})}}]),angular.module("gmall.directives").directive("growlNotification",[function(){return{restrict:"AE",scope:{msg:"="},templateUrl:"components/growlNotification/growlNotification.html",link:function(scope,element,arrts){$(element).hide(),scope.$watch("msg",function(n){n&&($(element).fadeIn(500),setTimeout(function(){$(element).fadeOut(500),scope.msg=null},2e3))})}}}]),angular.module("gmall.directives").directive("backToTop",[function(){return{restrict:"AC",link:function(scope,element){$(element).hide(),$(window).scroll(function(){$(this).scrollTop()>200?$(element).fadeIn(400):$(element).fadeOut(400)}),element.bind("click",function(){return $("html, body").animate({scrollTop:0},300),!1})}}}]).directive("bounce",[function(){return{restrict:"C",link:function(scope,iElement,iAttrs){$(window).scroll(function(){$(this).scrollTop()<30?$(iElement).fadeIn(400):$(iElement).fadeOut(400)})}}}]),angular.module("gmall.directives").directive("fileReadSrc",["$parse","$timeout",function($parse,$timeout){return{restrict:"A",scope:{fileSrc:"=fileReadSrc",myFile:"="},link:function(scope,element,attrs){element.bind("change",function(changeEvent){var reader=new FileReader;reader.onload=function(loadEvent){scope.$apply(function(){$timeout(function(){scope.fileSrc=loadEvent.target.result})})},scope.myFile=changeEvent.target.files[0],reader.readAsDataURL(changeEvent.target.files[0])})}}}]).directive("loadImage",["$fileUpload","$timeout","Photo",function($fileUpload,$timeout,Photo){return{restrict:"AE",scope:{uploadUrl:"@",itemId:"@",itemUrl:"@",fileSrc:"=",Item:"=itemResourse",gallery:"=",nameImg:"@",nameImgForSave:"@",deleteFile:"@",replaceIndex:"@"},controller:function($scope){$scope.$ctrl={fileDimension:"Origin"},$scope.dimen=$scope.uploadUrl.split("/"),$scope.$ctrl.fileDimension="",$scope.$ctrl.fileDimension=$scope.dimen[$scope.dimen.length-1].slice(10)},templateUrl:"components/loadImage/loadimage.html",link:function(scope,element,attrs){var oldImg,string="abcdefghijklmnopqrstuvwxyzQAZWSXEDCRFVTGBYHNUJMIKOLP1234567890";scope.noLoad=!0,scope.noChange=!1,scope.now=Date.now()+string.shuffle(5),scope.nameImg||(scope.nameImg="img"),scope.photoIndexArray=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,100],scope.$watch("fileSrc",function(n,o){n&&n.indexOf("base64")<0&&(oldImg=n)}),scope.$watch("myFile",function(n,o){scope.noLoad=!n}),scope.$watch("itemId",function(n,o){scope.noChange=!n}),scope.clickFile=function(){var id="#imagefile"+scope.now;angular.element(id).trigger("click")},scope.uploadImg=function(){if(scope.itemId){var file=scope.myFile;scope.noChange=!0;var params={index:scope.index,nameImg:scope.nameImg};scope.itemUrl&&"undefined"!=scope.itemUrl&&(params.url=scope.itemUrl),scope.dimen[scope.dimen.length-1]=scope.dimen[scope.dimen.length-1].slice(0,10);var url=scope.dimen.join("/");url+=scope.$ctrl.fileDimension,$fileUpload.uploadFileToUrl(file,url,scope.itemId,params).then(function(res){scope.myFile=null,scope.noChange=!1,scope.noLoad=!0,scope.fileSrc=null;var o={_id:scope.itemId};$timeout(function(){if("imgs"==scope.nameImg)scope.replaceIndex?(scope.gallery[scope.replaceIndex].img=res.data.imgs[0].img,oldImg&&(console.log("deleting"),Photo.deleteFiles("Stuff",[oldImg]))):scope.gallery.push(res.data.imgs[0]),scope.nameImgForSave?o[scope.nameImgForSave]=scope.gallery:o[scope.nameImg]=scope.gallery;else if("gallery"==scope.nameImg)scope.gallery.push(res.data.gallery[0]),o[scope.nameImg]=scope.gallery;else{if(oldImg){var small=oldImg.split("/");small[small.length-1]=small[small.length-1].replace("img","small"),small=small.join("/"),console.log("deleting"),Photo.deleteFiles("Stuff",[oldImg,small])}oldImg=res.data.img?res.data.img:res.data[scope.nameImg],scope.fileSrc=res.data.img?res.data.img:res.data[scope.nameImg],o[scope.nameImg]=res.data.img?res.data.img:res.data[scope.nameImg]}var field=scope.nameImgForSave?scope.nameImgForSave:scope.nameImg;res.data["small"+scope.nameImg]&&(field+=" small"+scope.nameImg,o["small"+scope.nameImg]=res.data["small"+scope.nameImg]),scope.Item.save({update:field},o)},10)}).catch(function(err){err&&exception.catcher("upload video")(err)})}},scope.deleteImg=function(){if(!scope.itemId)return scope.fileSrc=null,void(scope.noLoad=!0);if(oldImg){var o={_id:scope.itemId},field=scope.nameImg;field+=" small"+scope.nameImg,o[scope.nameImg]=null,o["small"+scope.nameImg]=null,scope.Item.save({update:field},o);var small=oldImg.split("/");small[small.length-1]=small[small.length-1].replace("img","small"),small=small.join("/"),Photo.deleteFiles("Stuff",[oldImg,small]),oldImg=null,scope.fileSrc="",scope.noChange=!1,scope.noLoad=!0}}}}}]).directive("uploadVideo",["$fileUpload","$timeout","Photo","exception",function($fileUpload,$timeout,Photo,exception){return{restrict:"AE",scope:{uploadUrl:"@",itemId:"@",fileSrc:"=",Item:"=itemResourse",gallery:"=",nameImg:"@"},templateUrl:"components/loadImage/uploadVideo.html",link:function(scope,element,attrs){var oldImg;scope.noLoad=!0,scope.noChange=!1,scope.now=Date.now()+"abcdefghijklmnopqrstuvwxyzQAZWSXEDCRFVTGBYHNUJMIKOLP1234567890".shuffle(5),scope.nameImg||(scope.nameImg="img"),scope.photoIndexArray=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,100],scope.$watch("fileSrc",function(n,o){n&&n.indexOf("base64")<0&&(oldImg=n)}),scope.$watch("myFile",function(n,o){scope.noLoad=!n}),scope.$watch("itemId",function(n,o){scope.noChange=!n}),scope.clickFile=function(){var id="#imagefile"+scope.now;angular.element(id).trigger("click")},scope.uploadImg=function(){if(scope.itemId){var file=scope.myFile;scope.noChange=!0;var o={_id:scope.itemId};$fileUpload.uploadFileToUrl(file,scope.uploadUrl,scope.itemId,{index:scope.index,nameImg:scope.nameImg}).then(function(res){scope.myFile=null,scope.noChange=!1,scope.noLoad=!0,scope.fileSrc=null,$timeout(function(){if(o[scope.nameImg]=res.data.img,oldImg){var small=oldImg.split("/");small[small.length-1]=small[small.length-1].replace("img","small"),small=small.join("/"),console.log("deleting"),Photo.deleteFiles("Stuff",[oldImg,small])}oldImg=res.data.img,scope.fileSrc=res.data.img,scope.Item.save({update:scope.nameImg},o)},100)}).catch(function(err){err&&exception.catcher("upload video")(err)})}},scope.deleteImg=function(){if(!scope.itemId)return scope.fileSrc=null,void(scope.noLoad=!0);if(oldImg){var o={_id:scope.itemId};o[scope.nameImg]=null,scope.Item.save({update:scope.nameImg},o),Photo.deleteFiles("Stuff",[oldImg]),oldImg=null,scope.fileSrc="",scope.noChange=!1,scope.noLoad=!0}}}}}]).directive("loadImageWithLink",["$fileUpload","$timeout","$http",function($fileUpload,$timeout,$http){return{restrict:"AE",scope:{noLoad:"=noLoad",noChange:"=noChange",uploadUrl:"@",itemId:"@",fileSrc:"=",additionUrl:"@",Item:"=itemResourse",gallery:"="},templateUrl:"manager/views/templates/loadimagewithlinks.html",link:function(scope,element,attrs){var additionUrl=scope.additionUrl?scope.additionUrl:"Subscribe";scope.photoIndexArray=[1,2,3,4,5,6,7,8,9,10,11,12,100],scope.$watch("myFile",function(n,o){scope.noLoad=!n}),scope.$watch("itemId",function(n,o){scope.noChange=!n}),scope.$watch("fileSrc",function(n,o){n||(scope.fileSrc="/img/upload/no.png")}),scope.link="",scope.index=1,scope.uploadImg=function(){if(scope.itemId){var file=scope.myFile;scope.noChange=!0,$fileUpload.uploadFileToUrl(file,scope.uploadUrl,scope.itemId,{index:scope.index,link:scope.link}).then(function(res){scope.myFile=null,scope.link="",scope.index=1,console.log(res),scope.noChange=!1,scope.noLoad=!0,scope.fileSrc=res.data.img,$timeout(function(){scope.gallery=res.data.gallery},10)})}},scope.deleteImg=function(){scope.itemId&&(scope.noChange=!0,scope.fileSrc="",scope.Item.delete({id:scope.itemId,file:"file"},function(res){scope.noChange=!1,scope.noLoad=!0,alert(res.msg)}))},scope.deletePhoto=function(index){confirm("Удалить?")&&$http.get("/api/collections/"+additionUrl+"/fileGalleryDelete/"+scope.itemId+"/"+index).then(function(response){scope.gallery=response.data.gallery})},scope.updateStuffGallery=function(){$http.post("/api/collections/"+additionUrl+"/fileGalleryUpdate/"+scope.itemId,{gallery:scope.gallery}).then(function(response){scope.gallery=response.data.gallery})}}}}]).directive("loadImageBig",["$fileUpload","$timeout",function($fileUpload,$timeout){return{restrict:"AE",scope:{noLoad:"=noLoad",noChange:"=noChange",uploadUrl:"@",itemId:"@",fileSrc:"=",Item:"=itemResourse",nameImage:"@"},templateUrl:"manager/views/templates/loadimagebig.html",link:function(scope,element,attrs){scope.$watch("myFile",function(n,o){scope.noLoad=!n}),scope.$watch("itemId",function(n,o){scope.noChange=!n}),scope.clickOnUpload=function(id){$timeout(function(){angular.element("#"+id).trigger("click")},100)},scope.uploadImg=function(){if(scope.itemId){var file=scope.myFile;scope.noChange=!0,$fileUpload.uploadFileToUrl(file,scope.uploadUrl,scope.itemId,{nameImg:scope.nameImage}).then(function(res){scope.myFile=null,
scope.noChange=!1,scope.noLoad=!0,scope.fileSrc=res.data.img,$timeout(function(){scope.fileSrc=res.data.img},10)})}},scope.deleteImg=function(){scope.itemId&&(scope.noChange=!0,scope.fileSrc="",scope.Item.delete({id:scope.itemId,file:scope.nameImage},function(res){scope.noChange=!1,scope.noLoad=!0,alert(res.msg)}))}}}}]).directive("fileModel",["$parse",function($parse){return{restrict:"A",link:function(scope,element,attrs){var model=$parse(attrs.fileModel),modelSetter=model.assign;element.bind("change",function(){scope.$apply(function(){modelSetter(scope,element[0].files[0])})})}}}]).directive("uploadFiles",function($timeout){return{link:function(scope,element,attrs){console.log(element[0].form);var $form=$(element[0].form);if(function(){var div=document.createElement("div");return("draggable"in div||"ondragstart"in div&&"ondrop"in div)&&"FormData"in window&&"FileReader"in window}()){$form.addClass("has-advanced-upload");var droppedFiles=!1;$form.on("drag dragstart dragend dragover dragenter dragleave drop",function(e){e.preventDefault(),e.stopPropagation()}).on("dragover dragenter",function(){$form.addClass("is-dragover")}).on("dragleave dragend drop",function(){$form.removeClass("is-dragover")}).on("drop",function(e){droppedFiles=e.originalEvent.dataTransfer.files,console.log(e.target.files),console.log(droppedFiles)})}var changedHandler=function(event){return void(window.File&&window.FileList&&window.FileReader?(scope.$apply(function(){var files=event.target.files;document.getElementById("result");files.length?scope.hasFiles=!0:scope.hasFiles=!1;for(var i=0;i<files.length;i++){var file=files[i],picReader=new FileReader;picReader.addEventListener("load",function(event){var picFile=event.target;file.imgSrc=picFile.result,scope.files.push(file)}),picReader.readAsDataURL(file)}}),$timeout(function(){},1e3)):console.log("Your browser does not support File API"))},resetHandler=function(){scope.$apply(function(){scope.files.length=0,scope.hasFiles=!1})};element.bind("change",changedHandler),element[0].form&&angular.element(element[0].form).bind("reset",resetHandler),scope.$watchCollection("files",function(){0===scope.files.length&&element.val(null)}),scope.$on("$destroy",function(){element.unbind("change",changedHandler),element[0].form&&angular.element(element[0].form).unbind("reset",resetHandler)})},restrict:"A",scope:{files:"=uploadFiles",hasFiles:"="}}}),angular.module("gmall.services").service("$fileUpload",["$http","$uibModal","$q",function($http,$uibModal,$q){this.uploadFileToUrl=function(file,uploadUrl,id,params,type){var fd=new FormData;if(fd.append("file",file),fd.append("id",id),params&&"object"==typeof params)for(var key in params)fd.append(key,params[key]);var preffix=photoUpload;switch(type){case"user":preffix=userHost}return $http.post(preffix+uploadUrl,fd,{withCredentials:!0,transformRequest:angular.identity,headers:{"Content-Type":void 0}})},this.showFile=function(block,field){return $uibModal.open({animation:!0,templateUrl:"components/loadImage/showImgInModal.html",controllerAs:"$ctrl",controller:function($uibModalInstance,block,field){function ok(item){$uibModalInstance.close()}function cancel(){$uibModalInstance.dismiss()}var self=this;self.item=block,console.log(self.item),self.ok=ok,self.cancel=cancel},resolve:{block:function(){return block},field:function(){return field}}}).result},this.fileUpload=function(uploadUrl,field,itemUrl,itemId,index){return $uibModal.open({animation:!0,templateUrl:function(){return field&&"video"==field||"video.link"==field||"video1.link"==field?"components/loadImage/loadVideoModal.html":"components/loadImage/loadImageModal.html"},controller:function(uploadUrl,field,itemUrl,itemId,index,$uibModalInstance,$scope,$timeout,exception){function handleImage(files){function closureI(picReader,file){picReader.addEventListener("load",function(event){var picFile=event.target;file.imgSrc=picFile.result;for(var is,j=0;j<self.files.length;j++)if(self.files[j].name==file.name){is=!0;break}is||$timeout(function(){self.files.push(file)},100)})}$scope.$apply(function(){files.length?self.hasFiles=!0:self.hasFiles=!1;for(var i=0;i<files.length;i++){var file=files[i],picReader=new FileReader;closureI(picReader,file),picReader.readAsDataURL(files[i])}})}function uploadFiles(){function handlePhoto(file){console.log(uploadUrl,self.fileDimension);var url=self.urlArr[0]+self.fileDimension,fd=new FormData;fd.append("file",file),itemUrl&&fd.append("url",itemUrl),field&&fd.append("nameImg",field),itemId&&fd.append("id",itemId),index&&fd.append("index",index);var preffix=photoUpload;return console.log(preffix+url+"?"+self.suffix),$http.post(preffix+url+"?"+self.suffix,fd,{withCredentials:!0,transformRequest:angular.identity,headers:{"Content-Type":void 0}})}if(!self.isUploading){self.isUploading=!0;var acts=[];return self.files.forEach(function(file,i){"imgs"!=field&&"gallery"!=field&&i||i>20||acts.push(handlePhoto(file))}),$q.all(acts).then(function(res){$uibModalInstance.close(res)}).catch(function(err){exception.catcher("load file")(err),console.log(err)})}}var self=this;self.files=[],self.hasFiles=!1,self.urlArr=uploadUrl.split("?"),self.suffix=self.urlArr[1]?self.urlArr[1]:"",self.dimen=self.urlArr[0].split("/"),self.fileDimension="","video"!=field&&"video.link"==field&&"video1.link"==field&&(self.fileDimension=self.dimen[self.dimen.length-1].slice(10)),self.uploadFiles=uploadFiles;var $form,$input;$timeout(function(){($form=$("#uploadImgForm"),$input=$form.find("#inputFilesUpload"),$input.bind("change",changedHandler),$form.bind("reset",resetHandler),function(){var div=document.createElement("div");return("draggable"in div||"ondragstart"in div&&"ondrop"in div)&&"FormData"in window&&"FileReader"in window}())&&($form.addClass("has-advanced-upload"),$form.on("drag dragstart dragend dragover dragenter dragleave drop",function(e){e.preventDefault(),e.stopPropagation()}).on("dragover dragenter",function(){$form.addClass("is-dragover")}).on("dragleave dragend drop",function(){$form.removeClass("is-dragover")}).on("drop",function(e){handleImage(e.originalEvent.dataTransfer.files)}))},300);var changedHandler=function(event){window.File&&window.FileList&&window.FileReader?handleImage(event.target.files):console.log("Your browser does not support File API")},resetHandler=function(){$scope.$apply(function(){self.files.length=0,self.hasFiles=!1,self.isUploading=!1})};$scope.$watchCollection("files",function(){0===self.files.length&&$input&&$input.val(null)}),$scope.$on("$destroy",function(){$input.unbind("change",changedHandler),$form.unbind("reset",resetHandler)}),$scope.$watch("fileSrc",function(n,o){n&&n.indexOf("base64")<0&&(oldImg=n)}),$scope.$watch("myFile",function(n,o){$scope.noLoad=!n}),$scope.clickFile=function(){var id="#imagefile"+$scope.now;angular.element(id).trigger("click")},$scope.uploadImg=function(){if(scope.itemId){var file=scope.myFile;scope.noChange=!0;var params={index:scope.index,nameImg:scope.nameImg};scope.itemUrl&&"undefined"!=scope.itemUrl&&(params.url=scope.itemUrl),scope.dimen[scope.dimen.length-1]=scope.dimen[scope.dimen.length-1].slice(0,10);var url=scope.dimen.join("/");url+=scope.$ctrl.fileDimension,$fileUpload.uploadFileToUrl(file,url,scope.itemId,params).then(function(res){scope.myFile=null,scope.noChange=!1,scope.noLoad=!0,scope.fileSrc=null;var o={_id:scope.itemId};$timeout(function(){if("imgs"==scope.nameImg)scope.replaceIndex?(scope.gallery[scope.replaceIndex].img=res.data.imgs[0].img,oldImg&&(console.log("deleting"),Photo.deleteFiles("Stuff",[oldImg]))):scope.gallery.push(res.data.imgs[0]),scope.nameImgForSave?o[scope.nameImgForSave]=scope.gallery:o[scope.nameImg]=scope.gallery;else if("gallery"==scope.nameImg)scope.gallery.push(res.data.gallery[0]),o[scope.nameImg]=scope.gallery;else{if(oldImg){var small=oldImg.split("/");small[small.length-1]=small[small.length-1].replace("img","small"),small=small.join("/"),console.log("deleting"),Photo.deleteFiles("Stuff",[oldImg,small])}oldImg=res.data.img?res.data.img:res.data[scope.nameImg],scope.fileSrc=res.data.img?res.data.img:res.data[scope.nameImg],o[scope.nameImg]=res.data.img?res.data.img:res.data[scope.nameImg]}var field=scope.nameImgForSave?scope.nameImgForSave:scope.nameImg;res.data["small"+scope.nameImg]&&(field+=" small"+scope.nameImg,o["small"+scope.nameImg]=res.data["small"+scope.nameImg]),scope.Item.save({update:field},o)},10)}).catch(function(err){err&&exception.catcher("upload video")(err)})}},self.ok=function(){console.log(self.item),$uibModalInstance.close(self.item)},self.cancel=function(){$uibModalInstance.dismiss()}},controllerAs:"$ctrl",size:"lg",resolve:{uploadUrl:function(){return uploadUrl},field:function(){return field},itemUrl:function(){return itemUrl},itemId:function(){return itemId},index:function(){return index}}}).result}}]).factory("Photo",photoFactory),photoFactory.$inject=["$http"],angular.module("gmall.directives").directive("checklistModel",["$parse","$compile",function($parse,$compile){function contains(arr,item){if(angular.isArray(arr))for(var i=0;i<arr.length;i++)if(angular.equals(arr[i],item))return!0;return!1}function add(arr,item){arr=angular.isArray(arr)?arr:[];for(var i=0;i<arr.length;i++)if(angular.equals(arr[i],item))return arr;return arr.push(item),arr}function remove(arr,item){if(angular.isArray(arr))for(var i=0;i<arr.length;i++)if(angular.equals(arr[i],item)){arr.splice(i,1);break}return arr}function postLinkFn(scope,elem,attrs){$compile(elem)(scope);var getter=$parse(attrs.checklistModel),setter=getter.assign,value=$parse(attrs.checklistValue)(scope.$parent);scope.$watch("checked",function(newValue,oldValue){if(newValue!==oldValue){var current=getter(scope.$parent);newValue===!0?setter(scope.$parent,add(current,value)):setter(scope.$parent,remove(current,value))}}),scope.$parent.$watch(attrs.checklistModel,function(newArr,oldArr){scope.checked=contains(newArr,value)},!0)}return{restrict:"A",priority:1e3,terminal:!0,scope:!0,compile:function(tElement,tAttrs){if("INPUT"!==tElement[0].tagName||!tElement.attr("type","checkbox"))throw'checklist-model should be applied to `input[type="checkbox"]`.';if(!tAttrs.checklistValue)throw"You should provide `checklist-value`.";return tElement.removeAttr("checklist-model"),tElement.attr("ng-model","checked"),postLinkFn}}}]),angular.module("gmall.directives").directive("bindModelToCategory",["Sections","Category","$q","$resource",function(Sections,Category,$q,$resource){return{restrict:"E",scope:{id:"@",field:"@",backstate:"@",model:"@",revers:"@"},templateUrl:"components/bindModelToCategory/bindModelToCategory.html",link:function($scope,element,attrs){function checkField(section){return section.showCheck=!1,section.categories&&section.categories.length&&(section.checkAll=!0,section.showCheck=!0,section.categories.forEach(function(category){$scope.revers?$scope.item[field].indexOf(category._id)>-1?category.checked=!0:section.checkAll=!1:category[field].indexOf($scope.id)>-1?category.checked=!0:section.checkAll=!1})),section.child&&section.child.length&&(section.checkAll=!1,section.child.forEach(function(s){checkField(s)&&(section.showCheck=!0)})),section.showCheck}function checkCategory(category){if(category.checked)$scope.revers?($scope.item[field].indexOf(category._id)<0&&$scope.item[field].push(category._id),category=$scope.item):category[field]?category[field].indexOf($scope.id)<0&&category[field].push($scope.id):(category[field]=[],category[field].push($scope.id));else if($scope.revers){if($scope.item[field]&&$scope.item[field].length){var i=$scope.item[field].indexOf(category._id);i>-1&&$scope.item[field].splice(i,1)}category=$scope.item}else if(category[field]&&category[field].length){var i=category[field].indexOf($scope.id);i>-1&&category[field].splice(i,1)}Category.save({update:field},category)}function foo(s){if(s.child&&s.child.length){for(var i=0,l=s.child.length;i<l;i++){var section=s.child[i];if(section.showCheck)if(section.child&&section.child.length){if(section.checkAll=foo(section),!section.checkAll)return!1}else if(!section.checkAll)return!1}return!0}}var field=$scope.field;$scope.bindFilter=function(category,section){checkCategory(category),section.checkAll=!0;for(var i=0,l=section.categories.length;i<l;i++)if($scope.revers){if($scope.item[field].indexOf(section.categories[i]._id)<0){section.checkAll=!1;break}}else if(section.categories[i][field].indexOf($scope.id)<0){section.checkAll=!1;break}},$scope.bindFilterForSection=function(section,checkAll){section.checkAll=checkAll,section.categories&&section.categories.length&&section.categories.forEach(function(category){category.checked=checkAll,checkCategory(category)}),section.child&&section.child.length&&section.child.forEach(function(s){$scope.bindFilterForSection(s,checkAll)})},$q.when().then(function(){var q=$q.defer();if($scope.model){var Item=$resource("/api/collections/"+$scope.model+"/:id",{id:"@_id"});Item.get({id:$scope.id},function(res){res[$scope.field]||(res[$scope.field]=[]),$scope.item=res,q.resolve()}),Category=Item}else q.resolve();return q.promise}).then(function(){var q=$q.defer();return Sections.query(function(res){res.shift(),$scope.sections=res.filter(function(el){return 0===el.level}),$scope.sections.forEach(checkField),$scope.sections.forEach(function(s){s.showCheck&&(s.checkAll=foo(s))}),q.resolve()}),q.promise})}}}]),function(){angular.module("gmall.directives").directive("mongooseError",function(){return{restrict:"A",require:"ngModel",link:function(scope,element,attrs,ngModel){element.on("keydown",function(){return ngModel.$setValidity("mongoose",!0)})}}})}();var directives=angular.module("gmall.directives");directives.directive("choiceUser",["$resource",function($resource){return{restrict:"E",scope:{onSelected:"&"},templateUrl:"components/choiceUser/index.html",link:function(scope,$element){console.log("link"),scope.select={};var User=$resource("/api/collections/User/:id",{id:"@_id"});scope.selectUser=function(user){console.log(user),scope.onSelected({user:user})},scope.refresUsers=function(search){search&&search.length&&search.length>2&&User.query({search:search.substring(0,30).replace(/\\/g,"")},function(res){scope.select.users=res?res:[]})}}}}]),function(){function papsService($resource,$uibModal,$q){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return console.log("XHR Failed for getPaps."+error),$q.reject(error)}return Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete).catch(getListFailed)}function getItem(id){function getItemComplete(response){return response}function getItemFailed(error){return $q.reject(error)}return Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}var Items=$resource("/api/collections/Paps/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,save:Items.save,delete:Items.delete,query:Items.query,get:Items.get}}angular.module("gmall.services").service("Paps",papsService),papsService.$inject=["$resource","$uibModal","$q"]}(),function(){function itemDirectiveTemplate(global){return{scope:{},bindToController:!0,controller:itemCtrl,controllerAs:"$ctrl",templateUrl:"views/template/partials/paps/paps.html",restrict:"E"}}function itemDirective(){return{scope:{},bindToController:!0,controller:itemCtrl,controllerAs:"$ctrl",templateUrl:"components/paps/papsItem.html"}}function itemCtrl(Paps,$stateParams,$q,$uibModal,exception,global,$timeout,$scope,$anchorScroll){function activate(){return $anchorScroll(),getItem($stateParams.id).then(function(){}).catch(function(err){err=err.data||err,exception.catcher("получение post action page")(err)})}function getItem(id){return self.Items.getItem(id).then(function(data){return self.item=data,self.item}).catch(function(err){return $q.reject(err)})}function saveField(field,defer){defer=defer||0,setTimeout(function(){var o={_id:self.item._id};o[field]=self.item[field],self.Items.save({update:field},o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})},defer)}var self=this;self.Items=Paps,self.mobile=global.get("mobile").val,self.saveField=saveField,activate(),$scope.$on("changeLang",function(){activate()})}angular.module("gmall.services").directive("papsItem",itemDirective).directive("papsItemTemplate",itemDirectiveTemplate),itemCtrl.$inject=["Paps","$stateParams","$q","$uibModal","exception","global","$timeout","$scope","$anchorScroll"]}(),function(){function listDirective(){return{scope:{},restrict:"E",bindToController:!0,controller:listCtrl,controllerAs:"$ctrl",templateUrl:"components/paps/papsList.html"}}function listCtrl(Paps,$state,global,exception,Confirm,$q){function getList(){return self.Items.getList(self.paginate,self.query).then(function(data){return self.items=data,self.items}).catch(function(err){exception.catcher("получение списка")(err)})}function saveField(item,field,defer){defer=defer||0,setTimeout(function(){var o={_id:item._id};return o[field]=item[field],self.Items.save({update:field},o).$promise.then(function(){},function(err){exception.catcher("получение списка")(err)})},defer)}function createItem(name){return self.Items.save({name:name,action:name,url:name}).$promise}function deleteItem(item){Confirm("удалить?").then(function(){return self.Items.delete({_id:item._id}).$promise}).then(function(){return getList()}).catch(function(err){(err=err&&err.data||err)&&exception.catcher("удаление страницы")(err)})}var self=this;self.mobile=global.get("mobile").val,self.global=global,self.$state=$state,self.Items=Paps,self.query={},self.paginate={page:0,rows:10,totalItems:0},self.getList=getList,self.saveField=saveField,self.deleteItem=deleteItem,function(){getList().then(function(){var actions=[];if(self.items&&self.items.some(function(e){return"order"==e.action})||actions.push(createItem("order")),self.items&&self.items.some(function(e){return"feedback"==e.action})||actions.push(createItem("feedback")),self.items&&self.items.some(function(e){return"subscription"==e.action})||actions.push(createItem("subscription")),self.items&&self.items.some(function(e){return"subscriptionAdd"==e.action})||actions.push(createItem("subscriptionAdd")),self.items&&self.items.some(function(e){return"call"==e.action})||actions.push(createItem("call")),self.items&&self.items.some(function(e){return"booking"==e.action})||actions.push(createItem("booking")),self.items&&self.items.some(function(e){return"bonus"==e.action})||actions.push(createItem("bonus")),console.log(actions),actions.length)return $q.all(actions)}).then(function(res){if(res)return getList()}).catch(function(err){exception.catcher("получение списка")(err)})}()}angular.module("gmall.services").directive("papsList",listDirective),listCtrl.$inject=["Paps","$state","global","exception","Confirm","$q"]}(),function(){function infoService($resource,$uibModal,$q){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return console.log("XHR Failed for getPaps."+error),$q.reject(error)}return paginate||(paginate={page:0}),Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete).catch(getListFailed)}function getItem(id){function getItemComplete(response){return response}function getItemFailed(error){return $q.reject(error)}return Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}function create(header,button){return $q(function(resolve,reject){var options={animation:!0,restrict:"E",templateUrl:"components/info/createItem.html",controller:createCtrl,size:"lg",controllerAs:"$ctrl",resolve:{header:function(){return header},button:function(){return button}}};$uibModal.open(options).result.then(function(name){name?resolve(name.substring(0,100)):reject()},function(err){reject(err)})})}function createCtrl($uibModalInstance,header,button){var self=this;self.header=header?header:"создание информационной страницы",self.button=button?button:"создать страницу",self.name="",self.ok=function(){$uibModalInstance.close(self.name)},self.cancel=function(){$uibModalInstance.dismiss()}}function selectInfo(){return $q(function(resolve,reject){var options={animation:!0,templateUrl:"components/info/selectInfo.html",controller:selectInfoCtrl,size:"lg",controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(selectedItem){resolve(selectedItem)},function(){console.log("Modal dismissed at: "+new Date),reject()})})}function selectInfoCtrl(Info,$uibModalInstance,$q){var self=this;$q.when().then(function(){return Info.getList()}).then(function(items){self.items=items}),self.cancel=function(){$uibModalInstance.dismiss("cancel")},self.ok=function(item){$uibModalInstance.close(item)}}var Items=$resource("/api/collections/Info/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,save:Items.save,delete:Items.delete,query:Items.query,get:Items.get,create:create,selectInfo:selectInfo,select:selectInfo}}angular.module("gmall.services").service("Info",infoService),infoService.$inject=["$resource","$uibModal","$q"]}(),function(){function listDirective(){return{scope:{},restrict:"E",bindToController:!0,controller:listCtrl,controllerAs:"$ctrl",templateUrl:"components/info/infoList.html"}}function listTemplateDirective(){return{scope:{},restrict:"E",bindToController:!0,controller:listCtrl,controllerAs:"$ctrl",templateUrl:"views/template/partials/info/info.html"}}function listCtrl(Items,$q,$state,$stateParams,global,Confirm,exception,$fileUpload,Photo){function activate(page){return(page||0===page)&&(self.paginate.page=0),getList().then(function(){})}function getList(){return self.Items.getList(self.paginate,self.query).then(function(data){if(self.block=0,$stateParams.block)for(var i=0;i<data.length;i++)if($stateParams.block==data[i]._id){self.block=i;break}return self.items=data,self.items})}function searchItems(searchStr){self.query=searchStr?{name:searchStr.substring(0,10)}:{},self.paginate.page=0,activate()}function saveField(item,field){var o={_id:item._id};return o[field]=item[field],self.Items.save({update:field},o).$promise}function createItem(){self.Items.create().then(function(res){return self.newItem.name=res,self.Items.save(self.newItem).$promise}).then(function(res){return self.newItem._id=res.id,self.newItem.url=res.url,self.paginate.page=0,getList(self.paginate)}).then(function(){self.newItem._id;delete self.newItem._id}).catch(function(err){err&&(err=err.datsa||err,exception.catcher("создание объекта")(err))})}function deleteItem(item){Confirm("удалить???").then(function(){return self.Items.delete({_id:item._id}).$promise}).then(function(){activate(0)}).catch(function(err){err&&exception.catcher("удаление страницы")(err)})}function dropCallback(item){var actions=[];return setTimeout(function(){self.items.forEach(function(item,idx){item.index=idx+1,actions.push(saveField(item,"index"))}),$q.all(actions)},100),item}function loadPhoto(item){self.uploadUrl="/api/collections/Photo/fileUpload?collectionName=Info",self.uploadVideoUrl="/api/collections/Photo/uploadVideoFile?collectionName=Info",$q.when().then(function(){return $fileUpload.fileUpload(self.uploadUrl,"img")}).then(function(res){var a=[];res&&res.length&&(item.img&&a.push(item.img),item.img=res[0].data.img,saveField(item,"img"),a.length&&Photo.deleteFiles("Info",a))}).catch(function(err){console.log(err)})}function deletePhoto(item){Confirm("удалить?").then(function(){var a=[];item.img&&a.push(item.img),item.img=null,console.log(item),saveField(item,"img"),a.length&&Photo.deleteFiles("Info",a)})}var self=this;self.mobile=global.get("mobile").val,self.$state=$state,self.Items=Items,self.query={},self.paginate={page:0,rows:50,totalItems:0},self.newItem={name:"Новый информационный раздел",index:1},self.getList=getList,self.saveField=saveField,self.searchItems=searchItems,self.createItem=createItem,self.deleteItem=deleteItem,self.dropCallback=dropCallback,self.loadPhoto=loadPhoto,self.deletePhoto=deletePhoto,activate()}angular.module("gmall.services").directive("infoList",listDirective).directive("infoListTemplate",listTemplateDirective),listCtrl.$inject=["Info","$q","$state","$stateParams","global","Confirm","exception","$fileUpload","Photo"]}(),function(){function itemInfoLinkDirective(){return{scope:{info:"=",do:"&",title:"@"},rescrict:"E",bindToController:!0,controller:itemInfoLinkCtrl,controllerAs:"$ctrl",templateUrl:"components/info/createLink.html"}}function itemInfoLinkCtrl($q,Info,global){function setInfoLink(){$q.when().then(function(){return Info.selectInfo()}).then(function(tag){self.info.link=tag._id,self.info.name=tag.name,self.do()}).catch(function(){console.log("dismiss")})}function deleteLink(){self.info.link=null,self.info.name="",console.log(self.info),self.do()}var self=this;self.info||(self.info={}),self.setInfoLink=setInfoLink,self.deleteLink=deleteLink}function itemDirective(){return{scope:{},bindToController:!0,controller:itemCtrl,controllerAs:"$ctrl",templateUrl:"components/info/infoItem.html"}}function itemCtrl(Items,$stateParams,$q,$uibModal,exception,global,$scope,$timeout,Confirm){function createNewRazdel(){self.Items.create("создание раздела","создать раздел").then(function(res){res&&saveEmbeddedField({name:res},"name")})}function activate(){return getItem($stateParams.id).then(function(){}).catch(function(err){err=err.data||err,exception.catcher("получение объекта")(err)})}function getItem(id){return self.Items.getItem(id).then(function(data){return self.item=data,self.item}).catch(function(err){return $q.reject(err)})}function saveField(field,defer){defer=defer||0,setTimeout(function(){var o={_id:self.item._id};o[field]=self.item[field];var query={update:field};self.Items.save(query,o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})},defer)}function saveEmbeddedField(item,field){var o={_id:self.item._id};field&&(o[field]=item[field]);var update={update:field,embeddedName:"blocks"};item._id?field?update.embeddedVal=item._id:(update.embeddedPull=!0,update.update="name",o.name=item.name):update.embeddedPush=!0,field?$q.when().then(function(){return self.Items.save(update,o).$promise}).then(function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500),(update.embeddedPush||update.embeddedPull)&&activate($stateParams.id)}).catch(function(err){err&&(exception.catcher("saving")(err),console.log(err),err.data&&err.data.message&&err.data.message.indexOf("cannot use the part")>-1&&(console.log(field),update.update=field+"L",delete o[field],o[update.update]={},$q.when().then(function(){return self.Items.save(update,o).$promise}).then(function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500),(update.embeddedPush||update.embeddedPull)&&activate($stateParams.id)}).catch(function(err){err&&exception.catcher("saving")(err)})))}):Confirm("удалить?").then(function(){return self.Items.save(update,o).$promise}).then(function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500),(update.embeddedPush||update.embeddedPull)&&activate($stateParams.id)})}function dropCallback(item){return setTimeout(function(){saveField("blocks")},100),item}var self=this;self.Items=Items,self.global=global,self.mobile=global.get("mobile").val,self.saveField=saveField,self.saveEmbeddedField=saveEmbeddedField,self.dropCallback=dropCallback,self.createNewRazdel=createNewRazdel,activate(),$scope.$on("changeLang",function(){activate()})}function itemTemplateDirective(global){return{scope:{img:"@",info:"@"},bindings:{img:"@",info:"@"},bindToController:!0,controller:itemTemplateCtrl,controllerAs:"$ctrl",templateUrl:function(element,attrs){return attrs&&attrs.templ&&"0"!=attrs.templ&&console.log(attrs.templ),"views/template/partials/home/info/infoItem"+(attrs&&attrs.templ&&"0"!=attrs.templ?attrs.templ:"")+".html"}}}function itemTemplateCtrl($scope,Items,$stateParams,$q,$uibModal,exception,global,$attrs){function activate(id){return getItem(id)}function getItem(id){return self.Items.getItem(id).then(function(data){return data&&data.blocks&&data.blocks.length&&(data.blocks=data.blocks.filter(function(b){return b.actived})),self.item=data,self.item}).catch(function(err){exception.catcher("получение данных")(err)})}var self=this;self.$onInit=function(){self.info&&activate(self.info)},self.info&&activate(self.info),self.Items=Items,self.global=global,self.mobile=global.get("mobile").val}angular.module("gmall.services").directive("infoItem",itemDirective).directive("infoItemTemplate",itemTemplateDirective).directive("createInfoLink",itemInfoLinkDirective),itemInfoLinkCtrl.$inject=["$q","Info","global"],itemCtrl.$inject=["Info","$stateParams","$q","$uibModal","exception","global","$scope","$timeout","Confirm"],itemTemplateCtrl.$inject=["$scope","Info","$stateParams","$q","$uibModal","exception","global","$attrs"]}(),angular.module("gmall.services").service("createStuffService",function($uibModal,$q,$state,global){this.cloneStuff=function(stuff,clone){if(global.get("seller").val){if(stuff.seller=global.get("seller").val,console.log(global.get("seller")),stuff.brand=stuff.brand&&stuff.brand._id?stuff.brand._id:stuff.brand,stuff.brandTag=stuff.brandTag&&stuff.brandTag._id?stuff.brandTag._id:stuff.brandTag,stuff.category=stuff.category&&stuff.category._id?stuff.category._id:stuff.category,stuff.sortsOfStuff=stuff.sortsOfStuff&&stuff.sortsOfStuff._id?stuff.sortsOfStuff._id:stuff.sortsOfStuff,delete stuff._id,delete stuff.url,delete stuff.gallery,delete stuff.setTagsValue,delete stuff.sortsOfStuff,stuff.stock)for(var key in stuff.stock)stuff.stock[key].quantity=1;return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/createStuff/cloneStuffModal.html",controller:function($scope,stuff,$uibModalInstance,clone){var self=this;self.stuff=stuff,self.cancel=function(){$uibModalInstance.dismiss("cancel")},$scope.clone=clone,$scope.$watch("clone",function(n){"ready"==n&&$uibModalInstance.close(self.stuff)})},controllerAs:"$ctrl",size:"lg",resolve:{stuff:function(){return stuff},clone:function(){return clone}}}).result.then(function(stuff){resolve(stuff)},function(){reject("отказ")})})}}}).directive("createNewStuff",function(){function createStuffCtrl($uibModal,$q,Stuff,$state){var self=this;self.categoryDisabled=!0,self.selectCategory=function(){$uibModal.open({animation:!0,templateUrl:"components/selectCategoryModal/selectCategoryModal.html",controller:"selectCategoryModalCtrl",size:"lg",resolve:{categoryId:function(){return null}}}).result.then(function(selectedCategory){self.stuff.category||(self.categoryDisabled=!1,setTimeout(function(){$("#createStuffCategory").trigger("change"),self.categoryDisabled=!0},100)),self.stuff.category=selectedCategory},function(){})},self.createNewStuff=function(){return self.stuff.category?self.stuff.name?(self.stuff.name=self.stuff.name.substring(0,50),self.stuff.artikul&&(self.stuff.artikul=self.stuff.artikul.substring(0,50)),!self.clone&&self.stuff.category&&self.stuff.category._id&&(self.stuff.category=self.stuff.category._id),void $q.when().then(function(){return $q(function(resolve,reject){Stuff.Items.save(self.stuff,function(res){self.stuff._id=res.id,self.stuff.url=res.url,resolve(res.url)},function(err){reject(err)})})}).then(function(url){self.clone="ready"}).then(function(){}).catch(function(err){console.log(err)})):(self.alertMessage2=!0,void setTimeout(function(){self.alertMessage2=!1},3e3)):(self.alertMessage2=!0,void setTimeout(function(){console.log("))))"),self.alertMessage2=!1},3e3))}}return{scope:{stuff:"=",clone:"="},bindToController:!0,controller:createStuffCtrl,controllerAs:"$ctrl",templateUrl:"components/createStuff/createStuff.html"}}),angular.module("gmall.directives").directive("sortsOfStuff",function(){return{
scope:{stuff:"="},bindToController:!0,controller:sortsOfStuffctrlCtrl,controllerAs:"$ctrl",templateUrl:"components/sortsOfStuff/sortsOfStuff.html"}}),sortsOfStuffctrlCtrl.$inject=["$uibModal","$resource","Stuff","$q","createStuffService","exception","global","$timeout"];var SortsOfSfuffSchema={store:[{type:"Schema.ObjectId",ref:"Store"}],filterOne:{type:"Schema.ObjectId",ref:"Filter"},filterTwo:{type:"Schema.ObjectId",ref:"Filter"},tagsOne:[{tag:{type:"Schema.ObjectId",ref:"FilterTags"},stuff:{type:"Schema.ObjectId",ref:"Stuff"}}],tagsTwo:{},differentPrice:{type:Boolean,default:!1}};!function(){function categoriesForListTatiana(global){return{scope:{padding:"="},restrict:"E",bindToController:!0,controller:categoriesForListCtrl,controllerAs:"$ctrl",templateUrl:"views/"+global.get("store").val.template.folder+"/partials/category/categoriesForList.html"}}function categoriesForListTemplate(){return{scope:{padding:"="},restrict:"E",bindToController:!0,controller:categoriesForListCtrl,controllerAs:"$ctrl",transclude:!0,link:function(scope,element,attrs,ctrl,transclude){transclude(scope,function(clone){element.append(clone)})}}}function categoriesForListTemplate1(){return{scope:{padding:"="},restrict:"E",bindToController:!0,controller:categoriesForListCtrl,controllerAs:"$ctrl",transclude:!0,link:function(scope,element,attrs,ctrl,transclude){transclude(scope,function(clone){element.append(clone)})}}}function categoriesForListTemplate2(){return{scope:{padding:"="},restrict:"E",bindToController:!0,controller:categoriesForListCtrl,controllerAs:"$ctrl",transclude:!0,link:function(scope,element,attrs,ctrl,transclude){transclude(scope,function(clone){element.append(clone)})}}}function categoriesForListTemplate3(){return{scope:{padding:"="},restrict:"E",bindToController:!0,controller:categoriesForListCtrl,controllerAs:"$ctrl",transclude:!0,link:function(scope,element,attrs,ctrl,transclude){transclude(scope,function(clone){element.append(clone)})}}}function categoriesForListDirective(){return{scope:{padding:"="},restrict:"E",bindToController:!0,controller:categoriesForListCtrl,controllerAs:"$ctrl",templateUrl:"components/categoriesForList/categoriesForList.html"}}function categoriesForListCtrl($stateParams,$state,$q,$location,global){function changeCategory(category,tag){var brand=$stateParams.brand?brand=$stateParams.brand:null,queryTag=null;tag&&("sale"==tag?queryTag=global.get("store").val.saleTag:(tag="new")&&(queryTag=global.get("store").val.newTag));var o={groupUrl:$stateParams.groupUrl,categoryUrl:category,queryTag:queryTag,brand:brand,brandTag:null,searchStr:void 0};$state.go("stuffs",o,{reload:!0,lacation:!0,inherit:!1,notify:!0})}function deleteCrumb(index){!function(type){var query=self.breadcrumbs.reduce(function(q,item){return item.type==type&&(q&&(q+="__"),q+=item.url),q},"");query||(query=null),$location.search(type,query)}(self.breadcrumbs.splice(index,1)[0].type)}function checkInnerData(){return!!$ctrl.parentSection&&($ctrl.parentSection.categories.length&&$ctrl.parentSection.categories.filter(function(c){return!c.notActive}).length>1)}function getFilterTagsPhoto(url){return global.get("filterTags").val.getOFA("url",url)}if(global.get("store").val){var self=this,$ctrl=self;self.getFilterTagsPhoto=getFilterTagsPhoto,self.global=global,self.prop={},self.category=$stateParams.categoryUrl,self.parentSection=global.get("parentSection").val,self.breadcrumbs=global.get("breadcrumbs").val,self.changeCategory=changeCategory,self.deleteCrumb=deleteCrumb,self.checkInnerData=checkInnerData,self.queryTag=null,$stateParams.queryTag&&(global.get("store").val.saleTag&&global.get("store").val.saleTag==$stateParams.queryTag?self.queryTag="sale":global.get("store").val.newTag&&global.get("store").val.newTag==$stateParams.queryTag&&(self.queryTag="new"))}}angular.module("gmall.directives").directive("categoriesForList",categoriesForListDirective).directive("categoriesForListTatiana",categoriesForListTatiana).directive("categoriesForListTemplate",categoriesForListTemplate).directive("categoriesForListTemplate1",categoriesForListTemplate1).directive("categoriesForListTemplate2",categoriesForListTemplate2).directive("categoriesForListTemplate3",categoriesForListTemplate3),categoriesForListCtrl.$inject=["$stateParams","$state","$q","$location","global"]}(),angular.module("gmall.services").service("filterStuffsListService",function($uibModal,$q,Filters){this.setFilters=function(query){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/filterStuffsList/filterStuffsList.html",controller:function($scope,$stateParams,Sections,$uibModalInstance,query,$location){var self=this;self.global=global,self.query=query,console.log(query),$q.when().then(function(){return Filters.getFilters()}).then(function(filters){self.filters=filters}).then(function(){return Sections.getSections()}).then(function(sections){"brand"!=$stateParams.groupUrl&&"group"!=$stateParams.groupUrl&&($stateParams.parentGroup?self.parentSection=Sections.getParentSection($stateParams.parentGroup):self.parentSection=Sections.getParentSection($stateParams.groupUrl),"allCategories"!=$stateParams.categoryList&&"category"==$stateParams.categoryUrl||"category"!=$stateParams.categoryUrl&&self.parentSection&&self.parentSection.categories&&(self.category=self.parentSection.categories.getOFA("url",$stateParams.categoryUrl),self.category&&self.category.filters&&self.category.filters.length&&(self.filters=self.filters.filter(function(filter){return self.category.filters.indexOf(filter._id)>-1})))),self.filters&&self.filters.length||$uibModalInstance.dismiss("cancel"),query&&query.tags&&"object"==typeof query.tags&&self.filters.forEach(function(filter){query.tags[filter._id]&&filter.tags.forEach(function(tag){query.tags[filter._id].indexOf(tag._id)>-1&&(tag.set=!0)})})}),self.changeAllTags=function(filter){filter.tags.forEach(function(tag){tag.set=!1})},self.clearAll=function(){self.filters.forEach(function(filter){filter.tags.forEach(function(tag){tag.set=!1})})},self.cancel=function(){$uibModalInstance.dismiss("cancel")},self.ok=function(){query.tags={};var queryTag="";self.filters.forEach(function(filter){var arr=[];filter.tags.forEach(function(tag){tag.set&&(arr.push(tag._id),queryTag&&(queryTag+="+"),queryTag+=tag.url)}),arr.length&&(query.tags[filter._id]=arr)}),queryTag?$location.search("queryTag",queryTag):$location.search("queryTag",null),$uibModalInstance.close(self.query)}},controllerAs:"$ctrl",size:"lg",resolve:{query:function(){return query}}}).result.then(function(query){resolve(query)},function(){reject("отказ")})})}}),function(){function serviceFunction($uibModal,$q){function doIt(model,_id,Item){var item=angular.copy(Item);return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/editModel/editModel.html",controller:editModelCtrl,size:"lg",controllerAs:"$ctrl",resolve:{model:function(){return model},_id:function(){return _id},item:function(){return item}}}).result.then(function(){var img;item.img&&item.img.indexOf("data:image")<0&&(img=item.img),resolve(img)},function(){var img;item.img&&item.img.indexOf("data:image")<0&&(img=item.img),resolve(img)})})}function editModelCtrl($resource,$uibModalInstance,$q,model,_id,item){function saveField(field,defer){defer=defer||0;var o={_id:self.item._id};setTimeout(function(){o[field]=self.item[field],self.Items.save({update:field},o)},defer)}var self=this,url="/api/collections/"+model+"/:_id";self.urlFile="/api/collections/"+model+"/fileUploadBig",self.Items=$resource(url,{_id:"@_id"}),self.saveField=saveField,self.item=item,function(){$q.when().then(function(){return self.Items.get({_id:_id}).$promise}).then(function(res){res&&(self.item=res)}).catch(function(){self.cancel()})}(),self.cancel=function(){$uibModalInstance.dismiss()},self.ok=function(){$uibModalInstance.close(self.item)}}return{doIt:doIt}}angular.module("gmall.services").service("EditModelData",serviceFunction),serviceFunction.$inject=["$uibModal","$q"]}(),angular.module("gmall.services").factory("seoContent",["global","$stateParams","$resource","$state","$q","$sce",function(global,$stateParams,$resource,$state,$q,$sce){function setTitles(titles,res,noFooter){res.seo?(res.seo.title?titles.title=res.seo.title:titles.title=res.name,res.seo.description?titles.description=res.seo.description:titles.description=res.desc.replace(regex,"").substring(0,200),res.seo.keywords&&(titles.keywords=res.seo.keywords)):(titles.title=res.name,res.desc?titles.description=res.desc.replace(regex,"").substring(0,200):titles.description=""),noFooter||(res.desc?titles.pageDescFooter=res.desc.replace(regex,""):titles.pageDescFooter="",titles.namePageFooter=res.name)}function getSeoPageInfo(titles){if(!global.get("seopage")||!global.get("seopage").val||!global.get("seopage").val.length)return!1;titles.pageDescFooter||(titles.pageDescFooter=""),titles.namePageFooter||(titles.namePageFooter="");for(var i=0,l=global.get("seopage").val.length;i<l;i++){var a=global.get("seopage").val[i];console.log(a.url);var href=titles.canonical?titles.canonical:$location.path();if("http://"+global.get("store").val.domain+a.url==href)return a._id}return!1}function setSeopageData(){return $q.when().then(function(){return global.get("currentSeopage")?global.get("currentSeopage").val:null}).then(function(seopage){if(seopage)var sp=global.get("seopages").val.getOFA("link",seopage.link);if(sp&&!sp.data&&(seopage.seo||(seopage.seo={}),seopage.seo.keywords=seopage.keywords.map(function(w){return w.word}).filter(function(w){return w}).join(","),sp.data=seopage),seopage){var titlesTemp=global.get("titles").val,titles=seopage.seo;return titlesTemp&&titlesTemp.image&&!titles.image&&(titles.image=titlesTemp.image),titles.title=seopage.title||titles.title,titles.domain=global.get("store").val.link,titles.author=titles.author||global.get("store").val.name,titles.canonical=$sce.trustAsResourceUrl(global.get("store").val.link+seopage.link),seopage.desc&&(titles.desc=seopage.desc),global.set("titles",titles),!0}})}function capitalizeFirstLetter(string){return string.charAt(0).toUpperCase()+string.slice(1)}var regex=/<\/?[^>]+(>|$)/g;return{setSeopageData:setSeopageData,setDataCatalog:function(){setSeopageData().then(function(seopageIs){if("stuffs.stuff"!=$state.current.name&&!seopageIs){var s=global.get("store").val,titles={};if(global.get("category")&&global.get("category").val){var c=global.get("category").val;global.get("langForm").val&&(titles.title=c.section.name+" "+c.name+" "+global.get("lang").val.inn+" "+s.name+".",titles.description=capitalizeFirstLetter(global.get("langForm").val.toorder)+" "+global.get("lang").val.onLine+" "+c.section.name+" "+c.name+" "+global.get("lang").val.inn+" "+s.name+","+s.location),titles.keywords=s.name+","+c.name+","+c.section.name+","+s.location,c.section.subSectionName&&(titles.keywords+=","+c.section.subSectionName),titles.canonical=$sce.trustAsResourceUrl(global.get("store").val.link+"/"+c.linkData.groupUrl+"/"+c.linkData.categoryUrl)}else if($stateParams.groupUrl&&"group"!=$stateParams.groupUrl){var sectionUrl=$stateParams.groupUrl,sec=global.get("functions").val.getSection(sectionUrl);if(sec){global.get("langForm").val&&(titles.title=capitalizeFirstLetter(global.get("langForm").val.toorder)+" "+sec.name+" "+global.get("lang").val.inn+" "+s.name+" "+global.get("lang").val.onLine+".");var categories="";sec.categories.length&&sec.categories.forEach(function(c,i){i&&(categories+=","),categories+=c.name}),titles.keywords=s.name+","+sec.name+","+s.location+","+categories,global.get("langForm").val&&(titles.description=capitalizeFirstLetter(global.get("langForm").val.toorder)+" "+global.get("lang").val.onLine+" "+sec.name+categories+" "+global.get("lang").val.inn+" "+s.name+" "+s.name+","+s.location),titles.canonical=global.get("store").val.link+"/"+sec.url+"/category"}else console.log("???"),titles.canonical="",titles.title="Заказать из каталога "+s.name+" онлайн.",titles.keywords=s.name+",каталог,"+s.location,titles.description="Заказ онлайн из каталога в "+s.name+","+s.location;titles.canonical=$sce.trustAsResourceUrl(titles.canonical)}else titles.title="Заказать из каталога "+s.name+" онлайн.",titles.keywords=s.name+",каталог,"+s.location,titles.description="Заказ онлайн из каталога в "+s.name+","+s.location,titles.canonical=global.get("store").val.link+"/group/category",titles.canonical=$sce.trustAsResourceUrl(titles.canonical);titles.domain=s.link,titles.author=s.name,global.set("titles",titles)}})},setDataHomePage:function(){setSeopageData()},setDataItem:function(item,news){var domain=global.get("store").val.link,titles=angular.copy(global.get("store").val.seo);if(titles||(titles={}),news){var img=item.img?item.img:"";titles.url=domain+"/news/"+item.url,titles.type="article"}else{var img=item.gallery&&item.gallery[0]&&item.gallery[0].thumb?item.gallery[0].thumb:"";titles.url=domain+"/"+item.link,titles.type="product"}img&&(img=photoHost+"/"+img),titles.image=img;try{titles.canonical=$sce.trustAsResourceUrl(titles.url)}catch(err){console.log(err)}return titles.title=item.name,news||(item.artikul&&(titles.title+=" "+item.artikul),titles.title=item.categoryName+" "+titles.title),global.set("titles",titles),!0},setDataList:function(type,name){setSeopageData().then(function(seopageIs){if(console.log("seopageIs",seopageIs),!seopageIs){var domain=global.get("store").val.link,titles=angular.copy(global.get("store").val.seo);titles||(titles={}),titles.url=domain+"/"+type,titles.type="";try{titles.canonical=$sce.trustAsResourceUrl(titles.url)}catch(err){console.log(err)}return global.set("titles",titles),!0}})},setData404:function(res){var seoPageId,titles={pageTitle:"",pageDescription:"",pageKeyWords:""},titles=angular.copy(global.get("store").val.seo);titles.canonical=$sce.trustAsResourceUrl("http://"+global.get("store").val.domain+"/404"),titles.url=titles.canonical,(seoPageId=getSeoPageInfo(titles))?$resource("/api/collections/Seopage/:id",{id:"@_id"}).get({id:seoPageId},function(res){setTitles(titles,res,!0),global.set("titles",titles)}):global.set("titles",titles)}}}]),angular.module("gmall.directives").directive("additionaInfo",function(){return{scope:{stuff:"="},bindToController:!0,controller:additionaInfoCtrl,controllerAs:"$ctrl",templateUrl:"components/additionaInfo/additionaInfo.html"}}).service("AddInfo",function($resource,$q,$uibModal){function selectItem(){return $q(function(resolve,reject){var options={animation:!0,templateUrl:"components/additionalInfo/selectItem.html",controller:selectItemCtrl,size:"lg",controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(selected){resolve(selected)},function(){reject()})})}function selectItemCtrl(Filters,AddInfo,$uibModalInstance,$q,global){var self=this;self.global=global,self.lang=global.get("lang").val,$q.when().then(function(){return Filters.getFilters()}).then(function(filters){return self.filters=filters,AddInfo.query().$promise}).then(function(addInfos){self.filters.forEach(function(f){f.addInfos=[],addInfos.forEach(function(a){a.filter==f._id&&f.addInfos.push(a)})})}),self.cancel=function(){$uibModalInstance.dismiss()},self.ok=function(item){$uibModalInstance.close(item)}}function editTable(filter,addInfo){return $uibModal.open({animation:!0,templateUrl:"components/additionalInfo/additionalInfo.html",controller:function(filter,carrentAddInfo,AddInfo,$uibModalInstance,global,exception,Confirm){function activate(){initItem(),AddInfo.query({query:query},function(res){res.shift(),self.items=res},function(err){console.log(err)})}function initItem(){if(self.item={headerTable:{},table:{},name:"",filter:filter._id},filter.tags.forEach(function(tag){self.item.table[tag._id]={}}),langArr&&langArr.forEach&&langArr.length)langArr.forEach(function(lang){self.item.headerTable||(self.item.headerTable={}),self.item.headerTable[lang]=[""];for(var key in self.item.table)self.item.table[key][lang]=[""]});else{self.item.headerTable||(self.item.headerTable={}),self.item.headerTable[self.lang]=[""];for(var key in self.item.table)self.item.table[key][self.lang]=[""]}}var self=this;self.global=global,self.lang=global.get("store").val.lang;var langArr=global.get("store").val.langArr;console.log(langArr),filter?self.filter=filter:$uibModalInstance.dismiss("cancel");var query={filter:filter._id};self.items=[],activate(),self.getTagName=function(id){for(var i=1,l=self.filter.tags.length;i<l;i++)if(self.filter.tags[i]._id==id)return self.filter.tags[i].name;return"noname"},self.cancel=function(){$uibModalInstance.dismiss("cancel")},self.saveTable=function(){self.item.name||(self.item.name=filter.name),self.item._id?AddInfo.save({update:"headerTable table name"},self.item,function(res){activate()}):AddInfo.save(self.item,function(res){activate()})},self.addRow=function(){if(langArr&&langArr.forEach&&langArr.length)langArr.forEach(function(lang){self.item.headerTable||(self.item.headerTable={}),self.item.headerTable[lang].push("");for(var key in self.item.table)self.item.table[key][lang].push("")});else{self.item.headerTable||(self.item.headerTable={}),self.item.headerTable[self.lang].push("");for(var key in self.item.table)self.item.table[key][self.lang].push("")}console.log(self.item)},self.deleteRow=function(i){if(langArr&&langArr.forEach&&langArr.length)langArr.forEach(function(lang){self.item.headerTable[lang].splice(i,1);for(var key in self.item.table)self.item.table[key][lang].splice(i,1)});else{self.item.headerTable[self.lang].splice(i,1);for(var key in self.item.table)self.item.table[key][self.lang].splice(i,1)}},self.editTable=function(item){if(console.log(item),self.item=item,langArr&&langArr.forEach&&langArr.length)langArr.forEach(function(lang){self.item.headerTable[lang].push("");for(var key in self.item.table)self.item.table[key][lang].push("")});else{self.item.headerTable[self.lang].push("");for(var key in self.item.table)self.item.table[key][self.lang].push("")}},self.deleteTable=function(item){Confirm("удалить?").then(function(){return AddInfo.delete({id:item._id}).$promise}).then(function(){return activate()}).catch(function(err){(err=err&&err.data||err)&&exception.catcher("удаление")(err)})},self.setTable=function(item){if(self.item=item,langArr&&langArr.forEach&&langArr.length)langArr.forEach(function(lang){self.item.headerTable||(self.item.headerTable={},self.item.headerTable[lang]=[],self.item.headerTable[lang].push(""));for(var key in self.item.table)self.item.table[key][lang]||(self.item.table[key][lang]=[],self.item.table[key][lang].push(""))});else{self.item.headerTable||(self.item.headerTable={},self.item.headerTable[self.lang]=[],self.item.headerTable[self.lang].push(""));for(var key in self.item.table)self.item.table[key].length&&(self.item.table[key]={},self.item.table[key][self.lang]=[],self.item.table[key][self.lang].push(""))}console.log(self.item)}},controllerAs:"$ctrl",size:"lg",resolve:{filter:function(){return filter},carrentAddInfo:function(){return addInfo}}}).result.then(function(addInfo){console.log(addInfo)},function(){})}var Items=$resource("/api/collections/AddInfo/:id",{id:"@_id"});this.query=Items.query,this.get=Items.get,this.delete=Items.delete,this.save=Items.save,this.editTable=editTable,this.select=selectItem,selectItemCtrl.$inject=["Filters","AddInfo","$uibModalInstance","$q","global"]}),function(){function staticPageDirective(){return{scope:{},bindToController:!0,controller:staticPageCtrl,controllerAs:"$ctrl",templateUrl:"components/staticPage/staticPage.html"}}function staticPageTemplateDirective($stateParams){return{bindToController:!0,scope:{},controllerAs:"$ctrl",controller:["$scope","$element","$compile","$http","$stateParams","global",function($scope,$element,$compile,$http,$stateParams,global){var self=this;$http.get("views/template/partials/Stat/itemPage/"+$stateParams.id).then(function(response){self.content=response.data.html;var linkFn=$compile(response.data.html),content=linkFn($scope);$element.append(content),global.set("titles",response.data.titles)})}]}}function staticPageCtrl(Stat,$stateParams,global,Photo,$q,$uibModal,Stuff,FilterTags,BrandTags,Brands,Campaign,Category,$timeout,$scope,Confirm,SetCSS){function activate(){Stat.get({_id:$stateParams.id}).$promise.then(function(res){res&&!res.blocks&&(res.blocks=[],saveField("blocks",[]));var bl=res.blocks.filter(function(b){return b});bl.length!=res.blocks.length&&(saveField("blocks",bl),res.blocks=bl),console.log(res.blocks),res.blocks.forEach(function(b,i){b&&(b.i=i)}),res.blocks.sort(function(a,b){return a.index-b.index}),self.item=res})}function setStyles(block,idx){$q.when().then(function(){return SetCSS.setStyles(block)}).then(function(){saveField("blocks."+block.i,block)})}function saveField(field,value,defer,indexImgs){field.indexOf("index")>-1&&(self.item.blocks.sort(function(a,b){return a.index-b.index}),self.item.blocks.forEach(function(b,i){b.i=i}),value=self.item.blocks,field="blocks");setTimeout(function(){var o={_id:self.item._id};o[field]=value;var query={update:field};field.indexOf(".imgs")>-1&&void 0!==indexImgs&&(query.indexImgs=indexImgs),self.Items.save(query,o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})},100)}function refreshBlocks(){return self.Items.getItem($stateParams.id).then(function(data){data.blocks.forEach(function(b,i){b.i=i,b.desc||(b.desc=""),b.descL||(b.descL={}),b.desc1||(b.desc1=""),b.desc1L||(b.desc1L={}),b.name||(b.name=""),b.nameL||(b.nameL={}),b.name1||(b.name1=""),b.name1L||(b.name1L={}),b.videoLink||(b.videoLink="")}),self.item.blocks=data.blocks})}function addBlock(type){return $scope.$broadcast("addNewBlock",{type:type}),void(self.newBlock=null)}function deleteBlock(block,index){var o={_id:self.item._id};o.id=block.id;var update={update:"id",embeddedName:"blocks"};update.embeddedPull=!0,console.log(update,o),Confirm("подтверждаете?").then(function(){return self.Items.save(update,o).$promise}).then(function(res){self.item.blocks.splice(index,1);var images=[];if(block.img&&images.push(block.img),block.video&&images.push(block.video),block.videoCover&&images.push(block.videoCover),block.imgs&&block.imgs.length&&block.imgs.forEach(function(im){im.img&&images.push(im.img)}),images.length)return Photo.deleteFiles("Stat",images)}).then(function(){activate()})}function deleteSlide(block,index){Photo.deleteFiles("Stat",[block.imgs[index].img]).then(function(response){block.imgs.splice(index,1),self.saveField("blocks."+block.i+".imgs",block.imgs,null,index)},function(err){console.log(err)})}function editSlide(block,index){$uibModal.open({animation:!0,templateUrl:"components/staticPage/editSlide.html",controller:function(slide,$uibModalInstance){var self=this;self.item=slide,self.ok=function(){console.log(self.item),$uibModalInstance.close(self.item)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl",size:"lg",resolve:{slide:function(){return block.imgs[index]}}}).result.then(function(slide){self.saveField("blocks."+block.i+".imgs",block.imgs)},function(){})}function filterBlocks(item){return keyParts.indexOf(item.key)>-1}function addItemInBlock(block,$index){var model;switch(block.type){case"stuffs":model=Stuff;break;case"campaign":model=Campaign;break;case"filterTags":model=FilterTags;break;case"brandTags":model=BrandTags;break;case"brands":model=Brans;break;case"categories":model=Category}$q.when().then(function(){return model.select()}).then(function(item){block[block.type]||(block[block.type]=[]);var img,link,url=item.url;switch(block.type){case"stuffs":img=item.gallery[0]&&item.gallery[0].thumb?item.gallery[0].thumb:null,link=item.link,item.artikul&&(item.name+=" "+item.artikul);break;case"campaign":img=item.img?item.img:null,link="campaign/"+item.url;break;case"filterTags":img=item.img?item.img:null,link="/group/category?queryTag="+item.url;break;case"brandTags":img=item.img?item.img:null,link="/group/category?brandTag="+item.url;break;case"brands":img=item.img?item.img:null,link="/group/category?brand="+item.url;break;case"categories":img=item.img?item.img:null,link="/group/"+item.url}void 0!==$index?block.imgs[$index]={name:item.name,img:img,link:link,url:url}:(block.imgs||(block.imgs=[]),block.imgs.push({name:item.name,img:img,link:link,url:url})),saveField("blocks."+block.i+".imgs",block.imgs)})}function movedItem(block,item){return $timeout(function(){saveField("blocks."+block.i+".imgs",block.imgs)},100),item}function deleteItemFromBlock(block,$index){block.imgs.splice($index,1),saveField("blocks."+block.i+".imgs",block.imgs)}function changeItem(block,$index){addItemInBlock(block,$index)}var self=this;self.Items=Stat,self.type="Stat",self.global=global,self.listOfBlocksForStaticPage=listOfBlocksForAll,self.listOfBlocks=listOfBlocksForAll,self.animationTypes=animationTypes,self.setStyles=setStyles,self.saveField=saveField,self.newBlock=null,self.addBlock=addBlock,self.refreshBlocks=refreshBlocks,self.deleteBlock=deleteBlock,self.deleteSlide=deleteSlide,self.editSlide=editSlide,self.filterBlocks=filterBlocks,self.addItemInBlock=addItemInBlock,self.movedItem=movedItem,self.deleteItemFromBlock=deleteItemFromBlock,self.changeItem=changeItem,activate(),$scope.$on("changeLang",function(){activate()});var keyParts=global.get("store").val.template.stat.parts.filter(function(el){return el.is}).map(function(el){return el.name})}angular.module("gmall.directives").directive("staticPage",staticPageDirective).directive("staticPageTemplate",staticPageTemplateDirective),staticPageCtrl.$inject=["Stat","$stateParams","global","Photo","$q","$uibModal","Stuff","FilterTags","BrandTags","Brands","Campaign","Category","$timeout","$scope","Confirm","SetCSS"]}(),function(){function staticPagesDirective(){return{scope:{},restrict:"E",bindToController:!0,controller:staticPagesCtrl,controllerAs:"$ctrl",templateUrl:"components/staticPage/staticPages.html"}}function staticPagesCtrl(Items,$state,global,Confirm,exception,$q,Photo,$timeout){function activate(page){return(page||0===page)&&(self.paginate.page=0),getList().then(function(){console.log("Activated staticPage list View")})}function getList(){return self.Items.getList(self.paginate,self.query).then(function(data){return self.items=data,self.items})}function searchItems(searchStr){self.query=searchStr?{name:searchStr.substring(0,10)}:{},self.paginate.page=0,activate()}function saveField(item,field,defer){defer=defer||0,setTimeout(function(){var o={_id:item._id};return o[field]=item[field],self.Items.save({update:field},o).$promise.then(function(){console.log("saved"),global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)},function(err){console.log(err)})},defer)}function createItem(){self.Items.create().then(function(res){return self.newItem={name:"Новая статическая страница",actived:!1},self.newItem.name=res,self.Items.save(self.newItem).$promise}).then(function(res){return self.newItem._id=res.id,self.newItem.url=res.url,self.paginate.page=0,getList(self.paginate)}).then(function(){$state.go("frame.stats.stat",{id:self.newItem._id})}).catch(function(err){exception.catcher("создание компании")(err)})}function deleteItem(item){var folder="images/"+global.get("store").val.subDomain+"/Stat/"+item.url;Confirm("удалить???").then(function(){return self.Items.delete({_id:item._id}).$promise}).then(function(){return activate(0),Photo.deleteFolder("Stat",folder)}).catch(function(err){exception.catcher("удаление компании")(err)})}function movedItem(){var actions=self.items.map(function(e,i){return e.index=i,self.saveField(e,"index")});$q.all(actions)}var self=this;self.mobile=global.get("mobile").val,self.global=global,self.$state=$state,self.Items=Items,self.query={},self.paginate={page:0,rows:25,totalItems:0},self.newItem={name:"Новая статическая страница",actived:!1},self.getList=getList,self.saveField=saveField,self.searchItems=searchItems,self.createItem=createItem,self.deleteItem=deleteItem,self.movedItem=movedItem,activate()}angular.module("gmall.services").directive("staticPages",staticPagesDirective),staticPagesCtrl.$inject=["Stat","$state","global","Confirm","exception","$q","Photo","$timeout"]}(),function(){function statService($resource,$uibModal,$q){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return console.log("XHR Failed for getNews."+error),$q.reject(error)}return Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete).catch(getListFailed)}function getItem(id){function getItemComplete(response){return response}function getItemFailed(error){return $q.reject(error)}return Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}function create(){return $q(function(resolve,reject){var options={animation:!0,restrict:"E",templateUrl:"components/staticPage/createStaticPage.html",controller:function($uibModalInstance){var self=this;self.name="",self.ok=function(){$uibModalInstance.close(self.name)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(name){name?resolve(name.substring(0,100)):reject("empty")},function(err){reject(err)})})}function selectItem(){return $q(function(resolve,reject){var options={animation:!0,templateUrl:"components/staticPage/selectItem.html",controller:selectItemCtrl,controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(selectedFilterTag){resolve(selectedFilterTag)},function(){console.log("Modal dismissed at: "+new Date),reject()})})}function selectItemCtrl(Stat,$uibModalInstance,$q){var self=this;$q.when().then(function(){return Stat.getList({rows:100,page:0})}).then(function(stats){self.stats=stats}),self.cancel=function(){$uibModalInstance.dismiss("cancel")},self.ok=function(stat){$uibModalInstance.close(stat)}}var Items=$resource("/api/collections/Stat/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,save:Items.save,delete:Items.delete,query:Items.query,get:Items.get,create:create,selectItem:selectItem}}angular.module("gmall.services").service("Stat",statService),statService.$inject=["$resource","$uibModal","$q"]}(),function(){function additionalDirective(){return{scope:{},bindToController:!0,controller:pageCtrl,controllerAs:"$ctrl",templateUrl:"components/CONTENT/additional/additional.html"}}function pageCtrl(Additional,$stateParams,global,Photo,$q,$uibModal,News,Stuff,FilterTags,BrandTags,Brands,Campaign,Category,$timeout,$scope,Confirm,SetCSS){function activate(){self.Items.get({_id:$stateParams.id}).$promise.then(function(res){res&&!res.blocks&&(res.blocks=[],saveField("blocks",[]));var bl=res.blocks.filter(function(b){return b});bl.length!=res.blocks.length&&(saveField("blocks",bl),res.blocks=bl),res.blocks.forEach(function(b,i){b&&(b.i=i)}),res.blocks.sort(function(a,b){return a.index-b.index}),self.item=res})}function setStyles(block,idx){$q.when().then(function(){return SetCSS.setStyles(block)}).then(function(){saveField("blocks."+block.i,block)})}function saveField(field,value,defer,indexImgs){field.indexOf("index")>-1&&(self.item.blocks.sort(function(a,b){return a.index-b.index}),self.item.blocks.forEach(function(b,i){b.i=i}),value=self.item.blocks,field="blocks");setTimeout(function(){var o={_id:self.item._id};o[field]=value;var query={update:field};field.indexOf(".imgs")>-1&&void 0!==indexImgs&&(query.indexImgs=indexImgs),self.Items.save(query,o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})},100)}function refreshBlocks(){return self.Items.getItem($stateParams.id).then(function(data){data.blocks.forEach(function(b,i){b.i=i,b.desc||(b.desc=""),b.descL||(b.descL={}),b.desc1||(b.desc1=""),b.desc1L||(b.desc1L={}),b.name||(b.name=""),b.nameL||(b.nameL={}),b.name1||(b.name1=""),b.name1L||(b.name1L={}),b.videoLink||(b.videoLink="")}),self.item.blocks=data.blocks})}
function addBlock(type){if(type){return $scope.$broadcast("addNewBlock",{type:type}),void(self.newBlock=null)}}function deleteBlock(block,index){var o={_id:self.item._id};o.id=block.id;var update={update:"id",embeddedName:"blocks"};update.embeddedPull=!0,console.log(update,o),Confirm("подтверждаете?").then(function(){return self.Items.save(update,o).$promise}).then(function(res){self.item.blocks.splice(index,1);var images=[];if(block.img&&images.push(block.img),block.video&&images.push(block.video),block.videoCover&&images.push(block.videoCover),block.imgs&&block.imgs.length&&block.imgs.forEach(function(im){im.img&&images.push(im.img)}),images.length)return Photo.deleteFiles("Additional",images)}).then(function(){activate()})}function deleteSlide(block,index){Photo.deleteFiles("Additional",[block.imgs[index].img]).then(function(response){block.imgs.splice(index,1),self.saveField("blocks."+block.i+".imgs",block.imgs,null,index)},function(err){console.log(err)})}function editSlide(block,index){$uibModal.open({animation:!0,templateUrl:"components/CONTENT/additional/editSlide.html",controller:function(slide,$uibModalInstance){var self=this;self.item=slide,self.ok=function(){console.log(self.item),$uibModalInstance.close(self.item)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl",size:"lg",resolve:{slide:function(){return block.imgs[index]}}}).result.then(function(slide){self.saveField("blocks."+block.i+".imgs",block.imgs)},function(){})}function addItemInBlock(block,$index){var model;switch(block.type){case"stuffs":model=Stuff;break;case"news":model=News;break;case"campaign":model=Campaign;break;case"filterTags":model=FilterTags;break;case"brandTags":model=BrandTags;break;case"brands":model=Brans;break;case"categories":model=Category}$q.when().then(function(){return model.select()}).then(function(item){block[block.type]||(block[block.type]=[]);var img,link,url=item.url;switch(block.type){case"stuffs":img=item.gallery[0]&&item.gallery[0].thumb?item.gallery[0].thumb:null,link=item.link,item.artikul&&(item.name+=" "+item.artikul);break;case"campaign":img=item.img?item.img:null,link="campaign/"+item.url;break;case"news":img=item.img?item.img:null,link="news/"+item.url;break;case"filterTags":img=item.img?item.img:null,link="/group/category?queryTag="+item.url;break;case"brandTags":img=item.img?item.img:null,link="/group/category?brandTag="+item.url;break;case"brands":img=item.img?item.img:null,link="/group/category?brand="+item.url;break;case"categories":img=item.img?item.img:null,link="/group/"+item.url}void 0!==$index?block.imgs[$index]={name:item.name,img:img,link:link,url:url}:(block.imgs||(block.imgs=[]),block.imgs.push({name:item.name,img:img,link:link,url:url})),saveField("blocks."+block.i+".imgs",block.imgs)})}function movedItem(block,item){return $timeout(function(){saveField("blocks."+block.i+".imgs",block.imgs)},100),item}function deleteItemFromBlock(block,$index){block.imgs.splice($index,1),saveField("blocks."+block.i+".imgs",block.imgs)}function changeItem(block,$index){addItemInBlock(block,$index)}var self=this;self.Items=Additional,self.type="Additional",self.global=global,self.listOfBlocksForStaticPage=listOfBlocksForStaticPage,self.listOfBlocks=listOfBlocksForStaticPage,self.setStyles=setStyles,self.saveField=saveField,self.newBlock=null,self.addBlock=addBlock,self.refreshBlocks=refreshBlocks,self.deleteBlock=deleteBlock,self.deleteSlide=deleteSlide,self.editSlide=editSlide,self.addItemInBlock=addItemInBlock,self.movedItem=movedItem,self.deleteItemFromBlock=deleteItemFromBlock,self.changeItem=changeItem,activate(),$scope.$on("changeLang",function(){activate()});global.get("store").val.template.additional.parts.filter(function(el){return el.is}).map(function(el){return el.name})}angular.module("gmall.directives").directive("additionalPage",additionalDirective),pageCtrl.$inject=["Additional","$stateParams","global","Photo","$q","$uibModal","News","Stuff","FilterTags","BrandTags","Brands","Campaign","Category","$timeout","$scope","Confirm","SetCSS"]}(),function(){function additionalPagesDirective(){return{scope:{},restrict:"E",bindToController:!0,controller:pagesCtrl,controllerAs:"$ctrl",templateUrl:"components/CONTENT/additional/additionals.html"}}function pagesCtrl(Items,$state,global,Confirm,exception,$q,Photo,$timeout){function activate(page){return(page||0===page)&&(self.paginate.page=0),getList().then(function(){console.log("Activated  list View")})}function getList(){return self.Items.getList(self.paginate,self.query).then(function(data){return self.items=data,self.items})}function searchItems(searchStr){self.query=searchStr?{name:searchStr.substring(0,10)}:{},self.paginate.page=0,activate()}function saveField(item,field,defer){defer=defer||0,setTimeout(function(){var o={_id:item._id};return o[field]=item[field],self.Items.save({update:field},o).$promise.then(function(){console.log("saved"),global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)},function(err){console.log(err)})},defer)}function createItem(){self.Items.create().then(function(res){return self.newItem={name:"Новая  страница",actived:!1},self.newItem.name=res,self.Items.save(self.newItem).$promise}).then(function(res){return self.newItem._id=res.id,self.newItem.url=res.url,self.paginate.page=0,getList(self.paginate)}).then(function(){$state.go("frame.additionals.additional",{id:self.newItem._id})}).catch(function(err){exception.catcher("создание страницы")(err)})}function deleteItem(item){var folder="images/"+global.get("store").val.subDomain+"/Additional/"+item.url;Confirm("удалить???").then(function(){return self.Items.delete({_id:item._id}).$promise}).then(function(){return activate(0),Photo.deleteFolder("Additional",folder)}).catch(function(err){exception.catcher("удаление страницы")(err)})}function movedItem(){var actions=self.items.map(function(e,i){return e.index=i,self.saveField(e,"index")});$q.all(actions)}var self=this;self.mobile=global.get("mobile").val,self.global=global,self.$state=$state,self.Items=Items,self.query={},self.paginate={page:0,rows:5,totalItems:0},self.newItem={name:"Новая  страница",actived:!1},self.getList=getList,self.saveField=saveField,self.searchItems=searchItems,self.createItem=createItem,self.deleteItem=deleteItem,self.movedItem=movedItem,activate()}angular.module("gmall.services").directive("additionalPages",additionalPagesDirective),pagesCtrl.$inject=["Additional","$state","global","Confirm","exception","$q","Photo","$timeout"]}(),function(){function statService($resource,$uibModal,$q){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return console.log("XHR Failed for getNews."+error),$q.reject(error)}return Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete).catch(getListFailed)}function getItem(id){function getItemComplete(response){return response}function getItemFailed(error){return $q.reject(error)}return Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}function create(){return $q(function(resolve,reject){var options={animation:!0,restrict:"E",templateUrl:"components/CONTENT/additional/createAdditional.html",controller:function($uibModalInstance){var self=this;self.name="",self.ok=function(){$uibModalInstance.close(self.name)},self.cancel=function(){$uibModalInstance.dismiss()}},controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(name){name?resolve(name.substring(0,100)):reject("empty")},function(err){reject(err)})})}function selectItem(){return $q(function(resolve,reject){var options={animation:!0,templateUrl:"components//CONTENT/additional/selectItem.html",controller:selectItemCtrl,controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(selectedFilterTag){resolve(selectedFilterTag)},function(){console.log("Modal dismissed at: "+new Date),reject()})})}function selectItemCtrl(Additional,$uibModalInstance,$q){var self=this;$q.when().then(function(){return Additional.getList({rows:100,page:0})}).then(function(items){self.items=items}),self.cancel=function(){$uibModalInstance.dismiss()},self.ok=function(item){$uibModalInstance.close(item)}}var Items=$resource("/api/collections/Additional/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,save:Items.save,delete:Items.delete,query:Items.query,get:Items.get,create:create,selectItem:selectItem}}angular.module("gmall.services").service("Additional",statService),statService.$inject=["$resource","$uibModal","$q"]}(),function(){function labelDirective(){return{scope:{},restrict:"E",bindToController:!0,controller:pagesCtrl,controllerAs:"$ctrl",templateUrl:"components/CONTENT/label/labels.html"}}function pagesCtrl(Items,$state,global,Confirm,exception,$q,$timeout){function activate(page){return(page||0===page)&&(self.paginate.page=0),getList().then(function(){console.log("Activated  list View")})}function getList(){return self.Items.getList(self.paginate,self.query).then(function(data){return self.items=data,self.items})}function searchItems(searchStr){self.query=searchStr?{name:searchStr.substring(0,10)}:{},self.paginate.page=0,activate()}function saveField(item,field,defer){defer=defer||0,setTimeout(function(){var o={_id:item._id};return o[field]=item[field],self.Items.save({update:field},o).$promise.then(function(){console.log("saved"),global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)},function(err){console.log(err)})},defer)}function createItem(){self.Items.create().then(function(res){return self.newItem={name:"Новая  страница",actived:!1},self.newItem.name=res,self.Items.save(self.newItem).$promise}).then(function(res){return self.newItem._id=res.id,self.newItem.url=res.url,self.paginate.page=0,getList(self.paginate)}).catch(function(err){exception.catcher("создание страницы")(err)})}function deleteItem(item){Confirm("удалить???").then(function(){return self.Items.delete({_id:item._id}).$promise}).then(function(){activate(0)}).catch(function(err){exception.catcher("удаление страницы")(err)})}var self=this;self.mobile=global.get("mobile").val,self.global=global,self.$state=$state,self.Items=Items,self.query={},self.paginate={page:0,rows:50,totalItems:0},self.newItem={name:"Новая  метка",actived:!1},self.lists=listOfListName.map(function(n){var o={name:n,type:n};return global.get("store").val.nameLists[n+"List"]&&(o.name=global.get("store").val.nameLists[n+"List"]),o}),self.getList=getList,self.saveField=saveField,self.searchItems=searchItems,self.createItem=createItem,self.deleteItem=deleteItem,activate()}angular.module("gmall.services").directive("labels",labelDirective),pagesCtrl.$inject=["Label","$state","global","Confirm","exception","$q","$timeout"]}(),function(){function labelsService($resource,$uibModal,$q){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return console.log("XHR Failed for getNews."+error),$q.reject(error)}return Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete).catch(getListFailed)}function getItem(id){function getItemComplete(response){return response}function getItemFailed(error){return $q.reject(error)}return Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}function create(){return $q(function(resolve,reject){var options={animation:!0,restrict:"E",templateUrl:"components/CONTENT/label/createItem.html",controller:function($uibModalInstance){var self=this;self.name="",self.ok=function(){$uibModalInstance.close(self.name)},self.cancel=function(){$uibModalInstance.dismiss()}},controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(name){name?resolve(name.substring(0,100)):reject("empty")},function(err){reject(err)})})}var Items=$resource("/api/collections/Label/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,save:Items.save,delete:Items.delete,query:Items.query,get:Items.get,create:create}}angular.module("gmall.services").service("Label",labelsService),labelsService.$inject=["$resource","$uibModal","$q"]}(),angular.module("gmall.services").service("HomePage",function($resource,$uibModal){function selectItemFromList(items,header){return $uibModal.open({animation:!0,templateUrl:"components/homePage/selectItem.html",controllerAs:"$ctrl",controller:function($uibModalInstance,global,items,header){function selectItem(item){$uibModalInstance.close(item)}function cancel(){$uibModalInstance.dismiss()}var self=this;self.items=items,self.header=header||"выберите из предложенного списка",self.selectItem=selectItem,self.cancel=cancel},resolve:{items:function(){return items},header:function(){return header}}}).result}var Items=$resource("/api/collections/HomePage/:_id",{_id:"@_id"});this.query=Items.query,this.get=Items.get,this.delete=Items.delete,this.save=Items.save,this.selectItemFromList=selectItemFromList}).directive("parallaxBanner",function($timeout){return{scope:{},restrict:"C",link:function(scope,elem,attr){function doIt(){var elementTop=$(elem).offset().top,viewportTop=($(elem).outerHeight(),$(window).scrollTop()),viewportBottom=viewportTop+$(window).height();$(window).height();if(elementTop<viewportBottom){var yPos=(parseInt(elem.css("background-position-y")),(elementTop-viewportBottom+$(elem).height())/4),coords="0% "+yPos+"px";elem.css({backgroundPosition:coords})}}var $window=$(window);$timeout(function(){doIt()},100),$(window).scroll(doIt),elem.on("$destroy",function(){angular.element($window).off("scroll",doIt)})}}}).directive("homePage",function(){function homePageCtrl(HomePage,$stateParams,$state,$q,global,$http,$uibModal,Stuff,Filters,FilterTags,Category,exception,BrandTags,Store,Brands,EditModelData,Photo,News,Campaign,Info,$scope,$timeout,Confirm,SetCSS,$rootScope){function getNameBlock(type){return listOfBlocksForAll[type]?listOfBlocksForAll[type]:type}function activate(){$q.when().then(function(){return self.blockForAdd=null,$q(function(resolve,reject){self.Items.get({_id:self.store.subDomain},function(res){resolve(res)},function(err){console.log(err),err&&err.status&&404==err.status?resolve(404):resolve()})})}).then(function(res){if(res&&404!=res)self.item=res,self.item.blocks||(self.item.blocks=[]),self.item.blocks.forEach(function(el,index){el.i=index});else if(404==res)return self.item={url:self.store.subDomain,header:[],left:[],right:[],blocks:[]},self.Items.save(self.item).$promise}).then(function(res){self.item&&!self.item._id&&res&&res.id&&(self.item._id=res.id)}).catch(function(err){exception.catcher("получение home page")(err)})}function addBlock(type){if(type){return console.log("addNewBlock"),$scope.$broadcast("addNewBlock",{type:type}),void(self.newBlock=null)}}function cloneBlock(block){if(!delay){delay=!0,$timeout(function(){delay=!1},2e3);var newBlock=angular.copy(block);delete newBlock._id,delete newBlock.__v,newBlock.index?newBlock.index++:newBlock.index=1,newBlock.img=null,newBlock.imgs=[];["stuffs","filterTags","brandTags","categories","brands","news","campaign","info","filters"].forEach(function(field){newBlock[field]&&newBlock[field].length&&(newBlock[field]=newBlock[field].map(function(item){return item._id}))}),self.item.blocks.forEach(function(block){block.index&&block.index>=newBlock.index&&(newBlock.index=block.index+1)}),self.item.blocks.push(newBlock);var o={_id:self.item._id};o[blocks]=self.item.blocks;var update={update:"blocks"};Confirm("потверждаете?").then(function(){return self.Items.save(update,o).$promise}).then(function(res){$timeout(function(){global.set("saving",!1)},1500),activate()}).catch(function(err){err&&exception.catcher("добавление блока")(err)})}}function refreshBlocks(){return self.item.blocks=null,self.Items.get({_id:self.store.subDomain}).$promise.then(function(data){data.blocks.forEach(function(b,i){b.i=i,b.desc||(b.desc=""),b.descL||(b.descL={}),b.desc1||(b.desc1=""),b.desc1L||(b.desc1L={}),b.name||(b.name=""),b.nameL||(b.nameL={}),b.name1||(b.name1=""),b.name1L||(b.name1L={}),b.videoLink||(b.videoLink="")}),self.item.blocks=data.blocks})}function deleteBlock(block){var update,o={_id:self.item._id};Confirm("потверждаете?").then(function(){return self.item.blocks.splice(block.i,1),block._id?(o._id_id=block._id,update={update:"_id_id",embeddedName:"blocks"},update.embeddedPull=!0):(update={update:"blocks"},o.blocks=self.item.blocks),self.Items.save(update,o).$promise}).then(function(res){var images=[];if(block.img&&images.push(block.img),block.video&&images.push(block.video),block.videoCover&&images.push(block.videoCover),block.imgs&&block.imgs.length&&block.imgs.forEach(function(im){im.img&&images.push(im.img)}),images.length)return Photo.deleteFiles("Homepage",images)}).then(function(){activate()})}function saveInfo(){saveField("info")}function saveField(field,value){console.log(field,value),field.indexOf("index")>-1&&(self.item.blocks.sort(function(a,b){return a.index-b.index}),self.item.blocks.forEach(function(b,i){b.i=i}),value=self.item.blocks,field="blocks"),setTimeout(function(){"date"==field&&(value=new Date(self.item[field]));var o={_id:self.item._id};o[field]=value;var query={update:field};self.Items.save(query,o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500),field.indexOf(".type")>-1&&activate()})},100)}function movedSlide(block,field,item){return setTimeout(function(){block[field].forEach(function(el,i){el.index=i}),self.saveField(block,null,field)},100),item}function deleteSlide(block,index,$index){Confirm("Удалить?").then(function(){return Photo.deleteFiles("Homepage",[block.imgs[index].img])}).then(function(response){block.imgs.splice(index,1),self.saveField(block,$index,"imgs")},function(err){console.log(err)})}function editSlide(block,index,$index){$uibModal.open({animation:!0,templateUrl:"components/homePage/editSlide.html",controller:function(slide,$uibModalInstance){var self=this;slide.button||(slide.button={}),self.item=slide,self.animationTypes=animationTypes,self.ok=function(){console.log(self.item),$uibModalInstance.close(self.item)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl",size:"lg",resolve:{slide:function(){return block.imgs[index]}}}).result.then(function(slide){self.saveField(block,$index,"imgs",null,index)},function(){})}function movedStuff(block,item){return setTimeout(function(){saveFieldInSide(block)},100),item}function editModelData(block,i){var model=block.type,items=block[block.type];if(items[i]&&items[i]._id){var field;"brands"==model?field="Brand":"categories"==model?field="Category":"filterTags"==model?field="FilterTags":"filters"==model?field="Filters":"brandTags"==model?field="BrandTags":"stuffs"==model?field="Stuff":"news"==model?field="News":"campaign"==model?field="Campaign":"info"==model&&(field="Info"),$q.when().then(function(){return EditModelData.doIt(field,items[i]._id,items[i])}).then(function(img){console.log(img==items[i].img),img&&img!=items[i].img&&(items[i].img=img,console.log(img))})}else setCollection(items,i)}function addItemInBlock(block){var field=block.type;block[block.type]||(block[block.type]=[]);var Items,collections=block[block.type];"brands"==field?Items=Brands:"categories"==field?Items=Category:"filterTags"==field?Items=FilterTags:"filters"==field?Items=Filters:"brandTags"==field?Items=BrandTags:"stuffs"==field?Items=Stuff:"news"==field?Items=News:"campaign"==field?Items=Campaign:"info"==field&&(Items=Info),$q.when().then(function(){return Items.select({actived:!0})}).then(function(item){collections.push(item),self.saveFieldInSide(block)}).catch(function(){console.log("dismiss")})}function setCollection(block,idx){var Items,field=block.type,collections=block[block.type];"brands"==field?Items=Brands:"categories"==field?Items=Category:"filterTags"==field?Items=FilterTags:"filters"==field?Items=Filters:"brandTags"==field?Items=BrandTags:"stuffs"==field?Items=Stuff:"news"==field?Items=News:"campaign"==field?Items=Campaign:"info"==field&&(Items=Info),$q.when().then(function(){return Items.select()}).then(function(item){collections[idx]=item,self.saveFieldInSide(block)}).catch(function(){console.log("dismiss")})}function saveFieldInSide(item){var field=item.type;console.log(item[item.type]);var o={_id:self.item._id};o[field]=item[field].map(function(e){return e._id});var update={update:field,embeddedName:self.activeSide};return update.embeddedVal=item._id,console.log(update,o),self.Items.save(update,o).$promise}function deleteCollection(block,idx){block[block.type].splice(idx,1),saveFieldInSide(block)}function getNameCollection(type){switch(type){case"categories":return"категории";case"brands":return"бренды";case"brandTags":return"коллекции";case"filterTags":return"признаки";case"filters":return"характеристики";default:return"???????"}}function setColor(block,idx){$q.when().then(function(){return SetCSS.setStyles(block)}).then(function(){saveField(block,idx,"blockStyle"),console.log(block.elements),saveField(block,idx,"elements")})}function uploadHP(){Confirm("выгрузить?").then(function(){return $http.post("/api/setTemplateHP",{template:{blocks:self.item.blocks},store:global.get("store").val._id})}).then(function(res){exception.showToaster("success","статус","обновлено")}).catch(function(err){exception.catcher("выгрузка шаблона")(err)})}function downloadHP(){Confirm("загрузить?").then(function(){return $http.get("/views/templatesHP/"+global.get("store").val.subDomain+".json")}).then(function(res){if(console.log(res.data),!res.data||!res.data.blocks)throw"не верный формат данных";var o={_id:self.item._id};o.blocks=res.data.blocks,self.Items.save({update:"blocks"},o,function(){self.item.blocks=res.data.blocks,exception.showToaster("success","статус","обновлено")})}).catch(function(err){exception.catcher("загрузка шаблона")(err)})}function deleteIndexPageHtml(){Confirm("перезаписать страницу?").then(function(){return $http.get("/api/deleteIndexPageHtml")}).then(function(res){exception.showToaster("info","все OK")}).catch(function(err){exception.catcher("сброс страницы")(err)})}function getBlockConfig(block){$q.when().then(function(){return $http.get("/api/getBlocksHP/"+block.type)}).then(function(res){if(res.data)return HomePage.selectItemFromList(res.data)}).then(function(b){if(b){if(block.img);else if(block.video)Photo.deleteFiles("Homepage",[block.video]);else if(block.imgs&&"stuffs"!=block.type){var a=[];block.imgs.forEach(function(i){a.push(i.img)}),a.length&&Photo.deleteFiles("Homepage",a)}for(var key in block)"_id"!=key&&"index"!=key&&delete block[key];var photos=[];for(var key in b)if("_id"!=key&&"template"!=key&&"nameTemplate"!=key&&"index"!=key)if("img"==key&&b[key]){var p=b[key].split("/");p[p.length-2]=self.item.url,p[p.length-4]=global.get("store").val.subDomain;var img=p[p.length-1].split(".");img[img.length-2]+="copy",p[p.length-1]=img.join("."),block[key]=p.join("/"),photos.push([b[key],block[key]])}else if("imgs"==key&&b[key]&&b[key].length)b[key].forEach(function(i){if(i.img){var p=i.img.split("/");p[p.length-2]=self.item.url,p[p.length-4]=global.get("store").val.subDomain;var img=p[p.length-1].split(".");img[img.length-2]+="copy",p[p.length-1]=img.join("."),photos.push([i.img,p.join("/")]),i.img=p.join("/")}}),block[key]=b[key];else if("video"==key&&b[key]){var p=b[key].split("/");p[p.length-2]=self.item.url,p[p.length-4]=global.get("store").val.subDomain;var img=p[p.length-1].split(".");img[img.length-2]+="copy",p[p.length-1]=img.join("."),block[key]=p.join("/"),photos.push([b[key],block[key]])}else block[key]=b[key];var folder="/images/"+global.get("store").val.subDomain+"/HomePage/"+self.item.url,o={folder:folder,photos:photos};return $http.post(photoUpload+"/api/copyPhotosFromBrowser",o)}}).then(function(){return saveField(block,block.i)}).then(function(){activate()})}var self=this;self.Items=HomePage,self.global=global,self.$state=$state,self.activeSide="left",self.store=global.get("store").val,self.listOfBlocks=listOfBlocksForAll,self.blockEditPermission={},self.animationTypes=animationTypes,self.addBlock=addBlock,self.deleteBlock=deleteBlock,self.saveInfo=saveInfo,self.saveField=saveField,self.movedSlide=movedSlide,self.deleteSlide=deleteSlide,self.editSlide=editSlide,self.movedStuff=movedStuff,self.editModelData=editModelData,self.setCollection=setCollection,self.deleteCollection=deleteCollection,self.saveFieldInSide=saveFieldInSide,self.addItemInBlock=addItemInBlock,self.getNameCollection=getNameCollection,self.setColor=setColor,self.uploadHP=uploadHP,self.downloadHP=downloadHP,self.deleteIndexPageHtml=deleteIndexPageHtml,self.cloneBlock=cloneBlock,self.getBlockConfig=getBlockConfig,self.getNameBlock=getNameBlock,self.refreshBlocks=refreshBlocks,activate(),$scope.$on("changeLang",function(){activate()});var delay=!1}return{scope:{},restrict:"E",bindToController:!0,controller:homePageCtrl,controllerAs:"$ctrl",templateUrl:"components/homePage/homePage.html"}}),angular.module("gmall.directives").directive("directivehp",function($compile,$interpolate){return{template:"",link:function($scope,element,attributes){element.append($compile("<div "+attributes.directivehp.toLowerCase()+"hp-block></div>")($scope))}}}).directive("styleBlock",styleBlock).directive("bannerhpBlock",bannerHPBlock).directive("banneronehpBlock",banneroneHPBlock).directive("infohpBlock",infohpBlock).directive("sliderhpBlock",sliderhpBlock).directive("texthpBlock",texthpBlock).directive("texttwohpBlock",texttwohpBlock).directive("videohpBlock",videohpBlock).directive("missionhpBlock",missionhpBlock).directive("brandshpBlock",brandshpBlock).directive("stuffshpBlock",stuffshpBlock).directive("newshpBlock",newshpBlock).directive("campaignhpBlock",campaignhpBlock).directive("maphpBlock",maphpBlock).directive("reviewhpBlock",reviewhpBlock).directive("subscriptionhpBlock",subscriptionhpBlock).directive("callhpBlock",callhpBlock).directive("feedbackhpBlock",feedbackhpBlock).directive("brandtagshpBlock",brandTagshpBlock).directive("subscriptionaddhpBlock",subscriptionAddhpBlock).directive("filtertagshpBlock",filterTagshpBlock).directive("filtershpBlock",filtershpBlock).directive("categorieshpBlock",categorieshpBlock).directive("calendarhpBlock",calendarhpBlock).directive("videolinkhpBlock",videolinkhpBlock).directive("pricegoodshpBlock",pricegoodshpBlock).directive("priceserviceshpBlock",priceserviceshpBlock).directive("scheduleplacehpBlock",scheduleplacehpBlock).directive("hpBlock",undefinedhpBlock).directive("googlePlaceReviews",googlePlaceReviews),angular.module("gmall.services").service("selectStuffModalService",function($uibModal,$q,$state,global){this.selectStuff=function(){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/selectStuffModal/selectStuffModal.html",controller:function(Stuff,$uibModalInstance){var self=this;self.stuffs=[],self.name="";var paginate={page:0,rows:30,items:0};self.search=function(name){name.length<3||Stuff.getList(paginate,query,name).then(function(res){self.stuffs=res})},self.selectStuff=function(stuff){$uibModalInstance.close(stuff)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl",size:"lg"}).result.then(function(stuff){resolve(stuff)},function(){reject("отказ")})})}}),function(){function itemDirective(){return{scope:{link:"=",stuffurl:"=",change:"&",title:"@",seoPage:"=editSeoPage"},rescrict:"E",bindToController:!0,controller:itemCtrl,controllerAs:"$ctrl",templateUrl:"components/createLink/createLink.html"}}function itemCtrl($q,FilterTags,Stuff,Category,BrandTags,Stat,Brands,Sections,global,$uibModal,$timeout){function setFilterTag(){$q.when().then(function(){return FilterTags.selectFilterTag({section:!0})}).then(function(tag){tag.section||(tag.section="group"),self.link="/"+tag.section+"/category?queryTag="+tag.url,$timeout(function(){self.change()},100)}).catch(function(){console.log("dismiss")})}function setBrandTag(){$q.when().then(function(){return BrandTags.selectBrandTag({section:!0})}).then(function(tag){if(console.log(tag),tag.section||(tag.section="group"),!tag.brand||!tag.brand.url)throw"where is the BRAND?";self.link="/"+tag.section+"/category?brand="+tag.brand.url+"&brandTag="+tag.url,$timeout(function(){self.change()},100)}).catch(function(err){err&&exception.caatcher("set data")(err)})}function setBrand(){$q.when().then(function(){return Brands.select({section:!0})}).then(function(tag){tag.section||(tag.section="group"),self.link="/"+tag.section+"/category?brand="+tag.url,$timeout(function(){self.change()},100)}).catch(function(){console.log("dismiss")})}function setCategory(){$q.when().then(function(){return Category.select()}).then(function(category){var category=global.get("categories").val.getOFA("_id",category._id);self.link="/"+category.linkData.groupUrl+"/"+category.url,category.linkData.parentGroup&&(self.link+="?parentGroup="+category.linkData.parentGroup),$timeout(function(){self.change()},100)}).catch(function(){console.log("dismiss")})}function setSection(){$q.when().then(function(){return Sections.select()}).then(function(section){console.log(section),self.link="/"+section.url+"/category",$timeout(function(){self.change()},100)}).catch(function(){console.log("dismiss")})}function setStuff(){$q.when().then(function(){return Stuff.selectItem()}).then(function(stuff){self.link=stuff.link,self.change&&"function"==typeof self.change&&$timeout(function(){self.change()},100)}).catch(function(err){console.log(err)})}function setStuffForOrder(){$q.when().then(function(){return Stuff.selectItem()}).then(function(stuff){self.link="orderStuffFromHP",self.stuffurl=stuff.url,self.change&&"function"==typeof self.change&&$timeout(function(){self.change()},100)}).catch(function(err){console.log(err)})}function setSubscription(){self.link="subscription",self.change&&"function"==typeof self.change&&$timeout(function(){self.change()},100)}function setBonus(){self.link="allBonus",self.change&&"function"==typeof self.change&&$timeout(function(){self.change()},100)}function setSubscriptionAdd(){self.link="subscriptionAdd",self.change&&"function"==typeof self.change&&$timeout(function(){self.change()},100)}function setFeedback(){self.link="feedback",self.change&&"function"==typeof self.change&&$timeout(function(){self.change()},100)}function setCall(){self.link="call",self.change&&"function"==typeof self.change&&$timeout(function(){self.change()},100)}function setStaticPage(){$q.when().then(function(){return Stat.selectItem()}).then(function(stat){self.link="/stat/"+stat.url,self.change&&"function"==typeof self.change&&$timeout(function(){self.change()},100)}).catch(function(err){console.log(err)})}function setDateTime(){self.link="dateTime",self.change&&"function"==typeof self.change&&$timeout(function(){self.change()},100)}function setAnyPage(){$q.when().then(function(){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/createLink/createAnyLink.html",controller:function($uibModalInstance){var self=this;self.name="",self.ok=function(){console.log(self.name),self.name&&("/"!=self.name[0]&&self.name.indexOf("http")<0&&(self.name="/"+self.name),$uibModalInstance.close(self.name.substring(0,100)))},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl"}).result.then(function(name){name?resolve(name.substring(0,100)):reject("empty")},function(err){reject(err)})})}).then(function(link){self.link=link,self.change&&"function"==typeof self.change&&$timeout(function(){self.change()},100)}).catch(function(err){console.log(err)})}function setHomePage(){self.link="/",self.change&&"function"==typeof self.change&&$timeout(function(){self.change()},100)}function setCatalog(){self.link="/group/category",
self.change&&"function"==typeof self.change&&$timeout(function(){self.change()},100)}function deleteLink(){self.link="",$timeout(function(){self.change()},100)}var self=this;self.setFilterTag=setFilterTag,self.setBrandTag=setBrandTag,self.setBrand=setBrand,self.setCategory=setCategory,self.setSection=setSection,self.setStuff=setStuff,self.setStuffForOrder=setStuffForOrder,self.setSubscription=setSubscription,self.setSubscriptionAdd=setSubscriptionAdd,self.setBonus=setBonus,self.setFeedback=setFeedback,self.setStaticPage=setStaticPage,self.deleteLink=deleteLink,self.setCall=setCall,self.setDateTime=setDateTime,self.setAnyPage=setAnyPage,self.setHomePage=setHomePage,self.setCatalog=setCatalog}angular.module("gmall.services").directive("createLink",itemDirective),itemCtrl.$inject=["$q","FilterTags","Stuff","Category","BrandTags","Stat","Brands","Sections","global","$uibModal","$timeout"]}(),function(){function newsCartDirective(){return{templateUrl:"/views/template/partials/news/cart/news-cart.html",restrict:"A"}}function newsCartDirective1(){return{templateUrl:"/views/template/partials/news/cart/news-cart1.html",restrict:"A"}}function newsCartDirective2(){return{templateUrl:"/views/template/partials/news/cart/news-cart2.html",restrict:"A"}}function newsCartDirective3(){return{templateUrl:"/views/template/partials/news/cart/news-cart3.html",restrict:"A"}}function newsCartDirective4(){return{templateUrl:"/views/template/partials/news/cart/news-cart4.html",restrict:"A"}}function newsCartDirective5(){return{templateUrl:"/views/template/partials/news/cart/news-cart5.html",restrict:"A"}}function newsListDirective(){return{scope:{},bindToController:!0,controller:newsListCtrl,controllerAs:"$ctrl",templateUrl:"components/news/newsList.html"}}function newsListTemplateDirective($stateParams){return{template:"<div ui-view></div></div><div ng-bind-html='$ctrl.content|unsafe'></div>",bindToController:!0,scope:{},controllerAs:"$ctrl",controller:["$http","$stateParams","global",function($http,$stateParams,global){var self=this;$http.get("/views/template/partials/news").then(function(response){console.log(response),self.content=response.data.html,console.log(response.data.titles),global.set("titles",response.data.titles)})}]}}function newsListCtrl(News,$state,global,$timeout,$anchorScroll,Photo,Confirm,Label){function getList(){return!Object.keys(self.query).length&&self.actived&&(self.query={actived:!0}),News.getList(self.paginate,self.query).then(function(data){return self.itemsArr2=data.divideArrayWithChunk(2),self.itemsArr3=data.divideArrayWithChunk(3),self.itemsArr4=data.divideArrayWithChunk(4),self.items=data,$timeout(function(){self.data.rows=setRows(),$anchorScroll()}),self.items})}function setRows(){return global.get("functions").val.setRows?global.get("functions").val.setRows():2}function searchNews(searchStr){return self.query=searchStr?{name:searchStr.substring(0,10)}:{},self.paginate.page=0,getList().then(function(){console.log("Activated news list View")})}function saveField(item,field,defer){defer=defer||0,setTimeout(function(){var o={_id:item._id};return o[field]=item[field],self.Items.save({update:field},o).$promise.then(function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)},function(err){console.log(err)})},defer)}function createNews(item){var name=item?item.name:"";self.Items.create(name).then(function(res){return name=res,item?self.Items.get({_id:item._id,clone:"clone"}).$promise:{name:res}}).then(function(res){return res._id?(self.newNews=angular.copy(res),self.newNews.send={date:null,quantity:0},self.newNews.name=name,self.newNews.actived=!1,delete self.newNews.date,delete self.newNews._id,delete self.newNews.url,delete self.newNews.__v,self.newNews.nameL={},self.newNews.blocks.forEach(function(block){delete block.img,delete block._id,"stuffs"==block.type&&block.stuffs&&block.stuffs.length&&(block.stuffs=block.stuffs.map(function(s){return s._id?s._id:s})),block.imgs=[]})):(self.newNews={actived:!1},self.newNews.name=name),self.Items.save(self.newNews).$promise}).then(function(res){self.newNews._id=res.id,self.newNews.url=res.url,self.paginate.page=0,getList(self.paginate)}).then(function(){var id=self.newNews._id;delete self.newNews._id,setTimeout(function(){$state.go("frame.news.item",{id:id})},100)}).catch(function(err){console.log(err)})}function deleteItem(item){var folder="images/"+global.get("store").val.subDomain+"/News/"+item.url;Confirm("удалить?").then(function(){return News.delete({_id:item._id}).$promise}).then(function(){return getList()}).then(function(){return Photo.deleteFolder("News",folder)}).catch(function(err){(err=err&&err.data||err)&&exception.catcher("удаление новости")(err)})}var self=this;self.mobile=global.get("mobile").val,self.global=global,self.datePickerOptions={locale:{applyClass:"btn-green",applyLabel:"Выбрать",fromLabel:"от",toLabel:"до",cancelLabel:"Отменить",customRangeLabel:"Прозвольный диапазон",format:"DD-MMMM-YYYY",daysOfWeek:["Пн","Вт","Ср","Чт","Пн","Сб","Вс"],firstDay:1,monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"]},singleDatePicker:!0,date:{startDate:null,endDate:null}},self.$state=$state,self.Items=News,self.moment=moment,self.query={},self.paginate={page:0,rows:20,totalItems:0},self.newNews={name:"Новая иноформация",actived:!1},self.data={rows:2},self.itemsArr2=[[],[]],self.itemsArr3=[[],[],[]],self.itemsArr4=[[],[],[],[]],self.getList=getList,self.saveField=saveField,self.searchNews=searchNews,self.createNews=createNews,self.deleteItem=deleteItem,self.setRows=setRows,function(){getList().then(function(){return Label.getList({page:0,rows:100},{list:"news"})}).then(function(data){console.log(data),self.labels=data})}(),$(window).resize(function(){$timeout(function(){self.data.rows=setRows()})})}angular.module("gmall.services").directive("newsList",newsListDirective).directive("newsListTemplate",newsListTemplateDirective).directive("newsCart",newsCartDirective).directive("newsCart1",newsCartDirective1).directive("newsCart2",newsCartDirective2).directive("newsCart3",newsCartDirective3).directive("newsCart4",newsCartDirective4).directive("newsCart5",newsCartDirective5),newsListTemplateDirective.$inject=["global"],newsListCtrl.$inject=["News","$state","global","$timeout","$anchorScroll","Photo","Confirm","Label"]}(),function(){function itemTemplateDirective($stateParams){return{template:"<div ng-bind-html='$ctrl.content|unsafe'></div>",bindToController:!0,scope:{},controllerAs:"$ctrl",controller:["$http","$stateParams","global",function($http,$stateParams,global){var self=this;$http.get("views/template/partials/News/itemPage/"+$stateParams.id).then(function(response){console.log(response),self.content=response.data.html,console.log(response.data.titles),global.set("titles",response.data.titles)})}]}}function newsItemDirective(){return{scope:{},restrict:"E",bindToController:!0,controller:newsItemCtrl,controllerAs:"$ctrl",templateUrl:"components/news/newsItem.html"}}function newsItemCtrl(News,$stateParams,$q,$uibModal,global,exception,Stuff,CreateContent,Email,seoContent,Photo,$resource,$anchorScroll,$timeout,FilterTags,BrandTags,Brands,Campaign,Category,$scope,Confirm,SetCSS){function activate(){return getItem($stateParams.id).then(function(){}).catch(function(err){err=err.data||err,exception.catcher("получение новости")(err)})}function getItem(id){return self.Items.getItem(id).then(function(data){console.log(data),data&&!data.blocks&&(data.blocks=[],saveField("blocks",[])),data.blocks.forEach(function(b,i){b.i=i});for(var key in data)self.item[key]=data[key];return self.objShare=seoContent.setDataItem(data,!0),$anchorScroll(),self.item}).catch(function(err){return console.log(err),$q.reject(err)})}function setStyles(block,idx){$q.when().then(function(){return SetCSS.setStyles(block)}).then(function(){saveField("blocks."+block.i,block)})}function saveField(field,value,defer,indexImgs){field.indexOf("index")>-1&&(self.item.blocks.sort(function(a,b){return a.index-b.index}),self.item.blocks.forEach(function(b,i){b.i=i}),value=self.item.blocks,field="blocks"),defer=defer?defer:100,$timeout(function(){"date"==field&&(value=new Date(self.item[field]));var o={_id:self.item._id};o[field]=value;var query={update:field};field.indexOf(".imgs")>-1&&void 0!==indexImgs&&(query.indexImgs=indexImgs),self.Items.save(query,o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})},defer)}function refreshBlocks(){return self.Items.getItem($stateParams.id).then(function(data){data.blocks.forEach(function(b,i){b.i=i,b.desc||(b.desc=""),b.descL||(b.descL={}),b.desc1||(b.desc1=""),b.desc1L||(b.desc1L={}),b.name||(b.name=""),b.nameL||(b.nameL={}),b.name1||(b.name1=""),b.name1L||(b.name1L={}),b.videoLink||(b.videoLink="")}),self.item.blocks=data.blocks})}function addBlock(type){return $scope.$broadcast("addNewBlock",{type:type}),void(self.newBlock=null)}function deleteBlock(block,index){var o={_id:self.item._id};o.id=block.id;var update={update:"id",embeddedName:"blocks"};update.embeddedPull=!0,console.log(update,o),Confirm("Подтверждаете?").then(function(){return self.Items.save(update,o).$promise}).then(function(res){self.item.blocks.splice(index,1);var images=[];if(block.img&&images.push(block.img),block.video&&images.push(block.video),block.videoCover&&images.push(block.videoCover),block.imgs&&block.imgs.length&&block.imgs.forEach(function(im){im.img&&images.push(im.img)}),images.length)return Photo.deleteFiles("Stat",images)})}function deleteSlide(block,index){Photo.deleteFiles("Stat",[block.imgs[index].img]).then(function(response){block.imgs.splice(index,1),self.saveField("blocks."+block.i+".imgs",block.imgs)},function(err){console.log(err)})}function editSlide(block,index){$uibModal.open({animation:!0,templateUrl:"components/staticPage/editSlide.html",controller:function(slide,$uibModalInstance){var self=this;self.item=slide,self.ok=function(){console.log(self.item),$uibModalInstance.close(self.item)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl",size:"lg",resolve:{slide:function(){return block.imgs[index]}}}).result.then(function(slide){self.saveField("blocks."+block.i+".imgs",block.imgs,null,index)},function(){})}function filterBlocks(item){return keyParts.indexOf(item.key)>-1}function addItemInBlock(block,$index){var model;switch(block.type){case"stuffs":model=Stuff;break;case"campaign":model=Campaign;break;case"filterTags":model=FilterTags;break;case"brandTags":model=BrandTags;break;case"brands":model=Brans;break;case"categories":model=Category}$q.when().then(function(){return model.select()}).then(function(item){block[block.type]||(block[block.type]=[]);var img,link;switch(block.type){case"stuffs":img=item.gallery[0]&&item.gallery[0].thumb?item.gallery[0].thumb:null,link=item.link,item.artikul&&(item.name+=" "+item.artikul);break;case"campaign":img=item.img?item.img:null,link="campaign/"+item.url;break;case"filterTags":img=item.img?item.img:null,link="/group/category?queryTag="+item.url;break;case"brandTags":img=item.img?item.img:null,link="/group/category?brandTag="+item.url;break;case"brands":img=item.img?item.img:null,link="/group/category?brand="+item.url;break;case"categories":img=item.img?item.img:null,link="/group/"+item.url}void 0!==$index?block.imgs[$index]={name:item.name,img:img,link:link}:(block.imgs||(block.imgs=[]),block.imgs.push({name:item.name,img:img,link:link})),saveField("blocks."+block.i+".imgs",block.imgs)})}function movedItem(block,item){return $timeout(function(){saveField("blocks."+block.i+".imgs",block.imgs)},100),item}function deleteItemFromBlock(block,$index){block.imgs.splice($index,1),saveField("blocks."+block.i+".imgs",block.imgs)}function changeItem(block,$index){addItemInBlock(block,$index)}function sendEmail(){var item=angular.copy(self.item);item.blocks&&item.blocks.length&&item.blocks.forEach(function(b){"stuffs"==b.type&&(b.imgs=b.stuffs)});var ownerDomain,content=CreateContent.emailFromNews(item),d=new Date,n=d.getMonth()+1;global.get("store").val.seller.mailgun&&global.get("store").val.seller.mailgun.domain&&(ownerDomain=global.get("store").val.seller.mailgun.domain),$q.when().then(function(){}).then(function(){return self.Items.viewEmail(self.item,content)}).then(function(data){var lists=data.lists,except=data.except;if(!ownerDomain&&global.get("store").val.mailData&&global.get("store").val.mailData.month&&global.get("store").val.mailData.month==n&&global.get("store").val.mailData.quantity>500)throw"Превышен лимит количества писем в месяц";var o={content:content,lists:lists,except:except,subject:self.item.name.substring(0,50)};return Email.save(o).$promise}).then(function(res){if(exception.showToaster("note","Сообщение","Рассылка отправлена"),self.item.send||(self.item.send={}),self.item.send.date=Date.now(),saveField("send",self.item.send),res.quantity&&!ownerDomain){global.get("store").val.mailData&&global.get("store").val.mailData.month?global.get("store").val.mailData.month!=n?global.get("store").val.mailData={month:n,quantity:res.quantity}:(global.get("store").val.mailData.quantity||(global.get("store").val.mailData.quantity=0),global.get("store").val.mailData.quantity+=res.quantity):global.get("store").val.mailData={month:n,quantity:res.quantity};var o={_id:global.get("store").val._id};o.mailData=global.get("store").val.mailData,Store.save({update:"mailData"},o)}}).catch(function(err){err&&exception.catcher("отправка писем")(err)})}function clearDesc(block){console.log("???????????????"),block.desc="",saveField("blocks."+block.i+".index",block.desc)}var self=this;self.Items=News,self.type="News",self.item={},self.mobile=global.get("mobile").val,self.global=global,self.listOfBlocksForNewsDetailPage=listOfBlocksForAll,self.listOfBlocks=listOfBlocksForAll,self.animationTypes=animationTypes,self.datePickerOptions={locale:{applyClass:"btn-green",applyLabel:"Выбрать",fromLabel:"от",toLabel:"до",cancelLabel:"Отменить",customRangeLabel:"Прозвольный диапазон",format:"DD-MMMM-YYYY",daysOfWeek:["Пн","Вт","Ср","Чт","Пн","Сб","Вс"],firstDay:1,monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"]},singleDatePicker:!0,date:{startDate:null,endDate:null}},self.setStyles=setStyles,self.saveField=saveField,self.sendEmail=sendEmail;var Store=$resource("/api/collections/Store/:_id",{_id:"@_id"});self.newBlock=null,self.addBlock=addBlock,self.refreshBlocks=refreshBlocks,self.deleteBlock=deleteBlock,self.deleteSlide=deleteSlide,self.editSlide=editSlide,self.filterBlocks=filterBlocks,self.addItemInBlock=addItemInBlock,self.movedItem=movedItem,self.deleteItemFromBlock=deleteItemFromBlock,self.changeItem=changeItem,self.clearDesc=clearDesc,activate(),$scope.$on("changeLang",function(){activate()});var keyParts=global.get("store").val.template.news.parts.filter(function(el){return el.is}).map(function(el){return el.name})}angular.module("gmall.directives").directive("newsItem",newsItemDirective).directive("newsDetailTemplate",itemTemplateDirective),newsItemCtrl.$inject=["News","$stateParams","$q","$uibModal","global","exception","Stuff","CreateContent","Email","seoContent","Photo","$resource","$anchorScroll","$timeout","FilterTags","BrandTags","Brands","Campaign","Category","$scope","Confirm","SetCSS"]}(),function(){function newsService($resource,$uibModal,$q,global){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return console.log("XHR Failed for getNews."+error),$q.reject(error)}paginate||(paginate={page:0});var data={perPage:paginate.rows,page:paginate.page,query:query};return global.get("crawler")&&global.get("crawler").val&&(data.subDomain=global.get("store").val.subDomain),Items.query(data).$promise.then(getListComplete).catch(getListFailed)}function search(search,setData){function getListComplete(response){return response}function getListFailed(error){return console.log("XHR Failed for getNews."+error),$q.reject(error)}var data={search:search,setData:setData};return Items.query(data).$promise.then(getListComplete).catch(getListFailed)}function getItem(id){function getItemComplete(response){return response}function getItemFailed(error){return $q.reject(error)}return Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}function create(name){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/news/createNews.html",controller:function($uibModalInstance,name){var self=this;self.name=name,self.ok=function(){$uibModalInstance.close(self.name)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl",resolve:{name:function(){return name}}}).result.then(function(name){name?resolve(name.substring(0,100)):reject("empty")},function(err){reject(err)})})}function viewEmail(item,content){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/news/viewEmail.html",controller:function($q,$uibModalInstance,SubscibtionList,item,content){var self=this;self.item=item,self.except=!1,self.list,self.content=content,self.ok=function(){$uibModalInstance.close({lists:self.lists,except:self.except})},self.cancel=function(){$uibModalInstance.dismiss()},function(){$q.when().then(function(){return SubscibtionList.getList({page:0,rows:1,items:0},{})}).then(function(data){if(data&&data[0]){data[0].list||(data[0].list=[]);for(var key in data[0].list)data[0].list[key]||delete data[0].list[key];self.subscibtionList=data[0]}else self.subscibtionList={list:[]}})}()},size:"lg",controllerAs:"$ctrl",resolve:{item:function(){return item},content:function(){return content}}}).result.then(function(item){resolve(item)},function(err){reject(err)})})}function selectItem(){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/news/selectNews.html",controller:function(News,$uibModalInstance,$q){var self=this;self.stuffs=[],self.name="";var query;self.search=function(name){name.length<3||(query={name:name},News.search(name,!0).then(function(res){self.items=res}))},self.selectItem=function(item){$uibModalInstance.close(item)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl",size:"lg"}).result.then(function(stuff){resolve(stuff)},function(){reject()})})}var Items=$resource("/api/collections/News/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,query:Items.query,get:Items.get,save:Items.save,delete:Items.delete,create:create,viewEmail:viewEmail,select:selectItem,search:search}}angular.module("gmall.services").service("News",newsService),newsService.$inject=["$resource","$uibModal","$q","global"]}(),function(){function lookbookListDirective(){return{scope:{},bindToController:!0,controller:lookbookListCtrl,controllerAs:"$ctrl",templateUrl:"components/lookbook/lookbookList.html"}}function lookbookListTemplateDirective(global){return{scope:{actived:"@"},rescrict:"E",bindToController:!0,controller:lookbookListCtrl,controllerAs:"$ctrl",templateUrl:"views/template/partials/lookbook/lookbookList"+(global.get("store").val.template.newsList?global.get("store").val.template.newsList:"")+".html"}}function lookbookListCtrl(Lookbook,$state,global,exception,Confirm,Photo,$timeout){function getList(){return!Object.keys(self.query).length&&self.actived&&(self.query={actived:!0}),self.Items.getList(self.paginate,self.query).then(function(data){return self.items=data,self.items})}function searchItem(searchStr){return self.query=searchStr?{name:searchStr.substring(0,10)}:{},self.paginate.page=0,getList().then(function(){console.log("Activated list View")})}function saveField(item,field,defer){defer=defer||0,setTimeout(function(){var o={_id:item._id};return o[field]=item[field],self.Items.save({update:field},o).$promise.then(function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)},function(err){console.log(err)})},defer)}function createItem(){self.Items.create().then(function(res){return self.newItem={actived:!1},self.newItem.name=res,self.Items.save(self.newItem).$promise}).then(function(res){return self.newItem._id=res.id,self.newItem.url=res.url,self.paginate.page=0,getList(self.paginate)}).then(function(){var id=self.newItem._id;delete self.newItem._id,$state.go("frame.lookbook.item",{id:id})}).catch(function(err){delete self.newItem._id,err=err.data||err,exception.catcher("создание объекта")(err)})}function deleteItem(item){var folder="images/"+global.get("store").val.subDomain+"/Lookbook/"+item.url;console.log(folder),Confirm("удалить???").then(function(){return self.Items.delete({_id:item._id}).$promise}).then(function(){return self.getList()}).then(function(){Photo.deleteFolder("Lookbook",folder)}).catch(function(err){err&&(err=err&&err.data||err)&&exception.catcher("удаление объета")(err)})}var self=this;self.mobile=global.get("mobile").val,self.datePickerOptions={locale:{applyClass:"btn-green",applyLabel:"Выбрать",fromLabel:"от",toLabel:"до",cancelLabel:"Отменить",customRangeLabel:"Прозвольный диапазон",format:"DD-MMMM-YYYY",daysOfWeek:["Пн","Вт","Ср","Чт","Пн","Сб","Вс"],firstDay:1,monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"]},singleDatePicker:!0,date:{startDate:null,endDate:null}},self.$state=$state,self.Items=Lookbook,self.moment=moment,self.query={},self.paginate={page:0,rows:50,totalItems:0},self.newItem={name:"Новая иноформация",actived:!1},self.getList=getList,self.saveField=saveField,self.searchItem=searchItem,self.createItem=createItem,self.deleteItem=deleteItem,function(){getList().then(function(){})}()}angular.module("gmall.services").directive("lookbookList",lookbookListDirective).directive("lookbookTemplate",lookbookListTemplateDirective),lookbookListTemplateDirective.$inject=["global"],lookbookListCtrl.$inject=["Lookbook","$state","global","exception","Confirm","Photo","$timeout"]}(),function(){function lookbookItemDirective(){return{scope:{},restrict:"E",bindToController:!0,controller:lookbookItemCtrl,controllerAs:"$ctrl",templateUrl:"components/lookbook/lookbookItem.html"}}function lookbookItemCtrl(Lookbook,$stateParams,$q,global,exception,Photo,$timeout,$scope,$uibModal){function activate(){return getItem($stateParams.id).then(function(){}).catch(function(err){err=err.data||err,exception.catcher("получение объекта")(err)})}function getItem(id){return self.Items.getItem(id).then(function(data){for(var key in data)self.item[key]=data[key];return self.item}).catch(function(err){return console.log(err),$q.reject(err)})}function saveField(field,defer){defer=defer||0,setTimeout(function(){var o={_id:self.item._id};o[field]=self.item[field],self.Items.save({update:field},o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})},defer)}function editSlide(index){$uibModal.open({animation:!0,templateUrl:"components/staticPage/editSlide.html",controller:function(slide,$uibModalInstance){var self=this;self.item=slide,self.ok=function(){console.log(self.item),$uibModalInstance.close(self.item)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl",size:"lg",resolve:{slide:function(){return self.item.imgs[index]}}}).result.then(function(slide){self.saveField("imgs")},function(){})}function filterBlocks(item){return keyParts.indexOf(item.key)>-1}function movedSlide(){self.item.imgs.forEach(function(el,i){el.index=i}),self.saveField("imgs")}function deleteSlide(index){Photo.deleteFiles("Lookbook",[self.item.imgs[index].img]).then(function(response){self.item.imgs.splice(index,1),self.saveField("imgs")},function(err){console.log(err)})}var self=this;self.Items=Lookbook,self.item={},self.mobile=global.get("mobile").val,self.global=global,self.datePickerOptions={locale:{applyClass:"btn-green",applyLabel:"Выбрать",fromLabel:"от",toLabel:"до",cancelLabel:"Отменить",customRangeLabel:"Прозвольный диапазон",format:"DD-MMMM-YYYY",daysOfWeek:["Пн","Вт","Ср","Чт","Пн","Сб","Вс"],firstDay:1,monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"]},singleDatePicker:!0,date:{startDate:null,endDate:null}},self.saveField=saveField,self.movedSlide=movedSlide,self.deleteSlide=deleteSlide,self.filterBlocks=filterBlocks,self.editSlide=editSlide,activate(),$scope.$on("changeLang",function(){activate()});var keyParts=global.get("store").val.template.stat.parts.filter(function(el){return el.is}).map(function(el){return el.name})}angular.module("gmall.directives").directive("lookbookItem",lookbookItemDirective),lookbookItemCtrl.$inject=["Lookbook","$stateParams","$q","global","exception","Photo","$timeout","$scope","$uibModal"]}(),function(){function lookbookService($resource,$uibModal,$q,global){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return console.log("XHR Failed for getNews."+error),$q.reject(error)}var data={perPage:paginate.rows,page:paginate.page,query:query};return Items.query(data).$promise.then(getListComplete).catch(getListFailed)}function getItem(id){function getItemComplete(response){return response}function getItemFailed(error){return $q.reject(error)}return Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}function create(){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/lookbook/createLookbook.html",controller:function($uibModalInstance){var self=this;self.name="",self.ok=function(){$uibModalInstance.close(self.name)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl"}).result.then(function(name){name?resolve(name.substring(0,100)):reject("empty")},function(err){reject(err)})})}var Items=$resource("/api/collections/Lookbook/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,query:Items.query,get:Items.get,save:Items.save,delete:Items.delete,create:create}}angular.module("gmall.services").service("Lookbook",lookbookService),lookbookService.$inject=["$resource","$uibModal","$q","global"]}(),function(){function serviceFoo($resource,$uibModal,$q,global){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}paginate||(paginate={page:0});var data={perPage:paginate.rows,page:paginate.page,query:query};return global.get("crawler")&&global.get("crawler").val&&(data.subDomain=global.get("store").val.subDomain),Items.query(data).$promise.then(getListComplete)}function getItem(id){function getItemComplete(response){return response&&response.blocks&&response.blocks.length&&response.blocks.forEach(function(b){"stuffs"==b.type&&(b.stuffs&&b.stuffs.length?b.imgs=b.stuffs.map(function(s){return s.gallery&&s.gallery.length&&s.gallery[0].img&&(s.img=s.gallery[0].img),s}):b.imgs=[])}),response}return Items.get({_id:id}).$promise.then(getItemComplete)}function create(clone){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/CONTENT/master/createMaster.html",controller:function($uibModalInstance,clone){var self=this;self.header=clone?"Клонирование объекта":"Создание объекта",self.name="",self.ok=function(){$uibModalInstance.close(self.name)},self.cancel=function(){$uibModalInstance.dismiss()}},resolve:{clone:function(){return clone}},controllerAs:"$ctrl"}).result.then(function(name){name?resolve(name.substring(0,50)):reject()},function(err){reject(err)})})}var Items=$resource("/api/collections/Master/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,query:Items.query,get:Items.get,save:Items.save,delete:Items.delete,create:create}}angular.module("gmall.services").service("Master",serviceFoo),serviceFoo.$inject=["$resource","$uibModal","$q","global"]}(),function(){function mastersStaticPage(){return{scope:{},bindToController:!0,controllerAs:"$ctrl",templateUrl:"views/template/partials/stat/masters/masters.html",controller:function(global){console.log(global.get("masters").val);var self=this;self.global=global,self.mobile=global.get("mobile").val}}}function masterListDirective(){return{scope:{},bindToController:!0,controller:masterListCtrl,controllerAs:"$ctrl",templateUrl:"components/CONTENT/master/masterList.html"}}function masterListTemplateDirective(global){return{scope:{},rescrict:"E",bindToController:!0,controller:masterListCtrl,controllerAs:"$ctrl",templateUrl:"views/template/partials/master/masterList"+(global.get("store").val.template.masterList?global.get("store").val.template.masterList:"")+".html"}}function masterListCtrl(Master,$state,global,Confirm,$q,exception,Photo,$timeout,Label){function getList(){return self.Items.getList(self.paginate,self.query).then(function(data){return self.items=data,self.items})}function searchItem(searchStr){return self.query=searchStr?{name:searchStr.substring(0,10)}:{},self.paginate.page=0,getList().then(function(){console.log("Activated list View")})}function saveField(item,field){var o={_id:item._id};o[field]=item[field],self.Items.save({update:field},o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})}function createItem(){self.Items.create().then(function(res){return self.newItem={},self.newItem.name=res,self.Items.save(self.newItem).$promise}).then(function(res){self.newItem._id=res.id,self.newItem.url=res.url,self.paginate.page=0,getList(self.paginate)}).then(function(){var id=self.newItem._id;delete self.newItem._id,setTimeout(function(){$state.go("frame.master.item",{id:id})},100)}).catch(function(err){err&&exception.catcher("создание мастера")(err)})}function cloneItem(item){var name;self.Items.create("clone").then(function(res){return name=res,self.Items.getItem(item._id)}).then(function(master){return self.newItem=angular.copy(master),self.newItem.name=name,self.newItem.nameL={},delete self.newItem._id,delete self.newItem.__v,delete self.newItem.url,console.log(self.newItem),self.newItem.blocks.forEach(function(block){delete block.img,delete block._id,"stuffs"==block.type&&block.stuffs&&block.stuffs.length&&(block.stuffs=block.stuffs.map(function(s){return s._id})),block.imgs=[]}),self.Items.save(self.newItem).$promise}).then(function(res){self.newItem._id=res.id,self.newItem.url=res.url,self.paginate.page=0,getList(self.paginate)}).then(function(){var id=self.newItem._id;delete self.newItem._id,setTimeout(function(){$state.go("frame.master.item",{id:id})},100)}).catch(function(err){err&&exception.catcher("создание мастера")(err)})}function deleteItem(item){var folder="images/"+global.get("store").val.subDomain+"/Master/"+item.url;Confirm("удалить???").then(function(){return self.Items.delete({_id:item._id}).$promise}).then(function(){return self.getList()}).then(function(){Photo.deleteFolder("Master",folder)}).catch(function(err){err&&(err=err&&err.data||err)&&exception.catcher("удаление объекта")(err)})}function dropCallback(item){var i=0;return setTimeout(function(){self.items.reduce(function(p,item){return p.then(function(){return i++,item.index=i,saveField(item,"index")})},$q.when(!0)).then(function(){console.log(self.items.map(function(el){return el.index}))})},50),item}var self=this;self.mobile=global.get("mobile").val,self.global=global,self.$state=$state,self.Items=Master,self.query={},self.labels=[],self.paginate={page:0,rows:50,totalItems:0},self.newItem={name:"имя мастера"},self.getList=getList,self.saveField=saveField,self.searchItem=searchItem,self.deleteItem=deleteItem,self.createItem=createItem,self.dropCallback=dropCallback,self.cloneItem=cloneItem,function(){getList().then(function(){return Label.getList({page:0,rows:100},{list:"master"})}).then(function(data){
self.labels=data})}()}angular.module("gmall.services").directive("masterList",masterListDirective).directive("masterListTemplate",masterListTemplateDirective).directive("mastersStaticPage",mastersStaticPage),masterListCtrl.$inject=["Master","$state","global","Confirm","$q","exception","Photo","$timeout","Label"]}(),function(){function masterItemDirective(){return{scope:{},restrict:"E",bindToController:!0,controller:masterItemCtrl,controllerAs:"$ctrl",templateUrl:"components/CONTENT/master/masterItem.html"}}function masterItemCtrl(Master,$stateParams,$q,$uibModal,global,exception,Stuff,Photo,$scope,$timeout,Confirm,SetCSS,$user,Workplace,$rootScope){function activate(){return getItem($stateParams.id).then(function(){if(self.item.user)return $user.getItem(self.item.user)}).then(function(user){if(user){if(user.profile&&user.profile.phone&&"+"==user.profile.phone[0]&&(user.profile.phone=user.profile.phone.substring(1)),user.profile&&user.profile.phone&&user.profile.phone.length<10)for(;user.profile.phone.length<10;)user.profile.phone+="0";user.profile&&user.profile.phone&&10==user.profile.phone.length&&(user.profile.phone="38"+user.profile.phone),user.phone=user.profile?user.profile.phone:null,self.item.user=user}}).catch(function(err){err=err.data||err,exception.catcher("получение объекта")(err)})}function getItem(id){return self.Items.getItem(id).then(function(data){data&&!data.blocks&&(data.blocks=[],saveField("blocks",[]));var bl=data.blocks.filter(function(b){return b});return bl.length!=data.blocks.length&&(saveField("blocks",bl),data.blocks=bl),data.blocks.forEach(function(b,i){"stuffs"==b.type&&b.stuffs.length&&(b.stuffs=b.stuffs.map(function(s){return s._is||s})),b.i=i}),data.blocks.sort(function(a,b){return a.index-b.index}),void 0==data.notification&&(data.notification=0),self.item=data,self.item}).catch(function(err){return console.log(err),$q.reject(err)})}function refreshBlocks(){return self.Items.getItem($stateParams.id).then(function(data){data.blocks.forEach(function(b,i){b.i=i,b.desc||(b.desc=""),b.descL||(b.descL={}),b.desc1||(b.desc1=""),b.desc1L||(b.desc1L={}),b.name||(b.name=""),b.nameL||(b.nameL={}),b.name1||(b.name1=""),b.name1L||(b.name1L={}),b.videoLink||(b.videoLink="")}),self.item.blocks=data.blocks})}function setStyles(block,idx){$q.when().then(function(){return SetCSS.setStyles(block)}).then(function(){block.elements&&saveField("blocks."+block.i+".elements",block.elements),block.blockStyle&&saveField("blocks."+block.i+".blockStyle",block.blockStyle)})}function saveField(field,value,defer,indexImgs){field.indexOf("index")>-1&&(self.item.blocks.sort(function(a,b){return a.index-b.index}),self.item.blocks.forEach(function(b,i){b.i=i}),value=self.item.blocks,field="blocks"),defer=defer?defer:100,setTimeout(function(){"date"==field&&(value=new Date(self.item[field]));var o={_id:self.item._id};o[field]=value;var query={update:field};field.indexOf(".imgs")>-1&&void 0!==indexImgs&&(query.indexImgs=indexImgs),self.Items.save(query,o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})},defer)}function addBlock(type){return $scope.$broadcast("addNewBlock",{type:type}),void(self.newBlock=null)}function deleteBlock(block,index){var o={_id:self.item._id},update={update:"_id_id",embeddedName:"blocks"};o.id=block.id,update.embeddedPull=!0,Confirm("потверждаете?").then(function(){return self.item.blocks.splice(index,1),block._id?(o._id_id=block._id,update={update:"_id_id",embeddedName:"blocks"},update.embeddedPull=!0):(update={update:"blocks"},o.blocks=self.item.blocks),self.Items.save(update,o).$promise}).then(function(res){var images=[];if(block.img&&images.push(block.img),block.video&&images.push(block.video),block.videoCover&&images.push(block.videoCover),block.imgs&&block.imgs.length&&block.imgs.forEach(function(im){im.img&&images.push(im.img)}),images.length)return Photo.deleteFiles("Stat",images)}).then(function(){activate()})}function deleteSlide(block,index){Photo.deleteFiles("Master",[block.imgs[index].img]).then(function(response){block.imgs.splice(index,1),self.saveField("blocks."+block.i+".imgs",block.imgs,null,index)},function(err){console.log(err)})}function editSlide(block,index){$uibModal.open({animation:!0,templateUrl:"components/CONTENT/master/editSlide.html",controller:function(slide,$uibModalInstance){var self=this;self.item=slide,self.ok=function(){console.log(self.item),$uibModalInstance.close(self.item)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl",size:"lg",resolve:{slide:function(){return block.imgs[index]}}}).result.then(function(slide){self.saveField("blocks."+block.i+".imgs",block.imgs)},function(){})}function savePhone(phone){saveField("phone",phone)}function clearUser(){console.log(self.user),changeUser(self.user)}function refreshUsers(phone){phone.length<3||(self.cachePhone=phone,searchUser(phone))}function searchUser(phone){var q={$or:[{"profile.phone":phone},{name:phone},{email:phone}]};$user.getList({page:0,rows:20},q).then(function(res){self.users=res.map(function(user){if(user.profile&&user.profile.phone&&"+"==user.profile.phone[0]&&(user.profile.phone=user.profile.phone.substring(1)),user.profile&&user.profile.phone&&user.profile.phone.length<10)for(;user.profile.phone.length<10;)user.profile.phone+="0";return user.profile&&user.profile.phone&&10==user.profile.phone.length&&(user.profile.phone="38"+user.profile.phone),user.phone=user.profile?user.profile.phone:null,user})})}function changeUser(user){if(self.item.user&&self.item.user._id&&(!user||user._id!=self.item.user._id)){var o={_id:self.item.user._id,master:null};$user.save({update:"master"},o,function(){})}var u=null;if(user?(u=user._id,self.item.user=user):self.item.user=null,saveField("user",u),self.user=null,self.item.user&&self.item.user._id){var o={_id:self.item.user._id,master:self.item._id};$user.save({update:"master"},o,function(){})}}function getWorkplaces(){Workplace.getList({page:0,rows:50}).then(function(res){console.log(res,res&&res.length),res&&res.length&&(self.workplaces=res,console.log(self.workplaces))})}function addWorkplace(wp){console.log(wp),self.item.workplaces||(self.item.workplaces=[]),self.item.workplaces=self.item.workplaces.filter(function(wp){return wp});var value=self.item.workplaces.map(function(wp){return wp._id});value.indexOf(wp._id)>-1||(value.push(wp._id),self.item.workplaces.push(wp),console.log(value),saveField("workplaces",value),$timeout(function(){},1e3))}function deleteWorkplace(idx){self.item.workplaces||(self.item.workplaces=[]),self.item.workplaces.splice(idx,1),saveField("workplaces",self.item.workplaces.map(function(wp){return wp._id}))}function addItemInBlock(block,$index){var model;switch(block.type){case"stuffs":model=Stuff;break;case"campaign":model=Campaign;break;case"filterTags":model=FilterTags;break;case"brandTags":model=BrandTags;break;case"brands":model=Brans;break;case"categories":model=Category}$q.when().then(function(){return model.select()}).then(function(item){if("stuffs"==block.type&&block.stuffs&&block.stuffs.length&&block.stuffs.some(function(s){return s&&s._id?s._id==item._id:s==item._id}))throw"такой объект уже есть";block[block.type]||(block[block.type]=[]);var img,link;switch(name=item.name,block.type){case"stuffs":img=item.gallery[0]&&item.gallery[0].thumb?item.gallery[0].thumb:null,link=item.link,item.artikul&&(item.name+=" "+item.artikul);break;case"campaign":img=item.img?item.img:null,link="campaign/"+item.url;break;case"filterTags":img=item.img?item.img:null,link="/group/category?queryTag="+item.url;break;case"brandTags":img=item.img?item.img:null,link="/group/category?brandTag="+item.url;break;case"brands":img=item.img?item.img:null,link="/group/category?brand="+item.url;break;case"categories":img=item.img?item.img:null,link="/group/"+item.url}void 0!==$index?block.imgs[$index]={name:item.name,img:img,link:link,_id:item._id}:(block.imgs||(block.imgs=[]),block.imgs.push({name:item.name,img:img,link:link,_id:item._id})),saveField("blocks."+block.i+".imgs",block.imgs),"stuffs"==block.type&&(block.stuffs=block.imgs.map(function(img){return img._id}),saveField("blocks."+block.i+".stuffs",block.stuffs))}).catch(function(err){err&&exception.catcher("добавление")(err)})}function movedItem(block,item){return $timeout(function(){saveField("blocks."+block.i+".imgs",block.imgs),"stuffs"==block.type&&(block.stuffs=block.imgs.map(function(img){return img._id}),saveField("blocks."+block.i+".stuffs",block.stuffs))},100),item}function deleteItemFromBlock(block,$index){block.imgs.splice($index,1),saveField("blocks."+block.i+".imgs",block.imgs),"stuffs"==block.type&&(block.stuffs=block.imgs.map(function(img){return img._id}),saveField("blocks."+block.i+".stuffs",block.stuffs))}function changeItem(block,$index){addItemInBlock(block,$index)}function toggleEdit(item){item.editMode=!item.editMode}function toggleAdd(){self.addMode=!self.addMode}function saveReview(item){item.name=item.name.substring(0,20),item.desc=item.desc.substring(0,200),delete item.editMode,saveField("reviews",item.reviews)}function deleteReview(i){self.item.reviews.splice(i,1),saveField("reviews",item.reviews)}function addReview(admin){if(admin)var o=self.newReview;else var o={name:global.get("user").val.profile.fio||global.get("user").val.name,date:Date.now(),desc:self.newReviewText.substring(0,200)};self.newReviewText="",self.unableAddReview=!1,self.item.reviews||(self.item.reviews=[]),self.item.reviews.unshift(o),saveField("reviews",self.item.reviews),admin&&toggleAdd()}var self=this;self.Items=Master,self.type="Master",self.item={},self.mobile=global.get("mobile").val,self.global=global,self.listOfBlocksForMasterPage=listOfBlocksForAll,self.listOfBlocks=listOfBlocksForAll,self.moment=moment,self.saveField=saveField,self.setStyles=setStyles,self.addBlock=addBlock,self.refreshBlocks=refreshBlocks,self.deleteBlock=deleteBlock,self.deleteSlide=deleteSlide,self.editSlide=editSlide,self.addItemInBlock=addItemInBlock,self.movedItem=movedItem,self.deleteItemFromBlock=deleteItemFromBlock,self.changeItem=changeItem,self.deleteReview=deleteReview,self.toggleEdit=toggleEdit,self.addReview=addReview,self.toggleAdd=toggleAdd,self.saveReview=saveReview,self.newReview={name:"",desc:"",date:Date.now()},self.savePhone=savePhone,self.refreshUsers=refreshUsers,self.changeUser=changeUser,self.clearUser=clearUser,self.workplaces=[],self.deleteWorkplace=deleteWorkplace,self.addWorkplace=addWorkplace,self.getWorkplaces=getWorkplaces,activate(),$scope.$on("changeLang",function(){activate()}),global.get("store").val.template.master||(global.get("store").val.template.master={parts:[]});global.get("store").val.template.master.parts.filter(function(el){return el.is}).map(function(el){return el.name})}function masterTemplateDirective($stateParams){return{template:"<div ng-bind-html='$ctrl.content|unsafe'></div>",bindToController:!0,scope:{},controllerAs:"$ctrl",controller:["$http","$stateParams","global",function($http,$stateParams,global){var self=this;$http.get("views/template/partials/Master/itemPage/"+$stateParams.id).then(function(response){console.log(response),self.content=response.data.html,console.log(response.data.titles),global.set("titles",response.data.titles)})}]}}function masterScheduleDirective($stateParams){return{bindToController:!0,scope:{master:"@"},controllerAs:"$ctrl",controller:masterScheduleCtrl,templateUrl:"components/CONTENT/master/masterSchedule.html"}}function masterScheduleCtrl($http,$stateParams,global){var self=this;console.log("init",self.master)}angular.module("gmall.directives").directive("masterItem",masterItemDirective).directive("masterDetailTemplate",masterTemplateDirective).directive("masterSchedule",masterScheduleDirective),masterItemCtrl.$inject=["Master","$stateParams","$q","$uibModal","global","exception","Stuff","Photo","$scope","$timeout","Confirm","SetCSS","$user","Workplace","$rootScope"],masterScheduleCtrl.$inject=["$http","$stateParams","global"]}(),function(){function serviceFoo($resource,$uibModal,$q,global){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}paginate||(paginate={page:0});var data={perPage:paginate.rows,page:paginate.page,query:query};return global.get("crawler")&&global.get("crawler").val&&(data.subDomain=global.get("store").val.subDomain),Items.query(data).$promise.then(getListComplete)}function getItem(id){function getItemComplete(response){return response&&response.stuffs&&response.stuffs.length&&response.stuffs.forEach(function(s){s.gallery&&s.gallery.length&&s.gallery[0].img&&(s.img=s.gallery[0].img)}),response}return Items.get({_id:id}).$promise.then(getItemComplete)}function create(){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/CONTENT/groupStuffs/createItem.html",controller:function($uibModalInstance){var self=this;self.name="",self.ok=function(){$uibModalInstance.close(self.name)},self.cancel=function(){$uibModalInstance.dismiss()}},controllerAs:"$ctrl"}).result.then(function(name){name?resolve(name.substring(0,50)):reject()},function(err){reject(err)})})}function search(search,setData){function getListComplete(response){return response}function getListFailed(error){return console.log("XHR Failed for getNews."+error),$q.reject(error)}var data={search:search,setData:setData};return Items.query(data).$promise.then(getListComplete).catch(getListFailed)}function selectItem(){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/CONTENT/groupStuffs/selectItem.html",controller:function(GroupStuffs,$uibModalInstance,$q){var self=this;self.stuffs=[],self.name="";var query;self.search=function(name){name.length<3||(query={name:name},GroupStuffs.search(name,!0).then(function(res){self.items=res}))},self.selectItem=function(item){$uibModalInstance.close(item)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl",size:"lg"}).result.then(function(stuff){resolve(stuff)},function(){reject()})})}var Items=$resource("/api/collections/GroupStuffs/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,query:Items.query,get:Items.get,save:Items.save,delete:Items.delete,create:create,select:selectItem,search:search}}angular.module("gmall.services").service("GroupStuffs",serviceFoo),serviceFoo.$inject=["$resource","$uibModal","$q","global"]}(),function(){function groupStuffsListDirective(){return{scope:{},bindToController:!0,controller:groupStuffsListCtrl,controllerAs:"$ctrl",templateUrl:"components/CONTENT/groupStuffs/groupStuffsList.html"}}function groupStuffsListCtrl(GroupStuffs,$state,global,Confirm,$q,exception,Photo,$timeout){function getList(){return self.Items.getList(self.paginate,self.query).then(function(data){return self.items=data,self.items})}function searchItem(searchStr){return self.query=searchStr?{name:searchStr.substring(0,10)}:{},self.paginate.page=0,getList().then(function(){console.log("Activated list View")})}function saveField(item,field){var o={_id:item._id};return o[field]=item[field],self.Items.save({update:field},o).$promise.then(function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})}function createItem(){self.Items.create().then(function(res){return self.newItem={},self.newItem.name=res,self.Items.save(self.newItem).$promise}).then(function(res){self.newItem._id=res.id,self.newItem.url=res.url,self.paginate.page=0,getList(self.paginate)}).then(function(){var id=self.newItem._id;delete self.newItem._id,setTimeout(function(){$state.go("frame.groupStuffs.item",{id:id})},100)}).catch(function(err){err&&exception.catcher("создание группы")(err)})}function deleteItem(item){var folder="images/"+global.get("store").val.subDomain+"/GroupStuffs/"+item.url;Confirm("удалить???").then(function(){return self.Items.delete({_id:item._id}).$promise}).then(function(){return self.getList()}).then(function(){Photo.deleteFolder("GroupStuffs",folder)}).catch(function(err){err&&(err=err&&err.data||err)&&exception.catcher("удаление объекта")(err)})}function dropCallback(item){var i=0;return setTimeout(function(){self.items.reduce(function(p,item){return p.then(function(){return i++,item.index=i,saveField(item,"index")})},$q.when(!0)).then(function(){console.log(self.items.map(function(el){return el.index}))})},50),item}var self=this;self.mobile=global.get("mobile").val,self.global=global,self.$state=$state,self.Items=GroupStuffs,self.query={},self.paginate={page:0,rows:20,totalItems:0},self.newItem={name:"имя мастера"},self.getList=getList,self.saveField=saveField,self.searchItem=searchItem,self.deleteItem=deleteItem,self.createItem=createItem,self.dropCallback=dropCallback,function(){getList().then(function(){})}()}angular.module("gmall.services").directive("groupStuffsList",groupStuffsListDirective),groupStuffsListCtrl.$inject=["GroupStuffs","$state","global","Confirm","$q","exception","Photo","$timeout"]}(),function(){function groupStuffsItemDirective(){return{scope:{},restrict:"E",bindToController:!0,controller:groupStuffsItemCtrl,controllerAs:"$ctrl",templateUrl:"components/CONTENT/groupStuffs/groupStuffsItem.html"}}function groupStuffsItemCtrl(GroupStuffs,$stateParams,$q,$uibModal,global,exception,Stuff,Photo,$scope,$timeout,Confirm,Category,Master,$fileUpload){function activate(){$q.when().then(function(){return Master.getList()}).then(function(ms){self.masters=ms}).then(function(){return getItem($stateParams.id)}).catch(function(err){err=err.data||err,exception.catcher("получение объекта")(err)})}function clearTagsInFilters(){global.get("filters").val.forEach(function(f){f.tags.forEach(function(t){t.set=!1})})}function getItem(id){return self.Items.getItem(id).then(function(data){return data.tags&&data.tags.length&&(data.tags=data.tags.map(function(t){return t._id})),data.category&&global.get("categoriesO").val[data.category]&&(data.category=global.get("categoriesO").val[data.category]),clearTagsInFilters(),data.category&&data.category.filters&&data.category.filters.length&&data.category.filters.forEach(function(f){var _f=global.get("filters").val.getOFA("_id",f);_f&&(_f.tags.forEach(function(t){data.tags.indexOf(t._id)>-1&&(t.set=!0)}),self.filters.push(_f))}),self.item=data,self.item}).catch(function(err){return console.log(err),$q.reject(err)})}function saveField(field,defer){console.log(field),defer=defer?defer:100,setTimeout(function(){var o={_id:self.item._id};if("stuffs"==field)var value=self.item.stuffs.map(function(s){return s._id});else if("category"==field)if(self.item.category&&self.item.category._id)var value=self.item.category._id;else var value=null;else var value=self.item[field];o[field]=value;var query={update:field};self.Items.save(query,o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})},defer)}function saveFieldStuff(stuff,field){setTimeout(function(){var o={_id:stuff._id},value=stuff[field];o[field]=value;var query={update:field};Stuff.save(query,o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})},100)}function addItemInBlock(index){var model=Stuff;$q.when().then(function(){return model.select()}).then(function(item){item.img=item.gallery[0]&&item.gallery[0].thumb?item.gallery[0].thumb:null,self.item.stuffs||(self.item.stuffs=[]),void 0===index?self.item.stuffs.push(item):(self.item.stuffs[index].groupStuffs=null,saveFieldStuff(self.item.stuffs[index],"groupStuffs"),self.item.stuffs[index]=item),item.groupStuffs=self.item._id,saveFieldStuff(item,"groupStuffs"),saveField("stuffs")}).catch(function(err){err&&exception.catcher("выбор товара")(err)})}function movedItem(item){return $timeout(function(){saveField("stuffs")},100),item}function deleteItemFromBlock($index){Confirm("удалить?").then(function(){self.item.stuffs[$index].groupStuffs=null,saveFieldStuff(self.item.stuffs[$index],"groupStuffs"),self.item.stuffs.splice($index,1),saveField("stuffs")})}function changeItem($index){addItemInBlock($index)}function changeCategory(){$q.when().then(function(){var categoryId=self.item.category&&self.item.category._id?self.item.category._id:null;return Category.select(categoryId,null,null,"groupStuffs")}).then(function(selectedCategory){console.log(selectedCategory),self.item.link=selectedCategory.linkData.groupUrl+"/"+selectedCategory.linkData.categoryUrl+"/"+self.item.url,saveField("link"),self.item.category=selectedCategory,saveField("category"),self.item.tags=[],self.filters=[],saveField("tags"),clearTagsInFilters(),self.item.category.filters&&self.item.category.filters.length&&self.item.category.filters.forEach(function(f){var _f=global.get("filters").val.getOFA("_id",f);_f&&self.filters.push(_f)})}).catch(function(err){err&&exception.catcher("выбор категории")(err)})}function deleteCategory(){self.item.category=null,saveField("category"),self.item.tags=[],self.filters=[],saveField("tags"),clearTagsInFilters()}function selectFilter(filter){$uibModal.open({animation:!0,templateUrl:"components/selectCategoryModal/selectFilterModal.html",controller:function($scope,$uibModalInstance,filter){$scope.filter=filter,$scope.allTags=!1,$scope.changeAllTags=function(criteria){filter.tags.forEach(function(tag){tag.set=criteria})},$scope.cancel=function(){$uibModalInstance.dismiss()}},size:"sm",resolve:{filter:function(){return filter}}}).result.then(function(selectedTags){},function(){self.item.tags=[],self.filters.length&&self.filters.forEach(function(filter){filter.tags.forEach(function(tag){tag.set&&self.item.tags.push(tag._id)})}),saveField("tags")})}function loadVideo(field){self.item[field]||(self.item[field]={link:""}),$q.when().then(function(){return self.uploadVideoUrl="/api/collections/GroupStuffs/uploadVideoFile?collectionName=GroupStuffs",$fileUpload.fileUpload(self.uploadVideoUrl,field+".link",self.item.url)}).then(function(res){if(console.log(res),res&&res.length){var a=[];("video1"==field||"video"==field)&&res[0].data&&res[0].data.img&&(self.item[field]&&self.item[field].link&&a.push(self.item[field].link),self.item[field].link=res[0].data.img,saveField(field)),a.length&&Photo.deleteFiles(self.type,a)}}).catch(function(err){console.log(err)})}function deleteVideo(field){Confirm("Удалить?").then(function(){return Photo.deleteFiles(self.type,[self.item[field].link])}).then(function(response){self.item[field]=null,saveField(filed)},function(err){console.log(err)})}var self=this;self.Items=GroupStuffs,self.type="GroupStuffs",self.item={},self.mobile=global.get("mobile").val,self.global=global,self.moment=moment,self.block="desc",self.filters=[],self.saveField=saveField,self.addItemInBlock=addItemInBlock,self.movedItem=movedItem,self.deleteItemFromBlock=deleteItemFromBlock,self.changeItem=changeItem,self.changeCategory=changeCategory,self.deleteCategory=deleteCategory,self.changeBlock=function(block){console.log(block),self.block=block},self.selectFilter=selectFilter,self.loadVideo=loadVideo,self.deleteVideo=deleteVideo,activate(),$scope.$on("changeLang",function(){activate()})}angular.module("gmall.directives").directive("groupStuffsItem",groupStuffsItemDirective),groupStuffsItemCtrl.$inject=["GroupStuffs","$stateParams","$q","$uibModal","global","exception","Stuff","Photo","$scope","$timeout","Confirm","Category","Master","$fileUpload"]}(),function(){function itemListDirective(){return{scope:{},bindToController:!0,controller:itemListCtrl,controllerAs:"$ctrl",templateUrl:"components/CONTENT/workplace/workplaceList.html"}}function workplaceItemDirective(){return{scope:{},restrict:"E",bindToController:!0,controller:ItemCtrl,controllerAs:"$ctrl",templateUrl:"components/CONTENT/workplace/workplaceItem.html"}}function itemListCtrl(Items,$state,global,Confirm,$q,exception,Photo,$timeout){function getList(){return self.Items.getList(self.paginate,self.query).then(function(data){return self.items=data,self.items})}function searchItem(searchStr){return self.query=searchStr?{name:searchStr.substring(0,10)}:{},self.paginate.page=0,getList().then(function(){console.log("Activated list View")})}function saveField(item,field){var o={_id:item._id};o[field]=item[field],self.Items.save({update:field},o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})}function createItem(){self.Items.create().then(function(res){return self.newItem={},self.newItem.name=res,self.Items.save(self.newItem).$promise}).then(function(res){self.newItem._id=res.id,self.newItem.url=res.url,self.paginate.page=0,getList(self.paginate)}).then(function(){var id=self.newItem._id;delete self.newItem._id,setTimeout(function(){$state.go("frame.workplace.item",{id:id})},100)}).catch(function(err){err&&exception.catcher("создание мастера")(err)})}function cloneItem(item){var name;self.Items.create().then(function(res){return name=res,self.Items.getItem(item._id)}).then(function(master){return self.newItem=angular.copy(master),self.newItem.name=name,self.newItem.nameL={},delete self.newItem._id,delete self.newItem.__v,delete self.newItem.url,console.log(self.newItem),self.newItem.blocks.forEach(function(block){delete block.img,delete block._id,"stuffs"==block.type&&block.stuffs&&block.stuffs.length&&(block.stuffs=block.stuffs.map(function(s){return s._id})),block.imgs=[]}),self.Items.save(self.newItem).$promise}).then(function(res){self.newItem._id=res.id,self.newItem.url=res.url,self.paginate.page=0,getList(self.paginate)}).then(function(){var id=self.newItem._id;delete self.newItem._id,setTimeout(function(){$state.go("frame.workplace.item",{id:id})},100)}).catch(function(err){err&&exception.catcher("создание объекта")(err)})}function deleteItem(item){var folder="images/"+global.get("store").val.subDomain+"/Workplace/"+item.url;Confirm("удалить???").then(function(){return self.Items.delete({_id:item._id}).$promise}).then(function(){return self.getList()}).then(function(){Photo.deleteFolder("Workplace",folder)}).catch(function(err){err&&(err=err&&err.data||err)&&exception.catcher("удаление объекта")(err)})}function dropCallback(item){var i=0;return setTimeout(function(){self.items.reduce(function(p,item){return p.then(function(){return i++,item.index=i,saveField(item,"index")})},$q.when(!0)).then(function(){console.log(self.items.map(function(el){return el.index}))})},50),item}var self=this;self.mobile=global.get("mobile").val,self.global=global,self.$state=$state,self.Items=Items,self.query={},self.paginate={page:0,rows:20,totalItems:0},self.newItem={name:"наименование"},self.getList=getList,self.saveField=saveField,self.searchItem=searchItem,self.deleteItem=deleteItem,self.createItem=createItem,self.dropCallback=dropCallback,self.cloneItem=cloneItem,function(){getList().then(function(){})}()}function ItemCtrl(Items,$stateParams,$q,$uibModal,global,exception,Stuff,Photo,$scope,$timeout,Confirm,SetCSS){function activate(){return getItem($stateParams.id).then(function(){}).catch(function(err){err=err.data||err,exception.catcher("получение объекта")(err)})}function getItem(id){return self.Items.getItem(id).then(function(data){data&&!data.blocks&&(data.blocks=[],saveField("blocks",[]));var bl=data.blocks.filter(function(b){return b});return bl.length!=data.blocks.length&&(saveField("blocks",bl),data.blocks=bl),data.blocks.forEach(function(b,i){"stuffs"==b.type&&b.stuffs.length&&(b.stuffs=b.stuffs.map(function(s){return s._is||s})),b.i=i}),data.blocks.sort(function(a,b){return a.index-b.index}),self.item=data,self.item}).catch(function(err){return console.log(err),$q.reject(err)})}function setStyles(block,idx){$q.when().then(function(){return SetCSS.setStyles(block)}).then(function(){block.elements&&saveField("blocks."+block.i+".elements",block.elements),block.blockStyle&&saveField("blocks."+block.i+".blockStyle",block.blockStyle)})}function saveField(field,value,defer,indexImgs){field.indexOf("index")>-1&&(self.item.blocks.sort(function(a,b){return a.index-b.index}),self.item.blocks.forEach(function(b,i){b.i=i}),value=self.item.blocks,field="blocks"),defer=defer?defer:100,setTimeout(function(){"date"==field&&(value=new Date(self.item[field]));var o={_id:self.item._id};o[field]=value;var query={update:field};field.indexOf(".imgs")>-1&&void 0!==indexImgs&&(query.indexImgs=indexImgs),self.Items.save(query,o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})},defer)}function refreshBlocks(){return self.Items.getItem($stateParams.id).then(function(data){data.blocks.forEach(function(b,i){b.i=i,b.desc||(b.desc=""),b.descL||(b.descL={}),b.desc1||(b.desc1=""),b.desc1L||(b.desc1L={}),b.name||(b.name=""),b.nameL||(b.nameL={}),b.name1||(b.name1=""),b.name1L||(b.name1L={}),b.videoLink||(b.videoLink="")}),self.item.blocks=data.blocks})}function addBlock(type){if(type){return $scope.$broadcast("addNewBlock",{type:type}),void(self.newBlock=null)}}function deleteBlock(block,index){var o={_id:self.item._id},update={update:"_id_id",embeddedName:"blocks"};o.id=block.id,update.embeddedPull=!0,Confirm("потверждаете?").then(function(){return self.item.blocks.splice(index,1),block._id?(o._id_id=block._id,update={update:"_id_id",embeddedName:"blocks"},update.embeddedPull=!0):(update={update:"blocks"},o.blocks=self.item.blocks),self.Items.save(update,o).$promise}).then(function(res){var images=[];if(block.img&&images.push(block.img),block.video&&images.push(block.video),block.videoCover&&images.push(block.videoCover),block.imgs&&block.imgs.length&&block.imgs.forEach(function(im){im.img&&images.push(im.img)}),images.length)return Photo.deleteFiles("Stat",images)}).then(function(){activate()})}function deleteSlide(block,index){Photo.deleteFiles("Workplace",[block.imgs[index].img]).then(function(response){block.imgs.splice(index,1),self.saveField("blocks."+block.i+".imgs",block.imgs,null,index)},function(err){console.log(err)})}function editSlide(block,index){$uibModal.open({animation:!0,templateUrl:"components/CONTENT/workplace/editSlide.html",controller:function(slide,$uibModalInstance){var self=this;self.item=slide,self.ok=function(){console.log(self.item),$uibModalInstance.close(self.item)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl",size:"lg",resolve:{slide:function(){return block.imgs[index]}}}).result.then(function(slide){self.saveField("blocks."+block.i+".imgs",block.imgs)},function(){})}function addItemInBlock(block,$index){var model;switch(block.type){case"stuffs":model=Stuff;break;case"campaign":model=Campaign;break;case"filterTags":model=FilterTags;break;case"brandTags":model=BrandTags;break;case"brands":model=Brans;break;case"categories":model=Category}$q.when().then(function(){return model.select()}).then(function(item){if("stuffs"==block.type&&block.stuffs&&block.stuffs.length&&block.stuffs.some(function(s){return s&&s._id?s._id==item._id:s==item._id}))throw"такой объект уже есть";block[block.type]||(block[block.type]=[]);var img,link;switch(name=item.name,block.type){case"stuffs":img=item.gallery[0]&&item.gallery[0].thumb?item.gallery[0].thumb:null,link=item.link,item.artikul&&(item.name+=" "+item.artikul);break;case"campaign":img=item.img?item.img:null,link="campaign/"+item.url;break;case"filterTags":img=item.img?item.img:null,link="/group/category?queryTag="+item.url;break;case"brandTags":img=item.img?item.img:null,link="/group/category?brandTag="+item.url;break;case"brands":img=item.img?item.img:null,link="/group/category?brand="+item.url;break;case"categories":img=item.img?item.img:null,link="/group/"+item.url}void 0!==$index?block.imgs[$index]={name:item.name,img:img,link:link,_id:item._id}:(block.imgs||(block.imgs=[]),block.imgs.push({name:item.name,img:img,link:link,_id:item._id})),saveField("blocks."+block.i+".imgs",block.imgs),"stuffs"==block.type&&(block.stuffs=block.imgs.map(function(img){return img._id}),saveField("blocks."+block.i+".stuffs",block.stuffs))}).catch(function(err){err&&exception.catcher("добавление")(err)})}
function movedItem(block,item){return $timeout(function(){saveField("blocks."+block.i+".imgs",block.imgs),"stuffs"==block.type&&(block.stuffs=block.imgs.map(function(img){return img._id}),saveField("blocks."+block.i+".stuffs",block.stuffs))},100),item}function deleteItemFromBlock(block,$index){block.imgs.splice($index,1),saveField("blocks."+block.i+".imgs",block.imgs),"stuffs"==block.type&&(block.stuffs=block.imgs.map(function(img){return img._id}),saveField("blocks."+block.i+".stuffs",block.stuffs))}function changeItem(block,$index){addItemInBlock(block,$index)}var self=this;self.Items=Items,self.type="Workplace",self.item={},self.mobile=global.get("mobile").val,self.global=global,self.listOfBlocksForWorkplacePage=listOfBlocksForWorkplacePage,self.listOfBlocks=listOfBlocksForWorkplacePage,console.log(self.listOfBlocksForWorkplacePage),console.log(self.listOfBlocks),self.moment=moment,self.saveField=saveField,self.setStyles=setStyles,self.addBlock=addBlock,self.refreshBlocks=refreshBlocks,self.deleteBlock=deleteBlock,self.deleteSlide=deleteSlide,self.editSlide=editSlide,self.addItemInBlock=addItemInBlock,self.movedItem=movedItem,self.deleteItemFromBlock=deleteItemFromBlock,self.changeItem=changeItem,activate(),$scope.$on("changeLang",function(){activate()}),global.get("store").val.template.workplace||(global.get("store").val.template.workplace={parts:[]});global.get("store").val.template.workplace.parts.filter(function(el){return el.is}).map(function(el){return el.name})}function serviceFoo($resource,$uibModal,$q,global){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}paginate||(paginate={page:0});var data={perPage:paginate.rows,page:paginate.page,query:query};return global.get("crawler")&&global.get("crawler").val&&(data.subDomain=global.get("store").val.subDomain),Items.query(data).$promise.then(getListComplete)}function getItem(id){function getItemComplete(response){return response&&response.blocks&&response.blocks.length&&response.blocks.forEach(function(b){"stuffs"==b.type&&(b.stuffs&&b.stuffs.length?b.imgs=b.stuffs.map(function(s){return s.gallery&&s.gallery.length&&s.gallery[0].img&&(s.img=s.gallery[0].img),s}):b.imgs=[])}),response}return Items.get({_id:id}).$promise.then(getItemComplete)}function create(){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/CONTENT/workplace/createItem.html",controller:function($uibModalInstance){var self=this;self.name="",self.ok=function(){$uibModalInstance.close(self.name)},self.cancel=function(){$uibModalInstance.dismiss()}},controllerAs:"$ctrl"}).result.then(function(name){name?resolve(name.substring(0,50)):reject()},function(err){reject(err)})})}var Items=$resource("/api/collections/Workplace/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,query:Items.query,get:Items.get,save:Items.save,delete:Items.delete,create:create}}angular.module("gmall.services").service("Workplace",serviceFoo),angular.module("gmall.directives").directive("workplaceList",itemListDirective).directive("workplaceItem",workplaceItemDirective),itemListCtrl.$inject=["Workplace","$state","global","Confirm","$q","exception","Photo","$timeout"],ItemCtrl.$inject=["Workplace","$stateParams","$q","$uibModal","global","exception","Stuff","Photo","$scope","$timeout","Confirm","SetCSS"],serviceFoo.$inject=["$resource","$uibModal","$q","global"]}(),function(){function campaignService($resource,$uibModal,$q){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return console.log("XHR Failed for getNews."+error),$q.reject(error)}return Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete).catch(getListFailed)}function getItem(id){function getItemComplete(response){return response}function getItemFailed(error){return $q.reject(error)}return Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}function create(){return $q(function(resolve,reject){var options={animation:!0,restrict:"E",templateUrl:"components/PROMO/campaign/createCampaign.html",controller:function($uibModalInstance){var self=this;self.name="",self.ok=function(){!self.name||self.name.length<3||$uibModalInstance.close(self.name)},self.cancel=function(){$uibModalInstance.dismiss()}},controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(name){name?resolve(name.substring(0,100)):reject("empty")},function(err){reject()})})}function selectItem(){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/PROMO/campaign/selectItem.html",controller:function(Campaign,$uibModalInstance){var self=this;self.stuffs=[],self.name="";var query,paginate={page:0,rows:30,items:0};self.search=function(name){name.length<3||(query={name:name},Campaign.getList(paginate,query).then(function(res){self.items=res}))},self.selectItem=function(item){$uibModalInstance.close(item)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl",size:"lg"}).result.then(function(stuff){resolve(stuff)},function(){reject()})})}var Items=$resource("/api/collections/Campaign/:_id",{_id:"@_id"});return{get:Items.get,getList:getList,getItem:getItem,save:Items.save,delete:Items.delete,create:create,select:selectItem}}angular.module("gmall.services").service("Campaign",campaignService),campaignService.$inject=["$resource","$uibModal","$q"]}(),function(){function reviewBlock(){return{templateUrl:"components/blocks/reviewBlock.html"}}function subscriptionBlock(){return{templateUrl:"components/blocks/subscriptionBlock.html"}}function subscriptionAddBlock(){return{templateUrl:"components/blocks/subscriptionAddBlock.html"}}function undefinedBlock(){return{templateUrl:"components/blocks/undefinedBlock.html"}}function nameBlock(){return{templateUrl:"components/blocks/nameBlock.html"}}function positionBlock(){return{templateUrl:"components/blocks/positionBlock.html"}}function videoLinkBlock(){return{templateUrl:"components/blocks/videoLinkBlock.html"}}function textBlock(){return{templateUrl:"components/blocks/textBlock.html"}}function text2Block(){return{templateUrl:"components/blocks/text2Block.html"}}function bannerBlock(){return{templateUrl:"components/blocks/bannerBlock.html"}}function banner1Block(){return{templateUrl:"components/blocks/banner1Block.html"}}function sliderBlock(){return{templateUrl:"components/blocks/sliderBlock.html"}}function videoBlock(){return{templateUrl:"components/blocks/videoBlock.html"}}function video1Block(){return{templateUrl:"components/blocks/video1Block.html"}}function video2Block(){return{templateUrl:"components/blocks/video2Block.html"}}function mapBlock(){return{templateUrl:"components/blocks/mapBlock.html"}}function map1Block(){return{templateUrl:"components/blocks/map1Block.html"}}function map2Block(){return{templateUrl:"components/blocks/map2Block.html"}}function mastersBlock(){return{templateUrl:"components/blocks/mastersBlock.html"}}function feedbackBlock(){return{templateUrl:"components/blocks/feedbackBlock.html"}}function feedback1Block(){return{templateUrl:"components/blocks/feedback1Block.html"}}function feedback2Block(){return{templateUrl:"components/blocks/feedback2Block.html"}}function itemsBlock(){return{templateUrl:"components/blocks/itemsBlock.html"}}function dateBlock(){return{templateUrl:"components/blocks/dateBlock.html"}}function snBlock(){return{templateUrl:"components/blocks/sn.html"}}function calendarBlock(){return{templateUrl:"components/blocks/calendarBlock.html"}}function scheduleBlock(){return{templateUrl:"components/blocks/sheduleBlock.html"}}function callBlock(){return{templateUrl:"components/blocks/callBlock.html"}}function buttonBlock(){return{templateUrl:"components/blocks/buttonBlock.html"}}function calendarBlock(){return{templateUrl:"components/blocks/calendarBlock.html"}}function videolinkBlock(){return{templateUrl:"components/blocks/videolinkhpBlock.html"}}function pricegoodsBlock(){return{templateUrl:"components/blocks/pricegoodsBlock.html"}}function priceservicesBlock(){return{templateUrl:"components/blocks/priceservicesBlock.html"}}function scheduleplaceBlock(){return{templateUrl:"components/blocks/scheduleplaceBlock.html"}}function blockTextEdit(){return{templateUrl:"components/blocks/blockTextEdit.html"}}function blockText1Edit(){return{templateUrl:"components/blocks/blockText1Edit.html"}}function blockMediaEdit(){return{templateUrl:"components/blocks/blockMediaEdit.html"}}function blockMedia1Edit(){return{templateUrl:"components/blocks/blockMedia1Edit.html"}}function blocksEdit(){return{scope:{item:"=",type:"@",activeSide:"=",refreshBlocks:"&"},restrict:"EA",bindToController:!0,controller:blocksEditCtrl,controllerAs:"$ctrl",templateUrl:"components/blocks/blocksEdit.html"}}function blocksEditCtrl($http,$uibModal,HomePage,$q,global,Photo,$fileUpload,SetCSS,Blocks,Confirm,EditModelData,Filters,Brands,Category,FilterTags,BrandTags,Stuff,News,Campaign,Info,GroupStuffs,exception,$timeout,Master,Stat,Additional,$scope,$rootScope,Workplace){function filterBlocks(item){return!self.activeSide||(item.position==self.activeSide||void 0)}function getBlockType(type){return"scheduleplace"==type?"stuffs":type}function getNameBlock(type){return listOfBlocksForMainPage[type]?listOfBlocksForMainPage[type]:type}function saveField(field,value){field.indexOf("index")>-1&&(self.item.blocks.sort(function(a,b){return a.index-b.index}),self.item.blocks.forEach(function(b,i){b.i=i}),value=angular.copy(self.item.blocks),value.forEach(function(b){"object"==typeof b.videoLink&&(b.videoLink=""),delete b.$$hashKey,delete b.__v}),field="blocks");var defer=defer?defer:100;setTimeout(function(){"date"==field&&(value=new Date(self.item[field]));var o={_id:self.item._id};o[field]=value;var query={update:field};field.indexOf(".imgs")>-1&&"undefined"!=typeof indexImgs&&(query.indexImgs=indexImgs),self.Items.save(query,o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500),"blocks"==field&&self.refreshBlocks()},function(err){err&&exception.catcher("save "+field)(err)})},defer)}function loadPhoto(block,field){$q.when().then(function(){return"video"==field?$fileUpload.fileUpload(self.uploadVideoUrl,field,self.item.url):$fileUpload.fileUpload(self.uploadUrl,field,self.item.url)}).then(function(res){if(res&&res.length){var a=[];("img"==field||"videoCover"==field||"video"==field)&&res[0].data&&res[0].data.img?(block[field]&&a.push(block[field]),block[field]=res[0].data.img,saveField("blocks."+block.i+"."+field,block[field])):"imgs"==field&&(block.imgs||(block.imgs=[]),res.forEach(function(r){if(console.log(r.data),r.data.imgs&&r.data.imgs[0]&&r.data.imgs[0].img){var o={img:r.data.imgs[0].img,index:block.imgs.length,active:!0};block.imgs.push(o)}}),saveField("blocks."+block.i+".imgs",block.imgs)),a.length&&Photo.deleteFiles(self.type,a)}}).catch(function(err){console.log(err)})}function setStyles(block,idx){$q.when().then(function(){return SetCSS.setStyles(block)}).then(function(){saveField("blocks."+block.i+".blockStyle",block.blockStyle),block.elements&&saveField("blocks."+block.i+".elements",block.elements),block.mobile&&saveField("blocks."+block.i+".mobile",block.mobile),block.tablet&&saveField("blocks."+block.i+".tablet",block.tablet)})}function getBlockConfig(block){$q.when().then(function(){return Blocks.getBlockConfig(block,self.item.url,self.type)}).then(function(){saveField("blocks."+block.i,block)})}function deleteBlock(block,idx){var o={_id:self.item._id},update={update:"_id_id",embeddedName:"blocks"};o.id=block.id,update.embeddedPull=!0,Confirm("потверждаете?").then(function(){return $rootScope.$emit("$stateChangeStartToStuff"),block._id?(o._id_id=block._id,update={update:"_id_id",embeddedName:"blocks"},update.embeddedPull=!0):(update={update:"blocks"},o.blocks=self.item.blocks),$q(function(res,rej){self.Items.save(update,o,function(){res()},function(err){rej(err)})})}).then(function(){return self.refreshBlocks()}).then(function(res){$rootScope.$emit("$stateChangeEndToStuff");var images=[];if(block.img&&images.push(block.img),block.video&&images.push(block.video),block.videoCover&&images.push(block.videoCover),block.imgs&&block.imgs.length&&block.imgs.forEach(function(im){im.img&&images.push(im.img)}),images.length)return Photo.deleteFiles("Stat",images)}).catch(function(err){$rootScope.$emit("$stateChangeEndToStuff"),console.log(err),exception.catcher("delete block")(err)})}function addNewBlock(type){try{var index=1;self.item.blocks.forEach(function(block){block.index&&block.index>=index&&(index=block.index+1)});var o={_id:self.item._id,type:type,index:index,id:Date.now()},update={update:"type index id",embeddedName:"blocks",embeddedPush:!0};o.imgs=[],update.update+=" imgs",self.activeSide&&(update.update+=" position",o.position=self.activeSide)}catch(err){console.log(err)}$q.when().then(function(){return $rootScope.$emit("$stateChangeStartToStuff"),$q(function(res,rej){self.Items.save(update,o,function(){res()},function(err){rej(err)})})}).then(function(res){return self.refreshBlocks()}).then(function(){$rootScope.$emit("$stateChangeEndToStuff")}).catch(function(err){$rootScope.$emit("$stateChangeEndToStuff"),err&&exception.catcher("добавление блока")(err)})}function cloneBlock(block){var bl=angular.copy(block),index=1;self.item.blocks.forEach(function(block){block.index&&block.index>=index&&(index=block.index+1)});var o={_id:self.item._id,index:index,id:Date.now()},update={update:"index id",embeddedName:"blocks",embeddedPush:!0};for(var key in bl)"type"!=key&&"is"!=key&&"nameAnimate"!=key&&"name1Animate"!=key&&"nameAnimateDelay"!=key&&"audio"!=key&&"templ"!=key&&"style"!=key&&"blockStyle"!=key&&"elements"!=key&&"mobile"!=key&&"tablet"!=key&&"animate"!=key&&"animateRepeat"!=key&&"duration"!=key&&"position"!=key||!bl[key]||(update.update+=" "+key,o[key]=bl[key]);$q.when().then(function(){return self.Items.save(update,o).$promise}).then(function(res){self.refreshBlocks()}).catch(function(err){err&&exception.catcher("добавление блока")(err)})}function deleteSlide(block,index){Confirm("Удалить?").then(function(){return Photo.deleteFiles(self.type,[block.imgs[index].img])}).then(function(response){block.imgs.splice(index,1),block.imgs.forEach(function(slide,i){slide.index=i}),saveField("blocks."+block.i+".imgs",block.imgs)},function(err){console.log(err)})}function editSlide(block,index){$uibModal.open({animation:!0,templateUrl:"components/blocks/editSlide.html",controller:function(slide,$uibModalInstance,global){var self=this;self.item=slide,self.animationTypes=animationTypes,self.lang=global.get("store").val.lang,self.ok=function(){$uibModalInstance.close(self.item)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl",size:"lg",resolve:{slide:function(){return block.imgs[index]}}}).result.then(function(slide){self.saveField("blocks."+block.i+".imgs",block.imgs)},function(){})}function deleteImg(block,field){Confirm("Удалить?").then(function(){return Photo.deleteFiles(self.type,[block[field]])}).then(function(response){block[field]=null,saveField("blocks."+block.i+"."+field,block[field])},function(err){console.log(err)})}function changeSlidePhoto(block,idx){console.log(idx),$q.when().then(function(){return $fileUpload.fileUpload(self.uploadUrl,"img",self.item.url)}).then(function(res){if(res&&res.length){var a=[];res[0].data&&res[0].data.img&&(block.imgs[idx].img&&a.push(block.imgs[idx].img),block.imgs[idx].img=res[0].data.img,saveField("blocks."+block.i+".imgs",block.imgs)),a.length&&Photo.deleteFiles(self.type,a)}}).catch(function(err){exception.catcher("load photo")(err),console.log(err)})}function movedItemInSlider(block){$timeout(function(){block.imgs.forEach(function(item,i){item.index=i}),saveField("blocks."+block.i+".imgs",block.imgs)},300)}function movedItemInCollection(block){$timeout(function(){var data=block[block.type].map(function(item){return item._id});saveField("blocks."+block.i+"."+block.type,data)},300)}function deleteCollection(block,idx){var type=block.type;"scheduleplace"==block.type&&(type="stuffs"),Confirm("Удалить?").then(function(){block[type].splice(idx,1);var data=block[type].map(function(item){return item._id});self.saveField("blocks."+block.i+"."+type,data)})}function setCollection(block,idx){var field=block.type;"scheduleplace"==field&&(field="stuffs"),block[field]||(block[field]=[]);var Items,collections=block[field];void 0===idx&&(idx=block[field].length),"brands"==field?Items=Brands:"categories"==field?Items=Category:"filterTags"==field?Items=FilterTags:"filters"==field?Items=Filters:"brandTags"==field?Items=BrandTags:"stuffs"==field?Items=Stuff:"groupStuffs"==field?Items=GroupStuffs:"news"==field?Items=News:"campaign"==field?Items=Campaign:"info"==field&&(Items=Info),$q.when().then(function(){return Items.select({actived:!0})}).then(function(item){collections[idx]=item;var data=block[field].map(function(item){return item._id});console.log(field),self.saveField("blocks."+block.i+"."+field,data)}).catch(function(){console.log("dismiss")})}var self=this;self.item.blocks&&self.item.blocks.forEach&&self.item.blocks.forEach(function(b){b.desc||(b.desc=""),b.descL||(b.descL={}),b.desc1||(b.desc1=""),b.desc1L||(b.desc1L={}),b.name||(b.name=""),b.nameL||(b.nameL={}),b.name1||(b.name1=""),b.name1L||(b.name1L={}),b.videoLink||(b.videoLink="")}),self.item.date&&(self.item.date=new Date(self.item.date)),self.item.blocks||(self.item.blocks=[]),"HomePage"==self.type?(self.Items=HomePage,self.uploadUrl="/api/collections/Photo/fileUpload?collectionName=HomePage",self.uploadVideoUrl="/api/collections/Photo/uploadVideoFile?collectionName=HomePage"):"Stuff"==self.type?(self.Items=Stuff,self.uploadUrl="/api/collections/Photo/fileUpload?collectionName=Stuff",self.uploadVideoUrl="/api/collections/Photo/uploadVideoFile?collectionName=Stuff"):"GroupStuffs"==self.type?(self.Items=GroupStuffs,self.uploadUrl="/api/collections/GroupStuffs/fileUpload?collectionName=GroupStuffs",self.uploadVideoUrl="/api/collections/GroupStuffs/uploadVideoFile?collectionName=GroupStuffs"):"Master"==self.type?(self.Items=Master,self.uploadUrl="/api/collections/Photo/fileUpload?collectionName=Master",self.uploadVideoUrl="/api/collections/Photo/uploadVideoFile?collectionName=Master"):"News"==self.type?(self.Items=News,self.uploadUrl="/api/collections/Photo/fileUpload?collectionName=News",self.uploadVideoUrl="/api/collections/Photo/uploadVideoFile?collectionName=News"):"Stat"==self.type?(self.Items=Stat,self.uploadUrl="/api/collections/Photo/fileUpload?collectionName=Stat",self.uploadVideoUrl="/api/collections/Photo/uploadVideoFile?collectionName=Stat"):"Additional"==self.type?(self.Items=Additional,self.uploadUrl="/api/collections/Photo/fileUpload?collectionName=Additional",self.uploadVideoUrl="/api/collections/Photo/uploadVideoFile?collectionName=Additional"):"Category"==self.type?(self.Items=Category,self.uploadUrl="/api/collections/Photo/fileUpload?collectionName=Category",self.uploadVideoUrl="/api/collections/Photo/uploadVideoFile?collectionName=Category"):"BrandTags"==self.type&&(self.Items=BrandTags,self.uploadUrl="/api/collections/Photo/fileUpload?collectionName=BrandTags",self.uploadVideoUrl="/api/collections/Photo/uploadVideoFile?collectionName=BrandTags"),self.global=global,self.listOfBlocks=listOfBlocksForAll,self.animationTypes=animationTypes,self.animationTypesForSlider=["sliceDown","sliceDownLeft","sliceUp","sliceUpLeft","sliceUpDown","sliceUpDownLeft","fold","fade","random","slideInRight","slideInLeft","boxRandom","boxRain","boxRainReverse","boxRainGrow","boxRainGrowReverse"],self.blockEditPermission={},self.blockSettingPermission={},self.blockEditTextPermission={},self.blockEditText1Permission={},self.blockEditMediaPermission={},self.blockEditMedia1Permission={},self.tinymceOptions={plugins:"code print preview fullpage searchreplace autolink directionality  visualblocks visualchars fullscreen image link media template codesample table charmap hr pagebreak nonbreaking anchor toc insertdatetime advlist lists textcolor wordcount  imagetools  contextmenu colorpicker textpattern help",toolbar:"code | formatselect | bold italic strikethrough forecolor backcolor | link | alignleft aligncenter alignright alignjustify  | numlist bullist outdent indent  | removeformat | code "},self.filterBlocks=filterBlocks,self.getBlockType=getBlockType,self.getNameBlock=getNameBlock,self.saveField=saveField,self.loadPhoto=loadPhoto,self.setStyles=setStyles,self.getBlockConfig=getBlockConfig,self.deleteBlock=deleteBlock,self.cloneBlock=cloneBlock,$scope.$on("addNewBlock",function(e,data){data&&data.type&&addNewBlock(data.type)}),self.deleteSlide=deleteSlide,self.editSlide=editSlide,self.deleteImg=deleteImg,self.deleteCollection=deleteCollection,self.setCollection=setCollection,self.changeSlidePhoto=changeSlidePhoto,self.movedItemInSlider=movedItemInSlider,self.movedItemInCollection=movedItemInCollection}function blocks($http,$uibModal,HomePage,$q,global,Photo){function getBlockConfig(block,itemUrl,model){return $q.when().then(function(){return $http.get("/api/getBlocksForAll/"+block.type)}).then(function(res){if(res.data)return selectItemFromList(res.data)}).then(function(b){if(b){if(b.allData){if(block.img)Photo.deleteFiles(model,[block.img]);else if(block.video)Photo.deleteFiles(model,[block.video]);else if(block.imgs&&"stuffs"!=block.type){var a=[];block.imgs.forEach(function(i){a.push(i.img)}),a.length&&Photo.deleteFiles(model,a)}for(var key in block)"_id"!=key&&"index"!=key&&"i"!=key&&"position"!=key&&delete block[key];var photos=[];for(var key in b)if("_id"!=key&&"template"!=key&&"nameTemplate"!=key&&"index"!=key&&"i"!=key)if("img"==key&&b[key]){var p=b[key].split("/");p[p.length-2]=itemUrl,p[p.length-3]=model,p[p.length-4]=global.get("store").val.subDomain;var img=p[p.length-1].split(".");img[img.length-2]+="copy",p[p.length-1]=img.join("."),block[key]=p.join("/"),photos.push([b[key],block[key]])}else if("imgs"==key&&b[key]&&b[key].length)b[key].forEach(function(i){if(i.img){var p=i.img.split("/");p[p.length-2]=itemUrl,p[p.length-3]=model,p[p.length-4]=global.get("store").val.subDomain;var img=p[p.length-1].split(".");img[img.length-2]+="copy",p[p.length-1]=img.join("."),photos.push([i.img,p.join("/")]),i.img=p.join("/")}}),block[key]=b[key];else if("video"==key&&b[key]){var p=b[key].split("/");p[p.length-2]=itemUrl,p[p.length-3]=model,p[p.length-4]=global.get("store").val.subDomain;var img=p[p.length-1].split(".");img[img.length-2]+="copy",p[p.length-1]=img.join("."),block[key]=p.join("/"),photos.push([b[key],block[key]])}else"link"!=key&&(block[key]=b[key],"button"==key&&(block.button.link=null));var folder="/images/"+global.get("store").val.subDomain+"/"+model+"/"+itemUrl,o={folder:folder,photos:photos};return $http.post(photoUpload+"/api/copyPhotosFromBrowser",o)}block.templ=b.templ,block.style=b.style,block.blockStyle=b.blockStyle,block.elements=b.elements,block.mobile=b.mobile,block.tablet=b.tablet,block.animate=b.animate,block.animateRepeat=b.animateRepeat,block.duration=b.duration}})}function selectItemFromList(items,header){return $uibModal.open({animation:!0,templateUrl:"components/blocks/selectItem.html",controllerAs:"$ctrl",controller:function($uibModalInstance,global,items,header){function selectItem(item){$uibModalInstance.close(item)}function cancel(){$uibModalInstance.dismiss()}var self=this;self.items=items,self.header=header||"выберите из предложенного списка",self.selectItem=selectItem,self.cancel=cancel},resolve:{items:function(){return items},header:function(){return header}}}).result}return{getBlockConfig:getBlockConfig}}angular.module("gmall.directives").directive("blocksEdit",blocksEdit).directive("blockTextEdit",blockTextEdit).directive("blockText1Edit",blockText1Edit).directive("blockMediaEdit",blockMediaEdit).directive("blockMedia1Edit",blockMedia1Edit).directive("directive",function($compile,$interpolate){return{template:"",link:function($scope,element,attributes){var s=attributes.directive?attributes.directive.toLowerCase():"undefined";"categories"==s||"campaign"==s||"info"==s||"news"==s||"brands"==s||"brandtags"==s||"filtertags"==s||"filters"==s||"stuffs"==s||"groupstuffs"==s||"scheduleplace"==s?element.append($compile("<div items-block></div>")($scope)):element.append($compile("<div block-media1-edit></div>")($scope))}}}).directive("itemsBlock",itemsBlock).directive("nameBlock",nameBlock).directive("textBlock",textBlock).directive("text2Block",text2Block).directive("bannerBlock",bannerBlock).directive("banner1Block",banner1Block).directive("bannerOneBlock",banner1Block).directive("sliderBlock",sliderBlock).directive("videoBlock",videoBlock).directive("video1Block",video1Block).directive("video2Block",video2Block).directive("mapBlock",mapBlock).directive("map1Block",map1Block).directive("map2Block",map2Block).directive("mastersBlock",mastersBlock).directive("feedbackBlock",feedbackBlock).directive("feedback1Block",feedback1Block).directive("feedback2Block",feedback2Block).directive("stuffsBlock",itemsBlock).directive("filtertagsBlock",itemsBlock).directive("brandtagsBlock",itemsBlock).directive("brandsBlock",itemsBlock).directive("categoriesBlock",itemsBlock).directive("campaignBlock",itemsBlock).directive("newsBlock",itemsBlock).directive("infoBlock",itemsBlock).directive("dateBlock",dateBlock).directive("positionBlock",positionBlock).directive("videolinkBlock",videoLinkBlock).directive("snBlock",snBlock).directive("calendarBlock",calendarBlock).directive("scheduleBlock",scheduleBlock).directive("callBlock",callBlock).directive("buttonBlock",buttonBlock).directive("undefinedBlock",undefinedBlock).directive("reviewBlock",reviewBlock).directive("subscriptionBlock",subscriptionBlock).directive("subscriptionaddBlock",subscriptionAddBlock).directive("videolinkBlock",videolinkBlock).directive("pricegoodsBlock",pricegoodsBlock).directive("priceservicesBlock",priceservicesBlock).directive("scheduleplaceBlock",scheduleplaceBlock),blocksEditCtrl.$inject=["$http","$uibModal","HomePage","$q","global","Photo","$fileUpload","SetCSS","Blocks","Confirm","EditModelData","Filters","Brands","Category","FilterTags","BrandTags","Stuff","News","Campaign","Info","GroupStuffs","exception","$timeout","Master","Stat","Additional","$scope","$rootScope","Workplace"],angular.module("gmall.services").service("Blocks",blocks),blocks.$inject=["$http","$uibModal","HomePage","$q","global","Photo"]}(),function(){function styleBlockPage(){return{templateUrl:"components/setStyles/styleBlockPage.html"}}function setStylesHeader(){return{restrict:"AE",templateUrl:"components/setStyles/setStylesHeader.html"}}function setStylesForBlock(){return{binding:{item:"=",saveFunction:"&",saveField:"@",fontFaces:"=",deleteFunction:"&",element:"@",action:"@"},scope:{item:"=",saveFunction:"&",saveField:"@",fontFaces:"=",deleteFunction:"&",element:"@",action:"@"},restrict:"AE",bindToController:!0,controller:setStylesForBlockCtrl,controllerAs:"$ctrl",templateUrl:"components/setStyles/setStyles.html"}}function setStylesForBlockCtrl(){function activate(){if("index.link"==self.saveField&&(console.log(JSON.stringify(self.item)),console.log(self.item[0])),self.item)for(;self.item.length<lengthStyleBlock;)self.item.push("");else self.item=angular.copy(arrEmptyForProperties);if(self.action){self.action.split(" ").forEach(function(k){self.actions[k]=!0})}}function saveData(){self.saveFunction({field:self.saveField,value:self.item})}function deleteData(){console.log("???????"),self.deleteFunction({element:self.element})}var self=this,actived=!1;self.$oninit=function(){actived||(actived=!0,activate())},self.actions={},self.displayList=["block","inline","inline-block","none","table","inline-table","table-cell","table-column","table-row","table-caption","none !important"],self.saveData=saveData,self.deleteData=deleteData,actived||(actived=!0,activate())}function styleService($uibModal,$q,global){function setStyles(block,short){var options={animation:!0,bindToController:!0,size:"lg",controllerAs:"$ctrl",windowClass:"app-modal-window",templateUrl:"components/setStyles/setCSS.html",controller:function(Confirm,$uibModalInstance,block,fontFaces,short){function addNewElement(type){type?(self.block[type]||(self.block[type]={}),self.block[type].elements||(self.block[type].elements={}),self.block[type].elements[self.element]=angular.copy(arrEmptyForProperties)):(self.block.elements||(self.block.elements={}),self.block.elements[self.element]=angular.copy(arrEmptyForProperties)),self.element=null}function deleteElement(element,type){Confirm("Удалить?").then(function(){type?delete self.block[type].elements[element]:delete self.block.elements[element]})}function filterListElements(el){return!self.block.elements||Object.keys(self.block.elements).indexOf(el)<0}function filterListElementsMobile(el){return!self.block.mobile.elements||Object.keys(self.block.mobile.elements).indexOf(el)<0}function filterListElementsTablet(el){return!self.block.tablet.elements||Object.keys(self.block.tablet.elements).indexOf(el)<0}function done(){$uibModalInstance.close()}function cancel(){$uibModalInstance.dismiss()}function addSelector(type){if(self.selector){type?(self.block[type]||(self.block[type]={}),self.block[type].elements||(self.block[type].elements={})):self.block.elements||(self.block.elements={});var selector=self.selector.trim().substring("0,25").replace(/([^a-z0-9_&]+)/gi,"-");if("&"==selector[0])var field=selector;else var field="@"+selector;type?self.block[type].elements[field]=angular.copy(arrEmptyForProperties):self.block.elements[field]=angular.copy(arrEmptyForProperties),self.selector=""}}function copyStyle(from,to){Confirm("Выполнить?").then(function(){var els,blSt;"desktop"==from?(els=angular.copy(block.elements),blSt=angular.copy(block.blockStyle)):"tablet"==from?(els=angular.copy(block.tablet.elements),blSt=angular.copy(block.tablet.blockStyle)):"mobile"==from&&(els=angular.copy(block.mobile.elements),blSt=angular.copy(block.mobile.blockStyle)),els&&("desktop"==to?block.elements=els:"tablet"==to?block.tablet.elements=els:"mobile"==to&&(block.mobile.elements=els)),blSt&&("desktop"==to?block.blockStyle=blSt:"tablet"==to?block.tablet.blockStyle=blSt:"mobile"==to&&(block.mobile.blockStyle=blSt))})}var self=this;short?(self.block={blockStyle:block},self.selector="",self.short=!0):(self.block=block,self.selector="",block.blockStyle||(block.blockStyle=angular.copy(arrEmptyForProperties)),block.mobile||(block.mobile={blockStyle:angular.copy(arrEmptyForProperties)}),block.tablet||(block.tablet={blockStyle:angular.copy(arrEmptyForProperties)})),self.listElements=elementsList,self.fontFaces=fontFaces,self.displayList=["block","inline","inline-block","inline-table","none"],self.positionList=["relative","absolute","fixed","inherit","static"],self.filterListElements=filterListElements,self.filterListElementsMobile=filterListElementsMobile,self.filterListElementsTablet=filterListElementsTablet,self.addNewElement=addNewElement,self.deleteElement=deleteElement,self.done=done,self.cancel=cancel,self.addSelector=addSelector,self.copyStyle=copyStyle,self.$onInit=function(){}},resolve:{block:function(){return block},short:function(){return short},fontFaces:function(){return global.get("store").val.template.index.fontFaces}}};return $uibModal.open(options).result}return{setStyles:setStyles}}angular.module("gmall.directives").directive("styleBlockPage",styleBlockPage).directive("setStyles",setStylesForBlock).directive("setStylesHeader",setStylesHeader),setStylesForBlockCtrl.$inject=[],angular.module("gmall.services").service("SetCSS",styleService),styleService.$inject=["$uibModal","$q","global"]}(),angular.module("gmall.directives").directive("callFromStore",[function(){return{scope:{
modalClose:"&",stuff:"@"},restrict:"E",bindToController:!0,controllerAs:"$ctrl",controller:"callCtrl",templateUrl:"components/call/call.html"}}]).directive("enterPhoneNumder",[function(){return{scope:{enterPhoneNumder:"=",changeFoo:"&",submitted:"="},restrict:"A",bindToController:!0,controllerAs:"$ctrl",controller:enterPhoneNumderCtrl,templateUrl:"components/call/phoneNumber.html"}}]),enterPhoneNumderCtrl.$inject=["$scope","global"],function(){function helpComponent(){return{scope:{},restrict:"E",bindToController:!0,controller:helpComponentCtrl,controllerAs:"$ctrl",templateUrl:"components/help/help.component.html"}}function helpComponentCtrl(Store,$state,global,Confirm,exception,$q,Stuff,Sections){var self=this;self.mobile=global.get("mobile").val,self.global=global,self.$state=$state,self.query={},self.paginate={page:0,rows:5,totalItems:0},self.helpStoreId,function(page){$q.when().then(function(){return Store.query({query:{subDomain:"help"}}).$promise}).then(function(stores){if(!stores||!stores[1])throw"error";self.helpStoreId=stores[1]._id,Sections.query({store:self.helpStoreId},function(res){res.shift(),self.sections=res})}).catch(function(err){err&&exception.catcher("get help")(err)})}()}function helpCategory(){return{scope:{},restrict:"E",bindToController:!0,controller:helpCategoryCtrl,controllerAs:"$ctrl",templateUrl:"components/help/help.category.html"}}function helpCategoryCtrl($state,global,Confirm,exception,$q,Stuff,$stateParams,Category){var self=this;self.mobile=global.get("mobile").val,self.global=global,self.$state=$state,self.query={},function(){$q.when().then(function(){return Stuff.query({store:$stateParams.store,query:{category:$stateParams.category}}).$promise}).then(function(stuffs){self.stuffs=stuffs}).then(function(){return Category.get({store:$stateParams.store,_id:$stateParams.category}).$promise}).then(function(res){self.category=res}).catch(function(err){err&&exception.catcher("get stuffs")(err)})}()}function helpStuff(){return{scope:{},restrict:"E",bindToController:!0,controller:helpStuffCtrl,controllerAs:"$ctrl",templateUrl:"components/help/help.stuff.html"}}function helpStuffCtrl($state,global,Confirm,exception,$q,Stuff,$stateParams){var self=this;self.mobile=global.get("mobile").val,self.global=global,self.$state=$state,self.query={},function(){console.log($stateParams),$q.when().then(function(){return Stuff.get({_id:$stateParams.stuff,store:$stateParams.store}).$promise}).then(function(stuff){self.stuff=stuff?stuff:null}).catch(function(err){err&&exception.catcher("get stuffs")(err)})}()}angular.module("gmall.services").directive("helpComponent",helpComponent).directive("helpCategory",helpCategory).directive("helpStuff",helpStuff),helpComponentCtrl.$inject=["Store","$state","global","Confirm","exception","$q","Stuff","Sections"],helpCategoryCtrl.$inject=["$state","global","Confirm","exception","$q","Stuff","$stateParams","Category"],helpStuffCtrl.$inject=["$state","global","Confirm","exception","$q","Stuff","$stateParams"]}();for(var minTimePart=15,timeRemindArrLang=[{ru:"за 1 час",uk:"",en:"",de:"",part:4},{ru:"за 2 часа",uk:"",en:"",de:"",part:8},{ru:"за 3 часа",uk:"",en:"",de:"",part:12},{ru:"за 4 часа",uk:"",en:"",de:"",part:16},{ru:"за 5 часов",uk:"",en:"",de:"",part:20},{ru:"за 6 часов",uk:"",en:"",de:"",part:24},{ru:"за 12 часов",uk:"",en:"",de:"",part:48},{ru:"за 1 день",uk:"",en:"",de:"",part:96}],timeDurationArrLang=[{ru:"15 мин",uk:"",en:"",de:"",part:1},{ru:"30 мин",uk:"",en:"",de:"",part:2},{ru:"45 мин",uk:"",en:"",de:"",part:3},{ru:"1 час",uk:"",en:"",de:"",part:4},{ru:"1 час 15 мин",uk:"",en:"",de:"",part:5},{ru:"1 час 30 мин",uk:"",en:"",de:"",part:6},{ru:"1 час 45 мин",uk:"",en:"",de:"",part:7},{ru:"2 часа",uk:"",en:"",de:"",part:8},{ru:"2 часа 15 мин",uk:"",en:"",de:"",part:9},{ru:"2 часа 30 мин",uk:"",en:"",de:"",part:10},{ru:"3 часа",uk:"",en:"",de:"",part:12},{ru:"3 часа 30 мин",uk:"",en:"",de:"",part:14},{ru:"4 часа",uk:"",en:"",de:"",part:16}],weekDays=[{ru:"Воскресенье",uk:"Неділя",en:"Sunday",de:"gdsdfsdf"},{ru:"Понедельник",uk:"Понеділок",en:"Monday",de:"gdsdfsdf"},{ru:"Вторник",uk:"Вівторок",en:"Tuesday",de:"gdsdfsdf"},{ru:"Среда",uk:"Середа",en:"Wednesday",de:"gdsdfsdf"},{ru:"Четверг",uk:"Четвер",en:"Thursday",de:"gdsdfsdf"},{ru:"Пятница",uk:"П*ятниця",en:"Friday",de:"gdsdfsdf"},{ru:"Суббота",uk:"Субота",en:"Saturday",de:"gdsdfsdf"}],reservedFirstParamsForAdmin=["manage","promo","seo","setting","content","translate","admin123","bookkeep"],reservedFirstParams=["manage","promo","seo","setting","content","translate","news","lookbook","stat","master","campaign","info","additional","workplace","cabinet","pricegoods","priceservices","home","search","cart","cabinet","bookkeep","likes"],languagesOfPlatform=["ru","uk","en","de","es"],propertiesOfConfigData=[{key:"unitOfMeasure",name:"единицы измерения"}],phoneCodes=[{code:"+38",country:"Ukraine"},{code:"+7",country:"Russia"},{code:"+501",country:"Moldova"},{code:"+44",country:"United Kingdom"},{code:"+93",country:"Afghanistan"},{code:"+355",country:"Albania"},{code:"+213",country:"Algeria"},{code:"+1-684",country:"American Samoa"},{code:"+376",country:"Andorra"},{code:"+244",country:"Angola"},{code:"+1-264",country:"Anguilla"},{code:"+672",country:"Antarctica"},{code:"+1-268",country:"Antigua and Barbuda"},{code:"+54",country:"Argentina"},{code:"+374",country:"Armenia"},{code:"+297",country:"Aruba"},{code:"+61",country:"Australia"},{code:"+43",country:"Austria"},{code:"+994",country:"Azerbaijan"},{code:"+1-242",country:"Bahamas"},{code:"+973",country:"Bahrain"},{code:"+880",country:"Bangladesh"},{code:"+1-246",country:"Barbados"},{code:"+375",country:"Belarus"},{code:"+32",country:"Belgium"},{code:"+1-246",country:"Belize"},{code:"+229",country:"Benin"},{code:"+1-441",country:"Bermuda"},{code:"+975",country:"Bhutan"},{code:"+591",country:"Bolivia"},{code:"+246",country:"British Indian Ocean Territory"},{code:"+267",country:"Botswana"},{code:"+55",country:"Brazil"},{code:"+387",country:"Bosnia and Herzegovina"},{code:"+1-284",country:"British Virgin Islands"},{code:"+673",country:"Brunei"},{code:"+359",country:"Bulgaria"},{code:"+226",country:"Burkina Faso"},{code:"+257",country:"Burundi"},{code:"+855",country:"Cambodia"},{code:"+237",country:"Cameroon"},{code:"+1",country:"Canada"},{code:"+238",country:"Cape Verde"},{code:"+1-345",country:"Cayman Islands"},{code:"+236",country:"Central African Republic"},{code:"+235",country:"Chad"},{code:"+56",country:"Chile"},{code:"+86",country:"China"},{code:"+57",country:"Colombia"},{code:"+269",country:"Comoros"},{code:"+506",country:"Costa Rica"},{code:"+385",country:"Croatia"},{code:"+53",country:"Cuba"},{code:"+599",country:"Curacao"},{code:"+357",country:"Cyprus"},{code:"+420",country:"Czech Republic"},{code:"+45",country:"Denmark"},{code:"+1-767",country:"Dominica"},{code:"+593",country:"Ecuador"},{code:"+995",country:"Georgia"},{code:"+49",country:"Germany"},{code:"+30",country:"Greece"},{code:"+852",country:"Hong Kong"},{code:"+36",country:"Hungary"},{code:"+354",country:"Iceland"},{code:"+852",country:"Hong Kong"},{code:"+36",country:"Hungary"},{code:"+30",country:"Greece"},{code:"+91",country:"India"},{code:"+62",country:"Indonesia"},{code:"+98",country:"Iran"},{code:"+964",country:"Iraq"},{code:"+353",country:"Ireland"},{code:"+972",country:"Israel"},{code:"+39",country:"Italy"},{code:"+81",country:"Japan"},{code:"+962",country:"Jordan"},{code:"+7",country:"Kazakhstan"},{code:"+383",country:"Kosovo"},{code:"+965",country:"Kuwait"},{code:"+996",country:"Kyrgyzstan"},{code:"+856",country:"Laos"},{code:"+371",country:"Latvia"},{code:"+961",country:"Lebanon"},{code:"+218",country:"Libya"},{code:"+423",country:"Liechtenstein"},{code:"+370",country:"Lithuania"},{code:"+352",country:"Luxembourg"},{code:"+853",country:"Macau"},{code:"+389",country:"Macedonia"},{code:"+261",country:"Madagascar"},{code:"+60",country:"Malaysia"},{code:"+356",country:"Malta"},{code:"+222",country:"Mauritania"},{code:"+230",country:"Mauritius"},{code:"+52",country:"Mexico"},{code:"+373",country:"Moldova"},{code:"+377",country:"Monaco"},{code:"+976",country:"Mongolia"},{code:"+382",country:"Montenegro"},{code:"+212",country:"Morocco"},{code:"+977",country:"Nepal"},{code:"+31",country:"Netherlands"},{code:"+507",country:"Panama"},{code:"+595",country:"Paraguay"},{code:"+382",country:"Montenegro"},{code:"+377",country:"Monaco"},{code:"+51",country:"Peru"},{code:"+63",country:"Philippines"},{code:"+48",country:"Poland"},{code:"+351",country:"Portugal"},{code:"+974",country:"Qatar"},{code:"+40",country:"Romania"},{code:"+378",country:"San Marino"},{code:"+966",country:"Saudi Arabia"},{code:"+381",country:"Serbia"},{code:"+65",country:"Singapore"},{code:"+421",country:"Slovakia"},{code:"+386",country:"Slovenia"},{code:"+27",country:"South Africa"},{code:"+82",country:"South Korea"},{code:"+34",country:"Spain"},{code:"+94",country:"Sri Lanka"},{code:"+46",country:"Sweden"},{code:"+41",country:"Switzerland"},{code:"+886",country:"Taiwan"},{code:"+992",country:"Tajikistan"},{code:"+66",country:"Thailand"},{code:"+216",country:"Tunisia"},{code:"+90",country:"Turkey"},{code:"+993",country:"Turkmenistan"},{code:"+971",country:"United Arab Emirates"},{code:"+44",country:"United Kingdom"},{code:"+1",country:"United States"},{code:"+598",country:"Uruguay"},{code:"+998",country:"Uzbekistan"},{code:"+379",country:"Vatican"},{code:"+58",country:"Venezuela"},{code:"+84",country:"Vietnam"},{code:"+967",country:"Yemen"}],modelsName={stat:{ru:"страницы",uk:"сторінки",en:"pages",de:"pages"},stuff:{ru:"товары и услуги",uk:"товари та послуги",en:"goods and services",de:"goods and services"},news:{ru:"новости",uk:"новини",en:"news",de:"news"},info:{ru:"информация",uk:"інформація",en:"information",de:"information"},workplace:{ru:"локации",uk:"локации",en:"locations",de:"locations"}},lengthStyleBlock=61,arrEmptyForProperties=[],i=0;i<lengthStyleBlock;i++)arrEmptyForProperties.push("");var listOfBlocksForMainPage={slider:"слайдер",video:"видео",videoLink:"внешнее видео",banner:"баннер",bannerOne:"баннер в два потока",mission:"миссия",text:"текстовый блок",textTwo:"текстовый блок 2 потока",campaign:"акции",filterTags:"тематические группы (признаки из хар-тик)",filters:"характеристики",brandTags:"коллекции",brands:"бренды",categories:"категории",stuffs:"товары",news:"новости",info:"информационный раздел",pricegoods:"прайс товаров",priceservices:"прайс услуг",map:"карта",review:"отзывы гугл",subscription:"подписка",subscriptionAdd:"подписка с доп полями",call:"заказ звонка",feedback:"форма обратной связи",calendar:"гугл календарь",scheduleplace:"расписание для рабочего места"},animationTypes=[{type:null,name:"отсутстует"},{type:"animated1",name:"fadeInLeftBig"},{type:"animated2",name:"fadeInLeft"},{type:"animated3",name:"fadeInLeftMiddle"},{type:"animated4",name:"fadeInRight"},{type:"animated5",name:"fadeInRightMiddle"},{type:"animated6",name:"fadeInRightBig"},{type:"animated7",name:"bounce"},{type:"animated8",name:"fadeInDown"},{type:"animated9",name:"fadeOut"},{type:"animated10",name:"bounceIn"},{type:"animated11",name:"при наведении контур1"},{type:"animated12",name:"при наведении контур2"},{type:"animated13",name:"SweepToTop"},{type:"animated14",name:"SweepToBottom"},{type:"animated15",name:"LineCenterBottom"},{type:"animated16",name:"scale-block"},{type:"animated17",name:"SweepToRight"},{type:"animated18",name:"SweepToLeft"},{type:"animated19",name:"underlineLRL"},{type:"animated20",name:"underline RLR"},{type:"animated21",name:"line-through LRL"},{type:"animated22",name:"underline RLR 5px"},{type:"animated23",name:"test"},{type:"animated24",name:"test"},{type:"animated25",name:"test"},{type:"animated26",name:"test"},{type:"animated27",name:"test"},{type:"animated28",name:"test"},{type:"animated29",name:"test"},{type:"animated30",name:"shake"},{type:"animated31",name:"fadeInUpBig"}],listOfListName=["news","master","stat","info","campaign","lookbook","additional","workplace"],listOfStuffDetailKind=["good","service","info","media"],listOfBlocksForAll={banner:"баннер",bannerOne:"баннер в два потока",brands:"бренды",brandTags:"коллекции",button:"кнопка",calendar:"гугл календарь",call:"заказ звонка",campaign:"акции",categories:"категории",date:"дата",feedback:"форма обратной связи",filterTags:"тематические группы (признаки из хар-тик)",filters:"характеристики",info:"информационный раздел",map:"карта",name:"название",news:"новости",position:"должность",pricegoods:"прайс товаров",priceservices:"прайс услуг",review:"отзывы гугл",schedule:"расписание для специалиста",scheduleplace:"расписание для рабочего места",slider:"слайдер",sn:"кнопки социальных сетей",stuffs:"товары",groupStuffs:"группы товаров",subscription:"подписка",subscriptionAdd:"подписка с доп полями",text:"текстовый блок",textTwo:"текстовый блок 2 потока",video:"видео",videoLink:"внешнее видео",fbpage:"страница фейсбука",comment:"комментарии дискус"},listOfBlocksForStaticPage={name:"название",text:"текстовый блок",text2:"текстовый блок в две колонки",banner:"фото + текстовый блок (один поток)",banner1:"фото + текстовый блок (два потока)",slider:"слайдер",videoLink:"внешнее видео",video:"видео",video1:"видео + текстовый блок",video2:"текстовый блок + видео",map:"карта",map1:"карта + текстовый блок",map2:"текстовый блок + карта",masters:"сотрудники",feedback:"обратная связь",feedback1:"обратная связь + фото",feedback2:"фото + обратная связь",stuffs:"товары",filterTags:"группы(признаки из хар-тик)",brandTags:"коллекции",brands:"бренды",categories:"категории",campaign:"акции",call:"заказ звонка",button:"кнопка"},listOfBlocksForNewsDetailPage={name:"название",text:"текстовый блок",text2:"текстовый блок в две колонки",banner:"фото + текстовый блок (один поток)",banner1:"фото + текстовый блок (два потока)",slider:"слайдер",videoLink:"внешнее видео",video:"видео",video1:"видео + текстовый блок",video2:"текстовый блок + видео",map:"карта",map1:"карта + текстовый блок",map2:"текстовый блок + карта",stuffs:"товары",campaign:"акции",filterTags:"группы(признаки из хар-тик)",brandTags:"коллекции",brands:"бренды",categories:"категории",date:"дата",sn:"социальные сети"},listOfBlocksForMasterPage={name:"имя",position:"должность",text:"текстовый блок",text2:"текстовый блок в две колонки",banner:"фото + текстовый блок (один поток)",banner1:"фото + текстовый блок (два потока)",slider:"слайдер",video:"видео",videoLink:"внешнее видео",video1:"видео + текстовый блок",video2:"текстовый блок + видео",map:"карта",map1:"карта + текстовый блок",map2:"текстовый блок + карта",stuffs:"товары",schedule:"расписание"},listOfBlocksForWorkplacePage={name:"имя",text:"текстовый блок",text2:"текстовый блок в две колонки",banner:"фото + текстовый блок (один поток)",banner1:"фото + текстовый блок (два потока)",slider:"слайдер",video:"видео",videoLink:"внешнее видео",video1:"видео + текстовый блок",video2:"текстовый блок + видео",map:"карта",map1:"карта + текстовый блок",map2:"текстовый блок + карта",stuffs:"товары",schedule:"расписание"},listOfBlocksForAddPage={name:"имя",text:"текстовый блок",text2:"текстовый блок в две колонки",banner:"фото + текстовый блок (один поток)",banner1:"фото + текстовый блок (два потока)",slider:"слайдер",video:"видео",videoLink:"внешнее видео",video1:"видео + текстовый блок",video2:"текстовый блок + видео",map:"карта",map1:"карта + текстовый блок",map2:"текстовый блок + карта",news:"новости"},listOfBlocksForHeader={logo:"логотип",name:"название",cart:"корзина",enter:"вход",info:"инфо",currency:"валюта",news:"новости",lookbook:"галлерея",search:"поиск",catalog:"каталог",new:"новинки",additional:"дополнительный список",schedule:"расписание",sale:"распродажа",campaign:"акции",master:"мастера",brands:"бренды",collection:"коллекции",phone:"телефон",sn:"социальные сети",lang:"языки",humburger:"humburger",pricegoods:"pricegoods",priceservices:"priceservices",text:"текст",icon:"иконка",likes:"избранное"},listBlocksForFooter={text:"текст",textOne:"текст 1",sn:"соц.сети",subscription:"подписка",feedback:"обратная связь",stat:"статические страницы",catalog:"каталог",infoline:"ииформационная строка",copyright:"правообладание",news:"новости",campaign:"акции",lang:"языки"},listOfBlocksForStats={name:"название",banner:"баннер",gallery:"галлерея",desc:"описание1",desc1:"описание2",desc2:"описание3",map:"карта",video:"видео",masters:"мастера"},listOfBlocksForStuffDetail={name:"название",gallery:"галлерея",desc:"описание",comments:"комментарии",lastViewed:"последние просмотренные",sort:"разновидности",group:"группа товаров",addInfo:"доп.информация",addToCart:"в корзину(действие)",price:"цены",qty:"количество",sn:"соц.сети",feedback:"обратная связь",params:"параметры",tags:"характеристики",blocks:"медиа блоки",back:"кнопка назад в список",master:"блок специалистов",stuffs:"блок товаров",video:"первое видео",videoOne:"второе видео",media:"внешнее видео",mediaOne:"второе внешнее видео"},listOfBlocksForStuffDetailBlocks={banner:"фото + текстовый блок (один поток)",banner1:"фото + текстовый блок (два потока)",calendar:"календарь",date:"дата",feedback:"обратная связь",feedbackOne:"текст + обратная связь",feedbackTwo:"обратная связь + текст",imgs:"фото",map:"карта",mapOne:"карта + текстовый блок",mapTwo:"текстовый блок + карта",masters:"блок специалистов",name:"имя",position:"должность",slider:"слайдер",sn:"соцсети",text:"текстовый блок",text2:"текстовый блок в две колонки",video:"видео",videoOne:"видео + текстовый блок",videoTwo:"текстовый блок + видео",videoLink:"внешнее видео",file:"file"},listOfBlocksForStuffList={list:"список",filters:"фильтры",categories:"категории",paginate:"пагинация",search:"поиск",call:"звонок",subscription:"подписка",desc:"описание",seoDesc:"seo описание",blocks:"медиа блоки"},tableOfColorsForButton={0:"black-white",1:"pink-white",2:"turquoise-white",3:"yellow-white",4:"bordo-white",5:"braun-white",6:"powder-white",7:"pinklight-white",8:"white-black",9:"black-white"},tableOfButtonsFile={0:"standart",1:"border-radius",2:"no border",3:"inverse",4:"border",5:"transparent"},listOfIcons=["addcart","back","cart","cartin","cartplus","cancelmenu","cancel","cancelzoom","call","caret","categories","change","dialog","down","dot","delete","downslide","gif","envelope","envelopewhite","edit","eur","fb","fbwhite","filters","header","google","googlewhite","humbmobile","chat","inst","instwhite","left","likes","lock","lockwhite","menu","minus","messageme","messagehe","next","nextgallery","ok","okwhite","pin","pinwhite","plus","prev","prevgallery","right","rub","search","send","setting","spinner","subscription","time","tw","twwhite","uah","up","upslide","user","userhe","userme","usd","videoplay","vk","vkwhite","see","enter","zoom","yt","ytwhite"],notificationsTypeLang={invoice:{ru:"счет",ua:"рахунок",en:"invoice",de:""},dateTime:{ru:"запись онлайн",ua:"запис онлайн",en:"booking",de:""},accepted:{ru:"заказ принят",ua:"замовлення прийнято",en:"accepted",de:""},shipOrder:{ru:"данные о доставке",ua:"дані про доставку",en:"shipOrder",de:""},order:{ru:"поступил заказ",ua:"поступило замовлення",en:"order",de:""},pay:{ru:"оплата",ua:"оплата",en:"pay",de:""},feedBack:{ru:"обратная связь",ua:"зворотній зв*язок",en:"feedback",de:""},comment:{ru:"комментарий",ua:"коментар",en:"comments",de:""},call:{ru:"заказ звонка",ua:"замовлення дзвінка",en:"call",de:""},subscription:{ru:"подписка",ua:"підписка",en:"subscription",de:""}},updateExternalCatalogList={everyMon10:{ru:"каждый понедельник в 10.00",ua:"",en:"",de:""},everyMon12:{ru:"каждый понедельник в 12.00",ua:"",en:"",de:""},everyFri10:{ru:"каждую пятницу в 10.00",ua:"",en:"",de:""},everyFri12:{ru:"каждую пятницу в 12.00",ua:"",en:"",de:""},everyDay10:{ru:"каждый день в 10.00",ua:"",en:"",de:""},everyDay12:{ru:"каждый день в 12.00",ua:"",en:"",de:""},everyDay101418:{ru:"каждый день в 10.00,14.00,18.00",ua:"",en:"",de:""}},ratioClassStuffDetail={0:{left:"left-block col-lg-6 col-md-6 col-sm-12 col-xs-12",right:"right-block col-lg-6 col-md-6 col-sm-12 col-xs-12"},1:{left:"left-block vertical-left3 col-lg-5 col-md-5 col-sm-12 col-xs-12",right:"right-block horizontal-right2 col-lg-7 col-md-7 col-sm-12 col-xs-12"},2:{left:"left-block vertical-left2 col-lg-4 col-md-4 col-sm-12 col-xs-12",right:"right-block horizontal-right1 col-lg-8 col-md-8 col-sm-12 col-xs-12"},3:{left:"left-block horizontal-left1 col-lg-7 col-md-7 col-sm-12 col-xs-12",right:"right-block vertical-right1  col-lg-5 col-md-5 col-sm-12 col-xs-12"},4:{left:"left-block horizontal-left2 col-lg-8 col-md-8 col-sm-12 col-xs-12",right:"right-block vertical-right2 col-lg-4 col-md-4 col-sm-12 col-xs-12"},5:{left:"left-block col-lg-12 col-md-12 col-sm-12 col-xs-12",right:"right-block col-lg-12 col-md-12 col-sm-12 col-xs-12"}},elementsList=["a","p","div","h1","h2","h3","h4","ol","ul","li","span","img","hr","iframe","table","tr","th","td"],getNamePropertyCSS=function(i,item,k){if(item)switch(i){case 0:return["color",item];case 1:return["background-color",item];case 2:return["margin-top",item];case 3:return["margin-right",item];case 4:return["margin-bottom",item];case 5:return["margin-left",item];case 6:return["padding-top",item];case 7:return["padding-right",item];case 8:return["padding-bottom",item];case 9:return["padding-left",item];case 10:return["display",item];case 11:return["font-family",item];case 12:return["font-size",item];case 13:return["font-weight",item];case 14:return["letter-spacing",item];case 15:return["text-transform",item];case 16:return["width",item];case 17:return["height",item];case 18:return["float",item];case 19:return["top",item];case 20:return["left",item];case 21:return["right",item];case 22:return["bottom",item];case 23:return["text-decoration",item];case 24:return["text-align",item];case 25:return["position",item];case 26:return["border",item];case 27:return["border-left",item];case 28:return["border-right",item];case 29:return["border-top",item];case 30:return["border-bottom",item];case 31:return["border-radius",item];case 32:return["z-index",item];case 33:return["opacity",item];case 34:return["border-width",item];case 35:return["list-style",item];case 36:return["vertical-align",item];case 37:return["background-size",item];case 38:return["background-position",item];case 39:return["text-shadow",item];case 40:return["cursor",item];case 41:return["transition",item];case 42:return["box-shadow",item];case 43:return["transform",item];case 44:return["background",item];case 45:return["clear",item];case 46:return["max-width",item];case 47:return["min-width",item];case 48:return["max-height",item];case 49:return["min-height",item];case 50:return["line-height",item];case 51:return["object-fit",item];case 52:return["object-position",item];case 53:return["overflow",item];case 54:return["background-attachment",item];case 55:return["background-repeat",item];case 56:return["padding",item];case 57:return["margin",item];case 58:return["word-break",item];case 59:return["word-wrap",item];case 60:return["word-spacing",item]}else switch(i){case 0:return"color";case 1:return"background-color";case 2:return"margin-top";case 3:return"margin-right";case 4:return"margin-bottom";case 5:return"margin-left";case 6:return"padding-top";case 7:return"padding-right";case 8:return"padding-bottom";case 9:return"padding-left";case 10:return"display";case 11:return"font-family";case 12:return"font-size";case 13:return"font-weight";case 14:return"letter-spacing";case 15:return"text-transform";case 16:return"width";case 17:return"height";case 18:return"float";case 19:return"top";case 20:return"left";case 21:return"right";case 22:return"bottom";case 23:return"text-decoration";case 24:return"text-align";case 25:return"position";case 26:return"border";case 27:return"border-left";case 28:return"border-right";case 29:return"border-top";case 30:return"border-bottom";case 31:return"border-radius";case 32:return"z-index";case 33:return"opacity";case 34:return"border-width";case 35:return"list-style";case 36:return"vertical-align";case 37:return"background-size";case 38:return"background-position";case 39:return"text-shadow";case 40:return"cursor";case 41:return"transition";case 42:return"box-shadow";case 43:return"transform";case 44:return"background";case 45:return"clear";case 46:return"max-width";case 47:return"min-width";case 48:return"max-height";case 49:return"min-height";case 50:return"line-height";case 51:return"object-fit";case 52:return"object-position";case 53:return"overflow";case 54:return"background-attachment";case 55:return"background-repeat";case 56:return"padding";case 57:return"margin";case 58:return"word-break";case 59:return"word-wrap";case 60:return"word-spacing"}};"undefined"==typeof window&&(exports.listOfBlocksForMainPage=listOfBlocksForMainPage,exports.listOfBlocksForHeader=listOfBlocksForHeader,exports.listBlocksForFooter=listBlocksForFooter,exports.listOfBlocksForStats=listOfBlocksForStats,exports.listOfBlocksForStuffDetail=listOfBlocksForStuffDetail,exports.listOfBlocksForStuffList=listOfBlocksForStuffList,exports.lengthStyleBlock=lengthStyleBlock,exports.arrEmptyForProperties=arrEmptyForProperties,exports.listOfBlocksForNewsDetailPage=listOfBlocksForNewsDetailPage,exports.listOfBlocksForStaticPage=listOfBlocksForStaticPage,exports.modelsName=modelsName,exports.getNamePropertyCSS=getNamePropertyCSS,exports.listOfListName=listOfListName,exports.ratioClassStuffDetail=ratioClassStuffDetail,exports.elementsList=elementsList,exports.reservedFirstParams=reservedFirstParams,exports.reservedFirstParamsForAdmin=reservedFirstParamsForAdmin,exports.minTimePart=minTimePart,exports.listOfBlocksForStuffDetailBlocks=listOfBlocksForStuffDetailBlocks);