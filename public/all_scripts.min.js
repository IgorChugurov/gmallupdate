/*! jQuery v2.1.4 | (c) 2005, 2015 jQuery Foundation, Inc. | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m="2.1.4",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return n.each(this,a,b)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!n.isArray(a)&&a-parseFloat(a)+1>=0},isPlainObject:function(a){return"object"!==n.type(a)||a.nodeType||n.isWindow(a)?!1:a.constructor&&!j.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=l.createElement("script"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:g.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(e=d.call(arguments,2),f=function(){return a.apply(b||this,e.concat(d.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:k}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function s(a){var b="length"in a&&a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=M.replace("w","w#"),O="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+L+"*\\]",P=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|.*)\\)|)",Q=new RegExp(L+"+","g"),R=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),S=new RegExp("^"+L+"*,"+L+"*"),T=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),U=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),V=new RegExp(P),W=new RegExp("^"+N+"$"),X={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,aa=/[+~]/,ba=/'|\\/g,ca=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),da=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ea=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(fa){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],k=b.nodeType,"string"!=typeof a||!a||1!==k&&9!==k&&11!==k)return d;if(!e&&p){if(11!==k&&(f=_.exec(a)))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return H.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName)return H.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=1!==k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(ba,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+ra(o[l]);w=aa.test(a)&&pa(b.parentNode)||b,x=o.join(",")}if(x)try{return H.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function ha(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return ia(function(b){return b=+b,ia(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function pa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=g.documentElement,e=g.defaultView,e&&e!==e.top&&(e.addEventListener?e.addEventListener("unload",ea,!1):e.attachEvent&&e.attachEvent("onunload",ea)),p=!f(g),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(g.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(g.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!g.getElementsByName||!g.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(g.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){var b=g.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",P)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===g||a.ownerDocument===v&&t(v,a)?-1:b===g||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===g?-1:b===g?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return la(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?la(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},g):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=ga.selectors={cacheLength:50,createPseudo:ia,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ca,da),a[3]=(a[3]||a[4]||a[5]||"").replace(ca,da),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ca,da).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(Q," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?ia(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return ga(a,b).length>0}}),contains:ia(function(a){return a=a.replace(ca,da),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ia(function(a){return W.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(ca,da).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:oa(function(){return[0]}),last:oa(function(a,b){return[b-1]}),eq:oa(function(a,b,c){return[0>c?c+b:c]}),even:oa(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:oa(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:oa(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:oa(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ma(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=na(b);function qa(){}qa.prototype=d.filters=d.pseudos,d.setFilters=new qa,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)};function ra(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function sa(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function ta(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ua(a,b,c){for(var d=0,e=b.length;e>d;d++)ga(a,b[d],c);return c}function va(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function wa(a,b,c,d,e,f){return d&&!d[u]&&(d=wa(d)),e&&!e[u]&&(e=wa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ua(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:va(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=va(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=va(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function xa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=sa(function(a){return a===b},h,!0),l=sa(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[sa(ta(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return wa(i>1&&ta(m),i>1&&ra(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&xa(a.slice(i,e)),f>e&&xa(a=a.slice(e)),f>e&&ra(a))}m.push(c)}return ta(m)}function ya(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=F.call(i));s=va(s)}H.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&ga.uniqueSort(i)}return k&&(w=v,j=t),r};return c?ia(f):f}return h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=xa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,ya(e,d)),f.selector=a}return f},i=ga.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ca,da),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ca,da),aa.test(j[0].type)&&pa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&ra(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,aa.test(a)&&pa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function x(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(w.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return g.call(b,a)>=0!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return!!x(this,"string"==typeof a&&u.test(a)?n(a):a||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=n.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||y).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:l,!0)),v.test(c[1])&&n.isPlainObject(b))for(c in b)n.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=l.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=l,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};A.prototype=n.fn,y=n(l);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.unique(f):f)},index:function(a){return a?"string"==typeof a?g.call(n(a),this[0]):g.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.unique(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){while((a=a[b])&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,b,c){return n.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,b,c){return n.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return n.dir(a,"previousSibling",c)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(C[a]||n.unique(e),B.test(a)&&e.reverse()),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return n.each(a.match(E)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):n.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(b=a.memory&&l,c=!0,g=e||0,e=0,f=h.length,d=!0;h&&f>g;g++)if(h[g].apply(l[0],l[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:k.disable())},k={add:function(){if(h){var c=h.length;!function g(b){n.each(b,function(b,c){var d=n.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&g(c)})}(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&n.each(arguments,function(a,b){var c;while((c=n.inArray(b,h,c))>-1)h.splice(c,1),d&&(f>=c&&f--,g>=c&&g--)}),this},has:function(a){return a?n.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],f=0,this},disable:function(){return h=i=b=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,b||k.disable(),this},locked:function(){return!i},fireWith:function(a,b){return!h||c&&!i||(b=b||[],b=[a,b.slice?b.slice():b],d?i.push(b):j(b)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!c}};return k},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&n.isFunction(a.promise)?e:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(H.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler("ready"),n(l).off("ready"))))}});function I(){l.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),n.ready()}n.ready.promise=function(b){return H||(H=n.Deferred(),"complete"===l.readyState?setTimeout(n.ready):(l.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(b)},n.ready.promise();var J=n.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)n.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};n.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+K.uid++}K.uid=1,K.accepts=n.acceptData,K.prototype={key:function(a){if(!K.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=K.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,n.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(n.isEmptyObject(f))n.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(E)||[])),c=d.length;while(c--)delete g[d[c]]}},hasData:function(a){return!n.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function P(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(O,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}M.set(a,b,c)}else c=void 0;return c}n.extend({hasData:function(a){return M.hasData(a)||L.hasData(a)},data:function(a,b,c){
return M.access(a,b,c)},removeData:function(a,b){M.remove(a,b)},_data:function(a,b,c){return L.access(a,b,c)},_removeData:function(a,b){L.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=M.get(f),1===f.nodeType&&!L.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d])));L.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){M.set(this,a)}):J(this,function(b){var c,d=n.camelCase(a);if(f&&void 0===b){if(c=M.get(f,a),void 0!==c)return c;if(c=M.get(f,d),void 0!==c)return c;if(c=P(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=M.get(this,d);M.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&M.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){M.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=L.get(a,b),c&&(!d||n.isArray(c)?d=L.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return L.get(a,c)||L.access(a,c,{empty:n.Callbacks("once memory").add(function(){L.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=L.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)},T=/^(?:checkbox|radio)$/i;!function(){var a=l.createDocumentFragment(),b=a.appendChild(l.createElement("div")),c=l.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var U="undefined";k.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;function Z(){return!0}function $(){return!1}function _(){try{return l.activeElement}catch(a){}}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return typeof n!==U&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(E)||[""],j=b.length;while(j--)h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.hasData(a)&&L.get(a);if(r&&(i=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&(delete r.handle,L.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,m,o,p=[d||l],q=j.call(b,"type")?b.type:b,r=j.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||l,3!==d.nodeType&&8!==d.nodeType&&!X.test(q+n.event.triggered)&&(q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),k=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=r.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},e||!o.trigger||o.trigger.apply(d,c)!==!1)){if(!e&&!o.noBubble&&!n.isWindow(d)){for(i=o.delegateType||q,X.test(i+q)||(g=g.parentNode);g;g=g.parentNode)p.push(g),h=g;h===(d.ownerDocument||l)&&p.push(h.defaultView||h.parentWindow||a)}f=0;while((g=p[f++])&&!b.isPropagationStopped())b.type=f>1?i:o.bindType||q,m=(L.get(g,"events")||{})[b.type]&&L.get(g,"handle"),m&&m.apply(g,c),m=k&&g[k],m&&m.apply&&n.acceptData(g)&&(b.result=m.apply(g,c),b.result===!1&&b.preventDefault());return b.type=q,e||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!n.acceptData(d)||k&&n.isFunction(d[q])&&!n.isWindow(d)&&(h=d[k],h&&(d[k]=null),n.event.triggered=q,d[q](),n.event.triggered=void 0,h&&(d[k]=h)),b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(L.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(g.namespace))&&(a.handleObj=g,a.data=g.data,e=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(a.result=e)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>=0:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||l,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=W.test(e)?this.mouseHooks:V.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new n.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=l),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=n.extend(new n.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?n.event.trigger(e,null,b):n.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?Z:$):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Z,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Z,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Z,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a),!0)};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=L.access(d,b);e||d.addEventListener(a,c,!0),L.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=L.access(d,b)-1;e?L.access(d,b,e):(d.removeEventListener(a,c,!0),L.remove(d,b))}}}),n.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=$;else if(!d)return this;return 1===e&&(f=d,d=function(a){return n().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=n.guid++)),this.each(function(){n.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=$),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});var aa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ba=/<([\w:]+)/,ca=/<|&#?\w+;/,da=/<(?:script|style|link)/i,ea=/checked\s*(?:[^=]|=\s*.checked.)/i,fa=/^$|\/(?:java|ecma)script/i,ga=/^true\/(.*)/,ha=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ia={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ia.optgroup=ia.option,ia.tbody=ia.tfoot=ia.colgroup=ia.caption=ia.thead,ia.th=ia.td;function ja(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function ka(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function la(a){var b=ga.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function ma(a,b){for(var c=0,d=a.length;d>c;c++)L.set(a[c],"globalEval",!b||L.get(b[c],"globalEval"))}function na(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(L.hasData(a)&&(f=L.access(a),g=L.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}M.hasData(a)&&(h=M.access(a),i=n.extend({},h),M.set(b,i))}}function oa(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function pa(a,b){var c=b.nodeName.toLowerCase();"input"===c&&T.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}n.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=oa(h),f=oa(a),d=0,e=f.length;e>d;d++)pa(f[d],g[d]);if(b)if(c)for(f=f||oa(a),g=g||oa(h),d=0,e=f.length;e>d;d++)na(f[d],g[d]);else na(a,h);return g=oa(h,"script"),g.length>0&&ma(g,!i&&oa(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,o=a.length;o>m;m++)if(e=a[m],e||0===e)if("object"===n.type(e))n.merge(l,e.nodeType?[e]:e);else if(ca.test(e)){f=f||k.appendChild(b.createElement("div")),g=(ba.exec(e)||["",""])[1].toLowerCase(),h=ia[g]||ia._default,f.innerHTML=h[1]+e.replace(aa,"<$1></$2>")+h[2],j=h[0];while(j--)f=f.lastChild;n.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));k.textContent="",m=0;while(e=l[m++])if((!d||-1===n.inArray(e,d))&&(i=n.contains(e.ownerDocument,e),f=oa(k.appendChild(e),"script"),i&&ma(f),c)){j=0;while(e=f[j++])fa.test(e.type||"")&&c.push(e)}return k},cleanData:function(a){for(var b,c,d,e,f=n.event.special,g=0;void 0!==(c=a[g]);g++){if(n.acceptData(c)&&(e=c[L.expando],e&&(b=L.cache[e]))){if(b.events)for(d in b.events)f[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);L.cache[e]&&delete L.cache[e]}delete M.cache[c[M.expando]]}}}),n.fn.extend({text:function(a){return J(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=ja(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=ja(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?n.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||n.cleanData(oa(c)),c.parentNode&&(b&&n.contains(c.ownerDocument,c)&&ma(oa(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(oa(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return J(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!da.test(a)&&!ia[(ba.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(aa,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(oa(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,n.cleanData(oa(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,m=this,o=l-1,p=a[0],q=n.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&ea.test(p))return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(c=n.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(f=n.map(oa(c,"script"),ka),g=f.length;l>j;j++)h=c,j!==o&&(h=n.clone(h,!0,!0),g&&n.merge(f,oa(h,"script"))),b.call(this[j],h,j);if(g)for(i=f[f.length-1].ownerDocument,n.map(f,la),j=0;g>j;j++)h=f[j],fa.test(h.type||"")&&!L.access(h,"globalEval")&&n.contains(i,h)&&(h.src?n._evalUrl&&n._evalUrl(h.src):n.globalEval(h.textContent.replace(ha,"")))}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),g=e.length-1,h=0;g>=h;h++)c=h===g?this:this.clone(!0),n(e[h])[b](c),f.apply(d,c.get());return this.pushStack(d)}});var qa,ra={};function sa(b,c){var d,e=n(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:n.css(e[0],"display");return e.detach(),f}function ta(a){var b=l,c=ra[a];return c||(c=sa(a,b),"none"!==c&&c||(qa=(qa||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=qa[0].contentDocument,b.write(),b.close(),c=sa(a,b),qa.detach()),ra[a]=c),c}var ua=/^margin/,va=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wa=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)};function xa(a,b,c){var d,e,f,g,h=a.style;return c=c||wa(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),va.test(g)&&ua.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function ya(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d=l.documentElement,e=l.createElement("div"),f=l.createElement("div");if(f.style){f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===f.style.backgroundClip,e.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",e.appendChild(f);function g(){f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",f.innerHTML="",d.appendChild(e);var g=a.getComputedStyle(f,null);b="1%"!==g.top,c="4px"===g.width,d.removeChild(e)}a.getComputedStyle&&n.extend(k,{pixelPosition:function(){return g(),b},boxSizingReliable:function(){return null==c&&g(),c},reliableMarginRight:function(){var b,c=f.appendChild(l.createElement("div"));return c.style.cssText=f.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",f.style.width="1px",d.appendChild(e),b=!parseFloat(a.getComputedStyle(c,null).marginRight),d.removeChild(e),f.removeChild(c),b}})}}(),n.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var za=/^(none|table(?!-c[ea]).+)/,Aa=new RegExp("^("+Q+")(.*)$","i"),Ba=new RegExp("^([+-])=("+Q+")","i"),Ca={position:"absolute",visibility:"hidden",display:"block"},Da={letterSpacing:"0",fontWeight:"400"},Ea=["Webkit","O","Moz","ms"];function Fa(a,b){if(b in a)return b;var c=b[0].toUpperCase()+b.slice(1),d=b,e=Ea.length;while(e--)if(b=Ea[e]+c,b in a)return b;return d}function Ga(a,b,c){var d=Aa.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Ha(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+R[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+R[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+R[f]+"Width",!0,e))):(g+=n.css(a,"padding"+R[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+R[f]+"Width",!0,e)));return g}function Ia(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=wa(a),g="border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=xa(a,b,f),(0>e||null==e)&&(e=a.style[b]),va.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Ha(a,b,c||(g?"border":"content"),d,f)+"px"}function Ja(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=L.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&S(d)&&(f[g]=L.access(d,"olddisplay",ta(d.nodeName)))):(e=S(d),"none"===c&&e||L.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=xa(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Fa(i,h)),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Ba.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(n.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||n.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Fa(a.style,h)),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=xa(a,b,d)),"normal"===e&&b in Da&&(e=Da[b]),""===c||c?(f=parseFloat(e),c===!0||n.isNumeric(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?za.test(n.css(a,"display"))&&0===a.offsetWidth?n.swap(a,Ca,function(){return Ia(a,b,d)}):Ia(a,b,d):void 0},set:function(a,c,d){var e=d&&wa(a);return Ga(a,c,d?Ha(a,b,d,"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),n.cssHooks.marginRight=ya(k.reliableMarginRight,function(a,b){return b?n.swap(a,{display:"inline-block"},xa,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+R[d]+b]=f[d]||f[d-2]||f[0];return e}},ua.test(a)||(n.cssHooks[a+b].set=Ga)}),n.fn.extend({css:function(a,b){return J(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=wa(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Ja(this,!0)},hide:function(){return Ja(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){S(this)?n(this).show():n(this).hide()})}});function Ka(a,b,c,d,e){return new Ka.prototype.init(a,b,c,d,e)}n.Tween=Ka,Ka.prototype={constructor:Ka,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Ka.propHooks[this.prop];return a&&a.get?a.get(this):Ka.propHooks._default.get(this)},run:function(a){var b,c=Ka.propHooks[this.prop];return this.options.duration?this.pos=b=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Ka.propHooks._default.set(this),this}},Ka.prototype.init.prototype=Ka.prototype,Ka.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Ka.propHooks.scrollTop=Ka.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},n.fx=Ka.prototype.init,n.fx.step={};var La,Ma,Na=/^(?:toggle|show|hide)$/,Oa=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pa=/queueHooks$/,Qa=[Va],Ra={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=Oa.exec(b),f=e&&e[3]||(n.cssNumber[a]?"":"px"),g=(n.cssNumber[a]||"px"!==f&&+d)&&Oa.exec(n.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,n.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function Sa(){return setTimeout(function(){La=void 0}),La=n.now()}function Ta(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=R[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ua(a,b,c){for(var d,e=(Ra[b]||[]).concat(Ra["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Va(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&S(a),q=L.get(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(a,"display"),k="none"===j?L.get(a,"olddisplay")||ta(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Na.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?ta(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=L.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;L.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ua(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function Wa(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Xa(a,b,c){var d,e,f=0,g=Qa.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=La||Sa(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:La||Sa(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Wa(k,j.opts.specialEasing);g>f;f++)if(d=Qa[f].call(j,a,k,j.opts))return d;return n.map(k,Ua,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(Xa,{tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],Ra[c]=Ra[c]||[],Ra[c].unshift(b)},prefilter:function(a,b){b?Qa.unshift(a):Qa.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(S).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=Xa(this,n.extend({},a),f);(e||L.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=L.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Pa.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=L.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Ta(b,!0),a,d,e)}}),n.each({slideDown:Ta("show"),slideUp:Ta("hide"),slideToggle:Ta("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(La=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),La=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Ma||(Ma=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(Ma),Ma=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(a,b){return a=n.fx?n.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=l.createElement("input"),b=l.createElement("select"),c=b.appendChild(l.createElement("option"));a.type="checkbox",k.checkOn=""!==a.value,k.optSelected=c.selected,b.disabled=!0,k.optDisabled=!c.disabled,a=l.createElement("input"),a.value="t",a.type="radio",k.radioValue="t"===a.value}();var Ya,Za,$a=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return J(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===U?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),d=n.attrHooks[b]||(n.expr.match.bool.test(b)?Za:Ya)),
void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=n.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void n.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),Za={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=$a[b]||n.find.attr;$a[b]=function(a,b,d){var e,f;return d||(f=$a[b],$a[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,$a[b]=f),e}});var _a=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(a,b){return J(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!n.isXMLDoc(a),f&&(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||_a.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var ab=/[\t\r\n\f]/g;n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ab," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=n.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ab," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?n.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(n.isFunction(a)?function(c){n(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=n(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===U||"boolean"===c)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||a===!1?"":L.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ab," ").indexOf(b)>=0)return!0;return!1}});var bb=/\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(bb,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=n.inArray(d.value,f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var cb=n.now(),db=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+a),b};var eb=/#.*$/,fb=/([?&])_=[^&]*/,gb=/^(.*?):[ \t]*([^\r\n]*)$/gm,hb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ib=/^(?:GET|HEAD)$/,jb=/^\/\//,kb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,lb={},mb={},nb="*/".concat("*"),ob=a.location.href,pb=kb.exec(ob.toLowerCase())||[];function qb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(n.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function rb(a,b,c,d){var e={},f=a===mb;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function sb(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function tb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function ub(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ob,type:"GET",isLocal:hb.test(pb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":nb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?sb(sb(a,n.ajaxSettings),b):sb(n.ajaxSettings,a)},ajaxPrefilter:qb(lb),ajaxTransport:qb(mb),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=n.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?n(l):n.event,o=n.Deferred(),p=n.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!f){f={};while(b=gb.exec(e))f[b[1].toLowerCase()]=b[2]}b=f[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return c&&c.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||ob)+"").replace(eb,"").replace(jb,pb[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=n.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(h=kb.exec(k.url.toLowerCase()),k.crossDomain=!(!h||h[1]===pb[1]&&h[2]===pb[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(pb[3]||("http:"===pb[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=n.param(k.data,k.traditional)),rb(lb,k,b,v),2===t)return v;i=n.event&&k.global,i&&0===n.active++&&n.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!ib.test(k.type),d=k.url,k.hasContent||(k.data&&(d=k.url+=(db.test(d)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=fb.test(d)?d.replace(fb,"$1_="+cb++):d+(db.test(d)?"&":"?")+"_="+cb++)),k.ifModified&&(n.lastModified[d]&&v.setRequestHeader("If-Modified-Since",n.lastModified[d]),n.etag[d]&&v.setRequestHeader("If-None-Match",n.etag[d])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+nb+"; q=0.01":""):k.accepts["*"]);for(j in k.headers)v.setRequestHeader(j,k.headers[j]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(j in{success:1,error:1,complete:1})v[j](k[j]);if(c=rb(mb,k,b,v)){v.readyState=1,i&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,c.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,f,h){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),c=void 0,e=h||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,f&&(u=tb(k,v,f)),u=ub(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(n.lastModified[d]=w),w=v.getResponseHeader("etag"),w&&(n.etag[d]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,i&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),i&&(m.trigger("ajaxComplete",[v,k]),--n.active||n.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(n.isFunction(a)?function(b){n(this).wrapInner(a.call(this,b))}:function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var vb=/%20/g,wb=/\[\]$/,xb=/\r?\n/g,yb=/^(?:submit|button|image|reset|file)$/i,zb=/^(?:input|select|textarea|keygen)/i;function Ab(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||wb.test(a)?d(a,e):Ab(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Ab(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Ab(c,a[c],b,e);return d.join("&").replace(vb,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&zb.test(this.nodeName)&&!yb.test(a)&&(this.checked||!T.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(xb,"\r\n")}}):{name:b.name,value:c.replace(xb,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Bb=0,Cb={},Db={0:200,1223:204},Eb=n.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in Cb)Cb[a]()}),k.cors=!!Eb&&"withCredentials"in Eb,k.ajax=Eb=!!Eb,n.ajaxTransport(function(a){var b;return k.cors||Eb&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Bb;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Cb[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Db[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Cb[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h}},abort:function(){b&&b()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=n("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),l.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Fb=[],Gb=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Fb.pop()||n.expando+"_"+cb++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Gb.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gb.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Gb,"$1"+e):b.jsonp!==!1&&(b.url+=(db.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Fb.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||l;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=n.buildFragment([a],b,e),e&&e.length&&n(e).remove(),n.merge([],d.childNodes))};var Hb=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Hb)return Hb.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};var Ib=a.document.documentElement;function Jb(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,n.contains(b,d)?(typeof d.getBoundingClientRect!==U&&(e=d.getBoundingClientRect()),c=Jb(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||Ib;while(a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Ib})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;n.fn[b]=function(e){return J(this,function(b,e,f){var g=Jb(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=ya(k.pixelPosition,function(a,c){return c?(c=xa(a,b),va.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return J(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Kb=a.jQuery,Lb=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Lb),b&&a.jQuery===n&&(a.jQuery=Kb),n},typeof b===U&&(a.jQuery=a.$=n),n});

/*
 AngularJS v1.6.4
 (c) 2010-2017 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(x){'use strict';function L(a,b){b=b||Error;return function(){var d=arguments[0],c;c="["+(a?a+":":"")+d+"] http://errors.angularjs.org/1.6.4/"+(a?a+"/":"")+d;for(d=1;d<arguments.length;d++){c=c+(1==d?"?":"&")+"p"+(d-1)+"=";var e=encodeURIComponent,f;f=arguments[d];f="function"==typeof f?f.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof f?"undefined":"string"!=typeof f?JSON.stringify(f):f;c+=e(f)}return new b(c)}}function me(a){if(C(a))u(a.objectMaxDepth)&&(Ic.objectMaxDepth=Sb(a.objectMaxDepth)?
a.objectMaxDepth:NaN);else return Ic}function Sb(a){return ba(a)&&0<a}function qa(a){if(null==a||Wa(a))return!1;if(H(a)||F(a)||B&&a instanceof B)return!0;var b="length"in Object(a)&&a.length;return ba(b)&&(0<=b&&(b-1 in a||a instanceof Array)||"function"===typeof a.item)}function q(a,b,d){var c,e;if(a)if(D(a))for(c in a)"prototype"!==c&&"length"!==c&&"name"!==c&&a.hasOwnProperty(c)&&b.call(d,a[c],c,a);else if(H(a)||qa(a)){var f="object"!==typeof a;c=0;for(e=a.length;c<e;c++)(f||c in a)&&b.call(d,
a[c],c,a)}else if(a.forEach&&a.forEach!==q)a.forEach(b,d,a);else if(Jc(a))for(c in a)b.call(d,a[c],c,a);else if("function"===typeof a.hasOwnProperty)for(c in a)a.hasOwnProperty(c)&&b.call(d,a[c],c,a);else for(c in a)ua.call(a,c)&&b.call(d,a[c],c,a);return a}function Kc(a,b,d){for(var c=Object.keys(a).sort(),e=0;e<c.length;e++)b.call(d,a[c[e]],c[e]);return c}function Lc(a){return function(b,d){a(d,b)}}function ne(){return++qb}function Tb(a,b,d){for(var c=a.$$hashKey,e=0,f=b.length;e<f;++e){var g=b[e];
if(C(g)||D(g))for(var h=Object.keys(g),k=0,l=h.length;k<l;k++){var m=h[k],n=g[m];d&&C(n)?ga(n)?a[m]=new Date(n.valueOf()):Xa(n)?a[m]=new RegExp(n):n.nodeName?a[m]=n.cloneNode(!0):Ub(n)?a[m]=n.clone():(C(a[m])||(a[m]=H(n)?[]:{}),Tb(a[m],[n],!0)):a[m]=n}}c?a.$$hashKey=c:delete a.$$hashKey;return a}function S(a){return Tb(a,va.call(arguments,1),!1)}function oe(a){return Tb(a,va.call(arguments,1),!0)}function Z(a){return parseInt(a,10)}function Vb(a,b){return S(Object.create(a),b)}function z(){}function Ya(a){return a}
function la(a){return function(){return a}}function Wb(a){return D(a.toString)&&a.toString!==ma}function w(a){return"undefined"===typeof a}function u(a){return"undefined"!==typeof a}function C(a){return null!==a&&"object"===typeof a}function Jc(a){return null!==a&&"object"===typeof a&&!Mc(a)}function F(a){return"string"===typeof a}function ba(a){return"number"===typeof a}function ga(a){return"[object Date]"===ma.call(a)}function D(a){return"function"===typeof a}function Xa(a){return"[object RegExp]"===
ma.call(a)}function Wa(a){return a&&a.window===a}function Za(a){return a&&a.$evalAsync&&a.$watch}function Ha(a){return"boolean"===typeof a}function pe(a){return a&&ba(a.length)&&qe.test(ma.call(a))}function Ub(a){return!(!a||!(a.nodeName||a.prop&&a.attr&&a.find))}function re(a){var b={};a=a.split(",");var d;for(d=0;d<a.length;d++)b[a[d]]=!0;return b}function wa(a){return Q(a.nodeName||a[0]&&a[0].nodeName)}function $a(a,b){var d=a.indexOf(b);0<=d&&a.splice(d,1);return d}function ra(a,b,d){function c(a,
b,c){c--;if(0>c)return"...";var d=b.$$hashKey,f;if(H(a)){f=0;for(var g=a.length;f<g;f++)b.push(e(a[f],c))}else if(Jc(a))for(f in a)b[f]=e(a[f],c);else if(a&&"function"===typeof a.hasOwnProperty)for(f in a)a.hasOwnProperty(f)&&(b[f]=e(a[f],c));else for(f in a)ua.call(a,f)&&(b[f]=e(a[f],c));d?b.$$hashKey=d:delete b.$$hashKey;return b}function e(a,b){if(!C(a))return a;var d=g.indexOf(a);if(-1!==d)return h[d];if(Wa(a)||Za(a))throw Fa("cpws");var d=!1,e=f(a);void 0===e&&(e=H(a)?[]:Object.create(Mc(a)),
d=!0);g.push(a);h.push(e);return d?c(a,e,b):e}function f(a){switch(ma.call(a)){case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Float32Array]":case "[object Float64Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return new a.constructor(e(a.buffer),a.byteOffset,a.length);case "[object ArrayBuffer]":if(!a.slice){var b=new ArrayBuffer(a.byteLength);(new Uint8Array(b)).set(new Uint8Array(a));
return b}return a.slice(0);case "[object Boolean]":case "[object Number]":case "[object String]":case "[object Date]":return new a.constructor(a.valueOf());case "[object RegExp]":return b=new RegExp(a.source,a.toString().match(/[^/]*$/)[0]),b.lastIndex=a.lastIndex,b;case "[object Blob]":return new a.constructor([a],{type:a.type})}if(D(a.cloneNode))return a.cloneNode(!0)}var g=[],h=[];d=Sb(d)?d:NaN;if(b){if(pe(b)||"[object ArrayBuffer]"===ma.call(b))throw Fa("cpta");if(a===b)throw Fa("cpi");H(b)?b.length=
0:q(b,function(a,c){"$$hashKey"!==c&&delete b[c]});g.push(a);h.push(b);return c(a,b,d)}return e(a,d)}function Xb(a,b){return a===b||a!==a&&b!==b}function sa(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var d=typeof a,c;if(d===typeof b&&"object"===d)if(H(a)){if(!H(b))return!1;if((d=a.length)===b.length){for(c=0;c<d;c++)if(!sa(a[c],b[c]))return!1;return!0}}else{if(ga(a))return ga(b)?Xb(a.getTime(),b.getTime()):!1;if(Xa(a))return Xa(b)?a.toString()===b.toString():!1;
if(Za(a)||Za(b)||Wa(a)||Wa(b)||H(b)||ga(b)||Xa(b))return!1;d=V();for(c in a)if("$"!==c.charAt(0)&&!D(a[c])){if(!sa(a[c],b[c]))return!1;d[c]=!0}for(c in b)if(!(c in d)&&"$"!==c.charAt(0)&&u(b[c])&&!D(b[c]))return!1;return!0}return!1}function ab(a,b,d){return a.concat(va.call(b,d))}function bb(a,b){var d=2<arguments.length?va.call(arguments,2):[];return!D(b)||b instanceof RegExp?b:d.length?function(){return arguments.length?b.apply(a,ab(d,arguments,0)):b.apply(a,d)}:function(){return arguments.length?
b.apply(a,arguments):b.call(a)}}function Nc(a,b){var d=b;"string"===typeof a&&"$"===a.charAt(0)&&"$"===a.charAt(1)?d=void 0:Wa(b)?d="$WINDOW":b&&x.document===b?d="$DOCUMENT":Za(b)&&(d="$SCOPE");return d}function cb(a,b){if(!w(a))return ba(b)||(b=b?2:null),JSON.stringify(a,Nc,b)}function Oc(a){return F(a)?JSON.parse(a):a}function Pc(a,b){a=a.replace(se,"");var d=Date.parse("Jan 01, 1970 00:00:00 "+a)/6E4;return da(d)?b:d}function Yb(a,b,d){d=d?-1:1;var c=a.getTimezoneOffset();b=Pc(b,c);d*=b-c;a=new Date(a.getTime());
a.setMinutes(a.getMinutes()+d);return a}function xa(a){a=B(a).clone();try{a.empty()}catch(b){}var d=B("<div>").append(a).html();try{return a[0].nodeType===Ia?Q(d):d.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(a,b){return"<"+Q(b)})}catch(c){return Q(d)}}function Qc(a){try{return decodeURIComponent(a)}catch(b){}}function Rc(a){var b={};q((a||"").split("&"),function(a){var c,e,f;a&&(e=a=a.replace(/\+/g,"%20"),c=a.indexOf("="),-1!==c&&(e=a.substring(0,c),f=a.substring(c+1)),e=Qc(e),u(e)&&(f=
u(f)?Qc(f):!0,ua.call(b,e)?H(b[e])?b[e].push(f):b[e]=[b[e],f]:b[e]=f))});return b}function Zb(a){var b=[];q(a,function(a,c){H(a)?q(a,function(a){b.push($(c,!0)+(!0===a?"":"="+$(a,!0)))}):b.push($(c,!0)+(!0===a?"":"="+$(a,!0)))});return b.length?b.join("&"):""}function db(a){return $(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function $(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,
b?"%20":"+")}function te(a,b){var d,c,e=Ja.length;for(c=0;c<e;++c)if(d=Ja[c]+b,F(d=a.getAttribute(d)))return d;return null}function ue(a,b){var d,c,e={};q(Ja,function(b){b+="app";!d&&a.hasAttribute&&a.hasAttribute(b)&&(d=a,c=a.getAttribute(b))});q(Ja,function(b){b+="app";var e;!d&&(e=a.querySelector("["+b.replace(":","\\:")+"]"))&&(d=e,c=e.getAttribute(b))});d&&(ve?(e.strictDi=null!==te(d,"strict-di"),b(d,c?[c]:[],e)):x.console.error("Angular: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match."))}
function Sc(a,b,d){C(d)||(d={});d=S({strictDi:!1},d);var c=function(){a=B(a);if(a.injector()){var c=a[0]===x.document?"document":xa(a);throw Fa("btstrpd",c.replace(/</,"&lt;").replace(/>/,"&gt;"));}b=b||[];b.unshift(["$provide",function(b){b.value("$rootElement",a)}]);d.debugInfoEnabled&&b.push(["$compileProvider",function(a){a.debugInfoEnabled(!0)}]);b.unshift("ng");c=eb(b,d.strictDi);c.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",
d);c(b)(a)})}]);return c},e=/^NG_ENABLE_DEBUG_INFO!/,f=/^NG_DEFER_BOOTSTRAP!/;x&&e.test(x.name)&&(d.debugInfoEnabled=!0,x.name=x.name.replace(e,""));if(x&&!f.test(x.name))return c();x.name=x.name.replace(f,"");ea.resumeBootstrap=function(a){q(a,function(a){b.push(a)});return c()};D(ea.resumeDeferredBootstrap)&&ea.resumeDeferredBootstrap()}function we(){x.name="NG_ENABLE_DEBUG_INFO!"+x.name;x.location.reload()}function xe(a){a=ea.element(a).injector();if(!a)throw Fa("test");return a.get("$$testability")}
function Tc(a,b){b=b||"_";return a.replace(ye,function(a,c){return(c?b:"")+a.toLowerCase()})}function ze(){var a;if(!Uc){var b=rb();(na=w(b)?x.jQuery:b?x[b]:void 0)&&na.fn.on?(B=na,S(na.fn,{scope:Na.scope,isolateScope:Na.isolateScope,controller:Na.controller,injector:Na.injector,inheritedData:Na.inheritedData}),a=na.cleanData,na.cleanData=function(b){for(var c,e=0,f;null!=(f=b[e]);e++)(c=na._data(f,"events"))&&c.$destroy&&na(f).triggerHandler("$destroy");a(b)}):B=W;ea.element=B;Uc=!0}}function fb(a,
b,d){if(!a)throw Fa("areq",b||"?",d||"required");return a}function sb(a,b,d){d&&H(a)&&(a=a[a.length-1]);fb(D(a),b,"not a function, got "+(a&&"object"===typeof a?a.constructor.name||"Object":typeof a));return a}function Ka(a,b){if("hasOwnProperty"===a)throw Fa("badname",b);}function Vc(a,b,d){if(!b)return a;b=b.split(".");for(var c,e=a,f=b.length,g=0;g<f;g++)c=b[g],a&&(a=(e=a)[c]);return!d&&D(a)?bb(e,a):a}function tb(a){for(var b=a[0],d=a[a.length-1],c,e=1;b!==d&&(b=b.nextSibling);e++)if(c||a[e]!==
b)c||(c=B(va.call(a,0,e))),c.push(b);return c||a}function V(){return Object.create(null)}function $b(a){if(null==a)return"";switch(typeof a){case "string":break;case "number":a=""+a;break;default:a=!Wb(a)||H(a)||ga(a)?cb(a):a.toString()}return a}function Ae(a){function b(a,b,c){return a[b]||(a[b]=c())}var d=L("$injector"),c=L("ng");a=b(a,"angular",Object);a.$$minErr=a.$$minErr||L;return b(a,"module",function(){var a={};return function(f,g,h){var k={};if("hasOwnProperty"===f)throw c("badname","module");
g&&a.hasOwnProperty(f)&&(a[f]=null);return b(a,f,function(){function a(b,c,d,f){f||(f=e);return function(){f[d||"push"]([b,c,arguments]);return v}}function b(a,c,d){d||(d=e);return function(b,e){e&&D(e)&&(e.$$moduleName=f);d.push([a,c,arguments]);return v}}if(!g)throw d("nomod",f);var e=[],p=[],r=[],J=a("$injector","invoke","push",p),v={_invokeQueue:e,_configBlocks:p,_runBlocks:r,info:function(a){if(u(a)){if(!C(a))throw c("aobj","value");k=a;return this}return k},requires:g,name:f,provider:b("$provide",
"provider"),factory:b("$provide","factory"),service:b("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),decorator:b("$provide","decorator",p),animation:b("$animateProvider","register"),filter:b("$filterProvider","register"),controller:b("$controllerProvider","register"),directive:b("$compileProvider","directive"),component:b("$compileProvider","component"),config:J,run:function(a){r.push(a);return this}};h&&J(h);return v})}})}function pa(a,b){if(H(a)){b=
b||[];for(var d=0,c=a.length;d<c;d++)b[d]=a[d]}else if(C(a))for(d in b=b||{},a)if("$"!==d.charAt(0)||"$"!==d.charAt(1))b[d]=a[d];return b||a}function Be(a,b){var d=[];Sb(b)&&(a=ra(a,null,b));return JSON.stringify(a,function(a,b){b=Nc(a,b);if(C(b)){if(0<=d.indexOf(b))return"...";d.push(b)}return b})}function Ce(a){S(a,{errorHandlingConfig:me,bootstrap:Sc,copy:ra,extend:S,merge:oe,equals:sa,element:B,forEach:q,injector:eb,noop:z,bind:bb,toJson:cb,fromJson:Oc,identity:Ya,isUndefined:w,isDefined:u,isString:F,
isFunction:D,isObject:C,isNumber:ba,isElement:Ub,isArray:H,version:De,isDate:ga,lowercase:Q,uppercase:ub,callbacks:{$$counter:0},getTestability:xe,reloadWithDebugInfo:we,$$minErr:L,$$csp:Ga,$$encodeUriSegment:db,$$encodeUriQuery:$,$$stringify:$b});ac=Ae(x);ac("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:Ee});a.provider("$compile",Wc).directive({a:Fe,input:Xc,textarea:Xc,form:Ge,script:He,select:Ie,option:Je,ngBind:Ke,ngBindHtml:Le,ngBindTemplate:Me,ngClass:Ne,ngClassEven:Oe,
ngClassOdd:Pe,ngCloak:Qe,ngController:Re,ngForm:Se,ngHide:Te,ngIf:Ue,ngInclude:Ve,ngInit:We,ngNonBindable:Xe,ngPluralize:Ye,ngRepeat:Ze,ngShow:$e,ngStyle:af,ngSwitch:bf,ngSwitchWhen:cf,ngSwitchDefault:df,ngOptions:ef,ngTransclude:ff,ngModel:gf,ngList:hf,ngChange:jf,pattern:Yc,ngPattern:Yc,required:Zc,ngRequired:Zc,minlength:$c,ngMinlength:$c,maxlength:ad,ngMaxlength:ad,ngValue:kf,ngModelOptions:lf}).directive({ngInclude:mf}).directive(vb).directive(bd);a.provider({$anchorScroll:nf,$animate:of,$animateCss:pf,
$$animateJs:qf,$$animateQueue:rf,$$AnimateRunner:sf,$$animateAsyncRun:tf,$browser:uf,$cacheFactory:vf,$controller:wf,$document:xf,$$isDocumentHidden:yf,$exceptionHandler:zf,$filter:cd,$$forceReflow:Af,$interpolate:Bf,$interval:Cf,$http:Df,$httpParamSerializer:Ef,$httpParamSerializerJQLike:Ff,$httpBackend:Gf,$xhrFactory:Hf,$jsonpCallbacks:If,$location:Jf,$log:Kf,$parse:Lf,$rootScope:Mf,$q:Nf,$$q:Of,$sce:Pf,$sceDelegate:Qf,$sniffer:Rf,$templateCache:Sf,$templateRequest:Tf,$$testability:Uf,$timeout:Vf,
$window:Wf,$$rAF:Xf,$$jqLite:Yf,$$Map:Zf,$$cookieReader:$f})}]).info({angularVersion:"1.6.4"})}function gb(a,b){return b.toUpperCase()}function wb(a){return a.replace(ag,gb)}function bc(a){a=a.nodeType;return 1===a||!a||9===a}function dd(a,b){var d,c,e=b.createDocumentFragment(),f=[];if(cc.test(a)){d=e.appendChild(b.createElement("div"));c=(bg.exec(a)||["",""])[1].toLowerCase();c=ha[c]||ha._default;d.innerHTML=c[1]+a.replace(cg,"<$1></$2>")+c[2];for(c=c[0];c--;)d=d.lastChild;f=ab(f,d.childNodes);
d=e.firstChild;d.textContent=""}else f.push(b.createTextNode(a));e.textContent="";e.innerHTML="";q(f,function(a){e.appendChild(a)});return e}function W(a){if(a instanceof W)return a;var b;F(a)&&(a=T(a),b=!0);if(!(this instanceof W)){if(b&&"<"!==a.charAt(0))throw dc("nosel");return new W(a)}if(b){b=x.document;var d;a=(d=dg.exec(a))?[b.createElement(d[1])]:(d=dd(a,b))?d.childNodes:[];ec(this,a)}else D(a)?ed(a):ec(this,a)}function fc(a){return a.cloneNode(!0)}function xb(a,b){!b&&bc(a)&&B.cleanData([a]);
a.querySelectorAll&&B.cleanData(a.querySelectorAll("*"))}function fd(a,b,d,c){if(u(c))throw dc("offargs");var e=(c=yb(a))&&c.events,f=c&&c.handle;if(f)if(b){var g=function(b){var c=e[b];u(d)&&$a(c||[],d);u(d)&&c&&0<c.length||(a.removeEventListener(b,f),delete e[b])};q(b.split(" "),function(a){g(a);zb[a]&&g(zb[a])})}else for(b in e)"$destroy"!==b&&a.removeEventListener(b,f),delete e[b]}function gc(a,b){var d=a.ng339,c=d&&hb[d];c&&(b?delete c.data[b]:(c.handle&&(c.events.$destroy&&c.handle({},"$destroy"),
fd(a)),delete hb[d],a.ng339=void 0))}function yb(a,b){var d=a.ng339,d=d&&hb[d];b&&!d&&(a.ng339=d=++eg,d=hb[d]={events:{},data:{},handle:void 0});return d}function hc(a,b,d){if(bc(a)){var c,e=u(d),f=!e&&b&&!C(b),g=!b;a=(a=yb(a,!f))&&a.data;if(e)a[wb(b)]=d;else{if(g)return a;if(f)return a&&a[wb(b)];for(c in b)a[wb(c)]=b[c]}}}function Ab(a,b){return a.getAttribute?-1<(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" "):!1}function Bb(a,b){b&&a.setAttribute&&q(b.split(" "),
function(b){a.setAttribute("class",T((" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+T(b)+" "," ")))})}function Cb(a,b){if(b&&a.setAttribute){var d=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");q(b.split(" "),function(a){a=T(a);-1===d.indexOf(" "+a+" ")&&(d+=a+" ")});a.setAttribute("class",T(d))}}function ec(a,b){if(b)if(b.nodeType)a[a.length++]=b;else{var d=b.length;if("number"===typeof d&&b.window!==b){if(d)for(var c=0;c<d;c++)a[a.length++]=b[c]}else a[a.length++]=
b}}function gd(a,b){return Db(a,"$"+(b||"ngController")+"Controller")}function Db(a,b,d){9===a.nodeType&&(a=a.documentElement);for(b=H(b)?b:[b];a;){for(var c=0,e=b.length;c<e;c++)if(u(d=B.data(a,b[c])))return d;a=a.parentNode||11===a.nodeType&&a.host}}function hd(a){for(xb(a,!0);a.firstChild;)a.removeChild(a.firstChild)}function Eb(a,b){b||xb(a);var d=a.parentNode;d&&d.removeChild(a)}function fg(a,b){b=b||x;if("complete"===b.document.readyState)b.setTimeout(a);else B(b).on("load",a)}function ed(a){function b(){x.document.removeEventListener("DOMContentLoaded",
b);x.removeEventListener("load",b);a()}"complete"===x.document.readyState?x.setTimeout(a):(x.document.addEventListener("DOMContentLoaded",b),x.addEventListener("load",b))}function id(a,b){var d=Fb[b.toLowerCase()];return d&&jd[wa(a)]&&d}function gg(a,b){var d=function(c,d){c.isDefaultPrevented=function(){return c.defaultPrevented};var f=b[d||c.type],g=f?f.length:0;if(g){if(w(c.immediatePropagationStopped)){var h=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=
!0;c.stopPropagation&&c.stopPropagation();h&&h.call(c)}}c.isImmediatePropagationStopped=function(){return!0===c.immediatePropagationStopped};var k=f.specialHandlerWrapper||hg;1<g&&(f=pa(f));for(var l=0;l<g;l++)c.isImmediatePropagationStopped()||k(a,c,f[l])}};d.elem=a;return d}function hg(a,b,d){d.call(a,b)}function ig(a,b,d){var c=b.relatedTarget;c&&(c===a||jg.call(a,c))||d.call(a,b)}function Yf(){this.$get=function(){return S(W,{hasClass:function(a,b){a.attr&&(a=a[0]);return Ab(a,b)},addClass:function(a,
b){a.attr&&(a=a[0]);return Cb(a,b)},removeClass:function(a,b){a.attr&&(a=a[0]);return Bb(a,b)}})}}function Pa(a,b){var d=a&&a.$$hashKey;if(d)return"function"===typeof d&&(d=a.$$hashKey()),d;d=typeof a;return d="function"===d||"object"===d&&null!==a?a.$$hashKey=d+":"+(b||ne)():d+":"+a}function kd(){this._keys=[];this._values=[];this._lastKey=NaN;this._lastIndex=-1}function ld(a){a=Function.prototype.toString.call(a).replace(kg,"");return a.match(lg)||a.match(mg)}function ng(a){return(a=ld(a))?"function("+
(a[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function eb(a,b){function d(a){return function(b,c){if(C(b))q(b,Lc(a));else return a(b,c)}}function c(a,b){Ka(a,"service");if(D(b)||H(b))b=p.instantiate(b);if(!b.$get)throw ya("pget",a);return n[a+"Provider"]=b}function e(a,b){return function(){var c=v.invoke(b,this);if(w(c))throw ya("undef",a);return c}}function f(a,b,d){return c(a,{$get:!1!==d?e(a,b):b})}function g(a){fb(w(a)||H(a),"modulesToLoad","not an array");var b=[],c;q(a,function(a){function d(a){var b,
c;b=0;for(c=a.length;b<c;b++){var e=a[b],f=p.get(e[0]);f[e[1]].apply(f,e[2])}}if(!m.get(a)){m.set(a,!0);try{F(a)?(c=ac(a),v.modules[a]=c,b=b.concat(g(c.requires)).concat(c._runBlocks),d(c._invokeQueue),d(c._configBlocks)):D(a)?b.push(p.invoke(a)):H(a)?b.push(p.invoke(a)):sb(a,"module")}catch(e){throw H(a)&&(a=a[a.length-1]),e.message&&e.stack&&-1===e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),ya("modulerr",a,e.stack||e.message||e);}}});return b}function h(a,c){function d(b,e){if(a.hasOwnProperty(b)){if(a[b]===
k)throw ya("cdep",b+" <- "+l.join(" <- "));return a[b]}try{return l.unshift(b),a[b]=k,a[b]=c(b,e),a[b]}catch(f){throw a[b]===k&&delete a[b],f;}finally{l.shift()}}function e(a,c,f){var g=[];a=eb.$$annotate(a,b,f);for(var k=0,h=a.length;k<h;k++){var l=a[k];if("string"!==typeof l)throw ya("itkn",l);g.push(c&&c.hasOwnProperty(l)?c[l]:d(l,f))}return g}return{invoke:function(a,b,c,d){"string"===typeof c&&(d=c,c=null);c=e(a,c,d);H(a)&&(a=a[a.length-1]);d=a;if(za||"function"!==typeof d)d=!1;else{var f=d.$$ngIsClass;
Ha(f)||(f=d.$$ngIsClass=/^(?:class\b|constructor\()/.test(Function.prototype.toString.call(d)));d=f}return d?(c.unshift(null),new (Function.prototype.bind.apply(a,c))):a.apply(b,c)},instantiate:function(a,b,c){var d=H(a)?a[a.length-1]:a;a=e(a,b,c);a.unshift(null);return new (Function.prototype.bind.apply(d,a))},get:d,annotate:eb.$$annotate,has:function(b){return n.hasOwnProperty(b+"Provider")||a.hasOwnProperty(b)}}}b=!0===b;var k={},l=[],m=new Gb,n={$provide:{provider:d(c),factory:d(f),service:d(function(a,
b){return f(a,["$injector",function(a){return a.instantiate(b)}])}),value:d(function(a,b){return f(a,la(b),!1)}),constant:d(function(a,b){Ka(a,"constant");n[a]=b;r[a]=b}),decorator:function(a,b){var c=p.get(a+"Provider"),d=c.$get;c.$get=function(){var a=v.invoke(d,c);return v.invoke(b,null,{$delegate:a})}}}},p=n.$injector=h(n,function(a,b){ea.isString(b)&&l.push(b);throw ya("unpr",l.join(" <- "));}),r={},J=h(r,function(a,b){var c=p.get(a+"Provider",b);return v.invoke(c.$get,c,void 0,a)}),v=J;n.$injectorProvider=
{$get:la(J)};v.modules=p.modules=V();var t=g(a),v=J.get("$injector");v.strictDi=b;q(t,function(a){a&&v.invoke(a)});return v}function nf(){var a=!0;this.disableAutoScrolling=function(){a=!1};this.$get=["$window","$location","$rootScope",function(b,d,c){function e(a){var b=null;Array.prototype.some.call(a,function(a){if("a"===wa(a))return b=a,!0});return b}function f(a){if(a){a.scrollIntoView();var c;c=g.yOffset;D(c)?c=c():Ub(c)?(c=c[0],c="fixed"!==b.getComputedStyle(c).position?0:c.getBoundingClientRect().bottom):
ba(c)||(c=0);c&&(a=a.getBoundingClientRect().top,b.scrollBy(0,a-c))}else b.scrollTo(0,0)}function g(a){a=F(a)?a:ba(a)?a.toString():d.hash();var b;a?(b=h.getElementById(a))?f(b):(b=e(h.getElementsByName(a)))?f(b):"top"===a&&f(null):f(null)}var h=b.document;a&&c.$watch(function(){return d.hash()},function(a,b){a===b&&""===a||fg(function(){c.$evalAsync(g)})});return g}]}function ib(a,b){if(!a&&!b)return"";if(!a)return b;if(!b)return a;H(a)&&(a=a.join(" "));H(b)&&(b=b.join(" "));return a+" "+b}function og(a){F(a)&&
(a=a.split(" "));var b=V();q(a,function(a){a.length&&(b[a]=!0)});return b}function ia(a){return C(a)?a:{}}function pg(a,b,d,c){function e(a){try{a.apply(null,va.call(arguments,1))}finally{if(J--,0===J)for(;v.length;)try{v.pop()()}catch(b){d.error(b)}}}function f(){Oa=null;h()}function g(){t=I();t=w(t)?null:t;sa(t,G)&&(t=G);M=G=t}function h(){var a=M;g();if(N!==k.url()||a!==t)N=k.url(),M=t,q(K,function(a){a(k.url(),t)})}var k=this,l=a.location,m=a.history,n=a.setTimeout,p=a.clearTimeout,r={};k.isMock=
!1;var J=0,v=[];k.$$completeOutstandingRequest=e;k.$$incOutstandingRequestCount=function(){J++};k.notifyWhenNoOutstandingRequests=function(a){0===J?a():v.push(a)};var t,M,N=l.href,A=b.find("base"),Oa=null,I=c.history?function(){try{return m.state}catch(a){}}:z;g();k.url=function(b,d,e){w(e)&&(e=null);l!==a.location&&(l=a.location);m!==a.history&&(m=a.history);if(b){var f=M===e;if(N===b&&(!c.history||f))return k;var h=N&&Aa(N)===Aa(b);N=b;M=e;!c.history||h&&f?(h||(Oa=b),d?l.replace(b):h?(d=l,e=b.indexOf("#"),
e=-1===e?"":b.substr(e),d.hash=e):l.href=b,l.href!==b&&(Oa=b)):(m[d?"replaceState":"pushState"](e,"",b),g());Oa&&(Oa=b);return k}return Oa||l.href.replace(/%27/g,"'")};k.state=function(){return t};var K=[],E=!1,G=null;k.onUrlChange=function(b){if(!E){if(c.history)B(a).on("popstate",f);B(a).on("hashchange",f);E=!0}K.push(b);return b};k.$$applicationDestroyed=function(){B(a).off("hashchange popstate",f)};k.$$checkUrlChange=h;k.baseHref=function(){var a=A.attr("href");return a?a.replace(/^(https?:)?\/\/[^/]*/,
""):""};k.defer=function(a,b){var c;J++;c=n(function(){delete r[c];e(a)},b||0);r[c]=!0;return c};k.defer.cancel=function(a){return r[a]?(delete r[a],p(a),e(z),!0):!1}}function uf(){this.$get=["$window","$log","$sniffer","$document",function(a,b,d,c){return new pg(a,c,b,d)}]}function vf(){this.$get=function(){function a(a,c){function e(a){a!==n&&(p?p===a&&(p=a.n):p=a,f(a.n,a.p),f(a,n),n=a,n.n=null)}function f(a,b){a!==b&&(a&&(a.p=b),b&&(b.n=a))}if(a in b)throw L("$cacheFactory")("iid",a);var g=0,h=
S({},c,{id:a}),k=V(),l=c&&c.capacity||Number.MAX_VALUE,m=V(),n=null,p=null;return b[a]={put:function(a,b){if(!w(b)){if(l<Number.MAX_VALUE){var c=m[a]||(m[a]={key:a});e(c)}a in k||g++;k[a]=b;g>l&&this.remove(p.key);return b}},get:function(a){if(l<Number.MAX_VALUE){var b=m[a];if(!b)return;e(b)}return k[a]},remove:function(a){if(l<Number.MAX_VALUE){var b=m[a];if(!b)return;b===n&&(n=b.p);b===p&&(p=b.n);f(b.n,b.p);delete m[a]}a in k&&(delete k[a],g--)},removeAll:function(){k=V();g=0;m=V();n=p=null},destroy:function(){m=
h=k=null;delete b[a]},info:function(){return S({},h,{size:g})}}}var b={};a.info=function(){var a={};q(b,function(b,e){a[e]=b.info()});return a};a.get=function(a){return b[a]};return a}}function Sf(){this.$get=["$cacheFactory",function(a){return a("templates")}]}function Wc(a,b){function d(a,b,c){var d=/^\s*([@&<]|=(\*?))(\??)\s*([\w$]*)\s*$/,e=V();q(a,function(a,f){if(a in n)e[f]=n[a];else{var g=a.match(d);if(!g)throw fa("iscp",b,f,a,c?"controller bindings definition":"isolate scope definition");
e[f]={mode:g[1][0],collection:"*"===g[2],optional:"?"===g[3],attrName:g[4]||f};g[4]&&(n[a]=e[f])}});return e}function c(a){var b=a.charAt(0);if(!b||b!==Q(b))throw fa("baddir",a);if(a!==a.trim())throw fa("baddir",a);}function e(a){var b=a.require||a.controller&&a.name;!H(b)&&C(b)&&q(b,function(a,c){var d=a.match(l);a.substring(d[0].length)||(b[c]=d[0]+c)});return b}var f={},g=/^\s*directive:\s*([\w-]+)\s+(.*)$/,h=/(([\w-]+)(?::([^;]+))?;?)/,k=re("ngSrc,ngSrcset,src,srcset"),l=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,
m=/^(on[a-z]+|formaction)$/,n=V();this.directive=function N(b,d){fb(b,"name");Ka(b,"directive");F(b)?(c(b),fb(d,"directiveFactory"),f.hasOwnProperty(b)||(f[b]=[],a.factory(b+"Directive",["$injector","$exceptionHandler",function(a,c){var d=[];q(f[b],function(f,g){try{var h=a.invoke(f);D(h)?h={compile:la(h)}:!h.compile&&h.link&&(h.compile=la(h.link));h.priority=h.priority||0;h.index=g;h.name=h.name||b;h.require=e(h);var k=h,l=h.restrict;if(l&&(!F(l)||!/[EACM]/.test(l)))throw fa("badrestrict",l,b);k.restrict=
l||"EA";h.$$moduleName=f.$$moduleName;d.push(h)}catch(m){c(m)}});return d}])),f[b].push(d)):q(b,Lc(N));return this};this.component=function(a,b){function c(a){function e(b){return D(b)||H(b)?function(c,d){return a.invoke(b,this,{$element:c,$attrs:d})}:b}var f=b.template||b.templateUrl?b.template:"",g={controller:d,controllerAs:qg(b.controller)||b.controllerAs||"$ctrl",template:e(f),templateUrl:e(b.templateUrl),transclude:b.transclude,scope:{},bindToController:b.bindings||{},restrict:"E",require:b.require};
q(b,function(a,b){"$"===b.charAt(0)&&(g[b]=a)});return g}var d=b.controller||function(){};q(b,function(a,b){"$"===b.charAt(0)&&(c[b]=a,D(d)&&(d[b]=a))});c.$inject=["$injector"];return this.directive(a,c)};this.aHrefSanitizationWhitelist=function(a){return u(a)?(b.aHrefSanitizationWhitelist(a),this):b.aHrefSanitizationWhitelist()};this.imgSrcSanitizationWhitelist=function(a){return u(a)?(b.imgSrcSanitizationWhitelist(a),this):b.imgSrcSanitizationWhitelist()};var p=!0;this.debugInfoEnabled=function(a){return u(a)?
(p=a,this):p};var r=!1;this.preAssignBindingsEnabled=function(a){return u(a)?(r=a,this):r};var J=10;this.onChangesTtl=function(a){return arguments.length?(J=a,this):J};var v=!0;this.commentDirectivesEnabled=function(a){return arguments.length?(v=a,this):v};var t=!0;this.cssClassDirectivesEnabled=function(a){return arguments.length?(t=a,this):t};this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(a,
b,c,e,n,E,G,y,O,X){function P(){try{if(!--ya)throw ia=void 0,fa("infchng",J);G.$apply(function(){for(var a=[],b=0,c=ia.length;b<c;++b)try{ia[b]()}catch(d){a.push(d)}ia=void 0;if(a.length)throw a;})}finally{ya++}}function s(a,b){if(b){var c=Object.keys(b),d,e,f;d=0;for(e=c.length;d<e;d++)f=c[d],this[f]=b[f]}else this.$attr={};this.$$element=a}function R(a,b,c){ta.innerHTML="<span "+b+">";b=ta.firstChild.attributes;var d=b[0];b.removeNamedItem(d.name);d.value=c;a.attributes.setNamedItem(d)}function La(a,
b){try{a.addClass(b)}catch(c){}}function ca(a,b,c,d,e){a instanceof B||(a=B(a));var f=Ma(a,b,a,c,d,e);ca.$$addScopeClass(a);var g=null;return function(b,c,d){if(!a)throw fa("multilink");fb(b,"scope");e&&e.needsNewScope&&(b=b.$parent.$new());d=d||{};var h=d.parentBoundTranscludeFn,k=d.transcludeControllers;d=d.futureParentElement;h&&h.$$boundTransclude&&(h=h.$$boundTransclude);g||(g=(d=d&&d[0])?"foreignobject"!==wa(d)&&ma.call(d).match(/SVG/)?"svg":"html":"html");d="html"!==g?B(ha(g,B("<div>").append(a).html())):
c?Na.clone.call(a):a;if(k)for(var l in k)d.data("$"+l+"Controller",k[l].instance);ca.$$addScopeInfo(d,b);c&&c(d,b);f&&f(b,d,d,h);c||(a=f=null);return d}}function Ma(a,b,c,d,e,f){function g(a,c,d,e){var f,k,l,m,n,p,r;if(K)for(r=Array(c.length),m=0;m<h.length;m+=3)f=h[m],r[f]=c[f];else r=c;m=0;for(n=h.length;m<n;)k=r[h[m++]],c=h[m++],f=h[m++],c?(c.scope?(l=a.$new(),ca.$$addScopeInfo(B(k),l)):l=a,p=c.transcludeOnThisElement?ja(a,c.transclude,e):!c.templateOnThisElement&&e?e:!e&&b?ja(a,b):null,c(f,l,
k,d,p)):f&&f(a,k.childNodes,void 0,e)}for(var h=[],k=H(a)||a instanceof B,l,m,n,p,K,r=0;r<a.length;r++){l=new s;11===za&&L(a,r,k);m=jc(a[r],[],l,0===r?d:void 0,e);(f=m.length?W(m,a[r],l,b,c,null,[],[],f):null)&&f.scope&&ca.$$addScopeClass(l.$$element);l=f&&f.terminal||!(n=a[r].childNodes)||!n.length?null:Ma(n,f?(f.transcludeOnThisElement||!f.templateOnThisElement)&&f.transclude:b);if(f||l)h.push(r,f,l),p=!0,K=K||f;f=null}return p?g:null}function L(a,b,c){var d=a[b],e=d.parentNode,f;if(d.nodeType===
Ia)for(;;){f=e?d.nextSibling:a[b+1];if(!f||f.nodeType!==Ia)break;d.nodeValue+=f.nodeValue;f.parentNode&&f.parentNode.removeChild(f);c&&f===a[b+1]&&a.splice(b+1,1)}}function ja(a,b,c){function d(e,f,g,h,k){e||(e=a.$new(!1,k),e.$$transcluded=!0);return b(e,f,{parentBoundTranscludeFn:c,transcludeControllers:g,futureParentElement:h})}var e=d.$$slots=V(),f;for(f in b.$$slots)e[f]=b.$$slots[f]?ja(a,b.$$slots[f],c):null;return d}function jc(a,b,c,d,e){var f=c.$attr,g;switch(a.nodeType){case 1:g=wa(a);Y(b,
Ba(g),"E",d,e);for(var k,l,m,n,p=a.attributes,K=0,r=p&&p.length;K<r;K++){var G=!1,E=!1;k=p[K];l=k.name;m=k.value;k=Ba(l);(n=Ja.test(k))&&(l=l.replace(md,"").substr(8).replace(/_(.)/g,function(a,b){return b.toUpperCase()}));(k=k.match(Ka))&&Z(k[1])&&(G=l,E=l.substr(0,l.length-5)+"end",l=l.substr(0,l.length-6));k=Ba(l.toLowerCase());f[k]=l;if(n||!c.hasOwnProperty(k))c[k]=m,id(a,k)&&(c[k]=!0);pa(a,b,m,k,n);Y(b,k,"A",d,e,G,E)}"input"===g&&"hidden"===a.getAttribute("type")&&a.setAttribute("autocomplete",
"off");if(!Ga)break;f=a.className;C(f)&&(f=f.animVal);if(F(f)&&""!==f)for(;a=h.exec(f);)k=Ba(a[2]),Y(b,k,"C",d,e)&&(c[k]=T(a[3])),f=f.substr(a.index+a[0].length);break;case Ia:la(b,a.nodeValue);break;case 8:if(!Fa)break;jb(a,b,c,d,e)}b.sort(ea);return b}function jb(a,b,c,d,e){try{var f=g.exec(a.nodeValue);if(f){var h=Ba(f[1]);Y(b,h,"M",d,e)&&(c[h]=T(f[2]))}}catch(k){}}function nd(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw fa("uterdir",b,c);1===a.nodeType&&(a.hasAttribute(b)&&
e++,a.hasAttribute(c)&&e--);d.push(a);a=a.nextSibling}while(0<e)}else d.push(a);return B(d)}function od(a,b,c){return function(d,e,f,g,h){e=nd(e[0],b,c);return a(d,e,f,g,h)}}function kc(a,b,c,d,e,f){var g;return a?ca(b,c,d,e,f):function(){g||(g=ca(b,c,d,e,f),b=c=f=null);return g.apply(this,arguments)}}function W(a,b,d,e,f,g,h,k,l){function m(a,b,c,d){if(a){c&&(a=od(a,c,d));a.require=y.require;a.directiveName=P;if(E===y||y.$$isolateScope)a=qa(a,{isolateScope:!0});h.push(a)}if(b){c&&(b=od(b,c,d));b.require=
y.require;b.directiveName=P;if(E===y||y.$$isolateScope)b=qa(b,{isolateScope:!0});k.push(b)}}function n(a,e,f,g,l){function m(a,b,c,d){var e;Za(a)||(d=c,c=b,b=a,a=void 0);X&&(e=O);c||(c=X?P.parent():P);if(d){var f=l.$$slots[d];if(f)return f(a,b,e,c,R);if(w(f))throw fa("noslot",d,xa(P));}else return l(a,b,e,c,R)}var p,y,t,v,J,O,N,P;b===f?(g=d,P=d.$$element):(P=B(f),g=new s(P,d));J=e;E?v=e.$new(!0):K&&(J=e.$parent);l&&(N=m,N.$$boundTransclude=l,N.isSlotFilled=function(a){return!!l.$$slots[a]});G&&(O=
ba(P,g,N,G,v,e,E));E&&(ca.$$addScopeInfo(P,v,!0,!(I&&(I===E||I===E.$$originalDirective))),ca.$$addScopeClass(P,!0),v.$$isolateBindings=E.$$isolateBindings,y=na(e,g,v,v.$$isolateBindings,E),y.removeWatches&&v.$on("$destroy",y.removeWatches));for(p in O){y=G[p];t=O[p];var Hb=y.$$bindings.bindToController;if(r){t.bindingInfo=Hb?na(J,g,t.instance,Hb,y):{};var A=t();A!==t.instance&&(t.instance=A,P.data("$"+y.name+"Controller",A),t.bindingInfo.removeWatches&&t.bindingInfo.removeWatches(),t.bindingInfo=
na(J,g,t.instance,Hb,y))}else t.instance=t(),P.data("$"+y.name+"Controller",t.instance),t.bindingInfo=na(J,g,t.instance,Hb,y)}q(G,function(a,b){var c=a.require;a.bindToController&&!H(c)&&C(c)&&S(O[b].instance,U(b,c,P,O))});q(O,function(a){var b=a.instance;if(D(b.$onChanges))try{b.$onChanges(a.bindingInfo.initialChanges)}catch(d){c(d)}if(D(b.$onInit))try{b.$onInit()}catch(e){c(e)}D(b.$doCheck)&&(J.$watch(function(){b.$doCheck()}),b.$doCheck());D(b.$onDestroy)&&J.$on("$destroy",function(){b.$onDestroy()})});
p=0;for(y=h.length;p<y;p++)t=h[p],ra(t,t.isolateScope?v:e,P,g,t.require&&U(t.directiveName,t.require,P,O),N);var R=e;E&&(E.template||null===E.templateUrl)&&(R=v);a&&a(R,f.childNodes,void 0,l);for(p=k.length-1;0<=p;p--)t=k[p],ra(t,t.isolateScope?v:e,P,g,t.require&&U(t.directiveName,t.require,P,O),N);q(O,function(a){a=a.instance;D(a.$postLink)&&a.$postLink()})}l=l||{};for(var p=-Number.MAX_VALUE,K=l.newScopeDirective,G=l.controllerDirectives,E=l.newIsolateScopeDirective,I=l.templateDirective,t=l.nonTlbTranscludeDirective,
J=!1,O=!1,X=l.hasElementTranscludeDirective,v=d.$$element=B(b),y,P,N,A=e,R,u=!1,La=!1,x,z=0,F=a.length;z<F;z++){y=a[z];var Ma=y.$$start,L=y.$$end;Ma&&(v=nd(b,Ma,L));N=void 0;if(p>y.priority)break;if(x=y.scope)y.templateUrl||(C(x)?($("new/isolated scope",E||K,y,v),E=y):$("new/isolated scope",E,y,v)),K=K||y;P=y.name;if(!u&&(y.replace&&(y.templateUrl||y.template)||y.transclude&&!y.$$tlb)){for(x=z+1;u=a[x++];)if(u.transclude&&!u.$$tlb||u.replace&&(u.templateUrl||u.template)){La=!0;break}u=!0}!y.templateUrl&&
y.controller&&(G=G||V(),$("'"+P+"' controller",G[P],y,v),G[P]=y);if(x=y.transclude)if(J=!0,y.$$tlb||($("transclusion",t,y,v),t=y),"element"===x)X=!0,p=y.priority,N=v,v=d.$$element=B(ca.$$createComment(P,d[P])),b=v[0],ka(f,va.call(N,0),b),N[0].$$parentNode=N[0].parentNode,A=kc(La,N,e,p,g&&g.name,{nonTlbTranscludeDirective:t});else{var ja=V();if(C(x)){N=[];var Q=V(),jb=V();q(x,function(a,b){var c="?"===a.charAt(0);a=c?a.substring(1):a;Q[a]=b;ja[b]=null;jb[b]=c});q(v.contents(),function(a){var b=Q[Ba(wa(a))];
b?(jb[b]=!0,ja[b]=ja[b]||[],ja[b].push(a)):N.push(a)});q(jb,function(a,b){if(!a)throw fa("reqslot",b);});for(var ic in ja)ja[ic]&&(ja[ic]=kc(La,ja[ic],e))}else N=B(fc(b)).contents();v.empty();A=kc(La,N,e,void 0,void 0,{needsNewScope:y.$$isolateScope||y.$$newScope});A.$$slots=ja}if(y.template)if(O=!0,$("template",I,y,v),I=y,x=D(y.template)?y.template(v,d):y.template,x=Ea(x),y.replace){g=y;N=cc.test(x)?pd(ha(y.templateNamespace,T(x))):[];b=N[0];if(1!==N.length||1!==b.nodeType)throw fa("tplrt",P,"");
ka(f,v,b);F={$attr:{}};x=jc(b,[],F);var Y=a.splice(z+1,a.length-(z+1));(E||K)&&aa(x,E,K);a=a.concat(x).concat(Y);da(d,F);F=a.length}else v.html(x);if(y.templateUrl)O=!0,$("template",I,y,v),I=y,y.replace&&(g=y),n=ga(a.splice(z,a.length-z),v,d,f,J&&A,h,k,{controllerDirectives:G,newScopeDirective:K!==y&&K,newIsolateScopeDirective:E,templateDirective:I,nonTlbTranscludeDirective:t}),F=a.length;else if(y.compile)try{R=y.compile(v,d,A);var Z=y.$$originalDirective||y;D(R)?m(null,bb(Z,R),Ma,L):R&&m(bb(Z,R.pre),
bb(Z,R.post),Ma,L)}catch(ea){c(ea,xa(v))}y.terminal&&(n.terminal=!0,p=Math.max(p,y.priority))}n.scope=K&&!0===K.scope;n.transcludeOnThisElement=J;n.templateOnThisElement=O;n.transclude=A;l.hasElementTranscludeDirective=X;return n}function U(a,b,c,d){var e;if(F(b)){var f=b.match(l);b=b.substring(f[0].length);var g=f[1]||f[3],f="?"===f[2];"^^"===g?c=c.parent():e=(e=d&&d[b])&&e.instance;if(!e){var h="$"+b+"Controller";e=g?c.inheritedData(h):c.data(h)}if(!e&&!f)throw fa("ctreq",b,a);}else if(H(b))for(e=
[],g=0,f=b.length;g<f;g++)e[g]=U(a,b[g],c,d);else C(b)&&(e={},q(b,function(b,f){e[f]=U(a,b,c,d)}));return e||null}function ba(a,b,c,d,e,f,g){var h=V(),k;for(k in d){var l=d[k],m={$scope:l===g||l.$$isolateScope?e:f,$element:a,$attrs:b,$transclude:c},n=l.controller;"@"===n&&(n=b[l.name]);m=E(n,m,!0,l.controllerAs);h[l.name]=m;a.data("$"+l.name+"Controller",m.instance)}return h}function aa(a,b,c){for(var d=0,e=a.length;d<e;d++)a[d]=Vb(a[d],{$$isolateScope:b,$$newScope:c})}function Y(b,c,e,g,h,k,l){if(c===
h)return null;var m=null;if(f.hasOwnProperty(c)){h=a.get(c+"Directive");for(var n=0,p=h.length;n<p;n++)if(c=h[n],(w(g)||g>c.priority)&&-1!==c.restrict.indexOf(e)){k&&(c=Vb(c,{$$start:k,$$end:l}));if(!c.$$bindings){var K=m=c,r=c.name,t={isolateScope:null,bindToController:null};C(K.scope)&&(!0===K.bindToController?(t.bindToController=d(K.scope,r,!0),t.isolateScope={}):t.isolateScope=d(K.scope,r,!1));C(K.bindToController)&&(t.bindToController=d(K.bindToController,r,!0));if(t.bindToController&&!K.controller)throw fa("noctrl",
r);m=m.$$bindings=t;C(m.isolateScope)&&(c.$$isolateBindings=m.isolateScope)}b.push(c);m=c}}return m}function Z(b){if(f.hasOwnProperty(b))for(var c=a.get(b+"Directive"),d=0,e=c.length;d<e;d++)if(b=c[d],b.multiElement)return!0;return!1}function da(a,b){var c=b.$attr,d=a.$attr;q(a,function(d,e){"$"!==e.charAt(0)&&(b[e]&&b[e]!==d&&(d=d.length?d+(("style"===e?";":" ")+b[e]):b[e]),a.$set(e,d,!0,c[e]))});q(b,function(b,e){a.hasOwnProperty(e)||"$"===e.charAt(0)||(a[e]=b,"class"!==e&&"style"!==e&&(d[e]=c[e]))})}
function ga(a,b,d,f,g,h,k,l){var m=[],n,p,K=b[0],r=a.shift(),t=Vb(r,{templateUrl:null,transclude:null,replace:null,$$originalDirective:r}),y=D(r.templateUrl)?r.templateUrl(b,d):r.templateUrl,E=r.templateNamespace;b.empty();e(y).then(function(c){var e,G;c=Ea(c);if(r.replace){c=cc.test(c)?pd(ha(E,T(c))):[];e=c[0];if(1!==c.length||1!==e.nodeType)throw fa("tplrt",r.name,y);c={$attr:{}};ka(f,b,e);var I=jc(e,[],c);C(r.scope)&&aa(I,!0);a=I.concat(a);da(d,c)}else e=K,b.html(c);a.unshift(t);n=W(a,e,d,g,b,
r,h,k,l);q(f,function(a,c){a===e&&(f[c]=b[0])});for(p=Ma(b[0].childNodes,g);m.length;){c=m.shift();G=m.shift();var v=m.shift(),J=m.shift(),I=b[0];if(!c.$$destroyed){if(G!==K){var O=G.className;l.hasElementTranscludeDirective&&r.replace||(I=fc(e));ka(v,B(G),I);La(B(I),O)}G=n.transcludeOnThisElement?ja(c,n.transclude,J):J;n(p,c,I,f,G)}}m=null}).catch(function(a){a instanceof Error&&c(a)});return function(a,b,c,d,e){a=e;b.$$destroyed||(m?m.push(b,c,d,a):(n.transcludeOnThisElement&&(a=ja(b,n.transclude,
e)),n(p,b,c,d,a)))}}function ea(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function $(a,b,c,d){function e(a){return a?" (module: "+a+")":""}if(b)throw fa("multidir",b.name,e(b.$$moduleName),c.name,e(c.$$moduleName),a,xa(d));}function la(a,c){var d=b(c,!0);d&&a.push({priority:0,compile:function(a){a=a.parent();var b=!!a.length;b&&ca.$$addBindingClass(a);return function(a,c){var e=c.parent();b||ca.$$addBindingClass(e);ca.$$addBindingInfo(e,d.expressions);
a.$watch(d,function(a){c[0].nodeValue=a})}}})}function ha(a,b){a=Q(a||"html");switch(a){case "svg":case "math":var c=x.document.createElement("div");c.innerHTML="<"+a+">"+b+"</"+a+">";return c.childNodes[0].childNodes;default:return b}}function oa(a,b){if("srcdoc"===b)return y.HTML;var c=wa(a);if("src"===b||"ngSrc"===b){if(-1===["img","video","audio","source","track"].indexOf(c))return y.RESOURCE_URL}else if("xlinkHref"===b||"form"===c&&"action"===b||"link"===c&&"href"===b)return y.RESOURCE_URL}function pa(a,
c,d,e,f){var g=oa(a,e),h=k[e]||f,l=b(d,!f,g,h);if(l){if("multiple"===e&&"select"===wa(a))throw fa("selmulti",xa(a));if(m.test(e))throw fa("nodomevents");c.push({priority:100,compile:function(){return{pre:function(a,c,f){c=f.$$observers||(f.$$observers=V());var k=f[e];k!==d&&(l=k&&b(k,!0,g,h),d=k);l&&(f[e]=l(a),(c[e]||(c[e]=[])).$$inter=!0,(f.$$observers&&f.$$observers[e].$$scope||a).$watch(l,function(a,b){"class"===e&&a!==b?f.$updateClass(a,b):f.$set(e,a)}))}}}})}}function ka(a,b,c){var d=b[0],e=
b.length,f=d.parentNode,g,h;if(a)for(g=0,h=a.length;g<h;g++)if(a[g]===d){a[g++]=c;h=g+e-1;for(var k=a.length;g<k;g++,h++)h<k?a[g]=a[h]:delete a[g];a.length-=e-1;a.context===d&&(a.context=c);break}f&&f.replaceChild(c,d);a=x.document.createDocumentFragment();for(g=0;g<e;g++)a.appendChild(b[g]);B.hasData(d)&&(B.data(c,B.data(d)),B(d).off("$destroy"));B.cleanData(a.querySelectorAll("*"));for(g=1;g<e;g++)delete b[g];b[0]=c;b.length=1}function qa(a,b){return S(function(){return a.apply(null,arguments)},
a,b)}function ra(a,b,d,e,f,g){try{a(b,d,e,f,g)}catch(h){c(h,xa(d))}}function na(a,c,d,e,f){function g(b,c,e){D(d.$onChanges)&&!Xb(c,e)&&(ia||(a.$$postDigest(P),ia=[]),m||(m={},ia.push(h)),m[b]&&(e=m[b].previousValue),m[b]=new Ib(e,c))}function h(){d.$onChanges(m);m=void 0}var k=[],l={},m;q(e,function(e,h){var m=e.attrName,p=e.optional,r,t,y,G;switch(e.mode){case "@":p||ua.call(c,m)||(d[h]=c[m]=void 0);p=c.$observe(m,function(a){if(F(a)||Ha(a))g(h,a,d[h]),d[h]=a});c.$$observers[m].$$scope=a;r=c[m];
F(r)?d[h]=b(r)(a):Ha(r)&&(d[h]=r);l[h]=new Ib(lc,d[h]);k.push(p);break;case "=":if(!ua.call(c,m)){if(p)break;c[m]=void 0}if(p&&!c[m])break;t=n(c[m]);G=t.literal?sa:Xb;y=t.assign||function(){r=d[h]=t(a);throw fa("nonassign",c[m],m,f.name);};r=d[h]=t(a);p=function(b){G(b,d[h])||(G(b,r)?y(a,b=d[h]):d[h]=b);return r=b};p.$stateful=!0;p=e.collection?a.$watchCollection(c[m],p):a.$watch(n(c[m],p),null,t.literal);k.push(p);break;case "<":if(!ua.call(c,m)){if(p)break;c[m]=void 0}if(p&&!c[m])break;t=n(c[m]);
var E=t.literal,I=d[h]=t(a);l[h]=new Ib(lc,d[h]);p=a.$watch(t,function(a,b){if(b===a){if(b===I||E&&sa(b,I))return;b=I}g(h,a,b);d[h]=a},E);k.push(p);break;case "&":t=c.hasOwnProperty(m)?n(c[m]):z;if(t===z&&p)break;d[h]=function(b){return t(a,b)}}});return{initialChanges:l,removeWatches:k.length&&function(){for(var a=0,b=k.length;a<b;++a)k[a]()}}}var Ca=/^\w/,ta=x.document.createElement("div"),Fa=v,Ga=t,ya=J,ia;s.prototype={$normalize:Ba,$addClass:function(a){a&&0<a.length&&O.addClass(this.$$element,
a)},$removeClass:function(a){a&&0<a.length&&O.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=qd(a,b);c&&c.length&&O.addClass(this.$$element,c);(c=qd(b,a))&&c.length&&O.removeClass(this.$$element,c)},$set:function(a,b,d,e){var f=id(this.$$element[0],a),g=rd[a],h=a;f?(this.$$element.prop(a,b),e=f):g&&(this[g]=b,h=g);this[a]=b;e?this.$attr[a]=e:(e=this.$attr[a])||(this.$attr[a]=e=Tc(a,"-"));f=wa(this.$$element);if("a"===f&&("href"===a||"xlinkHref"===a)||"img"===f&&"src"===a)this[a]=
b=X(b,"src"===a);else if("img"===f&&"srcset"===a&&u(b)){for(var f="",g=T(b),k=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,k=/\s/.test(g)?k:/(,)/,g=g.split(k),k=Math.floor(g.length/2),l=0;l<k;l++)var m=2*l,f=f+X(T(g[m]),!0),f=f+(" "+T(g[m+1]));g=T(g[2*l]).split(/\s/);f+=X(T(g[0]),!0);2===g.length&&(f+=" "+T(g[1]));this[a]=b=f}!1!==d&&(null===b||w(b)?this.$$element.removeAttr(e):Ca.test(e)?this.$$element.attr(e,b):R(this.$$element[0],e,b));(a=this.$$observers)&&q(a[h],function(a){try{a(b)}catch(d){c(d)}})},
$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=V()),e=d[a]||(d[a]=[]);e.push(b);G.$evalAsync(function(){e.$$inter||!c.hasOwnProperty(a)||w(c[a])||b(c[a])});return function(){$a(e,b)}}};var Aa=b.startSymbol(),Da=b.endSymbol(),Ea="{{"===Aa&&"}}"===Da?Ya:function(a){return a.replace(/\{\{/g,Aa).replace(/}}/g,Da)},Ja=/^ngAttr[A-Z]/,Ka=/^(.+)Start$/;ca.$$addBindingInfo=p?function(a,b){var c=a.data("$binding")||[];H(b)?c=c.concat(b):c.push(b);a.data("$binding",c)}:z;ca.$$addBindingClass=
p?function(a){La(a,"ng-binding")}:z;ca.$$addScopeInfo=p?function(a,b,c,d){a.data(c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope",b)}:z;ca.$$addScopeClass=p?function(a,b){La(a,b?"ng-isolate-scope":"ng-scope")}:z;ca.$$createComment=function(a,b){var c="";p&&(c=" "+(a||"")+": ",b&&(c+=b+" "));return x.document.createComment(c)};return ca}]}function Ib(a,b){this.previousValue=a;this.currentValue=b}function Ba(a){return a.replace(md,"").replace(rg,gb)}function qd(a,b){var d="",c=a.split(/\s+/),
e=b.split(/\s+/),f=0;a:for(;f<c.length;f++){for(var g=c[f],h=0;h<e.length;h++)if(g===e[h])continue a;d+=(0<d.length?" ":"")+g}return d}function pd(a){a=B(a);var b=a.length;if(1>=b)return a;for(;b--;){var d=a[b];(8===d.nodeType||d.nodeType===Ia&&""===d.nodeValue.trim())&&sg.call(a,b,1)}return a}function qg(a,b){if(b&&F(b))return b;if(F(a)){var d=sd.exec(a);if(d)return d[3]}}function wf(){var a={},b=!1;this.has=function(b){return a.hasOwnProperty(b)};this.register=function(b,c){Ka(b,"controller");C(b)?
S(a,b):a[b]=c};this.allowGlobals=function(){b=!0};this.$get=["$injector","$window",function(d,c){function e(a,b,c,d){if(!a||!C(a.$scope))throw L("$controller")("noscp",d,b);a.$scope[b]=c}return function(f,g,h,k){var l,m,n;h=!0===h;k&&F(k)&&(n=k);if(F(f)){k=f.match(sd);if(!k)throw td("ctrlfmt",f);m=k[1];n=n||k[3];f=a.hasOwnProperty(m)?a[m]:Vc(g.$scope,m,!0)||(b?Vc(c,m,!0):void 0);if(!f)throw td("ctrlreg",m);sb(f,m,!0)}if(h)return h=(H(f)?f[f.length-1]:f).prototype,l=Object.create(h||null),n&&e(g,n,
l,m||f.name),S(function(){var a=d.invoke(f,l,g,m);a!==l&&(C(a)||D(a))&&(l=a,n&&e(g,n,l,m||f.name));return l},{instance:l,identifier:n});l=d.instantiate(f,g,m);n&&e(g,n,l,m||f.name);return l}}]}function xf(){this.$get=["$window",function(a){return B(a.document)}]}function yf(){this.$get=["$document","$rootScope",function(a,b){function d(){e=c.hidden}var c=a[0],e=c&&c.hidden;a.on("visibilitychange",d);b.$on("$destroy",function(){a.off("visibilitychange",d)});return function(){return e}}]}function zf(){this.$get=
["$log",function(a){return function(b,d){a.error.apply(a,arguments)}}]}function mc(a){return C(a)?ga(a)?a.toISOString():cb(a):a}function Ef(){this.$get=function(){return function(a){if(!a)return"";var b=[];Kc(a,function(a,c){null===a||w(a)||(H(a)?q(a,function(a){b.push($(c)+"="+$(mc(a)))}):b.push($(c)+"="+$(mc(a))))});return b.join("&")}}}function Ff(){this.$get=function(){return function(a){function b(a,e,f){null===a||w(a)||(H(a)?q(a,function(a,c){b(a,e+"["+(C(a)?c:"")+"]")}):C(a)&&!ga(a)?Kc(a,function(a,
c){b(a,e+(f?"":"[")+c+(f?"":"]"))}):d.push($(e)+"="+$(mc(a))))}if(!a)return"";var d=[];b(a,"",!0);return d.join("&")}}}function nc(a,b){if(F(a)){var d=a.replace(tg,"").trim();if(d){var c=b("Content-Type");(c=c&&0===c.indexOf(ud))||(c=(c=d.match(ug))&&vg[c[0]].test(d));if(c)try{a=Oc(d)}catch(e){throw oc("baddata",a,e);}}}return a}function vd(a){var b=V(),d;F(a)?q(a.split("\n"),function(a){d=a.indexOf(":");var e=Q(T(a.substr(0,d)));a=T(a.substr(d+1));e&&(b[e]=b[e]?b[e]+", "+a:a)}):C(a)&&q(a,function(a,
d){var f=Q(d),g=T(a);f&&(b[f]=b[f]?b[f]+", "+g:g)});return b}function wd(a){var b;return function(d){b||(b=vd(a));return d?(d=b[Q(d)],void 0===d&&(d=null),d):b}}function xd(a,b,d,c){if(D(c))return c(a,b,d);q(c,function(c){a=c(a,b,d)});return a}function Df(){var a=this.defaults={transformResponse:[nc],transformRequest:[function(a){return C(a)&&"[object File]"!==ma.call(a)&&"[object Blob]"!==ma.call(a)&&"[object FormData]"!==ma.call(a)?cb(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},
post:pa(pc),put:pa(pc),patch:pa(pc)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},b=!1;this.useApplyAsync=function(a){return u(a)?(b=!!a,this):b};var d=this.interceptors=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(c,e,f,g,h,k,l,m){function n(b){function d(a,b){for(var c=0,e=b.length;c<e;){var f=b[c++],g=b[c++];a=a.then(f,g)}b.length=0;return a}
function e(a,b){var c,d={};q(a,function(a,e){D(a)?(c=a(b),null!=c&&(d[e]=c)):d[e]=a});return d}function f(a){var b=S({},a);b.data=xd(a.data,a.headers,a.status,g.transformResponse);a=a.status;return 200<=a&&300>a?b:k.reject(b)}if(!C(b))throw L("$http")("badreq",b);if(!F(m.valueOf(b.url)))throw L("$http")("badreq",b.url);var g=S({method:"get",transformRequest:a.transformRequest,transformResponse:a.transformResponse,paramSerializer:a.paramSerializer,jsonpCallbackParam:a.jsonpCallbackParam},b);g.headers=
function(b){var c=a.headers,d=S({},b.headers),f,g,h,c=S({},c.common,c[Q(b.method)]);a:for(f in c){g=Q(f);for(h in d)if(Q(h)===g)continue a;d[f]=c[f]}return e(d,pa(b))}(b);g.method=ub(g.method);g.paramSerializer=F(g.paramSerializer)?l.get(g.paramSerializer):g.paramSerializer;c.$$incOutstandingRequestCount();var h=[],n=[];b=k.resolve(g);q(t,function(a){(a.request||a.requestError)&&h.unshift(a.request,a.requestError);(a.response||a.responseError)&&n.push(a.response,a.responseError)});b=d(b,h);b=b.then(function(b){var c=
b.headers,d=xd(b.data,wd(c),void 0,b.transformRequest);w(d)&&q(c,function(a,b){"content-type"===Q(b)&&delete c[b]});w(b.withCredentials)&&!w(a.withCredentials)&&(b.withCredentials=a.withCredentials);return p(b,d).then(f,f)});b=d(b,n);return b=b.finally(function(){c.$$completeOutstandingRequest(z)})}function p(c,d){function g(a){if(a){var c={};q(a,function(a,d){c[d]=function(c){function d(){a(c)}b?h.$applyAsync(d):h.$$phase?d():h.$apply(d)}});return c}}function l(a,c,d,e){function f(){p(c,a,d,e)}O&&
(200<=a&&300>a?O.put(R,[a,c,vd(d),e]):O.remove(R));b?h.$applyAsync(f):(f(),h.$$phase||h.$apply())}function p(a,b,d,e){b=-1<=b?b:0;(200<=b&&300>b?G.resolve:G.reject)({data:a,status:b,headers:wd(d),config:c,statusText:e})}function K(a){p(a.data,a.status,pa(a.headers()),a.statusText)}function t(){var a=n.pendingRequests.indexOf(c);-1!==a&&n.pendingRequests.splice(a,1)}var G=k.defer(),y=G.promise,O,X,P=c.headers,s="jsonp"===Q(c.method),R=c.url;s?R=m.getTrustedResourceUrl(R):F(R)||(R=m.valueOf(R));R=r(R,
c.paramSerializer(c.params));s&&(R=J(R,c.jsonpCallbackParam));n.pendingRequests.push(c);y.then(t,t);!c.cache&&!a.cache||!1===c.cache||"GET"!==c.method&&"JSONP"!==c.method||(O=C(c.cache)?c.cache:C(a.cache)?a.cache:v);O&&(X=O.get(R),u(X)?X&&D(X.then)?X.then(K,K):H(X)?p(X[1],X[0],pa(X[2]),X[3]):p(X,200,{},"OK"):O.put(R,y));w(X)&&((X=yd(c.url)?f()[c.xsrfCookieName||a.xsrfCookieName]:void 0)&&(P[c.xsrfHeaderName||a.xsrfHeaderName]=X),e(c.method,R,d,l,P,c.timeout,c.withCredentials,c.responseType,g(c.eventHandlers),
g(c.uploadEventHandlers)));return y}function r(a,b){0<b.length&&(a+=(-1===a.indexOf("?")?"?":"&")+b);return a}function J(a,b){if(/[&?][^=]+=JSON_CALLBACK/.test(a))throw oc("badjsonp",a);if((new RegExp("[&?]"+b+"=")).test(a))throw oc("badjsonp",b,a);return a+=(-1===a.indexOf("?")?"?":"&")+b+"=JSON_CALLBACK"}var v=g("$http");a.paramSerializer=F(a.paramSerializer)?l.get(a.paramSerializer):a.paramSerializer;var t=[];q(d,function(a){t.unshift(F(a)?l.get(a):l.invoke(a))});n.pendingRequests=[];(function(a){q(arguments,
function(a){n[a]=function(b,c){return n(S({},c||{},{method:a,url:b}))}})})("get","delete","head","jsonp");(function(a){q(arguments,function(a){n[a]=function(b,c,d){return n(S({},d||{},{method:a,url:b,data:c}))}})})("post","put","patch");n.defaults=a;return n}]}function Hf(){this.$get=function(){return function(){return new x.XMLHttpRequest}}}function Gf(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(a,b,d,c){return wg(a,c,a.defer,b,d[0])}]}function wg(a,b,d,c,e){function f(a,
b,d){a=a.replace("JSON_CALLBACK",b);var f=e.createElement("script"),m=null;f.type="text/javascript";f.src=a;f.async=!0;m=function(a){f.removeEventListener("load",m);f.removeEventListener("error",m);e.body.removeChild(f);f=null;var g=-1,r="unknown";a&&("load"!==a.type||c.wasCalled(b)||(a={type:"error"}),r=a.type,g="error"===a.type?404:200);d&&d(g,r)};f.addEventListener("load",m);f.addEventListener("error",m);e.body.appendChild(f);return m}return function(e,h,k,l,m,n,p,r,J,v){function t(){N&&N();A&&
A.abort()}h=h||a.url();if("jsonp"===Q(e))var M=c.createCallback(h),N=f(h,M,function(a,b){var e=200===a&&c.getResponse(M);u(I)&&d.cancel(I);N=A=null;l(a,e,"",b);c.removeCallback(M)});else{var A=b(e,h);A.open(e,h,!0);q(m,function(a,b){u(a)&&A.setRequestHeader(b,a)});A.onload=function(){var a=A.statusText||"",b="response"in A?A.response:A.responseText,c=1223===A.status?204:A.status;0===c&&(c=b?200:"file"===Ca(h).protocol?404:0);var e=A.getAllResponseHeaders();u(I)&&d.cancel(I);N=A=null;l(c,b,e,a)};e=
function(){u(I)&&d.cancel(I);N=A=null;l(-1,null,null,"")};A.onerror=e;A.onabort=e;A.ontimeout=e;q(J,function(a,b){A.addEventListener(b,a)});q(v,function(a,b){A.upload.addEventListener(b,a)});p&&(A.withCredentials=!0);if(r)try{A.responseType=r}catch(s){if("json"!==r)throw s;}A.send(w(k)?null:k)}if(0<n)var I=d(t,n);else n&&D(n.then)&&n.then(t)}}function Bf(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a};this.endSymbol=function(a){return a?(b=a,this):b};this.$get=["$parse","$exceptionHandler",
"$sce",function(d,c,e){function f(a){return"\\\\\\"+a}function g(c){return c.replace(n,a).replace(p,b)}function h(a,b,c,d){var e=a.$watch(function(a){e();return d(a)},b,c);return e}function k(f,k,n,p){function M(a){try{var b=a;a=n?e.getTrusted(n,b):e.valueOf(b);return p&&!u(a)?a:$b(a)}catch(d){c(Da.interr(f,d))}}if(!f.length||-1===f.indexOf(a)){var q;k||(k=g(f),q=la(k),q.exp=f,q.expressions=[],q.$$watchDelegate=h);return q}p=!!p;var A,s,I=0,K=[],E=[];q=f.length;for(var G=[],y=[];I<q;)if(-1!==(A=f.indexOf(a,
I))&&-1!==(s=f.indexOf(b,A+l)))I!==A&&G.push(g(f.substring(I,A))),I=f.substring(A+l,s),K.push(I),E.push(d(I,M)),I=s+m,y.push(G.length),G.push("");else{I!==q&&G.push(g(f.substring(I)));break}n&&1<G.length&&Da.throwNoconcat(f);if(!k||K.length){var O=function(a){for(var b=0,c=K.length;b<c;b++){if(p&&w(a[b]))return;G[y[b]]=a[b]}return G.join("")};return S(function(a){var b=0,d=K.length,e=Array(d);try{for(;b<d;b++)e[b]=E[b](a);return O(e)}catch(g){c(Da.interr(f,g))}},{exp:f,expressions:K,$$watchDelegate:function(a,
b){var c;return a.$watchGroup(E,function(d,e){var f=O(d);D(b)&&b.call(this,f,d!==e?c:f,a);c=f})}})}}var l=a.length,m=b.length,n=new RegExp(a.replace(/./g,f),"g"),p=new RegExp(b.replace(/./g,f),"g");k.startSymbol=function(){return a};k.endSymbol=function(){return b};return k}]}function Cf(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(a,b,d,c,e){function f(f,k,l,m){function n(){p?f.apply(null,r):f(t)}var p=4<arguments.length,r=p?va.call(arguments,4):[],J=b.setInterval,v=b.clearInterval,
t=0,M=u(m)&&!m,q=(M?c:d).defer(),A=q.promise;l=u(l)?l:0;A.$$intervalId=J(function(){M?e.defer(n):a.$evalAsync(n);q.notify(t++);0<l&&t>=l&&(q.resolve(t),v(A.$$intervalId),delete g[A.$$intervalId]);M||a.$apply()},k);g[A.$$intervalId]=q;return A}var g={};f.cancel=function(a){return a&&a.$$intervalId in g?(g[a.$$intervalId].promise.catch(z),g[a.$$intervalId].reject("canceled"),b.clearInterval(a.$$intervalId),delete g[a.$$intervalId],!0):!1};return f}]}function qc(a){a=a.split("/");for(var b=a.length;b--;)a[b]=
db(a[b]);return a.join("/")}function zd(a,b){var d=Ca(a);b.$$protocol=d.protocol;b.$$host=d.hostname;b.$$port=Z(d.port)||xg[d.protocol]||null}function Ad(a,b){if(yg.test(a))throw kb("badpath",a);var d="/"!==a.charAt(0);d&&(a="/"+a);var c=Ca(a);b.$$path=decodeURIComponent(d&&"/"===c.pathname.charAt(0)?c.pathname.substring(1):c.pathname);b.$$search=Rc(c.search);b.$$hash=decodeURIComponent(c.hash);b.$$path&&"/"!==b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function rc(a,b){return a.slice(0,b.length)===
b}function ka(a,b){if(rc(b,a))return b.substr(a.length)}function Aa(a){var b=a.indexOf("#");return-1===b?a:a.substr(0,b)}function lb(a){return a.replace(/(#.+)|#$/,"$1")}function sc(a,b,d){this.$$html5=!0;d=d||"";zd(a,this);this.$$parse=function(a){var d=ka(b,a);if(!F(d))throw kb("ipthprfx",a,b);Ad(d,this);this.$$path||(this.$$path="/");this.$$compose()};this.$$compose=function(){var a=Zb(this.$$search),d=this.$$hash?"#"+db(this.$$hash):"";this.$$url=qc(this.$$path)+(a?"?"+a:"")+d;this.$$absUrl=b+
this.$$url.substr(1);this.$$urlUpdatedByLocation=!0};this.$$parseLinkUrl=function(c,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;u(f=ka(a,c))?(g=f,g=d&&u(f=ka(d,f))?b+(ka("/",f)||f):a+g):u(f=ka(b,c))?g=b+f:b===c+"/"&&(g=b);g&&this.$$parse(g);return!!g}}function tc(a,b,d){zd(a,this);this.$$parse=function(c){var e=ka(a,c)||ka(b,c),f;w(e)||"#"!==e.charAt(0)?this.$$html5?f=e:(f="",w(e)&&(a=c,this.replace())):(f=ka(d,e),w(f)&&(f=e));Ad(f,this);c=this.$$path;var e=a,g=/^\/[A-Z]:(\/.*)/;rc(f,
e)&&(f=f.replace(e,""));g.exec(f)||(c=(f=g.exec(c))?f[1]:c);this.$$path=c;this.$$compose()};this.$$compose=function(){var b=Zb(this.$$search),e=this.$$hash?"#"+db(this.$$hash):"";this.$$url=qc(this.$$path)+(b?"?"+b:"")+e;this.$$absUrl=a+(this.$$url?d+this.$$url:"");this.$$urlUpdatedByLocation=!0};this.$$parseLinkUrl=function(b,d){return Aa(a)===Aa(b)?(this.$$parse(b),!0):!1}}function Bd(a,b,d){this.$$html5=!0;tc.apply(this,arguments);this.$$parseLinkUrl=function(c,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),
!0;var f,g;a===Aa(c)?f=c:(g=ka(b,c))?f=a+d+g:b===c+"/"&&(f=b);f&&this.$$parse(f);return!!f};this.$$compose=function(){var b=Zb(this.$$search),e=this.$$hash?"#"+db(this.$$hash):"";this.$$url=qc(this.$$path)+(b?"?"+b:"")+e;this.$$absUrl=a+d+this.$$url;this.$$urlUpdatedByLocation=!0}}function Jb(a){return function(){return this[a]}}function Cd(a,b){return function(d){if(w(d))return this[a];this[a]=b(d);this.$$compose();return this}}function Jf(){var a="!",b={enabled:!1,requireBase:!0,rewriteLinks:!0};
this.hashPrefix=function(b){return u(b)?(a=b,this):a};this.html5Mode=function(a){if(Ha(a))return b.enabled=a,this;if(C(a)){Ha(a.enabled)&&(b.enabled=a.enabled);Ha(a.requireBase)&&(b.requireBase=a.requireBase);if(Ha(a.rewriteLinks)||F(a.rewriteLinks))b.rewriteLinks=a.rewriteLinks;return this}return b};this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(d,c,e,f,g){function h(a,b,d){var e=l.url(),f=l.$$state;try{c.url(a,b,d),l.$$state=c.state()}catch(g){throw l.url(e),l.$$state=
f,g;}}function k(a,b){d.$broadcast("$locationChangeSuccess",l.absUrl(),a,l.$$state,b)}var l,m;m=c.baseHref();var n=c.url(),p;if(b.enabled){if(!m&&b.requireBase)throw kb("nobase");p=n.substring(0,n.indexOf("/",n.indexOf("//")+2))+(m||"/");m=e.history?sc:Bd}else p=Aa(n),m=tc;var r=p.substr(0,Aa(p).lastIndexOf("/")+1);l=new m(p,r,"#"+a);l.$$parseLinkUrl(n,n);l.$$state=c.state();var J=/^\s*(javascript|mailto):/i;f.on("click",function(a){var e=b.rewriteLinks;if(e&&!a.ctrlKey&&!a.metaKey&&!a.shiftKey&&
2!==a.which&&2!==a.button){for(var h=B(a.target);"a"!==wa(h[0]);)if(h[0]===f[0]||!(h=h.parent())[0])return;if(!F(e)||!w(h.attr(e))){var e=h.prop("href"),k=h.attr("href")||h.attr("xlink:href");C(e)&&"[object SVGAnimatedString]"===e.toString()&&(e=Ca(e.animVal).href);J.test(e)||!e||h.attr("target")||a.isDefaultPrevented()||!l.$$parseLinkUrl(e,k)||(a.preventDefault(),l.absUrl()!==c.url()&&(d.$apply(),g.angular["ff-684208-preventDefault"]=!0))}}});lb(l.absUrl())!==lb(n)&&c.url(l.absUrl(),!0);var v=!0;
c.onUrlChange(function(a,b){rc(a,r)?(d.$evalAsync(function(){var c=l.absUrl(),e=l.$$state,f;a=lb(a);l.$$parse(a);l.$$state=b;f=d.$broadcast("$locationChangeStart",a,c,b,e).defaultPrevented;l.absUrl()===a&&(f?(l.$$parse(c),l.$$state=e,h(c,!1,e)):(v=!1,k(c,e)))}),d.$$phase||d.$digest()):g.location.href=a});d.$watch(function(){if(v||l.$$urlUpdatedByLocation){l.$$urlUpdatedByLocation=!1;var a=lb(c.url()),b=lb(l.absUrl()),f=c.state(),g=l.$$replace,m=a!==b||l.$$html5&&e.history&&f!==l.$$state;if(v||m)v=
!1,d.$evalAsync(function(){var b=l.absUrl(),c=d.$broadcast("$locationChangeStart",b,a,l.$$state,f).defaultPrevented;l.absUrl()===b&&(c?(l.$$parse(a),l.$$state=f):(m&&h(b,g,f===l.$$state?null:l.$$state),k(a,f)))})}l.$$replace=!1});return l}]}function Kf(){var a=!0,b=this;this.debugEnabled=function(b){return u(b)?(a=b,this):a};this.$get=["$window",function(d){function c(a){a instanceof Error&&(a.stack&&f?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&
(a=a.message+"\n"+a.sourceURL+":"+a.line));return a}function e(a){var b=d.console||{},e=b[a]||b.log||z;a=!1;try{a=!!e.apply}catch(f){}return a?function(){var a=[];q(arguments,function(b){a.push(c(b))});return e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}var f=za||/\bEdge\//.test(d.navigator&&d.navigator.userAgent);return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){a&&c.apply(b,arguments)}}()}}]}function zg(a){return a+""}function Ag(a,
b){return"undefined"!==typeof a?a:b}function Dd(a,b){return"undefined"===typeof a?b:"undefined"===typeof b?a:a+b}function U(a,b){var d,c,e;switch(a.type){case s.Program:d=!0;q(a.body,function(a){U(a.expression,b);d=d&&a.expression.constant});a.constant=d;break;case s.Literal:a.constant=!0;a.toWatch=[];break;case s.UnaryExpression:U(a.argument,b);a.constant=a.argument.constant;a.toWatch=a.argument.toWatch;break;case s.BinaryExpression:U(a.left,b);U(a.right,b);a.constant=a.left.constant&&a.right.constant;
a.toWatch=a.left.toWatch.concat(a.right.toWatch);break;case s.LogicalExpression:U(a.left,b);U(a.right,b);a.constant=a.left.constant&&a.right.constant;a.toWatch=a.constant?[]:[a];break;case s.ConditionalExpression:U(a.test,b);U(a.alternate,b);U(a.consequent,b);a.constant=a.test.constant&&a.alternate.constant&&a.consequent.constant;a.toWatch=a.constant?[]:[a];break;case s.Identifier:a.constant=!1;a.toWatch=[a];break;case s.MemberExpression:U(a.object,b);a.computed&&U(a.property,b);a.constant=a.object.constant&&
(!a.computed||a.property.constant);a.toWatch=[a];break;case s.CallExpression:d=e=a.filter?!b(a.callee.name).$stateful:!1;c=[];q(a.arguments,function(a){U(a,b);d=d&&a.constant;a.constant||c.push.apply(c,a.toWatch)});a.constant=d;a.toWatch=e?c:[a];break;case s.AssignmentExpression:U(a.left,b);U(a.right,b);a.constant=a.left.constant&&a.right.constant;a.toWatch=[a];break;case s.ArrayExpression:d=!0;c=[];q(a.elements,function(a){U(a,b);d=d&&a.constant;a.constant||c.push.apply(c,a.toWatch)});a.constant=
d;a.toWatch=c;break;case s.ObjectExpression:d=!0;c=[];q(a.properties,function(a){U(a.value,b);d=d&&a.value.constant&&!a.computed;a.value.constant||c.push.apply(c,a.value.toWatch);a.computed&&(U(a.key,b),a.key.constant||c.push.apply(c,a.key.toWatch))});a.constant=d;a.toWatch=c;break;case s.ThisExpression:a.constant=!1;a.toWatch=[];break;case s.LocalsExpression:a.constant=!1,a.toWatch=[]}}function Ed(a){if(1===a.length){a=a[0].expression;var b=a.toWatch;return 1!==b.length?b:b[0]!==a?b:void 0}}function Fd(a){return a.type===
s.Identifier||a.type===s.MemberExpression}function Gd(a){if(1===a.body.length&&Fd(a.body[0].expression))return{type:s.AssignmentExpression,left:a.body[0].expression,right:{type:s.NGValueParameter},operator:"="}}function Hd(a){this.$filter=a}function Id(a){this.$filter=a}function uc(a,b,d){this.ast=new s(a,d);this.astCompiler=d.csp?new Id(b):new Hd(b)}function vc(a){return D(a.valueOf)?a.valueOf():Bg.call(a)}function Lf(){var a=V(),b={"true":!0,"false":!1,"null":null,undefined:void 0},d,c;this.addLiteral=
function(a,c){b[a]=c};this.setIdentifierFns=function(a,b){d=a;c=b;return this};this.$get=["$filter",function(e){function f(a,b,c){return null==a||null==b?a===b:"object"!==typeof a||(a=vc(a),"object"!==typeof a||c)?a===b||a!==a&&b!==b:!1}function g(a,b,c,d,e){var g=d.inputs,h;if(1===g.length){var k=f,g=g[0];return a.$watch(function(a){var b=g(a);f(b,k,d.literal)||(h=d(a,void 0,void 0,[b]),k=b&&vc(b));return h},b,c,e)}for(var l=[],m=[],n=0,E=g.length;n<E;n++)l[n]=f,m[n]=null;return a.$watch(function(a){for(var b=
!1,c=0,e=g.length;c<e;c++){var k=g[c](a);if(b||(b=!f(k,l[c],d.literal)))m[c]=k,l[c]=k&&vc(k)}b&&(h=d(a,void 0,void 0,m));return h},b,c,e)}function h(a,b,c,d,e){function f(a){return d(a)}function h(a,c,d){n=a;D(b)&&b(a,c,d);l(a)&&d.$$postDigest(function(){l(n)&&m()})}var l=d.literal?k:u,m,n;return m=d.inputs?g(a,h,c,d,e):a.$watch(f,h,c)}function k(a){var b=!0;q(a,function(a){u(a)||(b=!1)});return b}function l(a,b,c,d){var e=a.$watch(function(a){e();return d(a)},b,c);return e}function m(a,b){function c(d,
e,g,h){g=f&&h?h[0]:a(d,e,g,h);return b(g,d,e)}function d(c,e,g,k){g=f&&k?k[0]:a(c,e,g,k);c=b(g,c,e);return h(g)?c:g}if(!b)return a;var e=a.$$watchDelegate,f=!1,h=a.literal?k:u,l=a.oneTime?d:c;l.literal=a.literal;l.oneTime=a.oneTime;f=!a.inputs;e&&e!==g?(l.$$watchDelegate=e,l.inputs=a.inputs):b.$stateful||(l.$$watchDelegate=g,l.inputs=a.inputs?a.inputs:[a]);return l}var n={csp:Ga().noUnsafeEval,literals:ra(b),isIdentifierStart:D(d)&&d,isIdentifierContinue:D(c)&&c};return function(b,c){var d,f,k;switch(typeof b){case "string":return k=
b=b.trim(),d=a[k],d||(":"===b.charAt(0)&&":"===b.charAt(1)&&(f=!0,b=b.substring(2)),d=new wc(n),d=(new uc(d,e,n)).parse(b),d.constant?d.$$watchDelegate=l:f?(d.oneTime=!0,d.$$watchDelegate=h):d.inputs&&(d.$$watchDelegate=g),a[k]=d),m(d,c);case "function":return m(b,c);default:return m(z,c)}}}]}function Nf(){var a=!0;this.$get=["$rootScope","$exceptionHandler",function(b,d){return Jd(function(a){b.$evalAsync(a)},d,a)}];this.errorOnUnhandledRejections=function(b){return u(b)?(a=b,this):a}}function Of(){var a=
!0;this.$get=["$browser","$exceptionHandler",function(b,d){return Jd(function(a){b.defer(a)},d,a)}];this.errorOnUnhandledRejections=function(b){return u(b)?(a=b,this):a}}function Jd(a,b,d){function c(){return new e}function e(){var a=this.promise=new f;this.resolve=function(b){k(a,b)};this.reject=function(b){m(a,b)};this.notify=function(b){p(a,b)}}function f(){this.$$state={status:0}}function g(){for(;!s&&A.length;){var a=A.shift();if(!a.pur){a.pur=!0;var c=a.value,c="Possibly unhandled rejection: "+
("function"===typeof c?c.toString().replace(/ \{[\s\S]*$/,""):w(c)?"undefined":"string"!==typeof c?Be(c,void 0):c);a.value instanceof Error?b(a.value,c):b(c)}}}function h(b){!d||b.pending||2!==b.status||b.pur||(0===s&&0===A.length&&a(g),A.push(b));!b.processScheduled&&b.pending&&(b.processScheduled=!0,++s,a(function(){var c,e,f;f=b.pending;b.processScheduled=!1;b.pending=void 0;try{for(var h=0,l=f.length;h<l;++h){b.pur=!0;e=f[h][0];c=f[h][b.status];try{D(c)?k(e,c(b.value)):1===b.status?k(e,b.value):
m(e,b.value)}catch(n){m(e,n)}}}finally{--s,d&&0===s&&a(g)}}))}function k(a,b){a.$$state.status||(b===a?n(a,M("qcycle",b)):l(a,b))}function l(a,b){function c(b){g||(g=!0,l(a,b))}function d(b){g||(g=!0,n(a,b))}function e(b){p(a,b)}var f,g=!1;try{if(C(b)||D(b))f=b.then;D(f)?(a.$$state.status=-1,f.call(b,c,d,e)):(a.$$state.value=b,a.$$state.status=1,h(a.$$state))}catch(k){d(k)}}function m(a,b){a.$$state.status||n(a,b)}function n(a,b){a.$$state.value=b;a.$$state.status=2;h(a.$$state)}function p(c,d){var e=
c.$$state.pending;0>=c.$$state.status&&e&&e.length&&a(function(){for(var a,c,f=0,g=e.length;f<g;f++){c=e[f][0];a=e[f][3];try{p(c,D(a)?a(d):d)}catch(h){b(h)}}})}function r(a){var b=new f;m(b,a);return b}function J(a,b,c){var d=null;try{D(c)&&(d=c())}catch(e){return r(e)}return d&&D(d.then)?d.then(function(){return b(a)},r):b(a)}function v(a,b,c,d){var e=new f;k(e,a);return e.then(b,c,d)}function t(a){if(!D(a))throw M("norslvr",a);var b=new f;a(function(a){k(b,a)},function(a){m(b,a)});return b}var M=
L("$q",TypeError),s=0,A=[];S(f.prototype,{then:function(a,b,c){if(w(a)&&w(b)&&w(c))return this;var d=new f;this.$$state.pending=this.$$state.pending||[];this.$$state.pending.push([d,a,b,c]);0<this.$$state.status&&h(this.$$state);return d},"catch":function(a){return this.then(null,a)},"finally":function(a,b){return this.then(function(b){return J(b,u,a)},function(b){return J(b,r,a)},b)}});var u=v;t.prototype=f.prototype;t.defer=c;t.reject=r;t.when=v;t.resolve=u;t.all=function(a){var b=new f,c=0,d=H(a)?
[]:{};q(a,function(a,e){c++;v(a).then(function(a){d[e]=a;--c||k(b,d)},function(a){m(b,a)})});0===c&&k(b,d);return b};t.race=function(a){var b=c();q(a,function(a){v(a).then(b.resolve,b.reject)});return b.promise};return t}function Xf(){this.$get=["$window","$timeout",function(a,b){var d=a.requestAnimationFrame||a.webkitRequestAnimationFrame,c=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,e=!!d,f=e?function(a){var b=d(a);return function(){c(b)}}:function(a){var c=
b(a,16.66,!1);return function(){b.cancel(c)}};f.supported=e;return f}]}function Mf(){function a(a){function b(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$id=++qb;this.$$ChildScope=null}b.prototype=a;return b}var b=10,d=L("$rootScope"),c=null,e=null;this.digestTtl=function(a){arguments.length&&(b=a);return b};this.$get=["$exceptionHandler","$parse","$browser",function(f,g,h){function k(a){a.currentScope.$$destroyed=
!0}function l(a){9===za&&(a.$$childHead&&l(a.$$childHead),a.$$nextSibling&&l(a.$$nextSibling));a.$parent=a.$$nextSibling=a.$$prevSibling=a.$$childHead=a.$$childTail=a.$root=a.$$watchers=null}function m(){this.$id=++qb;this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this.$root=this;this.$$destroyed=!1;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$$isolateBindings=null}function n(a){if(M.$$phase)throw d("inprog",
M.$$phase);M.$$phase=a}function p(a,b){do a.$$watchersCount+=b;while(a=a.$parent)}function r(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function J(){}function v(){for(;u.length;)try{u.shift()()}catch(a){f(a)}e=null}function t(){null===e&&(e=h.defer(function(){M.$apply(v)}))}m.prototype={constructor:m,$new:function(b,c){var d;c=c||this;b?(d=new m,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=a(this)),d=new this.$$ChildScope);
d.$parent=c;d.$$prevSibling=c.$$childTail;c.$$childHead?(c.$$childTail.$$nextSibling=d,c.$$childTail=d):c.$$childHead=c.$$childTail=d;(b||c!==this)&&d.$on("$destroy",k);return d},$watch:function(a,b,d,e){var f=g(a);if(f.$$watchDelegate)return f.$$watchDelegate(this,b,d,f,a);var h=this,k=h.$$watchers,l={fn:b,last:J,get:f,exp:e||a,eq:!!d};c=null;D(b)||(l.fn=z);k||(k=h.$$watchers=[],k.$$digestWatchIndex=-1);k.unshift(l);k.$$digestWatchIndex++;p(this,1);return function(){var a=$a(k,l);0<=a&&(p(h,-1),
a<k.$$digestWatchIndex&&k.$$digestWatchIndex--);c=null}},$watchGroup:function(a,b){function c(){h=!1;k?(k=!1,b(e,e,g)):b(e,d,g)}var d=Array(a.length),e=Array(a.length),f=[],g=this,h=!1,k=!0;if(!a.length){var l=!0;g.$evalAsync(function(){l&&b(e,e,g)});return function(){l=!1}}if(1===a.length)return this.$watch(a[0],function(a,c,f){e[0]=a;d[0]=c;b(e,a===c?e:d,f)});q(a,function(a,b){var k=g.$watch(a,function(a,f){e[b]=a;d[b]=f;h||(h=!0,g.$evalAsync(c))});f.push(k)});return function(){for(;f.length;)f.shift()()}},
$watchCollection:function(a,b){function c(a){e=a;var b,d,g,h;if(!w(e)){if(C(e))if(qa(e))for(f!==n&&(f=n,t=f.length=0,l++),a=e.length,t!==a&&(l++,f.length=t=a),b=0;b<a;b++)h=f[b],g=e[b],d=h!==h&&g!==g,d||h===g||(l++,f[b]=g);else{f!==p&&(f=p={},t=0,l++);a=0;for(b in e)ua.call(e,b)&&(a++,g=e[b],h=f[b],b in f?(d=h!==h&&g!==g,d||h===g||(l++,f[b]=g)):(t++,f[b]=g,l++));if(t>a)for(b in l++,f)ua.call(e,b)||(t--,delete f[b])}else f!==e&&(f=e,l++);return l}}c.$stateful=!0;var d=this,e,f,h,k=1<b.length,l=0,m=
g(a,c),n=[],p={},r=!0,t=0;return this.$watch(m,function(){r?(r=!1,b(e,e,d)):b(e,h,d);if(k)if(C(e))if(qa(e)){h=Array(e.length);for(var a=0;a<e.length;a++)h[a]=e[a]}else for(a in h={},e)ua.call(e,a)&&(h[a]=e[a]);else h=e})},$digest:function(){var a,g,k,l,m,p,r,t=b,q,u=[],w,x;n("$digest");h.$$checkUrlChange();this===M&&null!==e&&(h.defer.cancel(e),v());c=null;do{r=!1;q=this;for(p=0;p<s.length;p++){try{x=s[p],l=x.fn,l(x.scope,x.locals)}catch(z){f(z)}c=null}s.length=0;a:do{if(p=q.$$watchers)for(p.$$digestWatchIndex=
p.length;p.$$digestWatchIndex--;)try{if(a=p[p.$$digestWatchIndex])if(m=a.get,(g=m(q))!==(k=a.last)&&!(a.eq?sa(g,k):da(g)&&da(k)))r=!0,c=a,a.last=a.eq?ra(g,null):g,l=a.fn,l(g,k===J?g:k,q),5>t&&(w=4-t,u[w]||(u[w]=[]),u[w].push({msg:D(a.exp)?"fn: "+(a.exp.name||a.exp.toString()):a.exp,newVal:g,oldVal:k}));else if(a===c){r=!1;break a}}catch(B){f(B)}if(!(p=q.$$watchersCount&&q.$$childHead||q!==this&&q.$$nextSibling))for(;q!==this&&!(p=q.$$nextSibling);)q=q.$parent}while(q=p);if((r||s.length)&&!t--)throw M.$$phase=
null,d("infdig",b,u);}while(r||s.length);for(M.$$phase=null;I<A.length;)try{A[I++]()}catch(F){f(F)}A.length=I=0;h.$$checkUrlChange()},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;this===M&&h.$$applicationDestroyed();p(this,-this.$$watchersCount);for(var b in this.$$listenerCount)r(this,this.$$listenerCount[b],b);a&&a.$$childHead===this&&(a.$$childHead=this.$$nextSibling);a&&a.$$childTail===this&&(a.$$childTail=this.$$prevSibling);this.$$prevSibling&&
(this.$$prevSibling.$$nextSibling=this.$$nextSibling);this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling);this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=z;this.$on=this.$watch=this.$watchGroup=function(){return z};this.$$listeners={};this.$$nextSibling=null;l(this)}},$eval:function(a,b){return g(a)(this,b)},$evalAsync:function(a,b){M.$$phase||s.length||h.defer(function(){s.length&&M.$digest()});s.push({scope:this,fn:g(a),locals:b})},$$postDigest:function(a){A.push(a)},
$apply:function(a){try{n("$apply");try{return this.$eval(a)}finally{M.$$phase=null}}catch(b){f(b)}finally{try{M.$digest()}catch(c){throw f(c),c;}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&u.push(b);a=g(a);t()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]);c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(c[d]=null,r(e,1,a))}},$emit:function(a,
b){var c=[],d,e=this,g=!1,h={name:a,targetScope:e,stopPropagation:function(){g=!0},preventDefault:function(){h.defaultPrevented=!0},defaultPrevented:!1},k=ab([h],arguments,1),l,m;do{d=e.$$listeners[a]||c;h.currentScope=e;l=0;for(m=d.length;l<m;l++)if(d[l])try{d[l].apply(null,k)}catch(n){f(n)}else d.splice(l,1),l--,m--;if(g)return h.currentScope=null,h;e=e.$parent}while(e);h.currentScope=null;return h},$broadcast:function(a,b){var c=this,d=this,e={name:a,targetScope:this,preventDefault:function(){e.defaultPrevented=
!0},defaultPrevented:!1};if(!this.$$listenerCount[a])return e;for(var g=ab([e],arguments,1),h,k;c=d;){e.currentScope=c;d=c.$$listeners[a]||[];h=0;for(k=d.length;h<k;h++)if(d[h])try{d[h].apply(null,g)}catch(l){f(l)}else d.splice(h,1),h--,k--;if(!(d=c.$$listenerCount[a]&&c.$$childHead||c!==this&&c.$$nextSibling))for(;c!==this&&!(d=c.$$nextSibling);)c=c.$parent}e.currentScope=null;return e}};var M=new m,s=M.$$asyncQueue=[],A=M.$$postDigestQueue=[],u=M.$$applyAsyncQueue=[],I=0;return M}]}function Ee(){var a=
/^\s*(https?|ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(b){return u(b)?(a=b,this):a};this.imgSrcSanitizationWhitelist=function(a){return u(a)?(b=a,this):b};this.$get=function(){return function(d,c){var e=c?b:a,f;f=Ca(d).href;return""===f||f.match(e)?d:"unsafe:"+f}}}function Cg(a){if("self"===a)return a;if(F(a)){if(-1<a.indexOf("***"))throw ta("iwcard",a);a=Kd(a).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*");return new RegExp("^"+
a+"$")}if(Xa(a))return new RegExp("^"+a.source+"$");throw ta("imatcher");}function Ld(a){var b=[];u(a)&&q(a,function(a){b.push(Cg(a))});return b}function Qf(){this.SCE_CONTEXTS=oa;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){arguments.length&&(a=Ld(b));return a};this.resourceUrlBlacklist=function(a){arguments.length&&(b=Ld(a));return b};this.$get=["$injector",function(d){function c(a,b){return"self"===a?yd(b):!!a.exec(b.href)}function e(a){var b=function(a){this.$$unwrapTrustedValue=
function(){return a}};a&&(b.prototype=new a);b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()};b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()};return b}var f=function(a){throw ta("unsafe");};d.has("$sanitize")&&(f=d.get("$sanitize"));var g=e(),h={};h[oa.HTML]=e(g);h[oa.CSS]=e(g);h[oa.URL]=e(g);h[oa.JS]=e(g);h[oa.RESOURCE_URL]=e(h[oa.URL]);return{trustAs:function(a,b){var c=h.hasOwnProperty(a)?h[a]:null;if(!c)throw ta("icontext",a,b);if(null===b||w(b)||
""===b)return b;if("string"!==typeof b)throw ta("itype",a);return new c(b)},getTrusted:function(d,e){if(null===e||w(e)||""===e)return e;var g=h.hasOwnProperty(d)?h[d]:null;if(g&&e instanceof g)return e.$$unwrapTrustedValue();if(d===oa.RESOURCE_URL){var g=Ca(e.toString()),n,p,r=!1;n=0;for(p=a.length;n<p;n++)if(c(a[n],g)){r=!0;break}if(r)for(n=0,p=b.length;n<p;n++)if(c(b[n],g)){r=!1;break}if(r)return e;throw ta("insecurl",e.toString());}if(d===oa.HTML)return f(e);throw ta("unsafe");},valueOf:function(a){return a instanceof
g?a.$$unwrapTrustedValue():a}}}]}function Pf(){var a=!0;this.enabled=function(b){arguments.length&&(a=!!b);return a};this.$get=["$parse","$sceDelegate",function(b,d){if(a&&8>za)throw ta("iequirks");var c=pa(oa);c.isEnabled=function(){return a};c.trustAs=d.trustAs;c.getTrusted=d.getTrusted;c.valueOf=d.valueOf;a||(c.trustAs=c.getTrusted=function(a,b){return b},c.valueOf=Ya);c.parseAs=function(a,d){var e=b(d);return e.literal&&e.constant?e:b(d,function(b){return c.getTrusted(a,b)})};var e=c.parseAs,
f=c.getTrusted,g=c.trustAs;q(oa,function(a,b){var d=Q(b);c[("parse_as_"+d).replace(xc,gb)]=function(b){return e(a,b)};c[("get_trusted_"+d).replace(xc,gb)]=function(b){return f(a,b)};c[("trust_as_"+d).replace(xc,gb)]=function(b){return g(a,b)}});return c}]}function Rf(){this.$get=["$window","$document",function(a,b){var d={},c=!((!a.nw||!a.nw.process)&&a.chrome&&(a.chrome.app&&a.chrome.app.runtime||!a.chrome.app&&a.chrome.runtime&&a.chrome.runtime.id))&&a.history&&a.history.pushState,e=Z((/android (\d+)/.exec(Q((a.navigator||
{}).userAgent))||[])[1]),f=/Boxee/i.test((a.navigator||{}).userAgent),g=b[0]||{},h=g.body&&g.body.style,k=!1,l=!1;h&&(k=!!("transition"in h||"webkitTransition"in h),l=!!("animation"in h||"webkitAnimation"in h));return{history:!(!c||4>e||f),hasEvent:function(a){if("input"===a&&za)return!1;if(w(d[a])){var b=g.createElement("div");d[a]="on"+a in b}return d[a]},csp:Ga(),transitions:k,animations:l,android:e}}]}function Tf(){var a;this.httpOptions=function(b){return b?(a=b,this):a};this.$get=["$exceptionHandler",
"$templateCache","$http","$q","$sce",function(b,d,c,e,f){function g(h,k){g.totalPendingRequests++;if(!F(h)||w(d.get(h)))h=f.getTrustedResourceUrl(h);var l=c.defaults&&c.defaults.transformResponse;H(l)?l=l.filter(function(a){return a!==nc}):l===nc&&(l=null);return c.get(h,S({cache:d,transformResponse:l},a)).finally(function(){g.totalPendingRequests--}).then(function(a){d.put(h,a.data);return a.data},function(a){k||(a=Dg("tpload",h,a.status,a.statusText),b(a));return e.reject(a)})}g.totalPendingRequests=
0;return g}]}function Uf(){this.$get=["$rootScope","$browser","$location",function(a,b,d){return{findBindings:function(a,b,d){a=a.getElementsByClassName("ng-binding");var g=[];q(a,function(a){var c=ea.element(a).data("$binding");c&&q(c,function(c){d?(new RegExp("(^|\\s)"+Kd(b)+"(\\s|\\||$)")).test(c)&&g.push(a):-1!==c.indexOf(b)&&g.push(a)})});return g},findModels:function(a,b,d){for(var g=["ng-","data-ng-","ng\\:"],h=0;h<g.length;++h){var k=a.querySelectorAll("["+g[h]+"model"+(d?"=":"*=")+'"'+b+
'"]');if(k.length)return k}},getLocation:function(){return d.url()},setLocation:function(b){b!==d.url()&&(d.url(b),a.$digest())},whenStable:function(a){b.notifyWhenNoOutstandingRequests(a)}}}]}function Vf(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(a,b,d,c,e){function f(f,k,l){D(f)||(l=k,k=f,f=z);var m=va.call(arguments,3),n=u(l)&&!l,p=(n?c:d).defer(),r=p.promise,q;q=b.defer(function(){try{p.resolve(f.apply(null,m))}catch(b){p.reject(b),e(b)}finally{delete g[r.$$timeoutId]}n||
a.$apply()},k);r.$$timeoutId=q;g[q]=p;return r}var g={};f.cancel=function(a){return a&&a.$$timeoutId in g?(g[a.$$timeoutId].promise.catch(z),g[a.$$timeoutId].reject("canceled"),delete g[a.$$timeoutId],b.defer.cancel(a.$$timeoutId)):!1};return f}]}function Ca(a){za&&(aa.setAttribute("href",a),a=aa.href);aa.setAttribute("href",a);return{href:aa.href,protocol:aa.protocol?aa.protocol.replace(/:$/,""):"",host:aa.host,search:aa.search?aa.search.replace(/^\?/,""):"",hash:aa.hash?aa.hash.replace(/^#/,""):
"",hostname:aa.hostname,port:aa.port,pathname:"/"===aa.pathname.charAt(0)?aa.pathname:"/"+aa.pathname}}function yd(a){a=F(a)?Ca(a):a;return a.protocol===Md.protocol&&a.host===Md.host}function Wf(){this.$get=la(x)}function Nd(a){function b(a){try{return decodeURIComponent(a)}catch(b){return a}}var d=a[0]||{},c={},e="";return function(){var a,g,h,k,l;try{a=d.cookie||""}catch(m){a=""}if(a!==e)for(e=a,a=e.split("; "),c={},h=0;h<a.length;h++)g=a[h],k=g.indexOf("="),0<k&&(l=b(g.substring(0,k)),w(c[l])&&
(c[l]=b(g.substring(k+1))));return c}}function $f(){this.$get=Nd}function cd(a){function b(d,c){if(C(d)){var e={};q(d,function(a,c){e[c]=b(c,a)});return e}return a.factory(d+"Filter",c)}this.register=b;this.$get=["$injector",function(a){return function(b){return a.get(b+"Filter")}}];b("currency",Od);b("date",Pd);b("filter",Eg);b("json",Fg);b("limitTo",Gg);b("lowercase",Hg);b("number",Qd);b("orderBy",Rd);b("uppercase",Ig)}function Eg(){return function(a,b,d,c){if(!qa(a)){if(null==a)return a;throw L("filter")("notarray",
a);}c=c||"$";var e;switch(yc(b)){case "function":break;case "boolean":case "null":case "number":case "string":e=!0;case "object":b=Jg(b,d,c,e);break;default:return a}return Array.prototype.filter.call(a,b)}}function Jg(a,b,d,c){var e=C(a)&&d in a;!0===b?b=sa:D(b)||(b=function(a,b){if(w(a))return!1;if(null===a||null===b)return a===b;if(C(b)||C(a)&&!Wb(a))return!1;a=Q(""+a);b=Q(""+b);return-1!==a.indexOf(b)});return function(f){return e&&!C(f)?Ea(f,a[d],b,d,!1):Ea(f,a,b,d,c)}}function Ea(a,b,d,c,e,
f){var g=yc(a),h=yc(b);if("string"===h&&"!"===b.charAt(0))return!Ea(a,b.substring(1),d,c,e);if(H(a))return a.some(function(a){return Ea(a,b,d,c,e)});switch(g){case "object":var k;if(e){for(k in a)if(k.charAt&&"$"!==k.charAt(0)&&Ea(a[k],b,d,c,!0))return!0;return f?!1:Ea(a,b,d,c,!1)}if("object"===h){for(k in b)if(f=b[k],!D(f)&&!w(f)&&(g=k===c,!Ea(g?a:a[k],f,d,c,g,g)))return!1;return!0}return d(a,b);case "function":return!1;default:return d(a,b)}}function yc(a){return null===a?"null":typeof a}function Od(a){var b=
a.NUMBER_FORMATS;return function(a,c,e){w(c)&&(c=b.CURRENCY_SYM);w(e)&&(e=b.PATTERNS[1].maxFrac);return null==a?a:Sd(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,e).replace(/\u00A4/g,c)}}function Qd(a){var b=a.NUMBER_FORMATS;return function(a,c){return null==a?a:Sd(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function Kg(a){var b=0,d,c,e,f,g;-1<(c=a.indexOf(Td))&&(a=a.replace(Td,""));0<(e=a.search(/e/i))?(0>c&&(c=e),c+=+a.slice(e+1),a=a.substring(0,e)):0>c&&(c=a.length);for(e=0;a.charAt(e)===zc;e++);
if(e===(g=a.length))d=[0],c=1;else{for(g--;a.charAt(g)===zc;)g--;c-=e;d=[];for(f=0;e<=g;e++,f++)d[f]=+a.charAt(e)}c>Ud&&(d=d.splice(0,Ud-1),b=c-1,c=1);return{d:d,e:b,i:c}}function Lg(a,b,d,c){var e=a.d,f=e.length-a.i;b=w(b)?Math.min(Math.max(d,f),c):+b;d=b+a.i;c=e[d];if(0<d){e.splice(Math.max(a.i,d));for(var g=d;g<e.length;g++)e[g]=0}else for(f=Math.max(0,f),a.i=1,e.length=Math.max(1,d=b+1),e[0]=0,g=1;g<d;g++)e[g]=0;if(5<=c)if(0>d-1){for(c=0;c>d;c--)e.unshift(0),a.i++;e.unshift(1);a.i++}else e[d-
1]++;for(;f<Math.max(0,b);f++)e.push(0);if(b=e.reduceRight(function(a,b,c,d){b+=a;d[c]=b%10;return Math.floor(b/10)},0))e.unshift(b),a.i++}function Sd(a,b,d,c,e){if(!F(a)&&!ba(a)||isNaN(a))return"";var f=!isFinite(a),g=!1,h=Math.abs(a)+"",k="";if(f)k="\u221e";else{g=Kg(h);Lg(g,e,b.minFrac,b.maxFrac);k=g.d;h=g.i;e=g.e;f=[];for(g=k.reduce(function(a,b){return a&&!b},!0);0>h;)k.unshift(0),h++;0<h?f=k.splice(h,k.length):(f=k,k=[0]);h=[];for(k.length>=b.lgSize&&h.unshift(k.splice(-b.lgSize,k.length).join(""));k.length>
b.gSize;)h.unshift(k.splice(-b.gSize,k.length).join(""));k.length&&h.unshift(k.join(""));k=h.join(d);f.length&&(k+=c+f.join(""));e&&(k+="e+"+e)}return 0>a&&!g?b.negPre+k+b.negSuf:b.posPre+k+b.posSuf}function Kb(a,b,d,c){var e="";if(0>a||c&&0>=a)c?a=-a+1:(a=-a,e="-");for(a=""+a;a.length<b;)a=zc+a;d&&(a=a.substr(a.length-b));return e+a}function Y(a,b,d,c,e){d=d||0;return function(f){f=f["get"+a]();if(0<d||f>-d)f+=d;0===f&&-12===d&&(f=12);return Kb(f,b,c,e)}}function mb(a,b,d){return function(c,e){var f=
c["get"+a](),g=ub((d?"STANDALONE":"")+(b?"SHORT":"")+a);return e[g][f]}}function Vd(a){var b=(new Date(a,0,1)).getDay();return new Date(a,0,(4>=b?5:12)-b)}function Wd(a){return function(b){var d=Vd(b.getFullYear());b=+new Date(b.getFullYear(),b.getMonth(),b.getDate()+(4-b.getDay()))-+d;b=1+Math.round(b/6048E5);return Kb(b,a)}}function Ac(a,b){return 0>=a.getFullYear()?b.ERAS[0]:b.ERAS[1]}function Pd(a){function b(a){var b;if(b=a.match(d)){a=new Date(0);var f=0,g=0,h=b[8]?a.setUTCFullYear:a.setFullYear,
k=b[8]?a.setUTCHours:a.setHours;b[9]&&(f=Z(b[9]+b[10]),g=Z(b[9]+b[11]));h.call(a,Z(b[1]),Z(b[2])-1,Z(b[3]));f=Z(b[4]||0)-f;g=Z(b[5]||0)-g;h=Z(b[6]||0);b=Math.round(1E3*parseFloat("0."+(b[7]||0)));k.call(a,f,g,h,b)}return a}var d=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,d,f){var g="",h=[],k,l;d=d||"mediumDate";d=a.DATETIME_FORMATS[d]||d;F(c)&&(c=Mg.test(c)?Z(c):b(c));ba(c)&&(c=new Date(c));if(!ga(c)||!isFinite(c.getTime()))return c;
for(;d;)(l=Ng.exec(d))?(h=ab(h,l,1),d=h.pop()):(h.push(d),d=null);var m=c.getTimezoneOffset();f&&(m=Pc(f,m),c=Yb(c,f,!0));q(h,function(b){k=Og[b];g+=k?k(c,a.DATETIME_FORMATS,m):"''"===b?"'":b.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return g}}function Fg(){return function(a,b){w(b)&&(b=2);return cb(a,b)}}function Gg(){return function(a,b,d){b=Infinity===Math.abs(Number(b))?Number(b):Z(b);if(da(b))return a;ba(a)&&(a=a.toString());if(!qa(a))return a;d=!d||isNaN(d)?0:Z(d);d=0>d?Math.max(0,a.length+
d):d;return 0<=b?Bc(a,d,d+b):0===d?Bc(a,b,a.length):Bc(a,Math.max(0,d+b),d)}}function Bc(a,b,d){return F(a)?a.slice(b,d):va.call(a,b,d)}function Rd(a){function b(b){return b.map(function(b){var c=1,d=Ya;if(D(b))d=b;else if(F(b)){if("+"===b.charAt(0)||"-"===b.charAt(0))c="-"===b.charAt(0)?-1:1,b=b.substring(1);if(""!==b&&(d=a(b),d.constant))var e=d(),d=function(a){return a[e]}}return{get:d,descending:c}})}function d(a){switch(typeof a){case "number":case "boolean":case "string":return!0;default:return!1}}
function c(a,b){var c=0,d=a.type,k=b.type;if(d===k){var k=a.value,l=b.value;"string"===d?(k=k.toLowerCase(),l=l.toLowerCase()):"object"===d&&(C(k)&&(k=a.index),C(l)&&(l=b.index));k!==l&&(c=k<l?-1:1)}else c=d<k?-1:1;return c}return function(a,f,g,h){if(null==a)return a;if(!qa(a))throw L("orderBy")("notarray",a);H(f)||(f=[f]);0===f.length&&(f=["+"]);var k=b(f),l=g?-1:1,m=D(h)?h:c;a=Array.prototype.map.call(a,function(a,b){return{value:a,tieBreaker:{value:b,type:"number",index:b},predicateValues:k.map(function(c){var e=
c.get(a);c=typeof e;if(null===e)c="string",e="null";else if("object"===c)a:{if(D(e.valueOf)&&(e=e.valueOf(),d(e)))break a;Wb(e)&&(e=e.toString(),d(e))}return{value:e,type:c,index:b}})}});a.sort(function(a,b){for(var c=0,d=k.length;c<d;c++){var e=m(a.predicateValues[c],b.predicateValues[c]);if(e)return e*k[c].descending*l}return m(a.tieBreaker,b.tieBreaker)*l});return a=a.map(function(a){return a.value})}}function Qa(a){D(a)&&(a={link:a});a.restrict=a.restrict||"AC";return la(a)}function Lb(a,b,d,
c,e){this.$$controls=[];this.$error={};this.$$success={};this.$pending=void 0;this.$name=e(b.name||b.ngForm||"")(d);this.$dirty=!1;this.$valid=this.$pristine=!0;this.$submitted=this.$invalid=!1;this.$$parentForm=Mb;this.$$element=a;this.$$animate=c;Xd(this)}function Xd(a){a.$$classCache={};a.$$classCache[Yd]=!(a.$$classCache[nb]=a.$$element.hasClass(nb))}function Zd(a){function b(a,b,c){c&&!a.$$classCache[b]?(a.$$animate.addClass(a.$$element,b),a.$$classCache[b]=!0):!c&&a.$$classCache[b]&&(a.$$animate.removeClass(a.$$element,
b),a.$$classCache[b]=!1)}function d(a,c,d){c=c?"-"+Tc(c,"-"):"";b(a,nb+c,!0===d);b(a,Yd+c,!1===d)}var c=a.set,e=a.unset;a.clazz.prototype.$setValidity=function(a,g,h){w(g)?(this.$pending||(this.$pending={}),c(this.$pending,a,h)):(this.$pending&&e(this.$pending,a,h),$d(this.$pending)&&(this.$pending=void 0));Ha(g)?g?(e(this.$error,a,h),c(this.$$success,a,h)):(c(this.$error,a,h),e(this.$$success,a,h)):(e(this.$error,a,h),e(this.$$success,a,h));this.$pending?(b(this,"ng-pending",!0),this.$valid=this.$invalid=
void 0,d(this,"",null)):(b(this,"ng-pending",!1),this.$valid=$d(this.$error),this.$invalid=!this.$valid,d(this,"",this.$valid));g=this.$pending&&this.$pending[a]?void 0:this.$error[a]?!1:this.$$success[a]?!0:null;d(this,a,g);this.$$parentForm.$setValidity(a,g,this)}}function $d(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function Cc(a){a.$formatters.push(function(b){return a.$isEmpty(b)?b:b.toString()})}function Ra(a,b,d,c,e,f){var g=Q(b[0].type);if(!e.android){var h=!1;b.on("compositionstart",
function(){h=!0});b.on("compositionend",function(){h=!1;l()})}var k,l=function(a){k&&(f.defer.cancel(k),k=null);if(!h){var e=b.val();a=a&&a.type;"password"===g||d.ngTrim&&"false"===d.ngTrim||(e=T(e));(c.$viewValue!==e||""===e&&c.$$hasNativeValidators)&&c.$setViewValue(e,a)}};if(e.hasEvent("input"))b.on("input",l);else{var m=function(a,b,c){k||(k=f.defer(function(){k=null;b&&b.value===c||l(a)}))};b.on("keydown",function(a){var b=a.keyCode;91===b||15<b&&19>b||37<=b&&40>=b||m(a,this,this.value)});if(e.hasEvent("paste"))b.on("paste cut",
m)}b.on("change",l);if(ae[g]&&c.$$hasNativeValidators&&g===d.type)b.on("keydown wheel mousedown",function(a){if(!k){var b=this.validity,c=b.badInput,d=b.typeMismatch;k=f.defer(function(){k=null;b.badInput===c&&b.typeMismatch===d||l(a)})}});c.$render=function(){var a=c.$isEmpty(c.$viewValue)?"":c.$viewValue;b.val()!==a&&b.val(a)}}function Nb(a,b){return function(d,c){var e,f;if(ga(d))return d;if(F(d)){'"'===d.charAt(0)&&'"'===d.charAt(d.length-1)&&(d=d.substring(1,d.length-1));if(Pg.test(d))return new Date(d);
a.lastIndex=0;if(e=a.exec(d))return e.shift(),f=c?{yyyy:c.getFullYear(),MM:c.getMonth()+1,dd:c.getDate(),HH:c.getHours(),mm:c.getMinutes(),ss:c.getSeconds(),sss:c.getMilliseconds()/1E3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},q(e,function(a,c){c<b.length&&(f[b[c]]=+a)}),new Date(f.yyyy,f.MM-1,f.dd,f.HH,f.mm,f.ss||0,1E3*f.sss||0)}return NaN}}function ob(a,b,d,c){return function(e,f,g,h,k,l,m){function n(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function p(a){return u(a)&&!ga(a)?d(a)||
void 0:a}Dc(e,f,g,h);Ra(e,f,g,h,k,l);var r=h&&h.$options.getOption("timezone"),q;h.$$parserName=a;h.$parsers.push(function(a){if(h.$isEmpty(a))return null;if(b.test(a))return a=d(a,q),r&&(a=Yb(a,r)),a});h.$formatters.push(function(a){if(a&&!ga(a))throw pb("datefmt",a);if(n(a))return(q=a)&&r&&(q=Yb(q,r,!0)),m("date")(a,c,r);q=null;return""});if(u(g.min)||g.ngMin){var v;h.$validators.min=function(a){return!n(a)||w(v)||d(a)>=v};g.$observe("min",function(a){v=p(a);h.$validate()})}if(u(g.max)||g.ngMax){var t;
h.$validators.max=function(a){return!n(a)||w(t)||d(a)<=t};g.$observe("max",function(a){t=p(a);h.$validate()})}}}function Dc(a,b,d,c){(c.$$hasNativeValidators=C(b[0].validity))&&c.$parsers.push(function(a){var c=b.prop("validity")||{};return c.badInput||c.typeMismatch?void 0:a})}function be(a){a.$$parserName="number";a.$parsers.push(function(b){if(a.$isEmpty(b))return null;if(Qg.test(b))return parseFloat(b)});a.$formatters.push(function(b){if(!a.$isEmpty(b)){if(!ba(b))throw pb("numfmt",b);b=b.toString()}return b})}
function Sa(a){u(a)&&!ba(a)&&(a=parseFloat(a));return da(a)?void 0:a}function Ec(a){var b=a.toString(),d=b.indexOf(".");return-1===d?-1<a&&1>a&&(a=/e-(\d+)$/.exec(b))?Number(a[1]):0:b.length-d-1}function ce(a,b,d){a=Number(a);var c=(a|0)!==a,e=(b|0)!==b,f=(d|0)!==d;if(c||e||f){var g=c?Ec(a):0,h=e?Ec(b):0,k=f?Ec(d):0,g=Math.max(g,h,k),g=Math.pow(10,g);a*=g;b*=g;d*=g;c&&(a=Math.round(a));e&&(b=Math.round(b));f&&(d=Math.round(d))}return 0===(a-b)%d}function de(a,b,d,c,e){if(u(c)){a=a(c);if(!a.constant)throw pb("constexpr",
d,c);return a(b)}return e}function Fc(a,b){function d(a,b){if(!a||!a.length)return[];if(!b||!b.length)return a;var c=[],d=0;a:for(;d<a.length;d++){for(var e=a[d],m=0;m<b.length;m++)if(e===b[m])continue a;c.push(e)}return c}function c(a){var b=a;H(a)?b=a.map(c).join(" "):C(a)&&(b=Object.keys(a).filter(function(b){return a[b]}).join(" "));return b}a="ngClass"+a;var e;return["$parse",function(f){return{restrict:"AC",link:function(g,h,k){function l(a,b){var c=[];q(a,function(a){if(0<b||n[a])n[a]=(n[a]||
0)+b,n[a]===+(0<b)&&c.push(a)});return c.join(" ")}function m(a){if(a===b){var c=r,c=l(c&&c.split(" "),1);k.$addClass(c)}else c=r,c=l(c&&c.split(" "),-1),k.$removeClass(c);p=a}var n=h.data("$classCounts"),p=!0,r;n||(n=V(),h.data("$classCounts",n));"ngClass"!==a&&(e||(e=f("$index",function(a){return a&1})),g.$watch(e,m));g.$watch(f(k[a],c),function(a){F(a)||(a=c(a));if(p===b){var e=a,f=r&&r.split(" "),g=e&&e.split(" "),e=d(f,g),f=d(g,f),e=l(e,-1),f=l(f,1);k.$addClass(f);k.$removeClass(e)}r=a})}}}]}
function Ob(a,b,d,c,e,f,g,h,k){this.$modelValue=this.$viewValue=Number.NaN;this.$$rawModelValue=void 0;this.$validators={};this.$asyncValidators={};this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$untouched=!0;this.$touched=!1;this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$error={};this.$$success={};this.$pending=void 0;this.$name=k(d.name||"",!1)(a);this.$$parentForm=Mb;this.$options=Pb;this.$$parsedNgModel=e(d.ngModel);this.$$parsedNgModelAssign=this.$$parsedNgModel.assign;
this.$$ngModelGet=this.$$parsedNgModel;this.$$ngModelSet=this.$$parsedNgModelAssign;this.$$pendingDebounce=null;this.$$parserValid=void 0;this.$$currentValidationRunId=0;Object.defineProperty(this,"$$scope",{value:a});this.$$attr=d;this.$$element=c;this.$$animate=f;this.$$timeout=g;this.$$parse=e;this.$$q=h;this.$$exceptionHandler=b;Xd(this);Rg(this)}function Rg(a){a.$$scope.$watch(function(b){b=a.$$ngModelGet(b);if(b!==a.$modelValue&&(a.$modelValue===a.$modelValue||b===b)){a.$modelValue=a.$$rawModelValue=
b;a.$$parserValid=void 0;for(var d=a.$formatters,c=d.length,e=b;c--;)e=d[c](e);a.$viewValue!==e&&(a.$$updateEmptyClasses(e),a.$viewValue=a.$$lastCommittedViewValue=e,a.$render(),a.$$runValidators(a.$modelValue,a.$viewValue,z))}return b})}function Gc(a){this.$$options=a}function ee(a,b){q(b,function(b,c){u(a[c])||(a[c]=b)})}function Ta(a,b){a.prop("selected",b);a.attr("selected",b)}var Sg=/^\/(.+)\/([a-z]*)$/,ua=Object.prototype.hasOwnProperty,Ic={objectMaxDepth:5},Q=function(a){return F(a)?a.toLowerCase():
a},ub=function(a){return F(a)?a.toUpperCase():a},za,B,na,va=[].slice,sg=[].splice,Tg=[].push,ma=Object.prototype.toString,Mc=Object.getPrototypeOf,Fa=L("ng"),ea=x.angular||(x.angular={}),ac,qb=0;za=x.document.documentMode;var da=Number.isNaN||function(a){return a!==a};z.$inject=[];Ya.$inject=[];var H=Array.isArray,qe=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/,T=function(a){return F(a)?a.trim():a},Kd=function(a){return a.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,
"\\$1").replace(/\x08/g,"\\x08")},Ga=function(){if(!u(Ga.rules)){var a=x.document.querySelector("[ng-csp]")||x.document.querySelector("[data-ng-csp]");if(a){var b=a.getAttribute("ng-csp")||a.getAttribute("data-ng-csp");Ga.rules={noUnsafeEval:!b||-1!==b.indexOf("no-unsafe-eval"),noInlineStyle:!b||-1!==b.indexOf("no-inline-style")}}else{a=Ga;try{new Function(""),b=!1}catch(d){b=!0}a.rules={noUnsafeEval:b,noInlineStyle:!1}}}return Ga.rules},rb=function(){if(u(rb.name_))return rb.name_;var a,b,d=Ja.length,
c,e;for(b=0;b<d;++b)if(c=Ja[b],a=x.document.querySelector("["+c.replace(":","\\:")+"jq]")){e=a.getAttribute(c+"jq");break}return rb.name_=e},se=/:/g,Ja=["ng-","data-ng-","ng:","x-ng-"],ve=function(a){var b=a.currentScript;if(!b)return!0;if(!(b instanceof x.HTMLScriptElement||b instanceof x.SVGScriptElement))return!1;b=b.attributes;return[b.getNamedItem("src"),b.getNamedItem("href"),b.getNamedItem("xlink:href")].every(function(b){if(!b)return!0;if(!b.value)return!1;var c=a.createElement("a");c.href=
b.value;if(a.location.origin===c.origin)return!0;switch(c.protocol){case "http:":case "https:":case "ftp:":case "blob:":case "file:":case "data:":return!0;default:return!1}})}(x.document),ye=/[A-Z]/g,Uc=!1,Ia=3,De={full:"1.6.4",major:1,minor:6,dot:4,codeName:"phenomenal-footnote"};W.expando="ng339";var hb=W.cache={},eg=1;W._data=function(a){return this.cache[a[this.expando]]||{}};var ag=/-([a-z])/g,Ug=/^-ms-/,zb={mouseleave:"mouseout",mouseenter:"mouseover"},dc=L("jqLite"),dg=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,
cc=/<|&#?\w+;/,bg=/<([\w:-]+)/,cg=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ha={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ha.optgroup=ha.option;ha.tbody=ha.tfoot=ha.colgroup=ha.caption=ha.thead;ha.th=ha.td;var jg=x.Node.prototype.contains||function(a){return!!(this.compareDocumentPosition(a)&
16)},Na=W.prototype={ready:ed,toString:function(){var a=[];q(this,function(b){a.push(""+b)});return"["+a.join(", ")+"]"},eq:function(a){return 0<=a?B(this[a]):B(this[this.length+a])},length:0,push:Tg,sort:[].sort,splice:[].splice},Fb={};q("multiple selected checked disabled readOnly required open".split(" "),function(a){Fb[Q(a)]=a});var jd={};q("input select option textarea button form details".split(" "),function(a){jd[a]=!0});var rd={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",
ngPattern:"pattern",ngStep:"step"};q({data:hc,removeData:gc,hasData:function(a){for(var b in hb[a.ng339])return!0;return!1},cleanData:function(a){for(var b=0,d=a.length;b<d;b++)gc(a[b])}},function(a,b){W[b]=a});q({data:hc,inheritedData:Db,scope:function(a){return B.data(a,"$scope")||Db(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return B.data(a,"$isolateScope")||B.data(a,"$isolateScopeNoTemplate")},controller:gd,injector:function(a){return Db(a,"$injector")},removeAttr:function(a,
b){a.removeAttribute(b)},hasClass:Ab,css:function(a,b,d){b=wb(b.replace(Ug,"ms-"));if(u(d))a.style[b]=d;else return a.style[b]},attr:function(a,b,d){var c=a.nodeType;if(c!==Ia&&2!==c&&8!==c&&a.getAttribute){var c=Q(b),e=Fb[c];if(u(d))null===d||!1===d&&e?a.removeAttribute(b):a.setAttribute(b,e?c:d);else return a=a.getAttribute(b),e&&null!==a&&(a=c),null===a?void 0:a}},prop:function(a,b,d){if(u(d))a[b]=d;else return a[b]},text:function(){function a(a,d){if(w(d)){var c=a.nodeType;return 1===c||c===Ia?
a.textContent:""}a.textContent=d}a.$dv="";return a}(),val:function(a,b){if(w(b)){if(a.multiple&&"select"===wa(a)){var d=[];q(a.options,function(a){a.selected&&d.push(a.value||a.text)});return d}return a.value}a.value=b},html:function(a,b){if(w(b))return a.innerHTML;xb(a,!0);a.innerHTML=b},empty:hd},function(a,b){W.prototype[b]=function(b,c){var e,f,g=this.length;if(a!==hd&&w(2===a.length&&a!==Ab&&a!==gd?b:c)){if(C(b)){for(e=0;e<g;e++)if(a===hc)a(this[e],b);else for(f in b)a(this[e],f,b[f]);return this}e=
a.$dv;g=w(e)?Math.min(g,1):g;for(f=0;f<g;f++){var h=a(this[f],b,c);e=e?e+h:h}return e}for(e=0;e<g;e++)a(this[e],b,c);return this}});q({removeData:gc,on:function(a,b,d,c){if(u(c))throw dc("onargs");if(bc(a)){c=yb(a,!0);var e=c.events,f=c.handle;f||(f=c.handle=gg(a,e));c=0<=b.indexOf(" ")?b.split(" "):[b];for(var g=c.length,h=function(b,c,g){var h=e[b];h||(h=e[b]=[],h.specialHandlerWrapper=c,"$destroy"===b||g||a.addEventListener(b,f));h.push(d)};g--;)b=c[g],zb[b]?(h(zb[b],ig),h(b,void 0,!0)):h(b)}},
off:fd,one:function(a,b,d){a=B(a);a.on(b,function e(){a.off(b,d);a.off(b,e)});a.on(b,d)},replaceWith:function(a,b){var d,c=a.parentNode;xb(a);q(new W(b),function(b){d?c.insertBefore(b,d.nextSibling):c.replaceChild(b,a);d=b})},children:function(a){var b=[];q(a.childNodes,function(a){1===a.nodeType&&b.push(a)});return b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){var d=a.nodeType;if(1===d||11===d){b=new W(b);for(var d=0,c=b.length;d<c;d++)a.appendChild(b[d])}},
prepend:function(a,b){if(1===a.nodeType){var d=a.firstChild;q(new W(b),function(b){a.insertBefore(b,d)})}},wrap:function(a,b){var d=B(b).eq(0).clone()[0],c=a.parentNode;c&&c.replaceChild(d,a);d.appendChild(a)},remove:Eb,detach:function(a){Eb(a,!0)},after:function(a,b){var d=a,c=a.parentNode;if(c){b=new W(b);for(var e=0,f=b.length;e<f;e++){var g=b[e];c.insertBefore(g,d.nextSibling);d=g}}},addClass:Cb,removeClass:Bb,toggleClass:function(a,b,d){b&&q(b.split(" "),function(b){var e=d;w(e)&&(e=!Ab(a,b));
(e?Cb:Bb)(a,b)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){return a.nextElementSibling},find:function(a,b){return a.getElementsByTagName?a.getElementsByTagName(b):[]},clone:fc,triggerHandler:function(a,b,d){var c,e,f=b.type||b,g=yb(a);if(g=(g=g&&g.events)&&g[f])c={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===
this.immediatePropagationStopped},stopPropagation:z,type:f,target:a},b.type&&(c=S(c,b)),b=pa(g),e=d?[c].concat(d):[c],q(b,function(b){c.isImmediatePropagationStopped()||b.apply(a,e)})}},function(a,b){W.prototype[b]=function(b,c,e){for(var f,g=0,h=this.length;g<h;g++)w(f)?(f=a(this[g],b,c,e),u(f)&&(f=B(f))):ec(f,a(this[g],b,c,e));return u(f)?f:this}});W.prototype.bind=W.prototype.on;W.prototype.unbind=W.prototype.off;var Vg=Object.create(null);kd.prototype={_idx:function(a){if(a===this._lastKey)return this._lastIndex;
this._lastKey=a;return this._lastIndex=this._keys.indexOf(a)},_transformKey:function(a){return da(a)?Vg:a},get:function(a){a=this._transformKey(a);a=this._idx(a);if(-1!==a)return this._values[a]},set:function(a,b){a=this._transformKey(a);var d=this._idx(a);-1===d&&(d=this._lastIndex=this._keys.length);this._keys[d]=a;this._values[d]=b},delete:function(a){a=this._transformKey(a);a=this._idx(a);if(-1===a)return!1;this._keys.splice(a,1);this._values.splice(a,1);this._lastKey=NaN;this._lastIndex=-1;return!0}};
var Gb=kd,Zf=[function(){this.$get=[function(){return Gb}]}],lg=/^([^(]+?)=>/,mg=/^[^(]*\(\s*([^)]*)\)/m,Wg=/,/,Xg=/^\s*(_?)(\S+?)\1\s*$/,kg=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,ya=L("$injector");eb.$$annotate=function(a,b,d){var c;if("function"===typeof a){if(!(c=a.$inject)){c=[];if(a.length){if(b)throw F(d)&&d||(d=a.name||ng(a)),ya("strictdi",d);b=ld(a);q(b[1].split(Wg),function(a){a.replace(Xg,function(a,b,d){c.push(d)})})}a.$inject=c}}else H(a)?(b=a.length-1,sb(a[b],"fn"),c=a.slice(0,b)):sb(a,"fn",
!0);return c};var fe=L("$animate"),qf=function(){this.$get=z},rf=function(){var a=new Gb,b=[];this.$get=["$$AnimateRunner","$rootScope",function(d,c){function e(a,b,c){var d=!1;b&&(b=F(b)?b.split(" "):H(b)?b:[],q(b,function(b){b&&(d=!0,a[b]=c)}));return d}function f(){q(b,function(b){var c=a.get(b);if(c){var d=og(b.attr("class")),e="",f="";q(c,function(a,b){a!==!!d[b]&&(a?e+=(e.length?" ":"")+b:f+=(f.length?" ":"")+b)});q(b,function(a){e&&Cb(a,e);f&&Bb(a,f)});a.delete(b)}});b.length=0}return{enabled:z,
on:z,off:z,pin:z,push:function(g,h,k,l){l&&l();k=k||{};k.from&&g.css(k.from);k.to&&g.css(k.to);if(k.addClass||k.removeClass)if(h=k.addClass,l=k.removeClass,k=a.get(g)||{},h=e(k,h,!0),l=e(k,l,!1),h||l)a.set(g,k),b.push(g),1===b.length&&c.$$postDigest(f);g=new d;g.complete();return g}}}]},of=["$provide",function(a){var b=this,d=null;this.$$registeredAnimations=Object.create(null);this.register=function(c,d){if(c&&"."!==c.charAt(0))throw fe("notcsel",c);var f=c+"-animation";b.$$registeredAnimations[c.substr(1)]=
f;a.factory(f,d)};this.classNameFilter=function(a){if(1===arguments.length&&(d=a instanceof RegExp?a:null)&&/[(\s|\/)]ng-animate[(\s|\/)]/.test(d.toString()))throw d=null,fe("nongcls","ng-animate");return d};this.$get=["$$animateQueue",function(a){function b(a,c,d){if(d){var e;a:{for(e=0;e<d.length;e++){var l=d[e];if(1===l.nodeType){e=l;break a}}e=void 0}!e||e.parentNode||e.previousElementSibling||(d=null)}d?d.after(a):c.prepend(a)}return{on:a.on,off:a.off,pin:a.pin,enabled:a.enabled,cancel:function(a){a.end&&
a.end()},enter:function(d,g,h,k){g=g&&B(g);h=h&&B(h);g=g||h.parent();b(d,g,h);return a.push(d,"enter",ia(k))},move:function(d,g,h,k){g=g&&B(g);h=h&&B(h);g=g||h.parent();b(d,g,h);return a.push(d,"move",ia(k))},leave:function(b,d){return a.push(b,"leave",ia(d),function(){b.remove()})},addClass:function(b,d,e){e=ia(e);e.addClass=ib(e.addclass,d);return a.push(b,"addClass",e)},removeClass:function(b,d,e){e=ia(e);e.removeClass=ib(e.removeClass,d);return a.push(b,"removeClass",e)},setClass:function(b,d,
e,k){k=ia(k);k.addClass=ib(k.addClass,d);k.removeClass=ib(k.removeClass,e);return a.push(b,"setClass",k)},animate:function(b,d,e,k,l){l=ia(l);l.from=l.from?S(l.from,d):d;l.to=l.to?S(l.to,e):e;l.tempClasses=ib(l.tempClasses,k||"ng-inline-animate");return a.push(b,"animate",l)}}}]}],tf=function(){this.$get=["$$rAF",function(a){function b(b){d.push(b);1<d.length||a(function(){for(var a=0;a<d.length;a++)d[a]();d=[]})}var d=[];return function(){var a=!1;b(function(){a=!0});return function(d){a?d():b(d)}}}]},
sf=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(a,b,d,c,e){function f(a){this.setHost(a);var b=d();this._doneCallbacks=[];this._tick=function(a){c()?e(a,0,!1):b(a)};this._state=0}f.chain=function(a,b){function c(){if(d===a.length)b(!0);else a[d](function(a){!1===a?b(!1):(d++,c())})}var d=0;c()};f.all=function(a,b){function c(f){e=e&&f;++d===a.length&&b(e)}var d=0,e=!0;q(a,function(a){a.done(c)})};f.prototype={setHost:function(a){this.host=a||{}},
done:function(a){2===this._state?a():this._doneCallbacks.push(a)},progress:z,getPromise:function(){if(!this.promise){var b=this;this.promise=a(function(a,c){b.done(function(b){!1===b?c():a()})})}return this.promise},then:function(a,b){return this.getPromise().then(a,b)},"catch":function(a){return this.getPromise()["catch"](a)},"finally":function(a){return this.getPromise()["finally"](a)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&
this.host.end();this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel();this._resolve(!1)},complete:function(a){var b=this;0===b._state&&(b._state=1,b._tick(function(){b._resolve(a)}))},_resolve:function(a){2!==this._state&&(q(this._doneCallbacks,function(b){b(a)}),this._doneCallbacks.length=0,this._state=2)}};return f}]},pf=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(a,b,d){return function(b,e){function f(){a(function(){g.addClass&&(b.addClass(g.addClass),g.addClass=
null);g.removeClass&&(b.removeClass(g.removeClass),g.removeClass=null);g.to&&(b.css(g.to),g.to=null);h||k.complete();h=!0});return k}var g=e||{};g.$$prepared||(g=ra(g));g.cleanupStyles&&(g.from=g.to=null);g.from&&(b.css(g.from),g.from=null);var h,k=new d;return{start:f,end:f}}}]},fa=L("$compile"),lc=new function(){};Wc.$inject=["$provide","$$sanitizeUriProvider"];Ib.prototype.isFirstChange=function(){return this.previousValue===lc};var md=/^((?:x|data)[:\-_])/i,rg=/[:\-_]+(.)/g,td=L("$controller"),
sd=/^(\S+)(\s+as\s+([\w$]+))?$/,Af=function(){this.$get=["$document",function(a){return function(b){b?!b.nodeType&&b instanceof B&&(b=b[0]):b=a[0].body;return b.offsetWidth+1}}]},ud="application/json",pc={"Content-Type":ud+";charset=utf-8"},ug=/^\[|^\{(?!\{)/,vg={"[":/]$/,"{":/}$/},tg=/^\)]\}',?\n/,oc=L("$http"),Da=ea.$interpolateMinErr=L("$interpolate");Da.throwNoconcat=function(a){throw Da("noconcat",a);};Da.interr=function(a,b){return Da("interr",a,b.toString())};var If=function(){this.$get=function(){function a(a){var b=
function(a){b.data=a;b.called=!0};b.id=a;return b}var b=ea.callbacks,d={};return{createCallback:function(c){c="_"+(b.$$counter++).toString(36);var e="angular.callbacks."+c,f=a(c);d[e]=b[c]=f;return e},wasCalled:function(a){return d[a].called},getResponse:function(a){return d[a].data},removeCallback:function(a){delete b[d[a].id];delete d[a]}}}},Yg=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,xg={http:80,https:443,ftp:21},kb=L("$location"),yg=/^\s*[\\/]{2,}/,Zg={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:Jb("$$absUrl"),
url:function(a){if(w(a))return this.$$url;var b=Yg.exec(a);(b[1]||""===a)&&this.path(decodeURIComponent(b[1]));(b[2]||b[1]||""===a)&&this.search(b[3]||"");this.hash(b[5]||"");return this},protocol:Jb("$$protocol"),host:Jb("$$host"),port:Jb("$$port"),path:Cd("$$path",function(a){a=null!==a?a.toString():"";return"/"===a.charAt(0)?a:"/"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(F(a)||ba(a))a=a.toString(),this.$$search=Rc(a);else if(C(a))a=ra(a,{}),q(a,function(b,
c){null==b&&delete a[c]}),this.$$search=a;else throw kb("isrcharg");break;default:w(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}this.$$compose();return this},hash:Cd("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){this.$$replace=!0;return this}};q([Bd,tc,sc],function(a){a.prototype=Object.create(Zg);a.prototype.state=function(b){if(!arguments.length)return this.$$state;if(a!==sc||!this.$$html5)throw kb("nostate");this.$$state=w(b)?null:b;this.$$urlUpdatedByLocation=
!0;return this}});var Ua=L("$parse"),Bg={}.constructor.prototype.valueOf,Qb=V();q("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(a){Qb[a]=!0});var $g={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},wc=function(a){this.options=a};wc.prototype={constructor:wc,lex:function(a){this.text=a;this.index=0;for(this.tokens=[];this.index<this.text.length;)if(a=this.text.charAt(this.index),'"'===a||"'"===a)this.readString(a);else if(this.isNumber(a)||"."===a&&this.isNumber(this.peek()))this.readNumber();
else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(a,"(){}[].,;:?"))this.tokens.push({index:this.index,text:a}),this.index++;else if(this.isWhitespace(a))this.index++;else{var b=a+this.peek(),d=b+this.peek(2),c=Qb[b],e=Qb[d];Qb[a]||c||e?(a=e?d:c?b:a,this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(a,b){return-1!==b.indexOf(a)},peek:function(a){a=
a||1;return this.index+a<this.text.length?this.text.charAt(this.index+a):!1},isNumber:function(a){return"0"<=a&&"9">=a&&"string"===typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\v"===a||"\u00a0"===a},isIdentifierStart:function(a){return this.options.isIdentifierStart?this.options.isIdentifierStart(a,this.codePointAt(a)):this.isValidIdentifierStart(a)},isValidIdentifierStart:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a},isIdentifierContinue:function(a){return this.options.isIdentifierContinue?
this.options.isIdentifierContinue(a,this.codePointAt(a)):this.isValidIdentifierContinue(a)},isValidIdentifierContinue:function(a,b){return this.isValidIdentifierStart(a,b)||this.isNumber(a)},codePointAt:function(a){return 1===a.length?a.charCodeAt(0):(a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888},peekMultichar:function(){var a=this.text.charAt(this.index),b=this.peek();if(!b)return a;var d=a.charCodeAt(0),c=b.charCodeAt(0);return 55296<=d&&56319>=d&&56320<=c&&57343>=c?a+b:a},isExpOperator:function(a){return"-"===
a||"+"===a||this.isNumber(a)},throwError:function(a,b,d){d=d||this.index;b=u(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,d)+"]":" "+d;throw Ua("lexerr",a,b,this.text);},readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var d=Q(this.text.charAt(this.index));if("."===d||this.isNumber(d))a+=d;else{var c=this.peek();if("e"===d&&this.isExpOperator(c))a+=d;else if(this.isExpOperator(d)&&c&&this.isNumber(c)&&"e"===a.charAt(a.length-1))a+=d;else if(!this.isExpOperator(d)||
c&&this.isNumber(c)||"e"!==a.charAt(a.length-1))break;else this.throwError("Invalid exponent")}this.index++}this.tokens.push({index:b,text:a,constant:!0,value:Number(a)})},readIdent:function(){var a=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var b=this.peekMultichar();if(!this.isIdentifierContinue(b))break;this.index+=b.length}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var b=this.index;this.index++;
for(var d="",c=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index),c=c+f;if(e)"u"===f?(e=this.text.substring(this.index+1,this.index+5),e.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+e+"]"),this.index+=4,d+=String.fromCharCode(parseInt(e,16))):d+=$g[f]||f,e=!1;else if("\\"===f)e=!0;else{if(f===a){this.index++;this.tokens.push({index:b,text:c,constant:!0,value:d});return}d+=f}this.index++}this.throwError("Unterminated quote",b)}};var s=function(a,b){this.lexer=
a;this.options=b};s.Program="Program";s.ExpressionStatement="ExpressionStatement";s.AssignmentExpression="AssignmentExpression";s.ConditionalExpression="ConditionalExpression";s.LogicalExpression="LogicalExpression";s.BinaryExpression="BinaryExpression";s.UnaryExpression="UnaryExpression";s.CallExpression="CallExpression";s.MemberExpression="MemberExpression";s.Identifier="Identifier";s.Literal="Literal";s.ArrayExpression="ArrayExpression";s.Property="Property";s.ObjectExpression="ObjectExpression";
s.ThisExpression="ThisExpression";s.LocalsExpression="LocalsExpression";s.NGValueParameter="NGValueParameter";s.prototype={ast:function(a){this.text=a;this.tokens=this.lexer.lex(a);a=this.program();0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]);return a},program:function(){for(var a=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.expressionStatement()),!this.expect(";"))return{type:s.Program,body:a}},expressionStatement:function(){return{type:s.ExpressionStatement,
expression:this.filterChain()}},filterChain:function(){for(var a=this.expression();this.expect("|");)a=this.filter(a);return a},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary();if(this.expect("=")){if(!Fd(a))throw Ua("lval");a={type:s.AssignmentExpression,left:a,right:this.assignment(),operator:"="}}return a},ternary:function(){var a=this.logicalOR(),b,d;return this.expect("?")&&(b=this.expression(),this.consume(":"))?(d=this.expression(),{type:s.ConditionalExpression,
test:a,alternate:b,consequent:d}):a},logicalOR:function(){for(var a=this.logicalAND();this.expect("||");)a={type:s.LogicalExpression,operator:"||",left:a,right:this.logicalAND()};return a},logicalAND:function(){for(var a=this.equality();this.expect("&&");)a={type:s.LogicalExpression,operator:"&&",left:a,right:this.equality()};return a},equality:function(){for(var a=this.relational(),b;b=this.expect("==","!=","===","!==");)a={type:s.BinaryExpression,operator:b.text,left:a,right:this.relational()};
return a},relational:function(){for(var a=this.additive(),b;b=this.expect("<",">","<=",">=");)a={type:s.BinaryExpression,operator:b.text,left:a,right:this.additive()};return a},additive:function(){for(var a=this.multiplicative(),b;b=this.expect("+","-");)a={type:s.BinaryExpression,operator:b.text,left:a,right:this.multiplicative()};return a},multiplicative:function(){for(var a=this.unary(),b;b=this.expect("*","/","%");)a={type:s.BinaryExpression,operator:b.text,left:a,right:this.unary()};return a},
unary:function(){var a;return(a=this.expect("+","-","!"))?{type:s.UnaryExpression,operator:a.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?a=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?a=ra(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?a={type:s.Literal,value:this.options.literals[this.consume().text]}:
this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",this.peek());for(var b;b=this.expect("(","[",".");)"("===b.text?(a={type:s.CallExpression,callee:a,arguments:this.parseArguments()},this.consume(")")):"["===b.text?(a={type:s.MemberExpression,object:a,property:this.expression(),computed:!0},this.consume("]")):"."===b.text?a={type:s.MemberExpression,object:a,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");
return a},filter:function(a){a=[a];for(var b={type:s.CallExpression,callee:this.identifier(),arguments:a,filter:!0};this.expect(":");)a.push(this.expression());return b},parseArguments:function(){var a=[];if(")"!==this.peekToken().text){do a.push(this.filterChain());while(this.expect(","))}return a},identifier:function(){var a=this.consume();a.identifier||this.throwError("is not a valid identifier",a);return{type:s.Identifier,name:a.text}},constant:function(){return{type:s.Literal,value:this.consume().value}},
arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text){do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","))}this.consume("]");return{type:s.ArrayExpression,elements:a}},object:function(){var a=[],b;if("}"!==this.peekToken().text){do{if(this.peek("}"))break;b={type:s.Property,kind:"init"};this.peek().constant?(b.key=this.constant(),b.computed=!1,this.consume(":"),b.value=this.expression()):this.peek().identifier?(b.key=this.identifier(),b.computed=!1,this.peek(":")?
(this.consume(":"),b.value=this.expression()):b.value=b.key):this.peek("[")?(this.consume("["),b.key=this.expression(),this.consume("]"),b.computed=!0,this.consume(":"),b.value=this.expression()):this.throwError("invalid key",this.peek());a.push(b)}while(this.expect(","))}this.consume("}");return{type:s.ObjectExpression,properties:a}},throwError:function(a,b){throw Ua("syntax",b.text,a,b.index+1,this.text,this.text.substring(b.index));},consume:function(a){if(0===this.tokens.length)throw Ua("ueoe",
this.text);var b=this.expect(a);b||this.throwError("is unexpected, expecting ["+a+"]",this.peek());return b},peekToken:function(){if(0===this.tokens.length)throw Ua("ueoe",this.text);return this.tokens[0]},peek:function(a,b,d,c){return this.peekAhead(0,a,b,d,c)},peekAhead:function(a,b,d,c,e){if(this.tokens.length>a){a=this.tokens[a];var f=a.text;if(f===b||f===d||f===c||f===e||!(b||d||c||e))return a}return!1},expect:function(a,b,d,c){return(a=this.peek(a,b,d,c))?(this.tokens.shift(),a):!1},selfReferential:{"this":{type:s.ThisExpression},
$locals:{type:s.LocalsExpression}}};Hd.prototype={compile:function(a){var b=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]};U(a,b.$filter);var d="",c;this.stage="assign";if(c=Gd(a))this.state.computing="assign",d=this.nextId(),this.recurse(c,d),this.return_(d),d="fn.assign="+this.generateFunction("assign","s,v,l");c=Ed(a.body);b.stage="inputs";q(c,function(a,c){var d="fn"+c;b.state[d]={vars:[],body:[],own:{}};b.state.computing=d;var h=b.nextId();
b.recurse(a,h);b.return_(h);b.state.inputs.push(d);a.watchId=c});this.state.computing="fn";this.stage="main";this.recurse(a);a='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+d+this.watchFns()+"return fn;";a=(new Function("$filter","getStringValue","ifDefined","plus",a))(this.$filter,zg,Ag,Dd);this.state=this.stage=void 0;return a},USE:"use",STRICT:"strict",watchFns:function(){var a=[],b=this.state.inputs,d=this;q(b,function(b){a.push("var "+
b+"="+d.generateFunction(b,"s"))});b.length&&a.push("fn.inputs=["+b.join(",")+"];");return a.join("")},generateFunction:function(a,b){return"function("+b+"){"+this.varsPrefix(a)+this.body(a)+"};"},filterPrefix:function(){var a=[],b=this;q(this.state.filters,function(d,c){a.push(d+"=$filter("+b.escape(c)+")")});return a.length?"var "+a.join(",")+";":""},varsPrefix:function(a){return this.state[a].vars.length?"var "+this.state[a].vars.join(",")+";":""},body:function(a){return this.state[a].body.join("")},
recurse:function(a,b,d,c,e,f){var g,h,k=this,l,m,n;c=c||z;if(!f&&u(a.watchId))b=b||this.nextId(),this.if_("i",this.lazyAssign(b,this.computedMember("i",a.watchId)),this.lazyRecurse(a,b,d,c,e,!0));else switch(a.type){case s.Program:q(a.body,function(b,c){k.recurse(b.expression,void 0,void 0,function(a){h=a});c!==a.body.length-1?k.current().body.push(h,";"):k.return_(h)});break;case s.Literal:m=this.escape(a.value);this.assign(b,m);c(b||m);break;case s.UnaryExpression:this.recurse(a.argument,void 0,
void 0,function(a){h=a});m=a.operator+"("+this.ifDefined(h,0)+")";this.assign(b,m);c(m);break;case s.BinaryExpression:this.recurse(a.left,void 0,void 0,function(a){g=a});this.recurse(a.right,void 0,void 0,function(a){h=a});m="+"===a.operator?this.plus(g,h):"-"===a.operator?this.ifDefined(g,0)+a.operator+this.ifDefined(h,0):"("+g+")"+a.operator+"("+h+")";this.assign(b,m);c(m);break;case s.LogicalExpression:b=b||this.nextId();k.recurse(a.left,b);k.if_("&&"===a.operator?b:k.not(b),k.lazyRecurse(a.right,
b));c(b);break;case s.ConditionalExpression:b=b||this.nextId();k.recurse(a.test,b);k.if_(b,k.lazyRecurse(a.alternate,b),k.lazyRecurse(a.consequent,b));c(b);break;case s.Identifier:b=b||this.nextId();d&&(d.context="inputs"===k.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",a.name)+"?l:s"),d.computed=!1,d.name=a.name);k.if_("inputs"===k.stage||k.not(k.getHasOwnProperty("l",a.name)),function(){k.if_("inputs"===k.stage||"s",function(){e&&1!==e&&k.if_(k.isNull(k.nonComputedMember("s",a.name)),
k.lazyAssign(k.nonComputedMember("s",a.name),"{}"));k.assign(b,k.nonComputedMember("s",a.name))})},b&&k.lazyAssign(b,k.nonComputedMember("l",a.name)));c(b);break;case s.MemberExpression:g=d&&(d.context=this.nextId())||this.nextId();b=b||this.nextId();k.recurse(a.object,g,void 0,function(){k.if_(k.notNull(g),function(){a.computed?(h=k.nextId(),k.recurse(a.property,h),k.getStringValue(h),e&&1!==e&&k.if_(k.not(k.computedMember(g,h)),k.lazyAssign(k.computedMember(g,h),"{}")),m=k.computedMember(g,h),k.assign(b,
m),d&&(d.computed=!0,d.name=h)):(e&&1!==e&&k.if_(k.isNull(k.nonComputedMember(g,a.property.name)),k.lazyAssign(k.nonComputedMember(g,a.property.name),"{}")),m=k.nonComputedMember(g,a.property.name),k.assign(b,m),d&&(d.computed=!1,d.name=a.property.name))},function(){k.assign(b,"undefined")});c(b)},!!e);break;case s.CallExpression:b=b||this.nextId();a.filter?(h=k.filter(a.callee.name),l=[],q(a.arguments,function(a){var b=k.nextId();k.recurse(a,b);l.push(b)}),m=h+"("+l.join(",")+")",k.assign(b,m),c(b)):
(h=k.nextId(),g={},l=[],k.recurse(a.callee,h,g,function(){k.if_(k.notNull(h),function(){q(a.arguments,function(b){k.recurse(b,a.constant?void 0:k.nextId(),void 0,function(a){l.push(a)})});m=g.name?k.member(g.context,g.name,g.computed)+"("+l.join(",")+")":h+"("+l.join(",")+")";k.assign(b,m)},function(){k.assign(b,"undefined")});c(b)}));break;case s.AssignmentExpression:h=this.nextId();g={};this.recurse(a.left,void 0,g,function(){k.if_(k.notNull(g.context),function(){k.recurse(a.right,h);m=k.member(g.context,
g.name,g.computed)+a.operator+h;k.assign(b,m);c(b||m)})},1);break;case s.ArrayExpression:l=[];q(a.elements,function(b){k.recurse(b,a.constant?void 0:k.nextId(),void 0,function(a){l.push(a)})});m="["+l.join(",")+"]";this.assign(b,m);c(b||m);break;case s.ObjectExpression:l=[];n=!1;q(a.properties,function(a){a.computed&&(n=!0)});n?(b=b||this.nextId(),this.assign(b,"{}"),q(a.properties,function(a){a.computed?(g=k.nextId(),k.recurse(a.key,g)):g=a.key.type===s.Identifier?a.key.name:""+a.key.value;h=k.nextId();
k.recurse(a.value,h);k.assign(k.member(b,g,a.computed),h)})):(q(a.properties,function(b){k.recurse(b.value,a.constant?void 0:k.nextId(),void 0,function(a){l.push(k.escape(b.key.type===s.Identifier?b.key.name:""+b.key.value)+":"+a)})}),m="{"+l.join(",")+"}",this.assign(b,m));c(b||m);break;case s.ThisExpression:this.assign(b,"s");c(b||"s");break;case s.LocalsExpression:this.assign(b,"l");c(b||"l");break;case s.NGValueParameter:this.assign(b,"v"),c(b||"v")}},getHasOwnProperty:function(a,b){var d=a+"."+
b,c=this.current().own;c.hasOwnProperty(d)||(c[d]=this.nextId(!1,a+"&&("+this.escape(b)+" in "+a+")"));return c[d]},assign:function(a,b){if(a)return this.current().body.push(a,"=",b,";"),a},filter:function(a){this.state.filters.hasOwnProperty(a)||(this.state.filters[a]=this.nextId(!0));return this.state.filters[a]},ifDefined:function(a,b){return"ifDefined("+a+","+this.escape(b)+")"},plus:function(a,b){return"plus("+a+","+b+")"},return_:function(a){this.current().body.push("return ",a,";")},if_:function(a,
b,d){if(!0===a)b();else{var c=this.current().body;c.push("if(",a,"){");b();c.push("}");d&&(c.push("else{"),d(),c.push("}"))}},not:function(a){return"!("+a+")"},isNull:function(a){return a+"==null"},notNull:function(a){return a+"!=null"},nonComputedMember:function(a,b){var d=/[^$_a-zA-Z0-9]/g;return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(b)?a+"."+b:a+'["'+b.replace(d,this.stringEscapeFn)+'"]'},computedMember:function(a,b){return a+"["+b+"]"},member:function(a,b,d){return d?this.computedMember(a,b):this.nonComputedMember(a,
b)},getStringValue:function(a){this.assign(a,"getStringValue("+a+")")},lazyRecurse:function(a,b,d,c,e,f){var g=this;return function(){g.recurse(a,b,d,c,e,f)}},lazyAssign:function(a,b){var d=this;return function(){d.assign(a,b)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)},escape:function(a){if(F(a))return"'"+a.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(ba(a))return a.toString();if(!0===a)return"true";if(!1===
a)return"false";if(null===a)return"null";if("undefined"===typeof a)return"undefined";throw Ua("esc");},nextId:function(a,b){var d="v"+this.state.nextId++;a||this.current().vars.push(d+(b?"="+b:""));return d},current:function(){return this.state[this.state.computing]}};Id.prototype={compile:function(a){var b=this;U(a,b.$filter);var d,c;if(d=Gd(a))c=this.recurse(d);d=Ed(a.body);var e;d&&(e=[],q(d,function(a,c){var d=b.recurse(a);a.input=d;e.push(d);a.watchId=c}));var f=[];q(a.body,function(a){f.push(b.recurse(a.expression))});
a=0===a.body.length?z:1===a.body.length?f[0]:function(a,b){var c;q(f,function(d){c=d(a,b)});return c};c&&(a.assign=function(a,b,d){return c(a,d,b)});e&&(a.inputs=e);return a},recurse:function(a,b,d){var c,e,f=this,g;if(a.input)return this.inputs(a.input,a.watchId);switch(a.type){case s.Literal:return this.value(a.value,b);case s.UnaryExpression:return e=this.recurse(a.argument),this["unary"+a.operator](e,b);case s.BinaryExpression:return c=this.recurse(a.left),e=this.recurse(a.right),this["binary"+
a.operator](c,e,b);case s.LogicalExpression:return c=this.recurse(a.left),e=this.recurse(a.right),this["binary"+a.operator](c,e,b);case s.ConditionalExpression:return this["ternary?:"](this.recurse(a.test),this.recurse(a.alternate),this.recurse(a.consequent),b);case s.Identifier:return f.identifier(a.name,b,d);case s.MemberExpression:return c=this.recurse(a.object,!1,!!d),a.computed||(e=a.property.name),a.computed&&(e=this.recurse(a.property)),a.computed?this.computedMember(c,e,b,d):this.nonComputedMember(c,
e,b,d);case s.CallExpression:return g=[],q(a.arguments,function(a){g.push(f.recurse(a))}),a.filter&&(e=this.$filter(a.callee.name)),a.filter||(e=this.recurse(a.callee,!0)),a.filter?function(a,c,d,f){for(var n=[],p=0;p<g.length;++p)n.push(g[p](a,c,d,f));a=e.apply(void 0,n,f);return b?{context:void 0,name:void 0,value:a}:a}:function(a,c,d,f){var n=e(a,c,d,f),p;if(null!=n.value){p=[];for(var r=0;r<g.length;++r)p.push(g[r](a,c,d,f));p=n.value.apply(n.context,p)}return b?{value:p}:p};case s.AssignmentExpression:return c=
this.recurse(a.left,!0,1),e=this.recurse(a.right),function(a,d,f,g){var n=c(a,d,f,g);a=e(a,d,f,g);n.context[n.name]=a;return b?{value:a}:a};case s.ArrayExpression:return g=[],q(a.elements,function(a){g.push(f.recurse(a))}),function(a,c,d,e){for(var f=[],p=0;p<g.length;++p)f.push(g[p](a,c,d,e));return b?{value:f}:f};case s.ObjectExpression:return g=[],q(a.properties,function(a){a.computed?g.push({key:f.recurse(a.key),computed:!0,value:f.recurse(a.value)}):g.push({key:a.key.type===s.Identifier?a.key.name:
""+a.key.value,computed:!1,value:f.recurse(a.value)})}),function(a,c,d,e){for(var f={},p=0;p<g.length;++p)g[p].computed?f[g[p].key(a,c,d,e)]=g[p].value(a,c,d,e):f[g[p].key]=g[p].value(a,c,d,e);return b?{value:f}:f};case s.ThisExpression:return function(a){return b?{value:a}:a};case s.LocalsExpression:return function(a,c){return b?{value:c}:c};case s.NGValueParameter:return function(a,c,d){return b?{value:d}:d}}},"unary+":function(a,b){return function(d,c,e,f){d=a(d,c,e,f);d=u(d)?+d:0;return b?{value:d}:
d}},"unary-":function(a,b){return function(d,c,e,f){d=a(d,c,e,f);d=u(d)?-d:-0;return b?{value:d}:d}},"unary!":function(a,b){return function(d,c,e,f){d=!a(d,c,e,f);return b?{value:d}:d}},"binary+":function(a,b,d){return function(c,e,f,g){var h=a(c,e,f,g);c=b(c,e,f,g);h=Dd(h,c);return d?{value:h}:h}},"binary-":function(a,b,d){return function(c,e,f,g){var h=a(c,e,f,g);c=b(c,e,f,g);h=(u(h)?h:0)-(u(c)?c:0);return d?{value:h}:h}},"binary*":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)*b(c,e,f,g);
return d?{value:c}:c}},"binary/":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)/b(c,e,f,g);return d?{value:c}:c}},"binary%":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)%b(c,e,f,g);return d?{value:c}:c}},"binary===":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)===b(c,e,f,g);return d?{value:c}:c}},"binary!==":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)!==b(c,e,f,g);return d?{value:c}:c}},"binary==":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)==b(c,e,f,g);return d?
{value:c}:c}},"binary!=":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)!=b(c,e,f,g);return d?{value:c}:c}},"binary<":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)<b(c,e,f,g);return d?{value:c}:c}},"binary>":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)>b(c,e,f,g);return d?{value:c}:c}},"binary<=":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)<=b(c,e,f,g);return d?{value:c}:c}},"binary>=":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)>=b(c,e,f,g);return d?{value:c}:
c}},"binary&&":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)&&b(c,e,f,g);return d?{value:c}:c}},"binary||":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)||b(c,e,f,g);return d?{value:c}:c}},"ternary?:":function(a,b,d,c){return function(e,f,g,h){e=a(e,f,g,h)?b(e,f,g,h):d(e,f,g,h);return c?{value:e}:e}},value:function(a,b){return function(){return b?{context:void 0,name:void 0,value:a}:a}},identifier:function(a,b,d){return function(c,e,f,g){c=e&&a in e?e:c;d&&1!==d&&c&&null==c[a]&&(c[a]=
{});e=c?c[a]:void 0;return b?{context:c,name:a,value:e}:e}},computedMember:function(a,b,d,c){return function(e,f,g,h){var k=a(e,f,g,h),l,m;null!=k&&(l=b(e,f,g,h),l+="",c&&1!==c&&k&&!k[l]&&(k[l]={}),m=k[l]);return d?{context:k,name:l,value:m}:m}},nonComputedMember:function(a,b,d,c){return function(e,f,g,h){e=a(e,f,g,h);c&&1!==c&&e&&null==e[b]&&(e[b]={});f=null!=e?e[b]:void 0;return d?{context:e,name:b,value:f}:f}},inputs:function(a,b){return function(d,c,e,f){return f?f[b]:a(d,c,e)}}};uc.prototype=
{constructor:uc,parse:function(a){a=this.ast.ast(a);var b=this.astCompiler.compile(a);b.literal=0===a.body.length||1===a.body.length&&(a.body[0].expression.type===s.Literal||a.body[0].expression.type===s.ArrayExpression||a.body[0].expression.type===s.ObjectExpression);b.constant=a.constant;return b}};var ta=L("$sce"),oa={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},xc=/_([a-z])/g,Dg=L("$compile"),aa=x.document.createElement("a"),Md=Ca(x.location.href);Nd.$inject=["$document"];
cd.$inject=["$provide"];var Ud=22,Td=".",zc="0";Od.$inject=["$locale"];Qd.$inject=["$locale"];var Og={yyyy:Y("FullYear",4,0,!1,!0),yy:Y("FullYear",2,0,!0,!0),y:Y("FullYear",1,0,!1,!0),MMMM:mb("Month"),MMM:mb("Month",!0),MM:Y("Month",2,1),M:Y("Month",1,1),LLLL:mb("Month",!1,!0),dd:Y("Date",2),d:Y("Date",1),HH:Y("Hours",2),H:Y("Hours",1),hh:Y("Hours",2,-12),h:Y("Hours",1,-12),mm:Y("Minutes",2),m:Y("Minutes",1),ss:Y("Seconds",2),s:Y("Seconds",1),sss:Y("Milliseconds",3),EEEE:mb("Day"),EEE:mb("Day",!0),
a:function(a,b){return 12>a.getHours()?b.AMPMS[0]:b.AMPMS[1]},Z:function(a,b,d){a=-1*d;return a=(0<=a?"+":"")+(Kb(Math[0<a?"floor":"ceil"](a/60),2)+Kb(Math.abs(a%60),2))},ww:Wd(2),w:Wd(1),G:Ac,GG:Ac,GGG:Ac,GGGG:function(a,b){return 0>=a.getFullYear()?b.ERANAMES[0]:b.ERANAMES[1]}},Ng=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,Mg=/^-?\d+$/;Pd.$inject=["$locale"];var Hg=la(Q),Ig=la(ub);Rd.$inject=["$parse"];var Fe=la({restrict:"E",compile:function(a,
b){if(!b.href&&!b.xlinkHref)return function(a,b){if("a"===b[0].nodeName.toLowerCase()){var e="[object SVGAnimatedString]"===ma.call(b.prop("href"))?"xlink:href":"href";b.on("click",function(a){b.attr(e)||a.preventDefault()})}}}}),vb={};q(Fb,function(a,b){function d(a,d,e){a.$watch(e[c],function(a){e.$set(b,!!a)})}if("multiple"!==a){var c=Ba("ng-"+b),e=d;"checked"===a&&(e=function(a,b,e){e.ngModel!==e[c]&&d(a,b,e)});vb[c]=function(){return{restrict:"A",priority:100,link:e}}}});q(rd,function(a,b){vb[b]=
function(){return{priority:100,link:function(a,c,e){if("ngPattern"===b&&"/"===e.ngPattern.charAt(0)&&(c=e.ngPattern.match(Sg))){e.$set("ngPattern",new RegExp(c[1],c[2]));return}a.$watch(e[b],function(a){e.$set(b,a)})}}}});q(["src","srcset","href"],function(a){var b=Ba("ng-"+a);vb[b]=function(){return{priority:99,link:function(d,c,e){var f=a,g=a;"href"===a&&"[object SVGAnimatedString]"===ma.call(c.prop("href"))&&(g="xlinkHref",e.$attr[g]="xlink:href",f=null);e.$observe(b,function(b){b?(e.$set(g,b),
za&&f&&c.prop(f,e[g])):"href"===a&&e.$set(g,null)})}}}});var Mb={$addControl:z,$$renameControl:function(a,b){a.$name=b},$removeControl:z,$setValidity:z,$setDirty:z,$setPristine:z,$setSubmitted:z};Lb.$inject=["$element","$attrs","$scope","$animate","$interpolate"];Lb.prototype={$rollbackViewValue:function(){q(this.$$controls,function(a){a.$rollbackViewValue()})},$commitViewValue:function(){q(this.$$controls,function(a){a.$commitViewValue()})},$addControl:function(a){Ka(a.$name,"input");this.$$controls.push(a);
a.$name&&(this[a.$name]=a);a.$$parentForm=this},$$renameControl:function(a,b){var d=a.$name;this[d]===a&&delete this[d];this[b]=a;a.$name=b},$removeControl:function(a){a.$name&&this[a.$name]===a&&delete this[a.$name];q(this.$pending,function(b,d){this.$setValidity(d,null,a)},this);q(this.$error,function(b,d){this.$setValidity(d,null,a)},this);q(this.$$success,function(b,d){this.$setValidity(d,null,a)},this);$a(this.$$controls,a);a.$$parentForm=Mb},$setDirty:function(){this.$$animate.removeClass(this.$$element,
Va);this.$$animate.addClass(this.$$element,Rb);this.$dirty=!0;this.$pristine=!1;this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Va,Rb+" ng-submitted");this.$dirty=!1;this.$pristine=!0;this.$submitted=!1;q(this.$$controls,function(a){a.$setPristine()})},$setUntouched:function(){q(this.$$controls,function(a){a.$setUntouched()})},$setSubmitted:function(){this.$$animate.addClass(this.$$element,"ng-submitted");this.$submitted=!0;this.$$parentForm.$setSubmitted()}};
Zd({clazz:Lb,set:function(a,b,d){var c=a[b];c?-1===c.indexOf(d)&&c.push(d):a[b]=[d]},unset:function(a,b,d){var c=a[b];c&&($a(c,d),0===c.length&&delete a[b])}});var ge=function(a){return["$timeout","$parse",function(b,d){function c(a){return""===a?d('this[""]').assign:d(a).assign||z}return{name:"form",restrict:a?"EAC":"E",require:["form","^^?form"],controller:Lb,compile:function(d,f){d.addClass(Va).addClass(nb);var g=f.name?"name":a&&f.ngForm?"ngForm":!1;return{pre:function(a,d,e,f){var n=f[0];if(!("action"in
e)){var p=function(b){a.$apply(function(){n.$commitViewValue();n.$setSubmitted()});b.preventDefault()};d[0].addEventListener("submit",p);d.on("$destroy",function(){b(function(){d[0].removeEventListener("submit",p)},0,!1)})}(f[1]||n.$$parentForm).$addControl(n);var r=g?c(n.$name):z;g&&(r(a,n),e.$observe(g,function(b){n.$name!==b&&(r(a,void 0),n.$$parentForm.$$renameControl(n,b),r=c(n.$name),r(a,n))}));d.on("$destroy",function(){n.$$parentForm.$removeControl(n);r(a,void 0);S(n,Mb)})}}}}}]},Ge=ge(),
Se=ge(!0),Pg=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,ah=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,bh=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,Qg=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,he=/^(\d{4,})-(\d{2})-(\d{2})$/,ie=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,
Hc=/^(\d{4,})-W(\d\d)$/,je=/^(\d{4,})-(\d\d)$/,ke=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ae=V();q(["date","datetime-local","month","time","week"],function(a){ae[a]=!0});var le={text:function(a,b,d,c,e,f){Ra(a,b,d,c,e,f);Cc(c)},date:ob("date",he,Nb(he,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":ob("datetimelocal",ie,Nb(ie,"yyyy MM dd HH mm ss sss".split(" ")),"yyyy-MM-ddTHH:mm:ss.sss"),time:ob("time",ke,Nb(ke,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:ob("week",Hc,function(a,b){if(ga(a))return a;
if(F(a)){Hc.lastIndex=0;var d=Hc.exec(a);if(d){var c=+d[1],e=+d[2],f=d=0,g=0,h=0,k=Vd(c),e=7*(e-1);b&&(d=b.getHours(),f=b.getMinutes(),g=b.getSeconds(),h=b.getMilliseconds());return new Date(c,0,k.getDate()+e,d,f,g,h)}}return NaN},"yyyy-Www"),month:ob("month",je,Nb(je,["yyyy","MM"]),"yyyy-MM"),number:function(a,b,d,c,e,f){Dc(a,b,d,c);be(c);Ra(a,b,d,c,e,f);var g,h;if(u(d.min)||d.ngMin)c.$validators.min=function(a){return c.$isEmpty(a)||w(g)||a>=g},d.$observe("min",function(a){g=Sa(a);c.$validate()});
if(u(d.max)||d.ngMax)c.$validators.max=function(a){return c.$isEmpty(a)||w(h)||a<=h},d.$observe("max",function(a){h=Sa(a);c.$validate()});if(u(d.step)||d.ngStep){var k;c.$validators.step=function(a,b){return c.$isEmpty(b)||w(k)||ce(b,g||0,k)};d.$observe("step",function(a){k=Sa(a);c.$validate()})}},url:function(a,b,d,c,e,f){Ra(a,b,d,c,e,f);Cc(c);c.$$parserName="url";c.$validators.url=function(a,b){var d=a||b;return c.$isEmpty(d)||ah.test(d)}},email:function(a,b,d,c,e,f){Ra(a,b,d,c,e,f);Cc(c);c.$$parserName=
"email";c.$validators.email=function(a,b){var d=a||b;return c.$isEmpty(d)||bh.test(d)}},radio:function(a,b,d,c){var e=!d.ngTrim||"false"!==T(d.ngTrim);w(d.name)&&b.attr("name",++qb);b.on("click",function(a){var g;b[0].checked&&(g=d.value,e&&(g=T(g)),c.$setViewValue(g,a&&a.type))});c.$render=function(){var a=d.value;e&&(a=T(a));b[0].checked=a===c.$viewValue};d.$observe("value",c.$render)},range:function(a,b,d,c,e,f){function g(a,c){b.attr(a,d[a]);d.$observe(a,c)}function h(a){n=Sa(a);da(c.$modelValue)||
(m?(a=b.val(),n>a&&(a=n,b.val(a)),c.$setViewValue(a)):c.$validate())}function k(a){p=Sa(a);da(c.$modelValue)||(m?(a=b.val(),p<a&&(b.val(p),a=p<n?n:p),c.$setViewValue(a)):c.$validate())}function l(a){r=Sa(a);da(c.$modelValue)||(m&&c.$viewValue!==b.val()?c.$setViewValue(b.val()):c.$validate())}Dc(a,b,d,c);be(c);Ra(a,b,d,c,e,f);var m=c.$$hasNativeValidators&&"range"===b[0].type,n=m?0:void 0,p=m?100:void 0,r=m?1:void 0,q=b[0].validity;a=u(d.min);e=u(d.max);f=u(d.step);var s=c.$render;c.$render=m&&u(q.rangeUnderflow)&&
u(q.rangeOverflow)?function(){s();c.$setViewValue(b.val())}:s;a&&(c.$validators.min=m?function(){return!0}:function(a,b){return c.$isEmpty(b)||w(n)||b>=n},g("min",h));e&&(c.$validators.max=m?function(){return!0}:function(a,b){return c.$isEmpty(b)||w(p)||b<=p},g("max",k));f&&(c.$validators.step=m?function(){return!q.stepMismatch}:function(a,b){return c.$isEmpty(b)||w(r)||ce(b,n||0,r)},g("step",l))},checkbox:function(a,b,d,c,e,f,g,h){var k=de(h,a,"ngTrueValue",d.ngTrueValue,!0),l=de(h,a,"ngFalseValue",
d.ngFalseValue,!1);b.on("click",function(a){c.$setViewValue(b[0].checked,a&&a.type)});c.$render=function(){b[0].checked=c.$viewValue};c.$isEmpty=function(a){return!1===a};c.$formatters.push(function(a){return sa(a,k)});c.$parsers.push(function(a){return a?k:l})},hidden:z,button:z,submit:z,reset:z,file:z},Xc=["$browser","$sniffer","$filter","$parse",function(a,b,d,c){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,f,g,h){h[0]&&(le[Q(g.type)]||le.text)(e,f,g,h[0],b,a,d,c)}}}}],ch=/^(true|false|\d+)$/,
kf=function(){function a(a,d,c){var e=u(c)?c:9===za?"":null;a.prop("value",e);d.$set("value",c)}return{restrict:"A",priority:100,compile:function(b,d){return ch.test(d.ngValue)?function(b,d,f){b=b.$eval(f.ngValue);a(d,f,b)}:function(b,d,f){b.$watch(f.ngValue,function(b){a(d,f,b)})}}}},Ke=["$compile",function(a){return{restrict:"AC",compile:function(b){a.$$addBindingClass(b);return function(b,c,e){a.$$addBindingInfo(c,e.ngBind);c=c[0];b.$watch(e.ngBind,function(a){c.textContent=$b(a)})}}}}],Me=["$interpolate",
"$compile",function(a,b){return{compile:function(d){b.$$addBindingClass(d);return function(c,d,f){c=a(d.attr(f.$attr.ngBindTemplate));b.$$addBindingInfo(d,c.expressions);d=d[0];f.$observe("ngBindTemplate",function(a){d.textContent=w(a)?"":a})}}}}],Le=["$sce","$parse","$compile",function(a,b,d){return{restrict:"A",compile:function(c,e){var f=b(e.ngBindHtml),g=b(e.ngBindHtml,function(b){return a.valueOf(b)});d.$$addBindingClass(c);return function(b,c,e){d.$$addBindingInfo(c,e.ngBindHtml);b.$watch(g,
function(){var d=f(b);c.html(a.getTrustedHtml(d)||"")})}}}}],jf=la({restrict:"A",require:"ngModel",link:function(a,b,d,c){c.$viewChangeListeners.push(function(){a.$eval(d.ngChange)})}}),Ne=Fc("",!0),Pe=Fc("Odd",0),Oe=Fc("Even",1),Qe=Qa({compile:function(a,b){b.$set("ngCloak",void 0);a.removeClass("ng-cloak")}}),Re=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],bd={},dh={blur:!0,focus:!0};q("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),
function(a){var b=Ba("ng-"+a);bd[b]=["$parse","$rootScope",function(d,c){return{restrict:"A",compile:function(e,f){var g=d(f[b]);return function(b,d){d.on(a,function(d){var e=function(){g(b,{$event:d})};dh[a]&&c.$$phase?b.$evalAsync(e):b.$apply(e)})}}}}]});var Ue=["$animate","$compile",function(a,b){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(d,c,e,f,g){var h,k,l;d.$watch(e.ngIf,function(d){d?k||g(function(d,f){k=f;d[d.length++]=b.$$createComment("end ngIf",
e.ngIf);h={clone:d};a.enter(d,c.parent(),c)}):(l&&(l.remove(),l=null),k&&(k.$destroy(),k=null),h&&(l=tb(h.clone),a.leave(l).done(function(a){!1!==a&&(l=null)}),h=null))})}}}],Ve=["$templateRequest","$anchorScroll","$animate",function(a,b,d){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:ea.noop,compile:function(c,e){var f=e.ngInclude||e.src,g=e.onload||"",h=e.autoscroll;return function(c,e,m,n,p){var r=0,q,s,t,w=function(){s&&(s.remove(),s=null);q&&(q.$destroy(),q=
null);t&&(d.leave(t).done(function(a){!1!==a&&(s=null)}),s=t,t=null)};c.$watch(f,function(f){var m=function(a){!1===a||!u(h)||h&&!c.$eval(h)||b()},s=++r;f?(a(f,!0).then(function(a){if(!c.$$destroyed&&s===r){var b=c.$new();n.template=a;a=p(b,function(a){w();d.enter(a,null,e).done(m)});q=b;t=a;q.$emit("$includeContentLoaded",f);c.$eval(g)}},function(){c.$$destroyed||s!==r||(w(),c.$emit("$includeContentError",f))}),c.$emit("$includeContentRequested",f)):(w(),n.template=null)})}}}}],mf=["$compile",function(a){return{restrict:"ECA",
priority:-400,require:"ngInclude",link:function(b,d,c,e){ma.call(d[0]).match(/SVG/)?(d.empty(),a(dd(e.template,x.document).childNodes)(b,function(a){d.append(a)},{futureParentElement:d})):(d.html(e.template),a(d.contents())(b))}}}],We=Qa({priority:450,compile:function(){return{pre:function(a,b,d){a.$eval(d.ngInit)}}}}),hf=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,b,d,c){var e=d.ngList||", ",f="false"!==d.ngTrim,g=f?T(e):e;c.$parsers.push(function(a){if(!w(a)){var b=
[];a&&q(a.split(g),function(a){a&&b.push(f?T(a):a)});return b}});c.$formatters.push(function(a){if(H(a))return a.join(e)});c.$isEmpty=function(a){return!a||!a.length}}}},nb="ng-valid",Yd="ng-invalid",Va="ng-pristine",Rb="ng-dirty",pb=L("ngModel");Ob.$inject="$scope $exceptionHandler $attrs $element $parse $animate $timeout $q $interpolate".split(" ");Ob.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var a=this.$$parse(this.$$attr.ngModel+"()"),b=this.$$parse(this.$$attr.ngModel+
"($$$p)");this.$$ngModelGet=function(b){var c=this.$$parsedNgModel(b);D(c)&&(c=a(b));return c};this.$$ngModelSet=function(a,c){D(this.$$parsedNgModel(a))?b(a,{$$$p:c}):this.$$parsedNgModelAssign(a,c)}}else if(!this.$$parsedNgModel.assign)throw pb("nonassign",this.$$attr.ngModel,xa(this.$$element));},$render:z,$isEmpty:function(a){return w(a)||""===a||null===a||a!==a},$$updateEmptyClasses:function(a){this.$isEmpty(a)?(this.$$animate.removeClass(this.$$element,"ng-not-empty"),this.$$animate.addClass(this.$$element,
"ng-empty")):(this.$$animate.removeClass(this.$$element,"ng-empty"),this.$$animate.addClass(this.$$element,"ng-not-empty"))},$setPristine:function(){this.$dirty=!1;this.$pristine=!0;this.$$animate.removeClass(this.$$element,Rb);this.$$animate.addClass(this.$$element,Va)},$setDirty:function(){this.$dirty=!0;this.$pristine=!1;this.$$animate.removeClass(this.$$element,Va);this.$$animate.addClass(this.$$element,Rb);this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1;this.$untouched=
!0;this.$$animate.setClass(this.$$element,"ng-untouched","ng-touched")},$setTouched:function(){this.$touched=!0;this.$untouched=!1;this.$$animate.setClass(this.$$element,"ng-touched","ng-untouched")},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce);this.$viewValue=this.$$lastCommittedViewValue;this.$render()},$validate:function(){if(!da(this.$modelValue)){var a=this.$$lastCommittedViewValue,b=this.$$rawModelValue,d=this.$valid,c=this.$modelValue,e=this.$options.getOption("allowInvalid"),
f=this;this.$$runValidators(b,a,function(a){e||d===a||(f.$modelValue=a?b:void 0,f.$modelValue!==c&&f.$$writeModelToScope())})}},$$runValidators:function(a,b,d){function c(){var c=!0;q(k.$validators,function(d,e){var g=Boolean(d(a,b));c=c&&g;f(e,g)});return c?!0:(q(k.$asyncValidators,function(a,b){f(b,null)}),!1)}function e(){var c=[],d=!0;q(k.$asyncValidators,function(e,g){var k=e(a,b);if(!k||!D(k.then))throw pb("nopromise",k);f(g,void 0);c.push(k.then(function(){f(g,!0)},function(){d=!1;f(g,!1)}))});
c.length?k.$$q.all(c).then(function(){g(d)},z):g(!0)}function f(a,b){h===k.$$currentValidationRunId&&k.$setValidity(a,b)}function g(a){h===k.$$currentValidationRunId&&d(a)}this.$$currentValidationRunId++;var h=this.$$currentValidationRunId,k=this;(function(){var a=k.$$parserName||"parse";if(w(k.$$parserValid))f(a,null);else return k.$$parserValid||(q(k.$validators,function(a,b){f(b,null)}),q(k.$asyncValidators,function(a,b){f(b,null)})),f(a,k.$$parserValid),k.$$parserValid;return!0})()?c()?e():g(!1):
g(!1)},$commitViewValue:function(){var a=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce);if(this.$$lastCommittedViewValue!==a||""===a&&this.$$hasNativeValidators)this.$$updateEmptyClasses(a),this.$$lastCommittedViewValue=a,this.$pristine&&this.$setDirty(),this.$$parseAndValidate()},$$parseAndValidate:function(){var a=this.$$lastCommittedViewValue,b=this;if(this.$$parserValid=w(a)?void 0:!0)for(var d=0;d<this.$parsers.length;d++)if(a=this.$parsers[d](a),w(a)){this.$$parserValid=!1;break}da(this.$modelValue)&&
(this.$modelValue=this.$$ngModelGet(this.$$scope));var c=this.$modelValue,e=this.$options.getOption("allowInvalid");this.$$rawModelValue=a;e&&(this.$modelValue=a,b.$modelValue!==c&&b.$$writeModelToScope());this.$$runValidators(a,this.$$lastCommittedViewValue,function(d){e||(b.$modelValue=d?a:void 0,b.$modelValue!==c&&b.$$writeModelToScope())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue);q(this.$viewChangeListeners,function(a){try{a()}catch(b){this.$$exceptionHandler(b)}},
this)},$setViewValue:function(a,b){this.$viewValue=a;this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(b)},$$debounceViewValueCommit:function(a){var b=this.$options.getOption("debounce");ba(b[a])?b=b[a]:ba(b["default"])&&(b=b["default"]);this.$$timeout.cancel(this.$$pendingDebounce);var d=this;0<b?this.$$pendingDebounce=this.$$timeout(function(){d.$commitViewValue()},b):this.$$scope.$root.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){d.$commitViewValue()})},
$overrideModelOptions:function(a){this.$options=this.$options.createChild(a)}};Zd({clazz:Ob,set:function(a,b){a[b]=!0},unset:function(a,b){delete a[b]}});var gf=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Ob,priority:1,compile:function(b){b.addClass(Va).addClass("ng-untouched").addClass(nb);return{pre:function(a,b,e,f){var g=f[0];b=f[1]||g.$$parentForm;if(f=f[2])g.$options=f.$options;g.$$initGetterSetters();b.$addControl(g);e.$observe("name",
function(a){g.$name!==a&&g.$$parentForm.$$renameControl(g,a)});a.$on("$destroy",function(){g.$$parentForm.$removeControl(g)})},post:function(b,c,e,f){function g(){h.$setTouched()}var h=f[0];if(h.$options.getOption("updateOn"))c.on(h.$options.getOption("updateOn"),function(a){h.$$debounceViewValueCommit(a&&a.type)});c.on("blur",function(){h.$touched||(a.$$phase?b.$evalAsync(g):b.$apply(g))})}}}}}],Pb,eh=/(\s+|^)default(\s+|$)/;Gc.prototype={getOption:function(a){return this.$$options[a]},createChild:function(a){var b=
!1;a=S({},a);q(a,function(d,c){"$inherit"===d?"*"===c?b=!0:(a[c]=this.$$options[c],"updateOn"===c&&(a.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===c&&(a.updateOnDefault=!1,a[c]=T(d.replace(eh,function(){a.updateOnDefault=!0;return" "})))},this);b&&(delete a["*"],ee(a,this.$$options));ee(a,Pb.$$options);return new Gc(a)}};Pb=new Gc({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var lf=function(){function a(a,d){this.$$attrs=a;this.$$scope=
d}a.$inject=["$attrs","$scope"];a.prototype={$onInit:function(){var a=this.parentCtrl?this.parentCtrl.$options:Pb,d=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=a.createChild(d)}};return{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:a}},Xe=Qa({terminal:!0,priority:1E3}),fh=L("ngOptions"),gh=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,
ef=["$compile","$document","$parse",function(a,b,d){function c(a,b,c){function e(a,b,c,d,f){this.selectValue=a;this.viewValue=b;this.label=c;this.group=d;this.disabled=f}function f(a){var b;if(!q&&qa(a))b=a;else{b=[];for(var c in a)a.hasOwnProperty(c)&&"$"!==c.charAt(0)&&b.push(c)}return b}var n=a.match(gh);if(!n)throw fh("iexp",a,xa(b));var p=n[5]||n[7],q=n[6];a=/ as /.test(n[0])&&n[1];var s=n[9];b=d(n[2]?n[1]:p);var v=a&&d(a)||b,t=s&&d(s),u=s?function(a,b){return t(c,b)}:function(a){return Pa(a)},
w=function(a,b){return u(a,G(a,b))},A=d(n[2]||n[1]),x=d(n[3]||""),I=d(n[4]||""),K=d(n[8]),E={},G=q?function(a,b){E[q]=b;E[p]=a;return E}:function(a){E[p]=a;return E};return{trackBy:s,getTrackByValue:w,getWatchables:d(K,function(a){var b=[];a=a||[];for(var d=f(a),e=d.length,g=0;g<e;g++){var h=a===d?g:d[g],l=a[h],h=G(l,h),l=u(l,h);b.push(l);if(n[2]||n[1])l=A(c,h),b.push(l);n[4]&&(h=I(c,h),b.push(h))}return b}),getOptions:function(){for(var a=[],b={},d=K(c)||[],g=f(d),h=g.length,n=0;n<h;n++){var p=d===
g?n:g[n],q=G(d[p],p),r=v(c,q),p=u(r,q),t=A(c,q),E=x(c,q),q=I(c,q),r=new e(p,r,t,E,q);a.push(r);b[p]=r}return{items:a,selectValueMap:b,getOptionFromViewValue:function(a){return b[w(a)]},getViewValueFromOption:function(a){return s?ra(a.viewValue):a.viewValue}}}}}var e=x.document.createElement("option"),f=x.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(a,b,c,d){d[0].registerOption=z},post:function(d,h,k,l){function m(a){var b=(a=A.getOptionFromViewValue(a))&&
a.element;b&&!b.selected&&(b.selected=!0);return a}function n(a,b){a.element=b;b.disabled=a.disabled;a.label!==b.label&&(b.label=a.label,b.textContent=a.label);b.value=a.selectValue}function p(){var a=A&&r.readValue();if(A)for(var b=A.items.length-1;0<=b;b--){var c=A.items[b];u(c.group)?Eb(c.element.parentNode):Eb(c.element)}A=z.getOptions();var d={};x&&h.prepend(r.emptyOption);A.items.forEach(function(a){var b;if(u(a.group)){b=d[a.group];b||(b=f.cloneNode(!1),I.appendChild(b),b.label=null===a.group?
"null":a.group,d[a.group]=b);var c=e.cloneNode(!1)}else b=I,c=e.cloneNode(!1);b.appendChild(c);n(a,c)});h[0].appendChild(I);s.$render();s.$isEmpty(a)||(b=r.readValue(),(z.trackBy||v?sa(a,b):a===b)||(s.$setViewValue(b),s.$render()))}var r=l[0],s=l[1],v=k.multiple;l=0;for(var t=h.children(),w=t.length;l<w;l++)if(""===t[l].value){r.hasEmptyOption=!0;r.emptyOption=t.eq(l);break}var x=!!r.emptyOption;B(e.cloneNode(!1)).val("?");var A,z=c(k.ngOptions,h,d),I=b[0].createDocumentFragment();r.generateUnknownOptionValue=
function(a){return"?"};v?(r.writeValue=function(a){var b=a&&a.map(m)||[];A.items.forEach(function(a){a.element.selected&&-1===Array.prototype.indexOf.call(b,a)&&(a.element.selected=!1)})},r.readValue=function(){var a=h.val()||[],b=[];q(a,function(a){(a=A.selectValueMap[a])&&!a.disabled&&b.push(A.getViewValueFromOption(a))});return b},z.trackBy&&d.$watchCollection(function(){if(H(s.$viewValue))return s.$viewValue.map(function(a){return z.getTrackByValue(a)})},function(){s.$render()})):(r.writeValue=
function(a){var b=A.selectValueMap[h.val()],c=A.getOptionFromViewValue(a);b&&b.element.removeAttribute("selected");c?(h[0].value!==c.selectValue&&(r.removeUnknownOption(),r.unselectEmptyOption(),h[0].value=c.selectValue,c.element.selected=!0),c.element.setAttribute("selected","selected")):x?r.selectEmptyOption():r.unknownOption.parent().length?r.updateUnknownOption(a):r.renderUnknownOption(a)},r.readValue=function(){var a=A.selectValueMap[h.val()];return a&&!a.disabled?(r.unselectEmptyOption(),r.removeUnknownOption(),
A.getViewValueFromOption(a)):null},z.trackBy&&d.$watch(function(){return z.getTrackByValue(s.$viewValue)},function(){s.$render()}));x&&(r.emptyOption.remove(),a(r.emptyOption)(d),8===r.emptyOption[0].nodeType?(r.hasEmptyOption=!1,r.registerOption=function(a,b){""===b.val()&&(r.hasEmptyOption=!0,r.emptyOption=b,r.emptyOption.removeClass("ng-scope"),s.$render(),b.on("$destroy",function(){r.hasEmptyOption=!1;r.emptyOption=void 0}))}):r.emptyOption.removeClass("ng-scope"));h.empty();p();d.$watchCollection(z.getWatchables,
p)}}}}],Ye=["$locale","$interpolate","$log",function(a,b,d){var c=/{}/g,e=/^when(Minus)?(.+)$/;return{link:function(f,g,h){function k(a){g.text(a||"")}var l=h.count,m=h.$attr.when&&g.attr(h.$attr.when),n=h.offset||0,p=f.$eval(m)||{},r={},s=b.startSymbol(),v=b.endSymbol(),t=s+l+"-"+n+v,u=ea.noop,x;q(h,function(a,b){var c=e.exec(b);c&&(c=(c[1]?"-":"")+Q(c[2]),p[c]=g.attr(h.$attr[b]))});q(p,function(a,d){r[d]=b(a.replace(c,t))});f.$watch(l,function(b){var c=parseFloat(b),e=da(c);e||c in p||(c=a.pluralCat(c-
n));c===x||e&&da(x)||(u(),e=r[c],w(e)?(null!=b&&d.debug("ngPluralize: no rule defined for '"+c+"' in "+m),u=z,k()):u=f.$watch(e,k),x=c)})}}}],Ze=["$parse","$animate","$compile",function(a,b,d){var c=L("ngRepeat"),e=function(a,b,c,d,e,m,n){a[c]=d;e&&(a[e]=m);a.$index=b;a.$first=0===b;a.$last=b===n-1;a.$middle=!(a.$first||a.$last);a.$odd=!(a.$even=0===(b&1))};return{restrict:"A",multiElement:!0,transclude:"element",priority:1E3,terminal:!0,$$tlb:!0,compile:function(f,g){var h=g.ngRepeat,k=d.$$createComment("end ngRepeat",
h),l=h.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!l)throw c("iexp",h);var m=l[1],n=l[2],p=l[3],r=l[4],l=m.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/);if(!l)throw c("iidexp",m);var s=l[3]||l[1],v=l[2];if(p&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(p)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(p)))throw c("badident",p);var t,u,w,x,z={$id:Pa};r?t=a(r):(w=function(a,b){return Pa(b)},
x=function(a){return a});return function(a,d,f,g,l){t&&(u=function(b,c,d){v&&(z[v]=b);z[s]=c;z.$index=d;return t(a,z)});var m=V();a.$watchCollection(n,function(f){var g,n,r=d[0],t,z=V(),B,D,F,C,G,E,H;p&&(a[p]=f);if(qa(f))G=f,n=u||w;else for(H in n=u||x,G=[],f)ua.call(f,H)&&"$"!==H.charAt(0)&&G.push(H);B=G.length;H=Array(B);for(g=0;g<B;g++)if(D=f===G?g:G[g],F=f[D],C=n(D,F,g),m[C])E=m[C],delete m[C],z[C]=E,H[g]=E;else{if(z[C])throw q(H,function(a){a&&a.scope&&(m[a.id]=a)}),c("dupes",h,C,F);H[g]={id:C,
scope:void 0,clone:void 0};z[C]=!0}for(t in m){E=m[t];C=tb(E.clone);b.leave(C);if(C[0].parentNode)for(g=0,n=C.length;g<n;g++)C[g].$$NG_REMOVED=!0;E.scope.$destroy()}for(g=0;g<B;g++)if(D=f===G?g:G[g],F=f[D],E=H[g],E.scope){t=r;do t=t.nextSibling;while(t&&t.$$NG_REMOVED);E.clone[0]!==t&&b.move(tb(E.clone),null,r);r=E.clone[E.clone.length-1];e(E.scope,g,s,F,v,D,B)}else l(function(a,c){E.scope=c;var d=k.cloneNode(!1);a[a.length++]=d;b.enter(a,null,r);r=d;E.clone=a;z[E.id]=E;e(E.scope,g,s,F,v,D,B)});m=
z})}}}}],$e=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,d,c){b.$watch(c.ngShow,function(b){a[b?"removeClass":"addClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],Te=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,d,c){b.$watch(c.ngHide,function(b){a[b?"addClass":"removeClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],af=Qa(function(a,b,d){a.$watch(d.ngStyle,function(a,d){d&&a!==d&&q(d,function(a,c){b.css(c,"")});a&&b.css(a)},
!0)}),bf=["$animate","$compile",function(a,b){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(d,c,e,f){var g=[],h=[],k=[],l=[],m=function(a,b){return function(c){!1!==c&&a.splice(b,1)}};d.$watch(e.ngSwitch||e.on,function(c){for(var d,e;k.length;)a.cancel(k.pop());d=0;for(e=l.length;d<e;++d){var s=tb(h[d].clone);l[d].$destroy();(k[d]=a.leave(s)).done(m(k,d))}h.length=0;l.length=0;(g=f.cases["!"+c]||f.cases["?"])&&q(g,function(c){c.transclude(function(d,e){l.push(e);
var f=c.element;d[d.length++]=b.$$createComment("end ngSwitchWhen");h.push({clone:d});a.enter(d,f.parent(),f)})})})}}}],cf=Qa({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,d,c,e){a=d.ngSwitchWhen.split(d.ngSwitchWhenSeparator).sort().filter(function(a,b,c){return c[b-1]!==a});q(a,function(a){c.cases["!"+a]=c.cases["!"+a]||[];c.cases["!"+a].push({transclude:e,element:b})})}}),df=Qa({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,
b,d,c,e){c.cases["?"]=c.cases["?"]||[];c.cases["?"].push({transclude:e,element:b})}}),hh=L("ngTransclude"),ff=["$compile",function(a){return{restrict:"EAC",terminal:!0,compile:function(b){var d=a(b.contents());b.empty();return function(a,b,f,g,h){function k(){d(a,function(a){b.append(a)})}if(!h)throw hh("orphan",xa(b));f.ngTransclude===f.$attr.ngTransclude&&(f.ngTransclude="");f=f.ngTransclude||f.ngTranscludeSlot;h(function(a,c){var d;if(d=a.length)a:{d=0;for(var f=a.length;d<f;d++){var g=a[d];if(g.nodeType!==
Ia||g.nodeValue.trim()){d=!0;break a}}d=void 0}d?b.append(a):(k(),c.$destroy())},null,f);f&&!h.isSlotFilled(f)&&k()}}}}],He=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,d){"text/ng-template"===d.type&&a.put(d.id,b[0].text)}}}],ih={$setViewValue:z,$render:z},jh=["$element","$scope",function(a,b){function d(){g||(g=!0,b.$$postDigest(function(){g=!1;e.ngModelCtrl.$render()}))}function c(a){h||(h=!0,b.$$postDigest(function(){b.$$destroyed||(h=!1,e.ngModelCtrl.$setViewValue(e.readValue()),
a&&e.ngModelCtrl.$render())}))}var e=this,f=new Gb;e.selectValueMap={};e.ngModelCtrl=ih;e.multiple=!1;e.unknownOption=B(x.document.createElement("option"));e.hasEmptyOption=!1;e.emptyOption=void 0;e.renderUnknownOption=function(b){b=e.generateUnknownOptionValue(b);e.unknownOption.val(b);a.prepend(e.unknownOption);Ta(e.unknownOption,!0);a.val(b)};e.updateUnknownOption=function(b){b=e.generateUnknownOptionValue(b);e.unknownOption.val(b);Ta(e.unknownOption,!0);a.val(b)};e.generateUnknownOptionValue=
function(a){return"? "+Pa(a)+" ?"};e.removeUnknownOption=function(){e.unknownOption.parent()&&e.unknownOption.remove()};e.selectEmptyOption=function(){e.emptyOption&&(a.val(""),Ta(e.emptyOption,!0))};e.unselectEmptyOption=function(){e.hasEmptyOption&&e.emptyOption.removeAttr("selected")};b.$on("$destroy",function(){e.renderUnknownOption=z});e.readValue=function(){var b=a.val(),b=b in e.selectValueMap?e.selectValueMap[b]:b;return e.hasOption(b)?b:null};e.writeValue=function(b){var c=a[0].options[a[0].selectedIndex];
c&&Ta(B(c),!1);e.hasOption(b)?(e.removeUnknownOption(),c=Pa(b),a.val(c in e.selectValueMap?c:b),Ta(B(a[0].options[a[0].selectedIndex]),!0)):null==b&&e.emptyOption?(e.removeUnknownOption(),e.selectEmptyOption()):e.unknownOption.parent().length?e.updateUnknownOption(b):e.renderUnknownOption(b)};e.addOption=function(a,b){if(8!==b[0].nodeType){Ka(a,'"option value"');""===a&&(e.hasEmptyOption=!0,e.emptyOption=b);var c=f.get(a)||0;f.set(a,c+1);d()}};e.removeOption=function(a){var b=f.get(a);b&&(1===b?(f.delete(a),
""===a&&(e.hasEmptyOption=!1,e.emptyOption=void 0)):f.set(a,b-1))};e.hasOption=function(a){return!!f.get(a)};var g=!1,h=!1;e.registerOption=function(a,b,f,g,h){if(f.$attr.ngValue){var q,s=NaN;f.$observe("value",function(a){var d,f=b.prop("selected");u(s)&&(e.removeOption(q),delete e.selectValueMap[s],d=!0);s=Pa(a);q=a;e.selectValueMap[s]=a;e.addOption(a,b);b.attr("value",s);d&&f&&c()})}else g?f.$observe("value",function(a){e.readValue();var d,f=b.prop("selected");u(q)&&(e.removeOption(q),d=!0);q=
a;e.addOption(a,b);d&&f&&c()}):h?a.$watch(h,function(a,d){f.$set("value",a);var g=b.prop("selected");d!==a&&e.removeOption(d);e.addOption(a,b);d&&g&&c()}):e.addOption(f.value,b);f.$observe("disabled",function(a){if("true"===a||a&&b.prop("selected"))e.multiple?c(!0):(e.ngModelCtrl.$setViewValue(null),e.ngModelCtrl.$render())});b.on("$destroy",function(){var a=e.readValue(),b=f.value;e.removeOption(b);d();(e.multiple&&a&&-1!==a.indexOf(b)||a===b)&&c(!0)})}}],Ie=function(){return{restrict:"E",require:["select",
"?ngModel"],controller:jh,priority:1,link:{pre:function(a,b,d,c){var e=c[0],f=c[1];if(f){if(e.ngModelCtrl=f,b.on("change",function(){e.removeUnknownOption();a.$apply(function(){f.$setViewValue(e.readValue())})}),d.multiple){e.multiple=!0;e.readValue=function(){var a=[];q(b.find("option"),function(b){b.selected&&!b.disabled&&(b=b.value,a.push(b in e.selectValueMap?e.selectValueMap[b]:b))});return a};e.writeValue=function(a){q(b.find("option"),function(b){var c=!!a&&(-1!==Array.prototype.indexOf.call(a,
b.value)||-1!==Array.prototype.indexOf.call(a,e.selectValueMap[b.value]));c!==b.selected&&Ta(B(b),c)})};var g,h=NaN;a.$watch(function(){h!==f.$viewValue||sa(g,f.$viewValue)||(g=pa(f.$viewValue),f.$render());h=f.$viewValue});f.$isEmpty=function(a){return!a||0===a.length}}}else e.registerOption=z},post:function(a,b,d,c){var e=c[1];if(e){var f=c[0];e.$render=function(){f.writeValue(e.$viewValue)}}}}}},Je=["$interpolate",function(a){return{restrict:"E",priority:100,compile:function(b,d){var c,e;u(d.ngValue)||
(u(d.value)?c=a(d.value,!0):(e=a(b.text(),!0))||d.$set("value",b.text()));return function(a,b,d){var k=b.parent();(k=k.data("$selectController")||k.parent().data("$selectController"))&&k.registerOption(a,b,d,c,e)}}}}],Zc=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,d,c){c&&(d.required=!0,c.$validators.required=function(a,b){return!d.required||!c.$isEmpty(b)},d.$observe("required",function(){c.$validate()}))}}},Yc=function(){return{restrict:"A",require:"?ngModel",link:function(a,
b,d,c){if(c){var e,f=d.ngPattern||d.pattern;d.$observe("pattern",function(a){F(a)&&0<a.length&&(a=new RegExp("^"+a+"$"));if(a&&!a.test)throw L("ngPattern")("noregexp",f,a,xa(b));e=a||void 0;c.$validate()});c.$validators.pattern=function(a,b){return c.$isEmpty(b)||w(e)||e.test(b)}}}}},ad=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,d,c){if(c){var e=-1;d.$observe("maxlength",function(a){a=Z(a);e=da(a)?-1:a;c.$validate()});c.$validators.maxlength=function(a,b){return 0>e||c.$isEmpty(b)||
b.length<=e}}}}},$c=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,d,c){if(c){var e=0;d.$observe("minlength",function(a){e=Z(a)||0;c.$validate()});c.$validators.minlength=function(a,b){return c.$isEmpty(b)||b.length>=e}}}}};x.angular.bootstrap?x.console&&console.log("WARNING: Tried to load angular more than once."):(ze(),Ce(ea),ea.module("ngLocale",[],["$provide",function(a){function b(a){a+="";var b=a.indexOf(".");return-1==b?0:a.length-b-1}a.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM",
"PM"],DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:"January February March April May June July August September October November December".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),STANDALONEMONTH:"January February March April May June July August September October November December".split(" "),WEEKENDRANGE:[5,
6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-\u00a4",negSuf:"",posPre:"\u00a4",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(a,
c){var e=a|0,f=c;void 0===f&&(f=Math.min(b(a),3));Math.pow(10,f);return 1==e&&0==f?"one":"other"}})}]),B(function(){ue(x.document,Sc)}))})(window);!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>');


/*
 AngularJS v1.6.4
 (c) 2010-2017 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(x,p){'use strict';function s(f,k){var e=!1,a=!1;this.ngClickOverrideEnabled=function(b){return p.isDefined(b)?(b&&!a&&(a=!0,t.$$moduleName="ngTouch",k.directive("ngClick",t),f.decorator("ngClickDirective",["$delegate",function(a){if(e)a.shift();else for(var b=a.length-1;0<=b;){if("ngTouch"===a[b].$$moduleName){a.splice(b,1);break}b--}return a}])),e=b,this):e};this.$get=function(){return{ngClickOverrideEnabled:function(){return e}}}}function v(f,k,e){n.directive(f,["$parse","$swipe",function(a,
b){return function(l,u,g){function h(c){if(!d)return!1;var a=Math.abs(c.y-d.y);c=(c.x-d.x)*k;return r&&75>a&&0<c&&30<c&&.3>a/c}var m=a(g[f]),d,r,c=["touch"];p.isDefined(g.ngSwipeDisableMouse)||c.push("mouse");b.bind(u,{start:function(c,a){d=c;r=!0},cancel:function(c){r=!1},end:function(c,d){h(c)&&l.$apply(function(){u.triggerHandler(e);m(l,{$event:d})})}},c)}}])}var n=p.module("ngTouch",[]);n.info({angularVersion:"1.6.4"});n.provider("$touch",s);s.$inject=["$provide","$compileProvider"];n.factory("$swipe",
[function(){function f(a){a=a.originalEvent||a;var b=a.touches&&a.touches.length?a.touches:[a];a=a.changedTouches&&a.changedTouches[0]||b[0];return{x:a.clientX,y:a.clientY}}function k(a,b){var l=[];p.forEach(a,function(a){(a=e[a][b])&&l.push(a)});return l.join(" ")}var e={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup",cancel:"pointercancel"}};return{bind:function(a,
b,l){var e,g,h,m,d=!1;l=l||["mouse","touch","pointer"];a.on(k(l,"start"),function(c){h=f(c);d=!0;g=e=0;m=h;b.start&&b.start(h,c)});var r=k(l,"cancel");if(r)a.on(r,function(c){d=!1;b.cancel&&b.cancel(c)});a.on(k(l,"move"),function(c){if(d&&h){var a=f(c);e+=Math.abs(a.x-m.x);g+=Math.abs(a.y-m.y);m=a;10>e&&10>g||(g>e?(d=!1,b.cancel&&b.cancel(c)):(c.preventDefault(),b.move&&b.move(a,c)))}});a.on(k(l,"end"),function(c){d&&(d=!1,b.end&&b.end(f(c),c))})}}}]);var t=["$parse","$timeout","$rootElement",function(f,
k,e){function a(a,d,b){for(var c=0;c<a.length;c+=2){var g=a[c+1],e=b;if(25>Math.abs(a[c]-d)&&25>Math.abs(g-e))return a.splice(c,c+2),!0}return!1}function b(b){if(!(2500<Date.now()-u)){var d=b.touches&&b.touches.length?b.touches:[b],e=d[0].clientX,d=d[0].clientY;if(!(1>e&&1>d||h&&h[0]===e&&h[1]===d)){h&&(h=null);var c=b.target;"label"===p.lowercase(c.nodeName||c[0]&&c[0].nodeName)&&(h=[e,d]);a(g,e,d)||(b.stopPropagation(),b.preventDefault(),b.target&&b.target.blur&&b.target.blur())}}}function l(a){a=
a.touches&&a.touches.length?a.touches:[a];var b=a[0].clientX,e=a[0].clientY;g.push(b,e);k(function(){for(var a=0;a<g.length;a+=2)if(g[a]===b&&g[a+1]===e){g.splice(a,a+2);break}},2500,!1)}var u,g,h;return function(h,d,k){var c=f(k.ngClick),n=!1,q,s,t,v;d.on("touchstart",function(a){n=!0;q=a.target?a.target:a.srcElement;3===q.nodeType&&(q=q.parentNode);d.addClass("ng-click-active");s=Date.now();a=a.originalEvent||a;a=(a.touches&&a.touches.length?a.touches:[a])[0];t=a.clientX;v=a.clientY});d.on("touchcancel",
function(a){n=!1;d.removeClass("ng-click-active")});d.on("touchend",function(c){var h=Date.now()-s,f=c.originalEvent||c,m=(f.changedTouches&&f.changedTouches.length?f.changedTouches:f.touches&&f.touches.length?f.touches:[f])[0],f=m.clientX,m=m.clientY,w=Math.sqrt(Math.pow(f-t,2)+Math.pow(m-v,2));n&&750>h&&12>w&&(g||(e[0].addEventListener("click",b,!0),e[0].addEventListener("touchstart",l,!0),g=[]),u=Date.now(),a(g,f,m),q&&q.blur(),p.isDefined(k.disabled)&&!1!==k.disabled||d.triggerHandler("click",
[c]));n=!1;d.removeClass("ng-click-active")});d.onclick=function(a){};d.on("click",function(a,b){h.$apply(function(){c(h,{$event:b||a})})});d.on("mousedown",function(a){d.addClass("ng-click-active")});d.on("mousemove mouseup",function(a){d.removeClass("ng-click-active")})}}];v("ngSwipeLeft",-1,"swipeleft");v("ngSwipeRight",1,"swiperight")})(window,window.angular);
//# sourceMappingURL=angular-touch.min.js.map

/*
 AngularJS v1.6.4
 (c) 2010-2017 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(R,y){'use strict';function Ea(a,b,c){if(!a)throw Oa("areq",b||"?",c||"required");return a}function Fa(a,b){if(!a&&!b)return"";if(!a)return b;if(!b)return a;W(a)&&(a=a.join(" "));W(b)&&(b=b.join(" "));return a+" "+b}function Pa(a){var b={};a&&(a.to||a.from)&&(b.to=a.to,b.from=a.from);return b}function X(a,b,c){var d="";a=W(a)?a:a&&F(a)&&a.length?a.split(/\s+/):[];s(a,function(a,e){a&&0<a.length&&(d+=0<e?" ":"",d+=c?b+a:a+b)});return d}function Ga(a){if(a instanceof E)switch(a.length){case 0:return a;
case 1:if(1===a[0].nodeType)return a;break;default:return E(ua(a))}if(1===a.nodeType)return E(a)}function ua(a){if(!a[0])return a;for(var b=0;b<a.length;b++){var c=a[b];if(1===c.nodeType)return c}}function Qa(a,b,c){s(b,function(b){a.addClass(b,c)})}function Ra(a,b,c){s(b,function(b){a.removeClass(b,c)})}function Y(a){return function(b,c){c.addClass&&(Qa(a,b,c.addClass),c.addClass=null);c.removeClass&&(Ra(a,b,c.removeClass),c.removeClass=null)}}function na(a){a=a||{};if(!a.$$prepared){var b=a.domOperation||
P;a.domOperation=function(){a.$$domOperationFired=!0;b();b=P};a.$$prepared=!0}return a}function ha(a,b){Ha(a,b);Ia(a,b)}function Ha(a,b){b.from&&(a.css(b.from),b.from=null)}function Ia(a,b){b.to&&(a.css(b.to),b.to=null)}function U(a,b,c){var d=b.options||{};c=c.options||{};var f=(d.addClass||"")+" "+(c.addClass||""),e=(d.removeClass||"")+" "+(c.removeClass||"");a=Sa(a.attr("class"),f,e);c.preparationClasses&&(d.preparationClasses=Z(c.preparationClasses,d.preparationClasses),delete c.preparationClasses);
f=d.domOperation!==P?d.domOperation:null;va(d,c);f&&(d.domOperation=f);d.addClass=a.addClass?a.addClass:null;d.removeClass=a.removeClass?a.removeClass:null;b.addClass=d.addClass;b.removeClass=d.removeClass;return d}function Sa(a,b,c){function d(a){F(a)&&(a=a.split(" "));var b={};s(a,function(a){a.length&&(b[a]=!0)});return b}var f={};a=d(a);b=d(b);s(b,function(a,b){f[b]=1});c=d(c);s(c,function(a,b){f[b]=1===f[b]?null:-1});var e={addClass:"",removeClass:""};s(f,function(b,c){var d,f;1===b?(d="addClass",
f=!a[c]||a[c+"-remove"]):-1===b&&(d="removeClass",f=a[c]||a[c+"-add"]);f&&(e[d].length&&(e[d]+=" "),e[d]+=c)});return e}function Q(a){return a instanceof E?a[0]:a}function Ta(a,b,c){var d="";b&&(d=X(b,"ng-",!0));c.addClass&&(d=Z(d,X(c.addClass,"-add")));c.removeClass&&(d=Z(d,X(c.removeClass,"-remove")));d.length&&(c.preparationClasses=d,a.addClass(d))}function oa(a,b){var c=b?"-"+b+"s":"";ka(a,[la,c]);return[la,c]}function wa(a,b){var c=b?"paused":"",d=$+"PlayState";ka(a,[d,c]);return[d,c]}function ka(a,
b){a.style[b[0]]=b[1]}function Z(a,b){return a?b?a+" "+b:a:b}function Ja(a,b,c){var d=Object.create(null),f=a.getComputedStyle(b)||{};s(c,function(a,b){var c=f[a];if(c){var G=c.charAt(0);if("-"===G||"+"===G||0<=G)c=Ua(c);0===c&&(c=null);d[b]=c}});return d}function Ua(a){var b=0;a=a.split(/\s*,\s*/);s(a,function(a){"s"===a.charAt(a.length-1)&&(a=a.substring(0,a.length-1));a=parseFloat(a)||0;b=b?Math.max(a,b):a});return b}function xa(a){return 0===a||null!=a}function Ka(a,b){var c=S,d=a+"s";b?c+="Duration":
d+=" linear all";return[c,d]}function La(){var a=Object.create(null);return{flush:function(){a=Object.create(null)},count:function(b){return(b=a[b])?b.total:0},get:function(b){return(b=a[b])&&b.value},put:function(b,c){a[b]?a[b].total++:a[b]={total:1,value:c}}}}function Ma(a,b,c){s(c,function(c){a[c]=ya(a[c])?a[c]:b.style.getPropertyValue(c)})}var S,za,$,Aa;void 0===R.ontransitionend&&void 0!==R.onwebkittransitionend?(S="WebkitTransition",za="webkitTransitionEnd transitionend"):(S="transition",za=
"transitionend");void 0===R.onanimationend&&void 0!==R.onwebkitanimationend?($="WebkitAnimation",Aa="webkitAnimationEnd animationend"):($="animation",Aa="animationend");var pa=$+"Delay",Ba=$+"Duration",la=S+"Delay",Na=S+"Duration",Oa=y.$$minErr("ng"),Va={transitionDuration:Na,transitionDelay:la,transitionProperty:S+"Property",animationDuration:Ba,animationDelay:pa,animationIterationCount:$+"IterationCount"},Wa={transitionDuration:Na,transitionDelay:la,animationDuration:Ba,animationDelay:pa},Ca,va,
s,W,ya,da,Da,aa,F,N,E,P;y.module("ngAnimate",[],function(){P=y.noop;Ca=y.copy;va=y.extend;E=y.element;s=y.forEach;W=y.isArray;F=y.isString;aa=y.isObject;N=y.isUndefined;ya=y.isDefined;Da=y.isFunction;da=y.isElement}).info({angularVersion:"1.6.4"}).directive("ngAnimateSwap",["$animate","$rootScope",function(a,b){return{restrict:"A",transclude:"element",terminal:!0,priority:600,link:function(b,d,f,e,p){var K,G;b.$watchCollection(f.ngAnimateSwap||f["for"],function(f){K&&a.leave(K);G&&(G.$destroy(),G=
null);if(f||0===f)G=b.$new(),p(G,function(b){K=b;a.enter(b,null,d)})})}}}]).directive("ngAnimateChildren",["$interpolate",function(a){return{link:function(b,c,d){function f(a){c.data("$$ngAnimateChildren","on"===a||"true"===a)}var e=d.ngAnimateChildren;F(e)&&0===e.length?c.data("$$ngAnimateChildren",!0):(f(a(e)(b)),d.$observe("ngAnimateChildren",f))}}}]).factory("$$rAFScheduler",["$$rAF",function(a){function b(a){d=d.concat(a);c()}function c(){if(d.length){for(var b=d.shift(),p=0;p<b.length;p++)b[p]();
f||a(function(){f||c()})}}var d,f;d=b.queue=[];b.waitUntilQuiet=function(b){f&&f();f=a(function(){f=null;b();c()})};return b}]).provider("$$animateQueue",["$animateProvider",function(a){function b(a){if(!a)return null;a=a.split(" ");var b=Object.create(null);s(a,function(a){b[a]=!0});return b}function c(a,c){if(a&&c){var d=b(c);return a.split(" ").some(function(a){return d[a]})}}function d(a,b,c){return e[a].some(function(a){return a(b,c)})}function f(a,b){var c=0<(a.addClass||"").length,d=0<(a.removeClass||
"").length;return b?c&&d:c||d}var e=this.rules={skip:[],cancel:[],join:[]};e.join.push(function(a,b){return!a.structural&&f(a)});e.skip.push(function(a,b){return!a.structural&&!f(a)});e.skip.push(function(a,b){return"leave"===b.event&&a.structural});e.skip.push(function(a,b){return b.structural&&2===b.state&&!a.structural});e.cancel.push(function(a,b){return b.structural&&a.structural});e.cancel.push(function(a,b){return 2===b.state&&a.structural});e.cancel.push(function(a,b){if(b.structural)return!1;
var d=a.addClass,f=a.removeClass,e=b.addClass,qa=b.removeClass;return N(d)&&N(f)||N(e)&&N(qa)?!1:c(d,qa)||c(f,e)});this.$get=["$$rAF","$rootScope","$rootElement","$document","$$Map","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow","$$isDocumentHidden",function(b,c,e,n,z,qa,J,u,H,k,O){function L(){var a=!1;return function(b){a?b():c.$$postDigest(function(){a=!0;b()})}}function A(a,b,c){var g=[],d=h[c];d&&s(d,function(d){w.call(d.node,b)?g.push(d.callback):"leave"===c&&
w.call(d.node,a)&&g.push(d.callback)});return g}function B(a,b,c){var g=ua(b);return a.filter(function(a){return!(a.node===g&&(!c||a.callback===c))})}function q(a,h,v){function q(a,c,g,d){G(function(){var a=A(ta,k,c);a.length?b(function(){s(a,function(a){a(e,g,d)});"close"!==g||k.parentNode||ra.off(k)}):"close"!==g||k.parentNode||ra.off(k)});a.progress(c,g,d)}function B(a){var b=e,c=m;c.preparationClasses&&(b.removeClass(c.preparationClasses),c.preparationClasses=null);c.activeClasses&&(b.removeClass(c.activeClasses),
c.activeClasses=null);D(e,m);ha(e,m);m.domOperation();t.complete(!a)}var m=Ca(v),e=Ga(a),k=Q(e),ta=k&&k.parentNode,m=na(m),t=new J,G=L();W(m.addClass)&&(m.addClass=m.addClass.join(" "));m.addClass&&!F(m.addClass)&&(m.addClass=null);W(m.removeClass)&&(m.removeClass=m.removeClass.join(" "));m.removeClass&&!F(m.removeClass)&&(m.removeClass=null);m.from&&!aa(m.from)&&(m.from=null);m.to&&!aa(m.to)&&(m.to=null);if(!k)return B(),t;v=[k.getAttribute("class"),m.addClass,m.removeClass].join(" ");if(!Xa(v))return B(),
t;var n=0<=["enter","move","leave"].indexOf(h),w=O(),u=!g||w||ga.get(k);v=!u&&x.get(k)||{};var H=!!v.state;u||H&&1===v.state||(u=!M(k,ta,h));if(u)return w&&q(t,h,"start"),B(),w&&q(t,h,"close"),t;n&&sa(k);w={structural:n,element:e,event:h,addClass:m.addClass,removeClass:m.removeClass,close:B,options:m,runner:t};if(H){if(d("skip",w,v)){if(2===v.state)return B(),t;U(e,v,w);return v.runner}if(d("cancel",w,v))if(2===v.state)v.runner.end();else if(v.structural)v.close();else return U(e,v,w),v.runner;else if(d("join",
w,v))if(2===v.state)U(e,w,{});else return Ta(e,n?h:null,m),h=w.event=v.event,m=U(e,v,w),v.runner}else U(e,w,{});(H=w.structural)||(H="animate"===w.event&&0<Object.keys(w.options.to||{}).length||f(w));if(!H)return B(),l(k),t;var z=(v.counter||0)+1;w.counter=z;I(k,1,w);c.$$postDigest(function(){e=Ga(a);var b=x.get(k),c=!b,b=b||{},g=0<(e.parent()||[]).length&&("animate"===b.event||b.structural||f(b));if(c||b.counter!==z||!g){c&&(D(e,m),ha(e,m));if(c||n&&b.event!==h)m.domOperation(),t.end();g||l(k)}else h=
!b.structural&&f(b,!0)?"setClass":b.event,I(k,2),b=qa(e,h,b.options),t.setHost(b),q(t,h,"start",{}),b.done(function(a){B(!a);(a=x.get(k))&&a.counter===z&&l(k);q(t,h,"close",{})})});return t}function sa(a){a=a.querySelectorAll("[data-ng-animate]");s(a,function(a){var b=parseInt(a.getAttribute("data-ng-animate"),10),c=x.get(a);if(c)switch(b){case 2:c.runner.end();case 1:x.delete(a)}})}function l(a){a.removeAttribute("data-ng-animate");x.delete(a)}function M(a,b,c){c=n[0].body;var g=Q(e),d=a===c||"HTML"===
a.nodeName,h=a===g,f=!1,k=ga.get(a),A;for((a=E.data(a,"$ngAnimatePin"))&&(b=Q(a));b;){h||(h=b===g);if(1!==b.nodeType)break;a=x.get(b)||{};if(!f){var q=ga.get(b);if(!0===q&&!1!==k){k=!0;break}else!1===q&&(k=!1);f=a.structural}if(N(A)||!0===A)a=E.data(b,"$$ngAnimateChildren"),ya(a)&&(A=a);if(f&&!1===A)break;d||(d=b===c);if(d&&h)break;if(!h&&(a=E.data(b,"$ngAnimatePin"))){b=Q(a);continue}b=b.parentNode}return(!f||A)&&!0!==k&&h&&d}function I(a,b,c){c=c||{};c.state=b;a.setAttribute("data-ng-animate",b);
c=(b=x.get(a))?va(b,c):c;x.set(a,c)}var x=new z,ga=new z,g=null,ta=c.$watch(function(){return 0===u.totalPendingRequests},function(a){a&&(ta(),c.$$postDigest(function(){c.$$postDigest(function(){null===g&&(g=!0)})}))}),h=Object.create(null),t=a.classNameFilter(),Xa=t?function(a){return t.test(a)}:function(){return!0},D=Y(H),w=R.Node.prototype.contains||function(a){return this===a||!!(this.compareDocumentPosition(a)&16)},ra={on:function(a,b,c){var g=ua(b);h[a]=h[a]||[];h[a].push({node:g,callback:c});
E(b).on("$destroy",function(){x.get(g)||ra.off(a,b,c)})},off:function(a,b,c){if(1!==arguments.length||F(arguments[0])){var g=h[a];g&&(h[a]=1===arguments.length?null:B(g,b,c))}else for(g in b=arguments[0],h)h[g]=B(h[g],b)},pin:function(a,b){Ea(da(a),"element","not an element");Ea(da(b),"parentElement","not an element");a.data("$ngAnimatePin",b)},push:function(a,b,c,g){c=c||{};c.domOperation=g;return q(a,b,c)},enabled:function(a,b){var c=arguments.length;if(0===c)b=!!g;else if(da(a)){var d=Q(a);1===
c?b=!ga.get(d):ga.set(d,!b)}else b=g=!!a;return b}};return ra}]}]).provider("$$animation",["$animateProvider",function(a){var b=this.drivers=[];this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$Map","$$rAFScheduler",function(a,d,f,e,p,K){function G(a){function b(a){if(a.processed)return a;a.processed=!0;var d=a.domNode,e=d.parentNode;f.set(d,a);for(var q;e;){if(q=f.get(e)){q.processed||(q=b(q));break}e=e.parentNode}(q||c).children.push(a);return a}var c={children:[]},d,f=new p;for(d=
0;d<a.length;d++){var e=a[d];f.set(e.domNode,a[d]={domNode:e.domNode,fn:e.fn,children:[]})}for(d=0;d<a.length;d++)b(a[d]);return function(a){var b=[],c=[],d;for(d=0;d<a.children.length;d++)c.push(a.children[d]);a=c.length;var f=0,e=[];for(d=0;d<c.length;d++){var k=c[d];0>=a&&(a=f,f=0,b.push(e),e=[]);e.push(k.fn);k.children.forEach(function(a){f++;c.push(a)});a--}e.length&&b.push(e);return b}(c)}var n=[],z=Y(a);return function(p,J,u){function H(a){a=a.hasAttribute("ng-animate-ref")?[a]:a.querySelectorAll("[ng-animate-ref]");
var b=[];s(a,function(a){var c=a.getAttribute("ng-animate-ref");c&&c.length&&b.push(a)});return b}function k(a){var b=[],c={};s(a,function(a,d){var h=Q(a.element),f=0<=["enter","move"].indexOf(a.event),h=a.structural?H(h):[];if(h.length){var e=f?"to":"from";s(h,function(a){var b=a.getAttribute("ng-animate-ref");c[b]=c[b]||{};c[b][e]={animationID:d,element:E(a)}})}else b.push(a)});var d={},f={};s(c,function(c,e){var k=c.from,A=c.to;if(k&&A){var q=a[k.animationID],x=a[A.animationID],l=k.animationID.toString();
if(!f[l]){var B=f[l]={structural:!0,beforeStart:function(){q.beforeStart();x.beforeStart()},close:function(){q.close();x.close()},classes:O(q.classes,x.classes),from:q,to:x,anchors:[]};B.classes.length?b.push(B):(b.push(q),b.push(x))}f[l].anchors.push({out:k.element,"in":A.element})}else k=k?k.animationID:A.animationID,A=k.toString(),d[A]||(d[A]=!0,b.push(a[k]))});return b}function O(a,b){a=a.split(" ");b=b.split(" ");for(var c=[],d=0;d<a.length;d++){var f=a[d];if("ng-"!==f.substring(0,3))for(var e=
0;e<b.length;e++)if(f===b[e]){c.push(f);break}}return c.join(" ")}function L(a){for(var c=b.length-1;0<=c;c--){var d=f.get(b[c])(a);if(d)return d}}function A(a,b){function c(a){(a=a.data("$$animationRunner"))&&a.setHost(b)}a.from&&a.to?(c(a.from.element),c(a.to.element)):c(a.element)}function B(){var a=p.data("$$animationRunner");!a||"leave"===J&&u.$$domOperationFired||a.end()}function q(b){p.off("$destroy",B);p.removeData("$$animationRunner");z(p,u);ha(p,u);u.domOperation();I&&a.removeClass(p,I);
p.removeClass("ng-animate");l.complete(!b)}u=na(u);var sa=0<=["enter","move","leave"].indexOf(J),l=new e({end:function(){q()},cancel:function(){q(!0)}});if(!b.length)return q(),l;p.data("$$animationRunner",l);var M=Fa(p.attr("class"),Fa(u.addClass,u.removeClass)),I=u.tempClasses;I&&(M+=" "+I,u.tempClasses=null);var x;sa&&(x="ng-"+J+"-prepare",a.addClass(p,x));n.push({element:p,classes:M,event:J,structural:sa,options:u,beforeStart:function(){p.addClass("ng-animate");I&&a.addClass(p,I);x&&(a.removeClass(p,
x),x=null)},close:q});p.on("$destroy",B);if(1<n.length)return l;d.$$postDigest(function(){var a=[];s(n,function(b){b.element.data("$$animationRunner")?a.push(b):b.close()});n.length=0;var b=k(a),c=[];s(b,function(a){c.push({domNode:Q(a.from?a.from.element:a.element),fn:function(){a.beforeStart();var b,c=a.close;if((a.anchors?a.from.element||a.to.element:a.element).data("$$animationRunner")){var d=L(a);d&&(b=d.start)}b?(b=b(),b.done(function(a){c(!a)}),A(a,b)):c()}})});K(G(c))});return l}}]}]).provider("$animateCss",
["$animateProvider",function(a){var b=La(),c=La();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function(a,f,e,p,K,G,n,z){function y(a,b){var c=a.parentNode;return(c.$$ngAnimateParentKey||(c.$$ngAnimateParentKey=++O))+"-"+a.getAttribute("class")+"-"+b}function J(e,k,q,p){var l;0<b.count(q)&&(l=c.get(q),l||(k=X(k,"-stagger"),f.addClass(e,k),l=Ja(a,e,p),l.animationDuration=Math.max(l.animationDuration,0),l.transitionDuration=
Math.max(l.transitionDuration,0),f.removeClass(e,k),c.put(q,l)));return l||{}}function u(a){L.push(a);n.waitUntilQuiet(function(){b.flush();c.flush();for(var a=K(),d=0;d<L.length;d++)L[d](a);L.length=0})}function H(c,f,e){f=b.get(e);f||(f=Ja(a,c,Va),"infinite"===f.animationIterationCount&&(f.animationIterationCount=1));b.put(e,f);c=f;e=c.animationDelay;f=c.transitionDelay;c.maxDelay=e&&f?Math.max(e,f):e||f;c.maxDuration=Math.max(c.animationDuration*c.animationIterationCount,c.transitionDuration);
return c}var k=Y(f),O=0,L=[];return function(a,c){function d(){l()}function n(){l(!0)}function l(b){if(!(w||E&&O)){w=!0;O=!1;g.$$skipPreparationClasses||f.removeClass(a,fa);f.removeClass(a,da);wa(h,!1);oa(h,!1);s(t,function(a){h.style[a[0]]=""});k(a,g);ha(a,g);Object.keys(L).length&&s(L,function(a,b){a?h.style.setProperty(b,a):h.style.removeProperty(b)});if(g.onDone)g.onDone();ea&&ea.length&&a.off(ea.join(" "),x);var c=a.data("$$animateCss");c&&(p.cancel(c[0].timer),a.removeData("$$animateCss"));
F&&F.complete(!b)}}function M(a){r.blockTransition&&oa(h,a);r.blockKeyframeAnimation&&wa(h,!!a)}function I(){F=new e({end:d,cancel:n});u(P);l();return{$$willAnimate:!1,start:function(){return F},end:d}}function x(a){a.stopPropagation();var b=a.originalEvent||a;a=b.$manualTimeStamp||Date.now();b=parseFloat(b.elapsedTime.toFixed(3));Math.max(a-Y,0)>=R&&b>=m&&(E=!0,l())}function ga(){function b(){if(!w){M(!1);s(t,function(a){h.style[a[0]]=a[1]});k(a,g);f.addClass(a,da);if(r.recalculateTimingStyles){ma=
h.getAttribute("class")+" "+fa;ja=y(h,ma);C=H(h,ma,ja);ba=C.maxDelay;N=Math.max(ba,0);m=C.maxDuration;if(0===m){l();return}r.hasTransitions=0<C.transitionDuration;r.hasAnimations=0<C.animationDuration}r.applyAnimationDelay&&(ba="boolean"!==typeof g.delay&&xa(g.delay)?parseFloat(g.delay):ba,N=Math.max(ba,0),C.animationDelay=ba,ca=[pa,ba+"s"],t.push(ca),h.style[ca[0]]=ca[1]);R=1E3*N;U=1E3*m;if(g.easing){var d,e=g.easing;r.hasTransitions&&(d=S+"TimingFunction",t.push([d,e]),h.style[d]=e);r.hasAnimations&&
(d=$+"TimingFunction",t.push([d,e]),h.style[d]=e)}C.transitionDuration&&ea.push(za);C.animationDuration&&ea.push(Aa);Y=Date.now();var n=R+1.5*U;d=Y+n;var e=a.data("$$animateCss")||[],q=!0;if(e.length){var I=e[0];(q=d>I.expectedEndTime)?p.cancel(I.timer):e.push(l)}q&&(n=p(c,n,!1),e[0]={timer:n,expectedEndTime:d},e.push(l),a.data("$$animateCss",e));if(ea.length)a.on(ea.join(" "),x);g.to&&(g.cleanupStyles&&Ma(L,h,Object.keys(g.to)),Ia(a,g))}}function c(){var b=a.data("$$animateCss");if(b){for(var d=
1;d<b.length;d++)b[d]();a.removeData("$$animateCss")}}if(!w)if(h.parentNode){var d=function(a){if(E)O&&a&&(O=!1,l());else if(O=!a,C.animationDuration)if(a=wa(h,O),O)t.push(a);else{var b=t,c=b.indexOf(a);0<=a&&b.splice(c,1)}},e=0<aa&&(C.transitionDuration&&0===V.transitionDuration||C.animationDuration&&0===V.animationDuration)&&Math.max(V.animationDelay,V.transitionDelay);e?p(b,Math.floor(e*aa*1E3),!1):b();v.resume=function(){d(!0)};v.pause=function(){d(!1)}}else l()}var g=c||{};g.$$prepared||(g=na(Ca(g)));
var L={},h=Q(a);if(!h||!h.parentNode||!z.enabled())return I();var t=[],K=a.attr("class"),D=Pa(g),w,O,E,F,v,N,R,m,U,Y,ea=[];if(0===g.duration||!G.animations&&!G.transitions)return I();var ia=g.event&&W(g.event)?g.event.join(" "):g.event,Z="",T="";ia&&g.structural?Z=X(ia,"ng-",!0):ia&&(Z=ia);g.addClass&&(T+=X(g.addClass,"-add"));g.removeClass&&(T.length&&(T+=" "),T+=X(g.removeClass,"-remove"));g.applyClassesEarly&&T.length&&k(a,g);var fa=[Z,T].join(" ").trim(),ma=K+" "+fa,da=X(fa,"-active"),K=D.to&&
0<Object.keys(D.to).length;if(!(0<(g.keyframeStyle||"").length||K||fa))return I();var ja,V;0<g.stagger?(D=parseFloat(g.stagger),V={transitionDelay:D,animationDelay:D,transitionDuration:0,animationDuration:0}):(ja=y(h,ma),V=J(h,fa,ja,Wa));g.$$skipPreparationClasses||f.addClass(a,fa);g.transitionStyle&&(D=[S,g.transitionStyle],ka(h,D),t.push(D));0<=g.duration&&(D=0<h.style[S].length,D=Ka(g.duration,D),ka(h,D),t.push(D));g.keyframeStyle&&(D=[$,g.keyframeStyle],ka(h,D),t.push(D));var aa=V?0<=g.staggerIndex?
g.staggerIndex:b.count(ja):0;(ia=0===aa)&&!g.skipBlocking&&oa(h,9999);var C=H(h,ma,ja),ba=C.maxDelay;N=Math.max(ba,0);m=C.maxDuration;var r={};r.hasTransitions=0<C.transitionDuration;r.hasAnimations=0<C.animationDuration;r.hasTransitionAll=r.hasTransitions&&"all"===C.transitionProperty;r.applyTransitionDuration=K&&(r.hasTransitions&&!r.hasTransitionAll||r.hasAnimations&&!r.hasTransitions);r.applyAnimationDuration=g.duration&&r.hasAnimations;r.applyTransitionDelay=xa(g.delay)&&(r.applyTransitionDuration||
r.hasTransitions);r.applyAnimationDelay=xa(g.delay)&&r.hasAnimations;r.recalculateTimingStyles=0<T.length;if(r.applyTransitionDuration||r.applyAnimationDuration)m=g.duration?parseFloat(g.duration):m,r.applyTransitionDuration&&(r.hasTransitions=!0,C.transitionDuration=m,D=0<h.style[S+"Property"].length,t.push(Ka(m,D))),r.applyAnimationDuration&&(r.hasAnimations=!0,C.animationDuration=m,t.push([Ba,m+"s"]));if(0===m&&!r.recalculateTimingStyles)return I();if(null!=g.delay){var ca;"boolean"!==typeof g.delay&&
(ca=parseFloat(g.delay),N=Math.max(ca,0));r.applyTransitionDelay&&t.push([la,ca+"s"]);r.applyAnimationDelay&&t.push([pa,ca+"s"])}null==g.duration&&0<C.transitionDuration&&(r.recalculateTimingStyles=r.recalculateTimingStyles||ia);R=1E3*N;U=1E3*m;g.skipBlocking||(r.blockTransition=0<C.transitionDuration,r.blockKeyframeAnimation=0<C.animationDuration&&0<V.animationDelay&&0===V.animationDuration);g.from&&(g.cleanupStyles&&Ma(L,h,Object.keys(g.from)),Ha(a,g));r.blockTransition||r.blockKeyframeAnimation?
M(m):g.skipBlocking||oa(h,!1);return{$$willAnimate:!0,end:d,start:function(){if(!w)return v={end:d,cancel:n,resume:null,pause:null},F=new e(v),u(ga),F}}}}]}]).provider("$$animateCssDriver",["$$animationProvider",function(a){a.drivers.push("$$animateCssDriver");this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(a,c,d,f,e,p,K){function G(a){return a.replace(/\bng-\S+\b/g,"")}function n(a,b){F(a)&&(a=a.split(" "));F(b)&&(b=b.split(" "));
return a.filter(function(a){return-1===b.indexOf(a)}).join(" ")}function z(c,e,f){function p(a){var b={},c=Q(a).getBoundingClientRect();s(["width","height","top","left"],function(a){var d=c[a];switch(a){case "top":d+=u.scrollTop;break;case "left":d+=u.scrollLeft}b[a]=Math.floor(d)+"px"});return b}function K(){var c=G(f.attr("class")||""),d=n(c,l),c=n(l,c),d=a(z,{to:p(f),addClass:"ng-anchor-in "+d,removeClass:"ng-anchor-out "+c,delay:!0});return d.$$willAnimate?d:null}function q(){z.remove();e.removeClass("ng-animate-shim");
f.removeClass("ng-animate-shim")}var z=E(Q(e).cloneNode(!0)),l=G(z.attr("class")||"");e.addClass("ng-animate-shim");f.addClass("ng-animate-shim");z.addClass("ng-anchor");H.append(z);var M;c=function(){var c=a(z,{addClass:"ng-anchor-out",delay:!0,from:p(e)});return c.$$willAnimate?c:null}();if(!c&&(M=K(),!M))return q();var I=c||M;return{start:function(){function a(){c&&c.end()}var b,c=I.start();c.done(function(){c=null;if(!M&&(M=K()))return c=M.start(),c.done(function(){c=null;q();b.complete()}),c;
q();b.complete()});return b=new d({end:a,cancel:a})}}}function y(a,b,c,e){var f=J(a,P),p=J(b,P),n=[];s(e,function(a){(a=z(c,a.out,a["in"]))&&n.push(a)});if(f||p||0!==n.length)return{start:function(){function a(){s(b,function(a){a.end()})}var b=[];f&&b.push(f.start());p&&b.push(p.start());s(n,function(a){b.push(a.start())});var c=new d({end:a,cancel:a});d.all(b,function(a){c.complete(a)});return c}}}function J(c){var d=c.element,e=c.options||{};c.structural&&(e.event=c.event,e.structural=!0,e.applyClassesEarly=
!0,"leave"===c.event&&(e.onDone=e.domOperation));e.preparationClasses&&(e.event=Z(e.event,e.preparationClasses));c=a(d,e);return c.$$willAnimate?c:null}if(!e.animations&&!e.transitions)return P;var u=K[0].body;c=Q(f);var H=E(c.parentNode&&11===c.parentNode.nodeType||u.contains(c)?c:u);return function(a){return a.from&&a.to?y(a.from,a.to,a.classes,a.anchors):J(a)}}]}]).provider("$$animateJs",["$animateProvider",function(a){this.$get=["$injector","$$AnimateRunner","$$jqLite",function(b,c,d){function f(c){c=
W(c)?c:c.split(" ");for(var d=[],e={},f=0;f<c.length;f++){var s=c[f],y=a.$$registeredAnimations[s];y&&!e[s]&&(d.push(b.get(y)),e[s]=!0)}return d}var e=Y(d);return function(a,b,d,n){function z(){n.domOperation();e(a,n)}function y(a,b,d,e,f){switch(d){case "animate":b=[b,e.from,e.to,f];break;case "setClass":b=[b,k,F,f];break;case "addClass":b=[b,k,f];break;case "removeClass":b=[b,F,f];break;default:b=[b,f]}b.push(e);if(a=a.apply(a,b))if(Da(a.start)&&(a=a.start()),a instanceof c)a.done(f);else if(Da(a))return a;
return P}function J(a,b,d,e,f){var k=[];s(e,function(e){var l=e[f];l&&k.push(function(){var e,f,g=!1,h=function(a){g||(g=!0,(f||P)(a),e.complete(!a))};e=new c({end:function(){h()},cancel:function(){h(!0)}});f=y(l,a,b,d,function(a){h(!1===a)});return e})});return k}function u(a,b,d,e,f){var k=J(a,b,d,e,f);if(0===k.length){var h,l;"beforeSetClass"===f?(h=J(a,"removeClass",d,e,"beforeRemoveClass"),l=J(a,"addClass",d,e,"beforeAddClass")):"setClass"===f&&(h=J(a,"removeClass",d,e,"removeClass"),l=J(a,"addClass",
d,e,"addClass"));h&&(k=k.concat(h));l&&(k=k.concat(l))}if(0!==k.length)return function(a){var b=[];k.length&&s(k,function(a){b.push(a())});b.length?c.all(b,a):a();return function(a){s(b,function(b){a?b.cancel():b.end()})}}}var H=!1;3===arguments.length&&aa(d)&&(n=d,d=null);n=na(n);d||(d=a.attr("class")||"",n.addClass&&(d+=" "+n.addClass),n.removeClass&&(d+=" "+n.removeClass));var k=n.addClass,F=n.removeClass,L=f(d),A,B;if(L.length){var q,E;"leave"===b?(E="leave",q="afterLeave"):(E="before"+b.charAt(0).toUpperCase()+
b.substr(1),q=b);"enter"!==b&&"move"!==b&&(A=u(a,b,n,L,E));B=u(a,b,n,L,q)}if(A||B){var l;return{$$willAnimate:!0,end:function(){l?l.end():(H=!0,z(),ha(a,n),l=new c,l.complete(!0));return l},start:function(){function b(c){H=!0;z();ha(a,n);l.complete(c)}if(l)return l;l=new c;var d,e=[];A&&e.push(function(a){d=A(a)});e.length?e.push(function(a){z();a(!0)}):z();B&&e.push(function(a){d=B(a)});l.setHost({end:function(){H||((d||P)(void 0),b(void 0))},cancel:function(){H||((d||P)(!0),b(!0))}});c.chain(e,
b);return l}}}}}]}]).provider("$$animateJsDriver",["$$animationProvider",function(a){a.drivers.push("$$animateJsDriver");this.$get=["$$animateJs","$$AnimateRunner",function(a,c){function d(c){return a(c.element,c.event,c.classes,c.options)}return function(a){if(a.from&&a.to){var b=d(a.from),p=d(a.to);if(b||p)return{start:function(){function a(){return function(){s(d,function(a){a.end()})}}var d=[];b&&d.push(b.start());p&&d.push(p.start());c.all(d,function(a){f.complete(a)});var f=new c({end:a(),cancel:a()});
return f}}}else return d(a)}}]}])})(window,window.angular);


/*
 AngularJS v1.6.4
 (c) 2010-2017 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(J,d){'use strict';function A(d){k&&d.get("$route")}function B(t,u,g){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(a,f,b,c,m){function v(){l&&(g.cancel(l),l=null);n&&(n.$destroy(),n=null);p&&(l=g.leave(p),l.done(function(a){!1!==a&&(l=null)}),p=null)}function E(){var b=t.current&&t.current.locals;if(d.isDefined(b&&b.$template)){var b=a.$new(),c=t.current;p=m(b,function(b){g.enter(b,null,p||f).done(function(b){!1===b||!d.isDefined(w)||w&&!a.$eval(w)||u()});
v()});n=c.scope=b;n.$emit("$viewContentLoaded");n.$eval(k)}else v()}var n,p,l,w=b.autoscroll,k=b.onload||"";a.$on("$routeChangeSuccess",E);E()}}}function C(d,k,g){return{restrict:"ECA",priority:-400,link:function(a,f){var b=g.current,c=b.locals;f.html(c.$template);var m=d(f.contents());if(b.controller){c.$scope=a;var v=k(b.controller,c);b.controllerAs&&(a[b.controllerAs]=v);f.data("$ngControllerController",v);f.children().data("$ngControllerController",v)}a[b.resolveAs||"$resolve"]=c;m(a)}}}var x,
y,F,G,z=d.module("ngRoute",[]).info({angularVersion:"1.6.4"}).provider("$route",function(){function t(a,f){return d.extend(Object.create(a),f)}function u(a,d){var b=d.caseInsensitiveMatch,c={originalPath:a,regexp:a},g=c.keys=[];a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)(\*\?|[?*])?/g,function(a,b,d,c){a="?"===c||"*?"===c?"?":null;c="*"===c||"*?"===c?"*":null;g.push({name:d,optional:!!a});b=b||"";return""+(a?"":b)+"(?:"+(a?b:"")+(c&&"(.+?)"||"([^/]+)")+(a||"")+")"+(a||"")}).replace(/([/$*])/g,
"\\$1");c.regexp=new RegExp("^"+a+"$",b?"i":"");return c}x=d.isArray;y=d.isObject;F=d.isDefined;G=d.noop;var g={};this.when=function(a,f){var b;b=void 0;if(x(f)){b=b||[];for(var c=0,m=f.length;c<m;c++)b[c]=f[c]}else if(y(f))for(c in b=b||{},f)if("$"!==c.charAt(0)||"$"!==c.charAt(1))b[c]=f[c];b=b||f;d.isUndefined(b.reloadOnSearch)&&(b.reloadOnSearch=!0);d.isUndefined(b.caseInsensitiveMatch)&&(b.caseInsensitiveMatch=this.caseInsensitiveMatch);g[a]=d.extend(b,a&&u(a,b));a&&(c="/"===a[a.length-1]?a.substr(0,
a.length-1):a+"/",g[c]=d.extend({redirectTo:a},u(c,b)));return this};this.caseInsensitiveMatch=!1;this.otherwise=function(a){"string"===typeof a&&(a={redirectTo:a});this.when(null,a);return this};k=!0;this.eagerInstantiationEnabled=function(a){return F(a)?(k=a,this):k};this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce","$browser",function(a,f,b,c,m,k,u,n){function p(e){var h=q.current;(y=(s=C())&&h&&s.$$route===h.$$route&&d.equals(s.pathParams,h.pathParams)&&
!s.reloadOnSearch&&!D)||!h&&!s||a.$broadcast("$routeChangeStart",s,h).defaultPrevented&&e&&e.preventDefault()}function l(){var e=q.current,h=s;if(y)e.params=h.params,d.copy(e.params,b),a.$broadcast("$routeUpdate",e);else if(h||e){D=!1;q.current=h;var H=c.resolve(h);n.$$incOutstandingRequestCount();H.then(w).then(z).then(function(c){return c&&H.then(A).then(function(c){h===q.current&&(h&&(h.locals=c,d.copy(h.params,b)),a.$broadcast("$routeChangeSuccess",h,e))})}).catch(function(b){h===q.current&&a.$broadcast("$routeChangeError",
h,e,b)}).finally(function(){n.$$completeOutstandingRequest(G)})}}function w(e){var a={route:e,hasRedirection:!1};if(e)if(e.redirectTo)if(d.isString(e.redirectTo))a.path=x(e.redirectTo,e.params),a.search=e.params,a.hasRedirection=!0;else{var b=f.path(),g=f.search();e=e.redirectTo(e.pathParams,b,g);d.isDefined(e)&&(a.url=e,a.hasRedirection=!0)}else if(e.resolveRedirectTo)return c.resolve(m.invoke(e.resolveRedirectTo)).then(function(e){d.isDefined(e)&&(a.url=e,a.hasRedirection=!0);return a});return a}
function z(a){var b=!0;if(a.route!==q.current)b=!1;else if(a.hasRedirection){var d=f.url(),c=a.url;c?f.url(c).replace():c=f.path(a.path).search(a.search).replace().url();c!==d&&(b=!1)}return b}function A(a){if(a){var b=d.extend({},a.resolve);d.forEach(b,function(a,e){b[e]=d.isString(a)?m.get(a):m.invoke(a,null,null,e)});a=B(a);d.isDefined(a)&&(b.$template=a);return c.all(b)}}function B(a){var b,c;d.isDefined(b=a.template)?d.isFunction(b)&&(b=b(a.params)):d.isDefined(c=a.templateUrl)&&(d.isFunction(c)&&
(c=c(a.params)),d.isDefined(c)&&(a.loadedTemplateUrl=u.valueOf(c),b=k(c)));return b}function C(){var a,b;d.forEach(g,function(c,g){var r;if(r=!b){var k=f.path();r=c.keys;var m={};if(c.regexp)if(k=c.regexp.exec(k)){for(var l=1,n=k.length;l<n;++l){var p=r[l-1],q=k[l];p&&q&&(m[p.name]=q)}r=m}else r=null;else r=null;r=a=r}r&&(b=t(c,{params:d.extend({},f.search(),a),pathParams:a}),b.$$route=c)});return b||g[null]&&t(g[null],{params:{},pathParams:{}})}function x(a,b){var c=[];d.forEach((a||"").split(":"),
function(a,d){if(0===d)c.push(a);else{var e=a.match(/(\w+)(?:[?*])?(.*)/),f=e[1];c.push(b[f]);c.push(e[2]||"");delete b[f]}});return c.join("")}var D=!1,s,y,q={routes:g,reload:function(){D=!0;var b={defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0;D=!1}};a.$evalAsync(function(){p(b);b.defaultPrevented||l()})},updateParams:function(a){if(this.current&&this.current.$$route)a=d.extend({},this.current.params,a),f.path(x(this.current.$$route.originalPath,a)),f.search(a);else throw I("norout");
}};a.$on("$locationChangeStart",p);a.$on("$locationChangeSuccess",l);return q}]}).run(A),I=d.$$minErr("ngRoute"),k;A.$inject=["$injector"];z.provider("$routeParams",function(){this.$get=function(){return{}}});z.directive("ngView",B);z.directive("ngView",C);B.$inject=["$route","$anchorScroll","$animate"];C.$inject=["$compile","$controller","$route"]})(window,window.angular);


/*
 AngularJS v1.6.4
 (c) 2010-2017 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(W,b){'use strict';function K(q,g){g=g||{};b.forEach(g,function(b,h){delete g[h]});for(var h in q)!q.hasOwnProperty(h)||"$"===h.charAt(0)&&"$"===h.charAt(1)||(g[h]=q[h]);return g}var B=b.$$minErr("$resource"),Q=/^(\.[a-zA-Z_$@][0-9a-zA-Z_$@]*)+$/;b.module("ngResource",["ng"]).info({angularVersion:"1.6.4"}).provider("$resource",function(){var q=/^https?:\/\/\[[^\]]*][^/]*/,g=this;this.defaults={stripTrailingSlashes:!0,cancellable:!1,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",
isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}}};this.$get=["$http","$log","$q","$timeout",function(h,P,L,M){function C(b,e){this.template=b;this.defaults=p({},g.defaults,e);this.urlParams={}}function x(D,e,u,m){function c(a,d){var c={};d=p({},e,d);t(d,function(d,l){y(d)&&(d=d(a));var f;if(d&&d.charAt&&"@"===d.charAt(0)){f=a;var k=d.substr(1);if(null==k||""===k||"hasOwnProperty"===k||!Q.test("."+k))throw B("badmember",k);for(var k=k.split("."),e=0,g=k.length;e<g&&b.isDefined(f);e++){var h=
k[e];f=null!==f?f[h]:void 0}}else f=d;c[l]=f});return c}function R(a){return a.resource}function l(a){K(a||{},this)}var q=new C(D,m);u=p({},g.defaults.actions,u);l.prototype.toJSON=function(){var a=p({},this);delete a.$promise;delete a.$resolved;delete a.$cancelRequest;return a};t(u,function(a,d){var b=!0===a.hasBody||!1!==a.hasBody&&/^(POST|PUT|PATCH)$/i.test(a.method),e=a.timeout,g=N(a.cancellable)?a.cancellable:q.defaults.cancellable;e&&!S(e)&&(P.debug("ngResource:\n  Only numeric values are allowed as `timeout`.\n  Promises are not supported in $resource, because the same value would be used for multiple requests. If you are looking for a way to cancel requests, you should use the `cancellable` option."),
delete a.timeout,e=null);l[d]=function(f,k,m,D){function u(a){r.catch(E);z.resolve(a)}var G={},v,w,A;switch(arguments.length){case 4:A=D,w=m;case 3:case 2:if(y(k)){if(y(f)){w=f;A=k;break}w=k;A=m}else{G=f;v=k;w=m;break}case 1:y(f)?w=f:b?v=f:G=f;break;case 0:break;default:throw B("badargs",arguments.length);}var F=this instanceof l,n=F?v:a.isArray?[]:new l(v),s={},C=a.interceptor&&a.interceptor.response||R,x=a.interceptor&&a.interceptor.responseError||void 0,H=!!A,I=!!x,z,J;t(a,function(a,d){switch(d){default:s[d]=
T(a);case "params":case "isArray":case "interceptor":case "cancellable":}});!F&&g&&(z=L.defer(),s.timeout=z.promise,e&&(J=M(z.resolve,e)));b&&(s.data=v);q.setUrlParams(s,p({},c(v,a.params||{}),G),a.url);var r=h(s).then(function(f){var c=f.data;if(c){if(O(c)!==!!a.isArray)throw B("badcfg",d,a.isArray?"array":"object",O(c)?"array":"object",s.method,s.url);if(a.isArray)n.length=0,t(c,function(a){"object"===typeof a?n.push(new l(a)):n.push(a)});else{var b=n.$promise;K(c,n);n.$promise=b}}f.resource=n;
return f}),r=r["finally"](function(){n.$resolved=!0;!F&&g&&(n.$cancelRequest=E,M.cancel(J),z=J=s.timeout=null)}),r=r.then(function(a){var d=C(a);(w||E)(d,a.headers,a.status,a.statusText);return d},H||I?function(a){H&&!I&&r.catch(E);H&&A(a);return I?x(a):L.reject(a)}:void 0);return F?r:(n.$promise=r,n.$resolved=!1,g&&(n.$cancelRequest=u),n)};l.prototype["$"+d]=function(a,c,b){y(a)&&(b=c,c=a,a={});a=l[d].call(this,a,this,c,b);return a.$promise||a}});l.bind=function(a){a=p({},e,a);return x(D,a,u,m)};
return l}var E=b.noop,t=b.forEach,p=b.extend,T=b.copy,O=b.isArray,N=b.isDefined,y=b.isFunction,S=b.isNumber,U=b.$$encodeUriQuery,V=b.$$encodeUriSegment;C.prototype={setUrlParams:function(b,e,g){var m=this,c=g||m.template,h,l,p="",a=m.urlParams=Object.create(null);t(c.split(/\W/),function(d){if("hasOwnProperty"===d)throw B("badname");!/^\d+$/.test(d)&&d&&(new RegExp("(^|[^\\\\]):"+d+"(\\W|$)")).test(c)&&(a[d]={isQueryParamValue:(new RegExp("\\?.*=:"+d+"(?:\\W|$)")).test(c)})});c=c.replace(/\\:/g,":");
c=c.replace(q,function(a){p=a;return""});e=e||{};t(m.urlParams,function(a,b){h=e.hasOwnProperty(b)?e[b]:m.defaults[b];N(h)&&null!==h?(l=a.isQueryParamValue?U(h,!0):V(h),c=c.replace(new RegExp(":"+b+"(\\W|$)","g"),function(a,b){return l+b})):c=c.replace(new RegExp("(/?):"+b+"(\\W|$)","g"),function(a,b,d){return"/"===d.charAt(0)?d:b+d})});m.defaults.stripTrailingSlashes&&(c=c.replace(/\/+$/,"")||"/");c=c.replace(/\/\.(?=\w+($|\?))/,".");b.url=p+c.replace(/\/(\\|%5C)\./,"/.");t(e,function(a,c){m.urlParams[c]||
(b.params=b.params||{},b.params[c]=a)})}};return x}]})})(window,window.angular);
//# sourceMappingURL=angular-resource.min.js.map

/*
 AngularJS v1.6.4
 (c) 2010-2017 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(s,f){'use strict';function J(f){var k=[];v(k,B).chars(f);return k.join("")}var w=f.$$minErr("$sanitize"),C,k,D,E,q,B,F,G,v;f.module("ngSanitize",[]).provider("$sanitize",function(){function h(a,c){var b={},d=a.split(","),l;for(l=0;l<d.length;l++)b[c?q(d[l]):d[l]]=!0;return b}function K(a){for(var c={},b=0,d=a.length;b<d;b++){var l=a[b];c[l.name]=l.value}return c}function H(a){return a.replace(/&/g,"&amp;").replace(L,function(a){var b=a.charCodeAt(0);a=a.charCodeAt(1);return"&#"+(1024*(b-
55296)+(a-56320)+65536)+";"}).replace(M,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function I(a){for(;a;){if(a.nodeType===s.Node.ELEMENT_NODE)for(var c=a.attributes,b=0,d=c.length;b<d;b++){var l=c[b],e=l.name.toLowerCase();if("xmlns:ns1"===e||0===e.lastIndexOf("ns1:",0))a.removeAttributeNode(l),b--,d--}(c=a.firstChild)&&I(c);a=t("nextSibling",a)}}function t(a,c){var b=c[a];if(b&&F.call(c,b))throw w("elclob",c.outerHTML||c.outerText);return b}var x=!1;this.$get=
["$$sanitizeUri",function(a){x&&k(p,z);return function(c){var b=[];G(c,v(b,function(b,c){return!/^unsafe:/.test(a(b,c))}));return b.join("")}}];this.enableSvg=function(a){return E(a)?(x=a,this):x};C=f.bind;k=f.extend;D=f.forEach;E=f.isDefined;q=f.lowercase;B=f.noop;G=function(a,c){null===a||void 0===a?a="":"string"!==typeof a&&(a=""+a);g.innerHTML=a;var b=5;do{if(0===b)throw w("uinput");b--;s.document.documentMode&&I(g);a=g.innerHTML;g.innerHTML=a}while(a!==g.innerHTML);for(b=g.firstChild;b;){switch(b.nodeType){case 1:c.start(b.nodeName.toLowerCase(),
K(b.attributes));break;case 3:c.chars(b.textContent)}var d;if(!(d=b.firstChild)&&(1===b.nodeType&&c.end(b.nodeName.toLowerCase()),d=t("nextSibling",b),!d))for(;null==d;){b=t("parentNode",b);if(b===g)break;d=t("nextSibling",b);1===b.nodeType&&c.end(b.nodeName.toLowerCase())}b=d}for(;b=g.firstChild;)g.removeChild(b)};v=function(a,c){var b=!1,d=C(a,a.push);return{start:function(a,e){a=q(a);!b&&A[a]&&(b=a);b||!0!==p[a]||(d("<"),d(a),D(e,function(b,e){var f=q(e),g="img"===a&&"src"===f||"background"===
f;!0!==u[f]||!0===n[f]&&!c(b,g)||(d(" "),d(e),d('="'),d(H(b)),d('"'))}),d(">"))},end:function(a){a=q(a);b||!0!==p[a]||!0===e[a]||(d("</"),d(a),d(">"));a==b&&(b=!1)},chars:function(a){b||d(H(a))}}};F=s.Node.prototype.contains||function(a){return!!(this.compareDocumentPosition(a)&16)};var L=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,M=/([^#-~ |!])/g,e=h("area,br,col,hr,img,wbr"),y=h("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),m=h("rp,rt"),r=k({},m,y),y=k({},y,h("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),
m=k({},m,h("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),z=h("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),A=h("script,style"),p=k({},e,y,m,r),n=h("background,cite,href,longdesc,src,xlink:href"),r=h("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),
m=h("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",
!0),u=k({},n,m,r),g;(function(a){if(a.document&&a.document.implementation)a=a.document.implementation.createHTMLDocument("inert");else throw w("noinert");var c=(a.documentElement||a.getDocumentElement()).getElementsByTagName("body");1===c.length?g=c[0]:(c=a.createElement("html"),g=a.createElement("body"),c.appendChild(g),a.appendChild(c))})(s)}).info({angularVersion:"1.6.4"});f.module("ngSanitize").filter("linky",["$sanitize",function(h){var k=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,
q=/^mailto:/i,s=f.$$minErr("linky"),t=f.isDefined,x=f.isFunction,v=f.isObject,w=f.isString;return function(e,f,m){function r(a){a&&n.push(J(a))}function z(a,c){var b,d=A(a);n.push("<a ");for(b in d)n.push(b+'="'+d[b]+'" ');!t(f)||"target"in d||n.push('target="',f,'" ');n.push('href="',a.replace(/"/g,"&quot;"),'">');r(c);n.push("</a>")}if(null==e||""===e)return e;if(!w(e))throw s("notstring",e);for(var A=x(m)?m:v(m)?function(){return m}:function(){return{}},p=e,n=[],u,g;e=p.match(k);)u=e[0],e[2]||
e[4]||(u=(e[3]?"http://":"mailto:")+u),g=e.index,r(p.substr(0,g)),z(u,e[0].replace(q,"")),p=p.substring(g+e[0].length);r(p);return h(n.join(""))}}])})(window,window.angular);


/*
 AngularJS v1.6.4
 (c) 2010-2017 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(y,l){'use strict';function w(){return["$animate",function(t){return{restrict:"AE",transclude:"element",priority:1,terminal:!0,require:"^^ngMessages",link:function(u,n,a,c,f){var e=n[0],d,r=a.ngMessage||a.when;a=a.ngMessageExp||a.whenExp;var k=function(a){d=a?p(a)?a:a.split(/[\s,]+/):null;c.reRender()};a?(k(u.$eval(a)),u.$watchCollection(a,k)):k(r);var g,s;c.register(e,s={test:function(a){var m=d;a=m?p(m)?0<=m.indexOf(a):m.hasOwnProperty(a):void 0;return a},attach:function(){g||f(function(a,
m){t.enter(a,null,n);g=a;var d=g.$$attachId=c.getAttachId();g.on("$destroy",function(){g&&g.$$attachId===d&&(c.deregister(e),s.detach());m.$destroy()})})},detach:function(){if(g){var a=g;g=null;t.leave(a)}}})}}}]}var v,p,q,x;l.module("ngMessages",[],function(){v=l.forEach;p=l.isArray;q=l.isString;x=l.element}).info({angularVersion:"1.6.4"}).directive("ngMessages",["$animate",function(t){function u(a,c){return q(c)&&0===c.length||n(a.$eval(c))}function n(a){return q(a)?a.length:!!a}return{require:"ngMessages",
restrict:"AE",controller:["$element","$scope","$attrs",function(a,c,f){function e(a,c){for(var b=c,d=[];b&&b!==a;){var h=b.$$ngMessageNode;if(h&&h.length)return g[h];b.childNodes.length&&-1===d.indexOf(b)?(d.push(b),b=b.childNodes[b.childNodes.length-1]):b.previousSibling?b=b.previousSibling:(b=b.parentNode,d.push(b))}}var d=this,r=0,k=0;this.getAttachId=function(){return k++};var g=this.messages={},s,l;this.render=function(m){m=m||{};s=!1;l=m;for(var g=u(c,f.ngMessagesMultiple)||u(c,f.multiple),
b=[],e={},h=d.head,r=!1,k=0;null!=h;){k++;var q=h.message,p=!1;r||v(m,function(a,b){!p&&n(a)&&q.test(b)&&!e[b]&&(p=e[b]=!0,q.attach())});p?r=!g:b.push(q);h=h.next}v(b,function(a){a.detach()});b.length!==k?t.setClass(a,"ng-active","ng-inactive"):t.setClass(a,"ng-inactive","ng-active")};c.$watchCollection(f.ngMessages||f["for"],d.render);a.on("$destroy",function(){v(g,function(a){a.message.detach()})});this.reRender=function(){s||(s=!0,c.$evalAsync(function(){s&&l&&d.render(l)}))};this.register=function(c,
f){var b=r.toString();g[b]={message:f};var k=a[0],h=g[b];d.head?(k=e(k,c))?(h.next=k.next,k.next=h):(h.next=d.head,d.head=h):d.head=h;c.$$ngMessageNode=b;r++;d.reRender()};this.deregister=function(c){var f=c.$$ngMessageNode;delete c.$$ngMessageNode;var b=g[f];(c=e(a[0],c))?c.next=b.next:d.head=b.next;delete g[f];d.reRender()}}]}}]).directive("ngMessagesInclude",["$templateRequest","$document","$compile",function(l,p,n){function a(a,f){var e=n.$$createComment?n.$$createComment("ngMessagesInclude",
f):p[0].createComment(" ngMessagesInclude: "+f+" "),e=x(e);a.after(e);a.remove()}return{restrict:"AE",require:"^^ngMessages",link:function(c,f,e){var d=e.ngMessagesInclude||e.src;l(d).then(function(e){c.$$destroyed||(q(e)&&!e.trim()?a(f,d):n(e)(c,function(c){f.after(c);a(f,d)}))})}}}]).directive("ngMessage",w()).directive("ngMessageExp",w())})(window,window.angular);


/**
 * State-based routing for AngularJS 1.x
 * NOTICE: This monolithic bundle also bundles the @uirouter/core code.
 *         This causes it to be incompatible with plugins that depend on @uirouter/core.
 *         We recommend switching to the ui-router-core.js and ui-router-angularjs.js bundles instead.
 *         For more information, see https://ui-router.github.io/blog/uirouter-for-angularjs-umd-bundles
 * @version v1.0.6
 * @link https://ui-router.github.io
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("angular")):"function"==typeof define&&define.amd?define(["exports","angular"],e):e(t["@uirouter/angularjs"]=t["@uirouter/angularjs"]||{},t.angular)}(this,function(t,e){"use strict";function r(t){function e(r){return r.length>=n?t.apply(null,r):function(){return e(r.concat([].slice.apply(arguments)))}}var r=[].slice.apply(arguments,[1]),n=t.length;return e(r)}function n(){var t=arguments,e=t.length-1;return function(){for(var r=e,n=t[e].apply(this,arguments);r--;)n=t[r].call(this,n);return n}}function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.apply(null,[].slice.call(arguments).reverse())}function o(t,e){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.apply(null,r)&&e.apply(null,r)}}function a(t,e){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.apply(null,r)||e.apply(null,r)}}function u(t,e){return function(r){return r[t].apply(r,e)}}function s(t){return function(e){for(var r=0;r<t.length;r++)if(t[r][0](e))return t[r][1](e)}}function c(t){if(re(t)&&t.length){var e=t.slice(0,-1),r=t.slice(-1);return!(e.filter(Dt(te)).length||r.filter(Dt(Zt)).length)}return Zt(t)}function f(t){return t}function l(){}function h(t,e,r,n,i){void 0===i&&(i=!1);var o=function(e){return t()[e].bind(r())},a=function(t){return function(){return e[t]=o(t),e[t].apply(null,arguments)}};return n=n||Object.keys(t()),n.reduce(function(t,e){return t[e]=i?a(e):o(e),t},e)}function p(t,e){return-1!==t.indexOf(e)}function d(t,e){var r=t.indexOf(e);return r>=0&&t.splice(r,1),t}function v(t,e){return t.push(e),e}function m(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=e.concat({}).reverse(),i=ve.apply(null,n);return ve({},i,g(t||{},Object.keys(i)))}function y(t,e){var r=[];for(var n in t.path){if(t.path[n]!==e.path[n])break;r.push(t.path[n])}return r}function g(t,e){var r={};for(var n in t)-1!==e.indexOf(n)&&(r[n]=t[n]);return r}function w(t,e){return Object.keys(t).filter(Dt(ge(e))).reduce(function(e,r){return e[r]=t[r],e},{})}function _(t,e){return b(t,At(e))}function $(t,e){var r=re(t),n=r?[]:{},i=r?function(t){return n.push(t)}:function(t,e){return n[e]=t};return de(t,function(t,r){e(t,r)&&i(t,r)}),n}function S(t,e){var r;return de(t,function(t,n){r||e(t,n)&&(r=t)}),r}function b(t,e){var r=re(t)?[]:{};return de(t,function(t,n){return r[n]=e(t,n)}),r}function R(t,e){return t.push(e),t}function E(t,e){return void 0===e&&(e="assert failure"),function(r){var n=t(r);if(!n)throw new Error(Zt(e)?e(r):e);return n}}function T(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return[];var r,n=t.reduce(function(t,e){return Math.min(e.length,t)},9007199254740991),i=[];for(r=0;r<n;r++)switch(t.length){case 1:i.push([t[0][r]]);break;case 2:i.push([t[0][r],t[1][r]]);break;case 3:i.push([t[0][r],t[1][r],t[2][r]]);break;case 4:i.push([t[0][r],t[1][r],t[2][r],t[3][r]]);break;default:i.push(t.map(function(t){return t[r]}))}return i}function C(t,e){var r,n;if(re(e)&&(r=e[0],n=e[1]),!te(r))throw new Error("invalid parameters to applyPairs");return t[r]=n,t}function P(t){return t.length&&t[t.length-1]||void 0}function k(t,e){return e&&Object.keys(e).forEach(function(t){return delete e[t]}),e||(e={}),ve(e,t)}function O(t,e,r){if(re(t))return t.forEach(e,r);Object.keys(t).forEach(function(r){return e(t[r],r)})}function x(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];if(r)for(var n=Object.keys(r),i=0;i<n.length;i++)t[n[i]]=r[n[i]]}return t}function j(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!==t&&e!==e)return!0;var r=typeof t;if(r!==typeof e||"object"!==r)return!1;var n=[t,e];if(Nt(re)(n))return I(t,e);if(Nt(ne)(n))return t.getTime()===e.getTime();if(Nt(ie)(n))return t.toString()===e.toString();if(Nt(Zt)(n))return!0;if([Zt,re,ne,ie].map(Ft).reduce(function(t,e){return t||!!e(n)},!1))return!1;var i,o={};for(i in t){if(!j(t[i],e[i]))return!1;o[i]=!0}for(i in e)if(!o[i])return!1;return!0}function I(t,e){return t.length===e.length&&T(t,e).reduce(function(t,e){return t&&j(e[0],e[1])},!0)}function V(t){if(!t)return"ui-view (defunct)";var e=t.creationContext?t.creationContext.name||"(root)":"(none)";return"[ui-view#"+t.id+" "+t.$type+":"+t.fqn+" ("+t.name+"@"+e+")]"}function A(e){return Xt(e)?t.Category[e]:t.Category[t.Category[e]]}function H(t,e){function r(t){for(var e=n,r=0;r<e.length;r++){var i=new Gt(e[r]);if(i&&i.matches(t.name)||!i&&e[r]===t.name)return!0}return!1}var n=te(e)?[e]:e;return!!(Zt(n)?n:r)(t)}function q(t,e,r){function n(t,n,i){void 0===i&&(i={});var a=new Qe(e,r,n,t,i);return o.push(a),function(){a._deregistered=!0,we(o)(a)}}var i=t._registeredHooks=t._registeredHooks||{},o=i[r.name]=[];return t[r.name]=n,n}function D(t){return void 0===t&&(t=!1),function(e,r){var n=t?-1:1,i=(e.node.state.path.length-r.node.state.path.length)*n;return 0!==i?i:r.hook.priority-e.hook.priority}}function N(t,e){function r(t){return re(t)?t:Qt(t)?[t]:[]}function n(t){switch(t.length){case 0:return;case 1:return"auto"===e?t[0]:t;default:return t}}function i(t,e){return function(i){if(re(i)&&0===i.length)return i;var o=r(i),a=b(o,t);return!0===e?0===$(a,function(t){return!t}).length:n(a)}}function o(t){return function(e,n){var i=r(e),o=r(n);if(i.length!==o.length)return!1;for(var a=0;a<i.length;a++)if(!t(i[a],o[a]))return!1;return!0}}var a=this;["encode","decode","equals","$normalize"].forEach(function(e){var r=t[e].bind(t),n="equals"===e?o:i;a[e]=n(r)}),ve(this,{dynamic:t.dynamic,name:t.name,pattern:t.pattern,inherit:t.inherit,is:i(t.is.bind(t),!0),$arrayMode:e})}function F(t){function e(){return t.value}return t=Xe(t)&&{value:t}||t,e.__cacheable=!0,ve(t,{$$fn:c(t.value)?t.value:e})}function U(e,r,n,i,o){if(e.type&&r&&"string"!==r.name)throw new Error("Param '"+i+"' has two type configurations.");if(e.type&&r&&"string"===r.name&&o.type(e.type))return o.type(e.type);if(r)return r;if(!e.type){var a=n===t.DefType.CONFIG?"any":n===t.DefType.PATH?"path":n===t.DefType.SEARCH?"query":"string";return o.type(a)}return e.type instanceof Ye?e.type:o.type(e.type)}function L(t,e,r){var n=t.squash;if(!e||!1===n)return!1;if(!Qt(n)||null==n)return r;if(!0===n||te(n))return n;throw new Error("Invalid squash policy: '"+n+"'. Valid policies: false, true, or arbitrary string")}function M(t,e,r,n){var i,o,a=[{from:"",to:r||e?void 0:""},{from:null,to:r||e?void 0:""}];return i=re(t.replace)?t.replace:[],te(n)&&i.push({from:n,to:void 0}),o=b(i,At("from")),$(a,function(t){return-1===o.indexOf(t.from)}).concat(i)}function G(t,e){return e.length<=t?e:e.substr(0,t-3)+"..."}function B(t,e){for(;e.length<t;)e+=" ";return e}function W(t){return t.replace(/^([A-Z])/,function(t){return t.toLowerCase()}).replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function z(t){var e=J(t),r=e.match(/^(function [^ ]+\([^)]*\))/),n=r?r[1]:e,i=t.name||"";return i&&n.match(/function \(/)?"function "+i+n.substr(9):n}function J(t){var e=re(t)?t.slice(-1)[0]:t;return e&&e.toString()||"undefined"}function Q(t){function e(t){if(ee(t)){if(-1!==r.indexOf(t))return"[circular ref]";r.push(t)}return vr(t)}var r=[];return JSON.stringify(t,function(t,r){return e(r)}).replace(/\\"/g,'"')}function K(t){var e=new RegExp("("+t+")","g");return function(t){return t.split(e).filter(f)}}function Y(t,e){return te(P(t))&&te(e)?t.slice(0,-1).concat(P(t)+e):R(t,e)}function Z(t){return t.name}function X(t){return t.self.$$state=function(){return t},t.self}function tt(t){return t.parent&&t.parent.data&&(t.data=t.self.data=ye(t.parent.data,t.data)),t.data}function et(t){return t.parent?t.parent.path.concat(t):[t]}function rt(t){var e=t.parent?ve({},t.parent.includes):{};return e[t.name]=!0,e}function nt(t){var e=function(t){var e=se.$injector;return t.$inject||e&&e.annotate(t,e.strictDi)||"deferred"},r=function(t){return!(!t.token||!t.resolveFn)},n=function(t){return!(!t.provide&&!t.token||!(t.useValue||t.useFactory||t.useExisting||t.useClass))},o=function(t){return!!(t&&t.val&&(te(t.val)||re(t.val)||Zt(t.val)))},a=function(t){return t.provide||t.token},u=s([[At("resolveFn"),function(t){return new ir(a(t),t.resolveFn,t.deps,t.policy)}],[At("useFactory"),function(t){return new ir(a(t),t.useFactory,t.deps||t.dependencies,t.policy)}],[At("useClass"),function(t){return new ir(a(t),function(){return new t.useClass},[],t.policy)}],[At("useValue"),function(t){return new ir(a(t),function(){return t.useValue},[],t.policy,t.useValue)}],[At("useExisting"),function(t){return new ir(a(t),f,[t.useExisting],t.policy)}]]),c=s([[i(At("val"),te),function(t){return new ir(t.token,f,[t.val],t.policy)}],[i(At("val"),re),function(t){return new ir(t.token,P(t.val),t.val.slice(0,-1),t.policy)}],[i(At("val"),Zt),function(t){return new ir(t.token,t.val,e(t.val),t.policy)}]]),l=s([[Ut(ir),function(t){return t}],[r,u],[n,u],[o,c],[Mt(!0),function(t){throw new Error("Invalid resolve value: "+Q(t))}]]),h=t.resolve;return(re(h)?h:function(t,e){return Object.keys(t||{}).map(function(r){return{token:r,val:t[r],deps:void 0,policy:e[r]}})}(h,t.resolvePolicy||{})).map(l)}function it(t,e){var r=["",""],n=t.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!e)return n;switch(e.squash){case!1:r=["(",")"+(e.isOptional?"?":"")];break;case!0:n=n.replace(/\/$/,""),r=["(?:/(",")|/)?"];break;default:r=["("+e.squash+"|",")?"]}return n+r[0]+e.type.pattern.source+r[1]}function ot(t,e,r,n){return"/"===n?t:e?n.slice(0,-1)+t:r?n.slice(1)+t:t}function at(t){if(!(Zt(t)||te(t)||Ut(We)(t)||We.isDef(t)))throw new Error("'handler' must be a string, function, TargetState, or have a state: 'newtarget' property");return Zt(t)?t:Mt(t)}function ut(t){t.addResolvable({token:Qr,deps:[],resolveFn:function(){return t.router},data:t.router},""),t.addResolvable({token:pr,deps:[],resolveFn:function(){return t},data:t},""),t.addResolvable({token:"$transition$",deps:[],resolveFn:function(){return t},data:t},""),t.addResolvable({token:"$stateParams",deps:[],resolveFn:function(){return t.params()},data:t.params()},""),t.entering().forEach(function(e){t.addResolvable({token:"$state$",deps:[],resolveFn:function(){return e},data:e},e)})}function st(t){return function(e,r){return(0,r.$$state()[t])(e,r)}}function ct(t,e){function r(e){return e&&Array.isArray(e.states)&&e.states.forEach(function(e){return t.router.stateRegistry.register(e)}),e}var n=e.$$state().lazyLoad,i=n._promise;if(!i){var o=function(t){return delete e.lazyLoad,delete e.$$state().lazyLoad,delete n._promise,t},a=function(t){return delete n._promise,se.$q.reject(t)};i=n._promise=se.$q.when(n(t,e)).then(r).then(o,a)}return i}function ft(t){var e=t._ignoredReason();if(e){Be.traceTransitionIgnored(t);var r=t.router.globals.transition;return"SameAsCurrent"===e&&r&&r.abort(),Ne.ignored().toPromise()}}function lt(t){if(!t.valid())throw new Error(t.error())}function ht(t){var e=function(t){return t||""},r=jn(t).map(e),n=r[0],i=r[1],o=In(n).map(e);return{path:o[0],search:o[1],hash:i,url:t}}function pt(t,e,r,n){return function(i){function o(t){t.dispose(a),t.dispose(u)}var a=i.locationService=new r(i),u=i.locationConfig=new n(i,e);return{name:t,service:a,configuration:u,dispose:o}}}function dt(t){return se.$injector=On,se.$q=Tn,{name:"vanilla.services",$q:Tn,$injector:On,dispose:function(){return null}}}function vt(){var t=null;return function(e,r){return t=t||se.$injector.get("$templateFactory"),[new ei(e,r,t)]}}function mt(t){if(!t.parent)return{};var e=["templateProvider","templateUrl","template","notify","async"],r=["controller","controllerProvider","controllerAs","resolveAs"],n=["component","bindings","componentProvider"],i=e.concat(r),o=n.concat(i);if(Qt(t.views)&&Xn(o,t))throw new Error("State '"+t.name+"' has a 'views' object. It cannot also have \"view properties\" at the state level.  Move the following properties into a view (in the 'views' object):  "+o.filter(function(e){return Qt(t[e])}).join(", "));var a={},u=t.views||{$default:g(t,o)};return de(u,function(e,r){if(r=r||"$default",te(e)&&(e={component:e}),e=ve({},e),Xn(n,e)&&Xn(i,e))throw new Error("Cannot combine: "+n.join("|")+" with: "+i.join("|")+" in stateview: '"+r+"@"+t.name+"'");e.resolveAs=e.resolveAs||"$resolve",e.$type="ng1",e.$context=t,e.$name=r;var o=Nr.normalizeUIViewTarget(e.$context,e.$name);e.$uiViewName=o.uiViewName,e.$uiViewContextAnchor=o.uiViewContextAnchor,a[r]=e}),a}function yt(t){var e=se.$injector.get(t+"Directive");if(!e||!e.length)throw new Error("Unable to find component named '"+t+"'");return e.map(ni).reduce(Ce,[])}function gt(t){function e(t,e,n,i,o,a){return r._runtimeServices(i,t,n,e),delete di.router,delete di.$get,di}di=this.router=new Qr,di.stateProvider=new oi(di.stateRegistry,di.stateService),di.stateRegistry.decorator("views",mt),di.stateRegistry.decorator("onExit",ai("onExit")),di.stateRegistry.decorator("onRetain",ai("onRetain")),di.stateRegistry.decorator("onEnter",ai("onEnter")),di.viewService._pluginapi._viewConfigFactory("ng1",vt());var r=di.locationService=di.locationConfig=new ui(t);return ui.monkeyPatchPathParameterType(di),di.router=di,di.$get=e,e.$inject=["$location","$browser","$sniffer","$rootScope","$http","$templateCache"],di}function wt(t,e,r){se.$injector=t,se.$q=e,r.stateRegistry.get().map(function(t){return t.$$state().resolvables}).reduce(Ce,[]).filter(function(t){return"deferred"===t.deps}).forEach(function(e){return e.deps=t.annotate(e.resolveFn,t.strictDi)})}function _t(t){t.$watch(function(){Be.approximateDigests++})}function $t(t){var e,r=t.match(/^\s*({[^}]*})\s*$/);if(r&&(t="("+r[1]+")"),!(e=t.replace(/\n/g," ").match(/^\s*([^(]*?)\s*(\((.*)\))?\s*$/))||4!==e.length)throw new Error("Invalid state ref '"+t+"'");return{state:e[1]||null,paramExpr:e[3]||null}}function St(t){var e=t.parent().inheritedData("$uiView"),r=qt("$cfg.path")(e);return r?P(r).state.name:void 0}function bt(t,e,r){var n=r.uiState||t.current.name,i=ve(Tt(e,t),r.uiStateOpts||{}),o=t.href(n,r.uiStateParams,i);return{uiState:n,uiStateParams:r.uiStateParams,uiStateOpts:i,href:o}}function Rt(t){var e="[object SVGAnimatedString]"===Object.prototype.toString.call(t.prop("href")),r="FORM"===t[0].nodeName;return{attr:r?"action":e?"xlink:href":"href",isAnchor:"A"===t.prop("tagName").toUpperCase(),clickable:!r}}function Et(t,e,r,n,i){return function(o){var a=o.which||o.button,u=i();if(!(a>1||o.ctrlKey||o.metaKey||o.shiftKey||t.attr("target"))){var s=r(function(){e.go(u.uiState,u.uiStateParams,u.uiStateOpts)});o.preventDefault();var c=n.isAnchor&&!u.href?1:0;o.preventDefault=function(){c--<=0&&r.cancel(s)}}}}function Tt(t,e){return{relative:St(t)||e.$current,inherit:!0,source:"sref"}}function Ct(t,e,r,n){var i;n&&(i=n.events),re(i)||(i=["click"]);for(var o=t.on?"on":"bind",a=0,u=i;a<u.length;a++){var s=u[a];t[o](s,r)}e.$on("$destroy",function(){for(var e=t.off?"off":"unbind",n=0,o=i;n<o.length;n++){var a=o[n];t[e](a,r)}})}function Pt(t){var e=function(e,r,n){return t.is(e,r,n)};return e.$stateful=!0,e}function kt(t){var e=function(e,r,n){return t.includes(e,r,n)};return e.$stateful=!0,e}function Ot(t,r,n,i,o,a){var u=qt("viewDecl.controllerAs"),s=qt("viewDecl.resolveAs");return{restrict:"ECA",priority:-400,compile:function(i){var a=i.html();return i.empty(),function(i,c){var f=c.data("$uiView");if(!f)return c.html(a),void t(c.contents())(i);var l=f.$cfg||{viewDecl:{},getTemplate:e.noop},h=l.path&&new fr(l.path);c.html(l.getTemplate(c,h)||a),Be.traceUIViewFill(f.$uiView,c.html());var p=t(c.contents()),d=l.controller,v=u(l),m=s(l),y=h&&wi(h);if(i[m]=y,d){var g=r(d,ve({},y,{$scope:i,$element:c}));v&&(i[v]=g,i[v][m]=y),c.data("$ngControllerController",g),c.children().data("$ngControllerController",g),xt(o,n,g,i,l)}if(te(l.viewDecl.component))var w=l.viewDecl.component,_=W(w),$=new RegExp("^(x-|data-)?"+_+"$","i"),S=function(){var t=[].slice.call(c[0].children).filter(function(t){return t&&t.tagName&&$.exec(t.tagName)});return t&&Vt.element(t).data("$"+w+"Controller")},b=i.$watch(S,function(t){t&&(xt(o,n,t,i,l),b())});p(i)}}}}function xt(t,e,r,n,i){!Zt(r.$onInit)||i.viewDecl.component&&bi||r.$onInit();var o=P(i.path).state.self,a={bind:r};if(Zt(r.uiOnParamsChanged)){var u=new fr(i.path),s=u.getResolvable("$transition$").data,c=function(t){if(t!==s&&-1===t.exiting().indexOf(o)){var e=t.params("to"),n=t.params("from"),i=t.treeChanges().to.map(function(t){return t.paramSchema}).reduce(Ce,[]),a=t.treeChanges().from.map(function(t){return t.paramSchema}).reduce(Ce,[]),u=i.filter(function(t){var r=a.indexOf(t);return-1===r||!a[r].type.equals(e[t.id],n[t.id])});if(u.length){var c=u.map(function(t){return t.id}),f=$(e,function(t,e){return-1!==c.indexOf(e)});r.uiOnParamsChanged(f,t)}}};n.$on("$destroy",e.onSuccess({},c,a))}if(Zt(r.uiCanExit)){var f=Ri++,l=function(t){return!!t&&(t._uiCanExitIds&&!0===t._uiCanExitIds[f]||l(t.redirectedFrom()))},h=function(e){var n,i=e._uiCanExitIds=e._uiCanExitIds||{};return l(e)||(n=t.when(r.uiCanExit(e)),n.then(function(t){return i[f]=!1!==t})),n},p={exiting:o.name};n.$on("$destroy",e.onBefore(p,h,a))}}function jt(){var t=!1;this.useAnchorScroll=function(){t=!0},this.$get=["$anchorScroll","$timeout",function(e,r){return t?e:function(t){return r(function(){t[0].scrollIntoView()},0,!1)}}]}var It=angular,Vt=e&&e.module?e:It,At=function(t){return function(e){return e&&e[t]}},Ht=r(function(t,e,r){return r&&r[t]===e}),qt=function(t){return i.apply(null,t.split(".").map(At))},Dt=function(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return!t.apply(null,e)}},Nt=function(t){return function(e){return e.reduce(function(e,r){return e&&!!t(r)},!0)}},Ft=function(t){return function(e){return e.reduce(function(e,r){return e||!!t(r)},!1)}},Ut=function(t){return function(e){return null!=e&&e.constructor===t||e instanceof t}},Lt=function(t){return function(e){return t===e}},Mt=function(t){return function(){return t}},Gt=function(){function t(t){this.text=t,this.glob=t.split(".");var e=this.text.split(".").map(function(t){return"**"===t?"(?:|(?:\\.[^.]*)*)":"*"===t?"\\.[^.]*":"\\."+t}).join("");this.regexp=new RegExp("^"+e+"$")}return t.prototype.matches=function(t){return this.regexp.test("."+t)},t.is=function(t){return!!/[!,*]+/.exec(t)},t.fromString=function(e){return t.is(e)?new t(e):null},t}(),Bt=function(){function t(e){return t.create(e||{})}return t.create=function(e){e=t.isStateClass(e)?new e:e;var r=ye(ye(e,t.prototype));return e.$$state=function(){return r},r.self=e,r.__stateObjectCache={nameGlob:Gt.fromString(r.name)},r},t.prototype.is=function(t){return this===t||this.self===t||this.fqn()===t},t.prototype.fqn=function(){if(!(this.parent&&this.parent instanceof this.constructor))return this.name;var t=this.parent.fqn();return t?t+"."+this.name:this.name},t.prototype.root=function(){return this.parent&&this.parent.root()||this},t.prototype.parameters=function(t){return t=m(t,{inherit:!0,matchingKeys:null}),(t.inherit&&this.parent&&this.parent.parameters()||[]).concat(Re(this.params)).filter(function(e){return!t.matchingKeys||t.matchingKeys.hasOwnProperty(e.id)})},t.prototype.parameter=function(t,e){return void 0===e&&(e={}),this.url&&this.url.parameter(t,e)||S(Re(this.params),Ht("id",t))||e.inherit&&this.parent&&this.parent.parameter(t)},t.prototype.toString=function(){return this.fqn()},t.isStateClass=function(t){return Zt(t)&&!0===t.__uiRouterState},t.isState=function(t){return ee(t.__stateObjectCache)},t}(),Wt=Object.prototype.toString,zt=function(t){return function(e){return typeof e===t}},Jt=zt("undefined"),Qt=Dt(Jt),Kt=function(t){return null===t},Yt=a(Kt,Jt),Zt=zt("function"),Xt=zt("number"),te=zt("string"),ee=function(t){return null!==t&&"object"==typeof t},re=Array.isArray,ne=function(t){return"[object Date]"===Wt.call(t)},ie=function(t){return"[object RegExp]"===Wt.call(t)},oe=Bt.isState,ae=o(ee,i(At("then"),Zt)),ue=function(t){return function(){throw new Error(t+"(): No coreservices implementation for UI-Router is loaded.")}},se={$q:void 0,$injector:void 0},ce="undefined"==typeof window?{}:window,fe=ce.angular||{},le=fe.fromJson||JSON.parse.bind(JSON),he=fe.toJson||JSON.stringify.bind(JSON),pe=fe.copy||k,de=fe.forEach||O,ve=Object.assign||x,me=fe.equals||j,ye=function(t,e){return ve(Object.create(t),e)},ge=r(p),we=r(d),_e=r(v),$e=function(t){return t.slice().forEach(function(e){"function"==typeof e&&e(),we(t,e)})},Se=function(t,e){return ve(t,e)},be=b,Re=function(t){return Object.keys(t).map(function(e){return t[e]})},Ee=function(t,e){return t&&e},Te=function(t,e){return t||e},Ce=function(t,e){return t.concat(e)},Pe=function(t,e){return re(e)?t.concat(e.reduce(Pe,[])):R(t,e)},ke=function(t,e){return ge(t,e)?t:R(t,e)},Oe=function(t){return t.reduce(Ce,[])},xe=function(t){return t.reduce(Pe,[])},je=E,Ie=E,Ve=function(t){return Object.keys(t).map(function(e){return[e,t[e]]})},Ae=function(t){return t.catch(function(t){return 0})&&t},He=function(t){return Ae(se.$q.reject(t))},qe=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e=null),this._items=t,this._limit=e}return t.prototype.enqueue=function(t){var e=this._items;return e.push(t),this._limit&&e.length>this._limit&&e.shift(),t},t.prototype.dequeue=function(){if(this.size())return this._items.splice(0,1)[0]},t.prototype.clear=function(){var t=this._items;return this._items=[],t},t.prototype.size=function(){return this._items.length},t.prototype.remove=function(t){var e=this._items.indexOf(t);return e>-1&&this._items.splice(e,1)[0]},t.prototype.peekTail=function(){return this._items[this._items.length-1]},t.prototype.peekHead=function(){if(this.size())return this._items[0]},t}();!function(t){t[t.SUPERSEDED=2]="SUPERSEDED",t[t.ABORTED=3]="ABORTED",t[t.INVALID=4]="INVALID",t[t.IGNORED=5]="IGNORED",t[t.ERROR=6]="ERROR"}(t.RejectType||(t.RejectType={}));var De=0,Ne=function(){function e(t,e,r){this.$id=De++,this.type=t,this.message=e,this.detail=r}return e.prototype.toString=function(){var t=function(t){return t&&t.toString!==Object.prototype.toString?t.toString():Q(t)}(this.detail),e=this;return"Transition Rejection($id: "+e.$id+" type: "+e.type+", message: "+e.message+", detail: "+t+")"},e.prototype.toPromise=function(){return ve(He(this),{_transitionRejection:this})},e.isRejectionPromise=function(t){return t&&"function"==typeof t.then&&Ut(e)(t._transitionRejection)},e.superseded=function(r,n){var i=new e(t.RejectType.SUPERSEDED,"The transition has been superseded by a different transition",r);return n&&n.redirected&&(i.redirected=!0),i},e.redirected=function(t){return e.superseded(t,{redirected:!0})},e.invalid=function(r){return new e(t.RejectType.INVALID,"This transition is invalid",r)},e.ignored=function(r){return new e(t.RejectType.IGNORED,"The transition was ignored",r)},e.aborted=function(r){return new e(t.RejectType.ABORTED,"The transition has been aborted",r)},e.errored=function(r){return new e(t.RejectType.ERROR,"The transition errored",r)},e.normalize=function(t){return Ut(e)(t)?t:e.errored(t)},e}(),Fe=function(t){var e=t.viewDecl,r=e.$context.name||"(root)";return"[View#"+t.$id+" from '"+r+"' state]: target ui-view: '"+e.$uiViewName+"@"+e.$uiViewContextAnchor+"'"};!function(t){t[t.RESOLVE=0]="RESOLVE",t[t.TRANSITION=1]="TRANSITION",t[t.HOOK=2]="HOOK",t[t.UIVIEW=3]="UIVIEW",t[t.VIEWCONFIG=4]="VIEWCONFIG"}(t.Category||(t.Category={}));var Ue=qt("$id"),Le=qt("router.$id"),Me=function(t){return"Transition #"+Ue(t)+"-"+Le(t)},Ge=function(){function e(){this._enabled={},this.approximateDigests=0}return e.prototype._set=function(e,r){var n=this;r.length||(r=Object.keys(t.Category).map(function(t){return parseInt(t,10)}).filter(function(t){return!isNaN(t)}).map(function(e){return t.Category[e]})),r.map(A).forEach(function(t){return n._enabled[t]=e})},e.prototype.enable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._set(!0,t)},e.prototype.disable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._set(!1,t)},e.prototype.enabled=function(t){return!!this._enabled[A(t)]},e.prototype.traceTransitionStart=function(e){this.enabled(t.Category.TRANSITION)&&console.log(Me(e)+": Started  -> "+Q(e))},e.prototype.traceTransitionIgnored=function(e){this.enabled(t.Category.TRANSITION)&&console.log(Me(e)+": Ignored  <> "+Q(e))},e.prototype.traceHookInvocation=function(e,r,n){if(this.enabled(t.Category.HOOK)){var i=qt("traceData.hookType")(n)||"internal",o=qt("traceData.context.state.name")(n)||qt("traceData.context")(n)||"unknown",a=z(e.registeredHook.callback);console.log(Me(r)+":   Hook -> "+i+" context: "+o+", "+G(200,a))}},e.prototype.traceHookResult=function(e,r,n){this.enabled(t.Category.HOOK)&&console.log(Me(r)+":   <- Hook returned: "+G(200,Q(e)))},e.prototype.traceResolvePath=function(e,r,n){this.enabled(t.Category.RESOLVE)&&console.log(Me(n)+":         Resolving "+e+" ("+r+")")},e.prototype.traceResolvableResolved=function(e,r){this.enabled(t.Category.RESOLVE)&&console.log(Me(r)+":               <- Resolved  "+e+" to: "+G(200,Q(e.data)))},e.prototype.traceError=function(e,r){this.enabled(t.Category.TRANSITION)&&console.log(Me(r)+": <- Rejected "+Q(r)+", reason: "+e)},e.prototype.traceSuccess=function(e,r){this.enabled(t.Category.TRANSITION)&&console.log(Me(r)+": <- Success  "+Q(r)+", final state: "+e.name)},e.prototype.traceUIViewEvent=function(e,r,n){void 0===n&&(n=""),this.enabled(t.Category.UIVIEW)&&console.log("ui-view: "+B(30,e)+" "+V(r)+n)},e.prototype.traceUIViewConfigUpdated=function(e,r){this.enabled(t.Category.UIVIEW)&&this.traceUIViewEvent("Updating",e," with ViewConfig from context='"+r+"'")},e.prototype.traceUIViewFill=function(e,r){this.enabled(t.Category.UIVIEW)&&this.traceUIViewEvent("Fill",e," with: "+G(200,r))},e.prototype.traceViewSync=function(e){if(this.enabled(t.Category.VIEWCONFIG)){var r=e.map(function(t){var e=t[0],r=t[1];return{"ui-view fqn":e.$type+":"+e.fqn,"state: view name":r&&r.viewDecl.$context.name+": "+r.viewDecl.$name+" ("+r.viewDecl.$type+")"}}).sort(function(t,e){return t["ui-view fqn"].localeCompare(e["ui-view fqn"])});console.table(r)}},e.prototype.traceViewServiceEvent=function(e,r){this.enabled(t.Category.VIEWCONFIG)&&console.log("VIEWCONFIG: "+e+" "+Fe(r))},e.prototype.traceViewServiceUIViewEvent=function(e,r){this.enabled(t.Category.VIEWCONFIG)&&console.log("VIEWCONFIG: "+e+" "+V(r))},e}(),Be=new Ge;!function(t){t[t.CREATE=0]="CREATE",t[t.BEFORE=1]="BEFORE",t[t.RUN=2]="RUN",t[t.SUCCESS=3]="SUCCESS",t[t.ERROR=4]="ERROR"}(t.TransitionHookPhase||(t.TransitionHookPhase={})),function(t){t[t.TRANSITION=0]="TRANSITION",t[t.STATE=1]="STATE"}(t.TransitionHookScope||(t.TransitionHookScope={}));var We=function(){function t(t,e,r,n){void 0===n&&(n={}),this._identifier=t,this._definition=e,this._options=n,this._params=r||{}}return t.prototype.name=function(){return this._definition&&this._definition.name||this._identifier},t.prototype.identifier=function(){return this._identifier},t.prototype.params=function(){return this._params},t.prototype.$state=function(){return this._definition},t.prototype.state=function(){return this._definition&&this._definition.self},t.prototype.options=function(){return this._options},t.prototype.exists=function(){return!(!this._definition||!this._definition.self)},t.prototype.valid=function(){return!this.error()},t.prototype.error=function(){var t=this.options().relative;if(!this._definition&&t){var e=t.name?t.name:t;return"Could not resolve '"+this.name()+"' from state '"+e+"'"}return this._definition?this._definition.self?void 0:"State '"+this.name()+"' has an invalid definition":"No such state '"+this.name()+"'"},t.prototype.toString=function(){return"'"+this.name()+"'"+he(this.params())},t.isDef=function(t){return t&&t.state&&(te(t.state)||te(t.state.name))},t}(),ze={current:l,transition:null,traceData:{},bind:null},Je=function(){function e(e,r,n,i){var o=this;this.transition=e,this.stateContext=r,this.registeredHook=n,this.options=i,this.isSuperseded=function(){return o.type.hookPhase===t.TransitionHookPhase.RUN&&!o.options.transition.isActive()},this.options=m(i,ze),this.type=n.eventType}return e.prototype.logError=function(t){this.transition.router.stateService.defaultErrorHandler()(t)},e.prototype.invokeHook=function(){var t=this,e=this.registeredHook;if(!e._deregistered){var r=this.getNotCurrentRejection();if(r)return r;var n=this.options;Be.traceHookInvocation(this,this.transition,n);var i=function(t){return Ne.normalize(t).toPromise()},o=function(r){return e.eventType.getErrorHandler(t)(r)},a=function(r){return e.eventType.getResultHandler(t)(r)};try{var u=function(){return e.callback.call(n.bind,t.transition,t.stateContext)}();return!this.type.synchronous&&ae(u)?u.catch(i).then(a,o):a(u)}catch(t){return o(Ne.normalize(t))}}},e.prototype.handleHookResult=function(t){var e=this,r=this.getNotCurrentRejection();return r||(ae(t)?t.then(function(t){return e.handleHookResult(t)}):(Be.traceHookResult(t,this.transition,this.options),!1===t?Ne.aborted("Hook aborted transition").toPromise():Ut(We)(t)?Ne.redirected(t).toPromise():void 0))},e.prototype.getNotCurrentRejection=function(){var t=this.transition.router;return t._disposed?Ne.aborted("UIRouter instance #"+t.$id+" has been stopped (disposed)").toPromise():this.transition._aborted?Ne.aborted().toPromise():this.isSuperseded()?Ne.superseded(this.options.current()).toPromise():void 0},e.prototype.toString=function(){var t=this,e=t.options,r=t.registeredHook;return(qt("traceData.hookType")(e)||"internal")+" context: "+(qt("traceData.context.state.name")(e)||qt("traceData.context")(e)||"unknown")+", "+G(200,J(r.callback))},e.chain=function(t,e){var r=function(t,e){return t.then(function(){return e.invokeHook()})};return t.reduce(r,e||se.$q.when())},e.invokeHooks=function(t,r){for(var n=0;n<t.length;n++){var i=t[n].invokeHook();if(ae(i)){var o=t.slice(n+1);return e.chain(o,i).then(r)}}return r()},e.runAllHooks=function(t){t.forEach(function(t){return t.invokeHook()})},e.HANDLE_RESULT=function(t){return function(e){return t.handleHookResult(e)}},e.LOG_REJECTED_RESULT=function(t){return function(e){ae(e)&&e.catch(function(e){return t.logError(Ne.normalize(e))})}},e.LOG_ERROR=function(t){return function(e){return t.logError(e)}},e.REJECT_ERROR=function(t){return function(t){return He(t)}},e.THROW_ERROR=function(t){return function(t){throw t}},e}(),Qe=function(){function e(t,e,r,n,i){void 0===i&&(i={}),this.tranSvc=t,this.eventType=e,this.callback=r,this.matchCriteria=n,this.priority=i.priority||0,this.bind=i.bind||null,this._deregistered=!1}return e.prototype._matchingNodes=function(t,e){if(!0===e)return t;var r=t.filter(function(t){return H(t.state,e)});return r.length?r:null},e.prototype._getDefaultMatchCriteria=function(){return b(this.tranSvc._pluginapi._getPathTypes(),function(){return!0})},e.prototype._getMatchingNodes=function(e){var r=this,n=ve(this._getDefaultMatchCriteria(),this.matchCriteria);return Re(this.tranSvc._pluginapi._getPathTypes()).reduce(function(i,o){var a=o.scope===t.TransitionHookScope.STATE,u=e[o.name]||[],s=a?u:[P(u)];return i[o.name]=r._matchingNodes(s,n[o.name]),i},{})},e.prototype.matches=function(t){var e=this._getMatchingNodes(t);return Re(e).every(f)?e:null},e}(),Ke=function(){function e(t){this.transition=t}return e.prototype.buildHooksForPhase=function(t){var e=this;return this.transition.router.transitionService._pluginapi._getEvents(t).map(function(t){return e.buildHooks(t)}).reduce(Ce,[]).filter(f)},e.prototype.buildHooks=function(e){var r=this.transition,n=r.treeChanges(),i=this.getMatchingHooks(e,n);if(!i)return[];var o={transition:r,current:r.options().current},a=function(i){return i.matches(n)[e.criteriaMatchPath.name].map(function(n){var a=ve({bind:i.bind,traceData:{hookType:e.name,context:n}},o),u=e.criteriaMatchPath.scope===t.TransitionHookScope.STATE?n.state.self:null,s=new Je(r,u,i,a);return{hook:i,node:n,transitionHook:s}})};return i.map(a).reduce(Ce,[]).sort(D(e.reverseSort)).map(function(t){return t.transitionHook})},e.prototype.getMatchingHooks=function(e,r){
var n=e.hookPhase===t.TransitionHookPhase.CREATE,i=this.transition.router.transitionService;return(n?[i]:[this.transition,i]).map(function(t){return t.getHooks(e.name)}).filter(je(re,"broken event named: "+e.name)).reduce(Ce,[]).filter(function(t){return t.matches(r)})},e}(),Ye=function(){function t(t){this.pattern=/.*/,this.inherit=!0,ve(this,t)}return t.prototype.is=function(t,e){return!0},t.prototype.encode=function(t,e){return t},t.prototype.decode=function(t,e){return t},t.prototype.equals=function(t,e){return t==e},t.prototype.$subPattern=function(){var t=this.pattern.toString();return t.substr(1,t.length-2)},t.prototype.toString=function(){return"{ParamType:"+this.name+"}"},t.prototype.$normalize=function(t){return this.is(t)?t:this.decode(t)},t.prototype.$asArray=function(t,e){if(!t)return this;if("auto"===t&&!e)throw new Error("'auto' array mode is for query parameters only");return new N(this,t)},t}(),Ze=Object.prototype.hasOwnProperty,Xe=function(t){return 0===["value","type","squash","array","dynamic"].filter(Ze.bind(t||{})).length};!function(t){t[t.PATH=0]="PATH",t[t.SEARCH=1]="SEARCH",t[t.CONFIG=2]="CONFIG"}(t.DefType||(t.DefType={}));var tr=function(){function e(e,r,n,i,o){n=F(n),r=U(n,r,i,e,o.paramTypes);var a=function(){var r={array:i===t.DefType.SEARCH&&"auto"},o=e.match(/\[\]$/)?{array:!0}:{};return ve(r,o,n).array}();r=a?r.$asArray(a,i===t.DefType.SEARCH):r;var u=void 0!==n.value||i===t.DefType.SEARCH,s=Qt(n.dynamic)?!!n.dynamic:!!r.dynamic,c=Qt(n.raw)?!!n.raw:!!r.raw,f=L(n,u,o.defaultSquashPolicy()),l=M(n,a,u,f),h=Qt(n.inherit)?!!n.inherit:!!r.inherit;ve(this,{id:e,type:r,location:i,isOptional:u,dynamic:s,raw:c,squash:f,replace:l,inherit:h,array:a,config:n})}return e.prototype.isDefaultValue=function(t){return this.isOptional&&this.type.equals(this.value(),t)},e.prototype.value=function(t){var e=this;return t=function(t){for(var r=0,n=e.replace;r<n.length;r++){var i=n[r];if(i.from===t)return i.to}return t}(t),Jt(t)?function(){if(e._defaultValueCache)return e._defaultValueCache.defaultValue;if(!se.$injector)throw new Error("Injectable functions cannot be called at configuration time");var t=se.$injector.invoke(e.config.$$fn);if(null!==t&&void 0!==t&&!e.type.is(t))throw new Error("Default value ("+t+") for parameter '"+e.id+"' is not an instance of ParamType ("+e.type.name+")");return e.config.$$fn.__cacheable&&(e._defaultValueCache={defaultValue:t}),t}():this.type.$normalize(t)},e.prototype.isSearch=function(){return this.location===t.DefType.SEARCH},e.prototype.validates=function(t){if((Jt(t)||null===t)&&this.isOptional)return!0;var e=this.type.$normalize(t);if(!this.type.is(e))return!1;var r=this.type.encode(e);return!(te(r)&&!this.type.pattern.exec(r))},e.prototype.toString=function(){return"{Param:"+this.id+" "+this.type+" squash: '"+this.squash+"' optional: "+this.isOptional+"}"},e.values=function(t,e){void 0===e&&(e={});for(var r={},n=0,i=t;n<i.length;n++){var o=i[n];r[o.id]=o.value(e[o.id])}return r},e.changed=function(t,e,r){return void 0===e&&(e={}),void 0===r&&(r={}),t.filter(function(t){return!t.type.equals(e[t.id],r[t.id])})},e.equals=function(t,r,n){return void 0===r&&(r={}),void 0===n&&(n={}),0===e.changed(t,r,n).length},e.validates=function(t,e){return void 0===e&&(e={}),t.map(function(t){return t.validates(e[t.id])}).reduce(Ee,!0)},e}(),er=function(){function t(e){if(e instanceof t){var r=e;this.state=r.state,this.paramSchema=r.paramSchema.slice(),this.paramValues=ve({},r.paramValues),this.resolvables=r.resolvables.slice(),this.views=r.views&&r.views.slice()}else{var n=e;this.state=n,this.paramSchema=n.parameters({inherit:!1}),this.paramValues={},this.resolvables=n.resolvables.map(function(t){return t.clone()})}}return t.prototype.applyRawParams=function(t){var e=function(e){return[e.id,e.value(t[e.id])]};return this.paramValues=this.paramSchema.reduce(function(t,r){return C(t,e(r))},{}),this},t.prototype.parameter=function(t){return S(this.paramSchema,Ht("id",t))},t.prototype.equals=function(t,e){var r=this.diff(t,e);return r&&0===r.length},t.prototype.diff=function(t,e){if(this.state!==t.state)return!1;var r=e?e(this):this.paramSchema;return tr.changed(r,this.paramValues,t.paramValues)},t.clone=function(e){return new t(e)},t}(),rr=function(){function t(){}return t.makeTargetState=function(t){var e=P(t).state;return new We(e,e,t.map(At("paramValues")).reduce(Se,{}))},t.buildPath=function(t){var e=t.params();return t.$state().path.map(function(t){return new er(t).applyRawParams(e)})},t.buildToPath=function(e,r){var n=t.buildPath(r);return r.options().inherit?t.inheritParams(e,n,Object.keys(r.params())):n},t.applyViewConfigs=function(e,r,n){r.filter(function(t){return ge(n,t.state)}).forEach(function(n){var i=Re(n.state.views||{}),o=t.subPath(r,function(t){return t===n}),a=i.map(function(t){return e.createViewConfig(o,t)});n.views=a.reduce(Ce,[])})},t.inheritParams=function(t,e,r){function n(t,e){var r=S(t,Ht("state",e));return ve({},r&&r.paramValues)}function i(e){var i=ve({},e&&e.paramValues),a=g(i,r);i=w(i,r);var u=w(n(t,e.state)||{},o),s=ve(i,u,a);return new er(e.state).applyRawParams(s)}void 0===r&&(r=[]);var o=t.map(function(t){return t.paramSchema}).reduce(Ce,[]).filter(function(t){return!t.inherit}).map(At("id"));return e.map(i)},t.treeChanges=function(e,r,n){function i(t,e){var n=er.clone(t);return n.paramValues=r[e].paramValues,n}for(var o=0,a=Math.min(e.length,r.length);o<a&&e[o].state!==n&&function(e,r){return e.equals(r,t.nonDynamicParams)}(e[o],r[o]);)o++;var u,s,c,f,l;u=e,s=u.slice(0,o),c=u.slice(o);var h=s.map(i);return f=r.slice(o),l=h.concat(f),{from:u,to:l,retained:s,exiting:c,entering:f}},t.matching=function(t,e,r){var n=!1;return T(t,e).reduce(function(t,e){var i=e[0],o=e[1];return n=n||!i.equals(o,r),n?t:t.concat(i)},[])},t.equals=function(e,r,n){return e.length===r.length&&t.matching(e,r,n).length===e.length},t.subPath=function(t,e){var r=S(t,e),n=t.indexOf(r);return-1===n?void 0:t.slice(0,n+1)},t.nonDynamicParams=function(t){return t.state.parameters({inherit:!1}).filter(function(t){return!t.dynamic})},t.paramValues=function(t){return t.reduce(function(t,e){return ve(t,e.paramValues)},{})},t}(),nr={when:"LAZY",async:"WAIT"},ir=function(){function t(e,r,n,i,o){if(this.resolved=!1,this.promise=void 0,e instanceof t)ve(this,e);else if(Zt(r)){if(Yt(e))throw new Error("new Resolvable(): token argument is required");if(!Zt(r))throw new Error("new Resolvable(): resolveFn argument must be a function");this.token=e,this.policy=i,this.resolveFn=r,this.deps=n||[],this.data=o,this.resolved=void 0!==o,this.promise=this.resolved?se.$q.when(this.data):void 0}else if(ee(e)&&e.token&&Zt(e.resolveFn)){var a=e;return new t(a.token,a.resolveFn,a.deps,a.policy,a.data)}}return t.prototype.getPolicy=function(t){var e=this.policy||{},r=t&&t.resolvePolicy||{};return{when:e.when||r.when||nr.when,async:e.async||r.async||nr.async}},t.prototype.resolve=function(t,e){var r=this,n=se.$q,i=function(){return n.all(t.getDependencies(r).map(function(r){return r.get(t,e)}))},o=function(t){return r.resolveFn.apply(null,t)},a=function(t){var e=t.cache(1);return e.take(1).toPromise().then(function(){return e})},u=t.findNode(this),s=u&&u.state,c="RXWAIT"===this.getPolicy(s).async?a:f,l=function(t){return r.data=t,r.resolved=!0,Be.traceResolvableResolved(r,e),r.data};return this.promise=n.when().then(i).then(o).then(c).then(l)},t.prototype.get=function(t,e){return this.promise||this.resolve(t,e)},t.prototype.toString=function(){return"Resolvable(token: "+Q(this.token)+", requires: ["+this.deps.map(Q)+"])"},t.prototype.clone=function(){return new t(this)},t.fromData=function(e,r){return new t(e,function(){return r},null,null,r)},t}(),or={when:{LAZY:"LAZY",EAGER:"EAGER"},async:{WAIT:"WAIT",NOWAIT:"NOWAIT",RXWAIT:"RXWAIT"}},ar=or.when,ur=[ar.EAGER,ar.LAZY],sr=[ar.EAGER],cr="Native Injector",fr=function(){function t(t){this._path=t}return t.prototype.getTokens=function(){return this._path.reduce(function(t,e){return t.concat(e.resolvables.map(function(t){return t.token}))},[]).reduce(ke,[])},t.prototype.getResolvable=function(t){return P(this._path.map(function(t){return t.resolvables}).reduce(Ce,[]).filter(function(e){return e.token===t}))},t.prototype.getPolicy=function(t){var e=this.findNode(t);return t.getPolicy(e.state)},t.prototype.subContext=function(e){return new t(rr.subPath(this._path,function(t){return t.state===e}))},t.prototype.addResolvables=function(t,e){var r=S(this._path,Ht("state",e)),n=t.map(function(t){return t.token});r.resolvables=r.resolvables.filter(function(t){return-1===n.indexOf(t.token)}).concat(t)},t.prototype.resolvePath=function(t,e){var r=this;void 0===t&&(t="LAZY");var n=ge(ur,t)?t:"LAZY",i=n===or.when.EAGER?sr:ur;Be.traceResolvePath(this._path,t,e);var o=function(t,e){return function(n){return ge(t,r.getPolicy(n)[e])}},a=this._path.reduce(function(t,n){var a=n.resolvables.filter(o(i,"when")),u=a.filter(o(["NOWAIT"],"async")),s=a.filter(Dt(o(["NOWAIT"],"async"))),c=r.subContext(n.state),f=function(t){return t.get(c,e).then(function(e){return{token:t.token,value:e}})};return u.forEach(f),t.concat(s.map(f))},[]);return se.$q.all(a)},t.prototype.injector=function(){return this._injector||(this._injector=new lr(this))},t.prototype.findNode=function(t){return S(this._path,function(e){return ge(e.resolvables,t)})},t.prototype.getDependencies=function(t){var e=this,r=this.findNode(t),n=rr.subPath(this._path,function(t){return t===r})||this._path,i=n.reduce(function(t,e){return t.concat(e.resolvables)},[]).filter(function(e){return e!==t}),o=function(t){var r=i.filter(function(e){return e.token===t});if(r.length)return P(r);var n=e.injector().getNative(t);if(!n)throw new Error("Could not find Dependency Injection token: "+Q(t));return new ir(t,function(){return n},[],n)};return t.deps.map(o)},t}(),lr=function(){function t(t){this.context=t,this.native=this.get(cr)||se.$injector}return t.prototype.get=function(t){var e=this.context.getResolvable(t);if(e){if("NOWAIT"===this.context.getPolicy(e).async)return e.get(this.context);if(!e.resolved)throw new Error("Resolvable async .get() not complete:"+Q(e.token));return e.data}return this.native&&this.native.get(t)},t.prototype.getAsync=function(t){var e=this.context.getResolvable(t);return e?e.get(this.context):se.$q.when(this.native.get(t))},t.prototype.getNative=function(t){return this.native&&this.native.get(t)},t}(),hr=At("self"),pr=function(){function e(e,r,n){var i=this;if(this._deferred=se.$q.defer(),this.promise=this._deferred.promise,this._registeredHooks={},this._hookBuilder=new Ke(this),this.isActive=function(){return i.router.globals.transition===i},this.router=n,this._targetState=r,!r.valid())throw new Error(r.error());this._options=ve({current:Mt(this)},r.options()),this.$id=n.transitionService._transitionCount++;var o=rr.buildToPath(e,r);this._treeChanges=rr.treeChanges(e,o,this._options.reloadState),this.createTransitionHookRegFns();var a=this._hookBuilder.buildHooksForPhase(t.TransitionHookPhase.CREATE);Je.invokeHooks(a,function(){return null}),this.applyViewConfigs(n)}return e.prototype.onBefore=function(t,e,r){},e.prototype.onStart=function(t,e,r){},e.prototype.onExit=function(t,e,r){},e.prototype.onRetain=function(t,e,r){},e.prototype.onEnter=function(t,e,r){},e.prototype.onFinish=function(t,e,r){},e.prototype.onSuccess=function(t,e,r){},e.prototype.onError=function(t,e,r){},e.prototype.createTransitionHookRegFns=function(){var e=this;this.router.transitionService._pluginapi._getEvents().filter(function(e){return e.hookPhase!==t.TransitionHookPhase.CREATE}).forEach(function(t){return q(e,e.router.transitionService,t)})},e.prototype.getHooks=function(t){return this._registeredHooks[t]},e.prototype.applyViewConfigs=function(t){var e=this._treeChanges.entering.map(function(t){return t.state});rr.applyViewConfigs(t.transitionService.$view,this._treeChanges.to,e)},e.prototype.$from=function(){return P(this._treeChanges.from).state},e.prototype.$to=function(){return P(this._treeChanges.to).state},e.prototype.from=function(){return this.$from().self},e.prototype.to=function(){return this.$to().self},e.prototype.targetState=function(){return this._targetState},e.prototype.is=function(t){return t instanceof e?this.is({to:t.$to().name,from:t.$from().name}):!(t.to&&!H(this.$to(),t.to)||t.from&&!H(this.$from(),t.from))},e.prototype.params=function(t){return void 0===t&&(t="to"),Object.freeze(this._treeChanges[t].map(At("paramValues")).reduce(Se,{}))},e.prototype.injector=function(t,e){void 0===e&&(e="to");var r=this._treeChanges[e];return t&&(r=rr.subPath(r,function(e){return e.state===t||e.state.name===t})),new fr(r).injector()},e.prototype.getResolveTokens=function(t){return void 0===t&&(t="to"),new fr(this._treeChanges[t]).getTokens()},e.prototype.addResolvable=function(t,e){void 0===e&&(e=""),t=Ut(ir)(t)?t:new ir(t);var r="string"==typeof e?e:e.name,n=this._treeChanges.to,i=S(n,function(t){return t.state.name===r});new fr(n).addResolvables([t],i.state)},e.prototype.redirectedFrom=function(){return this._options.redirectedFrom||null},e.prototype.originalTransition=function(){var t=this.redirectedFrom();return t&&t.originalTransition()||this},e.prototype.options=function(){return this._options},e.prototype.entering=function(){return b(this._treeChanges.entering,At("state")).map(hr)},e.prototype.exiting=function(){return b(this._treeChanges.exiting,At("state")).map(hr).reverse()},e.prototype.retained=function(){return b(this._treeChanges.retained,At("state")).map(hr)},e.prototype.views=function(t,e){void 0===t&&(t="entering");var r=this._treeChanges[t];return r=e?r.filter(Ht("state",e)):r,r.map(At("views")).filter(f).reduce(Ce,[])},e.prototype.treeChanges=function(t){return t?this._treeChanges[t]:this._treeChanges},e.prototype.redirect=function(t){for(var e=1,r=this;null!=(r=r.redirectedFrom());)if(++e>20)throw new Error("Too many consecutive Transition redirects (20+)");var n={redirectedFrom:this,source:"redirect"};"url"===this.options().source&&!1!==t.options().location&&(n.location="replace");var i=ve({},this.options(),t.options(),n);t=new We(t.identifier(),t.$state(),t.params(),i);var o=this.router.transitionService.create(this._treeChanges.from,t),a=this._treeChanges.entering,u=o._treeChanges.entering;return rr.matching(u,a,rr.nonDynamicParams).filter(Dt(function(t){return function(e){return t&&e.state.includes[t.name]}}(t.options().reloadState))).forEach(function(t,e){t.resolvables=a[e].resolvables}),o},e.prototype._changedParams=function(){var t=this._treeChanges;if(!this._options.reload&&!t.exiting.length&&!t.entering.length&&t.to.length===t.from.length){if(!T(t.to,t.from).map(function(t){return t[0].state!==t[1].state}).reduce(Te,!1)){var e=t.to.map(function(t){return t.paramSchema}),r=[t.to,t.from].map(function(t){return t.map(function(t){return t.paramValues})});return T(e,r[0],r[1]).map(function(t){var e=t[0],r=t[1],n=t[2];return tr.changed(e,r,n)}).reduce(Ce,[])}}},e.prototype.dynamic=function(){var t=this._changedParams();return!!t&&t.map(function(t){return t.dynamic}).reduce(Te,!1)},e.prototype.ignored=function(){return!!this._ignoredReason()},e.prototype._ignoredReason=function(){var t=this.router.globals.transition,e=this._options.reloadState,r=function(t,r){if(t.length!==r.length)return!1;var n=rr.matching(t,r);return t.length===n.filter(function(t){return!e||!t.state.includes[e.name]}).length},n=this.treeChanges(),i=t&&t.treeChanges();return i&&r(i.to,n.to)&&r(i.exiting,n.exiting)?"SameAsPending":0===n.exiting.length&&0===n.entering.length&&r(n.from,n.to)?"SameAsCurrent":void 0},e.prototype.run=function(){var e=this,r=Je.runAllHooks,n=function(t){return e._hookBuilder.buildHooksForPhase(t)},i=function(){Be.traceSuccess(e.$to(),e),e.success=!0,e._deferred.resolve(e.to()),r(n(t.TransitionHookPhase.SUCCESS))},o=function(i){Be.traceError(i,e),e.success=!1,e._deferred.reject(i),e._error=i,r(n(t.TransitionHookPhase.ERROR))},a=function(){var e=n(t.TransitionHookPhase.RUN),r=function(){return se.$q.when(void 0)};return Je.invokeHooks(e,r)},u=function(){var t=e.router.globals;return t.lastStartedTransitionId=e.$id,t.transition=e,t.transitionHistory.enqueue(e),Be.traceTransitionStart(e),se.$q.when(void 0)},s=n(t.TransitionHookPhase.BEFORE);return Je.invokeHooks(s,u).then(a).then(i,o),this.promise},e.prototype.valid=function(){return!this.error()||void 0!==this.success},e.prototype.abort=function(){Jt(this.success)&&(this._aborted=!0)},e.prototype.error=function(){var t=this.$to();if(t.self.abstract)return"Cannot transition to abstract state '"+t.name+"'";var e=t.parameters(),r=this.params(),n=e.filter(function(t){return!t.validates(r[t.id])});return n.length?"Param values not valid for state '"+t.name+"'. Invalid params: [ "+n.map(function(t){return t.id}).join(", ")+" ]":!1===this.success?this._error:void 0},e.prototype.toString=function(){var t=this.from(),e=this.to(),r=function(t){return null!==t["#"]&&void 0!==t["#"]?t:w(t,["#"])};return"Transition#"+this.$id+"( '"+(ee(t)?t.name:t)+"'"+he(r(this._treeChanges.from.map(At("paramValues")).reduce(Se,{})))+" -> "+(this.valid()?"":"(X) ")+"'"+(ee(e)?e.name:e)+"'"+he(r(this.params()))+" )"},e.diToken=e,e}(),dr=null,vr=function(t){var e=Ne.isRejectionPromise;return(dr=dr||s([[Dt(Qt),Mt("undefined")],[Kt,Mt("null")],[ae,Mt("[Promise]")],[e,function(t){return t._transitionRejection.toString()}],[Ut(Ne),u("toString")],[Ut(pr),u("toString")],[Ut(ir),u("toString")],[c,z],[Mt(!0),f]]))(t)},mr=function(t){return function(e){if(!e)return["",""];var r=e.indexOf(t);return-1===r?[e,""]:[e.substr(0,r),e.substr(r+1)]}},yr=function(){function t(){this.enqueue=!0,this.typeQueue=[],this.defaultTypes=g(t.prototype,["hash","string","query","path","int","bool","date","json","any"]);var e=function(t,e){return new Ye(ve({name:e},t))};this.types=ye(b(this.defaultTypes,e),{})}return t.prototype.dispose=function(){this.types={}},t.prototype.type=function(t,e,r){if(!Qt(e))return this.types[t];if(this.types.hasOwnProperty(t))throw new Error("A type named '"+t+"' has already been defined.");return this.types[t]=new Ye(ve({name:t},e)),r&&(this.typeQueue.push({name:t,def:r}),this.enqueue||this._flushTypeQueue()),this},t.prototype._flushTypeQueue=function(){for(;this.typeQueue.length;){var t=this.typeQueue.shift();if(t.pattern)throw new Error("You cannot override a type's .pattern at runtime.");ve(this.types[t.name],se.$injector.invoke(t.def))}},t}();!function(){var t=function(t){var e=function(t){return null!=t?t.toString():t},r={encode:e,decode:e,is:Ut(String),pattern:/.*/,equals:function(t,e){return t==e}};return ve({},r,t)};ve(yr.prototype,{string:t({}),path:t({pattern:/[^\/]*/}),query:t({}),hash:t({inherit:!1}),int:t({decode:function(t){return parseInt(t,10)},is:function(t){return!Yt(t)&&this.decode(t.toString())===t},pattern:/-?\d+/}),bool:t({encode:function(t){return t&&1||0},decode:function(t){return 0!==parseInt(t,10)},is:Ut(Boolean),pattern:/0|1/}),date:t({encode:function(t){return this.is(t)?[t.getFullYear(),("0"+(t.getMonth()+1)).slice(-2),("0"+t.getDate()).slice(-2)].join("-"):void 0},decode:function(t){if(this.is(t))return t;var e=this.capture.exec(t);return e?new Date(e[1],e[2]-1,e[3]):void 0},is:function(t){return t instanceof Date&&!isNaN(t.valueOf())},equals:function(t,e){return["getFullYear","getMonth","getDate"].reduce(function(r,n){return r&&t[n]()===e[n]()},!0)},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/}),json:t({encode:he,decode:le,is:Ut(Object),equals:me,pattern:/[^\/]*/}),any:t({encode:f,decode:f,is:function(){return!0},equals:me})})}();var gr,wr=function(){function t(t){void 0===t&&(t={}),ve(this,t)}return t.prototype.$inherit=function(t,e,r){var n,i=y(e,r),o={},a=[];for(var u in i)if(i[u]&&i[u].params&&(n=Object.keys(i[u].params),n.length))for(var s in n)a.indexOf(n[s])>=0||(a.push(n[s]),o[n[s]]=this[n[s]]);return ve({},o,t)},t}(),_r=function(t){if(!te(t))return!1;var e="^"===t.charAt(0);return{val:e?t.substring(1):t,root:e}},$r=function(t,e){return function(r){var n=r;n&&n.url&&n.name&&n.name.match(/\.\*\*$/)&&(n.url+="{remainder:any}");var i=_r(n.url),o=r.parent,a=i?t.compile(i.val,{params:r.params||{},paramMap:function(t,e){return!1===n.reloadOnSearch&&e&&(t=ve(t||{},{dynamic:!0})),t}}):n.url;if(!a)return null;if(!t.isMatcher(a))throw new Error("Invalid url '"+a+"' in state '"+r+"'");return i&&i.root?a:(o&&o.navigable||e()).url.append(a)}},Sr=function(t){return function(e){return!t(e)&&e.url?e:e.parent?e.parent.navigable:null}},br=function(t){return function(e){var r=function(e,r){return t.fromConfig(r,null,e)},n=e.url&&e.url.parameters({inherit:!1})||[],i=Re(be(w(e.params||{},n.map(At("id"))),r));return n.concat(i).map(function(t){return[t.id,t]}).reduce(C,{})}},Rr=function(){function t(t,e){function r(e){return o(e)?null:t.find(n.parentName(e))||i()}this.matcher=t;var n=this,i=function(){return t.find("")},o=function(t){return""===t.name};this.builders={name:[Z],self:[X],parent:[r],data:[tt],url:[$r(e,i)],navigable:[Sr(o)],params:[br(e.paramFactory)],views:[],path:[et],includes:[rt],resolvables:[nt]}}return t.prototype.builder=function(t,e){var r=this.builders,n=r[t]||[];return te(t)&&!Qt(e)?n.length>1?n:n[0]:te(t)&&Zt(e)?(r[t]=n,r[t].push(e),function(){return r[t].splice(r[t].indexOf(e,1))&&null}):void 0},t.prototype.build=function(t){var e=this,r=e.matcher,n=e.builders,i=this.parentName(t);if(i&&!r.find(i,void 0,!1))return null;for(var o in n)if(n.hasOwnProperty(o)){var a=n[o].reduce(function(t,e){return function(r){return e(r,t)}},l);t[o]=a(t)}return t},t.prototype.parentName=function(t){var e=t.name||"",r=e.split(".");if("**"===r.pop()&&r.pop(),r.length){if(t.parent)throw new Error("States that specify the 'parent:' property should not have a '.' in their name ("+e+")");return r.join(".")}return t.parent?te(t.parent)?t.parent:t.parent.name:""},t.prototype.name=function(t){var e=t.name;if(-1!==e.indexOf(".")||!t.parent)return e;var r=te(t.parent)?t.parent:t.parent.name;return r?r+"."+e:e},t}(),Er=function(){function t(t){this._states=t}return t.prototype.isRelative=function(t){return t=t||"",0===t.indexOf(".")||0===t.indexOf("^")},t.prototype.find=function(t,e,r){if(void 0===r&&(r=!0),t||""===t){var n=te(t),i=n?t:t.name;this.isRelative(i)&&(i=this.resolvePath(i,e));var o=this._states[i];if(o&&(n||!(n||o!==t&&o.self!==t)))return o;if(n&&r){var a=Re(this._states),u=a.filter(function(t){return t.__stateObjectCache.nameGlob&&t.__stateObjectCache.nameGlob.matches(i)});return u.length>1&&console.log("stateMatcher.find: Found multiple matches for "+i+" using glob: ",u.map(function(t){return t.name})),u[0]}}},t.prototype.resolvePath=function(t,e){if(!e)throw new Error("No reference point given for path '"+t+"'");for(var r=this.find(e),n=t.split("."),i=0,o=n.length,a=r;i<o;i++)if(""!==n[i]||0!==i){if("^"!==n[i])break;if(!a.parent)throw new Error("Path '"+t+"' not valid for state '"+r.name+"'");a=a.parent}else a=r;var u=n.slice(i).join(".");return a.name+(a.name&&u?".":"")+u},t}(),Tr=function(){function t(t,e,r,n,i){this.$registry=t,this.$urlRouter=e,this.states=r,this.builder=n,this.listeners=i,this.queue=[],this.matcher=t.matcher}return t.prototype.dispose=function(){this.queue=[]},t.prototype.register=function(t){var e=this.queue,r=Bt.create(t),n=r.name;if(!te(n))throw new Error("State must have a valid name");if(this.states.hasOwnProperty(n)||ge(e.map(At("name")),n))throw new Error("State '"+n+"' is already defined");return e.push(r),this.flush(),r},t.prototype.flush=function(){for(var t=this,e=this,r=e.queue,n=e.states,i=e.builder,o=[],a=[],u={},s=function(e){return t.states.hasOwnProperty(e)&&t.states[e]};r.length>0;){var c=r.shift(),f=c.name,l=i.build(c),h=a.indexOf(c);if(l){var p=s(f);if(p&&p.name===f)throw new Error("State '"+f+"' is already defined");var d=s(f+".**");d&&this.$registry.deregister(d),n[f]=c,this.attachRoute(c),h>=0&&a.splice(h,1),o.push(c)}else{var v=u[f];if(u[f]=r.length,h>=0&&v===r.length)return r.push(c),n;h<0&&a.push(c),r.push(c)}}return o.length&&this.listeners.forEach(function(t){return t("registered",o.map(function(t){return t.self}))}),n},t.prototype.attachRoute=function(t){!t.abstract&&t.url&&this.$urlRouter.rule(this.$urlRouter.urlRuleFactory.create(t))},t}(),Cr=function(){function t(t){this._router=t,this.states={},this.listeners=[],this.matcher=new Er(this.states),this.builder=new Rr(this.matcher,t.urlMatcherFactory),this.stateQueue=new Tr(this,t.urlRouter,this.states,this.builder,this.listeners),this._registerRoot()}return t.prototype._registerRoot=function(){var t={name:"",url:"^",views:null,params:{"#":{value:null,type:"hash",dynamic:!0}},abstract:!0};(this._root=this.stateQueue.register(t)).navigable=null},t.prototype.dispose=function(){var t=this;this.stateQueue.dispose(),this.listeners=[],this.get().forEach(function(e){return t.get(e)&&t.deregister(e)})},t.prototype.onStatesChanged=function(t){return this.listeners.push(t),function(){we(this.listeners)(t)}.bind(this)},t.prototype.root=function(){return this._root},t.prototype.register=function(t){return this.stateQueue.register(t)},t.prototype._deregisterTree=function(t){var e=this,r=this.get().map(function(t){return t.$$state()}),n=function(t){var e=r.filter(function(e){return-1!==t.indexOf(e.parent)});return 0===e.length?e:e.concat(n(e))},i=n([t]),o=[t].concat(i).reverse();return o.forEach(function(t){var r=e._router.urlRouter;r.rules().filter(Ht("state",t)).forEach(r.removeRule.bind(r)),delete e.states[t.name]}),o},t.prototype.deregister=function(t){var e=this.get(t);if(!e)throw new Error("Can't deregister state; not found: "+t);var r=this._deregisterTree(e.$$state());return this.listeners.forEach(function(t){return t("deregistered",r.map(function(t){return t.self}))}),r},t.prototype.get=function(t,e){var r=this;if(0===arguments.length)return Object.keys(this.states).map(function(t){return r.states[t].self});var n=this.matcher.find(t,e);return n&&n.self||null},t.prototype.decorator=function(t,e){return this.builder.builder(t,e)},t}(),Pr=function(t,e,r){return t[e]=t[e]||r()},kr=K("/"),Or=function(){function e(t,r,n,i){var o=this;this.config=i,this._cache={path:[this]},this._children=[],this._params=[],this._segments=[],this._compiled=[],this.pattern=t,this.config=m(this.config,{params:{},strict:!0,caseInsensitive:!1,paramMap:f});for(var a,u,s,c=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,l=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,h=0,p=[],d=function(r){if(!e.nameValidator.test(r))throw new Error("Invalid parameter name '"+r+"' in pattern '"+t+"'");if(S(o._params,Ht("id",r)))throw new Error("Duplicate parameter name '"+r+"' in pattern '"+t+"'")},v=function(e,n){var i=e[2]||e[3],a=n?e[4]:e[4]||("*"===e[1]?"[\\s\\S]*":null);return{id:i,regexp:a,cfg:o.config.params[i],segment:t.substring(h,e.index),type:a?r.type(a)||function(t){return ye(r.type(n?"query":"path"),{pattern:new RegExp(t,o.config.caseInsensitive?"i":void 0)})}(a):null}};(a=c.exec(t))&&(u=v(a,!1),!(u.segment.indexOf("?")>=0));)d(u.id),this._params.push(n.fromPath(u.id,u.type,this.config.paramMap(u.cfg,!1))),this._segments.push(u.segment),p.push([u.segment,P(this._params)]),h=c.lastIndex;s=t.substring(h);var y=s.indexOf("?");if(y>=0){var g=s.substring(y);if(s=s.substring(0,y),g.length>0)for(h=0;a=l.exec(g);)u=v(a,!0),d(u.id),this._params.push(n.fromSearch(u.id,u.type,this.config.paramMap(u.cfg,!0))),h=c.lastIndex}this._segments.push(s),this._compiled=p.map(function(t){return it.apply(null,t)}).concat(it(s))}return e.prototype.append=function(t){return this._children.push(t),t._cache={path:this._cache.path.concat(t),parent:this,pattern:null},t},e.prototype.isRoot=function(){return this._cache.path[0]===this},e.prototype.toString=function(){return this.pattern},e.prototype.exec=function(t,e,r,n){var i=this;void 0===e&&(e={}),void 0===n&&(n={});var o=Pr(this._cache,"pattern",function(){return new RegExp(["^",Oe(i._cache.path.map(At("_compiled"))).join(""),!1===i.config.strict?"/?":"","$"].join(""),i.config.caseInsensitive?"i":void 0)}).exec(t);if(!o)return null;var a=this.parameters(),u=a.filter(function(t){return!t.isSearch()}),s=a.filter(function(t){return t.isSearch()}),c=this._cache.path.map(function(t){return t._segments.length-1}).reduce(function(t,e){return t+e}),f={};if(c!==o.length-1)throw new Error("Unbalanced capture group in route '"+this.pattern+"'");for(var l=0;l<c;l++){for(var h=u[l],p=o[l+1],d=0;d<h.replace.length;d++)h.replace[d].from===p&&(p=h.replace[d].to);p&&!0===h.array&&(p=function(t){var e=function(t){return t.split("").reverse().join("")},r=function(t){return t.replace(/\\-/g,"-")};return b(b(e(t).split(/-(?!\\)/),e),r).reverse()}(p)),Qt(p)&&(p=h.type.decode(p)),f[h.id]=h.value(p)}return s.forEach(function(t){for(var r=e[t.id],n=0;n<t.replace.length;n++)t.replace[n].from===r&&(r=t.replace[n].to);Qt(r)&&(r=t.type.decode(r)),f[t.id]=t.value(r)}),r&&(f["#"]=r),f},e.prototype.parameters=function(t){return void 0===t&&(t={}),!1===t.inherit?this._params:Oe(this._cache.path.map(function(t){return t._params}))},e.prototype.parameter=function(t,e){var r=this;void 0===e&&(e={});var n=this._cache.parent;return function(){for(var e=0,n=r._params;e<n.length;e++){var i=n[e];if(i.id===t)return i}}()||!1!==e.inherit&&n&&n.parameter(t,e)||null},e.prototype.validates=function(t){var e=function(t,e){return!t||t.validates(e)};return t=t||{},this.parameters().filter(function(e){return t.hasOwnProperty(e.id)}).map(function(r){return e(r,t[r.id])}).reduce(Ee,!0)},e.prototype.format=function(t){function r(e){var r=e.value(t[e.id]),n=e.validates(r),i=e.isDefaultValue(r);return{param:e,value:r,isValid:n,isDefaultValue:i,squash:!!i&&e.squash,encoded:e.type.encode(r)}}void 0===t&&(t={});var n=this._cache.path,i=n.map(e.pathSegmentsAndParams).reduce(Ce,[]).map(function(t){return te(t)?t:r(t)}),o=n.map(e.queryParams).reduce(Ce,[]).map(r),a=function(t){return!1===t.isValid};if(i.concat(o).filter(a).length)return null;var u=i.reduce(function(t,r){if(te(r))return t+r;var n=r.squash,i=r.encoded,o=r.param;return!0===n?t.match(/\/$/)?t.slice(0,-1):t:te(n)?t+n:!1!==n?t:null==i?t:re(i)?t+b(i,e.encodeDashes).join("-"):o.raw?t+i:t+encodeURIComponent(i)},""),s=o.map(function(t){var e=t.param,r=t.squash,n=t.encoded,i=t.isDefaultValue;if(!(null==n||i&&!1!==r)&&(re(n)||(n=[n]),0!==n.length))return e.raw||(n=b(n,encodeURIComponent)),n.map(function(t){return e.id+"="+t})}).filter(f).reduce(Ce,[]).join("&");return u+(s?"?"+s:"")+(t["#"]?"#"+t["#"]:"")},e.encodeDashes=function(t){return encodeURIComponent(t).replace(/-/g,function(t){return"%5C%"+t.charCodeAt(0).toString(16).toUpperCase()})},e.pathSegmentsAndParams=function(e){return T(e._segments,e._params.filter(function(e){return e.location===t.DefType.PATH}).concat(void 0)).reduce(Ce,[]).filter(function(t){return""!==t&&Qt(t)})},e.queryParams=function(e){return e._params.filter(function(e){return e.location===t.DefType.SEARCH})},e.compare=function(t,r){var n=function(t){return t._cache.segments=t._cache.segments||t._cache.path.map(e.pathSegmentsAndParams).reduce(Ce,[]).reduce(Y,[]).map(function(t){return te(t)?kr(t):t}).reduce(Ce,[])},i=function(t){return t._cache.weights=t._cache.weights||n(t).map(function(t){return"/"===t?1:te(t)?2:t instanceof tr?3:void 0})},o=i(t),a=i(r);!function(t,e,r){for(var n=Math.max(t.length,e.length);t.length<n;)t.push(r);for(;e.length<n;)e.push(r)}(o,a,0);var u,s,c=T(o,a);for(s=0;s<c.length;s++)if(0!==(u=c[s][0]-c[s][1]))return u;return 0},e.nameValidator=/^\w+([-.]+\w+)*(?:\[\])?$/,e}(),xr=function(){function e(){var e=this;this.paramTypes=new yr,this._isCaseInsensitive=!1,this._isStrictMode=!0,this._defaultSquashPolicy=!1,this._getConfig=function(t){return ve({strict:e._isStrictMode,caseInsensitive:e._isCaseInsensitive},t)},this.paramFactory={fromConfig:function(r,n,i){return new tr(r,n,i,t.DefType.CONFIG,e)},fromPath:function(r,n,i){
return new tr(r,n,i,t.DefType.PATH,e)},fromSearch:function(r,n,i){return new tr(r,n,i,t.DefType.SEARCH,e)}},ve(this,{UrlMatcher:Or,Param:tr})}return e.prototype.caseInsensitive=function(t){return this._isCaseInsensitive=Qt(t)?t:this._isCaseInsensitive},e.prototype.strictMode=function(t){return this._isStrictMode=Qt(t)?t:this._isStrictMode},e.prototype.defaultSquashPolicy=function(t){if(Qt(t)&&!0!==t&&!1!==t&&!te(t))throw new Error("Invalid squash policy: "+t+". Valid policies: false, true, arbitrary-string");return this._defaultSquashPolicy=Qt(t)?t:this._defaultSquashPolicy},e.prototype.compile=function(t,e){return new Or(t,this.paramTypes,this.paramFactory,this._getConfig(e))},e.prototype.isMatcher=function(t){if(!ee(t))return!1;var e=!0;return de(Or.prototype,function(r,n){Zt(r)&&(e=e&&Qt(t[n])&&Zt(t[n]))}),e},e.prototype.type=function(t,e,r){var n=this.paramTypes.type(t,e,r);return Qt(e)?this:n},e.prototype.$get=function(){return this.paramTypes.enqueue=!1,this.paramTypes._flushTypeQueue(),this},e.prototype.dispose=function(){this.paramTypes.dispose()},e}(),jr=function(){function t(t){this.router=t}return t.prototype.compile=function(t){return this.router.urlMatcherFactory.compile(t)},t.prototype.create=function(t,e){var r=this,n=s([[te,function(t){return n(r.compile(t))}],[Ut(Or),function(t){return r.fromUrlMatcher(t,e)}],[oe,function(t){return r.fromState(t,r.router)}],[Ut(RegExp),function(t){return r.fromRegExp(t,e)}],[Zt,function(t){return new Ir(t,e)}]]),i=n(t);if(!i)throw new Error("invalid 'what' in when()");return i},t.prototype.fromUrlMatcher=function(t,e){function r(e){var r=t.exec(e.path,e.search,e.hash);return t.validates(r)&&r}function n(e){var r=t.parameters().filter(function(t){return t.isOptional});return r.length?r.filter(function(t){return e[t.id]}).length/r.length:1e-6}var i=e;te(e)&&(e=this.router.urlMatcherFactory.compile(e)),Ut(Or)(e)&&(i=function(t){return e.format(t)});var o={urlMatcher:t,matchPriority:n,type:"URLMATCHER"};return ve(new Ir(r,i),o)},t.prototype.fromState=function(t,e){var r=function(r){var n=e.stateService,i=e.globals;n.href(t,r)!==n.href(i.current,i.params)&&n.transitionTo(t,r,{inherit:!0,source:"url"})},n={state:t,type:"STATE"};return ve(this.fromUrlMatcher(t.url,r),n)},t.prototype.fromRegExp=function(t,e){if(t.global||t.sticky)throw new Error("Rule RegExp must not be global or sticky");var r=function(t){return e.replace(/\$(\$|\d{1,2})/,function(e,r){return t["$"===r?0:Number(r)]})},n=te(e)?r:e,i=function(e){return t.exec(e.path)},o={regexp:t,type:"REGEXP"};return ve(new Ir(i,n),o)},t.isUrlRule=function(t){return t&&["type","match","handler"].every(function(e){return Qt(t[e])})},t}(),Ir=function(){function t(t,e){var r=this;this.match=t,this.type="RAW",this.matchPriority=function(t){return 0-r.$id},this.handler=e||f}return t}(),Vr=function(t,e){return(e.priority||0)-(t.priority||0)},Ar=function(t,e){var r={STATE:4,URLMATCHER:4,REGEXP:3,RAW:2,OTHER:1};return(r[t.type]||0)-(r[e.type]||0)},Hr=function(t,e){return t.urlMatcher&&e.urlMatcher?Or.compare(t.urlMatcher,e.urlMatcher):0},qr=function(t,e){var r={STATE:!0,URLMATCHER:!0};return r[t.type]&&r[e.type]?0:(t.$id||0)-(e.$id||0)};gr=function(t,e){var r=Vr(t,e);return 0!==r?r:0!==(r=Ar(t,e))?r:(r=Hr(t,e),0!==r?r:qr(t,e))};var Dr=function(){function t(e){this._sortFn=gr,this._rules=[],this.interceptDeferred=!1,this._id=0,this._sorted=!1,this._router=e,this.urlRuleFactory=new jr(e),h(Mt(t.prototype),this,Mt(this))}return t.prototype.dispose=function(){this.listen(!1),this._rules=[],delete this._otherwiseFn},t.prototype.sort=function(t){this._rules=this.stableSort(this._rules,this._sortFn=t||this._sortFn),this._sorted=!0},t.prototype.ensureSorted=function(){this._sorted||this.sort()},t.prototype.stableSort=function(t,e){var r=t.map(function(t,e){return{elem:t,idx:e}});return r.sort(function(t,r){var n=e(t.elem,r.elem);return 0===n?t.idx-r.idx:n}),r.map(function(t){return t.elem})},t.prototype.match=function(t){var e=this;this.ensureSorted(),t=ve({path:"",search:{},hash:""},t);var r=this.rules();this._otherwiseFn&&r.push(this._otherwiseFn);for(var n,i=0;i<r.length&&(!n||0===this._sortFn(r[i],n.rule));i++){var o=function(r){var n=r.match(t,e._router);return n&&{match:n,rule:r,weight:r.matchPriority(n)}}(r[i]);n=!n||o&&o.weight>n.weight?o:n}return n},t.prototype.sync=function(t){if(!t||!t.defaultPrevented){var e=this._router,r=e.urlService,n=e.stateService,i={path:r.path(),search:r.search(),hash:r.hash()},o=this.match(i);s([[te,function(t){return r.url(t,!0)}],[We.isDef,function(t){return n.go(t.state,t.params,t.options)}],[Ut(We),function(t){return n.go(t.state(),t.params(),t.options())}]])(o&&o.rule.handler(o.match,i,e))}},t.prototype.listen=function(t){var e=this;if(!1!==t)return this._stopFn=this._stopFn||this._router.urlService.onChange(function(t){return e.sync(t)});this._stopFn&&this._stopFn(),delete this._stopFn},t.prototype.update=function(t){var e=this._router.locationService;if(t)return void(this.location=e.path());e.path()!==this.location&&e.url(this.location,!0)},t.prototype.push=function(t,e,r){var n=r&&!!r.replace;this._router.urlService.url(t.format(e||{}),n)},t.prototype.href=function(t,e,r){var n=t.format(e);if(null==n)return null;r=r||{absolute:!1};var i=this._router.urlService.config,o=i.html5Mode();if(o||null===n||(n="#"+i.hashPrefix()+n),n=ot(n,o,r.absolute,i.baseHref()),!r.absolute||!n)return n;var a=!o&&n?"/":"",u=i.port();return u=80===u||443===u?"":":"+u,[i.protocol(),"://",i.host(),u,a,n].join("")},t.prototype.rule=function(t){var e=this;if(!jr.isUrlRule(t))throw new Error("invalid rule");return t.$id=this._id++,t.priority=t.priority||0,this._rules.push(t),this._sorted=!1,function(){return e.removeRule(t)}},t.prototype.removeRule=function(t){we(this._rules,t)},t.prototype.rules=function(){return this.ensureSorted(),this._rules.slice()},t.prototype.otherwise=function(t){var e=at(t);this._otherwiseFn=this.urlRuleFactory.create(Mt(!0),e),this._sorted=!1},t.prototype.initial=function(t){var e=at(t),r=function(t,e){return 0===e.globals.transitionHistory.size()&&!!/^\/?$/.exec(t.path)};this.rule(this.urlRuleFactory.create(r,e))},t.prototype.when=function(t,e,r){var n=this.urlRuleFactory.create(t,e);return Qt(r&&r.priority)&&(n.priority=r.priority),this.rule(n),n},t.prototype.deferIntercept=function(t){void 0===t&&(t=!0),this.interceptDeferred=t},t}(),Nr=function(){function t(){var t=this;this._uiViews=[],this._viewConfigs=[],this._viewConfigFactories={},this._pluginapi={_rootViewContext:this._rootViewContext.bind(this),_viewConfigFactory:this._viewConfigFactory.bind(this),_registeredUIViews:function(){return t._uiViews},_activeViewConfigs:function(){return t._viewConfigs}}}return t.prototype._rootViewContext=function(t){return this._rootContext=t||this._rootContext},t.prototype._viewConfigFactory=function(t,e){this._viewConfigFactories[t]=e},t.prototype.createViewConfig=function(t,e){var r=this._viewConfigFactories[e.$type];if(!r)throw new Error("ViewService: No view config factory registered for type "+e.$type);var n=r(t,e);return re(n)?n:[n]},t.prototype.deactivateViewConfig=function(t){Be.traceViewServiceEvent("<- Removing",t),we(this._viewConfigs,t)},t.prototype.activateViewConfig=function(t){Be.traceViewServiceEvent("-> Registering",t),this._viewConfigs.push(t)},t.prototype.sync=function(){function e(t){var e=function(t){return t&&t.parent?e(t.parent)+1:1};return 1e4*t.fqn.split(".").length+e(t.creationContext)}function n(t){for(var e=t.viewDecl.$context,r=0;++r&&e.parent;)e=e.parent;return r}var i=this,o=this._uiViews.map(function(t){return[t.fqn,t]}).reduce(C,{}),a=r(function(t,e,r,n){return e*(t(r)-t(n))}),u=function(e){var r=i._viewConfigs.filter(t.matches(o,e));return r.length>1&&r.sort(a(n,-1)),[e,r[0]]},s=function(t){var e=t[0],r=t[1];-1!==i._uiViews.indexOf(e)&&e.configUpdated(r)},c=this._uiViews.sort(a(e,1)).map(u);Be.traceViewSync(c),c.forEach(s)},t.prototype.registerUIView=function(t){Be.traceViewServiceUIViewEvent("-> Registering",t);var e=this._uiViews,r=function(e){return e.fqn===t.fqn&&e.$type===t.$type};return e.filter(r).length&&Be.traceViewServiceUIViewEvent("!!!! duplicate uiView named:",t),e.push(t),this.sync(),function(){if(-1===e.indexOf(t))return void Be.traceViewServiceUIViewEvent("Tried removing non-registered uiView",t);Be.traceViewServiceUIViewEvent("<- Deregistering",t),we(e)(t)}},t.prototype.available=function(){return this._uiViews.map(At("fqn"))},t.prototype.active=function(){return this._uiViews.filter(At("$config")).map(At("name"))},t.normalizeUIViewTarget=function(t,e){void 0===e&&(e="");var r=e.split("@"),n=r[0]||"$default",i=te(r[1])?r[1]:"^",o=/^(\^(?:\.\^)*)\.(.*$)/.exec(n);(o&&(i=o[1],n=o[2]),"!"===n.charAt(0)&&(n=n.substr(1),i=""),/^(\^(?:\.\^)*)$/.exec(i))?i=i.split(".").reduce(function(t,e){return t.parent},t).name:"."===i&&(i=t.name);return{uiViewName:n,uiViewContextAnchor:i}},t.matches=function(t,e){return function(r){if(e.$type!==r.viewDecl.$type)return!1;var n=r.viewDecl,i=n.$uiViewName.split("."),o=e.fqn.split(".");if(!me(i,o.slice(0-i.length)))return!1;var a=1-i.length||void 0,u=o.slice(0,a).join("."),s=t[u].creationContext;return n.$uiViewContextAnchor===(s&&s.name)}},t}(),Fr=function(){function t(){this.params=new wr,this.lastStartedTransitionId=-1,this.transitionHistory=new qe([],1),this.successfulTransitions=new qe([],1)}return t.prototype.dispose=function(){this.transitionHistory.clear(),this.successfulTransitions.clear(),this.transition=null},t}(),Ur=function(t){return t.reduce(function(t,e){return t[e]=ue(e),t},{dispose:l})},Lr=["url","path","search","hash","onChange"],Mr=["port","protocol","host","baseHref","html5Mode","hashPrefix"],Gr=["type","caseInsensitive","strictMode","defaultSquashPolicy"],Br=["sort","when","initial","otherwise","rules","rule","removeRule"],Wr=["deferIntercept","listen","sync","match"],zr=function(){function t(t,e){void 0===e&&(e=!0),this.router=t,this.rules={},this.config={};var r=function(){return t.locationService};h(r,this,r,Lr,e);var n=function(){return t.locationConfig};h(n,this.config,n,Mr,e);var i=function(){return t.urlMatcherFactory};h(i,this.config,i,Gr);var o=function(){return t.urlRouter};h(o,this.rules,o,Br),h(o,this,o,Wr)}return t.prototype.url=function(t,e,r){},t.prototype.path=function(){},t.prototype.search=function(){},t.prototype.hash=function(){},t.prototype.onChange=function(t){},t.prototype.parts=function(){return{path:this.path(),search:this.search(),hash:this.hash()}},t.prototype.dispose=function(){},t.prototype.sync=function(t){},t.prototype.listen=function(t){},t.prototype.deferIntercept=function(t){},t.prototype.match=function(t){},t.locationServiceStub=Ur(Lr),t.locationConfigStub=Ur(Mr),t}(),Jr=0,Qr=function(){function t(t,e){void 0===t&&(t=zr.locationServiceStub),void 0===e&&(e=zr.locationConfigStub),this.locationService=t,this.locationConfig=e,this.$id=Jr++,this._disposed=!1,this._disposables=[],this.trace=Be,this.viewService=new Nr,this.transitionService=new Rn(this),this.globals=new Fr,this.urlMatcherFactory=new xr,this.urlRouter=new Dr(this),this.stateRegistry=new Cr(this),this.stateService=new En(this),this.urlService=new zr(this),this._plugins={},this.viewService._pluginapi._rootViewContext(this.stateRegistry.root()),this.globals.$current=this.stateRegistry.root(),this.globals.current=this.globals.$current.self,this.disposable(this.globals),this.disposable(this.stateService),this.disposable(this.stateRegistry),this.disposable(this.transitionService),this.disposable(this.urlRouter),this.disposable(t),this.disposable(e)}return t.prototype.disposable=function(t){this._disposables.push(t)},t.prototype.dispose=function(t){var e=this;if(t&&Zt(t.dispose))return void t.dispose(this);this._disposed=!0,this._disposables.slice().forEach(function(t){try{"function"==typeof t.dispose&&t.dispose(e),we(e._disposables,t)}catch(t){}})},t.prototype.plugin=function(t,e){void 0===e&&(e={});var r=new t(this,e);if(!r.name)throw new Error("Required property `name` missing on plugin: "+r);return this._disposables.push(r),this._plugins[r.name]=r},t.prototype.getPlugin=function(t){return t?this._plugins[t]:Re(this._plugins)},t}(),Kr=function(t){return t.onCreate({},ut)},Yr=function(t){function e(e){if(e)return e instanceof We?e:te(e)?n.target(e,t.params(),t.options()):e.state||e.params?n.target(e.state||t.to(),e.params||t.params(),t.options()):void 0}var r=t.to().redirectTo;if(r){var n=t.router.stateService;return Zt(r)?se.$q.when(r(t)).then(e):e(r)}},Zr=function(t){return t.onStart({to:function(t){return!!t.redirectTo}},Yr)},Xr=st("onExit"),tn=function(t){return t.onExit({exiting:function(t){return!!t.onExit}},Xr)},en=st("onRetain"),rn=function(t){return t.onRetain({retained:function(t){return!!t.onRetain}},en)},nn=st("onEnter"),on=function(t){return t.onEnter({entering:function(t){return!!t.onEnter}},nn)},an=function(t){return new fr(t.treeChanges().to).resolvePath("EAGER",t).then(l)},un=function(t){return t.onStart({},an,{priority:1e3})},sn=function(t,e){return new fr(t.treeChanges().to).subContext(e.$$state()).resolvePath("LAZY",t).then(l)},cn=function(t){return t.onEnter({entering:Mt(!0)},sn,{priority:1e3})},fn=function(t){var e=se.$q,r=t.views("entering");if(r.length)return e.all(r.map(function(t){return e.when(t.load())})).then(l)},ln=function(t){return t.onFinish({},fn)},hn=function(t){var e=t.views("entering"),r=t.views("exiting");if(e.length||r.length){var n=t.router.viewService;r.forEach(function(t){return n.deactivateViewConfig(t)}),e.forEach(function(t){return n.activateViewConfig(t)}),n.sync()}},pn=function(t){return t.onSuccess({},hn)},dn=function(t){var e=t.router.globals,r=function(){e.successfulTransitions.enqueue(t),e.$current=t.$to(),e.current=e.$current.self,pe(t.params(),e.params)},n=function(){e.transition===t&&(e.transition=null)};t.onSuccess({},r,{priority:1e4}),t.promise.then(n,n)},vn=function(t){return t.onCreate({},dn)},mn=function(t){var e=t.options(),r=t.router.stateService,n=t.router.urlRouter;if("url"!==e.source&&e.location&&r.$current.navigable){var i={replace:"replace"===e.location};n.push(r.$current.navigable.url,r.params,i)}n.update(!0)},yn=function(t){return t.onSuccess({},mn,{priority:9999})},gn=function(t){function e(){if("url"!==t.originalTransition().options().source){var e=t.targetState();return r.stateService.target(e.identifier(),e.params(),e.options())}var n=r.urlService,i=n.match(n.parts()),o=i&&i.rule;if(o&&"STATE"===o.type){var a=o.state,u=i.match;return r.stateService.target(a,u,t.options())}r.urlService.sync()}var r=t.router,n=t.entering().filter(function(t){return!!t.$$state().lazyLoad}).map(function(e){return ct(t,e)});return se.$q.all(n).then(e)},wn=function(t){return t.onBefore({entering:function(t){return!!t.lazyLoad}},gn)},_n=function(){function t(t,e,r,n,i,o,a,u){void 0===i&&(i=!1),void 0===o&&(o=Je.HANDLE_RESULT),void 0===a&&(a=Je.REJECT_ERROR),void 0===u&&(u=!1),this.name=t,this.hookPhase=e,this.hookOrder=r,this.criteriaMatchPath=n,this.reverseSort=i,this.getResultHandler=o,this.getErrorHandler=a,this.synchronous=u}return t}(),$n=function(t){return t.onBefore({},ft,{priority:-9999})},Sn=function(t){return t.onBefore({},lt,{priority:-1e4})},bn={location:!0,relative:null,inherit:!1,notify:!0,reload:!1,custom:{},current:function(){return null},source:"unknown"},Rn=function(){function e(t){this._transitionCount=0,this._eventTypes=[],this._registeredHooks={},this._criteriaPaths={},this._router=t,this.$view=t.viewService,this._deregisterHookFns={},this._pluginapi=h(Mt(this),{},Mt(this),["_definePathType","_defineEvent","_getPathTypes","_getEvents","getHooks"]),this._defineCorePaths(),this._defineCoreEvents(),this._registerCoreTransitionHooks()}return e.prototype.onCreate=function(t,e,r){},e.prototype.onBefore=function(t,e,r){},e.prototype.onStart=function(t,e,r){},e.prototype.onExit=function(t,e,r){},e.prototype.onRetain=function(t,e,r){},e.prototype.onEnter=function(t,e,r){},e.prototype.onFinish=function(t,e,r){},e.prototype.onSuccess=function(t,e,r){},e.prototype.onError=function(t,e,r){},e.prototype.dispose=function(t){Re(this._registeredHooks).forEach(function(t){return t.forEach(function(e){e._deregistered=!0,we(t,e)})})},e.prototype.create=function(t,e){return new pr(t,e,this._router)},e.prototype._defineCoreEvents=function(){var e=t.TransitionHookPhase,r=Je,n=this._criteriaPaths;this._defineEvent("onCreate",e.CREATE,0,n.to,!1,r.LOG_REJECTED_RESULT,r.THROW_ERROR,!0),this._defineEvent("onBefore",e.BEFORE,0,n.to),this._defineEvent("onStart",e.RUN,0,n.to),this._defineEvent("onExit",e.RUN,100,n.exiting,!0),this._defineEvent("onRetain",e.RUN,200,n.retained),this._defineEvent("onEnter",e.RUN,300,n.entering),this._defineEvent("onFinish",e.RUN,400,n.to),this._defineEvent("onSuccess",e.SUCCESS,0,n.to,!1,r.LOG_REJECTED_RESULT,r.LOG_ERROR,!0),this._defineEvent("onError",e.ERROR,0,n.to,!1,r.LOG_REJECTED_RESULT,r.LOG_ERROR,!0)},e.prototype._defineCorePaths=function(){var e=t.TransitionHookScope.STATE,r=t.TransitionHookScope.TRANSITION;this._definePathType("to",r),this._definePathType("from",r),this._definePathType("exiting",e),this._definePathType("retained",e),this._definePathType("entering",e)},e.prototype._defineEvent=function(t,e,r,n,i,o,a,u){void 0===i&&(i=!1),void 0===o&&(o=Je.HANDLE_RESULT),void 0===a&&(a=Je.REJECT_ERROR),void 0===u&&(u=!1);var s=new _n(t,e,r,n,i,o,a,u);this._eventTypes.push(s),q(this,this,s)},e.prototype._getEvents=function(t){return(Qt(t)?this._eventTypes.filter(function(e){return e.hookPhase===t}):this._eventTypes.slice()).sort(function(t,e){var r=t.hookPhase-e.hookPhase;return 0===r?t.hookOrder-e.hookOrder:r})},e.prototype._definePathType=function(t,e){this._criteriaPaths[t]={name:t,scope:e}},e.prototype._getPathTypes=function(){return this._criteriaPaths},e.prototype.getHooks=function(t){return this._registeredHooks[t]},e.prototype._registerCoreTransitionHooks=function(){var t=this._deregisterHookFns;t.addCoreResolves=Kr(this),t.ignored=$n(this),t.invalid=Sn(this),t.redirectTo=Zr(this),t.onExit=tn(this),t.onRetain=rn(this),t.onEnter=on(this),t.eagerResolve=un(this),t.lazyResolve=cn(this),t.loadViews=ln(this),t.activateViews=pn(this),t.updateGlobals=vn(this),t.updateUrl=yn(this),t.lazyLoad=wn(this)},e}(),En=function(){function e(t){this.router=t,this.invalidCallbacks=[],this._defaultErrorHandler=function(t){t instanceof Error&&t.stack?(console.error(t),console.error(t.stack)):t instanceof Ne?(console.error(t.toString()),t.detail&&t.detail.stack&&console.error(t.detail.stack)):console.error(t)};var r=["current","$current","params","transition"],n=Object.keys(e.prototype).filter(Dt(ge(r)));h(Mt(e.prototype),this,Mt(this),n)}return Object.defineProperty(e.prototype,"transition",{get:function(){return this.router.globals.transition},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"params",{get:function(){return this.router.globals.params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"current",{get:function(){return this.router.globals.current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$current",{get:function(){return this.router.globals.$current},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.defaultErrorHandler(l),this.invalidCallbacks=[]},e.prototype._handleInvalidTargetState=function(t,e){function r(){var t=s.dequeue();return void 0===t?Ne.invalid(e.error()).toPromise():se.$q.when(t(e,i,c)).then(f).then(function(t){return t||r()})}var n=this,i=rr.makeTargetState(t),o=this.router.globals,a=function(){return o.transitionHistory.peekTail()},u=a(),s=new qe(this.invalidCallbacks.slice()),c=new fr(t).injector(),f=function(t){if(t instanceof We){var e=t;return e=n.target(e.identifier(),e.params(),e.options()),e.valid()?a()!==u?Ne.superseded().toPromise():n.transitionTo(e.identifier(),e.params(),e.options()):Ne.invalid(e.error()).toPromise()}};return r()},e.prototype.onInvalid=function(t){return this.invalidCallbacks.push(t),function(){we(this.invalidCallbacks)(t)}.bind(this)},e.prototype.reload=function(t){return this.transitionTo(this.current,this.params,{reload:!Qt(t)||t,inherit:!1,notify:!1})},e.prototype.go=function(t,e,r){var n={relative:this.$current,inherit:!0},i=m(r,n,bn);return this.transitionTo(t,e,i)},e.prototype.target=function(t,e,r){if(void 0===r&&(r={}),ee(r.reload)&&!r.reload.name)throw new Error("Invalid reload state object");var n=this.router.stateRegistry;if(r.reloadState=!0===r.reload?n.root():n.matcher.find(r.reload,r.relative),r.reload&&!r.reloadState)throw new Error("No such reload state '"+(te(r.reload)?r.reload:r.reload.name)+"'");var i=n.matcher.find(t,r.relative);return new We(t,i,e,r)},e.prototype.getCurrentPath=function(){var t=this,e=this.router.globals,r=e.successfulTransitions.peekTail();return r?r.treeChanges().to:function(){return[new er(t.router.stateRegistry.root())]}()},e.prototype.transitionTo=function(e,r,n){var i=this;void 0===r&&(r={}),void 0===n&&(n={});var o=this.router,a=o.globals;n=m(n,bn),n=ve(n,{current:function(){return a.transition}});var u=this.target(e,r,n),s=this.getCurrentPath();if(!u.exists())return this._handleInvalidTargetState(s,u);if(!u.valid())return He(u.error());var c=function(e){return function(r){if(r instanceof Ne){var n=o.globals.lastStartedTransitionId===e.$id;if(r.type===t.RejectType.IGNORED)return n&&o.urlRouter.update(),se.$q.when(a.current);var u=r.detail;if(r.type===t.RejectType.SUPERSEDED&&r.redirected&&u instanceof We){var s=e.redirect(u);return s.run().catch(c(s))}if(r.type===t.RejectType.ABORTED)return n&&o.urlRouter.update(),se.$q.reject(r)}return i.defaultErrorHandler()(r),se.$q.reject(r)}},f=this.router.transitionService.create(s,u),l=f.run().catch(c(f));return Ae(l),ve(l,{transition:f})},e.prototype.is=function(t,e,r){r=m(r,{relative:this.$current});var n=this.router.stateRegistry.matcher.find(t,r.relative);if(Qt(n)){if(this.$current!==n)return!1;if(!e)return!0;var i=n.parameters({inherit:!0,matchingKeys:e});return tr.equals(i,tr.values(i,e),this.params)}},e.prototype.includes=function(t,e,r){r=m(r,{relative:this.$current});var n=te(t)&&Gt.fromString(t);if(n){if(!n.matches(this.$current.name))return!1;t=this.$current.name}var i=this.router.stateRegistry.matcher.find(t,r.relative),o=this.$current.includes;if(Qt(i)){if(!Qt(o[i.name]))return!1;if(!e)return!0;var a=i.parameters({inherit:!0,matchingKeys:e});return tr.equals(a,tr.values(a,e),this.params)}},e.prototype.href=function(t,e,r){r=m(r,{lossy:!0,inherit:!0,absolute:!1,relative:this.$current}),e=e||{};var n=this.router.stateRegistry.matcher.find(t,r.relative);if(!Qt(n))return null;r.inherit&&(e=this.params.$inherit(e,this.$current,n));var i=n&&r.lossy?n.navigable:n;return i&&void 0!==i.url&&null!==i.url?this.router.urlRouter.href(i.url,e,{absolute:r.absolute}):null},e.prototype.defaultErrorHandler=function(t){return this._defaultErrorHandler=t||this._defaultErrorHandler},e.prototype.get=function(t,e){var r=this.router.stateRegistry;return 0===arguments.length?r.get():r.get(t,e||this.$current)},e.prototype.lazyLoad=function(t,e){var r=this.get(t);if(!r||!r.lazyLoad)throw new Error("Can not lazy load "+t);var n=this.getCurrentPath(),i=rr.makeTargetState(n);return e=e||this.router.transitionService.create(n,i),ct(e,r)},e}(),Tn={when:function(t){return new Promise(function(e,r){return e(t)})},reject:function(t){return new Promise(function(e,r){r(t)})},defer:function(){var t={};return t.promise=new Promise(function(e,r){t.resolve=e,t.reject=r}),t},all:function(t){if(re(t))return Promise.all(t);if(ee(t)){var e=Object.keys(t).map(function(e){return t[e].then(function(t){return{key:e,val:t}})});return Tn.all(e).then(function(t){return t.reduce(function(t,e){return t[e.key]=e.val,t},{})})}}},Cn={},Pn=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,kn=/([^\s,]+)/g,On={get:function(t){return Cn[t]},has:function(t){return null!=On.get(t)},invoke:function(t,e,r){var n=ve({},Cn,r||{}),i=On.annotate(t),o=je(function(t){return n.hasOwnProperty(t)},function(t){return"DI can't find injectable: '"+t+"'"}),a=i.filter(o).map(function(t){return n[t]});return Zt(t)?t.apply(e,a):t.slice(-1)[0].apply(e,a)},annotate:function(t){if(!c(t))throw new Error("Not an injectable function: "+t);if(t&&t.$inject)return t.$inject;if(re(t))return t.slice(0,-1);var e=t.toString().replace(Pn,"");return e.slice(e.indexOf("(")+1,e.indexOf(")")).match(kn)||[]}},xn=function(t){return function(e){if(!e)return["",""];var r=e.indexOf(t);return-1===r?[e,""]:[e.substr(0,r),e.substr(r+1)]}},jn=xn("#"),In=xn("?"),Vn=xn("="),An=function(t){return t?t.replace(/^#/,""):""},Hn=function(t,e){var r=e[0],n=e[1];return t.hasOwnProperty(r)?re(t[r])?t[r].push(n):t[r]=[t[r],n]:t[r]=n,t},qn=function(t){return t.split("&").filter(f).map(Vn).reduce(Hn,{})},Dn=function(t){var e=t.path(),r=t.search(),n=t.hash(),i=Object.keys(r).map(function(t){var e=r[t];return(re(e)?e:[e]).map(function(e){return t+"="+e})}).reduce(Ce,[]).join("&");return e+(i?"?"+i:"")+(n?"#"+n:"")},Nn=function(){function t(t,e){var r=this;this.fireAfterUpdate=e,this._listener=function(t){return r._listeners.forEach(function(e){return e(t)})},this._listeners=[],this.hash=function(){return ht(r._get()).hash},this.path=function(){return ht(r._get()).path},this.search=function(){return qn(ht(r._get()).search)},this._location=window&&window.location,this._history=window&&window.history}return t.prototype.url=function(t,e){if(void 0===e&&(e=!0),Qt(t)&&t!==this._get()&&(this._set(null,null,t,e),this.fireAfterUpdate)){var r=ve(new Event("locationchange"),{url:t});this._listeners.forEach(function(t){return t(r)})}return Dn(this)},t.prototype.onChange=function(t){var e=this;return this._listeners.push(t),function(){return we(e._listeners,t)}},t.prototype.dispose=function(t){$e(this._listeners)},t}(),Fn=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Un=function(t){function e(e){var r=t.call(this,e,!1)||this;return window.addEventListener("hashchange",r._listener,!1),r}return Fn(e,t),e.prototype._get=function(){return An(this._location.hash)},e.prototype._set=function(t,e,r,n){this._location.hash=r},e.prototype.dispose=function(e){t.prototype.dispose.call(this,e),window.removeEventListener("hashchange",this._listener)},e}(Nn),Ln=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mn=function(t){function e(e){return t.call(this,e,!0)||this}return Ln(e,t),e.prototype._get=function(){return this._url},e.prototype._set=function(t,e,r,n){this._url=r},e}(Nn),Gn=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Bn=function(t){function e(e){var r=t.call(this,e,!0)||this;return r._config=e.urlService.config,window.addEventListener("popstate",r._listener,!1),r}return Gn(e,t),e.prototype._get=function(){var t=this._location,e=t.pathname,r=t.hash,n=t.search;return n=In(n)[1],r=jn(r)[1],e+(n?"?"+n:"")+(r?"$"+n:"")},e.prototype._set=function(t,e,r,n){var i=this,o=i._config,a=i._history,u=o.baseHref()+r;n?a.replaceState(t,e,u):a.pushState(t,e,u)},e.prototype.dispose=function(e){t.prototype.dispose.call(this,e),window.removeEventListener("popstate",this._listener)},e}(Nn),Wn=function(){function t(){var t=this;this._baseHref="",this._port=80,this._protocol="http",this._host="localhost",this._hashPrefix="",this.port=function(){return t._port},this.protocol=function(){return t._protocol},this.host=function(){return t._host},this.baseHref=function(){return t._baseHref},this.html5Mode=function(){return!1},this.hashPrefix=function(e){return Qt(e)?t._hashPrefix=e:t._hashPrefix},this.dispose=l}return t}(),zn=function(){function t(t,e){void 0===e&&(e=!1),this._isHtml5=e,this._baseHref=void 0,this._hashPrefix=""}return t.prototype.port=function(){return location.port?Number(location.port):"https"===this.protocol()?443:80},t.prototype.protocol=function(){return location.protocol.replace(/:/g,"")},t.prototype.host=function(){return location.hostname},t.prototype.html5Mode=function(){return this._isHtml5},t.prototype.hashPrefix=function(t){return Qt(t)?this._hashPrefix=t:this._hashPrefix},t.prototype.baseHref=function(t){return Qt(t)?this._baseHref=t:this._baseHref||this.applyDocumentBaseHref()},t.prototype.applyDocumentBaseHref=function(){var t=document.getElementsByTagName("base");return this._baseHref=t.length?t[0].href.substr(location.origin.length):""},t.prototype.dispose=function(){},t}(),Jn=pt("vanilla.hashBangLocation",!1,Un,zn),Qn=pt("vanilla.pushStateLocation",!0,Bn,zn),Kn=pt("vanilla.memoryLocation",!1,Mn,Wn),Yn=function(){function t(){}return t.prototype.dispose=function(t){},t}(),Zn=Object.freeze({fromJson:le,toJson:he,copy:pe,forEach:de,extend:ve,equals:me,identity:f,noop:l,createProxyFunctions:h,inherit:ye,inArray:ge,_inArray:p,removeFrom:we,_removeFrom:d,pushTo:_e,_pushTo:v,deregAll:$e,defaults:m,mergeR:Se,ancestors:y,pick:g,omit:w,pluck:_,filter:$,find:S,mapObj:be,map:b,values:Re,allTrueR:Ee,anyTrueR:Te,unnestR:Ce,flattenR:Pe,pushR:R,uniqR:ke,unnest:Oe,flatten:xe,assertPredicate:je,assertMap:Ie,assertFn:E,pairs:Ve,arrayTuples:T,applyPairs:C,tail:P,_extend:x,silenceUncaughtInPromise:Ae,silentRejection:He,notImplemented:ue,services:se,Glob:Gt,curry:r,compose:n,pipe:i,prop:At,propEq:Ht,parse:qt,not:Dt,and:o,or:a,all:Nt,any:Ft,is:Ut,eq:Lt,val:Mt,invoke:u,pattern:s,isUndefined:Jt,isDefined:Qt,isNull:Kt,isNullOrUndefined:Yt,isFunction:Zt,isNumber:Xt,isString:te,isObject:ee,isArray:re,isDate:ne,isRegExp:ie,isState:oe,isInjectable:c,isPromise:ae,Queue:qe,maxLength:G,padString:B,kebobString:W,functionToString:z,fnToString:J,stringify:Q,beforeAfterSubstr:mr,splitOnDelim:K,joinNeighborsR:Y,get Category(){return t.Category},Trace:Ge,trace:Be,get DefType(){return t.DefType},Param:tr,ParamTypes:yr,StateParams:wr,ParamType:Ye,PathNode:er,PathUtils:rr,resolvePolicies:or,defaultResolvePolicy:nr,Resolvable:ir,NATIVE_INJECTOR_TOKEN:cr,ResolveContext:fr,resolvablesBuilder:nt,StateBuilder:Rr,StateObject:Bt,StateMatcher:Er,StateQueueManager:Tr,StateRegistry:Cr,StateService:En,TargetState:We,get TransitionHookPhase(){return t.TransitionHookPhase},get TransitionHookScope(){return t.TransitionHookScope},HookBuilder:Ke,matchState:H,RegisteredHook:Qe,makeEvent:q,get RejectType(){return t.RejectType},Rejection:Ne,Transition:pr,TransitionHook:Je,TransitionEventType:_n,defaultTransOpts:bn,TransitionService:Rn,UrlMatcher:Or,UrlMatcherFactory:xr,UrlRouter:Dr,UrlRuleFactory:jr,BaseUrlRule:Ir,UrlService:zr,ViewService:Nr,UIRouterGlobals:Fr,UIRouter:Qr,$q:Tn,$injector:On,BaseLocationServices:Nn,HashLocationService:Un,MemoryLocationService:Mn,PushStateLocationService:Bn,MemoryLocationConfig:Wn,BrowserLocationConfig:zn,splitHash:jn,splitQuery:In,splitEqual:Vn,trimHashVal:An,keyValsToObjectR:Hn,getParams:qn,parseUrl:ht,buildUrl:Dn,locationPluginFactory:pt,servicesPlugin:dt,hashLocationPlugin:Jn,pushStateLocationPlugin:Qn,memoryLocationPlugin:Kn,UIRouterPluginBase:Yn}),Xn=function(t,e){return t.reduce(function(t,r){return t||Qt(e[r])},!1)},ti=0,ei=function(){function t(t,e,r){var n=this;this.path=t,this.viewDecl=e,this.factory=r,this.$id=ti++,this.loaded=!1,this.getTemplate=function(t,e){return n.component?n.factory.makeComponentTemplate(t,e,n.component,n.viewDecl.bindings):n.template}}return t.prototype.load=function(){var t=this,e=se.$q,r=new fr(this.path),n=this.path.reduce(function(t,e){return ve(t,e.paramValues)},{}),i={
template:e.when(this.factory.fromConfig(this.viewDecl,n,r)),controller:e.when(this.getController(r))};return e.all(i).then(function(e){return Be.traceViewServiceEvent("Loaded",t),t.controller=e.controller,ve(t,e.template),t})},t.prototype.getController=function(t){var e=this.viewDecl.controllerProvider;if(!c(e))return this.viewDecl.controller;var r=se.$injector.annotate(e),n=re(e)?P(e):e;return new ir("",n,r).get(t)},t}(),ri=function(){function t(){var t=this;this._useHttp=Vt.version.minor<3,this.$get=["$http","$templateCache","$injector",function(e,r,n){return t.$templateRequest=n.has&&n.has("$templateRequest")&&n.get("$templateRequest"),t.$http=e,t.$templateCache=r,t}]}return t.prototype.useHttpService=function(t){this._useHttp=t},t.prototype.fromConfig=function(t,e,r){var n=function(t){return se.$q.when(t).then(function(t){return{template:t}})},i=function(t){return se.$q.when(t).then(function(t){return{component:t}})};return Qt(t.template)?n(this.fromString(t.template,e)):Qt(t.templateUrl)?n(this.fromUrl(t.templateUrl,e)):Qt(t.templateProvider)?n(this.fromProvider(t.templateProvider,e,r)):Qt(t.component)?i(t.component):Qt(t.componentProvider)?i(this.fromComponentProvider(t.componentProvider,e,r)):n("<ui-view></ui-view>")},t.prototype.fromString=function(t,e){return Zt(t)?t(e):t},t.prototype.fromUrl=function(t,e){return Zt(t)&&(t=t(e)),null==t?null:this._useHttp?this.$http.get(t,{cache:this.$templateCache,headers:{Accept:"text/html"}}).then(function(t){return t.data}):this.$templateRequest(t)},t.prototype.fromProvider=function(t,e,r){var n=se.$injector.annotate(t),i=re(t)?P(t):t;return new ir("",i,n).get(r)},t.prototype.fromComponentProvider=function(t,e,r){var n=se.$injector.annotate(t),i=re(t)?P(t):t;return new ir("",i,n).get(r)},t.prototype.makeComponentTemplate=function(t,e,r,n){n=n||{};var i=Vt.version.minor>=3?"::":"",o=function(t){var e=W(t);return/^(x|data)-/.exec(e)?"x-"+e:e},a=function(r){var a=r.name,u=r.type,s=o(a);if(t.attr(s)&&!n[a])return s+"='"+t.attr(s)+"'";var c=n[a]||a;if("@"===u)return s+"='{{"+i+"$resolve."+c+"}}'";if("&"===u){var f=e.getResolvable(c),l=f&&f.data,h=l&&se.$injector.annotate(l)||[];return s+"='$resolve."+c+(re(l)?"["+(l.length-1)+"]":"")+"("+h.join(",")+")'"}return s+"='"+i+"$resolve."+c+"'"},u=yt(r).map(a).join(" "),s=o(r);return"<"+s+" "+u+"></"+s+">"},t}(),ni=function(t){return ii(ee(t.bindToController)?t.bindToController:t.scope)},ii=function(t){return Object.keys(t||{}).map(function(e){return[e,/^([=<@&])[?]?(.*)/.exec(t[e])]}).filter(function(t){return Qt(t)&&re(t[1])}).map(function(t){return{name:t[1][2]||t[0],type:t[1][1]}})},oi=function(){function t(e,r){this.stateRegistry=e,this.stateService=r,h(Mt(t.prototype),this,Mt(this))}return t.prototype.decorator=function(t,e){return this.stateRegistry.decorator(t,e)||this},t.prototype.state=function(t,e){return ee(t)?e=t:e.name=t,this.stateRegistry.register(e),this},t.prototype.onInvalid=function(t){return this.stateService.onInvalid(t)},t}(),ai=function(t){return function(e,r){function n(t,e){var r=new fr(t.treeChanges(o)),n=ve(wi(r),{$state$:e,$transition$:t});return se.$injector.invoke(i,this,n)}var i=e[t],o="onExit"===t?"from":"to";return i?n:void 0}},ui=function(){function t(t){this._urlListeners=[],this.$locationProvider=t;var e=Mt(t);h(e,this,e,["hashPrefix"])}return t.prototype.dispose=function(){},t.prototype.onChange=function(t){var e=this;return this._urlListeners.push(t),function(){return we(e._urlListeners)(t)}},t.prototype.html5Mode=function(){var t=this.$locationProvider.html5Mode();return(t=ee(t)?t.enabled:t)&&this.$sniffer.history},t.prototype.url=function(t,e,r){return void 0===e&&(e=!1),t&&this.$location.url(t),e&&this.$location.replace(),r&&this.$location.state(r),this.$location.url()},t.prototype._runtimeServices=function(t,e,r,n){var i=this;this.$location=e,this.$sniffer=r,t.$on("$locationChangeSuccess",function(t){return i._urlListeners.forEach(function(e){return e(t)})});var o=Mt(e),a=Mt(n);h(o,this,o,["replace","path","search","hash"]),h(o,this,o,["port","protocol","host"]),h(a,this,a,["baseHref"])},t.monkeyPatchPathParameterType=function(t){var e=t.urlMatcherFactory.type("path");e.encode=function(t){return null!=t?t.toString().replace(/(~|\/)/g,function(t){return{"~":"~~","/":"~2F"}[t]}):t},e.decode=function(t){return null!=t?t.toString().replace(/(~~|~2F)/g,function(t){return{"~~":"~","~2F":"/"}[t]}):t}},t}(),si=function(){function t(t){this._router=t,this._urlRouter=t.urlRouter}return t.prototype.$get=function(){var t=this._urlRouter;return t.update(!0),t.interceptDeferred||t.listen(),t},t.prototype.rule=function(t){var e=this;if(!Zt(t))throw new Error("'rule' must be a function");var r=function(){return t(se.$injector,e._router.locationService)},n=new Ir(r,f);return this._urlRouter.rule(n),this},t.prototype.otherwise=function(t){var e=this,r=this._urlRouter;if(te(t))r.otherwise(t);else{if(!Zt(t))throw new Error("'rule' must be a string or function");r.otherwise(function(){return t(se.$injector,e._router.locationService)})}return this},t.prototype.when=function(e,r){return(re(r)||Zt(r))&&(r=t.injectableHandler(this._router,r)),this._urlRouter.when(e,r),this},t.injectableHandler=function(t,e){return function(r){return se.$injector.invoke(e,null,{$match:r,$stateParams:t.globals.params})}},t.prototype.deferIntercept=function(t){this._urlRouter.deferIntercept(t)},t}();Vt.module("ui.router.angular1",[]);var ci=Vt.module("ui.router.init",[]),fi=Vt.module("ui.router.util",["ng","ui.router.init"]),li=Vt.module("ui.router.router",["ui.router.util"]),hi=Vt.module("ui.router.state",["ui.router.router","ui.router.util","ui.router.angular1"]),pi=Vt.module("ui.router",["ui.router.init","ui.router.state","ui.router.angular1"]),di=(Vt.module("ui.router.compat",["ui.router"]),null);gt.$inject=["$locationProvider"];var vi=function(t){return["$uiRouterProvider",function(e){var r=e.router[t];return r.$get=function(){return r},r}]};wt.$inject=["$injector","$q","$uiRouter"];var mi=function(t){return t.urlRouterProvider=new si(t)},yi=function(){return ve(di.stateProvider,{$get:function(){return di.stateService}})};_t.$inject=["$rootScope"],ci.provider("$uiRouter",gt),li.provider("$urlRouter",["$uiRouterProvider",mi]),fi.provider("$urlService",vi("urlService")),fi.provider("$urlMatcherFactory",["$uiRouterProvider",function(){return di.urlMatcherFactory}]),fi.provider("$templateFactory",function(){return new ri}),hi.provider("$stateRegistry",vi("stateRegistry")),hi.provider("$uiRouterGlobals",vi("globals")),hi.provider("$transitions",vi("transitionService")),hi.provider("$state",["$uiRouterProvider",yi]),hi.factory("$stateParams",["$uiRouter",function(t){return t.globals.params}]),pi.factory("$view",function(){return di.viewService}),pi.service("$trace",function(){return Be}),pi.run(_t),fi.run(["$urlMatcherFactory",function(t){}]),hi.run(["$state",function(t){}]),li.run(["$urlRouter",function(t){}]),ci.run(wt);var gi,wi=function(t){return t.getTokens().filter(te).map(function(e){var r=t.getResolvable(e);return[e,"NOWAIT"===t.getPolicy(r).async?r.promise:r.data]}).reduce(C,{})};gi=["$uiRouter","$timeout",function(t,e){var r=t.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(n,i,o,a){function u(){var t=p();l&&l(),f&&(l=f.$$addStateInfo(t.uiState,t.uiStateParams)),null!=t.href&&o.$set(c.attr,t.href)}var s,c=Rt(i),f=a[1]||a[0],l=null,h={},p=function(){return bt(r,i,h)},d=$t(o.uiSref);h.uiState=d.state,h.uiStateOpts=o.uiSrefOpts?n.$eval(o.uiSrefOpts):{},d.paramExpr&&(n.$watch(d.paramExpr,function(t){h.uiStateParams=ve({},t),u()},!0),h.uiStateParams=ve({},n.$eval(d.paramExpr))),u(),n.$on("$destroy",t.stateRegistry.onStatesChanged(u)),n.$on("$destroy",t.transitionService.onSuccess({},u)),c.clickable&&(s=Et(i,r,e,c,p),Ct(i,n,s,h.uiStateOpts))}}}];var _i;_i=["$uiRouter","$timeout",function(t,e){var r=t.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(n,i,o,a){function u(){var t=d();h&&h(),f&&(h=f.$$addStateInfo(t.uiState,t.uiStateParams)),null!=t.href&&o.$set(c.attr,t.href)}var s,c=Rt(i),f=a[1]||a[0],h=null,p={},d=function(){return bt(r,i,p)},v=["uiState","uiStateParams","uiStateOpts"],m=v.reduce(function(t,e){return t[e]=l,t},{});v.forEach(function(t){p[t]=o[t]?n.$eval(o[t]):null,o.$observe(t,function(e){m[t](),m[t]=n.$watch(e,function(e){p[t]=e,u()},!0)})}),u(),n.$on("$destroy",t.stateRegistry.onStatesChanged(u)),n.$on("$destroy",t.transitionService.onSuccess({},u)),c.clickable&&(s=Et(i,r,e,c,d),Ct(i,n,s,p.uiStateOpts))}}}];var $i;$i=["$state","$stateParams","$interpolate","$uiRouter",function(t,e,r,n){return{restrict:"A",controller:["$scope","$element","$attrs",function(e,i,o){function a(t){t.promise.then(s,l)}function u(e,r,n){var o=t.get(e,St(i)),a={state:o||{name:e},params:r,activeClass:n};return p.push(a),function(){we(p)(a)}}function s(){var r=function(t){return t.split(/\s/).filter(f)},n=function(t){return t.map(function(t){return t.activeClass}).map(r).reduce(Ce,[])},o=n(p).concat(r(c)).reduce(ke,[]),a=n(p.filter(function(e){return t.includes(e.state.name,e.params)})),u=!!p.filter(function(e){return t.is(e.state.name,e.params)}).length,s=u?r(c):[],l=a.concat(s).reduce(ke,[]),h=o.filter(function(t){return!ge(l,t)});e.$evalAsync(function(){l.forEach(function(t){return i.addClass(t)}),h.forEach(function(t){return i.removeClass(t)})})}var c,h,p=[];c=r(o.uiSrefActiveEq||"",!1)(e);try{h=e.$eval(o.uiSrefActive)}catch(t){}h=h||r(o.uiSrefActive||"",!1)(e),ee(h)&&de(h,function(t,r){if(te(t)){var n=$t(t);u(n.state,e.$eval(n.paramExpr),r)}}),this.$$addStateInfo=function(t,e){if(!(ee(h)&&p.length>0)){var r=u(t,e,h);return s(),r}},e.$on("$stateChangeSuccess",s),e.$on("$destroy",n.transitionService.onStart({},a)),n.globals.transition&&a(n.globals.transition),s()}]}}],Vt.module("ui.router.state").directive("uiSref",gi).directive("uiSrefActive",$i).directive("uiSrefActiveEq",$i).directive("uiState",_i),Pt.$inject=["$state"],kt.$inject=["$state"],Vt.module("ui.router.state").filter("isState",Pt).filter("includedByState",kt);var Si;Si=["$view","$animate","$uiViewScroll","$interpolate","$q",function(t,e,r,n,i){function o(t,r){return{enter:function(t,r,n){Vt.version.minor>2?e.enter(t,null,r).then(n):e.enter(t,null,r,n)},leave:function(t,r){Vt.version.minor>2?e.leave(t).then(r):e.leave(t,r)}}}function a(t,e){return t===e}var u={$cfg:{viewDecl:{$context:t._pluginapi._rootViewContext()}},$uiView:{}},s={count:0,restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(e,c,f){return function(e,c,l){function h(t){(!t||t instanceof ei)&&(a(S,t)||(Be.traceUIViewConfigUpdated(E,t&&t.viewDecl&&t.viewDecl.$context),S=t,d(t)))}function p(){if(v&&(Be.traceUIViewEvent("Removing (previous) el",v.data("$uiView")),v.remove(),v=null),y&&(Be.traceUIViewEvent("Destroying scope",E),y.$destroy(),y=null),m){var t=m.data("$uiViewAnim");Be.traceUIViewEvent("Animate out",t),$.leave(m,function(){t.$$animLeave.resolve(),v=null}),v=m,m=null}}function d(t){var n=e.$new(),o=i.defer(),a=i.defer(),u={$cfg:t,$uiView:E},s={$animEnter:o.promise,$animLeave:a.promise,$$animLeave:a};n.$emit("$viewContentLoading",R);var l=f(n,function(t){t.data("$uiViewAnim",s),t.data("$uiView",u),$.enter(t,c,function(){o.resolve(),y&&y.$emit("$viewContentAnimationEnded"),(Qt(_)&&!_||e.$eval(_))&&r(t)}),p()});m=l,y=n,y.$emit("$viewContentLoaded",t||S),y.$eval(w)}var v,m,y,g,w=l.onload||"",_=l.autoscroll,$=o(l,e),S=void 0,b=c.inheritedData("$uiView")||u,R=n(l.uiView||l.name||"")(e)||"$default",E={$type:"ng1",id:s.count++,name:R,fqn:b.$uiView.fqn?b.$uiView.fqn+"."+R:R,config:null,configUpdated:h,get creationContext(){var t=qt("$cfg.viewDecl.$context")(b),e=qt("$uiView.creationContext")(b);return t||e}};Be.traceUIViewEvent("Linking",E),c.data("$uiView",{$uiView:E}),d(),g=t.registerUIView(E),e.$on("$destroy",function(){Be.traceUIViewEvent("Destroying/Unregistering",E),g()})}}};return s}],Ot.$inject=["$compile","$controller","$transitions","$view","$q","$timeout"];var bi="function"==typeof Vt.module("ui.router").component,Ri=0;Vt.module("ui.router.state").directive("uiView",Si),Vt.module("ui.router.state").directive("uiView",Ot),Vt.module("ui.router.state").provider("$uiViewScroll",jt);t.default="ui.router",t.core=Zn,t.watchDigests=_t,t.getLocals=wi,t.getNg1ViewConfigFactory=vt,t.ng1ViewsBuilder=mt,t.Ng1ViewConfig=ei,t.StateProvider=oi,t.UrlRouterProvider=si,t.fromJson=le,t.toJson=he,t.copy=pe,t.forEach=de,t.extend=ve,t.equals=me,t.identity=f,t.noop=l,t.createProxyFunctions=h,t.inherit=ye,t.inArray=ge,t._inArray=p,t.removeFrom=we,t._removeFrom=d,t.pushTo=_e,t._pushTo=v,t.deregAll=$e,t.defaults=m,t.mergeR=Se,t.ancestors=y,t.pick=g,t.omit=w,t.pluck=_,t.filter=$,t.find=S,t.mapObj=be,t.map=b,t.values=Re,t.allTrueR=Ee,t.anyTrueR=Te,t.unnestR=Ce,t.flattenR=Pe,t.pushR=R,t.uniqR=ke,t.unnest=Oe,t.flatten=xe,t.assertPredicate=je,t.assertMap=Ie,t.assertFn=E,t.pairs=Ve,t.arrayTuples=T,t.applyPairs=C,t.tail=P,t._extend=x,t.silenceUncaughtInPromise=Ae,t.silentRejection=He,t.notImplemented=ue,t.services=se,t.Glob=Gt,t.curry=r,t.compose=n,t.pipe=i,t.prop=At,t.propEq=Ht,t.parse=qt,t.not=Dt,t.and=o,t.or=a,t.all=Nt,t.any=Ft,t.is=Ut,t.eq=Lt,t.val=Mt,t.invoke=u,t.pattern=s,t.isUndefined=Jt,t.isDefined=Qt,t.isNull=Kt,t.isNullOrUndefined=Yt,t.isFunction=Zt,t.isNumber=Xt,t.isString=te,t.isObject=ee,t.isArray=re,t.isDate=ne,t.isRegExp=ie,t.isState=oe,t.isInjectable=c,t.isPromise=ae,t.Queue=qe,t.maxLength=G,t.padString=B,t.kebobString=W,t.functionToString=z,t.fnToString=J,t.stringify=Q,t.beforeAfterSubstr=mr,t.splitOnDelim=K,t.joinNeighborsR=Y,t.Trace=Ge,t.trace=Be,t.Param=tr,t.ParamTypes=yr,t.StateParams=wr,t.ParamType=Ye,t.PathNode=er,t.PathUtils=rr,t.resolvePolicies=or,t.defaultResolvePolicy=nr,t.Resolvable=ir,t.NATIVE_INJECTOR_TOKEN=cr,t.ResolveContext=fr,t.resolvablesBuilder=nt,t.StateBuilder=Rr,t.StateObject=Bt,t.StateMatcher=Er,t.StateQueueManager=Tr,t.StateRegistry=Cr,t.StateService=En,t.TargetState=We,t.HookBuilder=Ke,t.matchState=H,t.RegisteredHook=Qe,t.makeEvent=q,t.Rejection=Ne,t.Transition=pr,t.TransitionHook=Je,t.TransitionEventType=_n,t.defaultTransOpts=bn,t.TransitionService=Rn,t.UrlMatcher=Or,t.UrlMatcherFactory=xr,t.UrlRouter=Dr,t.UrlRuleFactory=jr,t.BaseUrlRule=Ir,t.UrlService=zr,t.ViewService=Nr,t.UIRouterGlobals=Fr,t.UIRouter=Qr,t.$q=Tn,t.$injector=On,t.BaseLocationServices=Nn,t.HashLocationService=Un,t.MemoryLocationService=Mn,t.PushStateLocationService=Bn,t.MemoryLocationConfig=Wn,t.BrowserLocationConfig=zn,t.splitHash=jn,t.splitQuery=In,t.splitEqual=Vn,t.trimHashVal=An,t.keyValsToObjectR=Hn,t.getParams=qn,t.parseUrl=ht,t.buildUrl=Dn,t.locationPluginFactory=pt,t.servicesPlugin=dt,t.hashLocationPlugin=Jn,t.pushStateLocationPlugin=Qn,t.memoryLocationPlugin=Kn,t.UIRouterPluginBase=Yn,Object.defineProperty(t,"__esModule",{value:!0})});


/**
 * State-based routing for AngularJS 1.x
 * @version v1.0.6
 * @link https://ui-router.github.io
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("angular")):"function"==typeof define&&define.amd?define(["exports","angular"],e):e(t["@uirouter/angularjs-state-events"]=t["@uirouter/angularjs-state-events"]||{},t.angular)}(this,function(t,e){"use strict";var r=angular,n=e&&e.module?e:r;!function(){function t(t,e){var r,n;if(Array.isArray(e)&&(r=e[0],n=e[1]),!s(r))throw new Error("invalid parameters to applyPairs");return t[r]=n,t}function e(t){if(t.options().notify&&t.valid()&&!t.ignored()){var e=t.injector(),r=e.get("$stateEvents"),n=e.get("$rootScope"),o=e.get("$state"),a=e.get("$urlRouter"),s=r.provider.enabled(),i=t.params("to"),u=t.params("from");if(s.$stateChangeSuccess){if(n.$broadcast("$stateChangeStart",t.to(),i,t.from(),u,t.options(),t).defaultPrevented)return s.$stateChangeCancel&&n.$broadcast("$stateChangeCancel",t.to(),i,t.from(),u,t.options(),t),null==o.transition&&a.update(),!1;var c={priority:9999};t.onSuccess({},function(){n.$broadcast("$stateChangeSuccess",t.to(),i,t.from(),u,t.options(),t)},c)}s.$stateChangeError&&t.promise.catch(function(e){if(!e||2!==e.type&&3!==e.type){n.$broadcast("$stateChangeError",t.to(),i,t.from(),u,e,t.options(),t).defaultPrevented||a.update()}})}}function r(t,e,r){function n(){return o.target(u.to,u.toParams,u.options)}var o=r.get("$state"),s=r.get("$rootScope"),i=r.get("$urlRouter"),u={to:t.identifier(),toParams:t.params(),options:t.options()},c=s.$broadcast("$stateNotFound",u,e.state(),e.params());return(c.defaultPrevented||c.retry)&&i.update(),!c.defaultPrevented&&(c.retry||o.get(u.to)?c.retry&&a(c.retry.then)?c.retry.then(n):n():void 0)}function o(n){function a(){if(i)throw new Error("Cannot enable events at runtime (use $stateEventsProvider")}function s(t){return i=!0,c.$stateNotFound&&n.onInvalid(r),c.$stateChangeStart&&t.onBefore({},e,{priority:1e3}),{provider:o.prototype.instance}}o.prototype.instance=this;var i=!1,u=["$stateChangeStart","$stateNotFound","$stateChangeSuccess","$stateChangeError"],c=u.map(function(t){return[t,!0]}).reduce(t,{});this.enable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a(),t&&t.length||(t=u),t.forEach(function(t){return c[t]=!0})},this.disable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a(),t&&t.length||(t=u),t.forEach(function(t){return delete c[t]})},this.enabled=function(){return c},this.$get=s,s.$inject=["$transitions"]}var a=n.isFunction,s=n.isString;r.$inject=["$to$","$from$","$state","$rootScope","$urlRouter"],o.$inject=["$stateProvider"],n.module("ui.router.state.events",["ui.router.state"]).provider("$stateEvents",o).run(["$stateEvents",function(t){}])}(),t.$stateChangeStart=void 0,t.$stateChangeCancel=void 0,t.$stateChangeSuccess=void 0,t.$stateChangeError=void 0,t.$stateNotFound=void 0,Object.defineProperty(t,"__esModule",{value:!0})});


/*
 * angular-ui-bootstrap
 * http://angular-ui.github.io/bootstrap/

 * Version: 2.5.0 - 2017-01-28
 * License: MIT
 */angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.tabindex","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.isClass","ui.bootstrap.datepicker","ui.bootstrap.position","ui.bootstrap.datepickerPopup","ui.bootstrap.debounce","ui.bootstrap.multiMap","ui.bootstrap.dropdown","ui.bootstrap.stackedMap","ui.bootstrap.modal","ui.bootstrap.paging","ui.bootstrap.pager","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["uib/template/accordion/accordion-group.html","uib/template/accordion/accordion.html","uib/template/alert/alert.html","uib/template/carousel/carousel.html","uib/template/carousel/slide.html","uib/template/datepicker/datepicker.html","uib/template/datepicker/day.html","uib/template/datepicker/month.html","uib/template/datepicker/year.html","uib/template/datepickerPopup/popup.html","uib/template/modal/window.html","uib/template/pager/pager.html","uib/template/pagination/pagination.html","uib/template/tooltip/tooltip-html-popup.html","uib/template/tooltip/tooltip-popup.html","uib/template/tooltip/tooltip-template-popup.html","uib/template/popover/popover-html.html","uib/template/popover/popover-template.html","uib/template/popover/popover.html","uib/template/progressbar/bar.html","uib/template/progressbar/progress.html","uib/template/progressbar/progressbar.html","uib/template/rating/rating.html","uib/template/tabs/tab.html","uib/template/tabs/tabset.html","uib/template/timepicker/timepicker.html","uib/template/typeahead/typeahead-match.html","uib/template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.collapse",[]).directive("uibCollapse",["$animate","$q","$parse","$injector",function(a,b,c,d){var e=d.has("$animateCss")?d.get("$animateCss"):null;return{link:function(d,f,g){function h(){r=!!("horizontal"in g),r?(s={width:""},t={width:"0"}):(s={height:""},t={height:"0"}),d.$eval(g.uibCollapse)||f.addClass("in").addClass("collapse").attr("aria-expanded",!0).attr("aria-hidden",!1).css(s)}function i(a){return r?{width:a.scrollWidth+"px"}:{height:a.scrollHeight+"px"}}function j(){f.hasClass("collapse")&&f.hasClass("in")||b.resolve(n(d)).then(function(){f.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),e?e(f,{addClass:"in",easing:"ease",css:{overflow:"hidden"},to:i(f[0])}).start()["finally"](k):a.addClass(f,"in",{css:{overflow:"hidden"},to:i(f[0])}).then(k)},angular.noop)}function k(){f.removeClass("collapsing").addClass("collapse").css(s),o(d)}function l(){return f.hasClass("collapse")||f.hasClass("in")?void b.resolve(p(d)).then(function(){f.css(i(f[0])).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),e?e(f,{removeClass:"in",to:t}).start()["finally"](m):a.removeClass(f,"in",{to:t}).then(m)},angular.noop):m()}function m(){f.css(t),f.removeClass("collapsing").addClass("collapse"),q(d)}var n=c(g.expanding),o=c(g.expanded),p=c(g.collapsing),q=c(g.collapsed),r=!1,s={},t={};h(),d.$watch(g.uibCollapse,function(a){a?l():j()})}}}]),angular.module("ui.bootstrap.tabindex",[]).directive("uibTabindexToggle",function(){return{restrict:"A",link:function(a,b,c){c.$observe("disabled",function(a){c.$set("tabindex",a?-1:null)})}}}),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse","ui.bootstrap.tabindex"]).constant("uibAccordionConfig",{closeOthers:!0}).controller("UibAccordionController",["$scope","$attrs","uibAccordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(c){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(b,1)}}]).directive("uibAccordion",function(){return{controller:"UibAccordionController",controllerAs:"accordion",transclude:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/accordion/accordion.html"}}}).directive("uibAccordionGroup",function(){return{require:"^uibAccordion",transclude:!0,restrict:"A",templateUrl:function(a,b){return b.templateUrl||"uib/template/accordion/accordion-group.html"},scope:{heading:"@",panelClass:"@?",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(a,b,c,d){b.addClass("panel"),d.addGroup(a),a.openClass=c.openClass||"panel-open",a.panelClass=c.panelClass||"panel-default",a.$watch("isOpen",function(c){b.toggleClass(a.openClass,!!c),c&&d.closeOthers(a)}),a.toggleOpen=function(b){a.isDisabled||b&&32!==b.which||(a.isOpen=!a.isOpen)};var e="accordiongroup-"+a.$id+"-"+Math.floor(1e4*Math.random());a.headingId=e+"-tab",a.panelId=e+"-panel"}}}).directive("uibAccordionHeading",function(){return{transclude:!0,template:"",replace:!0,require:"^uibAccordionGroup",link:function(a,b,c,d,e){d.setHeading(e(a,angular.noop))}}}).directive("uibAccordionTransclude",function(){function a(){return"uib-accordion-header,data-uib-accordion-header,x-uib-accordion-header,uib\\:accordion-header,[uib-accordion-header],[data-uib-accordion-header],[x-uib-accordion-header]"}return{require:"^uibAccordionGroup",link:function(b,c,d,e){b.$watch(function(){return e[d.uibAccordionTransclude]},function(b){if(b){var d=angular.element(c[0].querySelector(a()));d.html(""),d.append(b)}})}}}),angular.module("ui.bootstrap.alert",[]).controller("UibAlertController",["$scope","$element","$attrs","$interpolate","$timeout",function(a,b,c,d,e){a.closeable=!!c.close,b.addClass("alert"),c.$set("role","alert"),a.closeable&&b.addClass("alert-dismissible");var f=angular.isDefined(c.dismissOnTimeout)?d(c.dismissOnTimeout)(a.$parent):null;f&&e(function(){a.close()},parseInt(f,10))}]).directive("uibAlert",function(){return{controller:"UibAlertController",controllerAs:"alert",restrict:"A",templateUrl:function(a,b){return b.templateUrl||"uib/template/alert/alert.html"},transclude:!0,scope:{close:"&"}}}),angular.module("ui.bootstrap.buttons",[]).constant("uibButtonConfig",{activeClass:"active",toggleEvent:"click"}).controller("UibButtonsController",["uibButtonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("uibBtnRadio",["$parse",function(a){return{require:["uibBtnRadio","ngModel"],controller:"UibButtonsController",controllerAs:"buttons",link:function(b,c,d,e){var f=e[0],g=e[1],h=a(d.uibUncheckable);c.find("input").css({display:"none"}),g.$render=function(){c.toggleClass(f.activeClass,angular.equals(g.$modelValue,b.$eval(d.uibBtnRadio)))},c.on(f.toggleEvent,function(){if(!d.disabled){var a=c.hasClass(f.activeClass);a&&!angular.isDefined(d.uncheckable)||b.$apply(function(){g.$setViewValue(a?null:b.$eval(d.uibBtnRadio)),g.$render()})}}),d.uibUncheckable&&b.$watch(h,function(a){d.$set("uncheckable",a?"":void 0)})}}}]).directive("uibBtnCheckbox",function(){return{require:["uibBtnCheckbox","ngModel"],controller:"UibButtonsController",controllerAs:"button",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){return angular.isDefined(b)?a.$eval(b):c}var h=d[0],i=d[1];b.find("input").css({display:"none"}),i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.on(h.toggleEvent,function(){c.disabled||a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module("ui.bootstrap.carousel",[]).controller("UibCarouselController",["$scope","$element","$interval","$timeout","$animate",function(a,b,c,d,e){function f(a){for(var b=0;b<p.length;b++)p[b].slide.active=b===a}function g(c,d,g){if(!s){if(angular.extend(c,{direction:g}),angular.extend(p[r].slide||{},{direction:g}),e.enabled(b)&&!a.$currentTransition&&p[d].element&&o.slides.length>1){p[d].element.data(q,c.direction);var h=o.getCurrentIndex();angular.isNumber(h)&&p[h].element&&p[h].element.data(q,c.direction),a.$currentTransition=!0,e.on("addClass",p[d].element,function(b,c){"close"===c&&(a.$currentTransition=null,e.off("addClass",b))})}a.active=c.index,r=c.index,f(d),k()}}function h(a){for(var b=0;b<p.length;b++)if(p[b].slide===a)return b}function i(){m&&(c.cancel(m),m=null)}function j(b){b.length||(a.$currentTransition=null)}function k(){i();var b=+a.interval;!isNaN(b)&&b>0&&(m=c(l,b))}function l(){var b=+a.interval;n&&!isNaN(b)&&b>0&&p.length?a.next():a.pause()}var m,n,o=this,p=o.slides=a.slides=[],q="uib-slideDirection",r=a.active,s=!1;b.addClass("carousel"),o.addSlide=function(b,c){p.push({slide:b,element:c}),p.sort(function(a,b){return+a.slide.index-+b.slide.index}),(b.index===a.active||1===p.length&&!angular.isNumber(a.active))&&(a.$currentTransition&&(a.$currentTransition=null),r=b.index,a.active=b.index,f(r),o.select(p[h(b)]),1===p.length&&a.play())},o.getCurrentIndex=function(){for(var a=0;a<p.length;a++)if(p[a].slide.index===r)return a},o.next=a.next=function(){var b=(o.getCurrentIndex()+1)%p.length;return 0===b&&a.noWrap()?void a.pause():o.select(p[b],"next")},o.prev=a.prev=function(){var b=o.getCurrentIndex()-1<0?p.length-1:o.getCurrentIndex()-1;return a.noWrap()&&b===p.length-1?void a.pause():o.select(p[b],"prev")},o.removeSlide=function(b){var c=h(b);p.splice(c,1),p.length>0&&r===c?c>=p.length?(r=p.length-1,a.active=r,f(r),o.select(p[p.length-1])):(r=c,a.active=r,f(r),o.select(p[c])):r>c&&(r--,a.active=r),0===p.length&&(r=null,a.active=null)},o.select=a.select=function(b,c){var d=h(b.slide);void 0===c&&(c=d>o.getCurrentIndex()?"next":"prev"),b.slide.index===r||a.$currentTransition||g(b.slide,d,c)},a.indexOfSlide=function(a){return+a.slide.index},a.isActive=function(b){return a.active===b.slide.index},a.isPrevDisabled=function(){return 0===a.active&&a.noWrap()},a.isNextDisabled=function(){return a.active===p.length-1&&a.noWrap()},a.pause=function(){a.noPause||(n=!1,i())},a.play=function(){n||(n=!0,k())},b.on("mouseenter",a.pause),b.on("mouseleave",a.play),a.$on("$destroy",function(){s=!0,i()}),a.$watch("noTransition",function(a){e.enabled(b,!a)}),a.$watch("interval",k),a.$watchCollection("slides",j),a.$watch("active",function(a){if(angular.isNumber(a)&&r!==a){for(var b=0;b<p.length;b++)if(p[b].slide.index===a){a=b;break}var c=p[a];c&&(f(a),o.select(p[a]),r=a)}})}]).directive("uibCarousel",function(){return{transclude:!0,controller:"UibCarouselController",controllerAs:"carousel",restrict:"A",templateUrl:function(a,b){return b.templateUrl||"uib/template/carousel/carousel.html"},scope:{active:"=",interval:"=",noTransition:"=",noPause:"=",noWrap:"&"}}}).directive("uibSlide",["$animate",function(a){return{require:"^uibCarousel",restrict:"A",transclude:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/carousel/slide.html"},scope:{actual:"=?",index:"=?"},link:function(b,c,d,e){c.addClass("item"),e.addSlide(b,c),b.$on("$destroy",function(){e.removeSlide(b)}),b.$watch("active",function(b){a[b?"addClass":"removeClass"](c,"active")})}}}]).animation(".item",["$animateCss",function(a){function b(a,b,c){a.removeClass(b),c&&c()}var c="uib-slideDirection";return{beforeAddClass:function(d,e,f){if("active"===e){var g=!1,h=d.data(c),i="next"===h?"left":"right",j=b.bind(this,d,i+" "+h,f);return d.addClass(h),a(d,{addClass:i}).start().done(j),function(){g=!0}}f()},beforeRemoveClass:function(d,e,f){if("active"===e){var g=!1,h=d.data(c),i="next"===h?"left":"right",j=b.bind(this,d,i,f);return a(d,{addClass:i}).start().done(j),function(){g=!0}}f()}}}]),angular.module("ui.bootstrap.dateparser",[]).service("uibDateParser",["$log","$locale","dateFilter","orderByFilter","filterFilter",function(a,b,c,d,e){function f(a){return e(s,{key:a},!0)[0]}function g(a){var b=[],c=a.split(""),e=a.indexOf("'");if(e>-1){var f=!1;a=a.split("");for(var g=e;g<a.length;g++)f?("'"===a[g]&&(g+1<a.length&&"'"===a[g+1]?(a[g+1]="$",c[g+1]=""):(c[g]="",f=!1)),a[g]="$"):"'"===a[g]&&(a[g]="$",c[g]="",f=!0);a=a.join("")}return angular.forEach(s,function(d){var e=a.indexOf(d.key);if(e>-1){a=a.split(""),c[e]="("+d.regex+")",a[e]="$";for(var f=e+1,g=e+d.key.length;g>f;f++)c[f]="",a[f]="$";a=a.join(""),b.push({index:e,key:d.key,apply:d.apply,matcher:d.regex})}}),{regex:new RegExp("^"+c.join("")+"$"),map:d(b,"index")}}function h(a){for(var b,c,d=[],e=0;e<a.length;)if(angular.isNumber(c)){if("'"===a.charAt(e))(e+1>=a.length||"'"!==a.charAt(e+1))&&(d.push(i(a,c,e)),c=null);else if(e===a.length)for(;c<a.length;)b=j(a,c),d.push(b),c=b.endIdx;e++}else"'"!==a.charAt(e)?(b=j(a,e),d.push(b.parser),e=b.endIdx):(c=e,e++);return d}function i(a,b,c){return function(){return a.substr(b+1,c-b-1)}}function j(a,b){for(var c=a.substr(b),d=0;d<s.length;d++)if(new RegExp("^"+s[d].key).test(c)){var e=s[d];return{endIdx:b+e.key.length,parser:e.formatter}}return{endIdx:b+1,parser:function(){return c.charAt(0)}}}function k(a,b,c){return 1>c?!1:1===b&&c>28?29===c&&(a%4===0&&a%100!==0||a%400===0):3===b||5===b||8===b||10===b?31>c:!0}function l(a){return parseInt(a,10)}function m(a,b){return a&&b?q(a,b):a}function n(a,b){return a&&b?q(a,b,!0):a}function o(a,b){a=a.replace(/:/g,"");var c=Date.parse("Jan 01, 1970 00:00:00 "+a)/6e4;return isNaN(c)?b:c}function p(a,b){return a=new Date(a.getTime()),a.setMinutes(a.getMinutes()+b),a}function q(a,b,c){c=c?-1:1;var d=a.getTimezoneOffset(),e=o(b,d);return p(a,c*(e-d))}var r,s,t=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;this.init=function(){r=b.id,this.parsers={},this.formatters={},s=[{key:"yyyy",regex:"\\d{4}",apply:function(a){this.year=+a},formatter:function(a){var b=new Date;return b.setFullYear(Math.abs(a.getFullYear())),c(b,"yyyy")}},{key:"yy",regex:"\\d{2}",apply:function(a){a=+a,this.year=69>a?a+2e3:a+1900},formatter:function(a){var b=new Date;return b.setFullYear(Math.abs(a.getFullYear())),c(b,"yy")}},{key:"y",regex:"\\d{1,4}",apply:function(a){this.year=+a},formatter:function(a){var b=new Date;return b.setFullYear(Math.abs(a.getFullYear())),c(b,"y")}},{key:"M!",regex:"0?[1-9]|1[0-2]",apply:function(a){this.month=a-1},formatter:function(a){var b=a.getMonth();return/^[0-9]$/.test(b)?c(a,"MM"):c(a,"M")}},{key:"MMMM",regex:b.DATETIME_FORMATS.MONTH.join("|"),apply:function(a){this.month=b.DATETIME_FORMATS.MONTH.indexOf(a)},formatter:function(a){return c(a,"MMMM")}},{key:"MMM",regex:b.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(a){this.month=b.DATETIME_FORMATS.SHORTMONTH.indexOf(a)},formatter:function(a){return c(a,"MMM")}},{key:"MM",regex:"0[1-9]|1[0-2]",apply:function(a){this.month=a-1},formatter:function(a){return c(a,"MM")}},{key:"M",regex:"[1-9]|1[0-2]",apply:function(a){this.month=a-1},formatter:function(a){return c(a,"M")}},{key:"d!",regex:"[0-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a},formatter:function(a){var b=a.getDate();return/^[1-9]$/.test(b)?c(a,"dd"):c(a,"d")}},{key:"dd",regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a},formatter:function(a){return c(a,"dd")}},{key:"d",regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a},formatter:function(a){return c(a,"d")}},{key:"EEEE",regex:b.DATETIME_FORMATS.DAY.join("|"),formatter:function(a){return c(a,"EEEE")}},{key:"EEE",regex:b.DATETIME_FORMATS.SHORTDAY.join("|"),formatter:function(a){return c(a,"EEE")}},{key:"HH",regex:"(?:0|1)[0-9]|2[0-3]",apply:function(a){this.hours=+a},formatter:function(a){return c(a,"HH")}},{key:"hh",regex:"0[0-9]|1[0-2]",apply:function(a){this.hours=+a},formatter:function(a){return c(a,"hh")}},{key:"H",regex:"1?[0-9]|2[0-3]",apply:function(a){this.hours=+a},formatter:function(a){return c(a,"H")}},{key:"h",regex:"[0-9]|1[0-2]",apply:function(a){this.hours=+a},formatter:function(a){return c(a,"h")}},{key:"mm",regex:"[0-5][0-9]",apply:function(a){this.minutes=+a},formatter:function(a){return c(a,"mm")}},{key:"m",regex:"[0-9]|[1-5][0-9]",apply:function(a){this.minutes=+a},formatter:function(a){return c(a,"m")}},{key:"sss",regex:"[0-9][0-9][0-9]",apply:function(a){this.milliseconds=+a},formatter:function(a){return c(a,"sss")}},{key:"ss",regex:"[0-5][0-9]",apply:function(a){this.seconds=+a},formatter:function(a){return c(a,"ss")}},{key:"s",regex:"[0-9]|[1-5][0-9]",apply:function(a){this.seconds=+a},formatter:function(a){return c(a,"s")}},{key:"a",regex:b.DATETIME_FORMATS.AMPMS.join("|"),apply:function(a){12===this.hours&&(this.hours=0),"PM"===a&&(this.hours+=12)},formatter:function(a){return c(a,"a")}},{key:"Z",regex:"[+-]\\d{4}",apply:function(a){var b=a.match(/([+-])(\d{2})(\d{2})/),c=b[1],d=b[2],e=b[3];this.hours+=l(c+d),this.minutes+=l(c+e)},formatter:function(a){return c(a,"Z")}},{key:"ww",regex:"[0-4][0-9]|5[0-3]",formatter:function(a){return c(a,"ww")}},{key:"w",regex:"[0-9]|[1-4][0-9]|5[0-3]",formatter:function(a){return c(a,"w")}},{key:"GGGG",regex:b.DATETIME_FORMATS.ERANAMES.join("|").replace(/\s/g,"\\s"),formatter:function(a){return c(a,"GGGG")}},{key:"GGG",regex:b.DATETIME_FORMATS.ERAS.join("|"),formatter:function(a){return c(a,"GGG")}},{key:"GG",regex:b.DATETIME_FORMATS.ERAS.join("|"),formatter:function(a){return c(a,"GG")}},{key:"G",regex:b.DATETIME_FORMATS.ERAS.join("|"),formatter:function(a){return c(a,"G")}}],angular.version.major>=1&&angular.version.minor>4&&s.push({key:"LLLL",regex:b.DATETIME_FORMATS.STANDALONEMONTH.join("|"),apply:function(a){this.month=b.DATETIME_FORMATS.STANDALONEMONTH.indexOf(a)},formatter:function(a){return c(a,"LLLL")}})},this.init(),this.getParser=function(a){var b=f(a);return b&&b.apply||null},this.overrideParser=function(a,b){var c=f(a);c&&angular.isFunction(b)&&(this.parsers={},c.apply=b)}.bind(this),this.filter=function(a,c){if(!angular.isDate(a)||isNaN(a)||!c)return"";c=b.DATETIME_FORMATS[c]||c,b.id!==r&&this.init(),this.formatters[c]||(this.formatters[c]=h(c));var d=this.formatters[c];return d.reduce(function(b,c){return b+c(a)},"")},this.parse=function(c,d,e){if(!angular.isString(c)||!d)return c;d=b.DATETIME_FORMATS[d]||d,d=d.replace(t,"\\$&"),b.id!==r&&this.init(),this.parsers[d]||(this.parsers[d]=g(d,"apply"));var f=this.parsers[d],h=f.regex,i=f.map,j=c.match(h),l=!1;if(j&&j.length){var m,n;angular.isDate(e)&&!isNaN(e.getTime())?m={year:e.getFullYear(),month:e.getMonth(),date:e.getDate(),hours:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds(),milliseconds:e.getMilliseconds()}:(e&&a.warn("dateparser:","baseDate is not a valid date"),m={year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0});for(var o=1,p=j.length;p>o;o++){var q=i[o-1];"Z"===q.matcher&&(l=!0),q.apply&&q.apply.call(m,j[o])}var s=l?Date.prototype.setUTCFullYear:Date.prototype.setFullYear,u=l?Date.prototype.setUTCHours:Date.prototype.setHours;return k(m.year,m.month,m.date)&&(!angular.isDate(e)||isNaN(e.getTime())||l?(n=new Date(0),s.call(n,m.year,m.month,m.date),u.call(n,m.hours||0,m.minutes||0,m.seconds||0,m.milliseconds||0)):(n=new Date(e),s.call(n,m.year,m.month,m.date),u.call(n,m.hours,m.minutes,m.seconds,m.milliseconds))),n}},this.toTimezone=m,this.fromTimezone=n,this.timezoneToOffset=o,this.addDateMinutes=p,this.convertTimezoneToLocal=q}]),angular.module("ui.bootstrap.isClass",[]).directive("uibIsClass",["$animate",function(a){var b=/^\s*([\s\S]+?)\s+on\s+([\s\S]+?)\s*$/,c=/^\s*([\s\S]+?)\s+for\s+([\s\S]+?)\s*$/;return{restrict:"A",compile:function(d,e){function f(a,b,c){i.push(a),j.push({scope:a,element:b}),o.forEach(function(b,c){g(b,a)}),a.$on("$destroy",h)}function g(b,d){var e=b.match(c),f=d.$eval(e[1]),g=e[2],h=k[b];if(!h){var i=function(b){var c=null;j.some(function(a){var d=a.scope.$eval(m);return d===b?(c=a,!0):void 0}),h.lastActivated!==c&&(h.lastActivated&&a.removeClass(h.lastActivated.element,f),c&&a.addClass(c.element,f),h.lastActivated=c)};k[b]=h={lastActivated:null,scope:d,watchFn:i,compareWithExp:g,watcher:d.$watch(g,i)}}h.watchFn(d.$eval(g))}function h(a){var b=a.targetScope,c=i.indexOf(b);if(i.splice(c,1),j.splice(c,1),i.length){var d=i[0];angular.forEach(k,function(a){a.scope===b&&(a.watcher=d.$watch(a.compareWithExp,a.watchFn),a.scope=d)})}else k={}}var i=[],j=[],k={},l=e.uibIsClass.match(b),m=l[2],n=l[1],o=n.split(",");return f}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.isClass"]).value("$datepickerSuppressError",!1).value("$datepickerLiteralWarning",!0).constant("uibDatepickerConfig",{datepickerMode:"day",formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",maxDate:null,maxMode:"year",minDate:null,minMode:"day",monthColumns:3,ngModelOptions:{},shortcutPropagation:!1,showWeeks:!0,yearColumns:5,yearRows:4}).controller("UibDatepickerController",["$scope","$element","$attrs","$parse","$interpolate","$locale","$log","dateFilter","uibDatepickerConfig","$datepickerLiteralWarning","$datepickerSuppressError","uibDateParser",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(b){a.datepickerMode=b,a.datepickerOptions.datepickerMode=b}function n(b){var c;if(angular.version.minor<6)c=b.$options||a.datepickerOptions.ngModelOptions||i.ngModelOptions||{},c.getOption=function(a){return c[a]};else{var d=b.$options.getOption("timezone")||(a.datepickerOptions.ngModelOptions?a.datepickerOptions.ngModelOptions.timezone:null)||(i.ngModelOptions?i.ngModelOptions.timezone:null);c=b.$options.createChild(i.ngModelOptions).createChild(a.datepickerOptions.ngModelOptions).createChild(b.$options).createChild({timezone:d})}return c}var o=this,p={$setViewValue:angular.noop},q={},r=[];b.addClass("uib-datepicker"),c.$set("role","application"),a.datepickerOptions||(a.datepickerOptions={}),this.modes=["day","month","year"],["customClass","dateDisabled","datepickerMode","formatDay","formatDayHeader","formatDayTitle","formatMonth","formatMonthTitle","formatYear","maxDate","maxMode","minDate","minMode","monthColumns","showWeeks","shortcutPropagation","startingDay","yearColumns","yearRows"].forEach(function(b){switch(b){case"customClass":case"dateDisabled":a[b]=a.datepickerOptions[b]||angular.noop;break;case"datepickerMode":a.datepickerMode=angular.isDefined(a.datepickerOptions.datepickerMode)?a.datepickerOptions.datepickerMode:i.datepickerMode;break;case"formatDay":case"formatDayHeader":case"formatDayTitle":case"formatMonth":case"formatMonthTitle":case"formatYear":o[b]=angular.isDefined(a.datepickerOptions[b])?e(a.datepickerOptions[b])(a.$parent):i[b];break;case"monthColumns":case"showWeeks":case"shortcutPropagation":case"yearColumns":case"yearRows":o[b]=angular.isDefined(a.datepickerOptions[b])?a.datepickerOptions[b]:i[b];break;case"startingDay":angular.isDefined(a.datepickerOptions.startingDay)?o.startingDay=a.datepickerOptions.startingDay:angular.isNumber(i.startingDay)?o.startingDay=i.startingDay:o.startingDay=(f.DATETIME_FORMATS.FIRSTDAYOFWEEK+8)%7;break;case"maxDate":case"minDate":a.$watch("datepickerOptions."+b,function(a){a?angular.isDate(a)?o[b]=l.fromTimezone(new Date(a),q.getOption("timezone")):(j&&g.warn("Literal date support has been deprecated, please switch to date object usage"),o[b]=new Date(h(a,"medium"))):o[b]=i[b]?l.fromTimezone(new Date(i[b]),q.getOption("timezone")):null,o.refreshView()});break;case"maxMode":case"minMode":a.datepickerOptions[b]?a.$watch(function(){return a.datepickerOptions[b]},function(c){o[b]=a[b]=angular.isDefined(c)?c:a.datepickerOptions[b],("minMode"===b&&o.modes.indexOf(a.datepickerOptions.datepickerMode)<o.modes.indexOf(o[b])||"maxMode"===b&&o.modes.indexOf(a.datepickerOptions.datepickerMode)>o.modes.indexOf(o[b]))&&(a.datepickerMode=o[b],a.datepickerOptions.datepickerMode=o[b])}):o[b]=a[b]=i[b]||null}}),a.uniqueId="datepicker-"+a.$id+"-"+Math.floor(1e4*Math.random()),a.disabled=angular.isDefined(c.disabled)||!1,angular.isDefined(c.ngDisabled)&&r.push(a.$parent.$watch(c.ngDisabled,function(b){a.disabled=b,o.refreshView()})),a.isActive=function(b){return 0===o.compare(b.date,o.activeDate)?(a.activeDateId=b.uid,!0):!1},this.init=function(b){p=b,q=n(p),a.datepickerOptions.initDate?(o.activeDate=l.fromTimezone(a.datepickerOptions.initDate,q.getOption("timezone"))||new Date,a.$watch("datepickerOptions.initDate",function(a){a&&(p.$isEmpty(p.$modelValue)||p.$invalid)&&(o.activeDate=l.fromTimezone(a,q.getOption("timezone")),o.refreshView())})):o.activeDate=new Date;var c=p.$modelValue?new Date(p.$modelValue):new Date;this.activeDate=isNaN(c)?l.fromTimezone(new Date,q.getOption("timezone")):l.fromTimezone(c,q.getOption("timezone")),p.$render=function(){o.render()}},this.render=function(){if(p.$viewValue){var a=new Date(p.$viewValue),b=!isNaN(a);b?this.activeDate=l.fromTimezone(a,q.getOption("timezone")):k||g.error('Datepicker directive: "ng-model" value must be a Date object')}this.refreshView()},this.refreshView=function(){if(this.element){a.selectedDt=null,this._refreshView(),a.activeDt&&(a.activeDateId=a.activeDt.uid);var b=p.$viewValue?new Date(p.$viewValue):null;b=l.fromTimezone(b,q.getOption("timezone")),p.$setValidity("dateDisabled",!b||this.element&&!this.isDisabled(b))}},this.createDateObject=function(b,c){var d=p.$viewValue?new Date(p.$viewValue):null;d=l.fromTimezone(d,q.getOption("timezone"));var e=new Date;e=l.fromTimezone(e,q.getOption("timezone"));var f=this.compare(b,e),g={date:b,label:l.filter(b,c),selected:d&&0===this.compare(b,d),disabled:this.isDisabled(b),past:0>f,current:0===f,future:f>0,customClass:this.customClass(b)||null};return d&&0===this.compare(b,d)&&(a.selectedDt=g),o.activeDate&&0===this.compare(g.date,o.activeDate)&&(a.activeDt=g),g},this.isDisabled=function(b){return a.disabled||this.minDate&&this.compare(b,this.minDate)<0||this.maxDate&&this.compare(b,this.maxDate)>0||a.dateDisabled&&a.dateDisabled({date:b,mode:a.datepickerMode})},this.customClass=function(b){return a.customClass({date:b,mode:a.datepickerMode})},this.split=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},a.select=function(b){if(a.datepickerMode===o.minMode){var c=p.$viewValue?l.fromTimezone(new Date(p.$viewValue),q.getOption("timezone")):new Date(0,0,0,0,0,0,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),c=l.toTimezone(c,q.getOption("timezone")),p.$setViewValue(c),p.$render()}else o.activeDate=b,m(o.modes[o.modes.indexOf(a.datepickerMode)-1]),a.$emit("uib:datepicker.mode");a.$broadcast("uib:datepicker.focus")},a.move=function(a){var b=o.activeDate.getFullYear()+a*(o.step.years||0),c=o.activeDate.getMonth()+a*(o.step.months||0);o.activeDate.setFullYear(b,c,1),o.refreshView()},a.toggleMode=function(b){b=b||1,a.datepickerMode===o.maxMode&&1===b||a.datepickerMode===o.minMode&&-1===b||(m(o.modes[o.modes.indexOf(a.datepickerMode)+b]),a.$emit("uib:datepicker.mode"))},a.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var s=function(){o.element[0].focus()};a.$on("uib:datepicker.focus",s),a.keydown=function(b){var c=a.keys[b.which];if(c&&!b.shiftKey&&!b.altKey&&!a.disabled)if(b.preventDefault(),o.shortcutPropagation||b.stopPropagation(),"enter"===c||"space"===c){if(o.isDisabled(o.activeDate))return;a.select(o.activeDate)}else!b.ctrlKey||"up"!==c&&"down"!==c?(o.handleKeyDown(c,b),o.refreshView()):a.toggleMode("up"===c?1:-1)},b.on("keydown",function(b){a.$apply(function(){a.keydown(b)})}),a.$on("$destroy",function(){for(;r.length;)r.shift()()})}]).controller("UibDaypickerController",["$scope","$element","dateFilter",function(a,b,c){function d(a,b){return 1!==b||a%4!==0||a%100===0&&a%400!==0?f[b]:29}function e(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}var f=[31,28,31,30,31,30,31,31,30,31,30,31];this.step={months:1},this.element=b,this.init=function(b){angular.extend(b,this),a.showWeeks=b.showWeeks,b.refreshView()},this.getDates=function(a,b){for(var c,d=new Array(b),e=new Date(a),f=0;b>f;)c=new Date(e),d[f++]=c,e.setDate(e.getDate()+1);return d},this._refreshView=function(){var b=this.activeDate.getFullYear(),d=this.activeDate.getMonth(),f=new Date(this.activeDate);f.setFullYear(b,d,1);var g=this.startingDay-f.getDay(),h=g>0?7-g:-g,i=new Date(f);h>0&&i.setDate(-h+1);for(var j=this.getDates(i,42),k=0;42>k;k++)j[k]=angular.extend(this.createDateObject(j[k],this.formatDay),{secondary:j[k].getMonth()!==d,uid:a.uniqueId+"-"+k});a.labels=new Array(7);for(var l=0;7>l;l++)a.labels[l]={abbr:c(j[l].date,this.formatDayHeader),full:c(j[l].date,"EEEE")};if(a.title=c(this.activeDate,this.formatDayTitle),a.rows=this.split(j,7),a.showWeeks){a.weekNumbers=[];for(var m=(11-this.startingDay)%7,n=a.rows.length,o=0;n>o;o++)a.weekNumbers.push(e(a.rows[o][m].date))}},this.compare=function(a,b){var c=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=new Date(b.getFullYear(),b.getMonth(),b.getDate());return c.setFullYear(a.getFullYear()),d.setFullYear(b.getFullYear()),c-d},this.handleKeyDown=function(a,b){var c=this.activeDate.getDate();if("left"===a)c-=1;else if("up"===a)c-=7;else if("right"===a)c+=1;else if("down"===a)c+=7;else if("pageup"===a||"pagedown"===a){var e=this.activeDate.getMonth()+("pageup"===a?-1:1);this.activeDate.setMonth(e,1),c=Math.min(d(this.activeDate.getFullYear(),this.activeDate.getMonth()),c)}else"home"===a?c=1:"end"===a&&(c=d(this.activeDate.getFullYear(),this.activeDate.getMonth()));this.activeDate.setDate(c)}}]).controller("UibMonthpickerController",["$scope","$element","dateFilter",function(a,b,c){this.step={years:1},this.element=b,this.init=function(a){angular.extend(a,this),a.refreshView()},this._refreshView=function(){for(var b,d=new Array(12),e=this.activeDate.getFullYear(),f=0;12>f;f++)b=new Date(this.activeDate),b.setFullYear(e,f,1),d[f]=angular.extend(this.createDateObject(b,this.formatMonth),{uid:a.uniqueId+"-"+f});a.title=c(this.activeDate,this.formatMonthTitle),a.rows=this.split(d,this.monthColumns),a.yearHeaderColspan=this.monthColumns>3?this.monthColumns-2:1},this.compare=function(a,b){var c=new Date(a.getFullYear(),a.getMonth()),d=new Date(b.getFullYear(),b.getMonth());return c.setFullYear(a.getFullYear()),d.setFullYear(b.getFullYear()),c-d},this.handleKeyDown=function(a,b){var c=this.activeDate.getMonth();if("left"===a)c-=1;else if("up"===a)c-=this.monthColumns;else if("right"===a)c+=1;else if("down"===a)c+=this.monthColumns;else if("pageup"===a||"pagedown"===a){var d=this.activeDate.getFullYear()+("pageup"===a?-1:1);this.activeDate.setFullYear(d)}else"home"===a?c=0:"end"===a&&(c=11);this.activeDate.setMonth(c)}}]).controller("UibYearpickerController",["$scope","$element","dateFilter",function(a,b,c){function d(a){return parseInt((a-1)/f,10)*f+1}var e,f;this.element=b,this.yearpickerInit=function(){e=this.yearColumns,f=this.yearRows*e,this.step={years:f}},this._refreshView=function(){for(var b,c=new Array(f),g=0,h=d(this.activeDate.getFullYear());f>g;g++)b=new Date(this.activeDate),b.setFullYear(h+g,0,1),c[g]=angular.extend(this.createDateObject(b,this.formatYear),{uid:a.uniqueId+"-"+g});a.title=[c[0].label,c[f-1].label].join(" - "),a.rows=this.split(c,e),a.columns=e},this.compare=function(a,b){return a.getFullYear()-b.getFullYear()},this.handleKeyDown=function(a,b){var c=this.activeDate.getFullYear();"left"===a?c-=1:"up"===a?c-=e:"right"===a?c+=1:"down"===a?c+=e:"pageup"===a||"pagedown"===a?c+=("pageup"===a?-1:1)*f:"home"===a?c=d(this.activeDate.getFullYear()):"end"===a&&(c=d(this.activeDate.getFullYear())+f-1),this.activeDate.setFullYear(c)}}]).directive("uibDatepicker",function(){return{templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/datepicker.html"},scope:{datepickerOptions:"=?"},require:["uibDatepicker","^ngModel"],restrict:"A",controller:"UibDatepickerController",controllerAs:"datepicker",link:function(a,b,c,d){var e=d[0],f=d[1];e.init(f)}}}).directive("uibDaypicker",function(){return{templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/day.html"},
require:["^uibDatepicker","uibDaypicker"],restrict:"A",controller:"UibDaypickerController",link:function(a,b,c,d){var e=d[0],f=d[1];f.init(e)}}}).directive("uibMonthpicker",function(){return{templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/month.html"},require:["^uibDatepicker","uibMonthpicker"],restrict:"A",controller:"UibMonthpickerController",link:function(a,b,c,d){var e=d[0],f=d[1];f.init(e)}}}).directive("uibYearpicker",function(){return{templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/year.html"},require:["^uibDatepicker","uibYearpicker"],restrict:"A",controller:"UibYearpickerController",link:function(a,b,c,d){var e=d[0];angular.extend(e,d[1]),e.yearpickerInit(),e.refreshView()}}}),angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function(a,b){var c,d,e={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/},f={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/},g=/(HTML|BODY)/;return{getRawNode:function(a){return a.nodeName?a:a[0]||a},parseStyle:function(a){return a=parseFloat(a),isFinite(a)?a:0},offsetParent:function(c){function d(a){return"static"===(b.getComputedStyle(a).position||"static")}c=this.getRawNode(c);for(var e=c.offsetParent||a[0].documentElement;e&&e!==a[0].documentElement&&d(e);)e=e.offsetParent;return e||a[0].documentElement},scrollbarWidth:function(e){if(e){if(angular.isUndefined(d)){var f=a.find("body");f.addClass("uib-position-body-scrollbar-measure"),d=b.innerWidth-f[0].clientWidth,d=isFinite(d)?d:0,f.removeClass("uib-position-body-scrollbar-measure")}return d}if(angular.isUndefined(c)){var g=angular.element('<div class="uib-position-scrollbar-measure"></div>');a.find("body").append(g),c=g[0].offsetWidth-g[0].clientWidth,c=isFinite(c)?c:0,g.remove()}return c},scrollbarPadding:function(a){a=this.getRawNode(a);var c=b.getComputedStyle(a),d=this.parseStyle(c.paddingRight),e=this.parseStyle(c.paddingBottom),f=this.scrollParent(a,!1,!0),h=this.scrollbarWidth(g.test(f.tagName));return{scrollbarWidth:h,widthOverflow:f.scrollWidth>f.clientWidth,right:d+h,originalRight:d,heightOverflow:f.scrollHeight>f.clientHeight,bottom:e+h,originalBottom:e}},isScrollable:function(a,c){a=this.getRawNode(a);var d=c?e.hidden:e.normal,f=b.getComputedStyle(a);return d.test(f.overflow+f.overflowY+f.overflowX)},scrollParent:function(c,d,f){c=this.getRawNode(c);var g=d?e.hidden:e.normal,h=a[0].documentElement,i=b.getComputedStyle(c);if(f&&g.test(i.overflow+i.overflowY+i.overflowX))return c;var j="absolute"===i.position,k=c.parentElement||h;if(k===h||"fixed"===i.position)return h;for(;k.parentElement&&k!==h;){var l=b.getComputedStyle(k);if(j&&"static"!==l.position&&(j=!1),!j&&g.test(l.overflow+l.overflowY+l.overflowX))break;k=k.parentElement}return k},position:function(c,d){c=this.getRawNode(c);var e=this.offset(c);if(d){var f=b.getComputedStyle(c);e.top-=this.parseStyle(f.marginTop),e.left-=this.parseStyle(f.marginLeft)}var g=this.offsetParent(c),h={top:0,left:0};return g!==a[0].documentElement&&(h=this.offset(g),h.top+=g.clientTop-g.scrollTop,h.left+=g.clientLeft-g.scrollLeft),{width:Math.round(angular.isNumber(e.width)?e.width:c.offsetWidth),height:Math.round(angular.isNumber(e.height)?e.height:c.offsetHeight),top:Math.round(e.top-h.top),left:Math.round(e.left-h.left)}},offset:function(c){c=this.getRawNode(c);var d=c.getBoundingClientRect();return{width:Math.round(angular.isNumber(d.width)?d.width:c.offsetWidth),height:Math.round(angular.isNumber(d.height)?d.height:c.offsetHeight),top:Math.round(d.top+(b.pageYOffset||a[0].documentElement.scrollTop)),left:Math.round(d.left+(b.pageXOffset||a[0].documentElement.scrollLeft))}},viewportOffset:function(c,d,e){c=this.getRawNode(c),e=e!==!1;var f=c.getBoundingClientRect(),g={top:0,left:0,bottom:0,right:0},h=d?a[0].documentElement:this.scrollParent(c),i=h.getBoundingClientRect();if(g.top=i.top+h.clientTop,g.left=i.left+h.clientLeft,h===a[0].documentElement&&(g.top+=b.pageYOffset,g.left+=b.pageXOffset),g.bottom=g.top+h.clientHeight,g.right=g.left+h.clientWidth,e){var j=b.getComputedStyle(h);g.top+=this.parseStyle(j.paddingTop),g.bottom-=this.parseStyle(j.paddingBottom),g.left+=this.parseStyle(j.paddingLeft),g.right-=this.parseStyle(j.paddingRight)}return{top:Math.round(f.top-g.top),bottom:Math.round(g.bottom-f.bottom),left:Math.round(f.left-g.left),right:Math.round(g.right-f.right)}},parsePlacement:function(a){var b=f.auto.test(a);return b&&(a=a.replace(f.auto,"")),a=a.split("-"),a[0]=a[0]||"top",f.primary.test(a[0])||(a[0]="top"),a[1]=a[1]||"center",f.secondary.test(a[1])||(a[1]="center"),b?a[2]=!0:a[2]=!1,a},positionElements:function(a,c,d,e){a=this.getRawNode(a),c=this.getRawNode(c);var g=angular.isDefined(c.offsetWidth)?c.offsetWidth:c.prop("offsetWidth"),h=angular.isDefined(c.offsetHeight)?c.offsetHeight:c.prop("offsetHeight");d=this.parsePlacement(d);var i=e?this.offset(a):this.position(a),j={top:0,left:0,placement:""};if(d[2]){var k=this.viewportOffset(a,e),l=b.getComputedStyle(c),m={width:g+Math.round(Math.abs(this.parseStyle(l.marginLeft)+this.parseStyle(l.marginRight))),height:h+Math.round(Math.abs(this.parseStyle(l.marginTop)+this.parseStyle(l.marginBottom)))};if(d[0]="top"===d[0]&&m.height>k.top&&m.height<=k.bottom?"bottom":"bottom"===d[0]&&m.height>k.bottom&&m.height<=k.top?"top":"left"===d[0]&&m.width>k.left&&m.width<=k.right?"right":"right"===d[0]&&m.width>k.right&&m.width<=k.left?"left":d[0],d[1]="top"===d[1]&&m.height-i.height>k.bottom&&m.height-i.height<=k.top?"bottom":"bottom"===d[1]&&m.height-i.height>k.top&&m.height-i.height<=k.bottom?"top":"left"===d[1]&&m.width-i.width>k.right&&m.width-i.width<=k.left?"right":"right"===d[1]&&m.width-i.width>k.left&&m.width-i.width<=k.right?"left":d[1],"center"===d[1])if(f.vertical.test(d[0])){var n=i.width/2-g/2;k.left+n<0&&m.width-i.width<=k.right?d[1]="left":k.right+n<0&&m.width-i.width<=k.left&&(d[1]="right")}else{var o=i.height/2-m.height/2;k.top+o<0&&m.height-i.height<=k.bottom?d[1]="top":k.bottom+o<0&&m.height-i.height<=k.top&&(d[1]="bottom")}}switch(d[0]){case"top":j.top=i.top-h;break;case"bottom":j.top=i.top+i.height;break;case"left":j.left=i.left-g;break;case"right":j.left=i.left+i.width}switch(d[1]){case"top":j.top=i.top;break;case"bottom":j.top=i.top+i.height-h;break;case"left":j.left=i.left;break;case"right":j.left=i.left+i.width-g;break;case"center":f.vertical.test(d[0])?j.left=i.left+i.width/2-g/2:j.top=i.top+i.height/2-h/2}return j.top=Math.round(j.top),j.left=Math.round(j.left),j.placement="center"===d[1]?d[0]:d[0]+"-"+d[1],j},adjustTop:function(a,b,c,d){return-1!==a.indexOf("top")&&c!==d?{top:b.top-d+"px"}:void 0},positionArrow:function(a,c){a=this.getRawNode(a);var d=a.querySelector(".tooltip-inner, .popover-inner");if(d){var e=angular.element(d).hasClass("tooltip-inner"),g=e?a.querySelector(".tooltip-arrow"):a.querySelector(".arrow");if(g){var h={top:"",bottom:"",left:"",right:""};if(c=this.parsePlacement(c),"center"===c[1])return void angular.element(g).css(h);var i="border-"+c[0]+"-width",j=b.getComputedStyle(g)[i],k="border-";k+=f.vertical.test(c[0])?c[0]+"-"+c[1]:c[1]+"-"+c[0],k+="-radius";var l=b.getComputedStyle(e?d:a)[k];switch(c[0]){case"top":h.bottom=e?"0":"-"+j;break;case"bottom":h.top=e?"0":"-"+j;break;case"left":h.right=e?"0":"-"+j;break;case"right":h.left=e?"0":"-"+j}h[c[1]]=l,angular.element(g).css(h)}}}}}]),angular.module("ui.bootstrap.datepickerPopup",["ui.bootstrap.datepicker","ui.bootstrap.position"]).value("$datepickerPopupLiteralWarning",!0).constant("uibDatepickerPopupConfig",{altInputFormats:[],appendToBody:!1,clearText:"Clear",closeOnDateSelection:!0,closeText:"Done",currentText:"Today",datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"uib/template/datepickerPopup/popup.html",datepickerTemplateUrl:"uib/template/datepicker/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},onOpenFocus:!0,showButtonBar:!0,placement:"auto bottom-left"}).controller("UibDatepickerPopupController",["$scope","$element","$attrs","$compile","$log","$parse","$window","$document","$rootScope","$uibPosition","dateFilter","uibDateParser","uibDatepickerPopupConfig","$timeout","uibDatepickerConfig","$datepickerPopupLiteralWarning",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(b){var c=l.parse(b,x,a.date);if(isNaN(c))for(var d=0;d<J.length;d++)if(c=l.parse(b,J[d],a.date),!isNaN(c))return c;return c}function r(a){if(angular.isNumber(a)&&(a=new Date(a)),!a)return null;if(angular.isDate(a)&&!isNaN(a))return a;if(angular.isString(a)){var b=q(a);if(!isNaN(b))return l.toTimezone(b,H.getOption("timezone"))}return H.getOption("allowInvalid")?a:void 0}function s(a,b){var d=a||b;return c.ngRequired||d?(angular.isNumber(d)&&(d=new Date(d)),d?angular.isDate(d)&&!isNaN(d)?!0:angular.isString(d)?!isNaN(q(d)):!1:!0):!0}function t(c){if(a.isOpen||!a.disabled){var d=I[0],e=b[0].contains(c.target),f=void 0!==d.contains&&d.contains(c.target);!a.isOpen||e||f||a.$apply(function(){a.isOpen=!1})}}function u(c){27===c.which&&a.isOpen?(c.preventDefault(),c.stopPropagation(),a.$apply(function(){a.isOpen=!1}),b[0].focus()):40!==c.which||a.isOpen||(c.preventDefault(),c.stopPropagation(),a.$apply(function(){a.isOpen=!0}))}function v(){if(a.isOpen){var d=angular.element(I[0].querySelector(".uib-datepicker-popup")),e=c.popupPlacement?c.popupPlacement:m.placement,f=j.positionElements(b,d,e,z);d.css({top:f.top+"px",left:f.left+"px"}),d.hasClass("uib-position-measure")&&d.removeClass("uib-position-measure")}}function w(a){var b;return angular.version.minor<6?(b=angular.isObject(a.$options)?a.$options:{timezone:null},b.getOption=function(a){return b[a]}):b=a.$options,b}var x,y,z,A,B,C,D,E,F,G,H,I,J,K=!1,L=[];this.init=function(e){if(G=e,H=w(G),y=angular.isDefined(c.closeOnDateSelection)?a.$parent.$eval(c.closeOnDateSelection):m.closeOnDateSelection,z=angular.isDefined(c.datepickerAppendToBody)?a.$parent.$eval(c.datepickerAppendToBody):m.appendToBody,A=angular.isDefined(c.onOpenFocus)?a.$parent.$eval(c.onOpenFocus):m.onOpenFocus,B=angular.isDefined(c.datepickerPopupTemplateUrl)?c.datepickerPopupTemplateUrl:m.datepickerPopupTemplateUrl,C=angular.isDefined(c.datepickerTemplateUrl)?c.datepickerTemplateUrl:m.datepickerTemplateUrl,J=angular.isDefined(c.altInputFormats)?a.$parent.$eval(c.altInputFormats):m.altInputFormats,a.showButtonBar=angular.isDefined(c.showButtonBar)?a.$parent.$eval(c.showButtonBar):m.showButtonBar,m.html5Types[c.type]?(x=m.html5Types[c.type],K=!0):(x=c.uibDatepickerPopup||m.datepickerPopup,c.$observe("uibDatepickerPopup",function(a,b){var c=a||m.datepickerPopup;if(c!==x&&(x=c,G.$modelValue=null,!x))throw new Error("uibDatepickerPopup must have a date format specified.")})),!x)throw new Error("uibDatepickerPopup must have a date format specified.");if(K&&c.uibDatepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");D=angular.element("<div uib-datepicker-popup-wrap><div uib-datepicker></div></div>"),D.attr({"ng-model":"date","ng-change":"dateSelection(date)","template-url":B}),E=angular.element(D.children()[0]),E.attr("template-url",C),a.datepickerOptions||(a.datepickerOptions={}),K&&"month"===c.type&&(a.datepickerOptions.datepickerMode="month",a.datepickerOptions.minMode="month"),E.attr("datepicker-options","datepickerOptions"),K?G.$formatters.push(function(b){return a.date=l.fromTimezone(b,H.getOption("timezone")),b}):(G.$$parserName="date",G.$validators.date=s,G.$parsers.unshift(r),G.$formatters.push(function(b){return G.$isEmpty(b)?(a.date=b,b):(angular.isNumber(b)&&(b=new Date(b)),a.date=l.fromTimezone(b,H.getOption("timezone")),l.filter(a.date,x))})),G.$viewChangeListeners.push(function(){a.date=q(G.$viewValue)}),b.on("keydown",u),I=d(D)(a),D.remove(),z?h.find("body").append(I):b.after(I),a.$on("$destroy",function(){for(a.isOpen===!0&&(i.$$phase||a.$apply(function(){a.isOpen=!1})),I.remove(),b.off("keydown",u),h.off("click",t),F&&F.off("scroll",v),angular.element(g).off("resize",v);L.length;)L.shift()()})},a.getText=function(b){return a[b+"Text"]||m[b+"Text"]},a.isDisabled=function(b){"today"===b&&(b=l.fromTimezone(new Date,H.getOption("timezone")));var c={};return angular.forEach(["minDate","maxDate"],function(b){a.datepickerOptions[b]?angular.isDate(a.datepickerOptions[b])?c[b]=new Date(a.datepickerOptions[b]):(p&&e.warn("Literal date support has been deprecated, please switch to date object usage"),c[b]=new Date(k(a.datepickerOptions[b],"medium"))):c[b]=null}),a.datepickerOptions&&c.minDate&&a.compare(b,c.minDate)<0||c.maxDate&&a.compare(b,c.maxDate)>0},a.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},a.dateSelection=function(c){a.date=c;var d=a.date?l.filter(a.date,x):null;b.val(d),G.$setViewValue(d),y&&(a.isOpen=!1,b[0].focus())},a.keydown=function(c){27===c.which&&(c.stopPropagation(),a.isOpen=!1,b[0].focus())},a.select=function(b,c){if(c.stopPropagation(),"today"===b){var d=new Date;angular.isDate(a.date)?(b=new Date(a.date),b.setFullYear(d.getFullYear(),d.getMonth(),d.getDate())):(b=l.fromTimezone(d,H.getOption("timezone")),b.setHours(0,0,0,0))}a.dateSelection(b)},a.close=function(c){c.stopPropagation(),a.isOpen=!1,b[0].focus()},a.disabled=angular.isDefined(c.disabled)||!1,c.ngDisabled&&L.push(a.$parent.$watch(f(c.ngDisabled),function(b){a.disabled=b})),a.$watch("isOpen",function(d){d?a.disabled?a.isOpen=!1:n(function(){v(),A&&a.$broadcast("uib:datepicker.focus"),h.on("click",t);var d=c.popupPlacement?c.popupPlacement:m.placement;z||j.parsePlacement(d)[2]?(F=F||angular.element(j.scrollParent(b)),F&&F.on("scroll",v)):F=null,angular.element(g).on("resize",v)},0,!1):(h.off("click",t),F&&F.off("scroll",v),angular.element(g).off("resize",v))}),a.$on("uib:datepicker.mode",function(){n(v,0,!1)})}]).directive("uibDatepickerPopup",function(){return{require:["ngModel","uibDatepickerPopup"],controller:"UibDatepickerPopupController",scope:{datepickerOptions:"=?",isOpen:"=?",currentText:"@",clearText:"@",closeText:"@"},link:function(a,b,c,d){var e=d[0],f=d[1];f.init(e)}}}).directive("uibDatepickerPopupWrap",function(){return{restrict:"A",transclude:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/datepickerPopup/popup.html"}}}),angular.module("ui.bootstrap.debounce",[]).factory("$$debounce",["$timeout",function(a){return function(b,c){var d;return function(){var e=this,f=Array.prototype.slice.call(arguments);d&&a.cancel(d),d=a(function(){b.apply(e,f)},c)}}}]),angular.module("ui.bootstrap.multiMap",[]).factory("$$multiMap",function(){return{createNew:function(){var a={};return{entries:function(){return Object.keys(a).map(function(b){return{key:b,value:a[b]}})},get:function(b){return a[b]},hasKey:function(b){return!!a[b]},keys:function(){return Object.keys(a)},put:function(b,c){a[b]||(a[b]=[]),a[b].push(c)},remove:function(b,c){var d=a[b];if(d){var e=d.indexOf(c);-1!==e&&d.splice(e,1),d.length||delete a[b]}}}}}}),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.multiMap","ui.bootstrap.position"]).constant("uibDropdownConfig",{appendToOpenClass:"uib-dropdown-open",openClass:"open"}).service("uibDropdownService",["$document","$rootScope","$$multiMap",function(a,b,c){var d=null,e=c.createNew();this.isOnlyOpen=function(a,b){var c=e.get(b);if(c){var d=c.reduce(function(b,c){return c.scope===a?c:b},{});if(d)return 1===c.length}return!1},this.open=function(b,c,g){if(d||a.on("click",f),d&&d!==b&&(d.isOpen=!1),d=b,g){var h=e.get(g);if(h){var i=h.map(function(a){return a.scope});-1===i.indexOf(b)&&e.put(g,{scope:b})}else e.put(g,{scope:b})}},this.close=function(b,c,g){if(d===b&&(a.off("click",f),a.off("keydown",this.keybindFilter),d=null),g){var h=e.get(g);if(h){var i=h.reduce(function(a,c){return c.scope===b?c:a},{});i&&e.remove(g,i)}}};var f=function(a){if(d&&d.isOpen&&!(a&&"disabled"===d.getAutoClose()||a&&3===a.which)){var c=d.getToggleElement();if(!(a&&c&&c[0].contains(a.target))){var e=d.getDropdownElement();a&&"outsideClick"===d.getAutoClose()&&e&&e[0].contains(a.target)||(d.focusToggleElement(),d.isOpen=!1,b.$$phase||d.$apply())}}};this.keybindFilter=function(a){if(d){var b=d.getDropdownElement(),c=d.getToggleElement(),e=b&&b[0].contains(a.target),g=c&&c[0].contains(a.target);27===a.which?(a.stopPropagation(),d.focusToggleElement(),f()):d.isKeynavEnabled()&&-1!==[38,40].indexOf(a.which)&&d.isOpen&&(e||g)&&(a.preventDefault(),a.stopPropagation(),d.focusDropdownEntry(a.which))}}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function(a,b,c,d,e,f,g,h,i,j,k){function l(){b.append(o.dropdownMenu)}var m,n,o=this,p=a.$new(),q=e.appendToOpenClass,r=e.openClass,s=angular.noop,t=c.onToggle?d(c.onToggle):angular.noop,u=!1,v=i.find("body");b.addClass("dropdown"),this.init=function(){c.isOpen&&(n=d(c.isOpen),s=n.assign,a.$watch(n,function(a){p.isOpen=!!a})),u=angular.isDefined(c.keyboardNav)},this.toggle=function(a){return p.isOpen=arguments.length?!!a:!p.isOpen,angular.isFunction(s)&&s(p,p.isOpen),p.isOpen},this.isOpen=function(){return p.isOpen},p.getToggleElement=function(){return o.toggleElement},p.getAutoClose=function(){return c.autoClose||"always"},p.getElement=function(){return b},p.isKeynavEnabled=function(){return u},p.focusDropdownEntry=function(a){var c=o.dropdownMenu?angular.element(o.dropdownMenu).find("a"):b.find("ul").eq(0).find("a");switch(a){case 40:angular.isNumber(o.selectedOption)?o.selectedOption=o.selectedOption===c.length-1?o.selectedOption:o.selectedOption+1:o.selectedOption=0;break;case 38:angular.isNumber(o.selectedOption)?o.selectedOption=0===o.selectedOption?0:o.selectedOption-1:o.selectedOption=c.length-1}c[o.selectedOption].focus()},p.getDropdownElement=function(){return o.dropdownMenu},p.focusToggleElement=function(){o.toggleElement&&o.toggleElement[0].focus()},p.$watch("isOpen",function(e,n){var u=null,w=!1;if(angular.isDefined(c.dropdownAppendTo)){var x=d(c.dropdownAppendTo)(p);x&&(u=angular.element(x))}if(angular.isDefined(c.dropdownAppendToBody)){var y=d(c.dropdownAppendToBody)(p);y!==!1&&(w=!0)}if(w&&!u&&(u=v),u&&o.dropdownMenu&&(e?(u.append(o.dropdownMenu),b.on("$destroy",l)):(b.off("$destroy",l),l())),u&&o.dropdownMenu){var z,A,B,C=h.positionElements(b,o.dropdownMenu,"bottom-left",!0),D=0;if(z={top:C.top+"px",display:e?"block":"none"},A=o.dropdownMenu.hasClass("dropdown-menu-right"),A?(z.left="auto",B=h.scrollbarPadding(u),B.heightOverflow&&B.scrollbarWidth&&(D=B.scrollbarWidth),z.right=window.innerWidth-D-(C.left+b.prop("offsetWidth"))+"px"):(z.left=C.left+"px",z.right="auto"),!w){var E=h.offset(u);z.top=C.top-E.top+"px",A?z.right=window.innerWidth-(C.left-E.left+b.prop("offsetWidth"))+"px":z.left=C.left-E.left+"px"}o.dropdownMenu.css(z)}var F=u?u:b,G=u?q:r,H=F.hasClass(G),I=f.isOnlyOpen(a,u);if(H===!e){var J;J=u?I?"removeClass":"addClass":e?"addClass":"removeClass",g[J](F,G).then(function(){angular.isDefined(e)&&e!==n&&t(a,{open:!!e})})}if(e)o.dropdownMenuTemplateUrl?k(o.dropdownMenuTemplateUrl).then(function(a){m=p.$new(),j(a.trim())(m,function(a){var b=a;o.dropdownMenu.replaceWith(b),o.dropdownMenu=b,i.on("keydown",f.keybindFilter)})}):i.on("keydown",f.keybindFilter),p.focusToggleElement(),f.open(p,b,u);else{if(f.close(p,b,u),o.dropdownMenuTemplateUrl){m&&m.$destroy();var K=angular.element('<ul class="dropdown-menu"></ul>');o.dropdownMenu.replaceWith(K),o.dropdownMenu=K}o.selectedOption=null}angular.isFunction(s)&&s(a,e)})}]).directive("uibDropdown",function(){return{controller:"UibDropdownController",link:function(a,b,c,d){d.init()}}}).directive("uibDropdownMenu",function(){return{restrict:"A",require:"?^uibDropdown",link:function(a,b,c,d){if(d&&!angular.isDefined(c.dropdownNested)){b.addClass("dropdown-menu");var e=c.templateUrl;e&&(d.dropdownMenuTemplateUrl=e),d.dropdownMenu||(d.dropdownMenu=b)}}}}).directive("uibDropdownToggle",function(){return{require:"?^uibDropdown",link:function(a,b,c,d){if(d){b.addClass("dropdown-toggle"),d.toggleElement=b;var e=function(e){e.preventDefault(),b.hasClass("disabled")||c.disabled||a.$apply(function(){d.toggle()})};b.on("click",e),b.attr({"aria-haspopup":!0,"aria-expanded":!1}),a.$watch(d.isOpen,function(a){b.attr("aria-expanded",!!a)}),a.$on("$destroy",function(){b.off("click",e)})}}}}),angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b===a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b===a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.pop()},length:function(){return a.length}}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.multiMap","ui.bootstrap.stackedMap","ui.bootstrap.position"]).provider("$uibResolve",function(){var a=this;this.resolver=null,this.setResolver=function(a){this.resolver=a},this.$get=["$injector","$q",function(b,c){var d=a.resolver?b.get(a.resolver):null;return{resolve:function(a,e,f,g){if(d)return d.resolve(a,e,f,g);var h=[];return angular.forEach(a,function(a){angular.isFunction(a)||angular.isArray(a)?h.push(c.resolve(b.invoke(a))):angular.isString(a)?h.push(c.resolve(b.get(a))):h.push(c.resolve(a))}),c.all(h).then(function(b){var c={},d=0;return angular.forEach(a,function(a,e){c[e]=b[d++]}),c})}}}]}).directive("uibModalBackdrop",["$animate","$injector","$uibModalStack",function(a,b,c){function d(b,d,e){e.modalInClass&&(a.addClass(d,e.modalInClass),b.$on(c.NOW_CLOSING_EVENT,function(c,f){var g=f();b.modalOptions.animation?a.removeClass(d,e.modalInClass).then(g):g()}))}return{restrict:"A",compile:function(a,b){return a.addClass(b.backdropClass),d}}}]).directive("uibModalWindow",["$uibModalStack","$q","$animateCss","$document",function(a,b,c,d){return{scope:{index:"@"},restrict:"A",transclude:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/modal/window.html"},link:function(e,f,g){f.addClass(g.windowTopClass||""),e.size=g.size,e.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!==c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))},f.on("click",e.close),e.$isRendered=!0;var h=b.defer();e.$$postDigest(function(){h.resolve()}),h.promise.then(function(){var h=null;g.modalInClass&&(h=c(f,{addClass:g.modalInClass}).start(),e.$on(a.NOW_CLOSING_EVENT,function(a,b){var d=b();c(f,{removeClass:g.modalInClass}).start().then(d)})),b.when(h).then(function(){var b=a.getTop();if(b&&a.modalRendered(b.key),!d[0].activeElement||!f[0].contains(d[0].activeElement)){var c=f[0].querySelector("[autofocus]");c?c.focus():f[0].focus()}})})}}}]).directive("uibModalAnimationClass",function(){return{compile:function(a,b){b.modalAnimation&&a.addClass(b.uibModalAnimationClass)}}}).directive("uibModalTransclude",["$animate",function(a){return{link:function(b,c,d,e,f){f(b.$parent,function(b){c.empty(),a.enter(b,c)})}}}]).factory("$uibModalStack",["$animate","$animateCss","$document","$compile","$rootScope","$q","$$multiMap","$$stackedMap","$uibPosition",function(a,b,c,d,e,f,g,h,i){function j(a){var b="-";return a.replace(E,function(a,c){return(c?b:"")+a.toLowerCase()})}function k(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)}function l(){for(var a=-1,b=x.keys(),c=0;c<b.length;c++)x.get(b[c]).value.backdrop&&(a=c);return a>-1&&A>a&&(a=A),a}function m(a,b){var c=x.get(a).value,d=c.appendTo;x.remove(a),B=x.top(),B&&(A=parseInt(B.value.modalDomEl.attr("index"),10)),p(c.modalDomEl,c.modalScope,function(){var b=c.openedClass||w;y.remove(b,a);var e=y.hasKey(b);d.toggleClass(b,e),!e&&v&&v.heightOverflow&&v.scrollbarWidth&&(v.originalRight?d.css({paddingRight:v.originalRight+"px"}):d.css({paddingRight:""}),v=null),n(!0)},c.closedDeferred),o(),b&&b.focus?b.focus():d.focus&&d.focus()}function n(a){var b;x.length()>0&&(b=x.top().value,b.modalDomEl.toggleClass(b.windowTopClass||"",a))}function o(){if(t&&-1===l()){var a=u;p(t,u,function(){a=null}),t=void 0,u=void 0}}function p(b,c,d,e){function g(){g.done||(g.done=!0,a.leave(b).then(function(){d&&d(),b.remove(),e&&e.resolve()}),c.$destroy())}var h,i=null,j=function(){return h||(h=f.defer(),i=h.promise),function(){h.resolve()}};return c.$broadcast(z.NOW_CLOSING_EVENT,j),f.when(i).then(g)}function q(a){if(a.isDefaultPrevented())return a;var b=x.top();if(b)switch(a.which){case 27:b.value.keyboard&&(a.preventDefault(),e.$apply(function(){z.dismiss(b.key,"escape key press")}));break;case 9:var c=z.loadFocusElementList(b),d=!1;a.shiftKey?(z.isFocusInFirstItem(a,c)||z.isModalFocused(a,b))&&(d=z.focusLastFocusableElement(c)):z.isFocusInLastItem(a,c)&&(d=z.focusFirstFocusableElement(c)),d&&(a.preventDefault(),a.stopPropagation())}}function r(a,b,c){return!a.value.modalScope.$broadcast("modal.closing",b,c).defaultPrevented}function s(){Array.prototype.forEach.call(document.querySelectorAll("["+C+"]"),function(a){var b=parseInt(a.getAttribute(C),10),c=b-1;a.setAttribute(C,c),c||(a.removeAttribute(C),a.removeAttribute("aria-hidden"))})}var t,u,v,w="modal-open",x=h.createNew(),y=g.createNew(),z={NOW_CLOSING_EVENT:"modal.stack.now-closing"},A=0,B=null,C="data-bootstrap-modal-aria-hidden-count",D="a[href], area[href], input:not([disabled]):not([tabindex='-1']), button:not([disabled]):not([tabindex='-1']),select:not([disabled]):not([tabindex='-1']), textarea:not([disabled]):not([tabindex='-1']), iframe, object, embed, *[tabindex]:not([tabindex='-1']), *[contenteditable=true]",E=/[A-Z]/g;return e.$watch(l,function(a){u&&(u.index=a)}),c.on("keydown",q),e.$on("$destroy",function(){c.off("keydown",q)}),z.open=function(b,f){function g(a){function b(a){var b=a.parent()?a.parent().children():[];return Array.prototype.filter.call(b,function(b){return b!==a[0]})}if(a&&"BODY"!==a[0].tagName)return b(a).forEach(function(a){var b="true"===a.getAttribute("aria-hidden"),c=parseInt(a.getAttribute(C),10);c||(c=b?1:0),a.setAttribute(C,c+1),a.setAttribute("aria-hidden","true")}),g(a.parent())}var h=c[0].activeElement,k=f.openedClass||w;n(!1),B=x.top(),x.add(b,{deferred:f.deferred,renderDeferred:f.renderDeferred,closedDeferred:f.closedDeferred,modalScope:f.scope,backdrop:f.backdrop,keyboard:f.keyboard,openedClass:f.openedClass,windowTopClass:f.windowTopClass,animation:f.animation,appendTo:f.appendTo}),y.put(k,b);var m=f.appendTo,o=l();o>=0&&!t&&(u=e.$new(!0),u.modalOptions=f,u.index=o,t=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>'),t.attr({"class":"modal-backdrop","ng-style":"{'z-index': 1040 + (index && 1 || 0) + index*10}","uib-modal-animation-class":"fade","modal-in-class":"in"}),f.backdropClass&&t.addClass(f.backdropClass),f.animation&&t.attr("modal-animation","true"),d(t)(u),a.enter(t,m),i.isScrollable(m)&&(v=i.scrollbarPadding(m),v.heightOverflow&&v.scrollbarWidth&&m.css({paddingRight:v.right+"px"})));var p;f.component?(p=document.createElement(j(f.component.name)),p=angular.element(p),p.attr({resolve:"$resolve","modal-instance":"$uibModalInstance",close:"$close($value)",dismiss:"$dismiss($value)"})):p=f.content,A=B?parseInt(B.value.modalDomEl.attr("index"),10)+1:0;var q=angular.element('<div uib-modal-window="modal-window"></div>');q.attr({"class":"modal","template-url":f.windowTemplateUrl,"window-top-class":f.windowTopClass,role:"dialog","aria-labelledby":f.ariaLabelledBy,"aria-describedby":f.ariaDescribedBy,size:f.size,index:A,animate:"animate","ng-style":"{'z-index': 1050 + $$topModalIndex*10, display: 'block'}",tabindex:-1,"uib-modal-animation-class":"fade","modal-in-class":"in"}).append(p),f.windowClass&&q.addClass(f.windowClass),f.animation&&q.attr("modal-animation","true"),m.addClass(k),f.scope&&(f.scope.$$topModalIndex=A),a.enter(d(q)(f.scope),m),x.top().value.modalDomEl=q,x.top().value.modalOpener=h,g(q)},z.close=function(a,b){var c=x.get(a);return s(),c&&r(c,b,!0)?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.resolve(b),m(a,c.value.modalOpener),!0):!c},z.dismiss=function(a,b){var c=x.get(a);return s(),c&&r(c,b,!1)?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.reject(b),m(a,c.value.modalOpener),!0):!c},z.dismissAll=function(a){for(var b=this.getTop();b&&this.dismiss(b.key,a);)b=this.getTop()},z.getTop=function(){return x.top()},z.modalRendered=function(a){var b=x.get(a);b&&b.value.renderDeferred.resolve()},z.focusFirstFocusableElement=function(a){return a.length>0?(a[0].focus(),!0):!1},z.focusLastFocusableElement=function(a){return a.length>0?(a[a.length-1].focus(),!0):!1},z.isModalFocused=function(a,b){if(a&&b){var c=b.value.modalDomEl;if(c&&c.length)return(a.target||a.srcElement)===c[0]}return!1},z.isFocusInFirstItem=function(a,b){return b.length>0?(a.target||a.srcElement)===b[0]:!1},z.isFocusInLastItem=function(a,b){return b.length>0?(a.target||a.srcElement)===b[b.length-1]:!1},z.loadFocusElementList=function(a){if(a){var b=a.value.modalDomEl;if(b&&b.length){var c=b[0].querySelectorAll(D);return c?Array.prototype.filter.call(c,function(a){return k(a)}):c}}},z}]).provider("$uibModal",function(){var a={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$rootScope","$q","$document","$templateRequest","$controller","$uibResolve","$uibModalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?c.when(a.template):e(angular.isFunction(a.templateUrl)?a.templateUrl():a.templateUrl)}var j={},k=null;return j.getPromiseChain=function(){return k},j.open=function(e){function j(){return q}var l=c.defer(),m=c.defer(),n=c.defer(),o=c.defer(),p={result:l.promise,opened:m.promise,closed:n.promise,rendered:o.promise,close:function(a){return h.close(p,a)},dismiss:function(a){return h.dismiss(p,a)}};if(e=angular.extend({},a.options,e),e.resolve=e.resolve||{},e.appendTo=e.appendTo||d.find("body").eq(0),!e.appendTo.length)throw new Error("appendTo element not found. Make sure that the element passed is in DOM.");if(!e.component&&!e.template&&!e.templateUrl)throw new Error("One of component or template or templateUrl options is required.");var q;q=e.component?c.when(g.resolve(e.resolve,{},null,null)):c.all([i(e),g.resolve(e.resolve,{},null,null)]);var r;return r=k=c.all([k]).then(j,j).then(function(a){function c(b,c,d,e){b.$scope=g,b.$scope.$resolve={},d?b.$scope.$uibModalInstance=p:b.$uibModalInstance=p;var f=c?a[1]:a;angular.forEach(f,function(a,c){e&&(b[c]=a),b.$scope.$resolve[c]=a})}var d=e.scope||b,g=d.$new();g.$close=p.close,g.$dismiss=p.dismiss,g.$on("$destroy",function(){g.$$uibDestructionScheduled||g.$dismiss("$uibUnscheduledDestruction")});var i,j,k={scope:g,deferred:l,renderDeferred:o,closedDeferred:n,animation:e.animation,backdrop:e.backdrop,keyboard:e.keyboard,backdropClass:e.backdropClass,windowTopClass:e.windowTopClass,windowClass:e.windowClass,windowTemplateUrl:e.windowTemplateUrl,ariaLabelledBy:e.ariaLabelledBy,ariaDescribedBy:e.ariaDescribedBy,size:e.size,openedClass:e.openedClass,appendTo:e.appendTo},q={},r={};e.component?(c(q,!1,!0,!1),q.name=e.component,k.component=q):e.controller&&(c(r,!0,!1,!0),j=f(e.controller,r,!0,e.controllerAs),e.controllerAs&&e.bindToController&&(i=j.instance,i.$close=g.$close,i.$dismiss=g.$dismiss,angular.extend(i,{$resolve:r.$scope.$resolve},d)),i=j(),angular.isFunction(i.$onInit)&&i.$onInit()),e.component||(k.content=a[0]),h.open(p,k),m.resolve(!0)},function(a){m.reject(a),l.reject(a)})["finally"](function(){k===r&&(k=null)}),p},j}]};return a}),angular.module("ui.bootstrap.paging",[]).factory("uibPaging",["$parse",function(a){return{create:function(b,c,d){b.setNumPages=d.numPages?a(d.numPages).assign:angular.noop,b.ngModelCtrl={$setViewValue:angular.noop},b._watchers=[],b.init=function(a,e){b.ngModelCtrl=a,b.config=e,a.$render=function(){b.render()},d.itemsPerPage?b._watchers.push(c.$parent.$watch(d.itemsPerPage,function(a){
b.itemsPerPage=parseInt(a,10),c.totalPages=b.calculateTotalPages(),b.updatePage()})):b.itemsPerPage=e.itemsPerPage,c.$watch("totalItems",function(a,d){(angular.isDefined(a)||a!==d)&&(c.totalPages=b.calculateTotalPages(),b.updatePage())})},b.calculateTotalPages=function(){var a=b.itemsPerPage<1?1:Math.ceil(c.totalItems/b.itemsPerPage);return Math.max(a||0,1)},b.render=function(){c.page=parseInt(b.ngModelCtrl.$viewValue,10)||1},c.selectPage=function(a,d){d&&d.preventDefault();var e=!c.ngDisabled||!d;e&&c.page!==a&&a>0&&a<=c.totalPages&&(d&&d.target&&d.target.blur(),b.ngModelCtrl.$setViewValue(a),b.ngModelCtrl.$render())},c.getText=function(a){return c[a+"Text"]||b.config[a+"Text"]},c.noPrevious=function(){return 1===c.page},c.noNext=function(){return c.page===c.totalPages},b.updatePage=function(){b.setNumPages(c.$parent,c.totalPages),c.page>c.totalPages?c.selectPage(c.totalPages):b.ngModelCtrl.$render()},c.$on("$destroy",function(){for(;b._watchers.length;)b._watchers.shift()()})}}}]),angular.module("ui.bootstrap.pager",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPagerController",["$scope","$attrs","uibPaging","uibPagerConfig",function(a,b,c,d){a.align=angular.isDefined(b.align)?a.$parent.$eval(b.align):d.align,c.create(this,a,b)}]).constant("uibPagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("uibPager",["uibPagerConfig",function(a){return{scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["uibPager","?ngModel"],restrict:"A",controller:"UibPagerController",controllerAs:"pager",templateUrl:function(a,b){return b.templateUrl||"uib/template/pager/pager.html"},link:function(b,c,d,e){c.addClass("pager");var f=e[0],g=e[1];g&&f.init(g,a)}}}]),angular.module("ui.bootstrap.pagination",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPaginationController",["$scope","$attrs","$parse","uibPaging","uibPaginationConfig",function(a,b,c,d,e){function f(a,b,c){return{number:a,text:b,active:c}}function g(a,b){var c=[],d=1,e=b,g=angular.isDefined(i)&&b>i;g&&(j?(d=Math.max(a-Math.floor(i/2),1),e=d+i-1,e>b&&(e=b,d=e-i+1)):(d=(Math.ceil(a/i)-1)*i+1,e=Math.min(d+i-1,b)));for(var h=d;e>=h;h++){var n=f(h,m(h),h===a);c.push(n)}if(g&&i>0&&(!j||k||l)){if(d>1){if(!l||d>3){var o=f(d-1,"...",!1);c.unshift(o)}if(l){if(3===d){var p=f(2,"2",!1);c.unshift(p)}var q=f(1,"1",!1);c.unshift(q)}}if(b>e){if(!l||b-2>e){var r=f(e+1,"...",!1);c.push(r)}if(l){if(e===b-2){var s=f(b-1,b-1,!1);c.push(s)}var t=f(b,b,!1);c.push(t)}}}return c}var h=this,i=angular.isDefined(b.maxSize)?a.$parent.$eval(b.maxSize):e.maxSize,j=angular.isDefined(b.rotate)?a.$parent.$eval(b.rotate):e.rotate,k=angular.isDefined(b.forceEllipses)?a.$parent.$eval(b.forceEllipses):e.forceEllipses,l=angular.isDefined(b.boundaryLinkNumbers)?a.$parent.$eval(b.boundaryLinkNumbers):e.boundaryLinkNumbers,m=angular.isDefined(b.pageLabel)?function(c){return a.$parent.$eval(b.pageLabel,{$page:c})}:angular.identity;a.boundaryLinks=angular.isDefined(b.boundaryLinks)?a.$parent.$eval(b.boundaryLinks):e.boundaryLinks,a.directionLinks=angular.isDefined(b.directionLinks)?a.$parent.$eval(b.directionLinks):e.directionLinks,b.$set("role","menu"),d.create(this,a,b),b.maxSize&&h._watchers.push(a.$parent.$watch(c(b.maxSize),function(a){i=parseInt(a,10),h.render()}));var n=this.render;this.render=function(){n(),a.page>0&&a.page<=a.totalPages&&(a.pages=g(a.page,a.totalPages))}}]).constant("uibPaginationConfig",{itemsPerPage:10,boundaryLinks:!1,boundaryLinkNumbers:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0,forceEllipses:!1}).directive("uibPagination",["$parse","uibPaginationConfig",function(a,b){return{scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["uibPagination","?ngModel"],restrict:"A",controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(a,b){return b.templateUrl||"uib/template/pagination/pagination.html"},link:function(a,c,d,e){c.addClass("pagination");var f=e[0],g=e[1];g&&f.init(g,b)}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.stackedMap"]).provider("$uibTooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",placementClassPrefix:"",animation:!0,popupDelay:0,popupCloseDelay:0,useContentExp:!1},c={mouseenter:"mouseleave",click:"click",outsideClick:"outsideClick",focus:"blur",none:""},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$document","$uibPosition","$interpolate","$rootScope","$parse","$$stackedMap",function(e,f,g,h,i,j,k,l,m){function n(a){if(27===a.which){var b=o.top();b&&(b.value.close(),b=null)}}var o=m.createNew();return h.on("keyup",n),k.$on("$destroy",function(){h.off("keyup",n)}),function(e,k,m,n){function p(a){var b=(a||n.trigger||m).split(" "),d=b.map(function(a){return c[a]||a});return{show:b,hide:d}}n=angular.extend({},b,d,n);var q=a(e),r=j.startSymbol(),s=j.endSymbol(),t="<div "+q+'-popup uib-title="'+r+"title"+s+'" '+(n.useContentExp?'content-exp="contentExp()" ':'content="'+r+"content"+s+'" ')+'origin-scope="origScope" class="uib-position-measure '+k+'" tooltip-animation-class="fade"uib-tooltip-classes ng-class="{ in: isOpen }" ></div>';return{compile:function(a,b){var c=f(t);return function(a,b,d,f){function j(){P.isOpen?q():m()}function m(){O&&!a.$eval(d[k+"Enable"])||(u(),x(),P.popupDelay?H||(H=g(r,P.popupDelay,!1)):r())}function q(){s(),P.popupCloseDelay?I||(I=g(t,P.popupCloseDelay,!1)):t()}function r(){return s(),u(),P.content?(v(),void P.$evalAsync(function(){P.isOpen=!0,y(!0),U()})):angular.noop}function s(){H&&(g.cancel(H),H=null),J&&(g.cancel(J),J=null)}function t(){P&&P.$evalAsync(function(){P&&(P.isOpen=!1,y(!1),P.animation?G||(G=g(w,150,!1)):w())})}function u(){I&&(g.cancel(I),I=null),G&&(g.cancel(G),G=null)}function v(){E||(F=P.$new(),E=c(F,function(a){M?h.find("body").append(a):b.after(a)}),o.add(P,{close:t}),z())}function w(){s(),u(),A(),E&&(E.remove(),E=null,K&&g.cancel(K)),o.remove(P),F&&(F.$destroy(),F=null)}function x(){P.title=d[k+"Title"],S?P.content=S(a):P.content=d[e],P.popupClass=d[k+"Class"],P.placement=angular.isDefined(d[k+"Placement"])?d[k+"Placement"]:n.placement;var b=i.parsePlacement(P.placement);L=b[1]?b[0]+"-"+b[1]:b[0];var c=parseInt(d[k+"PopupDelay"],10),f=parseInt(d[k+"PopupCloseDelay"],10);P.popupDelay=isNaN(c)?n.popupDelay:c,P.popupCloseDelay=isNaN(f)?n.popupCloseDelay:f}function y(b){R&&angular.isFunction(R.assign)&&R.assign(a,b)}function z(){T.length=0,S?(T.push(a.$watch(S,function(a){P.content=a,!a&&P.isOpen&&t()})),T.push(F.$watch(function(){Q||(Q=!0,F.$$postDigest(function(){Q=!1,P&&P.isOpen&&U()}))}))):T.push(d.$observe(e,function(a){P.content=a,!a&&P.isOpen?t():U()})),T.push(d.$observe(k+"Title",function(a){P.title=a,P.isOpen&&U()})),T.push(d.$observe(k+"Placement",function(a){P.placement=a?a:n.placement,P.isOpen&&U()}))}function A(){T.length&&(angular.forEach(T,function(a){a()}),T.length=0)}function B(a){P&&P.isOpen&&E&&(b[0].contains(a.target)||E[0].contains(a.target)||q())}function C(a){27===a.which&&q()}function D(){var c=[],e=[],f=a.$eval(d[k+"Trigger"]);V(),angular.isObject(f)?(Object.keys(f).forEach(function(a){c.push(a),e.push(f[a])}),N={show:c,hide:e}):N=p(f),"none"!==N.show&&N.show.forEach(function(a,c){"outsideClick"===a?(b.on("click",j),h.on("click",B)):a===N.hide[c]?b.on(a,j):a&&(b.on(a,m),b.on(N.hide[c],q)),b.on("keypress",C)})}var E,F,G,H,I,J,K,L,M=angular.isDefined(n.appendToBody)?n.appendToBody:!1,N=p(void 0),O=angular.isDefined(d[k+"Enable"]),P=a.$new(!0),Q=!1,R=angular.isDefined(d[k+"IsOpen"])?l(d[k+"IsOpen"]):!1,S=n.useContentExp?l(d[e]):!1,T=[],U=function(){E&&E.html()&&(J||(J=g(function(){var a=i.positionElements(b,E,P.placement,M),c=angular.isDefined(E.offsetHeight)?E.offsetHeight:E.prop("offsetHeight"),d=M?i.offset(b):i.position(b);E.css({top:a.top+"px",left:a.left+"px"});var e=a.placement.split("-");E.hasClass(e[0])||(E.removeClass(L.split("-")[0]),E.addClass(e[0])),E.hasClass(n.placementClassPrefix+a.placement)||(E.removeClass(n.placementClassPrefix+L),E.addClass(n.placementClassPrefix+a.placement)),K=g(function(){var a=angular.isDefined(E.offsetHeight)?E.offsetHeight:E.prop("offsetHeight"),b=i.adjustTop(e,d,c,a);b&&E.css(b),K=null},0,!1),E.hasClass("uib-position-measure")?(i.positionArrow(E,a.placement),E.removeClass("uib-position-measure")):L!==a.placement&&i.positionArrow(E,a.placement),L=a.placement,J=null},0,!1)))};P.origScope=a,P.isOpen=!1,P.contentExp=function(){return P.content},d.$observe("disabled",function(a){a&&s(),a&&P.isOpen&&t()}),R&&a.$watch(R,function(a){P&&!a===P.isOpen&&j()});var V=function(){N.show.forEach(function(a){"outsideClick"===a?b.off("click",j):(b.off(a,m),b.off(a,j)),b.off("keypress",C)}),N.hide.forEach(function(a){"outsideClick"===a?h.off("click",B):b.off(a,q)})};D();var W=a.$eval(d[k+"Animation"]);P.animation=angular.isDefined(W)?!!W:n.animation;var X,Y=k+"AppendToBody";X=Y in d&&void 0===d[Y]?!0:a.$eval(d[Y]),M=angular.isDefined(X)?X:M,a.$on("$destroy",function(){V(),w(),P=null})}}}}}]}).directive("uibTooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function(a,b,c,d){return{link:function(e,f,g){var h,i,j,k=e.$eval(g.tooltipTemplateTranscludeScope),l=0,m=function(){i&&(i.remove(),i=null),h&&(h.$destroy(),h=null),j&&(a.leave(j).then(function(){i=null}),i=j,j=null)};e.$watch(b.parseAsResourceUrl(g.uibTooltipTemplateTransclude),function(b){var g=++l;b?(d(b,!0).then(function(d){if(g===l){var e=k.$new(),i=d,n=c(i)(e,function(b){m(),a.enter(b,f)});h=e,j=n,h.$emit("$includeContentLoaded",b)}},function(){g===l&&(m(),e.$emit("$includeContentError",b))}),e.$emit("$includeContentRequested",b)):m()}),e.$on("$destroy",m)}}}]).directive("uibTooltipClasses",["$uibPosition",function(a){return{restrict:"A",link:function(b,c,d){if(b.placement){var e=a.parsePlacement(b.placement);c.addClass(e[0])}b.popupClass&&c.addClass(b.popupClass),b.animation&&c.addClass(d.tooltipAnimationClass)}}}]).directive("uibTooltipPopup",function(){return{restrict:"A",scope:{content:"@"},templateUrl:"uib/template/tooltip/tooltip-popup.html"}}).directive("uibTooltip",["$uibTooltip",function(a){return a("uibTooltip","tooltip","mouseenter")}]).directive("uibTooltipTemplatePopup",function(){return{restrict:"A",scope:{contentExp:"&",originScope:"&"},templateUrl:"uib/template/tooltip/tooltip-template-popup.html"}}).directive("uibTooltipTemplate",["$uibTooltip",function(a){return a("uibTooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("uibTooltipHtmlPopup",function(){return{restrict:"A",scope:{contentExp:"&"},templateUrl:"uib/template/tooltip/tooltip-html-popup.html"}}).directive("uibTooltipHtml",["$uibTooltip",function(a){return a("uibTooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("uibPopoverTemplatePopup",function(){return{restrict:"A",scope:{uibTitle:"@",contentExp:"&",originScope:"&"},templateUrl:"uib/template/popover/popover-template.html"}}).directive("uibPopoverTemplate",["$uibTooltip",function(a){return a("uibPopoverTemplate","popover","click",{useContentExp:!0})}]).directive("uibPopoverHtmlPopup",function(){return{restrict:"A",scope:{contentExp:"&",uibTitle:"@"},templateUrl:"uib/template/popover/popover-html.html"}}).directive("uibPopoverHtml",["$uibTooltip",function(a){return a("uibPopoverHtml","popover","click",{useContentExp:!0})}]).directive("uibPopoverPopup",function(){return{restrict:"A",scope:{uibTitle:"@",content:"@"},templateUrl:"uib/template/popover/popover.html"}}).directive("uibPopover",["$uibTooltip",function(a){return a("uibPopover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("uibProgressConfig",{animate:!0,max:100}).controller("UibProgressController",["$scope","$attrs","uibProgressConfig",function(a,b,c){function d(){return angular.isDefined(a.maxParam)?a.maxParam:c.max}var e=this,f=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.bars=[],a.max=d(),this.addBar=function(a,b,c){f||b.css({transition:"none"}),this.bars.push(a),a.max=d(),a.title=c&&angular.isDefined(c.title)?c.title:"progressbar",a.$watch("value",function(b){a.recalculatePercentage()}),a.recalculatePercentage=function(){var b=e.bars.reduce(function(a,b){return b.percent=+(100*b.value/b.max).toFixed(2),a+b.percent},0);b>100&&(a.percent-=b-100)},a.$on("$destroy",function(){b=null,e.removeBar(a)})},this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1),this.bars.forEach(function(a){a.recalculatePercentage()})},a.$watch("maxParam",function(a){e.bars.forEach(function(a){a.max=d(),a.recalculatePercentage()})})}]).directive("uibProgress",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",require:"uibProgress",scope:{maxParam:"=?max"},templateUrl:"uib/template/progressbar/progress.html"}}).directive("uibBar",function(){return{replace:!0,transclude:!0,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"uib/template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b,c)}}}).directive("uibProgressbar",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",scope:{value:"=",maxParam:"=?max",type:"@"},templateUrl:"uib/template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]),{title:c.title})}}}),angular.module("ui.bootstrap.rating",[]).constant("uibRatingConfig",{max:5,stateOn:null,stateOff:null,enableReset:!0,titles:["one","two","three","four","five"]}).controller("UibRatingController",["$scope","$attrs","uibRatingConfig",function(a,b,c){var d={$setViewValue:angular.noop},e=this;this.init=function(e){d=e,d.$render=this.render,d.$formatters.push(function(a){return angular.isNumber(a)&&a<<0!==a&&(a=Math.round(a)),a}),this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):c.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):c.stateOff,this.enableReset=angular.isDefined(b.enableReset)?a.$parent.$eval(b.enableReset):c.enableReset;var f=angular.isDefined(b.titles)?a.$parent.$eval(b.titles):c.titles;this.titles=angular.isArray(f)&&f.length>0?f:c.titles;var g=angular.isDefined(b.ratingStates)?a.$parent.$eval(b.ratingStates):new Array(angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max);a.range=this.buildTemplateObjects(g)},this.buildTemplateObjects=function(a){for(var b=0,c=a.length;c>b;b++)a[b]=angular.extend({index:b},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(b)},a[b]);return a},this.getTitle=function(a){return a>=this.titles.length?a+1:this.titles[a]},a.rate=function(b){if(!a.readonly&&b>=0&&b<=a.range.length){var c=e.enableReset&&d.$viewValue===b?0:b;d.$setViewValue(c),d.$render()}},a.enter=function(b){a.readonly||(a.value=b),a.onHover({value:b})},a.reset=function(){a.value=d.$viewValue,a.onLeave()},a.onKeydown=function(b){/(37|38|39|40)/.test(b.which)&&(b.preventDefault(),b.stopPropagation(),a.rate(a.value+(38===b.which||39===b.which?1:-1)))},this.render=function(){a.value=d.$viewValue,a.title=e.getTitle(a.value-1)}}]).directive("uibRating",function(){return{require:["uibRating","ngModel"],restrict:"A",scope:{readonly:"=?readOnly",onHover:"&",onLeave:"&"},controller:"UibRatingController",templateUrl:"uib/template/rating/rating.html",link:function(a,b,c,d){var e=d[0],f=d[1];e.init(f)}}}),angular.module("ui.bootstrap.tabs",[]).controller("UibTabsetController",["$scope",function(a){function b(a){for(var b=0;b<d.tabs.length;b++)if(d.tabs[b].index===a)return b}var c,d=this;d.tabs=[],d.select=function(a,f){if(!e){var g=b(c),h=d.tabs[g];if(h){if(h.tab.onDeselect({$event:f,$selectedIndex:a}),f&&f.isDefaultPrevented())return;h.tab.active=!1}var i=d.tabs[a];i?(i.tab.onSelect({$event:f}),i.tab.active=!0,d.active=i.index,c=i.index):!i&&angular.isDefined(c)&&(d.active=null,c=null)}},d.addTab=function(a){if(d.tabs.push({tab:a,index:a.index}),d.tabs.sort(function(a,b){return a.index>b.index?1:a.index<b.index?-1:0}),a.index===d.active||!angular.isDefined(d.active)&&1===d.tabs.length){var c=b(a.index);d.select(c)}},d.removeTab=function(a){for(var b,c=0;c<d.tabs.length;c++)if(d.tabs[c].tab===a){b=c;break}if(d.tabs[b].index===d.active){var e=b===d.tabs.length-1?b-1:b+1%d.tabs.length;d.select(e)}d.tabs.splice(b,1)},a.$watch("tabset.active",function(a){angular.isDefined(a)&&a!==c&&d.select(b(a))});var e;a.$on("$destroy",function(){e=!0})}]).directive("uibTabset",function(){return{transclude:!0,replace:!0,scope:{},bindToController:{active:"=?",type:"@"},controller:"UibTabsetController",controllerAs:"tabset",templateUrl:function(a,b){return b.templateUrl||"uib/template/tabs/tabset.html"},link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1}}}).directive("uibTab",["$parse",function(a){return{require:"^uibTabset",replace:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/tabs/tab.html"},transclude:!0,scope:{heading:"@",index:"=?",classes:"@?",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},controllerAs:"tab",link:function(b,c,d,e,f){b.disabled=!1,d.disable&&b.$parent.$watch(a(d.disable),function(a){b.disabled=!!a}),angular.isUndefined(d.index)&&(e.tabs&&e.tabs.length?b.index=Math.max.apply(null,e.tabs.map(function(a){return a.index}))+1:b.index=0),angular.isUndefined(d.classes)&&(b.classes=""),b.select=function(a){if(!b.disabled){for(var c,d=0;d<e.tabs.length;d++)if(e.tabs[d].tab===b){c=d;break}e.select(c,a)}},e.addTab(b),b.$on("$destroy",function(){e.removeTab(b)}),b.$transcludeFn=f}}}]).directive("uibTabHeadingTransclude",function(){return{restrict:"A",require:"^uibTab",link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}).directive("uibTabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("uib-tab-heading")||a.hasAttribute("data-uib-tab-heading")||a.hasAttribute("x-uib-tab-heading")||"uib-tab-heading"===a.tagName.toLowerCase()||"data-uib-tab-heading"===a.tagName.toLowerCase()||"x-uib-tab-heading"===a.tagName.toLowerCase()||"uib:tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^uibTabset",link:function(b,c,d){var e=b.$eval(d.uibTabContentTransclude).tab;e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("uibTimepickerConfig",{hourStep:1,minuteStep:1,secondStep:1,showMeridian:!0,showSeconds:!1,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0,showSpinners:!0,templateUrl:"uib/template/timepicker/timepicker.html"}).controller("UibTimepickerController",["$scope","$element","$attrs","$parse","$log","$locale","uibTimepickerConfig",function(a,b,c,d,e,f,g){function h(){var b=+a.hours,c=a.showMeridian?b>0&&13>b:b>=0&&24>b;return c&&""!==a.hours?(a.showMeridian&&(12===b&&(b=0),a.meridian===y[1]&&(b+=12)),b):void 0}function i(){var b=+a.minutes,c=b>=0&&60>b;return c&&""!==a.minutes?b:void 0}function j(){var b=+a.seconds;return b>=0&&60>b?b:void 0}function k(a,b){return null===a?"":angular.isDefined(a)&&a.toString().length<2&&!b?"0"+a:a.toString()}function l(a){m(),x.$setViewValue(new Date(v)),n(a)}function m(){s&&s.$setValidity("hours",!0),t&&t.$setValidity("minutes",!0),u&&u.$setValidity("seconds",!0),x.$setValidity("time",!0),a.invalidHours=!1,a.invalidMinutes=!1,a.invalidSeconds=!1}function n(b){if(x.$modelValue){var c=v.getHours(),d=v.getMinutes(),e=v.getSeconds();a.showMeridian&&(c=0===c||12===c?12:c%12),a.hours="h"===b?c:k(c,!z),"m"!==b&&(a.minutes=k(d)),a.meridian=v.getHours()<12?y[0]:y[1],"s"!==b&&(a.seconds=k(e)),a.meridian=v.getHours()<12?y[0]:y[1]}else a.hours=null,a.minutes=null,a.seconds=null,a.meridian=y[0]}function o(a){v=q(v,a),l()}function p(a,b){return q(a,60*b)}function q(a,b){var c=new Date(a.getTime()+1e3*b),d=new Date(a);return d.setHours(c.getHours(),c.getMinutes(),c.getSeconds()),d}function r(){return(null===a.hours||""===a.hours)&&(null===a.minutes||""===a.minutes)&&(!a.showSeconds||a.showSeconds&&(null===a.seconds||""===a.seconds))}var s,t,u,v=new Date,w=[],x={$setViewValue:angular.noop},y=angular.isDefined(c.meridians)?a.$parent.$eval(c.meridians):g.meridians||f.DATETIME_FORMATS.AMPMS,z=angular.isDefined(c.padHours)?a.$parent.$eval(c.padHours):!0;a.tabindex=angular.isDefined(c.tabindex)?c.tabindex:0,b.removeAttr("tabindex"),this.init=function(b,d){x=b,x.$render=this.render,x.$formatters.unshift(function(a){return a?new Date(a):null});var e=d.eq(0),f=d.eq(1),h=d.eq(2);s=e.controller("ngModel"),t=f.controller("ngModel"),u=h.controller("ngModel");var i=angular.isDefined(c.mousewheel)?a.$parent.$eval(c.mousewheel):g.mousewheel;i&&this.setupMousewheelEvents(e,f,h);var j=angular.isDefined(c.arrowkeys)?a.$parent.$eval(c.arrowkeys):g.arrowkeys;j&&this.setupArrowkeyEvents(e,f,h),a.readonlyInput=angular.isDefined(c.readonlyInput)?a.$parent.$eval(c.readonlyInput):g.readonlyInput,this.setupInputEvents(e,f,h)};var A=g.hourStep;c.hourStep&&w.push(a.$parent.$watch(d(c.hourStep),function(a){A=+a}));var B=g.minuteStep;c.minuteStep&&w.push(a.$parent.$watch(d(c.minuteStep),function(a){B=+a}));var C;w.push(a.$parent.$watch(d(c.min),function(a){var b=new Date(a);C=isNaN(b)?void 0:b}));var D;w.push(a.$parent.$watch(d(c.max),function(a){var b=new Date(a);D=isNaN(b)?void 0:b}));var E=!1;c.ngDisabled&&w.push(a.$parent.$watch(d(c.ngDisabled),function(a){E=a})),a.noIncrementHours=function(){var a=p(v,60*A);return E||a>D||v>a&&C>a},a.noDecrementHours=function(){var a=p(v,60*-A);return E||C>a||a>v&&a>D},a.noIncrementMinutes=function(){var a=p(v,B);return E||a>D||v>a&&C>a},a.noDecrementMinutes=function(){var a=p(v,-B);return E||C>a||a>v&&a>D},a.noIncrementSeconds=function(){var a=q(v,F);return E||a>D||v>a&&C>a},a.noDecrementSeconds=function(){var a=q(v,-F);return E||C>a||a>v&&a>D},a.noToggleMeridian=function(){return v.getHours()<12?E||p(v,720)>D:E||p(v,-720)<C};var F=g.secondStep;c.secondStep&&w.push(a.$parent.$watch(d(c.secondStep),function(a){F=+a})),a.showSeconds=g.showSeconds,c.showSeconds&&w.push(a.$parent.$watch(d(c.showSeconds),function(b){a.showSeconds=!!b})),a.showMeridian=g.showMeridian,c.showMeridian&&w.push(a.$parent.$watch(d(c.showMeridian),function(b){if(a.showMeridian=!!b,x.$error.time){var c=h(),d=i();angular.isDefined(c)&&angular.isDefined(d)&&(v.setHours(c),l())}else n()})),this.setupMousewheelEvents=function(b,c,d){var e=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};b.on("mousewheel wheel",function(b){E||a.$apply(e(b)?a.incrementHours():a.decrementHours()),b.preventDefault()}),c.on("mousewheel wheel",function(b){E||a.$apply(e(b)?a.incrementMinutes():a.decrementMinutes()),b.preventDefault()}),d.on("mousewheel wheel",function(b){E||a.$apply(e(b)?a.incrementSeconds():a.decrementSeconds()),b.preventDefault()})},this.setupArrowkeyEvents=function(b,c,d){b.on("keydown",function(b){E||(38===b.which?(b.preventDefault(),a.incrementHours(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementHours(),a.$apply()))}),c.on("keydown",function(b){E||(38===b.which?(b.preventDefault(),a.incrementMinutes(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementMinutes(),a.$apply()))}),d.on("keydown",function(b){E||(38===b.which?(b.preventDefault(),a.incrementSeconds(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementSeconds(),a.$apply()))})},this.setupInputEvents=function(b,c,d){if(a.readonlyInput)return a.updateHours=angular.noop,a.updateMinutes=angular.noop,void(a.updateSeconds=angular.noop);var e=function(b,c,d){x.$setViewValue(null),x.$setValidity("time",!1),angular.isDefined(b)&&(a.invalidHours=b,s&&s.$setValidity("hours",!1)),angular.isDefined(c)&&(a.invalidMinutes=c,t&&t.$setValidity("minutes",!1)),angular.isDefined(d)&&(a.invalidSeconds=d,u&&u.$setValidity("seconds",!1))};a.updateHours=function(){var a=h(),b=i();x.$setDirty(),angular.isDefined(a)&&angular.isDefined(b)?(v.setHours(a),v.setMinutes(b),C>v||v>D?e(!0):l("h")):e(!0)},b.on("blur",function(b){x.$setTouched(),r()?m():null===a.hours||""===a.hours?e(!0):!a.invalidHours&&a.hours<10&&a.$apply(function(){a.hours=k(a.hours,!z)})}),a.updateMinutes=function(){var a=i(),b=h();x.$setDirty(),angular.isDefined(a)&&angular.isDefined(b)?(v.setHours(b),v.setMinutes(a),C>v||v>D?e(void 0,!0):l("m")):e(void 0,!0)},c.on("blur",function(b){x.$setTouched(),r()?m():null===a.minutes?e(void 0,!0):!a.invalidMinutes&&a.minutes<10&&a.$apply(function(){a.minutes=k(a.minutes)})}),a.updateSeconds=function(){var a=j();x.$setDirty(),angular.isDefined(a)?(v.setSeconds(a),l("s")):e(void 0,void 0,!0)},d.on("blur",function(b){r()?m():!a.invalidSeconds&&a.seconds<10&&a.$apply(function(){a.seconds=k(a.seconds)})})},this.render=function(){var b=x.$viewValue;isNaN(b)?(x.$setValidity("time",!1),e.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(b&&(v=b),C>v||v>D?(x.$setValidity("time",!1),a.invalidHours=!0,a.invalidMinutes=!0):m(),n())},a.showSpinners=angular.isDefined(c.showSpinners)?a.$parent.$eval(c.showSpinners):g.showSpinners,a.incrementHours=function(){a.noIncrementHours()||o(60*A*60)},a.decrementHours=function(){a.noDecrementHours()||o(60*-A*60)},a.incrementMinutes=function(){a.noIncrementMinutes()||o(60*B)},a.decrementMinutes=function(){a.noDecrementMinutes()||o(60*-B)},a.incrementSeconds=function(){a.noIncrementSeconds()||o(F)},a.decrementSeconds=function(){a.noDecrementSeconds()||o(-F)},a.toggleMeridian=function(){var b=i(),c=h();a.noToggleMeridian()||(angular.isDefined(b)&&angular.isDefined(c)?o(720*(v.getHours()<12?60:-60)):a.meridian=a.meridian===y[0]?y[1]:y[0])},a.blur=function(){x.$setTouched()},a.$on("$destroy",function(){for(;w.length;)w.shift()()})}]).directive("uibTimepicker",["uibTimepickerConfig",function(a){return{require:["uibTimepicker","?^ngModel"],restrict:"A",controller:"UibTimepickerController",controllerAs:"timepicker",scope:{},templateUrl:function(b,c){return c.templateUrl||a.templateUrl},link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f,b.find("input"))}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.debounce","ui.bootstrap.position"]).factory("uibTypeaheadParser",["$parse",function(a){var b=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+c+'".');return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).controller("UibTypeaheadController",["$scope","$element","$attrs","$compile","$parse","$q","$timeout","$document","$window","$rootScope","$$debounce","$uibPosition","uibTypeaheadParser",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){P.moveInProgress||(P.moveInProgress=!0,P.$digest()),$()}function o(){P.position=F?l.offset(b):l.position(b),P.position.top+=b.prop("offsetHeight")}function p(a){var b;return angular.version.minor<6?(b=a.$options||{},b.getOption=function(a){return b[a]}):b=a.$options,b}var q,r,s=[9,13,27,38,40],t=200,u=a.$eval(c.typeaheadMinLength);u||0===u||(u=1),a.$watch(c.typeaheadMinLength,function(a){u=a||0===a?a:1});var v=a.$eval(c.typeaheadWaitMs)||0,w=a.$eval(c.typeaheadEditable)!==!1;a.$watch(c.typeaheadEditable,function(a){w=a!==!1});var x,y,z=e(c.typeaheadLoading).assign||angular.noop,A=c.typeaheadShouldSelect?e(c.typeaheadShouldSelect):function(a,b){var c=b.$event;return 13===c.which||9===c.which},B=e(c.typeaheadOnSelect),C=angular.isDefined(c.typeaheadSelectOnBlur)?a.$eval(c.typeaheadSelectOnBlur):!1,D=e(c.typeaheadNoResults).assign||angular.noop,E=c.typeaheadInputFormatter?e(c.typeaheadInputFormatter):void 0,F=c.typeaheadAppendToBody?a.$eval(c.typeaheadAppendToBody):!1,G=c.typeaheadAppendTo?a.$eval(c.typeaheadAppendTo):null,H=a.$eval(c.typeaheadFocusFirst)!==!1,I=c.typeaheadSelectOnExact?a.$eval(c.typeaheadSelectOnExact):!1,J=e(c.typeaheadIsOpen).assign||angular.noop,K=a.$eval(c.typeaheadShowHint)||!1,L=e(c.ngModel),M=e(c.ngModel+"($$$p)"),N=function(b,c){return angular.isFunction(L(a))&&r.getOption("getterSetter")?M(b,{$$$p:c}):L.assign(b,c)},O=m.parse(c.uibTypeahead),P=a.$new(),Q=a.$on("$destroy",function(){P.$destroy()});P.$on("$destroy",Q);var R="typeahead-"+P.$id+"-"+Math.floor(1e4*Math.random());b.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":R});var S,T;K&&(S=angular.element("<div></div>"),S.css("position","relative"),b.after(S),T=b.clone(),T.attr("placeholder",""),T.attr("tabindex","-1"),T.val(""),T.css({position:"absolute",top:"0px",left:"0px","border-color":"transparent","box-shadow":"none",opacity:1,background:"none 0% 0% / auto repeat scroll padding-box border-box rgb(255, 255, 255)",color:"#999"}),b.css({position:"relative","vertical-align":"top","background-color":"transparent"}),T.attr("id")&&T.removeAttr("id"),S.append(T),T.after(b));var U=angular.element("<div uib-typeahead-popup></div>");U.attr({id:R,matches:"matches",active:"activeIdx",select:"select(activeIdx, evt)","move-in-progress":"moveInProgress",query:"query",position:"position","assign-is-open":"assignIsOpen(isOpen)",debounce:"debounceUpdate"}),angular.isDefined(c.typeaheadTemplateUrl)&&U.attr("template-url",c.typeaheadTemplateUrl),angular.isDefined(c.typeaheadPopupTemplateUrl)&&U.attr("popup-template-url",c.typeaheadPopupTemplateUrl);var V=function(){K&&T.val("")},W=function(){P.matches=[],P.activeIdx=-1,b.attr("aria-expanded",!1),V()},X=function(a){return R+"-option-"+a};P.$watch("activeIdx",function(a){0>a?b.removeAttr("aria-activedescendant"):b.attr("aria-activedescendant",X(a))});var Y=function(a,b){return P.matches.length>b&&a?a.toUpperCase()===P.matches[b].label.toUpperCase():!1},Z=function(c,d){var e={$viewValue:c};z(a,!0),D(a,!1),f.when(O.source(a,e)).then(function(f){var g=c===q.$viewValue;if(g&&x)if(f&&f.length>0){P.activeIdx=H?0:-1,D(a,!1),P.matches.length=0;for(var h=0;h<f.length;h++)e[O.itemName]=f[h],P.matches.push({id:X(h),label:O.viewMapper(P,e),model:f[h]});if(P.query=c,o(),b.attr("aria-expanded",!0),I&&1===P.matches.length&&Y(c,0)&&(angular.isNumber(P.debounceUpdate)||angular.isObject(P.debounceUpdate)?k(function(){P.select(0,d)},angular.isNumber(P.debounceUpdate)?P.debounceUpdate:P.debounceUpdate["default"]):P.select(0,d)),K){var i=P.matches[0].label;angular.isString(c)&&c.length>0&&i.slice(0,c.length).toUpperCase()===c.toUpperCase()?T.val(c+i.slice(c.length)):T.val("")}}else W(),D(a,!0);g&&z(a,!1)},function(){W(),z(a,!1),D(a,!0)})};F&&(angular.element(i).on("resize",n),h.find("body").on("scroll",n));var $=k(function(){P.matches.length&&o(),P.moveInProgress=!1},t);P.moveInProgress=!1,P.query=void 0;var _,aa=function(a){_=g(function(){Z(a)},v)},ba=function(){_&&g.cancel(_)};W(),P.assignIsOpen=function(b){J(a,b)},P.select=function(d,e){var f,h,i={};y=!0,i[O.itemName]=h=P.matches[d].model,f=O.modelMapper(a,i),N(a,f),q.$setValidity("editable",!0),q.$setValidity("parse",!0),B(a,{$item:h,$model:f,$label:O.viewMapper(a,i),$event:e}),W(),P.$eval(c.typeaheadFocusOnSelect)!==!1&&g(function(){b[0].focus()},0,!1)},b.on("keydown",function(b){if(0!==P.matches.length&&-1!==s.indexOf(b.which)){var c=A(a,{$event:b});if(-1===P.activeIdx&&c||9===b.which&&b.shiftKey)return W(),void P.$digest();b.preventDefault();var d;switch(b.which){case 27:b.stopPropagation(),W(),a.$digest();break;case 38:P.activeIdx=(P.activeIdx>0?P.activeIdx:P.matches.length)-1,P.$digest(),d=U[0].querySelectorAll(".uib-typeahead-match")[P.activeIdx],d.parentNode.scrollTop=d.offsetTop;break;case 40:P.activeIdx=(P.activeIdx+1)%P.matches.length,P.$digest(),d=U[0].querySelectorAll(".uib-typeahead-match")[P.activeIdx],
d.parentNode.scrollTop=d.offsetTop;break;default:c&&P.$apply(function(){angular.isNumber(P.debounceUpdate)||angular.isObject(P.debounceUpdate)?k(function(){P.select(P.activeIdx,b)},angular.isNumber(P.debounceUpdate)?P.debounceUpdate:P.debounceUpdate["default"]):P.select(P.activeIdx,b)})}}}),b.on("focus",function(a){x=!0,0!==u||q.$viewValue||g(function(){Z(q.$viewValue,a)},0)}),b.on("blur",function(a){C&&P.matches.length&&-1!==P.activeIdx&&!y&&(y=!0,P.$apply(function(){angular.isObject(P.debounceUpdate)&&angular.isNumber(P.debounceUpdate.blur)?k(function(){P.select(P.activeIdx,a)},P.debounceUpdate.blur):P.select(P.activeIdx,a)})),!w&&q.$error.editable&&(q.$setViewValue(),P.$apply(function(){q.$setValidity("editable",!0),q.$setValidity("parse",!0)}),b.val("")),x=!1,y=!1});var ca=function(c){b[0]!==c.target&&3!==c.which&&0!==P.matches.length&&(W(),j.$$phase||a.$digest())};h.on("click",ca),a.$on("$destroy",function(){h.off("click",ca),(F||G)&&da.remove(),F&&(angular.element(i).off("resize",n),h.find("body").off("scroll",n)),U.remove(),K&&S.remove()});var da=d(U)(P);F?h.find("body").append(da):G?angular.element(G).eq(0).append(da):b.after(da),this.init=function(b){q=b,r=p(q),P.debounceUpdate=e(r.getOption("debounce"))(a),q.$parsers.unshift(function(b){return x=!0,0===u||b&&b.length>=u?v>0?(ba(),aa(b)):Z(b):(z(a,!1),ba(),W()),w?b:b?void q.$setValidity("editable",!1):(q.$setValidity("editable",!0),null)}),q.$formatters.push(function(b){var c,d,e={};return w||q.$setValidity("editable",!0),E?(e.$model=b,E(a,e)):(e[O.itemName]=b,c=O.viewMapper(a,e),e[O.itemName]=void 0,d=O.viewMapper(a,e),c!==d?c:b)})}}]).directive("uibTypeahead",function(){return{controller:"UibTypeaheadController",require:["ngModel","uibTypeahead"],link:function(a,b,c,d){d[1].init(d[0])}}}).directive("uibTypeaheadPopup",["$$debounce",function(a){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&",assignIsOpen:"&",debounce:"&"},replace:!0,templateUrl:function(a,b){return b.popupTemplateUrl||"uib/template/typeahead/typeahead-popup.html"},link:function(b,c,d){b.templateUrl=d.templateUrl,b.isOpen=function(){var a=b.matches.length>0;return b.assignIsOpen({isOpen:a}),a},b.isActive=function(a){return b.active===a},b.selectActive=function(a){b.active=a},b.selectMatch=function(c,d){var e=b.debounce();angular.isNumber(e)||angular.isObject(e)?a(function(){b.select({activeIdx:c,evt:d})},angular.isNumber(e)?e:e["default"]):b.select({activeIdx:c,evt:d})}}}}]).directive("uibTypeaheadMatch",["$templateRequest","$compile","$parse",function(a,b,c){return{scope:{index:"=",match:"=",query:"="},link:function(d,e,f){var g=c(f.templateUrl)(d.$parent)||"uib/template/typeahead/typeahead-match.html";a(g).then(function(a){var c=angular.element(a.trim());e.replaceWith(c),b(c)(d)})}}}]).filter("uibTypeaheadHighlight",["$sce","$injector","$log",function(a,b,c){function d(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function e(a){return/<.*>/g.test(a)}var f;return f=b.has("$sanitize"),function(b,g){return!f&&e(b)&&c.warn("Unsafe use of typeahead please use ngSanitize"),b=g?(""+b).replace(new RegExp(d(g),"gi"),"<strong>$&</strong>"):b,f||(b=a.trustAsHtml(b)),b}}]),angular.module("uib/template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("uib/template/accordion/accordion-group.html",'<div role="tab" id="{{::headingId}}" aria-selected="{{isOpen}}" class="panel-heading" ng-keypress="toggleOpen($event)">\n  <h4 class="panel-title">\n    <a role="button" data-toggle="collapse" href aria-expanded="{{isOpen}}" aria-controls="{{::panelId}}" tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" uib-accordion-transclude="heading" ng-disabled="isDisabled" uib-tabindex-toggle><span uib-accordion-header ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n  </h4>\n</div>\n<div id="{{::panelId}}" aria-labelledby="{{::headingId}}" aria-hidden="{{!isOpen}}" role="tabpanel" class="panel-collapse collapse" uib-collapse="!isOpen">\n  <div class="panel-body" ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("uib/template/accordion/accordion.html",'<div role="tablist" class="panel-group" ng-transclude></div>')}]),angular.module("uib/template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("uib/template/alert/alert.html",'<button ng-show="closeable" type="button" class="close" ng-click="close({$event: $event})">\n  <span aria-hidden="true">&times;</span>\n  <span class="sr-only">Close</span>\n</button>\n<div ng-transclude></div>\n')}]),angular.module("uib/template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("uib/template/carousel/carousel.html",'<div class="carousel-inner" ng-transclude></div>\n<a role="button" href class="left carousel-control" ng-click="prev()" ng-class="{ disabled: isPrevDisabled() }" ng-show="slides.length > 1">\n  <span aria-hidden="true" class="glyphicon glyphicon-chevron-left"></span>\n  <span class="sr-only">previous</span>\n</a>\n<a role="button" href class="right carousel-control" ng-click="next()" ng-class="{ disabled: isNextDisabled() }" ng-show="slides.length > 1">\n  <span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>\n  <span class="sr-only">next</span>\n</a>\n<ol class="carousel-indicators" ng-show="slides.length > 1">\n  <li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{ active: isActive(slide) }" ng-click="select(slide)">\n    <span class="sr-only">slide {{ $index + 1 }} of {{ slides.length }}<span ng-if="isActive(slide)">, currently active</span></span>\n  </li>\n</ol>\n')}]),angular.module("uib/template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("uib/template/carousel/slide.html",'<div class="text-center" ng-transclude></div>\n')}]),angular.module("uib/template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/datepicker.html",'<div ng-switch="datepickerMode">\n  <div uib-daypicker ng-switch-when="day" tabindex="0" class="uib-daypicker"></div>\n  <div uib-monthpicker ng-switch-when="month" tabindex="0" class="uib-monthpicker"></div>\n  <div uib-yearpicker ng-switch-when="year" tabindex="0" class="uib-yearpicker"></div>\n</div>\n')}]),angular.module("uib/template/datepicker/day.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/day.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></button></th>\n    </tr>\n    <tr>\n      <th ng-if="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-weeks" ng-repeat="row in rows track by $index" role="row">\n      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row" class="uib-day text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default btn-sm"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/month.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/month.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::yearHeaderColspan}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-months" ng-repeat="row in rows track by $index" role="row">\n      <td ng-repeat="dt in row" class="uib-month text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/year.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/year.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::columns - 2}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-years" ng-repeat="row in rows track by $index" role="row">\n      <td ng-repeat="dt in row" class="uib-year text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepickerPopup/popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepickerPopup/popup.html",'<ul role="presentation" class="uib-datepicker-popup dropdown-menu uib-position-measure" dropdown-nested ng-if="isOpen" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n  <li ng-transclude></li>\n  <li ng-if="showButtonBar" class="uib-button-bar">\n    <span class="btn-group pull-left">\n      <button type="button" class="btn btn-sm btn-info uib-datepicker-current" ng-click="select(\'today\', $event)" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>\n      <button type="button" class="btn btn-sm btn-danger uib-clear" ng-click="select(null, $event)">{{ getText(\'clear\') }}</button>\n    </span>\n    <button type="button" class="btn btn-sm btn-success pull-right uib-close" ng-click="close($event)">{{ getText(\'close\') }}</button>\n  </li>\n</ul>\n')}]),angular.module("uib/template/modal/window.html",[]).run(["$templateCache",function(a){a.put("uib/template/modal/window.html","<div class=\"modal-dialog {{size ? 'modal-' + size : ''}}\"><div class=\"modal-content\" uib-modal-transclude></div></div>\n")}]),angular.module("uib/template/pager/pager.html",[]).run(["$templateCache",function(a){a.put("uib/template/pager/pager.html",'<li ng-class="{disabled: noPrevious()||ngDisabled, previous: align}"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n<li ng-class="{disabled: noNext()||ngDisabled, next: align}"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n')}]),angular.module("uib/template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("uib/template/pagination/pagination.html",'<li role="menuitem" ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'first\')}}</a></li>\n<li role="menuitem" ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n<li role="menuitem" ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)" ng-disabled="ngDisabled&&!page.active" uib-tabindex-toggle>{{page.text}}</a></li>\n<li role="menuitem" ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n<li role="menuitem" ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'last\')}}</a></li>\n')}]),angular.module("uib/template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/tooltip/tooltip-html-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n')}]),angular.module("uib/template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/tooltip/tooltip-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner" ng-bind="content"></div>\n')}]),angular.module("uib/template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/tooltip/tooltip-template-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner"\n  uib-tooltip-template-transclude="contentExp()"\n  tooltip-template-transclude-scope="originScope()"></div>\n')}]),angular.module("uib/template/popover/popover-html.html",[]).run(["$templateCache",function(a){a.put("uib/template/popover/popover-html.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content" ng-bind-html="contentExp()"></div>\n</div>\n')}]),angular.module("uib/template/popover/popover-template.html",[]).run(["$templateCache",function(a){a.put("uib/template/popover/popover-template.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content"\n      uib-tooltip-template-transclude="contentExp()"\n      tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')}]),angular.module("uib/template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("uib/template/popover/popover.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content" ng-bind="content"></div>\n</div>\n')}]),angular.module("uib/template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("uib/template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n')}]),angular.module("uib/template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("uib/template/progressbar/progress.html",'<div class="progress" ng-transclude aria-labelledby="{{::title}}"></div>')}]),angular.module("uib/template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("uib/template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("uib/template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}" aria-valuetext="{{title}}">\n    <span ng-repeat-start="r in range track by $index" class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    <i ng-repeat-end ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')" ng-attr-title="{{r.title}}"></i>\n</span>\n')}]),angular.module("uib/template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("uib/template/tabs/tab.html",'<li ng-class="[{active: active, disabled: disabled}, classes]" class="uib-tab nav-item">\n  <a href ng-click="select($event)" class="nav-link" uib-tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("uib/template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("uib/template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{tabset.type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane"\n         ng-repeat="tab in tabset.tabs"\n         ng-class="{active: tabset.active === tab.index}"\n         uib-tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("uib/template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("uib/template/timepicker/timepicker.html",'<table class="uib-timepicker">\n  <tbody>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-increment hours"><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link" ng-disabled="noIncrementHours()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-increment minutes"><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link" ng-disabled="noIncrementMinutes()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-increment seconds"><a ng-click="incrementSeconds()" ng-class="{disabled: noIncrementSeconds()}" class="btn btn-link" ng-disabled="noIncrementSeconds()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n    <tr>\n      <td class="form-group uib-time hours" ng-class="{\'has-error\': invalidHours}">\n        <input type="text" placeholder="HH" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementHours()" ng-blur="blur()">\n      </td>\n      <td class="uib-separator">:</td>\n      <td class="form-group uib-time minutes" ng-class="{\'has-error\': invalidMinutes}">\n        <input type="text" placeholder="MM" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementMinutes()" ng-blur="blur()">\n      </td>\n      <td ng-show="showSeconds" class="uib-separator">:</td>\n      <td class="form-group uib-time seconds" ng-class="{\'has-error\': invalidSeconds}" ng-show="showSeconds">\n        <input type="text" placeholder="SS" ng-model="seconds" ng-change="updateSeconds()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementSeconds()" ng-blur="blur()">\n      </td>\n      <td ng-show="showMeridian" class="uib-time am-pm"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()" ng-disabled="noToggleMeridian()" tabindex="{{::tabindex}}">{{meridian}}</button></td>\n    </tr>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-decrement hours"><a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link" ng-disabled="noDecrementHours()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-decrement minutes"><a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link" ng-disabled="noDecrementMinutes()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-decrement seconds"><a ng-click="decrementSeconds()" ng-class="{disabled: noDecrementSeconds()}" class="btn btn-link" ng-disabled="noDecrementSeconds()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("uib/template/typeahead/typeahead-match.html",'<a href\n   tabindex="-1"\n   ng-bind-html="match.label | uibTypeaheadHighlight:query"\n   ng-attr-title="{{match.label}}"></a>\n')}]),angular.module("uib/template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li class="uib-typeahead-match" ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index, $event)" role="option" id="{{::match.id}}">\n        <div uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),angular.module("ui.bootstrap.carousel").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibCarouselCss&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>'),angular.$$uibCarouselCss=!0}),angular.module("ui.bootstrap.datepicker").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker .uib-title{width:100%;}.uib-day button,.uib-month button,.uib-year button{min-width:100%;}.uib-left,.uib-right{width:100%}</style>'),angular.$$uibDatepickerCss=!0}),angular.module("ui.bootstrap.position").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibPositionCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-position-measure{display:block !important;visibility:hidden !important;position:absolute !important;top:-9999px !important;left:-9999px !important;}.uib-position-scrollbar-measure{position:absolute !important;top:-9999px !important;width:50px !important;height:50px !important;overflow:scroll !important;}.uib-position-body-scrollbar-measure{overflow:scroll !important;}</style>'),angular.$$uibPositionCss=!0}),angular.module("ui.bootstrap.datepickerPopup").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerpopupCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker-popup.dropdown-menu{display:block;float:none;margin:0;}.uib-button-bar{padding:10px 9px 2px;}</style>'),angular.$$uibDatepickerpopupCss=!0}),angular.module("ui.bootstrap.tooltip").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTooltipCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-tooltip-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-bottom > .tooltip-arrow,[uib-popover-popup].popover.top-left > .arrow,[uib-popover-popup].popover.top-right > .arrow,[uib-popover-popup].popover.bottom-left > .arrow,[uib-popover-popup].popover.bottom-right > .arrow,[uib-popover-popup].popover.left-top > .arrow,[uib-popover-popup].popover.left-bottom > .arrow,[uib-popover-popup].popover.right-top > .arrow,[uib-popover-popup].popover.right-bottom > .arrow,[uib-popover-html-popup].popover.top-left > .arrow,[uib-popover-html-popup].popover.top-right > .arrow,[uib-popover-html-popup].popover.bottom-left > .arrow,[uib-popover-html-popup].popover.bottom-right > .arrow,[uib-popover-html-popup].popover.left-top > .arrow,[uib-popover-html-popup].popover.left-bottom > .arrow,[uib-popover-html-popup].popover.right-top > .arrow,[uib-popover-html-popup].popover.right-bottom > .arrow,[uib-popover-template-popup].popover.top-left > .arrow,[uib-popover-template-popup].popover.top-right > .arrow,[uib-popover-template-popup].popover.bottom-left > .arrow,[uib-popover-template-popup].popover.bottom-right > .arrow,[uib-popover-template-popup].popover.left-top > .arrow,[uib-popover-template-popup].popover.left-bottom > .arrow,[uib-popover-template-popup].popover.right-top > .arrow,[uib-popover-template-popup].popover.right-bottom > .arrow{top:auto;bottom:auto;left:auto;right:auto;margin:0;}[uib-popover-popup].popover,[uib-popover-html-popup].popover,[uib-popover-template-popup].popover{display:block !important;}</style>'),angular.$$uibTooltipCss=!0}),angular.module("ui.bootstrap.timepicker").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTimepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-time input{width:50px;}</style>'),angular.$$uibTimepickerCss=!0}),angular.module("ui.bootstrap.typeahead").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTypeaheadCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-typeahead-popup].dropdown-menu{display:block;}</style>'),angular.$$uibTypeaheadCss=!0});
!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.moment=b()}(this,function(){"use strict";function a(){return Md.apply(null,arguments)}function b(a){Md=a}function c(a){return"[object Array]"===Object.prototype.toString.call(a)}function d(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function e(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function f(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function g(a,b){for(var c in b)f(b,c)&&(a[c]=b[c]);return f(b,"toString")&&(a.toString=b.toString),f(b,"valueOf")&&(a.valueOf=b.valueOf),a}function h(a,b,c,d){return Ca(a,b,c,d,!0).utc()}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function j(a){return null==a._pf&&(a._pf=i()),a._pf}function k(a){if(null==a._isValid){var b=j(a);a._isValid=!(isNaN(a._d.getTime())||!(b.overflow<0)||b.empty||b.invalidMonth||b.invalidWeekday||b.nullInput||b.invalidFormat||b.userInvalidated),a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function l(a){var b=h(NaN);return null!=a?g(j(b),a):j(b).userInvalidated=!0,b}function m(a,b){var c,d,e;if("undefined"!=typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),"undefined"!=typeof b._i&&(a._i=b._i),"undefined"!=typeof b._f&&(a._f=b._f),"undefined"!=typeof b._l&&(a._l=b._l),"undefined"!=typeof b._strict&&(a._strict=b._strict),"undefined"!=typeof b._tzm&&(a._tzm=b._tzm),"undefined"!=typeof b._isUTC&&(a._isUTC=b._isUTC),"undefined"!=typeof b._offset&&(a._offset=b._offset),"undefined"!=typeof b._pf&&(a._pf=j(b)),"undefined"!=typeof b._locale&&(a._locale=b._locale),Od.length>0)for(c in Od)d=Od[c],e=b[d],"undefined"!=typeof e&&(a[d]=e);return a}function n(b){m(this,b),this._d=new Date(null!=b._d?b._d.getTime():NaN),Pd===!1&&(Pd=!0,a.updateOffset(this),Pd=!1)}function o(a){return a instanceof n||null!=a&&null!=a._isAMomentObject}function p(a){return 0>a?Math.ceil(a):Math.floor(a)}function q(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=p(b)),c}function r(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&q(a[d])!==q(b[d]))&&g++;return g+f}function s(){}function t(a){return a?a.toLowerCase().replace("_","-"):a}function u(a){for(var b,c,d,e,f=0;f<a.length;){for(e=t(a[f]).split("-"),b=e.length,c=t(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=v(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&r(e,c,!0)>=b-1)break;b--}f++}return null}function v(a){var b=null;if(!Qd[a]&&"undefined"!=typeof module&&module&&module.exports)try{b=Nd._abbr,require("./locale/"+a),w(b)}catch(c){}return Qd[a]}function w(a,b){var c;return a&&(c="undefined"==typeof b?y(a):x(a,b),c&&(Nd=c)),Nd._abbr}function x(a,b){return null!==b?(b.abbr=a,Qd[a]=Qd[a]||new s,Qd[a].set(b),w(a),Qd[a]):(delete Qd[a],null)}function y(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return Nd;if(!c(a)){if(b=v(a))return b;a=[a]}return u(a)}function z(a,b){var c=a.toLowerCase();Rd[c]=Rd[c+"s"]=Rd[b]=a}function A(a){return"string"==typeof a?Rd[a]||Rd[a.toLowerCase()]:void 0}function B(a){var b,c,d={};for(c in a)f(a,c)&&(b=A(c),b&&(d[b]=a[c]));return d}function C(b,c){return function(d){return null!=d?(E(this,b,d),a.updateOffset(this,c),this):D(this,b)}}function D(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function E(a,b,c){return a._d["set"+(a._isUTC?"UTC":"")+b](c)}function F(a,b){var c;if("object"==typeof a)for(c in a)this.set(c,a[c]);else if(a=A(a),"function"==typeof this[a])return this[a](b);return this}function G(a,b,c){var d=""+Math.abs(a),e=b-d.length,f=a>=0;return(f?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}function H(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(Vd[a]=e),b&&(Vd[b[0]]=function(){return G(e.apply(this,arguments),b[1],b[2])}),c&&(Vd[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function I(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function J(a){var b,c,d=a.match(Sd);for(b=0,c=d.length;c>b;b++)Vd[d[b]]?d[b]=Vd[d[b]]:d[b]=I(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function K(a,b){return a.isValid()?(b=L(b,a.localeData()),Ud[b]=Ud[b]||J(b),Ud[b](a)):a.localeData().invalidDate()}function L(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Td.lastIndex=0;d>=0&&Td.test(a);)a=a.replace(Td,c),Td.lastIndex=0,d-=1;return a}function M(a){return"function"==typeof a&&"[object Function]"===Object.prototype.toString.call(a)}function N(a,b,c){ie[a]=M(b)?b:function(a){return a&&c?c:b}}function O(a,b){return f(ie,a)?ie[a](b._strict,b._locale):new RegExp(P(a))}function P(a){return a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Q(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),"number"==typeof b&&(d=function(a,c){c[b]=q(a)}),c=0;c<a.length;c++)je[a[c]]=d}function R(a,b){Q(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function S(a,b,c){null!=b&&f(je,a)&&je[a](b,c._a,c,a)}function T(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function U(a){return this._months[a.month()]}function V(a){return this._monthsShort[a.month()]}function W(a,b,c){var d,e,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){if(e=h([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}function X(a,b){var c;return"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),T(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function Y(b){return null!=b?(X(this,b),a.updateOffset(this,!0),this):D(this,"Month")}function Z(){return T(this.year(),this.month())}function $(a){var b,c=a._a;return c&&-2===j(a).overflow&&(b=c[le]<0||c[le]>11?le:c[me]<1||c[me]>T(c[ke],c[le])?me:c[ne]<0||c[ne]>24||24===c[ne]&&(0!==c[oe]||0!==c[pe]||0!==c[qe])?ne:c[oe]<0||c[oe]>59?oe:c[pe]<0||c[pe]>59?pe:c[qe]<0||c[qe]>999?qe:-1,j(a)._overflowDayOfYear&&(ke>b||b>me)&&(b=me),j(a).overflow=b),a}function _(b){a.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function aa(a,b){var c=!0;return g(function(){return c&&(_(a+"\n"+(new Error).stack),c=!1),b.apply(this,arguments)},b)}function ba(a,b){te[a]||(_(b),te[a]=!0)}function ca(a){var b,c,d=a._i,e=ue.exec(d);if(e){for(j(a).iso=!0,b=0,c=ve.length;c>b;b++)if(ve[b][1].exec(d)){a._f=ve[b][0];break}for(b=0,c=we.length;c>b;b++)if(we[b][1].exec(d)){a._f+=(e[6]||" ")+we[b][0];break}d.match(fe)&&(a._f+="Z"),va(a)}else a._isValid=!1}function da(b){var c=xe.exec(b._i);return null!==c?void(b._d=new Date(+c[1])):(ca(b),void(b._isValid===!1&&(delete b._isValid,a.createFromInputFallback(b))))}function ea(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function fa(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function ga(a){return ha(a)?366:365}function ha(a){return a%4===0&&a%100!==0||a%400===0}function ia(){return ha(this.year())}function ja(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=Da(a).add(f,"d"),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function ka(a){return ja(a,this._week.dow,this._week.doy).week}function la(){return this._week.dow}function ma(){return this._week.doy}function na(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")}function oa(a){var b=ja(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")}function pa(a,b,c,d,e){var f,g=6+e-d,h=fa(a,0,1+g),i=h.getUTCDay();return e>i&&(i+=7),c=null!=c?1*c:e,f=1+g+7*(b-1)-i+c,{year:f>0?a:a-1,dayOfYear:f>0?f:ga(a-1)+f}}function qa(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")}function ra(a,b,c){return null!=a?a:null!=b?b:c}function sa(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function ta(a){var b,c,d,e,f=[];if(!a._d){for(d=sa(a),a._w&&null==a._a[me]&&null==a._a[le]&&ua(a),a._dayOfYear&&(e=ra(a._a[ke],d[ke]),a._dayOfYear>ga(e)&&(j(a)._overflowDayOfYear=!0),c=fa(e,0,a._dayOfYear),a._a[le]=c.getUTCMonth(),a._a[me]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=f[b]=d[b];for(;7>b;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[ne]&&0===a._a[oe]&&0===a._a[pe]&&0===a._a[qe]&&(a._nextDay=!0,a._a[ne]=0),a._d=(a._useUTC?fa:ea).apply(null,f),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[ne]=24)}}function ua(a){var b,c,d,e,f,g,h;b=a._w,null!=b.GG||null!=b.W||null!=b.E?(f=1,g=4,c=ra(b.GG,a._a[ke],ja(Da(),1,4).year),d=ra(b.W,1),e=ra(b.E,1)):(f=a._locale._week.dow,g=a._locale._week.doy,c=ra(b.gg,a._a[ke],ja(Da(),f,g).year),d=ra(b.w,1),null!=b.d?(e=b.d,f>e&&++d):e=null!=b.e?b.e+f:f),h=pa(c,d,e,g,f),a._a[ke]=h.year,a._dayOfYear=h.dayOfYear}function va(b){if(b._f===a.ISO_8601)return void ca(b);b._a=[],j(b).empty=!0;var c,d,e,f,g,h=""+b._i,i=h.length,k=0;for(e=L(b._f,b._locale).match(Sd)||[],c=0;c<e.length;c++)f=e[c],d=(h.match(O(f,b))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&j(b).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),k+=d.length),Vd[f]?(d?j(b).empty=!1:j(b).unusedTokens.push(f),S(f,d,b)):b._strict&&!d&&j(b).unusedTokens.push(f);j(b).charsLeftOver=i-k,h.length>0&&j(b).unusedInput.push(h),j(b).bigHour===!0&&b._a[ne]<=12&&b._a[ne]>0&&(j(b).bigHour=void 0),b._a[ne]=wa(b._locale,b._a[ne],b._meridiem),ta(b),$(b)}function wa(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}function xa(a){var b,c,d,e,f;if(0===a._f.length)return j(a).invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=m({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],va(b),k(b)&&(f+=j(b).charsLeftOver,f+=10*j(b).unusedTokens.length,j(b).score=f,(null==d||d>f)&&(d=f,c=b));g(a,c||b)}function ya(a){if(!a._d){var b=B(a._i);a._a=[b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],ta(a)}}function za(a){var b=new n($(Aa(a)));return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}function Aa(a){var b=a._i,e=a._f;return a._locale=a._locale||y(a._l),null===b||void 0===e&&""===b?l({nullInput:!0}):("string"==typeof b&&(a._i=b=a._locale.preparse(b)),o(b)?new n($(b)):(c(e)?xa(a):e?va(a):d(b)?a._d=b:Ba(a),a))}function Ba(b){var f=b._i;void 0===f?b._d=new Date:d(f)?b._d=new Date(+f):"string"==typeof f?da(b):c(f)?(b._a=e(f.slice(0),function(a){return parseInt(a,10)}),ta(b)):"object"==typeof f?ya(b):"number"==typeof f?b._d=new Date(f):a.createFromInputFallback(b)}function Ca(a,b,c,d,e){var f={};return"boolean"==typeof c&&(d=c,c=void 0),f._isAMomentObject=!0,f._useUTC=f._isUTC=e,f._l=c,f._i=a,f._f=b,f._strict=d,za(f)}function Da(a,b,c,d){return Ca(a,b,c,d,!1)}function Ea(a,b){var d,e;if(1===b.length&&c(b[0])&&(b=b[0]),!b.length)return Da();for(d=b[0],e=1;e<b.length;++e)(!b[e].isValid()||b[e][a](d))&&(d=b[e]);return d}function Fa(){var a=[].slice.call(arguments,0);return Ea("isBefore",a)}function Ga(){var a=[].slice.call(arguments,0);return Ea("isAfter",a)}function Ha(a){var b=B(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=y(),this._bubble()}function Ia(a){return a instanceof Ha}function Ja(a,b){H(a,0,0,function(){var a=this.utcOffset(),c="+";return 0>a&&(a=-a,c="-"),c+G(~~(a/60),2)+b+G(~~a%60,2)})}function Ka(a){var b=(a||"").match(fe)||[],c=b[b.length-1]||[],d=(c+"").match(Ce)||["-",0,0],e=+(60*d[1])+q(d[2]);return"+"===d[0]?e:-e}function La(b,c){var e,f;return c._isUTC?(e=c.clone(),f=(o(b)||d(b)?+b:+Da(b))-+e,e._d.setTime(+e._d+f),a.updateOffset(e,!1),e):Da(b).local()}function Ma(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Na(b,c){var d,e=this._offset||0;return null!=b?("string"==typeof b&&(b=Ka(b)),Math.abs(b)<16&&(b=60*b),!this._isUTC&&c&&(d=Ma(this)),this._offset=b,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==b&&(!c||this._changeInProgress?bb(this,Ya(b-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?e:Ma(this)}function Oa(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Pa(a){return this.utcOffset(0,a)}function Qa(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Ma(this),"m")),this}function Ra(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ka(this._i)),this}function Sa(a){return a=a?Da(a).utcOffset():0,(this.utcOffset()-a)%60===0}function Ta(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ua(){if("undefined"!=typeof this._isDSTShifted)return this._isDSTShifted;var a={};if(m(a,this),a=Aa(a),a._a){var b=a._isUTC?h(a._a):Da(a._a);this._isDSTShifted=this.isValid()&&r(a._a,b.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Va(){return!this._isUTC}function Wa(){return this._isUTC}function Xa(){return this._isUTC&&0===this._offset}function Ya(a,b){var c,d,e,g=a,h=null;return Ia(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(g={},b?g[b]=a:g.milliseconds=a):(h=De.exec(a))?(c="-"===h[1]?-1:1,g={y:0,d:q(h[me])*c,h:q(h[ne])*c,m:q(h[oe])*c,s:q(h[pe])*c,ms:q(h[qe])*c}):(h=Ee.exec(a))?(c="-"===h[1]?-1:1,g={y:Za(h[2],c),M:Za(h[3],c),d:Za(h[4],c),h:Za(h[5],c),m:Za(h[6],c),s:Za(h[7],c),w:Za(h[8],c)}):null==g?g={}:"object"==typeof g&&("from"in g||"to"in g)&&(e=_a(Da(g.from),Da(g.to)),g={},g.ms=e.milliseconds,g.M=e.months),d=new Ha(g),Ia(a)&&f(a,"_locale")&&(d._locale=a._locale),d}function Za(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function $a(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function _a(a,b){var c;return b=La(b,a),a.isBefore(b)?c=$a(a,b):(c=$a(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function ab(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(ba(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=Ya(c,d),bb(this,e,a),this}}function bb(b,c,d,e){var f=c._milliseconds,g=c._days,h=c._months;e=null==e?!0:e,f&&b._d.setTime(+b._d+f*d),g&&E(b,"Date",D(b,"Date")+g*d),h&&X(b,D(b,"Month")+h*d),e&&a.updateOffset(b,g||h)}function cb(a,b){var c=a||Da(),d=La(c,this).startOf("day"),e=this.diff(d,"days",!0),f=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(b&&b[f]||this.localeData().calendar(f,this,Da(c)))}function db(){return new n(this)}function eb(a,b){var c;return b=A("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=o(a)?a:Da(a),+this>+a):(c=o(a)?+a:+Da(a),c<+this.clone().startOf(b))}function fb(a,b){var c;return b=A("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=o(a)?a:Da(a),+a>+this):(c=o(a)?+a:+Da(a),+this.clone().endOf(b)<c)}function gb(a,b,c){return this.isAfter(a,c)&&this.isBefore(b,c)}function hb(a,b){var c;return b=A(b||"millisecond"),"millisecond"===b?(a=o(a)?a:Da(a),+this===+a):(c=+Da(a),+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b))}function ib(a,b,c){var d,e,f=La(a,this),g=6e4*(f.utcOffset()-this.utcOffset());return b=A(b),"year"===b||"month"===b||"quarter"===b?(e=jb(this,f),"quarter"===b?e/=3:"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:p(e)}function jb(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return 0>b-f?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)}function kb(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function lb(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():K(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):K(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function mb(b){var c=K(this,b||a.defaultFormat);return this.localeData().postformat(c)}function nb(a,b){return this.isValid()?Ya({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function ob(a){return this.from(Da(),a)}function pb(a,b){return this.isValid()?Ya({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function qb(a){return this.to(Da(),a)}function rb(a){var b;return void 0===a?this._locale._abbr:(b=y(a),null!=b&&(this._locale=b),this)}function sb(){return this._locale}function tb(a){switch(a=A(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this}function ub(a){return a=A(a),void 0===a||"millisecond"===a?this:this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")}function vb(){return+this._d-6e4*(this._offset||0)}function wb(){return Math.floor(+this/1e3)}function xb(){return this._offset?new Date(+this):this._d}function yb(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function zb(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}}function Ab(){return k(this)}function Bb(){return g({},j(this))}function Cb(){return j(this).overflow}function Db(a,b){H(0,[a,a.length],0,b)}function Eb(a,b,c){return ja(Da([a,11,31+b-c]),b,c).week}function Fb(a){var b=ja(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")}function Gb(a){var b=ja(this,1,4).year;return null==a?b:this.add(a-b,"y")}function Hb(){return Eb(this.year(),1,4)}function Ib(){var a=this.localeData()._week;return Eb(this.year(),a.dow,a.doy)}function Jb(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)}function Kb(a,b){return"string"!=typeof a?a:isNaN(a)?(a=b.weekdaysParse(a),"number"==typeof a?a:null):parseInt(a,10)}function Lb(a){return this._weekdays[a.day()]}function Mb(a){return this._weekdaysShort[a.day()]}function Nb(a){return this._weekdaysMin[a.day()]}function Ob(a){var b,c,d;for(this._weekdaysParse=this._weekdaysParse||[],b=0;7>b;b++)if(this._weekdaysParse[b]||(c=Da([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b}function Pb(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Kb(a,this.localeData()),this.add(a-b,"d")):b}function Qb(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")}function Rb(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)}function Sb(a,b){H(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Tb(a,b){return b._meridiemParse}function Ub(a){return"p"===(a+"").toLowerCase().charAt(0)}function Vb(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"}function Wb(a,b){b[qe]=q(1e3*("0."+a))}function Xb(){return this._isUTC?"UTC":""}function Yb(){return this._isUTC?"Coordinated Universal Time":""}function Zb(a){return Da(1e3*a)}function $b(){return Da.apply(null,arguments).parseZone()}function _b(a,b,c){var d=this._calendar[a];return"function"==typeof d?d.call(b,c):d}function ac(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])}function bc(){return this._invalidDate}function cc(a){return this._ordinal.replace("%d",a)}function dc(a){return a}function ec(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)}function fc(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)}function gc(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function hc(a,b,c,d){var e=y(),f=h().set(d,b);return e[c](f,a)}function ic(a,b,c,d,e){if("number"==typeof a&&(b=a,a=void 0),a=a||"",null!=b)return hc(a,b,c,e);var f,g=[];for(f=0;d>f;f++)g[f]=hc(a,f,c,e);return g}function jc(a,b){return ic(a,b,"months",12,"month")}function kc(a,b){return ic(a,b,"monthsShort",12,"month")}function lc(a,b){return ic(a,b,"weekdays",7,"day")}function mc(a,b){return ic(a,b,"weekdaysShort",7,"day")}function nc(a,b){return ic(a,b,"weekdaysMin",7,"day")}function oc(){var a=this._data;return this._milliseconds=_e(this._milliseconds),this._days=_e(this._days),this._months=_e(this._months),a.milliseconds=_e(a.milliseconds),a.seconds=_e(a.seconds),a.minutes=_e(a.minutes),a.hours=_e(a.hours),a.months=_e(a.months),a.years=_e(a.years),this}function pc(a,b,c,d){var e=Ya(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function qc(a,b){return pc(this,a,b,1)}function rc(a,b){return pc(this,a,b,-1)}function sc(a){return 0>a?Math.floor(a):Math.ceil(a)}function tc(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;return f>=0&&g>=0&&h>=0||0>=f&&0>=g&&0>=h||(f+=864e5*sc(vc(h)+g),g=0,h=0),i.milliseconds=f%1e3,a=p(f/1e3),i.seconds=a%60,b=p(a/60),i.minutes=b%60,c=p(b/60),i.hours=c%24,g+=p(c/24),e=p(uc(g)),h+=e,g-=sc(vc(e)),d=p(h/12),h%=12,i.days=g,i.months=h,i.years=d,this}function uc(a){return 4800*a/146097}function vc(a){return 146097*a/4800}function wc(a){var b,c,d=this._milliseconds;if(a=A(a),"month"===a||"year"===a)return b=this._days+d/864e5,c=this._months+uc(b),"month"===a?c:c/12;switch(b=this._days+Math.round(vc(this._months)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}}function xc(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*q(this._months/12)}function yc(a){return function(){return this.as(a)}}function zc(a){return a=A(a),this[a+"s"]()}function Ac(a){return function(){return this._data[a]}}function Bc(){return p(this.days()/7)}function Cc(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function Dc(a,b,c){var d=Ya(a).abs(),e=qf(d.as("s")),f=qf(d.as("m")),g=qf(d.as("h")),h=qf(d.as("d")),i=qf(d.as("M")),j=qf(d.as("y")),k=e<rf.s&&["s",e]||1===f&&["m"]||f<rf.m&&["mm",f]||1===g&&["h"]||g<rf.h&&["hh",g]||1===h&&["d"]||h<rf.d&&["dd",h]||1===i&&["M"]||i<rf.M&&["MM",i]||1===j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,Cc.apply(null,k)}function Ec(a,b){return void 0===rf[a]?!1:void 0===b?rf[a]:(rf[a]=b,!0)}function Fc(a){var b=this.localeData(),c=Dc(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function Gc(){var a,b,c,d=sf(this._milliseconds)/1e3,e=sf(this._days),f=sf(this._months);a=p(d/60),b=p(a/60),d%=60,a%=60,c=p(f/12),f%=12;var g=c,h=f,i=e,j=b,k=a,l=d,m=this.asSeconds();return m?(0>m?"-":"")+"P"+(g?g+"Y":"")+(h?h+"M":"")+(i?i+"D":"")+(j||k||l?"T":"")+(j?j+"H":"")+(k?k+"M":"")+(l?l+"S":""):"P0D"}
//! moment.js locale configuration
//! locale : belarusian (be)
//! author : Dmitry Demidov : https://github.com/demidov91
//! author: Praleska: http://praleska.pro/
//! Author : Menelion Elensúle : https://github.com/Oire
function Hc(a,b){var c=a.split("_");return b%10===1&&b%100!==11?c[0]:b%10>=2&&4>=b%10&&(10>b%100||b%100>=20)?c[1]:c[2]}function Ic(a,b,c){var d={mm:b?"хвіліна_хвіліны_хвілін":"хвіліну_хвіліны_хвілін",hh:b?"гадзіна_гадзіны_гадзін":"гадзіну_гадзіны_гадзін",dd:"дзень_дні_дзён",MM:"месяц_месяцы_месяцаў",yy:"год_гады_гадоў"};return"m"===c?b?"хвіліна":"хвіліну":"h"===c?b?"гадзіна":"гадзіну":a+" "+Hc(d[c],+a)}function Jc(a,b){var c={nominative:"студзень_люты_сакавік_красавік_травень_чэрвень_ліпень_жнівень_верасень_кастрычнік_лістапад_снежань".split("_"),accusative:"студзеня_лютага_сакавіка_красавіка_траўня_чэрвеня_ліпеня_жніўня_верасня_кастрычніка_лістапада_снежня".split("_")},d=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(b)?"accusative":"nominative";return c[d][a.month()]}function Kc(a,b){var c={nominative:"нядзеля_панядзелак_аўторак_серада_чацвер_пятніца_субота".split("_"),accusative:"нядзелю_панядзелак_аўторак_сераду_чацвер_пятніцу_суботу".split("_")},d=/\[ ?[Вв] ?(?:мінулую|наступную)? ?\] ?dddd/.test(b)?"accusative":"nominative";return c[d][a.day()]}
//! moment.js locale configuration
//! locale : breton (br)
//! author : Jean-Baptiste Le Duigou : https://github.com/jbleduigou
function Lc(a,b,c){var d={mm:"munutenn",MM:"miz",dd:"devezh"};return a+" "+Oc(d[c],a)}function Mc(a){switch(Nc(a)){case 1:case 3:case 4:case 5:case 9:return a+" bloaz";default:return a+" vloaz"}}function Nc(a){return a>9?Nc(a%10):a}function Oc(a,b){return 2===b?Pc(a):a}function Pc(a){var b={m:"v",b:"v",d:"z"};return void 0===b[a.charAt(0)]?a:b[a.charAt(0)]+a.substring(1)}
//! moment.js locale configuration
//! locale : bosnian (bs)
//! author : Nedim Cholich : https://github.com/frontyard
//! based on (hr) translation by Bojan Marković
function Qc(a,b,c){var d=a+" ";switch(c){case"m":return b?"jedna minuta":"jedne minute";case"mm":return d+=1===a?"minuta":2===a||3===a||4===a?"minute":"minuta";case"h":return b?"jedan sat":"jednog sata";case"hh":return d+=1===a?"sat":2===a||3===a||4===a?"sata":"sati";case"dd":return d+=1===a?"dan":"dana";case"MM":return d+=1===a?"mjesec":2===a||3===a||4===a?"mjeseca":"mjeseci";case"yy":return d+=1===a?"godina":2===a||3===a||4===a?"godine":"godina"}}function Rc(a){return a>1&&5>a&&1!==~~(a/10)}function Sc(a,b,c,d){var e=a+" ";switch(c){case"s":return b||d?"pár sekund":"pár sekundami";case"m":return b?"minuta":d?"minutu":"minutou";case"mm":return b||d?e+(Rc(a)?"minuty":"minut"):e+"minutami";break;case"h":return b?"hodina":d?"hodinu":"hodinou";case"hh":return b||d?e+(Rc(a)?"hodiny":"hodin"):e+"hodinami";break;case"d":return b||d?"den":"dnem";case"dd":return b||d?e+(Rc(a)?"dny":"dní"):e+"dny";break;case"M":return b||d?"měsíc":"měsícem";case"MM":return b||d?e+(Rc(a)?"měsíce":"měsíců"):e+"měsíci";break;case"y":return b||d?"rok":"rokem";case"yy":return b||d?e+(Rc(a)?"roky":"let"):e+"lety"}}
//! moment.js locale configuration
//! locale : austrian german (de-at)
//! author : lluchs : https://github.com/lluchs
//! author: Menelion Elensúle: https://github.com/Oire
//! author : Martin Groller : https://github.com/MadMG
function Tc(a,b,c,d){var e={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[a+" Tage",a+" Tagen"],M:["ein Monat","einem Monat"],MM:[a+" Monate",a+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[a+" Jahre",a+" Jahren"]};return b?e[c][0]:e[c][1]}
//! moment.js locale configuration
//! locale : german (de)
//! author : lluchs : https://github.com/lluchs
//! author: Menelion Elensúle: https://github.com/Oire
function Uc(a,b,c,d){var e={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[a+" Tage",a+" Tagen"],M:["ein Monat","einem Monat"],MM:[a+" Monate",a+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[a+" Jahre",a+" Jahren"]};return b?e[c][0]:e[c][1]}
//! moment.js locale configuration
//! locale : estonian (et)
//! author : Henry Kehlmann : https://github.com/madhenry
//! improvements : Illimar Tambek : https://github.com/ragulka
function Vc(a,b,c,d){var e={s:["mõne sekundi","mõni sekund","paar sekundit"],m:["ühe minuti","üks minut"],mm:[a+" minuti",a+" minutit"],h:["ühe tunni","tund aega","üks tund"],hh:[a+" tunni",a+" tundi"],d:["ühe päeva","üks päev"],M:["kuu aja","kuu aega","üks kuu"],MM:[a+" kuu",a+" kuud"],y:["ühe aasta","aasta","üks aasta"],yy:[a+" aasta",a+" aastat"]};return b?e[c][2]?e[c][2]:e[c][1]:d?e[c][0]:e[c][1]}function Wc(a,b,c,d){var e="";switch(c){case"s":return d?"muutaman sekunnin":"muutama sekunti";case"m":return d?"minuutin":"minuutti";case"mm":e=d?"minuutin":"minuuttia";break;case"h":return d?"tunnin":"tunti";case"hh":e=d?"tunnin":"tuntia";break;case"d":return d?"päivän":"päivä";case"dd":e=d?"päivän":"päivää";break;case"M":return d?"kuukauden":"kuukausi";case"MM":e=d?"kuukauden":"kuukautta";break;case"y":return d?"vuoden":"vuosi";case"yy":e=d?"vuoden":"vuotta"}return e=Xc(a,d)+" "+e}function Xc(a,b){return 10>a?b?Pf[a]:Of[a]:a}
//! moment.js locale configuration
//! locale : hrvatski (hr)
//! author : Bojan Marković : https://github.com/bmarkovic
function Yc(a,b,c){var d=a+" ";switch(c){case"m":return b?"jedna minuta":"jedne minute";case"mm":return d+=1===a?"minuta":2===a||3===a||4===a?"minute":"minuta";case"h":return b?"jedan sat":"jednog sata";case"hh":return d+=1===a?"sat":2===a||3===a||4===a?"sata":"sati";case"dd":return d+=1===a?"dan":"dana";case"MM":return d+=1===a?"mjesec":2===a||3===a||4===a?"mjeseca":"mjeseci";case"yy":return d+=1===a?"godina":2===a||3===a||4===a?"godine":"godina"}}function Zc(a,b,c,d){var e=a;switch(c){case"s":return d||b?"néhány másodperc":"néhány másodperce";case"m":return"egy"+(d||b?" perc":" perce");case"mm":return e+(d||b?" perc":" perce");case"h":return"egy"+(d||b?" óra":" órája");case"hh":return e+(d||b?" óra":" órája");case"d":return"egy"+(d||b?" nap":" napja");case"dd":return e+(d||b?" nap":" napja");case"M":return"egy"+(d||b?" hónap":" hónapja");case"MM":return e+(d||b?" hónap":" hónapja");case"y":return"egy"+(d||b?" év":" éve");case"yy":return e+(d||b?" év":" éve")}return""}function $c(a){return(a?"":"[múlt] ")+"["+Uf[this.day()]+"] LT[-kor]"}
//! moment.js locale configuration
//! locale : Armenian (hy-am)
//! author : Armendarabyan : https://github.com/armendarabyan
function _c(a,b){var c={nominative:"հունվար_փետրվար_մարտ_ապրիլ_մայիս_հունիս_հուլիս_օգոստոս_սեպտեմբեր_հոկտեմբեր_նոյեմբեր_դեկտեմբեր".split("_"),accusative:"հունվարի_փետրվարի_մարտի_ապրիլի_մայիսի_հունիսի_հուլիսի_օգոստոսի_սեպտեմբերի_հոկտեմբերի_նոյեմբերի_դեկտեմբերի".split("_")},d=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(b)?"accusative":"nominative";return c[d][a.month()]}function ad(a,b){var c="հնվ_փտր_մրտ_ապր_մյս_հնս_հլս_օգս_սպտ_հկտ_նմբ_դկտ".split("_");return c[a.month()]}function bd(a,b){var c="կիրակի_երկուշաբթի_երեքշաբթի_չորեքշաբթի_հինգշաբթի_ուրբաթ_շաբաթ".split("_");return c[a.day()]}
//! moment.js locale configuration
//! locale : icelandic (is)
//! author : Hinrik Örn Sigurðsson : https://github.com/hinrik
function cd(a){return a%100===11?!0:a%10===1?!1:!0}function dd(a,b,c,d){var e=a+" ";switch(c){case"s":return b||d?"nokkrar sekúndur":"nokkrum sekúndum";case"m":return b?"mínúta":"mínútu";case"mm":return cd(a)?e+(b||d?"mínútur":"mínútum"):b?e+"mínúta":e+"mínútu";case"hh":return cd(a)?e+(b||d?"klukkustundir":"klukkustundum"):e+"klukkustund";case"d":return b?"dagur":d?"dag":"degi";case"dd":return cd(a)?b?e+"dagar":e+(d?"daga":"dögum"):b?e+"dagur":e+(d?"dag":"degi");case"M":return b?"mánuður":d?"mánuð":"mánuði";case"MM":return cd(a)?b?e+"mánuðir":e+(d?"mánuði":"mánuðum"):b?e+"mánuður":e+(d?"mánuð":"mánuði");case"y":return b||d?"ár":"ári";case"yy":return cd(a)?e+(b||d?"ár":"árum"):e+(b||d?"ár":"ári")}}
//! moment.js locale configuration
//! locale : Georgian (ka)
//! author : Irakli Janiashvili : https://github.com/irakli-janiashvili
function ed(a,b){var c={nominative:"იანვარი_თებერვალი_მარტი_აპრილი_მაისი_ივნისი_ივლისი_აგვისტო_სექტემბერი_ოქტომბერი_ნოემბერი_დეკემბერი".split("_"),accusative:"იანვარს_თებერვალს_მარტს_აპრილის_მაისს_ივნისს_ივლისს_აგვისტს_სექტემბერს_ოქტომბერს_ნოემბერს_დეკემბერს".split("_")},d=/D[oD] *MMMM?/.test(b)?"accusative":"nominative";return c[d][a.month()]}function fd(a,b){var c={nominative:"კვირა_ორშაბათი_სამშაბათი_ოთხშაბათი_ხუთშაბათი_პარასკევი_შაბათი".split("_"),accusative:"კვირას_ორშაბათს_სამშაბათს_ოთხშაბათს_ხუთშაბათს_პარასკევს_შაბათს".split("_")},d=/(წინა|შემდეგ)/.test(b)?"accusative":"nominative";return c[d][a.day()]}
//! moment.js locale configuration
//! locale : Luxembourgish (lb)
//! author : mweimerskirch : https://github.com/mweimerskirch, David Raison : https://github.com/kwisatz
function gd(a,b,c,d){var e={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return b?e[c][0]:e[c][1]}function hd(a){var b=a.substr(0,a.indexOf(" "));return jd(b)?"a "+a:"an "+a}function id(a){var b=a.substr(0,a.indexOf(" "));return jd(b)?"viru "+a:"virun "+a}function jd(a){if(a=parseInt(a,10),isNaN(a))return!1;if(0>a)return!0;if(10>a)return a>=4&&7>=a?!0:!1;if(100>a){var b=a%10,c=a/10;return jd(0===b?c:b)}if(1e4>a){for(;a>=10;)a/=10;return jd(a)}return a/=1e3,jd(a)}function kd(a,b,c,d){return b?"kelios sekundės":d?"kelių sekundžių":"kelias sekundes"}function ld(a,b){var c={nominative:"sausis_vasaris_kovas_balandis_gegužė_birželis_liepa_rugpjūtis_rugsėjis_spalis_lapkritis_gruodis".split("_"),accusative:"sausio_vasario_kovo_balandžio_gegužės_birželio_liepos_rugpjūčio_rugsėjo_spalio_lapkričio_gruodžio".split("_")},d=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(b)?"accusative":"nominative";return c[d][a.month()]}function md(a,b,c,d){return b?od(c)[0]:d?od(c)[1]:od(c)[2]}function nd(a){return a%10===0||a>10&&20>a}function od(a){return Vf[a].split("_")}function pd(a,b,c,d){var e=a+" ";return 1===a?e+md(a,b,c[0],d):b?e+(nd(a)?od(c)[1]:od(c)[0]):d?e+od(c)[1]:e+(nd(a)?od(c)[1]:od(c)[2])}function qd(a,b){var c=-1===b.indexOf("dddd HH:mm"),d=Wf[a.day()];return c?d:d.substring(0,d.length-2)+"į"}function rd(a,b,c){return c?b%10===1&&11!==b?a[2]:a[3]:b%10===1&&11!==b?a[0]:a[1]}function sd(a,b,c){return a+" "+rd(Xf[c],a,b)}function td(a,b,c){return rd(Xf[c],a,b)}function ud(a,b){return b?"dažas sekundes":"dažām sekundēm"}function vd(a){return 5>a%10&&a%10>1&&~~(a/10)%10!==1}function wd(a,b,c){var d=a+" ";switch(c){case"m":return b?"minuta":"minutę";case"mm":return d+(vd(a)?"minuty":"minut");case"h":return b?"godzina":"godzinę";case"hh":return d+(vd(a)?"godziny":"godzin");case"MM":return d+(vd(a)?"miesiące":"miesięcy");case"yy":return d+(vd(a)?"lata":"lat")}}
//! moment.js locale configuration
//! locale : romanian (ro)
//! author : Vlad Gurdiga : https://github.com/gurdiga
//! author : Valentin Agachi : https://github.com/avaly
function xd(a,b,c){var d={mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"},e=" ";return(a%100>=20||a>=100&&a%100===0)&&(e=" de "),a+e+d[c]}
//! moment.js locale configuration
//! locale : russian (ru)
//! author : Viktorminator : https://github.com/Viktorminator
//! Author : Menelion Elensúle : https://github.com/Oire
function yd(a,b){var c=a.split("_");return b%10===1&&b%100!==11?c[0]:b%10>=2&&4>=b%10&&(10>b%100||b%100>=20)?c[1]:c[2]}function zd(a,b,c){var d={mm:b?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"};return"m"===c?b?"минута":"минуту":a+" "+yd(d[c],+a)}function Ad(a,b){var c={nominative:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),accusative:"января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_")},d=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(b)?"accusative":"nominative";return c[d][a.month()]}function Bd(a,b){var c={nominative:"янв_фев_март_апр_май_июнь_июль_авг_сен_окт_ноя_дек".split("_"),accusative:"янв_фев_мар_апр_мая_июня_июля_авг_сен_окт_ноя_дек".split("_")},d=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(b)?"accusative":"nominative";return c[d][a.month()]}function Cd(a,b){var c={nominative:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),accusative:"воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_")},d=/\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?\] ?dddd/.test(b)?"accusative":"nominative";return c[d][a.day()]}function Dd(a){return a>1&&5>a}function Ed(a,b,c,d){var e=a+" ";switch(c){case"s":return b||d?"pár sekúnd":"pár sekundami";case"m":return b?"minúta":d?"minútu":"minútou";case"mm":return b||d?e+(Dd(a)?"minúty":"minút"):e+"minútami";break;case"h":return b?"hodina":d?"hodinu":"hodinou";case"hh":return b||d?e+(Dd(a)?"hodiny":"hodín"):e+"hodinami";break;case"d":return b||d?"deň":"dňom";case"dd":return b||d?e+(Dd(a)?"dni":"dní"):e+"dňami";break;case"M":return b||d?"mesiac":"mesiacom";case"MM":return b||d?e+(Dd(a)?"mesiace":"mesiacov"):e+"mesiacmi";break;case"y":return b||d?"rok":"rokom";case"yy":return b||d?e+(Dd(a)?"roky":"rokov"):e+"rokmi"}}
//! moment.js locale configuration
//! locale : slovenian (sl)
//! author : Robert Sedovšek : https://github.com/sedovsek
function Fd(a,b,c,d){var e=a+" ";switch(c){case"s":return b||d?"nekaj sekund":"nekaj sekundami";case"m":return b?"ena minuta":"eno minuto";case"mm":return e+=1===a?b?"minuta":"minuto":2===a?b||d?"minuti":"minutama":5>a?b||d?"minute":"minutami":b||d?"minut":"minutami";case"h":return b?"ena ura":"eno uro";case"hh":return e+=1===a?b?"ura":"uro":2===a?b||d?"uri":"urama":5>a?b||d?"ure":"urami":b||d?"ur":"urami";case"d":return b||d?"en dan":"enim dnem";case"dd":return e+=1===a?b||d?"dan":"dnem":2===a?b||d?"dni":"dnevoma":b||d?"dni":"dnevi";case"M":return b||d?"en mesec":"enim mesecem";case"MM":return e+=1===a?b||d?"mesec":"mesecem":2===a?b||d?"meseca":"mesecema":5>a?b||d?"mesece":"meseci":b||d?"mesecev":"meseci";case"y":return b||d?"eno leto":"enim letom";case"yy":return e+=1===a?b||d?"leto":"letom":2===a?b||d?"leti":"letoma":5>a?b||d?"leta":"leti":b||d?"let":"leti"}}function Gd(a,b,c,d){var e={s:["viensas secunds","'iensas secunds"],m:["'n míut","'iens míut"],mm:[a+" míuts"," "+a+" míuts"],h:["'n þora","'iensa þora"],hh:[a+" þoras"," "+a+" þoras"],d:["'n ziua","'iensa ziua"],dd:[a+" ziuas"," "+a+" ziuas"],M:["'n mes","'iens mes"],MM:[a+" mesen"," "+a+" mesen"],y:["'n ar","'iens ar"],yy:[a+" ars"," "+a+" ars"]};return d?e[c][0]:b?e[c][0]:e[c][1].trim()}
//! moment.js locale configuration
//! locale : ukrainian (uk)
//! author : zemlanin : https://github.com/zemlanin
//! Author : Menelion Elensúle : https://github.com/Oire
function Hd(a,b){var c=a.split("_");return b%10===1&&b%100!==11?c[0]:b%10>=2&&4>=b%10&&(10>b%100||b%100>=20)?c[1]:c[2]}function Id(a,b,c){var d={mm:"хвилина_хвилини_хвилин",hh:"година_години_годин",dd:"день_дні_днів",MM:"місяць_місяці_місяців",yy:"рік_роки_років"};return"m"===c?b?"хвилина":"хвилину":"h"===c?b?"година":"годину":a+" "+Hd(d[c],+a)}function Jd(a,b){var c={nominative:"січень_лютий_березень_квітень_травень_червень_липень_серпень_вересень_жовтень_листопад_грудень".split("_"),accusative:"січня_лютого_березня_квітня_травня_червня_липня_серпня_вересня_жовтня_листопада_грудня".split("_")},d=/D[oD]? *MMMM?/.test(b)?"accusative":"nominative";return c[d][a.month()]}function Kd(a,b){var c={nominative:"неділя_понеділок_вівторок_середа_четвер_п’ятниця_субота".split("_"),accusative:"неділю_понеділок_вівторок_середу_четвер_п’ятницю_суботу".split("_"),genitive:"неділі_понеділка_вівторка_середи_четверга_п’ятниці_суботи".split("_")},d=/(\[[ВвУу]\]) ?dddd/.test(b)?"accusative":/\[?(?:минулої|наступної)? ?\] ?dddd/.test(b)?"genitive":"nominative";return c[d][a.day()]}function Ld(a){return function(){return a+"о"+(11===this.hours()?"б":"")+"] LT"}}var Md,Nd,Od=a.momentProperties=[],Pd=!1,Qd={},Rd={},Sd=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Td=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ud={},Vd={},Wd=/\d/,Xd=/\d\d/,Yd=/\d{3}/,Zd=/\d{4}/,$d=/[+-]?\d{6}/,_d=/\d\d?/,ae=/\d{1,3}/,be=/\d{1,4}/,ce=/[+-]?\d{1,6}/,de=/\d+/,ee=/[+-]?\d+/,fe=/Z|[+-]\d\d:?\d\d/gi,ge=/[+-]?\d+(\.\d{1,3})?/,he=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ie={},je={},ke=0,le=1,me=2,ne=3,oe=4,pe=5,qe=6;H("M",["MM",2],"Mo",function(){return this.month()+1}),H("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),H("MMMM",0,0,function(a){return this.localeData().months(this,a)}),z("month","M"),N("M",_d),N("MM",_d,Xd),N("MMM",he),N("MMMM",he),Q(["M","MM"],function(a,b){b[le]=q(a)-1}),Q(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[le]=e:j(c).invalidMonth=a});var re="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),se="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),te={};a.suppressDeprecationWarnings=!1;var ue=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ve=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],we=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],xe=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=aa("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),H(0,["YY",2],0,function(){return this.year()%100}),H(0,["YYYY",4],0,"year"),H(0,["YYYYY",5],0,"year"),H(0,["YYYYYY",6,!0],0,"year"),z("year","y"),N("Y",ee),N("YY",_d,Xd),N("YYYY",be,Zd),N("YYYYY",ce,$d),N("YYYYYY",ce,$d),Q(["YYYYY","YYYYYY"],ke),Q("YYYY",function(b,c){c[ke]=2===b.length?a.parseTwoDigitYear(b):q(b)}),Q("YY",function(b,c){c[ke]=a.parseTwoDigitYear(b)}),a.parseTwoDigitYear=function(a){return q(a)+(q(a)>68?1900:2e3)};var ye=C("FullYear",!1);H("w",["ww",2],"wo","week"),H("W",["WW",2],"Wo","isoWeek"),z("week","w"),z("isoWeek","W"),N("w",_d),N("ww",_d,Xd),N("W",_d),N("WW",_d,Xd),R(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=q(a)});var ze={dow:0,doy:6};H("DDD",["DDDD",3],"DDDo","dayOfYear"),z("dayOfYear","DDD"),N("DDD",ae),N("DDDD",Yd),Q(["DDD","DDDD"],function(a,b,c){c._dayOfYear=q(a)}),a.ISO_8601=function(){};var Ae=aa("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var a=Da.apply(null,arguments);return this>a?this:a}),Be=aa("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var a=Da.apply(null,arguments);return a>this?this:a});Ja("Z",":"),Ja("ZZ",""),N("Z",fe),N("ZZ",fe),Q(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=Ka(a)});var Ce=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var De=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ee=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Ya.fn=Ha.prototype;var Fe=ab(1,"add"),Ge=ab(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var He=aa("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});H(0,["gg",2],0,function(){return this.weekYear()%100}),H(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Db("gggg","weekYear"),Db("ggggg","weekYear"),Db("GGGG","isoWeekYear"),Db("GGGGG","isoWeekYear"),z("weekYear","gg"),z("isoWeekYear","GG"),N("G",ee),N("g",ee),N("GG",_d,Xd),N("gg",_d,Xd),N("GGGG",be,Zd),N("gggg",be,Zd),N("GGGGG",ce,$d),N("ggggg",ce,$d),R(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=q(a)}),R(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)}),H("Q",0,0,"quarter"),z("quarter","Q"),N("Q",Wd),Q("Q",function(a,b){b[le]=3*(q(a)-1)}),H("D",["DD",2],"Do","date"),z("date","D"),N("D",_d),N("DD",_d,Xd),N("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),Q(["D","DD"],me),Q("Do",function(a,b){b[me]=q(a.match(_d)[0],10)});var Ie=C("Date",!0);H("d",0,"do","day"),H("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),H("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),H("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),H("e",0,0,"weekday"),H("E",0,0,"isoWeekday"),z("day","d"),z("weekday","e"),z("isoWeekday","E"),N("d",_d),N("e",_d),N("E",_d),N("dd",he),N("ddd",he),N("dddd",he),R(["dd","ddd","dddd"],function(a,b,c){var d=c._locale.weekdaysParse(a);null!=d?b.d=d:j(c).invalidWeekday=a}),R(["d","e","E"],function(a,b,c,d){b[d]=q(a)});var Je="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ke="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Le="Su_Mo_Tu_We_Th_Fr_Sa".split("_");H("H",["HH",2],0,"hour"),H("h",["hh",2],0,function(){return this.hours()%12||12}),Sb("a",!0),Sb("A",!1),z("hour","h"),N("a",Tb),N("A",Tb),N("H",_d),N("h",_d),N("HH",_d,Xd),N("hh",_d,Xd),Q(["H","HH"],ne),Q(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),Q(["h","hh"],function(a,b,c){b[ne]=q(a),j(c).bigHour=!0});var Me=/[ap]\.?m?\.?/i,Ne=C("Hours",!0);H("m",["mm",2],0,"minute"),z("minute","m"),N("m",_d),N("mm",_d,Xd),Q(["m","mm"],oe);var Oe=C("Minutes",!1);H("s",["ss",2],0,"second"),z("second","s"),N("s",_d),N("ss",_d,Xd),Q(["s","ss"],pe);var Pe=C("Seconds",!1);H("S",0,0,function(){return~~(this.millisecond()/100)}),H(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),H(0,["SSS",3],0,"millisecond"),H(0,["SSSS",4],0,function(){return 10*this.millisecond()}),H(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),H(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),H(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),H(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),H(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),z("millisecond","ms"),N("S",ae,Wd),N("SS",ae,Xd),N("SSS",ae,Yd);var Qe;for(Qe="SSSS";Qe.length<=9;Qe+="S")N(Qe,de);for(Qe="S";Qe.length<=9;Qe+="S")Q(Qe,Wb);var Re=C("Milliseconds",!1);H("z",0,0,"zoneAbbr"),H("zz",0,0,"zoneName");var Se=n.prototype;Se.add=Fe,Se.calendar=cb,Se.clone=db,Se.diff=ib,Se.endOf=ub,Se.format=mb,Se.from=nb,Se.fromNow=ob,Se.to=pb,Se.toNow=qb,Se.get=F,Se.invalidAt=Cb,Se.isAfter=eb,Se.isBefore=fb,Se.isBetween=gb,Se.isSame=hb,Se.isValid=Ab,Se.lang=He,Se.locale=rb,Se.localeData=sb,Se.max=Be,Se.min=Ae,Se.parsingFlags=Bb,Se.set=F,Se.startOf=tb,Se.subtract=Ge,Se.toArray=yb,Se.toObject=zb,Se.toDate=xb,Se.toISOString=lb,Se.toJSON=lb,Se.toString=kb,Se.unix=wb,Se.valueOf=vb,Se.year=ye,Se.isLeapYear=ia,Se.weekYear=Fb,Se.isoWeekYear=Gb,Se.quarter=Se.quarters=Jb,Se.month=Y,Se.daysInMonth=Z,Se.week=Se.weeks=na,Se.isoWeek=Se.isoWeeks=oa,Se.weeksInYear=Ib,Se.isoWeeksInYear=Hb,Se.date=Ie,Se.day=Se.days=Pb,Se.weekday=Qb,Se.isoWeekday=Rb,Se.dayOfYear=qa,Se.hour=Se.hours=Ne,Se.minute=Se.minutes=Oe,Se.second=Se.seconds=Pe,Se.millisecond=Se.milliseconds=Re,Se.utcOffset=Na,Se.utc=Pa,Se.local=Qa,Se.parseZone=Ra,Se.hasAlignedHourOffset=Sa,Se.isDST=Ta,Se.isDSTShifted=Ua,Se.isLocal=Va,Se.isUtcOffset=Wa,Se.isUtc=Xa,Se.isUTC=Xa,Se.zoneAbbr=Xb,Se.zoneName=Yb,Se.dates=aa("dates accessor is deprecated. Use date instead.",Ie),Se.months=aa("months accessor is deprecated. Use month instead",Y),Se.years=aa("years accessor is deprecated. Use year instead",ye),Se.zone=aa("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Oa);var Te=Se,Ue={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Ve={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},We="Invalid date",Xe="%d",Ye=/\d{1,2}/,Ze={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},$e=s.prototype;$e._calendar=Ue,$e.calendar=_b,$e._longDateFormat=Ve,$e.longDateFormat=ac,$e._invalidDate=We,$e.invalidDate=bc,$e._ordinal=Xe,$e.ordinal=cc,$e._ordinalParse=Ye,$e.preparse=dc,$e.postformat=dc,$e._relativeTime=Ze,$e.relativeTime=ec,$e.pastFuture=fc,$e.set=gc,$e.months=U,$e._months=re,$e.monthsShort=V,$e._monthsShort=se,$e.monthsParse=W,$e.week=ka,$e._week=ze,$e.firstDayOfYear=ma,$e.firstDayOfWeek=la,$e.weekdays=Lb,$e._weekdays=Je,$e.weekdaysMin=Nb,$e._weekdaysMin=Le,$e.weekdaysShort=Mb,$e._weekdaysShort=Ke,$e.weekdaysParse=Ob,$e.isPM=Ub,$e._meridiemParse=Me,$e.meridiem=Vb,w("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===q(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),a.lang=aa("moment.lang is deprecated. Use moment.locale instead.",w),a.langData=aa("moment.langData is deprecated. Use moment.localeData instead.",y);var _e=Math.abs,af=yc("ms"),bf=yc("s"),cf=yc("m"),df=yc("h"),ef=yc("d"),ff=yc("w"),gf=yc("M"),hf=yc("y"),jf=Ac("milliseconds"),kf=Ac("seconds"),lf=Ac("minutes"),mf=Ac("hours"),nf=Ac("days"),of=Ac("months"),pf=Ac("years"),qf=Math.round,rf={s:45,m:45,h:22,d:26,M:11},sf=Math.abs,tf=Ha.prototype;tf.abs=oc,tf.add=qc,tf.subtract=rc,tf.as=wc,tf.asMilliseconds=af,tf.asSeconds=bf,tf.asMinutes=cf,tf.asHours=df,tf.asDays=ef,tf.asWeeks=ff,tf.asMonths=gf,tf.asYears=hf,tf.valueOf=xc,tf._bubble=tc,tf.get=zc,tf.milliseconds=jf,tf.seconds=kf,tf.minutes=lf,tf.hours=mf,tf.days=nf,tf.weeks=Bc,tf.months=of,tf.years=pf,tf.humanize=Fc,tf.toISOString=Gc,tf.toString=Gc,tf.toJSON=Gc,tf.locale=rb,tf.localeData=sb,tf.toIsoString=aa("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Gc),tf.lang=He,H("X",0,0,"unix"),H("x",0,0,"valueOf"),N("x",ee),N("X",ge),Q("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),Q("x",function(a,b,c){c._d=new Date(q(a))}),
//! moment.js
//! version : 2.10.6
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
a.version="2.10.6",b(Da),a.fn=Te,a.min=Fa,a.max=Ga,a.utc=h,a.unix=Zb,a.months=jc,a.isDate=d,a.locale=w,a.invalid=l,a.duration=Ya,a.isMoment=o,a.weekdays=lc,a.parseZone=$b,a.localeData=y,a.isDuration=Ia,a.monthsShort=kc,a.weekdaysMin=nc,a.defineLocale=x,a.weekdaysShort=mc,a.normalizeUnits=A,a.relativeTimeThreshold=Ec;var uf=a,vf=(uf.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(a){return/^nm$/i.test(a)},meridiem:function(a,b,c){return 12>a?c?"vm":"VM":c?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Môre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(a){return a+(1===a||8===a||a>=20?"ste":"de")},week:{dow:1,doy:4}}),uf.defineLocale("ar-ma",{months:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),weekdays:"الأحد_الإتنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"احد_اتنين_ثلاثاء_اربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:6,doy:12}}),{1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"}),wf={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"},xf=(uf.defineLocale("ar-sa",{months:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(a){return"م"===a},meridiem:function(a,b,c){return 12>a?"ص":"م"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},preparse:function(a){return a.replace(/[١٢٣٤٥٦٧٨٩٠]/g,function(a){return wf[a]}).replace(/،/g,",")},postformat:function(a){return a.replace(/\d/g,function(a){return vf[a]}).replace(/,/g,"،")},week:{dow:6,doy:12}}),uf.defineLocale("ar-tn",{months:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:1,doy:4}}),{1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"}),yf={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"},zf=function(a){return 0===a?0:1===a?1:2===a?2:a%100>=3&&10>=a%100?3:a%100>=11?4:5},Af={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},Bf=function(a){return function(b,c,d,e){var f=zf(b),g=Af[a][zf(b)];return 2===f&&(g=g[c?0:1]),g.replace(/%d/i,b)}},Cf=["كانون الثاني يناير","شباط فبراير","آذار مارس","نيسان أبريل","أيار مايو","حزيران يونيو","تموز يوليو","آب أغسطس","أيلول سبتمبر","تشرين الأول أكتوبر","تشرين الثاني نوفمبر","كانون الأول ديسمبر"],Df=(uf.defineLocale("ar",{months:Cf,monthsShort:Cf,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(a){return"م"===a},meridiem:function(a,b,c){return 12>a?"ص":"م"},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:Bf("s"),m:Bf("m"),mm:Bf("m"),h:Bf("h"),hh:Bf("h"),d:Bf("d"),dd:Bf("d"),M:Bf("M"),MM:Bf("M"),y:Bf("y"),yy:Bf("y")},preparse:function(a){return a.replace(/\u200f/g,"").replace(/[١٢٣٤٥٦٧٨٩٠]/g,function(a){return yf[a]}).replace(/،/g,",")},postformat:function(a){return a.replace(/\d/g,function(a){return xf[a]}).replace(/,/g,"،")},week:{dow:6,doy:12}}),{1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-üncü",4:"-üncü",100:"-üncü",6:"-ncı",9:"-uncu",10:"-uncu",30:"-uncu",60:"-ıncı",90:"-ıncı"}),Ef=(uf.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertəsi_Çərşənbə axşamı_Çərşənbə_Cümə axşamı_Cümə_Şənbə".split("_"),weekdaysShort:"Baz_BzE_ÇAx_Çər_CAx_Cüm_Şən".split("_"),weekdaysMin:"Bz_BE_ÇA_Çə_CA_Cü_Şə".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gələn həftə] dddd [saat] LT",lastDay:"[dünən] LT",lastWeek:"[keçən həftə] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s əvvəl",s:"birneçə saniyyə",m:"bir dəqiqə",mm:"%d dəqiqə",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gecə|səhər|gündüz|axşam/,isPM:function(a){return/^(gündüz|axşam)$/.test(a)},meridiem:function(a,b,c){return 4>a?"gecə":12>a?"səhər":17>a?"gündüz":"axşam"},ordinalParse:/\d{1,2}-(ıncı|inci|nci|üncü|ncı|uncu)/,ordinal:function(a){if(0===a)return a+"-ıncı";var b=a%10,c=a%100-b,d=a>=100?100:null;return a+(Df[b]||Df[c]||Df[d])},week:{dow:1,doy:7}}),uf.defineLocale("be",{months:Jc,monthsShort:"студ_лют_сак_крас_трав_чэрв_ліп_жнів_вер_каст_ліст_снеж".split("_"),weekdays:Kc,weekdaysShort:"нд_пн_ат_ср_чц_пт_сб".split("_"),weekdaysMin:"нд_пн_ат_ср_чц_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., HH:mm",LLLL:"dddd, D MMMM YYYY г., HH:mm"},calendar:{sameDay:"[Сёння ў] LT",nextDay:"[Заўтра ў] LT",lastDay:"[Учора ў] LT",nextWeek:function(){return"[У] dddd [ў] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[У мінулую] dddd [ў] LT";case 1:case 2:case 4:return"[У мінулы] dddd [ў] LT"}},sameElse:"L"},relativeTime:{future:"праз %s",past:"%s таму",s:"некалькі секунд",m:Ic,mm:Ic,h:Ic,hh:Ic,d:"дзень",dd:Ic,M:"месяц",MM:Ic,y:"год",yy:Ic},meridiemParse:/ночы|раніцы|дня|вечара/,isPM:function(a){return/^(дня|вечара)$/.test(a)},meridiem:function(a,b,c){return 4>a?"ночы":12>a?"раніцы":17>a?"дня":"вечара"},ordinalParse:/\d{1,2}-(і|ы|га)/,ordinal:function(a,b){switch(b){case"M":case"d":case"DDD":case"w":case"W":return a%10!==2&&a%10!==3||a%100===12||a%100===13?a+"-ы":a+"-і";case"D":return a+"-га";default:return a}},week:{dow:1,doy:7}}),uf.defineLocale("bg",{months:"януари_февруари_март_април_май_юни_юли_август_септември_октомври_ноември_декември".split("_"),monthsShort:"янр_фев_мар_апр_май_юни_юли_авг_сеп_окт_ное_дек".split("_"),weekdays:"неделя_понеделник_вторник_сряда_четвъртък_петък_събота".split("_"),weekdaysShort:"нед_пон_вто_сря_чет_пет_съб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[Днес в] LT",nextDay:"[Утре в] LT",nextWeek:"dddd [в] LT",lastDay:"[Вчера в] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[В изминалата] dddd [в] LT";case 1:case 2:case 4:case 5:return"[В изминалия] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"след %s",past:"преди %s",s:"няколко секунди",m:"минута",mm:"%d минути",h:"час",hh:"%d часа",d:"ден",dd:"%d дни",M:"месец",MM:"%d месеца",y:"година",yy:"%d години"},ordinalParse:/\d{1,2}-(ев|ен|ти|ви|ри|ми)/,ordinal:function(a){var b=a%10,c=a%100;return 0===a?a+"-ев":0===c?a+"-ен":c>10&&20>c?a+"-ти":1===b?a+"-ви":2===b?a+"-ри":7===b||8===b?a+"-ми":a+"-ти"},week:{dow:1,doy:7}}),{1:"১",2:"২",3:"৩",4:"৪",5:"৫",6:"৬",7:"৭",8:"৮",9:"৯",0:"০"}),Ff={"১":"1","২":"2","৩":"3","৪":"4","৫":"5","৬":"6","৭":"7","৮":"8","৯":"9","০":"0"},Gf=(uf.defineLocale("bn",{months:"জানুয়ারী_ফেবুয়ারী_মার্চ_এপ্রিল_মে_জুন_জুলাই_অগাস্ট_সেপ্টেম্বর_অক্টোবর_নভেম্বর_ডিসেম্বর".split("_"),monthsShort:"জানু_ফেব_মার্চ_এপর_মে_জুন_জুল_অগ_সেপ্ট_অক্টো_নভ_ডিসেম্".split("_"),weekdays:"রবিবার_সোমবার_মঙ্গলবার_বুধবার_বৃহস্পত্তিবার_শুক্রুবার_শনিবার".split("_"),weekdaysShort:"রবি_সোম_মঙ্গল_বুধ_বৃহস্পত্তি_শুক্রু_শনি".split("_"),weekdaysMin:"রব_সম_মঙ্গ_বু_ব্রিহ_শু_শনি".split("_"),longDateFormat:{LT:"A h:mm সময়",LTS:"A h:mm:ss সময়",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm সময়",LLLL:"dddd, D MMMM YYYY, A h:mm সময়"},calendar:{sameDay:"[আজ] LT",nextDay:"[আগামীকাল] LT",nextWeek:"dddd, LT",lastDay:"[গতকাল] LT",lastWeek:"[গত] dddd, LT",sameElse:"L"},relativeTime:{future:"%s পরে",past:"%s আগে",s:"কএক সেকেন্ড",m:"এক মিনিট",mm:"%d মিনিট",h:"এক ঘন্টা",hh:"%d ঘন্টা",d:"এক দিন",dd:"%d দিন",M:"এক মাস",MM:"%d মাস",y:"এক বছর",yy:"%d বছর"},preparse:function(a){return a.replace(/[১২৩৪৫৬৭৮৯০]/g,function(a){return Ff[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return Ef[a]})},meridiemParse:/রাত|সকাল|দুপুর|বিকেল|রাত/,isPM:function(a){return/^(দুপুর|বিকেল|রাত)$/.test(a)},meridiem:function(a,b,c){return 4>a?"রাত":10>a?"সকাল":17>a?"দুপুর":20>a?"বিকেল":"রাত"},week:{dow:0,doy:6}}),{1:"༡",2:"༢",3:"༣",4:"༤",5:"༥",6:"༦",7:"༧",8:"༨",9:"༩",0:"༠"}),Hf={"༡":"1","༢":"2","༣":"3","༤":"4","༥":"5","༦":"6","༧":"7","༨":"8","༩":"9","༠":"0"},If=(uf.defineLocale("bo",{months:"ཟླ་བ་དང་པོ_ཟླ་བ་གཉིས་པ_ཟླ་བ་གསུམ་པ_ཟླ་བ་བཞི་པ_ཟླ་བ་ལྔ་པ_ཟླ་བ་དྲུག་པ_ཟླ་བ་བདུན་པ_ཟླ་བ་བརྒྱད་པ_ཟླ་བ་དགུ་པ_ཟླ་བ་བཅུ་པ_ཟླ་བ་བཅུ་གཅིག་པ_ཟླ་བ་བཅུ་གཉིས་པ".split("_"),monthsShort:"ཟླ་བ་དང་པོ_ཟླ་བ་གཉིས་པ_ཟླ་བ་གསུམ་པ_ཟླ་བ་བཞི་པ_ཟླ་བ་ལྔ་པ_ཟླ་བ་དྲུག་པ_ཟླ་བ་བདུན་པ_ཟླ་བ་བརྒྱད་པ_ཟླ་བ་དགུ་པ_ཟླ་བ་བཅུ་པ_ཟླ་བ་བཅུ་གཅིག་པ_ཟླ་བ་བཅུ་གཉིས་པ".split("_"),weekdays:"གཟའ་ཉི་མ་_གཟའ་ཟླ་བ་_གཟའ་མིག་དམར་_གཟའ་ལྷག་པ་_གཟའ་ཕུར་བུ_གཟའ་པ་སངས་_གཟའ་སྤེན་པ་".split("_"),weekdaysShort:"ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་".split("_"),weekdaysMin:"ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[དི་རིང] LT",nextDay:"[སང་ཉིན] LT",nextWeek:"[བདུན་ཕྲག་རྗེས་མ], LT",lastDay:"[ཁ་སང] LT",lastWeek:"[བདུན་ཕྲག་མཐའ་མ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ལ་",past:"%s སྔན་ལ",s:"ལམ་སང",m:"སྐར་མ་གཅིག",mm:"%d སྐར་མ",h:"ཆུ་ཚོད་གཅིག",hh:"%d ཆུ་ཚོད",d:"ཉིན་གཅིག",dd:"%d ཉིན་",M:"ཟླ་བ་གཅིག",MM:"%d ཟླ་བ",y:"ལོ་གཅིག",yy:"%d ལོ"},preparse:function(a){return a.replace(/[༡༢༣༤༥༦༧༨༩༠]/g,function(a){return Hf[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return Gf[a]})},meridiemParse:/མཚན་མོ|ཞོགས་ཀས|ཉིན་གུང|དགོང་དག|མཚན་མོ/,isPM:function(a){return/^(ཉིན་གུང|དགོང་དག|མཚན་མོ)$/.test(a)},meridiem:function(a,b,c){return 4>a?"མཚན་མོ":10>a?"ཞོགས་ཀས":17>a?"ཉིན་གུང":20>a?"དགོང་དག":"མཚན་མོ"},week:{dow:0,doy:6}}),uf.defineLocale("br",{months:"Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),longDateFormat:{LT:"h[e]mm A",LTS:"h[e]mm:ss A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY h[e]mm A",LLLL:"dddd, D [a viz] MMMM YYYY h[e]mm A"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc'hoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec'h da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s 'zo",s:"un nebeud segondennoù",m:"ur vunutenn",mm:Lc,h:"un eur",hh:"%d eur",d:"un devezh",dd:Lc,M:"ur miz",MM:Lc,y:"ur bloaz",yy:Mc},ordinalParse:/\d{1,2}(añ|vet)/,ordinal:function(a){var b=1===a?"añ":"vet";return a+b},week:{dow:1,doy:4}}),uf.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prošlu] dddd [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:Qc,mm:Qc,h:Qc,hh:Qc,d:"dan",dd:Qc,M:"mjesec",MM:Qc,y:"godinu",yy:Qc},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),uf.defineLocale("ca",{months:"gener_febrer_març_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),monthsShort:"gen._febr._mar._abr._mai._jun._jul._ag._set._oct._nov._des.".split("_"),weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"Dg_Dl_Dt_Dc_Dj_Dv_Ds".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd D MMMM YYYY H:mm"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[demà a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"fa %s",s:"uns segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},ordinalParse:/\d{1,2}(r|n|t|è|a)/,ordinal:function(a,b){var c=1===a?"r":2===a?"n":3===a?"r":4===a?"t":"è";return("w"===b||"W"===b)&&(c="a"),a+c},week:{dow:1,doy:4}}),"leden_únor_březen_duben_květen_červen_červenec_srpen_září_říjen_listopad_prosinec".split("_")),Jf="led_úno_bře_dub_kvě_čvn_čvc_srp_zář_říj_lis_pro".split("_"),Kf=(uf.defineLocale("cs",{months:If,monthsShort:Jf,monthsParse:function(a,b){var c,d=[];for(c=0;12>c;c++)d[c]=new RegExp("^"+a[c]+"$|^"+b[c]+"$","i");return d}(If,Jf),weekdays:"neděle_pondělí_úterý_středa_čtvrtek_pátek_sobota".split("_"),weekdaysShort:"ne_po_út_st_čt_pá_so".split("_"),weekdaysMin:"ne_po_út_st_čt_pá_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes v] LT",nextDay:"[zítra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v neděli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve středu v] LT";case 4:return"[ve čtvrtek v] LT";case 5:return"[v pátek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[včera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou neděli v] LT";case 1:case 2:return"[minulé] dddd [v] LT";case 3:return"[minulou středu v] LT";case 4:case 5:return"[minulý] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"před %s",s:Sc,m:Sc,mm:Sc,h:Sc,hh:Sc,d:Sc,dd:Sc,M:Sc,MM:Sc,y:Sc,yy:Sc},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),uf.defineLocale("cv",{months:"кӑрлач_нарӑс_пуш_ака_май_ҫӗртме_утӑ_ҫурла_авӑн_юпа_чӳк_раштав".split("_"),monthsShort:"кӑр_нар_пуш_ака_май_ҫӗр_утӑ_ҫур_авн_юпа_чӳк_раш".split("_"),weekdays:"вырсарникун_тунтикун_ытларикун_юнкун_кӗҫнерникун_эрнекун_шӑматкун".split("_"),weekdaysShort:"выр_тун_ытл_юн_кӗҫ_эрн_шӑм".split("_"),weekdaysMin:"вр_тн_ыт_юн_кҫ_эр_шм".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ]",LLL:"YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm",LLLL:"dddd, YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm"},calendar:{sameDay:"[Паян] LT [сехетре]",nextDay:"[Ыран] LT [сехетре]",lastDay:"[Ӗнер] LT [сехетре]",nextWeek:"[Ҫитес] dddd LT [сехетре]",lastWeek:"[Иртнӗ] dddd LT [сехетре]",sameElse:"L"},relativeTime:{future:function(a){var b=/сехет$/i.exec(a)?"рен":/ҫул$/i.exec(a)?"тан":"ран";return a+b},past:"%s каялла",s:"пӗр-ик ҫеккунт",m:"пӗр минут",mm:"%d минут",h:"пӗр сехет",hh:"%d сехет",d:"пӗр кун",dd:"%d кун",M:"пӗр уйӑх",MM:"%d уйӑх",y:"пӗр ҫул",yy:"%d ҫул"},ordinalParse:/\d{1,2}-мӗш/,ordinal:"%d-мӗш",week:{dow:1,doy:7}}),uf.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn ôl",s:"ychydig eiliadau",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},ordinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(a){var b=a,c="",d=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"];return b>20?c=40===b||50===b||60===b||80===b||100===b?"fed":"ain":b>0&&(c=d[b]),a+c},week:{dow:1,doy:4}}),uf.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"søn_man_tir_ons_tor_fre_lør".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY HH:mm"},calendar:{sameDay:"[I dag kl.] LT",nextDay:"[I morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[I går kl.] LT",lastWeek:"[sidste] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"få sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en måned",MM:"%d måneder",y:"et år",yy:"%d år"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),uf.defineLocale("de-at",{months:"Jänner_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jän._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[Heute um] LT [Uhr]",sameElse:"L",nextDay:"[Morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[Gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:Tc,mm:"%d Minuten",h:Tc,hh:"%d Stunden",d:Tc,dd:Tc,M:Tc,MM:Tc,y:Tc,yy:Tc},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),uf.defineLocale("de",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[Heute um] LT [Uhr]",sameElse:"L",nextDay:"[Morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[Gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:Uc,mm:"%d Minuten",h:Uc,hh:"%d Stunden",d:Uc,dd:Uc,M:Uc,MM:Uc,y:Uc,yy:Uc},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),uf.defineLocale("el",{monthsNominativeEl:"Ιανουάριος_Φεβρουάριος_Μάρτιος_Απρίλιος_Μάιος_Ιούνιος_Ιούλιος_Αύγουστος_Σεπτέμβριος_Οκτώβριος_Νοέμβριος_Δεκέμβριος".split("_"),monthsGenitiveEl:"Ιανουαρίου_Φεβρουαρίου_Μαρτίου_Απριλίου_Μαΐου_Ιουνίου_Ιουλίου_Αυγούστου_Σεπτεμβρίου_Οκτωβρίου_Νοεμβρίου_Δεκεμβρίου".split("_"),months:function(a,b){return/D/.test(b.substring(0,b.indexOf("MMMM")))?this._monthsGenitiveEl[a.month()]:this._monthsNominativeEl[a.month()]},monthsShort:"Ιαν_Φεβ_Μαρ_Απρ_Μαϊ_Ιουν_Ιουλ_Αυγ_Σεπ_Οκτ_Νοε_Δεκ".split("_"),weekdays:"Κυριακή_Δευτέρα_Τρίτη_Τετάρτη_Πέμπτη_Παρασκευή_Σάββατο".split("_"),weekdaysShort:"Κυρ_Δευ_Τρι_Τετ_Πεμ_Παρ_Σαβ".split("_"),weekdaysMin:"Κυ_Δε_Τρ_Τε_Πε_Πα_Σα".split("_"),meridiem:function(a,b,c){return a>11?c?"μμ":"ΜΜ":c?"πμ":"ΠΜ"},isPM:function(a){return"μ"===(a+"").toLowerCase()[0]},meridiemParse:/[ΠΜ]\.?Μ?\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[Σήμερα {}] LT",nextDay:"[Αύριο {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[Χθες {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[το προηγούμενο] dddd [{}] LT";default:return"[την προηγούμενη] dddd [{}] LT"}},sameElse:"L"},calendar:function(a,b){var c=this._calendarEl[a],d=b&&b.hours();return"function"==typeof c&&(c=c.apply(b)),c.replace("{}",d%12===1?"στη":"στις")},relativeTime:{future:"σε %s",past:"%s πριν",s:"λίγα δευτερόλεπτα",m:"ένα λεπτό",mm:"%d λεπτά",h:"μία ώρα",hh:"%d ώρες",d:"μία μέρα",dd:"%d μέρες",M:"ένας μήνας",MM:"%d μήνες",y:"ένας χρόνος",yy:"%d χρόνια"},ordinalParse:/\d{1,2}η/,ordinal:"%dη",week:{dow:1,doy:4}}),uf.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c},week:{dow:1,doy:4}}),uf.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"D MMMM, YYYY",LLL:"D MMMM, YYYY h:mm A",LLLL:"dddd, D MMMM, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),uf.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c},week:{dow:1,doy:4}}),uf.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_aŭgusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aŭg_sep_okt_nov_dec".split("_"),weekdays:"Dimanĉo_Lundo_Mardo_Merkredo_Ĵaŭdo_Vendredo_Sabato".split("_"),weekdaysShort:"Dim_Lun_Mard_Merk_Ĵaŭ_Ven_Sab".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Ĵa_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D[-an de] MMMM, YYYY",LLL:"D[-an de] MMMM, YYYY HH:mm",LLLL:"dddd, [la] D[-an de] MMMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(a){return"p"===a.charAt(0).toLowerCase()},meridiem:function(a,b,c){return a>11?c?"p.t.m.":"P.T.M.":c?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodiaŭ je] LT",nextDay:"[Morgaŭ je] LT",nextWeek:"dddd [je] LT",lastDay:"[Hieraŭ je] LT",lastWeek:"[pasinta] dddd [je] LT",sameElse:"L"},relativeTime:{future:"je %s",past:"antaŭ %s",s:"sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"},ordinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}}),"Ene._Feb._Mar._Abr._May._Jun._Jul._Ago._Sep._Oct._Nov._Dic.".split("_")),Lf="Ene_Feb_Mar_Abr_May_Jun_Jul_Ago_Sep_Oct_Nov_Dic".split("_"),Mf=(uf.defineLocale("es",{months:"Enero_Febrero_Marzo_Abril_Mayo_Junio_Julio_Agosto_Septiembre_Octubre_Noviembre_Diciembre".split("_"),monthsShort:function(a,b){return/-MMM-/.test(b)?Lf[a.month()]:Kf[a.month()]},weekdays:"Domingo_Lunes_Martes_Miércoles_Jueves_Viernes_Sábado".split("_"),weekdaysShort:"Dom._Lun._Mar._Mié._Jue._Vie._Sáb.".split("_"),weekdaysMin:"Do_Lu_Ma_Mi_Ju_Vi_Sá".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}}),uf.defineLocale("et",{months:"jaanuar_veebruar_märts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_märts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"pühapäev_esmaspäev_teisipäev_kolmapäev_neljapäev_reede_laupäev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[Täna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Järgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s pärast",past:"%s tagasi",s:Vc,m:Vc,mm:Vc,h:Vc,hh:Vc,d:Vc,dd:"%d päeva",M:Vc,MM:Vc,y:Vc,yy:Vc},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),uf.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",
lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),{1:"۱",2:"۲",3:"۳",4:"۴",5:"۵",6:"۶",7:"۷",8:"۸",9:"۹",0:"۰"}),Nf={"۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","۰":"0"},Of=(uf.defineLocale("fa",{months:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),monthsShort:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),weekdays:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysShort:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysMin:"ی_د_س_چ_پ_ج_ش".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/قبل از ظهر|بعد از ظهر/,isPM:function(a){return/بعد از ظهر/.test(a)},meridiem:function(a,b,c){return 12>a?"قبل از ظهر":"بعد از ظهر"},calendar:{sameDay:"[امروز ساعت] LT",nextDay:"[فردا ساعت] LT",nextWeek:"dddd [ساعت] LT",lastDay:"[دیروز ساعت] LT",lastWeek:"dddd [پیش] [ساعت] LT",sameElse:"L"},relativeTime:{future:"در %s",past:"%s پیش",s:"چندین ثانیه",m:"یک دقیقه",mm:"%d دقیقه",h:"یک ساعت",hh:"%d ساعت",d:"یک روز",dd:"%d روز",M:"یک ماه",MM:"%d ماه",y:"یک سال",yy:"%d سال"},preparse:function(a){return a.replace(/[۰-۹]/g,function(a){return Nf[a]}).replace(/،/g,",")},postformat:function(a){return a.replace(/\d/g,function(a){return Mf[a]}).replace(/,/g,"،")},ordinalParse:/\d{1,2}م/,ordinal:"%dم",week:{dow:6,doy:12}}),"nolla yksi kaksi kolme neljä viisi kuusi seitsemän kahdeksan yhdeksän".split(" ")),Pf=["nolla","yhden","kahden","kolmen","neljän","viiden","kuuden",Of[7],Of[8],Of[9]],Qf=(uf.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kesäkuu_heinäkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kesä_heinä_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tänään] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s päästä",past:"%s sitten",s:Wc,m:Wc,mm:Wc,h:Wc,hh:Wc,d:Wc,dd:Wc,M:Wc,MM:Wc,y:Wc,yy:Wc},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),uf.defineLocale("fo",{months:"januar_februar_mars_apríl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mánadagur_týsdagur_mikudagur_hósdagur_fríggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mán_týs_mik_hós_frí_ley".split("_"),weekdaysMin:"su_má_tý_mi_hó_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[Í dag kl.] LT",nextDay:"[Í morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[Í gjár kl.] LT",lastWeek:"[síðstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s síðani",s:"fá sekund",m:"ein minutt",mm:"%d minuttir",h:"ein tími",hh:"%d tímar",d:"ein dagur",dd:"%d dagar",M:"ein mánaði",MM:"%d mánaðir",y:"eitt ár",yy:"%d ár"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),uf.defineLocale("fr-ca",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|e)/,ordinal:function(a){return a+(1===a?"er":"e")}}),uf.defineLocale("fr",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|)/,ordinal:function(a){return a+(1===a?"er":"")},week:{dow:1,doy:4}}),"jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_")),Rf="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),Sf=(uf.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(a,b){return/-MMM-/.test(b)?Rf[a.month()]:Qf[a.month()]},weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[ôfrûne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",m:"ien minút",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(a){return a+(1===a||8===a||a>=20?"ste":"de")},week:{dow:1,doy:4}}),uf.defineLocale("gl",{months:"Xaneiro_Febreiro_Marzo_Abril_Maio_Xuño_Xullo_Agosto_Setembro_Outubro_Novembro_Decembro".split("_"),monthsShort:"Xan._Feb._Mar._Abr._Mai._Xuñ._Xul._Ago._Set._Out._Nov._Dec.".split("_"),weekdays:"Domingo_Luns_Martes_Mércores_Xoves_Venres_Sábado".split("_"),weekdaysShort:"Dom._Lun._Mar._Mér._Xov._Ven._Sáb.".split("_"),weekdaysMin:"Do_Lu_Ma_Mé_Xo_Ve_Sá".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd D MMMM YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"ás":"á")+"] LT"},nextDay:function(){return"[mañá "+(1!==this.hours()?"ás":"á")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"ás":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"á":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"ás":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(a){return"uns segundos"===a?"nuns segundos":"en "+a},past:"hai %s",s:"uns segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:7}}),uf.defineLocale("he",{months:"ינואר_פברואר_מרץ_אפריל_מאי_יוני_יולי_אוגוסט_ספטמבר_אוקטובר_נובמבר_דצמבר".split("_"),monthsShort:"ינו׳_פבר׳_מרץ_אפר׳_מאי_יוני_יולי_אוג׳_ספט׳_אוק׳_נוב׳_דצמ׳".split("_"),weekdays:"ראשון_שני_שלישי_רביעי_חמישי_שישי_שבת".split("_"),weekdaysShort:"א׳_ב׳_ג׳_ד׳_ה׳_ו׳_ש׳".split("_"),weekdaysMin:"א_ב_ג_ד_ה_ו_ש".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [ב]MMMM YYYY",LLL:"D [ב]MMMM YYYY HH:mm",LLLL:"dddd, D [ב]MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[היום ב־]LT",nextDay:"[מחר ב־]LT",nextWeek:"dddd [בשעה] LT",lastDay:"[אתמול ב־]LT",lastWeek:"[ביום] dddd [האחרון בשעה] LT",sameElse:"L"},relativeTime:{future:"בעוד %s",past:"לפני %s",s:"מספר שניות",m:"דקה",mm:"%d דקות",h:"שעה",hh:function(a){return 2===a?"שעתיים":a+" שעות"},d:"יום",dd:function(a){return 2===a?"יומיים":a+" ימים"},M:"חודש",MM:function(a){return 2===a?"חודשיים":a+" חודשים"},y:"שנה",yy:function(a){return 2===a?"שנתיים":a%10===0&&10!==a?a+" שנה":a+" שנים"}}}),{1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"}),Tf={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"},Uf=(uf.defineLocale("hi",{months:"जनवरी_फ़रवरी_मार्च_अप्रैल_मई_जून_जुलाई_अगस्त_सितम्बर_अक्टूबर_नवम्बर_दिसम्बर".split("_"),monthsShort:"जन._फ़र._मार्च_अप्रै._मई_जून_जुल._अग._सित._अक्टू._नव._दिस.".split("_"),weekdays:"रविवार_सोमवार_मंगलवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगल_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm बजे",LTS:"A h:mm:ss बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm बजे",LLLL:"dddd, D MMMM YYYY, A h:mm बजे"},calendar:{sameDay:"[आज] LT",nextDay:"[कल] LT",nextWeek:"dddd, LT",lastDay:"[कल] LT",lastWeek:"[पिछले] dddd, LT",sameElse:"L"},relativeTime:{future:"%s में",past:"%s पहले",s:"कुछ ही क्षण",m:"एक मिनट",mm:"%d मिनट",h:"एक घंटा",hh:"%d घंटे",d:"एक दिन",dd:"%d दिन",M:"एक महीने",MM:"%d महीने",y:"एक वर्ष",yy:"%d वर्ष"},preparse:function(a){return a.replace(/[१२३४५६७८९०]/g,function(a){return Tf[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return Sf[a]})},meridiemParse:/रात|सुबह|दोपहर|शाम/,meridiemHour:function(a,b){return 12===a&&(a=0),"रात"===b?4>a?a:a+12:"सुबह"===b?a:"दोपहर"===b?a>=10?a:a+12:"शाम"===b?a+12:void 0},meridiem:function(a,b,c){return 4>a?"रात":10>a?"सुबह":17>a?"दोपहर":20>a?"शाम":"रात"},week:{dow:0,doy:6}}),uf.defineLocale("hr",{months:"siječanj_veljača_ožujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_"),monthsShort:"sij._velj._ožu._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prošlu] dddd [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:Yc,mm:Yc,h:Yc,hh:Yc,d:"dan",dd:Yc,M:"mjesec",MM:Yc,y:"godinu",yy:Yc},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),"vasárnap hétfőn kedden szerdán csütörtökön pénteken szombaton".split(" ")),Vf=(uf.defineLocale("hu",{months:"január_február_március_április_május_június_július_augusztus_szeptember_október_november_december".split("_"),monthsShort:"jan_feb_márc_ápr_máj_jún_júl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasárnap_hétfő_kedd_szerda_csütörtök_péntek_szombat".split("_"),weekdaysShort:"vas_hét_kedd_sze_csüt_pén_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(a){return"u"===a.charAt(1).toLowerCase()},meridiem:function(a,b,c){return 12>a?c===!0?"de":"DE":c===!0?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return $c.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return $c.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s múlva",past:"%s",s:Zc,m:Zc,mm:Zc,h:Zc,hh:Zc,d:Zc,dd:Zc,M:Zc,MM:Zc,y:Zc,yy:Zc},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),uf.defineLocale("hy-am",{months:_c,monthsShort:ad,weekdays:bd,weekdaysShort:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),weekdaysMin:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY թ.",LLL:"D MMMM YYYY թ., HH:mm",LLLL:"dddd, D MMMM YYYY թ., HH:mm"},calendar:{sameDay:"[այսօր] LT",nextDay:"[վաղը] LT",lastDay:"[երեկ] LT",nextWeek:function(){return"dddd [օրը ժամը] LT"},lastWeek:function(){return"[անցած] dddd [օրը ժամը] LT"},sameElse:"L"},relativeTime:{future:"%s հետո",past:"%s առաջ",s:"մի քանի վայրկյան",m:"րոպե",mm:"%d րոպե",h:"ժամ",hh:"%d ժամ",d:"օր",dd:"%d օր",M:"ամիս",MM:"%d ամիս",y:"տարի",yy:"%d տարի"},meridiemParse:/գիշերվա|առավոտվա|ցերեկվա|երեկոյան/,isPM:function(a){return/^(ցերեկվա|երեկոյան)$/.test(a)},meridiem:function(a){return 4>a?"գիշերվա":12>a?"առավոտվա":17>a?"ցերեկվա":"երեկոյան"},ordinalParse:/\d{1,2}|\d{1,2}-(ին|րդ)/,ordinal:function(a,b){switch(b){case"DDD":case"w":case"W":case"DDDo":return 1===a?a+"-ին":a+"-րդ";default:return a}},week:{dow:1,doy:7}}),uf.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(a,b){return 12===a&&(a=0),"pagi"===b?a:"siang"===b?a>=11?a:a+12:"sore"===b||"malam"===b?a+12:void 0},meridiem:function(a,b,c){return 11>a?"pagi":15>a?"siang":19>a?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}}),uf.defineLocale("is",{months:"janúar_febrúar_mars_apríl_maí_júní_júlí_ágúst_september_október_nóvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_maí_jún_júl_ágú_sep_okt_nóv_des".split("_"),weekdays:"sunnudagur_mánudagur_þriðjudagur_miðvikudagur_fimmtudagur_föstudagur_laugardagur".split("_"),weekdaysShort:"sun_mán_þri_mið_fim_fös_lau".split("_"),weekdaysMin:"Su_Má_Þr_Mi_Fi_Fö_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[í dag kl.] LT",nextDay:"[á morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[í gær kl.] LT",lastWeek:"[síðasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s síðan",s:dd,m:dd,mm:dd,h:"klukkustund",hh:dd,d:dd,dd:dd,M:dd,MM:dd,y:dd,yy:dd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),uf.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"Domenica_Lunedì_Martedì_Mercoledì_Giovedì_Venerdì_Sabato".split("_"),weekdaysShort:"Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),weekdaysMin:"D_L_Ma_Me_G_V_S".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(a){return(/^[0-9].+$/.test(a)?"tra":"in")+" "+a},past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}}),uf.defineLocale("ja",{months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),longDateFormat:{LT:"Ah時m分",LTS:"Ah時m分s秒",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah時m分",LLLL:"YYYY年M月D日Ah時m分 dddd"},meridiemParse:/午前|午後/i,isPM:function(a){return"午後"===a},meridiem:function(a,b,c){return 12>a?"午前":"午後"},calendar:{sameDay:"[今日] LT",nextDay:"[明日] LT",nextWeek:"[来週]dddd LT",lastDay:"[昨日] LT",lastWeek:"[前週]dddd LT",sameElse:"L"},relativeTime:{future:"%s後",past:"%s前",s:"数秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}}),uf.defineLocale("jv",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(a,b){return 12===a&&(a=0),"enjing"===b?a:"siyang"===b?a>=11?a:a+12:"sonten"===b||"ndalu"===b?a+12:void 0},meridiem:function(a,b,c){return 11>a?"enjing":15>a?"siyang":19>a?"sonten":"ndalu"},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}}),uf.defineLocale("ka",{months:ed,monthsShort:"იან_თებ_მარ_აპრ_მაი_ივნ_ივლ_აგვ_სექ_ოქტ_ნოე_დეკ".split("_"),weekdays:fd,weekdaysShort:"კვი_ორშ_სამ_ოთხ_ხუთ_პარ_შაბ".split("_"),weekdaysMin:"კვ_ორ_სა_ოთ_ხუ_პა_შა".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[დღეს] LT[-ზე]",nextDay:"[ხვალ] LT[-ზე]",lastDay:"[გუშინ] LT[-ზე]",nextWeek:"[შემდეგ] dddd LT[-ზე]",lastWeek:"[წინა] dddd LT-ზე",sameElse:"L"},relativeTime:{future:function(a){return/(წამი|წუთი|საათი|წელი)/.test(a)?a.replace(/ი$/,"ში"):a+"ში"},past:function(a){return/(წამი|წუთი|საათი|დღე|თვე)/.test(a)?a.replace(/(ი|ე)$/,"ის წინ"):/წელი/.test(a)?a.replace(/წელი$/,"წლის წინ"):void 0},s:"რამდენიმე წამი",m:"წუთი",mm:"%d წუთი",h:"საათი",hh:"%d საათი",d:"დღე",dd:"%d დღე",M:"თვე",MM:"%d თვე",y:"წელი",yy:"%d წელი"},ordinalParse:/0|1-ლი|მე-\d{1,2}|\d{1,2}-ე/,ordinal:function(a){return 0===a?a:1===a?a+"-ლი":20>a||100>=a&&a%20===0||a%100===0?"მე-"+a:a+"-ე"},week:{dow:1,doy:7}}),uf.defineLocale("km",{months:"មករា_កុម្ភៈ_មិនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),monthsShort:"មករា_កុម្ភៈ_មិនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),weekdays:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),weekdaysShort:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),weekdaysMin:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ថ្ងៃនៈ ម៉ោង] LT",nextDay:"[ស្អែក ម៉ោង] LT",nextWeek:"dddd [ម៉ោង] LT",lastDay:"[ម្សិលមិញ ម៉ោង] LT",lastWeek:"dddd [សប្តាហ៍មុន] [ម៉ោង] LT",sameElse:"L"},relativeTime:{future:"%sទៀត",past:"%sមុន",s:"ប៉ុន្មានវិនាទី",m:"មួយនាទី",mm:"%d នាទី",h:"មួយម៉ោង",hh:"%d ម៉ោង",d:"មួយថ្ងៃ",dd:"%d ថ្ងៃ",M:"មួយខែ",MM:"%d ខែ",y:"មួយឆ្នាំ",yy:"%d ឆ្នាំ"},week:{dow:1,doy:4}}),uf.defineLocale("ko",{months:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),monthsShort:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),weekdays:"일요일_월요일_화요일_수요일_목요일_금요일_토요일".split("_"),weekdaysShort:"일_월_화_수_목_금_토".split("_"),weekdaysMin:"일_월_화_수_목_금_토".split("_"),longDateFormat:{LT:"A h시 m분",LTS:"A h시 m분 s초",L:"YYYY.MM.DD",LL:"YYYY년 MMMM D일",LLL:"YYYY년 MMMM D일 A h시 m분",LLLL:"YYYY년 MMMM D일 dddd A h시 m분"},calendar:{sameDay:"오늘 LT",nextDay:"내일 LT",nextWeek:"dddd LT",lastDay:"어제 LT",lastWeek:"지난주 dddd LT",sameElse:"L"},relativeTime:{future:"%s 후",past:"%s 전",s:"몇초",ss:"%d초",m:"일분",mm:"%d분",h:"한시간",hh:"%d시간",d:"하루",dd:"%d일",M:"한달",MM:"%d달",y:"일년",yy:"%d년"},ordinalParse:/\d{1,2}일/,ordinal:"%d일",meridiemParse:/오전|오후/,isPM:function(a){return"오후"===a},meridiem:function(a,b,c){return 12>a?"오전":"오후"}}),uf.defineLocale("lb",{months:"Januar_Februar_Mäerz_Abrëll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonndeg_Méindeg_Dënschdeg_Mëttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._Mé._Dë._Më._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mé_Dë_Më_Do_Fr_Sa".split("_"),longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gëschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:hd,past:id,s:"e puer Sekonnen",m:gd,mm:"%d Minutten",h:gd,hh:"%d Stonnen",d:gd,dd:"%d Deeg",M:gd,MM:"%d Méint",y:gd,yy:"%d Joer"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),{m:"minutė_minutės_minutę",mm:"minutės_minučių_minutes",h:"valanda_valandos_valandą",hh:"valandos_valandų_valandas",d:"diena_dienos_dieną",dd:"dienos_dienų_dienas",M:"mėnuo_mėnesio_mėnesį",MM:"mėnesiai_mėnesių_mėnesius",y:"metai_metų_metus",yy:"metai_metų_metus"}),Wf="sekmadienis_pirmadienis_antradienis_trečiadienis_ketvirtadienis_penktadienis_šeštadienis".split("_"),Xf=(uf.defineLocale("lt",{months:ld,monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:qd,weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_Šeš".split("_"),weekdaysMin:"S_P_A_T_K_Pn_Š".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[Šiandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Praėjusį] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prieš %s",s:kd,m:md,mm:pd,h:md,hh:pd,d:md,dd:pd,M:md,MM:pd,y:md,yy:pd},ordinalParse:/\d{1,2}-oji/,ordinal:function(a){return a+"-oji"},week:{dow:1,doy:4}}),{m:"minūtes_minūtēm_minūte_minūtes".split("_"),mm:"minūtes_minūtēm_minūte_minūtes".split("_"),h:"stundas_stundām_stunda_stundas".split("_"),hh:"stundas_stundām_stunda_stundas".split("_"),d:"dienas_dienām_diena_dienas".split("_"),dd:"dienas_dienām_diena_dienas".split("_"),M:"mēneša_mēnešiem_mēnesis_mēneši".split("_"),MM:"mēneša_mēnešiem_mēnesis_mēneši".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")}),Yf=(uf.defineLocale("lv",{months:"janvāris_februāris_marts_aprīlis_maijs_jūnijs_jūlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jūn_jūl_aug_sep_okt_nov_dec".split("_"),weekdays:"svētdiena_pirmdiena_otrdiena_trešdiena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[Šodien pulksten] LT",nextDay:"[Rīt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagājušā] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"pēc %s",past:"pirms %s",s:ud,m:td,mm:sd,h:td,hh:sd,d:td,dd:sd,M:td,MM:sd,y:td,yy:sd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),{words:{m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(a,b){return 1===a?b[0]:a>=2&&4>=a?b[1]:b[2]},translate:function(a,b,c){var d=Yf.words[c];return 1===c.length?b?d[0]:d[1]:a+" "+Yf.correctGrammaticalCase(a,d)}}),Zf=(uf.defineLocale("me",{months:["januar","februar","mart","april","maj","jun","jul","avgust","septembar","oktobar","novembar","decembar"],monthsShort:["jan.","feb.","mar.","apr.","maj","jun","jul","avg.","sep.","okt.","nov.","dec."],weekdays:["nedjelja","ponedjeljak","utorak","srijeda","četvrtak","petak","subota"],weekdaysShort:["ned.","pon.","uto.","sri.","čet.","pet.","sub."],weekdaysMin:["ne","po","ut","sr","če","pe","su"],longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){var a=["[prošle] [nedjelje] [u] LT","[prošlog] [ponedjeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srijede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"];return a[this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",m:Yf.translate,mm:Yf.translate,h:Yf.translate,hh:Yf.translate,d:"dan",dd:Yf.translate,M:"mjesec",MM:Yf.translate,y:"godinu",yy:Yf.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),uf.defineLocale("mk",{months:"јануари_февруари_март_април_мај_јуни_јули_август_септември_октомври_ноември_декември".split("_"),monthsShort:"јан_фев_мар_апр_мај_јун_јул_авг_сеп_окт_ное_дек".split("_"),weekdays:"недела_понеделник_вторник_среда_четврток_петок_сабота".split("_"),weekdaysShort:"нед_пон_вто_сре_чет_пет_саб".split("_"),weekdaysMin:"нe_пo_вт_ср_че_пе_сa".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[Денес во] LT",nextDay:"[Утре во] LT",nextWeek:"dddd [во] LT",lastDay:"[Вчера во] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[Во изминатата] dddd [во] LT";case 1:case 2:case 4:case 5:return"[Во изминатиот] dddd [во] LT"}},sameElse:"L"},relativeTime:{future:"после %s",past:"пред %s",s:"неколку секунди",m:"минута",mm:"%d минути",h:"час",hh:"%d часа",d:"ден",dd:"%d дена",M:"месец",MM:"%d месеци",y:"година",yy:"%d години"},ordinalParse:/\d{1,2}-(ев|ен|ти|ви|ри|ми)/,ordinal:function(a){var b=a%10,c=a%100;return 0===a?a+"-ев":0===c?a+"-ен":c>10&&20>c?a+"-ти":1===b?a+"-ви":2===b?a+"-ри":7===b||8===b?a+"-ми":a+"-ти"},week:{dow:1,doy:7}}),uf.defineLocale("ml",{months:"ജനുവരി_ഫെബ്രുവരി_മാർച്ച്_ഏപ്രിൽ_മേയ്_ജൂൺ_ജൂലൈ_ഓഗസ്റ്റ്_സെപ്റ്റംബർ_ഒക്ടോബർ_നവംബർ_ഡിസംബർ".split("_"),monthsShort:"ജനു._ഫെബ്രു._മാർ._ഏപ്രി._മേയ്_ജൂൺ_ജൂലൈ._ഓഗ._സെപ്റ്റ._ഒക്ടോ._നവം._ഡിസം.".split("_"),weekdays:"ഞായറാഴ്ച_തിങ്കളാഴ്ച_ചൊവ്വാഴ്ച_ബുധനാഴ്ച_വ്യാഴാഴ്ച_വെള്ളിയാഴ്ച_ശനിയാഴ്ച".split("_"),weekdaysShort:"ഞായർ_തിങ്കൾ_ചൊവ്വ_ബുധൻ_വ്യാഴം_വെള്ളി_ശനി".split("_"),weekdaysMin:"ഞാ_തി_ചൊ_ബു_വ്യാ_വെ_ശ".split("_"),longDateFormat:{LT:"A h:mm -നു",LTS:"A h:mm:ss -നു",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -നു",LLLL:"dddd, D MMMM YYYY, A h:mm -നു"},calendar:{sameDay:"[ഇന്ന്] LT",nextDay:"[നാളെ] LT",nextWeek:"dddd, LT",lastDay:"[ഇന്നലെ] LT",lastWeek:"[കഴിഞ്ഞ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s കഴിഞ്ഞ്",past:"%s മുൻപ്",s:"അൽപ നിമിഷങ്ങൾ",m:"ഒരു മിനിറ്റ്",mm:"%d മിനിറ്റ്",h:"ഒരു മണിക്കൂർ",hh:"%d മണിക്കൂർ",d:"ഒരു ദിവസം",dd:"%d ദിവസം",M:"ഒരു മാസം",MM:"%d മാസം",y:"ഒരു വർഷം",yy:"%d വർഷം"},meridiemParse:/രാത്രി|രാവിലെ|ഉച്ച കഴിഞ്ഞ്|വൈകുന്നേരം|രാത്രി/i,isPM:function(a){return/^(ഉച്ച കഴിഞ്ഞ്|വൈകുന്നേരം|രാത്രി)$/.test(a)},meridiem:function(a,b,c){return 4>a?"രാത്രി":12>a?"രാവിലെ":17>a?"ഉച്ച കഴിഞ്ഞ്":20>a?"വൈകുന്നേരം":"രാത്രി"}}),{1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"}),$f={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"},_f=(uf.defineLocale("mr",{months:"जानेवारी_फेब्रुवारी_मार्च_एप्रिल_मे_जून_जुलै_ऑगस्ट_सप्टेंबर_ऑक्टोबर_नोव्हेंबर_डिसेंबर".split("_"),monthsShort:"जाने._फेब्रु._मार्च._एप्रि._मे._जून._जुलै._ऑग._सप्टें._ऑक्टो._नोव्हें._डिसें.".split("_"),weekdays:"रविवार_सोमवार_मंगळवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगळ_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm वाजता",LTS:"A h:mm:ss वाजता",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm वाजता",LLLL:"dddd, D MMMM YYYY, A h:mm वाजता"},calendar:{sameDay:"[आज] LT",nextDay:"[उद्या] LT",nextWeek:"dddd, LT",lastDay:"[काल] LT",lastWeek:"[मागील] dddd, LT",sameElse:"L"},relativeTime:{future:"%s नंतर",past:"%s पूर्वी",s:"सेकंद",m:"एक मिनिट",mm:"%d मिनिटे",h:"एक तास",hh:"%d तास",d:"एक दिवस",dd:"%d दिवस",M:"एक महिना",MM:"%d महिने",y:"एक वर्ष",yy:"%d वर्षे"},preparse:function(a){return a.replace(/[१२३४५६७८९०]/g,function(a){return $f[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return Zf[a]})},meridiemParse:/रात्री|सकाळी|दुपारी|सायंकाळी/,meridiemHour:function(a,b){return 12===a&&(a=0),"रात्री"===b?4>a?a:a+12:"सकाळी"===b?a:"दुपारी"===b?a>=10?a:a+12:"सायंकाळी"===b?a+12:void 0},meridiem:function(a,b,c){return 4>a?"रात्री":10>a?"सकाळी":17>a?"दुपारी":20>a?"सायंकाळी":"रात्री"},week:{dow:0,doy:6}}),uf.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(a,b){return 12===a&&(a=0),"pagi"===b?a:"tengahari"===b?a>=11?a:a+12:"petang"===b||"malam"===b?a+12:void 0},meridiem:function(a,b,c){return 11>a?"pagi":15>a?"tengahari":19>a?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",
lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}}),uf.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(a,b){return 12===a&&(a=0),"pagi"===b?a:"tengahari"===b?a>=11?a:a+12:"petang"===b||"malam"===b?a+12:void 0},meridiem:function(a,b,c){return 11>a?"pagi":15>a?"tengahari":19>a?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}}),{1:"၁",2:"၂",3:"၃",4:"၄",5:"၅",6:"၆",7:"၇",8:"၈",9:"၉",0:"၀"}),ag={"၁":"1","၂":"2","၃":"3","၄":"4","၅":"5","၆":"6","၇":"7","၈":"8","၉":"9","၀":"0"},bg=(uf.defineLocale("my",{months:"ဇန်နဝါရီ_ဖေဖော်ဝါရီ_မတ်_ဧပြီ_မေ_ဇွန်_ဇူလိုင်_သြဂုတ်_စက်တင်ဘာ_အောက်တိုဘာ_နိုဝင်ဘာ_ဒီဇင်ဘာ".split("_"),monthsShort:"ဇန်_ဖေ_မတ်_ပြီ_မေ_ဇွန်_လိုင်_သြ_စက်_အောက်_နို_ဒီ".split("_"),weekdays:"တနင်္ဂနွေ_တနင်္လာ_အင်္ဂါ_ဗုဒ္ဓဟူး_ကြာသပတေး_သောကြာ_စနေ".split("_"),weekdaysShort:"နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ".split("_"),weekdaysMin:"နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ယနေ.] LT [မှာ]",nextDay:"[မနက်ဖြန်] LT [မှာ]",nextWeek:"dddd LT [မှာ]",lastDay:"[မနေ.က] LT [မှာ]",lastWeek:"[ပြီးခဲ့သော] dddd LT [မှာ]",sameElse:"L"},relativeTime:{future:"လာမည့် %s မှာ",past:"လွန်ခဲ့သော %s က",s:"စက္ကန်.အနည်းငယ်",m:"တစ်မိနစ်",mm:"%d မိနစ်",h:"တစ်နာရီ",hh:"%d နာရီ",d:"တစ်ရက်",dd:"%d ရက်",M:"တစ်လ",MM:"%d လ",y:"တစ်နှစ်",yy:"%d နှစ်"},preparse:function(a){return a.replace(/[၁၂၃၄၅၆၇၈၉၀]/g,function(a){return ag[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return _f[a]})},week:{dow:1,doy:4}}),uf.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"søn_man_tirs_ons_tors_fre_lør".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),longDateFormat:{LT:"H.mm",LTS:"H.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H.mm",LLLL:"dddd D. MMMM YYYY [kl.] H.mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i går kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s siden",s:"noen sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en måned",MM:"%d måneder",y:"ett år",yy:"%d år"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),{1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"}),cg={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"},dg=(uf.defineLocale("ne",{months:"जनवरी_फेब्रुवरी_मार्च_अप्रिल_मई_जुन_जुलाई_अगष्ट_सेप्टेम्बर_अक्टोबर_नोभेम्बर_डिसेम्बर".split("_"),monthsShort:"जन._फेब्रु._मार्च_अप्रि._मई_जुन_जुलाई._अग._सेप्ट._अक्टो._नोभे._डिसे.".split("_"),weekdays:"आइतबार_सोमबार_मङ्गलबार_बुधबार_बिहिबार_शुक्रबार_शनिबार".split("_"),weekdaysShort:"आइत._सोम._मङ्गल._बुध._बिहि._शुक्र._शनि.".split("_"),weekdaysMin:"आइ._सो._मङ्_बु._बि._शु._श.".split("_"),longDateFormat:{LT:"Aको h:mm बजे",LTS:"Aको h:mm:ss बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, Aको h:mm बजे",LLLL:"dddd, D MMMM YYYY, Aको h:mm बजे"},preparse:function(a){return a.replace(/[१२३४५६७८९०]/g,function(a){return cg[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return bg[a]})},meridiemParse:/राती|बिहान|दिउँसो|बेलुका|साँझ|राती/,meridiemHour:function(a,b){return 12===a&&(a=0),"राती"===b?3>a?a:a+12:"बिहान"===b?a:"दिउँसो"===b?a>=10?a:a+12:"बेलुका"===b||"साँझ"===b?a+12:void 0},meridiem:function(a,b,c){return 3>a?"राती":10>a?"बिहान":15>a?"दिउँसो":18>a?"बेलुका":20>a?"साँझ":"राती"},calendar:{sameDay:"[आज] LT",nextDay:"[भोली] LT",nextWeek:"[आउँदो] dddd[,] LT",lastDay:"[हिजो] LT",lastWeek:"[गएको] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%sमा",past:"%s अगाडी",s:"केही समय",m:"एक मिनेट",mm:"%d मिनेट",h:"एक घण्टा",hh:"%d घण्टा",d:"एक दिन",dd:"%d दिन",M:"एक महिना",MM:"%d महिना",y:"एक बर्ष",yy:"%d बर्ष"},week:{dow:1,doy:7}}),"jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_")),eg="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),fg=(uf.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(a,b){return/-MMM-/.test(b)?eg[a.month()]:dg[a.month()]},weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"één minuut",mm:"%d minuten",h:"één uur",hh:"%d uur",d:"één dag",dd:"%d dagen",M:"één maand",MM:"%d maanden",y:"één jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(a){return a+(1===a||8===a||a>=20?"ste":"de")},week:{dow:1,doy:4}}),uf.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sundag_måndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_mån_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_må_ty_on_to_fr_lø".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I går klokka] LT",lastWeek:"[Føregåande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s sidan",s:"nokre sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein månad",MM:"%d månader",y:"eit år",yy:"%d år"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),"styczeń_luty_marzec_kwiecień_maj_czerwiec_lipiec_sierpień_wrzesień_październik_listopad_grudzień".split("_")),gg="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_września_października_listopada_grudnia".split("_"),hg=(uf.defineLocale("pl",{months:function(a,b){return""===b?"("+gg[a.month()]+"|"+fg[a.month()]+")":/D MMMM/.test(b)?gg[a.month()]:fg[a.month()]},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_paź_lis_gru".split("_"),weekdays:"niedziela_poniedziałek_wtorek_środa_czwartek_piątek_sobota".split("_"),weekdaysShort:"nie_pon_wt_śr_czw_pt_sb".split("_"),weekdaysMin:"N_Pn_Wt_Śr_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dziś o] LT",nextDay:"[Jutro o] LT",nextWeek:"[W] dddd [o] LT",lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zeszłą niedzielę o] LT";case 3:return"[W zeszłą środę o] LT";case 6:return"[W zeszłą sobotę o] LT";default:return"[W zeszły] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",m:wd,mm:wd,h:wd,hh:wd,d:"1 dzień",dd:"%d dni",M:"miesiąc",MM:wd,y:"rok",yy:wd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),uf.defineLocale("pt-br",{months:"Janeiro_Fevereiro_Março_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-Feira_Terça-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_Sábado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),weekdaysMin:"Dom_2ª_3ª_4ª_5ª_6ª_Sáb".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [às] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [às] HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrás",s:"poucos segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}º/,ordinal:"%dº"}),uf.defineLocale("pt",{months:"Janeiro_Fevereiro_Março_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-Feira_Terça-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_Sábado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),weekdaysMin:"Dom_2ª_3ª_4ª_5ª_6ª_Sáb".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"há %s",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}}),uf.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),weekdays:"duminică_luni_marți_miercuri_joi_vineri_sâmbătă".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sâm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_Sâ".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mâine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s în urmă",s:"câteva secunde",m:"un minut",mm:xd,h:"o oră",hh:xd,d:"o zi",dd:xd,M:"o lună",MM:xd,y:"un an",yy:xd},week:{dow:1,doy:7}}),uf.defineLocale("ru",{months:Ad,monthsShort:Bd,weekdays:Cd,weekdaysShort:"вс_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),monthsParse:[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[й|я]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., HH:mm",LLLL:"dddd, D MMMM YYYY г., HH:mm"},calendar:{sameDay:"[Сегодня в] LT",nextDay:"[Завтра в] LT",lastDay:"[Вчера в] LT",nextWeek:function(){return 2===this.day()?"[Во] dddd [в] LT":"[В] dddd [в] LT"},lastWeek:function(a){if(a.week()===this.week())return 2===this.day()?"[Во] dddd [в] LT":"[В] dddd [в] LT";switch(this.day()){case 0:return"[В прошлое] dddd [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",m:zd,mm:zd,h:"час",hh:zd,d:"день",dd:zd,M:"месяц",MM:zd,y:"год",yy:zd},meridiemParse:/ночи|утра|дня|вечера/i,isPM:function(a){return/^(дня|вечера)$/.test(a)},meridiem:function(a,b,c){return 4>a?"ночи":12>a?"утра":17>a?"дня":"вечера"},ordinalParse:/\d{1,2}-(й|го|я)/,ordinal:function(a,b){switch(b){case"M":case"d":case"DDD":return a+"-й";case"D":return a+"-го";case"w":case"W":return a+"-я";default:return a}},week:{dow:1,doy:7}}),uf.defineLocale("si",{months:"ජනවාරි_පෙබරවාරි_මාර්තු_අප්‍රේල්_මැයි_ජූනි_ජූලි_අගෝස්තු_සැප්තැම්බර්_ඔක්තෝබර්_නොවැම්බර්_දෙසැම්බර්".split("_"),monthsShort:"ජන_පෙබ_මාර්_අප්_මැයි_ජූනි_ජූලි_අගෝ_සැප්_ඔක්_නොවැ_දෙසැ".split("_"),weekdays:"ඉරිදා_සඳුදා_අඟහරුවාදා_බදාදා_බ්‍රහස්පතින්දා_සිකුරාදා_සෙනසුරාදා".split("_"),weekdaysShort:"ඉරි_සඳු_අඟ_බදා_බ්‍රහ_සිකු_සෙන".split("_"),weekdaysMin:"ඉ_ස_අ_බ_බ්‍ර_සි_සෙ".split("_"),longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [වැනි] dddd, a h:mm:ss"},calendar:{sameDay:"[අද] LT[ට]",nextDay:"[හෙට] LT[ට]",nextWeek:"dddd LT[ට]",lastDay:"[ඊයේ] LT[ට]",lastWeek:"[පසුගිය] dddd LT[ට]",sameElse:"L"},relativeTime:{future:"%sකින්",past:"%sකට පෙර",s:"තත්පර කිහිපය",m:"මිනිත්තුව",mm:"මිනිත්තු %d",h:"පැය",hh:"පැය %d",d:"දිනය",dd:"දින %d",M:"මාසය",MM:"මාස %d",y:"වසර",yy:"වසර %d"},ordinalParse:/\d{1,2} වැනි/,ordinal:function(a){return a+" වැනි"},meridiem:function(a,b,c){return a>11?c?"ප.ව.":"පස් වරු":c?"පෙ.ව.":"පෙර වරු"}}),"január_február_marec_apríl_máj_jún_júl_august_september_október_november_december".split("_")),ig="jan_feb_mar_apr_máj_jún_júl_aug_sep_okt_nov_dec".split("_"),jg=(uf.defineLocale("sk",{months:hg,monthsShort:ig,monthsParse:function(a,b){var c,d=[];for(c=0;12>c;c++)d[c]=new RegExp("^"+a[c]+"$|^"+b[c]+"$","i");return d}(hg,ig),weekdays:"nedeľa_pondelok_utorok_streda_štvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_št_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_št_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeľu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo štvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[včera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulú nedeľu o] LT";case 1:case 2:return"[minulý] dddd [o] LT";case 3:return"[minulú stredu o] LT";case 4:case 5:return"[minulý] dddd [o] LT";case 6:return"[minulú sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:Ed,m:Ed,mm:Ed,h:Ed,hh:Ed,d:Ed,dd:Ed,M:Ed,MM:Ed,y:Ed,yy:Ed},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),uf.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),weekdays:"nedelja_ponedeljek_torek_sreda_četrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._čet._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_če_pe_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[včeraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prejšnjo] [nedeljo] [ob] LT";case 3:return"[prejšnjo] [sredo] [ob] LT";case 6:return"[prejšnjo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prejšnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"čez %s",past:"pred %s",s:Fd,m:Fd,mm:Fd,h:Fd,hh:Fd,d:Fd,dd:Fd,M:Fd,MM:Fd,y:Fd,yy:Fd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),uf.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nëntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nën_Dhj".split("_"),weekdays:"E Diel_E Hënë_E Martë_E Mërkurë_E Enjte_E Premte_E Shtunë".split("_"),weekdaysShort:"Die_Hën_Mar_Mër_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_Më_E_P_Sh".split("_"),meridiemParse:/PD|MD/,isPM:function(a){return"M"===a.charAt(0)},meridiem:function(a,b,c){return 12>a?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot në] LT",nextDay:"[Nesër në] LT",nextWeek:"dddd [në] LT",lastDay:"[Dje në] LT",lastWeek:"dddd [e kaluar në] LT",sameElse:"L"},relativeTime:{future:"në %s",past:"%s më parë",s:"disa sekonda",m:"një minutë",mm:"%d minuta",h:"një orë",hh:"%d orë",d:"një ditë",dd:"%d ditë",M:"një muaj",MM:"%d muaj",y:"një vit",yy:"%d vite"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),{words:{m:["један минут","једне минуте"],mm:["минут","минуте","минута"],h:["један сат","једног сата"],hh:["сат","сата","сати"],dd:["дан","дана","дана"],MM:["месец","месеца","месеци"],yy:["година","године","година"]},correctGrammaticalCase:function(a,b){return 1===a?b[0]:a>=2&&4>=a?b[1]:b[2]},translate:function(a,b,c){var d=jg.words[c];return 1===c.length?b?d[0]:d[1]:a+" "+jg.correctGrammaticalCase(a,d)}}),kg=(uf.defineLocale("sr-cyrl",{months:["јануар","фебруар","март","април","мај","јун","јул","август","септембар","октобар","новембар","децембар"],monthsShort:["јан.","феб.","мар.","апр.","мај","јун","јул","авг.","сеп.","окт.","нов.","дец."],weekdays:["недеља","понедељак","уторак","среда","четвртак","петак","субота"],weekdaysShort:["нед.","пон.","уто.","сре.","чет.","пет.","суб."],weekdaysMin:["не","по","ут","ср","че","пе","су"],longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[данас у] LT",nextDay:"[сутра у] LT",nextWeek:function(){switch(this.day()){case 0:return"[у] [недељу] [у] LT";case 3:return"[у] [среду] [у] LT";case 6:return"[у] [суботу] [у] LT";case 1:case 2:case 4:case 5:return"[у] dddd [у] LT"}},lastDay:"[јуче у] LT",lastWeek:function(){var a=["[прошле] [недеље] [у] LT","[прошлог] [понедељка] [у] LT","[прошлог] [уторка] [у] LT","[прошле] [среде] [у] LT","[прошлог] [четвртка] [у] LT","[прошлог] [петка] [у] LT","[прошле] [суботе] [у] LT"];return a[this.day()]},sameElse:"L"},relativeTime:{future:"за %s",past:"пре %s",s:"неколико секунди",m:jg.translate,mm:jg.translate,h:jg.translate,hh:jg.translate,d:"дан",dd:jg.translate,M:"месец",MM:jg.translate,y:"годину",yy:jg.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),{words:{m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(a,b){return 1===a?b[0]:a>=2&&4>=a?b[1]:b[2]},translate:function(a,b,c){var d=kg.words[c];return 1===c.length?b?d[0]:d[1]:a+" "+kg.correctGrammaticalCase(a,d)}}),lg=(uf.defineLocale("sr",{months:["januar","februar","mart","april","maj","jun","jul","avgust","septembar","oktobar","novembar","decembar"],monthsShort:["jan.","feb.","mar.","apr.","maj","jun","jul","avg.","sep.","okt.","nov.","dec."],weekdays:["nedelja","ponedeljak","utorak","sreda","četvrtak","petak","subota"],weekdaysShort:["ned.","pon.","uto.","sre.","čet.","pet.","sub."],weekdaysMin:["ne","po","ut","sr","če","pe","su"],longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){var a=["[prošle] [nedelje] [u] LT","[prošlog] [ponedeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"];return a[this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",m:kg.translate,mm:kg.translate,h:kg.translate,hh:kg.translate,d:"dan",dd:kg.translate,M:"mesec",MM:kg.translate,y:"godinu",yy:kg.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),uf.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"söndag_måndag_tisdag_onsdag_torsdag_fredag_lördag".split("_"),weekdaysShort:"sön_mån_tis_ons_tor_fre_lör".split("_"),weekdaysMin:"sö_må_ti_on_to_fr_lö".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igår] LT",nextWeek:"[På] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"för %s sedan",s:"några sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en månad",MM:"%d månader",y:"ett år",yy:"%d år"},ordinalParse:/\d{1,2}(e|a)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"e":1===b?"a":2===b?"a":"e";return a+c},week:{dow:1,doy:4}}),uf.defineLocale("ta",{months:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),monthsShort:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),weekdays:"ஞாயிற்றுக்கிழமை_திங்கட்கிழமை_செவ்வாய்கிழமை_புதன்கிழமை_வியாழக்கிழமை_வெள்ளிக்கிழமை_சனிக்கிழமை".split("_"),weekdaysShort:"ஞாயிறு_திங்கள்_செவ்வாய்_புதன்_வியாழன்_வெள்ளி_சனி".split("_"),weekdaysMin:"ஞா_தி_செ_பு_வி_வெ_ச".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[இன்று] LT",nextDay:"[நாளை] LT",nextWeek:"dddd, LT",lastDay:"[நேற்று] LT",lastWeek:"[கடந்த வாரம்] dddd, LT",sameElse:"L"},relativeTime:{future:"%s இல்",past:"%s முன்",s:"ஒரு சில விநாடிகள்",m:"ஒரு நிமிடம்",mm:"%d நிமிடங்கள்",h:"ஒரு மணி நேரம்",hh:"%d மணி நேரம்",d:"ஒரு நாள்",dd:"%d நாட்கள்",M:"ஒரு மாதம்",MM:"%d மாதங்கள்",y:"ஒரு வருடம்",yy:"%d ஆண்டுகள்"},ordinalParse:/\d{1,2}வது/,ordinal:function(a){return a+"வது"},meridiemParse:/யாமம்|வைகறை|காலை|நண்பகல்|எற்பாடு|மாலை/,meridiem:function(a,b,c){return 2>a?" யாமம்":6>a?" வைகறை":10>a?" காலை":14>a?" நண்பகல்":18>a?" எற்பாடு":22>a?" மாலை":" யாமம்"},meridiemHour:function(a,b){return 12===a&&(a=0),"யாமம்"===b?2>a?a:a+12:"வைகறை"===b||"காலை"===b?a:"நண்பகல்"===b&&a>=10?a:a+12},week:{dow:0,doy:6}}),uf.defineLocale("th",{months:"มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),monthsShort:"มกรา_กุมภา_มีนา_เมษา_พฤษภา_มิถุนา_กรกฎา_สิงหา_กันยา_ตุลา_พฤศจิกา_ธันวา".split("_"),weekdays:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),weekdaysShort:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),weekdaysMin:"อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),longDateFormat:{LT:"H นาฬิกา m นาที",LTS:"H นาฬิกา m นาที s วินาที",L:"YYYY/MM/DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY เวลา H นาฬิกา m นาที",LLLL:"วันddddที่ D MMMM YYYY เวลา H นาฬิกา m นาที"},meridiemParse:/ก่อนเที่ยง|หลังเที่ยง/,isPM:function(a){return"หลังเที่ยง"===a},meridiem:function(a,b,c){return 12>a?"ก่อนเที่ยง":"หลังเที่ยง"},calendar:{sameDay:"[วันนี้ เวลา] LT",nextDay:"[พรุ่งนี้ เวลา] LT",nextWeek:"dddd[หน้า เวลา] LT",lastDay:"[เมื่อวานนี้ เวลา] LT",lastWeek:"[วัน]dddd[ที่แล้ว เวลา] LT",sameElse:"L"},relativeTime:{future:"อีก %s",past:"%sที่แล้ว",s:"ไม่กี่วินาที",m:"1 นาที",mm:"%d นาที",h:"1 ชั่วโมง",hh:"%d ชั่วโมง",d:"1 วัน",dd:"%d วัน",M:"1 เดือน",MM:"%d เดือน",y:"1 ปี",yy:"%d ปี"}}),uf.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"[Ngayon sa] LT",nextDay:"[Bukas sa] LT",nextWeek:"dddd [sa] LT",lastDay:"[Kahapon sa] LT",lastWeek:"dddd [huling linggo] LT",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},ordinalParse:/\d{1,2}/,ordinal:function(a){return a},week:{dow:1,doy:4}}),{1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'üncü",4:"'üncü",100:"'üncü",6:"'ncı",9:"'uncu",10:"'uncu",30:"'uncu",60:"'ıncı",90:"'ıncı"}),mg=(uf.defineLocale("tr",{months:"Ocak_Şubat_Mart_Nisan_Mayıs_Haziran_Temmuz_Ağustos_Eylül_Ekim_Kasım_Aralık".split("_"),monthsShort:"Oca_Şub_Mar_Nis_May_Haz_Tem_Ağu_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Salı_Çarşamba_Perşembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_Çar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_Ça_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[yarın saat] LT",nextWeek:"[haftaya] dddd [saat] LT",lastDay:"[dün] LT",lastWeek:"[geçen hafta] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s önce",s:"birkaç saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",M:"bir ay",MM:"%d ay",y:"bir yıl",yy:"%d yıl"},ordinalParse:/\d{1,2}'(inci|nci|üncü|ncı|uncu|ıncı)/,ordinal:function(a){if(0===a)return a+"'ıncı";var b=a%10,c=a%100-b,d=a>=100?100:null;return a+(lg[b]||lg[c]||lg[d])},week:{dow:1,doy:7}}),uf.defineLocale("tzl",{months:"Januar_Fevraglh_Març_Avrïu_Mai_Gün_Julia_Guscht_Setemvar_Listopäts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_Gün_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"Súladi_Lúneçi_Maitzi_Márcuri_Xhúadi_Viénerçi_Sáturi".split("_"),weekdaysShort:"Súl_Lún_Mai_Már_Xhú_Vié_Sát".split("_"),weekdaysMin:"Sú_Lú_Ma_Má_Xh_Vi_Sá".split("_"),longDateFormat:{LT:"HH.mm",LTS:"LT.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY LT",LLLL:"dddd, [li] D. MMMM [dallas] YYYY LT"},meridiem:function(a,b,c){return a>11?c?"d'o":"D'O":c?"d'a":"D'A"},calendar:{sameDay:"[oxhi à] LT",nextDay:"[demà à] LT",nextWeek:"dddd [à] LT",lastDay:"[ieiri à] LT",lastWeek:"[sür el] dddd [lasteu à] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:Gd,m:Gd,mm:Gd,h:Gd,hh:Gd,d:Gd,dd:Gd,M:Gd,MM:Gd,y:Gd,yy:Gd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),uf.defineLocale("tzm-latn",{months:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",m:"minuḍ",mm:"%d minuḍ",h:"saɛa",hh:"%d tassaɛin",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}}),uf.defineLocale("tzm",{months:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),monthsShort:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),weekdays:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysShort:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysMin:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ⴰⵙⴷⵅ ⴴ] LT",nextDay:"[ⴰⵙⴽⴰ ⴴ] LT",nextWeek:"dddd [ⴴ] LT",lastDay:"[ⴰⵚⴰⵏⵜ ⴴ] LT",lastWeek:"dddd [ⴴ] LT",sameElse:"L"},relativeTime:{future:"ⴷⴰⴷⵅ ⵙ ⵢⴰⵏ %s",past:"ⵢⴰⵏ %s",s:"ⵉⵎⵉⴽ",m:"ⵎⵉⵏⵓⴺ",mm:"%d ⵎⵉⵏⵓⴺ",h:"ⵙⴰⵄⴰ",hh:"%d ⵜⴰⵙⵙⴰⵄⵉⵏ",d:"ⴰⵙⵙ",dd:"%d oⵙⵙⴰⵏ",M:"ⴰⵢoⵓⵔ",MM:"%d ⵉⵢⵢⵉⵔⵏ",y:"ⴰⵙⴳⴰⵙ",yy:"%d ⵉⵙⴳⴰⵙⵏ"},week:{dow:6,doy:12}}),uf.defineLocale("uk",{months:Jd,monthsShort:"січ_лют_бер_квіт_трав_черв_лип_серп_вер_жовт_лист_груд".split("_"),weekdays:Kd,weekdaysShort:"нд_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY р.",LLL:"D MMMM YYYY р., HH:mm",LLLL:"dddd, D MMMM YYYY р., HH:mm"},calendar:{sameDay:Ld("[Сьогодні "),nextDay:Ld("[Завтра "),lastDay:Ld("[Вчора "),nextWeek:Ld("[У] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return Ld("[Минулої] dddd [").call(this);case 1:case 2:case 4:return Ld("[Минулого] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:"за %s",past:"%s тому",s:"декілька секунд",m:Id,mm:Id,h:"годину",hh:Id,d:"день",dd:Id,M:"місяць",MM:Id,y:"рік",yy:Id},meridiemParse:/ночі|ранку|дня|вечора/,isPM:function(a){return/^(дня|вечора)$/.test(a)},meridiem:function(a,b,c){return 4>a?"ночі":12>a?"ранку":17>a?"дня":"вечора"},ordinalParse:/\d{1,2}-(й|го)/,ordinal:function(a,b){switch(b){case"M":case"d":case"DDD":case"w":case"W":return a+"-й";case"D":return a+"-го";default:return a}},week:{dow:1,doy:7}}),uf.defineLocale("uz",{months:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),monthsShort:"янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек".split("_"),weekdays:"Якшанба_Душанба_Сешанба_Чоршанба_Пайшанба_Жума_Шанба".split("_"),weekdaysShort:"Якш_Душ_Сеш_Чор_Пай_Жум_Шан".split("_"),weekdaysMin:"Як_Ду_Се_Чо_Па_Жу_Ша".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Бугун соат] LT [да]",nextDay:"[Эртага] LT [да]",nextWeek:"dddd [куни соат] LT [да]",lastDay:"[Кеча соат] LT [да]",lastWeek:"[Утган] dddd [куни соат] LT [да]",sameElse:"L"},relativeTime:{future:"Якин %s ичида",past:"Бир неча %s олдин",s:"фурсат",m:"бир дакика",mm:"%d дакика",h:"бир соат",hh:"%d соат",d:"бир кун",dd:"%d кун",M:"бир ой",MM:"%d ой",y:"бир йил",yy:"%d йил"},week:{dow:1,doy:7}}),uf.defineLocale("vi",{months:"tháng 1_tháng 2_tháng 3_tháng 4_tháng 5_tháng 6_tháng 7_tháng 8_tháng 9_tháng 10_tháng 11_tháng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),weekdays:"chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ sáu_thứ bảy".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [năm] YYYY",LLL:"D MMMM [năm] YYYY HH:mm",LLLL:"dddd, D MMMM [năm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",
llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hôm nay lúc] LT",nextDay:"[Ngày mai lúc] LT",nextWeek:"dddd [tuần tới lúc] LT",lastDay:"[Hôm qua lúc] LT",lastWeek:"dddd [tuần rồi lúc] LT",sameElse:"L"},relativeTime:{future:"%s tới",past:"%s trước",s:"vài giây",m:"một phút",mm:"%d phút",h:"một giờ",hh:"%d giờ",d:"một ngày",dd:"%d ngày",M:"một tháng",MM:"%d tháng",y:"một năm",yy:"%d năm"},ordinalParse:/\d{1,2}/,ordinal:function(a){return a},week:{dow:1,doy:4}}),uf.defineLocale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah点mm分",LTS:"Ah点m分s秒",L:"YYYY-MM-DD",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日Ah点mm分",LLLL:"YYYY年MMMD日ddddAh点mm分",l:"YYYY-MM-DD",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日Ah点mm分",llll:"YYYY年MMMD日ddddAh点mm分"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(a,b){return 12===a&&(a=0),"凌晨"===b||"早上"===b||"上午"===b?a:"下午"===b||"晚上"===b?a+12:a>=11?a:a+12},meridiem:function(a,b,c){var d=100*a+b;return 600>d?"凌晨":900>d?"早上":1130>d?"上午":1230>d?"中午":1800>d?"下午":"晚上"},calendar:{sameDay:function(){return 0===this.minutes()?"[今天]Ah[点整]":"[今天]LT"},nextDay:function(){return 0===this.minutes()?"[明天]Ah[点整]":"[明天]LT"},lastDay:function(){return 0===this.minutes()?"[昨天]Ah[点整]":"[昨天]LT"},nextWeek:function(){var a,b;return a=uf().startOf("week"),b=this.unix()-a.unix()>=604800?"[下]":"[本]",0===this.minutes()?b+"dddAh点整":b+"dddAh点mm"},lastWeek:function(){var a,b;return a=uf().startOf("week"),b=this.unix()<a.unix()?"[上]":"[本]",0===this.minutes()?b+"dddAh点整":b+"dddAh点mm"},sameElse:"LL"},ordinalParse:/\d{1,2}(日|月|周)/,ordinal:function(a,b){switch(b){case"d":case"D":case"DDD":return a+"日";case"M":return a+"月";case"w":case"W":return a+"周";default:return a}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},week:{dow:1,doy:4}}),uf.defineLocale("zh-tw",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah點mm分",LTS:"Ah點m分s秒",L:"YYYY年MMMD日",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日Ah點mm分",LLLL:"YYYY年MMMD日ddddAh點mm分",l:"YYYY年MMMD日",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日Ah點mm分",llll:"YYYY年MMMD日ddddAh點mm分"},meridiemParse:/早上|上午|中午|下午|晚上/,meridiemHour:function(a,b){return 12===a&&(a=0),"早上"===b||"上午"===b?a:"中午"===b?a>=11?a:a+12:"下午"===b||"晚上"===b?a+12:void 0},meridiem:function(a,b,c){var d=100*a+b;return 900>d?"早上":1130>d?"上午":1230>d?"中午":1800>d?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},ordinalParse:/\d{1,2}(日|月|週)/,ordinal:function(a,b){switch(b){case"d":case"D":case"DDD":return a+"日";case"M":return a+"月";case"w":case"W":return a+"週";default:return a}},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",m:"一分鐘",mm:"%d分鐘",h:"一小時",hh:"%d小時",d:"一天",dd:"%d天",M:"一個月",MM:"%d個月",y:"一年",yy:"%d年"}}),uf);return mg.locale("en"),mg});
/*!
 * ui-select
 * http://github.com/angular-ui/ui-select
 * Version: 0.19.7 - 2017-04-15T14:28:36.649Z
 * License: MIT
 */
!function(){"use strict";function e(e){return angular.isUndefined(e)||null===e}var t={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,COMMAND:91,MAP:{91:"COMMAND",8:"BACKSPACE",9:"TAB",13:"ENTER",16:"SHIFT",17:"CTRL",18:"ALT",19:"PAUSEBREAK",20:"CAPSLOCK",27:"ESC",32:"SPACE",33:"PAGE_UP",34:"PAGE_DOWN",35:"END",36:"HOME",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",43:"+",44:"PRINTSCREEN",45:"INSERT",46:"DELETE",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NUMLOCK",145:"SCROLLLOCK",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},isControl:function(e){var s=e.which;switch(s){case t.COMMAND:case t.SHIFT:case t.CTRL:case t.ALT:return!0}return!!(e.metaKey||e.ctrlKey||e.altKey)},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&e<=123},isVerticalMovement:function(e){return~[t.UP,t.DOWN].indexOf(e)},isHorizontalMovement:function(e){return~[t.LEFT,t.RIGHT,t.BACKSPACE,t.DELETE].indexOf(e)},toSeparator:function(e){var s={ENTER:"\n",TAB:"\t",SPACE:" "}[e];return s?s:t[e]?void 0:e}};void 0===angular.element.prototype.querySelectorAll&&(angular.element.prototype.querySelectorAll=function(e){return angular.element(this[0].querySelectorAll(e))}),void 0===angular.element.prototype.closest&&(angular.element.prototype.closest=function(e){for(var t=this[0],s=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector;t;){if(s.bind(t)(e))return t;t=t.parentElement}return!1});var s=0,i=angular.module("ui.select",[]).constant("uiSelectConfig",{theme:"bootstrap",searchEnabled:!0,sortable:!1,placeholder:"",refreshDelay:1e3,closeOnSelect:!0,skipFocusser:!1,dropdownPosition:"auto",removeSelected:!0,resetSearchInput:!0,generateId:function(){return s++},appendToBody:!1,spinnerEnabled:!1,spinnerClass:"glyphicon glyphicon-refresh ui-select-spin",backspaceReset:!0}).service("uiSelectMinErr",function(){var e=angular.$$minErr("ui.select");return function(){var t=e.apply(this,arguments),s=t.message.replace(new RegExp("\nhttp://errors.angularjs.org/.*"),"");return new Error(s)}}).directive("uisTranscludeAppend",function(){return{link:function(e,t,s,i,c){c(e,function(e){t.append(e)})}}}).filter("highlight",function(){function e(e){return(""+e).replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(t,s){return s&&t?(""+t).replace(new RegExp(e(s),"gi"),'<span class="ui-select-highlight">$&</span>'):t}}).factory("uisOffset",["$document","$window",function(e,t){return function(s){var i=s[0].getBoundingClientRect();return{width:i.width||s.prop("offsetWidth"),height:i.height||s.prop("offsetHeight"),top:i.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:i.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}}}]);i.factory("$$uisDebounce",["$timeout",function(e){return function(t,s){var i;return function(){var c=this,n=Array.prototype.slice.call(arguments);i&&e.cancel(i),i=e(function(){t.apply(c,n)},s)}}}]),i.directive("uiSelectChoices",["uiSelectConfig","uisRepeatParser","uiSelectMinErr","$compile","$window",function(e,t,s,i,c){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(t){t.addClass("ui-select-choices");var s=t.parent().attr("theme")||e.theme;return s+"/choices.tpl.html"},compile:function(i,n){if(!n.repeat)throw s("repeat","Expected 'repeat' expression.");var l=n.groupBy,a=n.groupFilter;if(l){var r=i.querySelectorAll(".ui-select-choices-group");if(1!==r.length)throw s("rows","Expected 1 .ui-select-choices-group but got '{0}'.",r.length);r.attr("ng-repeat",t.getGroupNgRepeatExpression())}var o=t.parse(n.repeat),u=i.querySelectorAll(".ui-select-choices-row");if(1!==u.length)throw s("rows","Expected 1 .ui-select-choices-row but got '{0}'.",u.length);u.attr("ng-repeat",o.repeatExpression(l)).attr("ng-if","$select.open");var d=i.querySelectorAll(".ui-select-choices-row-inner");if(1!==d.length)throw s("rows","Expected 1 .ui-select-choices-row-inner but got '{0}'.",d.length);d.attr("uis-transclude-append","");var p=c.document.addEventListener?u:d;return p.attr("ng-click","$select.select("+o.itemName+",$select.skipFocusser,$event)"),function(t,s,c,n){n.parseRepeatAttr(c.repeat,l,a),n.disableChoiceExpression=c.uiDisableChoice,n.onHighlightCallback=c.onHighlight,n.minimumInputLength=parseInt(c.minimumInputLength)||0,n.dropdownPosition=c.position?c.position.toLowerCase():e.dropdownPosition,t.$watch("$select.search",function(e){e&&!n.open&&n.multiple&&n.activate(!1,!0),n.activeIndex=n.tagging.isActivated?-1:0,!c.minimumInputLength||n.search.length>=c.minimumInputLength?n.refresh(c.refresh):n.items=[]}),c.$observe("refreshDelay",function(){var s=t.$eval(c.refreshDelay);n.refreshDelay=void 0!==s?s:e.refreshDelay}),t.$watch("$select.open",function(e){e?(i.attr("role","listbox"),n.refresh(c.refresh)):s.removeAttr("role")})}}}}]),i.controller("uiSelectCtrl",["$scope","$element","$timeout","$filter","$$uisDebounce","uisRepeatParser","uiSelectMinErr","uiSelectConfig","$parse","$injector","$window",function(s,i,c,n,l,a,r,o,u,d,p){function h(e,t,s){if(e.findIndex)return e.findIndex(t,s);for(var i,c=Object(e),n=c.length>>>0,l=0;l<n;l++)if(i=c[l],t.call(s,i,l,c))return l;return-1}function g(){y.resetSearchInput&&(y.search=x,y.selected&&y.items.length&&!y.multiple&&(y.activeIndex=h(y.items,function(e){return angular.equals(this,e)},y.selected)))}function f(e,t){var s,i,c=[];for(s=0;s<t.length;s++)for(i=0;i<e.length;i++)e[i].name==[t[s]]&&c.push(e[i]);return c}function v(e,t){var s=I.indexOf(e);t&&s===-1&&I.push(e),!t&&s>-1&&I.splice(s,1)}function m(e){return I.indexOf(e)>-1}function $(e){function t(e,t){var s=i.indexOf(e);t&&s===-1&&i.push(e),!t&&s>-1&&i.splice(s,1)}function s(e){return i.indexOf(e)>-1}if(e){var i=[];y.isLocked=function(e,i){var c=!1,n=y.selected[i];return n&&(e?(c=!!e.$eval(y.lockChoiceExpression),t(n,c)):c=s(n)),c}}}function b(e){var s=!0;switch(e){case t.DOWN:if(!y.open&&y.multiple)y.activate(!1,!0);else if(y.activeIndex<y.items.length-1)for(var i=++y.activeIndex;m(y.items[i])&&i<y.items.length;)y.activeIndex=++i;break;case t.UP:var c=0===y.search.length&&y.tagging.isActivated?-1:0;if(!y.open&&y.multiple)y.activate(!1,!0);else if(y.activeIndex>c)for(var n=--y.activeIndex;m(y.items[n])&&n>c;)y.activeIndex=--n;break;case t.TAB:y.multiple&&!y.open||y.select(y.items[y.activeIndex],!0);break;case t.ENTER:y.open&&(y.tagging.isActivated||y.activeIndex>=0)?y.select(y.items[y.activeIndex],y.skipFocusser):y.activate(!1,!0);break;case t.ESC:y.close();break;default:s=!1}return s}function w(){var e=i.querySelectorAll(".ui-select-choices-content"),t=e.querySelectorAll(".ui-select-choices-row");if(t.length<1)throw r("choices","Expected multiple .ui-select-choices-row but got '{0}'.",t.length);if(!(y.activeIndex<0)){var s=t[y.activeIndex],c=s.offsetTop+s.clientHeight-e[0].scrollTop,n=e[0].offsetHeight;c>n?e[0].scrollTop+=c-n:c<s.clientHeight&&(y.isGrouped&&0===y.activeIndex?e[0].scrollTop=0:e[0].scrollTop-=s.clientHeight-c)}}var y=this,x="";if(y.placeholder=o.placeholder,y.searchEnabled=o.searchEnabled,y.sortable=o.sortable,y.refreshDelay=o.refreshDelay,y.paste=o.paste,y.resetSearchInput=o.resetSearchInput,y.refreshing=!1,y.spinnerEnabled=o.spinnerEnabled,y.spinnerClass=o.spinnerClass,y.removeSelected=o.removeSelected,y.closeOnSelect=!0,y.skipFocusser=!1,y.search=x,y.activeIndex=0,y.items=[],y.open=!1,y.focus=!1,y.disabled=!1,y.selected=void 0,y.dropdownPosition="auto",y.focusser=void 0,y.multiple=void 0,y.disableChoiceExpression=void 0,y.tagging={isActivated:!1,fct:void 0},y.taggingTokens={isActivated:!1,tokens:void 0},y.lockChoiceExpression=void 0,y.clickTriggeredSelect=!1,y.$filter=n,y.$element=i,y.$animate=function(){try{return d.get("$animate")}catch(e){return null}}(),y.searchInput=i.querySelectorAll("input.ui-select-search"),1!==y.searchInput.length)throw r("searchInput","Expected 1 input.ui-select-search but got '{0}'.",y.searchInput.length);y.isEmpty=function(){return e(y.selected)||""===y.selected||y.multiple&&0===y.selected.length},y.activate=function(e,t){if(y.disabled||y.open)y.open&&!y.searchEnabled&&y.close();else{t||g(),s.$broadcast("uis:activate"),y.open=!0,y.activeIndex=y.activeIndex>=y.items.length?0:y.activeIndex,y.activeIndex===-1&&y.taggingLabel!==!1&&(y.activeIndex=0);var n=i.querySelectorAll(".ui-select-choices-content"),l=i.querySelectorAll(".ui-select-search");if(y.$animate&&y.$animate.on&&y.$animate.enabled(n[0])){var a=function(t,s){"start"===s&&0===y.items.length?(y.$animate.off("removeClass",l[0],a),c(function(){y.focusSearchInput(e)})):"close"===s&&(y.$animate.off("enter",n[0],a),c(function(){y.focusSearchInput(e)}))};y.items.length>0?y.$animate.on("enter",n[0],a):y.$animate.on("removeClass",l[0],a)}else c(function(){y.focusSearchInput(e),!y.tagging.isActivated&&y.items.length>1&&w()})}},y.focusSearchInput=function(e){y.search=e||y.search,y.searchInput[0].focus()},y.findGroupByName=function(e){return y.groups&&y.groups.filter(function(t){return t.name===e})[0]},y.parseRepeatAttr=function(e,t,i){function c(e){var c=s.$eval(t);if(y.groups=[],angular.forEach(e,function(e){var t=angular.isFunction(c)?c(e):e[c],s=y.findGroupByName(t);s?s.items.push(e):y.groups.push({name:t,items:[e]})}),i){var n=s.$eval(i);angular.isFunction(n)?y.groups=n(y.groups):angular.isArray(n)&&(y.groups=f(y.groups,n))}y.items=[],y.groups.forEach(function(e){y.items=y.items.concat(e.items)})}function n(e){y.items=e||[]}y.setItemsFn=t?c:n,y.parserResult=a.parse(e),y.isGrouped=!!t,y.itemProperty=y.parserResult.itemName;var l=y.parserResult.source,o=function(){var e=l(s);s.$uisSource=Object.keys(e).map(function(t){var s={};return s[y.parserResult.keyName]=t,s.value=e[t],s})};y.parserResult.keyName&&(o(),y.parserResult.source=u("$uisSource"+y.parserResult.filters),s.$watch(l,function(e,t){e!==t&&o()},!0)),y.refreshItems=function(e){e=e||y.parserResult.source(s);var t=y.selected;if(y.isEmpty()||angular.isArray(t)&&!t.length||!y.multiple||!y.removeSelected)y.setItemsFn(e);else if(void 0!==e&&null!==e){var i=e.filter(function(e){return angular.isArray(t)?t.every(function(t){return!angular.equals(e,t)}):!angular.equals(e,t)});y.setItemsFn(i)}"auto"!==y.dropdownPosition&&"up"!==y.dropdownPosition||s.calculateDropdownPos(),s.$broadcast("uis:refresh")},s.$watchCollection(y.parserResult.source,function(e){if(void 0===e||null===e)y.items=[];else{if(!angular.isArray(e))throw r("items","Expected an array but got '{0}'.",e);y.refreshItems(e),angular.isDefined(y.ngModel.$modelValue)&&(y.ngModel.$modelValue=null)}})};var E;y.refresh=function(e){void 0!==e&&(E&&c.cancel(E),E=c(function(){if(s.$select.search.length>=s.$select.minimumInputLength){var t=s.$eval(e);t&&angular.isFunction(t.then)&&!y.refreshing&&(y.refreshing=!0,t["finally"](function(){y.refreshing=!1}))}},y.refreshDelay))},y.isActive=function(e){if(!y.open)return!1;var t=y.items.indexOf(e[y.itemProperty]),s=t==y.activeIndex;return!(!s||t<0)&&(s&&!angular.isUndefined(y.onHighlightCallback)&&e.$eval(y.onHighlightCallback),s)};var S=function(e){return y.selected&&angular.isArray(y.selected)&&y.selected.filter(function(t){return angular.equals(t,e)}).length>0},I=[];y.isDisabled=function(e){if(y.open){var t=e[y.itemProperty],s=y.items.indexOf(t),i=!1;if(s>=0&&(angular.isDefined(y.disableChoiceExpression)||y.multiple)){if(t.isTag)return!1;y.multiple&&(i=S(t)),!i&&angular.isDefined(y.disableChoiceExpression)&&(i=!!e.$eval(y.disableChoiceExpression)),v(t,i)}return i}},y.select=function(t,i,c){if(e(t)||!m(t)){if(!y.items&&!y.search&&!y.tagging.isActivated)return;if(!t||!m(t)){if(y.clickTriggeredSelect=!1,c&&("click"===c.type||"touchend"===c.type)&&t&&(y.clickTriggeredSelect=!0),y.tagging.isActivated&&y.clickTriggeredSelect===!1){if(y.taggingLabel===!1)if(y.activeIndex<0){if(void 0===t&&(t=void 0!==y.tagging.fct?y.tagging.fct(y.search):y.search),!t||angular.equals(y.items[0],t))return}else t=y.items[y.activeIndex];else if(0===y.activeIndex){if(void 0===t)return;if(void 0!==y.tagging.fct&&"string"==typeof t){if(t=y.tagging.fct(t),!t)return}else"string"==typeof t&&(t=t.replace(y.taggingLabel,"").trim())}if(S(t))return void y.close(i)}g(),s.$broadcast("uis:select",t),y.closeOnSelect&&y.close(i)}}},y.close=function(e){y.open&&(y.ngModel&&y.ngModel.$setTouched&&y.ngModel.$setTouched(),y.open=!1,g(),s.$broadcast("uis:close",e))},y.setFocus=function(){y.focus||y.focusInput[0].focus()},y.clear=function(e){y.select(null),e.stopPropagation(),c(function(){y.focusser[0].focus()},0,!1)},y.toggle=function(e){y.open?(y.close(),e.preventDefault(),e.stopPropagation()):y.activate()},y.isLocked=function(){return!1},s.$watch(function(){return angular.isDefined(y.lockChoiceExpression)&&""!==y.lockChoiceExpression},$);var C=null,k=!1;y.sizeSearchInput=function(){var e=y.searchInput[0],t=y.$element[0],i=function(){return t.clientWidth*!!e.offsetParent},n=function(t){if(0===t)return!1;var s=t-e.offsetLeft;return s<50&&(s=t),y.searchInput.css("width",s+"px"),!0};y.searchInput.css("width","10px"),c(function(){null!==C||n(i())||(C=s.$watch(function(){k||(k=!0,s.$$postDigest(function(){k=!1,n(i())&&(C(),C=null)}))},angular.noop))})},y.searchInput.on("keydown",function(e){var i=e.which;~[t.ENTER,t.ESC].indexOf(i)&&(e.preventDefault(),e.stopPropagation()),s.$apply(function(){var s=!1;if((y.items.length>0||y.tagging.isActivated)&&(b(i)||y.searchEnabled||(e.preventDefault(),e.stopPropagation()),y.taggingTokens.isActivated)){for(var n=0;n<y.taggingTokens.tokens.length;n++)y.taggingTokens.tokens[n]===t.MAP[e.keyCode]&&y.search.length>0&&(s=!0);s&&c(function(){y.searchInput.triggerHandler("tagged");var s=y.search.replace(t.MAP[e.keyCode],"").trim();y.tagging.fct&&(s=y.tagging.fct(s)),s&&y.select(s,!0)})}}),t.isVerticalMovement(i)&&y.items.length>0&&w(),i!==t.ENTER&&i!==t.ESC||(e.preventDefault(),e.stopPropagation())}),y.searchInput.on("paste",function(e){var s;if(s=window.clipboardData&&window.clipboardData.getData?window.clipboardData.getData("Text"):(e.originalEvent||e).clipboardData.getData("text/plain"),s=y.search+s,s&&s.length>0)if(y.taggingTokens.isActivated){for(var i=[],c=0;c<y.taggingTokens.tokens.length;c++){var n=t.toSeparator(y.taggingTokens.tokens[c])||y.taggingTokens.tokens[c];if(s.indexOf(n)>-1){i=s.split(n);break}}0===i.length&&(i=[s]);var l=y.search;angular.forEach(i,function(e){var t=y.tagging.fct?y.tagging.fct(e):e;t&&y.select(t,!0)}),y.search=l||x,e.preventDefault(),e.stopPropagation()}else y.paste&&(y.paste(s),y.search=x,e.preventDefault(),e.stopPropagation())}),y.searchInput.on("tagged",function(){c(function(){g()})});var A=l(function(){y.sizeSearchInput()},50);angular.element(p).bind("resize",A),s.$on("$destroy",function(){y.searchInput.off("keyup keydown tagged blur paste"),angular.element(p).off("resize",A)}),s.$watch("$select.activeIndex",function(e){e&&i.find("input").attr("aria-activedescendant","ui-select-choices-row-"+y.generatedId+"-"+e)}),s.$watch("$select.open",function(e){e||i.find("input").removeAttr("aria-activedescendant")})}]),i.directive("uiSelect",["$document","uiSelectConfig","uiSelectMinErr","uisOffset","$compile","$parse","$timeout",function(e,t,s,i,c,n,l){return{restrict:"EA",templateUrl:function(e,s){var i=s.theme||t.theme;return i+(angular.isDefined(s.multiple)?"/select-multiple.tpl.html":"/select.tpl.html")},replace:!0,transclude:!0,require:["uiSelect","^ngModel"],scope:!0,controller:"uiSelectCtrl",controllerAs:"$select",compile:function(c,a){var r=/{(.*)}\s*{(.*)}/.exec(a.ngClass);if(r){var o="{"+r[1]+", "+r[2]+"}";a.ngClass=o,c.attr("ng-class",o)}return angular.isDefined(a.multiple)?c.append("<ui-select-multiple/>").removeAttr("multiple"):c.append("<ui-select-single/>"),a.inputId&&(c.querySelectorAll("input.ui-select-search")[0].id=a.inputId),function(c,a,r,o,u){function d(e){if(g.open){var t=!1;if(t=window.jQuery?window.jQuery.contains(a[0],e.target):a[0].contains(e.target),!t&&!g.clickTriggeredSelect){var s;if(g.skipFocusser)s=!0;else{var i=["input","button","textarea","select"],n=angular.element(e.target).controller("uiSelect");s=n&&n!==g,s||(s=~i.indexOf(e.target.tagName.toLowerCase()))}g.close(s),c.$digest()}g.clickTriggeredSelect=!1}}function p(){var t=i(a);m=angular.element('<div class="ui-select-placeholder"></div>'),m[0].style.width=t.width+"px",m[0].style.height=t.height+"px",a.after(m),$=a[0].style.width,e.find("body").append(a),a[0].style.position="absolute",a[0].style.left=t.left+"px",a[0].style.top=t.top+"px",a[0].style.width=t.width+"px"}function h(){null!==m&&(m.replaceWith(a),m=null,a[0].style.position="",a[0].style.left="",a[0].style.top="",a[0].style.width=$,g.setFocus())}var g=o[0],f=o[1];g.generatedId=t.generateId(),g.baseTitle=r.title||"Select box",g.focusserTitle=g.baseTitle+" focus",g.focusserId="focusser-"+g.generatedId,g.closeOnSelect=function(){return angular.isDefined(r.closeOnSelect)?n(r.closeOnSelect)():t.closeOnSelect}(),c.$watch("skipFocusser",function(){var e=c.$eval(r.skipFocusser);g.skipFocusser=void 0!==e?e:t.skipFocusser}),g.onSelectCallback=n(r.onSelect),g.onRemoveCallback=n(r.onRemove),g.ngModel=f,g.choiceGrouped=function(e){return g.isGrouped&&e&&e.name},r.tabindex&&r.$observe("tabindex",function(e){g.focusInput.attr("tabindex",e),a.removeAttr("tabindex")}),c.$watch(function(){return c.$eval(r.searchEnabled)},function(e){g.searchEnabled=void 0!==e?e:t.searchEnabled}),c.$watch("sortable",function(){var e=c.$eval(r.sortable);g.sortable=void 0!==e?e:t.sortable}),r.$observe("backspaceReset",function(){var e=c.$eval(r.backspaceReset);g.backspaceReset=void 0===e||e}),r.$observe("limit",function(){g.limit=angular.isDefined(r.limit)?parseInt(r.limit,10):void 0}),c.$watch("removeSelected",function(){var e=c.$eval(r.removeSelected);g.removeSelected=void 0!==e?e:t.removeSelected}),r.$observe("disabled",function(){g.disabled=void 0!==r.disabled&&r.disabled}),r.$observe("resetSearchInput",function(){var e=c.$eval(r.resetSearchInput);g.resetSearchInput=void 0===e||e}),r.$observe("paste",function(){g.paste=c.$eval(r.paste)}),r.$observe("tagging",function(){if(void 0!==r.tagging){var e=c.$eval(r.tagging);g.tagging={isActivated:!0,fct:e!==!0?e:void 0}}else g.tagging={isActivated:!1,fct:void 0}}),r.$observe("taggingLabel",function(){void 0!==r.tagging&&("false"===r.taggingLabel?g.taggingLabel=!1:g.taggingLabel=void 0!==r.taggingLabel?r.taggingLabel:"(new)")}),r.$observe("taggingTokens",function(){if(void 0!==r.tagging){var e=void 0!==r.taggingTokens?r.taggingTokens.split("|"):[",","ENTER"];g.taggingTokens={isActivated:!0,tokens:e}}}),r.$observe("spinnerEnabled",function(){var e=c.$eval(r.spinnerEnabled);g.spinnerEnabled=void 0!==e?e:t.spinnerEnabled}),r.$observe("spinnerClass",function(){var e=r.spinnerClass;g.spinnerClass=void 0!==e?r.spinnerClass:t.spinnerClass}),angular.isDefined(r.autofocus)&&l(function(){g.setFocus()}),angular.isDefined(r.focusOn)&&c.$on(r.focusOn,function(){l(function(){g.setFocus()})}),e.on("click",d),c.$on("$destroy",function(){e.off("click",d)}),u(c,function(e){var t=angular.element("<div>").append(e),i=t.querySelectorAll(".ui-select-match");if(i.removeAttr("ui-select-match"),i.removeAttr("data-ui-select-match"),1!==i.length)throw s("transcluded","Expected 1 .ui-select-match but got '{0}'.",i.length);a.querySelectorAll(".ui-select-match").replaceWith(i);var c=t.querySelectorAll(".ui-select-choices");if(c.removeAttr("ui-select-choices"),c.removeAttr("data-ui-select-choices"),1!==c.length)throw s("transcluded","Expected 1 .ui-select-choices but got '{0}'.",c.length);a.querySelectorAll(".ui-select-choices").replaceWith(c);var n=t.querySelectorAll(".ui-select-no-choice");n.removeAttr("ui-select-no-choice"),n.removeAttr("data-ui-select-no-choice"),1==n.length&&a.querySelectorAll(".ui-select-no-choice").replaceWith(n)});var v=c.$eval(r.appendToBody);(void 0!==v?v:t.appendToBody)&&(c.$watch("$select.open",function(e){e?p():h()}),c.$on("$destroy",function(){h()}));var m=null,$="",b=null,w="direction-up";c.$watch("$select.open",function(){"auto"!==g.dropdownPosition&&"up"!==g.dropdownPosition||c.calculateDropdownPos()});var y=function(e,t){e=e||i(a),t=t||i(b),b[0].style.position="absolute",b[0].style.top=t.height*-1+"px",a.addClass(w)},x=function(e,t){a.removeClass(w),e=e||i(a),t=t||i(b),b[0].style.position="",b[0].style.top=""},E=function(){l(function(){if("up"===g.dropdownPosition)y();else{a.removeClass(w);var t=i(a),s=i(b),c=e[0].documentElement.scrollTop||e[0].body.scrollTop;t.top+t.height+s.height>c+e[0].documentElement.clientHeight?y(t,s):x(t,s)}b[0].style.opacity=1})},S=!1;c.calculateDropdownPos=function(){if(g.open){if(b=angular.element(a).querySelectorAll(".ui-select-dropdown"),0===b.length)return;if(""!==g.search||S||(b[0].style.opacity=0,S=!0),!i(b).height&&g.$animate&&g.$animate.on&&g.$animate.enabled(b)){var e=!0;g.$animate.on("enter",b,function(t,s){"close"===s&&e&&(E(),e=!1)})}else E()}else{if(null===b||0===b.length)return;b[0].style.opacity=0,b[0].style.position="",b[0].style.top="",a.removeClass(w)}}}}}}]),i.directive("uiSelectMatch",["uiSelectConfig",function(e){function t(e,t){return e[0].hasAttribute(t)?e.attr(t):e[0].hasAttribute("data-"+t)?e.attr("data-"+t):e[0].hasAttribute("x-"+t)?e.attr("x-"+t):void 0}return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(s){s.addClass("ui-select-match");var i=s.parent(),c=t(i,"theme")||e.theme,n=angular.isDefined(t(i,"multiple"));return c+(n?"/match-multiple.tpl.html":"/match.tpl.html")},link:function(t,s,i,c){function n(e){c.allowClear=!!angular.isDefined(e)&&(""===e||"true"===e.toLowerCase())}c.lockChoiceExpression=i.uiLockChoice,i.$observe("placeholder",function(t){c.placeholder=void 0!==t?t:e.placeholder}),i.$observe("allowClear",n),n(i.allowClear),c.multiple&&c.sizeSearchInput()}}}]),i.directive("uiSelectMultiple",["uiSelectMinErr","$timeout",function(s,i){return{restrict:"EA",require:["^uiSelect","^ngModel"],controller:["$scope","$timeout",function(e,t){var s,i=this,c=e.$select;angular.isUndefined(c.selected)&&(c.selected=[]),e.$evalAsync(function(){s=e.ngModel}),i.activeMatchIndex=-1,i.updateModel=function(){s.$setViewValue(Date.now()),i.refreshComponent()},i.refreshComponent=function(){c.refreshItems&&c.refreshItems(),c.sizeSearchInput&&c.sizeSearchInput()},i.removeChoice=function(s){if(c.isLocked(null,s))return!1;var n=c.selected[s],l={};return l[c.parserResult.itemName]=n,c.selected.splice(s,1),i.activeMatchIndex=-1,c.sizeSearchInput(),t(function(){c.onRemoveCallback(e,{$item:n,$model:c.parserResult.modelMapper(e,l)})}),i.updateModel(),!0},i.getPlaceholder=function(){if(!c.selected||!c.selected.length)return c.placeholder}}],controllerAs:"$selectMultiple",link:function(c,n,l,a){function r(e){return angular.isNumber(e.selectionStart)?e.selectionStart:e.value.length}function o(e){function s(){switch(e){case t.LEFT:return~g.activeMatchIndex?u:l;case t.RIGHT:return~g.activeMatchIndex&&a!==l?o:(p.activate(),!1);case t.BACKSPACE:return~g.activeMatchIndex?g.removeChoice(a)?u:a:l;case t.DELETE:return!!~g.activeMatchIndex&&(g.removeChoice(g.activeMatchIndex),a)}}var i=r(p.searchInput[0]),c=p.selected.length,n=0,l=c-1,a=g.activeMatchIndex,o=g.activeMatchIndex+1,u=g.activeMatchIndex-1,d=a;return!(i>0||p.search.length&&e==t.RIGHT)&&(p.close(),d=s(),p.selected.length&&d!==!1?g.activeMatchIndex=Math.min(l,Math.max(n,d)):g.activeMatchIndex=-1,!0)}function u(e){if(void 0===e||void 0===p.search)return!1;var t=e.filter(function(e){return void 0!==p.search.toUpperCase()&&void 0!==e&&e.toUpperCase()===p.search.toUpperCase()}).length>0;return t}function d(e,t){var s=-1;if(angular.isArray(e))for(var i=angular.copy(e),c=0;c<i.length;c++)if(void 0===p.tagging.fct)i[c]+" "+p.taggingLabel===t&&(s=c);else{var n=i[c];angular.isObject(n)&&(n.isTag=!0),angular.equals(n,t)&&(s=c)}return s}var p=a[0],h=c.ngModel=a[1],g=c.$selectMultiple;p.multiple=!0,p.focusInput=p.searchInput,h.$isEmpty=function(e){return!e||0===e.length},h.$parsers.unshift(function(){for(var e,t={},s=[],i=p.selected.length-1;i>=0;i--)t={},t[p.parserResult.itemName]=p.selected[i],e=p.parserResult.modelMapper(c,t),s.unshift(e);return s}),h.$formatters.unshift(function(e){var t,s=p.parserResult&&p.parserResult.source(c,{$select:{search:""}}),i={};if(!s)return e;var n=[],l=function(e,s){if(e&&e.length){for(var l=e.length-1;l>=0;l--){if(i[p.parserResult.itemName]=e[l],t=p.parserResult.modelMapper(c,i),p.parserResult.trackByExp){var a=/(\w*)\./.exec(p.parserResult.trackByExp),r=/\.([^\s]+)/.exec(p.parserResult.trackByExp);if(a&&a.length>0&&a[1]==p.parserResult.itemName&&r&&r.length>0&&t[r[1]]==s[r[1]])return n.unshift(e[l]),!0}if(angular.equals(t,s))return n.unshift(e[l]),!0}return!1}};if(!e)return n;for(var a=e.length-1;a>=0;a--)l(p.selected,e[a])||l(s,e[a])||n.unshift(e[a]);return n}),c.$watchCollection(function(){return h.$modelValue},function(e,t){t!=e&&(angular.isDefined(h.$modelValue)&&(h.$modelValue=null),g.refreshComponent())}),h.$render=function(){if(!angular.isArray(h.$viewValue)){if(!e(h.$viewValue))throw s("multiarr","Expected model value to be array but got '{0}'",h.$viewValue);h.$viewValue=[]}p.selected=h.$viewValue,g.refreshComponent(),c.$evalAsync()},c.$on("uis:select",function(e,t){if(!(p.selected.length>=p.limit)){p.selected.push(t);var s={};s[p.parserResult.itemName]=t,i(function(){p.onSelectCallback(c,{$item:t,$model:p.parserResult.modelMapper(c,s)})}),g.updateModel()}}),c.$on("uis:activate",function(){g.activeMatchIndex=-1}),c.$watch("$select.disabled",function(e,t){t&&!e&&p.sizeSearchInput()}),p.searchInput.on("keydown",function(e){var s=e.which;c.$apply(function(){var i=!1;t.isHorizontalMovement(s)&&(i=o(s)),i&&s!=t.TAB&&(e.preventDefault(),e.stopPropagation())})}),p.searchInput.on("keyup",function(e){if(t.isVerticalMovement(e.which)||c.$evalAsync(function(){p.activeIndex=p.taggingLabel===!1?-1:0}),p.tagging.isActivated&&p.search.length>0){if(e.which===t.TAB||t.isControl(e)||t.isFunctionKey(e)||e.which===t.ESC||t.isVerticalMovement(e.which))return;if(p.activeIndex=p.taggingLabel===!1?-1:0,p.taggingLabel===!1)return;var s,i,n,l,a=angular.copy(p.items),r=angular.copy(p.items),o=!1,h=-1;if(void 0!==p.tagging.fct){if(n=p.$filter("filter")(a,{isTag:!0}),n.length>0&&(l=n[0]),a.length>0&&l&&(o=!0,a=a.slice(1,a.length),r=r.slice(1,r.length)),s=p.tagging.fct(p.search),r.some(function(e){return angular.equals(e,s)})||p.selected.some(function(e){return angular.equals(e,s)}))return void c.$evalAsync(function(){p.activeIndex=0,p.items=a});s&&(s.isTag=!0)}else{if(n=p.$filter("filter")(a,function(e){return e.match(p.taggingLabel)}),n.length>0&&(l=n[0]),i=a[0],void 0!==i&&a.length>0&&l&&(o=!0,a=a.slice(1,a.length),r=r.slice(1,r.length)),s=p.search+" "+p.taggingLabel,d(p.selected,p.search)>-1)return;if(u(r.concat(p.selected)))return void(o&&(a=r,c.$evalAsync(function(){p.activeIndex=0,p.items=a})));if(u(r))return void(o&&(p.items=r.slice(1,r.length)))}o&&(h=d(p.selected,s)),h>-1?a=a.slice(h+1,a.length-1):(a=[],s&&a.push(s),a=a.concat(r)),c.$evalAsync(function(){if(p.activeIndex=0,p.items=a,p.isGrouped){var e=s?a.slice(1):a;p.setItemsFn(e),s&&(p.items.unshift(s),p.groups.unshift({name:"",items:[s],tagging:!0}))}})}}),p.searchInput.on("blur",function(){i(function(){g.activeMatchIndex=-1})})}}}]),i.directive("uiSelectNoChoice",["uiSelectConfig",function(e){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(t){t.addClass("ui-select-no-choice");var s=t.parent().attr("theme")||e.theme;return s+"/no-choice.tpl.html"}}}]),i.directive("uiSelectSingle",["$timeout","$compile",function(s,i){return{restrict:"EA",require:["^uiSelect","^ngModel"],link:function(c,n,l,a){var r=a[0],o=a[1];o.$parsers.unshift(function(t){if(e(t))return t;var s,i={};return i[r.parserResult.itemName]=t,s=r.parserResult.modelMapper(c,i)}),o.$formatters.unshift(function(t){if(e(t))return t;var s,i=r.parserResult&&r.parserResult.source(c,{$select:{search:""}}),n={};if(i){var l=function(e){return n[r.parserResult.itemName]=e,s=r.parserResult.modelMapper(c,n),s===t};if(r.selected&&l(r.selected))return r.selected;for(var a=i.length-1;a>=0;a--)if(l(i[a]))return i[a]}return t}),c.$watch("$select.selected",function(e){o.$viewValue!==e&&o.$setViewValue(e)}),o.$render=function(){r.selected=o.$viewValue},c.$on("uis:select",function(t,i){r.selected=i;var n={};n[r.parserResult.itemName]=i,s(function(){r.onSelectCallback(c,{$item:i,$model:e(i)?i:r.parserResult.modelMapper(c,n)})})}),c.$on("uis:close",function(e,t){s(function(){r.focusser.prop("disabled",!1),t||r.focusser[0].focus()},0,!1)}),c.$on("uis:activate",function(){u.prop("disabled",!0)});var u=angular.element("<input ng-disabled='$select.disabled' class='ui-select-focusser ui-select-offscreen' type='text' id='{{ $select.focusserId }}' aria-label='{{ $select.focusserTitle }}' aria-haspopup='true' role='button' />");i(u)(c),r.focusser=u,r.focusInput=u,n.parent().append(u),u.bind("focus",function(){c.$evalAsync(function(){r.focus=!0})}),u.bind("blur",function(){c.$evalAsync(function(){r.focus=!1})}),u.bind("keydown",function(e){return e.which===t.BACKSPACE&&r.backspaceReset!==!1?(e.preventDefault(),e.stopPropagation(),r.select(void 0),void c.$apply()):void(e.which===t.TAB||t.isControl(e)||t.isFunctionKey(e)||e.which===t.ESC||(e.which!=t.DOWN&&e.which!=t.UP&&e.which!=t.ENTER&&e.which!=t.SPACE||(e.preventDefault(),e.stopPropagation(),r.activate()),c.$digest()))}),u.bind("keyup input",function(e){e.which===t.TAB||t.isControl(e)||t.isFunctionKey(e)||e.which===t.ESC||e.which==t.ENTER||e.which===t.BACKSPACE||(r.activate(u.val()),u.val(""),c.$digest())})}}}]),i.directive("uiSelectSort",["$timeout","uiSelectConfig","uiSelectMinErr",function(e,t,s){return{require:["^^uiSelect","^ngModel"],link:function(t,i,c,n){if(null===t[c.uiSelectSort])throw s("sort","Expected a list to sort");var l=n[0],a=n[1],r=angular.extend({axis:"horizontal"},t.$eval(c.uiSelectSortOptions)),o=r.axis,u="dragging",d="dropping",p="dropping-before",h="dropping-after";t.$watch(function(){return l.sortable},function(e){e?i.attr("draggable",!0):i.removeAttr("draggable")}),i.on("dragstart",function(e){i.addClass(u),(e.dataTransfer||e.originalEvent.dataTransfer).setData("text",t.$index.toString())}),i.on("dragend",function(){v(u)});var g,f=function(e,t){this.splice(t,0,this.splice(e,1)[0])},v=function(e){angular.forEach(l.$element.querySelectorAll("."+e),function(t){angular.element(t).removeClass(e)})},m=function(e){e.preventDefault();var t="vertical"===o?e.offsetY||e.layerY||(e.originalEvent?e.originalEvent.offsetY:0):e.offsetX||e.layerX||(e.originalEvent?e.originalEvent.offsetX:0);t<this["vertical"===o?"offsetHeight":"offsetWidth"]/2?(v(h),i.addClass(p)):(v(p),i.addClass(h))},$=function(t){t.preventDefault();var s=parseInt((t.dataTransfer||t.originalEvent.dataTransfer).getData("text"),10);e.cancel(g),g=e(function(){b(s)},20)},b=function(e){var s=t.$eval(c.uiSelectSort),n=s[e],l=null;l=i.hasClass(p)?e<t.$index?t.$index-1:t.$index:e<t.$index?t.$index:t.$index+1,f.apply(s,[e,l]),a.$setViewValue(Date.now()),t.$apply(function(){t.$emit("uiSelectSort:change",{array:s,item:n,from:e,to:l})}),v(d),v(p),v(h),i.off("drop",$)};i.on("dragenter",function(){i.hasClass(u)||(i.addClass(d),i.on("dragover",m),i.on("drop",$))}),i.on("dragleave",function(e){e.target==i&&(v(d),v(p),v(h),i.off("dragover",m),i.off("drop",$))})}}}]),i.directive("uisOpenClose",["$parse","$timeout",function(e,t){return{restrict:"A",require:"uiSelect",link:function(s,i,c,n){n.onOpenCloseCallback=e(c.uisOpenClose),s.$watch("$select.open",function(e,i){e!==i&&t(function(){n.onOpenCloseCallback(s,{isOpen:e});
})})}}}]),i.service("uisRepeatParser",["uiSelectMinErr","$parse",function(e,t){var s=this;s.parse=function(s){var i;if(i=s.match(/^\s*(?:([\s\S]+?)\s+as\s+)?(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(\s*[\s\S]+?)?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),!i)throw e("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",s);var c=i[5],n="";if(i[3]){c=i[5].replace(/(^\()|(\)$)/g,"");var l=i[5].match(/^\s*(?:[\s\S]+?)(?:[^\|]|\|\|)+([\s\S]*)\s*$/);l&&l[1].trim()&&(n=l[1],c=c.replace(n,""))}return{itemName:i[4]||i[2],keyName:i[3],source:t(c),filters:n,trackByExp:i[6],modelMapper:t(i[1]||i[4]||i[2]),repeatExpression:function(e){var t=this.itemName+" in "+(e?"$group.items":"$select.items");return this.trackByExp&&(t+=" track by "+this.trackByExp),t}}},s.getGroupNgRepeatExpression=function(){return"$group in $select.groups track by $group.name"}}])}(),angular.module("ui.select").run(["$templateCache",function(e){e.put("bootstrap/choices.tpl.html",'<ul class="ui-select-choices ui-select-choices-content ui-select-dropdown dropdown-menu" ng-show="$select.open && $select.items.length > 0"><li class="ui-select-choices-group" id="ui-select-choices-{{ $select.generatedId }}"><div class="divider" ng-show="$select.isGrouped && $index > 0"></div><div ng-show="$select.isGrouped" class="ui-select-choices-group-label dropdown-header" ng-bind="$group.name"></div><div ng-attr-id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}" role="option"><span class="ui-select-choices-row-inner"></span></div></li></ul>'),e.put("bootstrap/match-multiple.tpl.html",'<span class="ui-select-match"><span ng-repeat="$item in $select.selected track by $index"><span class="ui-select-match-item btn btn-default btn-xs" tabindex="-1" type="button" ng-disabled="$select.disabled" ng-click="$selectMultiple.activeMatchIndex = $index;" ng-class="{\'btn-primary\':$selectMultiple.activeMatchIndex === $index, \'select-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span class="close ui-select-match-close" ng-hide="$select.disabled" ng-click="$selectMultiple.removeChoice($index)">&nbsp;&times;</span> <span uis-transclude-append=""></span></span></span></span>'),e.put("bootstrap/match.tpl.html",'<div class="ui-select-match" ng-hide="$select.open && $select.searchEnabled" ng-disabled="$select.disabled" ng-class="{\'btn-default-focus\':$select.focus}"><span tabindex="-1" class="btn btn-default form-control ui-select-toggle" aria-label="{{ $select.baseTitle }} activate" ng-disabled="$select.disabled" ng-click="$select.activate()" style="outline: 0;"><span ng-show="$select.isEmpty()" class="ui-select-placeholder text-muted">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="ui-select-match-text pull-left" ng-class="{\'ui-select-allow-clear\': $select.allowClear && !$select.isEmpty()}" ng-transclude=""></span> <i class="caret pull-right" ng-click="$select.toggle($event)"></i> <a ng-show="$select.allowClear && !$select.isEmpty() && ($select.disabled !== true)" aria-label="{{ $select.baseTitle }} clear" style="margin-right: 10px" ng-click="$select.clear($event)" class="btn btn-xs btn-link pull-right"><i class="glyphicon glyphicon-remove" aria-hidden="true"></i></a></span></div>'),e.put("bootstrap/no-choice.tpl.html",'<ul class="ui-select-no-choice dropdown-menu" ng-show="$select.items.length == 0"><li ng-transclude=""></li></ul>'),e.put("bootstrap/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple ui-select-bootstrap dropdown form-control" ng-class="{open: $select.open}"><div><div class="ui-select-match"></div><input type="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="ui-select-search input-xs" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-click="$select.activate()" ng-model="$select.search" role="combobox" aria-expanded="{{$select.open}}" aria-label="{{$select.baseTitle}}" ng-class="{\'spinner\': $select.refreshing}" ondrop="return false;"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>'),e.put("bootstrap/select.tpl.html",'<div class="ui-select-container ui-select-bootstrap dropdown" ng-class="{open: $select.open}"><div class="ui-select-match"></div><span ng-show="$select.open && $select.refreshing && $select.spinnerEnabled" class="ui-select-refreshing {{$select.spinnerClass}}"></span> <input type="search" autocomplete="off" tabindex="-1" aria-expanded="true" aria-label="{{ $select.baseTitle }}" aria-owns="ui-select-choices-{{ $select.generatedId }}" class="form-control ui-select-search" ng-class="{ \'ui-select-search-hidden\' : !$select.searchEnabled }" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-show="$select.open"><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>'),e.put("select2/choices.tpl.html",'<ul tabindex="-1" class="ui-select-choices ui-select-choices-content select2-results"><li class="ui-select-choices-group" ng-class="{\'select2-result-with-children\': $select.choiceGrouped($group) }"><div ng-show="$select.choiceGrouped($group)" class="ui-select-choices-group-label select2-result-label" ng-bind="$group.name"></div><ul id="ui-select-choices-{{ $select.generatedId }}" ng-class="{\'select2-result-sub\': $select.choiceGrouped($group), \'select2-result-single\': !$select.choiceGrouped($group) }"><li role="option" ng-attr-id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{\'select2-highlighted\': $select.isActive(this), \'select2-disabled\': $select.isDisabled(this)}"><div class="select2-result-label ui-select-choices-row-inner"></div></li></ul></li></ul>'),e.put("select2/match-multiple.tpl.html",'<span class="ui-select-match"><li class="ui-select-match-item select2-search-choice" ng-repeat="$item in $select.selected track by $index" ng-class="{\'select2-search-choice-focus\':$selectMultiple.activeMatchIndex === $index, \'select2-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span uis-transclude-append=""></span> <a href="javascript:;" class="ui-select-match-close select2-search-choice-close" ng-click="$selectMultiple.removeChoice($index)" tabindex="-1"></a></li></span>'),e.put("select2/match.tpl.html",'<a class="select2-choice ui-select-match" ng-class="{\'select2-default\': $select.isEmpty()}" ng-click="$select.toggle($event)" aria-label="{{ $select.baseTitle }} select"><span ng-show="$select.isEmpty()" class="select2-chosen">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="select2-chosen" ng-transclude=""></span> <abbr ng-if="$select.allowClear && !$select.isEmpty()" class="select2-search-choice-close" ng-click="$select.clear($event)"></abbr> <span class="select2-arrow ui-select-toggle"><b></b></span></a>'),e.put("select2/no-choice.tpl.html",'<div class="ui-select-no-choice dropdown" ng-show="$select.items.length == 0"><div class="dropdown-content"><div data-selectable="" ng-transclude=""></div></div></div>'),e.put("select2/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple select2 select2-container select2-container-multi" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled}"><ul class="select2-choices"><span class="ui-select-match"></span><li class="select2-search-field"><input type="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="select2-input ui-select-search" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-hide="$select.disabled" ng-model="$select.search" ng-click="$select.activate()" style="width: 34px;" ondrop="return false;"></li></ul><div class="ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open || $select.items.length === 0}"><div class="ui-select-choices"></div></div></div>'),e.put("select2/select.tpl.html",'<div class="ui-select-container select2 select2-container" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled, \'select2-container-active\': $select.focus, \'select2-allowclear\': $select.allowClear && !$select.isEmpty()}"><div class="ui-select-match"></div><div class="ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open}"><div class="search-container" ng-class="{\'ui-select-search-hidden\':!$select.searchEnabled, \'select2-search\':$select.searchEnabled}"><input type="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" ng-class="{\'select2-active\': $select.refreshing}" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" class="ui-select-search select2-input" ng-model="$select.search"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div></div>'),e.put("selectize/choices.tpl.html",'<div ng-show="$select.open" class="ui-select-choices ui-select-dropdown selectize-dropdown" ng-class="{\'single\': !$select.multiple, \'multi\': $select.multiple}"><div class="ui-select-choices-content selectize-dropdown-content"><div class="ui-select-choices-group optgroup"><div ng-show="$select.isGrouped" class="ui-select-choices-group-label optgroup-header" ng-bind="$group.name"></div><div role="option" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}"><div class="option ui-select-choices-row-inner" data-selectable=""></div></div></div></div></div>'),e.put("selectize/match-multiple.tpl.html",'<div class="ui-select-match" data-value="" ng-repeat="$item in $select.selected track by $index" ng-click="$selectMultiple.activeMatchIndex = $index;" ng-class="{\'active\':$selectMultiple.activeMatchIndex === $index}" ui-select-sort="$select.selected"><span class="ui-select-match-item" ng-class="{\'select-locked\':$select.isLocked(this, $index)}"><span uis-transclude-append=""></span> <span class="remove ui-select-match-close" ng-hide="$select.disabled" ng-click="$selectMultiple.removeChoice($index)">&times;</span></span></div>'),e.put("selectize/match.tpl.html",'<div ng-hide="$select.searchEnabled && ($select.open || $select.isEmpty())" class="ui-select-match"><span ng-show="!$select.searchEnabled && ($select.isEmpty() || $select.open)" class="ui-select-placeholder text-muted">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty() || $select.open" ng-transclude=""></span></div>'),e.put("selectize/no-choice.tpl.html",'<div class="ui-select-no-choice selectize-dropdown" ng-show="$select.items.length == 0"><div class="selectize-dropdown-content"><div data-selectable="" ng-transclude=""></div></div></div>'),e.put("selectize/select-multiple.tpl.html",'<div class="ui-select-container selectize-control multi plugin-remove_button" ng-class="{\'open\': $select.open}"><div class="selectize-input" ng-class="{\'focus\': $select.open, \'disabled\': $select.disabled, \'selectize-focus\' : $select.focus}" ng-click="$select.open && !$select.searchEnabled ? $select.toggle($event) : $select.activate()"><div class="ui-select-match"></div><input type="search" autocomplete="off" tabindex="-1" class="ui-select-search" ng-class="{\'ui-select-search-hidden\':!$select.searchEnabled}" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-model="$select.search" ng-disabled="$select.disabled" aria-expanded="{{$select.open}}" aria-label="{{ $select.baseTitle }}" ondrop="return false;"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>'),e.put("selectize/select.tpl.html",'<div class="ui-select-container selectize-control single" ng-class="{\'open\': $select.open}"><div class="selectize-input" ng-class="{\'focus\': $select.open, \'disabled\': $select.disabled, \'selectize-focus\' : $select.focus}" ng-click="$select.open && !$select.searchEnabled ? $select.toggle($event) : $select.activate()"><div class="ui-select-match"></div><input type="search" autocomplete="off" tabindex="-1" class="ui-select-search ui-select-toggle" ng-class="{\'ui-select-search-hidden\':!$select.searchEnabled}" ng-click="$select.toggle($event)" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-hide="!$select.isEmpty() && !$select.open" ng-disabled="$select.disabled" aria-label="{{ $select.baseTitle }}"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>')}]);


/**
 * Satellizer 0.14.0
 * (c) 2016 Sahat Yalkabov
 * License: MIT
 */
"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="satellizer"),function(e,t,r){"use strict";e.location.origin||(e.location.origin=e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:"")),t.module("satellizer",[]).constant("SatellizerConfig",{httpInterceptor:function(){return!0},withCredentials:!1,tokenRoot:null,baseUrl:"/",loginUrl:"/auth/login",signupUrl:"/auth/signup",unlinkUrl:"/auth/unlink/",tokenName:"token",tokenPrefix:"satellizer",authHeader:"Authorization",authToken:"Bearer",storageType:"localStorage",providers:{facebook:{name:"facebook",url:"/auth/facebook",authorizationEndpoint:"https://www.facebook.com/v2.5/dialog/oauth",redirectUri:e.location.origin+"/",requiredUrlParams:["display","scope"],scope:["email"],scopeDelimiter:",",display:"popup",oauthType:"2.0",popupOptions:{width:580,height:400}},google:{name:"google",url:"/auth/google",authorizationEndpoint:"https://accounts.google.com/o/oauth2/auth",redirectUri:e.location.origin,requiredUrlParams:["scope"],optionalUrlParams:["display"],scope:["profile","email"],scopePrefix:"openid",scopeDelimiter:" ",display:"popup",oauthType:"2.0",popupOptions:{width:452,height:633}},github:{name:"github",url:"/auth/github",authorizationEndpoint:"https://github.com/login/oauth/authorize",redirectUri:e.location.origin,optionalUrlParams:["scope"],scope:["user:email"],scopeDelimiter:" ",oauthType:"2.0",popupOptions:{width:1020,height:618}},instagram:{name:"instagram",url:"/auth/instagram",authorizationEndpoint:"https://api.instagram.com/oauth/authorize",redirectUri:e.location.origin,requiredUrlParams:["scope"],scope:["basic"],scopeDelimiter:"+",oauthType:"2.0"},linkedin:{name:"linkedin",url:"/auth/linkedin",authorizationEndpoint:"https://www.linkedin.com/uas/oauth2/authorization",redirectUri:e.location.origin,requiredUrlParams:["state"],scope:["r_emailaddress"],scopeDelimiter:" ",state:"STATE",oauthType:"2.0",popupOptions:{width:527,height:582}},twitter:{name:"twitter",url:"/auth/twitter",authorizationEndpoint:"https://api.twitter.com/oauth/authenticate",redirectUri:e.location.origin,oauthType:"1.0",popupOptions:{width:495,height:645}},twitch:{name:"twitch",url:"/auth/twitch",authorizationEndpoint:"https://api.twitch.tv/kraken/oauth2/authorize",redirectUri:e.location.origin,requiredUrlParams:["scope"],scope:["user_read"],scopeDelimiter:" ",display:"popup",oauthType:"2.0",popupOptions:{width:500,height:560}},live:{name:"live",url:"/auth/live",authorizationEndpoint:"https://login.live.com/oauth20_authorize.srf",redirectUri:e.location.origin,requiredUrlParams:["display","scope"],scope:["wl.emails"],scopeDelimiter:" ",display:"popup",oauthType:"2.0",popupOptions:{width:500,height:560}},yahoo:{name:"yahoo",url:"/auth/yahoo",authorizationEndpoint:"https://api.login.yahoo.com/oauth2/request_auth",redirectUri:e.location.origin,scope:[],scopeDelimiter:",",oauthType:"2.0",popupOptions:{width:559,height:519}},bitbucket:{name:"bitbucket",url:"/auth/bitbucket",authorizationEndpoint:"https://bitbucket.org/site/oauth2/authorize",redirectUri:e.location.origin+"/",requiredUrlParams:["scope"],scope:["email"],scopeDelimiter:" ",oauthType:"2.0",popupOptions:{width:1028,height:529}}}}).provider("$auth",["SatellizerConfig",function(e){Object.defineProperties(this,{httpInterceptor:{get:function(){return e.httpInterceptor},set:function(t){"function"==typeof t?e.httpInterceptor=t:e.httpInterceptor=function(){return t}}},baseUrl:{get:function(){return e.baseUrl},set:function(t){e.baseUrl=t}},loginUrl:{get:function(){return e.loginUrl},set:function(t){e.loginUrl=t}},signupUrl:{get:function(){return e.signupUrl},set:function(t){e.signupUrl=t}},tokenRoot:{get:function(){return e.tokenRoot},set:function(t){e.tokenRoot=t}},tokenName:{get:function(){return e.tokenName},set:function(t){e.tokenName=t}},tokenPrefix:{get:function(){return e.tokenPrefix},set:function(t){e.tokenPrefix=t}},unlinkUrl:{get:function(){return e.unlinkUrl},set:function(t){e.unlinkUrl=t}},authHeader:{get:function(){return e.authHeader},set:function(t){e.authHeader=t}},authToken:{get:function(){return e.authToken},set:function(t){e.authToken=t}},withCredentials:{get:function(){return e.withCredentials},set:function(t){e.withCredentials=t}},storageType:{get:function(){return e.storageType},set:function(t){e.storageType=t}}}),t.forEach(Object.keys(e.providers),function(r){this[r]=function(n){return t.extend(e.providers[r],n)}},this);var r=function(r){e.providers[r.name]=e.providers[r.name]||{},t.extend(e.providers[r.name],r)};this.oauth1=function(t){r(t),e.providers[t.name].oauthType="1.0"},this.oauth2=function(t){r(t),e.providers[t.name].oauthType="2.0"},this.$get=["$q","SatellizerShared","SatellizerLocal","SatellizerOauth",function(e,t,r,n){var o={};return o.login=function(e,t){return r.login(e,t)},o.signup=function(e,t){return r.signup(e,t)},o.logout=function(){return t.logout()},o.authenticate=function(e,t){return n.authenticate(e,t)},o.link=function(e,t){return n.authenticate(e,t)},o.unlink=function(e,t){return n.unlink(e,t)},o.isAuthenticated=function(){return t.isAuthenticated()},o.getToken=function(){return t.getToken()},o.setToken=function(e){t.setToken({access_token:e})},o.removeToken=function(){return t.removeToken()},o.getPayload=function(){return t.getPayload()},o.setStorageType=function(e){return t.setStorageType(e)},o}]}]).factory("SatellizerShared",["$q","$window","$log","SatellizerConfig","SatellizerStorage",function(n,o,i,a,u){var l={},p=a.tokenPrefix?[a.tokenPrefix,a.tokenName].join("_"):a.tokenName;return l.getToken=function(){return u.get(p)},l.getPayload=function(){var t=u.get(p);if(t&&3===t.split(".").length)try{var n=t.split(".")[1],o=n.replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(decodeURIComponent(escape(e.atob(o))))}catch(i){return r}},l.setToken=function(e){if(!e)return i.warn("Can't set token without passing a value");var r,n=e&&e.access_token;if(n&&(t.isObject(n)&&t.isObject(n.data)?e=n:t.isString(n)&&(r=n)),!r&&e){var o=a.tokenRoot&&a.tokenRoot.split(".").reduce(function(e,t){return e[t]},e.data);r=o?o[a.tokenName]:e.data&&e.data[a.tokenName]}if(!r){var l=a.tokenRoot?a.tokenRoot+"."+a.tokenName:a.tokenName;return i.warn('Expecting a token named "'+l)}u.set(p,r)},l.removeToken=function(){u.remove(p)},l.isAuthenticated=function(){var e=u.get(p);if(e){if(3===e.split(".").length)try{var t=e.split(".")[1],r=t.replace(/-/g,"+").replace(/_/g,"/"),n=JSON.parse(o.atob(r)).exp;if(n){var i=Math.round((new Date).getTime()/1e3)>=n;return i?!1:!0}}catch(a){return!0}return!0}return!1},l.logout=function(){return u.remove(p),n.when()},l.setStorageType=function(e){a.storageType=e},l}]).factory("SatellizerOauth",["$q","$http","SatellizerConfig","SatellizerUtils","SatellizerShared","SatellizerOauth1","SatellizerOauth2",function(e,t,r,n,o,i,a){var u={};return u.authenticate=function(t,n){var u="1.0"===r.providers[t].oauthType?new i:new a,l=e.defer();return u.open(r.providers[t],n||{}).then(function(e){r.providers[t].url&&o.setToken(e,!1),l.resolve(e)})["catch"](function(e){l.reject(e)}),l.promise},u.unlink=function(e,o){return o=o||{},o.url=o.url?o.url:n.joinUrl(r.baseUrl,r.unlinkUrl),o.data={provider:e}||o.data,o.method=o.method||"POST",o.withCredentials=o.withCredentials||r.withCredentials,t(o)},u}]).factory("SatellizerLocal",["$http","SatellizerUtils","SatellizerShared","SatellizerConfig",function(e,t,r,n){var o={};return o.login=function(o,i){return i=i||{},i.url=i.url?i.url:t.joinUrl(n.baseUrl,n.loginUrl),i.data=o||i.data,i.method=i.method||"POST",i.withCredentials=i.withCredentials||n.withCredentials,e(i).then(function(e){return r.setToken(e),e})},o.signup=function(r,o){return o=o||{},o.url=o.url?o.url:t.joinUrl(n.baseUrl,n.signupUrl),o.data=r||o.data,o.method=o.method||"POST",o.withCredentials=o.withCredentials||n.withCredentials,e(o)},o}]).factory("SatellizerOauth2",["$q","$http","$window","$timeout","SatellizerPopup","SatellizerUtils","SatellizerConfig","SatellizerStorage",function(r,n,o,i,a,u,l,p){return function(){var o={},c={defaultUrlParams:["response_type","client_id","redirect_uri"],responseType:"code",responseParams:{code:"code",clientId:"clientId",redirectUri:"redirectUri"}};return o.open=function(n,l){c=u.merge(n,c);var s=r.defer();return i(function(){var r,n,i=c.name+"_state";return t.isFunction(c.state)?p.set(i,c.state()):t.isString(c.state)&&p.set(i,c.state),r=[c.authorizationEndpoint,o.buildQueryString()].join("?"),n=e.cordova?a.open(r,c.name,c.popupOptions,c.redirectUri).eventListener(c.redirectUri):a.open(r,c.name,c.popupOptions,c.redirectUri).pollPopup(c.redirectUri),n.then(function(e){return"token"!==c.responseType&&c.url||s.resolve(e),e.state&&e.state!==p.get(i)?s.reject("The value returned in the state parameter does not match the state value from your original authorization code request."):void s.resolve(o.exchangeForToken(e,l))})}),s.promise},o.exchangeForToken=function(e,r){var o=t.extend({},r);t.forEach(c.responseParams,function(t,r){switch(r){case"code":o[t]=e.code;break;case"clientId":o[t]=c.clientId;break;case"redirectUri":o[t]=c.redirectUri;break;default:o[t]=e[r]}}),e.state&&(o.state=e.state);var i=l.baseUrl?u.joinUrl(l.baseUrl,c.url):c.url;return n.post(i,o,{withCredentials:l.withCredentials})},o.buildQueryString=function(){var e=[],r=["defaultUrlParams","requiredUrlParams","optionalUrlParams"];return t.forEach(r,function(r){t.forEach(c[r],function(r){var n=u.camelCase(r),o=t.isFunction(c[r])?c[r]():c[n];if("redirect_uri"!==r||o){if("state"===r){var i=c.name+"_state";o=encodeURIComponent(p.get(i))}"scope"===r&&Array.isArray(o)&&(o=o.join(c.scopeDelimiter),c.scopePrefix&&(o=[c.scopePrefix,o].join(c.scopeDelimiter))),e.push([r,o])}})}),e.map(function(e){return e.join("=")}).join("&")},o}}]).factory("SatellizerOauth1",["$q","$http","SatellizerPopup","SatellizerConfig","SatellizerUtils",function(r,n,o,i,a){return function(){var r={},u={url:null,name:null,popupOptions:null,redirectUri:null,authorizationEndpoint:null};return r.open=function(l,p){t.extend(u,l);var c,s=i.baseUrl?a.joinUrl(i.baseUrl,u.url):u.url;return e.cordova||(c=o.open("",u.name,u.popupOptions,u.redirectUri)),n.post(s,u).then(function(t){var n=[u.authorizationEndpoint,r.buildQueryString(t.data)].join("?");e.cordova?c=o.open(n,u.name,u.popupOptions,u.redirectUri):c.popupWindow.location=n;var i;return i=e.cordova?c.eventListener(u.redirectUri):c.pollPopup(u.redirectUri),i.then(function(e){return r.exchangeForToken(e,p)})})},r.exchangeForToken=function(e,r){var o=t.extend({},r,e),l=i.baseUrl?a.joinUrl(i.baseUrl,u.url):u.url;return n.post(l,o,{withCredentials:i.withCredentials})},r.buildQueryString=function(e){var r=[];return t.forEach(e,function(e,t){r.push(encodeURIComponent(t)+"="+encodeURIComponent(e))}),r.join("&")},r}}]).factory("SatellizerPopup",["$q","$interval","$window","SatellizerConfig","SatellizerUtils",function(n,o,i,a,u){var l={};return l.url="",l.popupWindow=null,l.open=function(t,r,n){l.url=t;var o=l.stringifyOptions(l.prepareOptions(n)),a=i.navigator.userAgent,u=e.cordova||a.indexOf("CriOS")>-1?"_blank":r;return l.popupWindow=i.open(t,u,o),i.popup=l.popupWindow,l.popupWindow&&l.popupWindow.focus&&l.popupWindow.focus(),l},l.eventListener=function(e){var r=n.defer();return l.popupWindow.addEventListener("loadstart",function(n){if(0===n.url.indexOf(e)){var o=document.createElement("a");if(o.href=n.url,o.search||o.hash){var i=o.search.substring(1).replace(/\/$/,""),a=o.hash.substring(1).replace(/\/$/,""),p=u.parseQueryString(a),c=u.parseQueryString(i);t.extend(c,p),c.error||r.resolve(c),l.popupWindow.close()}}}),l.popupWindow.addEventListener("loaderror",function(){r.reject("Authorization Failed")}),r.promise},l.pollPopup=function(e){var i=n.defer(),a=document.createElement("a");a.href=e;var p=u.getFullUrlPath(a),c=o(function(){(!l.popupWindow||l.popupWindow.closed||l.popupWindow.closed===r)&&(i.reject("The popup window was closed."),o.cancel(c));try{var e=u.getFullUrlPath(l.popupWindow.location);if(e===p){if(l.popupWindow.location.search||l.popupWindow.location.hash){var n=l.popupWindow.location.search.substring(1).replace(/\/$/,""),a=l.popupWindow.location.hash.substring(1).replace(/[\/$]/,""),s=u.parseQueryString(a),h=u.parseQueryString(n);t.extend(h,s),h.error?i.reject(h):i.resolve(h)}else i.reject("Redirect has occurred but no query or hash parameters were found. They were either not set during the redirect, or were removed before Satellizer could read them, e.g. AngularJS routing mechanism.");o.cancel(c),l.popupWindow.close()}}catch(d){}},20);return i.promise},l.prepareOptions=function(e){e=e||{};var r=e.width||500,n=e.height||500;return t.extend({width:r,height:n,left:i.screenX+(i.outerWidth-r)/2,top:i.screenY+(i.outerHeight-n)/2.5},e)},l.stringifyOptions=function(e){var r=[];return t.forEach(e,function(e,t){r.push(t+"="+e)}),r.join(",")},l}]).service("SatellizerUtils",function(){this.getFullUrlPath=function(e){return e.protocol+"//"+e.hostname+(e.port?":"+e.port:"")+e.pathname},this.camelCase=function(e){return e.replace(/([\:\-\_]+(.))/g,function(e,t,r,n){return n?r.toUpperCase():r})},this.parseQueryString=function(e){var r,n,o={};return t.forEach((e||"").split("&"),function(e){e&&(n=e.split("="),r=decodeURIComponent(n[0]),o[r]=t.isDefined(n[1])?decodeURIComponent(n[1]):!0)}),o},this.joinUrl=function(e,t){if(/^(?:[a-z]+:)?\/\//i.test(t))return t;var r=[e,t].join("/"),n=function(e){return e.replace(/[\/]+/g,"/").replace(/\/\?/g,"?").replace(/\/\#/g,"#").replace(/\:\//g,"://")};return n(r)},this.merge=function(e,t){var r={};for(var n in e)e.hasOwnProperty(n)&&(n in t&&"object"==typeof e[n]&&null!==n?r[n]=this.merge(e[n],t[n]):r[n]=e[n]);for(n in t)if(t.hasOwnProperty(n)){if(n in r)continue;r[n]=t[n]}return r}}).factory("SatellizerStorage",["$window","$log","SatellizerConfig",function(e,t,r){var n={},o=function(){try{var t=r.storageType in e&&null!==e[r.storageType];if(t){var n=Math.random().toString(36).substring(7);e[r.storageType].setItem(n,""),e[r.storageType].removeItem(n)}return t}catch(o){return!1}}();return o||t.warn(r.storageType+" is not available."),{get:function(t){return o?e[r.storageType].getItem(t):n[t]},set:function(t,i){return o?e[r.storageType].setItem(t,i):n[t]=i},remove:function(t){return o?e[r.storageType].removeItem(t):delete n[t]}}}]).factory("SatellizerInterceptor",["$q","SatellizerConfig","SatellizerStorage","SatellizerShared",function(e,t,r,n){return{request:function(e){if(e.skipAuthorization)return e;if(n.isAuthenticated()&&t.httpInterceptor(e)){var o=t.tokenPrefix?t.tokenPrefix+"_"+t.tokenName:t.tokenName,i=r.get(o);t.authHeader&&t.authToken&&(i=t.authToken+" "+i),e.headers[t.authHeader]=i}return e},responseError:function(t){return e.reject(t)}}}]).config(["$httpProvider",function(e){e.interceptors.push("SatellizerInterceptor")}])}(window,window.angular);
function template(a,b,c){"use strict";return a.replace(/\{([^\}]+)\}/g,function(a,d){return d in b?c?c(b[d]):b[d]:a})}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var app=angular.module("ngSocial",[]);app.directive("ngSocialButtons",["$compile","$q","$parse","$http","$location",function(a,b,c,d,e){"use strict";return{restrict:"A",scope:{url:"=",title:"=",description:"=",image:"=",showcounts:"="},replace:!0,transclude:!0,template:'<div class="ng-social-container ng-cloak"><ul class="ng-social" ng-transclude></ul></div>',controller:["$scope","$q","$http",function(a,b,c){var d=function(){return a.url||e.absUrl()},f=this;return this.init=function(a,b,c){c.counter&&f.getCount(a.options).then(function(b){a.count=b})},this.link=function(b){b=b||{};var c=b.urlOptions||{};return c.url=d(),c.title||(c.title=a.title),c.image||(c.image=a.image),c.description||(c.description=a.description||""),f.makeUrl(b.clickUrl||b.popup.url,c)},this.clickShare=function(b,c){if(!b.shiftKey&&!b.ctrlKey){b.preventDefault(),c.track&&"undefined"!=typeof _gaq&&angular.isArray(_gaq)&&_gaq.push(["_trackSocial",c.track.name,c.track.action,a.url]);var d=!0;if(angular.isFunction(c.click)&&(d=c.click.call(this,c)),d){var e=f.link(c);f.openPopup(e,c.popup)}}},this.openPopup=function(a,b){var c=Math.round(screen.width/2-b.width/2),d=0;screen.height>b.height&&(d=Math.round(screen.height/3-b.height/2));var e=window.open(a,"sl_"+this.service,"left="+c+",top="+d+",width="+b.width+",height="+b.height+",personalbar=0,toolbar=0,scrollbars=1,resizable=1");e?e.focus():location.href=a},this.getCount=function(e){var g=b.defer(),h=e.urlOptions||{};h.url=d(),h.title||(h.title=a.title);var i=f.makeUrl(e.counter.url,h);return(!!angular.isUndefined(a.showcounts)||a.showcounts)&&(e.counter.get?e.counter.get(i,g,c):c.jsonp(i).success(function(a){g.resolve(e.counter.getNumber?e.counter.getNumber(a):a)})),g.promise},this.makeUrl=function(a,b){return template(a,b,encodeURIComponent)},this}]}}]),app.directive("ngSocialFacebook",["$parse",function(a){"use strict";var b={counter:{url:"//graph.facebook.com/fql?q=SELECT+total_count+FROM+link_stat+WHERE+url%3D%22{url}%22&callback=JSON_CALLBACK",getNumber:function(a){return 0===a.data.length?0:a.data[0].total_count}},popup:{url:"http://www.facebook.com/sharer/sharer.php?u={url}",width:600,height:500},track:{name:"facebook",action:"send"}};return{restrict:"C",require:"^?ngSocialButtons",scope:!0,replace:!0,transclude:!0,template:'<li><a ng-href="{{ctrl.link(options)}}" target="_blank" ng-click="ctrl.clickShare($event, options)" class="ng-social-button"><span class="ng-social-icon"></span><span class="ng-social-text" ng-transclude></span></a><span ng-show="count" class="ng-social-counter">{{ count }}</span></li>',link:function(c,d,e,f){d.addClass("ng-social-facebook"),f&&(b.urlOptions={url:a(e.url)(c)},c.options=b,c.ctrl=f,f.init(c,d,b))}}}]),app.directive("ngSocialTwitter",["$parse",function(a){"use strict";var b={counter:{url:"//urls.api.twitter.com/1/urls/count.json?url={url}&callback=JSON_CALLBACK",getNumber:function(a){return a.count}},popup:{url:"http://twitter.com/intent/tweet?url={url}&text={title}",width:600,height:450},click:function(a){return/[\.:\-–—]\s*$/.test(a.pageTitle)||(a.pageTitle+=":"),!0},track:{name:"twitter",action:"tweet"}};return{restrict:"C",require:"^?ngSocialButtons",scope:!0,replace:!0,transclude:!0,template:'<li> \r\n                    <a ng-href="{{ctrl.link(options)}}" target="_blank" ng-click="ctrl.clickShare($event, options)" class="ng-social-button"> \r\n                        <span class="ng-social-icon"></span> \r\n                        <span class="ng-social-text" ng-transclude></span> \r\n                    </a> \r\n                    <span ng-show="count" class="ng-social-counter">{{ count }}</span> \r\n                   </li>',link:function(c,d,e,f){d.addClass("ng-social-twitter"),f&&(b.urlOptions={url:a(e.url)(c),title:a(e.title)(c)},c.options=b,c.ctrl=f,f.init(c,d,b))}}}]),app.directive("ngSocialGooglePlus",["$parse",function(a){"use strict";var b={counter:{url:"//share.yandex.ru/gpp.xml?url={url}",getNumber:function(a){return a.count},get:function(a,c,d){return b._?void c.reject():(window.services||(window.services={}),window.services.gplus={cb:function(a){b._.resolve(a)}},b._=c,void d.jsonp(a))}},popup:{url:"https://plus.google.com/share?url={url}",width:700,height:500},track:{name:"Google+",action:"share"}};return{restrict:"C",require:"^?ngSocialButtons",scope:!0,replace:!0,transclude:!0,template:'<li> \r\n                    <a ng-href="{{ctrl.link(options)}}" target="_blank" ng-click="ctrl.clickShare($event, options)" class="ng-social-button"> \r\n                        <span class="ng-social-icon"></span> \r\n                        <span class="ng-social-text" ng-transclude></span> \r\n                    </a> \r\n                    <span ng-show="count" class="ng-social-counter">{{ count }}</span> \r\n                   </li>',link:function(c,d,e,f){d.addClass("ng-social-google-plus"),f&&(b.urlOptions={url:a(e.url)(c)},c.options=b,c.ctrl=f,f.init(c,d,b))}}}]),app.directive("ngSocialVk",["$parse",function(a){"use strict";var b={counter:{url:"//vkontakte.ru/share.php?act=count&url={url}&index={index}",get:function(a,c,d){b._||(b._=[],window.VK||(window.VK={}),window.VK.Share={count:function(a,c){b._[a].resolve(c)}});var e=b._.length;b._.push(c),d.jsonp(a.replace("{index}",e))}},popup:{url:"http://vk.com/share.php?url={url}&title={title}&description={description}&image={image}",width:550,height:330},track:{name:"VKontakte",action:"share"}};return{restrict:"C",require:"^?ngSocialButtons",scope:!0,replace:!0,transclude:!0,template:'<li> \r\n                    <a ng-href="{{ctrl.link(options)}}" target="_blank" ng-click="ctrl.clickShare($event, options)" class="ng-social-button"> \r\n                        <span class="ng-social-icon"></span> \r\n                        <span class="ng-social-text" ng-transclude></span> \r\n                    </a> \r\n                    <span ng-show="count" class="ng-social-counter">{{ count }}</span> \r\n                   </li>',link:function(c,d,e,f){d.addClass("ng-social-vk"),f&&(b.urlOptions={url:a(e.url)(c),title:a(e.title)(c),description:a(e.description)(c),image:a(e.image)(c)},c.options=b,c.ctrl=f,f.init(c,d,b))}}}]),angular.module("ngSocial").directive("ngSocialOdnoklassniki",["$parse",function(a){var b={counter:{url:"http://connect.ok.ru/dk?st.cmd=extLike&ref={url}&uid={index}",get:function(a,c,d){b._||(b._=[],window.ODKL||(window.ODKL={}),window.ODKL.updateCount=function(a,c){b._[a].resolve(c)});var e=b._.length;b._.push(c),d.jsonp(a.replace("{index}",e))}},popup:{url:"http://connect.ok.ru/dk?st.cmd=WidgetSharePreview&service=odnoklassniki&st.shareUrl={url}",width:550,height:360},track:{name:"Odnoklassniki",action:"share"}};return{restrict:"C",require:"^?ngSocialButtons",scope:!0,replace:!0,transclude:!0,template:'<li> \r\n                    <a ng-href="{{ctrl.link(options)}}" target="_blank" ng-click="ctrl.clickShare($event, options)" class="ng-social-button"> \r\n                        <span class="ng-social-icon"></span> \r\n                        <span class="ng-social-text" ng-transclude></span> \r\n                    </a> \r\n                    <span ng-show="count" class="ng-social-counter">{{ count }}</span> \r\n                   </li>',link:function(c,d,e,f){d.addClass("ng-social-odnoklassniki"),f&&(b.urlOptions={url:a(e.url)(c)},c.options=b,c.ctrl=f,f.init(c,d,b))}}}]),angular.module("ngSocial").directive("ngSocialMailru",["$parse",function(a){var b={counter:{url:"//connect.mail.ru/share_count?url_list={url}&callback=1&func=JSON_CALLBACK",getNumber:function(a){for(var b in a)if(a.hasOwnProperty(b))return a[b].shares}},popup:{url:"http://connect.mail.ru/share?share_url={url}&title={title}",width:550,height:360}};return{restrict:"C",require:"^?ngSocialButtons",scope:!0,replace:!0,transclude:!0,template:'<li> \r\n                    <a ng-href="{{ctrl.link(options)}}" target="_blank" ng-click="ctrl.clickShare($event, options)" class="ng-social-button"> \r\n                        <span class="ng-social-icon"></span> \r\n                        <span class="ng-social-text" ng-transclude></span> \r\n                    </a> \r\n                    <span ng-show="count" class="ng-social-counter">{{ count }}</span> \r\n                   </li>',link:function(c,d,e,f){d.addClass("ng-social-mailru"),f&&(b.urlOptions={url:a(e.url)(c),title:a(e.title)(c)},c.options=b,c.ctrl=f,f.init(c,d,b))}}}]),angular.module("ngSocial").directive("ngSocialPinterest",["$parse",function(a){var b={counter:{url:"//api.pinterest.com/v1/urls/count.json?url={url}&callback=JSON_CALLBACK",getNumber:function(a){return a.count}},popup:{url:"http://pinterest.com/pin/create/button/?url={url}&description={title}&media={image}",width:630,height:270}};return{restrict:"C",require:"^?ngSocialButtons",scope:!0,replace:!0,transclude:!0,template:'<li> \r\n                    <a ng-href="{{ctrl.link(options)}}" target="_blank" ng-click="ctrl.clickShare($event, options)" class="ng-social-button"> \r\n                        <span class="ng-social-icon"></span> \r\n                        <span class="ng-social-text" ng-transclude></span> \r\n                    </a> \r\n                    <span ng-show="count" class="ng-social-counter">{{ count }}</span> \r\n                   </li>',link:function(c,d,e,f){d.addClass("ng-social-pinterest"),f&&(b.urlOptions={url:a(e.url)(c),title:a(e.title)(c),image:a(e.image)(c)},c.options=b,c.ctrl=f,f.init(c,d,b))}}}]),angular.module("ngSocial").directive("ngSocialGithubForks",function(){var a={counter:{url:"//api.github.com/repos/{user}/{repository}?callback=JSON_CALLBACK",getNumber:function(a){return a.data.forks_count}},clickUrl:"https://github.com/{user}/{repository}/"};return{restrict:"C",require:"^?ngSocialButtons",scope:!0,replace:!0,transclude:!0,template:'<li> \r\n                    <a ng-href="{{ctrl.link(options)}}" target="_blank" class="ng-social-button"> \r\n                        <span class="ng-social-icon"></span> \r\n                        <span class="ng-social-text" ng-transclude></span> \r\n                    </a> \r\n                    <span ng-show="count" class="ng-social-counter">{{ count }}</span> \r\n                   </li>',link:function(b,c,d,e){c.addClass("ng-social-github ng-social-github-forks"),e&&(a.urlOptions={user:d.user,repository:d.repository},b.options=a,b.ctrl=e,e.init(b,c,a))}}}),angular.module("ngSocial").directive("ngSocialGithub",function(){var a={counter:{url:"//api.github.com/repos/{user}/{repository}?callback=JSON_CALLBACK",getNumber:function(a){return a.data.watchers_count}},clickUrl:"https://github.com/{user}/{repository}/"};return{restrict:"C",require:"^?ngSocialButtons",scope:!0,replace:!0,transclude:!0,template:'<li> \r\n                    <a ng-href="{{ctrl.link(options)}}" target="_blank" class="ng-social-button"> \r\n                        <span class="ng-social-icon"></span> \r\n                        <span class="ng-social-text" ng-transclude></span> \r\n                    </a> \r\n                    <span ng-show="count" class="ng-social-counter">{{ count }}</span> \r\n                   </li>',link:function(b,c,d,e){c.addClass("ng-social-github"),e&&(a.urlOptions={user:d.user,repository:d.repository},b.options=a,b.ctrl=e,e.init(b,c,a))}}}),app.directive("ngSocialStumbleupon",["$parse",function(a){"use strict";var b={counter:{url:"{proxy}?url={url}&type=stumbleupon&callback=JSON_CALLBACK",getNumber:function(a){return a.count}},popup:{url:"http://www.stumbleupon.com/submit?url={url}&title={title}",width:800,height:600},track:{name:"StumbleUpon",action:"share"}};return{restrict:"C",require:"^?ngSocialButtons",scope:!0,replace:!0,transclude:!0,template:'<li> \r\n                    <a ng-href="{{ctrl.link(options)}}" target="_blank" ng-click="ctrl.clickShare($event, options)" class="ng-social-button"> \r\n                        <span class="ng-social-icon"></span> \r\n                        <span class="ng-social-text" ng-transclude></span> \r\n                    </a> \r\n                    <span ng-show="count" class="ng-social-counter">{{ count }}</span> \r\n                   </li>',link:function(c,d,e,f){if(d.addClass("ng-social-google-plus"),f){b.urlOptions={url:a(e.url)(c),title:a(e.title)(c)};var g=a(e.proxyUrl)(c)||"/proxy.php";b.counter.url=b.counter.url.replace("{proxy}",g),c.options=b,c.ctrl=f,f.init(c,d,b)}}}}]),app.directive("ngSocialMoiKrug",["$parse",function(a){"use strict";var b={popup:{url:"//share.yandex.ru/go.xml?service=moikrug&url={url}&title={title}",width:800,height:600},track:{name:"MoiKrug",action:"share"}};return{restrict:"C",require:"^?ngSocialButtons",scope:!0,replace:!0,transclude:!0,template:'<li> \r\n                    <a ng-href="{{ctrl.link(options)}}" target="_blank" ng-click="ctrl.clickShare($event, options)" class="ng-social-button"> \r\n                        <span class="ng-social-icon"></span> \r\n                        <span class="ng-social-text" ng-transclude></span> \r\n                    </a> \r\n                   </li>',link:function(c,d,e,f){d.addClass("ng-social-moi-krug"),f&&(b.urlOptions={url:a(e.url)(c),title:a(e.title)(c)},c.options=b,c.ctrl=f,f.init(c,d,b))}}}]),app.directive("ngSocialLinkedin",["$parse",function(a){"use strict";var b={counter:{url:"//www.linkedin.com/countserv/count/share?url={url}&format=jsonp&callback=JSON_CALLBACK",getNumber:function(a){return a.count}},popup:{url:"http://www.linkedin.com/shareArticle?mini=true&url={url}&title={title}&summary={description}",width:600,height:450},click:function(a){return/[\.:\-–—]\s*$/.test(a.pageTitle)||(a.pageTitle+=":"),!0},track:{name:"LinkedIn",action:"share"}};return{restrict:"C",require:"^?ngSocialButtons",scope:!0,replace:!0,transclude:!0,template:'<li> \r\n                    <a ng-href="{{ctrl.link(options)}}" target="_blank" ng-click="ctrl.clickShare($event, options)" class="ng-social-button"> \r\n                        <span class="ng-social-icon"></span> \r\n                        <span class="ng-social-text" ng-transclude></span> \r\n                    </a> \r\n                    <span ng-show="count" class="ng-social-counter">{{ count }}</span> \r\n                   </li>',link:function(c,d,e,f){d.addClass("ng-social-linkedin"),f&&(b.urlOptions={url:a(e.url)(c),title:a(e.title)(c),description:a(e.description)(c)},c.options=b,c.ctrl=f,f.init(c,d,b))}}}]),angular.module("ngSocial").run(["$templateCache",function(a){a.put("/views/buttons.html",'<div class="ng-social-container ng-cloak"><ul class="ng-social" ng-transclude></ul></div>')}]),angular.module("btford.socket-io",[]).provider("socketFactory",function(){"use strict";this.$get=["$rootScope","$timeout","global",function($rootScope,$timeout,global){var asyncAngularify=function(socket,callback){return callback?function(){var args=arguments;$timeout(function(){callback.apply(socket,args)},0)}:angular.noop};return function(options){options=options||{},options.host||(options.host=socketHost);var socket=options.ioSocket||io.connect(options.host),prefix=void 0===options.prefix?"socket:":options.prefix,defaultScope=options.scope||$rootScope,addListener=function(eventName,callback){socket.on(eventName,callback.__ng=asyncAngularify(socket,callback))};return{on:addListener,addListener:addListener,once:function(eventName,callback){socket.once(eventName,callback.__ng=asyncAngularify(socket,callback))},emit:function(eventName,data,callback){var lastIndex=arguments.length-1,callback=arguments[lastIndex];return"function"==typeof callback&&(callback=asyncAngularify(socket,callback),arguments[lastIndex]=callback),socket.emit.apply(socket,arguments)},removeListener:function(ev,fn){return fn&&fn.__ng&&(arguments[1]=fn.__ng),socket.removeListener.apply(socket,arguments)},removeAllListeners:function(){return socket.removeAllListeners.apply(socket,arguments)},disconnect:function(close){return socket.disconnect(close)},connect:function(){return socket.connect()},forward:function(events,scope){events instanceof Array==0&&(events=[events]),scope||(scope=defaultScope),events.forEach(function(eventName){var prefixedEvent=prefix+eventName,forwardBroadcast=asyncAngularify(socket,function(){Array.prototype.unshift.call(arguments,prefixedEvent),scope.$broadcast.apply(scope,arguments)});scope.$on("$destroy",function(){socket.removeListener(eventName,forwardBroadcast)}),socket.on(eventName,forwardBroadcast)})}}}}]}),function(){"use strict";angular.module("toaster",[]).constant("toasterConfig",{limit:0,"tap-to-dismiss":!0,"close-button":!1,"newest-on-top":!0,"time-out":5e3,"icon-classes":{error:"toast-error",info:"toast-info",wait:"toast-wait",success:"toast-success",warning:"toast-warning"},"body-output-type":"","body-template":"toasterBodyTmpl.html","icon-class":"toast-info","position-class":"toast-top-right","title-class":"toast-title","message-class":"toast-message","prevent-duplicates":!1,"mouseover-timer-stop":!0}).service("toaster",["$rootScope","toasterConfig",function(t,e){this.pop=function(e,o,s,i,a,n,r,c,l,u,d){if(angular.isObject(e)){var p=e;this.toast={type:p.type,title:p.title,body:p.body,timeout:p.timeout,bodyOutputType:p.bodyOutputType,clickHandler:p.clickHandler,showCloseButton:p.showCloseButton,uid:p.toastId,onHideCallback:p.onHideCallback,directiveData:p.directiveData},l=p.toastId,r=p.toasterId}else this.toast={type:e,title:o,body:s,timeout:i,bodyOutputType:a,clickHandler:n,showCloseButton:c,uid:l,onHideCallback:u,directiveData:d};t.$emit("toaster-newToast",r,l)},this.clear=function(e,o){t.$emit("toaster-clearToasts",e,o)};for(var s in e["icon-classes"])this[s]=function(t){return function(e,o,s,i,a,n,r,c,l,u){angular.isString(e)?this.pop(t,e,o,s,i,a,n,r,c,l,u):this.pop(angular.extend(e,{type:t}))}}(s)}]).factory("toasterEventRegistry",["$rootScope",function(t){var e,o=null,s=null,i=[],a=[];return e={setup:function(){o||(o=t.$on("toaster-newToast",function(t,e,o){for(var s=0,a=i.length;a>s;s++)i[s](t,e,o)})),s||(s=t.$on("toaster-clearToasts",function(t,e,o){for(var s=0,i=a.length;i>s;s++)a[s](t,e,o)}))},subscribeToNewToastEvent:function(t){i.push(t)},subscribeToClearToastsEvent:function(t){a.push(t)},unsubscribeToNewToastEvent:function(t){var e=i.indexOf(t);e>=0&&i.splice(e,1),0===i.length&&(o(),o=null)},unsubscribeToClearToastsEvent:function(t){var e=a.indexOf(t);e>=0&&a.splice(e,1),0===a.length&&(s(),s=null)}},{setup:e.setup,subscribeToNewToastEvent:e.subscribeToNewToastEvent,subscribeToClearToastsEvent:e.subscribeToClearToastsEvent,unsubscribeToNewToastEvent:e.unsubscribeToNewToastEvent,unsubscribeToClearToastsEvent:e.unsubscribeToClearToastsEvent}}]).directive("directiveTemplate",["$compile","$injector",function(t,e){return{restrict:"A",scope:{directiveName:"@directiveName",directiveData:"@directiveData"},replace:!0,link:function(o,s,i){o.$watch("directiveName",function(a){if(angular.isUndefined(a)||a.length<=0)throw new Error("A valid directive name must be provided via the toast body argument when using bodyOutputType: directive");if(!e.has(i.$normalize(a)+"Directive"))throw new Error(a+" could not be found.");o.directiveData&&(o.directiveData=angular.fromJson(o.directiveData));var r=t("<div "+a+"></div>")(o);s.append(r)})}}}]).directive("toasterContainer",["$parse","$rootScope","$interval","$sce","toasterConfig","toaster","toasterEventRegistry",function(t,e,o,s,i,a,n){return{replace:!0,restrict:"EA",scope:!0,link:function(e,r,c){function l(t,s){t.timeoutPromise=o(function(){e.removeToast(t.id)},s,1)}function u(o,i){if(o.type=m["icon-classes"][o.type],o.type||(o.type=m["icon-class"]),m["prevent-duplicates"]===!0)if(v(i)){if(e.toasters.length>0&&e.toasters[e.toasters.length-1].body===o.body)return}else{var a,n;for(a=0,n=e.toasters.length;n>a;a++)e.toasters[a].uid===i&&(d(a),a--,n=e.toasters.length)}o.id=++f,v(i)||(o.uid=i);var r=m["close-button"];if("boolean"==typeof o.showCloseButton);else if("boolean"==typeof r)o.showCloseButton=r;else if("object"==typeof r){var c=r[o.type];void 0!==c&&null!==c&&(o.showCloseButton=c)}else o.showCloseButton=!1;switch(o.bodyOutputType=o.bodyOutputType||m["body-output-type"],o.bodyOutputType){case"trustedHtml":o.html=s.trustAsHtml(o.body);break;case"template":o.bodyTemplate=o.body||m["body-template"];break;case"templateWithData":var l=t(o.body||m["body-template"]),u=l(e);o.bodyTemplate=u.template,o.data=u.data;break;case"directive":o.html=o.body}e.configureTimer(o),m["newest-on-top"]===!0?(e.toasters.unshift(o),m.limit>0&&e.toasters.length>m.limit&&e.toasters.pop()):(e.toasters.push(o),m.limit>0&&e.toasters.length>m.limit&&e.toasters.shift())}function d(t){var s=e.toasters[t];s&&(s.timeoutPromise&&o.cancel(s.timeoutPromise),e.toasters.splice(t,1),angular.isFunction(s.onHideCallback)&&s.onHideCallback())}function p(t){for(var o=e.toasters.length-1;o>=0;o--)v(t)?d(o):e.toasters[o].uid==t&&d(o)}function v(t){return angular.isUndefined(t)||null===t}var m,f=0;m=angular.extend({},i,e.$eval(c.toasterOptions)),e.config={toasterId:m["toaster-id"],position:m["position-class"],title:m["title-class"],message:m["message-class"],tap:m["tap-to-dismiss"],closeButton:m["close-button"],animation:m["animation-class"],mouseoverTimer:m["mouseover-timer-stop"]},e.$on("$destroy",function(){n.unsubscribeToNewToastEvent(e._onNewToast),n.unsubscribeToClearToastsEvent(e._onClearToasts)}),e.configureTimer=function(t){var e=angular.isNumber(t.timeout)?t.timeout:m["time-out"];"object"==typeof e&&(e=e[t.type]),e>0&&l(t,e)},e.removeToast=function(t){var o,s;for(o=0,s=e.toasters.length;s>o;o++)if(e.toasters[o].id===t){d(o);break}},e.toasters=[],e._onNewToast=function(t,o,s){(v(e.config.toasterId)&&v(o)||!v(e.config.toasterId)&&!v(o)&&e.config.toasterId==o)&&u(a.toast,s)},e._onClearToasts=function(t,o,s){("*"==o||v(e.config.toasterId)&&v(o)||!v(e.config.toasterId)&&!v(o)&&e.config.toasterId==o)&&p(s)},n.setup(),n.subscribeToNewToastEvent(e._onNewToast),n.subscribeToClearToastsEvent(e._onClearToasts)},controller:["$scope","$element","$attrs",function(t){t.stopTimer=function(e){t.config.mouseoverTimer===!0&&e.timeoutPromise&&(o.cancel(e.timeoutPromise),e.timeoutPromise=null)},t.restartTimer=function(e){t.config.mouseoverTimer===!0?e.timeoutPromise||t.configureTimer(e):null===e.timeoutPromise&&t.removeToast(e.id)},t.click=function(e,o){if(t.config.tap===!0||e.showCloseButton===!0&&o===!0){var s=!0;e.clickHandler&&(angular.isFunction(e.clickHandler)?s=e.clickHandler(e,o):angular.isFunction(t.$parent.$eval(e.clickHandler))?s=t.$parent.$eval(e.clickHandler)(e,o):console.log("TOAST-NOTE: Your click handler is not inside a parent scope of toaster-container.")),s&&t.removeToast(e.id)}}}],template:'<div id="toast-container" ng-class="[config.position, config.animation]"><div ng-repeat="toaster in toasters" class="toast" ng-class="toaster.type" ng-click="click(toaster)" ng-mouseover="stopTimer(toaster)" ng-mouseout="restartTimer(toaster)"><button type="button" class="toast-close-button" ng-show="toaster.showCloseButton" ng-click="click(toaster, true)">&times;</button><div ng-class="config.title">{{toaster.title}}</div><div ng-class="config.message" ng-switch on="toaster.bodyOutputType"><div ng-switch-when="trustedHtml" ng-bind-html="toaster.html"></div><div ng-switch-when="template"><div ng-include="toaster.bodyTemplate"></div></div><div ng-switch-when="templateWithData"><div ng-include="toaster.bodyTemplate"></div></div><div ng-switch-when="directive"><div directive-template directive-name="{{toaster.html}}" directive-data="{{toaster.directiveData}}"></div></div><div ng-switch-default >{{toaster.body}}</div></div></div></div>'}}])}(window,document),angular.module("pageslide-directive",[]).directive("pageslide",["$document","$timeout",function($document,$timeout){return{restrict:"EAC",transclude:!1,scope:{psOpen:"=?",psAutoClose:"=?",psSide:"@",psSpeed:"@",psClass:"@",psSize:"@",psSqueeze:"@",psCloak:"@",psPush:"@",psContainer:"@",psKeyListener:"@",psBodyClass:"@"},link:function($scope,el,attrs){function setBodyClass(value){if(param.bodyClass){var bodyClass=param.className[param.className.length-1]+"-body",bodyClassRe=new RegExp(" "+bodyClass+"-closed| "+bodyClass+"-open|"+bodyClass+"-closed|"+bodyClass+"-open/g");body.className=body.className.replace(bodyClassRe,""),body.className?body.className.indexOf(bodyClass+"-"+value)<0&&(body.className+=" "+bodyClass+"-"+value):body.className+=" "+bodyClass+"-"+value}}function psClose(slider,param){if(slider&&0!==slider.style.width)switch(param.cloak&&content.css("display","none"),param.side){case"right":slider.style.width="0px",param.squeeze&&(body.style.right="0px"),param.push&&(body.style.right="0px",body.style.left="0px");break;case"left":slider.style.width="0px",param.squeeze&&(body.style.left="0px"),param.push&&(body.style.left="0px",body.style.right="0px");break;case"top":slider.style.height="0px",param.squeeze&&(body.style.top="0px"),param.push&&(body.style.top="0px",body.style.bottom="0px");break;case"bottom":slider.style.height="0px",param.squeeze&&(body.style.bottom="0px"),param.push&&(body.style.bottom="0px",body.style.top="0px")}$scope.psOpen=!1,param.keyListener&&$document.off("keydown",keyListener),setBodyClass("closed")}function psOpen(slider,param){if(0!==slider.style.width){switch(param.side){case"right":slider.style.width=param.size,param.squeeze&&(body.style.right=param.size),param.push&&(body.style.right=param.size,body.style.left="-"+param.size);break;case"left":slider.style.width=param.size,param.squeeze&&(body.style.left=param.size),param.push&&(body.style.left=param.size,body.style.right="-"+param.size);break;case"top":slider.style.height=param.size,param.squeeze&&(body.style.top=param.size),param.push&&(body.style.top=param.size,body.style.bottom="-"+param.size);break;case"bottom":slider.style.height=param.size,param.squeeze&&(body.style.bottom=param.size),param.push&&(body.style.bottom=param.size,body.style.top="-"+param.size)}$timeout(function(){param.cloak&&content.css("display","block")},1e3*param.speed),$scope.psOpen=!0,param.keyListener&&$document.on("keydown",keyListener),setBodyClass("open")}}function keyListener(e){27===(e.keyCode||e.which)&&psClose(slider,param)}var param={};param.side=$scope.psSide||"right",param.speed=$scope.psSpeed||"0.5",param.size=$scope.psSize||"300px",param.zindex=1e3,param.className=$scope.psClass||"ng-pageslide",param.cloak=!$scope.psCloak||"false"!=$scope.psCloak.toLowerCase(),param.squeeze=Boolean($scope.psSqueeze)||!1,param.push=Boolean($scope.psPush)||!1,param.container=$scope.psContainer||!1,param.keyListener=Boolean($scope.psKeyListener)||!1,param.bodyClass=$scope.psBodyClass||!1,param.className=param.className.split(" "),param.className.forEach(function(cl){el.addClass(cl)});var content=null,slider=null,body=param.container?document.getElementById(param.container):document.body;if(setBodyClass("closed"),slider=el[0],"div"!==slider.tagName.toLowerCase()&&"pageslide"!==slider.tagName.toLowerCase())throw new Error("Pageslide can only be applied to <div> or <pageslide> elements");if(0===slider.children.length)throw new Error("You have to content inside the <pageslide>");switch(content=angular.element(slider.children),body.appendChild(slider),slider.style.zIndex=param.zindex,slider.style.position=param.container!==!1?"absolute":"fixed",slider.style.width=0,slider.style.height=0,slider.style.overflow="auto",slider.style.transitionDuration=param.speed+"s",slider.style.webkitTransitionDuration=param.speed+"s",slider.style.transitionProperty="width, height",param.squeeze&&(body.style.position="absolute",body.style.transitionDuration=param.speed+"s",body.style.webkitTransitionDuration=param.speed+"s",body.style.transitionProperty="top, bottom, left, right"),param.side){case"right":slider.style.height=attrs.psCustomHeight||"100%",slider.style.top=attrs.psCustomTop||"0px",slider.style.bottom=attrs.psCustomBottom||"0px",slider.style.right=attrs.psCustomRight||"0px";break;case"left":slider.style.height=attrs.psCustomHeight||"100%",slider.style.top=attrs.psCustomTop||"0px",slider.style.bottom=attrs.psCustomBottom||"0px",slider.style.left=attrs.psCustomLeft||"0px";break;case"top":slider.style.width=attrs.psCustomWidth||"100%",slider.style.left=attrs.psCustomLeft||"0px",slider.style.top=attrs.psCustomTop||"0px",slider.style.right=attrs.psCustomRight||"0px";break;case"bottom":slider.style.width=attrs.psCustomWidth||"100%",slider.style.bottom=attrs.psCustomBottom||"0px",slider.style.left=attrs.psCustomLeft||"0px",slider.style.right=attrs.psCustomRight||"0px"}$scope.$watch("psOpen",function(value){value?psOpen(slider,param):psClose(slider,param)}),$scope.$watch("psSize",function(newValue,oldValue){oldValue!==newValue&&(param.size=newValue,psOpen(slider,param))}),$scope.$on("$destroy",function(){body.removeChild(slider)}),$scope.psAutoClose&&($scope.$on("$locationChangeStart",function(){psClose(slider,param)}),$scope.$on("$stateChangeStart",function(){psClose(slider,param)}))}}}]),function(){"use strict";function clickOutside($document,$parse,$timeout){return{restrict:"A",link:function($scope,elem,attr){$timeout(function(){function eventHandler(e){if(e&&e.target&&("pac-matched"==e.target.className||"pac-item-query"==e.target.className||"pac-item"==e.target.className||"pac-icon"==e.target.className||"pac-container"==e.target.className||"pac-icon-marker"==e.target.className||"pac-logo"==e.target.className||"pac-matched"==e.target.className))return void event.stopPropagation();var i,element,r,id,classNames,l;if(!angular.element(elem).hasClass("ng-hide")&&e&&e.target){for(element=e.target;element;element=element.parentNode){if(element===elem[0])return;if(id=element.id,classNames=element.className,l=classList.length,classNames&&void 0!==classNames.baseVal&&(classNames=classNames.baseVal),classNames||id)for(i=0;i<l;i++)if(r=new RegExp("\\b"+classList[i]+"\\b"),void 0!==id&&id===classList[i]||classNames&&r.test(classNames))return}$timeout(function(){(fn=$parse(attr.clickOutside))($scope,{event:e})})}}function _hasTouch(){return"ontouchstart"in window||navigator.maxTouchPoints}var fn,classList=void 0!==attr.outsideIfNot?attr.outsideIfNot.split(/[ ,]+/):[];_hasTouch()&&$document.on("touchstart",eventHandler),$document.on("click",eventHandler),$scope.$on("$destroy",function(){_hasTouch()&&$document.off("touchstart",eventHandler),$document.off("click",eventHandler)})})}}}angular.module("angular-click-outside",[]).directive("clickOutside",["$document","$parse","$timeout",clickOutside])}(),!function(a){"use strict";a.module("vcRecaptcha",[])}(angular),function(a){"use strict";function b(){throw new Error('You need to set the "key" attribute to your public reCaptcha key. If you don\'t have a key, please get one from https://www.google.com/recaptcha/admin/create')}a.module("vcRecaptcha").provider("vcRecaptchaService",function(){var c=this,d={};c.onLoadFunctionName="vcRecaptchaApiLoaded",c.setDefaults=function(b){a.copy(b,d)},c.setSiteKey=function(a){d.key=a},c.setTheme=function(a){d.theme=a},c.setStoken=function(a){d.stoken=a},c.setSize=function(a){d.size=a},c.setType=function(a){d.type=a},c.setOnLoadFunctionName=function(a){c.onLoadFunctionName=a},c.$get=["$rootScope","$window","$q",function(e,f,g){function h(){return j?g.when(j):l}function i(){if(!j)throw new Error("reCaptcha has not been loaded yet.")}var j,k=g.defer(),l=k.promise;f.vcRecaptchaApiLoadedCallback=f.vcRecaptchaApiLoadedCallback||[];var m=function(){j=f.grecaptcha,k.resolve(j)};return f.vcRecaptchaApiLoadedCallback.push(m),f[c.onLoadFunctionName]=function(){f.vcRecaptchaApiLoadedCallback.forEach(function(a){a()})},a.isDefined(f.grecaptcha)&&m(),{create:function(a,c){return c.sitekey=c.key||d.key,c.theme=c.theme||d.theme,c.stoken=c.stoken||d.stoken,c.size=c.size||d.size,c.type=c.type||d.type,c.sitekey&&40===c.sitekey.length||b(),
h().then(function(b){return b.render(a,c)})},reload:function(a){i(),j.reset(a),e.$broadcast("reCaptchaReset",a)},getResponse:function(a){return i(),j.getResponse(a)}}}]})}(angular),function(a){"use strict";a.module("vcRecaptcha").directive("vcRecaptcha",["$document","$timeout","vcRecaptchaService",function(b,c,d){return{restrict:"A",require:"?^^form",scope:{response:"=?ngModel",key:"=?",stoken:"=?",theme:"=?",size:"=?",type:"=?",tabindex:"=?",required:"=?",onCreate:"&",onSuccess:"&",onExpire:"&"},link:function(e,f,g,h){function i(){h&&h.$setValidity("recaptcha",null),l()}function j(){c(function(){e.response="",k(),e.onExpire({widgetId:e.widgetId})})}function k(){h&&h.$setValidity("recaptcha",e.required===!1?null:Boolean(e.response))}function l(){a.element(b[0].querySelectorAll(".pls-container")).parent().remove()}e.widgetId=null,h&&a.isDefined(g.required)&&e.$watch("required",k);var m=e.$watch("key",function(b){var h=function(a){c(function(){e.response=a,k(),e.onSuccess({response:a,widgetId:e.widgetId})})};d.create(f[0],{callback:h,key:b,stoken:e.stoken||g.stoken||null,theme:e.theme||g.theme||null,type:e.type||g.type||null,tabindex:e.tabindex||g.tabindex||null,size:e.size||g.size||null,"expired-callback":j}).then(function(b){k(),e.widgetId=b,e.onCreate({widgetId:b}),e.$on("$destroy",i),e.$on("reCaptchaReset",function(c,d){(a.isUndefined(d)||b===d)&&(e.response="",k())})}),m()})}}}])}(angular),!function(a,b,c,d){function e(b,c){this.settings=null,this.options=a.extend({},e.Defaults,c),this.$element=a(b),this._handlers={},this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._widths=[],this._invalidated={},this._pipe=[],this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null},this._states={current:{},tags:{initializing:["busy"],animating:["busy"],dragging:["interacting"]}},a.each(["onResize","onThrottledResize"],a.proxy(function(b,c){this._handlers[c]=a.proxy(this[c],this)},this)),a.each(e.Plugins,a.proxy(function(a,b){this._plugins[a.charAt(0).toLowerCase()+a.slice(1)]=new b(this)},this)),a.each(e.Workers,a.proxy(function(b,c){this._pipe.push({filter:c.filter,run:a.proxy(c.run,this)})},this)),this.setup(),this.initialize()}e.Defaults={items:3,loop:!1,center:!1,rewind:!1,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:b,fallbackEasing:"swing",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",refreshClass:"owl-refresh",loadedClass:"owl-loaded",loadingClass:"owl-loading",rtlClass:"owl-rtl",responsiveClass:"owl-responsive",dragClass:"owl-drag",itemClass:"owl-item",stageClass:"owl-stage",stageOuterClass:"owl-stage-outer",grabClass:"owl-grab"},e.Width={Default:"default",Inner:"inner",Outer:"outer"},e.Type={Event:"event",State:"state"},e.Plugins={},e.Workers=[{filter:["width","settings"],run:function(){this._width=this.$element.width()}},{filter:["width","items","settings"],run:function(a){a.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){this.$stage.children(".cloned").remove()}},{filter:["width","items","settings"],run:function(a){var b=this.settings.margin||"",c=!this.settings.autoWidth,d=this.settings.rtl,e={width:"auto","margin-left":d?b:"","margin-right":d?"":b};!c&&this.$stage.children().css(e),a.css=e}},{filter:["width","items","settings"],run:function(a){var b=(this.width()/this.settings.items).toFixed(3)-this.settings.margin,c=null,d=this._items.length,e=!this.settings.autoWidth,f=[];for(a.items={merge:!1,width:b};d--;)c=this._mergers[d],c=this.settings.mergeFit&&Math.min(c,this.settings.items)||c,a.items.merge=c>1||a.items.merge,f[d]=e?b*c:this._items[d].width();this._widths=f}},{filter:["items","settings"],run:function(){var b=[],c=this._items,d=this.settings,e=Math.max(2*d.items,4),f=2*Math.ceil(c.length/2),g=d.loop&&c.length?d.rewind?e:Math.max(e,f):0,h="",i="";for(g/=2;g--;)b.push(this.normalize(b.length/2,!0)),h+=c[b[b.length-1]][0].outerHTML,b.push(this.normalize(c.length-1-(b.length-1)/2,!0)),i=c[b[b.length-1]][0].outerHTML+i;this._clones=b,a(h).addClass("cloned").appendTo(this.$stage),a(i).addClass("cloned").prependTo(this.$stage)}},{filter:["width","items","settings"],run:function(){for(var a=this.settings.rtl?1:-1,b=this._clones.length+this._items.length,c=-1,d=0,e=0,f=[];++c<b;)d=f[c-1]||0,e=this._widths[this.relative(c)]+this.settings.margin,f.push(d+e*a);this._coordinates=f}},{filter:["width","items","settings"],run:function(){var a=this.settings.stagePadding,b=this._coordinates,c={width:Math.ceil(Math.abs(b[b.length-1]))+2*a,"padding-left":a||"","padding-right":a||""};this.$stage.css(c)}},{filter:["width","items","settings"],run:function(a){var b=this._coordinates.length,c=!this.settings.autoWidth,d=this.$stage.children();if(c&&a.items.merge)for(;b--;)a.css.width=this._widths[this.relative(b)],d.eq(b).css(a.css);else c&&(a.css.width=a.items.width,d.css(a.css))}},{filter:["items"],run:function(){this._coordinates.length<1&&this.$stage.removeAttr("style")}},{filter:["width","items","settings"],run:function(a){a.current=a.current?this.$stage.children().index(a.current):0,a.current=Math.max(this.minimum(),Math.min(this.maximum(),a.current)),this.reset(a.current)}},{filter:["position"],run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){var a,b,c,d,e=this.settings.rtl?1:-1,f=2*this.settings.stagePadding,g=this.coordinates(this.current())+f,h=g+this.width()*e,i=[];for(c=0,d=this._coordinates.length;c<d;c++)a=this._coordinates[c-1]||0,b=Math.abs(this._coordinates[c])+f*e,(this.op(a,"<=",g)&&this.op(a,">",h)||this.op(b,"<",g)&&this.op(b,">",h))&&i.push(c);this.$stage.children(".active").removeClass("active"),this.$stage.children(":eq("+i.join("), :eq(")+")").addClass("active"),this.settings.center&&(this.$stage.children(".center").removeClass("center"),this.$stage.children().eq(this.current()).addClass("center"))}}],e.prototype.initialize=function(){if(this.enter("initializing"),this.trigger("initialize"),this.$element.toggleClass(this.settings.rtlClass,this.settings.rtl),this.settings.autoWidth&&!this.is("pre-loading")){var b,c,e;b=this.$element.find("img"),c=this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:d,e=this.$element.children(c).width(),b.length&&e<=0&&this.preloadAutoWidthImages(b)}this.$element.addClass(this.options.loadingClass),this.$stage=a("<"+this.settings.stageElement+' class="'+this.settings.stageClass+'"/>').wrap('<div class="'+this.settings.stageOuterClass+'"/>'),this.$element.append(this.$stage.parent()),this.replace(this.$element.children().not(this.$stage.parent())),this.$element.is(":visible")?this.refresh():this.invalidate("width"),this.$element.removeClass(this.options.loadingClass).addClass(this.options.loadedClass),this.registerEventHandlers(),this.leave("initializing"),this.trigger("initialized")},e.prototype.setup=function(){var b=this.viewport(),c=this.options.responsive,d=-1,e=null;c?(a.each(c,function(a){a<=b&&a>d&&(d=Number(a))}),e=a.extend({},this.options,c[d]),"function"==typeof e.stagePadding&&(e.stagePadding=e.stagePadding()),delete e.responsive,e.responsiveClass&&this.$element.attr("class",this.$element.attr("class").replace(new RegExp("("+this.options.responsiveClass+"-)\\S+\\s","g"),"$1"+d))):e=a.extend({},this.options),this.trigger("change",{property:{name:"settings",value:e}}),this._breakpoint=d,this.settings=e,this.invalidate("settings"),this.trigger("changed",{property:{name:"settings",value:this.settings}})},e.prototype.optionsLogic=function(){this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},e.prototype.prepare=function(b){var c=this.trigger("prepare",{content:b});return c.data||(c.data=a("<"+this.settings.itemElement+"/>").addClass(this.options.itemClass).append(b)),this.trigger("prepared",{content:c.data}),c.data},e.prototype.update=function(){for(var b=0,c=this._pipe.length,d=a.proxy(function(a){return this[a]},this._invalidated),e={};b<c;)(this._invalidated.all||a.grep(this._pipe[b].filter,d).length>0)&&this._pipe[b].run(e),b++;this._invalidated={},!this.is("valid")&&this.enter("valid")},e.prototype.width=function(a){switch(a=a||e.Width.Default){case e.Width.Inner:case e.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},e.prototype.refresh=function(){this.enter("refreshing"),this.trigger("refresh"),this.setup(),this.optionsLogic(),this.$element.addClass(this.options.refreshClass),this.update(),this.$element.removeClass(this.options.refreshClass),this.leave("refreshing"),this.trigger("refreshed")},e.prototype.onThrottledResize=function(){b.clearTimeout(this.resizeTimer),this.resizeTimer=b.setTimeout(this._handlers.onResize,this.settings.responsiveRefreshRate)},e.prototype.onResize=function(){return!!this._items.length&&this._width!==this.$element.width()&&!!this.$element.is(":visible")&&(this.enter("resizing"),this.trigger("resize").isDefaultPrevented()?(this.leave("resizing"),!1):(this.invalidate("width"),this.refresh(),this.leave("resizing"),void this.trigger("resized")))},e.prototype.registerEventHandlers=function(){a.support.transition&&this.$stage.on(a.support.transition.end+".owl.core",a.proxy(this.onTransitionEnd,this)),this.settings.responsive!==!1&&this.on(b,"resize",this._handlers.onThrottledResize),this.settings.mouseDrag&&(this.$element.addClass(this.options.dragClass),this.$stage.on("mousedown.owl.core",a.proxy(this.onDragStart,this)),this.$stage.on("dragstart.owl.core selectstart.owl.core",function(){return!1})),this.settings.touchDrag&&(this.$stage.on("touchstart.owl.core",a.proxy(this.onDragStart,this)),this.$stage.on("touchcancel.owl.core",a.proxy(this.onDragEnd,this)))},e.prototype.onDragStart=function(b){var d=null;3!==b.which&&(a.support.transform?(d=this.$stage.css("transform").replace(/.*\(|\)| /g,"").split(","),d={x:d[16===d.length?12:4],y:d[16===d.length?13:5]}):(d=this.$stage.position(),d={x:this.settings.rtl?d.left+this.$stage.width()-this.width()+this.settings.margin:d.left,y:d.top}),this.is("animating")&&(a.support.transform?this.animate(d.x):this.$stage.stop(),this.invalidate("position")),this.$element.toggleClass(this.options.grabClass,"mousedown"===b.type),this.speed(0),this._drag.time=(new Date).getTime(),this._drag.target=a(b.target),this._drag.stage.start=d,this._drag.stage.current=d,this._drag.pointer=this.pointer(b),a(c).on("mouseup.owl.core touchend.owl.core",a.proxy(this.onDragEnd,this)),a(c).one("mousemove.owl.core touchmove.owl.core",a.proxy(function(b){var d=this.difference(this._drag.pointer,this.pointer(b));a(c).on("mousemove.owl.core touchmove.owl.core",a.proxy(this.onDragMove,this)),Math.abs(d.x)<Math.abs(d.y)&&this.is("valid")||(b.preventDefault(),this.enter("dragging"),this.trigger("drag"))},this)))},e.prototype.onDragMove=function(a){var b=null,c=null,d=null,e=this.difference(this._drag.pointer,this.pointer(a)),f=this.difference(this._drag.stage.start,e);this.is("dragging")&&(a.preventDefault(),this.settings.loop?(b=this.coordinates(this.minimum()),c=this.coordinates(this.maximum()+1)-b,f.x=((f.x-b)%c+c)%c+b):(b=this.settings.rtl?this.coordinates(this.maximum()):this.coordinates(this.minimum()),c=this.settings.rtl?this.coordinates(this.minimum()):this.coordinates(this.maximum()),d=this.settings.pullDrag?-1*e.x/5:0,f.x=Math.max(Math.min(f.x,b+d),c+d)),this._drag.stage.current=f,this.animate(f.x))},e.prototype.onDragEnd=function(b){var d=this.difference(this._drag.pointer,this.pointer(b)),e=this._drag.stage.current,f=d.x>0^this.settings.rtl?"left":"right";a(c).off(".owl.core"),this.$element.removeClass(this.options.grabClass),(0!==d.x&&this.is("dragging")||!this.is("valid"))&&(this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(this.closest(e.x,0!==d.x?f:this._drag.direction)),this.invalidate("position"),this.update(),this._drag.direction=f,(Math.abs(d.x)>3||(new Date).getTime()-this._drag.time>300)&&this._drag.target.one("click.owl.core",function(){return!1})),this.is("dragging")&&(this.leave("dragging"),this.trigger("dragged"))},e.prototype.closest=function(b,c){var d=-1,f=this.width(),g=this.coordinates();return this.settings.freeDrag||a.each(g,a.proxy(function(a,h){return"left"===c&&b>h-30&&b<h+30?d=a:"right"===c&&b>h-f-30&&b<h-f+30?d=a+1:this.op(b,"<",h)&&this.op(b,">",g[a+1]||h-f)&&(d="left"===c?a+1:a),d===-1},this)),this.settings.loop||(this.op(b,">",g[this.minimum()])?d=b=this.minimum():this.op(b,"<",g[this.maximum()])&&(d=b=this.maximum())),d},e.prototype.animate=function(b){var c=this.speed()>0;this.is("animating")&&this.onTransitionEnd(),c&&(this.enter("animating"),this.trigger("translate")),a.support.transform3d&&a.support.transition?this.$stage.css({transform:"translate3d("+b+"px,0px,0px)",transition:this.speed()/1e3+"s"}):c?this.$stage.animate({left:b+"px"},this.speed(),this.settings.fallbackEasing,a.proxy(this.onTransitionEnd,this)):this.$stage.css({left:b+"px"})},e.prototype.is=function(a){return this._states.current[a]&&this._states.current[a]>0},e.prototype.current=function(a){if(a===d)return this._current;if(0===this._items.length)return d;if(a=this.normalize(a),this._current!==a){var b=this.trigger("change",{property:{name:"position",value:a}});b.data!==d&&(a=this.normalize(b.data)),this._current=a,this.invalidate("position"),this.trigger("changed",{property:{name:"position",value:this._current}})}return this._current},e.prototype.invalidate=function(b){return"string"===a.type(b)&&(this._invalidated[b]=!0,this.is("valid")&&this.leave("valid")),a.map(this._invalidated,function(a,b){return b})},e.prototype.reset=function(a){(a=this.normalize(a))!==d&&(this._speed=0,this._current=a,this.suppress(["translate","translated"]),this.animate(this.coordinates(a)),this.release(["translate","translated"]))},e.prototype.normalize=function(a,b){var c=this._items.length,e=b?0:this._clones.length;return!this.isNumeric(a)||c<1?a=d:(a<0||a>=c+e)&&(a=((a-e/2)%c+c)%c+e/2),a},e.prototype.relative=function(a){return a-=this._clones.length/2,this.normalize(a,!0)},e.prototype.maximum=function(a){var b,c,d,e=this.settings,f=this._coordinates.length;if(e.loop)f=this._clones.length/2+this._items.length-1;else if(e.autoWidth||e.merge){for(b=this._items.length,c=this._items[--b].width(),d=this.$element.width();b--&&!((c+=this._items[b].width()+this.settings.margin)>d););f=b+1}else f=e.center?this._items.length-1:this._items.length-e.items;return a&&(f-=this._clones.length/2),Math.max(f,0)},e.prototype.minimum=function(a){return a?0:this._clones.length/2},e.prototype.items=function(a){return a===d?this._items.slice():(a=this.normalize(a,!0),this._items[a])},e.prototype.mergers=function(a){return a===d?this._mergers.slice():(a=this.normalize(a,!0),this._mergers[a])},e.prototype.clones=function(b){var c=this._clones.length/2,e=c+this._items.length,f=function(a){return a%2==0?e+a/2:c-(a+1)/2};return b===d?a.map(this._clones,function(a,b){return f(b)}):a.map(this._clones,function(a,c){return a===b?f(c):null})},e.prototype.speed=function(a){return a!==d&&(this._speed=a),this._speed},e.prototype.coordinates=function(b){var c,e=1,f=b-1;return b===d?a.map(this._coordinates,a.proxy(function(a,b){return this.coordinates(b)},this)):(this.settings.center?(this.settings.rtl&&(e=-1,f=b+1),c=this._coordinates[b],c+=(this.width()-c+(this._coordinates[f]||0))/2*e):c=this._coordinates[f]||0,c=Math.ceil(c))},e.prototype.duration=function(a,b,c){return 0===c?0:Math.min(Math.max(Math.abs(b-a),1),6)*Math.abs(c||this.settings.smartSpeed)},e.prototype.to=function(a,b){var c=this.current(),d=null,e=a-this.relative(c),f=(e>0)-(e<0),g=this._items.length,h=this.minimum(),i=this.maximum();this.settings.loop?(!this.settings.rewind&&Math.abs(e)>g/2&&(e+=f*-1*g),a=c+e,(d=((a-h)%g+g)%g+h)!==a&&d-e<=i&&d-e>0&&(c=d-e,a=d,this.reset(c))):this.settings.rewind?(i+=1,a=(a%i+i)%i):a=Math.max(h,Math.min(i,a)),this.speed(this.duration(c,a,b)),this.current(a),this.$element.is(":visible")&&this.update()},e.prototype.next=function(a){a=a||!1,this.to(this.relative(this.current())+1,a)},e.prototype.prev=function(a){a=a||!1,this.to(this.relative(this.current())-1,a)},e.prototype.onTransitionEnd=function(a){if(a!==d&&(a.stopPropagation(),(a.target||a.srcElement||a.originalTarget)!==this.$stage.get(0)))return!1;this.leave("animating"),this.trigger("translated")},e.prototype.viewport=function(){var d;return this.options.responsiveBaseElement!==b?d=a(this.options.responsiveBaseElement).width():b.innerWidth?d=b.innerWidth:c.documentElement&&c.documentElement.clientWidth?d=c.documentElement.clientWidth:console.warn("Can not detect viewport width."),d},e.prototype.replace=function(b){this.$stage.empty(),this._items=[],b&&(b=b instanceof jQuery?b:a(b)),this.settings.nestedItemSelector&&(b=b.find("."+this.settings.nestedItemSelector)),b.filter(function(){return 1===this.nodeType}).each(a.proxy(function(a,b){b=this.prepare(b),this.$stage.append(b),this._items.push(b),this._mergers.push(1*b.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)},this)),this.reset(this.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate("items")},e.prototype.add=function(b,c){var e=this.relative(this._current);c=c===d?this._items.length:this.normalize(c,!0),b=b instanceof jQuery?b:a(b),this.trigger("add",{content:b,position:c}),b=this.prepare(b),0===this._items.length||c===this._items.length?(0===this._items.length&&this.$stage.append(b),0!==this._items.length&&this._items[c-1].after(b),this._items.push(b),this._mergers.push(1*b.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)):(this._items[c].before(b),this._items.splice(c,0,b),this._mergers.splice(c,0,1*b.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)),this._items[e]&&this.reset(this._items[e].index()),this.invalidate("items"),this.trigger("added",{content:b,position:c})},e.prototype.remove=function(a){(a=this.normalize(a,!0))!==d&&(this.trigger("remove",{content:this._items[a],position:a}),this._items[a].remove(),this._items.splice(a,1),this._mergers.splice(a,1),this.invalidate("items"),this.trigger("removed",{content:null,position:a}))},e.prototype.preloadAutoWidthImages=function(b){b.each(a.proxy(function(b,c){this.enter("pre-loading"),c=a(c),a(new Image).one("load",a.proxy(function(a){c.attr("src",a.target.src),c.css("opacity",1),this.leave("pre-loading"),!this.is("pre-loading")&&!this.is("initializing")&&this.refresh()},this)).attr("src",c.attr("src")||c.attr("data-src")||c.attr("data-src-retina"))},this))},e.prototype.destroy=function(){this.$element.off(".owl.core"),this.$stage.off(".owl.core"),a(c).off(".owl.core"),this.settings.responsive!==!1&&(b.clearTimeout(this.resizeTimer),this.off(b,"resize",this._handlers.onThrottledResize));for(var d in this._plugins)this._plugins[d].destroy();this.$stage.children(".cloned").remove(),this.$stage.unwrap(),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$element.removeClass(this.options.refreshClass).removeClass(this.options.loadingClass).removeClass(this.options.loadedClass).removeClass(this.options.rtlClass).removeClass(this.options.dragClass).removeClass(this.options.grabClass).attr("class",this.$element.attr("class").replace(new RegExp(this.options.responsiveClass+"-\\S+\\s","g"),"")).removeData("owl.carousel")},e.prototype.op=function(a,b,c){var d=this.settings.rtl;switch(b){case"<":return d?a>c:a<c;case">":return d?a<c:a>c;case">=":return d?a<=c:a>=c;case"<=":return d?a>=c:a<=c}},e.prototype.on=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d):a.attachEvent&&a.attachEvent("on"+b,c)},e.prototype.off=function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d):a.detachEvent&&a.detachEvent("on"+b,c)},e.prototype.trigger=function(b,c,d,f,g){var h={item:{count:this._items.length,index:this.current()}},i=a.camelCase(a.grep(["on",b,d],function(a){return a}).join("-").toLowerCase()),j=a.Event([b,"owl",d||"carousel"].join(".").toLowerCase(),a.extend({relatedTarget:this},h,c));return this._supress[b]||(a.each(this._plugins,function(a,b){b.onTrigger&&b.onTrigger(j)}),this.register({type:e.Type.Event,name:b}),this.$element.trigger(j),this.settings&&"function"==typeof this.settings[i]&&this.settings[i].call(this,j)),j},e.prototype.enter=function(b){a.each([b].concat(this._states.tags[b]||[]),a.proxy(function(a,b){this._states.current[b]===d&&(this._states.current[b]=0),this._states.current[b]++},this))},e.prototype.leave=function(b){a.each([b].concat(this._states.tags[b]||[]),a.proxy(function(a,b){this._states.current[b]--},this))},e.prototype.register=function(b){if(b.type===e.Type.Event){if(a.event.special[b.name]||(a.event.special[b.name]={}),!a.event.special[b.name].owl){var c=a.event.special[b.name]._default;a.event.special[b.name]._default=function(a){return!c||!c.apply||a.namespace&&a.namespace.indexOf("owl")!==-1?a.namespace&&a.namespace.indexOf("owl")>-1:c.apply(this,arguments)},a.event.special[b.name].owl=!0}}else b.type===e.Type.State&&(this._states.tags[b.name]?this._states.tags[b.name]=this._states.tags[b.name].concat(b.tags):this._states.tags[b.name]=b.tags,this._states.tags[b.name]=a.grep(this._states.tags[b.name],a.proxy(function(c,d){return a.inArray(c,this._states.tags[b.name])===d},this)))},e.prototype.suppress=function(b){a.each(b,a.proxy(function(a,b){this._supress[b]=!0},this))},e.prototype.release=function(b){a.each(b,a.proxy(function(a,b){delete this._supress[b]},this))},e.prototype.pointer=function(a){var c={x:null,y:null};return a=a.originalEvent||a||b.event,a=a.touches&&a.touches.length?a.touches[0]:a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:a,a.pageX?(c.x=a.pageX,c.y=a.pageY):(c.x=a.clientX,c.y=a.clientY),c},e.prototype.isNumeric=function(a){return!isNaN(parseFloat(a))},e.prototype.difference=function(a,b){return{x:a.x-b.x,y:a.y-b.y}},a.fn.owlCarousel=function(b){var c=Array.prototype.slice.call(arguments,1);return this.each(function(){var d=a(this),f=d.data("owl.carousel");f||(f=new e(this,"object"==typeof b&&b),d.data("owl.carousel",f),a.each(["next","prev","to","destroy","refresh","replace","add","remove"],function(b,c){f.register({type:e.Type.Event,name:c}),f.$element.on(c+".owl.carousel.core",a.proxy(function(a){a.namespace&&a.relatedTarget!==this&&(this.suppress([c]),f[c].apply(this,[].slice.call(arguments,1)),this.release([c]))},f))})),"string"==typeof b&&"_"!==b.charAt(0)&&f[b].apply(f,c)})},a.fn.owlCarousel.Constructor=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._interval=null,this._visible=null,this._handlers={"initialized.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.autoRefresh&&this.watch()},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers)};e.Defaults={autoRefresh:!0,autoRefreshInterval:500},e.prototype.watch=function(){this._interval||(this._visible=this._core.$element.is(":visible"),this._interval=b.setInterval(a.proxy(this.refresh,this),this._core.settings.autoRefreshInterval))},e.prototype.refresh=function(){this._core.$element.is(":visible")!==this._visible&&(this._visible=!this._visible,this._core.$element.toggleClass("owl-hidden",!this._visible),this._visible&&this._core.invalidate("width")&&this._core.refresh())},e.prototype.destroy=function(){var a,c;b.clearInterval(this._interval);for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(c in Object.getOwnPropertyNames(this))"function"!=typeof this[c]&&(this[c]=null)},a.fn.owlCarousel.Constructor.Plugins.AutoRefresh=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._loaded=[],this._handlers={"initialized.owl.carousel change.owl.carousel resized.owl.carousel":a.proxy(function(b){if(b.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(b.property&&"position"==b.property.name||"initialized"==b.type))for(var c=this._core.settings,e=c.center&&Math.ceil(c.items/2)||c.items,f=c.center&&e*-1||0,g=(b.property&&void 0!==b.property.value?b.property.value:this._core.current())+f,h=this._core.clones().length,i=a.proxy(function(a,b){this.load(b)},this);f++<e;)this.load(h/2+this._core.relative(g)),h&&a.each(this._core.clones(this._core.relative(g)),i),g++},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers)};e.Defaults={lazyLoad:!1},e.prototype.load=function(c){var d=this._core.$stage.children().eq(c),e=d&&d.find(".owl-lazy");!e||a.inArray(d.get(0),this._loaded)>-1||(e.each(a.proxy(function(c,d){var e,f=a(d),g=b.devicePixelRatio>1&&f.attr("data-src-retina")||f.attr("data-src");this._core.trigger("load",{element:f,url:g},"lazy"),f.is("img")?f.one("load.owl.lazy",a.proxy(function(){f.css("opacity",1),this._core.trigger("loaded",{element:f,url:g},"lazy")},this)).attr("src",g):(e=new Image,e.onload=a.proxy(function(){f.css({"background-image":'url("'+g+'")',opacity:"1"}),this._core.trigger("loaded",{element:f,url:g},"lazy")},this),e.src=g)},this)),this._loaded.push(d.get(0)))},e.prototype.destroy=function(){var a,b;for(a in this.handlers)this._core.$element.off(a,this.handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Lazy=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._handlers={"initialized.owl.carousel refreshed.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.autoHeight&&this.update()},this),"changed.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.autoHeight&&"position"==a.property.name&&this.update()},this),"loaded.owl.lazy":a.proxy(function(a){a.namespace&&this._core.settings.autoHeight&&a.element.closest("."+this._core.settings.itemClass).index()===this._core.current()&&this.update()},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers)};e.Defaults={autoHeight:!1,autoHeightClass:"owl-height"},e.prototype.update=function(){var b=this._core._current,c=b+this._core.settings.items,d=this._core.$stage.children().toArray().slice(b,c),e=[],f=0;a.each(d,function(b,c){e.push(a(c).height())}),f=Math.max.apply(null,e),this._core.$stage.parent().height(f).addClass(this._core.settings.autoHeightClass)},e.prototype.destroy=function(){var a,b;for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.AutoHeight=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._videos={},this._playing=null,this._handlers={"initialized.owl.carousel":a.proxy(function(a){a.namespace&&this._core.register({type:"state",name:"playing",tags:["interacting"]})},this),"resize.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.video&&this.isInFullScreen()&&a.preventDefault()},this),"refreshed.owl.carousel":a.proxy(function(a){a.namespace&&this._core.is("resizing")&&this._core.$stage.find(".cloned .owl-video-frame").remove()},this),"changed.owl.carousel":a.proxy(function(a){a.namespace&&"position"===a.property.name&&this._playing&&this.stop()},this),"prepared.owl.carousel":a.proxy(function(b){if(b.namespace){var c=a(b.content).find(".owl-video");c.length&&(c.css("display","none"),this.fetch(c,a(b.content)))}},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on("click.owl.video",".owl-video-play-icon",a.proxy(function(a){this.play(a)},this))};e.Defaults={video:!1,videoHeight:!1,videoWidth:!1},e.prototype.fetch=function(a,b){var c=function(){return a.attr("data-vimeo-id")?"vimeo":a.attr("data-vzaar-id")?"vzaar":"youtube"}(),d=a.attr("data-vimeo-id")||a.attr("data-youtube-id")||a.attr("data-vzaar-id"),e=a.attr("data-width")||this._core.settings.videoWidth,f=a.attr("data-height")||this._core.settings.videoHeight,g=a.attr("href");if(!g)throw new Error("Missing video URL.");if(d=g.match(/(http:|https:|)\/\/(player.|www.|app.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com)|vzaar\.com)\/(video\/|videos\/|embed\/|channels\/.+\/|groups\/.+\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/),d[3].indexOf("youtu")>-1)c="youtube";else if(d[3].indexOf("vimeo")>-1)c="vimeo";else{if(!(d[3].indexOf("vzaar")>-1))throw new Error("Video URL not supported.");c="vzaar"}d=d[6],this._videos[g]={type:c,id:d,width:e,height:f},b.attr("data-video",g),this.thumbnail(a,this._videos[g])},e.prototype.thumbnail=function(b,c){var d,e,f,g=c.width&&c.height?'style="width:'+c.width+"px;height:"+c.height+'px;"':"",h=b.find("img"),i="src",j="",k=this._core.settings,l=function(a){e='<div class="owl-video-play-icon"></div>',d=k.lazyLoad?'<div class="owl-video-tn '+j+'" '+i+'="'+a+'"></div>':'<div class="owl-video-tn" style="opacity:1;background-image:url('+a+')"></div>',b.after(d),b.after(e)};if(b.wrap('<div class="owl-video-wrapper"'+g+"></div>"),this._core.settings.lazyLoad&&(i="data-src",j="owl-lazy"),h.length)return l(h.attr(i)),h.remove(),!1;"youtube"===c.type?(f="//img.youtube.com/vi/"+c.id+"/hqdefault.jpg",l(f)):"vimeo"===c.type?a.ajax({type:"GET",url:"//vimeo.com/api/v2/video/"+c.id+".json",jsonp:"callback",dataType:"jsonp",success:function(a){f=a[0].thumbnail_large,l(f)}}):"vzaar"===c.type&&a.ajax({type:"GET",url:"//vzaar.com/api/videos/"+c.id+".json",jsonp:"callback",dataType:"jsonp",success:function(a){f=a.framegrab_url,l(f)}})},e.prototype.stop=function(){this._core.trigger("stop",null,"video"),this._playing.find(".owl-video-frame").remove(),this._playing.removeClass("owl-video-playing"),this._playing=null,this._core.leave("playing"),this._core.trigger("stopped",null,"video")},e.prototype.play=function(b){var c,d=a(b.target),e=d.closest("."+this._core.settings.itemClass),f=this._videos[e.attr("data-video")],g=f.width||"100%",h=f.height||this._core.$stage.height();this._playing||(this._core.enter("playing"),this._core.trigger("play",null,"video"),e=this._core.items(this._core.relative(e.index())),this._core.reset(e.index()),"youtube"===f.type?c='<iframe width="'+g+'" height="'+h+'" src="//www.youtube.com/embed/'+f.id+"?autoplay=1&rel=0&v="+f.id+'" frameborder="0" allowfullscreen></iframe>':"vimeo"===f.type?c='<iframe src="//player.vimeo.com/video/'+f.id+'?autoplay=1" width="'+g+'" height="'+h+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>':"vzaar"===f.type&&(c='<iframe frameborder="0"height="'+h+'"width="'+g+'" allowfullscreen mozallowfullscreen webkitAllowFullScreen src="//view.vzaar.com/'+f.id+'/player?autoplay=true"></iframe>'),a('<div class="owl-video-frame">'+c+"</div>").insertAfter(e.find(".owl-video")),this._playing=e.addClass("owl-video-playing"))},e.prototype.isInFullScreen=function(){var b=c.fullscreenElement||c.mozFullScreenElement||c.webkitFullscreenElement;return b&&a(b).parent().hasClass("owl-video-frame")},e.prototype.destroy=function(){var a,b;this._core.$element.off("click.owl.video");for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Video=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this.core=b,this.core.options=a.extend({},e.Defaults,this.core.options),this.swapping=!0,this.previous=d,this.next=d,this.handlers={"change.owl.carousel":a.proxy(function(a){a.namespace&&"position"==a.property.name&&(this.previous=this.core.current(),this.next=a.property.value)
},this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":a.proxy(function(a){a.namespace&&(this.swapping="translated"==a.type)},this),"translate.owl.carousel":a.proxy(function(a){a.namespace&&this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()},this)},this.core.$element.on(this.handlers)};e.Defaults={animateOut:!1,animateIn:!1},e.prototype.swap=function(){if(1===this.core.settings.items&&a.support.animation&&a.support.transition){this.core.speed(0);var b,c=a.proxy(this.clear,this),d=this.core.$stage.children().eq(this.previous),e=this.core.$stage.children().eq(this.next),f=this.core.settings.animateIn,g=this.core.settings.animateOut;this.core.current()!==this.previous&&(g&&(b=this.core.coordinates(this.previous)-this.core.coordinates(this.next),d.one(a.support.animation.end,c).css({left:b+"px"}).addClass("animated owl-animated-out").addClass(g)),f&&e.one(a.support.animation.end,c).addClass("animated owl-animated-in").addClass(f))}},e.prototype.clear=function(b){a(b.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.onTransitionEnd()},e.prototype.destroy=function(){var a,b;for(a in this.handlers)this.core.$element.off(a,this.handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Animate=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._timeout=null,this._paused=!1,this._handlers={"changed.owl.carousel":a.proxy(function(a){a.namespace&&"settings"===a.property.name?this._core.settings.autoplay?this.play():this.stop():a.namespace&&"position"===a.property.name&&this._core.settings.autoplay&&this._setAutoPlayInterval()},this),"initialized.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.autoplay&&this.play()},this),"play.owl.autoplay":a.proxy(function(a,b,c){a.namespace&&this.play(b,c)},this),"stop.owl.autoplay":a.proxy(function(a){a.namespace&&this.stop()},this),"mouseover.owl.autoplay":a.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"mouseleave.owl.autoplay":a.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.play()},this),"touchstart.owl.core":a.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"touchend.owl.core":a.proxy(function(){this._core.settings.autoplayHoverPause&&this.play()},this)},this._core.$element.on(this._handlers),this._core.options=a.extend({},e.Defaults,this._core.options)};e.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},e.prototype.play=function(a,b){this._paused=!1,this._core.is("rotating")||(this._core.enter("rotating"),this._setAutoPlayInterval())},e.prototype._getNextTimeout=function(d,e){return this._timeout&&b.clearTimeout(this._timeout),b.setTimeout(a.proxy(function(){this._paused||this._core.is("busy")||this._core.is("interacting")||c.hidden||this._core.next(e||this._core.settings.autoplaySpeed)},this),d||this._core.settings.autoplayTimeout)},e.prototype._setAutoPlayInterval=function(){this._timeout=this._getNextTimeout()},e.prototype.stop=function(){this._core.is("rotating")&&(b.clearTimeout(this._timeout),this._core.leave("rotating"))},e.prototype.pause=function(){this._core.is("rotating")&&(this._paused=!0)},e.prototype.destroy=function(){var a,b;this.stop();for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.autoplay=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){"use strict";var e=function(b){this._core=b,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={"prepared.owl.carousel":a.proxy(function(b){b.namespace&&this._core.settings.dotsData&&this._templates.push('<div class="'+this._core.settings.dotClass+'">'+a(b.content).find("[data-dot]").addBack("[data-dot]").attr("data-dot")+"</div>")},this),"added.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.dotsData&&this._templates.splice(a.position,0,this._templates.pop())},this),"remove.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.dotsData&&this._templates.splice(a.position,1)},this),"changed.owl.carousel":a.proxy(function(a){a.namespace&&"position"==a.property.name&&this.draw()},this),"initialized.owl.carousel":a.proxy(function(a){a.namespace&&!this._initialized&&(this._core.trigger("initialize",null,"navigation"),this.initialize(),this.update(),this.draw(),this._initialized=!0,this._core.trigger("initialized",null,"navigation"))},this),"refreshed.owl.carousel":a.proxy(function(a){a.namespace&&this._initialized&&(this._core.trigger("refresh",null,"navigation"),this.update(),this.draw(),this._core.trigger("refreshed",null,"navigation"))},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this.$element.on(this._handlers)};e.Defaults={nav:!1,navText:["prev","next"],navSpeed:!1,navElement:"div",navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotsData:!1,dotsSpeed:!1,dotsContainer:!1},e.prototype.initialize=function(){var b,c=this._core.settings;this._controls.$relative=(c.navContainer?a(c.navContainer):a("<div>").addClass(c.navContainerClass).appendTo(this.$element)).addClass("disabled"),this._controls.$previous=a("<"+c.navElement+">").addClass(c.navClass[0]).html(c.navText[0]).prependTo(this._controls.$relative).on("click",a.proxy(function(a){this.prev(c.navSpeed)},this)),this._controls.$next=a("<"+c.navElement+">").addClass(c.navClass[1]).html(c.navText[1]).appendTo(this._controls.$relative).on("click",a.proxy(function(a){this.next(c.navSpeed)},this)),c.dotsData||(this._templates=[a("<div>").addClass(c.dotClass).append(a("<span>")).prop("outerHTML")]),this._controls.$absolute=(c.dotsContainer?a(c.dotsContainer):a("<div>").addClass(c.dotsClass).appendTo(this.$element)).addClass("disabled"),this._controls.$absolute.on("click","div",a.proxy(function(b){var d=a(b.target).parent().is(this._controls.$absolute)?a(b.target).index():a(b.target).parent().index();b.preventDefault(),this.to(d,c.dotsSpeed)},this));for(b in this._overrides)this._core[b]=a.proxy(this[b],this)},e.prototype.destroy=function(){var a,b,c,d;for(a in this._handlers)this.$element.off(a,this._handlers[a]);for(b in this._controls)this._controls[b].remove();for(d in this.overides)this._core[d]=this._overrides[d];for(c in Object.getOwnPropertyNames(this))"function"!=typeof this[c]&&(this[c]=null)},e.prototype.update=function(){var a,b,c,d=this._core.clones().length/2,e=d+this._core.items().length,f=this._core.maximum(!0),g=this._core.settings,h=g.center||g.autoWidth||g.dotsData?1:g.dotsEach||g.items;if("page"!==g.slideBy&&(g.slideBy=Math.min(g.slideBy,g.items)),g.dots||"page"==g.slideBy)for(this._pages=[],a=d,b=0,c=0;a<e;a++){if(b>=h||0===b){if(this._pages.push({start:Math.min(f,a-d),end:a-d+h-1}),Math.min(f,a-d)===f)break;b=0,++c}b+=this._core.mergers(this._core.relative(a))}},e.prototype.draw=function(){var b,c=this._core.settings,d=this._core.items().length<=c.items,e=this._core.relative(this._core.current()),f=c.loop||c.rewind;this._controls.$relative.toggleClass("disabled",!c.nav||d),c.nav&&(this._controls.$previous.toggleClass("disabled",!f&&e<=this._core.minimum(!0)),this._controls.$next.toggleClass("disabled",!f&&e>=this._core.maximum(!0))),this._controls.$absolute.toggleClass("disabled",!c.dots||d),c.dots&&(b=this._pages.length-this._controls.$absolute.children().length,c.dotsData&&0!==b?this._controls.$absolute.html(this._templates.join("")):b>0?this._controls.$absolute.append(new Array(b+1).join(this._templates[0])):b<0&&this._controls.$absolute.children().slice(b).remove(),this._controls.$absolute.find(".active").removeClass("active"),this._controls.$absolute.children().eq(a.inArray(this.current(),this._pages)).addClass("active"))},e.prototype.onTrigger=function(b){var c=this._core.settings;b.page={index:a.inArray(this.current(),this._pages),count:this._pages.length,size:c&&(c.center||c.autoWidth||c.dotsData?1:c.dotsEach||c.items)}},e.prototype.current=function(){var b=this._core.relative(this._core.current());return a.grep(this._pages,a.proxy(function(a,c){return a.start<=b&&a.end>=b},this)).pop()},e.prototype.getPosition=function(b){var c,d,e=this._core.settings;return"page"==e.slideBy?(c=a.inArray(this.current(),this._pages),d=this._pages.length,b?++c:--c,c=this._pages[(c%d+d)%d].start):(c=this._core.relative(this._core.current()),d=this._core.items().length,b?c+=e.slideBy:c-=e.slideBy),c},e.prototype.next=function(b){a.proxy(this._overrides.to,this._core)(this.getPosition(!0),b)},e.prototype.prev=function(b){a.proxy(this._overrides.to,this._core)(this.getPosition(!1),b)},e.prototype.to=function(b,c,d){var e;!d&&this._pages.length?(e=this._pages.length,a.proxy(this._overrides.to,this._core)(this._pages[(b%e+e)%e].start,c)):a.proxy(this._overrides.to,this._core)(b,c)},a.fn.owlCarousel.Constructor.Plugins.Navigation=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){"use strict";var e=function(c){this._core=c,this._hashes={},this.$element=this._core.$element,this._handlers={"initialized.owl.carousel":a.proxy(function(c){c.namespace&&"URLHash"===this._core.settings.startPosition&&a(b).trigger("hashchange.owl.navigation")},this),"prepared.owl.carousel":a.proxy(function(b){if(b.namespace){var c=a(b.content).find("[data-hash]").addBack("[data-hash]").attr("data-hash");if(!c)return;this._hashes[c]=b.content}},this),"changed.owl.carousel":a.proxy(function(c){if(c.namespace&&"position"===c.property.name){var d=this._core.items(this._core.relative(this._core.current())),e=a.map(this._hashes,function(a,b){return a===d?b:null}).join();if(!e||b.location.hash.slice(1)===e)return;b.location.hash=e}},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this.$element.on(this._handlers),a(b).on("hashchange.owl.navigation",a.proxy(function(a){var c=b.location.hash.substring(1),e=this._core.$stage.children(),f=this._hashes[c]&&e.index(this._hashes[c]);void 0!==f&&f!==this._core.current()&&this._core.to(this._core.relative(f),!1,!0)},this))};e.Defaults={URLhashListener:!1},e.prototype.destroy=function(){var c,d;a(b).off("hashchange.owl.navigation");for(c in this._handlers)this._core.$element.off(c,this._handlers[c]);for(d in Object.getOwnPropertyNames(this))"function"!=typeof this[d]&&(this[d]=null)},a.fn.owlCarousel.Constructor.Plugins.Hash=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){function e(b,c){var e=!1,f=b.charAt(0).toUpperCase()+b.slice(1);return a.each((b+" "+h.join(f+" ")+f).split(" "),function(a,b){if(g[b]!==d)return e=!c||b,!1}),e}function f(a){return e(a,!0)}var g=a("<support>").get(0).style,h="Webkit Moz O ms".split(" "),i={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}},animation:{end:{WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",animation:"animationend"}}},j={csstransforms:function(){return!!e("transform")},csstransforms3d:function(){return!!e("perspective")},csstransitions:function(){return!!e("transition")},cssanimations:function(){return!!e("animation")}};j.csstransitions()&&(a.support.transition=new String(f("transition")),a.support.transition.end=i.transition.end[a.support.transition]),j.cssanimations()&&(a.support.animation=new String(f("animation")),a.support.animation.end=i.animation.end[a.support.animation]),j.csstransforms()&&(a.support.transform=new String(f("transform")),a.support.transform3d=j.csstransforms3d())}(window.Zepto||window.jQuery,window,document),function(){"use strict";angular.module("ui.mask",[]).value("uiMaskConfig",{maskDefinitions:{9:/\d/,A:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/},clearOnBlur:!0,clearOnBlurPlaceholder:!1,escChar:"\\",eventsToHandle:["input","keyup","click","focus"],addDefaultPlaceholder:!0,allowInvalidValue:!1}).provider("uiMask.Config",function(){var e={};this.maskDefinitions=function(n){return e.maskDefinitions=n},this.clearOnBlur=function(n){return e.clearOnBlur=n},this.clearOnBlurPlaceholder=function(n){return e.clearOnBlurPlaceholder=n},this.eventsToHandle=function(n){return e.eventsToHandle=n},this.addDefaultPlaceholder=function(n){return e.addDefaultPlaceholder=n},this.allowInvalidValue=function(n){return e.allowInvalidValue=n},this.$get=["uiMaskConfig",function(n){var t=n;for(var a in e)angular.isObject(e[a])&&!angular.isArray(e[a])?angular.extend(t[a],e[a]):t[a]=e[a];return t}]}).directive("uiMask",["uiMask.Config",function(e){function n(e){return e===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(e.type||e.href||~e.tabIndex)}return{priority:100,require:"ngModel",restrict:"A",compile:function(){var t=angular.copy(e);return function(e,a,i,r){function l(e){return angular.isDefined(e)?(w(e),K?(h(),d(),!0):f()):f()}function u(e){e&&(T=e,!K||0===a.val().length&&angular.isDefined(i.placeholder)||a.val(m(p(a.val()))))}function o(){return l(i.uiMask)}function c(e){return K?(j=p(e||""),R=g(j),r.$setValidity("mask",R),j.length&&(R||Q.allowInvalidValue)?m(j):void 0):e}function s(e){return K?(j=p(e||""),R=g(j),r.$viewValue=j.length?m(j):"",r.$setValidity("mask",R),R||Q.allowInvalidValue?J?r.$viewValue:j:void 0):e}function f(){return K=!1,v(),angular.isDefined(q)?a.attr("placeholder",q):a.removeAttr("placeholder"),angular.isDefined(W)?a.attr("maxlength",W):a.removeAttr("maxlength"),a.val(r.$modelValue),r.$viewValue=r.$modelValue,!1}function h(){j=F=p(r.$modelValue||""),H=_=m(j),R=g(j),i.maxlength&&a.attr("maxlength",2*S[S.length-1]),!q&&Q.addDefaultPlaceholder&&a.attr("placeholder",T);for(var e=r.$modelValue,n=r.$formatters.length;n--;)e=r.$formatters[n](e);r.$viewValue=e||"",r.$render()}function d(){Z||(a.bind("blur",y),a.bind("mousedown mouseup",V),a.bind("keydown",M),a.bind(Q.eventsToHandle.join(" "),O),Z=!0)}function v(){Z&&(a.unbind("blur",y),a.unbind("mousedown",V),a.unbind("mouseup",V),a.unbind("keydown",M),a.unbind("input",O),a.unbind("keyup",O),a.unbind("click",O),a.unbind("focus",O),Z=!1)}function g(e){return!e.length||e.length>=I}function p(e){var n,t,i="",r=a[0],l=A.slice(),u=L,o=u+C(r),c="";return e=e.toString(),n=0,t=e.length-T.length,angular.forEach(B,function(a){var i=a.position;i>=u&&o>i||(i>=u&&(i+=t),e.substring(i,i+a.value.length)===a.value&&(c+=e.slice(n,i),n=i+a.value.length))}),e=c+e.slice(n),angular.forEach(e.split(""),function(e){l.length&&l[0].test(e)&&(i+=e,l.shift())}),i}function m(e){var n="",t=S.slice();return angular.forEach(T.split(""),function(a,i){e.length&&i===t[0]?(n+=e.charAt(0)||"_",e=e.substr(1),t.shift()):n+=a}),n}function b(e){var n,t=angular.isDefined(i.uiMaskPlaceholder)?i.uiMaskPlaceholder:i.placeholder;return angular.isDefined(t)&&t[e]?t[e]:(n=angular.isDefined(i.uiMaskPlaceholderChar)&&i.uiMaskPlaceholderChar?i.uiMaskPlaceholderChar:"_","space"===n.toLowerCase()?" ":n[0])}function k(){var e,n,t=T.split("");S&&!isNaN(S[0])&&angular.forEach(S,function(e){t[e]="_"}),e=t.join(""),n=e.replace(/[_]+/g,"_").split("_"),n=n.filter(function(e){return""!==e});var a=0;return n.map(function(n){var t=e.indexOf(n,a);return a=t+1,{value:n,position:t}})}function w(e){var n=0;if(S=[],A=[],T="",angular.isString(e)){I=0;var t=!1,a=0,i=e.split(""),r=!1;angular.forEach(i,function(e,i){r?(r=!1,T+=e,n++):Q.escChar===e?r=!0:Q.maskDefinitions[e]?(S.push(n),T+=b(i-a),A.push(Q.maskDefinitions[e]),n++,t||I++,t=!1):"?"===e?(t=!0,a++):(T+=e,n++)})}S.push(S.slice().pop()+1),B=k(),K=S.length>1}function y(){if((Q.clearOnBlur||Q.clearOnBlurPlaceholder&&0===j.length&&i.placeholder)&&(L=0,N=0,R&&0!==j.length||(H="",a.val(""),e.$apply(function(){r.$pristine||r.$setViewValue("")}))),j!==U){var n=a.val(),t=""===j&&n&&angular.isDefined(i.uiMaskPlaceholderChar)&&"space"===i.uiMaskPlaceholderChar;t&&a.val(""),$(a[0]),t&&a.val(n)}U=j}function $(e){var n;if(angular.isFunction(window.Event)&&!e.fireEvent)try{n=new Event("change",{view:window,bubbles:!0,cancelable:!1})}catch(t){n=document.createEvent("HTMLEvents"),n.initEvent("change",!1,!0)}finally{e.dispatchEvent(n)}else"createEvent"in document?(n=document.createEvent("HTMLEvents"),n.initEvent("change",!1,!0),e.dispatchEvent(n)):e.fireEvent&&e.fireEvent("onchange")}function V(e){"mousedown"===e.type?a.bind("mouseout",E):a.unbind("mouseout",E)}function E(){N=C(this),a.unbind("mouseout",E)}function M(e){var n=8===e.which,t=P(this)-1||0,i=90===e.which&&e.ctrlKey;if(n){for(;t>=0;){if(D(t)){x(this,t+1);break}t--}z=-1===t}i&&(a.val(""),e.preventDefault())}function O(n){n=n||{};var t=n.which,i=n.type;if(16!==t&&91!==t){var l,u=a.val(),o=_,c=!1,s=p(u),f=F,h=P(this)||0,d=L||0,v=h-d,g=S[0],b=S[s.length]||S.slice().shift(),k=N||0,w=C(this)>0,y=k>0,$=u.length>o.length||k&&u.length>o.length-k,V=u.length<o.length||k&&u.length===o.length-k,E=t>=37&&40>=t&&n.shiftKey,M=37===t,O=8===t||"keyup"!==i&&V&&-1===v,A=46===t||"keyup"!==i&&V&&0===v&&!y,B=(M||O||"click"===i)&&h>g;if(N=C(this),!E&&(!w||"click"!==i&&"keyup"!==i&&"focus"!==i)){if(O&&z)return a.val(T),e.$apply(function(){r.$setViewValue("")}),void x(this,d);if("input"===i&&V&&!y&&s===f){for(;O&&h>g&&!D(h);)h--;for(;A&&b>h&&-1===S.indexOf(h);)h++;var I=S.indexOf(h);(s=s.substring(0,I)+s.substring(I+1))!==f&&(c=!0)}for(l=m(s),_=l,F=s,!c&&u.length>l.length&&(c=!0),a.val(l),c&&e.$apply(function(){r.$setViewValue(l)}),$&&g>=h&&(h=g+1),B&&h--,h=h>b?b:g>h?g:h;!D(h)&&h>g&&b>h;)h+=B?-1:1;(B&&b>h||$&&!D(d))&&h++,L=h,x(this,h)}}}function D(e){return S.indexOf(e)>-1}function P(e){if(!e)return 0;if(void 0!==e.selectionStart)return e.selectionStart;if(document.selection&&n(a[0])){e.focus();var t=document.selection.createRange();return t.moveStart("character",e.value?-e.value.length:0),t.text.length}return 0}function x(e,t){if(!e)return 0;if(0!==e.offsetWidth&&0!==e.offsetHeight)if(e.setSelectionRange)n(a[0])&&(e.focus(),e.setSelectionRange(t,t));else if(e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",t),i.select()}}function C(e){return e?void 0!==e.selectionStart?e.selectionEnd-e.selectionStart:window.getSelection?window.getSelection().toString().length:document.selection?document.selection.createRange().text.length:0:0}var S,A,T,B,I,j,H,R,_,F,L,N,z,K=!1,Z=!1,q=i.placeholder,W=i.maxlength,G=r.$isEmpty;r.$isEmpty=function(e){return G(K?p(e||""):e)};var J=!1;i.$observe("modelViewValue",function(e){"true"===e&&(J=!0)}),i.$observe("allowInvalidValue",function(e){Q.allowInvalidValue=""===e||!!e,c(r.$modelValue)});var Q={};i.uiOptions?(Q=e.$eval("["+i.uiOptions+"]"),Q=angular.isObject(Q[0])?function(e,n){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(void 0===n[t]?n[t]=angular.copy(e[t]):angular.isObject(n[t])&&!angular.isArray(n[t])&&(n[t]=angular.extend({},e[t],n[t])));return n}(t,Q[0]):t):Q=t,i.$observe("uiMask",l),angular.isDefined(i.uiMaskPlaceholder)?i.$observe("uiMaskPlaceholder",u):i.$observe("placeholder",u),angular.isDefined(i.uiMaskPlaceholderChar)&&i.$observe("uiMaskPlaceholderChar",o),r.$formatters.unshift(c),r.$parsers.unshift(s);var U=a.val();a.bind("mousedown mouseup",V),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var n=Object(this),t=n.length>>>0;if(0===t)return-1;var a=0;if(arguments.length>1&&(a=Number(arguments[1]),a!==a?a=0:0!==a&&a!==1/0&&a!==-(1/0)&&(a=(a>0||-1)*Math.floor(Math.abs(a)))),a>=t)return-1;for(var i=a>=0?a:Math.max(t-Math.abs(a),0);t>i;i++)if(i in n&&n[i]===e)return i;return-1})}}}}])}(),function(root,factory){"use strict";if("function"==typeof define&&define.amd)define(["angular"],factory);else if("object"==typeof module&&module.exports){var angularObj=angular||require("angular");angularObj&&angularObj.module||"undefined"==typeof angular||(angularObj=angular),module.exports=factory(angularObj)}else factory(root.angular)}(this,function(angular){"use strict";var module=angular.module("rzModule",[]).factory("RzSliderOptions",function(){var defaultOptions={floor:0,ceil:null,step:1,precision:0,minRange:null,maxRange:null,pushRange:!1,minLimit:null,maxLimit:null,id:null,translate:null,getLegend:null,stepsArray:null,bindIndexForStepsArray:!1,draggableRange:!1,draggableRangeOnly:!1,showSelectionBar:!1,showSelectionBarEnd:!1,showSelectionBarFromValue:null,hidePointerLabels:!1,hideLimitLabels:!1,autoHideLimitLabels:!0,readOnly:!1,disabled:!1,interval:350,showTicks:!1,showTicksValues:!1,ticksArray:null,ticksTooltip:null,ticksValuesTooltip:null,vertical:!1,getSelectionBarColor:null,getTickColor:null,getPointerColor:null,keyboardSupport:!0,scale:1,enforceStep:!0,enforceRange:!1,noSwitching:!1,onlyBindHandles:!1,onStart:null,onChange:null,onEnd:null,rightToLeft:!1,boundPointerLabels:!0,mergeRangeLabelsIfSame:!1,customTemplateScope:null,logScale:!1,customValueToPosition:null,customPositionToValue:null,selectionBarGradient:null},globalOptions={},factory={};return factory.options=function(value){angular.extend(globalOptions,value)},factory.getOptions=function(options){return angular.extend({},defaultOptions,globalOptions,options)},factory}).factory("rzThrottle",["$timeout",function($timeout){return function(func,wait,options){var context,args,result,getTime=Date.now||function(){return(new Date).getTime()},timeout=null,previous=0;options=options||{};var later=function(){previous=getTime(),timeout=null,result=func.apply(context,args),context=args=null};return function(){var now=getTime(),remaining=wait-(now-previous);return context=this,args=arguments,remaining<=0?($timeout.cancel(timeout),timeout=null,previous=now,result=func.apply(context,args),context=args=null):timeout||options.trailing===!1||(timeout=$timeout(later,remaining)),result}}}]).factory("RzSlider",["$timeout","$document","$window","$compile","RzSliderOptions","rzThrottle",function($timeout,$document,$window,$compile,RzSliderOptions,rzThrottle){var Slider=function(scope,sliderElem){this.scope=scope,this.lowValue=0,this.highValue=0,this.sliderElem=sliderElem,this.range=void 0!==this.scope.rzSliderModel&&void 0!==this.scope.rzSliderHigh,this.dragging={active:!1,value:0,difference:0,position:0,lowLimit:0,highLimit:0},this.positionProperty="left",this.dimensionProperty="width",this.handleHalfDim=0,this.maxPos=0,this.precision=0,this.step=1,this.tracking="",this.minValue=0,this.maxValue=0,this.valueRange=0,this.intermediateTicks=!1,this.initHasRun=!1,this.firstKeyDown=!1,this.internalChange=!1,this.cmbLabelShown=!1,this.currentFocusElement=null,this.fullBar=null,this.selBar=null,this.minH=null,this.maxH=null,this.flrLab=null,this.ceilLab=null,this.minLab=null,this.maxLab=null,this.cmbLab=null,this.ticks=null,this.init()};return Slider.prototype={init:function(){var thrLow,thrHigh,self=this,calcDimFn=function(){self.calcViewDimensions()};this.applyOptions(),this.syncLowValue(),this.range&&this.syncHighValue(),this.initElemHandles(),this.manageElementsStyle(),this.setDisabledState(),this.calcViewDimensions(),this.setMinAndMax(),this.addAccessibility(),this.updateCeilLab(),this.updateFloorLab(),this.initHandles(),this.manageEventsBindings(),this.scope.$on("reCalcViewDimensions",calcDimFn),angular.element($window).on("resize",calcDimFn),this.initHasRun=!0,thrLow=rzThrottle(function(){self.onLowHandleChange()},self.options.interval),thrHigh=rzThrottle(function(){self.onHighHandleChange()},self.options.interval),this.scope.$on("rzSliderForceRender",function(){self.resetLabelsValue(),thrLow(),self.range&&thrHigh(),self.resetSlider()}),this.scope.$watch("rzSliderOptions()",function(newValue,oldValue){newValue!==oldValue&&(self.applyOptions(),self.syncLowValue(),self.range&&self.syncHighValue(),self.resetSlider())},!0),this.scope.$watch("rzSliderModel",function(newValue,oldValue){self.internalChange||newValue!==oldValue&&thrLow()}),this.scope.$watch("rzSliderHigh",function(newValue,oldValue){self.internalChange||newValue!==oldValue&&(null!=newValue&&thrHigh(),(self.range&&null==newValue||!self.range&&null!=newValue)&&(self.applyOptions(),self.resetSlider()))}),this.scope.$on("$destroy",function(){self.unbindEvents(),angular.element($window).off("resize",calcDimFn),self.currentFocusElement=null})},findStepIndex:function(modelValue){for(var index=0,i=0;i<this.options.stepsArray.length;i++){var step=this.options.stepsArray[i];if(step===modelValue){index=i;break}if(angular.isDate(step)){if(step.getTime()===modelValue.getTime()){index=i;break}}else if(angular.isObject(step)&&(angular.isDate(step.value)&&step.value.getTime()===modelValue.getTime()||step.value===modelValue)){index=i;break}}return index},syncLowValue:function(){this.options.stepsArray?this.options.bindIndexForStepsArray?this.lowValue=this.scope.rzSliderModel:this.lowValue=this.findStepIndex(this.scope.rzSliderModel):this.lowValue=this.scope.rzSliderModel},syncHighValue:function(){this.options.stepsArray?this.options.bindIndexForStepsArray?this.highValue=this.scope.rzSliderHigh:this.highValue=this.findStepIndex(this.scope.rzSliderHigh):this.highValue=this.scope.rzSliderHigh},getStepValue:function(sliderValue){var step=this.options.stepsArray[sliderValue];return angular.isDate(step)?step:angular.isObject(step)?step.value:step},applyLowValue:function(){this.options.stepsArray?this.options.bindIndexForStepsArray?this.scope.rzSliderModel=this.lowValue:this.scope.rzSliderModel=this.getStepValue(this.lowValue):this.scope.rzSliderModel=this.lowValue},applyHighValue:function(){this.options.stepsArray?this.options.bindIndexForStepsArray?this.scope.rzSliderHigh=this.highValue:this.scope.rzSliderHigh=this.getStepValue(this.highValue):this.scope.rzSliderHigh=this.highValue},onLowHandleChange:function(){this.syncLowValue(),this.range&&this.syncHighValue(),this.setMinAndMax(),this.updateLowHandle(this.valueToPosition(this.lowValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateAriaAttributes(),this.range&&this.updateCmbLabel()},onHighHandleChange:function(){this.syncLowValue(),this.syncHighValue(),this.setMinAndMax(),this.updateHighHandle(this.valueToPosition(this.highValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateCmbLabel(),this.updateAriaAttributes()},applyOptions:function(){var sliderOptions;sliderOptions=this.scope.rzSliderOptions?this.scope.rzSliderOptions():{},this.options=RzSliderOptions.getOptions(sliderOptions),this.options.step<=0&&(this.options.step=1),this.range=void 0!==this.scope.rzSliderModel&&void 0!==this.scope.rzSliderHigh,this.options.draggableRange=this.range&&this.options.draggableRange,this.options.draggableRangeOnly=this.range&&this.options.draggableRangeOnly,this.options.draggableRangeOnly&&(this.options.draggableRange=!0),this.options.showTicks=this.options.showTicks||this.options.showTicksValues||!!this.options.ticksArray,this.scope.showTicks=this.options.showTicks,(angular.isNumber(this.options.showTicks)||this.options.ticksArray)&&(this.intermediateTicks=!0),this.options.showSelectionBar=this.options.showSelectionBar||this.options.showSelectionBarEnd||null!==this.options.showSelectionBarFromValue,this.options.stepsArray?this.parseStepsArray():(this.options.translate?this.customTrFn=this.options.translate:this.customTrFn=function(value){return String(value)},this.getLegend=this.options.getLegend),this.options.vertical&&(this.positionProperty="bottom",this.dimensionProperty="height"),this.options.customTemplateScope&&(this.scope.custom=this.options.customTemplateScope)},parseStepsArray:function(){this.options.floor=0,this.options.ceil=this.options.stepsArray.length-1,this.options.step=1,this.options.translate?this.customTrFn=this.options.translate:this.customTrFn=function(modelValue){return this.options.bindIndexForStepsArray?this.getStepValue(modelValue):modelValue},this.getLegend=function(index){var step=this.options.stepsArray[index];return angular.isObject(step)?step.legend:null}},resetSlider:function(){this.manageElementsStyle(),this.addAccessibility(),this.setMinAndMax(),this.updateCeilLab(),this.updateFloorLab(),this.unbindEvents(),this.manageEventsBindings(),this.setDisabledState(),this.calcViewDimensions(),this.refocusPointerIfNeeded()},refocusPointerIfNeeded:function(){this.currentFocusElement&&(this.onPointerFocus(this.currentFocusElement.pointer,this.currentFocusElement.ref),this.focusElement(this.currentFocusElement.pointer))},initElemHandles:function(){angular.forEach(this.sliderElem.children(),function(elem,index){var jElem=angular.element(elem);switch(index){case 0:this.fullBar=jElem;break;case 1:this.selBar=jElem;break;case 2:this.minH=jElem;break;case 3:this.maxH=jElem;break;case 4:this.flrLab=jElem;break;case 5:this.ceilLab=jElem;break;case 6:this.minLab=jElem;break;case 7:this.maxLab=jElem;break;case 8:this.cmbLab=jElem;break;case 9:this.ticks=jElem}},this),this.selBar.rzsp=0,this.minH.rzsp=0,this.maxH.rzsp=0,this.flrLab.rzsp=0,this.ceilLab.rzsp=0,this.minLab.rzsp=0,this.maxLab.rzsp=0,this.cmbLab.rzsp=0},manageElementsStyle:function(){this.range?this.maxH.css("display",""):this.maxH.css("display","none"),this.alwaysHide(this.flrLab,this.options.showTicksValues||this.options.hideLimitLabels),this.alwaysHide(this.ceilLab,this.options.showTicksValues||this.options.hideLimitLabels);var hideLabelsForTicks=this.options.showTicksValues&&!this.intermediateTicks;this.alwaysHide(this.minLab,hideLabelsForTicks||this.options.hidePointerLabels),this.alwaysHide(this.maxLab,hideLabelsForTicks||!this.range||this.options.hidePointerLabels),this.alwaysHide(this.cmbLab,hideLabelsForTicks||!this.range||this.options.hidePointerLabels),this.alwaysHide(this.selBar,!this.range&&!this.options.showSelectionBar),this.options.vertical&&this.sliderElem.addClass("rz-vertical"),this.options.draggableRange?this.selBar.addClass("rz-draggable"):this.selBar.removeClass("rz-draggable"),this.intermediateTicks&&this.options.showTicksValues&&this.ticks.addClass("rz-ticks-values-under")},alwaysHide:function(el,hide){el.rzAlwaysHide=hide,hide?this.hideEl(el):this.showEl(el)},manageEventsBindings:function(){this.options.disabled||this.options.readOnly?this.unbindEvents():this.bindEvents()},setDisabledState:function(){this.options.disabled?this.sliderElem.attr("disabled","disabled"):this.sliderElem.attr("disabled",null)},resetLabelsValue:function(){this.minLab.rzsv=void 0,this.maxLab.rzsv=void 0},initHandles:function(){this.updateLowHandle(this.valueToPosition(this.lowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.highValue)),this.updateSelectionBar(),this.range&&this.updateCmbLabel(),this.updateTicksScale()},translateFn:function(value,label,which,useCustomTr){useCustomTr=void 0===useCustomTr||useCustomTr;var valStr="",getDimension=!1,noLabelInjection=label.hasClass("no-label-injection");useCustomTr?(this.options.stepsArray&&!this.options.bindIndexForStepsArray&&(value=this.getStepValue(value)),valStr=String(this.customTrFn(value,this.options.id,which))):valStr=String(value),(void 0===label.rzsv||label.rzsv.length!==valStr.length||label.rzsv.length>0&&0===label.rzsd)&&(getDimension=!0,label.rzsv=valStr),noLabelInjection||label.html(valStr),this.scope[which+"Label"]=valStr,getDimension&&this.getDimension(label)},setMinAndMax:function(){if(this.step=+this.options.step,this.precision=+this.options.precision,this.minValue=this.options.floor,this.options.logScale&&0===this.minValue)throw Error("Can't use floor=0 with logarithmic scale");this.options.enforceStep&&(this.lowValue=this.roundStep(this.lowValue),this.range&&(this.highValue=this.roundStep(this.highValue))),
null!=this.options.ceil?this.maxValue=this.options.ceil:this.maxValue=this.options.ceil=this.range?this.highValue:this.lowValue,this.options.enforceRange&&(this.lowValue=this.sanitizeValue(this.lowValue),this.range&&(this.highValue=this.sanitizeValue(this.highValue))),this.applyLowValue(),this.range&&this.applyHighValue(),this.valueRange=this.maxValue-this.minValue},addAccessibility:function(){this.minH.attr("role","slider"),this.updateAriaAttributes(),!this.options.keyboardSupport||this.options.readOnly||this.options.disabled?this.minH.attr("tabindex",""):this.minH.attr("tabindex","0"),this.options.vertical&&this.minH.attr("aria-orientation","vertical"),this.range&&(this.maxH.attr("role","slider"),!this.options.keyboardSupport||this.options.readOnly||this.options.disabled?this.maxH.attr("tabindex",""):this.maxH.attr("tabindex","0"),this.options.vertical&&this.maxH.attr("aria-orientation","vertical"))},updateAriaAttributes:function(){this.minH.attr({"aria-valuenow":this.scope.rzSliderModel,"aria-valuetext":this.customTrFn(this.scope.rzSliderModel,this.options.id,"model"),"aria-valuemin":this.minValue,"aria-valuemax":this.maxValue}),this.range&&this.maxH.attr({"aria-valuenow":this.scope.rzSliderHigh,"aria-valuetext":this.customTrFn(this.scope.rzSliderHigh,this.options.id,"high"),"aria-valuemin":this.minValue,"aria-valuemax":this.maxValue})},calcViewDimensions:function(){var handleWidth=this.getDimension(this.minH);if(this.handleHalfDim=handleWidth/2,this.barDimension=this.getDimension(this.fullBar),this.maxPos=this.barDimension-handleWidth,this.getDimension(this.sliderElem),this.sliderElem.rzsp=this.sliderElem[0].getBoundingClientRect()[this.positionProperty],this.initHasRun){this.updateFloorLab(),this.updateCeilLab(),this.initHandles();var self=this;$timeout(function(){self.updateTicksScale()})}},updateTicksScale:function(){if(this.options.showTicks){var ticksArray=this.options.ticksArray||this.getTicksArray(),translate=this.options.vertical?"translateY":"translateX",self=this;this.options.rightToLeft&&ticksArray.reverse(),this.scope.ticks=ticksArray.map(function(value){var position=self.valueToPosition(value);self.options.vertical&&(position=self.maxPos-position);var tick={selected:self.isTickSelected(value),style:{transform:translate+"("+Math.round(position)+"px)"}};if(tick.selected&&self.options.getSelectionBarColor&&(tick.style["background-color"]=self.getSelectionBarColor()),!tick.selected&&self.options.getTickColor&&(tick.style["background-color"]=self.getTickColor(value)),self.options.ticksTooltip&&(tick.tooltip=self.options.ticksTooltip(value),tick.tooltipPlacement=self.options.vertical?"right":"top"),self.options.showTicksValues&&(tick.value=self.getDisplayValue(value,"tick-value"),self.options.ticksValuesTooltip&&(tick.valueTooltip=self.options.ticksValuesTooltip(value),tick.valueTooltipPlacement=self.options.vertical?"right":"top")),self.getLegend){var legend=self.getLegend(value,self.options.id);legend&&(tick.legend=legend)}return tick})}},getTicksArray:function(){var step=this.step,ticksArray=[];this.intermediateTicks&&(step=this.options.showTicks);for(var value=this.minValue;value<=this.maxValue;value+=step)ticksArray.push(value);return ticksArray},isTickSelected:function(value){if(!this.range)if(null!==this.options.showSelectionBarFromValue){var center=this.options.showSelectionBarFromValue;if(this.lowValue>center&&value>=center&&value<=this.lowValue)return!0;if(this.lowValue<center&&value<=center&&value>=this.lowValue)return!0}else if(this.options.showSelectionBarEnd){if(value>=this.lowValue)return!0}else if(this.options.showSelectionBar&&value<=this.lowValue)return!0;return!!(this.range&&value>=this.lowValue&&value<=this.highValue)},updateFloorLab:function(){this.translateFn(this.minValue,this.flrLab,"floor"),this.getDimension(this.flrLab);var position=this.options.rightToLeft?this.barDimension-this.flrLab.rzsd:0;this.setPosition(this.flrLab,position)},updateCeilLab:function(){this.translateFn(this.maxValue,this.ceilLab,"ceil"),this.getDimension(this.ceilLab);var position=this.options.rightToLeft?0:this.barDimension-this.ceilLab.rzsd;this.setPosition(this.ceilLab,position)},updateHandles:function(which,newPos){"lowValue"===which?this.updateLowHandle(newPos):this.updateHighHandle(newPos),this.updateSelectionBar(),this.updateTicksScale(),this.range&&this.updateCmbLabel()},getHandleLabelPos:function(labelName,newPos){var labelRzsd=this[labelName].rzsd,nearHandlePos=newPos-labelRzsd/2+this.handleHalfDim,endOfBarPos=this.barDimension-labelRzsd;return this.options.boundPointerLabels?this.options.rightToLeft&&"minLab"===labelName||!this.options.rightToLeft&&"maxLab"===labelName?Math.min(nearHandlePos,endOfBarPos):Math.min(Math.max(nearHandlePos,0),endOfBarPos):nearHandlePos},updateLowHandle:function(newPos){if(this.setPosition(this.minH,newPos),this.translateFn(this.lowValue,this.minLab,"model"),this.setPosition(this.minLab,this.getHandleLabelPos("minLab",newPos)),this.options.getPointerColor){var pointercolor=this.getPointerColor("min");this.scope.minPointerStyle={backgroundColor:pointercolor}}this.options.autoHideLimitLabels&&this.shFloorCeil()},updateHighHandle:function(newPos){if(this.setPosition(this.maxH,newPos),this.translateFn(this.highValue,this.maxLab,"high"),this.setPosition(this.maxLab,this.getHandleLabelPos("maxLab",newPos)),this.options.getPointerColor){var pointercolor=this.getPointerColor("max");this.scope.maxPointerStyle={backgroundColor:pointercolor}}this.options.autoHideLimitLabels&&this.shFloorCeil()},shFloorCeil:function(){if(!this.options.hidePointerLabels){var flHidden=!1,clHidden=!1,isMinLabAtFloor=this.isLabelBelowFloorLab(this.minLab),isMinLabAtCeil=this.isLabelAboveCeilLab(this.minLab),isMaxLabAtCeil=this.isLabelAboveCeilLab(this.maxLab),isCmbLabAtFloor=this.isLabelBelowFloorLab(this.cmbLab),isCmbLabAtCeil=this.isLabelAboveCeilLab(this.cmbLab);if(isMinLabAtFloor?(flHidden=!0,this.hideEl(this.flrLab)):(flHidden=!1,this.showEl(this.flrLab)),isMinLabAtCeil?(clHidden=!0,this.hideEl(this.ceilLab)):(clHidden=!1,this.showEl(this.ceilLab)),this.range){var hideCeil=this.cmbLabelShown?isCmbLabAtCeil:isMaxLabAtCeil,hideFloor=this.cmbLabelShown?isCmbLabAtFloor:isMinLabAtFloor;hideCeil?this.hideEl(this.ceilLab):clHidden||this.showEl(this.ceilLab),hideFloor?this.hideEl(this.flrLab):flHidden||this.showEl(this.flrLab)}}},isLabelBelowFloorLab:function(label){var isRTL=this.options.rightToLeft,pos=label.rzsp,dim=label.rzsd,floorPos=this.flrLab.rzsp,floorDim=this.flrLab.rzsd;return isRTL?pos+dim>=floorPos-2:pos<=floorPos+floorDim+2},isLabelAboveCeilLab:function(label){var isRTL=this.options.rightToLeft,pos=label.rzsp,dim=label.rzsd,ceilPos=this.ceilLab.rzsp,ceilDim=this.ceilLab.rzsd;return isRTL?pos<=ceilPos+ceilDim+2:pos+dim>=ceilPos-2},updateSelectionBar:function(){var position=0,dimension=0,isSelectionBarFromRight=this.options.rightToLeft?!this.options.showSelectionBarEnd:this.options.showSelectionBarEnd,positionForRange=this.options.rightToLeft?this.maxH.rzsp+this.handleHalfDim:this.minH.rzsp+this.handleHalfDim;if(this.range)dimension=Math.abs(this.maxH.rzsp-this.minH.rzsp),position=positionForRange;else if(null!==this.options.showSelectionBarFromValue){var center=this.options.showSelectionBarFromValue,centerPosition=this.valueToPosition(center),isModelGreaterThanCenter=this.options.rightToLeft?this.lowValue<=center:this.lowValue>center;isModelGreaterThanCenter?(dimension=this.minH.rzsp-centerPosition,position=centerPosition+this.handleHalfDim):(dimension=centerPosition-this.minH.rzsp,position=this.minH.rzsp+this.handleHalfDim)}else isSelectionBarFromRight?(dimension=Math.abs(this.maxPos-this.minH.rzsp)+this.handleHalfDim,position=this.minH.rzsp+this.handleHalfDim):(dimension=Math.abs(this.maxH.rzsp-this.minH.rzsp)+this.handleHalfDim,position=0);if(this.setDimension(this.selBar,dimension),this.setPosition(this.selBar,position),this.options.getSelectionBarColor){var color=this.getSelectionBarColor();this.scope.barStyle={backgroundColor:color}}else if(this.options.selectionBarGradient){var offset=null!==this.options.showSelectionBarFromValue?this.valueToPosition(this.options.showSelectionBarFromValue):0,reversed=offset-position>0^isSelectionBarFromRight,direction=this.options.vertical?reversed?"bottom":"top":reversed?"left":"right";this.scope.barStyle={backgroundImage:"linear-gradient(to "+direction+", "+this.options.selectionBarGradient.from+" 0%,"+this.options.selectionBarGradient.to+" 100%)"},this.options.vertical?(this.scope.barStyle.backgroundPosition="center "+(offset+dimension+position+(reversed?-this.handleHalfDim:0))+"px",this.scope.barStyle.backgroundSize="100% "+(this.barDimension-this.handleHalfDim)+"px"):(this.scope.barStyle.backgroundPosition=offset-position+(reversed?this.handleHalfDim:0)+"px center",this.scope.barStyle.backgroundSize=this.barDimension-this.handleHalfDim+"px 100%")}},getSelectionBarColor:function(){return this.range?this.options.getSelectionBarColor(this.scope.rzSliderModel,this.scope.rzSliderHigh):this.options.getSelectionBarColor(this.scope.rzSliderModel)},getPointerColor:function(pointerType){return"max"===pointerType?this.options.getPointerColor(this.scope.rzSliderHigh,pointerType):this.options.getPointerColor(this.scope.rzSliderModel,pointerType)},getTickColor:function(value){return this.options.getTickColor(value)},updateCmbLabel:function(){if(this.options.rightToLeft?this.minLab.rzsp-this.minLab.rzsd-10<=this.maxLab.rzsp:this.minLab.rzsp+this.minLab.rzsd+10>=this.maxLab.rzsp){var lowTr=this.getDisplayValue(this.lowValue,"model"),highTr=this.getDisplayValue(this.highValue,"high"),labelVal="";labelVal=this.options.mergeRangeLabelsIfSame&&lowTr===highTr?lowTr:this.options.rightToLeft?highTr+" - "+lowTr:lowTr+" - "+highTr,this.translateFn(labelVal,this.cmbLab,"cmb",!1);var pos=this.options.boundPointerLabels?Math.min(Math.max(this.selBar.rzsp+this.selBar.rzsd/2-this.cmbLab.rzsd/2,0),this.barDimension-this.cmbLab.rzsd):this.selBar.rzsp+this.selBar.rzsd/2-this.cmbLab.rzsd/2;this.setPosition(this.cmbLab,pos),this.cmbLabelShown=!0,this.hideEl(this.minLab),this.hideEl(this.maxLab),this.showEl(this.cmbLab)}else this.cmbLabelShown=!1,this.showEl(this.maxLab),this.showEl(this.minLab),this.hideEl(this.cmbLab);this.options.autoHideLimitLabels&&this.shFloorCeil()},getDisplayValue:function(value,which){return this.options.stepsArray&&!this.options.bindIndexForStepsArray&&(value=this.getStepValue(value)),this.customTrFn(value,this.options.id,which)},roundStep:function(value,customStep){var step=customStep?customStep:this.step,steppedDifference=parseFloat((value-this.minValue)/step).toPrecision(12);return steppedDifference=Math.round(+steppedDifference)*step,+(this.minValue+steppedDifference).toFixed(this.precision)},hideEl:function(element){return element.css({visibility:"hidden"})},showEl:function(element){return element.rzAlwaysHide?element:element.css({visibility:"visible"})},setPosition:function(elem,pos){elem.rzsp=pos;var css={};return css[this.positionProperty]=Math.round(pos)+"px",elem.css(css),pos},getDimension:function(elem){var val=elem[0].getBoundingClientRect();return this.options.vertical?elem.rzsd=(val.bottom-val.top)*this.options.scale:elem.rzsd=(val.right-val.left)*this.options.scale,elem.rzsd},setDimension:function(elem,dim){elem.rzsd=dim;var css={};return css[this.dimensionProperty]=Math.round(dim)+"px",elem.css(css),dim},sanitizeValue:function(val){return Math.min(Math.max(val,this.minValue),this.maxValue)},valueToPosition:function(val){var fn=this.linearValueToPosition;this.options.customValueToPosition?fn=this.options.customValueToPosition:this.options.logScale&&(fn=this.logValueToPosition),val=this.sanitizeValue(val);var percent=fn(val,this.minValue,this.maxValue)||0;return this.options.rightToLeft&&(percent=1-percent),percent*this.maxPos},linearValueToPosition:function(val,minVal,maxVal){return(val-minVal)/(maxVal-minVal)},logValueToPosition:function(val,minVal,maxVal){return val=Math.log(val),minVal=Math.log(minVal),maxVal=Math.log(maxVal),(val-minVal)/(maxVal-minVal)},positionToValue:function(position){var percent=position/this.maxPos;this.options.rightToLeft&&(percent=1-percent);var fn=this.linearPositionToValue;return this.options.customPositionToValue?fn=this.options.customPositionToValue:this.options.logScale&&(fn=this.logPositionToValue),fn(percent,this.minValue,this.maxValue)||0},linearPositionToValue:function(percent,minVal,maxVal){return percent*(maxVal-minVal)+minVal},logPositionToValue:function(percent,minVal,maxVal){minVal=Math.log(minVal),maxVal=Math.log(maxVal);var value=percent*(maxVal-minVal)+minVal;return Math.exp(value)},getEventXY:function(event){var clientXY=this.options.vertical?"clientY":"clientX";return void 0!==event[clientXY]?event[clientXY]:void 0===event.originalEvent?event.touches[0][clientXY]:event.originalEvent.touches[0][clientXY]},getEventPosition:function(event){var sliderPos=this.sliderElem.rzsp;return(this.options.vertical?-this.getEventXY(event)+sliderPos:this.getEventXY(event)-sliderPos)*this.options.scale-this.handleHalfDim},getEventNames:function(event){var eventNames={moveEvent:"",endEvent:""};return event.touches||void 0!==event.originalEvent&&event.originalEvent.touches?(eventNames.moveEvent="touchmove",eventNames.endEvent="touchend"):(eventNames.moveEvent="mousemove",eventNames.endEvent="mouseup"),eventNames},getNearestHandle:function(event){if(!this.range)return this.minH;var position=this.getEventPosition(event),distanceMin=Math.abs(position-this.minH.rzsp),distanceMax=Math.abs(position-this.maxH.rzsp);return distanceMin<distanceMax?this.minH:distanceMin>distanceMax?this.maxH:this.options.rightToLeft?position>this.minH.rzsp?this.minH:this.maxH:position<this.minH.rzsp?this.minH:this.maxH},focusElement:function(el){el[0].focus()},bindEvents:function(){var barTracking,barStart,barMove;this.options.draggableRange?(barTracking="rzSliderDrag",barStart=this.onDragStart,barMove=this.onDragMove):(barTracking="lowValue",barStart=this.onStart,barMove=this.onMove),this.options.onlyBindHandles||(this.selBar.on("mousedown",angular.bind(this,barStart,null,barTracking)),this.selBar.on("mousedown",angular.bind(this,barMove,this.selBar))),this.options.draggableRangeOnly?(this.minH.on("mousedown",angular.bind(this,barStart,null,barTracking)),this.maxH.on("mousedown",angular.bind(this,barStart,null,barTracking))):(this.minH.on("mousedown",angular.bind(this,this.onStart,this.minH,"lowValue")),this.range&&this.maxH.on("mousedown",angular.bind(this,this.onStart,this.maxH,"highValue")),this.options.onlyBindHandles||(this.fullBar.on("mousedown",angular.bind(this,this.onStart,null,null)),this.fullBar.on("mousedown",angular.bind(this,this.onMove,this.fullBar)),this.ticks.on("mousedown",angular.bind(this,this.onStart,null,null)),this.ticks.on("mousedown",angular.bind(this,this.onTickClick,this.ticks)))),this.options.onlyBindHandles||(this.selBar.on("touchstart",angular.bind(this,barStart,null,barTracking)),this.selBar.on("touchstart",angular.bind(this,barMove,this.selBar))),this.options.draggableRangeOnly?(this.minH.on("touchstart",angular.bind(this,barStart,null,barTracking)),this.maxH.on("touchstart",angular.bind(this,barStart,null,barTracking))):(this.minH.on("touchstart",angular.bind(this,this.onStart,this.minH,"lowValue")),this.range&&this.maxH.on("touchstart",angular.bind(this,this.onStart,this.maxH,"highValue")),this.options.onlyBindHandles||(this.fullBar.on("touchstart",angular.bind(this,this.onStart,null,null)),this.fullBar.on("touchstart",angular.bind(this,this.onMove,this.fullBar)),this.ticks.on("touchstart",angular.bind(this,this.onStart,null,null)),this.ticks.on("touchstart",angular.bind(this,this.onTickClick,this.ticks)))),this.options.keyboardSupport&&(this.minH.on("focus",angular.bind(this,this.onPointerFocus,this.minH,"lowValue")),this.range&&this.maxH.on("focus",angular.bind(this,this.onPointerFocus,this.maxH,"highValue")))},unbindEvents:function(){this.minH.off(),this.maxH.off(),this.fullBar.off(),this.selBar.off(),this.ticks.off()},onStart:function(pointer,ref,event){var ehMove,ehEnd,eventNames=this.getEventNames(event);event.stopPropagation(),event.preventDefault(),this.calcViewDimensions(),pointer?this.tracking=ref:(pointer=this.getNearestHandle(event),this.tracking=pointer===this.minH?"lowValue":"highValue"),pointer.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(pointer),ehMove=angular.bind(this,this.dragging.active?this.onDragMove:this.onMove,pointer),ehEnd=angular.bind(this,this.onEnd,ehMove),$document.on(eventNames.moveEvent,ehMove),$document.one(eventNames.endEvent,ehEnd),this.callOnStart()},onMove:function(pointer,event,fromTick){var newValue,newPos=this.getEventPosition(event),ceilValue=this.options.rightToLeft?this.minValue:this.maxValue,flrValue=this.options.rightToLeft?this.maxValue:this.minValue;newPos<=0?newValue=flrValue:newPos>=this.maxPos?newValue=ceilValue:(newValue=this.positionToValue(newPos),newValue=fromTick&&angular.isNumber(this.options.showTicks)?this.roundStep(newValue,this.options.showTicks):this.roundStep(newValue)),this.positionTrackingHandle(newValue)},onEnd:function(ehMove,event){var moveEventName=this.getEventNames(event).moveEvent;this.options.keyboardSupport||(this.minH.removeClass("rz-active"),this.maxH.removeClass("rz-active"),this.tracking=""),this.dragging.active=!1,$document.off(moveEventName,ehMove),this.callOnEnd()},onTickClick:function(pointer,event){this.onMove(pointer,event,!0)},onPointerFocus:function(pointer,ref){this.tracking=ref,pointer.one("blur",angular.bind(this,this.onPointerBlur,pointer)),pointer.on("keydown",angular.bind(this,this.onKeyboardEvent)),pointer.on("keyup",angular.bind(this,this.onKeyUp)),this.firstKeyDown=!0,pointer.addClass("rz-active"),this.currentFocusElement={pointer:pointer,ref:ref}},onKeyUp:function(){this.firstKeyDown=!0,this.callOnEnd()},onPointerBlur:function(pointer){pointer.off("keydown"),pointer.off("keyup"),this.tracking="",pointer.removeClass("rz-active"),this.currentFocusElement=null},getKeyActions:function(currentValue){var increaseStep=currentValue+this.step,decreaseStep=currentValue-this.step,increasePage=currentValue+this.valueRange/10,decreasePage=currentValue-this.valueRange/10,actions={UP:increaseStep,DOWN:decreaseStep,LEFT:decreaseStep,RIGHT:increaseStep,PAGEUP:increasePage,PAGEDOWN:decreasePage,HOME:this.minValue,END:this.maxValue};return this.options.rightToLeft&&(actions.LEFT=increaseStep,actions.RIGHT=decreaseStep,this.options.vertical&&(actions.UP=decreaseStep,actions.DOWN=increaseStep)),actions},onKeyboardEvent:function(event){var currentValue=this[this.tracking],keyCode=event.keyCode||event.which,keys={38:"UP",40:"DOWN",37:"LEFT",39:"RIGHT",33:"PAGEUP",34:"PAGEDOWN",36:"HOME",35:"END"},actions=this.getKeyActions(currentValue),key=keys[keyCode],action=actions[key];if(null!=action&&""!==this.tracking){event.preventDefault(),this.firstKeyDown&&(this.firstKeyDown=!1,this.callOnStart());var self=this;$timeout(function(){var newValue=self.roundStep(self.sanitizeValue(action));if(self.options.draggableRangeOnly){var newMinValue,newMaxValue,difference=self.highValue-self.lowValue;"lowValue"===self.tracking?(newMinValue=newValue,(newMaxValue=newValue+difference)>self.maxValue&&(newMaxValue=self.maxValue,newMinValue=newMaxValue-difference)):(newMaxValue=newValue,(newMinValue=newValue-difference)<self.minValue&&(newMinValue=self.minValue,newMaxValue=newMinValue+difference)),self.positionTrackingBar(newMinValue,newMaxValue)}else self.positionTrackingHandle(newValue)})}},onDragStart:function(pointer,ref,event){var position=this.getEventPosition(event);this.dragging={active:!0,value:this.positionToValue(position),difference:this.highValue-this.lowValue,lowLimit:this.options.rightToLeft?this.minH.rzsp-position:position-this.minH.rzsp,highLimit:this.options.rightToLeft?position-this.maxH.rzsp:this.maxH.rzsp-position},this.onStart(pointer,ref,event)},getValue:function(type,newPos,outOfBounds,isAbove){var isRTL=this.options.rightToLeft,value=null;return value="min"===type?outOfBounds?isAbove?isRTL?this.minValue:this.maxValue-this.dragging.difference:isRTL?this.maxValue-this.dragging.difference:this.minValue:isRTL?this.positionToValue(newPos+this.dragging.lowLimit):this.positionToValue(newPos-this.dragging.lowLimit):outOfBounds?isAbove?isRTL?this.minValue+this.dragging.difference:this.maxValue:isRTL?this.maxValue:this.minValue+this.dragging.difference:isRTL?this.positionToValue(newPos+this.dragging.lowLimit)+this.dragging.difference:this.positionToValue(newPos-this.dragging.lowLimit)+this.dragging.difference,this.roundStep(value)},onDragMove:function(pointer,event){var newMinValue,newMaxValue,ceilLimit,flrLimit,isUnderFlrLimit,isOverCeilLimit,flrH,ceilH,newPos=this.getEventPosition(event);if(this.options.rightToLeft?(ceilLimit=this.dragging.lowLimit,flrLimit=this.dragging.highLimit,flrH=this.maxH,ceilH=this.minH):(ceilLimit=this.dragging.highLimit,flrLimit=this.dragging.lowLimit,flrH=this.minH,ceilH=this.maxH),isUnderFlrLimit=newPos<=flrLimit,isOverCeilLimit=newPos>=this.maxPos-ceilLimit,isUnderFlrLimit){if(0===flrH.rzsp)return;newMinValue=this.getValue("min",newPos,!0,!1),newMaxValue=this.getValue("max",newPos,!0,!1)}else if(isOverCeilLimit){if(ceilH.rzsp===this.maxPos)return;newMaxValue=this.getValue("max",newPos,!0,!0),newMinValue=this.getValue("min",newPos,!0,!0)}else newMinValue=this.getValue("min",newPos,!1),newMaxValue=this.getValue("max",newPos,!1);this.positionTrackingBar(newMinValue,newMaxValue)},positionTrackingBar:function(newMinValue,newMaxValue){null!=this.options.minLimit&&newMinValue<this.options.minLimit&&(newMinValue=this.options.minLimit,newMaxValue=newMinValue+this.dragging.difference),null!=this.options.maxLimit&&newMaxValue>this.options.maxLimit&&(newMaxValue=this.options.maxLimit,newMinValue=newMaxValue-this.dragging.difference),this.lowValue=newMinValue,this.highValue=newMaxValue,this.applyLowValue(),this.range&&this.applyHighValue(),this.applyModel(!0),this.updateHandles("lowValue",this.valueToPosition(newMinValue)),this.updateHandles("highValue",this.valueToPosition(newMaxValue))},positionTrackingHandle:function(newValue){var valueChanged=!1;newValue=this.applyMinMaxLimit(newValue),this.range&&(this.options.pushRange?(newValue=this.applyPushRange(newValue),valueChanged=!0):(this.options.noSwitching&&("lowValue"===this.tracking&&newValue>this.highValue?newValue=this.applyMinMaxRange(this.highValue):"highValue"===this.tracking&&newValue<this.lowValue&&(newValue=this.applyMinMaxRange(this.lowValue))),newValue=this.applyMinMaxRange(newValue),"lowValue"===this.tracking&&newValue>this.highValue?(this.lowValue=this.highValue,this.applyLowValue(),this.applyModel(),this.updateHandles(this.tracking,this.maxH.rzsp),this.updateAriaAttributes(),this.tracking="highValue",this.minH.removeClass("rz-active"),this.maxH.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(this.maxH),valueChanged=!0):"highValue"===this.tracking&&newValue<this.lowValue&&(this.highValue=this.lowValue,this.applyHighValue(),this.applyModel(),this.updateHandles(this.tracking,this.minH.rzsp),this.updateAriaAttributes(),this.tracking="lowValue",this.maxH.removeClass("rz-active"),this.minH.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(this.minH),valueChanged=!0))),this[this.tracking]!==newValue&&(this[this.tracking]=newValue,"lowValue"===this.tracking?this.applyLowValue():this.applyHighValue(),this.applyModel(),this.updateHandles(this.tracking,this.valueToPosition(newValue)),this.updateAriaAttributes(),valueChanged=!0),valueChanged&&this.applyModel(!0)},applyMinMaxLimit:function(newValue){return null!=this.options.minLimit&&newValue<this.options.minLimit?this.options.minLimit:null!=this.options.maxLimit&&newValue>this.options.maxLimit?this.options.maxLimit:newValue},applyMinMaxRange:function(newValue){var oppositeValue="lowValue"===this.tracking?this.highValue:this.lowValue,difference=Math.abs(newValue-oppositeValue);return null!=this.options.minRange&&difference<this.options.minRange?"lowValue"===this.tracking?this.highValue-this.options.minRange:this.lowValue+this.options.minRange:null!=this.options.maxRange&&difference>this.options.maxRange?"lowValue"===this.tracking?this.highValue-this.options.maxRange:this.lowValue+this.options.maxRange:newValue},applyPushRange:function(newValue){var difference="lowValue"===this.tracking?this.highValue-newValue:newValue-this.lowValue,minRange=null!==this.options.minRange?this.options.minRange:this.options.step,maxRange=this.options.maxRange;return difference<minRange?("lowValue"===this.tracking?(this.highValue=Math.min(newValue+minRange,this.maxValue),newValue=this.highValue-minRange,this.applyHighValue(),this.updateHandles("highValue",this.valueToPosition(this.highValue))):(this.lowValue=Math.max(newValue-minRange,this.minValue),newValue=this.lowValue+minRange,this.applyLowValue(),this.updateHandles("lowValue",this.valueToPosition(this.lowValue))),this.updateAriaAttributes()):null!==maxRange&&difference>maxRange&&("lowValue"===this.tracking?(this.highValue=newValue+maxRange,this.applyHighValue(),this.updateHandles("highValue",this.valueToPosition(this.highValue))):(this.lowValue=newValue-maxRange,this.applyLowValue(),this.updateHandles("lowValue",this.valueToPosition(this.lowValue))),this.updateAriaAttributes()),newValue},applyModel:function(callOnChange){this.internalChange=!0,this.scope.$apply(),callOnChange&&this.callOnChange(),this.internalChange=!1},callOnStart:function(){if(this.options.onStart){var self=this,pointerType="lowValue"===this.tracking?"min":"max";this.scope.$evalAsync(function(){self.options.onStart(self.options.id,self.scope.rzSliderModel,self.scope.rzSliderHigh,pointerType)})}},callOnChange:function(){if(this.options.onChange){var self=this,pointerType="lowValue"===this.tracking?"min":"max";this.scope.$evalAsync(function(){self.options.onChange(self.options.id,self.scope.rzSliderModel,self.scope.rzSliderHigh,pointerType)})}},callOnEnd:function(){if(this.options.onEnd){var self=this,pointerType="lowValue"===this.tracking?"min":"max";this.scope.$evalAsync(function(){self.options.onEnd(self.options.id,self.scope.rzSliderModel,self.scope.rzSliderHigh,pointerType)})}this.scope.$emit("slideEnded")}},Slider}]).directive("rzslider",["RzSlider",function(RzSlider){return{restrict:"AE",replace:!0,scope:{rzSliderModel:"=?",rzSliderHigh:"=?",rzSliderOptions:"&?",rzSliderTplUrl:"@"},templateUrl:function(elem,attrs){return attrs.rzSliderTplUrl||"rzSliderTpl.html"},link:function(scope,elem){scope.slider=new RzSlider(scope,elem)}}}]);return module.run(["$templateCache",function($templateCache){$templateCache.put("rzSliderTpl.html",'<div class=rzslider><span class=rz-bar-wrapper><span class=rz-bar></span></span> <span class=rz-bar-wrapper><span class="rz-bar rz-selection" ng-style=barStyle></span></span> <span class="rz-pointer rz-pointer-min" ng-style=minPointerStyle></span> <span class="rz-pointer rz-pointer-max" ng-style=maxPointerStyle></span> <span class="rz-bubble rz-limit rz-floor"></span> <span class="rz-bubble rz-limit rz-ceil"></span> <span class=rz-bubble></span> <span class=rz-bubble></span> <span class=rz-bubble></span><ul ng-show=showTicks class=rz-ticks><li ng-repeat="t in ticks track by $index" class=rz-tick ng-class="{\'rz-selected\': t.selected}" ng-style=t.style ng-attr-uib-tooltip="{{ t.tooltip }}" ng-attr-tooltip-placement={{t.tooltipPlacement}} ng-attr-tooltip-append-to-body="{{ t.tooltip ? true : undefined}}"><span ng-if="t.value != null" class=rz-tick-value ng-attr-uib-tooltip="{{ t.valueTooltip }}" ng-attr-tooltip-placement={{t.valueTooltipPlacement}}>{{ t.value }}</span> <span ng-if="t.legend != null" class=rz-tick-legend>{{ t.legend }}</span></li></ul></div>')}]),module.name}),function(t,e){"use strict";function n(){if(!i.READY){i.event.determineEventTypes();for(var t in i.gestures)i.gestures.hasOwnProperty(t)&&i.detection.register(i.gestures[t]);i.event.onTouch(i.DOCUMENT,i.EVENT_MOVE,i.detection.detect),i.event.onTouch(i.DOCUMENT,i.EVENT_END,i.detection.detect),i.READY=!0}}var i=function(t,e){return new i.Instance(t,e||{})};i.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},i.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,i.HAS_TOUCHEVENTS="ontouchstart"in t,i.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i,i.NO_MOUSEEVENTS=i.HAS_TOUCHEVENTS&&navigator.userAgent.match(i.MOBILE_REGEX),i.EVENT_TYPES={},i.DIRECTION_DOWN="down",i.DIRECTION_LEFT="left",i.DIRECTION_UP="up",i.DIRECTION_RIGHT="right",i.POINTER_MOUSE="mouse",i.POINTER_TOUCH="touch",i.POINTER_PEN="pen",i.EVENT_START="start",i.EVENT_MOVE="move",i.EVENT_END="end",i.DOCUMENT=document,i.plugins={},i.READY=!1,i.Instance=function(t,e){var r=this;return n(),this.element=t,this.enabled=!0,this.options=i.utils.extend(i.utils.extend({},i.defaults),e||{}),this.options.stop_browser_behavior&&i.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),i.event.onTouch(t,i.EVENT_START,function(t){r.enabled&&i.detection.startDetect(r,t)}),this},i.Instance.prototype={on:function(t,e){for(var n=t.split(" "),i=0;n.length>i;i++)this.element.addEventListener(n[i],e,!1);return this},off:function(t,e){for(var n=t.split(" "),i=0;n.length>i;i++)this.element.removeEventListener(n[i],e,!1);return this},trigger:function(t,e){var n=i.DOCUMENT.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e;var r=this.element;return i.utils.hasParent(e.target,r)&&(r=e.target),r.dispatchEvent(n),this},enable:function(t){return this.enabled=t,this}};var r=null,o=!1,s=!1;i.event={bindDom:function(t,e,n){for(var i=e.split(" "),r=0;i.length>r;r++)t.addEventListener(i[r],n,!1)},onTouch:function(t,e,n){var a=this;this.bindDom(t,i.EVENT_TYPES[e],function(c){var u=c.type.toLowerCase();if(!u.match(/mouse/)||!s){(u.match(/touch/)||u.match(/pointerdown/)||u.match(/mouse/)&&1===c.which)&&(o=!0),u.match(/touch|pointer/)&&(s=!0);var h=0;o&&(i.HAS_POINTEREVENTS&&e!=i.EVENT_END?h=i.PointerEvent.updatePointer(e,c):u.match(/touch/)?h=c.touches.length:s||(h=u.match(/up/)?0:1),h>0&&e==i.EVENT_END?e=i.EVENT_MOVE:h||(e=i.EVENT_END),h||null===r?r=c:c=r,n.call(i.detection,a.collectEventData(t,e,c)),i.HAS_POINTEREVENTS&&e==i.EVENT_END&&(h=i.PointerEvent.updatePointer(e,c))),h||(r=null,o=!1,s=!1,i.PointerEvent.reset())}})},determineEventTypes:function(){var t;t=i.HAS_POINTEREVENTS?i.PointerEvent.getEvents():i.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],i.EVENT_TYPES[i.EVENT_START]=t[0],i.EVENT_TYPES[i.EVENT_MOVE]=t[1],i.EVENT_TYPES[i.EVENT_END]=t[2]},getTouchList:function(t){return i.HAS_POINTEREVENTS?i.PointerEvent.getTouchList():t.touches?t.touches:[{identifier:1,pageX:t.pageX,pageY:t.pageY,target:t.target}]},collectEventData:function(t,e,n){var r=this.getTouchList(n,e),o=i.POINTER_TOUCH;return(n.type.match(/mouse/)||i.PointerEvent.matchType(i.POINTER_MOUSE,n))&&(o=i.POINTER_MOUSE),{center:i.utils.getCenter(r),timeStamp:(new Date).getTime(),target:n.target,touches:r,eventType:e,pointerType:o,srcEvent:n,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return i.detection.stopDetect()}}}},i.PointerEvent={pointers:{},getTouchList:function(){var t=this,e=[];return Object.keys(t.pointers).sort().forEach(function(n){e.push(t.pointers[n])}),e},updatePointer:function(t,e){return t==i.EVENT_END?this.pointers={}:(e.identifier=e.pointerId,this.pointers[e.pointerId]=e),Object.keys(this.pointers).length},matchType:function(t,e){if(!e.pointerType)return!1;var n={};return n[i.POINTER_MOUSE]=e.pointerType==e.MSPOINTER_TYPE_MOUSE||e.pointerType==i.POINTER_MOUSE,
n[i.POINTER_TOUCH]=e.pointerType==e.MSPOINTER_TYPE_TOUCH||e.pointerType==i.POINTER_TOUCH,n[i.POINTER_PEN]=e.pointerType==e.MSPOINTER_TYPE_PEN||e.pointerType==i.POINTER_PEN,n[t]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},i.utils={extend:function(t,n,i){for(var r in n)t[r]!==e&&i||(t[r]=n[r]);return t},hasParent:function(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1},getCenter:function(t){for(var e=[],n=[],i=0,r=t.length;r>i;i++)e.push(t[i].pageX),n.push(t[i].pageY);return{pageX:(Math.min.apply(Math,e)+Math.max.apply(Math,e))/2,pageY:(Math.min.apply(Math,n)+Math.max.apply(Math,n))/2}},getVelocity:function(t,e,n){return{x:Math.abs(e/t)||0,y:Math.abs(n/t)||0}},getAngle:function(t,e){var n=e.pageY-t.pageY,i=e.pageX-t.pageX;return 180*Math.atan2(n,i)/Math.PI},getDirection:function(t,e){return Math.abs(t.pageX-e.pageX)>=Math.abs(t.pageY-e.pageY)?t.pageX-e.pageX>0?i.DIRECTION_LEFT:i.DIRECTION_RIGHT:t.pageY-e.pageY>0?i.DIRECTION_UP:i.DIRECTION_DOWN},getDistance:function(t,e){var n=e.pageX-t.pageX,i=e.pageY-t.pageY;return Math.sqrt(n*n+i*i)},getScale:function(t,e){return t.length>=2&&e.length>=2?this.getDistance(e[0],e[1])/this.getDistance(t[0],t[1]):1},getRotation:function(t,e){return t.length>=2&&e.length>=2?this.getAngle(e[1],e[0])-this.getAngle(t[1],t[0]):0},isVertical:function(t){return t==i.DIRECTION_UP||t==i.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(t,e){var n,i=["webkit","khtml","moz","ms","o",""];if(e&&t.style){for(var r=0;i.length>r;r++)for(var o in e)e.hasOwnProperty(o)&&(n=o,i[r]&&(n=i[r]+n.substring(0,1).toUpperCase()+n.substring(1)),t.style[n]=e[o]);"none"==e.userSelect&&(t.onselectstart=function(){return!1})}}},i.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(t,e){this.current||(this.stopped=!1,this.current={inst:t,startEvent:i.utils.extend({},e),lastEvent:!1,name:""},this.detect(e))},detect:function(t){if(this.current&&!this.stopped){t=this.extendEventData(t);for(var e=this.current.inst.options,n=0,r=this.gestures.length;r>n;n++){var o=this.gestures[n];if(!this.stopped&&e[o.name]!==!1&&o.handler.call(o,t,this.current.inst)===!1){this.stopDetect();break}}return this.current&&(this.current.lastEvent=t),t.eventType==i.EVENT_END&&!t.touches.length-1&&this.stopDetect(),t}},stopDetect:function(){this.previous=i.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(t){var e=this.current.startEvent;if(e&&(t.touches.length!=e.touches.length||t.touches===e.touches)){e.touches=[];for(var n=0,r=t.touches.length;r>n;n++)e.touches.push(i.utils.extend({},t.touches[n]))}var o=t.timeStamp-e.timeStamp,s=t.center.pageX-e.center.pageX,a=t.center.pageY-e.center.pageY,c=i.utils.getVelocity(o,s,a);return i.utils.extend(t,{deltaTime:o,deltaX:s,deltaY:a,velocityX:c.x,velocityY:c.y,distance:i.utils.getDistance(e.center,t.center),angle:i.utils.getAngle(e.center,t.center),direction:i.utils.getDirection(e.center,t.center),scale:i.utils.getScale(e.touches,t.touches),rotation:i.utils.getRotation(e.touches,t.touches),startEvent:e}),t},register:function(t){var n=t.defaults||{};return n[t.name]===e&&(n[t.name]=!0),i.utils.extend(i.defaults,n,!0),t.index=t.index||1e3,this.gestures.push(t),this.gestures.sort(function(t,e){return t.index<e.index?-1:t.index>e.index?1:0}),this.gestures}},i.gestures=i.gestures||{},i.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(t,e){switch(t.eventType){case i.EVENT_START:clearTimeout(this.timer),i.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==i.detection.current.name&&e.trigger("hold",t)},e.options.hold_timeout);break;case i.EVENT_MOVE:t.distance>e.options.hold_threshold&&clearTimeout(this.timer);break;case i.EVENT_END:clearTimeout(this.timer)}}},i.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(t,e){if(t.eventType==i.EVENT_END){var n=i.detection.previous,r=!1;if(t.deltaTime>e.options.tap_max_touchtime||t.distance>e.options.tap_max_distance)return;n&&"tap"==n.name&&t.timeStamp-n.lastEvent.timeStamp<e.options.doubletap_interval&&t.distance<e.options.doubletap_distance&&(e.trigger("doubletap",t),r=!0),(!r||e.options.tap_always)&&(i.detection.current.name="tap",e.trigger(i.detection.current.name,t))}}},i.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:.7},handler:function(t,e){if(t.eventType==i.EVENT_END){if(e.options.swipe_max_touches>0&&t.touches.length>e.options.swipe_max_touches)return;(t.velocityX>e.options.swipe_velocity||t.velocityY>e.options.swipe_velocity)&&(e.trigger(this.name,t),e.trigger(this.name+t.direction,t))}}},i.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(t,n){if(i.detection.current.name!=this.name&&this.triggered)return n.trigger(this.name+"end",t),this.triggered=!1,e;if(!(n.options.drag_max_touches>0&&t.touches.length>n.options.drag_max_touches))switch(t.eventType){case i.EVENT_START:this.triggered=!1;break;case i.EVENT_MOVE:if(t.distance<n.options.drag_min_distance&&i.detection.current.name!=this.name)return;i.detection.current.name=this.name,(i.detection.current.lastEvent.drag_locked_to_axis||n.options.drag_lock_to_axis&&n.options.drag_lock_min_distance<=t.distance)&&(t.drag_locked_to_axis=!0);var r=i.detection.current.lastEvent.direction;t.drag_locked_to_axis&&r!==t.direction&&(t.direction=i.utils.isVertical(r)?0>t.deltaY?i.DIRECTION_UP:i.DIRECTION_DOWN:0>t.deltaX?i.DIRECTION_LEFT:i.DIRECTION_RIGHT),this.triggered||(n.trigger(this.name+"start",t),this.triggered=!0),n.trigger(this.name,t),n.trigger(this.name+t.direction,t),(n.options.drag_block_vertical&&i.utils.isVertical(t.direction)||n.options.drag_block_horizontal&&!i.utils.isVertical(t.direction))&&t.preventDefault();break;case i.EVENT_END:this.triggered&&n.trigger(this.name+"end",t),this.triggered=!1}}},i.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(t,n){if(i.detection.current.name!=this.name&&this.triggered)return n.trigger(this.name+"end",t),this.triggered=!1,e;if(!(2>t.touches.length))switch(n.options.transform_always_block&&t.preventDefault(),t.eventType){case i.EVENT_START:this.triggered=!1;break;case i.EVENT_MOVE:var r=Math.abs(1-t.scale),o=Math.abs(t.rotation);if(n.options.transform_min_scale>r&&n.options.transform_min_rotation>o)return;i.detection.current.name=this.name,this.triggered||(n.trigger(this.name+"start",t),this.triggered=!0),n.trigger(this.name,t),o>n.options.transform_min_rotation&&n.trigger("rotate",t),r>n.options.transform_min_scale&&(n.trigger("pinch",t),n.trigger("pinch"+(1>t.scale?"in":"out"),t));break;case i.EVENT_END:this.triggered&&n.trigger(this.name+"end",t),this.triggered=!1}}},i.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(t,n){return n.options.prevent_mouseevents&&t.pointerType==i.POINTER_MOUSE?(t.stopDetect(),e):(n.options.prevent_default&&t.preventDefault(),t.eventType==i.EVENT_START&&n.trigger(this.name,t),e)}},i.gestures.Release={name:"release",index:1/0,handler:function(t,e){t.eventType==i.EVENT_END&&e.trigger(this.name,t)}},"object"==typeof module&&"object"==typeof module.exports?module.exports=i:(t.Hammer=i,"function"==typeof t.define&&t.define.amd&&t.define("hammer",[],function(){return i}))}(this),function(t,e){"use strict";t!==e&&(Hammer.event.bindDom=function(n,i,r){t(n).on(i,function(t){var n=t.originalEvent||t;n.pageX===e&&(n.pageX=t.pageX,n.pageY=t.pageY),n.target||(n.target=t.target),n.which===e&&(n.which=n.button),n.preventDefault||(n.preventDefault=t.preventDefault),n.stopPropagation||(n.stopPropagation=t.stopPropagation),r.call(this,n)})},Hammer.Instance.prototype.on=function(e,n){return t(this.element).on(e,n)},Hammer.Instance.prototype.off=function(e,n){return t(this.element).off(e,n)},Hammer.Instance.prototype.trigger=function(e,n){var i=t(this.element);return i.has(n.target).length&&(i=t(n.target)),i.trigger({type:e,gesture:n})},t.fn.hammer=function(e){return this.each(function(){var n=t(this),i=n.data("hammer");i?i&&e&&Hammer.utils.extend(i.options,e):n.data("hammer",new Hammer(this,e||{}))})})}(window.jQuery||window.Zepto),function($){$.googlePlaces=function(element,options){var defaults={placeId:"ChIJN1t_tDeuEmsRUsoyG83frY4",render:["reviews"],min_rating:0,max_rows:0,map_plug_id:"map-plug",rotateTime:!1,schema:{displayElement:"#schema",type:"Store",beforeText:"Google Users Have Rated",middleText:"based on",afterText:"ratings and reviews"},address:{displayElement:"#google-address"},phone:{displayElement:"#google-phone"},staticMap:{displayElement:"#google-static-map",width:512,height:512,zoom:17,type:"roadmap"},hours:{displayElement:"#google-hours"}},plugin=this;plugin.settings={};var $element=$(element),element=element;plugin.init=function(){plugin.settings=$.extend({},defaults,options),plugin.settings.schema=$.extend({},defaults.schema,options.schema),$element.html("<div id='"+plugin.settings.map_plug_id+"'></div>"),initialize_place(function(place){plugin.place_data=place,$element.trigger("beforeRender.googlePlaces"),plugin.settings.render.indexOf("reviews")>-1&&(renderReviews(plugin.place_data.reviews),plugin.settings.rotateTime&&initRotation()),plugin.settings.render.indexOf("address")>-1&&renderAddress(capture_element(plugin.settings.address.displayElement),plugin.place_data.adr_address),plugin.settings.render.indexOf("phone")>-1&&renderPhone(capture_element(plugin.settings.phone.displayElement),plugin.place_data.formatted_phone_number),plugin.settings.render.indexOf("staticMap")>-1&&renderStaticMap(capture_element(plugin.settings.staticMap.displayElement),plugin.place_data.formatted_address),plugin.settings.render.indexOf("hours")>-1&&renderHours(capture_element(plugin.settings.hours.displayElement),plugin.place_data.opening_hours),addSchemaMarkup(capture_element(plugin.settings.schema.displayElement),plugin.place_data),$element.trigger("afterRender.googlePlaces")})};var capture_element=function(element){if(element instanceof jQuery)return element;if("string"==typeof element)try{var ele=$(element);if(ele.length)return ele;throw"Element ["+element+"] couldnt be found in the DOM. Skipping "+element+" markup generation."}catch(e){console.warn(e)}},initialize_place=function(c){var map=new google.maps.Map(document.getElementById(plugin.settings.map_plug_id)),request={placeId:plugin.settings.placeId};new google.maps.places.PlacesService(map).getDetails(request,function(place,status){status==google.maps.places.PlacesServiceStatus.OK&&c(place)})},sort_by_date=function(ray){return ray.sort(function(a,b){var keyA=new Date(a.time),keyB=new Date(b.time);return keyA<keyB?-1:keyA>keyB?1:0}),ray},filter_minimum_rating=function(reviews){for(var i=reviews.length-1;i>=0;i--)reviews[i].rating<plugin.settings.min_rating&&reviews.splice(i,1);return reviews},renderReviews=function(reviews){reviews=sort_by_date(reviews),reviews=filter_minimum_rating(reviews);var html="",row_count=plugin.settings.max_rows>0?plugin.settings.max_rows-1:reviews.length-1;row_count=row_count>reviews.length-1?reviews.length-1:row_count;for(var i=row_count;i>=0;i--){var stars=renderStars(reviews[i].rating),date=convertTime(reviews[i].time);html=html+"<div class='review-item'><div class='review-meta'><span class='review-author'>"+reviews[i].author_name+"</span><span class='review-sep'>, </span><span class='review-date'>"+date+"</span></div>"+stars+"<p class='review-text'>"+reviews[i].text+"</p></div>"}$element.append(html)},renderHours=function(element,data){if(element instanceof jQuery){var html="<ul>";data.weekday_text.forEach(function(day){html+="<li>"+day+"</li>"}),html+="</ul>",element.append(html)}},renderStaticMap=function(element,data){if(element instanceof jQuery){var map=plugin.settings.staticMap;element.append("<img src='https://maps.googleapis.com/maps/api/staticmap?size="+map.width+"x"+map.height+"&zoom="+map.zoom+"&maptype="+map.type+"&markers=size:large%7Ccolor:red%7C"+data+"'></img>")}},renderAddress=function(element,data){element instanceof jQuery&&element.append(data)},renderPhone=function(element,data){element instanceof jQuery&&element.append(data)},initRotation=function(){var $reviewEls=$element.children(".review-item"),currentIdx=$reviewEls.length>0&&0;$reviewEls.hide(),currentIdx!==!1&&($($reviewEls[currentIdx]).show(),setInterval(function(){++currentIdx>=$reviewEls.length&&(currentIdx=0),$reviewEls.hide(),$($reviewEls[currentIdx]).fadeIn("slow")},plugin.settings.rotateTime))},renderStars=function(rating){for(var stars="<div class='review-stars'><ul>",i=0;i<rating;i++)stars+="<li><i class='star'></i></li>";if(rating<5)for(var i=0;i<5-rating;i++)stars+="<li><i class='star inactive'></i></li>";return stars+="</ul></div>"},convertTime=function(UNIX_timestamp){var a=new Date(1e3*UNIX_timestamp);return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][a.getMonth()]+" "+a.getDate()+", "+a.getFullYear()},addSchemaMarkup=function(element,placeData){for(var reviews=placeData.reviews,lastIndex=reviews.length-1,reviewPointTotal=0,schema=plugin.settings.schema,i=lastIndex;i>=0;i--)reviewPointTotal+=reviews[i].rating;var averageReview=reviewPointTotal/reviews.length;element instanceof jQuery&&element.append('<span itemscope="" itemtype="http://schema.org/'+schema.type+'"><meta itemprop="url" content="'+location.origin+'">'+schema.beforeText+' <span itemprop="name">'+placeData.name+'</span> <span itemprop="aggregateRating" itemscope="" itemtype="http://schema.org/AggregateRating"><span itemprop="ratingValue">'+averageReview.toFixed(2)+'</span>/<span itemprop="bestRating">5</span> '+schema.middleText+' <span itemprop="ratingCount">'+reviews.length+"</span> "+schema.afterText+"</span></span>")};plugin.init()},$.fn.googlePlaces=function(options){return this.each(function(){if(void 0==$(this).data("googlePlaces")){var plugin=new $.googlePlaces(this,options);$(this).data("googlePlaces",plugin)}})}}(jQuery),function($){var NivoSlider=function(element,options){var settings=$.extend({},$.fn.nivoSlider.defaults,options),vars={currentSlide:0,currentImage:"",totalSlides:0,running:!1,paused:!1,stop:!1,controlNavEl:!1},slider=$(element);slider.data("nivo:vars",vars).addClass("nivoSlider");var kids=slider.children();kids.each(function(){var child=$(this),link="";child.is("img")||(child.is("a")&&(child.addClass("nivo-imageLink"),link=child),child=child.find("img:first"));var childWidth=0===childWidth?child.attr("width"):child.width(),childHeight=0===childHeight?child.attr("height"):child.height();""!==link&&link.css("display","none"),child.css("display","none"),vars.totalSlides++}),settings.randomStart&&(settings.startSlide=Math.floor(Math.random()*vars.totalSlides)),settings.startSlide>0&&(settings.startSlide>=vars.totalSlides&&(settings.startSlide=vars.totalSlides-1),vars.currentSlide=settings.startSlide),$(kids[vars.currentSlide]).is("img")?vars.currentImage=$(kids[vars.currentSlide]):vars.currentImage=$(kids[vars.currentSlide]).find("img:first"),$(kids[vars.currentSlide]).is("a")&&$(kids[vars.currentSlide]).css("display","block");var sliderImg=$("<img/>").addClass("nivo-main-image");sliderImg.attr("src",vars.currentImage.attr("src")).show(),slider.append(sliderImg),$(window).resize(function(){slider.children("img").width(slider.width()),sliderImg.attr("src",vars.currentImage.attr("src")),sliderImg.stop().height("auto"),$(".nivo-slice").remove(),$(".nivo-box").remove()}),slider.append($('<div class="nivo-caption"></div>'));var processCaption=function(settings){var nivoCaption=$(".nivo-caption",slider);if(""!=vars.currentImage.attr("title")&&void 0!=vars.currentImage.attr("title")){var title=vars.currentImage.attr("title");"#"==title.substr(0,1)&&(title=$(title).html()),"block"==nivoCaption.css("display")?setTimeout(function(){nivoCaption.html(title)},settings.animSpeed):(nivoCaption.html(title),nivoCaption.stop().fadeIn(settings.animSpeed))}else nivoCaption.stop().fadeOut(settings.animSpeed)};processCaption(settings);var timer=0;if(!settings.manualAdvance&&kids.length>1&&(timer=setInterval(function(){nivoRun(slider,kids,settings,!1)},settings.pauseTime)),settings.directionNav&&(slider.append('<div class="nivo-directionNav"><a class="nivo-prevNav">'+settings.prevText+'</a><a class="nivo-nextNav">'+settings.nextText+"</a></div>"),$(slider).on("click","a.nivo-prevNav",function(){if(vars.running)return!1;clearInterval(timer),timer="",vars.currentSlide-=2,nivoRun(slider,kids,settings,"prev")}),$(slider).on("click","a.nivo-nextNav",function(){if(vars.running)return!1;clearInterval(timer),timer="",nivoRun(slider,kids,settings,"next")})),settings.controlNav){vars.controlNavEl=$('<div class="nivo-controlNav carousel-indicators"></div>');var carouselBox=$('<div class="carousel-box"></div>');slider.after(vars.controlNavEl);for(var i=0;i<kids.length;i++)if(settings.controlNavThumbs){vars.controlNavEl.addClass("nivo-thumbs-enabled");var child=kids.eq(i);child.is("img")||(child=child.find("img:first")),carouselBox.append('<a class="nivo-control" rel="'+i+'"><span class="set-slide"></span></a>'),vars.controlNavEl.append(carouselBox)}else vars.controlNavEl.append('<a class="nivo-control" rel="'+i+'">'+(i+1)+"</a>");$("a:eq("+vars.currentSlide+")",vars.controlNavEl).addClass("active"),$("a",vars.controlNavEl).bind("click",function(){return!vars.running&&(!$(this).hasClass("active")&&(clearInterval(timer),timer="",sliderImg.attr("src",vars.currentImage.attr("src")),vars.currentSlide=$(this).attr("rel")-1,void nivoRun(slider,kids,settings,"control")))})}settings.pauseOnHover&&slider.hover(function(){vars.paused=!0,clearInterval(timer),timer=""},function(){vars.paused=!1,""!==timer||settings.manualAdvance||(timer=setInterval(function(){nivoRun(slider,kids,settings,!1)},settings.pauseTime))}),slider.bind("nivo:animFinished",function(){sliderImg.attr("src",vars.currentImage.attr("src")),vars.running=!1,$(kids).each(function(){$(this).is("a")&&$(this).css("display","none")}),$(kids[vars.currentSlide]).is("a")&&$(kids[vars.currentSlide]).css("display","block"),""!==timer||vars.paused||settings.manualAdvance||(timer=setInterval(function(){nivoRun(slider,kids,settings,!1)},settings.pauseTime)),settings.afterChange.call(this)});var createSlices=function(slider,settings,vars){$(vars.currentImage).parent().is("a")&&$(vars.currentImage).parent().css("display","block"),$('img[src="'+vars.currentImage.attr("src")+'"]',slider).not(".nivo-main-image,.nivo-control img").width(slider.width()).css("visibility","hidden").show();for(var sliceHeight=$('img[src="'+vars.currentImage.attr("src")+'"]',slider).not(".nivo-main-image,.nivo-control img").parent().is("a")?$('img[src="'+vars.currentImage.attr("src")+'"]',slider).not(".nivo-main-image,.nivo-control img").parent().height():$('img[src="'+vars.currentImage.attr("src")+'"]',slider).not(".nivo-main-image,.nivo-control img").height(),i=0;i<settings.slices;i++){var sliceWidth=Math.round(slider.width()/settings.slices);i===settings.slices-1?slider.append($('<div class="nivo-slice" name="'+i+'"><img src="'+vars.currentImage.attr("src")+'" style="position:absolute; width:'+slider.width()+"px; height:auto; display:block !important; top:0; left:-"+(sliceWidth+i*sliceWidth-sliceWidth)+'px;" /></div>').css({left:sliceWidth*i+"px",width:slider.width()-sliceWidth*i+"px",height:sliceHeight+"px",opacity:"0",overflow:"hidden"})):slider.append($('<div class="nivo-slice" name="'+i+'"><img src="'+vars.currentImage.attr("src")+'" style="position:absolute; width:'+slider.width()+"px; height:auto; display:block !important; top:0; left:-"+(sliceWidth+i*sliceWidth-sliceWidth)+'px;" /></div>').css({left:sliceWidth*i+"px",width:sliceWidth+"px",height:sliceHeight+"px",opacity:"0",overflow:"hidden"}))}$(".nivo-slice",slider).height(sliceHeight),sliderImg.stop().animate({height:$(vars.currentImage).height()},settings.animSpeed)},createBoxes=function(slider,settings,vars){$(vars.currentImage).parent().is("a")&&$(vars.currentImage).parent().css("display","block"),$('img[src="'+vars.currentImage.attr("src")+'"]',slider).not(".nivo-main-image,.nivo-control img").width(slider.width()).css("visibility","hidden").show();for(var boxWidth=Math.round(slider.width()/settings.boxCols),boxHeight=Math.round($('img[src="'+vars.currentImage.attr("src")+'"]',slider).not(".nivo-main-image,.nivo-control img").height()/settings.boxRows),rows=0;rows<settings.boxRows;rows++)for(var cols=0;cols<settings.boxCols;cols++)cols===settings.boxCols-1?(slider.append($('<div class="nivo-box" name="'+cols+'" rel="'+rows+'"><img src="'+vars.currentImage.attr("src")+'" style="position:absolute; width:'+slider.width()+"px; height:auto; display:block; top:-"+boxHeight*rows+"px; left:-"+boxWidth*cols+'px;" /></div>').css({opacity:0,left:boxWidth*cols+"px",top:boxHeight*rows+"px",width:slider.width()-boxWidth*cols+"px"})),$('.nivo-box[name="'+cols+'"]',slider).height($('.nivo-box[name="'+cols+'"] img',slider).height()+"px")):(slider.append($('<div class="nivo-box" name="'+cols+'" rel="'+rows+'"><img src="'+vars.currentImage.attr("src")+'" style="position:absolute; width:'+slider.width()+"px; height:auto; display:block; top:-"+boxHeight*rows+"px; left:-"+boxWidth*cols+'px;" /></div>').css({opacity:0,left:boxWidth*cols+"px",top:boxHeight*rows+"px",width:boxWidth+"px"})),$('.nivo-box[name="'+cols+'"]',slider).height($('.nivo-box[name="'+cols+'"] img',slider).height()+"px"));sliderImg.stop().animate({height:$(vars.currentImage).height()},settings.animSpeed)},nivoRun=function(slider,kids,settings,nudge){var vars=slider.data("nivo:vars");if(vars&&vars.currentSlide===vars.totalSlides-1&&settings.lastSlide.call(this),(!vars||vars.stop)&&!nudge)return!1;settings.beforeChange.call(this),nudge?("prev"===nudge&&sliderImg.attr("src",vars.currentImage.attr("src")),"next"===nudge&&sliderImg.attr("src",vars.currentImage.attr("src"))):sliderImg.attr("src",vars.currentImage.attr("src")),vars.currentSlide++,vars.currentSlide===vars.totalSlides&&(vars.currentSlide=0,settings.slideshowEnd.call(this)),vars.currentSlide<0&&(vars.currentSlide=vars.totalSlides-1),$(kids[vars.currentSlide]).is("img")?vars.currentImage=$(kids[vars.currentSlide]):vars.currentImage=$(kids[vars.currentSlide]).find("img:first"),settings.controlNav&&($("a",vars.controlNavEl).removeClass("active"),$("a:eq("+vars.currentSlide+")",vars.controlNavEl).addClass("active")),processCaption(settings),$(".nivo-slice",slider).remove(),$(".nivo-box",slider).remove();var currentEffect=settings.effect,anims="";"random"===settings.effect&&(anims=new Array("sliceDownRight","sliceDownLeft","sliceUpRight","sliceUpLeft","sliceUpDown","sliceUpDownLeft","fold","fade","boxRandom","boxRain","boxRainReverse","boxRainGrow","boxRainGrowReverse"),void 0===(currentEffect=anims[Math.floor(Math.random()*(anims.length+1))])&&(currentEffect="fade")),settings.effect.indexOf(",")!==-1&&(anims=settings.effect.split(","),void 0===(currentEffect=anims[Math.floor(Math.random()*anims.length)])&&(currentEffect="fade")),vars.currentImage.attr("data-transition")&&(currentEffect=vars.currentImage.attr("data-transition")),vars.running=!0;var timeBuff=0,i=0,slices="",firstSlice="",totalBoxes="",boxes="";if("sliceDown"===currentEffect||"sliceDownRight"===currentEffect||"sliceDownLeft"===currentEffect)createSlices(slider,settings,vars),timeBuff=0,i=0,slices=$(".nivo-slice",slider),"sliceDownLeft"===currentEffect&&(slices=$(".nivo-slice",slider)._reverse()),slices.each(function(){var slice=$(this);slice.css({top:"0px"}),i===settings.slices-1?setTimeout(function(){slice.animate({opacity:"1.0"},settings.animSpeed,"",function(){slider.trigger("nivo:animFinished")})},100+timeBuff):setTimeout(function(){slice.animate({opacity:"1.0"},settings.animSpeed)},100+timeBuff),timeBuff+=50,i++});else if("sliceUp"===currentEffect||"sliceUpRight"===currentEffect||"sliceUpLeft"===currentEffect)createSlices(slider,settings,vars),timeBuff=0,i=0,slices=$(".nivo-slice",slider),"sliceUpLeft"===currentEffect&&(slices=$(".nivo-slice",slider)._reverse()),slices.each(function(){var slice=$(this);slice.css({bottom:"0px"}),i===settings.slices-1?setTimeout(function(){slice.animate({opacity:"1.0"},settings.animSpeed,"",function(){slider.trigger("nivo:animFinished")})},100+timeBuff):setTimeout(function(){slice.animate({opacity:"1.0"},settings.animSpeed)},100+timeBuff),timeBuff+=50,i++});else if("sliceUpDown"===currentEffect||"sliceUpDownRight"===currentEffect||"sliceUpDownLeft"===currentEffect){createSlices(slider,settings,vars),timeBuff=0,i=0;var v=0;slices=$(".nivo-slice",slider),"sliceUpDownLeft"===currentEffect&&(slices=$(".nivo-slice",slider)._reverse()),slices.each(function(){var slice=$(this);0===i?(slice.css("top","0px"),i++):(slice.css("bottom","0px"),i=0),v===settings.slices-1?setTimeout(function(){slice.animate({opacity:"1.0"},settings.animSpeed,"",function(){slider.trigger("nivo:animFinished")})},100+timeBuff):setTimeout(function(){slice.animate({opacity:"1.0"},settings.animSpeed)},100+timeBuff),timeBuff+=50,v++})}else if("fold"===currentEffect)createSlices(slider,settings,vars),timeBuff=0,i=0,$(".nivo-slice",slider).each(function(){var slice=$(this),origWidth=slice.width();slice.css({top:"0px",width:"0px"}),i===settings.slices-1?setTimeout(function(){slice.animate({width:origWidth,opacity:"1.0"},settings.animSpeed,"",function(){slider.trigger("nivo:animFinished")})},100+timeBuff):setTimeout(function(){slice.animate({width:origWidth,opacity:"1.0"},settings.animSpeed)},100+timeBuff),timeBuff+=50,i++});else if("fade"===currentEffect)createSlices(slider,settings,vars),firstSlice=$(".nivo-slice:first",slider),firstSlice.css({width:slider.width()+"px"}),firstSlice.animate({opacity:"1.0"},2*settings.animSpeed,"",function(){slider.trigger("nivo:animFinished")});else if("slideInRight"===currentEffect)createSlices(slider,settings,vars),firstSlice=$(".nivo-slice:first",slider),firstSlice.css({width:"0px",opacity:"1"}),firstSlice.animate({width:slider.width()+"px"},2*settings.animSpeed,"",function(){slider.trigger("nivo:animFinished")});else if("slideInLeft"===currentEffect)createSlices(slider,settings,vars),firstSlice=$(".nivo-slice:first",slider),firstSlice.css({width:"0px",opacity:"1",left:"",right:"0px"}),firstSlice.animate({width:slider.width()+"px"},2*settings.animSpeed,"",function(){firstSlice.css({left:"0px",right:""}),slider.trigger("nivo:animFinished")});else if("boxRandom"===currentEffect)createBoxes(slider,settings,vars),totalBoxes=settings.boxCols*settings.boxRows,i=0,timeBuff=0,boxes=shuffle($(".nivo-box",slider)),boxes.each(function(){var box=$(this);i===totalBoxes-1?setTimeout(function(){box.animate({opacity:"1"},settings.animSpeed,"",function(){slider.trigger("nivo:animFinished")})},100+timeBuff):setTimeout(function(){box.animate({opacity:"1"},settings.animSpeed)},100+timeBuff),timeBuff+=20,i++});else if("boxRain"===currentEffect||"boxRainReverse"===currentEffect||"boxRainGrow"===currentEffect||"boxRainGrowReverse"===currentEffect){createBoxes(slider,settings,vars),totalBoxes=settings.boxCols*settings.boxRows,i=0,timeBuff=0;var rowIndex=0,colIndex=0,box2Darr=[];box2Darr[rowIndex]=[],boxes=$(".nivo-box",slider),"boxRainReverse"!==currentEffect&&"boxRainGrowReverse"!==currentEffect||(boxes=$(".nivo-box",slider)._reverse()),boxes.each(function(){box2Darr[rowIndex][colIndex]=$(this),++colIndex===settings.boxCols&&(rowIndex++,colIndex=0,box2Darr[rowIndex]=[])});for(var cols=0;cols<2*settings.boxCols;cols++){for(var prevCol=cols,rows=0;rows<settings.boxRows;rows++)prevCol>=0&&prevCol<settings.boxCols&&(!function(row,col,time,i,totalBoxes){var box=$(box2Darr[row][col]),w=box.width(),h=box.height();"boxRainGrow"!==currentEffect&&"boxRainGrowReverse"!==currentEffect||box.width(0).height(0),i===totalBoxes-1?setTimeout(function(){box.animate({opacity:"1",width:w,height:h},settings.animSpeed/1.3,"",function(){slider.trigger("nivo:animFinished")})},100+time):setTimeout(function(){box.animate({opacity:"1",width:w,height:h},settings.animSpeed/1.3)},100+time)}(rows,prevCol,timeBuff,i,totalBoxes),i++),prevCol--;timeBuff+=100}}},shuffle=function(arr){for(var j,x,i=arr.length;i;j=parseInt(Math.random()*i,10),x=arr[--i],arr[i]=arr[j],arr[j]=x);return arr},trace=function(msg){this.console&&void 0!==console.log&&console.log(msg)};return this.stop=function(){$(element).data("nivo:vars").stop||($(element).data("nivo:vars").stop=!0,trace("Stop Slider"))},this.start=function(){$(element).data("nivo:vars").stop&&($(element).data("nivo:vars").stop=!1,trace("Start Slider"))},settings.afterLoad.call(this),this};$.fn.nivoSlider=function(options){return this.each(function(key,value){var element=$(this);if(element.data("nivoslider"))return element.data("nivoslider");var nivoslider=new NivoSlider(this,options);element.data("nivoslider",nivoslider)})},$.fn.nivoSlider.defaults={effect:"random",slices:15,boxCols:8,boxRows:4,animSpeed:500,pauseTime:3e3,startSlide:0,directionNav:!0,controlNav:!0,controlNavThumbs:!1,pauseOnHover:!0,manualAdvance:!1,prevText:'<span class="icon-prev-img"></span>',nextText:'<span class="icon-next-img"></span>',randomStart:!1,beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){},lastSlide:function(){},afterLoad:function(){}},$.fn._reverse=[].reverse}(jQuery);var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};!function(root,factory){"function"==typeof define&&define.amd?define([],factory("BackgroundVideo")):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=factory("BackgroundVideo"):root.BackgroundVideo=factory("BackgroundVideo")}(window||module||{},function(pluginName){var defaults={parallax:{effect:1.5},pauseVideoOnViewLoss:!1,preventContextMenu:!1,minimumVideoWidth:400,onBeforeReady:function(){},onReady:function(){}},addClass=function(el,className){el.classList?el.classList.add(className):el.className+=" "+className};return function(){function BackgroundVideo(element,options){_classCallCheck(this,BackgroundVideo),this.element=document.querySelectorAll(element),this.options=_extends({},defaults,options),this.options.browserPrexix=this.detectBrowser(),this.shimRequestAnimationFrame(),this.options.has3d=this.detect3d();for(var i=0;i<this.element.length;i++)this.init(this.element[i],i)}return _createClass(BackgroundVideo,[{key:"init",value:function(element,iteration){this.el=element,this.playEvent=this.videoReadyCallback.bind(this),this.setVideoWrap(iteration),this.setVideoProperties(),this.insertVideos(),this.options&&this.options.onBeforeReady()&&this.options.onBeforeReady(),this.el.readyState>3?this.videoReadyCallback():(this.el.addEventListener("canplaythrough",this.playEvent,!1),
this.el.addEventListener("canplay",this.playEvent,!1)),this.options.preventContextMenu&&this.el.addEventListener("contextmenu",function(){return!1})}},{key:"videoReadyCallback",value:function(){this.el.removeEventListener("canplaythrough",this.playEvent,!1),this.el.removeEventListener("canplay",this.playEvent,!1),this.options.originalVideoW=this.el.videoWidth,this.options.originalVideoH=this.el.videoHeight,this.bindEvents(),this.requestTick(),this.options&&this.options.onReady()&&this.options.onReady()}},{key:"bindEvents",value:function(){this.ticking=!1,this.options.parallax&&window.addEventListener("scroll",this.requestTick.bind(this)),window.addEventListener("resize",this.requestTick.bind(this))}},{key:"requestTick",value:function(){this.ticking||(this.ticking=!0,window.requestAnimationFrame(this.positionObject.bind(this))),this.ticking=!1}},{key:"positionObject",value:function(){var scrollPos=window.pageYOffset,_scaleObject=this.scaleObject(),xPos=_scaleObject.xPos,yPos=_scaleObject.yPos;yPos=this.options.parallax?scrollPos>=0?this.calculateYPos(yPos,scrollPos):this.calculateYPos(yPos,0):-yPos;var transformStyle=this.options.has3d?"translate3d("+xPos+"px, "+yPos+"px, 0)":"translate("+xPos+"px, "+yPos+"px)";this.el.style[""+this.options.browserPrexix]=transformStyle,this.el.style.transform=transformStyle}},{key:"scaleObject",value:function(){var windowWidth=window.innerWidth,windowHeight=window.innerHeight,heightScale=windowWidth/this.options.originalVideoW,widthScale=windowHeight/this.options.originalVideoH,scaleFactor=void 0;this.options.bvVideoWrap.style.width=windowWidth+"px",this.options.bvVideoWrap.style.height=windowHeight+"px",(scaleFactor=heightScale>widthScale?heightScale:widthScale)*this.options.originalVideoW<this.options.minimumVideoWidth&&(scaleFactor=this.options.minimumVideoWidth/this.options.originalVideoW);var videoWidth=scaleFactor*this.options.originalVideoW,videoHeight=scaleFactor*this.options.originalVideoH;return this.el.style.width=videoWidth+"px",this.el.style.height=videoHeight+"px",{xPos:-parseInt((videoWidth-windowWidth)/2),yPos:parseInt(videoHeight-windowHeight)/2}}},{key:"calculateYPos",value:function(yPos,scrollPos){return yPos=-((parseInt(this.options.bvVideoWrap.offsetTop)-scrollPos)/this.options.parallax.effect+yPos)}},{key:"setVideoWrap",value:function(iteration){var wrapper=document.createElement("div");this.options.bvVideoWrapClass=this.el.className+"-wrap-"+iteration,addClass(wrapper,"bv-video-wrap"),addClass(wrapper,this.options.bvVideoWrapClass),wrapper.style.position="relative",wrapper.style.overflow="hidden",wrapper.style.zIndex="10",this.el.parentNode.insertBefore(wrapper,this.el),wrapper.appendChild(this.el),this.options.bvVideoWrap=document.querySelector("."+this.options.bvVideoWrapClass)}},{key:"setVideoProperties",value:function(){this.el.setAttribute("preload","metadata"),this.el.setAttribute("loop","true"),this.el.setAttribute("autoplay","true"),this.el.style.position="absolute",this.el.style.zIndex="1"}},{key:"insertVideos",value:function(){for(var i=0;i<this.options.src.length;i++){var videoTypeArr=this.options.src[i].split("."),videoType=videoTypeArr[videoTypeArr.length-1];this.addSourceToVideo(this.options.src[i],"video/"+videoType)}}},{key:"addSourceToVideo",value:function(src,type){var source=document.createElement("source");source.src=src,source.type=type,this.el.appendChild(source)}},{key:"detectBrowser",value:function(){var val=navigator.userAgent.toLowerCase(),browserPrexix=void 0;return val.indexOf("chrome")>-1||val.indexOf("safari")>-1?browserPrexix="webkitTransform":val.indexOf("firefox")>-1?browserPrexix="MozTransform":val.indexOf("MSIE")!==-1||val.indexOf("Trident/")>0?browserPrexix="msTransform":val.indexOf("Opera")>-1&&(browserPrexix="OTransform"),browserPrexix}},{key:"shimRequestAnimationFrame",value:function(){for(var lastTime=0,vendors=["ms","moz","webkit","o"],x=0;x<vendors.length&&!window.requestAnimationFrame;++x)window.requestAnimationFrame=window[vendors[x]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[vendors[x]+"CancelAnimationFrame"]||window[vendors[x]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(callback,element){var currTime=(new Date).getTime(),timeToCall=Math.max(0,16-(currTime-lastTime)),id=window.setTimeout(function(){callback(currTime+timeToCall)},timeToCall);return lastTime=currTime+timeToCall,id}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(id){clearTimeout(id)})}},{key:"detect3d",value:function(){var t,has3d,el=document.createElement("p"),transforms={WebkitTransform:"-webkit-transform",OTransform:"-o-transform",MSTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(el,document.body.lastChild);for(t in transforms)void 0!==el.style[t]&&(el.style[t]="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)",has3d=window.getComputedStyle(el).getPropertyValue(transforms[t]));return el.parentNode.removeChild(el),void 0!==has3d&&"none"!==has3d}}]),BackgroundVideo}()});
"use strict";function compileStyleForBlock(block){var elements=[],el="";if(block.blockStyle)for(var i=0;i<lengthStyleBlock;i++){var n;block.blockStyle[i]&&(n=getNamePropertyCSS(i,block.blockStyle[i]))&&(el+="\n"+n[0]+":"+n[1]+";")}if(el&&(el&&(el="{"+el+"}\n"),elements.push(el)),block.elements&&"object"==typeof block.elements)for(var key in block.elements){el="";for(var i=0;i<lengthStyleBlock;i++)if("a"!=key||1!=i){var n;block.elements[key][i]&&(n=getNamePropertyCSS(i,block.elements[key][i]))&&(el+="\n"+n[0]+":"+n[1]+";")}el&&(el=key.replace("@",".")+"{"+el+"}\n"),"a"==key&&block.elements.a[1]&&(el+="a:hover {color:"+block.elements.a[1]+"}"),el&&elements.push(el)}return elements}function validateEmail(email){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(email)}function md5www(str){var k,AA,BB,CC,DD,a,b,c,d,RotateLeft=function(lValue,iShiftBits){return lValue<<iShiftBits|lValue>>>32-iShiftBits},AddUnsigned=function(lX,lY){var lX4,lY4,lX8,lY8,lResult;return lX8=2147483648&lX,lY8=2147483648&lY,lX4=1073741824&lX,lY4=1073741824&lY,lResult=(1073741823&lX)+(1073741823&lY),lX4&lY4?2147483648^lResult^lX8^lY8:lX4|lY4?1073741824&lResult?3221225472^lResult^lX8^lY8:1073741824^lResult^lX8^lY8:lResult^lX8^lY8},F=function(x,y,z){return x&y|~x&z},G=function(x,y,z){return x&z|y&~z},H=function(x,y,z){return x^y^z},I=function(x,y,z){return y^(x|~z)},FF=function(a,b,c,d,x,s,ac){return a=AddUnsigned(a,AddUnsigned(AddUnsigned(F(b,c,d),x),ac)),AddUnsigned(RotateLeft(a,s),b)},GG=function(a,b,c,d,x,s,ac){return a=AddUnsigned(a,AddUnsigned(AddUnsigned(G(b,c,d),x),ac)),AddUnsigned(RotateLeft(a,s),b)},HH=function(a,b,c,d,x,s,ac){return a=AddUnsigned(a,AddUnsigned(AddUnsigned(H(b,c,d),x),ac)),AddUnsigned(RotateLeft(a,s),b)},II=function(a,b,c,d,x,s,ac){return a=AddUnsigned(a,AddUnsigned(AddUnsigned(I(b,c,d),x),ac)),AddUnsigned(RotateLeft(a,s),b)},WordToHex=function(lValue){var lByte,lCount,WordToHexValue="",WordToHexValue_temp="";for(lCount=0;lCount<=3;lCount++)lByte=lValue>>>8*lCount&255,WordToHexValue_temp="0"+lByte.toString(16),WordToHexValue+=WordToHexValue_temp.substr(WordToHexValue_temp.length-2,2);return WordToHexValue},x=Array();for(str=unescape(encodeURIComponent(str)),x=function(str){for(var lWordCount,lMessageLength=str.length,lNumberOfWords_temp1=lMessageLength+8,lNumberOfWords_temp2=(lNumberOfWords_temp1-lNumberOfWords_temp1%64)/64,lNumberOfWords=16*(lNumberOfWords_temp2+1),lWordArray=Array(lNumberOfWords-1),lBytePosition=0,lByteCount=0;lByteCount<lMessageLength;)lWordCount=(lByteCount-lByteCount%4)/4,lBytePosition=lByteCount%4*8,lWordArray[lWordCount]=lWordArray[lWordCount]|str.charCodeAt(lByteCount)<<lBytePosition,lByteCount++;return lWordCount=(lByteCount-lByteCount%4)/4,lBytePosition=lByteCount%4*8,lWordArray[lWordCount]=lWordArray[lWordCount]|128<<lBytePosition,lWordArray[lNumberOfWords-2]=lMessageLength<<3,lWordArray[lNumberOfWords-1]=lMessageLength>>>29,lWordArray}(str),a=1732584193,b=4023233417,c=2562383102,d=271733878,k=0;k<x.length;k+=16)AA=a,BB=b,CC=c,DD=d,a=FF(a,b,c,d,x[k+0],7,3614090360),d=FF(d,a,b,c,x[k+1],12,3905402710),c=FF(c,d,a,b,x[k+2],17,606105819),b=FF(b,c,d,a,x[k+3],22,3250441966),a=FF(a,b,c,d,x[k+4],7,4118548399),d=FF(d,a,b,c,x[k+5],12,1200080426),c=FF(c,d,a,b,x[k+6],17,2821735955),b=FF(b,c,d,a,x[k+7],22,4249261313),a=FF(a,b,c,d,x[k+8],7,1770035416),d=FF(d,a,b,c,x[k+9],12,2336552879),c=FF(c,d,a,b,x[k+10],17,4294925233),b=FF(b,c,d,a,x[k+11],22,2304563134),a=FF(a,b,c,d,x[k+12],7,1804603682),d=FF(d,a,b,c,x[k+13],12,4254626195),c=FF(c,d,a,b,x[k+14],17,2792965006),b=FF(b,c,d,a,x[k+15],22,1236535329),a=GG(a,b,c,d,x[k+1],5,4129170786),d=GG(d,a,b,c,x[k+6],9,3225465664),c=GG(c,d,a,b,x[k+11],14,643717713),b=GG(b,c,d,a,x[k+0],20,3921069994),a=GG(a,b,c,d,x[k+5],5,3593408605),d=GG(d,a,b,c,x[k+10],9,38016083),c=GG(c,d,a,b,x[k+15],14,3634488961),b=GG(b,c,d,a,x[k+4],20,3889429448),a=GG(a,b,c,d,x[k+9],5,568446438),d=GG(d,a,b,c,x[k+14],9,3275163606),c=GG(c,d,a,b,x[k+3],14,4107603335),b=GG(b,c,d,a,x[k+8],20,1163531501),a=GG(a,b,c,d,x[k+13],5,2850285829),d=GG(d,a,b,c,x[k+2],9,4243563512),c=GG(c,d,a,b,x[k+7],14,1735328473),b=GG(b,c,d,a,x[k+12],20,2368359562),a=HH(a,b,c,d,x[k+5],4,4294588738),d=HH(d,a,b,c,x[k+8],11,2272392833),c=HH(c,d,a,b,x[k+11],16,1839030562),b=HH(b,c,d,a,x[k+14],23,4259657740),a=HH(a,b,c,d,x[k+1],4,2763975236),d=HH(d,a,b,c,x[k+4],11,1272893353),c=HH(c,d,a,b,x[k+7],16,4139469664),b=HH(b,c,d,a,x[k+10],23,3200236656),a=HH(a,b,c,d,x[k+13],4,681279174),d=HH(d,a,b,c,x[k+0],11,3936430074),c=HH(c,d,a,b,x[k+3],16,3572445317),b=HH(b,c,d,a,x[k+6],23,76029189),a=HH(a,b,c,d,x[k+9],4,3654602809),d=HH(d,a,b,c,x[k+12],11,3873151461),c=HH(c,d,a,b,x[k+15],16,530742520),b=HH(b,c,d,a,x[k+2],23,3299628645),a=II(a,b,c,d,x[k+0],6,4096336452),d=II(d,a,b,c,x[k+7],10,1126891415),c=II(c,d,a,b,x[k+14],15,2878612391),b=II(b,c,d,a,x[k+5],21,4237533241),a=II(a,b,c,d,x[k+12],6,1700485571),d=II(d,a,b,c,x[k+3],10,2399980690),c=II(c,d,a,b,x[k+10],15,4293915773),b=II(b,c,d,a,x[k+1],21,2240044497),a=II(a,b,c,d,x[k+8],6,1873313359),d=II(d,a,b,c,x[k+15],10,4264355552),c=II(c,d,a,b,x[k+6],15,2734768916),b=II(b,c,d,a,x[k+13],21,1309151649),a=II(a,b,c,d,x[k+4],6,4149444226),d=II(d,a,b,c,x[k+11],10,3174756917),c=II(c,d,a,b,x[k+2],15,718787259),b=II(b,c,d,a,x[k+9],21,3951481745),a=AddUnsigned(a,AA),b=AddUnsigned(b,BB),c=AddUnsigned(c,CC),d=AddUnsigned(d,DD);return(WordToHex(a)+WordToHex(b)+WordToHex(c)+WordToHex(d)).toLowerCase()}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function getMobileOperatingSystem(){var userAgent=navigator.userAgent||navigator.vendor||window.opera;if(!userAgent.match(/iPhone/i))return userAgent.match(/iPad/i)?"iOS":userAgent.match(/Android/i)?"Android":"unknown";iPhone=!0}function setMetaOG(){templateContentHTML=$("#tempContent").html();var o={};o.keywords=$("meta[name='keywords']").attr("content"),o.description=$("meta[name='description']").attr("content"),o.title=$("meta[property='og\\:title']").attr("content"),o.canonical=$("meta[property='og\\:url']").attr("content"),o.image=$("meta[property='og\\:image']").attr("content"),tempTitles=o,$("meta[name='keywords']").attr("content","{{global.get('titles').val.keywords}}"),$("meta[name='description']").attr("content","{{global.get('titles').val.description}}"),$("meta[property='og\\:title']").attr("content","{{global.get('titles').val.title}}"),$("meta[property='og\\:url']").attr("content","{{global.get('titles').val.url}}"),$("meta[property='og\\:description']").attr("content","{{global.get('titles').val.description}}"),$("meta[property='og\\:image']").attr("content","{{global.get('titles').val.image}}"),$("link[rel='canonical']").attr("href","{{global.get('titles').val.canonical}}")}function getCookie(name){var matches=document.cookie.match(new RegExp("(?:^|; )"+name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return matches?decodeURIComponent(matches[1]):void 0}function setCookie(name,value,options){options=options||{};var expires=options.expires;if("number"==typeof expires&&expires){var d=new Date;d.setTime(d.getTime()+1e3*expires),expires=options.expires=d}expires&&expires.toUTCString&&(options.expires=expires.toUTCString()),value=encodeURIComponent(value);var updatedCookie=name+"="+value;for(var propName in options){updatedCookie+="; "+propName;var propValue=options[propName];propValue!==!0&&(updatedCookie+="="+propValue)}document.cookie=updatedCookie}function exception(toaster){function catcher(header){return function(err){err?"object"==typeof err&&(err.data&&(err=err.data),err.message?err=err.message:err.error&&(err=err.error)):err="ошибка",toaster.pop("error",header,err)}}function showToaster(type,title,content){"object"==typeof content&&(content.message?content=content.message:content.error&&(content=content.error)),toaster.pop({type:type,title:title,body:content,bodyOutputType:"trustedHtml",showCloseButton:!0,delay:15e3,closeHtml:"<button>Close</button>"})}return{catcher:catcher,showToaster:showToaster}}function confirmFactory($q,$uibModal){function service(question){return $q(function(resolve,reject){var options={animation:!0,template:['<div class="modal-header">','<h3 class="modal-title text-center" ng-bind="$ctrl.question"></h3>',"<span class='icon-cancel-img' ng-click='$ctrl.cancel()'></span>","</div>",'<div class="modal-body confirm">','<form ng-submit="$ctrl.ok()"><button autofocus class="btn btn-project btn-border  btn-modal pull-right" type="reset" ng-click="$ctrl.cancel()">{{global.get("langOrder").val.noo}}</button>','<button class="btn btn-project btn-modal pull-left" type="submit">{{global.get("langOrder").val.yes}}</button>','</form><div class="clearfix"></div>',"</div>"].join(""),controller:function($uibModalInstance,question){var self=this;self.question=question,self.ok=function(){$uibModalInstance.close()},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl",size:"sm",resolve:{question:function(){return question}}};$uibModal.open(options).result.then(function(){resolve()},function(){reject()})})}return service}function photoFactory($http){return{deleteFolder:function(model,folder){return $http.post("/api/collections/Photo/deleteFolder",{folder:folder})},deleteFolders:function(model,folders){return $http.post("/api/collections/Photo/deleteFolders",{folders:folders})},deleteFiles:function(model,files){return $http.post("/api/collections/Photo/deleteFiles",{files:files})}}}function enterPhoneNumderCtrl($scope,global){function changePhone(){self.phone?self.enterPhoneNumder=self.phoneCode.substring(1)+self.phone.substring(0,10):self.enterPhoneNumder="",self.changeFoo&&"function"==typeof self.changeFoo&&self.changeFoo({phone:self.enterPhoneNumder})}function changeCode(){}var self=this;self.global=global,self.phoneCodes=global.get("store").val.phoneCodes?global.get("store").val.phoneCodes:[{code:"+38",country:"Украина"}],self.phoneCode=global.get("store").val.phoneCode?global.get("store").val.phoneCode.code:"+38",$scope.$watch(function(){return self.enterPhoneNumder},function(enterPhoneNumder,old){if(enterPhoneNumder){var phoneCode="+"+enterPhoneNumder.substring(0,enterPhoneNumder.length-10);self.phoneCodes.getOFA("code",phoneCode)&&(self.phoneCode=phoneCode),self.phone=enterPhoneNumder.substring(enterPhoneNumder.length-10)}}),self.changePhone=changePhone,self.changeCode=changeCode}function sectionServiceFunction($resource,$q,global,$uibModal,$timeout){function init(){Items.query(function(res){res.shift(),sections=res,setCategoriesFromSections(sections),pending=!1})}function reloadItems(){pending=!0,init()}function save(){return Items.save.apply(this,arguments).$promise.then(function(){})}function _getParentSection(sections,sectionUrl,id){if(!sections)return null;for(var i=0,l=sections.length;i<l;i++){if(id){if(sections[i]._id==sectionUrl)return sections[i]}else if(sections[i].url&&sections[i].url==sectionUrl)return sections[i];if(sections[i].child&&sections[i].child.length){var categories;if(categories=_getParentSection(sections[i].child,sectionUrl,id))return categories}}return null}function _getEmbededCategories(section,arr){return section.categories&&section.categories.length&&arr.push.apply(arr,section.categories),section.child&&section.child.length&&section.child.forEach(function(section){getEmbededCategories(section,arr)}),arr}function returnSections(resolve){pending?setTimeout(function(){returnSections(resolve)},100):resolve(sections)}function getSections(){return $q(function(resolve,reject){global.get("sections")&&global.get("sections").val?(sections||(sections=global.get("sections").val),resolve(global.get("sections").val)):pending?setTimeout(function(){returnSections(resolve)},100):sections?resolve(sections):(pending=!0,Items.query(function(res){res.shift(),sections=res,pending=!1,setCategoriesFromSections(sections),resolve(sections)},function(err){pending=!1,reject(err)}))})}function setSections(newSections){sections=newSections,setCategoriesFromSections(sections?sections:[])}function getSection(sections,sectionUrl){sections||(sections=getSections());for(var i=0,l=sections.length;i<l;i++){if(sections[i].url&&sections[i].url==sectionUrl)return sections[i];if(sections[i].child&&sections[i].child.length)for(var j=0,ll=sections[i].child.length;j<ll;j++)if(sections[i].child[j].url&&sections[i].child[j].url==sectionUrl)return sections[i].child[j]}return null}function getParentSection(sectionUrl,id){return _getParentSection(sections,sectionUrl,id)}function getEmbededCategories(section,arr){return _getEmbededCategories(section,arr)}function setCategoriesFromSections(sections){var categories=[],categoriesO={};sections.forEach(function(section){section.categories&&section.categories.length&&(section.categories.forEach(function(c){c.section={url:section.url},c.linkData={groupUrl:section.url,categoryUrl:c.url},categoriesO[c._id]=c}),categories.push.apply(categories,section.categories)),section.child&&section.child.length&&section.child.forEach(function(subSection){subSection.categories&&subSection.categories.length&&(subSection.categories.forEach(function(c){c.section={url:section.url},c.linkData={groupUrl:section.url,categoryUrl:c.url,parentGroup:subSection.url},categoriesO[c._id]=c}),categories.push.apply(categories,subSection.categories))})}),global.set("categories",categories),global.set("categoriesO",categoriesO)}function select(){var that=this;return $q(function(resolve,reject){var options={animation:!0,templateUrl:"components/sections/selectSubsectionModal.html",controller:selectSubsectionCtrl,size:"lg",resolve:{sections:function(){return that.getSections()}},controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(selectedItem){resolve(selectedItem)},function(){console.log("Modal dismissed at: "+new Date),reject()})})}function selectSubsectionCtrl($q,$uibModalInstance,sections){var self=this;self.sections=sections,console.log(sections),self.ok=function(section){$uibModalInstance.close(section)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}}var Items=$resource("/api/collections/Group/:id",{id:"@_id"}),sections=null,pending=!0;return function(){$timeout(function(){global.get("sections")&&global.get("sections").val||init()})}(),{query:Items.query,get:Items.get,delete:Items.delete,save:save,savePure:Items.save,getSections:getSections,getSection:getSection,getParentSection:getParentSection,getEmbededCategories:getEmbededCategories,setCategoriesFromSections:setCategoriesFromSections,select:select,setSections:setSections,reloadItems:reloadItems}}function filterTagsService($resource,$uibModal,$q,global,$timeout,Sections){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return console.log("XHR Failed for getNews."+error),$q.reject(error)}return paginate||(paginate={page:0}),Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete).catch(getListFailed)}function getItem(id){function getItemComplete(response){return response}function getItemFailed(error){return $q.reject(error)}return Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}function getFilterTags(){return $q(function(resolve,reject){return global.get("filterTags")&&global.get("filterTags").val?(filterTags||(filterTags=global.get("filterTags").val),resolve(global.get("filterTags").val)):pending?$timeout(function(){return resolve(filterTags)},400):void(filterTags?resolve(filterTags):(pending=!0,Items.query(function(res){res.shift(),filterTags=res?res:[],pending=!1,resolve(filterTags)},function(err){pending=!1,reject(err)})))})}function getTagsByUrl(queryTags,cb){$q.when().then(function(){return getFilterTags()}).then(function(){queryTags=queryTags.map(function(url){return filterTags.getOFA("url",url)}),cb(queryTags)})}function selectFilterTag(data){var sections=data&&data.section?Sections.getSections():null;return $q(function(resolve,reject){var options={animation:!0,templateUrl:"components/filters/bindFilterTagToModel.html",controller:selectFilterTagCtrl,size:"lg",controllerAs:"$ctrl",resolve:{sections:function(){return sections}}};$uibModal.open(options).result.then(function(selectedFilterTag){resolve(selectedFilterTag)},function(){console.log("Modal dismissed at: "+new Date),reject()})})}function selectFilterTagCtrl(Filters,$uibModalInstance,$q,global,sections){var self=this;self.global=global,self.sections=sections,self.sections&&(self.section=self.sections[0].url),$q.when().then(function(){return Filters.getFilters()}).then(function(filters){self.filters=filters}),self.cancel=function(){$uibModalInstance.dismiss("cancel")},self.ok=function(filterTag){self.section&&(filterTag.section=self.section),$uibModalInstance.close(filterTag)}}function init(){Items.query(qu,function(res){res.shift(),filterTags=res,filterTags.forEach(function(t){_filterTagsO[t._id]=t}),pending=!1})}function reloadItems(){pending=!0,init()}function getSticker(tags){if(tags&&tags.length&&filterTags&&filterTags.length)for(var i=0;i<tags.length;i++)if(__filterTagsO[tags[i]]&&__filterTagsO[tags[i]].sticker)return __filterTagsO[tags[i]].sticker}var qu,Items=$resource("/api/collections/FilterTags/:_id",{_id:"@_id"}),filterTags=null,pending=!0;return filterTags=__filterTags,$timeout(function(){qu={query:JSON.stringify({store:global.get("store").val._id})},global.get("filterTags")&&global.get("filterTags").val?filterTags=global.get("filterTags").val:init()},50),{getList:getList,getItem:getItem,save:Items.save,delete:Items.delete,query:Items.query,get:Items.get,getFilterTags:getFilterTags,getTagsByUrl:getTagsByUrl,selectFilterTag:selectFilterTag,select:selectFilterTag,reloadItems:reloadItems,getSticker:getSticker,reloadItems:reloadItems}}function HPtransform(HP,template){function setData(e){var o={type:e.name};return e.templ&&(o.templ=e.templ),e.style&&(o.style=e.style),"stuffs"==e.name?(HP.stuffs&&HP.stuffs.length&&(o.stuffs=HP.stuffs),e.namebox&&(o.name=e.namebox)):"brands"==e.name?(HP.brands&&HP.brands.length&&(o.brands=HP.brands),e.namebox&&(o.name=e.namebox)):"brandTags"==e.name?(HP.brandTags&&HP.brandTags.length&&(o.brandTags=HP.brandTags),e.namebox&&(o.name=e.namebox)):"filterTags"==e.name?(HP.filterTags&&HP.filterTags.length&&(o.filterTags=HP.filterTags),e.namebox&&(o.name=e.namebox)):"filters"==e.name?(HP.filters&&HP.filters.length&&(o.filters=HP.filters),e.namebox&&(o.name=e.namebox)):"categories"==e.name?(HP.categories&&HP.categories.length&&(o.categories=HP.categories),e.namebox&&(o.name=e.namebox)):"campaign"==e.name?(HP.campaign&&HP.campaign.length&&(o.campaign=HP.campaign),e.namebox&&(o.name=e.namebox)):"news"==e.name?(HP.news&&HP.news.length&&(o.news=HP.news),e.namebox&&(o.name=e.namebox)):"text"==e.name?(o.name=HP.textName,o.desc=HP.textDesc,HP.textButton&&(o.button={is:HP.textButton.button,link:HP.textButton.link,text:HP.textButton.text})):"mission"==e.name?(o.name=HP.name,o.desc=HP.desc,HP.descButton&&(o.button={is:HP.descButton.button,link:HP.descButton.link,text:HP.descButton.text})):"banner"==e.name?(o.img=HP.bannerSrc,HP.banner&&(o.desc=HP.banner.desc,o.button={is:HP.banner.button,link:HP.banner.link,text:HP.banner.text})):"video"==e.name?(o.video=HP.videoSrc,HP.video&&(o.audio=HP.video.audio,o.desc=HP.video.desc,o.button={is:HP.video.button,link:HP.video.link,text:HP.video.text})):"slider"==e.name?HP.imgs&&(o.imgs=HP.imgs):"info"==e.name&&(o.img=HP.infoImg,HP.info&&(o.name=HP.info.name,o.button={link:HP.info.link})),o}if(HP.url)var hp=HP;else{var hp={header:[],left:[],right:[]};template.left.forEach(function(e){hp.left.push(setData(e))}),template.right.forEach(function(e){hp.right.push(setData(e))})}return hp}function googlePlaceReviews(global){return{restrict:"C",scope:!0,link:function(scope,element){global.get("store").val.glPlaceId&&(console.log("global.get('store').val.glPlaceId",global.get("store").val.glPlaceId),$(element).googlePlaces({placeId:global.get("store").val.glPlaceId,render:["reviews"],min_rating:1,max_rows:4}))}}}function undefinedhpBlock(){return{templateUrl:"components/homePage/blocks/undefinedBlock.html"}}function styleBlock(){return{templateUrl:"components/homePage/blocks/styleBlock.html"}}function bannerHPBlock(){return{templateUrl:"components/homePage/blocks/bannerBlock.html"}}function banneroneHPBlock(){return{templateUrl:"components/homePage/blocks/banneroneBlock.html"}}function infohpBlock(){return{templateUrl:"components/homePage/blocks/infoBlock.html"}}function sliderhpBlock(){return{templateUrl:"components/homePage/blocks/sliderBlock.html"}}function texthpBlock(){return{templateUrl:"components/homePage/blocks/textBlock.html"}}function texttwohpBlock(){return{templateUrl:"components/homePage/blocks/texttwoBlock.html"}}function videohpBlock(){return{templateUrl:"components/homePage/blocks/videoBlock.html"}}function missionhpBlock(){return{templateUrl:"components/homePage/blocks/missionBlock.html"}}function brandshpBlock(){return{templateUrl:"components/homePage/blocks/brandsBlock.html"}}function stuffshpBlock(){return{templateUrl:"components/homePage/blocks/stuffsBlock.html"}}function newshpBlock(){return{templateUrl:"components/homePage/blocks/newsBlock.html"}}function campaignhpBlock(){return{templateUrl:"components/homePage/blocks/campaignBlock.html"}}function maphpBlock(){return{templateUrl:"components/homePage/blocks/mapBlock.html"}}function reviewhpBlock(){return{templateUrl:"components/homePage/blocks/reviewBlock.html"}}function subscriptionhpBlock(){return{templateUrl:"components/homePage/blocks/subscriptionBlock.html"}}function callhpBlock(){return{templateUrl:"components/homePage/blocks/callBlock.html"}}function feedbackhpBlock(){return{templateUrl:"components/homePage/blocks/feedbackBlock.html"}}function brandTagshpBlock(){return{templateUrl:"components/homePage/blocks/brandTagsBlock.html"}}function subscriptionAddhpBlock(){return{templateUrl:"components/homePage/blocks/subscriptionAddBlock.html"}}function filterTagshpBlock(){return{templateUrl:"components/homePage/blocks/filterTagsBlock.html"}}function filtershpBlock(){return{templateUrl:"components/homePage/blocks/filtersBlock.html"}}function categorieshpBlock(){return{templateUrl:"components/homePage/blocks/categoriesBlock.html"}}function calendarhpBlock(){return{templateUrl:"components/homePage/blocks/calendarBlock.html"}}function videolinkhpBlock(){return{templateUrl:"components/homePage/blocks/videolinkhpBlock.html"}}function pricegoodshpBlock(){return{templateUrl:"components/homePage/blocks/pricegoodsBlock.html"}}function priceserviceshpBlock(){return{templateUrl:"components/homePage/blocks/priceservicesBlock.html"}}function scheduleplacehpBlock(){return{templateUrl:"components/homePage/blocks/scheduleplaceBlock.html"}}angular.module("ngLocale",[],["$provide",function($provide){function getDecimals(n){n+="";var i=n.indexOf(".");return i==-1?0:n.length-i-1}function getVF(n,opt_precision){var v=opt_precision;void 0===v&&(v=Math.min(getDecimals(n),3));var base=Math.pow(10,v);return{v:v,f:(n*base|0)%base}}var PLURAL_CATEGORY={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};$provide.value("$locale",{DATETIME_FORMATS:{AMPMS:["ДП","ПП"],DAY:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],ERANAMES:["до Рождества Христова","от Рождества Христова"],ERAS:["до н. э.","н. э."],FIRSTDAYOFWEEK:0,MONTH:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],SHORTDAY:["вс","пн","вт","ср","чт","пт","сб"],SHORTMONTH:["янв.","февр.","мар.","апр.","мая","июн.","июл.","авг.","сент.","окт.","нояб.","дек."],STANDALONEMONTH:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"],WEEKENDRANGE:[5,6],fullDate:"EEEE, d MMMM y 'г'.",longDate:"d MMMM y 'г'.",medium:"d MMM y 'г'. HH:mm:ss",mediumDate:"d MMM y 'г'.",mediumTime:"HH:mm:ss",short:"dd.MM.yy HH:mm",shortDate:"dd.MM.yy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"грн.",DECIMAL_SEP:",",GROUP_SEP:" ",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:" ¤",posPre:"",posSuf:" ¤"}]},id:"ru-ua",localeID:"ru_UA",pluralCat:function(n,opt_precision){var i=0|n,vf=getVF(n,opt_precision);return 0==vf.v&&i%10==1&&i%100!=11?PLURAL_CATEGORY.ONE:0==vf.v&&i%10>=2&&i%10<=4&&(i%100<12||i%100>14)?PLURAL_CATEGORY.FEW:0==vf.v&&i%10==0||0==vf.v&&i%10>=5&&i%10<=9||0==vf.v&&i%100>=11&&i%100<=14?PLURAL_CATEGORY.MANY:PLURAL_CATEGORY.OTHER}})}]);for(var minTimePart=15,timeRemindArrLang=[{ru:"за 1 час",uk:"",en:"",de:"",part:4},{ru:"за 2 часа",uk:"",en:"",de:"",part:8},{ru:"за 3 часа",uk:"",en:"",de:"",part:12},{ru:"за 4 часа",uk:"",en:"",de:"",part:16},{ru:"за 5 часов",uk:"",en:"",de:"",part:20},{ru:"за 6 часов",uk:"",en:"",de:"",part:24},{ru:"за 12 часов",uk:"",en:"",de:"",part:48},{ru:"за 1 день",uk:"",en:"",de:"",part:96}],timeDurationArrLang=[{ru:"15 мин",uk:"",en:"",de:"",part:1},{ru:"30 мин",uk:"",en:"",de:"",part:2},{ru:"45 мин",uk:"",en:"",de:"",part:3},{ru:"1 час",uk:"",en:"",de:"",part:4},{ru:"1 час 15 мин",uk:"",en:"",de:"",part:5},{ru:"1 час 30 мин",uk:"",en:"",de:"",part:6},{ru:"1 час 45 мин",uk:"",en:"",de:"",part:7},{ru:"2 часа",uk:"",en:"",de:"",part:8},{ru:"2 часа 15 мин",uk:"",en:"",de:"",part:9},{ru:"2 часа 30 мин",uk:"",en:"",de:"",part:10},{ru:"3 часа",uk:"",en:"",de:"",part:12},{ru:"3 часа 30 мин",uk:"",en:"",de:"",part:14},{ru:"4 часа",uk:"",en:"",de:"",part:16}],weekDays=[{ru:"Воскресенье",uk:"Неділя",en:"Sunday",de:"gdsdfsdf"},{ru:"Понедельник",uk:"Понеділок",en:"Monday",de:"gdsdfsdf"},{ru:"Вторник",uk:"Вівторок",en:"Tuesday",de:"gdsdfsdf"},{ru:"Среда",uk:"Середа",en:"Wednesday",de:"gdsdfsdf"},{ru:"Четверг",uk:"Четвер",en:"Thursday",de:"gdsdfsdf"},{ru:"Пятница",uk:"П*ятниця",en:"Friday",de:"gdsdfsdf"},{ru:"Суббота",uk:"Субота",en:"Saturday",de:"gdsdfsdf"}],reservedFirstParamsForAdmin=["manage","promo","seo","setting","content","translate","admin123","bookkeep"],reservedFirstParams=["manage","promo","seo","setting","content","translate","news","lookbook","stat","master","campaign","info","additional","workplace","cabinet","pricegoods","priceservices","home","search","cart","cabinet","bookkeep","likes"],languagesOfPlatform=["ru","uk","en","de","es"],propertiesOfConfigData=[{key:"unitOfMeasure",name:"единицы измерения"}],phoneCodes=[{code:"+38",country:"Ukraine"},{code:"+7",country:"Russia"},{code:"+501",country:"Moldova"},{code:"+44",country:"United Kingdom"},{code:"+93",country:"Afghanistan"},{code:"+355",country:"Albania"},{code:"+213",country:"Algeria"},{code:"+1-684",country:"American Samoa"},{code:"+376",country:"Andorra"},{code:"+244",country:"Angola"},{code:"+1-264",country:"Anguilla"},{code:"+672",country:"Antarctica"},{code:"+1-268",country:"Antigua and Barbuda"},{code:"+54",country:"Argentina"},{code:"+374",country:"Armenia"},{code:"+297",country:"Aruba"},{code:"+61",country:"Australia"},{code:"+43",country:"Austria"},{code:"+994",country:"Azerbaijan"},{code:"+1-242",country:"Bahamas"},{code:"+973",country:"Bahrain"},{code:"+880",country:"Bangladesh"},{code:"+1-246",country:"Barbados"},{code:"+375",country:"Belarus"},{code:"+32",country:"Belgium"},{code:"+1-246",country:"Belize"},{code:"+229",country:"Benin"},{code:"+1-441",country:"Bermuda"},{code:"+975",country:"Bhutan"},{code:"+591",country:"Bolivia"},{code:"+246",country:"British Indian Ocean Territory"},{code:"+267",country:"Botswana"},{code:"+55",country:"Brazil"},{code:"+387",country:"Bosnia and Herzegovina"},{code:"+1-284",country:"British Virgin Islands"},{code:"+673",country:"Brunei"},{code:"+359",country:"Bulgaria"},{code:"+226",country:"Burkina Faso"},{code:"+257",country:"Burundi"},{code:"+855",country:"Cambodia"},{code:"+237",country:"Cameroon"},{code:"+1",country:"Canada"},{code:"+238",country:"Cape Verde"},{code:"+1-345",country:"Cayman Islands"},{code:"+236",country:"Central African Republic"},{code:"+235",country:"Chad"},{code:"+56",country:"Chile"},{code:"+86",country:"China"},{code:"+57",country:"Colombia"},{code:"+269",country:"Comoros"},{code:"+506",country:"Costa Rica"},{code:"+385",country:"Croatia"},{code:"+53",country:"Cuba"},{code:"+599",country:"Curacao"},{code:"+357",country:"Cyprus"},{code:"+420",country:"Czech Republic"},{code:"+45",country:"Denmark"},{code:"+1-767",country:"Dominica"},{code:"+593",country:"Ecuador"},{code:"+995",country:"Georgia"},{code:"+49",country:"Germany"},{code:"+30",country:"Greece"},{code:"+852",country:"Hong Kong"},{code:"+36",country:"Hungary"},{code:"+354",country:"Iceland"},{code:"+852",country:"Hong Kong"},{code:"+36",country:"Hungary"},{code:"+30",country:"Greece"},{code:"+91",country:"India"},{code:"+62",country:"Indonesia"},{code:"+98",country:"Iran"},{code:"+964",country:"Iraq"},{code:"+353",country:"Ireland"},{code:"+972",country:"Israel"},{code:"+39",country:"Italy"},{code:"+81",country:"Japan"},{code:"+962",country:"Jordan"},{code:"+7",country:"Kazakhstan"},{code:"+383",country:"Kosovo"},{code:"+965",country:"Kuwait"},{code:"+996",country:"Kyrgyzstan"},{code:"+856",country:"Laos"},{code:"+371",country:"Latvia"},{code:"+961",country:"Lebanon"},{code:"+218",country:"Libya"},{code:"+423",country:"Liechtenstein"},{code:"+370",country:"Lithuania"},{code:"+352",country:"Luxembourg"},{code:"+853",country:"Macau"},{code:"+389",country:"Macedonia"},{code:"+261",country:"Madagascar"},{code:"+60",country:"Malaysia"},{code:"+356",country:"Malta"},{code:"+222",country:"Mauritania"},{code:"+230",country:"Mauritius"},{code:"+52",country:"Mexico"},{code:"+373",country:"Moldova"},{code:"+377",country:"Monaco"},{code:"+976",country:"Mongolia"},{code:"+382",country:"Montenegro"},{code:"+212",country:"Morocco"},{code:"+977",country:"Nepal"},{code:"+31",country:"Netherlands"},{code:"+507",country:"Panama"},{code:"+595",country:"Paraguay"},{code:"+382",country:"Montenegro"},{code:"+377",country:"Monaco"},{code:"+51",country:"Peru"},{code:"+63",country:"Philippines"},{code:"+48",country:"Poland"},{code:"+351",country:"Portugal"},{code:"+974",country:"Qatar"},{code:"+40",country:"Romania"},{code:"+378",country:"San Marino"},{code:"+966",country:"Saudi Arabia"},{code:"+381",country:"Serbia"},{code:"+65",country:"Singapore"},{code:"+421",country:"Slovakia"},{code:"+386",country:"Slovenia"},{code:"+27",country:"South Africa"},{code:"+82",country:"South Korea"},{code:"+34",country:"Spain"},{code:"+94",country:"Sri Lanka"},{code:"+46",country:"Sweden"},{code:"+41",country:"Switzerland"},{code:"+886",country:"Taiwan"},{code:"+992",country:"Tajikistan"},{code:"+66",country:"Thailand"},{code:"+216",country:"Tunisia"},{code:"+90",country:"Turkey"},{code:"+993",country:"Turkmenistan"},{code:"+971",country:"United Arab Emirates"},{code:"+44",country:"United Kingdom"},{code:"+1",country:"United States"},{code:"+598",country:"Uruguay"},{code:"+998",country:"Uzbekistan"},{code:"+379",country:"Vatican"},{code:"+58",country:"Venezuela"},{code:"+84",country:"Vietnam"},{code:"+967",country:"Yemen"}],modelsName={stat:{ru:"страницы",uk:"сторінки",en:"pages",de:"pages"},stuff:{ru:"товары и услуги",uk:"товари та послуги",en:"goods and services",de:"goods and services"},news:{ru:"новости",uk:"новини",en:"news",de:"news"},info:{ru:"информация",uk:"інформація",en:"information",de:"information"},workplace:{ru:"локации",uk:"локации",en:"locations",de:"locations"}},lengthStyleBlock=61,arrEmptyForProperties=[],i=0;i<lengthStyleBlock;i++)arrEmptyForProperties.push("");var listOfBlocksForMainPage={slider:"слайдер",video:"видео",videoLink:"внешнее видео",banner:"баннер",
bannerOne:"баннер в два потока",mission:"миссия",text:"текстовый блок",textTwo:"текстовый блок 2 потока",campaign:"акции",filterTags:"тематические группы (признаки из хар-тик)",filters:"характеристики",brandTags:"коллекции",brands:"бренды",categories:"категории",stuffs:"товары",news:"новости",info:"информационный раздел",pricegoods:"прайс товаров",priceservices:"прайс услуг",map:"карта",review:"отзывы гугл",subscription:"подписка",subscriptionAdd:"подписка с доп полями",call:"заказ звонка",feedback:"форма обратной связи",calendar:"гугл календарь",scheduleplace:"расписание для рабочего места"},animationTypes=[{type:null,name:"отсутстует"},{type:"animated1",name:"fadeInLeftBig"},{type:"animated2",name:"fadeInLeft"},{type:"animated3",name:"fadeInLeftMiddle"},{type:"animated4",name:"fadeInRight"},{type:"animated5",name:"fadeInRightMiddle"},{type:"animated6",name:"fadeInRightBig"},{type:"animated7",name:"bounce"},{type:"animated8",name:"fadeInDown"},{type:"animated9",name:"fadeOut"},{type:"animated10",name:"bounceIn"},{type:"animated11",name:"при наведении контур1"},{type:"animated12",name:"при наведении контур2"},{type:"animated13",name:"SweepToTop"},{type:"animated14",name:"SweepToBottom"},{type:"animated15",name:"LineCenterBottom"},{type:"animated16",name:"scale-block"},{type:"animated17",name:"SweepToRight"},{type:"animated18",name:"SweepToLeft"},{type:"animated19",name:"underlineLRL"},{type:"animated20",name:"underline RLR"},{type:"animated21",name:"line-through LRL"},{type:"animated22",name:"underline RLR 5px"},{type:"animated23",name:"test"},{type:"animated24",name:"test"},{type:"animated25",name:"test"},{type:"animated26",name:"test"},{type:"animated27",name:"test"},{type:"animated28",name:"test"},{type:"animated29",name:"test"},{type:"animated30",name:"shake"},{type:"animated31",name:"fadeInUpBig"}],listOfListName=["news","master","stat","info","campaign","lookbook","additional","workplace"],listOfStuffDetailKind=["good","service","info","media"],listOfBlocksForAll={banner:"баннер",bannerOne:"баннер в два потока",brands:"бренды",brandTags:"коллекции",button:"кнопка",calendar:"гугл календарь",call:"заказ звонка",campaign:"акции",categories:"категории",date:"дата",feedback:"форма обратной связи",filterTags:"тематические группы (признаки из хар-тик)",filters:"характеристики",info:"информационный раздел",map:"карта",name:"название",news:"новости",position:"должность",pricegoods:"прайс товаров",priceservices:"прайс услуг",review:"отзывы гугл",schedule:"расписание для специалиста",scheduleplace:"расписание для рабочего места",slider:"слайдер",sn:"кнопки социальных сетей",stuffs:"товары",subscription:"подписка",subscriptionAdd:"подписка с доп полями",text:"текстовый блок",textTwo:"текстовый блок 2 потока",video:"видео",videoLink:"внешнее видео",fbpage:"страница фейсбука",comment:"комментарии дискус"},listOfBlocksForStaticPage={name:"название",text:"текстовый блок",text2:"текстовый блок в две колонки",banner:"фото + текстовый блок (один поток)",banner1:"фото + текстовый блок (два потока)",slider:"слайдер",videoLink:"внешнее видео",video:"видео",video1:"видео + текстовый блок",video2:"текстовый блок + видео",map:"карта",map1:"карта + текстовый блок",map2:"текстовый блок + карта",masters:"сотрудники",feedback:"обратная связь",feedback1:"обратная связь + фото",feedback2:"фото + обратная связь",stuffs:"товары",filterTags:"группы(признаки из хар-тик)",brandTags:"коллекции",brands:"бренды",categories:"категории",campaign:"акции",call:"заказ звонка",button:"кнопка"},listOfBlocksForNewsDetailPage={name:"название",text:"текстовый блок",text2:"текстовый блок в две колонки",banner:"фото + текстовый блок (один поток)",banner1:"фото + текстовый блок (два потока)",slider:"слайдер",videoLink:"внешнее видео",video:"видео",video1:"видео + текстовый блок",video2:"текстовый блок + видео",map:"карта",map1:"карта + текстовый блок",map2:"текстовый блок + карта",stuffs:"товары",campaign:"акции",filterTags:"группы(признаки из хар-тик)",brandTags:"коллекции",brands:"бренды",categories:"категории",date:"дата",sn:"социальные сети"},listOfBlocksForMasterPage={name:"имя",position:"должность",text:"текстовый блок",text2:"текстовый блок в две колонки",banner:"фото + текстовый блок (один поток)",banner1:"фото + текстовый блок (два потока)",slider:"слайдер",video:"видео",videoLink:"внешнее видео",video1:"видео + текстовый блок",video2:"текстовый блок + видео",map:"карта",map1:"карта + текстовый блок",map2:"текстовый блок + карта",stuffs:"товары",schedule:"расписание"},listOfBlocksForWorkplacePage={name:"имя",text:"текстовый блок",text2:"текстовый блок в две колонки",banner:"фото + текстовый блок (один поток)",banner1:"фото + текстовый блок (два потока)",slider:"слайдер",video:"видео",videoLink:"внешнее видео",video1:"видео + текстовый блок",video2:"текстовый блок + видео",map:"карта",map1:"карта + текстовый блок",map2:"текстовый блок + карта",stuffs:"товары",schedule:"расписание"},listOfBlocksForAddPage={name:"имя",text:"текстовый блок",text2:"текстовый блок в две колонки",banner:"фото + текстовый блок (один поток)",banner1:"фото + текстовый блок (два потока)",slider:"слайдер",video:"видео",videoLink:"внешнее видео",video1:"видео + текстовый блок",video2:"текстовый блок + видео",map:"карта",map1:"карта + текстовый блок",map2:"текстовый блок + карта",news:"новости"},listOfBlocksForHeader={logo:"логотип",name:"название",cart:"корзина",enter:"вход",info:"инфо",currency:"валюта",news:"новости",lookbook:"галлерея",search:"поиск",catalog:"каталог",new:"новинки",additional:"дополнительный список",schedule:"расписание",sale:"распродажа",campaign:"акции",master:"мастера",brands:"бренды",collection:"коллекции",phone:"телефон",sn:"социальные сети",lang:"языки",humburger:"humburger",pricegoods:"pricegoods",priceservices:"priceservices",text:"текст",icon:"иконка",likes:"избранное"},listBlocksForFooter={text:"текст",textOne:"текст 1",sn:"соц.сети",subscription:"подписка",feedback:"обратная связь",stat:"статические страницы",catalog:"каталог",infoline:"ииформационная строка",copyright:"правообладание",news:"новости",campaign:"акции",lang:"языки"},listOfBlocksForStats={name:"название",banner:"баннер",gallery:"галлерея",desc:"описание1",desc1:"описание2",desc2:"описание3",map:"карта",video:"видео",masters:"мастера"},listOfBlocksForStuffDetail={name:"название",gallery:"галлерея",desc:"описание",comments:"комментарии",lastViewed:"последние просмотренные",sort:"разновидности",group:"группа товаров",addInfo:"доп.информация",addToCart:"в корзину(действие)",price:"цены",qty:"количество",sn:"соц.сети",feedback:"обратная связь",params:"параметры",tags:"характеристики",blocks:"медиа блоки",back:"кнопка назад в список"},listOfBlocksForStuffDetailBlocks={banner:"фото + текстовый блок (один поток)",banner1:"фото + текстовый блок (два потока)",calendar:"календарь",date:"дата",feedback:"обратная связь",feedbackOne:"текст + обратная связь",feedbackTwo:"обратная связь + текст",imgs:"фото",map:"карта",mapOne:"карта + текстовый блок",mapTwo:"текстовый блок + карта",masters:"блок мастеров",name:"имя",position:"должность",slider:"слайдер",sn:"соцсети",text:"текстовый блок",text2:"текстовый блок в две колонки",video:"видео",videoOne:"видео + текстовый блок",videoTwo:"текстовый блок + видео",videoLink:"внешнее видео",file:"file"},listOfBlocksForStuffList={list:"список",filters:"фильтры",categories:"категории",paginate:"пагинация",search:"поиск",call:"звонок",subscription:"подписка",desc:"описание",seoDesc:"seo описание",blocks:"медиа блоки"},tableOfColorsForButton={0:"black-white",1:"pink-white",2:"turquoise-white",3:"yellow-white",4:"bordo-white",5:"braun-white",6:"powder-white",7:"pinklight-white",8:"white-black",9:"black-white"},tableOfButtonsFile={0:"standart",1:"border-radius",2:"no border",3:"inverse",4:"border",5:"transparent"},listOfIcons=["addcart","back","cart","cartin","cartplus","cancelmenu","cancel","cancelzoom","call","caret","categories","change","dialog","down","dot","delete","downslide","gif","envelope","envelopewhite","edit","eur","fb","fbwhite","filters","header","google","googlewhite","humbmobile","chat","inst","instwhite","left","likes","menu","messageme","messagehe","next","nextgallery","ok","okwhite","pin","pinwhite","plus","prev","prevgallery","right","rub","search","send","setting","spinner","subscription","time","tw","twwhite","uah","up","upslide","user","userhe","userme","usd","vk","vkwhite","see","enter","zoom","yt","ytwhite"],notificationsTypeLang={invoice:{ru:"счет",ua:"рахунок",en:"invoice",de:""},accepted:{ru:"заказ принят",ua:"замовлення прийнято",en:"accepted",de:""},shipOrder:{ru:"данные о доставке",ua:"дані про доставку",en:"shipOrder",de:""},order:{ru:"поступил заказ",ua:"поступило замовлення",en:"order",de:""},pay:{ru:"оплата",ua:"оплата",en:"pay",de:""},feedBack:{ru:"обратная связь",ua:"зворотній зв*язок",en:"feedback",de:""},comment:{ru:"комментарий",ua:"коментар",en:"comments",de:""},call:{ru:"заказ звонка",ua:"замовлення дзвінка",en:"call",de:""},subscription:{ru:"подписка",ua:"підписка",en:"subscription",de:""}},updateExternalCatalogList={everyMon10:{ru:"каждый понедельник в 10.00",ua:"",en:"",de:""},everyMon12:{ru:"каждый понедельник в 12.00",ua:"",en:"",de:""},everyFri10:{ru:"каждую пятницу в 10.00",ua:"",en:"",de:""},everyFri12:{ru:"каждую пятницу в 12.00",ua:"",en:"",de:""},everyDay10:{ru:"каждый день в 10.00",ua:"",en:"",de:""},everyDay12:{ru:"каждый день в 12.00",ua:"",en:"",de:""},everyDay101418:{ru:"каждый день в 10.00,14.00,18.00",ua:"",en:"",de:""}},ratioClassStuffDetail={0:{left:"left-block col-lg-6 col-md-6 col-sm-12 col-xs-12",right:"right-block col-lg-6 col-md-6 col-sm-12 col-xs-12"},1:{left:"left-block vertical-left3 col-lg-5 col-md-5 col-sm-12 col-xs-12",right:"right-block horizontal-right2 col-lg-7 col-md-7 col-sm-12 col-xs-12"},2:{left:"left-block vertical-left2 col-lg-4 col-md-4 col-sm-12 col-xs-12",right:"right-block horizontal-right1 col-lg-8 col-md-8 col-sm-12 col-xs-12"},3:{left:"left-block horizontal-left1 col-lg-7 col-md-7 col-sm-12 col-xs-12",right:"right-block vertical-right1  col-lg-5 col-md-5 col-sm-12 col-xs-12"},4:{left:"left-block horizontal-left2 col-lg-8 col-md-8 col-sm-12 col-xs-12",right:"right-block vertical-right2 col-lg-4 col-md-4 col-sm-12 col-xs-12"},5:{left:"left-block col-lg-12 col-md-12 col-sm-12 col-xs-12",right:"right-block col-lg-12 col-md-12 col-sm-12 col-xs-12"}},elementsList=["a","p","div","h1","h2","h3","h4","ol","ul","li","span","img","hr","iframe","table","tr","th","td"],getNamePropertyCSS=function(i,item,k){if(item)switch(i){case 0:return["color",item];case 1:return["background-color",item];case 2:return["margin-top",item];case 3:return["margin-right",item];case 4:return["margin-bottom",item];case 5:return["margin-left",item];case 6:return["padding-top",item];case 7:return["padding-right",item];case 8:return["padding-bottom",item];case 9:return["padding-left",item];case 10:return["display",item];case 11:return["font-family",item];case 12:return["font-size",item];case 13:return["font-weight",item];case 14:return["letter-spacing",item];case 15:return["text-transform",item];case 16:return["width",item];case 17:return["height",item];case 18:return["float",item];case 19:return["top",item];case 20:return["left",item];case 21:return["right",item];case 22:return["bottom",item];case 23:return["text-decoration",item];case 24:return["text-align",item];case 25:return["position",item];case 26:return["border",item];case 27:return["border-left",item];case 28:return["border-right",item];case 29:return["border-top",item];case 30:return["border-bottom",item];case 31:return["border-radius",item];case 32:return["z-index",item];case 33:return["opacity",item];case 34:return["border-width",item];case 35:return["list-style",item];case 36:return["vertical-align",item];case 37:return["background-size",item];case 38:return["background-position",item];case 39:return["text-shadow",item];case 40:return["cursor",item];case 41:return["transition",item];case 42:return["box-shadow",item];case 43:return["transform",item];case 44:return["background",item];case 45:return["clear",item];case 46:return["max-width",item];case 47:return["min-width",item];case 48:return["max-height",item];case 49:return["min-height",item];case 50:return["line-height",item];case 51:return["object-fit",item];case 52:return["object-position",item];case 53:return["overflow",item];case 54:return["background-attachment",item];case 55:return["background-repeat",item];case 56:return["padding",item];case 57:return["margin",item];case 58:return["word-break",item];case 59:return["word-wrap",item];case 60:return["word-spacing",item]}else switch(i){case 0:return"color";case 1:return"background-color";case 2:return"margin-top";case 3:return"margin-right";case 4:return"margin-bottom";case 5:return"margin-left";case 6:return"padding-top";case 7:return"padding-right";case 8:return"padding-bottom";case 9:return"padding-left";case 10:return"display";case 11:return"font-family";case 12:return"font-size";case 13:return"font-weight";case 14:return"letter-spacing";case 15:return"text-transform";case 16:return"width";case 17:return"height";case 18:return"float";case 19:return"top";case 20:return"left";case 21:return"right";case 22:return"bottom";case 23:return"text-decoration";case 24:return"text-align";case 25:return"position";case 26:return"border";case 27:return"border-left";case 28:return"border-right";case 29:return"border-top";case 30:return"border-bottom";case 31:return"border-radius";case 32:return"z-index";case 33:return"opacity";case 34:return"border-width";case 35:return"list-style";case 36:return"vertical-align";case 37:return"background-size";case 38:return"background-position";case 39:return"text-shadow";case 40:return"cursor";case 41:return"transition";case 42:return"box-shadow";case 43:return"transform";case 44:return"background";case 45:return"clear";case 46:return"max-width";case 47:return"min-width";case 48:return"max-height";case 49:return"min-height";case 50:return"line-height";case 51:return"object-fit";case 52:return"object-position";case 53:return"overflow";case 54:return"background-attachment";case 55:return"background-repeat";case 56:return"padding";case 57:return"margin";case 58:return"word-break";case 59:return"word-wrap";case 60:return"word-spacing"}};"undefined"==typeof window&&(exports.listOfBlocksForMainPage=listOfBlocksForMainPage,exports.listOfBlocksForHeader=listOfBlocksForHeader,exports.listBlocksForFooter=listBlocksForFooter,exports.listOfBlocksForStats=listOfBlocksForStats,exports.listOfBlocksForStuffDetail=listOfBlocksForStuffDetail,exports.listOfBlocksForStuffList=listOfBlocksForStuffList,exports.lengthStyleBlock=lengthStyleBlock,exports.arrEmptyForProperties=arrEmptyForProperties,exports.listOfBlocksForNewsDetailPage=listOfBlocksForNewsDetailPage,exports.listOfBlocksForStaticPage=listOfBlocksForStaticPage,exports.modelsName=modelsName,exports.getNamePropertyCSS=getNamePropertyCSS,exports.listOfListName=listOfListName,exports.ratioClassStuffDetail=ratioClassStuffDetail,exports.elementsList=elementsList,exports.reservedFirstParams=reservedFirstParams,exports.reservedFirstParamsForAdmin=reservedFirstParamsForAdmin,exports.minTimePart=minTimePart,exports.listOfBlocksForStuffDetailBlocks=listOfBlocksForStuffDetailBlocks),function(){function url_slug(s,opt){s=String(s),opt=Object(opt);var defaults={delimiter:"-",limit:void 0,lowercase:!0,replacements:{},transliterate:"undefined"==typeof XRegExp};for(var k in defaults)opt.hasOwnProperty(k)||(opt[k]=defaults[k]);var char_map={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ő":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ű":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ő":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ű":"u","ý":"y","þ":"th","ÿ":"y","©":"(c)","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ά":"A","Έ":"E","Ί":"I","Ό":"O","Ύ":"Y","Ή":"H","Ώ":"W","Ϊ":"I","Ϋ":"Y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ά":"a","έ":"e","ί":"i","ό":"o","ύ":"y","ή":"h","ώ":"w","ς":"s","ϊ":"i","ΰ":"y","ϋ":"y","ΐ":"i","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ё":"Yo","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"yo","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","Є":"Ye","І":"I","Ї":"Yi","Ґ":"G","є":"ye","і":"i","ї":"yi","ґ":"g","Č":"C","Ď":"D","Ě":"E","Ň":"N","Ř":"R","Š":"S","Ť":"T","Ů":"U","Ž":"Z","č":"c","ď":"d","ě":"e","ň":"n","ř":"r","š":"s","ť":"t","ů":"u","ž":"z"};for(var k in opt.replacements)s=s.replace(RegExp(k,"g"),opt.replacements[k]);if(opt.transliterate)for(var k in char_map)s=s.replace(RegExp(k,"g"),char_map[k]);var alnum="undefined"==typeof XRegExp?RegExp("[^a-z0-9]+","ig"):XRegExp("[^\\p{L}\\p{N}]+","ig");return s=s.replace(alnum,opt.delimiter),s=s.replace(RegExp("["+opt.delimiter+"]{2,}","g"),opt.delimiter),s=s.substring(0,opt.limit),s=s.replace(RegExp("(^"+opt.delimiter+"|"+opt.delimiter+"$)","g"),""),opt.lowercase?s.toLowerCase():s}function decimalAdjust(type,value,exp){return void 0===exp||0==+exp?Math[type](value):(value=+value,exp=+exp,isNaN(value)||"number"!=typeof exp||exp%1!=0?NaN:(value=value.toString().split("e"),value=Math[type](+(value[0]+"e"+(value[1]?+value[1]-exp:-exp))),value=value.toString().split("e"),+(value[0]+"e"+(value[1]?+value[1]+exp:exp))))}Math.round10||(Math.round10=function(value,exp){return decimalAdjust("round",value,exp)}),Math.floor10||(Math.floor10=function(value,exp){return decimalAdjust("floor",value,exp)}),Math.ceil10||(Math.ceil10=function(value,exp){return decimalAdjust("ceil",value,exp)}),Array.prototype.getObjectFromArray=function(prop,value,a,filter){for(var ar=[],i=0,l=this.length;i<l;i++)if(this[i][prop]&&this[i][prop].toString&&"function"==typeof this[i][prop].toString&&(this[i][prop]=this[i][prop].toString()),this[i][prop]&&this[i][prop]==value){if(!a)return this[i];filter?this[i][filter]&&ar.push(this[i]):ar.push(this[i])}return a?ar:void 0},Array.prototype.getOFA=function(prop,value,a,filter){prop=prop.split("."),1==prop.length&&(prop=prop[0]);for(var ar=[],i=0,l=this.length;i<l;i++)if(this[i]&&(this[i][prop]&&this[i][prop].toString&&"function"==typeof this[i][prop].toString&&(this[i][prop]=this[i][prop].toString()),this[i][prop]&&this[i][prop]==value||prop.length&&this[i][prop[0]]&&this[i][prop[0]][prop[1]]&&this[i][prop[0]][prop[1]]==value)){if(!a)return this[i];filter?this[i][filter]&&ar.push(this[i]):ar.push(this[i])}return a?ar:void 0},Array.prototype.removeOFA=function(prop,value){for(var i=this.length;i--;)this[i]&&this[i].hasOwnProperty(prop)&&arguments.length>1&&this[i][prop]===value&&this.splice(i,1);return this},Array.prototype.getArrayObjects=function(prop,value){for(var arr=[],i=0,l=this.length;i<l;i++)if(this[i][prop]&&this[i][prop].length){var _arr=this[i][prop].map(function(item){return"object"==typeof item?item._id:item});_arr.indexOf(value)>-1&&arr.push(this[i])}return arr},Array.prototype.diff=function(a){return this.filter(function(i){return a.indexOf(i)<0})},Array.prototype.divideArrayWithChunk=function(chunk,fillArrayToEquil){if(!chunk)return[[],[],[],[],[]];if((chunk=Number(chunk))<2)return this;for(var data=this,arr=[],j=0;j<chunk;j++){arr[j]=[];for(var i=j,l=data.length;i<l;i+=chunk)arr[j].push(data[i])}if(fillArrayToEquil)for(var i=1,l=arr.length;i<l;i++)arr[i].length<arr[0].length&&arr[i].push({});return arr},Array.prototype.extend=function(other_array){other_array.forEach(function(v){this.push(v)},this)},String.prototype.clearTag=function(num){return num?this.replace(/<\/?[^>]+(>|$)/g,"").substring(0,num):this.replace(/<\/?[^>]+(>|$)/g,"")},String.prototype.myTrim=function(){return this.trim().split("\n").filter(function(str){return str}).map(function(str){return str.replace(/&nbsp;/g," ").trim()}).filter(function(str){return str}).join("")},String.prototype.clearFirstTag=function(tag){var i=tag.length;return this.substring(2+i,this.length-(3+i))},String.prototype.replaceBlanks=function(){if(this)return this.replace(/(["',.\/\s])/g,"-")},String.prototype.getFormatedDate=function(){var d=new Date(this);return d.getDate()+"-"+(d.getMonth()+1)+"-"+d.getFullYear()},String.prototype.splice||(String.prototype.splice=function(start,delCount,newSubStr){return this.slice(0,start)+newSubStr+this.slice(start+Math.abs(delCount))});new Array("Я","я","Ю","ю","Ч","ч","Ш","ш","Щ","щ","Ж","ж","А","а","Б","б","В","в","Г","г","Д","д","Е","е","Ё","ё","З","з","И","и","Й","й","К","к","Л","л","М","м","Н","н","О","о","П","п","Р","р","С","с","Т","т","У","у","Ф","ф","Х","х","Ц","ц","Ы","ы","Ь","ь","Ъ","ъ","Э","э","/","&"),new Array("Ya","ya","Yu","yu","Ch","ch","Sh","sh","Sh","sh","Zh","zh","A","a","B","b","V","v","G","g","D","d","E","e","E","e","Z","z","I","i","J","j","K","k","L","l","M","m","N","n","O","o","P","p","R","r","S","s","T","t","U","u","F","f","H","h","C","c","Y","y","","","'","'","E","e","-","-");String.prototype.getUrl=function(){return url_slug(this)},String.prototype.shuffle=function(len){len||(len=this.length);for(var parts=this.split(""),i=parts.length;i>0;){var random=parseInt(Math.random()*i),temp=parts[--i];parts[i]=parts[random],parts[random]=temp}return parts.join("").substring(0,len)}}(),function(){function checkMaxDiscount(stuff,price){stuff.maxDiscount&&100*(1-price/stuff.price)>stuff.maxDiscount&&(stuff.maxDiscountOver=!0)}function getOrder(){return new order}var order=function(){function _checkInCondition(__campaign,stuff){var stuffBrand=stuff.brand&&stuff.brand._id?stuff.brand._id:stuff.brand,stuffCategory="object"==typeof stuff.category&&stuff.category.length?stuff.category[0]:stuff.category;return!!(__campaign.conditionStuffs&&__campaign.conditionStuffs.length&&__campaign.conditionStuffs.indexOf(stuff._id)>-1)||(!!(__campaign.conditionTags&&__campaign.conditionTags.length&&__campaign.conditionTags.some(function(tag){return stuff.tags.indexOf(tag)>-1}))||(!!(__campaign.conditionBrandTags&&__campaign.conditionBrandTags.length&&__campaign.conditionBrandTags.indexOf(stuff.brandTag)>-1)||(!!(__campaign.conditionBrands&&__campaign.conditionBrands.length&&__campaign.conditionBrands.indexOf(stuffBrand)>-1)||(!!(__campaign.conditionCategories&&__campaign.conditionCategories.length&&__campaign.conditionCategories.indexOf(stuffCategory)>-1)||void 0))))}var self=this;this.cart={stuffs:[]},this.seller=null,this.cascade=[],this.opt={},this.campaign=[],this.coupon={},this.totalCount=0,this.sum=0,this.price,this.priceSale,this.retail,this.discount=null,this.currency,this.mainCurrency,this.currencyStore,this.messageForCampaign={},this.type,this.user,this.paySum,this._cartCount=function(campaign,cam){var i=0;return this.cart.stuffs.forEach(function(item){campaign?"withoutcampaign"==campaign?item.campaignId||(cam?_checkInCondition(cam,item)&&(i+=Number(item.quantity)):i+=Number(item.quantity)):item.campaignId==campaign&&(i+=Number(item.quantity)):item.quantity&&(i+=Number(item.quantity))}),i},this._checkDiscount=function(){var dis=this.discount;if(dis)return dis.value||(dis.value=0),1==dis.type||3==dis.type?self.price:2==dis.type||4==dis.type||5==dis.type?self.priceSale?self.priceSale:self.price:void 0},this._getDiscountPrice=function(dis,s){if(dis){if(dis.value||(dis.value=0),1==dis.type)return s.price;if(2==dis.type)return s.priceSale?s.priceSale:s.price;if(3==dis.type)return Math.ceil10(s.price-s.price/100*dis.value,-5);if(4==dis.type)return s.priceSale?s.priceSale:Math.ceil10(s.price-s.price/100*dis.value,-5);if(5==dis.type){var cena;return cena=s.priceSale?s.priceSale:s.price,Math.ceil10(cena-cena/100*dis.value,-5)}}},this._checkDiscount2302=function(){var dis=this.discount;if(dis){if(dis.value||(dis.value=0),1==dis.type)return self.price;if(2==dis.type)return self.priceSale?self.priceSale:self.price;if(3==dis.type)return Math.ceil10(self.price-self.price/100*dis.value,-5);if(4==dis.type)return self.priceSale?self.priceSale:Math.ceil10(self.price-self.price/100*dis.value,-5);if(5==dis.type){var cena;return cena=self.priceSale?self.priceSale:self.price,Math.ceil10(cena-cena/100*dis.value,-5)}}},this._isStuffInCampaign=function(stuff,campaign){function check(__campaign){return!!(__campaign.stuffs&&__campaign.stuffs.length&&__campaign.stuffs.indexOf(stuff._id)>-1)||(!!(__campaign.tags&&__campaign.tags.length&&stuff.tags&&__campaign.tags.some(function(tag){return stuff.tags.indexOf(tag)>-1}))||(!!(__campaign.brandTags&&__campaign.brandTags.length&&__campaign.brandTags.indexOf(stuff.brandTag)>-1)||(!!(__campaign.brands&&__campaign.brands.length&&__campaign.brands.indexOf(stuffBrand)>-1)||(!!(__campaign.categories&&__campaign.categories.length&&__campaign.categories.indexOf(stuffCategory)>-1)||void 0))))}function setCampaignPrice(__campaign){stuff.sticker=__campaign.sticker,stuff.campaignUrl=__campaign.url,stuff.campaignId=__campaign._id;var i=0;for(var key in stuff.stock){var price=Number(stuff.stock[key].price);stuff.stock[key].priceCampaign="percent"==__campaign.condition?Math.ceil10(price-Number(__campaign.percent)/100*price,-2):Math.ceil10(price-Number(__campaign.sum),-2),i||(i++,stuff.priceCampaign=stuff.stock[key].priceCampaign)}}var stuffCategory="object"==typeof stuff.category&&stuff.category.length?stuff.category[0]:stuff.category,stuffBrand=stuff.brand&&stuff.brand._id?stuff.brand._id:stuff.brand;if(!self.campaign||!self.campaign.length)return!1;if(campaign){var __campaign=self.campaign.getObjectFromArray("_id",campaign);if(__campaign){var is=check(__campaign);if(is&&!__campaign.revers||!is&&__campaign.revers)return setCampaignPrice(__campaign),__campaign}}else for(var j=0,ll=self.campaign.length;j<ll;j++){var is=check(self.campaign[j]);if(is&&!self.campaign[j].revers||!is&&self.campaign[j].revers)return setCampaignPrice(self.campaign[j]),self.campaign[j]}return!1},this._getCountForBaseStuffs=function(campaign){var q=0;return this.cart.stuffs.forEach(function(item){campaign.forGroupBase?campaign.groupBaseTag&&item.tags&&item.tags.indexOf(campaign.groupBaseTag)>-1?q+=Number(item.quantity):campaign.groupBaseCollection&&campaign.groupBaseCollection==stuff.brandTag&&(q+=Number(item.quantity)):campaign.baseStuffs.indexOf(item._id)>-1&&(q+=Number(item.quantity))}),q},this._checkCompaignCondition=function(id){if(self.campaign){var __campaign=self.campaign.getOFA("_id",id);if(!__campaign||__campaign.forAll||__campaign.revers)return!0;var countConditionStuffs=self._cartCount("withoutcampaign",__campaign);if(!__campaign.ratio)return!0;var countStuff=self._cartCount(__campaign._id);return parseInt(countConditionStuffs/__campaign.ratio)>=countStuff||void 0}},this._checkCompaignConditionForBase=function(id){var campaign=self.campaign.getObjectFromArray("_id",id);if(campaign.useBase&&self._getCountForBaseStuffs(campaign)>=campaign.condition&&!self._cartCount(campaign._id))return!0},this._getUnitOfMeasure=function(){var a=this.cart.stuffs.reduce(function(arr,i){return i.unitOfMeasure&&arr.indexOf(i.unitOfMeasure)<0&&arr.push(i.unitOfMeasure),arr},[]);return 1==a.length?a[0]:null}},_getCascadePrice=function(self){var newPrice=self.price,cascade=self.cascade;if(cascade&&cascade.length){for(var i=0,l=cascade.length;i<l;i++)self.totalCount>=cascade[i][0]&&(newPrice=Math.ceil10(self.price-self.price/100*cascade[i][1],-2));return newPrice}return self.price};order.prototype.init=function(campaign,mainCurrency,currencyStore){this.campaign=campaign,this.mainCurrency=mainCurrency,this.currencyStore=currencyStore},order.prototype.setCamapign=function(campaign){this.campaign=campaign;for(var i=0,l=campaign.length;i<l;i++)this.messageForCampaign[campaign[i].url]={base:null,stuff:null}},order.prototype.setCart=function(stuffs){this.cart.stuffs=stuffs,this.sortCart()},order.prototype.setSellerData=function(seller,cascade,opt){this.seller=seller,this.cascade=cascade,this.opt=opt},order.prototype.setCoupon=function(coupon){this.coupon=coupon},order.prototype.setDiscount=function(discount){this.discount=discount},order.prototype.setCurrency=function(currency){this.currency=currency},order.prototype.changeCurrency=function(currency){this.currency=currency,this.kurs=this.currencyStore[this.currency][0]},order.prototype.getPrice=function(i){var stuff=this.cart.stuffs[i];this.totalCount=this._cartCount(),this.price=stuff.price,this.priceSale=stuff.priceSale,this.retail=stuff.retail,this.priceCampaign=stuff.priceCampaign,stuff.maxDiscountOver=!1;var optIs=!1;(!this.opt||!this.opt.quantity||this.totalCount>=this.opt.quantity)&&(optIs=!0);var cena;return(cena=this._checkDiscount())?(this.discount&&this.discount.value&&stuff.maxDiscount&&this.discount.value>stuff.maxDiscount?stuff.maxDiscountOver=!0:checkMaxDiscount(stuff,cena),cena):stuff.priceCampaign&&optIs&&this._checkCompaignCondition(stuff.campaignId)?stuff.priceCampaign:optIs?this.priceSale?(checkMaxDiscount(stuff,this.priceSale),this.priceSale):_getCascadePrice(this):this.retail||this.price},order.prototype.getTotalSum=function(discount){var sum=0,self=this;if(this.cart.stuffs.forEach(function(c){var s=c.sum?c.sum:c.price;if(discount){var p=self._getDiscountPrice(self.discount,c);p&&(s=p*c.quantity)}sum+=s}),discount){var dis=this.discount;dis&&(6==dis.type?sum=Math.ceil10(sum-sum/100*dis.value,-5):7==dis.type&&(sum-=dis.value))}return sum},order.prototype.getTotalQuantity=function(){var q=0;return this.cart.stuffs.forEach(function(c){q+=Number(c.quantity)}),q},order.prototype.getCampaignQuantity=function(){return this._cartCount("campaign")},order.prototype.getConditionForDisplayMsg=function(){return this.messageForCampaign},order.prototype.getCouponSum=function(){if(!this.coupon||!Object.keys(this.coupon).length)return this.sum;if(!this.coupon.condition)return Math.ceil10(this.sum-this.sum/100*Number(this.coupon.val),-5);if(this.coupon.condition){var val=this.coupon.val;return this.coupon.currency&&this.currencyStore[this.coupon.currency]&&this.currencyStore[this.coupon.currency][0]&&(val=Math.round(val/this.currencyStore[this.coupon.currency][0])),this.sum-Number(val)}},order.prototype.clearOrder=function(){this.cart.stuffs.length=0,this.coupon={},this.totalCount=0,this.sum=0},order.prototype.checkInCart=function(itemTo){return this.cart.stuffs.some(function(c){return itemTo._id==c._id&&itemTo.sort==c.sort})},order.prototype.addStuffToOrder=function(itemTo){if(this.cart.stuffs.length>=150)return!1;if(this.cart.stuffs.some(function(c){return itemTo._id==c._id&&itemTo.sort==c.sort}))return!1;var itemToCart=angular.copy(itemTo);for(var key in itemToCart)"function"==typeof itemToCart[key]&&delete itemToCart[key];return delete itemToCart.comments,delete itemToCart.desc,delete itemToCart.gallery,delete itemToCart.imgs,delete itemToCart.nameL,delete itemToCart.checkInCart,delete itemToCart.addItemToOrder,delete itemToCart.addInfo,delete itemToCart.getDataForBooking,delete itemToCart.FullTags,delete itemToCart.changeSortOfStuff,delete itemToCart.checkInCart,delete itemToCart.driveRetailPrice,delete itemToCart.getBonus,delete itemToCart.zoomImg,delete itemToCart.stockKeysArray,delete itemToCart.sortsOfStuff,delete itemToCart.setPrice,this.cart.stuffs.push(itemToCart),this.sortCart(),!0},
order.prototype.getShipCost=function(){return this.shipDetail.reduce(function(s,c){return isNaN(c.sum)?s:s+Number(c.sum)},0)},order.prototype.getTotalPay=function(){return this.pay||(this.pay=[]),this.pay.reduce(function(s,c){return isNaN(c.sum)?s:s+Number(c.sum)},0)},order.prototype.getTotalDiscount=function(){if(this.sum&&this.sum0)return this.sum>this.sum0?0:100-Math.round(100*this.sum/this.sum0)},order.prototype.checkCampaign=function(stuff){return this._isStuffInCampaign(stuff)},order.prototype.sortCart=function(){this.cart.stuffs.sort(function(a,b){if(!a.extCatalog&&!b.extCatalog)return a.category<b.category?-1:a.category>b.category?1:0;if(a.extCatalog&&!b.extCatalog)return 1;if(!a.extCatalog&&b.extCatalog)return-1;if(a.extCatalog&&b.extCatalog&&a.extCatalog!=b.extCatalog){if(a.category<b.category)return-1;if(a.category>b.category)return 1}else if(a.extCatalog&&b.extCatalog&&a.extCatalog==b.extCatalog)return a.category<b.category?-1:a.category>b.category?1:0})};var myShareData={getOrder:getOrder};"undefined"!=typeof window?(window.myShareData=myShareData,window.OrderModel=order):module.exports=myShareData}();var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();!function(){function _prepareQueryForRequest(queryStart){var arr_id,query=[];for(var key in queryStart)if(queryStart[key])if("tags"==key){var qu=[];for(var key2 in queryStart[key]){var obj=queryStart[key][key2],q=[];obj&&obj.length&&(obj.forEach(function(objT){q.push({tags:objT})}),q.length>1?(q={$or:q},qu.push(q)):(q=q[0],qu.push(q)))}qu.length&&(1==qu.length?query.push(qu[0]):query.push({$and:qu}))}else if("brandTag"==key){if(queryStart[key].length){var obj={};obj[key]={$in:queryStart[key]},query.push(obj)}}else if("_id"==key)queryStart[key].length&&(arr_id={},arr_id[key]={$in:queryStart[key]});else{var obj={};obj[key]=queryStart[key],query.push(obj)}return query=1==query.length?arr_id?JSON.stringify({$or:[query[0],arr_id]}):JSON.stringify(query[0]):query.length>1?arr_id?JSON.stringify({$or:[{$and:query},arr_id]}):JSON.stringify({$and:query}):arr_id?JSON.stringify(arr_id):{}}function _setQueryForTags(query,filters){if(query.queryTags&&"object"==_typeof(query.queryTags)){var keys=Object.keys(query.queryTags);1==keys.length?query.tags={$in:query.queryTags[keys[0]]}:keys.length>1&&(query.$and=[],keys.forEach(function(k){query.$and.push({tags:{$in:query.queryTags[k]}})}))}delete query.queryTags;var keys=Object.keys(query.filters);if(1==keys.length){var filter;filters&&(filter=filters.getOFA("_id",keys[0])),filter&&filter.price?(query.priceForFilter=query.filters[keys[0]],console.log(query.filters[keys[0]])):query["filters."+keys[0]]=query.filters[keys[0]]}else if(keys.length>1&&(query.$and||(query.$and=[]),keys.forEach(function(k){var filter;if(filters&&(filter=filters.getOFA("_id",k)),filter&&filter.price)query.priceForFilter=query.filters[k];else{var o={};o["filters."+k]=query.filters[k],query.$and.push(o)}}),1==query.$and.length)){for(var k in query.$and[0])query[k]=query.$and[0][k];delete query.$and}delete query.filters}var designQuery=function(){function designQuery(brands,brandTags,filters,sectionClass,categories){_classCallCheck(this,designQuery),this.brands=brands,this.brandTags=brandTags,this.filters=filters,this.filterTags=filters.reduce(function(a,item){return a.concat(item.tags)},[]),this.sections=sectionClass.getSections(),this.categories=sectionClass.getCategories(),this.sectionClass=sectionClass}return _createClass(designQuery,[{key:"getQuery",value:function(stateParams,queryParams){if(queryParams)for(var k in queryParams)stateParams[k]=queryParams[k];stateParams.groupUrl=stateParams.group,stateParams.categoryUrl=stateParams.category;var parentSection,sectionCategories,categoryBrands=[],categoryFilters=[],query={},brands=(this.sections,this.brands),filters=this.filters;this.categories;if(!(parentSection=this.sectionClass.getSection(stateParams.groupUrl)))throw 404;if("category"!=stateParams.categoryUrl){var category=parentSection.categoriesO[stateParams.categoryUrl];if(!category)throw 404;query.category=category._id,categoryBrands=category.brands,categoryFilters=category.filters}else{var sectionCategoriesFull=this.sectionClass.getEmbededCategories(parentSection,[]);sectionCategories=sectionCategoriesFull.map(function(el){return el._id}),sectionCategories.length?(query.category={$in:sectionCategories},sectionCategoriesFull.forEach(function(c){c.filters.forEach(function(f){categoryFilters.indexOf(f)<0&&categoryFilters.push(f)}),c.brands.forEach(function(b){categoryBrands.indexOf(b)<0&&categoryBrands.push(b)})})):query.category=null}var brandsArr,brandTagsArr;stateParams.brand&&(brandsArr=stateParams.brand.split("__"),stateParams.brand=stateParams.brand.split("__")),stateParams.brandTag&&(brandTagsArr=stateParams.brandTag.split("__"),stateParams.brandTag=stateParams.brandTag.split("__")),query.brand=[],query.brandTag=[],brands.forEach(function(b){brandsArr&&brandsArr.indexOf(b.url)>-1&&query.brand.push(b._id),b.tags.forEach(function(t){brandTagsArr&&brandTagsArr.indexOf(t.url)>-1&&query.brandTag.push(t._id)})}),query.brand.length?1==query.brand.length?query.brand=query.brand[0]:query.brand={$in:query.brand}:query.brand=null,query.brandTag.length?1==query.brandTag.length?query.brandTag=query.brandTag[0]:query.brandTag={$in:query.brandTag}:query.brandTag=null,query.brandTag||delete query.brandTag,query.brand||delete query.brand;var queryTags;stateParams.queryTag&&(queryTags=stateParams.queryTag.split("__"),queryTags=queryTags.filter(function(item,pos){return queryTags.indexOf(item)==pos})),query.filters={};var filterTags;if(stateParams.filterTag&&(filterTags=stateParams.filterTag.split("__"),filterTags=filterTags.filter(function(item,pos){return filterTags.indexOf(item)==pos}),filterTags=filterTags.map(function(f){return f.split("_")}).filter(function(f){return 3==f.length}).forEach(function(f){query.filters[f[0]]={$gte:Number(f[1]),$lte:Number(f[2])}})),query.queryTags={},filters.forEach(function(f){f.count?query.filters[f._id]?(f.minValue=query.filters[f._id].$gte,f.maxValue=query.filters[f._id].$lte):(f.minValue=f.min,f.maxValue=f.max):f.tags.forEach(function(t){queryTags&&queryTags.indexOf(t.url)>-1&&(query.queryTags[t.filter]||(query.queryTags[t.filter]=[]),query.queryTags[t.filter].push(t._id))})}),_setQueryForTags(query,filters),query.actived=!0,stateParams.searchStr){var search=stateParams.searchStr.substring(0,20);query.$or=[{name:search},{artikul:search}]}return query}},{key:"getQueryString",value:function(params,query,queryCategory){this.queryCategory=queryCategory;var brand=(params.group,params.category,query.brand),brandTag=query.brandTag,queryTag=query.queryTag,q={},b=this.brands.getOFA("url",brand);if(brand&&b&&(q.brand=b._id),brandTag){var bt=void 0;if(b){var _bt=b.tags.getOFA("url",brandTag);_bt&&(q.brandTag=_bt._id)}else for(var i=0;i<this.brands.length;i++)if(bt=this.brands[i].tags.getOFA("url",brandTag)){q.brandTag=bt._id;break}}if(queryTag){q.tags={};var filterTags=this.filterTags;queryTag.split("+").map(function(url){return filterTags.getOFA("url",url)}).filter(function(t){return t}).forEach(function(t){q.tags[t.filter]||(q.tags[t.filter]=[]),q.tags[t.filter].push(t._id)})}return this.queryCategory&&this.queryCategory.category&&(q.category=this.queryCategory.category),_prepareQueryForRequest(q)}}]),designQuery}();"undefined"!=typeof window?window.DesignQuery=designQuery:exports.init=designQuery}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();!function(){var Section=function(){function Section(sections){_classCallCheck(this,Section),this.sections=sections,this.categories=sections.reduce(function(a,s){return s.categoriesO={},s.categories&&s.categories.forEach(function(cat){a[cat.url]=cat,s.categoriesO[cat.url]=cat}),s.child&&s.child.forEach(function(c){c.categoriesO={},c.categories&&c.categories.forEach(function(cat){a[cat.url]=cat,c.categoriesO[cat.url]=cat})}),a},{})}return _createClass(Section,[{key:"getSections",value:function(){return this.sections}},{key:"getCategories",value:function(){return this.categories}},{key:"getSection",value:function(sectionUrl){if(!this.sections)return null;for(var sections=this.sections,i=0,l=sections.length;i<l;i++){if(sections[i].url&&sections[i].url==sectionUrl)return sections[i];if(sections[i].child&&sections[i].child.length)for(var j=0,ll=sections[i].child.length;j<ll;j++)if(sections[i].child[j].url&&sections[i].child[j].url==sectionUrl)return sections[i].child[j]}return null}},{key:"getParentSection",value:function(sectionUrl,id){if(!this.sections)return null;for(var sections=this.sections,i=0,l=sections.length;i<l;i++){if(id){if(sections[i]._id==sectionUrl)return sections[i]}else if(sections[i].url&&sections[i].url==sectionUrl)return sections[i];if(sections[i].child&&sections[i].child.length){var categories;if(categories=_getParentSection(sections[i].child,sectionUrl,id))return categories}}return null}},{key:"getEmbededCategories",value:function(section,arr){return section.categories&&section.categories.length&&arr.push.apply(arr,section.categories),section.child&&section.child.length&&section.child.forEach(function(child,i){arr.push.apply(arr,section.child[i].categories)}),arr}},{key:"getListType",value:function(params){if(!params.group)return"good";for(var i=0;i<this.sections.length;i++){if(this.sections[i].url==params.group&&this.sections[i].type)return this.sections[i].type;if(this.sections[i].child&&this.sections[i].child.length)for(var j=0;j<this.sections[i].child.length;j++)if(this.sections[i].child[j].url==params.group&&this.sections[i].type)return this.sections[i].type}return"good"}}]),Section}();"undefined"!=typeof window?window.SectionClass=Section:exports.init=Section}(),Number.isInteger=Number.isInteger||function(value){return"number"==typeof value&&isFinite(value)&&Math.floor(value)===value},setMetaOG();var preloadPade=document.getElementById("preloadPage"),durationTemp=2;try{preloadDuration&&(preloadDuration=Number(preloadDuration),preloadDuration>1&&preloadDuration<10&&(durationTemp=preloadDuration))}catch(err){}var preloadAnimateClass="hidden-preload-page";$(preloadPade).data("preloadAnimateClass")&&(preloadAnimateClass=$(preloadPade).data("preloadAnimateClass"));var k=getCookie("preload");if(k)$(preloadPade).remove();else{setTimeout(function(){$(preloadPade).addClass(preloadAnimateClass),setTimeout(function(){$(preloadPade).remove()},1e3)},1e3*durationTemp);var options={path:"/",expires:3600};setCookie("preload","true",options)}$("#hidePreloadPage").click(function(){$(preloadPade).addClass(preloadAnimateClass),setTimeout(function(){$(preloadPade).remove()},1e3)});var iPhone=!1;getMobileOperatingSystem();var sectionClass,dQ,_filterTags=[],_filterTagsO={},_filtersO={};filtersFromServer.forEach(function(filter){"5bc805475f88d44b19fc97d2"==filter._id&&console.log(filter),_filtersO[filter._id]=filter,filter.tags&&filter.tags.length&&(filter.tags.forEach(function(t,i){t.index=i,_filterTagsO[t._id]=t}),_filterTags.push.apply(_filterTags,filter.tags))}),angular.module("gmall",["ngRoute","ui.router","ui.router.state.events","ngResource","gmall.controllers","gmall.services","gmall.directives","gmall.filters","ui.bootstrap","ngTouch","lazyImg","ngSocial","ngAnimate","gmall.exception","toaster","ui.select","pageslide-directive","satellizer","ngMessages","angular-click-outside","ui.mask","vcRecaptcha","rzModule"]).run(["$rootScope","$state","$stateParams","global","globalSrv","$window","$location","$anchorScroll","$timeout","seoContent","$order","Campaign","$user","Witget","$auth","Account","Sections","$q","Seopage","$uibModal","Stuff","$injector","$route","$document","$transitions","$sce","$email","exception","$http","$notification","CreateContent","localStorage",function($rootScope,$state,$stateParams,global,globalSrv,$window,$location,$anchorScroll,$timeout,seoContent,$order,Campaign,$user,Witget,$auth,Account,Sections,$q,Seopage,$uibModal,Stuff,$injector,$route,$document,$transitions,$sce,$email,exception,$http,$notification,CreateContent,localStorage){function _logged(){global.get("user").val&&global.get("user").val._id;$rootScope.$broadcast("logged")}function _openChatWitget(field){clickForOpenChat||(clickForOpenChat=!0,$rootScope.checkedMenuChange(field,!$rootScope.checkedMenu[field]),setTimeout(function(){clickForOpenChat=!1},200))}$rootScope.getDataFromIp=function(data){console.log(data)},global.set("filterTags",_filterTags),global.set("filterTagsO",_filterTagsO),$(this).scrollTop(0),$rootScope.checkedMenu={m:!1,slideMenu:!1},$rootScope.stuffHost=stuffHost,$rootScope.$state=$state,$rootScope.$stateParams=$stateParams,$rootScope.global=global,$rootScope.soundChat=document.getElementById("soundChat"),$rootScope.globalProperty={entryStuff:null,displaySearch:!1},$rootScope.ignoreClick=function($event){$event&&($event.stopPropagation(),$event.preventDefault())},$rootScope.$watch(function(){return $location.url()},function(newLocation,oldLocation){if($rootScope.actualLocation===newLocation){var back,historyState=$window.history.state;back=!!(historyState&&historyState.position<=$rootScope.stackPosition),back?$rootScope.stackPosition--:$rootScope.stackPosition++}else $route.current&&($window.history.replaceState({position:$rootScope.stackPosition}),$rootScope.stackPosition++)}),$transitions.onBefore({to:"*",from:"*"},function(trans){});var firstStateChenged;$rootScope.$on("$stateChangeStart",function(event,to,toParams,fromState,fromParams){if($rootScope.globalProperty.displaySearch=!1,"master.item"!=fromState.name||"master.item"!=to.name){if(firstStateChenged||(firstStateChenged=!0,global.set("tempContent",templateContentHTML)),"cart"==to.name&&global.get("store").val.cartSetting&&global.get("store").val.cartSetting.slide&&(_openChatWitget("cart"),$rootScope.$emit("cartslide",{event:"init"}),event.preventDefault()),"stuffs"==to.name||"stuffs.stuff"==to.name){var groups=global.get("sections").val,sec={type:"good"};loop1:for(var i=0;i<groups.length;i++){if(groups[i].url==toParams.groupUrl){sec=groups[i];break}if(groups[i].child&&groups[i].child.length)for(var j=0;j<groups[i].child.length;j++)if(groups[i].child[j].url==toParams.groupUrl){sec=groups[i].child[j];break loop1}}global.set("sectionType",sec.type),"stuffs.stuff"==fromState.name||global.get("tempContent").val||$rootScope.$emit("$stateChangeStartToStuff")}$rootScope.checkedMenu.slideMenu&&$rootScope.checkedMenuChange("slideMenu",!1),$rootScope.checkedMenu.m=!1,global.get("tempContent").val||("news.item"!=to.name&&"master.item"!=to.name&&"campaign.detail"!=to.name||$rootScope.$emit("$stateChangeStartToStuff"),"news"==to.name&&"news.item"!=fromState.name&&$rootScope.$emit("$stateChangeStartToStuff"),"master"==to.name&&"master.item"!=fromState.name&&$rootScope.$emit("$stateChangeStartToStuff"),"info"==to.name&&"info.item"!=fromState.name&&$rootScope.$emit("$stateChangeStartToStuff")),"news"==fromState.name&&"news.item"==to.name?scrollPositionNewsList=$(window).scrollTop():"news.item"!=fromState.name&&"news"!=to.name&&(scrollPositionNewsList=0)}});var scrollPositionNewsList=0;$rootScope.$on("$stateChangeSuccess",function(ev,to,toParams,from,fromParams){"news.item"==from.name&&"news"==to.name&&scrollPositionNewsList&&$timeout(function(){window.scrollTo(0,scrollPositionNewsList)}),$rootScope.actualLocation=$location.url();var url=$location.url(),titles=angular.copy(global.get("store").val.seo);titles.image=global.get("store").val.logo,global.get("store").val.logo.fbPhoto&&(titles.image=global.get("store").val.fbPhoto),titles.image&&(titles.image=photoHost+"/"+titles.image),titles.url=$location.url(),titles.desc=null,global.set("titles",titles),$location.search()&&1==Object.keys($location.search()).length&&$location.search().subDomain&&(url=url.substring(0,url.indexOf("?"))),url=url.replace("?_escaped_fragment_","");var seopage=global.get("seopages").val.getOFA("link",url);if(seopage)if(seopage.data)global.set("currentSeopage",seopage.data);else{var q=$q.when().then(function(){return Seopage.getItem(seopage._id)});global.set("currentSeopage",q)}else global.set("currentSeopage",null);window.dataLayer&&window.dataLayer.push&&window.dataLayer.push({event:"pageview",action:$location.path()}),$window.ga&&$window.ga("send","pageview",$location.path()),"undefined"!=typeof gtag&&setTimeout(function(){gtag("config",googleAnalytics,{page_title:global.get("titles").val.title,page_location:$location.url(),page_path:$location.path()})},300),$window.fbq&&fbq("track","PageView"),window.yaCounter&&"thanksPage"==to.name&&(window.yaCounter.reachGoal(toParams.id),window.yaCounter.hit($location.path())),"home"==to.name&&seoContent.setDataHomePage(),$rootScope.endLoadStuffs=!0}),$rootScope.$on("$stateChangeError",function(event,toState,toParams,fromState,fromParams,error){console.log(error)}),$rootScope.$on("$allDataLoaded",function(e,data){$rootScope.endLoadStuffs=!0}),$rootScope.$on("InitiateCheckout",function(){$window.fbq&&fbq("track","InitiateCheckout")}),$rootScope.$on("AddToCart",function(){$window.fbq&&fbq("track","AddToCart"),"undefined"!=typeof dataLayer&&setTimeout(function(){dataLayer.push({event:"AddToCart"})},300)}),$rootScope.$on("Purchase",function(event,data){$window.fbq&&fbq("track","Purchase",data)}),$rootScope.$on("CompleteRegistration",function(event,data){$window.fbq&&fbq("track","CompleteRegistration")});var ng_pageslide_body_closed,scrollbarWidth=0,padding_right=angular.element($document[0].body).css("padding-right").split("px"),padding_rightM=[],nav=angular.element($document.find(".navbar-fixed-top"));$timeout(function(){scrollbarWidth=window.innerWidth-$(document).width(),padding_right=padding_right&&padding_right[0]&&Number.isInteger(Number(padding_right[0]))?Number(padding_right[0]):0,nav.each(function(i,n){n&&(padding_rightM[i]=angular.element(n).css("padding-right").split("px"),padding_rightM[i]&&padding_rightM[i][0]&&Number.isInteger(Number(padding_rightM[i][0]))?padding_rightM[i]=Number(padding_rightM[i][0]):padding_rightM[i]=0)});try{if(document.styleSheets&&document.styleSheets.length)for(var i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].cssRules&&document.styleSheets[i].cssRules.length)for(var j=0;j<document.styleSheets[i].cssRules.length;j++)document.styleSheets[i].cssRules[j].selectorText&&document.styleSheets[i].cssRules[j].selectorText.indexOf("body.ng-pageslide-body-closed::before")>-1&&(ng_pageslide_body_closed=document.styleSheets[i].cssRules[j])}catch(err){}},500),$rootScope.$on("modalOpened",function(e,data){var height=$($document[0].body).height();nav&&nav.each&&nav.each(function(i,n){n&&$(n).css("padding-right",scrollbarWidth+padding_rightM[i])}),angular.element($document[0].body).css("overflow-y","hidden"),angular.element($document[0].body).css("padding-right",scrollbarWidth+padding_right),ng_pageslide_body_closed&&ng_pageslide_body_closed.style&&(ng_pageslide_body_closed.style.height=height+"px")}),$rootScope.$on("modalClosed",function(e,data){angular.element($document[0].body).css("overflow-y","auto"),angular.element($document[0].body).css("padding-right",padding_right),nav&&nav.each&&nav.each(function(i,n){n&&$(n).css("padding-right",padding_rightM[i])}),$timeout(function(){ng_pageslide_body_closed&&ng_pageslide_body_closed.style&&(ng_pageslide_body_closed.style.height="auto")},800)});var openMenuDelay;$rootScope.checkedMenuChange=function(field,val){openMenuDelay||(openMenuDelay=!0,console.log(field,val),val?($rootScope.$emit("modalOpened"),$rootScope.$broadcast("openMenu")):($rootScope.$emit("modalClosed"),$rootScope.$broadcast("closeMenu")),$rootScope.checkedMenu[field]=val,$timeout(function(){openMenuDelay=!1},500))},global.set("iPadVerticalWidth",770),global.set("iPadHorizontalWidth",1024);var clickForOpenChat;!function(dataFromServer){function bookingFromSchedule(entry){console.log(entry);var hour=Math.floor(entry.start/4),minutes=entry.start%4*15,year=entry.date.substring(4,8),month=entry.date.substring(8,10),day=entry.date.substring(10),entryDate=new Date(year,month,day,hour,minutes);return $q.when().then(function(){return global.get("user").val&&global.get("user").val._id?void 0:$user.loginOnlyPhone()}).then(function(){if(!global.get("user").val||!global.get("user").val._id)throw"not auth";if(entry.users||(entry.users=[]),entry.users.some(function(u){return u._id==global.get("user").val._id}))throw global.get("error").val.alreadyInDeal;var o={_id:global.get("user").val._id,name:global.get("user").val.name,phone:global.get("user").val.profile.phone,email:global.get("user").val.email};entry.users.push(o);var data={users:entry.users,_id:entry._id};return $http.post("/api/collections/Booking/"+entry._id+"?update=users",data)}).then(function(res){if($http.get("/api/newRecordOnSite/"+global.get("store").val._id+"/"+global.get("store").val.seller._id),console.log("global.get('store').val.submitDateTime",global.get("store").val.submitDateTime),global.get("store").val.seller.phone){var dataForSend={phone:global.get("store").val.seller.phone};return dataForSend.userId=global.get("user").val._id,dataForSend.text=global.get("langOrder").val.recordedOn+" "+entry.stuffName.toUpperCase()+" "+global.get("langOrder").val.onn+" "+entryDate,$http.post("/api/users/sendMessageAboutDeal",dataForSend)}}).then(function(res){try{entry.dateForNote=moment(entryDate).format("lll");var entryT=angular.copy(entry),content=CreateContent.dateTimeNote(entryT),o={addressee:"seller",type:"dateTime",content:content,seller:global.get("store").val.seller._id}}catch(err){console.log(err)}return $q(function(resolve,reject){$notification.save(o,function(res){exception.showToaster("note",global.get("langNote").val.sent,""),resolve()},function(err){exception.catcher("error")(err),resolve()})})}).then(function(res){var pap=global.get("paps").val.getOFA("action","booking");pap&&pap.url&&$state.go("thanksPage",{id:pap.url})}).catch(function(err){console.log(err),err&&exception.catcher("booking")(err)})}function _action(link,argsObj){delay||(delay=!0,$timeout(function(){delay=!1},1e3),link&&("subscription"==link?_witget("subscription"):"feedback"==link?_witget("feedback"):"call"==link?_witget("call"):"dateTime"==link?_witget("dateTime",argsObj):"subscriptionAdd"==link?_witget("subscriptionAdd"):"allBonus"==link?Stuff.getAllBonus():$location.path(link)))}function _orderStuffFromHP(url){$q.when().then(function(){return Stuff.getItem(url)}).then(function(stuff){1==stuff.orderType?stuff.order():2==stuff.orderType?($rootScope.$broadcast("dateTime",{stuff:stuff}),$rootScope.checkedMenu.entryTime||_openChatWitget("entryTime")):4==stuff.orderType?stuff.getBonus():$state.go("stuffs.stuff",{groupUrl:"group",categoryUrl:"category",stuffUrl:stuff.url})})}function _orderGroupStuffs(groupStuffs){return $order.clearCart(),groupStuffs.stuffs.forEach(function(stuff){stuff.quantity=1,stuff.cena=stuff.price,stuff.sum=stuff.cena*stuff.quantity,$order.addItemToCart(stuff)}),$q.when().then(function(){return global.get("user").val&&global.get("user").val._id?void 0:$user.login()}).then(function(){return $order.getShipInfo()}).then(function(){return $rootScope.$emit("$stateChangeStartToStuff"),$order.sendOrder()}).then(function(){$rootScope.$emit("Purchase",{value:$order.paySum,currency:$order.currency}),$rootScope.$emit("$stateChangeEndToStuff"),$order.reinitCart(),$rootScope.order=$order.getOrder(),$order.clearCart(),$rootScope.checkedMenu.cart=!1}).then(function(){return $user.saveProfile(global.get("user").val)}).catch(function(err){if($rootScope.$emit("$stateChangeEndToStuff"),err){if(console.log("errerrerr ",err),err.data)var content=JSON.stringify(err.data);else var content=JSON.stringify(err,["message","arguments","type","name"]);global.get("user").val&&(content+="\r"+global.get("user").val.email),$order.getOrder()&&(content+="\r"+JSON.stringify($order.getOrder(),null,4));var domain=global.get("store").val.domain,o={email:["igorchugurov@gmail.com","vikachugurova@gmail.com"],content:content,subject:"error in order ✔",from:global.get("store").val.name+"<"+global.get("store").val.subDomain+"@"+domain+">"};$q(function(resolve,reject){$email.save(o,function(res){resolve()},function(err){resolve()})}),err&&exception.catcher(global.get("langNote").val.error)(err)}})}function _changeCurrency(lan){global.get("config").val&&global.get("config").val.currency&&global.get("config").val.currency[lan]&&(global.set("currency",lan),global.set("rate",global.get("config").val.currency[lan][0]),$order.changeCurrency(lan)),$rootScope.checkedMenu.slideMenu&&$rootScope.checkedMenuChange("slideMenu",!1),$rootScope.$emit("changeCurrency")}function _searchStuff(searchStr){if(searchStr&&!(searchStr.length<3)){var o={searchStr:searchStr.substring(0,20)};$state.go("search",o,{reload:!0,inherit:!1,notify:!0})}}function _searchData(searchStr){if(searchStr&&!(searchStr.length<3)){var o={searchStr:searchStr.substring(0,20)};$state.go("search",o,{reload:!0,inherit:!1,notify:!0})}}function _searchStuffList(searchStr){if(!searchStr||searchStr.length<3)return void($rootScope.globalProperty.stuffSearchList=[{name:global.get("lang").val.enterChar}]);$rootScope.globalProperty.searchList||($rootScope.globalProperty.searchList=!0),$q.when().then(function(){return Stuff.search(searchStr)}).then(function(res){console.log(res),res.length?(res.forEach(function(s){!s.link&&s.category&&s.category[0]&&s.category[0].group&&(s.link="/"+s.category[0].group.url+"/"+s.category[0].url+"/"+s.url,Stuff.save({update:"link"},{_id:s._id,link:s.link}))}),$rootScope.globalProperty.stuffSearchList=res):$rootScope.globalProperty.stuffSearchList=[{name:global.get("lang").val.noResults}]}).catch(function(){$rootScope.globalProperty.stuffSearchList=[{name:global.get("lang").val.noResults}]})}function _searchLostFocus(){$timeout(function(){$rootScope.globalProperty.searchList=!1,$rootScope.globalProperty.stuffSearchList=[]},2e3)}function _zoomImg(i,images,home){home?Stuff.zoomImg(i,images,home):Stuff.zoomImg(i,images)}function _cloneStore(subDomain){$injector.get("cloneStore").clone(subDomain)}function _searchModal(){$uibModal.open({animation:!0,templateUrl:"views/template/modal/search.html",windowClass:"modalProject",controller:function($uibModalInstance,$rootScope,global){var self=this;self.item="",self.focus=!0,self.globalProperty=$rootScope.globalProperty,self.global=global,self.ok=function(){$uibModalInstance.close(self.item)},self.cancel=function(){$uibModalInstance.dismiss("cancel")},$rootScope.$on("closeSearchModal",function(){$uibModalInstance.dismiss()})},controllerAs:"$ctrl"}).result.then(function(item){_searchStuff(item)})}function _changeLocation(url){if("/manage"==url&&!global.get("store").val.cabinetFull&&!global.get("store").val.owner.some(function(o){return o==global.get("user").val._id}))return void $state.go("cabinet");$window.location.href=url}function _changeLang(lang){global.get("store").lang!=lang&&($location.search("lang",lang),_changeLocation($location.url()))}function _enter(){$rootScope.checkedMenu.slideMenu&&$rootScope.checkedMenuChange("slideMenu",!1),$user.login()}function _logout(){$rootScope.$broadcast("logout"),$rootScope.checkedMenu.slideMenu&&$rootScope.checkedMenuChange("slideMenu",!1),$auth.logout(),$state.go("home"),global.set("user",null)}function _witget(type,argsObj){var data={type:type};return argsObj&&argsObj.stuff&&(data.stuff=argsObj.stuff),"subscription"==type?(data.name=store.texts.subscriptionName?store.texts.subscriptionName[store.lang]:"",data.desc=store.texts.subscriptionText?store.texts.subscriptionText[store.lang]:"",Witget.show(data)):"subscriptionAdd"==type?(data.name=store.texts.subscriptionAddName?store.texts.subscriptionAddName[store.lang]:"",data.desc=store.texts.subscriptionAddText?store.texts.subscriptionAddText[store.lang]:"",Witget.show(data)):"call"==type?(data.name=store.texts.callName?store.texts.callName[store.lang]:"",data.desc=store.texts.callText?store.texts.callText[store.lang]:"",Witget.show(data)):"feedback"==type?(data.name=store.texts.feedbackName?store.texts.feedbackName[store.lang]:"",data.desc=store.texts.feedbackText?store.texts.feedbackText[store.lang]:"",Witget.show(data)):"dateTime"==type?($timeout(function(){$rootScope.$broadcast("dateTime",argsObj)},500),void($rootScope.checkedMenu.entryTime||_openChatWitget("entryTime"))):void 0}function _closeChatWitget(field){$rootScope.checkedMenu[field]&&!clickForOpenChat&&$rootScope.checkedMenuChange(field,!1)}function _setRows(){var w=Math.max(document.documentElement.clientWidth,window.innerWidth||0),type=global.get("sectionType").val?global.get("sectionType").val:"good",r=global.get("store").val.template.stuffListType[type].rows?global.get("store").val.template.stuffListType[type].rows:4;return w>1350?r:w>global.get("iPadHorizontalWidth").val?r-1<2?2:r-1:w>global.get("iPadVerticalWidth").val?2:1}function _getSection(sectionUrl,id){var sections=global.get("sections").val;if(!sections)return null;for(var field=id?"_id":"url",i=0,l=sections.length;i<l;i++){if(sections[i][field]&&sections[i][field]==sectionUrl)return sections[i];if(sections[i].child&&sections[i].child.length)for(var j=0,ll=sections[i].child.length;j<ll;j++)if(sections[i].child[j][field]&&sections[i].child[j][field]==sectionUrl)return sections[i].child[j]}return null}function _closeMenu(event){$rootScope.checkedMenu.slideMenu&&!clickForOpen&&$rootScope.checkedMenuChange("slideMenu",!1)}function _openSlideMenu(){clickForOpen||(clickForOpen=!0,$rootScope.checkedMenuChange("slideMenu",!0),setTimeout(function(){clickForOpen=!1},200))}var store=dataFromServer[0],crawler=dataFromServer[1],local=dataFromServer[2],mobile=dataFromServer[3],tablet=dataFromServer[4],sections=dataFromServer[5],brands=brandsFromServer,filters=(dataFromServer[6],filtersFromServer),paps=dataFromServer[9],seopages=dataFromServer[10],coupons=dataFromServer[11],witget=dataFromServer[12],labels=dataFromServer[13],lang=dataFromServer[14],campaign=dataFromServer[15],masters=dataFromServer[16].filter(function(m){return m.actived});if(labels&&labels.length&&global.set("labels",labels),brands.forEach(function(b){b.tags=b.tags.filter(function(t){return t.actived})}),sectionClass=new SectionClass(sections),dQ=new DesignQuery(brands,null,filters,sectionClass),moment.locale(store.lang),store.seller||(store.seller={}),(!store.seller.opt||store.seller.opt&&store.seller.opt.quantity<2)&&(store.seller.retail=null),global.set("country",{country_code:"UA"}),store.seo||(store.seo={}),store.seo.domain=store.domain?store.domain:store.subDomain,store.seo.name=store.name,global.set("store",store),global.set("seller",store.seller._id),global.set("titles",store.seo),global.set("config",{currency:store.currency}),global.set("currency",store.mainCurrency),store.mainCurrency||(store.mainCurrency="UAH"),global.set("rate",store.currency[store.mainCurrency][0]),masters&&masters.length&&masters.forEach(function(m){
m.timeTable&&m.timeTable.length&&m.timeTable.forEach(function(p){p.is&&("false"==p.is?p.is=!1:"true"==p.is&&(p.is=!0))})}),global.set("masters",masters),masters&&masters.length&&global.set("mastersO",masters.reduce(function(o,m){return o[m._id]=m,o},{})),!crawler)if($auth.isAuthenticated())Account.getProfile().then(function(response){global.set("user",response.data),_logged(),global.get("user").val&&coupons&&coupons[0]&&!coupons[0].hide&&(global.get("user").val.coupons.indexOf(coupons[0]._id)<0?Witget.show(coupons[0],!0):coupons[1]&&!coupons[1].hide&&global.get("user").val.coupons.indexOf(coupons[1]._id)<0&&Witget.show(coupons[1],!0));for(var i=0,l=witget.length;i<l;i++)"call"!=witget[i].type&&Witget.show(witget[i],!0)}).catch(function(response){response&&response.data&&exception.catcher(response.status)(response.data.message)});else for(var i=0,l=witget.length;i<l;i++)"call"!=witget[i].type&&Witget.show(witget[i],!0);global.set("crawler",crawler),global.set("local",local),global.set("mobile",mobile),global.set("tablet",tablet),global.set("lang",lang),$rootScope.slideMenuSpeed=global.get("store").val.template.menu2&&(global.get("store").val.template.menu2.slideMenuSpeed||"0"==global.get("store").val.template.menu2.slideMenuSpeed)?global.get("store").val.template.menu2.slideMenuSpeed:"0.3",mobile?($rootScope.slideMenuWidth=global.get("store").val.template.menu2.slideMenuWidth?global.get("store").val.template.menu2.slideMenuWidth:"90%",$rootScope.checkedMenu.sizeEntryTime="100%",$rootScope.checkedMenu.sizeCartSlide="100%"):tablet?($rootScope.slideMenuWidth=global.get("store").val.template.menu2.slideMenuWidth?global.get("store").val.template.menu2.slideMenuWidth:"60%",$rootScope.checkedMenu.sizeEntryTime="80%",$rootScope.checkedMenu.sizeCartSlide="80%"):($rootScope.slideMenuWidth=global.get("store").val.template.menu2.slideMenuWidth,$rootScope.checkedMenu.sizeEntryTime="40%",$rootScope.checkedMenu.sizeCartSlide="50%"),global.set("sections",sections);var categories=[];sections.forEach(function(section){section.type||(section.type="good"),section.categories&&section.categories.length&&(section.categories.forEach(function(c){c.section={url:section.url,name:section.name},c.linkData={groupUrl:section.url,categoryUrl:c.url,searchStr:null,brand:null,brandTag:null,queryTag:null}}),categories.push.apply(categories,section.categories)),section.child&&section.child.length&&section.child.forEach(function(subSection){subSection.type=section.type,subSection.categories&&subSection.categories.length&&(subSection.categories.forEach(function(c){c.section={url:section.url,name:section.name,subSectionName:subSection.name,subSectionUrl:subSection.url},c.linkData={groupUrl:subSection.url,categoryUrl:c.url,searchStr:null,brand:null,brandTag:null,queryTag:null}}),categories.push.apply(categories,subSection.categories))})}),global.set("categories",categories);var categoriesO={};categories.forEach(function(c){categoriesO[c._id]=c}),global.set("categoriesO",categoriesO),global.set("brands",brands),global.set("filters",filters);var filtersO={};filters.forEach(function(f){filtersO[f._id]=f}),global.set("filtersO",filtersO);var brandsO={};brands.forEach(function(b){brandsO[b._id]=b}),global.set("brandsO",brandsO),global.set("paps",paps),global.set("coupons",coupons),global.set("seopages",seopages),global.set("campaign",campaign),$order.init("cart"),$rootScope.order=$order.getOrder(),$rootScope.likes={totalCount:0};var likes=localStorage.get(store.subDomain+"-likes");likes&&likes.length&&($rootScope.likes.totalCount=likes.length);var listener1=$rootScope.$watch(function(){return $rootScope.checkedMenu.chatMenu},function(n){n&&($rootScope.globalProperty.chatMenuFist=!0,listener1())}),listener2=$rootScope.$watch(function(){return $rootScope.checkedMenu.entryTime},function(n){n&&($rootScope.globalProperty.entryTimeFist=!0,listener2())});global.set("models",{Campaign:Campaign}),global.set("cache",{});var delay,functions={changeCurrency:_changeCurrency,searchStuff:_searchStuff,searchStuffList:_searchStuffList,searchLostFocus:_searchLostFocus,searchData:_searchData,searchModal:_searchModal,changeLocation:_changeLocation,changeLang:_changeLang,enter:_enter,logout:_logout,logged:_logged,witget:_witget,closeMenu:_closeMenu,openSlideMenu:_openSlideMenu,closeChatWitget:_closeChatWitget,openChatWitget:_openChatWitget,setRows:_setRows,getSection:_getSection,orderStuffFromHP:_orderStuffFromHP,action:_action,zoomImg:_zoomImg,cloneStore:_cloneStore,orderGroupStuffs:_orderGroupStuffs,bookingFromSchedule:bookingFromSchedule};global.set("functions",functions);var clickForOpen;$timeout(function(){$stateParams.action&&(_witget($stateParams.action),$location.search("action",null))},1e3),$rootScope.contentLoaded=!0}(ngInitData);var langError,langOrder,langForm,langNote;if(global.get("store").val.langError?global.set("langError",global.get("store").val.langError):globalSrv.getData("langError").then(function(response){var d={};if(response.data&&response.data.length&&response.data[1].tags){langError=response.data[1].tags;for(var k in response.data[1].tags)d[k]=response.data[1].tags[k][global.get("store").val.lang]}global.set("langError",d)}),global.get("store").val.langNote?global.set("langNote",global.get("store").val.langNote):globalSrv.getData("langNote").then(function(response){var d={};if(response.data&&response.data.length&&response.data[1].tags){langNote=response.data[1].tags;for(var k in response.data[1].tags)d[k]=response.data[1].tags[k][global.get("store").val.lang]}global.set("langNote",d)}),global.get("store").val.langOrder?global.set("langOrder",global.get("store").val.langOrder):globalSrv.getData("langOrder").then(function(response){var d={};if(response.data&&response.data.length&&response.data[1].tags){langOrder=response.data[1].tags;for(var k in response.data[1].tags)d[k]=response.data[1].tags[k][global.get("store").val.lang]}global.set("langOrder",d)}),global.get("store").val.langForm?global.set("langForm",global.get("store").val.langForm):globalSrv.getData("langForm").then(function(response){var d={};if(response.data&&response.data.length&&response.data[1].tags){langForm=response.data[1].tags;for(var k in response.data[1].tags)d[k]=response.data[1].tags[k][global.get("store").val.lang]}global.set("langForm",d)}),global.get("store").val.ipstack){var urlForgetIp="http://api.ipstack.com/check?access_key="+global.get("store").val.ipstack;$.get(urlForgetIp).then(function(result){var currencyForCountry={};for(var key in global.get("store").val.currency)$rootScope.detectCurrency=!1,global.get("store").val.currency[key]&&global.get("store").val.currency[key][3]&&global.get("store").val.currency[key][3].forEach&&($rootScope.detectCurrency=!0,global.get("store").val.currency[key][3].forEach(function(country){currencyForCountry[country]=global.get("store").val.currency[key][1]})),$rootScope.detectCurrency&&(currencyForCountry[result.country_code]?global.get("functions").val.changeCurrency(currencyForCountry[result.country_code]):currencyForCountry.ALLOTHER?global.get("functions").val.changeCurrency(currencyForCountry.ALLOTHER):$rootScope.detectCurrency=!1)},function(err){console.log(err)})}}]).config(["$stateProvider","$urlRouterProvider","$locationProvider","globalProvider","$authProvider","$httpProvider","$animateProvider",function($stateProvider,$urlRouterProvider,$locationProvider,globalProvider,$authProvider,$httpProvider,$animateProvider){$animateProvider.classNameFilter(/^((?!(repeat-modify)).)*$/),$httpProvider.interceptors.push("myInterceptorService"),facebookAppID&&$authProvider.facebook({clientId:facebookAppID}),googleAppID&&$authProvider.google({clientId:googleAppID}),vkAppID&&$authProvider.oauth2({name:"vkontakte",url:"/auth/vkontakte",redirectUri:window.location.origin||window.location.protocol+"//"+window.location.host,clientId:vkAppID,authorizationEndpoint:"http://oauth.vk.com/authorize",scope:"friends, photos, email, photo_big",display:"popup",responseType:"code",requiredUrlParams:["response_type","client_id","redirect_uri","display","scope","v"],scopeDelimiter:",",v:"5.37"}),globalProvider.setUrl({campaign:'/api/collections/Campaign?query={"actived":"true","dateEnd":{"$gte":'+Date.now()+"}}",masters:'/api/collections/Master?query={"actived":true}',langError:'/api/collections/Lang?query={"name":"index.error"}',langNote:'/api/collections/Lang?query={"name":"index.note"}',langOrder:'/api/collections/Lang?query={"name":"index.order"}',langForm:'/api/collections/Lang?query={"name":"index.form"}',keywords:"/api/collections/Keywords",filters:"/api/collections/Filter"}),globalProvider.set("store"),globalProvider.set("seller"),globalProvider.set("titles"),globalProvider.set("config"),globalProvider.set("currency"),globalProvider.set("rate"),globalProvider.set("country"),globalProvider.set("crawler"),globalProvider.set("user"),globalProvider.set("local"),globalProvider.set("mobile"),globalProvider.set("tablet"),globalProvider.set("sections","penging"),globalProvider.set("categories","penging"),globalProvider.set("categoriesO"),globalProvider.set("category"),globalProvider.set("brands","penging"),globalProvider.set("brandsO"),globalProvider.set("filters","penging"),globalProvider.set("filtersO"),globalProvider.set("filterTags","penging"),globalProvider.set("filterTagsO"),globalProvider.set("parentSection"),globalProvider.set("breadcrumbs"),globalProvider.set("stats"),globalProvider.set("paps"),globalProvider.set("homePage"),globalProvider.set("newTag"),globalProvider.set("coupon"),globalProvider.set("campaign"),globalProvider.set("seopages"),globalProvider.set("currentSeopage"),globalProvider.set("info"),globalProvider.set("labels"),globalProvider.set("lang"),globalProvider.set("models"),globalProvider.set("functions"),globalProvider.set("masters"),globalProvider.set("mastersO"),globalProvider.set("iPadVerticalWidth"),globalProvider.set("iPadHorizontalWidth"),globalProvider.set("sectionType"),globalProvider.set("tempContent"),globalProvider.set("cache"),globalProvider.set("langError"),globalProvider.set("langNote"),globalProvider.set("langOrder"),globalProvider.set("langForm"),globalProvider.set("services"),globalProvider.set("stuffsInList"),globalProvider.set("campaignStuffCart"),$locationProvider.html5Mode(!0),$locationProvider.hashPrefix("!"),$urlRouterProvider.when("/home","/").otherwise("/404"),$stateProvider.state("404",{url:"/404",templateUrl:"views/template/partials/404.html",controller:"404Ctrl"}).state("home",{url:"/?token&action",controller:"homeCtrl"}).state("cart",{url:"/cart",template:"<cart-item></cart-item>"}).state("likes",{url:"/likes",template:"<stuff-list-template-campaign-list></stuff-list-template-campaign-list>"}).state("cabinet",{url:"/cabinet?sec",template:"<cabinet-item></cabinet-item>"}).state("search",{url:"/search?searchStr",template:"<search-list></search-list>"}).state("pricegoods",{url:"/pricegoods",template:"<price-goods></price-goods>"}).state("priceservices",{url:"/priceservices",template:"<price-services></price-services>"}).state("unsubscription",{url:"/unsubscribe-done",templateUrl:"views/template/partials/unsubscription.html",controller:"unsubscriptionCtrl"}).state("thanksPage",{url:"/thanks/:id",template:"<paps-item-template></paps-item-template>"}).state("lookbook",{url:"/lookbook?labels",template:"<items-list></items-list>"}).state("stat",{url:"/stat?labels",template:"<items-list></items-list>"}).state("stat.item",{url:"/:id",template:"<items-detail></items-detail>"}).state("additional",{url:"/additional?labels",template:"<items-list></items-list>"}).state("additional.item",{url:"/:id",template:"<items-detail></items-detail>"}).state("news",{url:"/news?labels",template:"<items-list></items-list>"}).state("news.item",{url:"/:id",template:"<items-detail></items-detail>"}).state("master",{url:"/master?labels",template:"<items-list></items-list>"}).state("master.item",{url:"/:id",template:"<items-detail></items-detail>"}).state("workplace",{url:"/workplace?labels",template:"<items-list></items-list>"}).state("workplace.item",{url:"/:id",template:"<items-detail></items-detail>"}).state("info",{url:"/info?labels",template:"<items-list></items-list>"}).state("info.item",{url:"/:id?block",reloadOnSearch:!1,template:"<items-detail></items-detail>"}).state("campaign",{url:"/campaign?labels",template:"<items-list></items-list>"}).state("campaign.detail",{url:"/:id",template:"<items-detail></items-detail>"}).state("stuffs",{templateUrl:function(){return"views/template/partials/stuffs/stuffsNew.html"},url:"/:groupUrl/:categoryUrl?searchStr&queryTag&brand&brandTag&filterTag",reloadOnSearch:!0}).state("stuffs.stuff",{url:"/:stuffUrl?param1&param2&store",templateUrl:"views/template/partials/stuffs/stuffDetail.html"})}]).config(function($provide){function getExpressions(str){for(var left,right,offset=0,parts=[];(left=str.indexOf("{{",offset))>-1&&(right=str.indexOf("}}",offset))>-1;)parts.push(str.substr(left+2,right-left-2)),offset=right+1;return parts}$provide.decorator("ngSrcDirective",function($delegate,$parse){var ngSrc=$delegate[0];return ngSrc.compile=function(element,attrs){var expressions=getExpressions(attrs.ngSrc),getters=expressions.map($parse);return function(scope,element,attr){attr.$observe("ngSrc",function(value){getters.every(function(getter){return getter(scope)})?value&&value.indexOf("images/")>-1&&value.indexOf("http")<0&&photoHost?attr.$set("src",photoHost+"/"+value):attr.$set("src",value):value&&(value.indexOf("images/")>-1&&value.indexOf("http")<0&&photoHost?attr.$set("src",photoHost+"/"+value):attr.$set("src",value))})}},delete ngSrc.link,$delegate})});var tempTitles,templateContentHTML;angular.module("gmall.directives",[]).directive("spy",function(){function link(scope,element,attrs){$("#menu1-section").height(),$("#menu2-section").height();$(function(){"affix"===attrs.spy&&$(element).affix({offset:{top:0,bottom:function(){return this.bottom=$(".footer").outerHeight(!0)}}})})}return{restrict:"A",link:link}}).directive("imageLoadWatcher",function($rootScope,$timeout){return{restrict:"A",link:function(scope,element,attrs){void 0===$rootScope.loadCounter&&($rootScope.loadCounter=0),$timeout(function(){element.find("img").bind("load",function(){scope.$emit("$imageLoaded",$rootScope.loadCounter++)})},10)},controller:function($scope){console.log($scope.$last),$scope.$parent.$on("$imageLoaded",function(event,data){$scope.$last&&$scope.$index===$rootScope.loadCounter-1&&($scope.$emit("$allImagesLoaded"),delete $rootScope.loadCounter)})}}}).directive("imageLoadWatcherHomePage",function($rootScope,$timeout){return{restrict:"AC",link:function(scope,element,attrs){var loadCounter=0,imagesQty=0;void 0===$rootScope.loadCounter&&($rootScope.loadCounter=0),$timeout(function(){var images=element.find("img");imagesQty=images.length;var send;images.each(function(img){this.complete?imagesQty--:$(this).bind("load",function(){++loadCounter==imagesQty&&(send=!0,$rootScope.$broadcast("$allImagesLoadedInHomePage"),$rootScope.$emit("$allImagesLoadedInHomePage"))})}),imagesQty||send||($rootScope.$broadcast("$allImagesLoadedInHomePage"),$rootScope.$emit("$allImagesLoadedInHomePage"))})}}}).directive("owlCarousel",function(global,$timeout){return{restrict:"A",link:function(scope,element,attrs){console.log("$allImagesLoaded"),scope.$on("$allImagesLoaded",function(){$(element).owlCarousel({items:2,itemsDesktop:[1e3,2],itemsDesktopSmall:[900,1],itemsTablet:[600,1],itemsMobile:!1}),setTimeout(function(){$("#owl-carousel-next").click(function(){$(element).trigger("owl.prev")}),$("#owl-carousel-prev").click(function(){$(element).trigger("owl.prev")})},500)})}}}).directive("owlCarouselWithAttr",function(global,$timeout){return{restrict:"A",scope:{},link:function(scope,element,attrs){var items=attrs.items?attrs.items:1,items3=3,items2=2;2==items?items3=2:1==items&&(items3=1,items2=1);var loop=!!attrs.loop&&attrs.loop,nav=!!attrs.nav&&attrs.nav,autoplay=!!attrs.autoplay&&attrs.autoplay;if(attrs.duration&&Number(attrs.duration)&&attrs.duration>1&&attrs.duration<10)var autoplaytimeout=1e3*Number(attrs.duration);else var autoplaytimeout=3e3;setTimeout(function(){$(element).owlCarousel({items:items,itemsDesktop:[1e3,items],itemsDesktopSmall:[900,items],itemsTablet:[600,1],itemsMobile:!1,responsive:{0:{items:1,nav:!1,dots:!0},380:{items:items2,nav:!1,dots:!0},1068:{items:items3,nav:!1,dots:!0},1400:{items:items,nav:!1,dots:!0}},loop:loop,nav:nav,autoplay:autoplay,autoplayTimeout:autoplaytimeout,dots:!0}),element.find(".owl-dots").click(function(){console.log("stop"),$timeout(function(){$(element).trigger("stop.owl.autoplay");var carousel=$(element).data("owl.carousel");carousel.settings.autoplay=!1,carousel.options.autoplay=!1,$(".owl-carousel").trigger("refresh.owl.carousel")},900)}),element.find("#owl-carousel-next").click(function(){console.log("next"),$(element).trigger("owl.prev"),$(element).trigger("stop.owl.autoplay")}),element.find("#owl-carousel-prev").click(function(){console.log("next"),$(element).trigger("owl.prev"),$(element).trigger("stop.owl.autoplay")}),$(element).on("mouseenter",function(e){$(element).trigger("stop.owl.autoplay")}),$(element).on("mouseleave",function(e){$(element).trigger("play.owl.autoplay")})},500)}}}).directive("arrowDown",["global",function(global){return{template:"<a class='nav-down animate-style' ng-click='scrollUp()'><span class='icon-down-img'></span></a>",link:function(scope,element){function scrollFoo(){var arrowDown=$("#arrowDownDiv"),scrolled=window.pageYOffset||document.documentElement.scrollTop;if(scrolled>0&&visible)visible=!1,$(element).hide();else if(scrolled<=0&&!visible&&(visible=!0,arrowDown&&arrowDown.offset())){var offset=arrowDown.offset().top+arrowDown.height();offset>$(window).height()-10&&$(element).show()}}var m1=global.get("store").val.template.menu1,m2=global.get("store").val.template.menu2,visible=!1;$(element).hide(),scope.scrollUp=function(){var arrowDown=$("#arrowDownDiv"),menu1Section1=$("#menu1-section"),menu1Section2=$("#menu2-section"),delta=0;m1&&m1.is&&m1.fixed&&"top"==m1.position&&!m1.scrollSlide&&(delta+=menu1Section1.height()),m2&&m2.is&&m2.fixed&&"top"==m1.position&&(delta+=menu1Section2.height());var target=arrowDown.offset().top+arrowDown.height()-delta;$("html, body").animate({scrollTop:target},1e3)},$(window).scroll(scrollFoo),setTimeout(scrollFoo,1e3)}}}]).directive("removeClassByScroll",[function(){return{restrict:"EA",scope:{className:"@removeClassByScroll"},link:function(scope,element){function scrollHandler(){console.log("scroll"),done?$(window).off("scroll",scrollHandler):(element.removeClass(scope.className),done=!0)}$(window).scroll(scrollHandler);var done=!1}}}]).directive("addRemoveClassByScroll",["$rootScope",function($rootScope){return{restrict:"A",scope:{className:"@addRemoveClassByScroll"},link:function(scope,element){function scrollHandler(event){try{var st=$(this).scrollTop();st>lastScrollTop?!hasClass&&$(element).isOnScreen()&&(element.addClass(scope.className),hasClass=!0):hasClass&&$(element).isOnScreen()&&(element.removeClass(scope.className),hasClass=!1),lastScrollTop=st}catch(err){console.log(err)}}var hasClass=!1,lastScrollTop=0;$rootScope.$on("$stateChangeStart",function(event,to,toParams,fromState,fromParams){"home"==to.name?$(window).scroll(scrollHandler):$(window).off("scroll",scrollHandler)})}}}]).directive("addRemoveClassByFirstMenu",["$rootScope",function($rootScope){return{restrict:"A",scope:{className:"@addRemoveClassByFirstMenu"},link:function(scope,element){console.log("addRemoveClassByFirstMenu",scope.className),$rootScope.$on("hideMenu1AfterScroll",function(event,to,toParams,fromState,fromParams){element.addClass(scope.className)}),$rootScope.$on("showMenu1AfterScroll",function(event,to,toParams,fromState,fromParams){element.removeClass(scope.className)})}}}]).directive("addClassByScroll",[function(){return{restrict:"EA",scope:{className:"@addClassByScroll"},link:function(scope,element){function scrollHandler(){done?$(window).off("scroll",scrollHandler):(element.addClass(scope.className),done=!0)}$(window).scroll(scrollHandler);var done=!1}}}]).directive("addClassByScrollForBlock",[function(){return{restrict:"EA",scope:{className:"@addClassByScrollForBlock"},link:function(scope,element){function scrollHandler(){!done&&$(element).isOnScreen()&&(element.addClass(scope.className),done=!0,$(window).off("scroll",scrollHandler))}$(window).scroll(scrollHandler);var done=!1}}}]).directive("bgVideo",function($rootScope,$timeout,global,$compile){return{restrict:"A",link:function(scope,element,attrs){new BackgroundVideo(".bv-video",{src:[attrs.bgVideo]})}}}).directive("homePageTwoRowsContainer",function($rootScope,$timeout,global,$compile){return{restrict:"E",link:function(scope,element){function initBlock(){if((window.innerWidth>0?window.innerWidth:screen.width)<992)return void $(d).remove();h1=$(row1).height(),h2=$(row2).height();var w=$(row2).width()+30,diff=Math.abs(h1-h2);diff>100?($(d).addClass("catalog-block"),$(d).append(hc)):$(d).addClass("catalog-block-mini"),$(d).height(diff),$(d).width(w),h1>h2?$(row2).append(d):$(row1).append(d),$(d).wrap("<div></div>")}function init_scroll(event,delta){deltaOfInterest=delta;var timeNow=(new Date).getTime();if(timeNow-lastAnimation<quietPeriod+animationTime)return void event.preventDefault();for(var i=0;i<arr.length;i++){if($("#"+arr[i]).offset().top-$(window).scrollTop()>=0){iii=i;break}}var delta=0;if(m1&&m1.is&&m1.fixed&&"top"==m1.position&&!m1.scrollSlide&&(delta+=menu1Section1.height()),m2&&m2.is&&m2.fixed&&"top"==m1.position&&(delta+=menu1Section2.height()),deltaOfInterest<0){if(iii<arr.length-1&&iii++,iii==arr.length-1)try{delta=-$("#"+arr[iii]).height()}catch(err){console.log(err)}$("html, body").animate({scrollTop:$("#"+arr[iii]).offset().top-delta},700)}else iii>0&&iii--,$("html, body").animate({scrollTop:$("#"+arr[iii]).offset().top-delta},700);lastAnimation=timeNow}var h1,h2,resize,m1=global.get("store").val.template.menu1,m2=global.get("store").val.template.menu2,menu1Section1=$("#menu1-section"),menu1Section2=$("#menu2-section"),row1=element[0].firstChild,row2=element[0].lastChild,s=["<div></div>"].join(""),d=angular.element(s),sec=global.get("sections").val[0].url,katalog=global.get("lang").val.catalog,h=angular.element('<div class="inner"><h1><a href="/'+sec+'/category">'+katalog+"</a></h1></div>"),linkFn=$compile(h),hc=linkFn(scope);$rootScope.homePageTwoRowsContainer?$timeout(function(){initBlock()},100):scope.$on("$allImagesLoadedInHomePage",function(){$timeout(function(){initBlock(),$rootScope.homePageTwoRowsContainer=!0},300)}),$(window).resize(function(){resize||(resize=!0,$timeout(function(){resize=!1},50),$(d).remove(),$timeout(function(){initBlock()}))}),scope.initActiveClass=function(i){console.log(i),scope.activeClass=new Array(i)},scope.setActiveClass=function(idx){console.log(scope.activeClass);for(var i=0;i<scope.activeClass.length;i++)scope.activeClass[i]=i===idx||null};var deltaOfInterest,lastAnimation=0,quietPeriod=400,animationTime=500,arr=[],iii=0;$(document).ready(function(){if(global.get("store").val.scrollblock){$(document).bind("mousewheel DOMMouseScroll MozMousePixelScroll",function(event){if("home"===$rootScope.$state.current.name){event.preventDefault();init_scroll(event,event.originalEvent.wheelDelta||-event.originalEvent.detail)}});$(".verticalSlider").children().each(function(i,d){if($(d).hasClass("clearfix"))$(d).remove();else if(!$(d).attr("dontScrollBlock")){var id=$(d).attr("class");arr.push(id),$(d).attr("id",id)}})}})}}}).directive("freewall",function($timeout,global){return{restrict:"C",link:function(scope,element){if(!global.get("crawler").val){$timeout(function(){wall.container.find(".brick").find("img").load(function(){wall.fitWidth()})},200);var wall=new Freewall("#freewall");wall.reset({selector:".brick",animate:!0,cellW:200,cellH:"auto",onResize:function(){wall.fitWidth()}})}}}}).directive("stuffCartMinHeight",function($timeout,global){return{restrict:"AC",link:function(scope,element){onsole.log("link stuffCartMinHeight"),global.get("crawler").val||$timeout(function(){var el=$(".stuff-list-wrapper #td-inner0");if(el){var h=$(el).height();element.height(h)}},1550)}}}).directive("mosaicflowItem",function($timeout){return{restrict:"C",link:function(scope,element){$timeout(function(){$(element)},2e3)}}}).directive("appVersion",function(version){return function(scope,elm,attrs){elm.text(version)}}).directive("mongooseError",function(){return{restrict:"A",require:"ngModel",link:function(scope,element,attrs,ngModel){element.on("keydown",function(){return ngModel.$setValidity("mongoose",!0)})}}}).directive("autoFillableField",function(){return{restrict:"A",require:"?ngModel",link:function(scope,element,attrs,ngModel){setInterval(function(){var prev_val="";angular.isUndefined(attrs.xAutoFillPrevVal)||(prev_val=attrs.xAutoFillPrevVal),element.val()!=prev_val&&(angular.isUndefined(ngModel)?(element.trigger("input"),element.trigger("change"),element.trigger("keyup"),attrs.xAutoFillPrevVal=element.val()):""==element.val()&&ngModel.$pristine||(attrs.xAutoFillPrevVal=element.val(),scope.$apply(function(){ngModel.$setViewValue(element.val())})))},300)}}}).directive("hideSpinner",function(){return{restrict:"A",scope:{hideSpinner:"="},link:function(scope,elem,attrs){scope.$watch("hideSpinner",function(n,o){n&&$(elem).hide()})}}}).directive("orderFromFilter",function(){function filterCtrl($attrs,exception,$q,Stuff){function increaseQty(){self.stuff&&self.stuff.quantity<1e3&&self.stuff.quantity++,self.stuff.amazonAddToCartLink="https://www.amazon.com/gp/aws/cart/add.html?ASIN.1="+self.stuff.asin+"&Quantity.1="+self.stuff.quantity}function decreaseQty(){self.stuff&&self.stuff.quantity>1&&self.stuff.quantity--}function getStuff(){$q.when().then(function(){return Stuff.query({query:query}).$promise}).then(function(res){res&&res.length&&(res.shift(),self.stuff=res[0],console.log(self.stuff),self.stuff.quantity=1,self.stuff.amazonAddToCartLink="https://www.amazon.com/gp/aws/cart/add.html?ASIN.1="+self.stuff.asin+"&Quantity.1="+self.stuff.quantity,!self.stuff.img&&self.stuff.gallery&&self.stuff.gallery[0]&&(self.stuff.img=self.stuff.gallery[0].img))})}function setActiveClass(fId,tId){query={$and:[]};for(var k in self.filters)if(k===fId)for(var k2 in self.filters[k].tagsO)k2===tId?(self.filters[k].tagsO[k2].activeClass=!0,query.$and.push({tags:k2})):self.filters[k].tagsO[k2].activeClass=!1;else for(var k2 in self.filters[k].tagsO)self.filters[k].tagsO[k2].activeClass&&query.$and.push({tags:k2});getStuff()}function order(){console.log("order");for(var k in self.filters)if(console.log(self.filters[k].tags.some(function(t){return t.activeClass})),!self.filters[k].tags.some(function(t){return t.activeClass}))return console.log(self.filters[k].name),void exception.showToaster("info","order","select the "+self.filters[k].name)}var self=this,filters=JSON.parse($attrs.orderFromFilter),query={$and:[]};self.filters=filters.reduce(function(fs,item){var i=0;return item.tagsO=item.tags.reduce(function(ts,it){return i++,1===i&&(query.$and.push({tags:it._id}),it.activeClass=!0),ts[it._id]=it,ts},{}),fs[item._id]=item,fs},{}),getStuff(),self.setActiveClass=setActiveClass,self.decreaseQty=decreaseQty,self.increaseQty=increaseQty,self.order=order}return{restrict:"A",scope:{},transclude:!0,bindToController:!0,controller:filterCtrl,controllerAs:"$ctrl",link:function(scope,element,attrs,ctrl,transclude){transclude(scope,function(clone){element.append(clone)})}}}).directive("toTop",[function(){return{restrict:"C",scope:{go:"&"},link:function(scope,element,iAttrs){var scrolled=window.pageYOffset||document.documentElement.scrollTop;scrolled>200?element.addClass("toTopDispalay"):element.addClass("toTopDispalayNone"),window.onscroll=function(){scrolled=window.pageYOffset||document.documentElement.scrollTop,scrolled>200?(element.addClass("toTopDispalay"),element.removeClass("toTopDispalayNone")):(element.removeClass("toTopDispalay"),element.addClass("toTopDispalayNone"))}}}}]).directive("pswdCheck",["$timeout",function($timeout){return{require:"ngModel",link:function(scope,elem,attrs,ctrl){var firstPassword="#"+attrs.pswdCheck;$timeout(function(){elem.on("keyup",function(){scope.$apply(function(){var v=elem.val()===$(firstPassword).val();ctrl.$setValidity("pswdmatch",v)})})},100)}}}]).directive("profileData",["global","User",function(global,User){return{restrict:"E",scope:{confirmFunction:"&",bottomName:"@"},templateUrl:"mobile/views/template/profile.html",link:function(scope,elem,attrs){console.log("link"),scope.profileSave=function(formProfile){scope.submittedProfile=!0,formProfile.$valid&&(scope.errors={},User.update(global.get("user").val,function(res){"OK"&&(scope.submittedProfile=!1,scope.confirmFunction())}))}}}}]).directive("sliderToggle",function($timeout,$rootScope){return{scope:{sliderToggle:"="},restrict:"AE",link:function(scope,element,attrs){var target=element.parent()[0].querySelector("[slider]");attrs.expanded=!1,$rootScope.$on("$includeContentLoaded",function(event){$timeout(function(){scope.$watch("sliderToggle",function(n){var content=target.querySelector(".slideable_content");if(n)target.style.height="0px";else{content.style.border="1px solid rgba(0,0,0,0)";var y=content.clientHeight;content.style.border=0,target.style.height=y+"px"}})},10)}),element.bind("click",function(){if(!scope.sliderToggle){var content=target.querySelector(".slideable_content");if(attrs.expanded)target.style.height="0px";else{var y=content.clientHeight;console.log(),content.style.border=0,target.style.height=y+"px"}attrs.expanded=!attrs.expanded}})}}}).directive("slider",function(){return{restrict:"A",compile:function(element,attr){var contents=element.html();return element.html('<div class="slideable_content" style="margin:0 !important; padding:0 !important" >'+contents+"</div>"),function(scope,element,attrs){element.parent()[0].querySelector(".slideable_content");attrs.duration=attrs.duration?attrs.duration:"1s",attrs.easing=attrs.easing?attrs.easing:"ease-in-out",element.css({height:"0px",transitionProperty:"height",transitionDuration:attrs.duration,transitionTimingFunction:attrs.easing})}}}}).directive("slideToggle11",function($timeout){return{restrict:"A",scope:{slideToggle:"="},link:function(scope,elem,attrs){var querySelector="aaa"+guidGenerator();elem.addClass(querySelector);var div;$timeout(function(){div=document.querySelector("."+querySelector),console.log(div)},50),scope.slideToggle||elem.hide(),scope.$watch("slideToggle",function(n,o){console.log(n,o),n!=o&&toggleSlide(div)})}}}).directive("inline",function(){return{template:'<span ><span ng-show="!edit" ng-class="{\'redColor\':!value}">{{value||empty}}</span><span ng-show="!edit" ng-transclude></span><input ng-show="edit" style="width:{{width}}" class="input-inline" type="{{type}}" ng-model="value"/></span>',restrict:"C",scope:{value:"=",empty:"@",type:"@",width:"@"},transclude:!0,link:function(scope,element,attribs){scope.type||(scope.type="text"),scope.width||(scope.width="80%"),scope.$watch("inline",function(val){scope.value=val});var enablingEditing=function(){scope.edit=!0,setTimeout(function(){element.children().children("input")[2].focus(),element.children().children("input").bind("blur",function(e){scope.$apply(function(){disablingEditing()})})},100)},disablingEditing=function(){scope.edit=!1,scope.inline=scope.value};disablingEditing(),element.bind("click",function(e){"span"!==e.target.nodeName.toLowerCase()&&"img"!==e.target.nodeName.toLowerCase()||scope.$apply(function(){enablingEditing()})}),element.bind("keypress",function(e){if("input"==e.target.nodeName.toLowerCase()){13===(window.event?e.keyCode:e.which)&&scope.$apply(function(){disablingEditing()})}})}}}).directive("inlineTextarea",function(){return{
template:'<span ><span ng-show="!edit" ng-class="{\'redColor\':!value}">{{value||empty}}</span><span ng-show="!edit" ng-transclude></span><textarea ng-show="edit" style="width:{{width}}" class="textarea-inline" rows="{{rows}}" cols1="{{cols}}" ng-model="value"></textarea></span>',restrict:"C",scope:{value:"=",empty:"@",rows:"@",cols:"@"},transclude:!0,link:function(scope,element,attribs){scope.rows||(scope.rows=5),scope.$watch("inline",function(val){scope.value=val});var enablingEditing=function(){scope.edit=!0,setTimeout(function(){console.log(element.children().children("input")[2]),element.children().children("input")[2].focus(),element.children().children("input").bind("blur",function(e){scope.$apply(function(){disablingEditing()})})},100)},disablingEditing=function(){scope.edit=!1,scope.inline=scope.value};disablingEditing(),element.bind("click",function(e){"span"!==e.target.nodeName.toLowerCase()&&"img"!==e.target.nodeName.toLowerCase()||scope.$apply(function(){enablingEditing()})}),element.bind("keypress",function(e){if("input"==e.target.nodeName.toLowerCase()){13===(window.event?e.keyCode:e.which)&&scope.$apply(function(){disablingEditing()})}})}}}).directive("ngPageslideWrapper",function($document,$timeout,$rootScope){return{restrict:"A",link:function(scope,element,attribs){console.log(element);var wrappedID,wrappedClass;$timeout(function(){var queryResult=document.getElementsByTagName("body")[0];wrappedID=angular.element(queryResult);var queryResult1=document.getElementsByClassName("navbar-nav")[0];wrappedClass=angular.element(queryResult1)},200),$timeout(function(){element.bind("mouseenter",function(event){console.log("mouseenter"),wrappedID.css("overflow-y","hidden"),wrappedID.css("margin-right","20px"),wrappedClass.css("margin-right","20px")}),element.bind("mouseleave",function(event){console.log("mouseleave"),$rootScope.checkedMenu.m=!1,console.log($rootScope.checkedMenu),wrappedID.css("overflow-y","scroll"),wrappedID.css("margin-right","0"),wrappedClass.css("margin-right","0")})},300)}}}).directive("halfMenu",function($rootScope){return{link:function(scope,element,attrs){$&&setTimeout(function(){var height=$(element).height();$rootScope.$on("$stateChangeSuccess",function(ev,to,toParams,from,fromParams){"home"==to.name||$(element).hasClass("hafhMenuHeight")?"home"==to.name&&$(element).hasClass("hafhMenuHeight")&&$(element).height(height):$(element).height(height/2)})},50)}}});var guidGenerator=function(){var S4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return console.log(S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4()),S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4()},getHeight=function(el){console.log(el);var el_style=window.getComputedStyle(el),el_display=el_style.display,el_position=el_style.position,el_visibility=el_style.visibility,el_max_height=el_style.maxHeight.replace("px","").replace("%",""),wanted_height=0;return"none"!==el_display&&"0"!==el_max_height?el.offsetHeight:(el.style.position="absolute",el.style.visibility="hidden",el.style.display="block",wanted_height=el.offsetHeight,el.style.display=el_display,el.style.position=el_position,el.style.visibility=el_visibility,wanted_height)},toggleSlide=function(el){var el_max_height=0;el_max_height=getHeight(el)+"px",el.style.transition="max-height 0.5s ease-in-out",el.style.overflowY="hidden",el.style.maxHeight="0",el.setAttribute("data-max-height",el_max_height),el.style.display="block",setTimeout(function(){el.style.maxHeight=el_max_height},10)};angular.module("gmall.controllers",[]).controller("404Ctrl",["$scope","seoContent",function($scope,seoContent){seoContent.setData404()}]).controller("mainFrameCtrl",["$scope","global","$witgets","$http","anchorSmoothScroll","$state","$timeout","$sce","$order","toaster","$rootScope","User","$window",function($scope,global,$witgets,$http,anchorSmoothScroll,$state,$timeout,$sce,$order,toaster,$rootScope,User,$window){$scope.mainFrameCtrl=this,$scope.mainFrameCtrl.sizeMenu="350px",$scope.mainFrameCtrl.scrollTo=function(id){anchorSmoothScroll.scrollTo(id)}}]).controller("homeCtrl",["$scope","$q","$resource","global","seoContent","anchorSmoothScroll","$anchorScroll","News","exception","$auth","$stateParams","$location","Account","HomePage",function($scope,$q,$resource,global,seoContent,anchorSmoothScroll,$anchorScroll,News,exception,$auth,$stateParams,$location,Account,HomePage){$stateParams.token&&($auth.setToken({data:{token:$stateParams.token}}),$location.search("token",null),$auth.isAuthenticated()&&Account.getProfile().then(function(response){global.set("user",response.data),global.get("functions").val.logged()}).catch(function(response){response&&response.data&&exception.catcher(response.status)(response.data.message)})),$anchorScroll()}]).controller("unsubscriptionCtrl",["$scope","global","Account","$q","$state","exception","toaster",function($scope,global,Account,$q,$state,exception,toaster){}]),angular.module("gmall.filters",[]).filter("interpolate",function(version){return function(text){return String(text).replace(/\%VERSION\%/gm,version)}}).filter("trustUrl",["$sce",function($sce){return function(recordingUrl){return $sce.trustAsResourceUrl(recordingUrl)}}]).filter("unsafe",function($sce){return function(val){return $sce.trustAsHtml(val)}}).filter("cut",function(){return function(value,wordwise,max,tail){if(!value)return"";if(!(max=parseInt(max,10)))return value;if(value.length<=max)return value;if(value=value.substr(0,max),wordwise){var lastspace=value.lastIndexOf(" ");lastspace!=-1&&(value=value.substr(0,lastspace))}return value+(tail||"")}}).filter("filterSection",function(version){return function(input,sectionId){if(0==sectionId)return input;var temp=[];return angular.forEach(input,function(item){item.category==sectionId&&temp.push(item)}),temp}}).filter("filterSizeIs",function(){return function(items,tags){return items?items.filter(function(item){var is;return tags.length?tags.forEach(function(el){is=!el||!el.length||!el.some(function(tag){return!(!item.store[tag]||item.store[tag].quantity)})}):is=!0,is}):[]}}).filter("filterSorts",function(){return function(sorts){if(!sorts)return[];for(var key in sorts)sorts[key].quantity&&0!=sorts[key].quantity||delete sorts[key];return sorts}}),angular.module("gmall.services",[]).value("version","0.1").factory("$witgets",["$resource",function($resource){return{set:function(witgets){console.log(witgets),witgets.forEach(function(el){callWitget(el)})}}}]).service("anchorSmoothScroll",function(){this.scrollTo=function(eID){var startY=function(){return self.pageYOffset?self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0}(),stopY=function(eID){var elm=document.getElementById(eID);if(!elm)return 0;for(var y=elm.offsetTop,node=elm;node.offsetParent&&node.offsetParent!=document.body;)node=node.offsetParent,y+=node.offsetTop;return y}(eID),distance=stopY>startY?stopY-startY:startY-stopY;if(distance<100)return void scrollTo(0,stopY);var speed=Math.round(distance/100);speed>=20&&(speed=20),speed=7;var step=Math.round(distance/25),leapY=stopY>startY?startY+step:startY-step,timer=0;if(stopY>startY)for(var i=startY;i<stopY;i+=step)setTimeout("window.scrollTo(0, "+leapY+")",timer*speed),leapY+=step,leapY>stopY&&(leapY=stopY),timer++;else for(var i=startY;i>stopY;i-=step)setTimeout("window.scrollTo(0, "+leapY+")",timer*speed),leapY-=step,leapY<stopY&&(leapY=stopY),timer++}}),angular.module("lazyImg",[]).service("scrollAndResizeListener",function($window,$document,$timeout){function invokeListeners(){var clientHeight=$document[0].documentElement.clientHeight,clientWidth=$document[0].documentElement.clientWidth;for(var key in listeners)listeners.hasOwnProperty(key)&&listeners[key](clientHeight,clientWidth)}var scrollTimeoutId,resizeTimeoutId,id=0,listeners={};return $window.addEventListener("scroll",function(){$timeout.cancel(scrollTimeoutId),scrollTimeoutId=$timeout(invokeListeners,200)}),$window.addEventListener("resize",function(){$timeout.cancel(resizeTimeoutId),resizeTimeoutId=$timeout(invokeListeners,200)}),{bindListener:function(listener){var index=++id;return listeners[id]=listener,function(){delete listeners[index]}}}}),angular.module("lazyImg").directive("imageLazySrc",function($document,scrollAndResizeListener,$timeout){return{restrict:"A",link:function($scope,$element,$attributes){function isInView(clientHeight,clientWidth){var imageRect=$element[0].getBoundingClientRect();imageRect.top>=0&&imageRect.bottom<=clientHeight+600&&!$element[0].src&&($element[0].src=$attributes.imageLazySrc,listenerRemover())}var listenerRemover;listenerRemover=scrollAndResizeListener.bindListener(isInView),$element.on("$destroy",function(){listenerRemover()}),$timeout(function(){isInView($document[0].documentElement.clientHeight,$document[0].documentElement.clientWidth)},300)}}}),function(){function userSign(){return{scope:{closeModal:"&",toaster:"@",social:"="},bindToController:!0,controller:signupCtrl,controllerAs:"$ctrl",templateUrl:"/components/sign-login/sign.html",restrict:"AE"}}function subscriptionAdd(){return{scope:{closeModal:"&",toaster:"@"},bindToController:!0,controller:signupCtrl,controllerAs:"$ctrl",templateUrl:"/components/sign-login/subscriptionAdd.html",restrict:"AE"}}function userSignShort(){return{scope:{toaster:"@",buttonName:"@"},bindToController:!0,controller:signupCtrl,controllerAs:"$ctrl",templateUrl:"/components/sign-login/sign-short.html",restrict:"AE"}}function userLogin(){return{scope:{closeModal:"&",modalClose:"&",toaster:"@",social:"=",successFoo:"&"},bindings:{toaster:"<",social:"=",successFoo:"&"},bindToController:!0,controller:loginCtrl,controllerAs:"$ctrl",templateUrl:"/components/sign-login/login.html",restrict:"AE"}}function userLoginPhone(){return{scope:{closeModal:"&",modalClose:"&",toaster:"@",social:"=",successFoo:"&"},bindings:{toaster:"<",social:"=",successFoo:"&"},bindToController:!0,controller:loginPhoneCtrl,controllerAs:"$ctrl",templateUrl:"/components/sign-login/loginPhone.html",restrict:"AE"}}function enterButton(){return{scope:{toaster:"@"},bindToController:!0,controller:enterButtonCtrl,controllerAs:"$ctrl",templateUrl:"/components/sign-login/enter-button.html",restrict:"AE"}}function signupCtrl($scope,$auth,toaster,$q,global,Account,$state,Stuff,CreateContent,$email,exception){function signup(form){form.$valid&&(self.user.store=global.get("store").val._id,$auth.signup(self.user).then(function(response){if(response&&response.data&&response.data.token){if("update"==response.data.token)throw $scope.$emit("closeWitget"),toaster.info(response.data.message),null;$auth.setToken(response);var msg=global.get("langNote").val.subscriptionSuccess;return toaster.info(msg),Account.getProfile()}throw response}).then(function(response){if($scope.$emit("closeWitget"),response){if(global.set("user",response.data),global.get("functions").val.logged(),$scope.$emit("cartslide",{event:"signLogin"}),"cart"==$state.current.name||"stuffs.stuff"==$state.current.name)return;var states=$state.get();if(global.get("paps")&&global.get("paps").val&&states.some(function(state){return"thanksPage"==state.name})){var pap=global.get("paps").val.getOFA("action","subscription");pap&&pap.url&&$state.go("thanksPage",{id:pap.url})}}}).then(function(){if("subscription"==self.user.type){if(global.get("coupons")&&global.get("coupons").val&&global.get("coupons").val.length)return[{imgs:global.get("coupons").val}]}else if("subscriptionAdd"==self.user.type){var p={page:0,rows:100},query={$and:[{orderType:4},{actived:!0}]};return Stuff.getList(p,query)}}).then(function(stuffs){if(stuffs&&stuffs.length){if(!self.user||!self.user.email)throw"нет email";var content=CreateContent.emailBonus(stuffs),bonus=global.get("langNote").val.getBonus,domain=global.get("store").val.domain,o={email:self.user.email,content:content,subject:bonus+" ✔",from:"<promo@"+domain+">"};return $q(function(resolve,reject){$email.save(o,function(res){exception.showToaster("note","",global.get("langNote").val.emailSent),resolve()},function(err){exception.showToaster("warning",global.get("langNote").val.error,err.data),resolve()})})}}).catch(function(err){err&&exception.catcher("signup")(err)}))}function authenticate(provider){$auth.authenticate(provider).then(function(response){$scope.$emit("closeWitget"),$auth.setToken(response);var msg=global.get("langNote").val.subscriptionSuccess;toaster.info(msg)}).then(function(){return Account.getProfile()}).then(function(response){console.log(response),response&&(global.set("user",response.data),global.get("functions").val.logged(),$scope.$emit("cartslide",{event:"signLogin"}))}).catch(function(error){self.toaster&&(error.error?toaster.error(error.error):error.data?toaster.error(error.data.message,error.status):toaster.error(error))})}var self=this;self.global=global,self.formData=global.get("store").val.bonusForm?global.get("store").val.bonusForm:{phone:!0,fields:[]},self.user={email:"",profile:{},addInfo:{},subscription:!0},self.buttonName||self.buttonName,self.signup=signup,self.authenticate=authenticate}function loginCtrl($scope,$auth,toaster,$q,global,Account,exception,sendPhoneFactory,$timeout){function login(form){form.$valid||retrun,self.user.store=global.get("store").val._id,$auth.login(self.user).then(function(data){console.log(data),self.successFoo?self.successFoo():$scope.$emit("closeWitget"),self.toaster&&toaster.info(global.get("langNote").val.authComplite)}).then(function(){return Account.getProfile()}).then(function(response){response&&(global.set("user",response.data),global.get("functions").val.logged(),$scope.$emit("cartslide",{event:"signLogin"})),$timeout(function(){$scope.$emit("closeWitget")},50)}).catch(function(err){global.set("user",null),self.toaster&&exception.catcher("login")(err)})}function authenticate(provider){$auth.authenticate(provider).then(function(response){$scope.$emit("closeWitget"),self.successFoo&&"function"==typeof self.successFoo?self.successFoo():$scope.$emit("closeWitget");var msg=global.get("langNote").val.authComplite;toaster.info(msg)}).then(function(){return Account.getProfile()}).then(function(response){response&&(global.set("user",response.data),global.get("functions").val.logged(),$scope.$emit("cartslide",{event:"signLogin"}))}).catch(function(error){self.toaster&&(error.error?toaster.error(error.error):error.data?toaster.error(error.data.message,error.status):toaster.error(error))})}function sendCodeToPhone(){self.sendCodeDisable||(self.sendCodeDisable=!0,console.log(self.phone),self.phone&&$q.when().then(function(){return sendPhoneFactory.sendCodeToPhone(self.phone)}).then(function(){self.codeSent=!0,exception.showToaster("info","send code","success"),$timeout(function(){self.sendCodeDisable=!1},1e4)}).catch(function(err){err&&exception.catcher("send code")(err),$timeout(function(){self.sendCodeDisable=!1},1e4)}))}function verifyCode(form){self.sendVerifyCodeDisable||form.$invalid||self.code&&self.phone&&(self.sendVerifyCodeDisable=!0,$q.when().then(function(){return sendPhoneFactory.verifyCode(self.code,self.phone)}).then(function(response){if(exception.showToaster("info","verify code","success"),$timeout(function(){self.sendVerifyCodeDisable=!1},5e3),response&&response.data&&response.data.token)return $auth.setToken(response),Account.getProfile();throw"wrong response"}).then(function(response){self.successFoo?self.successFoo():$scope.$emit("closeWitget"),$scope.$emit("closeWitget"),self.toaster&&toaster.info(global.get("langNote").val.authComplite),response&&(global.set("user",response.data),global.get("functions").val.logged(),$scope.$emit("cartslide",{event:"signLogin"}))}).catch(function(err){self.wrongCode=!0,global.set("user",null),err&&exception.catcher("verify code")(err),$timeout(function(){self.sendVerifyCodeDisable=!1},5e3)}))}var self=this;self.$onInit=function(){},self.login=login,self.authenticate=authenticate,self.sendCodeToPhone=sendCodeToPhone,self.verifyCode=verifyCode,self.global=global,self.phone=null,self.codeSent,self.sendCodeDisable,self.sendVerifyCodeDisable}function enterButtonCtrl(toaster,$q,Account,global,exception){function getEnterButton(form){form.$invalid||$q.when().then(function(){return self.blockButton=!0,setTimeout(function(){self.blockButton=!1},1e3),Account.getEnterButton(self.user)}).then(function(response){self.toaster&&toaster.info(response.data.message)}).catch(function(err){err&&exception.catcher(global.get("langNote").val.error)(err)})}var self=this;self.global=global,self.getEnterButton=getEnterButton}function loginPhoneCtrl($scope,$auth,toaster,$q,global,Account,exception,sendPhoneFactory,$timeout,$user){function sendCodeToPhone(){self.sendCodeDisable||(self.sendCodeDisable=!0,self.phone&&$q.when().then(function(){return sendPhoneFactory.checkPhone(self.phone)}).then(function(res){if(!res||!res._id)return $user.newUserByPhone(self.name,self.phone)}).then(function(){return console.log("sendPhoneFactory.sendCodeToPhone(self.phone)"),sendPhoneFactory.sendCodeToPhone(self.phone)}).then(function(){self.codeSent=!0,exception.showToaster("info","send code","success"),$timeout(function(){self.sendCodeDisable=!1},1e4)}).catch(function(err){err&&exception.catcher("send code")(err),$timeout(function(){self.sendCodeDisable=!1},1e4)}))}function verifyCode(form){self.sendVerifyCodeDisable||form.$invalid||self.code&&self.phone&&(self.sendVerifyCodeDisable=!0,$q.when().then(function(){return sendPhoneFactory.verifyCode(self.code,self.phone)}).then(function(response){if(exception.showToaster("info","verify code","success"),$timeout(function(){self.sendVerifyCodeDisable=!1},5e3),response&&response.data&&response.data.token)return $auth.setToken(response),Account.getProfile();throw"wrong response"}).then(function(response){self.successFoo?self.successFoo():$scope.$emit("closeWitget"),$scope.$emit("closeWitget"),self.toaster&&toaster.info(global.get("langNote").val.authComplite),response&&(global.set("user",response.data),global.get("functions").val.logged(),$scope.$emit("cartslide",{event:"signLogin"}))}).catch(function(err){self.wrongCode=!0,global.set("user",null),err&&exception.catcher("verify code")(err),$timeout(function(){self.sendVerifyCodeDisable=!1},5e3)}))}var self=this;self.$onInit=function(){},self.sendCodeToPhone=sendCodeToPhone,self.verifyCode=verifyCode,self.global=global,self.phone=null,self.name="",self.codeSent,self.sendCodeDisable,self.sendVerifyCodeDisable}angular.module("gmall.directives").directive("userSign",userSign).directive("subscriptionAdd",subscriptionAdd).directive("userSignShort",userSignShort).directive("userLogin",userLogin).directive("userLoginPhone",userLoginPhone).directive("enterButton",enterButton),signupCtrl.$inject=["$scope","$auth","toaster","$q","global","Account","$state","Stuff","CreateContent","$email","exception"],loginCtrl.$inject=["$scope","$auth","toaster","$q","global","Account","exception","sendPhoneFactory","$timeout"],loginPhoneCtrl.$inject=["$scope","$auth","toaster","$q","global","Account","exception","sendPhoneFactory","$timeout","$user"]}(),function(){angular.module("gmall.directives").directive("pswdCheck",["$timeout",function($timeout){return{require:"ngModel",link:function(scope,elem,attrs,ctrl){var firstPassword="#"+attrs.pswdCheck;$timeout(function(){elem.on("keyup",function(){scope.$apply(function(){var v=elem.val()===$(firstPassword).val();console.log(v),ctrl.$setValidity("pswdmatch",v)})})},100)}}}]).directive("passwordMatch",function(){return{require:"ngModel",scope:{otherModelValue:"=passwordMatch"},link:function(scope,element,attributes,ngModel){ngModel.$validators.compareTo=function(modelValue){return!("undefined"!==modelValue&&""!==modelValue&&modelValue||"undefined"!==scope.otherModelValue&&""!==scope.otherModelValue&&scope.otherModelValue)||modelValue===scope.otherModelValue},scope.$watch("otherModelValue",function(){ngModel.$validate()})}}}).directive("passwordStrength",function(){return{restrict:"A",require:"ngModel",link:function(scope,element,attrs,ngModel){var indicator=element.children(),dots=Array.prototype.slice.call(indicator.children()),weakest=dots.slice(-1)[0],weak=dots.slice(-2),strong=dots.slice(-3),strongest=dots.slice(-4);element.after(indicator),element.bind("keyup",function(){var tmp,matches={positive:{},negative:{}},counts={positive:{},negative:{}},strength=0;angular.forEach(dots,function(el){el.style.backgroundColor="#ebeef1"}),ngModel.$viewValue&&(matches.positive.lower=ngModel.$viewValue.match(/[a-z]/g),matches.positive.upper=ngModel.$viewValue.match(/[A-Z]/g),matches.positive.numbers=ngModel.$viewValue.match(/\d/g),matches.positive.symbols=ngModel.$viewValue.match(/[$-\/:-?{-~!^_`\[\]]/g),matches.positive.middleNumber=ngModel.$viewValue.slice(1,-1).match(/\d/g),matches.positive.middleSymbol=ngModel.$viewValue.slice(1,-1).match(/[$-\/:-?{-~!^_`\[\]]/g),counts.positive.lower=matches.positive.lower?matches.positive.lower.length:0,counts.positive.upper=matches.positive.upper?matches.positive.upper.length:0,counts.positive.numbers=matches.positive.numbers?matches.positive.numbers.length:0,counts.positive.symbols=matches.positive.symbols?matches.positive.symbols.length:0,counts.positive.numChars=ngModel.$viewValue.length,tmp+=counts.positive.numChars>=8?1:0,counts.positive.requirements=tmp>=3?tmp:0,counts.positive.middleNumber=matches.positive.middleNumber?matches.positive.middleNumber.length:0,counts.positive.middleSymbol=matches.positive.middleSymbol?matches.positive.middleSymbol.length:0,matches.negative.consecLower=ngModel.$viewValue.match(/(?=([a-z]{2}))/g),matches.negative.consecUpper=ngModel.$viewValue.match(/(?=([A-Z]{2}))/g),matches.negative.consecNumbers=ngModel.$viewValue.match(/(?=(\d{2}))/g),matches.negative.onlyNumbers=ngModel.$viewValue.match(/^[0-9]*$/g),matches.negative.onlyLetters=ngModel.$viewValue.match(/^([a-z]|[A-Z])*$/g),counts.negative.consecLower=matches.negative.consecLower?matches.negative.consecLower.length:0,counts.negative.consecUpper=matches.negative.consecUpper?matches.negative.consecUpper.length:0,counts.negative.consecNumbers=matches.negative.consecNumbers?matches.negative.consecNumbers.length:0,strength+=4*counts.positive.numChars,counts.positive.upper&&(strength+=2*(counts.positive.numChars-counts.positive.upper)),counts.positive.lower&&(strength+=2*(counts.positive.numChars-counts.positive.lower)),(counts.positive.upper||counts.positive.lower)&&(strength+=4*counts.positive.numbers),strength+=6*counts.positive.symbols,strength+=2*(counts.positive.middleSymbol+counts.positive.middleNumber),strength+=2*counts.positive.requirements,strength-=2*counts.negative.consecLower,strength-=2*counts.negative.consecUpper,strength-=2*counts.negative.consecNumbers,matches.negative.onlyNumbers&&(strength-=counts.positive.numChars),matches.negative.onlyLetters&&(strength-=counts.positive.numChars),strength=Math.max(0,Math.min(100,Math.round(strength))),strength>85?angular.forEach(strongest,function(el){el.style.backgroundColor="#008cdd"}):strength>65?angular.forEach(strong,function(el){el.style.backgroundColor="#6ead09"}):strength>30?angular.forEach(weak,function(el){el.style.backgroundColor="#e09115"}):weakest.style.backgroundColor="#e01414")})},template:'<span class="password-strength-indicator"><span></span><span></span><span></span><span></span></span>'}})}(),angular.module("gmall.services").factory("myInterceptorService",function($q,$rootScope,$templateCache){var keys=$templateCache.getKeys(),store=globalStoreId;try{globalCrawler&&globalCrawler}catch(err){}return{request:function(config){return keys.indexOf(config.url)>-1?config:(config.params=config.params||{},config.params.store||(config.params.store=store),$rootScope.global&&$rootScope.global.get("store")&&$rootScope.global.get("store").val&&$rootScope.global.get("store").val.lang&&(config.params.lang=$rootScope.global.get("store").val.lang),config)},response:function(response){return response.status,response}}}),angular.module("gmall").config(["$provide",function($provide){$provide.decorator("$templateCache",["$delegate",function($delegate){var keys=[],origPut=$delegate.put;return $delegate.put=function(key,value){origPut(key,value),keys.push(key)},$delegate.getKeys=function(){return keys},$delegate}])}]),angular.module("gmall.exception",[]).factory("exception",exception),exception.$inject=["toaster"],angular.module("gmall.services").factory("Confirm",confirmFactory),confirmFactory.$inject=["$q","$uibModal"],angular.module("gmall.services").factory("seoContent",["global","$stateParams","$resource","$state","$q","$sce",function(global,$stateParams,$resource,$state,$q,$sce){function setTitles(titles,res,noFooter){res.seo?(res.seo.title?titles.title=res.seo.title:titles.title=res.name,res.seo.description?titles.description=res.seo.description:titles.description=res.desc.replace(regex,"").substring(0,200),res.seo.keywords&&(titles.keywords=res.seo.keywords)):(titles.title=res.name,res.desc?titles.description=res.desc.replace(regex,"").substring(0,200):titles.description=""),noFooter||(res.desc?titles.pageDescFooter=res.desc.replace(regex,""):titles.pageDescFooter="",titles.namePageFooter=res.name)}function getSeoPageInfo(titles){if(!global.get("seopage")||!global.get("seopage").val||!global.get("seopage").val.length)return!1;titles.pageDescFooter||(titles.pageDescFooter=""),titles.namePageFooter||(titles.namePageFooter="");for(var i=0,l=global.get("seopage").val.length;i<l;i++){var a=global.get("seopage").val[i];console.log(a.url);var href=titles.canonical?titles.canonical:$location.path();if("http://"+global.get("store").val.domain+a.url==href)return a._id}return!1}function setSeopageData(){return $q.when().then(function(){return global.get("currentSeopage")?global.get("currentSeopage").val:null}).then(function(seopage){if(seopage)var sp=global.get("seopages").val.getOFA("link",seopage.link);if(sp&&!sp.data&&(seopage.seo||(seopage.seo={}),seopage.seo.keywords=seopage.keywords.map(function(w){return w.word}).filter(function(w){return w}).join(","),sp.data=seopage),seopage){var titlesTemp=global.get("titles").val,titles=seopage.seo;return titlesTemp&&titlesTemp.image&&!titles.image&&(titles.image=titlesTemp.image),titles.title=seopage.title||titles.title,titles.domain=global.get("store").val.link,titles.author=titles.author||global.get("store").val.name,titles.canonical=$sce.trustAsResourceUrl(global.get("store").val.link+seopage.link),seopage.desc&&(titles.desc=seopage.desc),global.set("titles",titles),!0}})}function capitalizeFirstLetter(string){return string.charAt(0).toUpperCase()+string.slice(1)}var regex=/<\/?[^>]+(>|$)/g;return{setSeopageData:setSeopageData,setDataCatalog:function(){setSeopageData().then(function(seopageIs){if("stuffs.stuff"!=$state.current.name&&!seopageIs){var s=global.get("store").val,titles={};if(global.get("category")&&global.get("category").val){var c=global.get("category").val;global.get("langForm").val&&(titles.title=c.section.name+" "+c.name+" "+global.get("lang").val.inn+" "+s.name+".",titles.description=capitalizeFirstLetter(global.get("langForm").val.toorder)+" "+global.get("lang").val.onLine+" "+c.section.name+" "+c.name+" "+global.get("lang").val.inn+" "+s.name+","+s.location),titles.keywords=s.name+","+c.name+","+c.section.name+","+s.location,c.section.subSectionName&&(titles.keywords+=","+c.section.subSectionName),titles.canonical=$sce.trustAsResourceUrl(global.get("store").val.link+"/"+c.linkData.groupUrl+"/"+c.linkData.categoryUrl)}else if($stateParams.groupUrl&&"group"!=$stateParams.groupUrl){var sectionUrl=$stateParams.groupUrl,sec=global.get("functions").val.getSection(sectionUrl);if(sec){global.get("langForm").val&&(titles.title=capitalizeFirstLetter(global.get("langForm").val.toorder)+" "+sec.name+" "+global.get("lang").val.inn+" "+s.name+" "+global.get("lang").val.onLine+".");var categories="";sec.categories.length&&sec.categories.forEach(function(c,i){i&&(categories+=","),categories+=c.name}),titles.keywords=s.name+","+sec.name+","+s.location+","+categories,global.get("langForm").val&&(titles.description=capitalizeFirstLetter(global.get("langForm").val.toorder)+" "+global.get("lang").val.onLine+" "+sec.name+categories+" "+global.get("lang").val.inn+" "+s.name+" "+s.name+","+s.location),titles.canonical=global.get("store").val.link+"/"+sec.url+"/category"}else console.log("???"),titles.canonical="",titles.title="Заказать из каталога "+s.name+" онлайн.",titles.keywords=s.name+",каталог,"+s.location,titles.description="Заказ онлайн из каталога в "+s.name+","+s.location;titles.canonical=$sce.trustAsResourceUrl(titles.canonical)}else titles.title="Заказать из каталога "+s.name+" онлайн.",titles.keywords=s.name+",каталог,"+s.location,titles.description="Заказ онлайн из каталога в "+s.name+","+s.location,titles.canonical=global.get("store").val.link+"/group/category",titles.canonical=$sce.trustAsResourceUrl(titles.canonical);titles.domain=s.link,titles.author=s.name,global.set("titles",titles)}})},setDataHomePage:function(){setSeopageData()},setDataItem:function(item,news){var domain=global.get("store").val.link,titles=angular.copy(global.get("store").val.seo);if(titles||(titles={}),news){var img=item.img?item.img:"";titles.url=domain+"/news/"+item.url,titles.type="article"}else{var img=item.gallery&&item.gallery[0]&&item.gallery[0].thumb?item.gallery[0].thumb:"";titles.url=domain+"/"+item.link,titles.type="product"}img&&(img=photoHost+"/"+img),titles.image=img;try{titles.canonical=$sce.trustAsResourceUrl(titles.url)}catch(err){console.log(err)}return titles.title=item.name,news||(item.artikul&&(titles.title+=" "+item.artikul),titles.title=item.categoryName+" "+titles.title),global.set("titles",titles),!0},setDataList:function(type,name){setSeopageData().then(function(seopageIs){if(console.log("seopageIs",seopageIs),!seopageIs){var domain=global.get("store").val.link,titles=angular.copy(global.get("store").val.seo);titles||(titles={}),titles.url=domain+"/"+type,titles.type="";try{titles.canonical=$sce.trustAsResourceUrl(titles.url)}catch(err){console.log(err)}return global.set("titles",titles),!0}})},setData404:function(res){var seoPageId,titles={pageTitle:"",pageDescription:"",pageKeyWords:""},titles=angular.copy(global.get("store").val.seo);titles.canonical=$sce.trustAsResourceUrl("http://"+global.get("store").val.domain+"/404"),titles.url=titles.canonical,(seoPageId=getSeoPageInfo(titles))?$resource("/api/collections/Seopage/:id",{id:"@_id"}).get({id:seoPageId},function(res){setTitles(titles,res,!0),global.set("titles",titles)}):global.set("titles",titles)}}}]),angular.module("gmall.services").factory("CreateContent",["global","$timeout",function(global,$timeout){function getHeader(user){var s='<table width="900px" cellpadding="0" cellspacing="0" style="max-width:900px;color: #333333;border-collapse:collapse; border:none;table-layout: fixed; padding: 0;margin: 20px 0 0 0" border="0"><tr width="100%" style="max-width:900px;"><td width="50%" style=" padding:5px 20px"><a href="'+global.get("store").val.link+'">';return global.get("store").val.logo&&(s+='<img  style="width: 100px;" src="'+photoHostForFactory+"/"+global.get("store").val.logo+'"></br>'),global.get("store").val.name&&(s+='<span  style="width: 100px;" src="'+photoHostForFactory+"/"+global.get("store").val.name+'"></span>'),s+="</a></td>",s+='<td width="50%"  style="text-align: right; padding:5px 20px">',global.get("store").val.seller.phone&&(s+="<p><span>"+global.get("langOrder").val.phone+'</span>: <a style="color:#666" href="tel:+'+global.get("store").val.seller.phone+'"><span>+'+global.get("store").val.seller.phone+"</span></a></p>"),global.get("store").val.feedbackEmail&&(s+='<p><span>e-mail</span>: <a style="color:#666" href="mailto:'+global.get("store").val.feedbackEmail+'"><span>'+global.get("store").val.feedbackEmail+"</span></a></p>"),s+="</td></tr>",
global.get("sections")&&global.get("sections").val&&global.get("sections").val[0]&&(s+='<table width="860px" cellpadding="0" cellspacing="0" style="max-width:900px;background-color: #000;border-collapse:collapse; border:1px solid #000;table-layout: fixed; padding: 0;margin: 0px 20px"><td width="50%" style="background-color: #333;text-align: center; padding: 20px;border:1px solid #fff;"><a style="color: #fff; text-transform: uppercase" href="'+global.get("store").val.link+'/cabinet"><span>'+global.get("langOrder").val.mainCabinet+"</span></a></td>",s+='<td width="50%" style="background-color: #333;text-align: center; padding: 20px;border:1px solid #fff;"><a style="color: #fff; text-transform: uppercase" href="'+global.get("store").val.link+"/"+global.get("sections").val[0].url+'/category"><span>'+global.get("lang").val.catalog+"</span></a></td>",s+="</tr></table>",s+="</table>"),s}function getFooter(){var s='<style>.footer a</style><table class="footer" width="860px" cellpadding="0" cellspacing="0" style="margin: 20px;color: #000;border-collapse:collapse; border:none;table-layout: fixed; padding: 0;" border="0"><tr><td colspan="2" align="center" style="vertical-align: top; padding: 10px 20px;background-color:#333"><span style="font-family:Tahoma; font-size:12px; color:#e8e8e8;">';if(global.get("store").val.sn)for(var key in global.get("store").val.sn)global.get("store").val.sn[key].is&&global.get("store").val.template.index&&global.get("store").val.template.index.icons&&global.get("store").val.template.index.icons[key+"white"]&&(s+='<a href="'+global.get("store").val.sn[key].link+'"><img style="width: 24px; height: 24px;margin: 0 10px" src="'+global.get("store").val.link+global.get("store").val.template.index.icons[key+"white"].img+'"></a>');return s+='</span></td></tr><tr style="background-color: #fff;color: #000"><td align="left" style="vertical-align: top; padding: 10px 20px"><span style="font-size:14px; ">',global.get("store").val.footer&&global.get("store").val.footer.text&&(s+=global.get("store").val.footer.text),s+="</span></td>",s+='<td align="right" style="vertical-align: top; padding: 10px 20px"><span style="font-size:14px;">',global.get("store").val.footer&&global.get("store").val.footer.text1&&(s+=global.get("store").val.footer.text1),s+="</span></td></tr></table>"}function empty(){return'<!DOCTYPE html><html><head><meta charset=utf-8/><style type="text/css">@media only screen and (max-device-width:660px){.table-mobile{display:none !important;}}</style></head><body onload="window.print()"><div style="max-width: 800px"><h1>информация  отсутствует</h1></div><body></html>'}function getLink(t,u){if(!t||!u)return null;var d=global.get("store").val.domain;switch(console.log("global.get('store').val.domain",global.get("store").val.domain),t){case"stuffs":return d+"/group/category/"+u;case"categories":return d+"/group/"+u;case"brandTags":return d+"/group/category?brandTag="+u;case"brands":return d+"/group/category?brand="+u;case"filterTags":return d+"/group/category?queryTag="+u;case"campaign":return d+"/camapign/"+u}}function emailFromNews(item){var s='<table width="100%" cellpadding="0" cellspacing="0" style="max-width:900px;color: #333333;border-collapse:collapse; border:none;table-layout: fixed; padding: 0;margin: 0" border="0"><tr width="100%" style="max-width:900px;"><td style="text-align: center; padding: 5px"><a href="'+global.get("store").val.link+'"><img  style="width: 100px;" src="'+photoHostForFactory+"/"+global.get("store").val.logo+'"></a></td></tr><tr width="100%" style="max-width:900px;"><td style="text-align: center; padding: 5px; font-size: 20px;"><h3>usernameforreplace</h3></td></tr><tr width="100%"><td><h2 style="font-weight: 500; letter-spacing: 2px; text-transform: uppercase; text-align: center; color: #333333; font-family:  Arial, sans-serif; line-height: 30px; -webkit-text-size-adjust:none;">'+item.name+"</h2></td></tr>";if(s+="</table>",s+='<table class="table-mobile" width="100%" cellpadding="0" cellspacing="0" style="max-width:900px;color: #333333; border-collapse:collapse; border:none;table-layout: fixed; padding: 0;margin: 0 " border="0">',item.blocks&&item.blocks.length&&item.blocks.forEach(function(block){if(block.name&&(s+="text2"==block.type?'<tr width="100%" style="max-width:900px;"><td style="padding: 5px"><h3 style="text-align: center; color: :#333333; font: 22px Arial, sans-serif; line-height: 30px; -webkit-text-size-adjust:none; text-transform: uppercase">'+(block.name?block.name:"")+'</h3></td><td style="padding: 5px"><h3 style="text-align: center; color: :#333333; font: 22px Arial, sans-serif; line-height: 30px; -webkit-text-size-adjust:none; text-transform: uppercase">'+(block.name1?block.name1:"")+"</h3></td></tr>":'<tr width="100%" style="max-width:900px;"><td colspan="2" style="padding: 5px"><h3 style="text-align: center; color: :#333333; font: 22px Arial, sans-serif; line-height: 30px; -webkit-text-size-adjust:none; text-transform: uppercase">'+block.name+"</h3></td></tr>"),block.img&&(s+='<tr width="100%" style="max-width:900px;"><td  colspan="2" width="100%" style=" padding: 5px" >',block.link&&(s+='<a href="'+global.get("store").val.link+block.link+'" style="cursor: pointer;">'),s+='<img alt="" style="width: 100%;margin-bottom: 10px; display: block" src="'+photoHostForFactory+"/"+block.img+'">',block.link&&(s+="</a>"),s+="</td></tr>"),block.desc&&(s+="text2"==block.type?'<tr width="100%" style="max-width:900px;"><td style="padding: 5px"><span style="text-align: justify;  color: :#333333; font: 18px Arial, sans-serif; line-height: 30px; -webkit-text-size-adjust:none;">'+(block.desc?block.desc:"")+'</span></td><td style="padding: 5px"><span style="text-align: justify;  color: :#333333; font: 18px Arial, sans-serif; line-height: 30px; -webkit-text-size-adjust:none;">'+(block.desc1?block.desc1:"")+"</span></td></tr>":'<tr width="100%" style="max-width:900px;"><td colspan="2" style="padding: 5px"><span style="text-align: justify;  color: :#333333; font: 18px Arial, sans-serif; line-height: 30px; -webkit-text-size-adjust:none;">'+block.desc+"</span></td></tr>"),block.imgs&&block.imgs.length)for(var i=0,l=block.imgs.length;i<l;i+=2){s+="<tr>";var link1;if(block.imgs[i].link?link1=block.imgs[i].link.indexOf("http")<0?global.get("store").val.link+block.imgs[i].link:block.imgs[i].link:block.imgs[i].url&&(link1=getLink(block.type,block.imgs[i].url)),s+='<td style="padding: 5px; text-align: center;vertical-align: top">',link1&&(s+='<a href="'+link1+'">'),s+='<img alt="" style="width: 100%; display: block" src="'+photoHostForFactory+"/"+block.imgs[i].img+'">',block.imgs[i].name&&(s+='<span style="font-weight: 700; color: #666666; font: 18px Arial, sans-serif; line-height: 30px; -webkit-text-size-adjust:none;">'+block.imgs[i].name+"</span>"),link1&&(s+="</a>"),s+="</td>",block.imgs[i+1]){var link2;block.imgs[i+1].link?block.imgs[i].link.indexOf("http")<0?link2=global.get("store").val.link+block.imgs[i+1].link:block.imgs[i+1].link&&(link2=block.imgs[i+1].link):link1=getLink(block.type,block.imgs[i+1].url),s+='<td style="padding: 5px; text-align: center;vertical-align: top">',link2&&(s+='<a href="'+link2+'">'),s+='<img alt="" style="width: 100%; display: block" src="'+photoHostForFactory+"/"+block.imgs[i+1].img+'">',block.imgs[i+1].name&&(s+='<span style="font-weight: 700; color: #666666; font: 18px Arial, sans-serif; line-height: 30px; -webkit-text-size-adjust:none;">'+block.imgs[i+1].name+"</span>"),link2&&(s+="</a>"),s+="</td>"}else s+='<td style="padding: 5px; text-align: center;vertical-align: top"></td>';s+="</tr>"}}),s+="</table>",s+='<table width="900px" cellpadding="0" cellspacing="0" style="color: #333333;border-collapse:collapse; border:none;table-layout: fixed; padding: 0;margin: 0" border="0"><tr><td border="0" colspan="2" style="border:none; border-top:#cccccc 5px solid;"></td></tr><tr><td align="right" style="vertical-align: top"><span style="font-family:Tahoma; font-size:12px; color:#404040;">',global.get("store").val.sn)for(var key in global.get("store").val.sn)global.get("store").val.sn[key].is&&(s+='<a href="'+global.get("store").val.sn[key].link+'"><img style="width: 24px; height: 24px;margin: 15px 5px" src="'+global.get("store").val.link+"/views/template/img/icon/sn_grey/"+key+'.png"></a>');return s+='</span><td align="right"><span style="font-family:Tahoma; font-size:14px; color:#404040;">',global.get("store").val.footer&&global.get("store").val.footer.text&&(s+=global.get("store").val.footer.text),s+="</span></td></tr></table>"}function emailBonus(stuffs){var item,s='<table width="100%" cellpadding="0" cellspacing="0" style="max-width:600px;color: #333333;border-collapse:collapse; border:none;table-layout: fixed; padding: 0;margin: 0" border="0"><tr width="100%" style="max-width:600px;"><td style="text-align: center; padding: 5px"><img alt="посмотреть на сайте" style="width: 100px;" src="'+photoHostForFactory+"/"+global.get("store").val.logo+'"></td></tr><tr width="100%"><td><h2 style="font-weight: 500; letter-spacing: 2px; text-transform: uppercase; text-align: center; color: #333333; font-family:  Arial, sans-serif; line-height: 30px; -webkit-text-size-adjust:none;">бонусы</h2></td></tr>';if(s+="</table>",stuffs.forEach(function(stuff){if(item=stuff,item.imgs&&item.imgs.length){s+='<table class="table-mobile" width="100%" cellpadding="0" cellspacing="0" style="max-width:600px;color: #333333; border-collapse:collapse; border:none;table-layout: fixed; padding: 0;margin: 0" border="0">';for(var i=0,l=item.imgs.length;i<l;i++)item.imgs[i].name&&(s+='<tr width="100%" style="max-width:600px;"><td style=" padding: 5px"><p style="color: #333333; font: 16px Arial, sans-serif; line-height: 30px; -webkit-text-size-adjust:none;">'+item.imgs[i].name+"</p></td></tr>"),s+='<tr><td style="padding: 5px;"><img alt="бонусный купон"  style="width: 100%; display: block"   src="'+photoHostForFactory+"/"+item.imgs[i].img+'"></td>',s+="</tr>",item.imgs[i].desc&&(s+='<tr width="100%" style="max-width:600px;"><td style=" padding: 5px"><p style="color: #333333; font: 16px Arial, sans-serif; line-height: 30px; -webkit-text-size-adjust:none;">'+item.imgs[i].desc+"</p></td></tr>");s+="</table>"}}),s+='<table width="600px" cellpadding="0" cellspacing="0" style="color: #333333;border-collapse:collapse; border:none;table-layout: fixed; padding: 0;margin: 0" border="0"><tr><td border="0" colspan="2" style="border:none; border-top:#cccccc 5px solid;"></td></tr><tr><td align="left" style="vertical-align: top"><span style="font-family:Tahoma; font-size:12px; color:#404040;">',global.get("store").val.sn)for(var key in global.get("store").val.sn)global.get("store").val.sn[key].is&&(s+='<a href="'+global.get("store").val.sn[key].link+'"><img style="width: 24px; height: 24px;margin: 15px 5px" src="'+global.get("store").val.link+"/views/template/img/icon/sn_natur/"+key+'.png"></a>');return s+='</span><td align="right"><span style="font-family:Tahoma; font-size:16px; color:#404040;">',global.get("store").val.footer&&global.get("store").val.footer.text&&(s+=global.get("store").val.footer.text),'<!DOCTYPE html><html><head><meta charset="UTF-8"></head><body><div>'+(s+="</span></td></tr></table>")+"</div></html>"}function orderNote(order){var s="";return s+='<h3 class="order-name">'+global.get("langOrder").val.order+" № "+order.num+"</h3> "+global.get("langOrder").val.from+" "+moment(order.date).format("lll"),s+="<p>"+global.get("langOrder").val.sum+" "+order.paySum.toFixed(2)+" "+order.currency+"</p>"}function dateTimeNote(entry){var s="";return s+='<h3 class="order-name">'+global.get("langOrder").val.dateTime+"</h3> "+global.get("langOrder").val.onn+" "+entry.dateForNote,s+="<p>"+global.get("store").val.texts.masterName[global.get("store").val.lang]+" - "+entry.masterName+"</p>",s+="<p>"+entry.service.name+"</p>"}function dateTimeCancelNote(entry){var s="";return s+='<h3 class="order-name">'+global.get("langOrder").val.dateTime+'<span style="color:red"> '+global.get("langOrder").val.removed+"</span></h3> "+global.get("langOrder").val.onn+" "+entry.dateForNote,s+="<p>"+global.get("store").val.texts.masterName[global.get("store").val.lang]+" - "+entry.masterName+"</p>",s+="<p>"+entry.service.name+"</p>",s+="<p>"+entry.user.name+"- "+entry.user.phone+"</p>"}function order(order,invoice,commentPrint){var lang=global.get("store").val.lang,texts=global.get("store").val.texts,user=order.profile&&order.profile.admin?order.profile.admin:order.profile.fio;user||(user=order.user.name);var orderMailText=texts.orderMailText&&texts.orderMailText[lang]?texts.orderMailText[lang]:"";order.profile&&order.profile.admin&&(orderMailText="");var name=global.get("langOrder").val.order+" № "+order.num+"<small> "+global.get("langOrder").val.from+" "+moment(order.date).format("lll")+"</small>",status=global.get("langOrder").val.entered.toUpperCase();2==order.status?status=global.get("langOrder").val.accepted.toUpperCase():3==order.status?status=global.get("langOrder").val.statuspaid.toUpperCase():4==order.status?status=global.get("langOrder").val.statussent.toUpperCase():5==order.status&&(status=global.get("langOrder").val.statusdelivered.toUpperCase()),user=global.get("langOrder").val.hello+", "+user+"!";var s=getHeader(name);s+='<table width="900px" cellpadding="0" cellspacing="0" style="max-width:900px;color: #333333;border-collapse:collapse; border:none;table-layout: fixed; padding: 0;margin: 0" border="0"><tr  width="100%"><td colspan="2" style="padding: 0 20px;"><h3 style="font-size: 24px">'+user+"</h3></td></tr>",1==order.status&&(s+='<tr  width="100%"><td colspan="2" style="padding: 0 20px"><p>'+orderMailText+"</p></td></tr>"),s+='<tr style="max-width:900px;"><td width="50%" style="max-width:900px;padding: 10px 20px;font-size: 16px;vertical-align: top"><h4 style="font-weight: bold">'+status+'</h4><h4 style="font-weight: bold">'+global.get("langOrder").val.order.toUpperCase()+" № "+order.num+'</h4><p style="margin-bottom: 30px">'+global.get("langOrder").val.from+" "+moment(order.date).format("lll")+"</p>",commentPrint&&order.comment&&(s+='<div><h4 style="font-weight: bold">'+global.get("langOrder").val.comments+"</h4><p>"+order.comment+"</p></div>"),invoice&&order.payInfo&&(s+='<h4 style="font-weight: bold">'+global.get("langOrder").val.forpayment+"</h4>",s+="<p>"+order.payInfo+"</p>"),invoice&&order.checkOutLiqpayHtmlIs&&(s+="<p>"+order.checkOutLiqpayHtml+"</p>"),s+="</td>",s+='<td style=" padding: 10px 20px; font-size: 16px;vertical-align: top;">',s+='<h4 style="font-weight: bold">'+global.get("langOrder").val.customerdata+"</h4>",s+="<p> e-mail - "+order.user.email+"</p>",order.profile.fio&&(s+="<p> "+global.get("langOrder").val.name+"  - "+order.profile.fio+"</p>"),order.profile.phone&&(s+="<p> "+global.get("langOrder").val.phone+" - "+order.profile.phone+"</p>"),order.profile.city&&(s+="<p> "+global.get("langOrder").val.city+"  - "+order.profile.city+"</p></div>"),s+="</td></tr></table>",s+='<table style="margin: 20px" width="860px" cellspacing="0" cellpadding="5" border="1px">',s+='<thead><tr><th style="padding: 10px">#</th><th style="padding: 10px">'+global.get("langOrder").val.title+'</th><th class="text-center" style="padding: 10px; text-align: center">'+global.get("langOrder").val.species+'</th><th class="text-center" style="padding: 10px; text-align: center">'+global.get("langOrder").val.price+"</th>",s+='<th class="text-center" style="padding: 10px; text-align: center">'+global.get("langOrder").val.quantity+'</th><th class="text-center" style="padding: 10px; text-align: center">'+global.get("langOrder").val.sum+"</th></tr></thead>",s+="<tbody>";for(var cart=order.cart.stuffs,j=0,lj=cart.length;j<lj;j++){var good=cart[j];s+='<tr><td style="padding: 10px">'+(j+1)+'</td><td style="padding: 10px"> '+good.name+" "+(good.artikul?good.artikul:"")+'</td><td class="text-center" style="padding: 10px; text-align: center">'+(good.sortName?good.sortName:"")+'</td><td class="text-center" style="padding: 10px; text-align: center">'+(order.kurs*good.cena).toFixed(2)+" "+order.currency+'</td><td class="text-center" style="padding: 10px; text-align: center">'+good.quantity+'</td><td class="text-center">'+(order.kurs*good.sum).toFixed(2)+" "+order.currency+"</td></tr>"}s+="</tbody>",s+='<tbody class="cart-item-total">',s+='<tr><th colspan="4" style="padding: 10px">'+global.get("langOrder").val.sum+'</th><th class="text-center" style="padding: 10px; text-align: center">'+order.getTotalQuantity()+'</th><th style="padding: 10px; text-align: center" class="text-center">'+(order.kurs*(order.sum0?order.sum0:order.sum)).toFixed(2)+" "+order.currency+"</th></tr>",order.discount&&(s+='<tr><th colspan="4" style="padding: 10px">'+global.get("langOrder").val.withdiscount+"</th>",s+=order.sum<order.sum0?'<th class="text-center"  style="padding: 10px; text-align: center">'+Math.round(100*(1-order.sum/order.sum0))+"%</th>":'<th class="text-center" style="padding: 10px; text-align: center"></th>',s+='<th class="text-center"  style="padding: 10px; text-align: center">'+(order.kurs*order.sum).toFixed(2)+" "+order.currency+"</th></tr>"),order.coupon&&order.coupon._id&&(s+='<tr><th colspan="4" style="padding: 10px">'+global.get("langOrder").val.basedcoupon+'</th><th></th><th class="text-center"  style="padding: 10px; text-align: center">'+(order.kurs*order.getCouponSum()).toFixed(2)+" "+order.currency+"</th></tr>");order.getTotalDiscount();return order.shipCost&&(s+='<tr><th colspan="4">'+global.get("langOrder").val.delivery+'</th><th></th><th class="text-center" style="padding: 10px; text-align: center">'+order.shipCost.toFixed(2)+" "+order.currency+"</th></tr>"),order.totalPay&&(s+='<tr><th colspan="4">'+global.get("langOrder").val.paid+'</th><th></th><th class="text-center" style="padding: 10px; text-align: center">'+order.totalPay.toFixed(2)+" "+order.currency+"</th></tr>"),order.paySum!=order.getCouponSum()&&(s+='<tr><th colspan="4">'+global.get("langOrder").val.totaltopay+'</th><th></th><th class="text-center" style="padding: 10px; text-align: center">'+order.paySum.toFixed(2)+" "+order.currency+"</th></tr>"),s+="</tbody></table></div></div></div>",'<!DOCTYPE html><html><head><link rel="stylesheet" type="text/css" href="http://gmall.io/bower_components/bootstrap/dist/css/bootstrap.css" /></head><body onload="window.print()"><div class="reward-body">'+(s+=getFooter())+"</div></html>"}function orderShipInfo(order){var shipDetail=order.shipDetail,name=(global.get("store").val.lang,global.get("store").val.texts,global.get("langOrder").val.order+" № "+order.num+"<small> "+global.get("langOrder").val.from+" "+moment(order.date).format("lll")+"</small>"),user=global.get("user").val.profile.fio||global.get("user").val.name,status=global.get("langOrder").val.entered.toUpperCase();2==order.status?status=global.get("langOrder").val.accepted.toUpperCase():3==order.status?status=global.get("langOrder").val.statuspaid.toUpperCase():4==order.status?status=global.get("langOrder").val.statussent.toUpperCase():5==order.status&&(status=global.get("langOrder").val.statusdelivered.toUpperCase()),user=global.get("langOrder").val.hello+", "+user+"!";var s=getHeader(name);return s+='<table width="900px" cellpadding="0" cellspacing="0" style="max-width:900px;color: #333333;border-collapse:collapse; border:none;table-layout: fixed; padding: 0;margin: 0" border="0"><tr  width="100%"><td colspan="2" style="padding: 20px;"><h3 style="font-size: 24px">'+user+"</h3></td></tr></table>",s+='<table width="900px" cellpadding="0" cellspacing="0" style="max-width:900px;color: #333333;border-collapse:collapse; border:none;table-layout: fixed; padding: 0;margin: 0" border="0"><tr style="max-width:900px;"><td width="50%" style="max-width:900px;padding: 10px 20px;font-size: 16px;vertical-align: top"><h4 style="font-weight: bold">'+global.get("langOrder").val.order.toUpperCase()+" № "+order.num+"</h4><p>"+global.get("langOrder").val.from+" "+moment(order.date).format("lll")+'</p><h4 style="font-weight: bold;margin-bottom: 30px">'+status+'</h4><h4 style="font-weight: bold">'+global.get("langOrder").val.aboutdelivery+"</h4></td></tr></table>",shipDetail&&shipDetail.length?(s+='<table style="margin: 20px" width="860px" cellspacing="0" cellpadding="5" border="1px">',s+='<thead><tr><th class="text-center"  style="padding: 10px; text-align: center">'+global.get("langOrder").val.title+'</th><th class="text-center"  style="padding: 10px; text-align: center">'+global.get("langOrder").val.where+'</th><th class="text-center"  style="padding: 10px; text-align: center">'+global.get("langOrder").val.waybill+'</th><th class="text-center"  style="padding: 10px; text-align: center">'+global.get("langOrder").val.date+'</th><th class="text-center" style="padding: 10px; text-align: center">'+global.get("langOrder").val.sum+"</th>",shipDetail.forEach(function(ship){s+='<tr><td style="padding: 10px">',ship.stuffs.forEach(function(stuff){s+='<div style="width:80%;float:left">'+stuff.name+'</div><div style="float:left">'+stuff.qty+(stuff.unitOfMeasure?" "+stuff.unitOfMeasure:"")+'</div><div style="clear: both"></div><hr/>'}),s+=ship.qty,s+='</td><td style="padding: 10px; vertical-align: top">'+(ship.info||"")+"</td>",s+='<td style="padding: 10px; vertical-align: top">'+(ship.ttn||"")+"</td>",s+='<td style="padding: 10px; vertical-align: top">'+moment(ship.date).format("LLL")+"</td>",s+='<td style="padding: 10px; vertical-align: top">'+(ship.sum||0).toFixed(2)+"&nbsp;"+order.currency+"</td></tr>"}),s+="</table></br></br>"):s+="<h1>"+global.get("langOrder").val.infisnot+"</h1>",'<!DOCTYPE html><html><head><link rel="stylesheet" type="text/css" href="http://gmall.io/bower_components/bootstrap/dist/css/bootstrap.css" /></head><body onload="window.print()"><div class="reward-body">'+(s+=getFooter())+"</div></html>"}function shipInfoNote(order){var s="";return s+="<h3>"+global.get("langOrder").val.order+" № "+order.num+"</h3><br/> "+global.get("langOrder").val.from+" "+moment(order.date).format("lll"),order.user.profile&&(s+=order.user.profile.fio?"<p>"+order.user.profile.fio+"</p>":"<p>"+order.user.name+"</p>",order.user.profile.phone&&(s+="<p>"+order.user.profile.phone+"</p>")),s+="<p>"+global.get("langOrder").val.totaltopay+" <strong>"+order.paySum.toFixed(2)+" </strong>"+order.currency+"</p>",s+="<p>"+global.get("langOrder").val.sentshipinfo+"</p>"}function shipInfo(order,ship){if(ship.ttn&&ship.info){var s="<h3>"+global.get("langOrder").val.aboutdelivery+" </h3>";return global.get("langOrder").val.onawarrant,order.num,global.get("langOrder").val.from,moment(order.date).format("lll"),s+="<strong>"+global.get("langOrder").val.waybill+" - "+ship.ttn||"</strong> "+global.get("langOrder").val.from+" "+moment(ship.date).format("LL")+"</p>",ship.info&&(s+="<p>"+ship.info.substring(0,250)+"</p>"),ship.sum&&(s+="<strong>"+ship.sum.toFixed(2)+" "+order.currency+"</strong>"),ship.stuffs&&ship.stuffs.length&&(s+="<strong>  "+ship.stuffs.length+" ед.</strong>"),s}}function payInfo(order,pay){if(pay.sum){var s="<h3>"+global.get("langOrder").val.makepayment+" </h3>";return s+="<p>"+global.get("langOrder").val.onawarrant+" №"+order.num+"<br> "+global.get("langOrder").val.from+" "+moment(order.date).format("lll")+"</p>",s+="<p><strong>"+pay.sum.toFixed(2)+" "+order.currency+"</strong></p> "+moment(pay.date).format("LL"),pay.info&&(s+="<p>"+pay.info.substring(0,150)+"</p>"),s}}function acceptedInfo(order){var s="<h3>"+global.get("langOrder").val.byorders+" №"+order.num+"</h3>";return s+=" "+global.get("langOrder").val.from+" "+moment(order.date).format("lll")+".",order.user.profile&&(s+=order.user.profile.fio?"<p>"+order.user.profile.fio+"</p>":"<p>"+order.user.name+"</p>",order.user.profile.phone&&(s+="<p>"+order.user.profile.phone+"</p>")),s+="<p><strong>"+global.get("langOrder").val.accepted+" </strong></p>"}function invoiceInfo(order){var s="";return s+="<h3>"+global.get("langOrder").val.order+" № "+order.num+"</h3><br/> "+global.get("langOrder").val.from+" "+moment(order.date).format("lll"),order.user.profile&&(s+=order.user.profile.fio?"<p>"+order.user.profile.fio+"</p>":"<p>"+order.user.name+"</p>",order.user.profile.phone&&(s+="<p>"+order.user.profile.phone+"</p>")),s+="<p>"+global.get("langOrder").val.totaltopay+" <strong>"+order.paySum.toFixed(2)+" </strong>"+order.currency+"</p>",s+="<p>"+global.get("langOrder").val.sentthepost+"</p>"}function call(number){var s="";return s+="<h3>"+number+"</h3>",s+="<p>"+global.get("langOrder").val.requestacallback+"</p>",s+="<p>"+moment().format("LLLL")+"</p>"}if(void 0===photoHost)var photoHost;var photoHostForFactory;return $timeout(function(){photoHostForFactory=photoHost?photoHost:global.get("store").val.link},1e3),{empty:empty,order:order,orderNote:orderNote,dateTimeNote:dateTimeNote,shipInfo:shipInfo,payInfo:payInfo,invoiceInfo:invoiceInfo,acceptedInfo:acceptedInfo,orderShipInfo:orderShipInfo,call:call,emailFromNews:emailFromNews,emailBonus:emailBonus,shipInfoNote:shipInfoNote,dateTimeCancelNote:dateTimeCancelNote}}]),function(){function papsService($resource,$uibModal,$q){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return console.log("XHR Failed for getPaps."+error),$q.reject(error)}return Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete).catch(getListFailed)}function getItem(id){function getItemComplete(response){return response}function getItemFailed(error){return $q.reject(error)}return Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}var Items=$resource("/api/collections/Paps/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,save:Items.save,delete:Items.delete,query:Items.query,get:Items.get}}angular.module("gmall.services").service("Paps",papsService),papsService.$inject=["$resource","$uibModal","$q"]}(),angular.module("gmall.services").service("$fileUpload",["$http","$uibModal","$q",function($http,$uibModal,$q){this.uploadFileToUrl=function(file,uploadUrl,id,params,type){var fd=new FormData;if(fd.append("file",file),fd.append("id",id),params&&"object"==typeof params)for(var key in params)fd.append(key,params[key]);var preffix=photoUpload;switch(type){case"user":preffix=userHost}return $http.post(preffix+uploadUrl,fd,{withCredentials:!0,transformRequest:angular.identity,headers:{"Content-Type":void 0}})},this.showFile=function(block,field){return $uibModal.open({animation:!0,templateUrl:"components/loadImage/showImgInModal.html",controllerAs:"$ctrl",controller:function($uibModalInstance,block,field){function ok(item){$uibModalInstance.close()}function cancel(){$uibModalInstance.dismiss()}var self=this;self.item=block,console.log(self.item),self.ok=ok,self.cancel=cancel},resolve:{block:function(){return block},field:function(){return field}}}).result},this.fileUpload=function(uploadUrl,field,itemUrl,itemId,index){return $uibModal.open({animation:!0,templateUrl:function(){return field&&"video"==field?"components/loadImage/loadVideoModal.html":"components/loadImage/loadImageModal.html"},controller:function(uploadUrl,field,itemUrl,itemId,index,$uibModalInstance,$scope,$timeout,exception){function handleImage(files){function closureI(picReader,file){picReader.addEventListener("load",function(event){var picFile=event.target;file.imgSrc=picFile.result;for(var is,j=0;j<self.files.length;j++)if(self.files[j].name==file.name){is=!0;break}is||$timeout(function(){self.files.push(file)},100)})}$scope.$apply(function(){files.length?self.hasFiles=!0:self.hasFiles=!1;for(var i=0;i<files.length;i++){var file=files[i],picReader=new FileReader;closureI(picReader,file),picReader.readAsDataURL(files[i])}})}function uploadFiles(){function handlePhoto(file){console.log(uploadUrl,self.fileDimension);var url=self.urlArr[0]+self.fileDimension,fd=new FormData;fd.append("file",file),itemUrl&&fd.append("url",itemUrl),field&&fd.append("nameImg",field),itemId&&fd.append("id",itemId),index&&fd.append("index",index);var preffix=photoUpload;return console.log(preffix+url+"?"+self.suffix),$http.post(preffix+url+"?"+self.suffix,fd,{withCredentials:!0,transformRequest:angular.identity,headers:{"Content-Type":void 0}})}if(!self.isUploading){self.isUploading=!0;var acts=[];return self.files.forEach(function(file,i){"imgs"!=field&&"gallery"!=field&&i||i>20||acts.push(handlePhoto(file))}),$q.all(acts).then(function(res){$uibModalInstance.close(res)}).catch(function(err){exception.catcher("load file")(err),console.log(err)})}}var self=this;self.files=[],self.hasFiles=!1,self.urlArr=uploadUrl.split("?"),self.suffix=self.urlArr[1]?self.urlArr[1]:"",self.dimen=self.urlArr[0].split("/"),self.fileDimension="","video"!=field&&(self.fileDimension=self.dimen[self.dimen.length-1].slice(10)),self.uploadFiles=uploadFiles;var $form,$input;$timeout(function(){($form=$("#uploadImgForm"),$input=$form.find("#inputFilesUpload"),$input.bind("change",changedHandler),$form.bind("reset",resetHandler),function(){var div=document.createElement("div");return("draggable"in div||"ondragstart"in div&&"ondrop"in div)&&"FormData"in window&&"FileReader"in window}())&&($form.addClass("has-advanced-upload"),$form.on("drag dragstart dragend dragover dragenter dragleave drop",function(e){e.preventDefault(),e.stopPropagation()}).on("dragover dragenter",function(){$form.addClass("is-dragover")}).on("dragleave dragend drop",function(){$form.removeClass("is-dragover")}).on("drop",function(e){handleImage(e.originalEvent.dataTransfer.files)}))},300);var changedHandler=function(event){window.File&&window.FileList&&window.FileReader?handleImage(event.target.files):console.log("Your browser does not support File API")},resetHandler=function(){$scope.$apply(function(){self.files.length=0,self.hasFiles=!1,self.isUploading=!1})};$scope.$watchCollection("files",function(){0===self.files.length&&$input&&$input.val(null)}),$scope.$on("$destroy",function(){$input.unbind("change",changedHandler),$form.unbind("reset",resetHandler)}),$scope.$watch("fileSrc",function(n,o){n&&n.indexOf("base64")<0&&(oldImg=n)}),$scope.$watch("myFile",function(n,o){$scope.noLoad=!n}),$scope.clickFile=function(){var id="#imagefile"+$scope.now;angular.element(id).trigger("click")},$scope.uploadImg=function(){if(scope.itemId){var file=scope.myFile;scope.noChange=!0;var params={index:scope.index,nameImg:scope.nameImg};scope.itemUrl&&"undefined"!=scope.itemUrl&&(params.url=scope.itemUrl),scope.dimen[scope.dimen.length-1]=scope.dimen[scope.dimen.length-1].slice(0,10);var url=scope.dimen.join("/");url+=scope.$ctrl.fileDimension,$fileUpload.uploadFileToUrl(file,url,scope.itemId,params).then(function(res){scope.myFile=null,scope.noChange=!1,scope.noLoad=!0,scope.fileSrc=null;var o={_id:scope.itemId};$timeout(function(){if("imgs"==scope.nameImg)scope.replaceIndex?(scope.gallery[scope.replaceIndex].img=res.data.imgs[0].img,oldImg&&(console.log("deleting"),Photo.deleteFiles("Stuff",[oldImg]))):scope.gallery.push(res.data.imgs[0]),scope.nameImgForSave?o[scope.nameImgForSave]=scope.gallery:o[scope.nameImg]=scope.gallery;else if("gallery"==scope.nameImg)scope.gallery.push(res.data.gallery[0]),o[scope.nameImg]=scope.gallery;else{if(oldImg){var small=oldImg.split("/");small[small.length-1]=small[small.length-1].replace("img","small"),small=small.join("/"),console.log("deleting"),Photo.deleteFiles("Stuff",[oldImg,small])}oldImg=res.data.img?res.data.img:res.data[scope.nameImg],scope.fileSrc=res.data.img?res.data.img:res.data[scope.nameImg],o[scope.nameImg]=res.data.img?res.data.img:res.data[scope.nameImg]}var field=scope.nameImgForSave?scope.nameImgForSave:scope.nameImg;res.data["small"+scope.nameImg]&&(field+=" small"+scope.nameImg,o["small"+scope.nameImg]=res.data["small"+scope.nameImg]),scope.Item.save({update:field},o)},10)}).catch(function(err){err&&exception.catcher("upload video")(err)})}},
self.ok=function(){console.log(self.item),$uibModalInstance.close(self.item)},self.cancel=function(){$uibModalInstance.dismiss()}},controllerAs:"$ctrl",size:"lg",resolve:{uploadUrl:function(){return uploadUrl},field:function(){return field},itemUrl:function(){return itemUrl},itemId:function(){return itemId},index:function(){return index}}}).result}}]).factory("Photo",photoFactory),photoFactory.$inject=["$http"],function(){function menuSectionHorizontal(){return{scope:{},restrict:"AE",bindToController:!0,controller:directiveMenu,controllerAs:"$ctrl",templateUrl:"components/menu/menuSectionHorizontel.html"}}function menuSectionHorizontalPug(){return{scope:{},restrict:"AE",bindToController:!0,controller:directiveMenu,controllerAs:"$ctrl"}}function menuBrandsHorizontalPug(){return{scope:{},restrict:"AE",bindToController:!0,controller:directiveMenuBrands,controllerAs:"$ctrl"}}function menuSectionVirtical(){return{scope:{},restrict:"AE",bindToController:!0,controller:directiveMenuV,controllerAs:"$ctrl",templateUrl:"components/menu/menuSectionVertical.html"}}function menuSectionVirticalPug(){return{scope:{},restrict:"AE",bindToController:!0,controller:directiveMenuV,controllerAs:"$ctrl"}}function menuBrandsVirticalPug(){return{scope:{},restrict:"AE",bindToController:!0,controller:directiveMenuVBrands,controllerAs:"$ctrl"}}function dropdownOnHover(){return{scope:{},restrict:"AE",bindToController:!0,link:directiveDropdownOnHover,controllerAs:"$ctrl"}}function directiveMenu(Sections,$state,$q,global,$rootScope,$timeout){function closeRest(){for(var i=0,l=innerDivsBrand.length;i<l;i++)innerDivsBrand[i].hide()}function bindHoverLi(li,ii){self.clickMenu?li.click(function(e){if($(e.target).hasClass("sibsection"))li.find(".section-in-section").each(function(i,li2){$(li2).hover(function(){1==self.dropDownCatalog?$(li2).find(".sub-menu").stop(!0,!1,!0).slideDown("slow"):2==self.dropDownCatalog?$(li2).find(".sub-menu").stop(!0,!1,!0).slideDown("fast"):$(li2).find(".sub-menu").stop(!0,!1,!0).show()},function(){1==self.dropDownCatalog?$(li2).find(".sub-menu").stop(!0,!1,!0).hide():(self.dropDownCatalog,$(li2).find(".sub-menu").stop(!0,!1,!0).hide())})});else{closeRest();for(var i=0,l=sectionElements.length;i<l;i++)sectionElements[i][0].id==li[0].id?1==self.dropDownCatalog?li.innerDiv.stop(!0,!1,!0).slideToggle("slow"):2==self.dropDownCatalog?li.innerDiv.stop(!0,!1,!0).slideToggle("fast"):li.innerDiv.stop(!0,!1,!0).toggle():1==self.dropDownCatalog?sectionElements[i].innerDiv.slideUp("slow"):2==self.dropDownCatalog?sectionElements[i].innerDiv.slideUp("fast"):sectionElements[i].innerDiv.hide()}}):(li.hover(function(){1==self.dropDownCatalog?li.innerDiv.stop(!0,!1,!0).slideDown("slow"):2==self.dropDownCatalog?li.innerDiv.stop(!0,!1,!0).slideDown("fast"):li.innerDiv.stop(!0,!1,!0).show()},function(){1==self.dropDownCatalog?li.innerDiv.stop(!0,!1,!0).slideUp("slow"):2==self.dropDownCatalog?li.innerDiv.stop(!0,!1,!0).slideUp("fast"):li.innerDiv.stop(!0,!1,!0).hide()}),li.find(".section-in-section").each(function(i,li2){$(li2).hover(function(){1==self.dropDownCatalog?$(li2).find(".sub-menu").stop(!0,!1,!0).slideDown("slow"):2==self.dropDownCatalog?$(li2).find(".sub-menu").stop(!0,!1,!0).slideDown("fast"):$(li2).find(".sub-menu").stop(!0,!1,!0).show()},function(){1==self.dropDownCatalog?$(li2).find(".sub-menu").stop(!0,!1,!0).hide():(self.dropDownCatalog,$(li2).find(".sub-menu").stop(!0,!1,!0).hide())})}))}var self=this;self.clickMenu=global.get("store").val.template.clickMenu,self.dropDownCatalog=global.get("store").val.template.dropDownCatalog,self.global=global;var sectionElements=[],innerDivs=[],innerDivsBrand=[];!function(){$q.when().then(function(){return Sections.getSections()}).then(function(sections){global.get("brands").val.forEach(function(sec,i){var el=$("#s"+sec._id),innerDiv=$(el).find("#innerDivBrand"+sec._id);innerDivsBrand.push(innerDiv)}),self.sections=sections.filter(function(el){return!el.parent&&0===el.level}),setTimeout(function(){var w=$(window).width();self.sections.forEach(function(sec,i){var el=$("#s"+sec._id),elJS=document.getElementById("s"+sec._id);document.getElementById;var sec_element_offset=el.offset();if(sec_element_offset){var offsetLeft;elJS&&elJS.getBoundingClientRect&&(offsetLeft=pageXOffset+elJS.getBoundingClientRect().x),!offsetLeft&&elJS&&elJS.DOMRect&&(offsetLeft=pageXOffset+elJS.DOMRect.left,console.log("offsetLeft DOMRect",offsetLeft,sec_element_offset.left)),offsetLeft||(offsetLeft=sec_element_offset.left);var innerDiv=$("#innerDiv"+sec._id),container=innerDiv.find("div");container.find(".sub-menu"),el.innerDiv=innerDiv,innerDiv.css("left","-"+offsetLeft+"px"),bindHoverLi(el,i),sectionElements.push(el)}}),$(".innerDiv").width(w)},300)}).catch(function(err){console.log(err)})}(),$rootScope.$on("$stateChangeStart",function(ev){for(var i=0,l=innerDivs.length;i<l;i++)if(innerDivs[i][0]&&innerDivs[i].is(":hover")){sectionElements[i].unbind(),innerDivs[i].slideUp(function(){$timeout(function(){bindHoverLi(sectionElements[i],i)},700)});break}})}function directiveMenuV(Sections,$state,$q,global,$rootScope,$element){function bindHoverLi(li,ii){self.sections[ii]&&self.sections[ii].openCatalog||$(innerDivs[ii]).slideToggle(),console.log(li,ii,self.clickMenu),self.clickMenu?li.click(function(e){for(var i=0,l=innerDivs.length;i<l;i++)i==ii&&$(innerDivs[i]).stop(!0,!1,!0).slideToggle(300)}):li.hover(function(){$(innerDivs[ii]).stop(!0,!1,!0).slideToggle(300)})}var self=this;self.clickMenu=global.get("store").val.template.clickMenu,self.global=global;var sectionElements=[],innerDivs=[];!function(){$q.when().then(function(){return Sections.getSections()}).then(function(sections){self.sections=sections.filter(function(el){return!el.parent&&0===el.level&&!el.hideSection}),setTimeout(function(){self.sections.forEach(function(sec,i){var el=$("#s"+sec._id),innerDiv=el.children("div");innerDivs.push(innerDiv),bindHoverLi(el,i),sectionElements.push(el)});var innerUl=$element.find(".category-in-section");$(innerUl).each(function(i,section){var ul=$(section).find("ul");$(ul).slideToggle(),$(section).click(function(e){console.log("section",section),$(ul).stop(!0,!1,!0).slideToggle(300)})})},100)}).catch(function(err){console.log(err)})}()}function directiveMenuBrands(Sections,$state,$q,global,$rootScope,$timeout,$element){function closeRest(){for(var i=0,l=innerDivsSection.length;i<l;i++)innerDivsSection[i].hide()}function bindHoverLi(li,ii){self.clickMenu?li.click(function(e){closeRest();for(var i=0,l=sectionElements.length;i<l;i++)sectionElements[i][0].id==li[0].id?li.innerDiv.stop(!0,!1,!0).toggle():sectionElements[i].innerDiv.hide()}):li.hover(function(){li.innerDiv.stop(!0,!1,!0).show()},function(){li.innerDiv.stop(!0,!1,!0).hide()})}var self=this;self.clickMenu=global.get("store").val.template.clickMenu,self.global=global;var sectionElements=[],innerDivs=[],innerDivsSection=[];!function(){$q.when().then(function(){return Sections.getSections()}).then(function(sections){sections.forEach(function(sec,i){var el=$("#s"+sec._id),innerDiv=$(el).find("#innerDiv"+sec._id);innerDivsSection.push(innerDiv)}),self.brands=global.get("brands").val?global.get("brands").val:[],setTimeout(function(){var w=$(window).width(),index=0;self.brands.forEach(function(sec,i){if(sec.display){var el=$("#s"+sec._id),sec_element_offset=el.offset();if(sec_element_offset){var offsetLeft=sec_element_offset.left,innerDiv=$element.find("#innerDivBrand"+sec._id);el.innerDiv=innerDiv,innerDiv.css("left","-"+offsetLeft+"px"),bindHoverLi(el,index),sectionElements.push(el),index++}}}),$(".innerDiv").width(w)},100)}).catch(function(err){console.log(err)})}(),$rootScope.$on("$stateChangeStart",function(ev){for(var i=0,l=innerDivs.length;i<l;i++)if(innerDivs[i][0]&&innerDivs[i].is(":hover")){sectionElements[i].unbind(),innerDivs[i].slideUp(function(){$timeout(function(){bindHoverLi(sectionElements[i],i)},700)});break}})}function directiveMenuVBrands(Sections,$state,$q,global,$rootScope){function bindHoverLi(li,ii){$(innerDivs[ii]).slideToggle(),self.clickMenu?li.click(function(e){for(var i=0,l=innerDivs.length;i<l;i++)i==ii&&innerDivs[i].stop(!0,!1,!0).slideToggle(300)}):li.hover(function(){innerDivs[ii].stop(!0,!1,!0).slideToggle(300)})}var self=this;self.clickMenu=global.get("store").val.template.clickMenu,self.global=global;var sectionElements=[],innerDivs=[];!function(){self.brands=global.get("brands").val?global.get("brands").val:[],setTimeout(function(){var index=0;self.brands.forEach(function(sec,i){if(sec.display){var el=$("#s"+sec._id),innerDiv=el.children("div");innerDivs.push(innerDiv),bindHoverLi(el,index),sectionElements.push(el),index++}})},100)}()}function directiveDropdownOnHover(scope,element,arrts){function bindHover(){$(element).hover(function(){$(this).children("ul").stop(!0,!1,!0).slideToggle(200)})}!function(){$(element).children("ul").hide(),bindHover()}()}function slideMenuAfterScroll(global,$timeout,$rootScope){return{restrict:"A",link:function(scope,element,attrs){function scrollHandlerMenu1(){if(!menuHide||"home"==$rootScope.$state.current.name){var scrolled=window.pageYOffset||document.documentElement.scrollTop;scrolled>offset&&!done?(done=!0,$rootScope.$emit("hideMenu1AfterScroll"),$(element).css("top","-"+h+"px")):scrolled<offset&&done&&(done=!1,$rootScope.$emit("showMenu1AfterScroll"),$(element).css("top",0))}}function scrollHandlerMenu2(){if(!menuHide||"home"==$rootScope.$state.current.name){var scrolled=window.pageYOffset||document.documentElement.scrollTop;scrolled>offset&&!done?(done=!0,$(element).css("top",0)):scrolled<offset&&done&&(done=!1,$(element).css("top",h+"px"))}}function inverseNone(){logoInverse.css("display","none"),logo.css("display","block"),likesInverse.css("display","none"),likes.css("display","block"),cartInverse.css("display","none"),cart.css("display","block"),humbInverse.css("display","none"),humb.css("display","block")}function inverseBlock(){logo.css("display","none"),logoInverse.css("display","block"),likes.css("display","none"),likesInverse.css("display","block"),cart.css("display","none"),cartInverse.css("display","block"),humb.css("display","none"),humbInverse.css("display","block")}function listenScroll(){$(window).scroll(function(){if("home"==$rootScope.$state.current.name&&(!template.inverseColor.homePage||"home"==$rootScope.$state.current.name)){(window.pageYOffset||document.documentElement.scrollTop)>10?(element.addClass("inverseColor"),inverseBlock()):(element.removeClass("inverseColor"),inverseNone())}})}function listenBanner(){var el=document.getElementById("arrowDownDiv");if(el){var elOffsetY=$(el).offset().top;$(window).scroll(function(){if("home"==$rootScope.$state.current.name){var scrolled=window.pageYOffset||document.documentElement.scrollTop;$(el).height()+elOffsetY-10>scrolled?(element.removeClass("inverseColor"),inverseNone()):(element.addClass("inverseColor"),inverseBlock())}})}}var done,firstLook=!0,menu=attrs.slideMenuAfterScroll,menuHide=attrs.hideMenu,template=global.get("store").val.template,offset=199,h=$("#menu1-section").height();"menu2"==menu&&template.menu2.fixed&&template.menu2.is&&template.menu2.position,"menu1"==menu&&template.menu1.fixed&&"top"==template.menu1.position&&template.menu1.scrollSlide?$(window).scroll(scrollHandlerMenu1):"menu2"==menu&&template.menu1.fixed&&"top"==template.menu1.position&&"top"==template.menu2.position&&template.menu1.scrollSlide&&$(window).scroll(scrollHandlerMenu2);var logo,logoInverse,cart,cartInverse,humb,humbInverse,likes,likesInverse;template.inverseColor&&template.inverseColor.use&&(template.inverseColor.homePage&&function(){$rootScope.$on("$stateChangeSuccess",function(event,to,toParams,fromState,fromParams){var delay=0;firstLook&&(delay=500,firstLook=!1),$timeout(function(){"home"==to.name?(element.removeClass("inverseColor"),inverseNone()):(element.addClass("inverseColor"),inverseBlock())},delay)})}(),$timeout(function(){logo=$("#mainLogo"),logoInverse=$("#inverseLogo"),cart=$("#mainCart"),cartInverse=$("#inverseCart"),humb=$("#mainHumb"),humbInverse=$("#inverseHumb"),likes=$("#mainLikes"),likesInverse=$("#inverseLikes"),template.inverseColor.startScroll?listenScroll():template.inverseColor.firstBanner&&listenBanner()},300)),$rootScope.$on("$stateChangeSuccess",function(event,to,toParams,fromState,fromParams){menuHide&&("home"==to.name?($rootScope.$emit("showMenu1AfterScroll"),"menu1"==menu?$(element).css("top",0):$(element).css("top",h+"px")):($rootScope.$emit("hideMenu1AfterScroll"),"menu1"==menu?$(element).css("top","-"+h+"px"):$(element).css("top",0)))})}}}angular.module("gmall.directives").directive("menuSections",menuSectionHorizontal).directive("menuSectionsPug",menuSectionHorizontalPug).directive("menuBrandsPug",menuBrandsHorizontalPug).directive("menuSectionsVirtical",menuSectionVirtical).directive("menuSectionsVirticalPug",menuSectionVirticalPug).directive("menuBrandsVirticalPug",menuBrandsVirticalPug).directive("dropdownOnHover",dropdownOnHover).directive("slideMenuAfterScroll",slideMenuAfterScroll).directive("setFonAfterStartScroll",["$timeout","$state","$rootScope","global",function($timeout,$state,$rootScope,global){return{restrict:"A",link:function(scope,element,attr){var h1,h2,mainContentDiv=$("#mainContentDiv"),templ=global.get("store").val.template;$timeout(function(){h1=$("#menu1-section").outerHeight(),h2=$("#menu2-section").outerHeight(),h2&&(h1+=h2),global.get("store").val.template.menu1.hideMenuIfNotHome&&(h1=h2),h2=h1}),$(element).hover(function(){$rootScope.$emit("menuHoverIn")},function(){$rootScope.$emit("menuHoverOut")}),$rootScope.$on("menuHoverIn",function(){global.get("store").val.template.menu1.BGColorOnHover&&$(element).addClass("menuColor")}),$rootScope.$on("menuHoverOut",function(){global.get("store").val.template.menu1.BGColorOnHover&&!global.get("store").val.template.menu1.background&&window.pageYOffset<5&&"home"==$rootScope.$state.current.name&&$(element).removeClass("menuColor")}),$rootScope.$on("$stateChangeStart",function(event,to){"home"!=to.name?(templ.menu1.marginOther||$(element).addClass("menuColor"),templ.margin||$timeout(function(){"left"!=templ.menu1.position&&"right"!=templ.menu1.position&&!templ.menu1.marginOther&&templ.menu1.fixed&&mainContentDiv.css("margin-top",h1)})):(global.get("store").val.template.menu1.background||(global.get("store").val.template.menu1.BGColorOnHover?window.pageYOffset<5&&$(element).removeClass("menuColor"):$(element).removeClass("menuColor")),templ.margin||"left"!=templ.menu1.position&&"right"!=templ.menu1.position&&mainContentDiv.css("margin-top",0))});var is=!1;attr.setFonAfterStartScroll?$(element).addClass("menuColor"):global.get("store").val.template.menu1.BGColorOnHover&&$(window).scroll(function(){window.pageYOffset>5?is||(is=!0,$(element).addClass("menuColor")):"home"==$rootScope.$state.current.name&&(is=!1,$(element).removeClass("menuColor"))})}}}]).directive("setMenuColorClass",["$rootScope",function($rootScope){return{restrict:"A",link:function(scope,element,attr){console.log(element),$rootScope.$on("$stateChangeStart",function(event,to){"home"!=to.name?$(element).addClass("menuColor"):window.pageYOffset<5&&$(element).removeClass("menuColor")}),$rootScope.$on("menuHoverIn",function(){console.log("menuHoverIn",console.log(element)),$(element).addClass("menuColor")}),$rootScope.$on("menuHoverOut",function(){"home"==$rootScope.$state.current.name&&window.pageYOffset<5&&$(element).removeClass("menuColor")}),$(window).scroll(function(){"home"==$rootScope.$state.current.name&&(window.pageYOffset>5?$(element).addClass("menuColor"):$(element).removeClass("menuColor"))})}}}]).directive("marginMainContent22",function(global,$timeout){return{restrict:"A",link:function(scope,element,attrs){var mainContentDiv=$("#mainContentDiv"),templ=global.get("store").val.template;$timeout(function(){templ.margin&&"left"!=templ.menu1.position&&"right"!=templ.menu1.position&&$timeout(function(){var m1=$("#menu1-section"),h1=m1.height(),m2=$("#menu2-section");if(m2)var h2=m2.height();h2&&(h1+=h2),mainContentDiv.css("margin-top",h1)})},100)}}}).directive("marginMainContent",function($rootScope,$timeout,global){return{restrict:"A",link:function(scope,element,attrs){$rootScope.$on("$stateChangeSuccess",function(ev,to,toParams,from,fromParams){$timeout(function(){if(global.get("store").val.template.menu1.fixed){var h=$(document.body).find("#firstDiv").height(),vh=Math.max(document.documentElement.clientHeight,window.innerHeight||0),delta=vh-h;if(delta>30){var mt=$(element[0].querySelector("#mainContentDiv")).css("margin-top");mt=mt?parseInt(mt,10):0;var elH=element.height();element.css("min-height",elH+delta)}}},200)})}}}).directive("footer22",function($timeout,$rootScope){return{restrict:"E",link:function(scope,element){$rootScope.$on("$stateChangeStart",function(event,to,toParams,fromState,fromParams){element.css("position","static")}),$rootScope.$on("$stateChangeSuccess",function(ev,to,toParams,from,fromParams){$timeout(function(){})})}}}),directiveMenu.$inject=["Sections","$state","$q","global","$rootScope","$timeout"],directiveMenuV.$inject=["Sections","$state","$q","global","$rootScope","$element"],directiveMenuBrands.$inject=["Sections","$state","$q","global","$rootScope","$timeout","$element"],directiveMenuVBrands.$inject=["Sections","$state","$q","global","$rootScope"]}(),function(){function userService($resource,$uibModal,$q,Session,User,global,exception,$state,$window,$rootScope,$http,$auth,Account){function newUser(name,email,password){return name||(name=email.split("@")[0]),User.save({name:name,email:email,password:password,action:"subscribtion"}).$promise.then(function(user){if($rootScope.emit("CompleteRegistration"),global&&global.get("user")&&global.set("user",user),global.get("local")&&!global.get("local").val&&$window.ga&&$window.ga("send","event","registration","complete"),"cart"!=$state.current.name&&"couponDetail"!=$state.current.name){var states=$state.get();if(global.get("paps")&&states.some(function(state){return"thanksPage"==state.name})){var pap=global.get("paps").val.getOFA("action","subscribtion");pap&&pap.url&&$state.go("thanksPage",{url:pap.url})}}return user})}function newUserByPhone(name,phone){var email=phone+"@gmall.io",user={email:email,name:name,profile:{phone:phone,fio:name}};return $auth.signup(user).then(function(response){if(console.log(response),!(response&&response.data&&response.data.token))throw response;if("update"==response.data.token)throw null}).then(function(response){}).catch(function(err){err&&exception.catcher("new client")(err)})}function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return $q.reject(error)}return paginate||(paginate={}),Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete).catch(getListFailed)}function getItem(id,param){function getItemComplete(response){return response}function getItemFailed(error){return $q.reject(error)}return Items.get({_id:id,param:param}).$promise.then(getItemComplete).catch(getItemFailed)}function selectItem(query){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/user/modal/selectUser.html",controller:function($user,$uibModalInstance,query){var self=(angular.copy(query),this);self.items=[],self.name="";var paginate={page:0,rows:30,items:0};self.search=function(name){var q=angular.copy(query);name.length<3||(q?(q.$and||(q={$and:[query]}),q.$and.push({$or:[{name:name},{email:name},{"profile.fio":name}]})):q={$or:[{name:name},{email:name},{"profile.fio":name}]},$user.getList(paginate,q).then(function(res){self.items=res}))},self.selectItem=function(item){$uibModalInstance.close(item)},self.cancel=function(){$uibModalInstance.dismiss()}},controllerAs:"$ctrl",size:"lg",resolve:{query:function(){return query}}}).result.then(function(item){resolve(item)},function(){reject()})})}function selectOrCreat(){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/user/modal/selectOrCreate.html",controller:function($user,UserEntry,global,$uibModalInstance){function refreshUsers(str){str.length<3||searchUser(str)}function searchUser(str){if(isNumeric(str)){if(str.length>10)self.oldPhone=str.substring(0,10);else{for(var d=10-str.length,i=0;i<d;i++)str+="0";self.oldPhone=str}self.userName=""}else self.oldPhone=null,self.userName=str;self.users=[];var users=[],q={$or:[{name:str},{email:str},{"profile.fio":str},{"profile.phone":str}]},q1={$or:[{phone:str},{name:str},{email:str}]},acts=[];acts.push(get$user(q)),acts.push(getEntryUser(q1)),$q.all(acts).then(function(res){res[0]&&res[0].length&&res[0].forEach(function(item){item.type="user",users.push(item)}),res[1]&&res[1].length&&res[1].forEach(function(item){item.type="userEntry",users.push(item)}),self.users=users})}function get$user(q){return $user.getList(paginate,q)}function getEntryUser(q){return UserEntry.getList(paginate,q)}function addUser(){var user={name:self.userName,email:self.userEmail,phone:self.phoneCode.substring(1)+self.oldPhone.substring(0,10),type:"userEntry"};return $q.when().then(function(){return UserEntry.save(user).$promise}).then(function(res){user._id=res._id?res._id:res.id,self.addingUser=!1,self.userName="",self.user=user,self.oldPhone=""}).catch(function(err){err&&exception.catcher("новый клиент")(err)})}function clearUser(){self.user=null}function isNumeric(n){return!isNaN(parseFloat(n))&&isFinite(n)}var self=this;self.items=[],self.user="",self.oldPhone=null,self.userName="name",self.userEmail="",self.global=global,self.phoneCodes=global.get("store").val.phoneCodes?global.get("store").val.phoneCodes:[{code:"+38",country:"Украина"}],self.phoneCode=global.get("store").val.phoneCode?global.get("store").val.phoneCode.code:"+38";var paginate={page:0,rows:30,items:0};self.refreshUsers=refreshUsers,self.addUser=addUser,self.clearUser=clearUser;new RegExp(/^\d+$/);self.ok=function(){$uibModalInstance.close(self.user)},self.cancel=function(){$uibModalInstance.dismiss()}},controllerAs:"$ctrl",size:"lg"}).result.then(function(item){resolve(item)},function(){reject()})})}function saveProfile(user){return Items.save({update:"profile"},{_id:user._id,profile:user.profile}).$promise}function login(){return $q(function(resolve,reject){if(global.get("user")&&global.get("user").val&&global.get("user").val._id)return resolve();var modalInstance=$uibModal.open({animation:!0,templateUrl:"components/user/modal/login-sign.html",controller:loginCtrl2,controllerAs:"$ctrl",windowClass:"modalProject",backdropClass:"modalBackdropClass"});$rootScope.$emit("modalOpened"),modalInstance.result.then(function(item){$rootScope.$emit("modalClosed"),resolve(item)},function(){$rootScope.$emit("modalClosed"),reject()})})}function loginOnlyPhone(){return $q(function(resolve,reject){if(global.get("user")&&global.get("user").val&&global.get("user").val._id)return resolve();var modalInstance=$uibModal.open({animation:!0,templateUrl:"components/user/modal/login-sign.onlyPhone.html",controller:loginOnlyPhoneCtrl,controllerAs:"$ctrl",windowClass:"modalProject",backdropClass:"modalBackdropClass"});$rootScope.$emit("modalOpened"),modalInstance.result.then(function(item){$rootScope.$emit("modalClosed"),resolve(item)},function(){$rootScope.$emit("modalClosed"),reject()})})}function getInfo(service){return service=!1,service=service?"Service":"Good",$q(function(resolve,reject){var modalInstance=$uibModal.open({animation:!0,templateUrl:"components/user/modal/getInfo.html",controller:getInfoCtrl,controllerAs:"$ctrl",windowClass:"modalProject",backdropClass:"modalBackdropClass",resolve:{service:function(){return service}}});$rootScope.$emit("modalOpened"),modalInstance.result.then(function(item){$rootScope.$emit("modalClosed"),resolve(item)},function(){$rootScope.$emit("modalClosed"),reject()})})}function getInfoCtrl($uibModalInstance,exception,global,User,$q,$http,service,Account){function closeModal(){$q.when().then(function(){return self.user._id?Items.save({update:"profile"},{_id:self.user._id,profile:self.user.profile}).$promise:$http.post("/auth/signupOrder",self.user)}).then(function(response){if(response&&response.data&&response.data.token)return $auth.setToken(response),Account.getProfile();response&&response.data&&response.data._id&&(self.user._id=response.data._id)}).then(function(){global.get("user").val&&(self.user=global.get("user").val),$uibModalInstance.close(self.user)})}var self=this;self.service=service,self.global=global,self.user=global.get("user").val,self.user||(self.user={email:"",profile:{}}),self.ok=closeModal,self.cancel=function(){$uibModalInstance.dismiss()}}function getInfoBonus(){return $q(function(resolve,reject){var modalInstance=$uibModal.open({animation:!0,templateUrl:"components/user/modal/getInfoBonus.html",controller:getInfoBonusCtrl,controllerAs:"$ctrl",windowClass:"modalProject",backdropClass:"modalBackdropClass"});$rootScope.$emit("modalOpened"),modalInstance.result.then(function(item){$rootScope.$emit("modalClosed"),resolve(item)},function(){$rootScope.$emit("modalClosed"),reject()})})}function getInfoBonusCtrl($uibModalInstance,exception,global,User,$q,$http,Account,$auth){function closeModal(){$q.when().then(function(){return self.user._id?Items.save({update:"profile"},{_id:self.user._id,profile:self.user.profile}).$promise:$http.post("/auth/signupOrder",self.user)}).then(function(response){if(response&&response.data&&response.data.token)return $auth.setToken(response),Account.getProfile();response&&response.data&&response.data._id&&(self.user._id=response.data._id)}).then(function(){global.get("user").val&&(self.user=global.get("user").val),$uibModalInstance.close(self.user)})}var self=this;self.global=global,self.user=global.get("user").val,self.formData=global.get("store").val.bonusForm?global.get("store").val.bonusForm:null,self.user||(self.user={email:"",profile:{},addInfo:{}}),self.ok=closeModal,self.cancel=function(){$uibModalInstance.dismiss()}}function createUser(){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/user/modal/createUser.html",controller:function($user,$uibModalInstance,$http,$q,exception){var self=this;self.user={profile:{}},self.ok=function(form){form.$invalid||(self.blockButton=!0,$q.when().then(function(){if(self.user.profile&&self.user.profile.phone){var phone=self.user.profile.phone;return $user.getItem(phone,"profile.phone")}return null}).then(function(res){if(res&&res._id)throw"phone exist"}).then(function(){return $user.checkEmailForExist(self.user.email)}).then(function(res){if(res&&res.exist)throw"email exist"}).then(function(){return $http.post(userHost+"/api/createUser",self.user)}).then(function(res){$uibModalInstance.close(res)}).catch(function(err){err&&exception.catcher("error")(err),self.blockButton=!1}))},self.cancel=function(){$uibModalInstance.dismiss()}},controllerAs:"$ctrl"}).result.then(function(item){resolve(item)},function(){reject()})})}function changeEmail(userId){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/user/modal/changeEmail.html",controller:function($user,global,$uibModalInstance,$http,$q,exception){function checkEmail(email,valid){if(!valid)return void(self.cheched=!1);$q.when().then(function(){return $user.checkEmailForExist(email)}).then(function(res){if(!res||res.exist)throw"email exist";self.cheched=!0}).catch(function(err){err&&exception.catcher("change email")(err),self.cheched=!1})}var self=this;self.global=global,self.checkEmail=checkEmail,self.email="",self.ok=function(){if(!self.cheched)return void exception.catcher("change email")("email используется");self.blockButton=!0,$q.when().then(function(){return Items.save({update:"email"},{_id:userId,email:self.email})}).then(function(res){$uibModalInstance.close(self.email)}).catch(function(err){self.blockButton=!1})},self.cancel=function(){$uibModalInstance.dismiss()}},controllerAs:"$ctrl",windowClass:"modalProject"}).result.then(function(item){resolve(item)},function(){reject()})})}function checkEmailForExist(email,_id){return $q(function(rs,rj){var o={email:email};_id&&(o._id=_id),User.checkEmail(o,function(res){rs(res)},function(err){rj(err)})})}function checkPhoneForExist(phone,_id){return $q(function(rs,rj){var o={email:phone};_id&&(o._id=_id),User.checkPhone(o,function(res){rs(res)},function(err){rj(err)})})}function changePhone(userId){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/user/modal/changePhone.html",controller:function($user,global,$uibModalInstance,$http,$q,exception){function checkPhone(phone){return $q.when().then(function(){return $user.checkPhoneForExist(phone)}).then(function(res){if(!res||res.exist)throw"phone exist"})}var self=this;self.global=global,self.checkPhone=checkPhone,self.email="",self.ok=function(){if(!self.phone)return void exception.catcher("change phone")("phone???");self.blockButton=!0,$q.when().then(function(){return checkPhone(self.phone)}).then(function(){var o={_id:userId};return o["profile.phone"]=self.phone,Items.save({update:"profile.phone"},o)}).then(function(res){$uibModalInstance.close(self.phone)}).catch(function(err){exception.catcher("change phone")(err),self.blockButton=!1})},self.cancel=function(){$uibModalInstance.dismiss()}},controllerAs:"$ctrl"}).result.then(function(item){resolve(item)},function(){reject()})})}function changePswd(_id){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/user/modal/changePswd.html",controller:function($user,global,$uibModalInstance,$http,$q,_id){var self=this;self.global=global,self.user={_id:_id,password:""},self.ok=function(){$q.when().then(function(){return $http.post(userHost+"/api/changePswd",self.user)}).then(function(res){$uibModalInstance.close(res)}).catch(function(err){$uibModalInstance.dismiss(err)})},self.cancel=function(){$uibModalInstance.dismiss()}},controllerAs:"$ctrl",resolve:{_id:function(){return _id}},windowClass:"modalProject"}).result.then(function(item){resolve(item)},function(){reject()})})}function logout(callback){var cb=callback||angular.noop;return Session.delete(function(){return global.set("user",null),cb()},function(err){return cb(err)}).$promise}function loginCtrl2($scope,$uibModalInstance,exception,global,User,$state){var self=this;self.global=global,$scope.$on("closeWitget",function(){$uibModalInstance.close()}),self.cancel=function(){$uibModalInstance.dismiss()}}function loginOnlyPhoneCtrl($scope,$uibModalInstance,exception,global,User,$state){var self=this;self.global=global,$scope.$on("closeWitget",function(){$uibModalInstance.close()}),self.cancel=function(){$uibModalInstance.dismiss()}}var Items=$resource("/api/collections/User/:_id",{_id:"@_id"});return this.query=Items.query,this.get=Items.get,this.delete=Items.delete,this.save=Items.save,{getList:getList,getItem:getItem,save:Items.save,delete:Items.delete,selectItem:selectItem,selectOrCreat:selectOrCreat,login:login,loginOnlyPhone:loginOnlyPhone,logout:logout,saveProfile:saveProfile,newUser:newUser,newUserByPhone:newUserByPhone,query:Items.query,getInfo:getInfo,createUser:createUser,changePswd:changePswd,getInfoBonus:getInfoBonus,changeEmail:changeEmail,changePhone:changePhone,checkEmailForExist:checkEmailForExist,checkPhoneForExist:checkPhoneForExist}}function accountFactory($http,$state,global){return{getProfile:function(){var store=global.get("store").val._id;return $http.get("/api/me/"+store)},getPermission:function(){var store=global.get("store").val._id;return $http.get("/api/permission/"+store)},getPermissionTranslator:function(){var store=global.get("store").val._id;return $http.get("/api/permissionTranslator/"+store)},getPermissionOrder:function(){var store=global.get("store").val._id;return $http.get("/api/permissionOrder/"+store)},
getPermissionMaster:function(master){var store=global.get("store").val._id;return $http.get("/api/permissionMaster/"+store+"/"+master)},getEnterButton:function(user){var store=global.get("store").val._id;return user.frame=$state.get("frame")?$state.get("frame").url:null,user.store=store,$http.post("/api/getEnterButton",user)},updateProfile:function(profileData){var store=global.get("store").val._id;return profileData.store=store,$http.put(userHost+"/api/me",profileData)},unsubscription:function(){global.get("store").val._id;return $http.get("/api/unsubscription/"+global.get("user").val._id)}}}function subscibtionListService($resource){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}return Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete)}function getItem(id){function getItemComplete(response){return response}function getItemFailed(error){return error}return Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}var Items=$resource("/api/collections/SubscribtionList/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,save:Items.save,delete:Items.delete,query:Items.query,get:Items.get}}function userEntryService($resource,$q){function getList(paginate,query){function getListComplete(response){return paginate.page||(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return $q.reject(error)}return paginate||(paginate={}),Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete).catch(getListFailed)}function getItem(id,param){function getItemComplete(response){return response}function getItemFailed(error){return $q.reject(error)}return Items.get({_id:id,param:param}).$promise.then(getItemComplete).catch(getItemFailed)}var Items=$resource("/api/collections/UserEntry/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,save:Items.save,delete:Items.delete,query:Items.query}}function sendPhoneFactory($http,$q,$user){function sendCodeToPhone(phone){if(phone){var o={phone:phone};return $q.when().then(function(){return $http.post("/api/users/sendSMS",o)})}}function verifyCode(code,phone){var o={code:code,phone:phone};return $q.when().then(function(){return $http.post("/api/users/verifySMScode",o)})}function checkPhone(phone){return $q.when().then(function(){return $user.getItem(phone,"profile.phone")}).then(function(res){return res?res:null})}return{sendCodeToPhone:sendCodeToPhone,verifyCode:verifyCode,checkPhone:checkPhone}}angular.module("gmall.services").factory("Session",["$resource",function($resource){return $resource("/api/session/")}]).factory("User",function($resource){return $resource("/api/users/:id/:email",{id:"@id"},{update:{method:"PUT",params:{id:"profile",email:""}},updateCoupon:{method:"PUT",params:{id:"coupon",email:""}},updatePswd:{method:"PUT",params:{id:"changepswd",email:""}},resetPswd:{method:"POST",params:{id:"resetpswd",email:"@email"}},get:{method:"GET",params:{id:"me",email:""}},checkEmail:{method:"GET",params:{id:"checkemail"}},checkPhone:{method:"GET",params:{id:"checkphone"}},useCoupon:{method:"GET",params:{id:"useCoupon"}},cancelCoupon:{method:"GET",params:{id:"cancelCoupon"}},repeatMailForConfirm:{method:"GET",params:{id:"repeatMailForConfirm"}}})}).service("$user",userService).service("UserEntry",userEntryService).factory("Account",accountFactory).factory("sendPhoneFactory",sendPhoneFactory).service("SubscibtionList",subscibtionListService),userService.$inject=["$resource","$uibModal","$q","Session","User","global","exception","$state","$window","$rootScope","$http","$auth","Account"],accountFactory.$inject=["$http","$state","global"],subscibtionListService.$inject=["$resource"],userEntryService.$inject=["$resource","$q"],sendPhoneFactory.$inject=["$http","$q","$user"]}(),function(){function userShipInfo(){return{scope:{},bindToController:!0,controller:shipInfoCtrl,controllerAs:"$ctrl",templateUrl:"/components/user/shipInfo.html",restrict:"AE"}}function shipInfoCtrl(global,$order,exception,$window,$rootScope,$q,$user,$timeout){function changeEmail(){$q.when().then(function(){return $user.changeEmail(global.get("user").val._id)}).then(function(res){console.log(res),global.get("user").val.email=res}).catch(function(err){err&&exception.catcher("change email")(err)})}function ok(formProfile){formProfile.$valid?$q.when().then(function(){return self.user.val.profile.phone?$user.getItem(self.user.val.profile.phone,"profile.phone"):null}).then(function(res){!res||res&&!res._id||res&&res._id&&res._id==self.user.val._id?global.get("store").val.cartSetting&&global.get("store").val.cartSetting.slide?$rootScope.$emit("cartslide",{event:"shipInfoDone"}):$rootScope.$emit("closeShipModal"):(self.phoneExist=!0,$timeout(function(){self.phoneExist=!1},5e3))}):formProfile.$error&&(formProfile.$error.required&&formProfile.$error.required.forEach(function(el){var error=global.get("langNote").val.formError+" "+el.$name+"\n";exception.catcher(global.get("langNote").val.error)(error)}),formProfile.$error.pattern,formProfile.$error.maxlenth)}var self=this;self.order=$order.getOrder(),self.global=global,self.user=global.get("user"),self.ok=ok,$rootScope.$on("logged",function(){self.user=global.get("user")}),$rootScope.$on("loggout",function(){self.user.val={email:"",profile:{}}}),self.changeEmail=changeEmail}angular.module("gmall.directives").directive("userShipInfo",userShipInfo),shipInfoCtrl.$inject=["global","$order","exception","$window","$rootScope","$q","$user","$timeout"]}(),function(){function campaignService($resource,$uibModal,$q){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return console.log("XHR Failed for getNews."+error),$q.reject(error)}return Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete).catch(getListFailed)}function getItem(id){function getItemComplete(response){return response}function getItemFailed(error){return $q.reject(error)}return Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}function create(){return $q(function(resolve,reject){var options={animation:!0,restrict:"E",templateUrl:"components/PROMO/campaign/createCampaign.html",controller:function($uibModalInstance){var self=this;self.name="",self.ok=function(){!self.name||self.name.length<3||$uibModalInstance.close(self.name)},self.cancel=function(){$uibModalInstance.dismiss()}},controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(name){name?resolve(name.substring(0,100)):reject("empty")},function(err){reject()})})}function selectItem(){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/PROMO/campaign/selectItem.html",controller:function(Campaign,$uibModalInstance){var self=this;self.stuffs=[],self.name="";var query,paginate={page:0,rows:30,items:0};self.search=function(name){name.length<3||(query={name:name},Campaign.getList(paginate,query).then(function(res){self.items=res}))},self.selectItem=function(item){$uibModalInstance.close(item)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl",size:"lg"}).result.then(function(stuff){resolve(stuff)},function(){reject()})})}var Items=$resource("/api/collections/Campaign/:_id",{_id:"@_id"});return{get:Items.get,getList:getList,getItem:getItem,save:Items.save,delete:Items.delete,create:create,select:selectItem}}angular.module("gmall.services").service("Campaign",campaignService),campaignService.$inject=["$resource","$uibModal","$q"]}(),function(){function helperService($resource,$uibModal,$q,exception){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return console.log("XHR Failed for getNews."+error),$q.reject(error)}return Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete).catch(getListFailed)}function getItem(id){function getItemComplete(response){return _items[id]=response,response}function getItemFailed(error){return _items[id]=null,$q.reject(error)}return _items[id]?$q.when(_items[id]):Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}function getHelp(state){$q.when().then(function(){return getItem(state)}).then(function(helper){$uibModal.open({animation:!0,templateUrl:"components/helper/helperModal.html",controller:function($uibModalInstance,$sce,desc){var self=this;self.desc=desc,self.cancel=function(){$uibModalInstance.dismiss("cancel")}},resolve:{desc:function(){return helper.desc}},controllerAs:"$ctrl"})}).catch(function(err){var msg="ошибка";err&&("object"==typeof err?err.data?msg=err.data:err.message&&(msg=err.message):msg=err),err=err.data||err,exception.catcher("получение справки")(msg)})}var Items=$resource("/api/collections/Helper/:_id",{_id:"@_id"}),_items={};return{getList:getList,getItem:getItem,save:Items.save,delete:Items.delete,getHelp:getHelp}}angular.module("gmall.services").service("Helper",helperService),helperService.$inject=["$resource","$uibModal","$q","exception"]}(),angular.module("gmall.services").factory("$email",function($resource){return $resource("/api/sendEmail")}).factory("Email",function($resource){return $resource("/api/sendEmails")}),angular.module("gmall.services").factory("$notification",function($resource){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}var data={perPage:paginate.rows,page:paginate.page,query:query};return Items.query(data).$promise.then(getListComplete)}var Items=$resource("/api/collections/Notification/:id",{id:"@_id"},{deleteArray:{method:"DELETE"},updateNote:{method:"POST",params:{update:"note"}}});return{getList:getList,query:Items.query,get:Items.get,save:Items.save,delete:Items.delete}}),angular.module("gmall.controllers").controller("callCtrl",["$scope","global","$notification","toaster","CreateContent","$rootScope","$http","exception","$q","$email","$attrs",function($scope,global,$notification,toaster,CreateContent,$rootScope,$http,exception,$q,$email,$attrs){function sendMessage(textForSend){return self.dataForSend={},self.dataForSend.phone=global.get("store").val.seller.phone,self.dataForSend.text=textForSend,self.dataForSend.userId=md5www(global.get("store").val.subDomain),self.dataForSend.onlyText=!0,$q.when().then(function(){return $http.post("/api/users/sendMessageAboutDealFromServer",self.dataForSend)}).catch(function(err){sendEmail(self.dataForSend)})}function sendEmail(data){if(global.get("store").val.feedbackEmail){var domain=global.get("store").val.domain,o={email:[global.get("store").val.feedbackEmail],content:data.text,subject:global.get("lang").val.callorder+" ✔",from:global.get("store").val.name+"<"+global.get("store").val.subDomain+"@"+domain+">"};$q(function(resolve,reject){$email.save(o,function(res){resolve()},function(err){resolve()})})}}self=this,self.global=global,$scope.callCtrl=this,self.user=global.get("user").val?global.get("user"):{val:{profile:{phone:"",fio:""}}},$scope.phoneNumberPattern=function(){var regexp=/^([0-9\(\)\/\+ \-]*)$/;return{test:function(value){return $scope.requireTel===!1||regexp.test(value)}}}();var o={addressee:"seller",type:"call",content:""};o.seller=global.get("store").val.seller._id,$scope.callCtrl.pushNotification=function(form){if(!$scope.callCtrl.blockButton&&form.$valid){$scope.callCtrl.blockButton=!0,o.content=global.get("langOrder").val.requestacallback+" "+self.user.val.profile.phone+(self.user.val.fio?" "+self.user.val.fio:"")+" "+moment().format("LLLL"),self.stuff&&(o.content+=","+self.stuff),sendMessage(o.content),$scope.$emit("closeWitget"),$rootScope.checkedMenuChange("chatMenu",!1),$notification.save(o,function(res){toaster.pop({type:"note",title:global.get("langNote").val.sent,body:"",delay:3e3,showCloseButton:!0}),$scope.callCtrl.blockButton=!1},function(err){toaster.pop({type:"error",title:global.get("langNote").val.error,body:"",delay:3e3,showCloseButton:!0})});var pap;global.get("paps")&&global.get("paps").val&&(pap=global.get("paps").val.getOFA("action","call"))&&$rootScope.$state.go("thanksPage",{id:pap.url})}}}]),angular.module("gmall.directives").directive("callFromStore",[function(){return{scope:{modalClose:"&",stuff:"@"},restrict:"E",bindToController:!0,controllerAs:"$ctrl",controller:"callCtrl",templateUrl:"components/call/call.html"}}]).directive("enterPhoneNumder",[function(){return{scope:{enterPhoneNumder:"=",changeFoo:"&",submitted:"="},restrict:"A",bindToController:!0,controllerAs:"$ctrl",controller:enterPhoneNumderCtrl,templateUrl:"components/call/phoneNumber.html"}}]),enterPhoneNumderCtrl.$inject=["$scope","global"],angular.module("gmall.controllers").controller("feedbackCtrl",["$scope","global","$notification","toaster","CreateContent","$email","$rootScope","exception","$attrs","$timeout",function($scope,global,$notification,toaster,CreateContent,$email,$rootScope,exception,$attrs,$timeout){self=this,$scope.feedbackCtrl=this,self.global=global,$attrs&&$attrs.text&&$timeout(function(){$scope.feedbackCtrl.message=$attrs.text},1e3);var note={addressee:"seller",type:"feedback",content:""};note.seller=global.get("store").val.seller._id,$scope.feedbackCtrl.sendMessage=function(form){if(!$scope.feedbackCtrl.blockButton&&form.$valid){$scope.feedbackCtrl.blockButton=!0,note.content=$scope.feedbackCtrl.message;var content=$scope.feedbackCtrl.message+"<br />"+$scope.mainFrameCtrl.feedback.name+"<br />"+$scope.mainFrameCtrl.feedback.email,domain=global.get("store").val.domain||global.get("store").val.subDomain,o={email:global.get("store").val.feedbackEmail,content:content,subject:"обратная связь ✔",from:domain+"<feedback@"+domain+">"};$email.save(o,function(res){$scope.$emit("closeWitget"),$rootScope.checkedMenuChange("chatMenu",!1);var pap;global.get("paps")&&global.get("paps").val&&(pap=global.get("paps").val.getOFA("action","feedback"))&&$rootScope.$state.go("thanksPage",{id:pap.url}),toaster.pop({type:"note",title:global.get("langNote").val.sent,body:"",delay:4e3,showCloseButton:!0})},function(err){console.log(err),exception.catcher(global.get("langNote").val.error)(err)})}}}]),angular.module("gmall.directives").directive("feedbackMessage",[function(){return{restrict:"E",scope:{modalClose:"&"},bindToController:!0,controllerAs:"$ctrl",controller:"feedbackCtrl",templateUrl:"components/feedback/feedback.html",link:function(){}}}]),angular.module("gmall.services").provider("global",[function(){var _data={},_urls={};this.setUrl=function(urls){_urls=urls};var _set=function(what,val){val=val||null,angular.isDefined(what)&&(_data[what]?_data[what].val=angular.isDefined(val)?val:null:_data[what]={val:val})},_getSticker=function(stuff){stuff._id?stuff._id:stuff.stuff;if(stuff.tags&&stuff.tags.length&&_data.filterTagsSticker.val){for(var i=0,l=_data.filterTagsSticker.val.length;i<l;i++){var tag=_data.filterTagsSticker.val[i]._id;if(stuff.tags.indexOf(tag)>-1)return!!_data.filterTagsSticker.val[i].sticker&&_data.filterTagsSticker.val[i].sticker}return!1}},_getDataForCart=function(stuff){return void console.log("не используется!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!")};this.set=_set,this.$get=["$http",function($http){return{request:function(url,vars){return angular.isDefined(vars)?$http.post(url,$.param(vars),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}):$http.get(url)},url:function(which){return _urls[which]},set:_set,get:function(what){return angular.isDefined(what)&&what in _data?_data[what]:void 0},del:function(what){if(angular.isDefined(what)){var i=_data.indexOf(what);if(i>=0)return _data.splice(i,1)}return!1},clear:function(){_data=[]},getAll:function(){return _data},getSticker:_getSticker,getDataForCart:_getDataForCart}}]}]).factory("globalSrv",["global",function(global){var _send=global.request;return{getData:function(name,param,abbr){var url=global.url(name);if(!angular.isDefined(param)||angular.equals(param,null)||angular.equals(param,"")||(url+="/"+param),angular.isDefined(abbr)&&!angular.equals(abbr,null)&&!angular.equals(abbr,"")&&"object"==typeof abbr){url+="?";for(var key in abbr)"?"!=url[url.length-1]&&(url+="&"),url+=key+"="+abbr[key]}return _send(url)}}}]),angular.module("gmall.services").service("Sections",sectionServiceFunction).service("selectCategoryFromModal",function($q,$uibModal){this.bind=function(categoryId){return $q(function(resolve,reject){var options={animation:!0,templateUrl:"components/selectCategoryModal/selectCategoryModal.html",controller:"selectCategoryModalCtrl",size:"lg",resolve:{categoryId:function(){return categoryId}}};$uibModal.open(options).result.then(function(selectedItem){resolve(selectedItem)},function(){console.log("Modal dismissed at: "+new Date),reject()})})}}),sectionServiceFunction.$inject=["$resource","$q","global","$uibModal","$timeout"],angular.module("gmall.services").service("Filters",function($resource,$q,global,$uibModal){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}paginate||(paginate={page:0});var data={perPage:paginate.rows,page:paginate.page,query:query};return global.get("crawler")&&global.get("crawler").val&&(data.subDomain=global.get("store").val.subDomain),Items.query(data).$promise.then(getListComplete)}function getItem(id){function getItemComplete(response){return response&&response.blocks&&response.blocks.length&&response.blocks.forEach(function(b){"stuffs"==b.type&&(b.stuffs&&b.stuffs.length?b.imgs=b.stuffs.map(function(s){return s.gallery&&s.gallery.length&&s.gallery[0].img&&(s.img=s.gallery[0].img),s}):b.imgs=[])}),response}return Items.get({_id:id}).$promise.then(getItemComplete)}function returnFilters(resolve){pending?setTimeout(function(){returnFilters(resolve)},300):resolve(filters)}function reloadItems(){pending=!0,Items.query(function(res){res.shift(),filters=res,global.set("filters",filters),pending=!1})}function selectFilter(){return $q(function(resolve,reject){var options={animation:!0,templateUrl:"components/filters/selectFilter.html",controller:selectFilterCtrl,size:"lg",controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(selected){resolve(selected)},function(){console.log("Modal dismissed at: "+new Date),reject()})})}function selectFilterCtrl(Filters,$uibModalInstance,$q,global){var self=this;self.lang=global.get("lang").val,$q.when().then(function(){return Filters.getFilters()}).then(function(filters){self.filters=filters}),self.cancel=function(){$uibModalInstance.dismiss("cancel")},self.ok=function(filter){$uibModalInstance.close(filter)}}var Items=$resource("/api/collections/Filter/:_id",{_id:"@_id"}),filters=null,pending=!0;this.query=Items.query,this.get=Items.get,this.delete=Items.delete,this.save=Items.save,this.select=selectFilter,this.reloadItems=reloadItems,this.getItem=getItem,this.getList=getList,this.getFilters=function(){return $q(function(resolve,reject){if(global.get("filters")&&global.get("filters").val)return filters||(filters=global.get("filters").val),resolve(global.get("filters").val);pending?setTimeout(function(){returnFilters(resolve)},300):filters?resolve(filters):(pending=!0,Items.query(function(res){res.shift(),filters=res,pending=!1,resolve(filters)},function(err){pending=!1,reject(err)}))})},global.get("filters")&&global.get("filters").val||Items.query(function(res){res.shift(),filters=res,global.get("filters")&&!global.get("filters").val&&global.set("filters",filters),pending=!1}),selectFilterCtrl.$inject=["Filters","$uibModalInstance","$q","global"]});var __filterTagsO=_filterTagsO,__filterTags=_filterTags;angular.module("gmall.services").service("FilterTags",filterTagsService),filterTagsService.$inject=["$resource","$uibModal","$q","global","$timeout","Sections"],angular.module("gmall.services").service("SelectFilterTags",["$q","$uibModal",function($q,$uibModal){function bindFilterTagToModelCtrl(Filters,$uibModalInstance){var self=this;$q.when().then(function(){return Filters.getFilters()}).then(function(filters){self.filters=filters}),self.cancel=function(){$uibModalInstance.dismiss("cancel")},self.ok=function(filterTag){$uibModalInstance.close(filterTag)}}this.bindFiterTagToModel=function(){return $q(function(resolve,reject){var options={animation:!0,templateUrl:"components/filters/bindFilterTagToModel.html",controller:bindFilterTagToModelCtrl,size:"lg",controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(selectedFilterTag){resolve(selectedFilterTag)},function(){console.log("Modal dismissed at: "+new Date),reject()})})}}]),function(){function itemDirective(){return{scope:{},restrict:"E",bindToController:!0,controller:itemCtrl,controllerAs:"$ctrl",templateUrl:"views/template/partials/cart.html"}}function previewCartDirective(){return{scope:{},restrict:"EA",bindToController:!0,controller:previewCartCtrl,controllerAs:"$ctrl",transclude:!0,templateUrl:"views/template/partials/cart/previewCart.html"}}function addedCartDirective(){return{scope:{},bindToController:!0,controller:function($scope,$element,$timeout,global){$($element).fadeOut();var self=this;self.global=global,self.addItem=null;var timer=null;$scope.$on("$updateOrder",function(event,itemTo){self.addItem=angular.copy(itemTo),timer?$timeout.cancel(timer):$($element).fadeIn(),timer=$timeout(function(){self.addItem=null,timer=null,$($element).fadeOut()},2500)}),$($element).hover(function(){timer&&($timeout.cancel(timer),timer=null)},function(){$($element).fadeOut()}),$($element).click(function(){$($element).fadeOut()})},controllerAs:"$ctrl",templateUrl:"views/template/partials/cart/addedCart.html"}}function itemCtrl($scope,$anchorScroll,$order,global,exception,Confirm,$user,$q,CreateContent,$email,$notification,$state,$rootScope,$timeout){function _setCoupons(){self.coupons=null,global.get("coupons")&&global.get("coupons").val&&global.get("coupons").val.length&&global.get("coupons").val.forEach(function(c){global.get("user").val?global.get("user").val.coupons.indexOf(c._id)<0&&(self.coupons||(self.coupons=[]),self.coupons.push(c)):(self.coupons||(self.coupons=[]),self.coupons.push(c))}),self.coupon=null,global.get("coupons")&&global.get("coupons").val&&global.get("user").val?global.get("coupons").val[0]&&global.get("user").val.coupons.indexOf(global.get("coupons").val[0]._id)<0?self.coupon=global.get("coupons").val[0]:global.get("coupons").val[1]&&global.get("user").val.coupons.indexOf(global.get("coupons").val[1]._id)<0&&(self.coupon=global.get("coupons").val[1]):!global.get("user").val&&global.get("coupons")&&global.get("coupons").val&&(self.coupon=global.get("coupons").val[0])}function clearCart(){Confirm(global.get("langNote").val.clean+"?").then(function(){$order.clearCart()}).catch(function(err){(err=err&&err.data||err)&&exception.catcher(global.get("langNote").val.error)(err)})}function removeItem(i){Confirm(global.get("lang").val.delete+"?").then(function(){$order.removeItem(i)})}function saveCart(stuff){stuff?stuff.quantity&&(stuff.quantity>stuff.maxQty?(stuff.quantity=stuff.maxQty,exception.catcher(global.get("langNote").val.error)("слишком много")):stuff.quantity<stuff.minQty?(stuff.quantity=stuff.minQty,exception.catcher(global.get("langNote").val.error)("слишком мало")):$order.updateOrder()):$order.updateOrder()}function decreaseQty(i){$order.decreaseQty(i)}function increaseQty(i){$order.increaseQty(i)}function checkOut(){$rootScope.$emit("InitiateCheckout"),self.order.cart.stuffs.length&&(global.get("store").val.cartSetting&&global.get("store").val.cartSetting.slide?global.get("user").val&&global.get("user").val._id?forward(2):forward():(self.order=$order.getOrder(),$q.when().then(function(){return global.get("user").val&&global.get("user").val._id?void 0:$user.login()}).then(function(){return $order.getShipInfo()}).then(function(){return sendOrder()})))}function sendOrder(){return $q.when().then(function(){return $rootScope.$emit("$stateChangeStartToStuff"),$order.sendOrder()}).then(function(){}).then(function(){$rootScope.$emit("$stateChangeEndToStuff"),$rootScope.$emit("Purchase",{value:$order.paySum,currency:$order.currency}),$order.reinitCart(),$rootScope.order=$order.getOrder(),self.order.setCoupon(null),_setCoupons(),$order.clearCart(),$rootScope.checkedMenu.cart=!1}).then(function(){return $user.saveProfile(global.get("user").val)}).catch(function(err){if($rootScope.$emit("$stateChangeEndToStuff"),err){if(console.log("errerrerr ",err),err.data)var content=JSON.stringify(err.data);else var content=JSON.stringify(err,["message","arguments","type","name"]);global.get("user").val&&(content+="\r"+global.get("user").val.email),$order.getOrder()&&(content+="\r"+JSON.stringify($order.getOrder(),null,4));var domain=global.get("store").val.domain,o={email:["igorchugurov@gmail.com","vikachugurova@gmail.com"],content:content,subject:"error in order ✔",from:global.get("store").val.name+"<"+global.get("store").val.subDomain+"@"+domain+">"};$q(function(resolve,reject){$email.save(o,function(res){resolve()},function(err){resolve()})}),err&&exception.catcher(global.get("langNote").val.error)(err)}})}function enableCheckOut(){return!(!self.order.totalCount||!self.order.cart.stuffs.length)&&!(self.opt>1&&!retail&&self.order.totalCount<self.opt)}function goToStuff(o){var states=$state.get();states.some(function(state){return"frame.stuffs.stuff"==state.name})?$state.go("frame.stuffs.stuff",o):states.some(function(state){return"stuffs.stuff"==state.name})&&$state.go("stuffs.stuff",o)}function disabledCheckOut(){if(!self.order.cart.stuffs.length)return!0}function back(){2==self.currentBlock&&global.get("user").val&&(self.currentBlock=1),self.currentBlock&&self.currentBlock--}function forward(num){num?self.currentBlock+=num:self.currentBlock++,console.log(self.currentBlock)}function setSlide(s){self.currentBlock=s}function getFilterName(tag){var t=global.get("filterTags").val.getOFA("_id",tag);if(t&&t.filter){var f=global.get("filters").val.getOFA("_id",t.filter);return f?f.name:""}return""}function setCouponForOrder(c,e){e.stopPropagation(),self.order.setCoupon(c)}var self=this;$scope.myInterval=2e3,$scope.noWrapSlides=!0,$scope.active33=2;var slides=$scope.slides=[],currIndex=0;$scope.addSlide=function(){var newWidth=600+slides.length+1;slides.push({image:"//unsplash.it/"+newWidth+"/300",text:["Nice image","Awesome photograph","That is so cool","I love that"][slides.length%4],id:currIndex++})},$scope.randomize=function(){var indexes=generateIndexesArray();assignNewIndexesToSlides(indexes)};for(var i=0;i<4;i++)$scope.addSlide();self.currentBlock=0;self.global=global,self.mobile=global.get("mobile").val,self.opt=global.get("store").val.seller.opt&&global.get("store").val.seller.opt.quantity?global.get("store").val.seller.opt.quantity:0;var retail=global.get("store").val.seller.retail;self.disabledMessage=self.opt>1&&!retail,self.countryCode=global.get("country"),self.clearCart=clearCart,self.removeItem=removeItem,self.saveCart=saveCart,self.checkOut=checkOut,self.enableCheckOut=enableCheckOut,self.goToStuff=goToStuff,self.disabledCheckOut=disabledCheckOut,self.back=back,self.getFilterName=getFilterName,self.decreaseQty=decreaseQty,self.increaseQty=increaseQty,self.setCouponForOrder=setCouponForOrder,function(){$order.type&&"cart"==$order.type?self.order=$order.getOrder():$order.init("cart").then(function(order){self.order=order}),console.log(self.order),$anchorScroll(),_setCoupons(),$scope.$on("logged",function(){_setCoupons()}),global.get("store").val.cartSetting&&global.get("store").val.cartSetting.slide&&setSlide(0)}(),$rootScope.$on("cartslide",function(event,data){console.log(data),data&&("shipInfoDone"==data.event?sendOrder():"shipInfoDone"==data.event?setSlide(0):"signLogin"==data.event?forward():"init"==data.event&&setSlide(0))})}function previewCartCtrl($scope,$anchorScroll,global,exception,$q,$state,$order,$element,$timeout,$rootScope){function activate(){$order.type&&"cart"==$order.type?self.order=$order.getOrder():$order.init("cart").then(function(order){self.order=order}),$anchorScroll(),self.loaded=!0}function removeItem(i){$order.removeItem(i)}function saveCart(){$order.updateOrder()}function goToStuff(o){var states=$state.get();states.some(function(state){return"frame.stuffs.stuff"==state.name})?$state.go("frame.stuffs.stuff",o):states.some(function(state){return"stuffs.stuff"==state.name})&&$state.go("stuffs.stuff",o)}var self=this;self.global=global;var listDiv=$element.find(".cartItems")[0];$(listDiv).fadeOut();var hoverIn;$($element).hover(function(){hoverIn=!0,$timeout(function(){hoverIn&&$(listDiv).fadeIn(150)},50),$(listDiv).fadeIn(100)},function(){hoverIn=!1,$timeout(function(){hoverIn||$(listDiv).fadeOut(100)},100)}),self.global=global,self.mobile=global.get("mobile").val,self.opt=global.get("store").val.seller.opt&&global.get("store").val.seller.opt.quantity?global.get("store").val.seller.opt.quantity:0;var retail=global.get("store").val.seller.retail;self.disabledMessage=self.opt>1&&!retail,self.countryCode=global.get("country"),self.removeItem=removeItem,self.saveCart=saveCart,self.goToStuff=goToStuff,$timeout(function(){activate()},400),$rootScope.$on("Purchase",function(){self.order=$order.getOrder()})}angular.module("gmall.services").directive("cartItem",itemDirective).directive("previewCart",previewCartDirective).directive("addedCart",addedCartDirective),itemCtrl.$inject=["$scope","$anchorScroll","$order","global","exception","Confirm","$user","$q","CreateContent","$email","$notification","$state","$rootScope","$timeout"],previewCartCtrl.$inject=["$scope","$anchorScroll","global","exception","$q","$state","$order","$element","$timeout","$rootScope"]}(),function(){function brandTagsService($resource,$uibModal,$q,Sections){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return console.log("XHR Failed for getNews."+error),$q.reject(error)}return Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete).catch(getListFailed)}function getItem(id){function getItemComplete(response){return response}function getItemFailed(error){return $q.reject(error)}return Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}function selectBrandTag(data){var sections=data&&data.section?Sections.getSections():null;return $q(function(resolve,reject){var options={animation:!0,templateUrl:"components/brand/selectBrandTag.html",controller:selectBrandTagCtrl,size:"lg",controllerAs:"$ctrl",resolve:{sections:function(){return sections}}};$uibModal.open(options).result.then(function(selectedFilterTag){resolve(selectedFilterTag)},function(){console.log("Modal dismissed at: "+new Date),reject()})})}function selectBrandTagCtrl(Brands,$uibModalInstance,$q,global,sections){var self=this;self.global=global,self.sections=sections,self.sections&&(self.section=self.sections[0].url),$q.when().then(function(){return Brands.getBrands()}).then(function(filters){self.filters=filters}),self.cancel=function(){$uibModalInstance.dismiss("cancel")},self.ok=function(filterTag){self.section&&(filterTag.section=self.section),filterTag.brand=self.filters.find(function(b){return b._id==filterTag.brand}),$uibModalInstance.close(filterTag)}}var Items=$resource("/api/collections/BrandTags/:id",{id:"@_id"});return{getList:getList,getItem:getItem,save:Items.save,delete:Items.delete,
query:Items.query,get:Items.get,selectBrandTag:selectBrandTag,select:selectBrandTag}}angular.module("gmall.services").service("Brands",function($resource,$q,global,$uibModal,Sections){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}paginate||(paginate={page:0});var data={perPage:paginate.rows,page:paginate.page,query:query};return global.get("crawler")&&global.get("crawler").val&&(data.subDomain=global.get("store").val.subDomain),Items.query(data).$promise.then(getListComplete)}function getItem(id){function getItemComplete(response){return response&&response.blocks&&response.blocks.length&&response.blocks.forEach(function(b){"stuffs"==b.type&&(b.stuffs&&b.stuffs.length?b.imgs=b.stuffs.map(function(s){return s.gallery&&s.gallery.length&&s.gallery[0].img&&(s.img=s.gallery[0].img),s}):b.imgs=[])}),response}return Items.get({_id:id}).$promise.then(getItemComplete)}function returnBrands(resolve){pending?setTimeout(function(){returnBrands(resolve)},300):resolve(brands)}function reloadItems(){pending=!0,Items.query(function(res){res.shift(),brands=res,global.set("brands",brands),pending=!1})}function selectBrand(data){var sections=data&&data.section?Sections.getSections():null;return $q(function(resolve,reject){var options={animation:!0,templateUrl:"components/brand/selectBrand.html",controller:selectBrandCtrl,size:"lg",controllerAs:"$ctrl",resolve:{sections:function(){return sections}}};$uibModal.open(options).result.then(function(selected){resolve(selected)},function(){console.log("Modal dismissed at: "+new Date),reject()})})}function selectBrandCtrl(Brands,$uibModalInstance,$q,global,sections){var self=this;self.global=global,self.sections=sections,self.sections&&(self.section=self.sections[0].url),$q.when().then(function(){return Brands.getBrands()}).then(function(filters){self.filters=filters}),self.cancel=function(){$uibModalInstance.dismiss("cancel")},self.ok=function(filterTag){self.section&&(filterTag.section=self.section),$uibModalInstance.close(filterTag)}}var Items=$resource("/api/collections/Brand/:id",{id:"@_id"}),brands=null,pending=!0;this.query=Items.query,this.get=Items.get,this.delete=Items.delete,this.save=Items.save,this.reloadItems=reloadItems,this.select=selectBrand,this.getList=getList,this.getItem=getItem,this.getBrands=function(){return $q(function(resolve,reject){if(global.get("brands")&&global.get("brands").val)return brands||(brands=global.get("brands").val),resolve(global.get("brands").val);pending?setTimeout(function(){returnBrands(resolve)},300):brands?resolve(brands):(pending=!0,Items.query(function(res){res.shift(),brands=res?res:[],pending=!1,resolve(brands)},function(err){pending=!1,reject(err)}))})},global.get("brands")&&global.get("brands").val||Items.query(function(res){res.shift(),brands=res,global.get("brands")&&!global.get("brands").val&&global.set("brands",brands),pending=!1}),selectBrandCtrl.$inject=["Brands","$uibModalInstance","$q","global","sections"]}).service("BrandTags",brandTagsService),brandTagsService.$inject=["$resource","$uibModal","$q","Sections"]}(),angular.module("gmall.controllers").controller("stuffsFilterCtrl",["$scope","$resource","$rootScope","global","Stuff","$section","$location","$q","Collection","$anchorScroll","$timeout",function($scope,$resource,$rootScope,global,Stuff,$section,$location,$q,Collection,$anchorScroll,$timeout){function _getCollections(){var query={brand:$scope.stuffsFilterCtrl.query.brand,group:$scope.stuffsFilterCtrl.query.section};Collection.getCollectionsForBrand({query:query},function(res){if(res.shift(),$scope.stuffsFilterCtrl.brandCollections=res,$scope.stuffsFilterCtrl.brandCollections&&$stateParams.brandTag){var brandTag=$scope.stuffsFilterCtrl.brandCollections.getObjectFromArray("url",$stateParams.brandTag);brandTag?($scope.stuffsFilterCtrl.query.brandTag=brandTag._id,$location.search("brandTag",brandTag.url)):$location.search("brandTag",null)}})}function _getQueryTag(){var arr=[];return $scope.stuffsFilterCtrl.query.tags.forEach(function(tags){tags.length&&tags.forEach(function(tag){arr.push(tag)})}),arr.length?arr.map(function(tag){return global.get("filterTags").val.getObjectFromArray("_id",tag).url}).join("+"):void 0}function _getBrand(){if($scope.stuffsFilterCtrl.query.brand)return global.get("brands").val.getObjectFromArray("_id",$scope.stuffsFilterCtrl.query.brand).url}function _getBrandTag(){if($scope.stuffsFilterCtrl.query.brandTag)return $scope.stuffsFilterCtrl.brandCollections.getObjectFromArray("_id",$scope.stuffsFilterCtrl.query.brandTag).url}var $state=$rootScope.$state,$stateParams=$rootScope.$stateParams;$scope.stuffsFilterCtrl=this,$scope.stuffsFilterCtrl.paginate={page:0,rows:50,totalItems:0},$scope.stuffsFilterCtrl.query={section:"",brand:"",category:"",tags:[],artikul:$stateParams.searchStr?$stateParams.searchStr.clearTag(20):"",brandTag:""},$scope.stuffsFilterCtrl.categories=[];var queryTags,category;$scope.stuffsFilterCtrl.brands=[],$scope.stuffsFilterCtrl.brandCollections=[],$scope.stuffsFilterCtrl.filters=[],function(){var q=$q.defer();return q.resolve(),q.promise}().then(function(){var q=$q.defer();if("brand"!=$stateParams.groupUrl&&"group"!=$stateParams.groupUrl){var group=global.get("groups").val.getObjectFromArray("url",$stateParams.groupUrl);if(group){if($scope.stuffsFilterCtrl.query.section=group._id,$stateParams.parentGroup){var categories=$section.getCategories($stateParams.parentGroup).map(function(i){return i._id?i._id:i});categories&&($scope.stuffsFilterCtrl.categories=global.get("categories").val.filter(function(item){return categories.indexOf(item._id)>-1}))}q.resolve($scope.stuffsFilterCtrl.categories)}else $state.go("404")}else q.resolve(1);return q.promise}).then(function(r){var q=$q.defer();return $scope.stuffsFilterCtrl.categories.length&&$stateParams.categoryUrl?"id"!=$stateParams.categoryUrl&&(category=$scope.stuffsFilterCtrl.categories.getObjectFromArray("url",$stateParams.categoryUrl),category?$scope.stuffsFilterCtrl.query.category=category._id:$state.go("404")):"id"!=$stateParams.categoryUrl&&(category=global.get("categories").val.getObjectFromArray("url",$stateParams.categoryUrl))&&($scope.stuffsFilterCtrl.query.category=category._id,$scope.stuffsFilterCtrl.categories=$section.getCategories(category.group.url)),q.resolve(),q.promise}).then(function(){var q=$q.defer();if($scope.stuffsFilterCtrl.query.category&&($scope.stuffsFilterCtrl.brands=global.get("brands").val.getArrayObjects("categories",$scope.stuffsFilterCtrl.query.category)),1===$scope.stuffsFilterCtrl.brands.length)$scope.stuffsFilterCtrl.query.brand=$scope.stuffsFilterCtrl.brands[0]._id;else if($stateParams.brand){var brand=$scope.stuffsFilterCtrl.brands.getObjectFromArray("url",$stateParams.brand);brand&&($scope.stuffsFilterCtrl.query.brand=brand._id,$location.search("brand",brand.url))}return $scope.stuffsFilterCtrl.query.brand||$location.search("brand",null),q.resolve(),q.promise}).then(function(){var q=$q.defer();if($scope.stuffsFilterCtrl.query.brand){var query={brand:$scope.stuffsFilterCtrl.query.brand,group:$scope.stuffsFilterCtrl.query.section};Collection.getCollectionsForBrand({query:query},function(res){if(res.shift(),$scope.stuffsFilterCtrl.brandCollections=res,$stateParams.brandTag){var brandTag=$scope.stuffsFilterCtrl.brandCollections.getObjectFromArray("url",$stateParams.brandTag);brandTag?($scope.stuffsFilterCtrl.query.brandTag=brandTag._id,$location.search("brandTag",brandTag.url)):$location.search("brandTag",null)}q.resolve(1)},function(){q.resolve(3)})}else q.resolve(2);return q.promise}).then(function(){var q=$q.defer();return $stateParams.queryTag&&(queryTags=$stateParams.queryTag.split("+"),queryTags=queryTags.filter(function(item,pos){return queryTags.indexOf(item)==pos}),queryTags=queryTags.reduce(function(tags,tag){var t;return(t=global.get("filterTags").val.getObjectFromArray("url",tag))&&tags.push(t),tags},[])),q.resolve(),q.promise}).then(function(){var q=$q.defer();if($scope.stuffsFilterCtrl.query.category){var filters=global.get("filters").val.filter(function(item){return!item.dontshow&&category.filters.indexOf(item._id)>-1});filters.forEach(function(item,i){item.tags=[],global.get("filterTags").val.forEach(function(tag){tag.filter==item._id&&item.tags.push(tag)}),queryTags&&queryTags.length&&queryTags.forEach(function(tag){tag.filter==item._id&&($scope.stuffsFilterCtrl.query.tags[i]||($scope.stuffsFilterCtrl.query.tags[i]=[]),$scope.stuffsFilterCtrl.query.tags[i].push(tag._id))})}),$scope.stuffsFilterCtrl.filters=filters}else queryTags&&queryTags.length&&($scope.stuffsFilterCtrl.query.tags[0]=[queryTags[0]._id],$location.search("queryTag",queryTags[0].url));return q.resolve("finsh"),q.promise}).then(function(r){$scope.stuffsFilterCtrl.getList($scope.stuffsFilterCtrl.paginate.page,$scope.stuffsFilterCtrl.paginate.rows)});var prevBrand;$scope.stuffsFilterCtrl.getList=function(page,rows){prevBrand=$scope.stuffsFilterCtrl.query.brand;var query=[];global.get("nostore").val&&query.push({tags:{$nin:[global.get("nostore").val._id]}});var queryTag=[];for(var key in $scope.stuffsFilterCtrl.query)if($scope.stuffsFilterCtrl.query[key])if("tags"==key){var qu=[];$scope.stuffsFilterCtrl.query[key].filter(function(){return!0});$scope.stuffsFilterCtrl.query[key].forEach(function(obj,i){var q=[];obj&&obj.length&&(obj.forEach(function(objT){q.push({tags:objT})}),q.length>1?(q={$or:q},qu.push(q)):(q=q[0],qu.push(q)))}),qu.length&&(1==qu.length?query.push(qu[0]):query.push({$and:qu}))}else{var obj={};obj[key]=$scope.stuffsFilterCtrl.query[key],query.push(obj)}query=1==query.length?JSON.stringify(query[0]):query.length>1?JSON.stringify({$and:query}):"";var queryTag=_getQueryTag(),brandTag=_getBrandTag(),brand=_getBrand(),queryTagsForSEO="";queryTag&&(queryTagsForSEO+="queryTag="+queryTag),brand&&(queryTagsForSEO&&(queryTagsForSEO+="&"),queryTagsForSEO+="brand="+brand),brandTag&&(queryTagsForSEO&&(queryTagsForSEO+="&"),queryTagsForSEO+="brandTag="+brandTag),console.log(queryTagsForSEO),$rootScope.$broadcast("$allDataLoaded",{state:$state.current.name,data:queryTagsForSEO}),$scope.stuffsFilterCtrl.queryForDirective=query},$scope.stuffsFilterCtrl.changeFilter=function(c){$anchorScroll();var category=$scope.stuffsFilterCtrl.query.category?$scope.stuffsFilterCtrl.categories.getObjectFromArray("_id",$scope.stuffsFilterCtrl.query.category):{name:"category",url:"id"};if(c){$state.current.reloadOnSearch=!0;var o={groupUrl:$stateParams.groupUrl,categoryUrl:category.url,categoryName:category.name,queryTag:void 0,brand:void 0,brandTag:void 0};$state.go($state.current.name,o,{reload:!0}),$state.current.reloadOnSearch=!1}else{$location.search(""),$scope.stuffsFilterCtrl.query.artikul="",!$scope.stuffsFilterCtrl.query.brand||$scope.stuffsFilterCtrl.brandCollections&&prevBrand==$scope.stuffsFilterCtrl.query.brand?$scope.stuffsFilterCtrl.query.brand||($scope.stuffsFilterCtrl.brandCollections=null,$scope.stuffsFilterCtrl.query.brandTag=""):(_getCollections($scope.stuffsFilterCtrl.query.brand),$scope.stuffsFilterCtrl.query.brandTag=""),$scope.stuffsFilterCtrl.paginate.page=0,$scope.stuffsFilterCtrl.getList($scope.stuffsFilterCtrl.paginate.page,$scope.stuffsFilterCtrl.paginate.rows);var queryTag=_getQueryTag(),brandTag=_getBrandTag(),brand=_getBrand();queryTag&&$location.search("queryTag",queryTag),brandTag&&$location.search("brandTag",brandTag),brand&&$location.search("brand",brand),$stateParams.brandTag&&$location.search("brandTag",$stateParams.brandTag)}},$scope.stuffsFilterCtrl.clearFilter=function(){console.log("clear filetrs"),$scope.stuffsFilterCtrl.query.tags=[],$scope.stuffsFilterCtrl.changeFilter()}}]).controller("stuffsLWPCtrl",["$scope","$resource","$rootScope","global","Stuff","$section","$location","$q","Collection","$anchorScroll","$timeout",function($scope,$resource,$rootScope,global,Stuff,$section,$location,$q,Collection,$anchorScroll,$timeout){var $state=$rootScope.$state;$rootScope.$stateParams;$scope.stuffsLWPCtrl=this,$scope.stuffsLWPCtrl.query=null,$scope.stuffsLWPCtrl.paginate={page:0,rows:20,totalItems:0},$scope.stuffsLWPCtrl.query=null,$scope.stuffsLWPCtrl.getList=function(page,rows){Stuff.getList($scope.stuffsLWPCtrl.query,null,page,rows,$scope.stuffsLWPCtrl.paginate).then(function(res){$scope.stuffsLWPCtrl.items=res,$scope.stuffsLWPCtrl.query=null},function(err){$state.go("404")})},$scope.$watch(function(){return $scope.stuffsLWPCtrl.query},function(n){n&&($scope.stuffsLWPCtrl.paginate.page=0,$scope.stuffsLWPCtrl.getList($scope.stuffsLWPCtrl.paginate.page,$scope.stuffsLWPCtrl.paginate.rows))}),$timeout(function(){$scope.stuffsLWPCtrl.getList($scope.stuffsLWPCtrl.paginate.page,$scope.stuffsLWPCtrl.paginate.rows)}),$scope.getUrlParams=Stuff.getUrlParams,$scope.getCategoryName=Stuff.getCategoryName,$scope.getBrandName=Stuff.getBrandName}]),function(){function stuffService($resource,$uibModal,$q,Sections,$stateParams,$state,$location,Brands,FilterTags,global,$order,exception,$user,$email,CreateContent,$rootScope,Filters,$timeout){function _salePrice(doc,sale){if(doc.driveSalePrice&&doc.driveSalePrice.maxDiscount&&(doc.maxDiscount=doc.driveSalePrice.maxDiscount),doc.driveSalePrice&&0!=doc.driveSalePrice.type){if(2==doc.driveSalePrice.type){doc.priceSale=Math.ceil10(Number(doc.price)-sale*doc.price,-2);for(var key in doc.stock)doc.stock[key].priceSale=Math.ceil10(Number(doc.stock[key].price)-sale*doc.stock[key].price,-2)}else if(1==doc.driveSalePrice.type)if(doc.driveSalePrice.condition){sale=doc.driveSalePrice.percent/100,doc.priceSale=Math.ceil10(Number(doc.price)-sale*doc.price,-2);for(var key in doc.stock)doc.stock[key].priceSale=Math.ceil10(Number(doc.stock[key].price)-sale*doc.stock[key].price,-2)}else{sale=Number(doc.driveSalePrice.sum),doc.priceSale=Math.ceil10(Number(doc.price)-sale,-2);for(var key in doc.stock)doc.stock[key].priceSale=Math.ceil10(Number(doc.stock[key].price)-sale,-2)}}else{doc.priceSale=0;for(var key in doc.stock)doc.stock[key].priceSale=0}}function _retailPrice(doc,retail){if(doc.driveRetailPrice||(global.get("store").val.seller.retail?doc.driveRetailPrice={type:2}:doc.driveRetailPrice={type:0}),0==doc.driveRetailPrice.type){doc.retail=0;for(var key in doc.stock)doc.stock[key].retail=0}else if(2==doc.driveRetailPrice.type){doc.retail=Math.ceil10(Number(doc.price)+retail*Number(doc.price),-2);for(var key in doc.stock)doc.stock[key].retail=Math.ceil10(Number(doc.stock[key].price)+retail*doc.stock[key].price,-2)}else if(1==doc.driveRetailPrice.type)if(doc.driveRetailPrice.condition){retail=doc.driveRetailPrice.percent/100,doc.retail=Math.ceil10(Number(doc.price)+retail*doc.price,-2);for(var key in doc.stock)doc.stock[key].retail=Math.ceil10(Number(doc.stock[key].price)+retail*doc.stock[key].price,-2)}else{retail=Number(doc.driveRetailPrice.sum),doc.retail=Math.ceil10(Number(doc.price)+retail,-2);for(var key in doc.stock)doc.stock[key].retail=Math.ceil10(Number(doc.stock[key].price)+retail,-2)}}function _setPrice(doc){doc||(doc=this),doc.price<0&&(doc.price=0),doc.sort=null;var sale=(global.get("store").val.seller.sale||0)/100,retail=(global.get("store").val.seller.retail||0)/100,el=doc?doc:this;if(el.stock&&"object"==typeof el.stock?el.stock.notag&&(el.stock.notag.price=el.price):(el.stock={notag:{quantity:1,price:el.price}},el.sort="notag"),global.get("currency")&&el.currency&&global.get("store").val.mainCurrency!=el.currency){el.price=Math.ceil10(Number(el.price)/Number(global.get("store").val.currency[el.currency][0]),-2);for(var tag in el.stock)el.stock[tag].price=Math.ceil10(Number(el.stock[tag].price)/Number(global.get("store").val.currency[el.currency][0]),-2)}return _salePrice(el,sale),_retailPrice(el,retail),el}function _changeSortOfStuff(sort){if(!(this.stock&&sort&&this.stock[sort])||this.stock[sort].quantity)if(sort&&(this.sort=sort),this.sort){var sort=this.stock[this.sort];this.sortName=sort.name,this.price=sort.price,this.priceSale=sort.priceSale,this.retail=sort.retail,this.priceCampaign=sort.priceCampaign}else this.sortName=null,this.stock&&this.stock.notag||(this.price=0,this.priceSale=0,this.retail=0)}function _addItemToOrder(){var self=this;if(!this.sort)return this.unableToOrder=!0,$timeout(function(){self.unableToOrder=!1},2500),"nosort";this.sortsOfStuff&&this.sortsOfStuff.filter&&!this.sort?exception.catcher("ошибка")("выберите разновидность"):(this.stock[this.sort].name&&(this.sortName=this.stock[this.sort].name),$order.addItemToCart(this)),$rootScope.$emit("AddToCart")}function _dateTime(){var self=this;if(!this.sort)return this.unableToOrder=!0,$timeout(function(){self.unableToOrder=!1},2500),"nosort";global.get("functions").val.witget("dateTime",{stuff:this})}function _setSticker(stuff){return FilterTags.getSticker(stuff.tags)}function _checkInCart(){return $order.checkInCart(this)}function zoomImgGlobal(i,images,home){var img,horizontalOrient,squareH,squareV,w=Math.max(document.documentElement.clientWidth,window.innerWidth||0),h=Math.max(document.documentElement.clientHeight,window.innerHeight||0),imgs=$("img[src$='"+images[i].img+"']");if(imgs&&imgs[0]?(img=$(imgs[0]),img.width()&&img.height()&&(img.width()>img.height()&&(horizontalOrient=!0),(img.width()===img.height()||img.width()-img.height()<5)&&(w>h?squareH=!0:squareV=!0,horizontalOrient=!1))):(imgs=$("img[src$='"+images[i].thumb+"']"),imgs&&imgs[0]?(img=$(imgs[0]),img.width()&&img.height()&&(img.width()>img.height()&&(horizontalOrient=!0),(img.width()===img.height()||img.width()-img.height()<5)&&(horizontalOrient=!1,w>h?squareH=!0:squareV=!0))):images[i].el&&images[i].el.width&&images[i].el.height&&(images[i].el.width>images[i].el.height&&(horizontalOrient=!0),(images[i].el.width===images[i].el.height||images[i].el.width-images[i].el.height<5)&&(horizontalOrient=!1,w>h?squareH=!0:squareV=!0))),!delay){delay=!0,$timeout(function(){delay=!1},1e3);var content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no",viewPort=document.getElementById("viewport"),templ=global.get("store").val.template.addcomponents&&global.get("store").val.template.addcomponents.zoom&&global.get("store").val.template.addcomponents.zoom.templ?global.get("store").val.template.addcomponents.zoom.templ:"",templateUrl="views/template/partials/stuffDetail/modal/zoom"+templ+".html";viewPort.setAttribute("content","width=device-width, initial-scale=1, maximum-scale=3"),$rootScope.$emit("modalOpened");var options={animation:!0,bindToController:!0,controllerAs:"$ctrl",windowClass:function(){return squareH?"zoom zoom-modal-squareH":squareV?"zoom zoom-modal-squareV":horizontalOrient?"zoom zoom-modal-horizontal":"zoom zoom-modal-vertical"},templateUrl:templateUrl,controller:function($uibModalInstance,global,gallery,i,home,horizontalOrient){function next(i){delay||(delay=!0,i+1==self.gallery.length?(self.gallery[0].active=!0,self.idx=0):(self.gallery[i+1].active=!0,self.idx=i+1),$timeout(function(){delay=!1},500))}function prev(i){delay||(delay=!0,0==i?(self.gallery[self.gallery.length-1].active=!0,self.idx=self.gallery.length-1):(self.gallery[i-1].active=!0,self.idx=i-1),$timeout(function(){delay=!1},500))}function chancheActiveSlide(i){self.gallery[i].active=!0,self.idx=i}var self=this;self.style=home?horizontalOrient?"width:98vw;height:auto":"height:93vh;width:auto":"width:100%",self.modal=global.get("mobile").val,self.idx=i,self.gallery=angular.copy(gallery),self.gallery[i].active=!0,self.next=next,self.prev=prev,self.chancheActiveSlide=chancheActiveSlide;var delay=!1;self.ok=function(){$uibModalInstance.close()},self.cancel=function(){$uibModalInstance.dismiss()}},resolve:{gallery:function(){return images},i:function(){return i},home:function(){return home},horizontalOrient:horizontalOrient}};home||(options.size="lg"),$q.when().then(function(){return $uibModal.open(options).result}).then(function(res){viewPort.setAttribute("content",content),$rootScope.$emit("modalClosed")}).catch(function(err){viewPort.setAttribute("content",content),$rootScope.$emit("modalClosed"),err&&"backdrop click"!=err&&(err=err.data||err,exception.catcher("zoom")(err))})}}function _zoomImg(i){zoomImgGlobal(i,this.gallery)}function _setCategoryName(item){if(item.category&&item.category._id&&(item.category=[item.category]),item.category&&item.category.length)for(var i=0,c=null;i<item.category.length&&!c;)"object"==typeof item.category[i]&&(item.category[i]=item.category[i]._id),global.get("categoriesO").val[item.category[i]]&&(c=global.get("categoriesO").val[item.category[i]]),i++;if(global.get("categories").val&&(c||(c=categoriesLink[item.category]?categoriesLink[item.category]:global.get("categories").val.getOFA("_id",item.category)),c?(item.categoryUrl=c.url,item.categoryName=c.name,c.linkData?(item.groupUrl=c.linkData.groupUrl,item.parentGroup=c.linkData.parentGroup||null):(item.groupUrl="group",item.categoryUrl="category",item.parentGroup=null)):(item.groupUrl="group",item.categoryUrl="category")),item.brand&&global.get("brands")&&global.get("brands").val){"object"==typeof item.brand&&(item.brand=item.brand._id);var b=global.get("brands").val.getOFA("_id",item.brand);if(b&&(item.brandUrl=b.url,item.brandName=b.name,item.brandTag)){var bt=b.tags.getOFA("_id",item.brandTag);bt&&(item.brandTagUrl=bt.url,item.brandTagName=bt.name)}}}function _setDataForStuff(stuff,filterTags,stuffsState){if(stuff.changeSortOfStuff=_changeSortOfStuff,stuff.addItemToOrder=_addItemToOrder,stuff.dateTime=_dateTime,stuff.onSelected=_onSelectedSort,stuff.order=_orderStuff,stuff.getBonus=_getBonus,stuff.zoomImg=_zoomImg,stuff.checkInCart=_checkInCart,stuff.getDataForBooking=_getDataForBooking,_setCategoryName(stuff),_setPrice(stuff),stuff.setPrice=_setPrice,stuff.multiple&&stuff.minQty?stuff.quantity=Number(stuff.minQty):(stuff.quantity=1,stuff.minQty=1),stuff.single||(stuff.maxQty=150),stuff.sale||_checkCamapign(stuff),stuff.expected=!0,stuff.stock&&"object"==typeof stuff.stock&&!stuff.stock.notag){if(stuff.sortsOfStuff&&stuff.sortsOfStuff.filterGroup&&global.get("filtersO")&&global.get("filtersO").val&&global.get("filtersO").val[stuff.sortsOfStuff.filterGroup]){var filterGroupTags,filterGroup=global.get("filtersO").val[stuff.sortsOfStuff.filterGroup];if(filterGroup){stuff.sortsOfStuff.name=filterGroup.name.charAt(0).toUpperCase()+filterGroup.name.slice(1).toLowerCase(),stuff.groupName=stuff.sortsOfStuff.name,filterGroupTags=filterGroup.tags.map(function(t){return t._id});for(var ii=0;ii<stuff.tags.length;ii++){var idx=filterGroupTags.indexOf(stuff.tags[ii]);if(idx>-1){stuff.groupTagName=filterGroup.tags[idx].name.charAt(0).toUpperCase()+filterGroup.tags[idx].name.slice(1).toLowerCase();break}}}}if(stuff.sortsOfStuff&&stuff.sortsOfStuff.filter&&global.get("filtersO")&&global.get("filtersO").val&&global.get("filtersO").val[stuff.sortsOfStuff.filter]&&(stuff.filterName=global.get("filtersO").val[stuff.sortsOfStuff.filter].name.toLowerCase(),stuff.filterName=stuff.filterName.charAt(0).toUpperCase()+stuff.filterName.slice(1).toLowerCase()),stuff.sortsOfStuff&&stuff.sortsOfStuff.stuffs)for(var i21=0;i21<stuff.sortsOfStuff.stuffs.length;i21++)if(stuff.sortsOfStuff.stuffs[i21]._id!=stuff._id&&stuff.sortsOfStuff.stuffs[i21].archived)stuff.sortsOfStuff.stuffs.splice(i21,1),i21--;else if(stuff.sortsOfStuff.stuffs[i21].stock&&"object"==typeof stuff.sortsOfStuff.stuffs[i21].stock)for(var k in stuff.sortsOfStuff.stuffs[i21].stock)stuff.sortsOfStuff.stuffs[i21].stock[k].quantity&&(stuff.sortsOfStuff.stuffs[i21].stock[k].quantity=Number(stuff.sortsOfStuff.stuffs[i21].stock[k].quantity));var keys=Object.keys(stuff.stock);stuff.stockKeysArray=keys.map(function(k){if(stuff.stock[k].quantity=Number(stuff.stock[k].quantity),global.get("filterTagsO")&&global.get("filterTagsO").val&&global.get("filterTagsO").val[k])var tag=global.get("filterTagsO").val[k];else var tag=filterTags.getOFA("_id",k);return tag?{_id:k,index:tag.index,name:tag.name,quantity:Number(stuff.stock[k].quantity)}:null}).filter(function(key){return key}).sort(function(a,b){return a&&b?a.index-b.index:1});var sort_Id=null;stuff.stockKeysArray.forEach(function(key){stuff.sort||global.get("sectionType")&&global.get("sectionType").val&&global.get("store").val.template.stuffListType[global.get("sectionType").val].unsetSort&&"stuffs.stuff"==$state.current.name&&!stuffsState||!sort_Id&&stuff.stock[key._id].quantity&&(sort_Id=key._id,stuff.sort=sort_Id),key.quantity=Number(stuff.stock[key._id].quantity),key.quantity&&stuff.expected&&(stuff.expected=!1),key.quantity&&(stuff.multiple&&stuff.minQty?key.quantity=Number(stuff.minQty):(key.quantity=1,stuff.minQty=1)),stuff.stock[key._id].name=key.name}),stuff.stockKeysArray.length&&sort_Id&&_changeSortOfStuff.call(stuff,sort_Id)}else stuff.stock&&"object"==typeof stuff.stock&&stuff.stock.notag&&(stuff.stock.notag.quantity&&(stuff.sort="notag",stuff.expected=!1),stuff.stockKeysArray=[{name:"notag",_id:"notag",quantity:stuff.stock.notag.quantity}]);if(stuff.campaignId||(stuff.sticker=_setSticker(stuff)),stuff.gallery&&stuff.gallery.length&&stuff.gallery.sort(function(a,b){return a.index-b.index}),!stuffsState&&void 0!==_filtersO&&stuff.sortsOfStuff&&stuff.sortsOfStuff.stuffs&&stuff.sortsOfStuff.stuffs.length){var filterGroup,filterGroupTags=[];stuff.sortsOfStuff.filterGroup&&(filterGroup=_filtersO[stuff.sortsOfStuff.filterGroup])&&(filterGroupTags=filterGroup.tags.map(function(t){return t._id})),stuff.sortsOfStuff.stuffs.forEach(function(itemS,i){itemS.gallery.forEach(function(s,ii){s.active=!ii});for(var ii=0;ii<itemS.tags.length;ii++){var idx=filterGroupTags.indexOf(itemS.tags[ii]);if(idx>-1){filterGroup.tags[idx].img&&(stuff.sortsOfStuff.stuffs[i].gallery[0].thumbSmallTag=filterGroup.tags[idx].img);break}}})}return stuff}function _onSelectedSort(){setTimeout(function(){$(":focus").blur()},50)}function _orderStuff(){var stuff=this;$order.clearCart(),stuff.cena=stuff.price,stuff.sum=stuff.cena*stuff.quantity,"nosort"!=stuff.addItemToOrder()&&$q.when().then(function(){return $user.getInfo(stuff.service)}).then(function(user){return $order.checkOutFromList(user)}).then(function(){$order.clearCart()}).catch(function(err){$order.clearCart(),err&&exception.catcher("заказ")(err)})}function getAllBonus(){return _getBonus(!0)}function _getBonus(all){var stuffs,stuff=this;return $q.when().then(function(){if(all){return getList({page:0,rows:100},{$and:[{orderType:4},{actived:!0}]})}return[stuff]}).then(function(sts){stuffs=sts}).then(function(){return $user.getInfoBonus()}).then(function(user){if(!user||!user.email)throw"нет email";var content=CreateContent.emailBonus(stuffs),bonus=stuffs&&stuffs[0]&&stuffs[0].imgs&&stuffs[0].imgs[0]&&stuffs[0].imgs[0].name?stuffs[0].imgs[0].name:"получение контента",domain=global.get("store").val.domain,o={email:user.email,content:content,subject:bonus+" ✔",from:"<promo@"+domain+">"};return $q(function(resolve,reject){$email.save(o,function(res){exception.showToaster("note","Сообщение","На Ваш email отправлено письмо"),resolve()},function(err){exception.showToaster("warning","отправка уведомления",err.data),resolve()})})}).then(function(){var states=$state.get();if(global.get("paps")&&states.some(function(state){return"thanksPage"==state.name})){var pap=global.get("paps").val.getOFA("action","bonus");pap&&pap.url?$state.go("thanksPage",{id:pap.url}):exception.showToaster("note","Заказ","Все прошло успешно.")}else exception.showToaster("note","Заказ","Все прошло успешно.")}).catch(function(err){err&&exception.catcher("получение бонуса")(err)})}function _checkCamapign(stuff){return $order.checkCampaign(stuff)}function _getDataForBooking(){var el=this,stuff={_id:this._id,artikul:this.artikul,name:this.name,nameL:this.nameL,link:this.link,backgroundcolor:this.backgroundcolor,timePart:el.timePart?el.timePart:4,price:this.price,priceSale:this.priceSale,currency:this.currency};return el.sort&&(stuff.price=el.stock[el.sort].price,stuff.priceSale=el.stock[el.sort].priceSale,stuff.timePart=el.stock[el.sort].timePart?el.stock[el.sort].timePart:4),el.sortName&&(stuff.name=el.name+" "+el.sortName),stuff}function getList(paginate,query,search){function getListComplete(response){0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0);var maxIndex;return $q.when().then(function(){return FilterTags.getFilterTags()}).then(function(ft){response.forEach(function(el){99999==el.index&&maxIndex&&el.index--,99999==el.index&&(maxIndex=!0),_setDataForStuff(el,ft)})}).then(function(){return response})}function getListFailed(error){return console.log("XHR Failed for getStuffs."+error),$q.reject(error)}paginate||(paginate={page:0});var data={perPage:paginate.rows,page:paginate.page,query:query,search:search};return global.get("crawler")&&global.get("crawler").val&&(data.subDomain=global.get("store").val.subDomain),Items.query(data).$promise.then(getListComplete).catch(getListFailed)}function search(search,setData){function getListComplete(response){return setData?$q.when().then(function(){return FilterTags.getFilterTags()}).then(function(ft){response.forEach(function(el){99999==el.index&&maxIndex&&el.index--,99999==el.index&&(maxIndex=!0),_setDataForStuff(el,ft)})}).then(function(){return response}):response}function getListFailed(error){return console.log("XHR Failed for getStuffs."+error),$q.reject(error)}var data={search:search,setData:setData};return Items.query(data).$promise.then(getListComplete).catch(getListFailed)}function getItem(id,o){function getItemComplete(res){return $q.when().then(function(){return FilterTags.getFilterTags()}).then(function(ft){return _setDataForStuff(res,ft),res})}function getItemFailed(error){return $q.reject(error)}var query={_id:id};if(o)for(var k in o)query[k]=o[k];return Items.get(query).$promise.then(getItemComplete).catch(getItemFailed)}function create(){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/stuff/createStuff.html",controller:function($uibModalInstance){var self=this;self.item="",self.ok=function(){$uibModalInstance.close(self.item)},self.cancel=function(){$uibModalInstance.dismiss()}},controllerAs:"$ctrl"}).result.then(function(item){item.name?resolve(item):reject()},function(err){reject(err)})})}function getQueryFromUrl(campaignCondition){function setQueryForCampaign(campaign,campaignCondition){var query={};return $q.when().then(function(){return FilterTags.getFilterTags()}).then(function(filterTags){campaignCondition?(campaign.conditionTags&&campaign.conditionTags.length&&(query.queryTags={},campaign.conditionTags.forEach(function(tag){var t=filterTags.getOFA("_id",tag);t&&(query.queryTags[t.filter]||(query.queryTags[t.filter]=[]),query.queryTags[t.filter].push(t._id))})),campaign.conditionBrandTags&&campaign.conditionBrandTags.length&&(query.brandTag={$in:campaign.conditionBrandTags}),campaign.conditionBrands&&campaign.conditionBrands.length&&(query.brand={$in:campaign.conditionBrands}),campaign.conditionCategories&&campaign.conditionCategories.length&&(query.category={$in:campaign.conditionCategories}),campaign.conditionStuffs&&campaign.conditionStuffs.length&&(query._id={$in:campaign.conditionStuffs})):(campaign.tags&&campaign.tags.length&&(query.queryTags={},campaign.conditionTags.forEach(function(tag){var t=filterTags.getOFA("_id",tag);t&&(query.queryTags[t.filter]||(query.queryTags[t.filter]=[]),query.queryTags[t.filter].push(t._id))})),campaign.brandTags&&campaign.brandTags.length&&(query.brandTag={$in:campaign.brandTags}),campaign.brands&&campaign.brands.length&&(query.brand={$in:campaign.brands}),campaign.categories&&campaign.categories.length&&(query.category={$in:campaign.categories}),campaign.stuffs&&campaign.stuffs.length&&(query._id={$in:campaign.stuffs})),_setQueryForTags(query);var keys=Object.keys(query),q={};if(1==keys.length)q=query;else if(keys.length>1){q.$or=[];for(var k in query){var o={};o[k]=query[k],q.$or.push(o)}}return q.actived=!0,q})}
return"campaign.detail"==$state.current.name?$q.when().then(function(){return global.get("campaign").val}).then(function(campaigns){var campaign=campaigns.getOFA("url",$stateParams.id);if(campaign)return setQueryForCampaign(campaign,campaignCondition)}):queryData}function getQuery(stateParams,to){return _setQuery(stateParams,to)}function _setQueryForTags(query,filters){if(query.queryTags&&"object"==typeof query.queryTags){try{var keys=Object.keys(query.queryTags)}catch(err){keys=[]}1==keys.length?query.tags={$in:query.queryTags[keys[0]]}:keys.length>1&&(query.$and=[],keys.forEach(function(k){query.$and.push({tags:{$in:query.queryTags[k]}})}))}if(delete query.queryTags,query.filters&&"object"==typeof query.filters){try{var keys=Object.keys(query.filters)}catch(err){keys=[]}if(1==keys.length){var filter;filters&&(filter=filters.getOFA("_id",keys[0])),filter&&filter.price?(query.priceForFilter=query.filters[keys[0]],console.log("query.filters[keys[0]]",query.filters[keys[0]])):query["filters."+keys[0]]=query.filters[keys[0]]}else if(keys.length>1&&(query.$and||(query.$and=[]),keys.forEach(function(k){var filter;if(filters&&(filter=filters.getOFA("_id",k)),filter&&filter.price)query.priceForFilter=query.filters[k];else{var o={};o["filters."+k]=query.filters[k],query.$and.push(o)}}),1==query.$and.length)){for(var k in query.$and[0])query[k]=query.$and[0][k];delete query.$and}}delete query.filters}function _setQuery(stateParams,to){global.set("category",null);var parentSection,sectionCategories,categoryBrands=[],categoryFilters=[],query={},breadcrumbs=[];return $q(function(resolve,reject){$q.when().then(function(){return $q.all([Sections.getSections(),Brands.getBrands(),Filters.getFilters()])}).then(function(data){var sections=data[0],brands=data[1],filters=data[2];if(parentSection=Sections.getSection(sections,stateParams.groupUrl),global.set("parentSection",parentSection),parentSection)if("category"!=stateParams.categoryUrl){if(!parentSection.categories||!parentSection.categories.length)throw 404;var categorySet;if(parentSection.categories.forEach(function(c){c.url==stateParams.categoryUrl?(global.set("category",c),categorySet=!0,c.set=!0,query.category=c._id,categoryBrands=c.brands,categoryFilters=c.filters):c.set=!1}),!query.category)throw 404}else sectionCategories=Sections.getEmbededCategories(parentSection,[]).map(function(el){return el._id}),sectionCategories.length?(query.category={$in:sectionCategories},sectionCategories.forEach(function(cat){var c=global.get("categoriesO").val[cat];c.filters.forEach(function(f){categoryFilters.indexOf(f)<0&&categoryFilters.push(f)}),c.brands.forEach(function(b){categoryBrands.indexOf(b)<0&&categoryBrands.push(b)})})):query.category=null;var brandSet,brandTagSet,brandsArr,brandTagsArr;stateParams.brand&&(brandsArr=stateParams.brand.split("__")),stateParams.brandTag&&(brandTagsArr=stateParams.brandTag.split("__")),query.brand=[],query.brandTag=[],brands.forEach(function(b){b.inList=!1,b.showCollections=!1,"stuffs"==to.name||"stuffs.stuff"==to.name?categoryBrands&&categoryBrands.length&&categoryBrands.indexOf(b._id)>-1&&(b.inList=!0):b.inList=!0,brandsArr&&brandsArr.indexOf(b.url)>-1?(query.brand.push(b._id),b.set=!0,breadcrumbs.push({type:"brand",name:b.name,url:b.url}),brandSet=!0):b.set=!1,b.tags.forEach(function(t){brandTagsArr&&brandTagsArr.indexOf(t.url)>-1?(query.brandTag.push(t._id),t.set=!0,breadcrumbs.push({type:"brandTag",name:t.name,url:t.url}),b.showCollections=!0,brandTagSet=!0):t.set=!1})}),query.brand.length?1==query.brand.length?query.brand=query.brand[0]:query.brand={$in:query.brand}:query.brand=null,query.brandTag.length?1==query.brandTag.length?query.brandTag=query.brandTag[0]:query.brandTag={$in:query.brandTag}:query.brandTag=null,query.brandTag||delete query.brandTag,query.brand||delete query.brand,brandSet||$location.search("brand",null),brandTagSet||$location.search("brandTag",null);var queryTags;stateParams.queryTag&&(queryTags=stateParams.queryTag.split("__"),queryTags=queryTags.filter(function(item,pos){return queryTags.indexOf(item)==pos})),query.filters={};var filterTags;if(stateParams.filterTag&&(filterTags=stateParams.filterTag.split("__"),filterTags=filterTags.filter(function(item,pos){return filterTags.indexOf(item)==pos}),filterTags=filterTags.map(function(f){return f.split("_")}).filter(function(f){return 3==f.length}).forEach(function(f){query.filters[f[0]]={$gte:Number(f[1]),$lte:Number(f[2])}})),query.queryTags={},filters.forEach(function(f){f.inList=!1,"stuffs"==to.name||"stuffs.stuff"==to.name?categoryFilters.indexOf(f._id)>-1&&(f.inList=!0,f.open=!1):f.inList=!0,categoryFilters&&categoryFilters.length&&categoryFilters.indexOf(f._id)>-1&&(f.inList=!0,f.open=!1),f.count?query.filters[f._id]?(f.open=!0,f.set=!0,f.minValue=query.filters[f._id].$gte,f.maxValue=query.filters[f._id].$lte):(f.minValue=f.min,f.maxValue=f.max):f.tags.forEach(function(t){queryTags&&queryTags.indexOf(t.url)>-1?(query.queryTags[t.filter]||(query.queryTags[t.filter]=[]),query.queryTags[t.filter].push(t._id),f.open=!0,t.set=!0,breadcrumbs.push({type:"queryTag",name:t.name,url:t.url})):t.set=!1})}),_setQueryForTags(query,filters),global.set("breadcrumbs",breadcrumbs),"stuffs"!=to.name&&"stuffs.stuff"!=to.name||(query.actived=!0),stateParams.searchStr){var search=stateParams.searchStr.substring(0,20);query["keywords."+global.get("store").val.lang]=search}resolve(query)}).catch(function(err){reject(err)})})}function setFilters(){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/stuff/filterStuffsList.html",controller:setFiltersCtrl,controllerAs:"$ctrl",windowClass:"modalProject",backdropClass:"modalBackdropClass"}).result.then(function(){resolve()},function(){reject()})})}function cloneStuff(stuff,clone){if(global.get("seller").val)return $q.when().then(function(){if(stuff&&stuff._id)return Items.get({_id:stuff._id,clone:"clone"}).$promise;if($stateParams&&"category"!=$stateParams.categoryUrl){var category=global.get("categories").val.getOFA("url",$stateParams.categoryUrl);category&&category._id&&(stuff.category=category)}return stuff}).then(function(st){return console.log(st),stuff=angular.copy(st),stuff.category&&!stuff.category.length&&(stuff.category=[stuff.category]),stuff.index||(stuff.index=0),stuff.index++,delete stuff._id,delete stuff.url,delete stuff.link,delete stuff.__v,delete stuff.nameL,delete stuff.artikulL,delete stuff.gallery,delete stuff.sort,delete stuff.sortsOfStuff,delete stuff.keywords,stuff.blocks&&stuff.blocks.length&&stuff.blocks.forEach(function(b){delete b._id,b.template=null,b.templateName=null,b.img&&(b.img=null),b.video&&(b.video=null),b.imgs&&b.imgs.length&&b.imgs.forEach(function(slide){slide.img&&(slide.img=null)})}),stuff.stock={notag:{price:stuff.price}},stuff.actived=!1,$q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/stuff/cloneStuffModal.html",controller:cloneStuffCtrl,controllerAs:"$ctrl",size:"lg",resolve:{stuff:function(){return stuff},clone:function(){return clone}}}).result.then(function(stuff){resolve(stuff)},function(){reject()})})})}function saveField(stuff,field){var f=field.split(" "),o={_id:stuff._id};return f.forEach(function(el){o[el]=stuff[el]}),Items.save({update:field},o).$promise}function selectItem(query){return console.log("внимание - сделать так же как и  selectItemWithSort"),$q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/stuff/modal/selectStuffModal.html",controller:selectStuffCtrl,controllerAs:"$ctrl",size:"lg",resolve:{query:function(){return query}}}).result.then(function(stuff){resolve(stuff)},function(){reject()})})}function selectItemWithSort(query){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/stuff/modal/selectStuffWithSortModal.html",controller:selectItemWithSortCtrl,controllerAs:"$ctrl",size:"lg",resolve:{query:function(){return query}}}).result.then(function(stuff){resolve(stuff)},function(){reject()})})}function getServicesForOnlineEntry(){function getListComplete(data){data.shift();var items=[];return data.forEach(function(el){_setPrice(el),el.sort=null;var category=el.category&&el.category.length?el.category[0]:el.category;if(global.get("categoriesO")&&global.get("categoriesO").val)var c=global.get("categoriesO").val[category];else var c=global.get("categories").val.getOFA("_id",category);c||(c={name:"Категория"}),el.category=c.name,el.timePart||(el.timePart=4);try{if(el.sortsOfStuff&&el.sortsOfStuff.differentPrice)for(var sort in el.stock){var s={_id:el._id,name:el.name+" "+_getTagName(sort),nameL:el.nameL,link:el.link,artikul:el.artikul,price:el.stock[sort].price,category:el.category,timePart:el.timePart};items.push(s)}else{if(el.stock.notag)el.price=el.stock.notag.price;else try{el.price=el.stock[Object.keys(el.stock)[0]].price}catch(err){console.log(err)}items.push(el)}}catch(err){console.log(err)}}),stuffsService=items,items}function getListFailed(error){return console.log("XHR Failed for getStuffs."+error),$q.reject(error)}function _getTagName(_id){return _id&&filterTags&&"notag"!=_id&&_filterTagsO[_id]?_filterTagsO[_id].name:""}if(stuffsService&&stuffsService.length)return stuffsService;var data={query:{orderType:{$in:[2,7]},actived:!0}},filterTags=[];return global.get("crawler")&&global.get("crawler").val&&(data.subDomain=global.get("store").val.subDomain),$q.when().then(function(){return FilterTags.getFilterTags()}).then(function(fts){filterTags=fts}).then(function(){return Items.query(data).$promise}).then(getListComplete).catch(getListFailed)}var Items=$resource("/api/collections/Stuff/:_id",{_id:"@_id"}),categoriesLink={},queryData={},stuffsService=[];return $rootScope.$on("$stateChangeStart",function(event,to,toParams,fromState,fromParams){"stuffs"!=to.name&&"stuffs.stuff"!=to.name&&"frame.stuffs"!=to.name&&"frame.stuffs.stuff"!=to.name||$q.when().then(function(){return getQuery(toParams,to)}).then(function(query){queryData=query})}),{Items:Items,query:Items.query,get:Items.get,getList:getList,search:search,getItem:getItem,save:Items.save,delete:Items.delete,create:create,getQuery:getQuery,getQueryFromUrl:getQueryFromUrl,setFilters:setFilters,cloneStuff:cloneStuff,saveField:saveField,selectItem:selectItem,select:selectItem,selectItemWithSort:selectItemWithSort,getServicesForOnlineEntry:getServicesForOnlineEntry,getAllBonus:getAllBonus,zoomImg:zoomImgGlobal,setDataForStuff:_setDataForStuff,getDataForBooking:_getDataForBooking};var delay}function setFiltersCtrl(global,$uibModalInstance){var self=this;self.global=global,self.cancel=function(){$uibModalInstance.dismiss()},self.ok=function(){$uibModalInstance.close()}}function cloneStuffCtrl($q,global,Stuff,stuff,$uibModalInstance,Category,clone){var self=this;self.Items=Stuff;self.stuff=stuff,self.clone=clone,self.categoryDisabled=!0,self.selectCategory=function(){$q.when().then(function(){return Category.select()}).then(function(selectedCategory){self.stuff.category||(self.categoryDisabled=!1,setTimeout(function(){$("#createStuffCategory").trigger("change"),self.categoryDisabled=!0},100)),self.stuff.category=selectedCategory}).catch(function(err){console.log(err)})},self.createNewStuff=function(){return self.stuff.category?self.stuff.name?(self.stuff.name=self.stuff.name.substring(0,100),self.stuff.artikul&&(self.stuff.artikul=self.stuff.artikul.substring(0,100)),!self.clone&&self.stuff.category&&self.stuff.category._id&&(self.stuff.category=self.stuff.category._id),stuff.stock&&stuff.stock.notag&&stuff.stock.notag.price!=stuff.price&&(stuff.stock.notag.price=stuff.price),void $q.when().then(function(){self.stuff.keywords={};var k=self.stuff.name;if(self.stuff.artikul&&(k+=" "+self.stuff.artikul),self.stuff.category){var c;if("object"==typeof self.stuff.category){var cc="object"==typeof self.stuff.category[0]?self.stuff.category[0]._id:self.stuff.category[0];c=global.get("categories").val.getOFA("_id",cc)}else c=global.get("categories").val.getOFA("_id",self.stuff.category);k+=" "+(c.nameL&&c.nameL[global.get("store").val.lang]?c.nameL[global.get("store").val.lang]:c.name)}if(self.stuff.brand){var bb="object"==typeof self.stuff.brand?self.stuff.brand._id:self.stuff.brand,b=global.get("brands").val.getOFA("_id",bb);if(k+=" "+(b.nameL&&b.nameL[global.get("store").val.lang]?b.nameL[global.get("store").val.lang]:b.name),self.stuff.brandTag){var bt=b.tags.getOFA("_id",self.stuff.brandTag);bt&&bt.nameL&&bt.nameL[global.get("store").val.lang]&&(k+=" "+bt.nameL[global.get("store").val.lang])}}return stuff.keywords[global.get("store").val.lang]=k,self.Items.save(self.stuff).$promise}).then(function(res){self.stuff._id=res.id,self.stuff.url=res.url;var c;if("object"==typeof self.stuff.category){var cc="object"==typeof self.stuff.category[0]?self.stuff.category[0]._id:self.stuff.category[0];c=global.get("categories").val.getOFA("_id",cc)}else c=global.get("categories").val.getOFA("_id",self.stuff.category);self.stuff.link="/"+c.linkData.groupUrl+"/"+c.linkData.categoryUrl+"/"+res.url,self.Items.save({update:"link"},{_id:self.stuff._id,link:self.stuff.link}),$uibModalInstance.close(self.stuff)}).catch(function(err){return $q.reject(err)})):(self.alertMessage2=!0,void setTimeout(function(){self.alertMessage2=!1},3e3)):(self.alertMessage2=!0,void setTimeout(function(){console.log("))))"),self.alertMessage2=!1},3e3))},self.cancel=function(){$uibModalInstance.dismiss("cancel")}}function selectStuffCtrl($q,Stuff,$uibModalInstance,query){var self=(angular.copy(query),this);self.stuffs=[],self.name="";self.search=function(name){name.length<3||(query?(query.$and||(query={$and:[query]}),query.$and.push({$or:[{name:name},{artikul:name}]})):query={$or:[{name:name},{artikul:name}]},$q.when().then(function(){return Stuff.search(name,!0)}).then(function(res){self.stuffs=res}))},self.selectStuff=function(stuff){stuff.imgThumb&&(stuff.img=stuff.imgThumb),stuff.link="/"+stuff.groupUrl+"/"+stuff.categoryUrl+"/"+stuff.url,$uibModalInstance.close(stuff)},self.cancel=function(){$uibModalInstance.dismiss()}}function selectItemWithSortCtrl($q,Stuff,$uibModalInstance,Filters,FilterTags,exception,query,global){function getFilterName(_id){return self.filters.getOFA("_id",_id).name||null}var self=(angular.copy(query),this);self.global=global,self.stuffs=[],self.name="";self.getFilterName=getFilterName,self.search=function(name){name.length<3||$q.when().then(function(){return Stuff.search(name,!0)}).then(function(res){global.get("seller")&&global.get("seller").val?self.stuffs=res:self.stuffs=res.map(function(s){for(var i=0;i<s.stockKeysArray.length;i++)s.stockKeysArray[i].quantity||(s.stockKeysArray.splice(i,1),i--);return s}).filter(function(s){return s.actived&&s.stockKeysArray.length})})},self.selectStuff=function(stuff){stuff.sortsOfStuff&&stuff.sortsOfStuff.filter&&!stuff.sort?exception.catcher("ошибка")("выберите разновидность"):$uibModalInstance.close(stuff)},self.cancel=function(){$uibModalInstance.dismiss()},function(){$q.when().then(function(){return Filters.getFilters()}).then(function(filters){self.filters=filters}).then(function(){return FilterTags.getFilterTags()}).then(function(filterTags){self.filterTags=filterTags}).catch(function(err){console.log(err)})}()}function commentService($resource,$uibModal,$q){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return console.log("XHR Failed for getNews."+error),$q.reject(error)}return Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete).catch(getListFailed)}function getItem(id){function getItemComplete(response){return response}function getItemFailed(error){return $q.reject(error)}return Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}function create(){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/stuff/modal/createComment.html",controller:function($uibModalInstance){var self=this;self.name="",self.ok=function(){$uibModalInstance.close(self.name)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl"}).result.then(function(name){name?resolve(name.substring(0,100)):reject("empty")},function(err){reject(err)})})}var Items=$resource("/api/collections/Comment/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,save:Items.save,delete:Items.delete,create:create}}angular.module("gmall.services").service("Stuff",stuffService).service("Comments",commentService),stuffService.$inject=["$resource","$uibModal","$q","Sections","$stateParams","$state","$location","Brands","FilterTags","global","$order","exception","$user","$email","CreateContent","$rootScope","Filters","$timeout"],setFiltersCtrl.$inject=["global","$uibModalInstance"],cloneStuffCtrl.$inject=["$q","global","Stuff","stuff","$uibModalInstance","Category","clone"],selectStuffCtrl.$inject=["$q","Stuff","$uibModalInstance","query"],selectItemWithSortCtrl.$inject=["$q","Stuff","$uibModalInstance","Filters","FilterTags","exception","query","global"],commentService.$inject=["$resource","$uibModal","$q"]}(),function(){function likesItem(){return{scope:{},bindToController:!0,controller:likesItemCtrl,controllerAs:"$ctrl",templateUrl:"",restrict:"E"}}function likesItemCtrl($compile,$timeout,localStorage,Stuff,global){return{restrict:"EA",scope:{current:"=",header:"@",mobile:"@",blockElement:"@"},template:'<h3 class="text-center" ng-bind="header"></h3><div id="lastViewedWrapper" class="owl-carousel owl-theme"><div ng-repeat="s in stuffs track by $index" class="item"><a ui-sref="stuffs.stuff(s.linkData)"><img style="max-width: 200px; border-color: transparent" ng-src="{{s.img}}" ></a></div></div>',link:function(scope,element,attrs){function activate(){scope.position=JSON.parse(scope.blockElement).position,scope.mobile?scope.itemsInList=3:scope.position&&"bottom"==scope.position&&(scope.itemsInList=6),setViewed(angular.copy(scope.current)),viewedStuffs.length>2?(scope.stuffs=viewedStuffs,scope.stuffs.forEach(function(el){el.getUrlParams=Stuff.getUrlParams}),$timeout(function(){$("#lastViewedWrapper").owlCarousel({items:scope.itemsInList,itemsMobile:[479,3],itemsTablet:[768,scope.itemsInList],itemsDesktop:[1199,scope.itemsInList],itemsDesktopSmall:[979,scope.itemsInList]})},150)):scope.stuffs=[],scope.header||(scope.header="Последние просмотренные.")}function setViewed(stuff){for(var posItem=-1,i=0,l=viewedStuffs.length;i<l;i++)if(viewedStuffs[i]._id==stuff._id){posItem=i;break}if(posItem>-1&&viewedStuffs.splice(posItem,1),stuff.gallery[0])var img=stuff.gallery[0].thumbSmall?stuff.gallery[0].thumbSmall:stuff.gallery[0].thumb;else var img=null;var linkData=global.get("categories").val.getOFA("_id",stuff.category).linkData;linkData.stuffUrl=stuff.url,viewedStuffs.unshift({_id:stuff._id,linkData:linkData,url:stuff.url,img:img}),viewedStuffs.length>15&&viewedStuffs.splice(15,1),localStorage.set(subDomain+"-viewed",viewedStuffs)}var subDomain=global.get("store").val.subDomain;scope.localId=Date.now();var viewedStuffs=localStorage.get(subDomain+"-viewed");viewedStuffs||(viewedStuffs=[]),scope.itemsInList=4,scope.$watch("current",function(n){n&&activate()}),scope.$on("$destroy",function(){$("#carouse"+scope.localId).remove()})}}}function homePageHtmlCtrl($scope,$rootScope,$timeout,$element,$compile,global,$q,$http){function getHomePageHtml(){console.log("getHomePageHtml"),$q.when().then(function(){return $http.get("homepageHTML.html")}).then(function(response){var linkFn=$compile(response.data.html),content=linkFn($scope);$element.append(content),loaded=!0}).catch(function(err){})}var loaded=null;$rootScope.$on("$stateChangeStart",function(event,to,toParams,fromState,fromParams){"home"!=to.name||loaded||getHomePageHtml()})}function homePageStuffOwlCtrl($scope,$timeout,$element,$compile,global){function prev(){self.$owl.trigger("prev.owl.carousel",[self.selectedDay-3,300])}function next(){self.$owl.trigger("next.owl.carousel",[self.selectedDay+3,300])}function zoomSliderImg(i){$rootScope.zoomSliderImg(i,imgs)}var self=this;self.prev=prev,self.next=next,self.moment=moment,self.global=global;var imgs;self.zoomSliderImg=zoomSliderImg;var items=4,items3=3,items2=2,autoplay=!1,autoplayTimeout=4e3;this.$onInit=function(){$timeout(function(){if(self.items&&(items=self.items),2==items?items3=2:1==items&&(items3=1,items2=1),self.autoplay&&(autoplay=!0),self.duration)try{var duration=Number(self.duration);duration>0&&duration<10&&(autoplayTimeout=1e3*duration)}catch(err){console.log(err)}self.$owl=$("body").find("#"+self.homePageStuffOwl),self.$owl.on("initialized.owl.carousel",function(event){});var navLeft=$element.find(".nav-left");$(navLeft).click(function(){prev()});var navRight=$element.find(".nav-right");$(navRight).click(function(){next()}),activate()},100)},$scope.$watch(function(){return self.gallery},function(n,o){if(n&&n.length){var html="";imgs=[],n.forEach(function(item,i){photoHost?item.src=photoHost+"/"+item.img:item.src=item.img,html+='<a><span class="zoom-plus" data-i="'+i+'"><span class="icon-zoom-img"></span><span class="icon-zoom-inverse"></span></span><img class="img-responsive2" src="'+item.src+'"></a>'+imgs.push({index:i,img:item.src})}),self.$owl.trigger("replace.owl.carousel",html).trigger("to.owl.carousel",0).trigger("refresh.owl.carousel"),$timeout(function(){self.$owl.trigger("refresh.owl.carousel")},10),$timeout(function(){if(self.zoomImg){self.$owl.find("span.zoom-plus").each(function(i,img){$(img).click(function(event){var ii=$(img).data("i")>=0?$(img).data("i"):0;global.get("functions").val.zoomImg(ii,imgs,"home")})})}},400)}});var items=self.items?self.items:4,activate=function(){$timeout(function(){var carousel_Settings={loop:!0,margin:10,responsiveClass:!0,autoplay:autoplay,autoplayHoverPause:!0,autoplayTimeout:autoplayTimeout,responsive:{0:{items:1,nav:!1,dots:!0},380:{items:items2,nav:!1,dots:!0},1068:{items:items3,nav:!1,dots:!0},1400:{items:items,nav:!1,dots:!0}}};self.$owl.owlCarousel(carousel_Settings);var imgsEl=self.$owl.find("img");if(imgsEl&&imgsEl.each&&(imgs=[],imgsEl.each(function(i,img){imgs.push({index:i,img:img.src,el:imgsEl[i]})})),self.zoomImg){self.$owl.find("span.zoom-plus").each(function(i,img){$(img).click(function(event){for(var imgTemp=imgs[i].img,imgsTemp=imgs.reduce(function(o,item){return o.getOFA("img",item.img)||o.push(item),o},[]),ii=0,j=0;j<imgsTemp.length;j++)if(imgsTemp[j].img==imgTemp){ii=j;break}global.get("functions").val.zoomImg(ii,imgsTemp,"home")})})}},200)}}function emptyList(){return{templateUrl:"views/template/partials/stuffs/emptyList.html",restrict:"E"}}function stuffListDirective(){return{scope:{},bindToController:!0,controller:stuffListCtrl,controllerAs:"$ctrl",templateUrl:"components/stuff/stuffsAdminList.html",restrict:"E"}}function stuffListTemplateDirective(global){return{scope:{filtersBlock:"@"},bindToController:!0,controller:stuffListCtrl,controllerAs:"$ctrl",templateUrl:"views/template/partials/stuffs/stuffs-block.html",restrict:"E"}}function stuffListTemplateDirectiveList(global){return{scope:{},bindToController:!0,controller:stuffListCtrl,controllerAs:"$ctrl",templateUrl:function(){return"views/template/partials/stuffs/stuffs-list/"+global.get("sectionType").val},restrict:"E"}}function stuffInList(global,$timeout){return{scope:{stuffInList:"@"},bindToController:!0,controllerAs:"$ctrl",restrict:"A",controller:function($scope,Stuff,global,$attrs,$stateParams,$rootScope,localStorage){function getAveragePrice(price){if(price){var p=price*global.get("rate").val;return p=Math.round(100*p)/100,formatAverage&&(4==formatAverage?p=100*Math.round(p/100):3==formatAverage?p=10*Math.round(p/10):2==formatAverage?p=Math.round(p):1==formatAverage&&(p=Math.round(10*p)/10)),p}}function getMastersName(){self.stuff.masters=[],global.get("masters").val.forEach(function(m){if(m.stuffs&&m.stuffs.length&&m.stuffs.indexOf(self.stuff._id)>-1){var o={name:m.name,url:m.url};self.stuff.masters.push(o)}})}function addToLikes($event){$event.stopPropagation(),console.log("addToLikes"),(likes=localStorage.get(subDomain+"-likes"))||(likes=[]);var i=likes.indexOf($scope.stuff._id);i>-1?($scope.stuff.inLikes=!1,likes.splice(i,1)):($scope.stuff.inLikes=!0,likes.push($scope.stuff._id)),localStorage.set(subDomain+"-likes",likes),$rootScope.likes.totalCount=likes.length}var self=this;self.global=global,$scope.global=global;var subDomain=global.get("store").val.subDomain;$scope.stuff=JSON.parse($attrs.stuffInList),$scope.stuff=Stuff.setDataForStuff($scope.stuff,global.get("filterTags").val,"stuffs"),$scope.stuff.stateObj=angular.copy($stateParams),$scope.stuff.stateObj.stuffUrl=$scope.stuff.url,self.stuff=$scope.stuff,self.getMastersName=getMastersName,self.getAveragePrice=getAveragePrice,self.addToLikes=addToLikes;var currency=global.get("currency").val,formatAverage=global.get("store").val.currency[currency][4],del=-1;1==formatAverage?del=-1:2==formatAverage?del=0:3==formatAverage?del=1:4==formatAverage&&(del=2),self.formatPrice=global.get("store").val.currency[currency][5],void 0===self.formatPrice&&(self.formatPrice=2),self.stuff.currencySymbol=global.get("store").val.currency[global.get("currency").val]&&global.get("store").val.currency[global.get("currency").val][2]?global.get("store").val.currency[global.get("currency").val][2]:"",$rootScope.$on("changeCurrency",function(){currency=global.get("currency").val,formatAverage=global.get("store").val.currency[currency][4],self.formatPrice=global.get("store").val.currency[currency][5],void 0===self.formatPrice&&(self.formatPrice=2),del=-1,1==formatAverage?del=-1:2==formatAverage?del=0:3==formatAverage?del=1:4==formatAverage&&(del=2),self.stuff.currencySymbol=global.get("store").val.currency[global.get("currency").val]&&global.get("store").val.currency[global.get("currency").val][2]?global.get("store").val.currency[global.get("currency").val][2]:global.get("currency").val}),getMastersName();var likes=localStorage.get(subDomain+"-likes");likes&&likes.length&&likes.some(function(s){return s===$scope.stuff._id})&&($scope.stuff.inLikes=!0)},transclude:!0,link:function(scope,element,attrs,ctrl,transclude){$timeout(function(){global.get("stuffsInList").val&&element[0].parentElement&&element[0].parentElement.parentElement&&element[0].parentElement.parentElement.id&&global.get("stuffsInList").val[element[0].parentElement.parentElement.id]&&global.get("stuffsInList").val[element[0].parentElement.parentElement.id].push(scope.stuff)},200),transclude(scope,function(clone){element.append(clone)})}}}function stuffListTemplateServer(){return{scope:{},bindToController:!0,controllerAs:"$ctrl",template:"<div></div>",controller:stuffListFromServerCtrl,restrict:"E"}}function stuffListFromServerCtrl($scope,$state,$compile,$element,$window,Stuff,$rootScope,$q,$uibModal,global,exception,FilterTags,Filters,Confirm,Helper,anchorSmoothScroll,Photo,$timeout,$anchorScroll,Category,Brands,BrandTags,seoContent,AddInfo,$http,$location,$sce){function filterList(){console.log("filterList22"),$q.when().then(function(){return self.Items.setFilters()}).catch(function(err){})}function setDataForStuff(stuff){return stuff=Stuff.setDataForStuff(stuff,global.get("filterTags").val),stuff=angular.copy(stuff),console.log(stuff.name+" "+stuff.artikul,stuff.sticker),stuff}function getList(){$q.when().then(function(){return $http.get(url.trim()+".html",{params:{pages:[self.paginate.page],perPage:perPage,rows:rows,query:self.query,url:$location.url()}})}).then(function(response){if(response){$anchorScroll(),lastElement=null;var addHtml=angular.element(response.data.html);if(addHtml.find("#td-list-1").html()){var atd1=$compile(addHtml.find("#td-list-1").html())($scope);td1.html(atd1)}if(addHtml.find("#td-list-2").html()){var atd2=$compile(addHtml.find("#td-list-2").html())($scope);td2.html(atd2)}if(addHtml.find("#td-list-3").html()){var atd3=$compile(addHtml.find("#td-list-3").html())($scope);td3.html(atd3)}if(addHtml.find("#td-list-4").html()){var atd4=$compile(addHtml.find("#td-list-4").html())($scope);td4.html(atd4)}self.lastItemId=addHtml.find("#paginateData"+page).data("lastItemId"),self.currentQty+=addHtml.find("#paginateData"+page).data("qty"),$timeout(function(){lastElement=null!=self.lastItemId?$("#list"+self.lastItemId):null},200)}})}var stuffsInList={"td-list-1":[],"td-list-2":[],"td-list-3":[],"td-list-4":[],"td-list-5":[],"td-list-6":[]};global.set("stuffsInList",stuffsInList);var self=this;$scope.global=global,self.stuffs={},self.Items=Stuff,self.mobile=global.get("mobile").val,self.global=global,self.globalProperty=$rootScope.globalProperty,self.$state=$rootScope.$state,self.$stateParams=$rootScope.$stateParams,self.query={},self.paginate={page:0,rows:20,items:0},self.filterList=filterList,self.initStuff=setDataForStuff,self.getList=getList,$scope.$on("addBlockAfterScroll",function(){$scope.addBlockAfterScroll()});var pages=[0],perPage=20,rows=global.get("functions").val.setRows();global.get("store").val.template.stuffListType[global.get("sectionType").val]&&global.get("store").val.template.stuffListType[global.get("sectionType").val].perPage&&(perPage=global.get("store").val.template.stuffListType[global.get("sectionType").val].perPage,self.paginate.rows=perPage);var waiting,lastElement,waitingDiv,td1,td2,td3,td4,td5,url="views/template/partials/stuffs/stuffs-list/"+global.get("sectionType").val+"/"+$rootScope.$stateParams.groupUrl+"/"+$rootScope.$stateParams.categoryUrl,page=0,color=global.get("store").val.template.dimScreenColor?global.get("store").val.template.dimScreenColor:"#000000",BGcolor=global.get("store").val.template.dimScreenBGColor?global.get("store").val.template.dimScreenBGColor:"#F5F5F5",innerWaitingDiv=['<div class="spinner-box clearfix text-center" style="width:100%;height:200px;background-color:'+BGcolor+";color:"+color+'">','<span class="icon-spinner-img"></span>',"</div>"].join("");$q.when().then(function(){var params={group:self.$stateParams.groupUrl,category:self.$stateParams.categoryUrl};self.$stateParams.brand,self.$stateParams.brandTag;for(var k in self.$stateParams)params[k]=self.$stateParams[k];if(self.query=dQ.getQuery(params),self.query&&self.query.priceForFilter&&1!=global.get("rate").val&&(self.query.priceForFilter.$gte=Math.ceil10(self.query.priceForFilter.$gte/global.get("rate").val,0),self.query.priceForFilter.$lte=Math.ceil10(self.query.priceForFilter.$lte/global.get("rate").val,0)),global.get("tempContent").val){if($state.current.name.indexOf(".stuff")<0){var html=$("#tempContent").detach().html(),o={data:{html:html}};return tempTitles&&(o.data.titles=tempTitles),o}return null}return $q.when(self.query).then(function(query){return $http.get(url.trim()+".html",{params:{pages:pages,perPage:perPage,rows:rows,query:query,url:$location.url()}})})}).then(function(response){if(!response)return void $rootScope.$emit("$stateChangeEndToStuff");if(global.get("tempContent").val){global.set("tempContent",null);var linkFn=$compile(response.data.html),content=linkFn($scope)}else{console.log("ldldldl");var linkFn=$compile(response.data.html),content=linkFn($scope)}$element.append(content);var style=$element.find("style");style&&style[0];var titles={};if(response.data.titles&&response.data.titles.title){for(var k in response.data.titles)response.data.titles[k]&&("canonical"==k?titles[k]=$sce.trustAsResourceUrl(response.data.titles[k]):"desc"!=k&&(titles[k]=response.data.titles[k]));global.set("titles",titles)}else seoContent.setSeopageData();waitingDiv=$("#paginateData"+page),self.totalQty=waitingDiv.data("total"),self.paginate.items=self.totalQty,self.currentQty=waitingDiv.data("qty"),self.page=waitingDiv.data("page"),self.lastItemId=waitingDiv.data("lastItemId"),td1=$("#td-list-1 .td-wrapper"),td2=$("#td-list-2 .td-wrapper"),td3=$("#td-list-3 .td-wrapper"),td4=$("#td-list-4 .td-wrapper"),td5=$("#td-list-5 .td-wrapper"),
$timeout(function(){$anchorScroll(),lastElement=null!=self.lastItemId?$("#list"+self.lastItemId):null}),$timeout(function(){$scope.$broadcast("rzSliderForceRender")},500);var addBlockAfterScroll=function(){"stuffs"==$state.current.name&&!waiting&&lastElement&&$(lastElement).isOnScreen()&&self.currentQty<self.totalQty&&(waiting=!0,page++,$q.when().then(function(){return waitingDiv.html(innerWaitingDiv),$http.get(url.trim()+".html",{params:{pages:[page],perPage:perPage,rows:rows,query:self.query,url:$location.url()}})}).then(function(response){if(response){lastElement=null,waitingDiv.html("");var atd1,atd2,atd3,atd4,atd5,addHtml=angular.element(response.data.html);addHtml.find("#td-list-1 .td-wrapper").html()&&(atd1=$compile(addHtml.find("#td-list-1 .td-wrapper").html())($scope)),addHtml.find("#td-list-2 .td-wrapper").html()&&(atd2=$compile(addHtml.find("#td-list-2 .td-wrapper").html())($scope)),addHtml.find("#td-list-3 .td-wrapper").html()&&(atd3=$compile(addHtml.find("#td-list-3 .td-wrapper").html())($scope)),addHtml.find("#td-list-4 .td-wrapper").html()&&(atd4=$compile(addHtml.find("#td-list-4 .td-wrapper").html())($scope)),addHtml.find("#td-list-5 .td-wrapper").html()&&(atd5=$compile(addHtml.find("#td-list-5 .td-wrapper").html())($scope)),atd5&&td5.append(atd5),atd4&&td4.append(atd4),atd3&&td3.append(atd3),atd2&&td2.append(atd2),atd1&&td1.append(atd1),self.lastItemId=addHtml.find("#paginateData"+page).data("lastItemId"),self.currentQty+=addHtml.find("#paginateData"+page).data("qty"),$timeout(function(){lastElement=null!=self.lastItemId?$("#list"+self.lastItemId):null,waiting=!1},200)}}))};global.get("store").val.template.stuffListType[global.get("sectionType").val]&&global.get("store").val.template.stuffListType[global.get("sectionType").val].paginate||angular.element($window).on("scroll",addBlockAfterScroll),$scope.$on("$destroy",function(){angular.element($window).off("scroll",addBlockAfterScroll)}),$timeout(function(){$rootScope.$emit("$stateChangeEndToStuff")})}),$scope.addBlockAfterScroll=function(){!waiting&&lastElement&&self.currentQty<self.totalQty?(waiting=!0,page++,$rootScope.$emit("$stateChangeStartToStuff"),$q.when().then(function(){return waitingDiv.html(innerWaitingDiv),$http.get(url.trim()+".html",{params:{pages:[page],perPage:perPage,rows:rows,query:self.query,url:$location.url()}})}).then(function(response){if(response){lastElement=null,waitingDiv.html("");var atd1,atd2,atd3,atd4,atd5,addHtml=angular.element(response.data.html);addHtml.find("#td-list-1 .td-wrapper").html()&&(atd1=$compile(addHtml.find("#td-list-1 .td-wrapper").html())($scope)),addHtml.find("#td-list-2 .td-wrapper").html()&&(atd2=$compile(addHtml.find("#td-list-2 .td-wrapper").html())($scope)),addHtml.find("#td-list-3 .td-wrapper").html()&&(atd3=$compile(addHtml.find("#td-list-3 .td-wrapper").html())($scope)),addHtml.find("#td-list-4 .td-wrapper").html()&&(atd4=$compile(addHtml.find("#td-list-4 .td-wrapper").html())($scope)),addHtml.find("#td-list-5 .td-wrapper").html()&&(atd5=$compile(addHtml.find("#td-list-5 .td-wrapper").html())($scope)),atd5&&td5.append(atd5),atd4&&td4.append(atd4),atd3&&td3.append(atd3),atd2&&td2.append(atd2),atd1&&td1.append(atd1),self.lastItemId=addHtml.find("#paginateData"+page).data("lastItemId"),self.currentQty+=addHtml.find("#paginateData"+page).data("qty"),$timeout(function(){lastElement=null!=self.lastItemId?$("#list"+self.lastItemId):null,waiting=!1},200),$timeout(function(){$rootScope.$broadcast("addBlockAfterScrollDone"),$rootScope.$emit("$stateChangeEndToStuff")},300)}}).catch(function(){$rootScope.$emit("$stateChangeEndToStuff")})):$timeout(function(){$rootScope.$broadcast("addBlockAfterScrollDone")},200)}}function stuffListTemplateDirectiveCampaignList(){return{scope:{campaignCondition:"@"},bindToController:!0,controller:campaignStuffListCtrl,controllerAs:"$ctrl",template:"<div></div>",restrict:"E"}}function campaignStuffListCtrl($scope,$state,$compile,$element,$window,Stuff,$rootScope,$q,$uibModal,global,exception,FilterTags,Filters,Confirm,Helper,anchorSmoothScroll,Photo,$timeout,$anchorScroll,Category,Brands,BrandTags,seoContent,AddInfo,$http,$location,localStorage){function filterList(){$q.when().then(function(){return self.Items.setFilters()}).catch(function(err){})}function setDataForStuff(stuff){return console.log(stuff.name),stuff=Stuff.setDataForStuff(stuff,global.get("filterTags").val),stuff=angular.copy(stuff),console.log(stuff.name+" "+stuff.artikul,stuff.sticker),stuff}function getList(){$q.when().then(function(){return $http.get(url,{params:{pages:[self.paginate.page],perPage:self.paginate.rows,rows:rows}})}).then(function(response){if(response){$anchorScroll(),lastElement=null;var addHtml=angular.element(response.data.html);if(addHtml.find("#td-list-1").html()){var atd1=$compile(addHtml.find("#td-list-1").html())($scope);td1.html(atd1)}if(addHtml.find("#td-list-2").html()){var atd2=$compile(addHtml.find("#td-list-2").html())($scope);td2.html(atd2)}if(addHtml.find("#td-list-3").html()){var atd3=$compile(addHtml.find("#td-list-3").html())($scope);td3.html(atd3)}if(addHtml.find("#td-list-4").html()){var atd4=$compile(addHtml.find("#td-list-4").html())($scope);td4.html(atd4)}self.lastItemId=addHtml.find("#paginateData"+page).data("lastItemId"),self.currentQty+=addHtml.find("#paginateData"+page).data("qty"),$timeout(function(){lastElement=null!=self.lastItemId?$("#list"+self.lastItemId):null},200)}})}anchorSmoothScroll.scrollTo("topPage");var stuffsInList={"td-list-1":[],"td-list-2":[],"td-list-3":[],"td-list-4":[],"td-list-5":[],"td-list-6":[]};global.set("stuffsInList",stuffsInList);var self=this;self.stuffs={},self.Items=Stuff,self.mobile=global.get("mobile").val,self.global=global,self.globalProperty=$rootScope.globalProperty,self.$state=$rootScope.$state,self.$stateParams=$rootScope.$stateParams,self.query={},self.paginate={page:0,rows:20,items:0};var cartType=$element.data("cart")?$element.data("cart"):"good",campaignCondition=$element.data("condition")?$element.data("condition"):"stuffs";self.filterList=filterList,self.initStuff=setDataForStuff,self.getList=getList,$scope.$on("addBlockAfterScroll",function(){$scope.addBlockAfterScroll()});var pages=[0],perPage=20,rows=global.get("functions").val.setRows();global.get("store").val.template.stuffListType[cartType]&&global.get("store").val.template.stuffListType[cartType].perPage&&(perPage=global.get("store").val.template.stuffListType[cartType].perPage,self.paginate.rows=perPage);var waiting,lastElement,waitingDiv,td1,td2,td3,td4,td5,page=0,color=global.get("store").val.template.dimScreenColor?global.get("store").val.template.dimScreenColor:"#000000",BGcolor=global.get("store").val.template.dimScreenBGColor?global.get("store").val.template.dimScreenBGColor:"#F5F5F5",innerWaitingDiv=['<div class="spinner-box clearfix text-center" style="width:100%;height:200px;background-color:'+BGcolor+";color:"+color+'">','<span class="icon-spinner-img"></span>',"</div>"].join(""),campaign=$element.data("campaign");if("likes"===$rootScope.$state.current.name){campaign="likes";var likes=localStorage.get(global.get("store").val.subDomain+"-likes");campaignCondition=likes&&likes.length?likes.join("_"):"_"}var url="views/template/partials/"+campaign+"/"+campaignCondition;console.log(url),$q.when().then(function(){return $http.get(url,{params:{pages:pages,perPage:perPage,rows:rows}})}).then(function(response){if(!response)return void $rootScope.$emit("$stateChangeEndToStuff");var linkFn=$compile(response.data.html),content=linkFn($scope);$element.append(content);var style=$element.find("style");style&&style[0],waitingDiv=$("#paginateData"+page),self.totalQty=waitingDiv.data("total"),self.paginate.items=self.totalQty,self.currentQty=waitingDiv.data("qty"),self.page=waitingDiv.data("page"),self.lastItemId=waitingDiv.data("lastItemId"),td1=$("#td-list-1 .td-wrapper"),td2=$("#td-list-2 .td-wrapper"),td3=$("#td-list-3 .td-wrapper"),td4=$("#td-list-4 .td-wrapper"),td5=$("#td-list-5 .td-wrapper"),$timeout(function(){$anchorScroll(),lastElement=null!=self.lastItemId?$("#list"+self.lastItemId):null});var addBlockAfterScroll=function(){!waiting&&lastElement&&$(lastElement).isOnScreen()&&self.currentQty<self.totalQty&&(waiting=!0,page++,$q.when().then(function(){return waitingDiv.html(innerWaitingDiv),$http.get(url,{params:{pages:[page],perPage:perPage,rows:rows}})}).then(function(response){if(response){lastElement=null,waitingDiv.html("");var atd1,atd2,atd3,atd4,atd5,addHtml=angular.element(response.data.html);addHtml.find("#td-list-1 .td-wrapper").html()&&(atd1=$compile(addHtml.find("#td-list-1 .td-wrapper").html())($scope)),addHtml.find("#td-list-2 .td-wrapper").html()&&(atd2=$compile(addHtml.find("#td-list-2 .td-wrapper").html())($scope)),addHtml.find("#td-list-3 .td-wrapper").html()&&(atd3=$compile(addHtml.find("#td-list-3 .td-wrapper").html())($scope)),addHtml.find("#td-list-4 .td-wrapper").html()&&(atd4=$compile(addHtml.find("#td-list-4 .td-wrapper").html())($scope)),addHtml.find("#td-list-5 .td-wrapper").html()&&(atd5=$compile(addHtml.find("#td-list-5 .td-wrapper").html())($scope)),atd5&&td5.append(atd5),atd4&&td4.append(atd4),atd3&&td3.append(atd3),atd2&&td2.append(atd2),atd1&&td1.append(atd1),self.lastItemId=addHtml.find("#paginateData"+page).data("lastItemId"),self.currentQty+=addHtml.find("#paginateData"+page).data("qty"),$timeout(function(){lastElement=null!=self.lastItemId?$("#list"+self.lastItemId):null,waiting=!1},200)}}))};global.get("store").val.template.stuffListType[cartType]&&global.get("store").val.template.stuffListType[cartType].paginate||angular.element($window).on("scroll",addBlockAfterScroll),$scope.$on("$destroy",function(){angular.element($window).off("scroll",addBlockAfterScroll)}),$timeout(function(){$rootScope.$emit("$stateChangeEndToStuff")})}),$scope.addBlockAfterScroll=function(){!waiting&&lastElement&&self.currentQty<self.totalQty&&(waiting=!0,page++,$rootScope.$emit("$stateChangeStartToStuff"),$q.when().then(function(){return waitingDiv.html(innerWaitingDiv),$http.get(url,{params:{pages:[page],perPage:perPage,rows:rows}})}).then(function(response){if(response){lastElement=null,waitingDiv.html("");var atd1,atd2,atd3,atd4,atd5,addHtml=angular.element(response.data.html);addHtml.find("#td-list-1 .td-wrapper").html()&&(atd1=$compile(addHtml.find("#td-list-1 .td-wrapper").html())($scope)),addHtml.find("#td-list-2 .td-wrapper").html()&&(atd2=$compile(addHtml.find("#td-list-2 .td-wrapper").html())($scope)),addHtml.find("#td-list-3 .td-wrapper").html()&&(atd3=$compile(addHtml.find("#td-list-3 .td-wrapper").html())($scope)),addHtml.find("#td-list-4 .td-wrapper").html()&&(atd4=$compile(addHtml.find("#td-list-4 .td-wrapper").html())($scope)),addHtml.find("#td-list-5 .td-wrapper").html()&&(atd5=$compile(addHtml.find("#td-list-5 .td-wrapper").html())($scope)),atd5&&td5.append(atd5),atd4&&td4.append(atd4),atd3&&td3.append(atd3),atd2&&td2.append(atd2),atd1&&td1.append(atd1),self.lastItemId=addHtml.find("#paginateData"+page).data("lastItemId"),self.currentQty+=addHtml.find("#paginateData"+page).data("qty"),$timeout(function(){lastElement=null!=self.lastItemId?$("#list"+self.lastItemId):null,waiting=!1},200),$timeout(function(){$rootScope.$broadcast("addBlockAfterScrollDone"),$rootScope.$emit("$stateChangeEndToStuff")},300)}}).catch(function(){$rootScope.$emit("$stateChangeEndToStuff")}))}}function stuffListCtrl($scope,Stuff,$rootScope,$q,$uibModal,global,exception,FilterTags,Filters,Confirm,Helper,anchorSmoothScroll,Photo,$timeout,$anchorScroll,Category,Brands,BrandTags,seoContent,AddInfo,$http,$location,$element){function getList(reload){if(reload&&$rootScope.$emit("$stateChangeStartToStuff"),self.listCriteria&&!$rootScope.$stateParams.searchStr)for(var k in self.listCriteria)null!==self.listCriteria[k]?self.query[k]=self.listCriteria[k]:delete self.query[k];return self.Items.getList(self.paginate,self.query).then(function(data){return $anchorScroll(),self.items=data,data.length&&(self.maxIndex=data[0].index,data.forEach(function(el,i){el.index>self.maxIndex&&(self.maxIndex=el.index)})),"stuffs.stuff"==self.$state.current.name&&self.paginate.page&&(console.log(":::::"),self.$state.go("stuffs",self.$stateParams)),self.items}).then(function(items){items&&items.length?$timeout(function(){$rootScope.$emit("$stateChangeEndToStuff")},100):(self.stateComplite=!0,$rootScope.$emit("$stateChangeEndToStuff"))}).catch(function(err){err=err.data||err,exception.catcher("получение списка")(err)})}function setRows(){return global.get("functions").val.setRows?global.get("functions").val.setRows():2}function filteringList(item){return!self.filterStr||item.name.toLowerCase().indexOf(self.filterStr.toLowerCase())!=-1||item.artikul.toLowerCase().indexOf(self.filterStr.toLowerCase())!=-1}function searchItem(artikul){if(artikul&&!(artikul.length<3)){artikul=artikul.substring(0,20),self.$state.current.reloadOnSearch=!0;var o={groupUrl:"group",categoryUrl:"category",searchStr:artikul.substring(0,20),queryTag:null,brand:null,brandTag:null,categoryList:null};self.$state.go(self.$state.current.name,o,{reload:!0})}}function saveField(item,field,defer){var o={_id:item._id};if(o[field]=item[field],"name"==field||"artikul"==field){var lang=global.get("store").val.lang,k=item.name;if(item.artikul&&(k+=" "+item.artikul),item.category&&item.category[0]&&global.get("categoriesO").val&&global.get("categoriesO").val[item.category[0]]&&global.get("categoriesO").val[item.category[0]].nameL&&(k+=" "+global.get("categoriesO").val[item.category[0]].nameL[lang]),item.brand&&global.get("brands").val){var id=item.brand._id?item.brand._id:item.brand,b=global.get("brands").val.getOFA("_id",id);if(k+=" "+(b.nameL&&b.nameL[lang]?b.nameL[lang]:b.name),item.brandTag){var bt=b.tags.getOFA("_id",item.brandTag);bt&&bt.nameL&&bt.nameL[lang]&&(k+=" "+bt.nameL[lang])}}item.keywords||(item.keywords={}),item.keywords[lang]=k,field+=" keywords."+lang,o["keywords."+lang]=k}return"archived"==field&&item[field]&&(field+=" actived",o.actived=!1,item.actived=!1),self.Items.save({update:field},o).$promise.then(function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)},function(err){console.log(err)})}function createItem(stuff,clone){stuff||(stuff={name:""},stuff.index=self.items&&self.items[0]&&self.items[0].index?self.items[0].index:0),$q.when().then(function(){return self.Items.cloneStuff(stuff,clone)}).then(function(stuff){self.newStuff=stuff}).then(function(){var url=self.newStuff.url;global.get("categoriesO").val[self.newStuff.category];self.$state.go("frame.stuffs.stuff",{groupUrl:self.$stateParams.groupUrl,categoryUrl:self.$stateParams.categoryUrl,stuffUrl:url})}).catch(function(err){err&&(err=err.data||err,exception.catcher("создание товара")(err),console.log(err))})}function filterList(){$q.when().then(function(){return self.Items.setFilters()}).catch(function(err){})}function getTagName(_id){if(_id&&self.filterTags&&"notag"!=_id&&self.filterTags.length)return self.filterTags.getOFA("_id",_id).name||null}function getFilterName(_id){if(_id&&self.filters){var filter=self.filters.getOFA("_id",_id);return filter?filter.name:""}}function deleteItem(stuff){var folder="images/"+global.get("store").val.subDomain+"/Stuff/"+stuff.url;Confirm("Удалить?").then(function(){return self.whileActions=!0,Stuff.delete({_id:stuff._id}).$promise}).then(function(){return self.getList(!0)}).then(function(){return self.whileActions=null,Photo.deleteFolder("Stuff",folder)}).catch(function(err){self.whileActions=null,(err=err&&err.data||err)&&exception.catcher("удаление товара")(err)})}function zoomImg(stuff){if(stuff.gallery&&stuff.gallery.length){var options={animation:!0,bindToController:!0,controllerAs:"$ctrl",templateUrl:"views/template/partials/stuffDetail/modal/zoom.html",controller:function($uibModalInstance,gallery,i){var self=this;self.gallery=gallery,self.idx=i,self.ok=function(){$uibModalInstance.close()},self.cancel=function(){$uibModalInstance.dismiss()}},resolve:{gallery:function(){return stuff.gallery},i:function(){return 0}}};$uibModal.open(options)}}function markAllStuffs(m){self.items.forEach(function(el){el.select=m})}function selectCategory(){var acts=[];return $q.when().then(function(){return Category.select()}).then(function(item){return self.items.forEach(function(el){el.select&&("object"==typeof el.category?el.category[0]=item._id:el.category=[item._id],acts.push(saveField(el,"category")))}),$q.all(acts)}).then(function(){getList(0)})}function selectBrand(){return $q.when().then(function(){return Brands.select()}).then(function(item){var o={};o.brand=item._id,o.brandTag=null,massSaveField(o)})}function selectBrandTag(){return $q.when().then(function(){return BrandTags.select()}).then(function(item){var o={};o.brand=item.brand._id,o.brandTag=item._id,massSaveField(o)})}function selectFilterTag(){var acts=[];return $q.when().then(function(){return FilterTags.select()}).then(function(item){var tag=item._id;self.items.forEach(function(el){if(el.select){el.select=!1;el.tags.indexOf(tag)<0&&(el.tags.push(tag),acts.push(saveField(el,"tags")))}})}).then(function(){return $q.all(acts)})}function unSelectFilterTag(){var acts=[];return $q.when().then(function(){return FilterTags.select()}).then(function(item){var tag=item._id;self.items.forEach(function(el){if(el.select){el.select=!1;var k=el.tags.indexOf(tag);k>-1&&(el.tags.splice(k,1),acts.push(saveField(el,"tags")))}})}).then(function(){return $q.all(acts)})}function selectAddInfo(){return $q.when().then(function(){return AddInfo.select()}).then(function(item){massSaveField({addInfo:item._id})})}function selectActived(){var options={animation:!0,templateUrl:"components/stuff/modal/selectActivedModal.html",bindToController:!0,controller:selectActivedCtrl,controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(actived){massSaveField({actived:actived}).then(function(){getList(0)})})}function selectActivedCtrl($uibModalInstance){var self=this;self.actived=!1,self.cancel=function(){$uibModalInstance.dismiss("cancel")},self.ok=function(){$uibModalInstance.close(self.actived)}}function selectPosition(){if(self.items.length){var options={animation:!0,templateUrl:"components/stuff/modal/selectPositionModal.html",bindToController:!0,controller:selectPositionCtrl,controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(position){if("down"==position){var minIndex=Number(self.items[self.items.length-1].index)-1;self.items.forEach(function(el){if(el.select){var i=minIndex--;el.index=i,saveField(el,"index")}})}else if("up"==position){var minIndex=Number(self.items[0].index)+1;self.items.forEach(function(el){if(el.select){var i=minIndex++;el.index=i,saveField(el,"index")}})}self.items.sort(function(a,b){return b.index-a.index})})}}function selectPositionCtrl($uibModalInstance){var self=this;self.position="up",self.cancel=function(){$uibModalInstance.dismiss("cancel")},self.ok=function(){$uibModalInstance.close(self.position)}}function changeOrderType(){var options={animation:!0,templateUrl:"components/stuff/modal/orderTypeModal.html",bindToController:!0,controller:orderTypeCtrl,controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(orderType){massSaveField({orderType:orderType})})}function orderTypeCtrl($uibModalInstance){var self=this;self.orderType=0,self.cancel=function(){$uibModalInstance.dismiss("cancel")},self.ok=function(){$uibModalInstance.close(self.orderType)}}function changeMinMax(){var options={animation:!0,templateUrl:"components/stuff/modal/changeMinMaxModal.html",bindToController:!0,controller:changeMinMaxCtrl,size:"lg",controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(item){massSaveField(item)})}function changeMinMaxCtrl($uibModalInstance){var self=this;self.item={minQty:1,maxQty:1,single:!1,multiple:!1},self.cancel=function(){$uibModalInstance.dismiss("cancel")},self.ok=function(){$uibModalInstance.close(self.item)}}function changePrice(){var options={animation:!0,templateUrl:"components/stuff/modal/changePriceModal.html",bindToController:!0,controller:changePriceCtrl,size:"lg",controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(item){item.ids=self.items.filter(function(el){return el.select}).map(function(el){return el._id}),item.price=Number(item.value),delete item.value;try{if(item.price)if(item.sum)item.$inc=!0,item.price<0&&self.items.forEach(function(el){if(el.select&&el.price+item.price<0)throw el.name+" price below 0"});else{if(item.$mul=!0,item.price<-99)throw"percent value -99 - ~";item.price+=100,item.price>0&&(item.price=item.price/100)}return delete item.sum,self.Items.save({update:"price"},item).$promise.then(function(){global.set("saving",!0),getList(!0),$timeout(function(){global.set("saving",!1)},1500)},function(err){console.log(err)})}catch(err){exception.catcher("error")(err)}})}function changePriceCtrl($uibModalInstance){var self=this;self.item={value:0,sum:!1},self.cancel=function(){$uibModalInstance.dismiss("cancel")},self.ok=function(){$uibModalInstance.close(self.item)}}function deleteStuffs(){Confirm("потверждаете?").then(function(){var ids=self.items.filter(function(el){return el.select}).map(function(el){return el._id}).join("_"),folders=self.items.filter(function(el){return el.select}).map(function(el){return"images/"+global.get("store").val.subDomain+"/Stuff/"+el.url});$q.when().then(function(){return self.Items.delete({ids:ids}).$promise.then(function(){global.set("saving",!0),getList(!0),$timeout(function(){global.set("saving",!1)},1500)},function(err){console.log(err)})}).then(function(){Photo.deleteFolders("Stuff",folders)})})}function massSaveField(item){var fields=Object.keys(item).join(" ");return item.ids=self.items.filter(function(el){return el.select}).map(function(el){return el._id}),self.Items.save({update:fields},item).$promise.then(function(){global.set("saving",!0),(item.actived||item.category)&&getList(!0),$timeout(function(){global.set("saving",!1)},1500)},function(err){console.log(err)})}function changeAction(){Confirm("подтвердите действие").then(function(){if(self.action){var a=angular.copy(self.action);switch(self.action=null,self.mark=!1,a){case"category":return selectCategory();case"brand":return selectBrand();case"brandTag":return selectBrandTag();case"filterTag":return selectFilterTag();case"unfilterTag":return unSelectFilterTag();case"addInfo":return selectAddInfo();case"actived":return selectActived();case"index":return selectPosition();case"order":return changeOrderType();case"changePrice":return changePrice();case"changeMinMax":return changeMinMax();case"deleteStuffs":return deleteStuffs()}}})}function dropCallback(item){return item}function alignmentIndex(){Confirm("Подтверждаете?").then(function(){self.alignmentIndexDisable=!0;var data={};return $http({method:"post",url:"/api/alignmentIndex",data:data})}).then(function(){}).catch(function(err){console.log(err)})}function fixData(){Confirm("Подтверждаете?").then(function(){self.fixDesable=!0;var data={};return $http({method:"post",url:"/api/fixedDB/stuff",data:data})}).then(function(){self.fixDesable=!1,exception.showToaster("info","fix stucture","Ok")}).catch(function(err){exception.catcher("fix stucture")(err)})}function reNewKeyWords(){Confirm("Подтверждаете?").then(function(){self.reNewKeyWordsDisable=!0;var data={};return $http({method:"GET",url:"/api/reNewKeyWords",data:data})}).then(function(){self.reNewKeyWordsDisable=!1,exception.showToaster("info","reNewKeyWords","Ok")}).catch(function(err){exception.catcher("reNewKeyWords")(err)})}function changeRows(rows){if(self.paginate.rows!=rows){self.paginate.rows=rows,self.paginate.page=0,self.paginate.items=0;getList(!0)}}function clearSearch(){$location.search("searchStr",null)}function changeListCriteria(field,val){self.listCriteria&&(self.listCriteria.actived=null,self.listCriteria.archived=null),field&&(self.listCriteria[field]=val),"actived"!=field||val||(self.listCriteria.archived=!1),self.paginate.page=0,getList(!0)}function changeStock(stuff,tag){stuff.stock&&stuff.stock[tag._id]&&(stuff.stock[tag._id].quantity=tag.quantity,saveField(stuff,"stock"))}function deleteIndexPageHtml(){Confirm("перезаписать страницу?").then(function(){return $http.get("/api/deleteIndexPageHtml?catalog="+$rootScope.$stateParams.groupUrl+"_"+$rootScope.$stateParams.categoryUrl)}).then(function(res){exception.showToaster("info","все OK")}).catch(function(err){exception.catcher("сброс страницы")(err)})}anchorSmoothScroll.scrollTo("topPage"),$element.on("$destroy",function(){});var stamp=Date.now();console.log("stuffListCtrl from admin ",stamp);var self=this;self.Items=Stuff,self.mobile=global.get("mobile").val,self.global=global,self.globalProperty=$rootScope.globalProperty,self.$state=$rootScope.$state,self.$stateParams=$rootScope.$stateParams,self.query={},self.data={rows:2},self.itemsArr2=[[],[]],self.itemsArr3=[[],[],[]],self.itemsArr4=[[],[],[],[]],self.itemsArr5=[[],[],[],[],[]];self.paginate={page:0,rows:100,items:0},setTimeout(function(){$rootScope.displaySlideMenu=!0},400),self.newStuff={name:"",actived:!1},self.listOfActions={filterTag:"добавить характеристику",unfilterTag:"снять характеристику",addInfo:"таблица доп. параметров",category:"смена категории",brand:"смена бренда",order:"способ заказа",brandTag:"смена коллекции",changePrice:"смена цены",changeMinMax:"смена min max кол-ва для заказа",deleteStuffs:"удаление товаров",actived:"смена видимости",index:"смена позиции"},self.maxIndex=0,self.listCriteria={actived:!0},self.getList=getList,self.saveField=saveField,self.searchItem=searchItem,self.createItem=createItem,self.filterList=filterList,self.getTagName=getTagName,self.getFilterName=getFilterName,self.deleteItem=deleteItem,self.zoomImg=zoomImg,self.markAllStuffs=markAllStuffs,self.changeAction=changeAction,self.dropCallback=dropCallback,self.filteringList=filteringList,self.alignmentIndex=alignmentIndex,self.fixData=fixData,self.reNewKeyWords=reNewKeyWords,self.changeRows=changeRows,self.clearSearch=clearSearch,self.changeListCriteria=changeListCriteria,self.changeStock=changeStock,self.deleteIndexPageHtml=deleteIndexPageHtml,function(){global.get("tempContent")&&global.get("tempContent").val&&($("#tempContent").empty(),global.set("tempContent",null)),self.data.rows=setRows(),global.get("crawler")&&global.get("crawler").val&&"stuffs.stuff"==self.$state.current.name||$q.when().then(function(){return self.Items.getQueryFromUrl(self.campaignCondition)}).then(function(query){return self.query=query,getList()}).then(function(){return FilterTags.getFilterTags()}).then(function(filterTags){self.filterTags=filterTags}).then(function(){return Filters.getFilters()}).then(function(filters){self.filters=filters}).then(function(){$rootScope.reloadStuffId&&$timeout(function(){anchorSmoothScroll.scrollTo("stuff"+$rootScope.reloadStuffId,-150),$rootScope.reloadStuffId=null},1300)}).then(function(helper){helper&&(self.helper=helper,global.get("store").val.helper||(self.helper.popover=null))}).then(function(){seoContent.setDataCatalog()}).catch(function(err){console.log(err)})}(),$scope.$on("fromStuffToStuffs",function(){console.log("$rootScope.$on('fromStuffToStuffs'",stamp),getList(!0)}),$(window).resize(function(){$timeout(function(){self.data.rows=setRows()})}),selectActivedCtrl.$inject=["$uibModalInstance"],selectPositionCtrl.$inject=["$uibModalInstance"],orderTypeCtrl.$inject=["$uibModalInstance"],changeMinMaxCtrl.$inject=["$uibModalInstance"],changePriceCtrl.$inject=["$uibModalInstance"],console.log($rootScope.$stateParams)}function filtersWrapDirective(global){return{scope:{},restrict:"C",bindToController:!0,controller:filtersWrapCtrl,controllerAs:"$ctrl",templateUrl:function(){var s="";if(global.get("store").val){var type=global.get("sectionType")&&global.get("sectionType").val?global.get("sectionType").val:"good",sec=global.get("store").val.template.stuffListType[type];if(sec.filters)for(var i=0;i<sec.parts.length;i++)if("filters"==sec.parts[i].name){sec.parts[i].templ&&(s=sec.parts[i].templ);break}}return"views/template/partials/stuffs/filters/filtersWrap"+s+".html"}}}function filtersWrapCtrl($element,$timeout,$q,$stateParams,Sections,$location,Filters,global,Brands,Stuff,$scope,$rootScope,$state){function changeTag(){var queryTag="",brandTag="",brand="",filterTag="";self.filters.forEach(function(filter){filter.count?filter.set&&(filterTag&&(filterTag+="__"),filterTag+=filter._id+"_"+filter.minValue+"_"+filter.maxValue):filter.tags.forEach(function(tag){tag.set&&(queryTag&&(queryTag+="__"),queryTag+=tag.url)})}),self.brands.forEach(function(b){b.set&&(brand&&(brand+="__"),brand+=b.url),b.tags.forEach(function(tag){tag.set&&(brandTag&&(brandTag+="__"),brandTag+=tag.url)})}),brand.split("__").length>1&&(brandTag=null),queryTag?$location.search("queryTag",queryTag):$location.search("queryTag",null),brandTag?$location.search("brandTag",brandTag):$location.search("brandTag",null),brand?$location.search("brand",brand):$location.search("brand",null),filterTag?$location.search("filterTag",filterTag):$location.search("filterTag",null);$stateParams.groupUrl,$stateParams.categoryUrl,self.brand}function clearAllBrands(){self.brands.forEach(function(b){b.set=!1,b.tags&&b.tags.length&&b.tags.forEach(function(t){t.set=!1})})}function changeAllBrands(){clearAllBrands(),changeTag()}function clearFilter(filter){filter.set=null,filter.tags&&filter.tags.length&&filter.tags.forEach(function(t){t.set=!1})}function changeAllTags(filter){clearFilter(filter),changeTag()}function clearAll(){clearAllBrands(),self.filters.forEach(function(filter){clearFilter(filter)}),changeTag()}function setCountFilter(filter){filter.set=!0,changeTag()}function clearCountFilter(filter){filter.set=null,changeTag()}function openFilterForBrands(){if(self.brands&&self.brands.length)return self.brands.some(function(b){return b.open})}function setCharForBrands(char){self.char=char}function filterBrands(item){return item.name.toUpperCase()[0]==self.char}var self=this;self.global=global,self.chars=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],self.char=self.chars[0],self.changeAllBrands=changeAllBrands,self.changeAllTags=changeAllTags,self.clearAll=clearAll,self.setCountFilter=setCountFilter,self.clearCountFilter=clearCountFilter,self.openFilterForBrands=openFilterForBrands,self.filterBrands=filterBrands,self.setCharForBrands=setCharForBrands,$rootScope.$on("changeCurrency",function(){console.log("changeCurrency",global.get("rate").val),self.filters.forEach(function(f){f.count&&f.price&&(console.log(f.mixSave,global.get("rate").val),f.min=Math.ceil10(f.mixSave*global.get("rate").val,0),console.log(f.min),f.max=Math.ceil10(f.maxSave*global.get("rate").val,0),f.maxValue=f.max,f.minValue=f.min,console.log(f))}),$timeout(function(){$scope.$broadcast("rzSliderForceRender")},500)}),function(){$q.when().then(function(){return Brands.getBrands()}).then(function(brands){self.brands=brands,self.checkedBrand=0,self.brands&&self.brands.forEach(function(b){b.set&&self.checkedBrand++})}).then(function(){return Filters.getFilters()}).then(function(filters){filters.forEach(function(f){f.count&&f.price&&(f.maxSave||(f.maxSave=f.max),f.mixSave||(f.mixSave=f.min),f.min=Math.ceil10(f.mixSave*global.get("rate").val,0),f.max=Math.ceil10(f.maxSave*global.get("rate").val,0))}),self.filters=filters})}(),self.changeTag=changeTag;$element.offsetParent(),$element.find("div")[0];$timeout(function(){function filtersForScroll(event){if(list&&"stuffs"==$state.current.name){var docViewTop=win.scrollTop(),docViewBottom=docViewTop+win.height(),elemTop=$(filtersBox).offset().top,elemBottom=elemTop+$(filtersBox).height(),elemWidth=$(filtersBox).width(),listTop=$(list).offset().top,listBottom=listTop+$(list).height(),st=$(this).scrollTop();st>lastScrollTop?function(){if(elemBottom)if("fixed"==$(filtersBox).css("position"))if($(filtersBox).css("top")==sdvig+"px")if(elemBottom<docViewBottom);else{
var t=elemTop-$(filtersFirstBox).offset().top;$(filtersFirstBox).css("height",t+"px"),$(filtersBox).css("position","absolute"),$(filtersBox).css("top",t+"px"),$(filtersBox).css("bottom","auto")}else"0px"==$(filtersBox).css("bottom")&&listBottom<=elemBottom&&($(filtersFirstBox).css("height",$(list).height()),$(filtersBox).css("position","absolute"),$(filtersBox).css("bottom","0px"),$(filtersBox).css("top","auto"));else"absolute"==$(filtersBox).css("position")&&(docViewTop-sdvig>=elemTop&&elemBottom<docViewBottom&&$(filtersBox).height()<docViewBottom-docViewTop-sdvig?($(filtersBox).css("position","fixed"),$(filtersBox).css("bottom","auto"),$(filtersBox).css("top",sdvig+"px"),$(filtersBox).css("width",elemWidth+"px")):elemBottom<=docViewBottom&&elemBottom<listBottom&&!($(filtersBox).height()<docViewBottom-docViewTop-sdvig)&&($(filtersBox).css("position","fixed"),$(filtersBox).css("bottom","0px"),$(filtersBox).css("top","auto"),$(filtersBox).css("width",elemWidth+"px")))}():function(){elemBottom&&("fixed"==$(filtersBox).css("position")?"0px"==$(filtersBox).css("bottom")?($(filtersFirstBox).css("height",docViewBottom-$(filtersFirstBox).offset().top),$(filtersBox).css("position","absolute"),$(filtersBox).css("bottom","0px"),$(filtersBox).css("top","auto"),$(filtersBox).css("width",elemWidth+"px"),$(filtersFirstBox).height()<$(filtersBox).height()&&$(filtersFirstBox).height($(filtersBox).height())):$(filtersBox).css("top")==sdvig+"px"?docViewTop+sdvig<=listTop&&($(filtersBox).css("position","absolute"),$(filtersBox).css("bottom","auto"),$(filtersBox).css("top","0px"),$(filtersBox).css("width",elemWidth+"px")):console.log("?????????????"):"absolute"==$(filtersBox).css("position")&&elemTop>docViewTop+sdvig&&elemTop>listTop&&($(filtersBox).css("position","fixed"),$(filtersBox).css("top",sdvig+"px"),$(filtersBox).css("bottom","auto"),$(filtersBox).css("width",elemWidth+"px")))}(),lastScrollTop=st}}var w=$element.parent().width(),list=(Math.round(w/5),$element.parent().children()[1]),nav=$(".navbar-fixed-top"),sdvig=0;nav.each(function(i,n){sdvig+=$(n).outerHeight()});var filtersFirstBox=$element.find(".filters-first-box")[0],filtersBox=$element.find(".filter-box")[0],win=$(window);win.scroll(filtersForScroll);var lastScrollTop=0;$(filtersFirstBox).height($(filtersBox).height()),$scope.$watch(function(){return $(filtersBox).height()},function(n,o){$(filtersFirstBox).height(n+"px")}),$rootScope.$on("$stateChangeSuccess",function(ev,to,toParams,from,fromParams){"stuffs"==to.name&&filtersForScroll()}),$scope.$on("$destroy",function(){angular.element(window).off("scroll",filtersForScroll)})},150)}angular.module("gmall.controllers").controller("stuffListFromServerCtrl",stuffListFromServerCtrl),angular.module("gmall.services").directive("stuffList",stuffListDirective).directive("stuffListTemplate",stuffListTemplateDirective).directive("stuffListTemplateList",stuffListTemplateDirectiveList).directive("stuffListTemplateServer",stuffListTemplateServer).directive("stuffListTemplateCampaignList",stuffListTemplateDirectiveCampaignList).directive("emptyList",emptyList).directive("stuffInList",stuffInList).directive("homePageStuffOwl",function(){return{scope:{homePageStuffOwl:"@",zoomImg:"@",stuffs:"@",items:"@",autoplay:"@",duration:"@",gallery:"="},bindToController:!0,controllerAs:"$ctrl",controller:homePageStuffOwlCtrl}}).directive("homePageHtml",function(){return{restrict:"C",scope:!0,bindToController:!0,controllerAs:"$ctrl",controller:homePageHtmlCtrl}}).directive("likesItem",likesItem),likesItemCtrl.$inject=["$compile","$timeout","localStorage","Stuff","global"],homePageHtmlCtrl.$inject=["$scope","$rootScope","$timeout","$element","$compile","global","$q","$http"],homePageStuffOwlCtrl.$inject=["$scope","$timeout","$element","$compile","global"],stuffListFromServerCtrl.$inject=["$scope","$state","$compile","$element","$window","Stuff","$rootScope","$q","$uibModal","global","exception","FilterTags","Filters","Confirm","Helper","anchorSmoothScroll","Photo","$timeout","$anchorScroll","Category","Brands","BrandTags","seoContent","AddInfo","$http","$location","$sce"],campaignStuffListCtrl.$inject=["$scope","$state","$compile","$element","$window","Stuff","$rootScope","$q","$uibModal","global","exception","FilterTags","Filters","Confirm","Helper","anchorSmoothScroll","Photo","$timeout","$anchorScroll","Category","Brands","BrandTags","seoContent","AddInfo","$http","$location","localStorage"],stuffListCtrl.$inject=["$scope","Stuff","$rootScope","$q","$uibModal","global","exception","FilterTags","Filters","Confirm","Helper","anchorSmoothScroll","Photo","$timeout","$anchorScroll","Category","Brands","BrandTags","seoContent","AddInfo","$http","$location","$element"],angular.module("gmall.directives").directive("filtersWrap",filtersWrapDirective),filtersWrapCtrl.$inject=["$element","$timeout","$q","$stateParams","Sections","$location","Filters","global","Brands","Stuff","$scope","$rootScope","$state"]}(),function(){function gallerySmallDirective(){return{restrict:"C",controller:gallerySmallCtrl}}function stuffCartDirective(global){return{templateUrl:function(){var s=global.get("campaignStuffCart").val&&0!=global.get("campaignStuffCart").val?global.get("campaignStuffCart").val:"";return"/views/template/partials/stuffs/list/stuff-cart/stuff-cart"+s+".html"},restrict:"A"}}function homePageStuffDirective(global){return{restrict:"A",scope:{homePageStuff:"@"},bindToController:!0,controllerAs:"$ctrl",controller:homePageStuffCtrl}}function itemCtrl($scope,$anchorScroll,global,Stuff,$stateParams,$window,$q,BrandTags,FilterTags,Filters,AddInfo,Comments,exception,seoContent,$location,Sections,$uibModal,$notification,$rootScope,$timeout,$element){function getStuff(url,reload){reload&&self.item.stockKeysArray&&(self.item.stockKeysArray=[]),console.log(JSON.stringify(self.item.stockKeysArray));var leftRow=$("#stuffDetailLeftClass"),rightRow=$("#stuffDetailRightClass");return $q.when().then(function(){var o;return $stateParams.store&&(o={},o.store=$stateParams.store),Stuff.getItem(url,o)}).then(function(item){if(null!=item.grid&&void 0!=item.grid?(item.leftClass=ratioClassStuffDetail[item.grid].left,item.rightClass=ratioClassStuffDetail[item.grid].right):(item.leftClass=ratioClassStuffDetail[global.get("store").val.template.stuffDetailType[global.get("sectionType").val].ratio].left,item.rightClass=ratioClassStuffDetail[global.get("store").val.template.stuffDetailType[global.get("sectionType").val].ratio].right),self.item?self.item.leftClass!=item.leftClass?leftRow.removeAttr("class"):self.item.rightClass!=item.rightClass&&rightRow.removeAttr("class"):(leftRow.removeAttr("class"),rightRow.removeAttr("class")),self.objShare=seoContent.setDataItem(item),item.blocks&&item.blocks.length){item.blocks.sort(function(a,b){return a.index-b.index});document.getElementById("style"+item.url)}if(reload){$rootScope.$broadcast("reloadGallery");for(var key in self.item)"gallery"!=key&&"sortsOfStuff"!=key&&(item[key]&&"function"!=typeof item[key]?"stockKeysArray"==key?$timeout(function(){self.item.stockKeysArray=item.stockKeysArray},700):self.item[key]=item[key]:delete self.item[key]);for(var key in item)"gallery"==key||"sortsOfStuff"==key||self.item[key]||(self.item[key]=item[key]);self.activeSlide=0}else self.item=item;return $anchorScroll(),item}).then(function(item){if(console.dir(item),item.sortsOfStuff&&item.sortsOfStuff.stuffs&&item.sortsOfStuff.stuffs.length){var filterGroup,filterGroupTags=[];item.sortsOfStuff.filterGroup&&(filterGroup=_filtersO[item.sortsOfStuff.filterGroup])&&(filterGroupTags=filterGroup.tags.map(function(t){return t._id})),item.sortsOfStuff.stuffs.forEach(function(stuff,i){stuff.gallery.forEach(function(s,ii){s.active=!ii});for(var ii=0;ii<stuff.tags.length;ii++){var idx=filterGroupTags.indexOf(stuff.tags[ii]);if(idx>-1){filterGroup.tags[idx].img&&(item.sortsOfStuff.stuffs[i].gallery[0].thumbSmallTag=filterGroup.tags[idx].img);break}}}),self.item.sortsOfStuff=item.sortsOfStuff}}).then(function(){if(self.disqusConfig={disqus_shortname:global.get("store").val.disqus,disqus_identifier:self.item._id,disqus_url:$location.absUrl(),disqus_title:self.item.name,disqus_config_language:global.get("store").val.lang},reload){var u=self.disqusConfig.disqus_url.split("/");u[u.length-1]=self.item.url,self.disqusConfig.disqus_url=u.join("/")}if(self.getComments(0),self.commentName=global.get("user").val?global.get("user").val.name||global.get("user").val.profile.fio:"",self.item.addInfo)return getAddInfos()}).then(function(){$timeout(function(){$rootScope.$emit("$stateChangeEndToStuff"),carousel=$($element).find(".gallery-carousel")},300)}).then(function(){self.item.FullTags=self.item.tags.map(function(t){return t&&(t=angular.copy(global.get("filterTags").val.getOFA("_id",t)))?(t.filter&&!t.filter._id&&(t.filter=global.get("filters").val.getOFA("_id",t.filter)),t):null})}).then(function(){prepareStuffList()}).catch(function(err){console.log(err),err=err.data||err,exception.catcher("получение товара")(err)})}function getTagName(tag){if(tag)return self.filterTags.getOFA("_id",tag).name}function getFilterName(filter){if(filter&&_filterO[filter])return _filterO[filter].name}function decreaseQty(){var stuff=self.item;stuff&&stuff.quantity>1&&(stuff.multiple&&stuff.minQty?stuff.quantity-1>=stuff.minQty&&stuff.quantity--:stuff.quantity--)}function increaseQty(){var stuff=self.item;stuff&&(stuff.single&&stuff.maxQty?stuff.quantity+1<=stuff.maxQty&&stuff.quantity++:stuff.quantity++)}function chancheStuff(item){console.log(item),self.item.gallery=item.gallery,self.activeSlide=0,getStuff(item.url,"reload")}function getAddInfos(){return $q(function(resolve,reject){self.item.addInfo?AddInfo.get({id:self.item.addInfo,store:self.item.store},function(res){self.item.addInfo=res,resolve()},function(err){reject(err)}):resolve()})}function createNewComment(text){if(text){if(!global.get("user").val)return self.commentAccess=!0,void $timeout(function(){self.commentAccess=!1},6e3);var newComment={text:text.substring(0,500),stuff:self.item._id,user:global.get("user").val.name};$q.when().then(function(){return Comments.save(newComment).$promise}).then(function(){var o={addressee:"seller",type:"comment",content:""};return o.seller=global.get("store").val.seller._id,o.content="<h3>КОММЕНТАРИЙ К ТОВАРУ</h3>"+moment(Date.now()).format("LLL")+"<h4>"+self.item.name+(self.item.artikul?" "+self.item.artikul:"")+"</h4>"+text.substring(0,30)+"...",$notification.save(o).$promise}).then(function(){return self.comment="",getComments(0)}).catch(function(err){err=err.data||err,exception.catcher("создание комментария")(err)})}}function getComments(page){0===page?self.paginate.page=page:"more"===page&&self.paginate.page++;var query={stuff:self.item._id};return Comments.getList(self.paginate,query).then(function(data){self.paginate.page?self.item.comments.push.apply(self.item.comments,data):self.item.comments=data}).catch(function(err){err=err.data||err,exception.catcher("получение комментариев")(err)})}function chancheActiveSlide(index,swipe){slideDelay||(slideDelay=!0,$timeout(function(){slideDelay=!1},700),swipe?(carousel=$element.find(".gallery-carousel"),"left"==swipe?carousel&&carousel.isolateScope&&"function"==typeof carousel.isolateScope&&carousel.isolateScope().next():"right"==swipe&&carousel&&carousel.isolateScope&&"function"==typeof carousel.isolateScope&&carousel.isolateScope().prev()):(self.activeSlide=index,self.item.gallery[index].active=!0))}function prepareStuffList(){if(global.get("stuffsInList").val){maxNumInRow=0,stuffsInList=[],currentStuffInList=0;for(var k in global.get("stuffsInList").val)global.get("stuffsInList").val[k].length&&global.get("stuffsInList").val[k].length>maxNumInRow&&(maxNumInRow=global.get("stuffsInList").val[k].length);for(var j=0;j<maxNumInRow;j++)for(var i=1;i<=6;i++)global.get("stuffsInList").val["td-list-"+i]&&global.get("stuffsInList").val["td-list-"+i].length&&global.get("stuffsInList").val["td-list-"+i][j]&&stuffsInList.push(global.get("stuffsInList").val["td-list-"+i][j]);for(var i=0;i<stuffsInList.length;i++)if(self.item&&self.item._id==stuffsInList[i]._id){currentStuffInList=i;break}}}function nextStuff(){slideDelay||(slideDelay=!0,$timeout(function(){slideDelay=!1},400),currentStuffInList<stuffsInList.length-1?(currentStuffInList++,stuffsInList&&stuffsInList[currentStuffInList]&&(self.item=stuffsInList[currentStuffInList])):(console.log("addBlockAfterScroll"),$rootScope.$broadcast("addBlockAfterScroll")))}function prevStuff(){slideDelay||(slideDelay=!0,$timeout(function(){slideDelay=!1},700),currentStuffInList>0&&currentStuffInList--,stuffsInList&&stuffsInList[currentStuffInList]&&(self.item=stuffsInList[currentStuffInList]))}function returnToList(){$rootScope.$state.go("stuffs")}$anchorScroll();var stuffsInList=[],currentStuffInList=null,maxNumInRow=0,self=this;global.get("tempContent").val?self.firstLook=!0:self.firstLook=!1,self.global=global,self.$stateParams=$stateParams,self.lang=global.get("store").val.lang,self.rate=global.get("rate"),self.mobile=global.get("mobile").val,self.crawler=global.get("crawler").val,self.currency=global.get("currency"),self.moment=moment,self.activeSlide=0,self.paginate={rows:5,page:0,items:0},self.getTagName=getTagName,self.getFilterName=getFilterName,self.createNewComment=createNewComment,self.getComments=getComments,self.increaseQty=increaseQty,self.decreaseQty=decreaseQty,self.chancheStuff=chancheStuff,self.chancheActiveSlide=chancheActiveSlide,self.nextStuff=nextStuff,self.prevStuff=prevStuff,self.returnToList=returnToList;var slideDelay,carousel;!function(){global.get("tempContent")&&global.get("tempContent").val&&($("#tempContent").empty(),global.set("tempContent",null)),$location.search("searchStr",null),$q.when().then(function(){return FilterTags.getFilterTags()}).then(function(filterTags){return self.filterTags=filterTags,Filters.getFilters()}).then(function(filters){return self.filters=filters,getStuff($stateParams.stuffUrl)})}(),$rootScope.$on("cartslide",function(data){global.get("user").val&&(self.commentName=global.get("user").val.name)}),$rootScope.$on("logout",function(data){self.commentName=""}),$scope.$on("addBlockAfterScrollDone",function(){console.log("addBlockAfterScrollDone"),prepareStuffList(),nextStuff()})}function homePageStuffCtrl($scope,global,Stuff,$q,$compile,$element,exception){var self=this;self.global=global,function(){$q.when().then(function(filters){return Stuff.getItem(self.homePageStuff)}).then(function(item){self.stuff=item;var linkFn=$compile($element[0].innerHTML),content=linkFn($scope);$element[0].innerHTML=null,$element.append(content)}).catch(function(err){err=err.data||err,exception.catcher("get stuff home page")(err)})}()}function gallerySmallCtrl($element,$timeout,$scope,$attrs){var wrapDiv=$element.children(),paddingLeft=0,paddingRight=0,arrowUp=$element.find(".arrow-up-gallery-small"),arrowDown=$element.find(".arrow-down-gallery-small");$(arrowUp).css("display","none"),$(arrowDown).css("display","none"),$scope.arrowUp=function(display){display?$(arrowUp).css("display","inline-block"):$(arrowUp).css("display","none")},$scope.arrowDown=function(display){display?$(arrowDown).css("display","inline-block"):$(arrowDown).css("display","none")},$timeout(function(){function scrollFoo(reload){if(console.log("scrollFoo"),$attrs.orientation&&"horizontal"==$attrs.orientation){if($attrs.orientation&&"horizontal"==$attrs.orientation){var left=$(child).offset().left,right=$(child).offset().left+$(child).width(),leftFirstImg=$(images[0]).offset().left,rightLastImg=$(images[imagesQty-1]).offset().left+$(images[imagesQty-1]).width();left>leftFirstImg?$scope.arrowUp(!0):$scope.arrowUp(!1),right<rightLastImg?$scope.arrowDown(!0):$scope.arrowDown(!1)}}else{var top=$(child).offset().top,bottom=$(child).offset().top+$(child).height(),topFirstImg=$(images[0]).offset().top,bottomLastImg=$(images[imagesQty-1]).offset().top+$(images[imagesQty-1]).height();top>topFirstImg?$scope.arrowUp(!0):$scope.arrowUp(!1),bottom<bottomLastImg?$scope.arrowDown(!0):$scope.arrowDown(!1)}}function move_up(){if($attrs.orientation&&"horizontal"==$attrs.orientation){if($attrs.orientation&&"horizontal"==$attrs.orientation){var scrollLeft=child.scrollLeft-200;$(child).stop().animate({scrollLeft:scrollLeft},"500","swing",function(){})}}else{var scrollTop=child.scrollTop-500;$(child).stop().animate({scrollTop:scrollTop},"500","swing",function(){})}}function move_down(){if(console.log("move_down"),$attrs.orientation&&"horizontal"==$attrs.orientation){if($attrs.orientation&&"horizontal"==$attrs.orientation){var scrollLeft=child.scrollLeft+200;$(child).stop().animate({scrollLeft:scrollLeft},"500","swing",function(){})}}else{var scrollTop=child.scrollTop+500;console.log(scrollTop,child),$(child).stop().animate({scrollTop:scrollTop},"500","swing",function(){})}}function changeImg(){$timeout(function(){var h=$(".gallery-big").height();h>galleryBigH&&(galleryBigH=h,wrapDiv.css("height",h))},700)}var images=$element.find("img");$scope.loadCounter=images.length+1;var listener=$scope.$watch("loadCounter",function(n,o){if(0==n)if(listener(),top=$(child).offset().top,bottom=$(child).offset().top+$(child).height(),left=$(child).offset().left,right=$(child).offset().top+$(child).width(),$attrs.orientation&&"horizontal"==$attrs.orientation){if($attrs.orientation&&"horizontal"==$attrs.orientation){paddingLeft=$(child).css("padding-left").replace(/[^-\d\.]/g,""),paddingRight=$(child).css("padding-right").replace(/[^-\d\.]/g,"");var leftFirstImg=$(images[0]).offset().left,rightLastImg=$(images[images.length-1]).offset().left+$(images[images.length-1]).width();left>leftFirstImg&&$scope.arrowUp(!0),right<rightLastImg&&$scope.arrowDown(!0)}}else{child.style.right=child.clientWidth-child.offsetWidth+"px";var topFirstImg=$(images[0]).offset().top,bottomLastImg=$(images[images.length-1]).offset().top+$(images[images.length-1]).height();top>topFirstImg&&$scope.arrowUp(!0),bottom<bottomLastImg&&$scope.arrowDown(!0)}}),imagesQty=images.length,imagesBig=$(".gallery-big img");imagesBig.length||(imagesBig=$(".zoom-big-slide img"));var galleryBigH,child=$element.find("#gallery-small-container")[0],top=$(child).offset().top,bottom=$(child).offset().top+$(child).height(),left=$(child).offset().left,right=$(child).offset().top+$(child).width();imagesBig.each(function(i,img){i||(this.complete?($attrs.orientation&&"horizontal"==$attrs.orientation?$attrs.orientation&&"horizontal"==$attrs.orientation&&(galleryBigH=imagesBig.width(),wrapDiv.css("width",galleryBigH)):(galleryBigH=imagesBig.height(),wrapDiv.css("height",galleryBigH)),top=$(child).offset().top,bottom=$(child).offset().top+$(child).height(),left=$(child).offset().left,right=$(child).offset().top+$(child).width(),$timeout(function(){$scope.loadCounter--})):$(this).bind("load",function(){$attrs.orientation&&"horizontal"==$attrs.orientation?$attrs.orientation&&"horizontal"==$attrs.orientation&&(galleryBigH=imagesBig.width(),wrapDiv.css("width",galleryBigH)):(galleryBigH=imagesBig.height(),wrapDiv.css("height",galleryBigH)),top=$(child).offset().top,bottom=$(child).offset().top+$(child).height(),left=$(child).offset().left,right=$(child).offset().top+$(child).width(),$timeout(function(){$scope.loadCounter--})}))}),images.each(function(img){this.complete?$scope.loadCounter--:$(this).bind("load",function(){$scope.loadCounter--})}),$(child).bind("scroll",scrollFoo),$scope.smallGalleryF={move_up:move_up,move_down:move_down,changeImg:changeImg},$scope.$on("reloadGallery",function(){$timeout(function(){images=$element.find("img"),imagesQty=images.length,scrollFoo("reload")},300)})},100)}function nameBlockStuff(){return{templateUrl:"views/template/partials/stuffDetail/blocks/blocks/nameBlock.html"}}function positionBlockStuff(){return{templateUrl:"views/template/partials/stuffDetail/blocks/blocks/positionBlock.html"}}function videoLinkBlockStuff(){return{templateUrl:"views/template/partials/stuffDetail/blocks/blocks/videoLinkBlock.html"}}function textBlockStuff(){return{templateUrl:function(el,attrs){return"views/template/partials/stuffDetail/blocks/blocks/textBlock"+(attrs&&attrs.blockTempl&&"0"!=attrs.blockTempl?attrs.blockTempl:"")+".html"}}}function text2BlockStuff(){return{templateUrl:"views/template/partials/stuffDetail/blocks/blocks/text2Block.html"}}function bannerBlockStuff(){return{templateUrl:"views/template/partials/stuffDetail/blocks/blocks/bannerBlock.html"}}function banner1BlockStuff(){return{templateUrl:"views/template/partials/stuffDetail/blocks/blocks/banner1Block.html"}}function sliderBlockStuff(){return{templateUrl:"views/template/partials/stuffDetail/blocks/blocks/sliderBlock.html"}}function videoBlockStuff(){return{templateUrl:"views/template/partials/stuffDetail/blocks/blocks/videoBlock.html"}}function video1BlockStuff(){return{templateUrl:"views/template/partials/stuffDetail/blocks/blocks/video1Block.html"}}function video2BlockStuff(){return{templateUrl:"views/template/partials/stuffDetail/blocks/blocks/video2Block.html"}}function mapBlockStuff(){return{templateUrl:"views/template/partials/stuffDetail/blocks/blocks/mapBlock.html"}}function map1BlockStuff(){return{templateUrl:"views/template/partials/stuffDetail/blocks/blocks/map1Block.html"}}function map2BlockStuff(){return{templateUrl:"views/template/partials/stuffDetail/blocks/blocks/map2Block.html"}}function mastersBlockStuff(){return{templateUrl:"views/template/partials/stuffDetail/blocks/blocks/mastersBlock.html"}}function feedbackBlockStuff(){return{templateUrl:"views/template/partials/stuffDetail/blocks/blocks/feedbackBlock.html"}}function feedback1BlockStuff(){return{templateUrl:"views/template/partials/stuffDetail/blocks/blocks/feedback1Block.html"}}function feedback2BlockStuff(){return{templateUrl:"views/template/partials/stuffDetail/blocks/blocks/feedback2Block.html"}}function imgsBlockStuff(){return{templateUrl:"views/template/partials/stuffDetail/blocks/blocks/imgsBlock.html"}}function dateBlockStuff(){return{templateUrl:"views/template/partials/stuffDetail/blocks/blocks/dateBlock.html"}}function snBlockStuff(){return{templateUrl:"views/template/partials/stuffDetail/blocks/blocks/snBlock.html"}}function calendarBlockStuff(){return{templateUrl:"views/template/partials/stuffDetail/blocks/blocks/calendarBlock.html"}}function itemDirectiveFromServer(){return{scope:{},bindToController:!0,controllerAs:"$ctrl",template:"<div></div>",controller:stuffDetailFromServerCtrl,restrict:"E"}}function stuffDetailFromServerCtrl($scope,$element,$compile,$http,$stateParams,$state,$anchorScroll,global,$q,$rootScope,$location,$timeout,$sce){this.global=global,$q.when().then(function(){if(global.get("tempContent").val){var html=global.get("tempContent").val;$("#tempContent").empty(),global.set("tempContent",null);var o={data:{html:html}};return tempTitles&&(o.data.titles=tempTitles),o}return $http.get("views/template/partials/stuffDetail/stuffDetailNew/"+global.get("sectionType").val+"/"+$stateParams.stuffUrl+".html")}).then(function(response){var linkFn=$compile(response.data.html),content=linkFn($scope);if($element.append(content),$anchorScroll(),response.data.titles&&response.data.titles.title)for(var k in response.data.titles)if(response.data.titles[k])if("title_______"==k)response.data.titles[k].indexOf(global.get("titles").val[k])<0?global.get("titles").val[k]=response.data.titles[k]+". "+global.get("titles").val[k]:global.get("titles").val[k]=response.data.titles[k];else if("canonical"==k)try{global.get("titles").val[k]=$sce.trustAsResourceUrl(response.data.titles[k])}catch(err){console.log(err)}else global.get("titles").val[k]=response.data.titles[k];$rootScope.$emit("$stateChangeEndToStuff")})}function stuffFromServer(global,$timeout){return{scope:{stuffFromServer:"@"},bindToController:!0,controllerAs:"$ctrl",restrict:"A",controller:function($scope,Stuff,global,$attrs,$stateParams,$q,seoContent,$timeout,$rootScope,$anchorScroll,$location,Comments,exception,$element){function goToSchedule(){var div=$($element).find("div[schedule-place-from-server='schedule-place-from-server']");console.log(div),div&&$([document.documentElement,document.body]).animate({scrollTop:$(div).offset().top},2e3)}function getAveragePrice(price){if(price){var p=price*global.get("rate").val;return p=Math.round(100*p)/100,formatAverage&&(4==formatAverage?p=100*Math.round(p/100):3==formatAverage?p=10*Math.round(p/10):2==formatAverage?p=Math.round(p):1==formatAverage&&(p=Math.round(10*p)/10)),p}}function getMastersName(){self.stuff.masters=[],global.get("masters").val.forEach(function(m){if(m.stuffs&&m.stuffs.length&&m.stuffs.indexOf(self.stuff._id)>-1){var o={name:m.name,url:m.url};self.stuff.masters.push(o)}})}function chancheActiveSlide(index,swipe){if(!slideDelay)if(slideDelay=!0,$timeout(function(){slideDelay=!1},700),swipe){var carousel=$element.find(".gallery-carousel");"left"==swipe?carousel&&carousel.isolateScope&&"function"==typeof carousel.isolateScope&&carousel.isolateScope().next():"right"==swipe&&carousel&&carousel.isolateScope&&"function"==typeof carousel.isolateScope&&carousel.isolateScope().prev()}else self.activeSlide=index,self.item.gallery[index].active=!0}function decreaseQty(){var stuff=self.item;stuff&&stuff.quantity>1&&(stuff.multiple&&stuff.minQty?stuff.quantity-1>=stuff.minQty&&stuff.quantity--:stuff.quantity--)}function increaseQty(){var stuff=self.item;stuff&&(stuff.single&&stuff.maxQty?stuff.quantity+1<=stuff.maxQty&&stuff.quantity++:stuff.quantity++)}function chancheStuff(item){self.item.gallery=item.gallery,self.activeSlide=0,getStuff(item.url)}function getComments(page){0===page?self.paginate.page=page:"more"===page&&self.paginate.page++;var query={stuff:self.item._id};return Comments.getList(self.paginate,query).then(function(data){self.paginate.page?self.item.comments.push.apply(self.item.comments,data):self.item.comments=data}).catch(function(err){err=err.data||err,exception.catcher("получение комментариев")(err)})}function getStuff(url){var leftRow=$("#stuffDetailLeftClass"),rightRow=$("#stuffDetailRightClass");return $q.when().then(function(){var o;return $stateParams.store&&(o={},o.store=$stateParams.store),Stuff.getItem(url,o)}).then(function(item){self.gallery=item.gallery,null!=item.grid&&void 0!=item.grid?(item.leftClass=ratioClassStuffDetail[item.grid].left,item.rightClass=ratioClassStuffDetail[item.grid].right):(item.leftClass=ratioClassStuffDetail[global.get("store").val.template.stuffDetailType[global.get("sectionType").val].ratio].left,item.rightClass=ratioClassStuffDetail[global.get("store").val.template.stuffDetailType[global.get("sectionType").val].ratio].right),self.item?self.item.leftClass!=item.leftClass?leftRow.removeAttr("class"):self.item.rightClass!=item.rightClass&&rightRow.removeAttr("class"):(leftRow.removeAttr("class"),rightRow.removeAttr("class")),self.objShare=seoContent.setDataItem(item),$rootScope.$broadcast("reloadGallery");for(var key in self.item)"gallery"!=key&&"sortsOfStuff"!=key&&(item[key]&&"function"!=typeof item[key]?self.item[key]=item[key]:delete self.item[key]);for(var key in item)"gallery"==key||"sortsOfStuff"==key||self.item[key]||(self.item[key]=item[key]);if(self.activeSlide=0,item.sortsOfStuff&&item.sortsOfStuff.stuffs&&item.sortsOfStuff.stuffs.length){var filterGroup,filterGroupTags=[];item.sortsOfStuff.filterGroup&&(filterGroup=_filtersO[item.sortsOfStuff.filterGroup])&&(filterGroupTags=filterGroup.tags.map(function(t){return t._id})),item.sortsOfStuff.stuffs.forEach(function(stuff,i){stuff.gallery.forEach(function(s,ii){s.active=!ii});for(var ii=0;ii<stuff.tags.length;ii++){var idx=filterGroupTags.indexOf(stuff.tags[ii]);if(idx>-1){filterGroup.tags[idx].img&&(item.sortsOfStuff.stuffs[i].gallery[0].thumbSmallTag=filterGroup.tags[idx].img);break}}}),self.item.sortsOfStuff=item.sortsOfStuff}setComments()}).then(function(){$timeout(function(){$rootScope.$emit("$stateChangeEndToStuff")},300)}).then(function(){self.item.FullTags=self.item.tags.map(function(t){return t&&(t=angular.copy(global.get("filterTags").val.getOFA("_id",t)))?(t.filter&&!t.filter._id&&(t.filter=global.get("filters").val.getOFA("_id",t.filter)),t):null})}).then(function(){}).catch(function(err){console.log(err),err=err.data||err,exception.catcher("получение товара")(err)})}function setComments(){if(global.get("store").val.disqus){self.disqusConfig={disqus_shortname:global.get("store").val.disqus,disqus_identifier:self.item._id,disqus_url:$location.absUrl(),disqus_title:self.item.name,disqus_config_language:global.get("store").val.lang};var u=self.disqusConfig.disqus_url.split("/");u[u.length-1]=self.item.url,self.disqusConfig.disqus_url=u.join("/")}else self.getComments(0),self.commentName=global.get("user").val?global.get("user").val.name||global.get("user").val.profile.fio:""}function prepareStuffList(){if(global.get("stuffsInList").val){maxNumInRow=0,stuffsInList=[],currentStuffInList=0;for(var k in global.get("stuffsInList").val)global.get("stuffsInList").val[k].length&&global.get("stuffsInList").val[k].length>maxNumInRow&&(maxNumInRow=global.get("stuffsInList").val[k].length);for(var j=0;j<maxNumInRow;j++)for(var i=1;i<=6;i++)global.get("stuffsInList").val["td-list-"+i]&&global.get("stuffsInList").val["td-list-"+i].length&&global.get("stuffsInList").val["td-list-"+i][j]&&stuffsInList.push(global.get("stuffsInList").val["td-list-"+i][j]);for(var i=0;i<stuffsInList.length;i++)if(self.item&&self.item._id==stuffsInList[i]._id){currentStuffInList=i;break}}}function nextStuff(){slideDelay||(slideDelay=!0,$timeout(function(){slideDelay=!1},150),currentStuffInList<stuffsInList.length-1?(currentStuffInList++,stuffsInList&&stuffsInList[currentStuffInList]&&(self.item=stuffsInList[currentStuffInList])):$rootScope.$broadcast("addBlockAfterScroll"))}function prevStuff(){slideDelay||(slideDelay=!0,$timeout(function(){slideDelay=!1},700),currentStuffInList>0&&currentStuffInList--,stuffsInList&&stuffsInList[currentStuffInList]&&(self.item=stuffsInList[currentStuffInList]))}function returnToList(){window.history.back()}function getTagName(tag){if(tag)return global.get("filterTagsO").val[tag].name}function getFilterName(filter){if(filter)return global.get("filtersO").val[filter].name}var self=this;self.global=global,$scope.global=global,$scope.stuff=JSON.parse($attrs.stuffFromServer),$scope.stuff=Stuff.setDataForStuff($scope.stuff,global.get("filterTags").val),self.stuff=$scope.stuff,self.item=$scope.stuff,self.objShare=seoContent.setDataItem(self.item),console.log(self.item);var slideDelay,stuffsInList=[],currentStuffInList=null,maxNumInRow=0;self.global=global,self.lang=global.get("store").val.lang,self.rate=global.get("rate"),self.mobile=global.get("mobile").val,self.crawler=global.get("crawler").val,self.currency=global.get("currency"),self.moment=moment,self.activeSlide=0,self.paginate={rows:5,page:0,items:0},self.gallery=[],self.chancheActiveSlide=chancheActiveSlide,self.getMastersName=getMastersName,self.decreaseQty=decreaseQty,self.increaseQty=increaseQty,self.chancheStuff=chancheStuff,self.nextStuff=nextStuff,self.prevStuff=prevStuff,self.returnToList=returnToList,self.getComments=getComments,self.getTagName=getTagName,self.getFilterName=getFilterName,self.getAveragePrice=getAveragePrice,self.goToSchedule=goToSchedule;var currency=global.get("currency").val,formatAverage=global.get("store").val.currency[currency][4],del=-1;1==formatAverage?del=-1:2==formatAverage?del=0:3==formatAverage?del=1:4==formatAverage&&(del=2),self.formatPrice=global.get("store").val.currency[currency][5],void 0===self.formatPrice&&(self.formatPrice=2),$rootScope.$on("changeCurrency",function(){currency=global.get("currency").val,formatAverage=global.get("store").val.currency[currency][4],self.formatPrice=global.get("store").val.currency[currency][5],void 0===self.formatPrice&&(self.formatPrice=2),del=-1,1==formatAverage?del=-1:2==formatAverage?del=0:3==formatAverage?del=1:4==formatAverage&&(del=2)}),
$scope.$on("logged",function(){self.commentName=global.get("user").val?global.get("user").val.name||global.get("user").val.profile.fio:""}),$scope.$on("addBlockAfterScrollDone",function(){prepareStuffList(),nextStuff()}),getMastersName(),setComments()},transclude:!0,link:function(scope,element,attrs,ctrl,transclude){$timeout(function(){global.get("stuffsInList").val&&element[0].parentElement&&element[0].parentElement.parentElement&&element[0].parentElement.parentElement.id&&global.get("stuffsInList").val[element[0].parentElement.parentElement.id]&&global.get("stuffsInList").val[element[0].parentElement.parentElement.id].push(scope.stuff)},200),transclude(scope,function(clone){element.append(clone)})}}}angular.module("gmall.directives").directive("stuffDetailTemplate",itemDirectiveFromServer).directive("stuffFromServer",stuffFromServer).directive("stuffCart",stuffCartDirective).directive("homePageStuff",homePageStuffDirective).directive("gallerySmall",gallerySmallDirective).directive("directiveBlockStuff",function($compile,$interpolate){return{template:"",link:function($scope,element,attributes){var attr=attributes.blockTempl?attributes.blockTempl:"",div="<div "+attributes.directiveBlockStuff.toLowerCase()+'-block-stuff block-templ="'+attr+'"></div>';element.append($compile(div)($scope))}}}).directive("nameBlockStuff",nameBlockStuff).directive("textBlockStuff",textBlockStuff).directive("text2BlockStuff",text2BlockStuff).directive("bannerBlockStuff",bannerBlockStuff).directive("banner1BlockStuff",banner1BlockStuff).directive("sliderBlockStuff",sliderBlockStuff).directive("videoBlockStuff",videoBlockStuff).directive("video1BlockStuff",video1BlockStuff).directive("video2BlockStuff",video2BlockStuff).directive("mapBlockStuff",mapBlockStuff).directive("map1BlockStuff",map1BlockStuff).directive("map2BlockStuff",map2BlockStuff).directive("mastersBlockStuff",mastersBlockStuff).directive("feedbackBlockStuff",feedbackBlockStuff).directive("feedback1BlockStuff",feedback1BlockStuff).directive("feedback2BlockStuff",feedback2BlockStuff).directive("stuffsBlockStuff",imgsBlockStuff).directive("filterTagsBlockStuff",imgsBlockStuff).directive("brandTagsBlockStuff",imgsBlockStuff).directive("brandsBlockStuff",imgsBlockStuff).directive("categoriesBlockStuff",imgsBlockStuff).directive("campaignBlockStuff",imgsBlockStuff).directive("dateBlockStuff",dateBlockStuff).directive("positionBlockStuff",positionBlockStuff).directive("videolinkBlockStuff",videoLinkBlockStuff).directive("snBlockStuff",snBlockStuff).directive("calendarBlockStuff",calendarBlockStuff).directive("carouselControls",function(){return{restrict:"A",link:function(scope,element,attrs){scope.goNext=function(){element.isolateScope().next()},scope.goPrev=function(){element.isolateScope().prev()}}}}).directive("dirDisqus",["$window","global",function($window,global){return{restrict:"E",scope:{config:"="},template:'<div id="disqus_thread"></div><a href="http://disqus.com" class="dsq-brlink"></a>',link:function(scope){function configChanged(n,o){if(n&&scope.config.disqus_shortname&&scope.config.disqus_identifier&&scope.config.disqus_url)if($window.disqus_shortname=scope.config.disqus_shortname,$window.disqus_identifier=scope.config.disqus_identifier,$window.disqus_url=scope.config.disqus_url,$window.disqus_title=scope.config.disqus_title,$window.DISQUS)$window.DISQUS.reset({reload:!0,config:function(){this.page.identifier=scope.config.disqus_identifier,this.page.url=scope.config.disqus_url,this.page.title=scope.config.disqus_title}});else{var dsq=document.createElement("script");dsq.type="text/javascript",dsq.async=!0,dsq.src="https://"+scope.config.disqus_shortname+".disqus.com/embed.js",dsq.setAttribute("data-timestamp",+new Date),(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(dsq)}}scope.$watch("config",configChanged,!0)}}}]).directive("checkOrienForPhoto",["$window",function($window,global){return{restrict:"A",link:function(scope,elem,attrs){function loaded(){img.naturalWidth&&img.naturalHeight&&img.naturalWidth<img.naturalHeight?elem.addClass("img-detail"):elem.removeClass("img-detail")}var img=elem[0];img.complete?loaded():(img.addEventListener("load",loaded),img.addEventListener("error",function(){})),attrs.$observe("src",function(newValue,oldValue){newValue&&oldValue&&newValue!==oldValue&&console.log(newValue)})}}}]),itemCtrl.$inject=["$scope","$anchorScroll","global","Stuff","$stateParams","$window","$q","BrandTags","FilterTags","Filters","AddInfo","Comments","exception","seoContent","$location","Sections","$uibModal","$notification","$rootScope","$timeout","$element"],homePageStuffCtrl.$inject=["$scope","global","Stuff","$q","$compile","$element","exception"],gallerySmallCtrl.$inject=["$element","$timeout","$scope","$attrs"],stuffDetailFromServerCtrl.$inject=["$scope","$element","$compile","$http","$stateParams","$state","$anchorScroll","global","$q","$rootScope","$location","$timeout","$sce"]}(),angular.module("gmall.directives").directive("filterForStuffs",["$rootScope","global","$q","$location","$section","Collection","Sections","Filter","FilterTags","Brands","Category",function($rootScope,global,$q,$location,$section,Collection,Sections,Filter,FilterTags,Brands,Category){return{scope:{query:"=",section:"=",admin:"@"},restrict:"E",templateUrl:"components/stuff/filterForStuffs.html",link:function($scope,element,attrs){function getTagFromCategoriesList(tag,field){var category=$scope.filterDirective.category;if(category&&category.filters&&category.filters.length)for(var ii=0,ll=category.filters.length;ii<ll;ii++){var filter=category.filters[ii];if(filter&&filter.tags&&filter.tags.length)for(var iii=0,lll=filter.tags.length;iii<lll;iii++)if(filter.tags[iii][field]==tag)return filter.tags[iii]}}function _setBrand(brandId,filed){brandId&&$scope.filterDirective.brands?($scope.filterDirective.brand=$scope.filterDirective.brands.getObjectFromArray(filed,brandId),$scope.filterDirective.brand?($scope.filterDirective.query.brand=$scope.filterDirective.brand._id,$location.search("brand",$scope.filterDirective.brand.url),$scope.filterDirective.brandCollections=$scope.filterDirective.brand.tags):($scope.filterDirective.brandCollections=[],$location.search("brand",null))):($scope.filterDirective.brandCollections=[],$location.search("brand",null))}function _setBrandTag(brandTagId,filed){if(brandTagId&&$scope.filterDirective.brandCollections){var brandTag=$scope.filterDirective.brandCollections.getObjectFromArray(filed,brandTagId);brandTag?($scope.filterDirective.query.brandTag=brandTag._id,$location.search("brandTag",brandTag.url)):$location.search("brandTag",null)}else $location.search("brandTag",null)}function _setFilterTagsUrl(){if($scope.filterDirective.filterTags&&$scope.filterDirective.filterTags.length){var queryTag=$scope.filterDirective.filterTags.map(function(tag){return tag.url}).join("+");$location.search("queryTag",queryTag||null)}else $location.search("queryTag",null)}function _getQueryTag(){var arr=[];return $scope.filterDirective.query.tags.forEach(function(tags){tags.length&&tags.forEach(function(tag){arr.push(tag)})}),arr}console.log("??????????????");var $state=$rootScope.$state,$stateParams=$rootScope.$stateParams;$scope.filterDirective={},$scope.filterDirective.query={section:"",brand:"",category:"",tags:[],artikul:$stateParams.searchStr?$stateParams.searchStr.clearTag(20):"",brandTag:""},$q.when().then(function(){return Sections.getSections()}).then(function(sections){var q=$q.defer();return"brand"!=$stateParams.groupUrl&&"group"!=$stateParams.groupUrl?($stateParams.parentGroup?$scope.parentSection=Sections.getParentSection($stateParams.parentGroup):$scope.parentSection=Sections.getParentSection($stateParams.groupUrl),"allCategories"==$stateParams.categoryList||"category"!=$stateParams.categoryUrl?($scope.filterDirective.categories=$scope.parentSection.categories,$scope.filterDirective.sectionCategories=$scope.filterDirective.categories.map(function(el){return el._id}),"category"!=$stateParams.categoryUrl?Category.get({id:$stateParams.categoryUrl},function(res){$scope.filterDirective.query.category=res._id,$scope.filterDirective.category=res,$scope.filterDirective.category.brands&&$scope.filterDirective.category.brands.length&&($scope.filterDirective.brands=$scope.filterDirective.category.brands),q.resolve()}):q.resolve()):($scope.filterDirective.sectionCategories=Sections.getEmbededCategories($scope.parentSection,[]).map(function(el){return el._id}),$scope.filterDirective.sectionCategories.length||($scope.filterDirective.sectionCategories=[null]),q.resolve())):q.resolve(),q.promise}).then(function(){console.log($scope.filterDirective.brands);var q=$q.defer();return $stateParams.brand&&!$scope.filterDirective.brands?Brands.query(function(res){res.shift(),$scope.filterDirective.brands=res,q.resolve()}):q.resolve(),q.promise}).then(function(){_setBrand($stateParams.brand,"url"),_setBrandTag($stateParams.brandTag,"url")}).then(function(){var q=$q.defer();if($stateParams.queryTag){var queryTags=$stateParams.queryTag.split("+");queryTags=queryTags.filter(function(item,pos){return queryTags.indexOf(item)==pos}),$scope.filterDirective.categories?($scope.filterDirective.filterTags=queryTags.map(function(tag){return getTagFromCategoriesList(tag,"url")}).filter(function(tag){return tag}),q.resolve()):FilterTags.getTagsByUrl(queryTags,function(res){$scope.filterDirective.filterTags=res,q.resolve()})}else q.resolve();return q.promise}).then(function(){_setFilterTagsUrl()}).then(function(){$scope.filterDirective.query.category&&$scope.filterDirective.category?$scope.filterDirective.category.filters&&$scope.filterDirective.category.filters.length&&($scope.filterDirective.category.filters.forEach(function(item,i){$scope.filterDirective.filterTags&&$scope.filterDirective.filterTags.length&&$scope.filterDirective.filterTags.forEach(function(tag){tag.filter==item._id&&($scope.filterDirective.query.tags[i]||($scope.filterDirective.query.tags[i]=[]),$scope.filterDirective.query.tags[i].push(tag._id))})}),$scope.filterDirective.filters=$scope.filterDirective.category.filters):$scope.filterDirective.filterTags&&$scope.filterDirective.filterTags.length&&($scope.filterDirective.query.tags[0]=[],$scope.filterDirective.filterTags.forEach(function(tag){$scope.filterDirective.query.tags[0].push(tag._id)}))}).then(function(){$scope.filterDirective.getQuery()}).catch(function(err){console.log(err)}),$scope.filterDirective.getQuery=function(){var query=[];global.get("nostore").val&&query.push({tags:{$nin:[global.get("nostore").val._id]}});for(var key in $scope.filterDirective.query)if($scope.filterDirective.query[key])if("tags"==key){var qu=[];$scope.filterDirective.query[key].filter(function(){return!0});$scope.filterDirective.query[key].forEach(function(obj,i){var q=[];obj&&obj.length&&(obj.forEach(function(objT){q.push({tags:objT})}),q.length>1?(q={$or:q},qu.push(q)):(q=q[0],qu.push(q)))}),qu.length&&(1==qu.length?query.push(qu[0]):query.push({$and:qu}))}else{var obj={};obj[key]=$scope.filterDirective.query[key],query.push(obj)}else if("category"==key&&$scope.filterDirective.sectionCategories&&$scope.filterDirective.sectionCategories.length){var obj={};obj.category={$in:$scope.filterDirective.sectionCategories},query.push(obj)}return query=1==query.length?JSON.stringify(query[0]):query.length>1?JSON.stringify({$and:query}):{},void($scope.query=query)},$scope.filterDirective.changeFilter=function(reloadController){if(reloadController){if($scope.filterDirective.category&&$scope.filterDirective.query.category==$scope.filterDirective.category._id)return;if($scope.filterDirective.query.category){var categoryUrl=$scope.filterDirective.categories.getObjectFromArray("_id",$scope.filterDirective.query.category);categoryUrl=categoryUrl?categoryUrl.url:"category",$location.search("categoryList",null)}else{var categoryUrl="category";$location.search("categoryList","allCategories")}$state.current.reloadOnSearch=!0;var o={groupUrl:$stateParams.groupUrl,categoryUrl:categoryUrl,queryTag:void 0,brand:void 0,brandTag:void 0};$state.go($state.current.name,o,{reload:!0}),$state.current.reloadOnSearch=!1}else $scope.filterDirective.query.artikul="",_setBrand($scope.filterDirective.query.brand,"_id"),_setBrandTag($scope.filterDirective.query.brandTag,"_id"),$scope.filterDirective.filterTags=_getQueryTag().map(function(tag){return getTagFromCategoriesList(tag,"_id")}).filter(function(tag){return tag}),_setFilterTagsUrl(),$scope.filterDirective.getQuery()},$scope.filterDirective.clearFilter=function(){console.log("clear filetrs"),$scope.filterDirective.query.tags=[],$scope.filterDirective.changeFilter()}}}}]).directive("filterForStuffsClinic",["$rootScope","global","$q","$location","$section","Collection","Sections","Filter","FilterTags","Brands","Category",function($rootScope,global,$q,$location,$section,Collection,Sections,Filter,FilterTags,Brands,Category){return{scope:{query:"=",section:"=",admin:"@"},restrict:"E",templateUrl:"views/clinic/partials/stuff/filterForStuffs.html",link:function($scope,element,attrs){function getTagFromCategoriesList(tag,field){var category=$scope.filterDirective.category;if(category&&category.filters&&category.filters.length)for(var ii=0,ll=category.filters.length;ii<ll;ii++){var filter=category.filters[ii];if(filter&&filter.tags&&filter.tags.length)for(var iii=0,lll=filter.tags.length;iii<lll;iii++)if(filter.tags[iii][field]==tag)return filter.tags[iii]}}function _setBrand(brandId,filed){brandId&&$scope.filterDirective.brands?($scope.filterDirective.brand=$scope.filterDirective.brands.getObjectFromArray(filed,brandId),$scope.filterDirective.brand?($scope.filterDirective.query.brand=$scope.filterDirective.brand._id,$location.search("brand",$scope.filterDirective.brand.url),$scope.filterDirective.brandCollections=$scope.filterDirective.brand.tags):($scope.filterDirective.brandCollections=[],$location.search("brand",null))):($scope.filterDirective.brandCollections=[],$location.search("brand",null))}function _setBrandTag(brandTagId,filed){if(brandTagId&&$scope.filterDirective.brandCollections){var brandTag=$scope.filterDirective.brandCollections.getObjectFromArray(filed,brandTagId);brandTag?($scope.filterDirective.query.brandTag=brandTag._id,$location.search("brandTag",brandTag.url)):$location.search("brandTag",null)}else $location.search("brandTag",null)}function _setFilterTagsUrl(){if($scope.filterDirective.filterTags&&$scope.filterDirective.filterTags.length){var queryTag=$scope.filterDirective.filterTags.map(function(tag){return tag.url}).join("+");$location.search("queryTag",queryTag||null)}else $location.search("queryTag",null)}function _getQueryTag(){var arr=[];return $scope.filterDirective.query.tags.forEach(function(tags){tags.length&&tags.forEach(function(tag){arr.push(tag)})}),arr}var $state=$rootScope.$state,$stateParams=$rootScope.$stateParams;$scope.filterDirective={},$scope.filterDirective.query={section:"",brand:"",category:"",tags:[],artikul:$stateParams.searchStr?$stateParams.searchStr.clearTag(20):"",brandTag:""},$q.when().then(function(){return Sections.getSections()}).then(function(sections){var q=$q.defer();return"brand"!=$stateParams.groupUrl&&"group"!=$stateParams.groupUrl?($stateParams.parentGroup?$scope.parentSection=Sections.getParentSection($stateParams.parentGroup):$scope.parentSection=Sections.getParentSection($stateParams.groupUrl),"allCategories"==$stateParams.categoryList||"category"!=$stateParams.categoryUrl?($scope.filterDirective.categories=$scope.parentSection.categories,$scope.filterDirective.sectionCategories=$scope.filterDirective.categories.map(function(el){return el._id}),"category"!=$stateParams.categoryUrl?Category.get({id:$stateParams.categoryUrl},function(res){$scope.filterDirective.query.category=res._id,$scope.filterDirective.category=res,$scope.filterDirective.category.brands&&$scope.filterDirective.category.brands.length&&($scope.filterDirective.brands=$scope.filterDirective.category.brands),console.log($scope.filterDirective.brands),q.resolve()}):q.resolve()):($scope.filterDirective.sectionCategories=Sections.getEmbededCategories($scope.parentSection,[]).map(function(el){return el._id}),$scope.filterDirective.sectionCategories.length||($scope.filterDirective.sectionCategories=[null]),q.resolve())):q.resolve(),q.promise}).then(function(){var q=$q.defer();return $stateParams.brand&&!$scope.filterDirective.brands?Brands.query(function(res){res.shift(),$scope.filterDirective.brands=res,q.resolve()}):q.resolve(),q.promise}).then(function(){_setBrand($stateParams.brand,"url"),_setBrandTag($stateParams.brandTag,"url")}).then(function(){var q=$q.defer();if($stateParams.queryTag){var queryTags=$stateParams.queryTag.split("+");queryTags=queryTags.filter(function(item,pos){return queryTags.indexOf(item)==pos}),$scope.filterDirective.categories?($scope.filterDirective.filterTags=queryTags.map(function(tag){return getTagFromCategoriesList(tag,"url")}).filter(function(tag){return tag}),q.resolve()):FilterTags.getTagsByUrl(queryTags,function(res){$scope.filterDirective.filterTags=res,q.resolve()})}else q.resolve();return q.promise}).then(function(){_setFilterTagsUrl()}).then(function(){$scope.filterDirective.query.category&&$scope.filterDirective.category?$scope.filterDirective.category.filters&&$scope.filterDirective.category.filters.length&&($scope.filterDirective.category.filters.forEach(function(item,i){$scope.filterDirective.filterTags&&$scope.filterDirective.filterTags.length&&$scope.filterDirective.filterTags.forEach(function(tag){tag.filter==item._id&&($scope.filterDirective.query.tags[i]||($scope.filterDirective.query.tags[i]=[]),$scope.filterDirective.query.tags[i].push(tag._id))})}),$scope.filterDirective.filters=$scope.filterDirective.category.filters):$scope.filterDirective.filterTags&&$scope.filterDirective.filterTags.length&&($scope.filterDirective.query.tags[0]=[],$scope.filterDirective.filterTags.forEach(function(tag){$scope.filterDirective.query.tags[0].push(tag._id)}))}).then(function(){$scope.filterDirective.getQuery()}).catch(function(err){console.log(err)}),$scope.filterDirective.getQuery=function(){var query=[];global.get("nostore").val&&query.push({tags:{$nin:[global.get("nostore").val._id]}});for(var key in $scope.filterDirective.query)if($scope.filterDirective.query[key])if("tags"==key){var qu=[];$scope.filterDirective.query[key].filter(function(){return!0});$scope.filterDirective.query[key].forEach(function(obj,i){var q=[];obj&&obj.length&&(obj.forEach(function(objT){q.push({tags:objT})}),q.length>1?(q={$or:q},qu.push(q)):(q=q[0],qu.push(q)))}),qu.length&&(1==qu.length?query.push(qu[0]):query.push({$and:qu}))}else{var obj={};obj[key]=$scope.filterDirective.query[key],query.push(obj)}else if("category"==key&&$scope.filterDirective.sectionCategories&&$scope.filterDirective.sectionCategories.length){var obj={};obj.category={$in:$scope.filterDirective.sectionCategories},query.push(obj)}return query=1==query.length?JSON.stringify(query[0]):query.length>1?JSON.stringify({$and:query}):{},void($scope.query=query)},$scope.filterDirective.changeFilter=function(reloadController){if(reloadController){if($scope.filterDirective.category&&$scope.filterDirective.query.category==$scope.filterDirective.category._id)return;if($scope.filterDirective.query.category){var categoryUrl=$scope.filterDirective.categories.getObjectFromArray("_id",$scope.filterDirective.query.category);categoryUrl=categoryUrl?categoryUrl.url:"category",$location.search("categoryList",null)}else{var categoryUrl="category";$location.search("categoryList","allCategories")}$state.current.reloadOnSearch=!0;var o={groupUrl:$stateParams.groupUrl,categoryUrl:categoryUrl,queryTag:void 0,brand:void 0,brandTag:void 0};$state.go($state.current.name,o,{reload:!0}),$state.current.reloadOnSearch=!1}else $scope.filterDirective.query.artikul="",_setBrand($scope.filterDirective.query.brand,"_id"),_setBrandTag($scope.filterDirective.query.brandTag,"_id"),$scope.filterDirective.filterTags=_getQueryTag().map(function(tag){return getTagFromCategoriesList(tag,"_id")}).filter(function(tag){return tag}),_setFilterTagsUrl(),$scope.filterDirective.getQuery()},$scope.filterDirective.clearFilter=function(){console.log("clear filetrs"),$scope.filterDirective.query.tags=[],$scope.filterDirective.changeFilter()}}}}]),angular.module("gmall.directives").directive("stuffsAdminListWithPaginate",["$rootScope","Stuff","$timeout","$q","Sections","createStuffService","queryFromUrlService","filterStuffsListService","FilterTags","Filters",function($rootScope,Stuff,$timeout,$q,Sections,createStuffService,queryFromUrlService,filterStuffsListService,FilterTags,Filters){return{restrict:"E",scope:{query:"=",rate:"=",mobile:"@"},templateUrl:"components/stuff/stuffsAdminListWithPaginate.html",link:function($scope,element,attrs,ctrl){function prepareQueryForRequest(queryStart){var query=[];for(var key in queryStart)if(queryStart[key])if("tags"==key){var qu=[];for(var key2 in queryStart[key]){var obj=queryStart[key][key2],q=[];obj&&obj.length&&(obj.forEach(function(objT){q.push({tags:objT})}),q.length>1?(q={$or:q},qu.push(q)):(q=q[0],qu.push(q)))}qu.length&&(1==qu.length?query.push(qu[0]):query.push({$and:qu}))}else{var obj={};obj[key]=queryStart[key],query.push(obj)}return query=1==query.length?JSON.stringify(query[0]):query.length>1?JSON.stringify({$and:query}):{}}var $state=$rootScope.$state;$rootScope.$stateParams;$scope.global=$rootScope.global,setTimeout(function(){$rootScope.displaySlideMenu=!0},400);var query,queryForFilter;$scope.paginate={page:0,rows:20,totalItems:0},$scope.newStuff={name:"",actived:!1},$scope.saveStuff=function(stuff,field){var f=field.split(" "),o={_id:stuff._id};f.forEach(function(el){o[el]=stuff[el]}),Stuff.Items.save({update:field},o,function(res){console.log(res),"index"==f[0]&&$scope.getList($scope.paginate.page,$scope.paginate.rows,"reload")})},$scope.getList=function(page,rows,reload){return $scope.paginate.page!=page&&($scope.paginate.page=page),$q(function(resolve,reject){var queryString;queryString=reload?query:$scope.query,Stuff.getList(queryString,null,page,rows,$scope.paginate).then(function(res){if($scope.items=res,$scope.newStuff.index=$scope.items&&$scope.items[0]?$scope.items[0].index:1,!reload){try{query=JSON.parse($scope.query)}catch(err){query={}}$scope.query=null}resolve()},function(err){reject(err)})})};$scope.getUrlParams=Stuff.getUrlParams,$scope.getCategoryName=Stuff.getCategoryName,$scope.getBrandName=Stuff.getBrandName,$scope.reloadList=function(){$scope.getList($scope.paginate.page,$scope.paginate.rows,"reload")},$scope.searchStuff=function(artikul){if(artikul&&!(artikul.length<3)){artikul=artikul.substring(0,20),$state.current.reloadOnSearch=!0;var o={groupUrl:"group",categoryUrl:"category",searchStr:artikul.substring(0,20),queryTag:null,brand:null,brandTag:null,categoryList:null};$state.go($state.current.name,o,{reload:!0})}},$scope.filterList=function(){$q.when().then(function(){return filterStuffsListService.setFilters(queryForFilter)}).then(function(query){return queryForFilter=query,$scope.query=prepareQueryForRequest(query),$scope.getList($scope.paginate.page,$scope.paginate.rows)}).then(function(){}).catch(function(err){console.log(err)})},$scope.cloneStuff=function(stuff){var newStuff=angular.copy(stuff);$q.when().then(function(){return createStuffService.cloneStuff(newStuff,!0)}).then(function(stuff){return console.log($scope.newStuff==stuff),$scope.newStuff=stuff,$scope.getList($scope.paginate.page,$scope.paginate.rows,"reload")}).then(function(){var url=newStuff.url;$state.go("frame.stuffs.stuff",{groupUrl:"group",categoryUrl:"category",stuffUrl:url})}).catch(function(err){console.log(err)})},$scope.createNewStuff=function(){$q.when().then(function(){return createStuffService.cloneStuff($scope.newStuff)}).then(function(stuff){return console.log($scope.newStuff==stuff),$scope.newStuff=stuff,$scope.getList($scope.paginate.page,$scope.paginate.rows,"reload")}).then(function(){var url=$scope.newStuff.url;$scope.newStuff={name:"",actived:!1},$state.go("frame.stuffs.stuff",{groupUrl:"group",categoryUrl:"category",stuffUrl:url})}).catch(function(err){console.log(err)})},$scope.deleteStuff=function(stuff){confirm("удалить???")&&Stuff.Items.delete({_id:stuff._id},function(res){$scope.getList($scope.paginate.page,$scope.paginate.rows,"reload")})},$q.when().then(function(){return queryFromUrlService.get()}).then(function(query){return queryForFilter=query,$scope.query=prepareQueryForRequest(query),$scope.getList($scope.paginate.page,$scope.paginate.rows)}).then(function(){return FilterTags.getFilterTags()}).then(function(filterTags){$scope.filterTags=filterTags}).then(function(){return Filters.getFilters()}).then(function(filters){$scope.filters=filters}).catch(function(err){console.log(err)}),$scope.getTagName=function(_id){if(_id)return $scope.filterTags.getOFA("_id",_id).name||null},$scope.getFilterName=function(_id){return $scope.filters.getOFA("_id",_id).name||null},$scope.changeSortOfStuff=function(stuff){var sort=stuff.stock[stuff.sort];stuff.price=sort.price,stuff.priceSale=sort.priceSale,stuff.retail=sort.retail},$scope.filterSorts=function(sort){return sort.value.quantity},$scope.onSelected=function(){setTimeout(function(){$(":focus").blur()})}}}}]),angular.module("gmall.directives").directive("additionaInfo",function(){return{scope:{stuff:"="},bindToController:!0,controller:additionaInfoCtrl,controllerAs:"$ctrl",templateUrl:"components/additionaInfo/additionaInfo.html"}}).service("AddInfo",function($resource,$q,$uibModal){function selectItem(){return $q(function(resolve,reject){var options={animation:!0,templateUrl:"components/additionalInfo/selectItem.html",controller:selectItemCtrl,size:"lg",controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(selected){resolve(selected)},function(){reject()})})}function selectItemCtrl(Filters,AddInfo,$uibModalInstance,$q,global){var self=this;self.global=global,self.lang=global.get("lang").val,$q.when().then(function(){return Filters.getFilters()}).then(function(filters){return self.filters=filters,AddInfo.query().$promise}).then(function(addInfos){self.filters.forEach(function(f){f.addInfos=[],addInfos.forEach(function(a){a.filter==f._id&&f.addInfos.push(a)})})}),self.cancel=function(){$uibModalInstance.dismiss()},self.ok=function(item){$uibModalInstance.close(item)}}function editTable(filter,addInfo){return $uibModal.open({animation:!0,templateUrl:"components/additionalInfo/additionalInfo.html",controller:function(filter,carrentAddInfo,AddInfo,$uibModalInstance,global,exception,Confirm){function activate(){initItem(),AddInfo.query({query:query},function(res){res.shift(),self.items=res},function(err){console.log(err)})}function initItem(){if(self.item={headerTable:{},table:{},name:"",filter:filter._id},filter.tags.forEach(function(tag){self.item.table[tag._id]={}}),langArr&&langArr.forEach&&langArr.length)langArr.forEach(function(lang){self.item.headerTable||(self.item.headerTable={}),self.item.headerTable[lang]=[""];for(var key in self.item.table)self.item.table[key][lang]=[""]});else{self.item.headerTable||(self.item.headerTable={}),self.item.headerTable[self.lang]=[""];for(var key in self.item.table)self.item.table[key][self.lang]=[""]}}var self=this;self.global=global,self.lang=global.get("store").val.lang;var langArr=global.get("store").val.langArr;console.log(langArr),filter?self.filter=filter:$uibModalInstance.dismiss("cancel");var query={filter:filter._id};self.items=[],activate(),self.getTagName=function(id){for(var i=1,l=self.filter.tags.length;i<l;i++)if(self.filter.tags[i]._id==id)return self.filter.tags[i].name;return"noname"},self.cancel=function(){$uibModalInstance.dismiss("cancel")},self.saveTable=function(){self.item.name||(self.item.name=filter.name),self.item._id?AddInfo.save({update:"headerTable table name"},self.item,function(res){activate()}):AddInfo.save(self.item,function(res){activate()})},self.addRow=function(){if(langArr&&langArr.forEach&&langArr.length)langArr.forEach(function(lang){self.item.headerTable||(self.item.headerTable={}),self.item.headerTable[lang].push("");for(var key in self.item.table)self.item.table[key][lang].push("")});else{self.item.headerTable||(self.item.headerTable={}),self.item.headerTable[self.lang].push("");for(var key in self.item.table)self.item.table[key][self.lang].push("")}console.log(self.item)},self.deleteRow=function(i){if(langArr&&langArr.forEach&&langArr.length)langArr.forEach(function(lang){self.item.headerTable[lang].splice(i,1);for(var key in self.item.table)self.item.table[key][lang].splice(i,1)});else{self.item.headerTable[self.lang].splice(i,1);for(var key in self.item.table)self.item.table[key][self.lang].splice(i,1)}},self.editTable=function(item){if(console.log(item),self.item=item,langArr&&langArr.forEach&&langArr.length)langArr.forEach(function(lang){self.item.headerTable[lang].push("");for(var key in self.item.table)self.item.table[key][lang].push("")});else{self.item.headerTable[self.lang].push("");for(var key in self.item.table)self.item.table[key][self.lang].push("")}},self.deleteTable=function(item){Confirm("удалить?").then(function(){return AddInfo.delete({id:item._id}).$promise}).then(function(){return activate()}).catch(function(err){(err=err&&err.data||err)&&exception.catcher("удаление")(err)})},self.setTable=function(item){if(self.item=item,langArr&&langArr.forEach&&langArr.length)langArr.forEach(function(lang){self.item.headerTable||(self.item.headerTable={},self.item.headerTable[lang]=[],self.item.headerTable[lang].push(""));for(var key in self.item.table)self.item.table[key][lang]||(self.item.table[key][lang]=[],self.item.table[key][lang].push(""))});else{self.item.headerTable||(self.item.headerTable={},self.item.headerTable[self.lang]=[],self.item.headerTable[self.lang].push(""));for(var key in self.item.table)self.item.table[key].length&&(self.item.table[key]={},self.item.table[key][self.lang]=[],self.item.table[key][self.lang].push(""))}console.log(self.item)}},controllerAs:"$ctrl",size:"lg",resolve:{filter:function(){return filter},carrentAddInfo:function(){return addInfo}}}).result.then(function(addInfo){console.log(addInfo)},function(){})}var Items=$resource("/api/collections/AddInfo/:id",{id:"@_id"});this.query=Items.query,this.get=Items.get,this.delete=Items.delete,this.save=Items.save,this.editTable=editTable,this.select=selectItem,selectItemCtrl.$inject=["Filters","AddInfo","$uibModalInstance","$q","global"]}),angular.module("gmall.services").service("$order",["localStorage","global","Orders","$q","$uibModal","CartInOrder","exception","$email","CreateContent","$notification","$state","$window","Coupon","$user","$rootScope","$timeout","$http",function(localStorage,global,Orders,$q,$uibModal,CartInOrder,exception,$email,CreateContent,$notification,$state,$window,Coupon,$user,$rootScope,$timeout,$http){function shipInfoCtrl($uibModalInstance,$rootScope){var self=this;$rootScope.$on("closeShipModal",function(){$uibModalInstance.close()}),self.ok=function(){$uibModalInstance.close()},self.cancel=function(){$uibModalInstance.dismiss()}}var order,storageName;this.type=null,this.reinitCart=function(){order.comment="",delete order.action,delete order._id,delete order.num,delete order.date,delete order.seller;var seller=global.get("store").val.seller;order.setSellerData(seller._id,seller.cascade,seller.opt)},this.initOrderInList=function(res){var order=myShareData.getOrder(),mainCurrency=(global.get("campaign")&&global.get("campaign").val,global.get("store").val.mainCarrency),currencyStore=global.get("store").val.currency;global.get("currency")&&global.get("currency").val&&global.get("currency").val,global.get("store").val.seller;return order.type="order",order._id=res._id,order.init(res.campaign,mainCurrency,currencyStore),order.setCurrency(res.currency),order.kurs=order.currencyStore[order.currency][0],
order.payInfo=res.seller.payInfo,order.setSellerData(res.seller,res.cascade,res.opt),order.unitOfMeasure=order._getUnitOfMeasure(),order.cart._id=res.cart,order.setDiscount(res.discount),order.setCoupon(res.coupon),order.date=res.date,order.date2=res.date2,order.date3=res.date3,order.date4=res.date4,order.date5=res.date5,order.invoice=res.invoice,order.invoiceInfo=res.invoiceInfo,order.pay=res.pay,order.shipCost=res.shipCost,order.num=res.num,order.status=res.status,order.profile=res.profile,order.comment=res.comment,order.note=res.note,order.user=res.user,order.shipDetail=res.shipDetail,order.domain=global.get("store").val.domain||global.get("store").val.subDomain,order.paySum=res.paySum,order},this.init=function(type,id){storageName=global.get("store").val._id;var q=$q.defer();order=myShareData.getOrder();var campaign=global.get("campaign")?global.get("campaign").val:null,mainCurrency=global.get("store").val.mainCarrency,currencyStore=global.get("store").val.currency,currency=global.get("currency")&&global.get("currency").val?global.get("currency").val:"UAH",seller=global.get("store").val.seller;if(this.type=type,order.type=type,"cart"==type){order.init(campaign,mainCurrency,currencyStore),order.setSellerData(seller._id,seller.cascade,seller.opt),order.setCurrency(currency),order.kurs=order.currencyStore[order.currency][0];var o=localStorage.get(storageName);o||(o=[],localStorage.set(storageName,o)),order.setCart(o),order.unitOfMeasure=order._getUnitOfMeasure(),order.totalCount=order._cartCount(),q.resolve(order)}else"order"==type&&(Orders.get({_id:id},function(res){res&&res._id||q.reject("404"),order._id=res._id,order.init(res.campaign,mainCurrency,currencyStore),order.setCurrency(res.currency),order.kurs=order.currencyStore[order.currency][0],order.payInfo=res.seller.payInfo,order.setSellerData(res.seller,res.cascade,res.opt),order.setCart(res.cart.stuffs),order.unitOfMeasure=order._getUnitOfMeasure(),order.cart._id=res.cart._id,order.setDiscount(res.discount),order.setCoupon(res.coupon),order.totalCount=order._cartCount(),order.date=res.date,order.date2=res.date2,order.date3=res.date3,order.date4=res.date4,order.date5=res.date5,order.invoice=res.invoice,order.invoiceInfo=res.invoiceInfo,order.pay=res.pay,order.shipCost=res.shipCost,order.num=res.num,order.status=res.status,order.profile=res.profile,order.comment=res.comment,order.note=res.note,order.user=res.user,order.shipDetail=res.shipDetail,order.domain=global.get("store").val.domain||global.get("store").val.subDomain,q.resolve(order)},function(err){q.reject(order)}),order.totalCount=order._cartCount());return q.promise},this.getOrder=function(){return order},this.addItemToCart=function(itemTo){itemTo.seller=global.get("seller").val,itemTo.img=itemTo.gallery&&itemTo.gallery.length&&itemTo.gallery[0].thumbSmall?itemTo.gallery[0].thumbSmall:"",itemTo.quantity||(itemTo.quantity=1),order.addStuffToOrder(itemTo),this.updateOrder(itemTo)},this.checkInCart=function(item){return order.checkInCart(item)},this.updateOrder=function(itemTo){order.totalCount=order._cartCount(),order.unitOfMeasure=order._getUnitOfMeasure(),itemTo&&$rootScope.$broadcast("$updateOrder",itemTo),"cart"==this.type?(localStorage.set(storageName,order.cart.stuffs),order.totalCount=order._cartCount()):$timeout(function(){},100).then(function(){var o=angular.copy(order.cart);return o.order=order._id,CartInOrder.save(o).$promise}).then(function(){return order.priceSaleHandle=order.cart.stuffs.some(function(s){return s.priceSaleHandle}),order.maxDiscountOver=order.cart.stuffs.some(function(s){return s.maxDiscountOver}),Orders.save({update:"totalCount sum paySum maxDiscountOver priceSaleHandle"},{_id:order._id,totalCount:order.totalCount,sum:order.sum,paySum:order.paySum,priceSaleHandle:order.priceSaleHandle,maxDiscountOver:order.maxDiscountOver}).$promise}).then(function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)}).catch(function(error){exception.catcher("сохранение изменений")(error)})},this.removeItem=function(i){order.cart.stuffs.splice(i,1),this.updateOrder()},this.decreaseQty=function(i){var stuff=order.cart.stuffs[i];stuff&&stuff.quantity>1&&(stuff.multiple&&stuff.minQty?stuff.quantity-1>=stuff.minQty&&(stuff.quantity--,this.updateOrder()):(stuff.quantity--,this.updateOrder()))},this.increaseQty=function(i){var stuff=order.cart.stuffs[i];stuff&&(stuff.single&&stuff.maxQty?stuff.quantity+1<=stuff.maxQty&&(stuff.quantity++,this.updateOrder()):(stuff.quantity++,this.updateOrder()))},this.clearCart=function(){order.clearOrder(),this.updateOrder()},this.cartCount=function(){return order.totalCount},this.sendOrder=function(user){return $q.when().then(function(){try{if(user){if(!user._id)throw conosole.log(user),"не авторизирован!"}else{if(!global.get("user").val||!global.get("user").val._id)throw"не авторизирован!";order.user=global.get("user").val,order.profile=angular.copy(global.get("user").val.profile)}order.action="order",order.comment?order.comment.clearTag(400):order.comment="",order.coupon&&order.coupon._id?order.paySum=order.kurs*order.getCouponSum():order.paySum=order.kurs*order.getTotalSum()}catch(err){throw err}}).then(function(){return $q(function(resolve,reject){if(order.coupon&&order.coupon._id)if(global.get("user").val.coupons||(global.get("user").val.coupons=[]),global.get("user").val.coupons.indexOf(order.coupon._id)>-1)order.coupon=null,resolve();else{Date.now();Coupon.get({_id:order.coupon._id},function(coupon){coupon?(global.get("user").val.coupons||(global.get("user").val.coupons=[]),global.get("user").val.coupons=global.get("user").val.coupons.filter(function(el){return el}),global.get("user").val.coupons.push(coupon._id),$user.save({update:"coupons"},{_id:global.get("user").val._id,coupons:global.get("user").val.coupons},function(res){resolve()},function(err){if(err)return reject(err)})):(order.coupon=null,resolve())})}else resolve()})}).then(function(){return Orders.save(order).$promise}).then(function(res){if(!res.num||!res._id)throw"заказ не отправлен. произошла ошибка на сервере. не присвоен номер ордеру";try{order._id=res.id,order.num=res.num,order.date=Date.now(),order.seller=global.get("store").val.seller,order.status=1}catch(err){throw err}}).then(function(){if(global.get("store").val.seller.salemail){try{order.profile.admin="Admin";var email=global.get("store").val.seller.salemail,content=CreateContent.order(order,!1,!0);delete order.profile.admin;var domain=global.get("store").val.domain,subj=global.get("langOrder").val.neworder?global.get("langOrder").val.neworder.toUpperCase()+" ✔":"НОВЫЙ ЗАКАЗ ✔",o={email:email,content:content,subject:subj,from:global.get("store").val.name+"<sales@"+domain+">"}}catch(err){throw err}return $q(function(resolve,reject){$email.save(o,function(res){exception.showToaster("note",global.get("langNote").val.emailSent,""),resolve()},function(err){exception.showToaster("warning",global.get("langNote").val.error,err.data),resolve()})})}}).then(function(){try{order.user=user?user:global.get("user").val;var email=user?user.email:global.get("user").val.email,content=CreateContent.order(order,!1,!0),domain=global.get("store").val.domain,subj=global.get("langOrder").val.neworder?global.get("langOrder").val.neworder.toUpperCase()+" ✔":"НОВЫЙ ЗАКАЗ ✔",o={email:email,content:content,subject:subj,from:global.get("store").val.name+"<sales@"+domain+">"}}catch(err){throw err}return $q(function(resolve,reject){$email.save(o,function(res){resolve()},function(err){exception.showToaster("warning",global.get("langNote").val.error,err.data),resolve()})})}).then(function(){try{var content=CreateContent.orderNote(order),o={addressee:"seller",type:"order",content:content,order:order._id,num:order.num,seller:order.seller._id}}catch(err){throw err}return $q(function(resolve,reject){$notification.save(o,function(res){exception.showToaster("note",global.get("langNote").val.sent,""),resolve()},function(err){exception.catcher("error")(err),resolve()})})}).then(function(){try{var states=$state.get();if(global.get("paps")&&states.some(function(state){return"thanksPage"==state.name})){var pap=global.get("paps").val.getOFA("action","order");pap&&pap.url?$state.go("thanksPage",{id:pap.url}):exception.showToaster("note",global.get("langNote").val.orderSuccess,"")}else exception.showToaster("note",global.get("langNote").val.orderSuccess,"")}catch(err){throw err}}).catch(function(err){throw err})},this.changeCurrency=function(lan){order.changeCurrency(lan)},this.checkCampaign=function(stuff){return order&&order.type?order.checkCampaign(stuff):null},this.checkOutFromList=function(user){return order.comment=user.comment?user.comment:"",order.profile=user.profile,order.user=user._id,order.seller=global.get("store").val.seller._id,this.sendOrder(user)},this.getShipInfo=function(){return $q(function(resolve,reject){var modalInstance=$uibModal.open({animation:!0,templateUrl:"components/order/modal/shipInfo.html",controller:shipInfoCtrl,controllerAs:"$ctrl",windowClass:"modalProject",backdropClass:"modalBackdropClass"});$rootScope.$emit("modalOpened"),modalInstance.result.then(function(item){$rootScope.$emit("modalClosed"),resolve(item)},function(){$rootScope.$emit("modalClosed"),reject()})})},shipInfoCtrl.$inject=["$uibModalInstance","$rootScope"],this.getCheckOutLiqpayHtml=function(order,invoice){return $q.when().then(function(){return invoice?$http.post("/api/orders/checkoutLiqpayInvoice",order):$http.post("/api/orders/checkoutLiqpay",order)}).then(function(res){res&&res.data.html&&(order.checkOutLiqpayHtml=res.data.html,order.checkOutLiqpayHtmlIs=!0)}).then(function(res){}).catch(function(err){exception.catcher("error")(err)})}}]).factory("localStorage",function(){return{getB:function(item){return JSON.parse(localStorage.getItem(item)||"false")},getN:function(item){var i=localStorage.getItem(item);return"undefined"!=i?JSON.parse(i):""},get:function(item){return JSON.parse(localStorage.getItem(item)||"[]")},set:function(item,value){localStorage.setItem(item,JSON.stringify(value))}}}),function(){function orderService($resource,$uibModal,$q){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response&&response.length&&response.forEach(function(o){o.totalPay=o.pay&&o.pay.length?o.pay.reduce(function(s,i){return s+=i.sum},0):0}),response}function getListFailed(error){return console.log("XHR Failed for getNews."+error),$q.reject(error)}return Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete).catch(getListFailed)}function getItem(id){function getItemComplete(o){return o}function getItemFailed(error){return $q.reject(error)}return Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}var Items=$resource("/api/collections/Order/:_id",{_id:"@_id"});return this.query=Items.query,this.get=Items.get,this.delete=Items.delete,this.save=Items.save,{getList:getList,getItem:getItem,get:Items.get,save:Items.save,delete:Items.delete}}angular.module("gmall.services").service("Orders",orderService),orderService.$inject=["$resource","$uibModal","$q"]}(),function(){function cartInOrderService($resource,$uibModal,$q){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return console.log("XHR Failed for getNews."+error),$q.reject(error)}return Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete).catch(getListFailed)}function getItem(id){function getItemComplete(response){return response}function getItemFailed(error){return $q.reject(error)}return Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}var Items=$resource("/api/collections/CartInOrder/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,get:Items.get,save:Items.save,delete:Items.delete}}angular.module("gmall.services").service("CartInOrder",cartInOrderService),cartInOrderService.$inject=["$resource","$uibModal","$q"]}(),function(){function newsService($resource,$uibModal,$q,global){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return console.log("XHR Failed for getNews."+error),$q.reject(error)}paginate||(paginate={page:0});var data={perPage:paginate.rows,page:paginate.page,query:query};return global.get("crawler")&&global.get("crawler").val&&(data.subDomain=global.get("store").val.subDomain),Items.query(data).$promise.then(getListComplete).catch(getListFailed)}function search(search,setData){function getListComplete(response){return response}function getListFailed(error){return console.log("XHR Failed for getNews."+error),$q.reject(error)}var data={search:search,setData:setData};return Items.query(data).$promise.then(getListComplete).catch(getListFailed)}function getItem(id){function getItemComplete(response){return response}function getItemFailed(error){return $q.reject(error)}return Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}function create(name){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/news/createNews.html",controller:function($uibModalInstance,name){var self=this;self.name=name,self.ok=function(){$uibModalInstance.close(self.name)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl",resolve:{name:function(){return name}}}).result.then(function(name){name?resolve(name.substring(0,100)):reject("empty")},function(err){reject(err)})})}function viewEmail(item,content){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/news/viewEmail.html",controller:function($q,$uibModalInstance,SubscibtionList,item,content){var self=this;self.item=item,self.except=!1,self.list,self.content=content,self.ok=function(){$uibModalInstance.close({lists:self.lists,except:self.except})},self.cancel=function(){$uibModalInstance.dismiss()},function(){$q.when().then(function(){return SubscibtionList.getList({page:0,rows:1,items:0},{})}).then(function(data){if(data&&data[0]){data[0].list||(data[0].list=[]);for(var key in data[0].list)data[0].list[key]||delete data[0].list[key];self.subscibtionList=data[0]}else self.subscibtionList={list:[]}})}()},size:"lg",controllerAs:"$ctrl",resolve:{item:function(){return item},content:function(){return content}}}).result.then(function(item){resolve(item)},function(err){reject(err)})})}function selectItem(){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/news/selectNews.html",controller:function(News,$uibModalInstance,$q){var self=this;self.stuffs=[],self.name="";var query;self.search=function(name){name.length<3||(query={name:name},News.search(name,!0).then(function(res){self.items=res}))},self.selectItem=function(item){$uibModalInstance.close(item)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl",size:"lg"}).result.then(function(stuff){resolve(stuff)},function(){reject()})})}var Items=$resource("/api/collections/News/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,query:Items.query,get:Items.get,save:Items.save,delete:Items.delete,create:create,viewEmail:viewEmail,select:selectItem,search:search}}angular.module("gmall.services").service("News",newsService),newsService.$inject=["$resource","$uibModal","$q","global"]}(),function(){function newsCartDirective(){return{templateUrl:"/views/template/partials/news/cart/news-cart.html",restrict:"A"}}function newsCartDirective1(){return{templateUrl:"/views/template/partials/news/cart/news-cart1.html",restrict:"A"}}function newsCartDirective2(){return{templateUrl:"/views/template/partials/news/cart/news-cart2.html",restrict:"A"}}function newsCartDirective3(){return{templateUrl:"/views/template/partials/news/cart/news-cart3.html",restrict:"A"}}function newsCartDirective4(){return{templateUrl:"/views/template/partials/news/cart/news-cart4.html",restrict:"A"}}function newsCartDirective5(){return{templateUrl:"/views/template/partials/news/cart/news-cart5.html",restrict:"A"}}function newsListDirective(){return{scope:{},bindToController:!0,controller:newsListCtrl,controllerAs:"$ctrl",templateUrl:"components/news/newsList.html"}}function newsListTemplateDirective($stateParams){return{template:"<div ui-view></div></div><div ng-bind-html='$ctrl.content|unsafe'></div>",bindToController:!0,scope:{},controllerAs:"$ctrl",controller:["$http","$stateParams","global",function($http,$stateParams,global){var self=this;$http.get("/views/template/partials/news").then(function(response){console.log(response),self.content=response.data.html,console.log(response.data.titles),global.set("titles",response.data.titles)})}]}}function newsListCtrl(News,$state,global,$timeout,$anchorScroll,Photo,Confirm,Label){function getList(){return!Object.keys(self.query).length&&self.actived&&(self.query={actived:!0}),News.getList(self.paginate,self.query).then(function(data){return self.itemsArr2=data.divideArrayWithChunk(2),self.itemsArr3=data.divideArrayWithChunk(3),self.itemsArr4=data.divideArrayWithChunk(4),self.items=data,$timeout(function(){self.data.rows=setRows(),$anchorScroll()}),self.items})}function setRows(){return global.get("functions").val.setRows?global.get("functions").val.setRows():2}function searchNews(searchStr){return self.query=searchStr?{name:searchStr.substring(0,10)}:{},self.paginate.page=0,getList().then(function(){console.log("Activated news list View")})}function saveField(item,field,defer){defer=defer||0,setTimeout(function(){var o={_id:item._id};return o[field]=item[field],self.Items.save({update:field},o).$promise.then(function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)},function(err){console.log(err)})},defer)}function createNews(item){var name=item?item.name:"";self.Items.create(name).then(function(res){return name=res,item?self.Items.get({_id:item._id,clone:"clone"}).$promise:{name:res}}).then(function(res){return res._id?(self.newNews=angular.copy(res),self.newNews.send={date:null,quantity:0},self.newNews.name=name,self.newNews.actived=!1,delete self.newNews.date,delete self.newNews._id,delete self.newNews.url,delete self.newNews.__v,self.newNews.nameL={},self.newNews.blocks.forEach(function(block){delete block.img,delete block._id,"stuffs"==block.type&&block.stuffs&&block.stuffs.length&&(block.stuffs=block.stuffs.map(function(s){return s._id?s._id:s})),block.imgs=[]})):(self.newNews={actived:!1},self.newNews.name=name),self.Items.save(self.newNews).$promise}).then(function(res){self.newNews._id=res.id,self.newNews.url=res.url,self.paginate.page=0,getList(self.paginate)}).then(function(){var id=self.newNews._id;delete self.newNews._id,setTimeout(function(){$state.go("frame.news.item",{id:id})},100)}).catch(function(err){console.log(err)})}function deleteItem(item){var folder="images/"+global.get("store").val.subDomain+"/News/"+item.url;Confirm("удалить?").then(function(){return News.delete({_id:item._id}).$promise}).then(function(){return getList()}).then(function(){return Photo.deleteFolder("News",folder)}).catch(function(err){(err=err&&err.data||err)&&exception.catcher("удаление новости")(err)})}var self=this;self.mobile=global.get("mobile").val,self.global=global,self.datePickerOptions={locale:{applyClass:"btn-green",applyLabel:"Выбрать",fromLabel:"от",toLabel:"до",cancelLabel:"Отменить",customRangeLabel:"Прозвольный диапазон",format:"DD-MMMM-YYYY",daysOfWeek:["Пн","Вт","Ср","Чт","Пн","Сб","Вс"],firstDay:1,monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"]},singleDatePicker:!0,date:{startDate:null,endDate:null}},self.$state=$state,self.Items=News,self.moment=moment,self.query={},self.paginate={page:0,rows:20,totalItems:0},self.newNews={name:"Новая иноформация",actived:!1},self.data={rows:2},self.itemsArr2=[[],[]],self.itemsArr3=[[],[],[]],self.itemsArr4=[[],[],[],[]],self.getList=getList,self.saveField=saveField,self.searchNews=searchNews,self.createNews=createNews,self.deleteItem=deleteItem,self.setRows=setRows,function(){getList().then(function(){return Label.getList({page:0,rows:100},{list:"news"})}).then(function(data){console.log(data),self.labels=data})}(),$(window).resize(function(){$timeout(function(){self.data.rows=setRows()})})}angular.module("gmall.services").directive("newsList",newsListDirective).directive("newsListTemplate",newsListTemplateDirective).directive("newsCart",newsCartDirective).directive("newsCart1",newsCartDirective1).directive("newsCart2",newsCartDirective2).directive("newsCart3",newsCartDirective3).directive("newsCart4",newsCartDirective4).directive("newsCart5",newsCartDirective5),newsListTemplateDirective.$inject=["global"],newsListCtrl.$inject=["News","$state","global","$timeout","$anchorScroll","Photo","Confirm","Label"]}(),function(){function itemTemplateDirective($stateParams){return{template:"<div ng-bind-html='$ctrl.content|unsafe'></div>",bindToController:!0,scope:{},controllerAs:"$ctrl",controller:["$http","$stateParams","global",function($http,$stateParams,global){var self=this;$http.get("views/template/partials/News/itemPage/"+$stateParams.id).then(function(response){console.log(response),self.content=response.data.html,console.log(response.data.titles),global.set("titles",response.data.titles)})}]}}function newsItemDirective(){return{scope:{},restrict:"E",bindToController:!0,controller:newsItemCtrl,controllerAs:"$ctrl",templateUrl:"components/news/newsItem.html"}}function newsItemCtrl(News,$stateParams,$q,$uibModal,global,exception,Stuff,CreateContent,Email,seoContent,Photo,$resource,$anchorScroll,$timeout,FilterTags,BrandTags,Brands,Campaign,Category,$scope,Confirm,SetCSS){function activate(){return getItem($stateParams.id).then(function(){}).catch(function(err){err=err.data||err,exception.catcher("получение новости")(err)})}function getItem(id){return self.Items.getItem(id).then(function(data){console.log(data),data&&!data.blocks&&(data.blocks=[],saveField("blocks",[])),data.blocks.forEach(function(b,i){b.i=i});for(var key in data)self.item[key]=data[key];return self.objShare=seoContent.setDataItem(data,!0),$anchorScroll(),self.item}).catch(function(err){return console.log(err),$q.reject(err)})}function setStyles(block,idx){$q.when().then(function(){return SetCSS.setStyles(block)}).then(function(){saveField("blocks."+block.i,block)})}function saveField(field,value,defer,indexImgs){field.indexOf("index")>-1&&(self.item.blocks.sort(function(a,b){return a.index-b.index}),self.item.blocks.forEach(function(b,i){b.i=i}),value=self.item.blocks,field="blocks"),defer=defer?defer:100,$timeout(function(){"date"==field&&(value=new Date(self.item[field]));var o={_id:self.item._id};o[field]=value;var query={update:field};field.indexOf(".imgs")>-1&&void 0!==indexImgs&&(query.indexImgs=indexImgs),self.Items.save(query,o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})},defer)}function refreshBlocks(){return self.Items.getItem($stateParams.id).then(function(data){data.blocks.forEach(function(b,i){b.i=i,b.desc||(b.desc=""),b.descL||(b.descL={}),b.desc1||(b.desc1=""),b.desc1L||(b.desc1L={}),b.name||(b.name=""),b.nameL||(b.nameL={}),b.name1||(b.name1=""),b.name1L||(b.name1L={}),b.videoLink||(b.videoLink="")}),self.item.blocks=data.blocks})}function addBlock(type){return $scope.$broadcast("addNewBlock",{type:type}),void(self.newBlock=null)}function deleteBlock(block,index){var o={_id:self.item._id};o.id=block.id;var update={update:"id",embeddedName:"blocks"};update.embeddedPull=!0,console.log(update,o),Confirm("Подтверждаете?").then(function(){return self.Items.save(update,o).$promise}).then(function(res){self.item.blocks.splice(index,1);var images=[];if(block.img&&images.push(block.img),block.video&&images.push(block.video),block.videoCover&&images.push(block.videoCover),block.imgs&&block.imgs.length&&block.imgs.forEach(function(im){im.img&&images.push(im.img)}),images.length)return Photo.deleteFiles("Stat",images)})}function deleteSlide(block,index){Photo.deleteFiles("Stat",[block.imgs[index].img]).then(function(response){block.imgs.splice(index,1),self.saveField("blocks."+block.i+".imgs",block.imgs)},function(err){console.log(err)})}function editSlide(block,index){$uibModal.open({animation:!0,templateUrl:"components/staticPage/editSlide.html",controller:function(slide,$uibModalInstance){var self=this;self.item=slide,self.ok=function(){console.log(self.item),$uibModalInstance.close(self.item)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl",size:"lg",resolve:{slide:function(){return block.imgs[index]}}}).result.then(function(slide){self.saveField("blocks."+block.i+".imgs",block.imgs,null,index)},function(){})}function filterBlocks(item){return keyParts.indexOf(item.key)>-1}function addItemInBlock(block,$index){var model;switch(block.type){case"stuffs":model=Stuff;break;case"campaign":model=Campaign;break;case"filterTags":model=FilterTags;break;case"brandTags":model=BrandTags;break;case"brands":model=Brans;break;case"categories":model=Category}$q.when().then(function(){return model.select()}).then(function(item){block[block.type]||(block[block.type]=[]);var img,link;switch(block.type){case"stuffs":img=item.gallery[0]&&item.gallery[0].thumb?item.gallery[0].thumb:null,link=item.link,item.artikul&&(item.name+=" "+item.artikul);break;case"campaign":img=item.img?item.img:null,link="campaign/"+item.url;break;case"filterTags":img=item.img?item.img:null,link="/group/category?queryTag="+item.url;break;case"brandTags":img=item.img?item.img:null,link="/group/category?brandTag="+item.url;break;case"brands":img=item.img?item.img:null,link="/group/category?brand="+item.url;break;case"categories":img=item.img?item.img:null,link="/group/"+item.url}void 0!==$index?block.imgs[$index]={name:item.name,img:img,link:link}:(block.imgs||(block.imgs=[]),block.imgs.push({name:item.name,img:img,link:link})),saveField("blocks."+block.i+".imgs",block.imgs)})}function movedItem(block,item){return $timeout(function(){saveField("blocks."+block.i+".imgs",block.imgs)},100),item}function deleteItemFromBlock(block,$index){block.imgs.splice($index,1),saveField("blocks."+block.i+".imgs",block.imgs)}function changeItem(block,$index){addItemInBlock(block,$index)}function sendEmail(){var item=angular.copy(self.item);item.blocks&&item.blocks.length&&item.blocks.forEach(function(b){"stuffs"==b.type&&(b.imgs=b.stuffs)});var ownerDomain,content=CreateContent.emailFromNews(item),d=new Date,n=d.getMonth()+1;global.get("store").val.seller.mailgun&&global.get("store").val.seller.mailgun.domain&&(ownerDomain=global.get("store").val.seller.mailgun.domain),$q.when().then(function(){}).then(function(){return self.Items.viewEmail(self.item,content)}).then(function(data){var lists=data.lists,except=data.except;if(!ownerDomain&&global.get("store").val.mailData&&global.get("store").val.mailData.month&&global.get("store").val.mailData.month==n&&global.get("store").val.mailData.quantity>500)throw"Превышен лимит количества писем в месяц";var o={content:content,lists:lists,except:except,subject:self.item.name.substring(0,50)};return Email.save(o).$promise}).then(function(res){if(exception.showToaster("note","Сообщение","Рассылка отправлена"),self.item.send||(self.item.send={}),self.item.send.date=Date.now(),saveField("send",self.item.send),res.quantity&&!ownerDomain){global.get("store").val.mailData&&global.get("store").val.mailData.month?global.get("store").val.mailData.month!=n?global.get("store").val.mailData={month:n,quantity:res.quantity}:(global.get("store").val.mailData.quantity||(global.get("store").val.mailData.quantity=0),global.get("store").val.mailData.quantity+=res.quantity):global.get("store").val.mailData={month:n,quantity:res.quantity};var o={_id:global.get("store").val._id};o.mailData=global.get("store").val.mailData,Store.save({update:"mailData"},o)}}).catch(function(err){err&&exception.catcher("отправка писем")(err)})}function clearDesc(block){console.log("???????????????"),block.desc="",saveField("blocks."+block.i+".index",block.desc)}var self=this;self.Items=News,self.type="News",self.item={},self.mobile=global.get("mobile").val,self.global=global,self.listOfBlocksForNewsDetailPage=listOfBlocksForAll,self.listOfBlocks=listOfBlocksForAll,self.animationTypes=animationTypes,self.datePickerOptions={locale:{applyClass:"btn-green",applyLabel:"Выбрать",fromLabel:"от",toLabel:"до",cancelLabel:"Отменить",customRangeLabel:"Прозвольный диапазон",format:"DD-MMMM-YYYY",daysOfWeek:["Пн","Вт","Ср","Чт","Пн","Сб","Вс"],firstDay:1,monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"]},singleDatePicker:!0,date:{startDate:null,endDate:null}},self.setStyles=setStyles,self.saveField=saveField,self.sendEmail=sendEmail;var Store=$resource("/api/collections/Store/:_id",{_id:"@_id"});self.newBlock=null,self.addBlock=addBlock,self.refreshBlocks=refreshBlocks,self.deleteBlock=deleteBlock,self.deleteSlide=deleteSlide,self.editSlide=editSlide,self.filterBlocks=filterBlocks,self.addItemInBlock=addItemInBlock,self.movedItem=movedItem,self.deleteItemFromBlock=deleteItemFromBlock,self.changeItem=changeItem,self.clearDesc=clearDesc,activate(),$scope.$on("changeLang",function(){activate()});var keyParts=global.get("store").val.template.news.parts.filter(function(el){return el.is}).map(function(el){return el.name})}angular.module("gmall.directives").directive("newsItem",newsItemDirective).directive("newsDetailTemplate",itemTemplateDirective),newsItemCtrl.$inject=["News","$stateParams","$q","$uibModal","global","exception","Stuff","CreateContent","Email","seoContent","Photo","$resource","$anchorScroll","$timeout","FilterTags","BrandTags","Brands","Campaign","Category","$scope","Confirm","SetCSS"]}(),function(){function itemCtrl($scope,global,$location,$timeout,$state,$element){var self=this;self.global=global,self.$onInit=function(){$timeout(function(){var shareItem=angular.copy(global.get("titles").val);if(shareItem.url&&shareItem.url.indexOf&&shareItem.url.indexOf("http")<0&&(shareItem.url=global.get("store").val.link+shareItem.url),self.item){self.item.url&&("news"==$state.current.name||"master"==$state.current.name||"stat"==$state.current.name||"campaign"==$state.current.name||"additional"==$state.current.name||"workplace"==$state.current.name?shareItem.url+="/"+self.item.url:"home"==$state.current.name&&(shareItem.url+="/"+self.state+"/"+self.item.url));try{self.item.name&&(shareItem.title=self.item.name),self.item.desc&&(shareItem.description=self.item.desc),self.item.img&&(shareItem.image=photoHost+"/"+self.item.img)}catch(err){console.log(err)}}self.shareItem=shareItem},400)}}angular.module("gmall.directives").component("socialHub",{bindings:{objShare:"=",textCenter:"<",item:"<",state:"<"},controller:itemCtrl,templateUrl:"/components/socialHub/socialHub.html"})}(),angular.module("gmall.services").service("HomePage",function($resource,$uibModal){function selectItemFromList(items,header){return $uibModal.open({animation:!0,templateUrl:"components/homePage/selectItem.html",controllerAs:"$ctrl",controller:function($uibModalInstance,global,items,header){function selectItem(item){$uibModalInstance.close(item)}function cancel(){$uibModalInstance.dismiss()}var self=this;self.items=items,self.header=header||"выберите из предложенного списка",self.selectItem=selectItem,self.cancel=cancel},resolve:{items:function(){return items},header:function(){return header}}}).result}var Items=$resource("/api/collections/HomePage/:_id",{_id:"@_id"});this.query=Items.query,this.get=Items.get,this.delete=Items.delete,this.save=Items.save,
this.selectItemFromList=selectItemFromList}).directive("parallaxBanner",function($timeout){return{scope:{},restrict:"C",link:function(scope,elem,attr){function doIt(){var elementTop=$(elem).offset().top,viewportTop=($(elem).outerHeight(),$(window).scrollTop()),viewportBottom=viewportTop+$(window).height();$(window).height();if(elementTop<viewportBottom){var yPos=(parseInt(elem.css("background-position-y")),(elementTop-viewportBottom+$(elem).height())/4),coords="0% "+yPos+"px";elem.css({backgroundPosition:coords})}}var $window=$(window);$timeout(function(){doIt()},100),$(window).scroll(doIt),elem.on("$destroy",function(){angular.element($window).off("scroll",doIt)})}}}).directive("homePage",function(){function homePageCtrl(HomePage,$stateParams,$state,$q,global,$http,$uibModal,Stuff,Filters,FilterTags,Category,exception,BrandTags,Store,Brands,EditModelData,Photo,News,Campaign,Info,$scope,$timeout,Confirm,SetCSS,$rootScope){function getNameBlock(type){return listOfBlocksForAll[type]?listOfBlocksForAll[type]:type}function activate(){$q.when().then(function(){return self.blockForAdd=null,$q(function(resolve,reject){self.Items.get({_id:self.store.subDomain},function(res){resolve(res)},function(err){console.log(err),err&&err.status&&404==err.status?resolve(404):resolve()})})}).then(function(res){if(res&&404!=res)self.item=res,self.item.blocks||(self.item.blocks=[]),self.item.blocks.forEach(function(el,index){el.i=index});else if(404==res)return self.item={url:self.store.subDomain,header:[],left:[],right:[],blocks:[]},self.Items.save(self.item).$promise}).then(function(res){self.item&&!self.item._id&&res&&res.id&&(self.item._id=res.id)}).catch(function(err){exception.catcher("получение home page")(err)})}function addBlock(type){if(type){return console.log("addNewBlock"),$scope.$broadcast("addNewBlock",{type:type}),void(self.newBlock=null)}}function cloneBlock(block){if(!delay){delay=!0,$timeout(function(){delay=!1},2e3);var newBlock=angular.copy(block);delete newBlock._id,delete newBlock.__v,newBlock.index?newBlock.index++:newBlock.index=1,newBlock.img=null,newBlock.imgs=[];["stuffs","filterTags","brandTags","categories","brands","news","campaign","info","filters"].forEach(function(field){newBlock[field]&&newBlock[field].length&&(newBlock[field]=newBlock[field].map(function(item){return item._id}))}),self.item.blocks.forEach(function(block){block.index&&block.index>=newBlock.index&&(newBlock.index=block.index+1)}),self.item.blocks.push(newBlock);var o={_id:self.item._id};o[blocks]=self.item.blocks;var update={update:"blocks"};Confirm("потверждаете?").then(function(){return self.Items.save(update,o).$promise}).then(function(res){$timeout(function(){global.set("saving",!1)},1500),activate()}).catch(function(err){err&&exception.catcher("добавление блока")(err)})}}function refreshBlocks(){return self.item.blocks=null,self.Items.get({_id:self.store.subDomain}).$promise.then(function(data){data.blocks.forEach(function(b,i){b.i=i,b.desc||(b.desc=""),b.descL||(b.descL={}),b.desc1||(b.desc1=""),b.desc1L||(b.desc1L={}),b.name||(b.name=""),b.nameL||(b.nameL={}),b.name1||(b.name1=""),b.name1L||(b.name1L={}),b.videoLink||(b.videoLink="")}),self.item.blocks=data.blocks})}function deleteBlock(block){var update,o={_id:self.item._id};Confirm("потверждаете?").then(function(){return self.item.blocks.splice(block.i,1),block._id?(o._id_id=block._id,update={update:"_id_id",embeddedName:"blocks"},update.embeddedPull=!0):(update={update:"blocks"},o.blocks=self.item.blocks),self.Items.save(update,o).$promise}).then(function(res){var images=[];if(block.img&&images.push(block.img),block.video&&images.push(block.video),block.videoCover&&images.push(block.videoCover),block.imgs&&block.imgs.length&&block.imgs.forEach(function(im){im.img&&images.push(im.img)}),images.length)return Photo.deleteFiles("Homepage",images)}).then(function(){activate()})}function saveInfo(){saveField("info")}function saveField(field,value){console.log(field,value),field.indexOf("index")>-1&&(self.item.blocks.sort(function(a,b){return a.index-b.index}),self.item.blocks.forEach(function(b,i){b.i=i}),value=self.item.blocks,field="blocks"),setTimeout(function(){"date"==field&&(value=new Date(self.item[field]));var o={_id:self.item._id};o[field]=value;var query={update:field};self.Items.save(query,o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500),field.indexOf(".type")>-1&&activate()})},100)}function movedSlide(block,field,item){return setTimeout(function(){block[field].forEach(function(el,i){el.index=i}),self.saveField(block,null,field)},100),item}function deleteSlide(block,index,$index){Confirm("Удалить?").then(function(){return Photo.deleteFiles("Homepage",[block.imgs[index].img])}).then(function(response){block.imgs.splice(index,1),self.saveField(block,$index,"imgs")},function(err){console.log(err)})}function editSlide(block,index,$index){$uibModal.open({animation:!0,templateUrl:"components/homePage/editSlide.html",controller:function(slide,$uibModalInstance){var self=this;slide.button||(slide.button={}),self.item=slide,self.animationTypes=animationTypes,self.ok=function(){console.log(self.item),$uibModalInstance.close(self.item)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl",size:"lg",resolve:{slide:function(){return block.imgs[index]}}}).result.then(function(slide){self.saveField(block,$index,"imgs",null,index)},function(){})}function movedStuff(block,item){return setTimeout(function(){saveFieldInSide(block)},100),item}function editModelData(block,i){var model=block.type,items=block[block.type];if(items[i]&&items[i]._id){var field;"brands"==model?field="Brand":"categories"==model?field="Category":"filterTags"==model?field="FilterTags":"filters"==model?field="Filters":"brandTags"==model?field="BrandTags":"stuffs"==model?field="Stuff":"news"==model?field="News":"campaign"==model?field="Campaign":"info"==model&&(field="Info"),$q.when().then(function(){return EditModelData.doIt(field,items[i]._id,items[i])}).then(function(img){console.log(img==items[i].img),img&&img!=items[i].img&&(items[i].img=img,console.log(img))})}else setCollection(items,i)}function addItemInBlock(block){var field=block.type;block[block.type]||(block[block.type]=[]);var Items,collections=block[block.type];"brands"==field?Items=Brands:"categories"==field?Items=Category:"filterTags"==field?Items=FilterTags:"filters"==field?Items=Filters:"brandTags"==field?Items=BrandTags:"stuffs"==field?Items=Stuff:"news"==field?Items=News:"campaign"==field?Items=Campaign:"info"==field&&(Items=Info),$q.when().then(function(){return Items.select({actived:!0})}).then(function(item){collections.push(item),self.saveFieldInSide(block)}).catch(function(){console.log("dismiss")})}function setCollection(block,idx){var Items,field=block.type,collections=block[block.type];"brands"==field?Items=Brands:"categories"==field?Items=Category:"filterTags"==field?Items=FilterTags:"filters"==field?Items=Filters:"brandTags"==field?Items=BrandTags:"stuffs"==field?Items=Stuff:"news"==field?Items=News:"campaign"==field?Items=Campaign:"info"==field&&(Items=Info),$q.when().then(function(){return Items.select()}).then(function(item){collections[idx]=item,self.saveFieldInSide(block)}).catch(function(){console.log("dismiss")})}function saveFieldInSide(item){var field=item.type;console.log(item[item.type]);var o={_id:self.item._id};o[field]=item[field].map(function(e){return e._id});var update={update:field,embeddedName:self.activeSide};return update.embeddedVal=item._id,console.log(update,o),self.Items.save(update,o).$promise}function deleteCollection(block,idx){block[block.type].splice(idx,1),saveFieldInSide(block)}function getNameCollection(type){switch(type){case"categories":return"категории";case"brands":return"бренды";case"brandTags":return"коллекции";case"filterTags":return"признаки";case"filters":return"характеристики";default:return"???????"}}function setColor(block,idx){$q.when().then(function(){return SetCSS.setStyles(block)}).then(function(){saveField(block,idx,"blockStyle"),console.log(block.elements),saveField(block,idx,"elements")})}function uploadHP(){Confirm("выгрузить?").then(function(){return $http.post("/api/setTemplateHP",{template:{blocks:self.item.blocks},store:global.get("store").val._id})}).then(function(res){exception.showToaster("success","статус","обновлено")}).catch(function(err){exception.catcher("выгрузка шаблона")(err)})}function downloadHP(){Confirm("загрузить?").then(function(){return $http.get("/views/templatesHP/"+global.get("store").val.subDomain+".json")}).then(function(res){if(console.log(res.data),!res.data||!res.data.blocks)throw"не верный формат данных";var o={_id:self.item._id};o.blocks=res.data.blocks,self.Items.save({update:"blocks"},o,function(){self.item.blocks=res.data.blocks,exception.showToaster("success","статус","обновлено")})}).catch(function(err){exception.catcher("загрузка шаблона")(err)})}function deleteIndexPageHtml(){Confirm("перезаписать страницу?").then(function(){return $http.get("/api/deleteIndexPageHtml")}).then(function(res){exception.showToaster("info","все OK")}).catch(function(err){exception.catcher("сброс страницы")(err)})}function getBlockConfig(block){$q.when().then(function(){return $http.get("/api/getBlocksHP/"+block.type)}).then(function(res){if(res.data)return HomePage.selectItemFromList(res.data)}).then(function(b){if(b){if(block.img);else if(block.video)Photo.deleteFiles("Homepage",[block.video]);else if(block.imgs&&"stuffs"!=block.type){var a=[];block.imgs.forEach(function(i){a.push(i.img)}),a.length&&Photo.deleteFiles("Homepage",a)}for(var key in block)"_id"!=key&&"index"!=key&&delete block[key];var photos=[];for(var key in b)if("_id"!=key&&"template"!=key&&"nameTemplate"!=key&&"index"!=key)if("img"==key&&b[key]){var p=b[key].split("/");p[p.length-2]=self.item.url,p[p.length-4]=global.get("store").val.subDomain;var img=p[p.length-1].split(".");img[img.length-2]+="copy",p[p.length-1]=img.join("."),block[key]=p.join("/"),photos.push([b[key],block[key]])}else if("imgs"==key&&b[key]&&b[key].length)b[key].forEach(function(i){if(i.img){var p=i.img.split("/");p[p.length-2]=self.item.url,p[p.length-4]=global.get("store").val.subDomain;var img=p[p.length-1].split(".");img[img.length-2]+="copy",p[p.length-1]=img.join("."),photos.push([i.img,p.join("/")]),i.img=p.join("/")}}),block[key]=b[key];else if("video"==key&&b[key]){var p=b[key].split("/");p[p.length-2]=self.item.url,p[p.length-4]=global.get("store").val.subDomain;var img=p[p.length-1].split(".");img[img.length-2]+="copy",p[p.length-1]=img.join("."),block[key]=p.join("/"),photos.push([b[key],block[key]])}else block[key]=b[key];var folder="/images/"+global.get("store").val.subDomain+"/HomePage/"+self.item.url,o={folder:folder,photos:photos};return $http.post(photoUpload+"/api/copyPhotosFromBrowser",o)}}).then(function(){return saveField(block,block.i)}).then(function(){activate()})}var self=this;self.Items=HomePage,self.global=global,self.$state=$state,self.activeSide="left",self.store=global.get("store").val,self.listOfBlocks=listOfBlocksForAll,self.blockEditPermission={},self.animationTypes=animationTypes,self.addBlock=addBlock,self.deleteBlock=deleteBlock,self.saveInfo=saveInfo,self.saveField=saveField,self.movedSlide=movedSlide,self.deleteSlide=deleteSlide,self.editSlide=editSlide,self.movedStuff=movedStuff,self.editModelData=editModelData,self.setCollection=setCollection,self.deleteCollection=deleteCollection,self.saveFieldInSide=saveFieldInSide,self.addItemInBlock=addItemInBlock,self.getNameCollection=getNameCollection,self.setColor=setColor,self.uploadHP=uploadHP,self.downloadHP=downloadHP,self.deleteIndexPageHtml=deleteIndexPageHtml,self.cloneBlock=cloneBlock,self.getBlockConfig=getBlockConfig,self.getNameBlock=getNameBlock,self.refreshBlocks=refreshBlocks,activate(),$scope.$on("changeLang",function(){activate()});var delay=!1}return{scope:{},restrict:"E",bindToController:!0,controller:homePageCtrl,controllerAs:"$ctrl",templateUrl:"components/homePage/homePage.html"}}),angular.module("gmall.directives").directive("directivehp",function($compile,$interpolate){return{template:"",link:function($scope,element,attributes){element.append($compile("<div "+attributes.directivehp.toLowerCase()+"hp-block></div>")($scope))}}}).directive("styleBlock",styleBlock).directive("bannerhpBlock",bannerHPBlock).directive("banneronehpBlock",banneroneHPBlock).directive("infohpBlock",infohpBlock).directive("sliderhpBlock",sliderhpBlock).directive("texthpBlock",texthpBlock).directive("texttwohpBlock",texttwohpBlock).directive("videohpBlock",videohpBlock).directive("missionhpBlock",missionhpBlock).directive("brandshpBlock",brandshpBlock).directive("stuffshpBlock",stuffshpBlock).directive("newshpBlock",newshpBlock).directive("campaignhpBlock",campaignhpBlock).directive("maphpBlock",maphpBlock).directive("reviewhpBlock",reviewhpBlock).directive("subscriptionhpBlock",subscriptionhpBlock).directive("callhpBlock",callhpBlock).directive("feedbackhpBlock",feedbackhpBlock).directive("brandtagshpBlock",brandTagshpBlock).directive("subscriptionaddhpBlock",subscriptionAddhpBlock).directive("filtertagshpBlock",filterTagshpBlock).directive("filtershpBlock",filtershpBlock).directive("categorieshpBlock",categorieshpBlock).directive("calendarhpBlock",calendarhpBlock).directive("videolinkhpBlock",videolinkhpBlock).directive("pricegoodshpBlock",pricegoodshpBlock).directive("priceserviceshpBlock",priceserviceshpBlock).directive("scheduleplacehpBlock",scheduleplacehpBlock).directive("hpBlock",undefinedhpBlock).directive("googlePlaceReviews",googlePlaceReviews),angular.module("gmall.directives").directive("paginatorMain",function(anchorSmoothScroll,$anchorScroll){return{restrict:"E",scope:{paginate:"=",getlist:"&",scroll:"@"},link:function(scope,element,attrs,controller){function getList(){scope.scroll&&anchorSmoothScroll.scrollTo(scope.scroll,200),scope.getlist()}if(scope.paginate&&"object"==typeof scope.paginate){var l;scope.paginator={},scope.$watch("paginate.items",function(n,o){(n||0===n)&&(scope.paginate.items=Number(n),l=scope.paginator.pageCount(),scope.arrayPage=scope.getListPage())}),scope.paginator.setPage=function(page){((page=Number(page))||0===page)&&(page>scope.paginator.pageCount()||page==scope.paginate.page||(scope.paginate.page=page,0==scope.paginate.page&&(scope.arrayPage=scope.getListPage(2)),scope.paginate.page==l-1&&(scope.arrayPage=scope.getListPage(6)),scope.paginate.page==scope.arrayPage[3]&&6==scope.arrayPage.length&&l-1-scope.paginate.page>2?scope.arrayPage=scope.getListPage():scope.paginate.page==scope.arrayPage[4]&&7==scope.arrayPage.length?scope.arrayPage=scope.getListPage():scope.paginate.page==scope.arrayPage[2]&&scope.paginate.page-scope.arrayPage[0]>=2&&(scope.arrayPage=scope.getListPage()),getList()))},scope.paginator.nextPage=function(){scope.paginator.isLastPage()||(scope.paginate.page++,scope.paginate.page==scope.arrayPage[3]&&6==scope.arrayPage.length&&l-1-scope.paginate.page>2?scope.arrayPage=scope.getListPage():scope.paginate.page==scope.arrayPage[4]&&7==scope.arrayPage.length?scope.arrayPage=scope.getListPage():scope.paginate.page==scope.arrayPage[2]&&scope.paginate.page-scope.arrayPage[0]>=2&&(scope.arrayPage=scope.getListPage()),getList())},scope.paginator.perviousPage=function(){scope.paginator.isFirstPage()||(scope.paginate.page--,scope.paginate.page==scope.arrayPage[3]&&6==scope.arrayPage.length&&l-1-scope.paginate.page>2?scope.arrayPage=scope.getListPage():scope.paginate.page==scope.arrayPage[4]&&7==scope.arrayPage.length?scope.arrayPage=scope.getListPage():scope.paginate.page==scope.arrayPage[2]&&scope.paginate.page-scope.arrayPage[0]>=2&&(scope.arrayPage=scope.getListPage()),getList())},scope.paginator.firstPage=function(){scope.paginate.page=0,getList()},scope.paginator.lastPage=function(){scope.paginate.page=scope.paginator.pageCount()-1,getList()},scope.paginator.isFirstPage=function(){return 0==scope.paginate.page},scope.paginator.isLastPage=function(){return scope.paginate.page==scope.paginator.pageCount()-1},scope.paginator.pageCount=function(){var count=Math.ceil(parseInt(scope.paginate.items,10)/parseInt(scope.paginate.rows,10));return 1===count&&(scope.paginate.page=0),count},scope.changeRow=function(rows){for(scope.paginate.rows=rows;scope.paginator.pageCount()<scope.paginate.page-1;)scope.paginate.page--;getList()},scope.arrayPage=[],scope.getListPage=function(num){var page=scope.paginate.page,arrayPage=[];if((0===num||num)&&(page=num),l<=6)for(var i=0;i<l;i++)arrayPage.push(i);else{if(page>=3)arrayPage.push(0),arrayPage.push("..."),arrayPage.push(page-1),arrayPage.push(page),arrayPage.push(page+1);else for(var i=0;i<4;i++)arrayPage.push(i);l-1-page>2&&arrayPage.push("..."),arrayPage.push(l-1)}return arrayPage},scope.getPageStr=function(i){return Number(i)||0===i?i+1:i}}},templateUrl:"components/paginator/paginator.html"}}),function(){function itemDirective(){return{scope:{modalClose:"&"},rescrict:"E",bindToController:!0,controller:itemCtrl,controllerAs:"$ctrl",templateUrl:"components/subscription/subscription.html"}}function itemCtrl($q,global,$state,$user,exception){function ok(form){form.$valid&&$q.when().then(function(){return $user.newUser(null,self.email)}).then(function(){self.modalClose&&"function"==typeof self.modalClose&&self.modalClose();var pap;global.get("paps")&&global.get("paps").val&&(pap=global.get("paps").val.getOFA("action","subscription"))&&$state.go("thanksPage",{url:pap.url})}).catch(function(err){err=err.data,self.errors={},err&&err.error?(form.email.$setValidity("mongoose",!1),self.errors.email=err.error,exception.catcher("подписка")(err.error)):exception.catcher("подписка")(err)})}var self=this;self.ok=ok,self.email=""}angular.module("gmall.services").directive("iSubscription",itemDirective),itemCtrl.$inject=["$q","global","$state","$user","exception"]}(),function(){function categoriesForListTatiana(global){return{scope:{padding:"="},restrict:"E",bindToController:!0,controller:categoriesForListCtrl,controllerAs:"$ctrl",templateUrl:"views/"+global.get("store").val.template.folder+"/partials/category/categoriesForList.html"}}function categoriesForListTemplate(){return{scope:{padding:"="},restrict:"E",bindToController:!0,controller:categoriesForListCtrl,controllerAs:"$ctrl",transclude:!0,link:function(scope,element,attrs,ctrl,transclude){transclude(scope,function(clone){element.append(clone)})}}}function categoriesForListTemplate1(){return{scope:{padding:"="},restrict:"E",bindToController:!0,controller:categoriesForListCtrl,controllerAs:"$ctrl",transclude:!0,link:function(scope,element,attrs,ctrl,transclude){transclude(scope,function(clone){element.append(clone)})}}}function categoriesForListTemplate2(){return{scope:{padding:"="},restrict:"E",bindToController:!0,controller:categoriesForListCtrl,controllerAs:"$ctrl",transclude:!0,link:function(scope,element,attrs,ctrl,transclude){transclude(scope,function(clone){element.append(clone)})}}}function categoriesForListTemplate3(){return{scope:{padding:"="},restrict:"E",bindToController:!0,controller:categoriesForListCtrl,controllerAs:"$ctrl",transclude:!0,link:function(scope,element,attrs,ctrl,transclude){transclude(scope,function(clone){element.append(clone)})}}}function categoriesForListDirective(){return{scope:{padding:"="},restrict:"E",bindToController:!0,controller:categoriesForListCtrl,controllerAs:"$ctrl",templateUrl:"components/categoriesForList/categoriesForList.html"}}function categoriesForListCtrl($stateParams,$state,$q,$location,global){function changeCategory(category,tag){var brand=$stateParams.brand?brand=$stateParams.brand:null,queryTag=null;tag&&("sale"==tag?queryTag=global.get("store").val.saleTag:(tag="new")&&(queryTag=global.get("store").val.newTag));var o={groupUrl:$stateParams.groupUrl,categoryUrl:category,queryTag:queryTag,brand:brand,brandTag:null,searchStr:void 0};$state.go("stuffs",o,{reload:!0,lacation:!0,inherit:!1,notify:!0})}function deleteCrumb(index){!function(type){var query=self.breadcrumbs.reduce(function(q,item){return item.type==type&&(q&&(q+="__"),q+=item.url),q},"");query||(query=null),$location.search(type,query)}(self.breadcrumbs.splice(index,1)[0].type)}function checkInnerData(){return!!$ctrl.parentSection&&($ctrl.parentSection.categories.length&&$ctrl.parentSection.categories.filter(function(c){return!c.notActive}).length>1)}function getFilterTagsPhoto(url){return global.get("filterTags").val.getOFA("url",url)}if(global.get("store").val){var self=this,$ctrl=self;self.getFilterTagsPhoto=getFilterTagsPhoto,self.global=global,self.prop={},self.category=$stateParams.categoryUrl,self.parentSection=global.get("parentSection").val,self.breadcrumbs=global.get("breadcrumbs").val,self.changeCategory=changeCategory,self.deleteCrumb=deleteCrumb,self.checkInnerData=checkInnerData,self.queryTag=null,$stateParams.queryTag&&(global.get("store").val.saleTag&&global.get("store").val.saleTag==$stateParams.queryTag?self.queryTag="sale":global.get("store").val.newTag&&global.get("store").val.newTag==$stateParams.queryTag&&(self.queryTag="new"))}}angular.module("gmall.directives").directive("categoriesForList",categoriesForListDirective).directive("categoriesForListTatiana",categoriesForListTatiana).directive("categoriesForListTemplate",categoriesForListTemplate).directive("categoriesForListTemplate1",categoriesForListTemplate1).directive("categoriesForListTemplate2",categoriesForListTemplate2).directive("categoriesForListTemplate3",categoriesForListTemplate3),categoriesForListCtrl.$inject=["$stateParams","$state","$q","$location","global"]}(),function(){angular.module("gmall.directives").directive("mongooseError",function(){return{restrict:"A",require:"ngModel",link:function(scope,element,attrs,ngModel){element.on("keydown",function(){return ngModel.$setValidity("mongoose",!0)})}}})}(),function(){angular.module("gmall.directives").directive("ngAutocompleteCity",function($parse,$timeout,global){return{scope:{user:"=",change:"&"},link:function(scope,element,attrs,model,contorller){function activate(){scope.user||(scope.user={}),scope.user.profile||(scope.user.profile={}),scope.user.profile.city||(scope.user.profile.city=""),element[0].value=scope.user.profile.city,void 0==scope.gPlace&&(scope.gPlace=new google.maps.places.Autocomplete(element[0],{types:["(cities)"]})),google.maps.event.addListener(scope.gPlace,"place_changed",place_changed),google.maps.event.addDomListener(element[0],"keydown",function(e){13==e.keyCode&&e.preventDefault()})}function place_changed(){placeChosen=!0;var place=scope.gPlace.getPlace();place.place_id?setTimeout(function(){scope.user.profile.city=element.val(),$timeout(function(){scope.user.profile.cityId=place.place_id},200),scope.$apply(),scope.change&&"function"==typeof scope.change&&scope.change()},50):(scope.cityId=null,scope.user.profile.city=element.val(),scope.$apply()),$timeout(function(){placeChosen=!1},1e3)}var placeChosen=!1;setTimeout(function(){activate()},500),scope.$watch(function(){return element.val()},function(o,n){n&&n!=o&&!placeChosen&&(scope.user.profile.cityId=null,scope.user.profile.city=element.val())})}}})}(),function(){function serviceFunction($uibModal,$q,$state,$timeout,$rootScope){function show(item,delay){if(item.showOnes){if(getCookie("witget"+item._id))return;var options={path:"/",expires:3600};setCookie("witget"+item._id,"111",options)}return $q(function(resolve,reject){var options={animation:!0,templateUrl:"components/TEMPLATE/witget/index.html",controller:function($scope,$uibModalInstance,item){$scope.flag=!1;var self=this;self.item=item,item.stuff&&item.stuff.name&&(self.stuff=item.stuff.name+(item.stuff.artikul?" "+item.stuff.artikul:"")),self.ok=function(state){$uibModalInstance.close(state)},self.cancel=function(){$uibModalInstance.dismiss("cancel")},$scope.$on("closeWitget",function(){$uibModalInstance.close()})},resolve:{item:function(){return item}},controllerAs:"$ctrl",windowClass:"modalProject",backdropClass:"modalBackdropClass"};delay=delay&&item.delay?1e3*Number(item.delay):0,$timeout(function(){$rootScope.$emit("modalOpened"),$uibModal.open(options).result.then(function(){$rootScope.$emit("modalClosed"),resolve()},function(err){$rootScope.$emit("modalClosed"),reject(err)})},delay)})}return{show:show}}angular.module("gmall.services").service("Witget",serviceFunction),serviceFunction.$inject=["$uibModal","$q","$state","$timeout","$rootScope"]}(),function(){function statService($resource,$uibModal,$q){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return console.log("XHR Failed for getNews."+error),$q.reject(error)}return Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete).catch(getListFailed)}function getItem(id){function getItemComplete(response){return response}function getItemFailed(error){return $q.reject(error)}return Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}function create(){return $q(function(resolve,reject){var options={animation:!0,restrict:"E",templateUrl:"components/staticPage/createStaticPage.html",controller:function($uibModalInstance){var self=this;self.name="",self.ok=function(){$uibModalInstance.close(self.name)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(name){name?resolve(name.substring(0,100)):reject("empty")},function(err){reject(err)})})}function selectItem(){return $q(function(resolve,reject){var options={animation:!0,templateUrl:"components/staticPage/selectItem.html",controller:selectItemCtrl,controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(selectedFilterTag){resolve(selectedFilterTag)},function(){console.log("Modal dismissed at: "+new Date),reject()})})}function selectItemCtrl(Stat,$uibModalInstance,$q){var self=this;$q.when().then(function(){return Stat.getList({rows:100,page:0})}).then(function(stats){self.stats=stats}),self.cancel=function(){$uibModalInstance.dismiss("cancel")},self.ok=function(stat){$uibModalInstance.close(stat)}}var Items=$resource("/api/collections/Stat/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,save:Items.save,delete:Items.delete,query:Items.query,get:Items.get,create:create,selectItem:selectItem}}angular.module("gmall.services").service("Stat",statService),statService.$inject=["$resource","$uibModal","$q"]}(),function(){function gmallSliderDirective(){return{scope:{images:"=",index:"="},restrict:"E",bindToController:!0,controller:itemCtrl,controllerAs:"$ctrl",template:['<div  class="slider-fade">','<div class="mytoggle" ng-repeat="slide in $ctrl.images" ng-init="$first && $ctrl.finished()" ng-show="$ctrl.currentIndex==$index">','<a  href="{{slide.link}}">','<img class="img-responsive" ng-src="{{slide.img}}">','<div class="box-overlay"></div>',"<div>",'<h1 ng-bind="slide.name"></h1>','<p ng-bind-html="slide.desc|unsafe"></p>',"</div>","</a>","</div>",'<a ng-click="$ctrl.prev()" class="navleft-carousel">','<img src="img/icon/back.png">',"</a>",'<a ng-click="$ctrl.next()" class="navright-carousel">','<img src="img/icon/next.png">',"</a>",'<ol class="carousel-indicators">','<li ng-repeat="slide in $ctrl.images track by $index" ng-click="$ctrl.setSlide($index)" ng-class="{active:$ctrl.currentIndex==$index}">',"</li>","</ol>","</div>"].join("")}}function gmallSliderPageDirective($timeout,$rootScope,global){return{restrict:"A",replace:!1,link:function(scope,element,attr){function next(){$("#"+imgs[index]).css("opacity",0),index<innerDiv.length-1?index++:index=0,$("#"+imgs[index]).css("opacity",1);try{$(lastLink).attr("href",links[index])}catch(err){console.log(err)}}function setHeight(h){innerDiv.each(function(i,div){$(div).height(h)})}function sliderFunc(){timer=$timeout(function(){$timeout.cancel(timer),next(),sliderFunc()},timeSlide)}var index=0,timeSlide=4e3;global.get("mobile").val&&(timeSlide=3e3);var substrate,lastLink,innerDiv=element.find(".mytoggle-page"),imgs=[],links=[];innerDiv.each(function(i,div){imgs.push($(div).attr("id")),links.push($(div).find("a")),i||$(div).css("opacity",1)});try{lastLink=links[links.length-1],links=links.map(function(l){return l.attr("href")})}catch(err){console.log(err)}element.find(".substrate").each(function(i,div){i||(substrate=$(div),substrate.find("img").each(function(i,img){if(!i){var self=this;if(this.complete){var k=1e3+getRandomInt(100,2e3);$timeout(function(){sliderFunc()},k),setHeight($(self).height()),$timeout(function(){$(div).css("opacity",0)},50)}else $(this).bind("load",function(){var k=1e3+getRandomInt(100,2e3);$timeout(function(){sliderFunc()},k),setHeight($(self).height()),$timeout(function(){$(div).css("opacity",0)},50)})}}))});var timer;$(window).resize(function(){setHeight(element.height())})}}}function gmallSliderPageByHoverDirective($timeout,$rootScope,global){return{restrict:"A",replace:!1,link:function(scope,element,attr){function next(){$("#"+imgs[index]).css("opacity",0),index<innerDiv.length-1?index++:index=0,$("#"+imgs[index]).css("opacity",1);try{$(lastLink).attr("href",links[index])}catch(err){console.log(err)}}function setHeight(h){innerDiv.each(function(i,div){$(div).height(h)})}function sliderFunc(){timer=$timeout(function(){$timeout.cancel(timer),next(),sliderFunc()},1700)}function handlerIn(){next(),sliderFunc()}function handlerOut(){$timeout.cancel(timer)}var index=0;global.get("mobile").val;var substrate,lastLink,innerDiv=element.find(".mytoggle-page"),imgs=[],links=[];innerDiv.each(function(i,div){imgs.push($(div).attr("id")),links.push($(div).find("a")),i||$(div).css("opacity",1)});try{lastLink=links[links.length-1],links=links.map(function(l){return l.attr("href")})}catch(err){console.log(err)}element.find(".substrate").each(function(i,div){i||(substrate=$(div),substrate.find("img").each(function(i,img){if(!i){var self=this;if(this.complete){getRandomInt(100,2e3);setHeight($(self).height()),$timeout(function(){$(div).css("opacity",0)},50)}else $(this).bind("load",function(){getRandomInt(100,2e3);setHeight($(self).height()),$timeout(function(){$(div).css("opacity",0)},50)})}}))});var timer;$(window).resize(function(){setHeight(element.height())}),$(element).mouseenter(handlerIn).mouseleave(handlerOut)}}}function gmallSliderHomeDirective($timeout,$compile,global){return{restrict:"A",scope:!0,link:function(scope,element,attr){function setDivAgainstOverlapping(idx,oldIdx){$timeout(function(){$(innerDiv[idx]).insertAfter(innerDiv[oldIdx])},1600)}function next(){if(!slideDelay){slideDelay=!0,$timeout(function(){slideDelay=!1},700);var oldIdx=index;$("#"+slideMark[index]).removeClass("active"),$("#"+imgs[index]).css("opacity",0);index<innerDiv.length-1?index++:index=0,$("#"+imgs[index]).css("opacity",1),$("#"+slideMark[index]).addClass("active"),setDivAgainstOverlapping(index,oldIdx),$timeout(function(){},2500)}}function prev(){if(!slideDelay){var oldIdx=index;slideDelay=!0,$timeout(function(){slideDelay=!1},700),$("#"+slideMark[index]).removeClass("active"),$("#"+imgs[index]).css("opacity",0),0==index?index=innerDiv.length-1:index--,$("#"+imgs[index]).css("opacity",1),$("#"+slideMark[index]).addClass("active"),setDivAgainstOverlapping(index,oldIdx)}}function setSlide(i){var oldIdx=index;$timeout.cancel(timer),$("#"+slideMark[index]).removeClass("active"),$("#"+imgs[index]).css("opacity",0),index=i,$("#"+imgs[index]).css("opacity",1),$("#"+slideMark[index]).addClass("active"),setDivAgainstOverlapping(index,oldIdx)}function setHeight(h){innerDiv.each(function(){$(this).height(h)})}function sliderFunc(){timer=$timeout(function(){$timeout.cancel(timer),next(),sliderFunc()},timeSlide)}var timeSlide=4e3;global.get("mobile").val&&(timeSlide=3e3);var duration=attr.duration;if(duration)try{duration=Number(duration),duration>0&&duration<10&&(timeSlide=1e3*duration)}catch(err){
console.log(err)}var timer,substrate,index=(iii++,0),innerDiv=element.find(".mytoggle");element.find(".box-overlay");scope.foo={},scope.foo.setSlide=setSlide,scope.slideswipeLeft=function(){$timeout.cancel(timer),next()},scope.slideswipeRight=function(){$timeout.cancel(timer),prev()};var imgs=[],links=[];innerDiv.each(function(i,div){imgs.push($(div).attr("id")),links.push($(div).find("a")),i||$(div).css("opacity",1)});try{links[links.length-1],links.map(function(l){return l.attr("ng-click")}),links=links.map(function(l){return l.attr("href")})}catch(err){console.log(err)}$timeout(function(){element.find(".prev").each(function(i,a){$(a).click(function(e){$timeout.cancel(timer),prev()})}),element.find(".navright-carousel").each(function(i,a){$(a).click(function(e){$timeout.cancel(timer),next()})}),element.find(".carousel-box li").each(function(i,li){$(li).click(function(e){$timeout.cancel(timer),setSlide(i)})})},200);var slideMark=[];element.find(".set-slide").each(function(i,li){slideMark.push($(li).attr("id")),i||$(li).addClass("active")}),element.find(".substrate").each(function(i,div){substrate=$(div),substrate.find("img").each(function(){var self=this;this.complete?($(div).css("opacity",0),$timeout(function(){sliderFunc()},1e3*iii),$timeout(function(){setHeight($(self).height()),setDivAgainstOverlapping(0,imgs.length-1)},50)):$(this).bind("load",function(){$(div).css("opacity",0),$timeout(function(){sliderFunc()},500*iii),$timeout(function(){setHeight($(self).height()),setDivAgainstOverlapping(0,imgs.length-1)},50)})})});var slideDelay;scope.zoomSliderImg=function(i,images){global.get("functions").val.zoomImg(index,images)},$(window).resize(function(){setHeight(element.height())})}}}function gmallSliderHomeNivoDirective($timeout,global){return{restrict:"A",scope:!0,link:function(scope,element,attr){var options={};return attr.effect?options.effect=attr.effect:options.effect="fade",attr.pausetime&&(options.pauseTime=Number(attr.pausetime),!options.pauseTime||options.pauseTime<2||options.pauseTime>20?options.pauseTime=3e3:options.pauseTime=1e3*options.pauseTime),options.controlNavThumbs=!0,void $(window).on("load",function(){$(element).nivoSlider(options);var nextEl=$(element).find(".nivo-nextNav"),prevEl=$(element).find(".nivo-prevNav");$(element).bind("swipeleft",function(e){return console.log("left"),$(nextEl).trigger("click"),e.stopImmediatePropagation(),!1}),$(element).bind("swiperight",function(e){return console.log("swiperight"),$(prevEl).trigger("click"),e.stopImmediatePropagation(),!1})})}}}function itemCtrl($element,$timeout,$scope){function setHeight(){self.height=0,$element.find(".mytoggle img").each(function(){var h=$(this).height();h>self.height&&(self.height=h)}),self.height>h&&self.height>100&&(h=self.height,$($element[0]).find(".slider-fade").height(self.height))}var h=0,self=this;setTimeout(function(){setHeight()}),console.log($scope.images),self.currentIndex=0,self.prev=function(){0==self.currentIndex?self.currentIndex=self.images.length-1:self.currentIndex--,self.index=self.currentIndex},self.next=function(){self.currentIndex<self.images.length-1?self.currentIndex++:self.currentIndex=0,self.index=self.currentIndex},self.setSlide=function(i){self.currentIndex=i,self.index=self.currentIndex};var timer,sliderFunc=function(){timer=$timeout(function(){self.next(),timer=$timeout(sliderFunc,3e3)},3e3)};$timeout(function(){sliderFunc()},1e3),self.finished=function(){self.height=0,$($element.find(".mytoggle img")[0]).bind("load",function(){setHeight()})},$(window).resize(function(){h=0,setHeight()})}function getRandomInt(min,max){return Math.floor(Math.random()*(max-min+1))+min}angular.module("gmall.directives").directive("gmallSlider",gmallSliderDirective).directive("gmallSliderHome",gmallSliderHomeDirective).directive("gmallSliderHomeNivo",gmallSliderHomeNivoDirective).directive("gmallSliderPage",gmallSliderPageDirective).directive("gmallSliderPageByHover",gmallSliderPageByHoverDirective);var iii=0;itemCtrl.$inject=["$element","$timeout","$scope"]}(),$.fn.isOnScreen=function(){var win=$(window),viewport={top:win.scrollTop(),left:win.scrollLeft()};viewport.right=viewport.left+win.width(),viewport.bottom=viewport.top+win.height();var bounds=this.offset();if(bounds)return bounds.right=bounds.left+this.outerWidth(),bounds.bottom=bounds.top+this.outerHeight(),!(viewport.right<bounds.left||viewport.left>bounds.right||viewport.bottom<bounds.top||viewport.top>bounds.bottom)},angular.module("gmall.directives").directive("lastViewed",function($compile,$timeout,localStorage,Stuff,global){return{restrict:"EA",scope:{current:"=",header:"@",mobile:"@",blockElement:"@"},template:'<h3 class="text-center" ng-bind="header"></h3><div id="lastViewedWrapper" class="owl-carousel owl-theme"><div ng-repeat="s in stuffs track by $index" class="item"><a ui-sref="stuffs.stuff(s.linkData)"><img style="max-width: 200px; border-color: transparent" ng-src="{{s.img}}" ></a></div></div>',link:function(scope,element,attrs){function activate(){scope.position=JSON.parse(scope.blockElement).position,scope.mobile?scope.itemsInList=3:scope.position&&"bottom"==scope.position&&(scope.itemsInList=6),setViewed(angular.copy(scope.current)),viewedStuffs.length>2?(scope.stuffs=viewedStuffs,scope.stuffs.forEach(function(el){el.getUrlParams=Stuff.getUrlParams}),$timeout(function(){$("#lastViewedWrapper").owlCarousel({items:scope.itemsInList,itemsMobile:[479,3],itemsTablet:[768,scope.itemsInList],itemsDesktop:[1199,scope.itemsInList],itemsDesktopSmall:[979,scope.itemsInList]})},150)):scope.stuffs=[],scope.header||(scope.header="Последние просмотренные.")}function setViewed(stuff){for(var posItem=-1,i=0,l=viewedStuffs.length;i<l;i++)if(viewedStuffs[i]._id==stuff._id){posItem=i;break}if(posItem>-1&&viewedStuffs.splice(posItem,1),stuff.gallery[0])var img=stuff.gallery[0].thumbSmall?stuff.gallery[0].thumbSmall:stuff.gallery[0].thumb;else var img=null;var linkData=global.get("categories").val.getOFA("_id",stuff.category).linkData;linkData.stuffUrl=stuff.url,viewedStuffs.unshift({_id:stuff._id,linkData:linkData,url:stuff.url,img:img}),viewedStuffs.length>15&&viewedStuffs.splice(15,1),localStorage.set(subDomain+"-viewed",viewedStuffs)}var subDomain=global.get("store").val.subDomain;scope.localId=Date.now();var viewedStuffs=localStorage.get(subDomain+"-viewed");viewedStuffs||(viewedStuffs=[]),scope.itemsInList=4,scope.$watch("current",function(n){n&&activate()}),scope.$on("$destroy",function(){$("#carouse"+scope.localId).remove()})}}}).directive("fullImg",function($timeout){return{restrict:"A",scope:{index:"=fullImg",gallery:"="},link:function(scope,element,attrs,ngModel){function preventDefault(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1}function enableScroll(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",preventDefault,!1),window.onmousewheel=document.onmousewheel=null,window.onwheel=null,window.ontouchmove=null,document.onkeydown=null}var touchStart;element.bind("click",function(event){function changePhoto(){$imagePan_panningImg.attr("src",scope.gallery[scope.currentPhoto].img),console.log(1),setHeightWigth()}function setHeightWigth(){$timeout(function(){$outer_container=$("#outer_container"),$imagePan_panning=$("#imagePan .panning"),$imagePan=$("#imagePan"),$imagePan.css("overflow","auto"),$imagePan_container=$("#imagePan .containerImg"),$imagePan_panningImg=$("#imagePan img"),$imagePan_panningImg.width()<$imagePan.width()&&($imagePan.css("width",$imagePan_panningImg.width()),$outer_container.css("width",$imagePan_panningImg.width())),$imagePan_panningImg.height()<$imagePan.height()&&($imagePan.css("height",$imagePan_panningImg.height()),$outer_container.css("height",$imagePan_panningImg.height())),containerWidth=$imagePan.width(),containerHeight=$imagePan.height(),totalContentW=$imagePan_panning.width(),totalContentH=$imagePan_panning.height(),$imagePan_container.css("width",totalContentW).css("height",totalContentH),$imagePan.bind("mousemove",function(event){MouseMove(event)}),$imagePan.bind("touchmove",function(event){touchMove(event)}),$imagePan.bind("touchstart",function(event){touchStart=event.originalEvent.touches[0].clientY,console.log("start-",event.originalEvent.touches[0].clientY)}),$imagePan.bind("touchend",function(event){})},400)}function touchMove(e){var moveY,deltaY=touchStart-e.originalEvent.touches[0].clientY;console.log($imagePan_container.offset().top);var top=$imagePan.offset().top;top<0&&deltaY<0&&(moveY=top-deltaY<0?top-deltaY:0),console.log(deltaY,moveY);$imagePan.offset().left,$imagePan.offset().top;$imagePan_container.stop().animate({top:moveY})}function MouseMove(e){if(void 0==e.offsetX){$imagePan.offset().left,$imagePan.offset().top}else{$imagePan.offset().left,$imagePan.offset().top}var mouseCoordsX=e.pageX-$imagePan.offset().left,mouseCoordsY=e.pageY-$imagePan.offset().top,mousePercentX=mouseCoordsX/containerWidth,mousePercentY=mouseCoordsY/containerHeight,destX=-((totalContentW-containerWidth-containerWidth)*mousePercentX),destY=-((totalContentH-containerHeight-containerHeight)*mousePercentY),thePosA=mouseCoordsX-destX,thePosB=destX-mouseCoordsX,thePosC=mouseCoordsY-destY,thePosD=destY-mouseCoordsY,marginL=$imagePan_panning.css("marginLeft").replace("px",""),marginT=$imagePan_panning.css("marginTop").replace("px","");mouseCoordsX>destX||mouseCoordsY>destY?$imagePan_container.css("left",-thePosA-marginL).css("top",-thePosC-marginT):mouseCoordsX<destX||mouseCoordsY<destY?$imagePan_container.stop().animate({left:thePosB-marginL,top:thePosD-marginT},500,"easeOutCirc"):$imagePan_container.stop()}scope.currentPhoto=scope.index;var height=$(window).height(),width=$(window).width(),elem=angular.element('<div id="outer_container" style="max-height:'+height+"px; max-width:"+width+'px;margin:2px auto; padding:0px;"><div id="imagePan" style="max-height:'+height+"px; max-width:"+width+'px;position:relative; overflow:hidden; cursor:crosshair;"><div class="containerImg" style="position:relative; left:0;"><div><img src="'+scope.gallery[scope.currentPhoto].img+'" class="panning"></div></div></div></div>'),mainWrapper=angular.element('<div class="photo-container" style="width:'+width+"px;height:"+height+'px;"></div>');$(window).resize(function(){$imagePan.unbind("mousemove"),height=$(window).height(),width=$(window).width(),mainWrapper.css("width",width).css("height",height),setHeightWigth()}),mainWrapper.prepend(elem),$("body").prepend(mainWrapper);var next=angular.element('<div><img src="img/logo/navright.png" class="navright"></div>');next.bind("click",function(event){return scope.currentPhoto<scope.gallery.length-1?scope.currentPhoto++:scope.currentPhoto=0,changePhoto(),event.preventDefault(),!1});var prev=angular.element('<div><img src="img/logo/navleft.png" class="navleft"></div>');prev.bind("click",function(event){return scope.currentPhoto>0?scope.currentPhoto--:scope.currentPhoto=scope.gallery.length-1,changePhoto(),event.preventDefault(),!1}),mainWrapper.prepend(next),mainWrapper.prepend(prev),mainWrapper.bind("click",function(event){enableScroll(),mainWrapper.remove()});var containerWidth,containerHeight,totalContentW,totalContentH,$outer_container,$imagePan_panning,$imagePan,$imagePan_container,$imagePan_panningImg;setHeightWigth()}),scope.$on("$destroy",function(){})}}}).directive("displayNavbar",["$timeout",function($timeout){return{restrict:"A",link:function(scope,element,attr){function initFixBanner(){divFFHeight=$(divForFix).outerHeight(),posEl={},posEl.top=$(divForFix)&&$(divForFix).offset()&&$(divForFix).offset().top?$(divForFix).offset().top:0,posEl.left=$(divForFix)&&$(divForFix).offset()&&$(divForFix).offset().left?$(divForFix).offset().left:0,w=$(divForFix).width();var posEl2={};posEl2.top=posEl.top,posEl2.left=$(divForFix2).offset()?$(divForFix2).offset().left:0,w2=$(divForFix2).width();var posEl3={};posEl3.top=posEl.top,posEl3.left=$(divForFix3).offset()?$(divForFix3).offset().left:0,w3=$(divForFix3).width(),$(divForFix).css("position","fixed").width(w).offset(posEl),$(divForFix2).css("position","fixed").width(w2).offset(posEl2),$(divForFix3).css("position","fixed").width(w3).offset(posEl3),block_top=$(block).offset()?$(block).offset().top:0,hh=block_top+$(block).outerHeight(),distance=hh-posEl.top}function fixBanner(cont_top){var delta=(distance-cont_top)/distance,l=Math.round10(delta,-2);l>-.1&&(l<0&&(l=0,OpacityFixBanner=0,$(divForFix).css("display","none"),$(divForFix2).css("display","none"),$(divForFix3).css("display","none")),0!=l&&0===OpacityFixBanner&&(OpacityFixBanner=1,$(divForFix).css("display","block"),$(divForFix2).css("display","block"),$(divForFix3).css("display","block")),$(divForFix).css("opacity",l),$(divForFix2).css("opacity",l),$(divForFix3).css("opacity",l))}$("html, body").animate({scrollTop:0});var w=Math.max(document.documentElement.clientWidth,window.innerWidth||0);if(!(w<1220)){var block,h,divForFix,divForFix2,divForFix3,w,w2,w3,firstnavbar,block_top,hh,cont_top,posEl,divFFHeight,distance,OpacityFixBanner;$timeout(function(){firstnavbar=$("#firstnavbar"),h=firstnavbar.height(),block=$("#photovideoblock"),divForFix=$("#divforfix"),divForFix2=$("#divforfix2"),divForFix3=$("#divforfix3"),$timeout(function(){initFixBanner()},300)},300),OpacityFixBanner=1,$(document).scroll(function(){cont_top=window.pageYOffset?window.pageYOffset:document.body.scrollTop,fixBanner(cont_top)}),$(window).resize(function(){console.log("resize"),h=$("#firstnavbar").height(),$(divForFix).css("position","absolute").css("top","20%"),$(divForFix2).css("position","absolute").css("top","20%").css("left",0),$(divForFix3).css("position","absolute").css("top","20%").css("left",0),$timeout(function(){initFixBanner()},50)})}}}}]).directive("backStretch",["$timeout",function($timeout){return{restrict:"AC",link:function(scope,element,attr){if(attr.backStretch.indexOf("http")<0)var src=photoHost+"/"+attr.backStretch;else var src=attr.backStretch;var w=Math.max(document.documentElement.clientWidth,window.innerWidth||0),val="url("+src+") top right no-repeat fixed";$(element).css("background",val),w<400&&($(element).css("background-position","80% 70%"),$(element).css("background-size","400%"),$(element).css("height","650px"))}}}]).directive("slideMenuTwo",["$timeout",function($timeout){return{restrict:"AC",link:function(scope,element,attr){return}}}]).directive("halfSection",["$timeout",function($timeout){return{restrict:"AC",link:function(scope,element,attr){if(attr.backgroundImage){var src=photoHost+"/"+attr.backgroundImage;console.log(src);var val="url("+src+")";$(element).css("background-image",val)}}}}]).directive("audioMute",["$timeout",function($timeout){return{restrict:"A",link:function(scope,element,attr){"false"==attr.audioMute&&$(element).prop("muted",!0)}}}]).directive("centerMenu1",["$timeout",function($timeout){return{restrict:"C",link:function(scope,element,attr){$timeout(function(){element.css("margin-left",Math.round(element.parent().width()/2-element.width()/2))},50),$(window).resize(function(){element.css("margin-left",Math.round(element.parent().width()/2-element.width()/2))})}}}]).directive("contentLoaded",["$timeout","$rootScope","anchorSmoothScroll",function($timeout,$rootScope,anchorSmoothScroll){return{restrict:"AC",link:function(scope,element,attr){$rootScope.$on("$stateChangeStartToStuff",function(){$(element).fadeIn()}),$rootScope.$on("$stateChangeEndToStuff",function(){$(element).fadeOut()})}}}]).directive("setAnimate",["$timeout","global",function($timeout,global){return{restrict:"A",link:function(scope,element,attr){function doIt(){$(element).isOnScreen()?isOnScreen||!$animationRepeat&&!firstLook||(firstLook=!1,isOnScreen=!0,$(element).addClass($animationName)):isOnScreen&&$animationRepeat&&(isOnScreen=!1,$(element).removeClass($animationName))}var $animationName=attr.animation,$animationRepeat=attr.animationRepeat,$animationDelay=attr.animationDelay;$animationDelay?$animationName=$animationName+"-"+$animationDelay:$animationDelay=0;var firstLook=!0,isOnScreen=!1;$(element).isOnScreen()&&(isOnScreen=!0,$(element).addClass($animationName),$(element).css("visibility","visible")),$(window).scroll(doIt),scope.$on("openMenu",function(){$(element).hasClass($animationName)||$(element).addClass($animationName)}),scope.$on("closeMenu",function(){$(element).hasClass("pre-animate-opacity")||$(element).removeClass($animationName)}),scope.$on("$allImagesLoadedInHomePage1",function(){$(element).isOnScreen()&&!$(element).hasClass("animated")?($(element).addClass("animated").addClass($animationName),$(element).css("visibility","visible")):($(element).appear(),$(element).on("appear",function(event,$all_appeared_elements){console.log("!!!!!! setAnimate"),$(element).hasClass("animated")||($(element).addClass("animated").addClass($animationName),$(element).css("visibility","visible"))}))}),element.on("$destroy",function(){$(window).off("scroll",doIt)})}}}]).directive("scaleImg",["$timeout",function($timeout){return{restrict:"A",link:function(scope,element,attr){scope.hover=!1,$timeout(function(){$("#"+attr.divId).hover(function(){scope.onDiv=!0},function(){scope.onDiv=!1}),$(element).wrap('<div style="overflow:hidden"></div>')},10),$(element).hover(function(){console.log(),$(element).addClass("scaleImg")},function(){$timeout(function(){scope.onDiv||$(element).removeClass("scaleImg")})})}}}]).directive("parallaxBox",["$timeout",function($timeout){return{restrict:"AC",link:function(scope,elem,arrts){var win=(Math.max(document.documentElement.clientWidth,window.innerWidth||0),$(window)),el=$(elem);document.addEventListener("scroll",function(event){if(el.offset().top<win.scrollTop()){var difference=win.scrollTop()-el.offset().top,half=.5*difference+"px";el.css("top",half)}else el.css("top","0")}),$timeout(function(){$(elem).wrap('<div style="height:'+($(elem).height()+70)+'px;overflow:hidden"></div>'),$timeout(function(){$(elem).css("position","relative")},200)},500)}}}]).directive("fixAndHideWhenScroll",["$timeout",function($timeout){return{restrict:"A",link:function(scope,element,attr){return}}}]).directive("backImg",function(){return function(scope,element,attrs){var url=attrs.backImg;element.css({"background-image":"url("+url+")"})}}).directive("angParallax",["$window",function($window){return{restrict:"A",scope:{pCss:"@",pInitVal:"@",pRatio:"@"},link:function(iScope,iElem,iAttr){function _onScroll(){var resultVal,calcVal=$window.pageYOffset*pRatio+pInitVal;resultVal=isSpecialVal?cssValue+"("+calcVal+"px)":calcVal+"px",console.log(cssKey,resultVal),iElem.css(cssKey,resultVal)}console.log(iElem);var cssKey,cssValue,isSpecialVal,pCssVal,pRatio,pInitVal,cssValArray;pCssVal=iScope.pCss?iScope.pCss:"top",cssValArray=pCssVal.split(":"),cssKey=cssValArray[0],cssValue=cssValArray[1],isSpecialVal=!!cssValue,cssValue||(cssValue=cssKey),pRatio=iScope.pRatio?+iScope.pRatio:1.1,pInitVal=iScope.pInitVal?+iScope.pInitVal:0,iElem.css(cssKey,pInitVal+"px"),$window.addEventListener("scroll",_onScroll),angular.element($window).bind("scroll",function(){console.log("scroll")}),$(window).bind("scroll",function(){console.log("scroll")}),$(document).scroll(function(){console.log("scroll")}),document.addEventListener("scroll",function(event){console.log("scroll");var resultVal,calcVal=$window.pageYOffset*pRatio+pInitVal;resultVal=isSpecialVal?cssValue+"("+calcVal+"px)":calcVal+"px",console.log(cssKey,resultVal),iElem.css(cssKey,resultVal)},!0)}}}]),!function(a){function b(a){var b=a.length,d=c.type(a);return"function"!==d&&!c.isWindow(a)&&(!(1!==a.nodeType||!b)||("array"===d||0===b||"number"==typeof b&&b>0&&b-1 in a))}if(!a.jQuery){var c=function(a,b){return new c.fn.init(a,b)};c.isWindow=function(a){return null!=a&&a==a.window},c.type=function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?e[g.call(a)]||"object":typeof a},c.isArray=Array.isArray||function(a){return"array"===c.type(a)},c.isPlainObject=function(a){var b;if(!a||"object"!==c.type(a)||a.nodeType||c.isWindow(a))return!1;try{if(a.constructor&&!f.call(a,"constructor")&&!f.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(d){return!1}for(b in a);return void 0===b||f.call(a,b)},c.each=function(a,c,d){var f=0,g=a.length,h=b(a);if(d){if(h)for(;g>f&&c.apply(a[f],d)!==!1;f++);else for(f in a)if(c.apply(a[f],d)===!1)break}else if(h)for(;g>f&&c.call(a[f],f,a[f])!==!1;f++);else for(f in a)if(c.call(a[f],f,a[f])===!1)break;return a},c.data=function(a,b,e){if(void 0===e){var f=a[c.expando],g=f&&d[f];if(void 0===b)return g;if(g&&b in g)return g[b]}else if(void 0!==b){var f=a[c.expando]||(a[c.expando]=++c.uuid);return d[f]=d[f]||{},d[f][b]=e,e}},c.removeData=function(a,b){var e=a[c.expando],f=e&&d[e];f&&c.each(b,function(a,b){delete f[b]})},c.extend=function(){var a,b,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[i]||{},i++),"object"!=typeof h&&"function"!==c.type(h)&&(h={}),i===j&&(h=this,i--);j>i;i++)if(null!=(f=arguments[i]))for(e in f)a=h[e],d=f[e],h!==d&&(k&&d&&(c.isPlainObject(d)||(b=c.isArray(d)))?(b?(b=!1,g=a&&c.isArray(a)?a:[]):g=a&&c.isPlainObject(a)?a:{},h[e]=c.extend(k,g,d)):void 0!==d&&(h[e]=d));return h},c.queue=function(a,d,e){if(a){d=(d||"fx")+"queue";var g=c.data(a,d);return e?(!g||c.isArray(e)?g=c.data(a,d,function(a,c){var d=c||[];return null!=a&&(b(Object(a))?function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;)a[e++]=b[d++];if(c!==c)for(;void 0!==b[d];)a[e++]=b[d++];a.length=e,a}(d,"string"==typeof a?[a]:a):[].push.call(d,a)),d}(e)):g.push(e),g):g||[]}},c.dequeue=function(a,b){c.each(a.nodeType?[a]:a,function(a,d){b=b||"fx";var e=c.queue(d,b),f=e.shift();"inprogress"===f&&(f=e.shift()),f&&("fx"===b&&e.unshift("inprogress"),f.call(d,function(){c.dequeue(d,b)}))})},c.fn=c.prototype={init:function(a){if(a.nodeType)return this[0]=a,this;throw new Error("Not a DOM node.")},offset:function(){var b=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:b.top+(a.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:b.left+(a.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function a(){for(var a=this.offsetParent||document;a&&"html"===!a.nodeType.toLowerCase&&"static"===a.style.position;)a=a.offsetParent;return a||document}var b=this[0],a=a.apply(b),d=this.offset(),e=/^(?:body|html)$/i.test(a.nodeName)?{top:0,left:0}:c(a).offset();return d.top-=parseFloat(b.style.marginTop)||0,d.left-=parseFloat(b.style.marginLeft)||0,a.style&&(e.top+=parseFloat(a.style.borderTopWidth)||0,e.left+=parseFloat(a.style.borderLeftWidth)||0),{top:d.top-e.top,left:d.left-e.left}}};var d={};c.expando="velocity"+(new Date).getTime(),c.uuid=0;for(var e={},f=e.hasOwnProperty,g=e.toString,h="Boolean Number String Function Array Date RegExp Object Error".split(" "),i=0;i<h.length;i++)e["[object "+h[i]+"]"]=h[i].toLowerCase();c.fn.init.prototype=c.fn,a.Velocity={Utilities:c}}}(window),function(a){"object"==typeof module&&"object"==typeof module.exports?module.exports=a():"function"==typeof define&&define.amd?define(a):a()}(function(){return function(a,b,c,d){function e(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function f(a){return p.isWrapped(a)?a=[].slice.call(a):p.isNode(a)&&(a=[a]),a}function g(a){var b=m.data(a,"velocity");return null===b?d:b}function h(a){return function(b){return Math.round(b*a)*(1/a)}}function i(a,c,d,e){function f(a,b){return 1-3*b+3*a}function g(a,b){return 3*b-6*a}function h(a){return 3*a}function i(a,b,c){return((f(b,c)*a+g(b,c))*a+h(b))*a}function j(a,b,c){return 3*f(b,c)*a*a+2*g(b,c)*a+h(b)}function k(b,c){for(var e=0;p>e;++e){var f=j(c,a,d);if(0===f)return c;c-=(i(c,a,d)-b)/f}return c}function l(){for(var b=0;t>b;++b)x[b]=i(b*u,a,d)}function m(b,c,e){var f,g,h=0;do{g=c+(e-c)/2,f=i(g,a,d)-b,f>0?e=g:c=g}while(Math.abs(f)>r&&++h<s);return g}function n(b){for(var c=0,e=1,f=t-1;e!=f&&x[e]<=b;++e)c+=u;--e;var g=(b-x[e])/(x[e+1]-x[e]),h=c+g*u,i=j(h,a,d);return i>=q?k(b,h):0==i?h:m(b,c,c+u)}function o(){y=!0,(a!=c||d!=e)&&l()}var p=4,q=.001,r=1e-7,s=10,t=11,u=1/(t-1),v="Float32Array"in b;if(4!==arguments.length)return!1;for(var w=0;4>w;++w)if("number"!=typeof arguments[w]||isNaN(arguments[w])||!isFinite(arguments[w]))return!1;a=Math.min(a,1),d=Math.min(d,1),a=Math.max(a,0),d=Math.max(d,0);var x=v?new Float32Array(t):new Array(t),y=!1,z=function(b){return y||o(),a===c&&d===e?b:0===b?0:1===b?1:i(n(b),c,e)};z.getControlPoints=function(){return[{x:a,y:c},{x:d,y:e}]};var A="generateBezier("+[a,c,d,e]+")";return z.toString=function(){return A},z}function j(a,b){var c=a;return p.isString(a)?t.Easings[a]||(c=!1):c=p.isArray(a)&&1===a.length?h.apply(null,a):p.isArray(a)&&2===a.length?u.apply(null,a.concat([b])):!(!p.isArray(a)||4!==a.length)&&i.apply(null,a),c===!1&&(c=t.Easings[t.defaults.easing]?t.defaults.easing:s),c}function k(a){if(a){var b=(new Date).getTime(),c=t.State.calls.length;c>1e4&&(t.State.calls=e(t.State.calls));for(var f=0;c>f;f++)if(t.State.calls[f]){var h=t.State.calls[f],i=h[0],j=h[2],n=h[3],o=!!n,q=null;n||(n=t.State.calls[f][3]=b-16);for(var r=Math.min((b-n)/j.duration,1),s=0,u=i.length;u>s;s++){var w=i[s],y=w.element;if(g(y)){var z=!1;if(j.display!==d&&null!==j.display&&"none"!==j.display){if("flex"===j.display){var A=["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"];m.each(A,function(a,b){v.setPropertyValue(y,"display",b)})}v.setPropertyValue(y,"display",j.display)}j.visibility!==d&&"hidden"!==j.visibility&&v.setPropertyValue(y,"visibility",j.visibility);for(var B in w)if("element"!==B){var C,D=w[B],E=p.isString(D.easing)?t.Easings[D.easing]:D.easing;if(1===r)C=D.endValue;else{var F=D.endValue-D.startValue;if(C=D.startValue+F*E(r,j,F),!o&&C===D.currentValue)continue}if(D.currentValue=C,"tween"===B)q=C;else{if(v.Hooks.registered[B]){var G=v.Hooks.getRoot(B),H=g(y).rootPropertyValueCache[G];H&&(D.rootPropertyValue=H)}var I=v.setPropertyValue(y,B,D.currentValue+(0===parseFloat(C)?"":D.unitType),D.rootPropertyValue,D.scrollData);v.Hooks.registered[B]&&(g(y).rootPropertyValueCache[G]=v.Normalizations.registered[G]?v.Normalizations.registered[G]("extract",null,I[1]):I[1]),"transform"===I[0]&&(z=!0)}}j.mobileHA&&g(y).transformCache.translate3d===d&&(g(y).transformCache.translate3d="(0px, 0px, 0px)",z=!0),z&&v.flushTransformCache(y)}}j.display!==d&&"none"!==j.display&&(t.State.calls[f][2].display=!1),j.visibility!==d&&"hidden"!==j.visibility&&(t.State.calls[f][2].visibility=!1),j.progress&&j.progress.call(h[1],h[1],r,Math.max(0,n+j.duration-b),n,q),1===r&&l(f)}}t.State.isTicking&&x(k)}function l(a,b){if(!t.State.calls[a])return!1;for(var c=t.State.calls[a][0],e=t.State.calls[a][1],f=t.State.calls[a][2],h=t.State.calls[a][4],i=!1,j=0,k=c.length;k>j;j++){var l=c[j].element;if(b||f.loop||("none"===f.display&&v.setPropertyValue(l,"display",f.display),"hidden"===f.visibility&&v.setPropertyValue(l,"visibility",f.visibility)),f.loop!==!0&&(m.queue(l)[1]===d||!/\.velocityQueueEntryFlag/i.test(m.queue(l)[1]))&&g(l)){g(l).isAnimating=!1,g(l).rootPropertyValueCache={};var n=!1;m.each(v.Lists.transforms3D,function(a,b){var c=/^scale/.test(b)?1:0,e=g(l).transformCache[b];g(l).transformCache[b]!==d&&new RegExp("^\\("+c+"[^.]").test(e)&&(n=!0,delete g(l).transformCache[b])}),f.mobileHA&&(n=!0,delete g(l).transformCache.translate3d),n&&v.flushTransformCache(l),v.Values.removeClass(l,"velocity-animating")}if(!b&&f.complete&&!f.loop&&j===k-1)try{f.complete.call(e,e)}catch(o){setTimeout(function(){throw o},1)}h&&f.loop!==!0&&h(e),g(l)&&f.loop===!0&&!b&&(m.each(g(l).tweensContainer,function(a,b){/^rotate/.test(a)&&360===parseFloat(b.endValue)&&(b.endValue=0,b.startValue=360),/^backgroundPosition/.test(a)&&100===parseFloat(b.endValue)&&"%"===b.unitType&&(b.endValue=0,b.startValue=100)}),t(l,"reverse",{loop:!0,delay:f.delay})),f.queue!==!1&&m.dequeue(l,f.queue)}t.State.calls[a]=!1;for(var p=0,q=t.State.calls.length;q>p;p++)if(t.State.calls[p]!==!1){i=!0;break}i===!1&&(t.State.isTicking=!1,delete t.State.calls,t.State.calls=[])}var m,n=function(){if(c.documentMode)return c.documentMode;for(var a=7;a>4;a--){var b=c.createElement("div");if(b.innerHTML="<!--[if IE "+a+"]><span></span><![endif]-->",b.getElementsByTagName("span").length)return b=null,a}return d}(),o=function(){var a=0;return b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||function(b){var c,d=(new Date).getTime();return c=Math.max(0,16-(d-a)),a=d+c,setTimeout(function(){b(d+c)},c)}}(),p={isString:function(a){return"string"==typeof a},isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)},isNode:function(a){return a&&a.nodeType},isNodeList:function(a){return"object"==typeof a&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(a))&&a.length!==d&&(0===a.length||"object"==typeof a[0]&&a[0].nodeType>0)},isWrapped:function(a){return a&&(a.jquery||b.Zepto&&b.Zepto.zepto.isZ(a))},isSVG:function(a){return b.SVGElement&&a instanceof b.SVGElement},isEmptyObject:function(a){for(var b in a)return!1;return!0}},q=!1;if(a.fn&&a.fn.jquery?(m=a,q=!0):m=b.Velocity.Utilities,8>=n&&!q)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(7>=n)return void(jQuery.fn.velocity=jQuery.fn.animate);var r=400,s="swing",t={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:b.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:c.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:m,Redirects:{},Easings:{},Promise:b.Promise,defaults:{queue:"",duration:r,easing:s,begin:d,complete:d,progress:d,display:d,visibility:d,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(a){m.data(a,"velocity",{isSVG:p.isSVG(a),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:2,patch:2},debug:!1};b.pageYOffset!==d?(t.State.scrollAnchor=b,t.State.scrollPropertyLeft="pageXOffset",t.State.scrollPropertyTop="pageYOffset"):(t.State.scrollAnchor=c.documentElement||c.body.parentNode||c.body,t.State.scrollPropertyLeft="scrollLeft",t.State.scrollPropertyTop="scrollTop");var u=function(){function a(a){return-a.tension*a.x-a.friction*a.v}function b(b,c,d){var e={x:b.x+d.dx*c,v:b.v+d.dv*c,tension:b.tension,friction:b.friction};return{dx:e.v,dv:a(e)}}function c(c,d){var e={dx:c.v,dv:a(c)},f=b(c,.5*d,e),g=b(c,.5*d,f),h=b(c,d,g),i=1/6*(e.dx+2*(f.dx+g.dx)+h.dx),j=1/6*(e.dv+2*(f.dv+g.dv)+h.dv);return c.x=c.x+i*d,c.v=c.v+j*d,c}return function d(a,b,e){var f,g,h,i={x:-1,v:0,tension:null,friction:null},j=[0],k=0;for(a=parseFloat(a)||500,b=parseFloat(b)||20,e=e||null,i.tension=a,i.friction=b,f=null!==e,f?(k=d(a,b),g=k/e*.016):g=.016;h=c(h||i,g),j.push(1+h.x),k+=16,Math.abs(h.x)>1e-4&&Math.abs(h.v)>1e-4;);return f?function(a){return j[a*(j.length-1)|0]}:k}}();t.Easings={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},spring:function(a){return 1-Math.cos(4.5*a*Math.PI)*Math.exp(6*-a)}},
m.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(a,b){t.Easings[b[0]]=i.apply(null,b[1])});var v=t.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var a=0;a<v.Lists.colors.length;a++){var b="color"===v.Lists.colors[a]?"0 0 0 1":"255 255 255 1";v.Hooks.templates[v.Lists.colors[a]]=["Red Green Blue Alpha",b]}var c,d,e;if(n)for(c in v.Hooks.templates){d=v.Hooks.templates[c],e=d[0].split(" ");var f=d[1].match(v.RegEx.valueSplit);"Color"===e[0]&&(e.push(e.shift()),f.push(f.shift()),v.Hooks.templates[c]=[e.join(" "),f.join(" ")])}for(c in v.Hooks.templates){d=v.Hooks.templates[c],e=d[0].split(" ");for(var a in e){var g=c+e[a],h=a;v.Hooks.registered[g]=[c,h]}}},getRoot:function(a){var b=v.Hooks.registered[a];return b?b[0]:a},cleanRootPropertyValue:function(a,b){return v.RegEx.valueUnwrap.test(b)&&(b=b.match(v.RegEx.valueUnwrap)[1]),v.Values.isCSSNullValue(b)&&(b=v.Hooks.templates[a][1]),b},extractValue:function(a,b){var c=v.Hooks.registered[a];if(c){var d=c[0],e=c[1];return b=v.Hooks.cleanRootPropertyValue(d,b),b.toString().match(v.RegEx.valueSplit)[e]}return b},injectValue:function(a,b,c){var d=v.Hooks.registered[a];if(d){var e,g=d[0],h=d[1];return c=v.Hooks.cleanRootPropertyValue(g,c),e=c.toString().match(v.RegEx.valueSplit),e[h]=b,e.join(" ")}return c}},Normalizations:{registered:{clip:function(a,b,c){switch(a){case"name":return"clip";case"extract":var d;return v.RegEx.wrappedValueAlreadyExtracted.test(c)?d=c:(d=c.toString().match(v.RegEx.valueUnwrap),d=d?d[1].replace(/,(\s+)?/g," "):c),d;case"inject":return"rect("+c+")"}},blur:function(a,b,c){switch(a){case"name":return t.State.isFirefox?"filter":"-webkit-filter";case"extract":var d=parseFloat(c);if(!d&&0!==d){var e=c.toString().match(/blur\(([0-9]+[A-z]+)\)/i);d=e?e[1]:0}return d;case"inject":return parseFloat(c)?"blur("+c+")":"none"}},opacity:function(a,b,c){if(8>=n)switch(a){case"name":return"filter";case"extract":var d=c.toString().match(/alpha\(opacity=(.*)\)/i);return c=d?d[1]/100:1;case"inject":return b.style.zoom=1,parseFloat(c)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(c),10)+")"}else switch(a){case"name":return"opacity";case"extract":return c;case"inject":return c}}},register:function(){9>=n||t.State.isGingerbread||(v.Lists.transformsBase=v.Lists.transformsBase.concat(v.Lists.transforms3D));for(var a=0;a<v.Lists.transformsBase.length;a++)!function(){var b=v.Lists.transformsBase[a];v.Normalizations.registered[b]=function(a,c,e){switch(a){case"name":return"transform";case"extract":return g(c)===d||g(c).transformCache[b]===d?/^scale/i.test(b)?1:0:g(c).transformCache[b].replace(/[()]/g,"");case"inject":var f=!1;switch(b.substr(0,b.length-1)){case"translate":f=!/(%|px|em|rem|vw|vh|\d)$/i.test(e);break;case"scal":case"scale":t.State.isAndroid&&g(c).transformCache[b]===d&&1>e&&(e=1),f=!/(\d)$/i.test(e);break;case"skew":f=!/(deg|\d)$/i.test(e);break;case"rotate":f=!/(deg|\d)$/i.test(e)}return f||(g(c).transformCache[b]="("+e+")"),g(c).transformCache[b]}}}();for(var a=0;a<v.Lists.colors.length;a++)!function(){var b=v.Lists.colors[a];v.Normalizations.registered[b]=function(a,c,e){switch(a){case"name":return b;case"extract":var f;if(v.RegEx.wrappedValueAlreadyExtracted.test(e))f=e;else{var g,h={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(e)?g=h[e]!==d?h[e]:h.black:v.RegEx.isHex.test(e)?g="rgb("+v.Values.hexToRgb(e).join(" ")+")":/^rgba?\(/i.test(e)||(g=h.black),f=(g||e).toString().match(v.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return 8>=n||3!==f.split(" ").length||(f+=" 1"),f;case"inject":return 8>=n?4===e.split(" ").length&&(e=e.split(/\s+/).slice(0,3).join(" ")):3===e.split(" ").length&&(e+=" 1"),(8>=n?"rgb":"rgba")+"("+e.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(a){return a.replace(/-(\w)/g,function(a,b){return b.toUpperCase()})},SVGAttribute:function(a){var b="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(n||t.State.isAndroid&&!t.State.isChrome)&&(b+="|transform"),new RegExp("^("+b+")$","i").test(a)},prefixCheck:function(a){if(t.State.prefixMatches[a])return[t.State.prefixMatches[a],!0];for(var b=["","Webkit","Moz","ms","O"],c=0,d=b.length;d>c;c++){var e;if(e=0===c?a:b[c]+a.replace(/^\w/,function(a){return a.toUpperCase()}),p.isString(t.State.prefixElement.style[e]))return t.State.prefixMatches[a]=e,[e,!0]}return[a,!1]}},Values:{hexToRgb:function(a){var b,d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;return a=a.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,b,c,d){return b+b+c+c+d+d}),b=d.exec(a),b?[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16)]:[0,0,0]},isCSSNullValue:function(a){return 0==a||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(a)},getUnitType:function(a){return/^(rotate|skew)/i.test(a)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(a)?"":"px"},getDisplayType:function(a){var b=a&&a.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(b)?"inline":/^(li)$/i.test(b)?"list-item":/^(tr)$/i.test(b)?"table-row":/^(table)$/i.test(b)?"table":/^(tbody)$/i.test(b)?"table-row-group":"block"},addClass:function(a,b){a.classList?a.classList.add(b):a.className+=(a.className.length?" ":"")+b},removeClass:function(a,b){a.classList?a.classList.remove(b):a.className=a.className.toString().replace(new RegExp("(^|\\s)"+b.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(a,c,e,f){function h(a,c){function e(){j&&v.setPropertyValue(a,"display","none")}var i=0;if(8>=n)i=m.css(a,c);else{var j=!1;if(/^(width|height)$/.test(c)&&0===v.getPropertyValue(a,"display")&&(j=!0,v.setPropertyValue(a,"display",v.Values.getDisplayType(a))),!f){if("height"===c&&"border-box"!==v.getPropertyValue(a,"boxSizing").toString().toLowerCase()){var k=a.offsetHeight-(parseFloat(v.getPropertyValue(a,"borderTopWidth"))||0)-(parseFloat(v.getPropertyValue(a,"borderBottomWidth"))||0)-(parseFloat(v.getPropertyValue(a,"paddingTop"))||0)-(parseFloat(v.getPropertyValue(a,"paddingBottom"))||0);return e(),k}if("width"===c&&"border-box"!==v.getPropertyValue(a,"boxSizing").toString().toLowerCase()){var l=a.offsetWidth-(parseFloat(v.getPropertyValue(a,"borderLeftWidth"))||0)-(parseFloat(v.getPropertyValue(a,"borderRightWidth"))||0)-(parseFloat(v.getPropertyValue(a,"paddingLeft"))||0)-(parseFloat(v.getPropertyValue(a,"paddingRight"))||0);return e(),l}}var o;o=g(a)===d?b.getComputedStyle(a,null):g(a).computedStyle?g(a).computedStyle:g(a).computedStyle=b.getComputedStyle(a,null),"borderColor"===c&&(c="borderTopColor"),i=9===n&&"filter"===c?o.getPropertyValue(c):o[c],(""===i||null===i)&&(i=a.style[c]),e()}if("auto"===i&&/^(top|right|bottom|left)$/i.test(c)){var p=h(a,"position");("fixed"===p||"absolute"===p&&/top|left/i.test(c))&&(i=m(a).position()[c]+"px")}return i}var i;if(v.Hooks.registered[c]){var j=c,k=v.Hooks.getRoot(j);e===d&&(e=v.getPropertyValue(a,v.Names.prefixCheck(k)[0])),v.Normalizations.registered[k]&&(e=v.Normalizations.registered[k]("extract",a,e)),i=v.Hooks.extractValue(j,e)}else if(v.Normalizations.registered[c]){var l,o;l=v.Normalizations.registered[c]("name",a),"transform"!==l&&(o=h(a,v.Names.prefixCheck(l)[0]),v.Values.isCSSNullValue(o)&&v.Hooks.templates[c]&&(o=v.Hooks.templates[c][1])),i=v.Normalizations.registered[c]("extract",a,o)}if(!/^[\d-]/.test(i))if(g(a)&&g(a).isSVG&&v.Names.SVGAttribute(c))if(/^(height|width)$/i.test(c))try{i=a.getBBox()[c]}catch(p){i=0}else i=a.getAttribute(c);else i=h(a,v.Names.prefixCheck(c)[0]);return v.Values.isCSSNullValue(i)&&(i=0),t.debug>=2&&console.log("Get "+c+": "+i),i},setPropertyValue:function(a,c,d,e,f){var h=c;if("scroll"===c)f.container?f.container["scroll"+f.direction]=d:"Left"===f.direction?b.scrollTo(d,f.alternateValue):b.scrollTo(f.alternateValue,d);else if(v.Normalizations.registered[c]&&"transform"===v.Normalizations.registered[c]("name",a))v.Normalizations.registered[c]("inject",a,d),h="transform",d=g(a).transformCache[c];else{if(v.Hooks.registered[c]){var i=c,j=v.Hooks.getRoot(c);e=e||v.getPropertyValue(a,j),d=v.Hooks.injectValue(i,d,e),c=j}if(v.Normalizations.registered[c]&&(d=v.Normalizations.registered[c]("inject",a,d),c=v.Normalizations.registered[c]("name",a)),h=v.Names.prefixCheck(c)[0],8>=n)try{a.style[h]=d}catch(k){t.debug&&console.log("Browser does not support ["+d+"] for ["+h+"]")}else g(a)&&g(a).isSVG&&v.Names.SVGAttribute(c)?a.setAttribute(c,d):a.style[h]=d;t.debug>=2&&console.log("Set "+c+" ("+h+"): "+d)}return[h,d]},flushTransformCache:function(a){function b(b){return parseFloat(v.getPropertyValue(a,b))}var c="";if((n||t.State.isAndroid&&!t.State.isChrome)&&g(a).isSVG){var d={translate:[b("translateX"),b("translateY")],skewX:[b("skewX")],skewY:[b("skewY")],scale:1!==b("scale")?[b("scale"),b("scale")]:[b("scaleX"),b("scaleY")],rotate:[b("rotateZ"),0,0]};m.each(g(a).transformCache,function(a){/^translate/i.test(a)?a="translate":/^scale/i.test(a)?a="scale":/^rotate/i.test(a)&&(a="rotate"),d[a]&&(c+=a+"("+d[a].join(" ")+") ",delete d[a])})}else{var e,f;m.each(g(a).transformCache,function(b){return e=g(a).transformCache[b],"transformPerspective"===b?(f=e,!0):(9===n&&"rotateZ"===b&&(b="rotate"),void(c+=b+e+" "))}),f&&(c="perspective"+f+" "+c)}v.setPropertyValue(a,"transform",c)}};v.Hooks.register(),v.Normalizations.register(),t.hook=function(a,b,c){var e=d;return a=f(a),m.each(a,function(a,f){if(g(f)===d&&t.init(f),c===d)e===d&&(e=t.CSS.getPropertyValue(f,b));else{var h=t.CSS.setPropertyValue(f,b,c);"transform"===h[0]&&t.CSS.flushTransformCache(f),e=h}}),e};var w=function(){function a(){return h?B.promise||null:i}function e(){function a(){function a(a,b){var c=d,e=d,g=d;return p.isArray(a)?(c=a[0],!p.isArray(a[1])&&/^[\d-]/.test(a[1])||p.isFunction(a[1])||v.RegEx.isHex.test(a[1])?g=a[1]:(p.isString(a[1])&&!v.RegEx.isHex.test(a[1])||p.isArray(a[1]))&&(e=b?a[1]:j(a[1],h.duration),a[2]!==d&&(g=a[2]))):c=a,b||(e=e||h.easing),p.isFunction(c)&&(c=c.call(f,y,x)),p.isFunction(g)&&(g=g.call(f,y,x)),[c||0,e,g]}function l(a,b){var c,d;return d=(b||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(a){return c=a,""}),c||(c=v.Values.getUnitType(a)),[d,c]}if(h.begin&&0===y)try{h.begin.call(o,o)}catch(r){setTimeout(function(){throw r},1)}if("scroll"===C){var u,w,z,A=/^x$/i.test(h.axis)?"Left":"Top",D=parseFloat(h.offset)||0;h.container?p.isWrapped(h.container)||p.isNode(h.container)?(h.container=h.container[0]||h.container,u=h.container["scroll"+A],z=u+m(f).position()[A.toLowerCase()]+D):h.container=null:(u=t.State.scrollAnchor[t.State["scrollProperty"+A]],w=t.State.scrollAnchor[t.State["scrollProperty"+("Left"===A?"Top":"Left")]],z=m(f).offset()[A.toLowerCase()]+D),i={scroll:{rootPropertyValue:!1,startValue:u,currentValue:u,endValue:z,unitType:"",easing:h.easing,scrollData:{container:h.container,direction:A,alternateValue:w}},element:f},t.debug&&console.log("tweensContainer (scroll): ",i.scroll,f)}else if("reverse"===C){if(!g(f).tweensContainer)return void m.dequeue(f,h.queue);"none"===g(f).opts.display&&(g(f).opts.display="auto"),"hidden"===g(f).opts.visibility&&(g(f).opts.visibility="visible"),g(f).opts.loop=!1,g(f).opts.begin=null,g(f).opts.complete=null,s.easing||delete h.easing,s.duration||delete h.duration,h=m.extend({},g(f).opts,h);var E=m.extend(!0,{},g(f).tweensContainer);for(var F in E)if("element"!==F){var G=E[F].startValue;E[F].startValue=E[F].currentValue=E[F].endValue,E[F].endValue=G,p.isEmptyObject(s)||(E[F].easing=h.easing),t.debug&&console.log("reverse tweensContainer ("+F+"): "+JSON.stringify(E[F]),f)}i=E}else if("start"===C){var E;g(f).tweensContainer&&g(f).isAnimating===!0&&(E=g(f).tweensContainer),m.each(q,function(b,c){if(RegExp("^"+v.Lists.colors.join("$|^")+"$").test(b)){var e=a(c,!0),f=e[0],g=e[1],h=e[2];if(v.RegEx.isHex.test(f)){for(var i=["Red","Green","Blue"],j=v.Values.hexToRgb(f),k=h?v.Values.hexToRgb(h):d,l=0;l<i.length;l++){var m=[j[l]];g&&m.push(g),k!==d&&m.push(k[l]),q[b+i[l]]=m}delete q[b]}}});for(var H in q){var K=a(q[H]),L=K[0],M=K[1],N=K[2];H=v.Names.camelCase(H);var O=v.Hooks.getRoot(H),P=!1;if(g(f).isSVG||"tween"===O||v.Names.prefixCheck(O)[1]!==!1||v.Normalizations.registered[O]!==d){(h.display!==d&&null!==h.display&&"none"!==h.display||h.visibility!==d&&"hidden"!==h.visibility)&&/opacity|filter/.test(H)&&!N&&0!==L&&(N=0),h._cacheValues&&E&&E[H]?(N===d&&(N=E[H].endValue+E[H].unitType),P=g(f).rootPropertyValueCache[O]):v.Hooks.registered[H]?N===d?(P=v.getPropertyValue(f,O),N=v.getPropertyValue(f,H,P)):P=v.Hooks.templates[O][1]:N===d&&(N=v.getPropertyValue(f,H));var Q,R,S,T=!1;if(Q=l(H,N),N=Q[0],S=Q[1],Q=l(H,L),L=Q[0].replace(/^([+-\/*])=/,function(a,b){return T=b,""}),R=Q[1],N=parseFloat(N)||0,L=parseFloat(L)||0,"%"===R&&(/^(fontSize|lineHeight)$/.test(H)?(L/=100,R="em"):/^scale/.test(H)?(L/=100,R=""):/(Red|Green|Blue)$/i.test(H)&&(L=L/100*255,R="")),/[\/*]/.test(T))R=S;else if(S!==R&&0!==N)if(0===L)R=S;else{e=e||function(){var a={myParent:f.parentNode||c.body,position:v.getPropertyValue(f,"position"),fontSize:v.getPropertyValue(f,"fontSize")},d=a.position===I.lastPosition&&a.myParent===I.lastParent,e=a.fontSize===I.lastFontSize;I.lastParent=a.myParent,I.lastPosition=a.position,I.lastFontSize=a.fontSize;var h=100,i={};if(e&&d)i.emToPx=I.lastEmToPx,i.percentToPxWidth=I.lastPercentToPxWidth,i.percentToPxHeight=I.lastPercentToPxHeight;else{var j=g(f).isSVG?c.createElementNS("http://www.w3.org/2000/svg","rect"):c.createElement("div");t.init(j),a.myParent.appendChild(j),m.each(["overflow","overflowX","overflowY"],function(a,b){t.CSS.setPropertyValue(j,b,"hidden")}),t.CSS.setPropertyValue(j,"position",a.position),t.CSS.setPropertyValue(j,"fontSize",a.fontSize),t.CSS.setPropertyValue(j,"boxSizing","content-box"),m.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(a,b){t.CSS.setPropertyValue(j,b,h+"%")}),t.CSS.setPropertyValue(j,"paddingLeft",h+"em"),i.percentToPxWidth=I.lastPercentToPxWidth=(parseFloat(v.getPropertyValue(j,"width",null,!0))||1)/h,i.percentToPxHeight=I.lastPercentToPxHeight=(parseFloat(v.getPropertyValue(j,"height",null,!0))||1)/h,i.emToPx=I.lastEmToPx=(parseFloat(v.getPropertyValue(j,"paddingLeft"))||1)/h,a.myParent.removeChild(j)}return null===I.remToPx&&(I.remToPx=parseFloat(v.getPropertyValue(c.body,"fontSize"))||16),null===I.vwToPx&&(I.vwToPx=parseFloat(b.innerWidth)/100,I.vhToPx=parseFloat(b.innerHeight)/100),i.remToPx=I.remToPx,i.vwToPx=I.vwToPx,i.vhToPx=I.vhToPx,t.debug>=1&&console.log("Unit ratios: "+JSON.stringify(i),f),i}();var U=/margin|padding|left|right|width|text|word|letter/i.test(H)||/X$/.test(H)||"x"===H?"x":"y";switch(S){case"%":N*="x"===U?e.percentToPxWidth:e.percentToPxHeight;break;case"px":break;default:N*=e[S+"ToPx"]}switch(R){case"%":N*=1/("x"===U?e.percentToPxWidth:e.percentToPxHeight);break;case"px":break;default:N*=1/e[R+"ToPx"]}}switch(T){case"+":L=N+L;break;case"-":L=N-L;break;case"*":L*=N;break;case"/":L=N/L}i[H]={rootPropertyValue:P,startValue:N,currentValue:N,endValue:L,unitType:R,easing:M},t.debug&&console.log("tweensContainer ("+H+"): "+JSON.stringify(i[H]),f)}else t.debug&&console.log("Skipping ["+O+"] due to a lack of browser support.")}i.element=f}i.element&&(v.Values.addClass(f,"velocity-animating"),J.push(i),""===h.queue&&(g(f).tweensContainer=i,g(f).opts=h),g(f).isAnimating=!0,y===x-1?(t.State.calls.push([J,o,h,null,B.resolver]),t.State.isTicking===!1&&(t.State.isTicking=!0,k())):y++)}var e,f=this,h=m.extend({},t.defaults,s),i={};switch(g(f)===d&&t.init(f),parseFloat(h.delay)&&h.queue!==!1&&m.queue(f,h.queue,function(a){t.velocityQueueEntryFlag=!0,g(f).delayTimer={setTimeout:setTimeout(a,parseFloat(h.delay)),next:a}}),h.duration.toString().toLowerCase()){case"fast":h.duration=200;break;case"normal":h.duration=r;break;case"slow":h.duration=600;break;default:h.duration=parseFloat(h.duration)||1}t.mock!==!1&&(t.mock===!0?h.duration=h.delay=1:(h.duration*=parseFloat(t.mock)||1,h.delay*=parseFloat(t.mock)||1)),h.easing=j(h.easing,h.duration),h.begin&&!p.isFunction(h.begin)&&(h.begin=null),h.progress&&!p.isFunction(h.progress)&&(h.progress=null),h.complete&&!p.isFunction(h.complete)&&(h.complete=null),h.display!==d&&null!==h.display&&(h.display=h.display.toString().toLowerCase(),"auto"===h.display&&(h.display=t.CSS.Values.getDisplayType(f))),h.visibility!==d&&null!==h.visibility&&(h.visibility=h.visibility.toString().toLowerCase()),h.mobileHA=h.mobileHA&&t.State.isMobile&&!t.State.isGingerbread,h.queue===!1?h.delay?setTimeout(a,h.delay):a():m.queue(f,h.queue,function(b,c){return c===!0?(B.promise&&B.resolver(o),!0):(t.velocityQueueEntryFlag=!0,void a())}),""!==h.queue&&"fx"!==h.queue||"inprogress"===m.queue(f)[0]||m.dequeue(f)}var h,i,n,o,q,s,u=arguments[0]&&(arguments[0].p||m.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||p.isString(arguments[0].properties));if(p.isWrapped(this)?(h=!1,n=0,o=this,i=this):(h=!0,n=1,o=u?arguments[0].elements||arguments[0].e:arguments[0]),o=f(o)){u?(q=arguments[0].properties||arguments[0].p,s=arguments[0].options||arguments[0].o):(q=arguments[n],s=arguments[n+1]);var x=o.length,y=0;if(!/^(stop|finish|finishAll)$/i.test(q)&&!m.isPlainObject(s)){var z=n+1;s={};for(var A=z;A<arguments.length;A++)p.isArray(arguments[A])||!/^(fast|normal|slow)$/i.test(arguments[A])&&!/^\d/.test(arguments[A])?p.isString(arguments[A])||p.isArray(arguments[A])?s.easing=arguments[A]:p.isFunction(arguments[A])&&(s.complete=arguments[A]):s.duration=arguments[A]}var B={promise:null,resolver:null,rejecter:null};h&&t.Promise&&(B.promise=new t.Promise(function(a,b){B.resolver=a,B.rejecter=b}));var C;switch(q){case"scroll":C="scroll";break;case"reverse":C="reverse";break;case"finish":case"finishAll":case"stop":m.each(o,function(a,b){g(b)&&g(b).delayTimer&&(clearTimeout(g(b).delayTimer.setTimeout),g(b).delayTimer.next&&g(b).delayTimer.next(),delete g(b).delayTimer),"finishAll"!==q||s!==!0&&!p.isString(s)||(m.each(m.queue(b,p.isString(s)?s:""),function(a,b){p.isFunction(b)&&b()}),m.queue(b,p.isString(s)?s:"",[]))});var D=[];return m.each(t.State.calls,function(a,b){b&&m.each(b[1],function(c,e){var f=s===d?"":s;return f!==!0&&b[2].queue!==f&&(s!==d||b[2].queue!==!1)||void m.each(o,function(c,d){d===e&&((s===!0||p.isString(s))&&(m.each(m.queue(d,p.isString(s)?s:""),function(a,b){p.isFunction(b)&&b(null,!0)}),m.queue(d,p.isString(s)?s:"",[])),"stop"===q?(g(d)&&g(d).tweensContainer&&f!==!1&&m.each(g(d).tweensContainer,function(a,b){b.endValue=b.currentValue}),D.push(a)):("finish"===q||"finishAll"===q)&&(b[2].duration=1))})})}),"stop"===q&&(m.each(D,function(a,b){l(b,!0)}),B.promise&&B.resolver(o)),a();default:if(!m.isPlainObject(q)||p.isEmptyObject(q)){if(p.isString(q)&&t.Redirects[q]){var E=m.extend({},s),F=E.duration,G=E.delay||0;return E.backwards===!0&&(o=m.extend(!0,[],o).reverse()),m.each(o,function(a,b){parseFloat(E.stagger)?E.delay=G+parseFloat(E.stagger)*a:p.isFunction(E.stagger)&&(E.delay=G+E.stagger.call(b,a,x)),E.drag&&(E.duration=parseFloat(F)||(/^(callout|transition)/.test(q)?1e3:r),E.duration=Math.max(E.duration*(E.backwards?1-a/x:(a+1)/x),.75*E.duration,200)),t.Redirects[q].call(b,b,E||{},a,x,o,B.promise?B:d)}),a()}var H="Velocity: First argument ("+q+") was not a property map, a known action, or a registered redirect. Aborting.";return B.promise?B.rejecter(new Error(H)):console.log(H),a()}C="start"}var I={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},J=[];m.each(o,function(a,b){p.isNode(b)&&e.call(b)});var K,E=m.extend({},t.defaults,s);if(E.loop=parseInt(E.loop),K=2*E.loop-1,E.loop)for(var L=0;K>L;L++){var M={delay:E.delay,progress:E.progress};L===K-1&&(M.display=E.display,M.visibility=E.visibility,M.complete=E.complete),w(o,"reverse",M)}return a()}};t=m.extend(w,t),t.animate=w;var x=b.requestAnimationFrame||o;return t.State.isMobile||c.hidden===d||c.addEventListener("visibilitychange",function(){c.hidden?(x=function(a){return setTimeout(function(){a(!0)},16)},k()):x=b.requestAnimationFrame||o}),a.Velocity=t,a!==b&&(a.fn.velocity=w,a.fn.velocity.defaults=t.defaults),m.each(["Down","Up"],function(a,b){t.Redirects["slide"+b]=function(a,c,e,f,g,h){var i=m.extend({},c),j=i.begin,k=i.complete,l={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},n={};i.display===d&&(i.display="Down"===b?"inline"===t.CSS.Values.getDisplayType(a)?"inline-block":"block":"none"),i.begin=function(){j&&j.call(g,g);for(var c in l){n[c]=a.style[c];var d=t.CSS.getPropertyValue(a,c);l[c]="Down"===b?[d,0]:[0,d]}n.overflow=a.style.overflow,a.style.overflow="hidden"},i.complete=function(){for(var b in n)a.style[b]=n[b];k&&k.call(g,g),h&&h.resolver(g)},t(a,l,i)}}),m.each(["In","Out"],function(a,b){t.Redirects["fade"+b]=function(a,c,e,f,g,h){var i=m.extend({},c),j={opacity:"In"===b?1:0},k=i.complete;i.complete=e!==f-1?i.begin=null:function(){k&&k.call(g,g),h&&h.resolver(g)},i.display===d&&(i.display="In"===b?"auto":"none"),t(this,j,i)}}),t}(window.jQuery||window.Zepto||window,window,document)}),angular.module("i-comments",[]).directive("commentsWrap",function(Comments){return{restrict:"E",replace:!0,scope:{parent:"=",what:"@"},controller:function($scope,global,$timeout){$scope.comments=[],Comments.setComments($scope.comments),$scope.comment={},$scope.user=global.get("user"),$scope.addChildComment=Comments.addChildComment,$scope.deleteComment=Comments.deleteComment,$scope.paginate=Comments.getPaginate(),$scope.moreComments=Comments.moreComments},templateUrl:"components/comment/commentsWrap.html",link:function(scope,element,attrs){scope.$watch("parent",function(n,o){n&&Comments.setStuffId(scope.parent,scope.what)}),scope.$on("$destroy",function(){Comments.setEmpty()})}}}).directive("comments",function(){return{restrict:"E",replace:!0,scope:{comments:"=",depth:"="},template:"<ul class='content-comments'><comment ng-repeat='comment in comments' comment ='comment' depth='depth'></comment></ul>",link:function(scope,element,attrs){}}}).directive("comment",function($compile,global,Comments){return{restrict:"E",replace:!0,scope:{comment:"=",depth:"="},transclude:!0,templateUrl:"components/comment/member.html",link:function(scope,element,attrs,controller,$transclude){scope.depth=parseInt(scope.depth)+1,scope.user=global.get("user"),scope.deleteComment=Comments.deleteComment,$transclude(function(clone,$outerScope){scope.comments=$outerScope.comments});angular.isArray(scope.comment.children)&&$compile('<comments comments="comment.children"  depth="depth"></comments>')(scope,function(cloned,scope){$(element[0].children[3]).append(cloned)}),scope.toggled=!0,scope.btnText="ответить",scope.toggle=function(){scope.toggled=!scope.toggled,scope.btnText=scope.toggled?"ответить":"закрыть",scope.child={}},scope.toggleEdit=function(){scope.toggled=!scope.toggled,scope.btnText=scope.toggled?"ответить":"закрыть",scope.child=scope.comment},scope.collapsed=!0,scope.collapse=function(){scope.collapsed=!scope.collapsed},scope.addComment=function(child){scope.toggle(),child.parent||(child.parent=scope.comment._id),scope.comment.children&&scope.comment.children||(scope.comment.children=[]),Comments.addChildComment(child,scope.comment.children)}}}}).factory("Comments",["$resource","global",function($resource,global){function getComment(){Comment.query({query:query,perPage:5,page:paginate.page},function(res){0==paginate.page&&res.length>0&&(paginate.totalItems=res.shift().index);for(var i=0,l=res.length;i<l;i++)comments.push(res[i])})}var query,comments,what,Comment=$resource("/api/collections/Comment/:id",{id:"@_id"}),paginate={page:0,totalItems:0};return{setStuffId:function(id,wh){what=wh;var w={};w[what]=id,query=JSON.stringify(w),getComment()},moreComments:function(){paginate.page++,getComment()},addChildComment:function(comment,parent,what){if(console.log("&&&&"),comment.date||(comment.date=new Date),global.get("user").val&&(comment.name||(comment.name=global.get("user").val.name),!comment.profileUrl&&global.get("user").val.profileUrl&&(comment.profileUrl=global.get("user").val.profileUrl)),!comment.text||!comment.name)return void console.log("не заполнены поля.");comment.text=comment.text.substring(0,500),comment.name=comment.name.substring(0,100),comment.profileUrl&&(comment.profileUrl=comment.profileUrl.substring(0,100));var commentForServer=angular.copy(comment);commentForServer.children?commentForServer.children=commentForServer.children.map(function(el){return el._id}):commentForServer.children=[],Comment.save(commentForServer,function(res){comment._id||(comment._id=res.id,comment.children=[],parent.unshift(angular.copy(comment)))},function(err){return!1})},deleteComment:function(id,comments){var i,l;for(i=0,l=comments.length;i<l&&comments[i]._id!=id;i++);comments.splice(i,1),Comment.delete({id:id},function(res){},function(err){console.log(err)})},setEmpty:function(){comments.length=0,paginate.page=0,paginate.totalItems=0},getComments:function(id,wh){return comments},setComments:function(c){comments=c},getPaginate:function(){return paginate}}}]),angular.module("gmall.directives").directive("focusElement",["$timeout",function($timeout){return{scope:{focusElement:"="},link:function($scope,$element,$attr){$scope.$watch("focusElement",function(value){if(console.log(value),value)return void setTimeout(function(){$element[0].focus(),$scope.focusElemen=!1},200)})}}}]).directive("simpleFocusElement",[function(){return{restrict:"A",link:function(scope,element,attrs){setTimeout(function(){element[0].focus()},300),"false"==attrs.simpleFocusElement&&(console.log("focus",element[0]),setTimeout(function(){element[0].focus()},200))}}}]).directive("focusMe1",function($timeout,$parse){return{link:function(scope,element,attrs){var model=$parse(attrs.focusMe);scope.$watch(model,function(value){console.log("value=",value),value===!0&&$timeout(function(){element[0].focus()},300,!1)}),element.bind("blur",function(){console.log("blur"),scope.$apply(model.assign(scope,!1))})}}}).directive("focusMe",function($timeout){return{link:function(scope,element,attrs){scope.$watch(attrs.focusMe,function(value){value===!0&&$timeout(function(){element[0].focus(),scope[attrs.focusMe]=!1},300,!1)})}}}),function(){function lookbookListDirective(){return{scope:{},bindToController:!0,controller:lookbookListCtrl,controllerAs:"$ctrl",templateUrl:"components/lookbook/lookbookList.html"}}function lookbookListTemplateDirective(global){return{scope:{actived:"@"},rescrict:"E",bindToController:!0,controller:lookbookListCtrl,controllerAs:"$ctrl",templateUrl:"views/template/partials/lookbook/lookbookList"+(global.get("store").val.template.newsList?global.get("store").val.template.newsList:"")+".html"}}function lookbookListCtrl(Lookbook,$state,global,exception,Confirm,Photo,$timeout){function getList(){return!Object.keys(self.query).length&&self.actived&&(self.query={actived:!0}),self.Items.getList(self.paginate,self.query).then(function(data){return self.items=data,self.items})}function searchItem(searchStr){return self.query=searchStr?{name:searchStr.substring(0,10)}:{},self.paginate.page=0,getList().then(function(){console.log("Activated list View")})}function saveField(item,field,defer){defer=defer||0,setTimeout(function(){var o={_id:item._id};return o[field]=item[field],self.Items.save({update:field},o).$promise.then(function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)},function(err){console.log(err)})},defer)}function createItem(){self.Items.create().then(function(res){return self.newItem={actived:!1},self.newItem.name=res,self.Items.save(self.newItem).$promise}).then(function(res){return self.newItem._id=res.id,self.newItem.url=res.url,self.paginate.page=0,getList(self.paginate)}).then(function(){var id=self.newItem._id;delete self.newItem._id,$state.go("frame.lookbook.item",{id:id})}).catch(function(err){delete self.newItem._id,err=err.data||err,exception.catcher("создание объекта")(err)})}function deleteItem(item){var folder="images/"+global.get("store").val.subDomain+"/Lookbook/"+item.url;console.log(folder),Confirm("удалить???").then(function(){return self.Items.delete({_id:item._id}).$promise}).then(function(){return self.getList()}).then(function(){Photo.deleteFolder("Lookbook",folder)}).catch(function(err){err&&(err=err&&err.data||err)&&exception.catcher("удаление объета")(err)})}var self=this;self.mobile=global.get("mobile").val,self.datePickerOptions={locale:{applyClass:"btn-green",applyLabel:"Выбрать",fromLabel:"от",toLabel:"до",cancelLabel:"Отменить",customRangeLabel:"Прозвольный диапазон",format:"DD-MMMM-YYYY",daysOfWeek:["Пн","Вт","Ср","Чт","Пн","Сб","Вс"],firstDay:1,monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"]},singleDatePicker:!0,date:{startDate:null,endDate:null}},self.$state=$state,self.Items=Lookbook,self.moment=moment,self.query={},self.paginate={page:0,rows:50,totalItems:0},self.newItem={name:"Новая иноформация",actived:!1},self.getList=getList,self.saveField=saveField,self.searchItem=searchItem,self.createItem=createItem,self.deleteItem=deleteItem,function(){getList().then(function(){})}()}angular.module("gmall.services").directive("lookbookList",lookbookListDirective).directive("lookbookTemplate",lookbookListTemplateDirective),lookbookListTemplateDirective.$inject=["global"],lookbookListCtrl.$inject=["Lookbook","$state","global","exception","Confirm","Photo","$timeout"]}(),function(){function lookbookService($resource,$uibModal,$q,global){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return console.log("XHR Failed for getNews."+error),$q.reject(error)}var data={perPage:paginate.rows,page:paginate.page,query:query};return Items.query(data).$promise.then(getListComplete).catch(getListFailed)}function getItem(id){function getItemComplete(response){return response}function getItemFailed(error){return $q.reject(error)}return Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}function create(){
return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/lookbook/createLookbook.html",controller:function($uibModalInstance){var self=this;self.name="",self.ok=function(){$uibModalInstance.close(self.name)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl"}).result.then(function(name){name?resolve(name.substring(0,100)):reject("empty")},function(err){reject(err)})})}var Items=$resource("/api/collections/Lookbook/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,query:Items.query,get:Items.get,save:Items.save,delete:Items.delete,create:create}}angular.module("gmall.services").service("Lookbook",lookbookService),lookbookService.$inject=["$resource","$uibModal","$q","global"]}(),function(){function infoService($resource,$uibModal,$q){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return console.log("XHR Failed for getPaps."+error),$q.reject(error)}return paginate||(paginate={page:0}),Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete).catch(getListFailed)}function getItem(id){function getItemComplete(response){return response}function getItemFailed(error){return $q.reject(error)}return Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}function create(header,button){return $q(function(resolve,reject){var options={animation:!0,restrict:"E",templateUrl:"components/info/createItem.html",controller:createCtrl,size:"lg",controllerAs:"$ctrl",resolve:{header:function(){return header},button:function(){return button}}};$uibModal.open(options).result.then(function(name){name?resolve(name.substring(0,100)):reject()},function(err){reject(err)})})}function createCtrl($uibModalInstance,header,button){var self=this;self.header=header?header:"создание информационной страницы",self.button=button?button:"создать страницу",self.name="",self.ok=function(){$uibModalInstance.close(self.name)},self.cancel=function(){$uibModalInstance.dismiss()}}function selectInfo(){return $q(function(resolve,reject){var options={animation:!0,templateUrl:"components/info/selectInfo.html",controller:selectInfoCtrl,size:"lg",controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(selectedItem){resolve(selectedItem)},function(){console.log("Modal dismissed at: "+new Date),reject()})})}function selectInfoCtrl(Info,$uibModalInstance,$q){var self=this;$q.when().then(function(){return Info.getList()}).then(function(items){self.items=items}),self.cancel=function(){$uibModalInstance.dismiss("cancel")},self.ok=function(item){$uibModalInstance.close(item)}}var Items=$resource("/api/collections/Info/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,save:Items.save,delete:Items.delete,query:Items.query,get:Items.get,create:create,selectInfo:selectInfo,select:selectInfo}}angular.module("gmall.services").service("Info",infoService),infoService.$inject=["$resource","$uibModal","$q"]}(),function(){function listDirective(){return{scope:{},restrict:"E",bindToController:!0,controller:listCtrl,controllerAs:"$ctrl",templateUrl:"components/info/infoList.html"}}function listTemplateDirective(){return{scope:{},restrict:"E",bindToController:!0,controller:listCtrl,controllerAs:"$ctrl",templateUrl:"views/template/partials/info/info.html"}}function listCtrl(Items,$q,$state,$stateParams,global,Confirm,exception,$fileUpload,Photo){function activate(page){return(page||0===page)&&(self.paginate.page=0),getList().then(function(){})}function getList(){return self.Items.getList(self.paginate,self.query).then(function(data){if(self.block=0,$stateParams.block)for(var i=0;i<data.length;i++)if($stateParams.block==data[i]._id){self.block=i;break}return self.items=data,self.items})}function searchItems(searchStr){self.query=searchStr?{name:searchStr.substring(0,10)}:{},self.paginate.page=0,activate()}function saveField(item,field){var o={_id:item._id};return o[field]=item[field],self.Items.save({update:field},o).$promise}function createItem(){self.Items.create().then(function(res){return self.newItem.name=res,self.Items.save(self.newItem).$promise}).then(function(res){return self.newItem._id=res.id,self.newItem.url=res.url,self.paginate.page=0,getList(self.paginate)}).then(function(){self.newItem._id;delete self.newItem._id}).catch(function(err){err&&(err=err.datsa||err,exception.catcher("создание объекта")(err))})}function deleteItem(item){Confirm("удалить???").then(function(){return self.Items.delete({_id:item._id}).$promise}).then(function(){activate(0)}).catch(function(err){err&&exception.catcher("удаление страницы")(err)})}function dropCallback(item){var actions=[];return setTimeout(function(){self.items.forEach(function(item,idx){item.index=idx+1,actions.push(saveField(item,"index"))}),$q.all(actions)},100),item}function loadPhoto(item){self.uploadUrl="/api/collections/Photo/fileUpload?collectionName=Info",self.uploadVideoUrl="/api/collections/Photo/uploadVideoFile?collectionName=Info",$q.when().then(function(){return $fileUpload.fileUpload(self.uploadUrl,"img")}).then(function(res){var a=[];res&&res.length&&(item.img&&a.push(item.img),item.img=res[0].data.img,saveField(item,"img"),a.length&&Photo.deleteFiles("Info",a))}).catch(function(err){console.log(err)})}function deletePhoto(item){Confirm("удалить?").then(function(){var a=[];item.img&&a.push(item.img),item.img=null,console.log(item),saveField(item,"img"),a.length&&Photo.deleteFiles("Info",a)})}var self=this;self.mobile=global.get("mobile").val,self.$state=$state,self.Items=Items,self.query={},self.paginate={page:0,rows:50,totalItems:0},self.newItem={name:"Новый информационный раздел",index:1},self.getList=getList,self.saveField=saveField,self.searchItems=searchItems,self.createItem=createItem,self.deleteItem=deleteItem,self.dropCallback=dropCallback,self.loadPhoto=loadPhoto,self.deletePhoto=deletePhoto,activate()}angular.module("gmall.services").directive("infoList",listDirective).directive("infoListTemplate",listTemplateDirective),listCtrl.$inject=["Info","$q","$state","$stateParams","global","Confirm","exception","$fileUpload","Photo"]}(),function(){function itemInfoLinkDirective(){return{scope:{info:"=",do:"&",title:"@"},rescrict:"E",bindToController:!0,controller:itemInfoLinkCtrl,controllerAs:"$ctrl",templateUrl:"components/info/createLink.html"}}function itemInfoLinkCtrl($q,Info,global){function setInfoLink(){$q.when().then(function(){return Info.selectInfo()}).then(function(tag){self.info.link=tag._id,self.info.name=tag.name,self.do()}).catch(function(){console.log("dismiss")})}function deleteLink(){self.info.link=null,self.info.name="",console.log(self.info),self.do()}var self=this;self.info||(self.info={}),self.setInfoLink=setInfoLink,self.deleteLink=deleteLink}function itemDirective(){return{scope:{},bindToController:!0,controller:itemCtrl,controllerAs:"$ctrl",templateUrl:"components/info/infoItem.html"}}function itemCtrl(Items,$stateParams,$q,$uibModal,exception,global,$scope,$timeout,Confirm){function createNewRazdel(){self.Items.create("создание раздела","создать раздел").then(function(res){res&&saveEmbeddedField({name:res},"name")})}function activate(){return getItem($stateParams.id).then(function(){}).catch(function(err){err=err.data||err,exception.catcher("получение объекта")(err)})}function getItem(id){return self.Items.getItem(id).then(function(data){return self.item=data,self.item}).catch(function(err){return $q.reject(err)})}function saveField(field,defer){defer=defer||0,setTimeout(function(){var o={_id:self.item._id};o[field]=self.item[field];var query={update:field};self.Items.save(query,o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})},defer)}function saveEmbeddedField(item,field){var o={_id:self.item._id};field&&(o[field]=item[field]);var update={update:field,embeddedName:"blocks"};item._id?field?update.embeddedVal=item._id:(update.embeddedPull=!0,update.update="name",o.name=item.name):update.embeddedPush=!0,field?$q.when().then(function(){return self.Items.save(update,o).$promise}).then(function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500),(update.embeddedPush||update.embeddedPull)&&activate($stateParams.id)}).catch(function(err){err&&(exception.catcher("saving")(err),console.log(err),err.data&&err.data.message&&err.data.message.indexOf("cannot use the part")>-1&&(console.log(field),update.update=field+"L",delete o[field],o[update.update]={},$q.when().then(function(){return self.Items.save(update,o).$promise}).then(function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500),(update.embeddedPush||update.embeddedPull)&&activate($stateParams.id)}).catch(function(err){err&&exception.catcher("saving")(err)})))}):Confirm("удалить?").then(function(){return self.Items.save(update,o).$promise}).then(function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500),(update.embeddedPush||update.embeddedPull)&&activate($stateParams.id)})}function dropCallback(item){return setTimeout(function(){saveField("blocks")},100),item}var self=this;self.Items=Items,self.global=global,self.mobile=global.get("mobile").val,self.saveField=saveField,self.saveEmbeddedField=saveEmbeddedField,self.dropCallback=dropCallback,self.createNewRazdel=createNewRazdel,activate(),$scope.$on("changeLang",function(){activate()})}function itemTemplateDirective(global){return{scope:{img:"@",info:"@"},bindings:{img:"@",info:"@"},bindToController:!0,controller:itemTemplateCtrl,controllerAs:"$ctrl",templateUrl:function(element,attrs){return attrs&&attrs.templ&&"0"!=attrs.templ&&console.log(attrs.templ),"views/template/partials/home/info/infoItem"+(attrs&&attrs.templ&&"0"!=attrs.templ?attrs.templ:"")+".html"}}}function itemTemplateCtrl($scope,Items,$stateParams,$q,$uibModal,exception,global,$attrs){function activate(id){return getItem(id)}function getItem(id){return self.Items.getItem(id).then(function(data){return data&&data.blocks&&data.blocks.length&&(data.blocks=data.blocks.filter(function(b){return b.actived})),self.item=data,self.item}).catch(function(err){exception.catcher("получение данных")(err)})}var self=this;self.$onInit=function(){self.info&&activate(self.info)},self.info&&activate(self.info),self.Items=Items,self.global=global,self.mobile=global.get("mobile").val}angular.module("gmall.services").directive("infoItem",itemDirective).directive("infoItemTemplate",itemTemplateDirective).directive("createInfoLink",itemInfoLinkDirective),itemInfoLinkCtrl.$inject=["$q","Info","global"],itemCtrl.$inject=["Info","$stateParams","$q","$uibModal","exception","global","$scope","$timeout","Confirm"],itemTemplateCtrl.$inject=["$scope","Info","$stateParams","$q","$uibModal","exception","global","$attrs"]}(),function(){function serviceFoo($resource,$uibModal,$q,global){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}paginate||(paginate={page:0});var data={perPage:paginate.rows,page:paginate.page,query:query};return global.get("crawler")&&global.get("crawler").val&&(data.subDomain=global.get("store").val.subDomain),Items.query(data).$promise.then(getListComplete)}function getItem(id){function getItemComplete(response){return response&&response.blocks&&response.blocks.length&&response.blocks.forEach(function(b){"stuffs"==b.type&&(b.stuffs&&b.stuffs.length?b.imgs=b.stuffs.map(function(s){return s.gallery&&s.gallery.length&&s.gallery[0].img&&(s.img=s.gallery[0].img),s}):b.imgs=[])}),response}return Items.get({_id:id}).$promise.then(getItemComplete)}function create(){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/CONTENT/master/createMaster.html",controller:function($uibModalInstance){var self=this;self.name="",self.ok=function(){$uibModalInstance.close(self.name)},self.cancel=function(){$uibModalInstance.dismiss()}},controllerAs:"$ctrl"}).result.then(function(name){name?resolve(name.substring(0,50)):reject()},function(err){reject(err)})})}var Items=$resource("/api/collections/Master/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,query:Items.query,get:Items.get,save:Items.save,delete:Items.delete,create:create}}angular.module("gmall.services").service("Master",serviceFoo),serviceFoo.$inject=["$resource","$uibModal","$q","global"]}(),function(){function mastersStaticPage(){return{scope:{},bindToController:!0,controllerAs:"$ctrl",templateUrl:"views/template/partials/stat/masters/masters.html",controller:function(global){console.log(global.get("masters").val);var self=this;self.global=global,self.mobile=global.get("mobile").val}}}function masterListDirective(){return{scope:{},bindToController:!0,controller:masterListCtrl,controllerAs:"$ctrl",templateUrl:"components/CONTENT/master/masterList.html"}}function masterListTemplateDirective(global){return{scope:{},rescrict:"E",bindToController:!0,controller:masterListCtrl,controllerAs:"$ctrl",templateUrl:"views/template/partials/master/masterList"+(global.get("store").val.template.masterList?global.get("store").val.template.masterList:"")+".html"}}function masterListCtrl(Master,$state,global,Confirm,$q,exception,Photo,$timeout,Label){function getList(){return self.Items.getList(self.paginate,self.query).then(function(data){return self.items=data,self.items})}function searchItem(searchStr){return self.query=searchStr?{name:searchStr.substring(0,10)}:{},self.paginate.page=0,getList().then(function(){console.log("Activated list View")})}function saveField(item,field){var o={_id:item._id};o[field]=item[field],self.Items.save({update:field},o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})}function createItem(){self.Items.create().then(function(res){return self.newItem={},self.newItem.name=res,self.Items.save(self.newItem).$promise}).then(function(res){self.newItem._id=res.id,self.newItem.url=res.url,self.paginate.page=0,getList(self.paginate)}).then(function(){var id=self.newItem._id;delete self.newItem._id,setTimeout(function(){$state.go("frame.master.item",{id:id})},100)}).catch(function(err){err&&exception.catcher("создание мастера")(err)})}function cloneItem(item){var name;self.Items.create().then(function(res){return name=res,self.Items.getItem(item._id)}).then(function(master){return self.newItem=angular.copy(master),self.newItem.name=name,self.newItem.nameL={},delete self.newItem._id,delete self.newItem.__v,delete self.newItem.url,console.log(self.newItem),self.newItem.blocks.forEach(function(block){delete block.img,delete block._id,"stuffs"==block.type&&block.stuffs&&block.stuffs.length&&(block.stuffs=block.stuffs.map(function(s){return s._id})),block.imgs=[]}),self.Items.save(self.newItem).$promise}).then(function(res){self.newItem._id=res.id,self.newItem.url=res.url,self.paginate.page=0,getList(self.paginate)}).then(function(){var id=self.newItem._id;delete self.newItem._id,setTimeout(function(){$state.go("frame.master.item",{id:id})},100)}).catch(function(err){err&&exception.catcher("создание мастера")(err)})}function deleteItem(item){var folder="images/"+global.get("store").val.subDomain+"/Master/"+item.url;Confirm("удалить???").then(function(){return self.Items.delete({_id:item._id}).$promise}).then(function(){return self.getList()}).then(function(){Photo.deleteFolder("Master",folder)}).catch(function(err){err&&(err=err&&err.data||err)&&exception.catcher("удаление объекта")(err)})}function dropCallback(item){var i=0;return setTimeout(function(){self.items.reduce(function(p,item){return p.then(function(){return i++,item.index=i,saveField(item,"index")})},$q.when(!0)).then(function(){console.log(self.items.map(function(el){return el.index}))})},50),item}var self=this;self.mobile=global.get("mobile").val,self.global=global,self.$state=$state,self.Items=Master,self.query={},self.labels=[],self.paginate={page:0,rows:50,totalItems:0},self.newItem={name:"имя мастера"},self.getList=getList,self.saveField=saveField,self.searchItem=searchItem,self.deleteItem=deleteItem,self.createItem=createItem,self.dropCallback=dropCallback,self.cloneItem=cloneItem,function(){getList().then(function(){return Label.getList({page:0,rows:100},{list:"master"})}).then(function(data){self.labels=data})}()}angular.module("gmall.services").directive("masterList",masterListDirective).directive("masterListTemplate",masterListTemplateDirective).directive("mastersStaticPage",mastersStaticPage),masterListCtrl.$inject=["Master","$state","global","Confirm","$q","exception","Photo","$timeout","Label"]}(),function(){function masterItemDirective(){return{scope:{},restrict:"E",bindToController:!0,controller:masterItemCtrl,controllerAs:"$ctrl",templateUrl:"components/CONTENT/master/masterItem.html"}}function masterItemCtrl(Master,$stateParams,$q,$uibModal,global,exception,Stuff,Photo,$scope,$timeout,Confirm,SetCSS,$user,Workplace,$rootScope){function activate(){return getItem($stateParams.id).then(function(){if(self.item.user)return $user.getItem(self.item.user)}).then(function(user){if(user){if(user.profile&&user.profile.phone&&"+"==user.profile.phone[0]&&(user.profile.phone=user.profile.phone.substring(1)),user.profile&&user.profile.phone&&user.profile.phone.length<10)for(;user.profile.phone.length<10;)user.profile.phone+="0";user.profile&&user.profile.phone&&10==user.profile.phone.length&&(user.profile.phone="38"+user.profile.phone),user.phone=user.profile?user.profile.phone:null,self.item.user=user}}).catch(function(err){err=err.data||err,exception.catcher("получение объекта")(err)})}function getItem(id){return self.Items.getItem(id).then(function(data){data&&!data.blocks&&(data.blocks=[],saveField("blocks",[]));var bl=data.blocks.filter(function(b){return b});return bl.length!=data.blocks.length&&(saveField("blocks",bl),data.blocks=bl),data.blocks.forEach(function(b,i){"stuffs"==b.type&&b.stuffs.length&&(b.stuffs=b.stuffs.map(function(s){return s._is||s})),b.i=i}),data.blocks.sort(function(a,b){return a.index-b.index}),void 0==data.notification&&(data.notification=0),self.item=data,self.item}).catch(function(err){return console.log(err),$q.reject(err)})}function refreshBlocks(){return self.Items.getItem($stateParams.id).then(function(data){data.blocks.forEach(function(b,i){b.i=i,b.desc||(b.desc=""),b.descL||(b.descL={}),b.desc1||(b.desc1=""),b.desc1L||(b.desc1L={}),b.name||(b.name=""),b.nameL||(b.nameL={}),b.name1||(b.name1=""),b.name1L||(b.name1L={}),b.videoLink||(b.videoLink="")}),self.item.blocks=data.blocks})}function setStyles(block,idx){$q.when().then(function(){return SetCSS.setStyles(block)}).then(function(){block.elements&&saveField("blocks."+block.i+".elements",block.elements),block.blockStyle&&saveField("blocks."+block.i+".blockStyle",block.blockStyle)})}function saveField(field,value,defer,indexImgs){field.indexOf("index")>-1&&(self.item.blocks.sort(function(a,b){return a.index-b.index}),self.item.blocks.forEach(function(b,i){b.i=i}),value=self.item.blocks,field="blocks"),defer=defer?defer:100,setTimeout(function(){"date"==field&&(value=new Date(self.item[field]));var o={_id:self.item._id};o[field]=value;var query={update:field};field.indexOf(".imgs")>-1&&void 0!==indexImgs&&(query.indexImgs=indexImgs),self.Items.save(query,o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})},defer)}function addBlock(type){return $scope.$broadcast("addNewBlock",{type:type}),void(self.newBlock=null)}function deleteBlock(block,index){var o={_id:self.item._id},update={update:"_id_id",embeddedName:"blocks"};o.id=block.id,update.embeddedPull=!0,Confirm("потверждаете?").then(function(){return self.item.blocks.splice(index,1),block._id?(o._id_id=block._id,update={update:"_id_id",embeddedName:"blocks"},update.embeddedPull=!0):(update={update:"blocks"},o.blocks=self.item.blocks),self.Items.save(update,o).$promise}).then(function(res){var images=[];if(block.img&&images.push(block.img),block.video&&images.push(block.video),block.videoCover&&images.push(block.videoCover),block.imgs&&block.imgs.length&&block.imgs.forEach(function(im){im.img&&images.push(im.img)}),images.length)return Photo.deleteFiles("Stat",images)}).then(function(){activate()})}function deleteSlide(block,index){Photo.deleteFiles("Master",[block.imgs[index].img]).then(function(response){block.imgs.splice(index,1),self.saveField("blocks."+block.i+".imgs",block.imgs,null,index)},function(err){console.log(err)})}function editSlide(block,index){$uibModal.open({animation:!0,templateUrl:"components/CONTENT/master/editSlide.html",controller:function(slide,$uibModalInstance){var self=this;self.item=slide,self.ok=function(){console.log(self.item),$uibModalInstance.close(self.item)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl",size:"lg",resolve:{slide:function(){return block.imgs[index]}}}).result.then(function(slide){self.saveField("blocks."+block.i+".imgs",block.imgs)},function(){})}function savePhone(phone){saveField("phone",phone)}function clearUser(){console.log(self.user),changeUser(self.user)}function refreshUsers(phone){phone.length<3||(self.cachePhone=phone,searchUser(phone))}function searchUser(phone){var q={$or:[{"profile.phone":phone},{name:phone},{email:phone}]};$user.getList({page:0,rows:20},q).then(function(res){self.users=res.map(function(user){if(user.profile&&user.profile.phone&&"+"==user.profile.phone[0]&&(user.profile.phone=user.profile.phone.substring(1)),user.profile&&user.profile.phone&&user.profile.phone.length<10)for(;user.profile.phone.length<10;)user.profile.phone+="0";return user.profile&&user.profile.phone&&10==user.profile.phone.length&&(user.profile.phone="38"+user.profile.phone),user.phone=user.profile?user.profile.phone:null,user})})}function changeUser(user){if(self.item.user&&self.item.user._id&&(!user||user._id!=self.item.user._id)){var o={_id:self.item.user._id,master:null};$user.save({update:"master"},o,function(){})}var u=null;if(user?(u=user._id,self.item.user=user):self.item.user=null,saveField("user",u),self.user=null,self.item.user&&self.item.user._id){var o={_id:self.item.user._id,master:self.item._id};$user.save({update:"master"},o,function(){})}}function getWorkplaces(){Workplace.getList({page:0,rows:50}).then(function(res){console.log(res,res&&res.length),res&&res.length&&(self.workplaces=res,console.log(self.workplaces))})}function addWorkplace(wp){console.log(wp),self.item.workplaces||(self.item.workplaces=[]),self.item.workplaces=self.item.workplaces.filter(function(wp){return wp});var value=self.item.workplaces.map(function(wp){return wp._id});value.indexOf(wp._id)>-1||(value.push(wp._id),self.item.workplaces.push(wp),console.log(value),saveField("workplaces",value),$timeout(function(){},1e3))}function deleteWorkplace(idx){self.item.workplaces||(self.item.workplaces=[]),self.item.workplaces.splice(idx,1),saveField("workplaces",self.item.workplaces.map(function(wp){return wp._id}))}function addItemInBlock(block,$index){var model;switch(block.type){case"stuffs":model=Stuff;break;case"campaign":model=Campaign;break;case"filterTags":model=FilterTags;break;case"brandTags":model=BrandTags;break;case"brands":model=Brans;break;case"categories":model=Category}$q.when().then(function(){return model.select()}).then(function(item){if("stuffs"==block.type&&block.stuffs&&block.stuffs.length&&block.stuffs.some(function(s){return s&&s._id?s._id==item._id:s==item._id}))throw"такой объект уже есть";block[block.type]||(block[block.type]=[]);var img,link;switch(name=item.name,block.type){case"stuffs":img=item.gallery[0]&&item.gallery[0].thumb?item.gallery[0].thumb:null,link=item.link,item.artikul&&(item.name+=" "+item.artikul);break;case"campaign":img=item.img?item.img:null,link="campaign/"+item.url;break;case"filterTags":img=item.img?item.img:null,link="/group/category?queryTag="+item.url;break;case"brandTags":img=item.img?item.img:null,link="/group/category?brandTag="+item.url;break;case"brands":img=item.img?item.img:null,link="/group/category?brand="+item.url;break;case"categories":img=item.img?item.img:null,link="/group/"+item.url}void 0!==$index?block.imgs[$index]={name:item.name,img:img,link:link,_id:item._id}:(block.imgs||(block.imgs=[]),block.imgs.push({name:item.name,img:img,link:link,_id:item._id})),saveField("blocks."+block.i+".imgs",block.imgs),"stuffs"==block.type&&(block.stuffs=block.imgs.map(function(img){return img._id}),saveField("blocks."+block.i+".stuffs",block.stuffs))}).catch(function(err){err&&exception.catcher("добавление")(err)})}function movedItem(block,item){return $timeout(function(){saveField("blocks."+block.i+".imgs",block.imgs),"stuffs"==block.type&&(block.stuffs=block.imgs.map(function(img){return img._id}),saveField("blocks."+block.i+".stuffs",block.stuffs))},100),item}function deleteItemFromBlock(block,$index){block.imgs.splice($index,1),saveField("blocks."+block.i+".imgs",block.imgs),"stuffs"==block.type&&(block.stuffs=block.imgs.map(function(img){return img._id}),saveField("blocks."+block.i+".stuffs",block.stuffs))}function changeItem(block,$index){addItemInBlock(block,$index)}function toggleEdit(item){item.editMode=!item.editMode}function toggleAdd(){self.addMode=!self.addMode}function saveReview(item){item.name=item.name.substring(0,20),item.desc=item.desc.substring(0,200),delete item.editMode,saveField("reviews",item.reviews)}function deleteReview(i){self.item.reviews.splice(i,1),saveField("reviews",item.reviews)}function addReview(admin){if(admin)var o=self.newReview;else var o={name:global.get("user").val.profile.fio||global.get("user").val.name,date:Date.now(),desc:self.newReviewText.substring(0,200)};self.newReviewText="",self.unableAddReview=!1,self.item.reviews||(self.item.reviews=[]),self.item.reviews.unshift(o),saveField("reviews",self.item.reviews),admin&&toggleAdd()}var self=this;self.Items=Master,self.type="Master",self.item={},self.mobile=global.get("mobile").val,self.global=global,self.listOfBlocksForMasterPage=listOfBlocksForAll,self.listOfBlocks=listOfBlocksForAll,self.moment=moment,self.saveField=saveField,self.setStyles=setStyles,self.addBlock=addBlock,self.refreshBlocks=refreshBlocks,self.deleteBlock=deleteBlock,self.deleteSlide=deleteSlide,self.editSlide=editSlide,self.addItemInBlock=addItemInBlock,self.movedItem=movedItem,self.deleteItemFromBlock=deleteItemFromBlock,self.changeItem=changeItem,self.deleteReview=deleteReview,self.toggleEdit=toggleEdit,self.addReview=addReview,self.toggleAdd=toggleAdd,self.saveReview=saveReview,self.newReview={name:"",desc:"",date:Date.now()},self.savePhone=savePhone,self.refreshUsers=refreshUsers,self.changeUser=changeUser,self.clearUser=clearUser,self.workplaces=[],self.deleteWorkplace=deleteWorkplace,self.addWorkplace=addWorkplace,self.getWorkplaces=getWorkplaces,activate(),$scope.$on("changeLang",function(){activate()}),global.get("store").val.template.master||(global.get("store").val.template.master={parts:[]});global.get("store").val.template.master.parts.filter(function(el){return el.is}).map(function(el){return el.name})}function masterTemplateDirective($stateParams){return{template:"<div ng-bind-html='$ctrl.content|unsafe'></div>",bindToController:!0,scope:{},controllerAs:"$ctrl",controller:["$http","$stateParams","global",function($http,$stateParams,global){var self=this;$http.get("views/template/partials/Master/itemPage/"+$stateParams.id).then(function(response){console.log(response),self.content=response.data.html,console.log(response.data.titles),global.set("titles",response.data.titles)})}]}}function masterScheduleDirective($stateParams){return{bindToController:!0,scope:{master:"@"},controllerAs:"$ctrl",controller:masterScheduleCtrl,templateUrl:"components/CONTENT/master/masterSchedule.html"}}function masterScheduleCtrl($http,$stateParams,global){var self=this;console.log("init",self.master)}angular.module("gmall.directives").directive("masterItem",masterItemDirective).directive("masterDetailTemplate",masterTemplateDirective).directive("masterSchedule",masterScheduleDirective),masterItemCtrl.$inject=["Master","$stateParams","$q","$uibModal","global","exception","Stuff","Photo","$scope","$timeout","Confirm","SetCSS","$user","Workplace","$rootScope"],masterScheduleCtrl.$inject=["$http","$stateParams","global"]}(),function(){function catalogMainPageDirective(){return{scope:{},restrict:"E",bindToController:!0,controller:catalogMainPageCtrl,controllerAs:"$ctrl",templateUrl:"components/CONTENT/catalog/catalog.html"}}function catalogMainPageCtrl(global,Stuff){function forwardToSubsections(s){self.breadcrumbs.push(s),self.sectionsClass="animated slideOutLeft",s.class="animated slideInRight"}function forwardToCategories(sec,sub){self.breadcrumbs.push(sub),sec.class="animated slideOutLeft",sub.class="animated slideInRight"}function backInSection(s){s.class="animated slideOutRight",self.sectionsClass="animated slideInLeft"}function backInSubSection(sub,sec){sec.class="animated slideInLeft",sub.class="animated slideOutRight"}function backToCatalog(){self.breadcrumbs.length&&(self.breadcrumbs[self.breadcrumbs.length-1].class="animated slideOutRight",self.sectionsClass="animated slideInLeft",self.breadcrumbs.length=0)}function backToBC(i){i||(self.breadcrumbs[self.breadcrumbs.length-1].class="animated slideOutRight",self.breadcrumbs[self.breadcrumbs.length-2].class="animated slideInLeft",self.breadcrumbs.splice(self.breadcrumbs.length-1,1))}function getStuffs(category){self.category=category,Stuff.getList(null,{category:category._id}).then(function(res){self.items=res})}function getStuff(item,i){item.isOpen=!item.isOpen,item.isOpen&&(item.getData||(item.getData=!0,Stuff.getItem(item._id).then(function(res){console.log(res),self.items[i].desc=res.desc,self.items[i].desc1=res.desc1,self.items[i].desc2=res.desc2,self.items[i].gallery=res.gallery})))}var self=this;self.mobile=global.get("mobile").val,self.global=global,self.stuffs=[],self.currentState="section",self.sectionsClass,self.breadcrumbs=[],self.forwardToSubsections=forwardToSubsections,self.forwardToCategories=forwardToCategories,self.backInSection=backInSection,self.backInSubSection=backInSubSection,self.getStuffs=getStuffs,self.backToCatalog=backToCatalog,self.backToBC=backToBC,self.getStuff=getStuff,function(){self.sections=global.get("sections").val.filter(function(el){return el._id}),console.log(self.sections)}()}angular.module("gmall.directives").directive("catalogMainPage",catalogMainPageDirective),catalogMainPageCtrl.$inject=["global","Stuff"]}(),function(){function itemsList(){return{template:"<div ui-view></div><div></div>",bindToController:!0,scope:{},controllerAs:"$ctrl",controller:listCtrl}}function itemsDetail(){return{template:"<div></div>",bindToController:!0,scope:{},controllerAs:"$ctrl",controller:detailCtrl}}function listCtrl($scope,$http,$element,global,$state,$q,$anchorScroll,$timeout,$window,$compile,$rootScope,seoContent,$sce,$location){function setLabel(label){if(labelsFromQuery&&labelsFromQuery.length){var i=labelsFromQuery.indexOf(label);if(labelsFromQuery=[],i==-1&&labelsFromQuery.push(label),labelsFromQuery.length){var str=labelsFromQuery.reduce(function(s,el){return s&&(s+="__"),s+=el},"");$location.search("labels",str)}else $location.search("labels",null)}else $location.search("labels",label)}var self=this;self.global=global,self.$state=$state,self.$stateParams=$rootScope.$stateParams,self.setLabel=setLabel;var labelsFromQuery,query,labels="";self.$stateParams&&self.$stateParams.labels&&global.get("labels").val&&(labelsFromQuery=self.$stateParams.labels.split("__"),global.get("labels").val&&global.get("labels").val.length&&labelsFromQuery&&labelsFromQuery.length&&labelsFromQuery.forEach(function(name){var ll=global.get("labels").val.getOFA("name",name);ll&&(labels&&(labels+="__"),labels+=ll.name)}),
labels&&labels.length&&(query="labels="+labels),console.log(query));var waiting,lastElement,waitingDiv,td1,td2,td3,page=0,model=getModel($state),url="views/template/partials/"+model+".html",color=global.get("store").val.template.dimScreenColor?global.get("store").val.template.dimScreenColor:"#000000",BGcolor=global.get("store").val.template.dimScreenBGColor?global.get("store").val.template.dimScreenBGColor:"#F5F5F5",innerWaitingDiv=['<div style="width:100%;height:200px;background-color:'+BGcolor+";color:"+color+'" class="clearfix text-center">','<img src="/img/spinner.gif" style="margin-top: 70px">',"</div>"].join("");self.hideList=global.get("store").val.template[model+"List"].hideList,self.hideCart=!!global.get("store").val.template[model+"List"].hideCart&&global.get("store").val.template[model+"List"].hideCart,$q.when().then(function(){if(global.get("tempContent").val){if($state.current.name.indexOf(".item")<0&&$state.current.name.indexOf(".detail")<0){var html=global.get("tempContent").val;$("#tempContent").empty(),global.set("tempContent",null);var o={data:{html:html}};return tempTitles&&(o.data.titles=tempTitles),o}return null}return $http.get(url.trim()+(query?"?"+query:""))}).then(function(response){if(response){var linkFn=$compile(response.data.html),content=linkFn($scope);if($element.append(content),response.data.titles&&response.data.titles.title){for(var k in response.data.titles)if(response.data.titles[k])if("title"==k)global.get("titles").val[k]=response.data.titles[k];else if("canonical"==k)try{global.get("titles").val[k]=$sce.trustAsResourceUrl(response.data.titles[k])}catch(err){console.log(err)}else global.get("titles").val[k]=response.data.titles[k]}else{var key=model+"List",name=global.get("store").val.nameLists&&global.get("store").val.nameLists[key]?global.get("store").val.nameLists[key]:"list";seoContent.setDataList(model,name)}waitingDiv=$("#paginateData"+page),self.totalQty=waitingDiv.data("total"),self.currentQty=waitingDiv.data("qty"),self.page=waitingDiv.data("page"),self.lastItemId=waitingDiv.data("lastItemId"),td1=$("#td-list-1-items"),td2=$("#td-list-2-items"),td3=$("#td-list-3-items"),$timeout(function(){$anchorScroll(),lastElement=null!=self.lastItemId?$("#item-"+self.lastItemId):null});var addBlockAfterScroll=function(){!waiting&&lastElement&&$(lastElement).isOnScreen()&&self.currentQty<self.totalQty&&(waiting=!0,page++,$q.when().then(function(){return waitingDiv.html(innerWaitingDiv),$http.get(url.trim()+"?page="+page+(query?"&"+query:""))}).then(function(response){if(response){lastElement=null,waitingDiv.html("");var addHtml=angular.element(response.data.html),atd1=addHtml.find("#td-list-1-items").html(),atd2=addHtml.find("#td-list-2-items").html(),atd3=addHtml.find("#td-list-3-items").html();self.lastItemId=addHtml.find("#paginateData"+page).data("lastItemId"),self.currentQty+=addHtml.find("#paginateData"+page).data("qty"),td1.append(atd1),td2.append(atd2),td3.append(atd3),$timeout(function(){lastElement=null!=self.lastItemId?$("#item-"+self.lastItemId):null,waiting=!1},200)}}))};angular.element($window).on("scroll",addBlockAfterScroll),$scope.$on("$destroy",function(){angular.element($window).off("scroll",addBlockAfterScroll)}),$timeout(function(){$rootScope.$emit("$stateChangeEndToStuff")},100)}})}function detailCtrl($scope,$element,$compile,$http,$stateParams,$state,$anchorScroll,global,$q,$rootScope,$location,$timeout,$sce,localStorage){function openBlock(url){$timeout(function(){self.isOpen[url]?$location.search("block",url):$location.search("block",null)},200)}var self=this;self.global=global,$scope.global=global;var model=getModel($state);model=model[0].toUpperCase()+model.substr(1),$q.when().then(function(){if(global.get("tempContent").val){var html=global.get("tempContent").val;$("#tempContent").empty(),global.set("tempContent",null);var o={data:{html:html}};return tempTitles&&(o.data.titles=tempTitles),o}if($stateParams.id)var id=$stateParams.id;else{var likes=localStorage.get(global.get("store").val.subDomain+"-likes");if(likes&&likes.length)var id=likes.join("_");else var id="_"}return $http.get("views/template/partials/"+model+"/itemPage/"+id+".html")}).then(function(response){var appendContent=$compile(response.data.html)($scope);if($element.append(appendContent),$anchorScroll(),response.data.titles&&response.data.titles.title)for(var k in response.data.titles)if(response.data.titles[k])if("title"==k)response.data.titles[k].indexOf(global.get("titles").val[k])<0?global.get("titles").val[k]=response.data.titles[k]+". "+global.get("titles").val[k]:global.get("titles").val[k]=response.data.titles[k];else if("canonical"==k)try{global.get("titles").val[k]=$sce.trustAsResourceUrl(response.data.titles[k])}catch(err){console.log(err)}else global.get("titles").val[k]=response.data.titles[k];"Campaign"!=model||"Likes"!=model?$rootScope.$emit("$stateChangeEndToStuff"):$timeout(function(){$rootScope.$emit("$stateChangeEndToStuff")},600)}),$timeout(function(){self.$stateParams=$stateParams,$stateParams.block&&self.isOpen&&(self.isOpen[$stateParams.block]=!0)},500),self.openBlock=openBlock}function getModel($state){var model="news";return"lookbook"==$state.current.name||"lookbook.item"==$state.current.name?model="lookbook":"stat"==$state.current.name||"stat.item"==$state.current.name?model="stat":"additional"==$state.current.name||"additional.item"==$state.current.name?model="additional":"workplace"==$state.current.name||"workplace.item"==$state.current.name?model="workplace":"news"==$state.current.name||"news.item"==$state.current.name?model="news":"master"==$state.current.name||"master.item"==$state.current.name?model="master":"info"==$state.current.name||"info.item"==$state.current.name?model="info":"campaign"==$state.current.name||"campaign.detail"==$state.current.name?model="campaign":"likes"==$state.current.name&&(model="likes"),model}angular.module("gmall.services").directive("itemsList",itemsList).directive("itemsDetail",itemsDetail)}(),function(){function itemDirective(){return{scope:{},bindToController:!0,controller:itemCtrl,controllerAs:"$ctrl",template:'<div ng-include="::$ctrl.getContentUrl()"></div>'}}function itemCtrl($scope,Booking,UserEntry,$user,$element,$timeout,Stuff,Master,$stateParams,$state,$q,$uibModal,exception,global,$rootScope,$auth,Account,$http,CreateContent,$notification){function getContentUrl(){return"views/template/partials/dateTime/dateTime/dateTime"+(global.get("store").val.template.addcomponents.datetime.templ?global.get("store").val.template.addcomponents.datetime.templ:"")+".html"}function checkDisable(form){console.log(form)}function activate(){self.searchEnabled=!global.get("mobile").val,self.dateTimeImg=global.get("store").val.dateTimeImg?global.get("store").val.dateTimeImg:null,self.masterName=global.get("lang").val.masters,global.get("store").val.texts&&global.get("store").val.texts.masterName&&global.get("store").val.texts.masterName[global.get("store").val.lang]&&(self.masterName=global.get("store").val.texts.masterName[global.get("store").val.lang]),$timeout(function(){$($element).height($($element).parent().height()),$($element).find("#wrapper-for-entry1").height("100%"),self.currentBlock=0},1500),$(window).resize(function(){$($element).height($($element).parent().height()),$($element).find("#wrapper-for-entry1").height("100%"),blocks&&blocks[0]&&(widthBlock=$(blocks[0]).width())}),$(window).bind("orientationchange",function(event){$($element).height($($element).parent().height()),$($element).find("#wrapper-for-entry1").height("100%"),blocks&&blocks[0]&&(widthBlock=$(blocks[0]).width())}),$scope.$on("dateTime",function(e,argsObj){self.currentBlock=0;var stuff=null,master=null;if(argsObj&&(argsObj.stuff&&(stuff=argsObj.stuff),argsObj.master&&(master=argsObj.master)),self.name=global.get("user").val&&global.get("user").val.profile&&global.get("user").val.profile.fio?global.get("user").val.profile.fio:"",self.phone=global.get("user").val&&global.get("user").val.profile&&global.get("user").val.profile.phone?global.get("user").val.profile.phone:"1",opened){if(self.masters&&self.masters.length&&1==self.masters.length){if(master=self.masters[0]._id,setMaster(master),Booking.filterListServices(self.masters,self.items,self.selectedStuff),stuff)if(self.selectedStuff.length=0,stuff.getDataForBooking)addStuff(stuff.getDataForBooking());else{var s=Stuff.getDataForBooking.call(stuff);addStuff(s)}argsObj&&argsObj.date&&(self.td=new Date(argsObj.date),setDataForDay(argsObj.date)),argsObj&&argsObj.timePart&&(argsObj.timePart.master=self.masters.getOFA("_id",argsObj.timePart.master),self.timePart=argsObj.timePart)}else{if(master&&(setMaster(master),self.selectedStuff.length=0,Booking.filterListServices(self.masters,self.items,self.selectedStuff)),stuff)if(self.selectedStuff.length=0,stuff.getDataForBooking)addStuff(stuff.getDataForBooking());else{var s=Stuff.getDataForBooking.call(stuff);addStuff(s)}argsObj&&argsObj.date&&(self.td=new Date(argsObj.date),setDataForDay(argsObj.date)),argsObj&&argsObj.timePart&&(argsObj.timePart.master=self.masters.getOFA("_id",argsObj.timePart.master),self.timePart=argsObj.timePart,console.log(self.timePart)),Booking.filterListServices(self.masters,self.items,self.selectedStuff)}self.showMasterBlock=displaySelectMasterBlock()}else opened=!0,$q.when().then(function(){return getMasters()}).then(function(){return getItems()}).then(function(){if(self.masters&&self.masters.length&&1==self.masters.length&&(master=self.masters[0]._id),master)return setMaster(master),Booking.filterListServices(self.masters,self.items,self.selectedStuff)}).then(function(){if(!stuff)return Booking.filterListServices(self.masters,self.items,self.selectedStuff);if(stuff.getDataForBooking)addStuff(stuff.getDataForBooking());else{addStuff(Stuff.getDataForBooking.call(stuff))}}).then(function(){self.showMasterBlock=displaySelectMasterBlock()}).then(function(){argsObj&&argsObj.date&&(self.td=new Date(argsObj.date),setDataForDay(argsObj.date)),argsObj&&argsObj.timePart&&(argsObj.timePart.master=self.masters.getOFA("_id",argsObj.timePart.master),self.timePart=argsObj.timePart)}).catch(function(err){console.log(err),err&&exception.catcher("init")(err)})})}function getMasters(){return $q.when().then(function(){return global.get("masters").val}).then(function(data){self.masters=data.map(function(m){return m}).filter(function(m){return m.stuffs&&m.stuffs.length})}).catch(function(err){exception.catcher("получение списка мастеров")(err)})}function setMaster(master){self.masters.forEach(function(m){m._id==master?(m.selected=!0,self.selectedMaster=m,m.show=!0):(m.selected=null,m.show=!1)}),self.timePart=null}function getItems(){return $q.when().then(function(){return self.Items.getServicesForOnlineEntry()}).then(function(res){return self.items=res}).catch(function(err){exception.catcher("получение списка услуг")(err)})}function back(){self.currentBlock=0}function forward(){self.currentBlock=0}function authComplite(){self.currentBlock=0}function addStuff(stuff){if(self.selectedStuff.map(function(s){return s.name}).indexOf(stuff.name)>-1)return void console.log("already is in list");self.selectedMaster&&"any"!=self.selectedMaster._id||(self.selectedStuff.length=0),self.selectedStuff.push(stuff),Booking.filterListServices(self.masters,self.items,self.selectedStuff),self.showMasterBlock=displaySelectMasterBlock(),self.showMasterBlock||selectMaster("any"),self.timePart=null,self.stuffForEntry=null,back()}function deleteStuff(i,event){event.stopPropagation(),self.selectedStuff.splice(i,1),Booking.filterListServices(self.masters,self.items,self.selectedStuff),self.showMasterBlock=displaySelectMasterBlock(),!self.showMasterBlock&&self.selectedStuff.length&&selectMaster("any"),console.log(!self.selectedStuff.length&&self.selectedMaster&&"any"==self.selectedMaster._id),!self.selectedStuff.length&&self.selectedMaster&&"any"==self.selectedMaster._id&&clearMaster(),self.timePart=null}function clearStuff(){self.selectedStuff.length=0,Booking.filterListServices(self.masters,self.items,self.selectedStuff),self.showMasterBlock=displaySelectMasterBlock(),self.showMasterBlock||selectMaster("any"),!self.selectedStuff.length&&self.selectedMaster&&"any"==self.selectedMaster._id&&clearMaster(),self.timePart=null}function getStuffDuration(stuff){return stuff.timePart?stuff.timePart*minTimePart:30}function selectMaster(master){master&&"any"==master?self.selectedMaster={_id:"any",name:global.get("langForm").val.noObject}:self.masters.forEach(function(m){master?master._id==m._id?(m.selected=!0,self.selectedMaster=m):m.selected=null:m.selected=!0}),Booking.filterListServices(self.masters,self.items,self.selectedStuff),forward(),self.timePart=null}function clearMaster(){self.selectedMaster=null,self.masters.forEach(function(m){m.selected=null}),Booking.filterListServices(self.masters,self.items,self.selectedStuff),self.timePart=null}function selectMasterFromList(){if(self.masters.forEach(function(m){m.nearestBlocks=null}),Booking.filterListServices(self.masters,self.items,self.selectedStuff),self.currentBlock=2,!global.get("store").val.timeTable||global.get("store").val.timeTable.some(function(day){return day.is})){var dayOfWeek,monthStr,date=self.td,month=date.getMonth(),day=date.getDate(),year=date.getFullYear(),queryArr={$or:[]},helpQuery=[],helpQueryO={},today=new Date;self.hours=today.getHours(),self.minutes=Math.ceil(today.getMinutes()/15)-1;for(var startBlockForCurrentDay=4*self.hours+self.minutes,currentMonth=today.getMonth(),currentday=today.getDate(),currentDayOfYear=Booking.getDayOfYear(currentMonth,currentday-1),daysOfMonth=Booking.getDaysOfMonth(month,year),storeTimeTable=global.get("store").val.timeTable,i=0;i<7;i++){for(date=new Date(year,month,day),dayOfWeek=date.getDay();!storeTimeTable[dayOfWeek].is;)day++,day>daysOfMonth&&(day=1,month++,daysOfMonth=Booking.getDaysOfMonth(month,year),month>11&&(month=0,year++)),date=new Date(year,month,day),dayOfWeek=date.getDay();monthStr=month,month<10&&(monthStr="0"+month),day<10&&(day="0"+day),queryArr.$or.push({date:"date"+year+monthStr+day}),helpQuery.push({y:year,m:month,d:day,dayOfWeek:dayOfWeek,dayOfYear:Booking.getDayOfYear(month,day-1),query:"date"+year+monthStr+day}),helpQueryO["date"+year+monthStr+day]=i,day++,day>daysOfMonth&&(day=1,month++,daysOfMonth=Booking.getDaysOfMonth(month,year),month>11&&(month=0,year++))}return Booking.getList({page:0,rows:3e3},queryArr).then(function(entries){var entriesForMaster=entries.reduce(function(o,item){return o[item.master]||(o[item.master]=[]),o[item.master].push(item),o},{}),durationStuffs=self.selectedStuff.reduce(function(s,item){return s+=item.timePart},0);self.masters.forEach(function(m){if(m.nearestBlocks=[],m.show&&self.selectedStuff.length){for(var entrs=[],i=0;i<7;i++)entrs.push([]);entriesForMaster[m._id]&&entriesForMaster[m._id].forEach(function(e){helpQueryO[e.date],entrs[helpQueryO[e.date]].push(e)});for(var startBlock,endBlock,blocks=[],i=0;i<7&&!blocks.length;i++)if(!m.timeTable||!m.timeTable[helpQuery[i].dayOfYear]||m.timeTable[helpQuery[i].dayOfYear].is){if(startBlock=0==i&&helpQuery[i].dayOfYear==currentDayOfYear?startBlockForCurrentDay:0,endBlock=95,storeTimeTable&&storeTimeTable[helpQuery[i].dayOfWeek]){if(storeTimeTable[helpQuery[i].dayOfWeek].start){var tempStart=4*storeTimeTable[helpQuery[i].dayOfWeek].start;tempStart>startBlock&&(startBlock=tempStart)}if(storeTimeTable[helpQuery[i].dayOfWeek].end){var tempEnd=4*storeTimeTable[helpQuery[i].dayOfWeek].end;tempEnd<endBlock&&(endBlock=tempEnd)}}if(m.timeTable&&m.timeTable[helpQuery[i].dayOfYear]){if(m.timeTable[helpQuery[i].dayOfYear].s){var tempStart=4*m.timeTable[helpQuery[i].dayOfYear].s;tempStart>startBlock&&(startBlock=tempStart)}if(m.timeTable[helpQuery[i].dayOfYear].e){var tempEnd=4*m.timeTable[helpQuery[i].dayOfYear].e;tempEnd<endBlock&&(endBlock=tempEnd)}}var entryTimeTable=angular.copy(Booking.timeParts);entrs[i].forEach(function(e){for(var ii=e.start;ii<e.start+e.qty;ii++)entryTimeTable[ii].busy=!0});for(var durationCheck,ii=startBlock;ii<=endBlock;ii++)if(!entryTimeTable[ii].busy){if(durationCheck=!0,durationStuffs)for(var iii=ii+1;iii<ii+durationStuffs;iii++)if(iii>=endBlock||entryTimeTable[iii].busy){durationCheck=!1;break}if(!durationCheck)continue;var o={i:ii,date:helpQuery[i].query};if(!blocks.length){var dd=new Date(helpQuery[i].y,helpQuery[i].m,helpQuery[i].d);o.dateString=moment(dd).format("LL")}if(blocks.push(o),blocks.length>=5)break}if(blocks.length>=5)break}m.nearestBlocks=blocks}})})}}function displaySelectMasterBlock(){if(self.masters&&self.masters.length){return self.masters.some(function(m){return m.show&&!m.workplace})}}function otherFreeTime(master){selectMaster(master),handleTimePart()}function setDay(td){self.selectedMaster&&self.selectedStuff&&self.selectedStuff.length?self.currentBlock=4:back(),td&&(self.td=td),setDataForDay(self.td),self.timePart=null}function setDataForDay(td){var date=new Date(td),currentdate=new Date;self.currentDay=currentdate.getDate(),self.hours=currentdate.getHours(),self.minutes=Math.ceil(currentdate.getMinutes()/15)-1,month=date.getMonth(),day=date.getDate(),year=date.getFullYear(),self.currentTimeBlock=self.currentDay==day?4*self.hours+self.minutes:0,month<10&&(month="0"+month),day<10&&(day="0"+day),getBookingData({date:"date"+year+month+day})}function getBookingData(query){var d=new Date(self.td),dayOfWeek=d.getDay(),month=d.getMonth(),day=d.getDate(),currentDayOfYear=Booking.getDayOfYear(month,day-1),storeSchedule=angular.copy(global.get("store").val.timeTable[dayOfWeek]);storeSchedule||(storeSchedule={start:0,end:95}),storeSchedule.start*=4,storeSchedule.end*=4;var masterSchedule;self.selectedMaster&&self.selectedMaster.timeTable&&self.selectedMaster.timeTable[currentDayOfYear]&&(masterSchedule=angular.copy(self.selectedMaster.timeTable[currentDayOfYear]),masterSchedule.s*=4,masterSchedule.e*=4);var lastBlock=95;return Booking.getList({page:0,rows:10},query).then(function(entries){var stuffsDuration=self.selectedStuff.reduce(function(d,item){return d+(item.timePart?item.timePart:4)},0);self.entryTimeTable=angular.copy(Booking.timeParts),self.entryTimeTable.forEach(function(b,i){storeSchedule.is&&i>=storeSchedule.start&&i<storeSchedule.end&&(!masterSchedule||masterSchedule.is&&i>=masterSchedule.s&&i<masterSchedule.e)?b.show=!0:b.show=!1,self.entryTimeTable[i-1]&&self.entryTimeTable[i-1].show&&!self.entryTimeTable[i].show&&(lastBlock=i),b.busy=!0,b.date=query.date}),self.masters.forEach(function(master){if(master.selected&&master.show||self.selectedMaster&&"any"==self.selectedMaster._id&&self.selectedStuff[0]&&master.stuffs.indexOf(self.selectedStuff[0]._id)>-1){master.entryTimeTable=angular.copy(Booking.timeParts),entries.forEach(function(e){if(e.master==master._id)for(var i=e.start;i<e.start+e.qty;i++)master.entryTimeTable[i].busy=!0});var tempSchedule;"any"===self.selectedMaster._id&&master.timeTable&&master.timeTable[currentDayOfYear]&&(tempSchedule=angular.copy(master.timeTable[currentDayOfYear]),tempSchedule.s*=4,tempSchedule.e*=4),master.entryTimeTable.forEach(function(block,i){if(i>self.currentTimeBlock&&self.entryTimeTable[i].show&&!block.busy&&self.entryTimeTable[i].busy){if("any"===self.selectedMaster._id&&tempSchedule&&(!tempSchedule.is||i<tempSchedule.s||i>=tempSchedule.e))return;for(var l=i+stuffsDuration,j=i;j<l;j++)if(master.entryTimeTable[j]&&master.entryTimeTable[j].busy)return;self.entryTimeTable[i].busy=!1,self.entryTimeTable[i].master=master}})}else master.entryTimeTable=[]});for(var i=lastBlock-stuffsDuration+1;i<=lastBlock;i++)self.entryTimeTable[i].busy=!0})}function setTimePart(part,master){try{var month=Number(part.date.substring(8,10)),day=Number(part.date.substring(10)),monthD=self.td.getMonth(),dayD=self.td.getDate();month==monthD&&day==dayD||self.td.setMonth(month,day)}catch(err){console.log(err)}self.timePart=part,master&&(self.selectedMaster=master,master.selected=!0,master.show=!0,self.timePart.master=master,Booking.filterListServices(self.masters,self.items,self.selectedStuff)),forward()}function filterTimePart(item){return item.show&&!item.busy&&self.timePartsI.indexOf(item.i)>-1}function filterNearesBlock(item){return self.timePartsI.indexOf(item.i)>-1}function filterTimePartForAll(){if(self.entryTimeTable){return!self.entryTimeTable.some(function(item,i){return item.show&&!item.busy})}}function orderService(form){function checkOut(userEntry){prepareMessage(self.selectedStuff,userEntry,self.timePart.date,self.timePart.i);var entry={services:self.selectedStuff,user:userEntry,remind:self.remind,timeRemind:self.timeRemind},entries=[],val=self.timePart.i;$q.when().then(function(){entry.services.forEach(function(s,i){var o={start:val,qty:s.timePart,stuffName:s.name,stuffNameL:s.nameL,stuffLink:s.link,backgroundcolor:s.backgroundcolor,masterName:self.timePart.master.name,masterNameL:self.timePart.master.nameL,masterUrl:self.timePart.master.url,service:{_id:s._id,name:s.name},user:entry.user};0==i&&entry.remind&&entry.timeRemind&&(o.remind=entry.remind,o.timeRemind=entry.timeRemind),o.master=self.timePart.master._id,o.date=self.timePart.date,o.tz=tz,s.price&&(o.paySum=s.price),s.priceSale&&(o.paySum=s.priceSale),s.currency&&(o.currency=s.currency),entries.push(o),val+=s.timePart});var actions=entries.map(function(e){return Booking.save(e).$promise});return $q.all(actions)}).then(function(res){if($http.get("/api/newRecordOnSite/"+global.get("store").val._id+"/"+global.get("store").val.seller._id),console.log("global.get('store').val.submitDateTime",global.get("store").val.submitDateTime),!global.get("store").val.submitDateTime)return console.log("client"),sendMessage()}).then(function(){if(self.selectedMaster&&self.selectedMaster.notification)if(1==self.selectedMaster.notification){if(console.log("admin notification==1"),self.selectedMaster.phone)return sendMessage(self.selectedMaster.phone)}else{if(2==self.selectedMaster.notification)return console.log("admin notification==2"),$q.when().then(function(){if(self.selectedMaster.phone)return sendMessage(self.selectedMaster.phone)}).then(function(){if(global.get("store").val.seller.phone)return sendMessage(global.get("store").val.seller.phone)});if(0==self.selectedMaster.notification&&(console.log("admin notification==0"),global.get("store").val.seller.phone))return sendMessage(global.get("store").val.seller.phone)}else if(console.log("admin default"),global.get("store").val.seller.phone)return sendMessage(global.get("store").val.seller.phone)}).then(function(res){clearStuff(),clearMaster(),self.td=new Date,self.timePart=null,$rootScope.checkedMenuChange("entryTime",!1);try{var entry=angular.copy(entries[0]),mm=self.masters.getOFA("_id",entry.master);entry.masterName=mm?mm.name:"?????",entry.dateForNote=self.dataForSend.date;var content=CreateContent.dateTimeNote(entry),o={addressee:"seller",type:"dateTime",content:content,seller:global.get("store").val.seller._id}}catch(err){console.log(err)}return $q(function(resolve,reject){$notification.save(o,function(res){exception.showToaster("note",global.get("langNote").val.sent,""),resolve()},function(err){exception.catcher("error")(err),resolve()})})}).then(function(res){var pap=global.get("paps").val.getOFA("action","booking");pap&&pap.url&&$state.go("thanksPage",{id:pap.url})}).catch(function(err){err&&(console.log(err),err.data&&"time_is_buzy"===err.data.message&&($rootScope.$broadcast("time_is_buzy"),$rootScope.checkedMenuChange("entryTime",!1)),exception.catcher("запись на время")(err))})}function checkUserEntry(phone){return $q.when().then(function(){return $user.getItem(phone,"profile.phone")}).then(function(res){return res?res:null})}function createUserEntry(name,phone){var email=phone+"@gmall.io",user={email:email,name:name,profile:{phone:phone,fio:name}};return $auth.signup(user).then(function(response){if(console.log(response),response&&response.data&&response.data.token){if("update"==response.data.token)throw null;return $auth.setToken(response),Account.getProfile()}throw response}).then(function(response){console.log(response),response&&(global.set("user",response.data),global.get("functions").val.logged())}).catch(function(err){err&&exception.catcher("new client")(err)})}if(!form.name.$valid){var err=global.get("langError").val.entername;return void exception.catcher(global.get("lang").val.error)(err)}if(!form.phoneForm.$valid){var err=global.get("langError").val.phonenotformat;return void exception.catcher(global.get("lang").val.error)(err)}if(form.$valid){if(!self.selectedMaster){var err=global.get("langError").val.notMaster;return void exception.catcher(global.get("lang").val.error)(err)}if(!self.selectedStuff||!self.selectedStuff.length){var err=global.get("langError").val.notService;return void exception.catcher(global.get("lang").val.error)(err)}if(!self.timePart){var err=global.get("langError").val.notTime;return void exception.catcher(global.get("lang").val.error)(err)}var user=global.get("user").val,phone=(global.get("store").val,self.phone),name=self.name;if(!phone)return void console.log("нет телефона");if(self.date&&self.date.getTimezoneOffset())var tz=self.date.getTimezoneOffset()/60;else var dTemp=new Date,tz=dTemp.getTimezoneOffset()/60;user?$q.when().then(function(){return checkUserEntry(phone)}).then(function(res){if(res&&res._id&&res._id!=user._id)throw"такой телефон уже зарегистрирован. разлогинтесь и при записи на него вы получите sms с кодом авторизации"}).then(function(){checkOut({_id:global.get("user").val._id,name:name,phone:phone,email:global.get("user").val.email})}).then(function(){if(name!=user.name||phone!=user.pfone){global.get("user").val.profile.fio=name,global.get("user").val.profile.phone=phone;var o={_id:global.get("user").val._id,profile:global.get("user").val.profile};$user.save({update:"profile"},o,function(){})}}).catch(function(err){exception.catcher(global.get("lang").val.error)(err)}):$q.when().then(function(){return checkUserEntry(phone)}).then(function(res){return res&&res._id?(sendCodeToPhone(),dateTimeAuth(res),null):createUserEntry(self.name,phone)}).then(function(){if(global.get("user").val){checkOut({_id:global.get("user").val._id,name:global.get("user").val.profile.fio||global.set("user").val.name,phone:global.get("user").val.profile.phone,email:global.get("user").val.email})}})}}function handleTimePart(){self.currentBlock=4,setDataForDay(self.td)}function clearTimePart(){self.timePart=null}function dateTimeAuth(user){self.authWithEmail=!1,self.currentBlock=5}function sendCodeToPhone(){var o={phone:self.phone};self.sendCodeDisable=!0,$q.when().then(function(){return $http.post("/api/users/sendSMS",o)}).then(function(){exception.showToaster("info","send code","success"),$timeout(function(){self.sendCodeDisable=!1},1e4)}).catch(function(err){err&&exception.catcher("send code")(err),$timeout(function(){self.sendCodeDisable=!1},1e4)})}function verifyCode(code){var o={code:code,phone:self.phone};self.sendVerifyCodeDisable=!0,$q.when().then(function(){return $http.post("/api/users/verifySMScode",o)}).then(function(response){if(console.log(response),exception.showToaster("info","verify code","success"),$timeout(function(){self.sendVerifyCodeDisable=!1},1e4),response&&response.data&&response.data.token)return $auth.setToken(response),Account.getProfile();throw"wrong response"}).then(function(response){response&&(authComplite(),global.set("user",response.data),global.get("functions").val.logged())}).catch(function(err){err&&exception.catcher("verify code")(err),$timeout(function(){self.sendVerifyCodeDisable=!1},1e4)})}function sendMessage(phone){return phone&&(self.dataForSend.phone=phone),self.dataForSend.phone?$q.when().then(function(){return console.log("self.dataForSend.phone",self.dataForSend.phone),$http.post("/api/users/sendMessageAboutDeal",self.dataForSend)}).catch(function(err){err&&exception.catcher("send message")(err)}):void console.log(self.dataForSend)}function prepareMessage(stuffs,user,date,start){if(self.dataForSend={},stuffs&&stuffs.length&&!(!user&user._id)&&user.phone){var hour=Math.floor(start/4),minutes=start%4*15,year=date.substring(4,8),month=date.substring(8,10),day=date.substring(10);try{date=new Date(year,month,day,hour,minutes),date=moment(date).format("lll"),self.dataForSend.name=user.name,self.dataForSend.userId=user._id,self.dataForSend.phone=user.phone,self.dataForSend.text=global.get("langOrder").val.recordedOn+" "+stuffs[0].name.toUpperCase()+" "+global.get("langOrder").val.onn+" "+date,self.dataForSend.date=date}catch(err){console.log(err)}}}var self=this;self.moment=moment;var blocks,widthBlock,opened;self.Items=Stuff,self.items=[],self.minDurationForService=global.get("store").val.seller.minDurationForService||15;var delta=0;switch(self.minDurationForService){case 30:delta=1;break;case 60:delta=3;break;case 90:delta=5;break;case 120:delta=7;break;default:delta=0}self.timePartsI=[];for(var i=0;i<96;i=i+1+delta)self.timePartsI.push(i);self.selectedStuff=[],self.timeTable15min=Booking.timeTable15min,self.timeParts=Booking.timeParts,self.timeRemindArr=Booking.timeRemindArr;var month,day,year;self.moment=moment,self.global=global,self.mobile=global.get("mobile").val,self.today=moment(Date.now()),self.dateEnd=moment(self.today+2592e6),self.countries=[{name:"Afghanistan",code:"AF"},{name:"Åland Islands",code:"AX"},{name:"Albania",code:"AL"},{name:"Algeria",code:"DZ"},{name:"American Samoa",code:"AS"},{name:"Andorra",code:"AD"},{name:"Angola",code:"AO"},{name:"Anguilla",code:"AI"},{name:"Antarctica",code:"AQ"},{name:"Antigua and Barbuda",code:"AG"},{name:"Argentina",code:"AR"},{name:"Armenia",code:"AM"},{name:"Aruba",code:"AW"},{name:"Australia",code:"AU"},{name:"Austria",code:"AT"},{name:"Azerbaijan",code:"AZ"},{name:"Bahamas",code:"BS"},{name:"Bahrain",code:"BH"},{name:"Bangladesh",code:"BD"}],self.td=new Date,self.altInputFormats=["M!/d!/yyyy"];var today=new Date;self.dateOptions={minDate:new Date,maxDate:(new Date).setDate(today.getDate()+30)},self.getContentUrl=getContentUrl,self.back=back,self.forward=forward,self.authComplite=authComplite,self.addStuff=addStuff,self.deleteStuff=deleteStuff,self.clearStuff=clearStuff,self.getStuffDuration=getStuffDuration,self.selectMaster=selectMaster,self.clearMaster=clearMaster,self.selectMasterFromList=selectMasterFromList,self.displaySelectMasterBlock=displaySelectMasterBlock,self.otherFreeTime=otherFreeTime,self.setDay=setDay,self.handleTimePart=handleTimePart,self.setTimePart=setTimePart,self.clearTimePart=clearTimePart,self.filterTimePart=filterTimePart,self.filterNearesBlock=filterNearesBlock,self.filterTimePartForAll=filterTimePartForAll,self.orderService=orderService,self.sendCodeToPhone=sendCodeToPhone,self.verifyCode=verifyCode,self.sendMessage=sendMessage,self.checkDisable=checkDisable,self.$onInit=function(){activate()}}angular.module("gmall.directives").directive("dateTimeEntry",itemDirective),itemCtrl.$inject=["$scope","Booking","UserEntry","$user","$element","$timeout","Stuff","Master","$stateParams","$state","$q","$uibModal","exception","global","$rootScope","$auth","Account","$http","CreateContent","$notification"]}(),function(){function categoryService($resource,$uibModal,$q){function save(){return Items.save.apply(this,arguments).$promise.then(function(){})}function select(categoryId,selectSection,sections,forGroupStuffs){return $q(function(resolve,reject){var options={animation:!0,templateUrl:"components/sections/selectCategoryModal.html",controller:selectCategoryCtrl,size:"lg",resolve:{categoryId:function(){return categoryId},selectSection:function(){return selectSection},sections:function(){return sections?sections:null},forGroupStuffs:function(){return forGroupStuffs?forGroupStuffs:null}},controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(selectedItem){resolve(selectedItem)},function(){reject()})})}function selectWithSection(){return $q(function(resolve,reject){var options={animation:!0,
templateUrl:"components/sections/selectCategoryWithSectionModal.html",controller:selectCategoryWithSectionCtrl,size:"lg",controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(selectedItem){resolve(selectedItem)},function(){reject()})})}var Items=$resource("/api/collections/Category/:_id",{_id:"@_id"});return{get:Items.get,query:Items.query,save:save,delete:Items.delete,select:select,selectWithSection:selectWithSection}}function selectCategoryCtrl($q,$uibModalInstance,Sections,categoryId,selectSection,sections,forGroupStuffs){var self=this;self.categoryId=categoryId,self.selectSection=selectSection,$q.when().then(function(){return sections?sections:Sections.getSections()}).then(function(sections){self.sections=sections.filter(function(s){return forGroupStuffs?s.groupStuffs:!s.groupStuffs})}),self.ok=function(selectedCategory){$uibModalInstance.close(selectedCategory)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}}function selectCategoryWithSectionCtrl($q,$uibModalInstance,Sections){var self=this;$q.when().then(function(){return Sections.getSections()}).then(function(sections){self.sections=sections}),self.ok=function(selectedCategory){$uibModalInstance.close(selectedCategory)},self.okSection=function(section){var categories=section.categories;$uibModalInstance.close(categories)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}}angular.module("gmall.services").service("Category",categoryService),categoryService.$inject=["$resource","$uibModal","$q"],selectCategoryCtrl.$inject=["$q","$uibModalInstance","Sections","categoryId","selectSection","sections","forGroupStuffs"],selectCategoryWithSectionCtrl.$inject=["$q","$uibModalInstance","Sections"]}(),function(){function itemService($resource,$uibModal,$q){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}return paginate||(paginate={page:0}),Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete)}function getItem(id){function getItemComplete(response){return response}return Items.get({_id:id}).$promise.then(getItemComplete)}function create(){return $q(function(resolve,reject){var options={animation:!0,restrict:"E",templateUrl:"components/SEO/seopages/createSeopage.html",controller:createCtrl,size:"lg",controllerAs:"$ctrl"};$uibModal.open(options).result.then(function(name){name?resolve(name.substring(0,100)):reject("empty")},function(err){reject()})})}function createCtrl($uibModalInstance,Category){function getUrl(){return self.data.category&&self.data.category._id,"/"}function clearUrl(){self.data={}}function selectCategory(){Category.select(null,!0).then(function(category,section){console.log(category),self.data.category=category})}var self=this;self.name="",self.data={category:null},self.selectCategory=selectCategory,self.getUrl=getUrl,self.clearUrl=clearUrl,self.ok=function(){$uibModalInstance.close(self.name)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}}var Items=$resource("/api/collections/Seopage/:_id",{_id:"@_id"});return{get:Items.get,getList:getList,getItem:getItem,save:Items.save,delete:Items.delete,create:create}}angular.module("gmall.services").service("Seopage",itemService),itemService.$inject=["$resource","$uibModal","$q"]}(),function(){function itemService($resource,$uibModal,$q){function getList(){function getListComplete(response){return response&&response.length&&response.shift(),response}return Items.query().$promise.then(getListComplete)}var Items=$resource("/api/collections/Keywords/:_id",{_id:"@_id"});return{getList:getList,save:Items.save,delete:Items.delete}}angular.module("gmall.services").service("Keywords",itemService),itemService.$inject=["$resource","$uibModal","$q"]}(),function(){function itemDirective(){return{scope:{},rescrict:"E",bindToController:!0,controller:itemCtrl,controllerAs:"$ctrl",templateUrl:"components/PROMO/campaign/campaignItem.html"}}function expirationDateDirective(){return{scope:{date:"@"},rescrict:"E",bindToController:!0,controller:expirationDateCtrl,controllerAs:"$ctrl",templateUrl:function(){return"components/PROMO/campaign/expirationDate.html"}}}function expirationDateCtrl($interval,global){function activate(){var d=new Date(self.date);d.setHours(23),d.setMinutes(59),d.setSeconds(59),self.dateEnd=Math.round((Date.parse(d)-Date.now())/1e3);$interval(function(){--self.dateEnd<=0||(self.seconds=Math.floor(self.dateEnd%60),self.minutes=Math.floor(self.dateEnd/60%60),self.hours=Math.floor(self.dateEnd/3600%24),self.days=Math.floor(self.dateEnd/3600/24),self.sseconds=self.seconds<10?"0"+self.seconds:self.seconds,self.mminutes=self.minutes<10?"0"+self.minutes:self.minutes,self.hhours=self.hours<10?"0"+self.hours:self.hours,self.ddays=self.days<10?"0"+self.days:self.days)},1e3)}function gethumanizeDay(d){return 1==d||21==d||31==d||41==d||51==d||61==d||71==d||71==d||91==d||101==d||121==d||131==d||141==d||151==d||161==d||171==d||181==d||191==d||201==d||221==d||231==d||241==d||251==d||261==d||271==d||281==d||291==d||301==d||321==d||331==d||341==d||351==d||361==d?global.get("lang").val.day:d>1&&d<5||d>21&&d<25||d>31&&d<35||d>41&&d<45||d>51&&d<55||d>61&&d<65||d>71&&d<75||d>81&&d<85||d>91&&d<95||d>101&&d<105||d>121&&d<125||d>131&&d<135||d>141&&d<145||d>151&&d<155||d>161&&d<165||d>171&&d<175||d>181&&d<185||d>191&&d<195||d>201&&d<205||d>221&&d<225||d>231&&d<235||d>241&&d<245||d>251&&d<255||d>261&&d<265||d>271&&d<275||d>281&&d<285||d>291&&d<295||d>301&&d<305||d>321&&d<325||d>331&&d<335||d>341&&d<345||d>351&&d<355||d>361&&d<365?global.get("lang").val.days:0==d||d>=5&&d<21||d>=25&&d<31||d>=35&&d<41||d>=45&&d<51||d>=65&&d<71||d>=75&&d<81||d>=85&&d<91||d>=95&&d<101||d>=105&&d<121||d>=125&&d<131||d>=135&&d<141||d>=145&&d<151||d>=165&&d<171||d>=175&&d<181||d>=185&&d<191||d>=195&&d<201||d>=205&&d<221||d>=225&&d<231||d>=235&&d<241||d>=245&&d<251||d>=265&&d<271||d>=275&&d<281||d>=285&&d<291||d>=295&&d<301||d>=305&&d<321||d>=325&&d<331||d>=335&&d<341||d>=345&&d<351||d>=365&&d<371?global.get("lang").val.dayss:void 0}function gethumanizeHour(h){return 1==h||21==h?global.get("lang").val.hour:h>1&&h<5||h>21&&h<25?global.get("lang").val.hours:0==h||h<21?global.get("lang").val.hourss:void 0}function gethumanizeMin(h){return 1==h||21==h||31==h||41==h||51==h?global.get("lang").val.minute_a:h>1&&h<5||h>21&&h<25||h>31&&h<35||h>41&&h<45||h>51&&h<55?global.get("lang").val.minutes:0==h||h<21||h>24&&h<31||h>34&&h<41||h>44&&h<51||h>54&&h<61?global.get("lang").val.minutess:void 0}function gethumanizeSec(h){return 1==h||21==h||31==h||41==h||51==h?global.get("lang").val.second:h>1&&h<5||h>21&&h<25||h>31&&h<35||h>41&&h<45||h>51&&h<55?global.get("lang").val.seconds:0==h||h<21||h>24&&h<31||h>34&&h<41||h>44&&h<51||h>54&&h<61?global.get("lang").val.secondss:void 0}var self=this;self.gethumanizeDay=gethumanizeDay,self.gethumanizeHour=gethumanizeHour,self.gethumanizeMin=gethumanizeMin,self.gethumanizeSec=gethumanizeSec,this.$onInit=function(){activate()}}function itemCtrl(Campaign,$stateParams,$state,$q,$uibModal,global,exception,Stuff,News,$window,FilterTags,BrandTags,Category,$timeout,$interval,$scope,Brand){function activate(){return getItem($stateParams.id).then(function(){self.campaignStuff="stuffs"}).catch(function(err){exception.catcher("получение компании")(err)})}function getItem(id){return self.Items.getItem(id).then(function(data){self.showCondition={percent:!1,sum:!1},self.showCondition[data.condition]=!0,self.item=data,self.item.cartType&&(self.cartType=self.item.cartType),console.log(self.cartType)}).catch(function(err){return $q.reject(err)})}function saveField(field,defer){if("dateStart"==field){var d=new Date(self.item[field]);d.setHours(0),d.setMinutes(0),d.setSeconds(1),self.item[field]=d,console.log(self.item[field])}else if("dateEnd"==field){var d=new Date(self.item[field]);d.setHours(23),d.setMinutes(59),d.setSeconds(59),self.item[field]=d,console.log(self.item[field])}defer=defer||0,setTimeout(function(){var o={_id:self.item._id};o[field]="brandTags"==field||"categories"==field||"tags"==field||"brands"==field||"conditionBrandTags"==field||"conditionCategories"==field||"conditionTags"==field||"conditionBrands"==field?self.item[field].map(function(b){return b._id}):self.item[field],self.Items.save({update:field},o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)},function(err){console.log(err)})},defer)}function createNews(){var news={name:self.item.name,link:"/campaign/"+self.item.url,img:self.item.img,desc:self.item.desc,actived:!1};$q.when().then(function(){return News.save(news).$promise}).then(function(res){$state.go("frame.news",{url:res.id})}).catch(function(err){exception.catcher("создание новости")(err)})}function selectFilterTag(){$q.when().then(function(){return FilterTags.selectFilterTag()}).then(function(tag){self.item.tags||(self.item.tags=[]),self.item.tags.push(tag),saveField("tags")}).catch(function(err){exception.catcher("выбор характеристики")(err)})}function selectBrandTag(){$q.when().then(function(){return BrandTags.selectBrandTag()}).then(function(tag){self.item.brandTags||(self.item.brandTags=[]),self.item.brandTags.push(tag),saveField("brandTags")}).catch(function(err){exception.catcher("выбор коллекции")(err)})}function selectBrand(){$q.when().then(function(){return Brand.select()}).then(function(tag){self.item.brands||(self.item.brands=[]),self.item.brands.push(tag),saveField("brands")}).catch(function(err){exception.catcher("выбор коллекции")(err)})}function selectCategory(){$q.when().then(function(){return Category.selectWithSection()}).then(function(c){c&&(self.item.categories||(self.item.categories=[]),"object"==typeof c&&c.length?c.forEach(function(cat){self.item.categories.getOFA("_id",cat._id)||self.item.categories.push(cat)}):self.item.categories.getOFA("_id",c._id)||self.item.categories.push(c),saveField("categories"))}).catch(function(err){err&&exception.catcher("выбор категории")(err)})}function selectStuff(){$q.when().then(function(){return Stuff.selectItem({actived:!0})}).then(function(stuff){self.item.stuffs||(self.item.stuffs=[]),self.item.stuffs.push(stuff),saveField("stuffs")}).catch(function(err){err&&exception.catcher("выбор товара")(err)})}function selectConditionFilterTag(){$q.when().then(function(){return FilterTags.selectFilterTag()}).then(function(tag){self.item.conditionTags||(self.item.conditionTags=[]),self.item.conditionTags.push(tag),saveField("conditionTags")}).catch(function(err){exception.catcher("выбор характеристики")(err)})}function selectConditionBrandTag(){$q.when().then(function(){return BrandTags.selectBrandTag()}).then(function(tag){self.item.conditionBrandTags||(self.item.conditionBrandTags=[]),self.item.conditionBrandTags.push(tag),saveField("conditionBrandTags")}).catch(function(err){exception.catcher("выбор коллекции")(err)})}function selectConditionBrand(){$q.when().then(function(){return Brand.select()}).then(function(tag){self.item.conditionBrands||(self.item.conditionBrands=[]),self.item.conditionBrands.push(tag),saveField("conditionBrands")}).catch(function(err){exception.catcher("выбор коллекции")(err)})}function selectConditionCategory(){$q.when().then(function(){return Category.selectWithSection()}).then(function(c){c&&(self.item.conditionCategories||(self.item.conditionCategories=[]),"object"==typeof c&&c.length?c.forEach(function(cat){self.item.conditionCategories.getOFA("_id",cat._id)||self.item.conditionCategories.push(cat)}):self.item.conditionCategories.getOFA("_id",c._id)||self.item.conditionCategories.push(c),saveField("conditionCategories"))}).catch(function(err){err&&exception.catcher("выбор категории")(err)})}function selectConditionStuff(){$q.when().then(function(){return Stuff.selectItem()}).then(function(stuff){self.item.conditionStuffs||(self.item.conditionStuffs=[]),self.item.conditionStuffs.push(stuff),saveField("conditionStuffs")}).catch(function(err){exception.catcher("выбор товара")(err)})}function deleteBrandTag(i){self.item.brandTags.splice(i,1),saveField("brandTags")}function deleteBrand(i){self.item.brands.splice(i,1),saveField("brands")}function deleteCategory(i){self.item.categories.splice(i,1),saveField("categories")}function deleteFilterTag(i){self.item.tags.splice(i,1),saveField("tags")}function deleteStuff(i){self.item.stuffs.splice(i,1),saveField("stuffs")}function deleteConditionBrandTag(i){self.item.conditionBrandTags.splice(i,1),saveField("conditionBrandTags")}function deleteConditionBrand(i){self.item.conditionBrands.splice(i,1),saveField("conditionBrands")}function deleteConditionCategory(i){self.item.conditionCategories.splice(i,1),saveField("conditionCategories")}function deleteConditionFilterTag(i){self.item.conditionTags.splice(i,1),saveField("conditionTags")}function deleteConditionStuff(i){self.item.conditionStuffs.splice(i,1),saveField("conditionStuffs")}function onSelected(){setTimeout(function(){$(":focus").blur()},50)}function showConditionInput(val){for(var key in self.showCondition)key==val?$timeout(function(){self.showCondition[val]=!0},530):self.showCondition[key]=!1}function dispalyCondition(){if(self.item)return!!(self.item.conditionTags&&self.item.conditionTags.length||self.item.conditionBrandTags&&self.item.conditionBrandTags.length||self.item.conditionStuffs&&self.item.conditionStuffs.length||self.item.conditionCategories&&self.item.conditionCategories.length)||void 0}console.log("Campaign");var self=this;self.Items=Campaign,self.mobile=global.get("mobile").val,self.global=global,self.cartType="good",self.cartTypes=[{type:"good",name:"товар"},{type:"service",name:"услуга"},{type:"info",name:"инфо"},{type:"media",name:"медиа"}],self.saveField=saveField,self.createNews=createNews,self.selectFilterTag=selectFilterTag,self.selectBrandTag=selectBrandTag,self.selectBrand=selectBrand,self.selectCategory=selectCategory,self.selectStuff=selectStuff,self.selectConditionFilterTag=selectConditionFilterTag,self.selectConditionBrandTag=selectConditionBrandTag,self.selectConditionBrand=selectConditionBrand,self.selectConditionCategory=selectConditionCategory,self.selectConditionStuff=selectConditionStuff,self.deleteBrandTag=deleteBrandTag,self.deleteCategory=deleteCategory,self.deleteFilterTag=deleteFilterTag,self.deleteStuff=deleteStuff,self.deleteConditionBrandTag=deleteConditionBrandTag,self.deleteConditionBrand=deleteConditionBrand,self.deleteBrand=deleteBrand,self.deleteConditionCategory=deleteConditionCategory,self.deleteConditionFilterTag=deleteConditionFilterTag,self.deleteConditionStuff=deleteConditionStuff,self.onSelected=onSelected,self.showConditionInput=showConditionInput,self.dispalyCondition=dispalyCondition,activate(),$scope.$on("changeLang",function(){activate()})}function campaignItemTemplateDirective(global){return{scope:{},bindToController:!0,controller:itemCtrl,controllerAs:"$ctrl",templateUrl:"views/template/partials/campaign/campaignDetail"+(global.get("store").val.template.campaignTempl?global.get("store").val.template.campaignTempl:"")+".html",restrict:"E"}}angular.module("gmall.services").directive("campaignItem",itemDirective).directive("campaignItemTemplate",campaignItemTemplateDirective).directive("expirationDate",expirationDateDirective),expirationDateCtrl.$inject=["$interval","global"],itemCtrl.$inject=["Campaign","$stateParams","$state","$q","$uibModal","global","exception","Stuff","News","$window","FilterTags","BrandTags","Category","$timeout","$interval","$scope","Brands"]}(),function(){function staticPageDirective(){return{scope:{},bindToController:!0,controller:staticPageCtrl,controllerAs:"$ctrl",templateUrl:"components/staticPage/staticPage.html"}}function staticPageTemplateDirective($stateParams){return{bindToController:!0,scope:{},controllerAs:"$ctrl",controller:["$scope","$element","$compile","$http","$stateParams","global",function($scope,$element,$compile,$http,$stateParams,global){var self=this;$http.get("views/template/partials/Stat/itemPage/"+$stateParams.id).then(function(response){self.content=response.data.html;var linkFn=$compile(response.data.html),content=linkFn($scope);$element.append(content),global.set("titles",response.data.titles)})}]}}function staticPageCtrl(Stat,$stateParams,global,Photo,$q,$uibModal,Stuff,FilterTags,BrandTags,Brands,Campaign,Category,$timeout,$scope,Confirm,SetCSS){function activate(){Stat.get({_id:$stateParams.id}).$promise.then(function(res){res&&!res.blocks&&(res.blocks=[],saveField("blocks",[]));var bl=res.blocks.filter(function(b){return b});bl.length!=res.blocks.length&&(saveField("blocks",bl),res.blocks=bl),console.log(res.blocks),res.blocks.forEach(function(b,i){b&&(b.i=i)}),res.blocks.sort(function(a,b){return a.index-b.index}),self.item=res})}function setStyles(block,idx){$q.when().then(function(){return SetCSS.setStyles(block)}).then(function(){saveField("blocks."+block.i,block)})}function saveField(field,value,defer,indexImgs){field.indexOf("index")>-1&&(self.item.blocks.sort(function(a,b){return a.index-b.index}),self.item.blocks.forEach(function(b,i){b.i=i}),value=self.item.blocks,field="blocks");setTimeout(function(){var o={_id:self.item._id};o[field]=value;var query={update:field};field.indexOf(".imgs")>-1&&void 0!==indexImgs&&(query.indexImgs=indexImgs),self.Items.save(query,o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})},100)}function refreshBlocks(){return self.Items.getItem($stateParams.id).then(function(data){data.blocks.forEach(function(b,i){b.i=i,b.desc||(b.desc=""),b.descL||(b.descL={}),b.desc1||(b.desc1=""),b.desc1L||(b.desc1L={}),b.name||(b.name=""),b.nameL||(b.nameL={}),b.name1||(b.name1=""),b.name1L||(b.name1L={}),b.videoLink||(b.videoLink="")}),self.item.blocks=data.blocks})}function addBlock(type){return $scope.$broadcast("addNewBlock",{type:type}),void(self.newBlock=null)}function deleteBlock(block,index){var o={_id:self.item._id};o.id=block.id;var update={update:"id",embeddedName:"blocks"};update.embeddedPull=!0,console.log(update,o),Confirm("подтверждаете?").then(function(){return self.Items.save(update,o).$promise}).then(function(res){self.item.blocks.splice(index,1);var images=[];if(block.img&&images.push(block.img),block.video&&images.push(block.video),block.videoCover&&images.push(block.videoCover),block.imgs&&block.imgs.length&&block.imgs.forEach(function(im){im.img&&images.push(im.img)}),images.length)return Photo.deleteFiles("Stat",images)}).then(function(){activate()})}function deleteSlide(block,index){Photo.deleteFiles("Stat",[block.imgs[index].img]).then(function(response){block.imgs.splice(index,1),self.saveField("blocks."+block.i+".imgs",block.imgs,null,index)},function(err){console.log(err)})}function editSlide(block,index){$uibModal.open({animation:!0,templateUrl:"components/staticPage/editSlide.html",controller:function(slide,$uibModalInstance){var self=this;self.item=slide,self.ok=function(){console.log(self.item),$uibModalInstance.close(self.item)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl",size:"lg",resolve:{slide:function(){return block.imgs[index]}}}).result.then(function(slide){self.saveField("blocks."+block.i+".imgs",block.imgs)},function(){})}function filterBlocks(item){return keyParts.indexOf(item.key)>-1}function addItemInBlock(block,$index){var model;switch(block.type){case"stuffs":model=Stuff;break;case"campaign":model=Campaign;break;case"filterTags":model=FilterTags;break;case"brandTags":model=BrandTags;break;case"brands":model=Brans;break;case"categories":model=Category}$q.when().then(function(){return model.select()}).then(function(item){block[block.type]||(block[block.type]=[]);var img,link,url=item.url;switch(block.type){case"stuffs":img=item.gallery[0]&&item.gallery[0].thumb?item.gallery[0].thumb:null,link=item.link,item.artikul&&(item.name+=" "+item.artikul);break;case"campaign":img=item.img?item.img:null,link="campaign/"+item.url;break;case"filterTags":img=item.img?item.img:null,link="/group/category?queryTag="+item.url;break;case"brandTags":img=item.img?item.img:null,link="/group/category?brandTag="+item.url;break;case"brands":img=item.img?item.img:null,link="/group/category?brand="+item.url;break;case"categories":img=item.img?item.img:null,link="/group/"+item.url}void 0!==$index?block.imgs[$index]={name:item.name,img:img,link:link,url:url}:(block.imgs||(block.imgs=[]),block.imgs.push({name:item.name,img:img,link:link,url:url})),saveField("blocks."+block.i+".imgs",block.imgs)})}function movedItem(block,item){return $timeout(function(){saveField("blocks."+block.i+".imgs",block.imgs)},100),item}function deleteItemFromBlock(block,$index){block.imgs.splice($index,1),saveField("blocks."+block.i+".imgs",block.imgs)}function changeItem(block,$index){addItemInBlock(block,$index)}var self=this;self.Items=Stat,self.type="Stat",self.global=global,self.listOfBlocksForStaticPage=listOfBlocksForAll,self.listOfBlocks=listOfBlocksForAll,self.animationTypes=animationTypes,self.setStyles=setStyles,self.saveField=saveField,self.newBlock=null,self.addBlock=addBlock,self.refreshBlocks=refreshBlocks,self.deleteBlock=deleteBlock,self.deleteSlide=deleteSlide,self.editSlide=editSlide,self.filterBlocks=filterBlocks,self.addItemInBlock=addItemInBlock,self.movedItem=movedItem,self.deleteItemFromBlock=deleteItemFromBlock,self.changeItem=changeItem,activate(),$scope.$on("changeLang",function(){activate()});var keyParts=global.get("store").val.template.stat.parts.filter(function(el){return el.is}).map(function(el){return el.name})}angular.module("gmall.directives").directive("staticPage",staticPageDirective).directive("staticPageTemplate",staticPageTemplateDirective),staticPageCtrl.$inject=["Stat","$stateParams","global","Photo","$q","$uibModal","Stuff","FilterTags","BrandTags","Brands","Campaign","Category","$timeout","$scope","Confirm","SetCSS"]}(),function(){function serviceFunction($resource,$uibModal,$q){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}function getListFailed(error){return console.log("XHR Failed for getNews."+error),$q.reject(error)}return Items.query({perPage:paginate.rows,page:paginate.page,query:query}).$promise.then(getListComplete).catch(getListFailed)}function getItem(id){function getItemComplete(response){return response}function getItemFailed(error){return $q.reject(error)}return console.log(id),Items.get({_id:id}).$promise.then(getItemComplete).catch(getItemFailed)}function create(){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/PROMO/coupon/createCoupon.html",controller:function($uibModalInstance){var self=this;self.name="",self.ok=function(){$uibModalInstance.close(self.name)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl"}).result.then(function(name){name?resolve(name.substring(0,100)):reject("empty")},function(err){reject(err)})})}var Items=$resource("/api/collections/Coupon/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,query:Items.query,get:Items.get,save:Items.save,delete:Items.delete,create:create}}angular.module("gmall.services").service("Coupon",serviceFunction),serviceFunction.$inject=["$resource","$uibModal","$q"]}(),function(){function itemDirectiveTemplate(global){return{scope:{},bindToController:!0,controller:itemCtrl,controllerAs:"$ctrl",templateUrl:"views/template/partials/paps/paps.html",restrict:"E"}}function itemDirective(){return{scope:{},bindToController:!0,controller:itemCtrl,controllerAs:"$ctrl",templateUrl:"components/paps/papsItem.html"}}function itemCtrl(Paps,$stateParams,$q,$uibModal,exception,global,$timeout,$scope,$anchorScroll){function activate(){return $anchorScroll(),getItem($stateParams.id).then(function(){}).catch(function(err){err=err.data||err,exception.catcher("получение post action page")(err)})}function getItem(id){return self.Items.getItem(id).then(function(data){return self.item=data,self.item}).catch(function(err){return $q.reject(err)})}function saveField(field,defer){defer=defer||0,setTimeout(function(){var o={_id:self.item._id};o[field]=self.item[field],self.Items.save({update:field},o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})},defer)}var self=this;self.Items=Paps,self.mobile=global.get("mobile").val,self.saveField=saveField,activate(),$scope.$on("changeLang",function(){activate()})}angular.module("gmall.services").directive("papsItem",itemDirective).directive("papsItemTemplate",itemDirectiveTemplate),itemCtrl.$inject=["Paps","$stateParams","$q","$uibModal","exception","global","$timeout","$scope","$anchorScroll"]}(),function(){function serviceBooking($resource,$uibModal,$q,global,$http,exception){function getCheckOutLiqpayHtml(entryM,user){var entry=angular.copy(entryM);return user&&(entry.user=user),$q.when().then(function(){return $http.post("/api/orders/checkoutLiqpayEntry",entry)}).then(function(res){res&&res.data.html&&(entryM.checkOutLiqpayHtml=res.data.html,entryM.checkOutLiqpayHtmlIs=!0)}).then(function(res){}).catch(function(err){exception.catcher("error")(err)})}function getDatesForWeek(date,num){num||(num=7);var ds=[],d=new Date(date),dw=date.getDay();0==dw&&(dw=7);for(var i=1;i<=num;i++){d=new Date(date),d.setTime(d.getTime()+864e5*(i-dw)),d.setHours(0);var month=d.getMonth(),day=d.getDate(),year=d.getFullYear(),dayOfYear=getDayOfYear(month,day-1);month<10&&(month="0"+month),day<10&&(day="0"+day);var o={date:"date"+year+month+day,d:d,dayOfYear:dayOfYear,month:moment(d).format("MMMM")};ds.push(o)}return ds}function getDateFromEntry(entry){var hour=Math.floor(entry.start/4),minutes=entry.start%4*15,year=entry.date.substring(4,8),month=entry.date.substring(8,10),day=entry.date.substring(10);try{return new Date(year,month,day,hour,minutes)}catch(err){return console.log(err),"error handle date"}}function getDateFromStrDateEntry(str){var year=str.substring(4,8),month=str.substring(8,10),day=str.substring(10);try{return new Date(year,month,day)}catch(err){return console.log(err),"error handle date"}}function getDateStringFromEntry(entry,format){var hour=Math.floor(entry.start/4),minutes=entry.start%4*15,year=entry.date.substring(4,8),month=entry.date.substring(8,10),day=entry.date.substring(10);try{if(format)var date=new Date(year,month,day);else{var date=new Date(year,month,day,hour,minutes);date=moment(date).format("LLL")}return date}catch(err){return console.log(err),"error handle date"}}function sendMessage(entry,user){entry=JSON.parse(JSON.stringify(entry)),user&&(entry.user=user);var dataForSend={},hour=Math.floor(entry.start/4),minutes=entry.start%4*15,year=entry.date.substring(4,8),month=entry.date.substring(8,10),day=entry.date.substring(10);try{var date=new Date(year,month,day,hour,minutes);date=moment(date).format("lll"),dataForSend.name=entry.user.name,dataForSend.userId=entry.user._id,dataForSend.phone=entry.user.phone,dataForSend.text=global.get("langOrder").val.recordedOn+" "+entry.service.name.toUpperCase()+" "+global.get("langOrder").val.onn+" "+date,dataForSend.date=date}catch(err){console.log(err)}console.log(dataForSend),dataForSend&&dataForSend.date&&$q.when().then(function(){return $http.post("/api/users/sendMessageAboutDeal",dataForSend)}).catch(function(err){err&&exception.catcher("send message")(err)})}function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}paginate||(paginate={page:0});var data={perPage:paginate.rows,page:paginate.page,query:query};return global.get("crawler")&&global.get("crawler").val&&(data.subDomain=global.get("store").val.subDomain),Items.query(data).$promise.then(getListComplete)}function getItem(id){function getItemComplete(response){return response}return Items.get({_id:id}).$promise.then(getItemComplete)}function newBooking(master,timePart,services,date,entryDate,start){return $q(function(resolve,reject){$uibModal.open({animation:!0,size:"lg",templateUrl:"components/ORDERS/online/newBooking.html",controller:function($uibModalInstance,global,$timeout,$user,exception,master,timePart,services,Booking,entryDate,start){function addingNewUser(){if(self.addingUser=!self.addingUser,self.addingUser&&self.cachePhone){var newVal=self.cachePhone.replace(pattern,"");if(console.log(newVal),console.log(newVal.length==self.cachePhone.length),newVal.length==self.cachePhone.length){for(var tempPhone=self.cachePhone.substring(0,10),i=tempPhone.length;i<10;i++)tempPhone+="0";self.oldPhone=tempPhone}else self.userName=self.cachePhone}}function refreshUsers(phone){phone.length<3||(self.cachePhone=phone,searchUser(phone))}function searchUser(phone){var q={$or:[{"profile.phone":phone},{name:phone},{email:phone}]};$user.getList({page:0,rows:20},q).then(function(res){self.users=res.map(function(user){if(user.profile&&user.profile.phone&&"+"==user.profile.phone[0]&&(user.profile.phone=user.profile.phone.substring(1)),user.profile&&user.profile.phone&&user.profile.phone.length<10)for(;user.profile.phone.length<10;)user.profile.phone+="0";return user.profile&&user.profile.phone&&10==user.profile.phone.length&&(user.profile.phone="38"+user.profile.phone),user.phone=user.profile?user.profile.phone:null,user})})}function clearUser(){self.user=null}function addUser(){console.log("add user");var user={name:self.userName,profile:{phone:self.phoneCode.substring(1)+self.oldPhone.substring(0,10),fio:self.userName},store:global.get("store").val._id};return $q.when().then(function(){return $user.checkPhoneForExist(user.profile.phone)}).then(function(res){if(res&&res.exist)throw"phone exist in base";if(user.email)return $user.checkEmailForExist(user.email);user.email=user.profile.phone+"@gmall.io"}).then(function(res){if(res&&res.exist)throw"email exist in base"}).then(function(){return $user.save(user).$promise}).then(function(res){user._id=res._id?res._id:res.id,self.addingUser=!1,self.userName="",self.user=user,console.log(user),self.oldPhone=""}).catch(function(err){err&&exception.catcher("новый клиент")(err)})}function allFieldCheck(){return!self.services.length&&!self.reserved||!self.user&&!self.schedule&&!self.reserved}function checkNameNewUser(){return!self.userName||self.userName.length<3}function moveEtry(){for(var busy=!1,i=start;i<start+self.entryToMove.qty;i++)if(master.entryTimeTable[i].busy||master.entryTimeTable[i].out){busy=!0;break}if(busy)return void $uibModalInstance.dismiss("не достаточно времени");var o={_id:self.entryToMove._id};o.date=entryDate,o.start=start,o.move=!1;Booking.save({update:"start move date"},o,function(err){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)}),$uibModalInstance.close()}var self=this;self.global=global,self.date=moment(date).format("L"),self.phoneCodes=global.get("store").val.phoneCodes?global.get("store").val.phoneCodes:[{code:"+38",country:"Украина"}],self.phoneCode=global.get("store").val.phoneCode?global.get("store").val.phoneCode.code:"+38",self.hour=parseInt(timePart/4),self.minutes=15*(timePart-4*self.hour)?15*(timePart-4*self.hour):"00",self.timeRemindArr=timeRemindArr,self.schedule=!0,self.mastersInEntry=[],master.services.forEach(function(s){s.used=!1,s.duration=15*s.timePart}),self.userName="",self.master=master,self.oldPhone="",self.services=services.length?services:[],self.entriesToMove=null,self.entryToMove=null;var pattern=/[^0-9]*/g;if(global.get("store").val.seller&&global.get("store").val.seller.minDurationForService&&Number(global.get("store").val.seller.minDurationForService/15)){var delta=Number(global.get("store").val.seller.minDurationForService/15);1==delta&&(delta=0,console.log(delta)),self.timeDurationdArr=timeDurationdArr.filter(function(p){return!(p.part%delta)})}else self.timeDurationdArr=timeDurationdArr;self.searchUser=searchUser,
self.clearUser=clearUser,self.allFieldCheck=allFieldCheck,self.addUser=addUser,self.checkNameNewUser=checkNameNewUser,self.refreshUsers=refreshUsers,self.moveEtry=moveEtry,self.addingNewUser=addingNewUser,function(){var query={query:{master:master._id,move:!0}};Booking.query(query,function(res){res&&res.length&&(res.shift(),self.entriesToMove=res.map(function(e){return e.name=e.service.name+" "+Booking.getDateStringFromEntry(e),e}))}),self.masters=global.get("masters").val.filter(function(m){return m._id!=master._id})}(),self.ok=function(){var item={remind:self.remind,timeRemind:self.timeRemind,schedule:self.schedule,setColor:self.setColor};if(self.services.length)item.services=self.services;else{if(!self.reserved)return;item.services=[{_id:"reserved",name:"reserved",timePart:self.reserved}]}self.user&&self.user._id?(item.user={_id:self.user._id,name:self.user.name,email:self.user.email},self.user.profile&&self.user.profile.phone&&(item.user.phone=self.user.profile.phone)):self.schedule?item.user={_id:"schedule",name:"schedule"}:self.reserved&&(item.user={_id:"reserved",name:"reserved"}),self.mastersInEntry.length&&(item.masters=self.mastersInEntry),$uibModalInstance.close(item)},self.cancel=function(){$uibModalInstance.dismiss()}},controllerAs:"$ctrl",resolve:{master:function(){return master},timePart:function(){return timePart},services:function(){return services},entryDate:function(){return entryDate},start:function(){return start}}}).result.then(function(item){resolve(item)},function(err){reject(err)})})}function editBooking(entry,masters){return $q(function(resolve,reject){$uibModal.open({animation:!0,size:"lg",templateUrl:"components/ORDERS/online/editBooking.html",controller:function(global,$uibModalInstance,$user,Booking,$timeout,UserEntry,exception,entry,masters,Confirm){function _setTimeParts(){return timeTable15min.map(function(t,i){var busy=!1;if(self.master.entryTimeTable[i].out)busy=!0;else if(self.master.entryTimeTable[i].busy&&self.master.entryTimeTable[i].entry._id!=self.entry._id)busy=!0;else for(var j=i+1;j<i+self.qty;j++)(!self.master.entryTimeTable[j]||self.master.entryTimeTable[j].out||self.master.entryTimeTable[j].busy&&self.master.entryTimeTable[j].entry._id!=self.entry._id)&&(busy=!0);return{part:i,time:t,busy:busy}})}function addNewUser(user){if(user&&(self.newUser=user),!(self.entry.users&&self.entry.users.length&&self.entry.users.some(function(u){return u._id==self.newUser._id}))){var o={_id:self.newUser._id,phone:self.newUser.phone,name:self.newUser.name,email:self.newUser.email};self.entry.users.push(o),saveField("users")}}function deleteUser(i){Confirm("удалить?").then(function(){self.entry.users.splice(i,1),saveField("users")})}function refreshUsers(phone){phone.length<3||(self.cachePhone=phone,searchUser(phone))}function searchUser(phone){var q={$or:[{"profile.phone":phone},{name:phone},{email:phone}]};$user.getList({page:0,rows:20},q).then(function(res){self.users=res.map(function(user){if(user.profile&&user.profile.phone&&"+"==user.profile.phone[0]&&(user.profile.phone=user.profile.phone.substring(1)),user.profile&&user.profile.phone&&user.profile.phone.length<10)for(;user.profile.phone.length<10;)user.profile.phone+="0";return user.profile&&user.profile.phone&&10==user.profile.phone.length&&(user.profile.phone="38"+user.profile.phone),user.phone=user.profile?user.profile.phone:null,user})})}function addUser(){var user={name:self.userName,profile:{phone:self.phoneCode.substring(1)+self.oldPhone.substring(0,10),fio:self.userName},store:global.get("store").val._id};return $q.when().then(function(){return $user.checkPhoneForExist(user.profile.phone)}).then(function(res){if(res&&res.exist)throw"phone exist in base";if(user.email)return $user.checkEmailForExist(user.email);user.email=user.profile.phone+"@gmall.io"}).then(function(res){if(res&&res.exist)throw"email exist in base"}).then(function(){return $user.save(user).$promise}).then(function(res){user._id=res._id?res._id:res.id,self.user={_id:user._id,name:user.name,email:user.email,phone:user.profile.phone},addNewUser(self.user),self.addingUser=!1,self.userName="",self.oldPhone=""}).catch(function(err){err&&exception.catcher("новый клиент")(err)})}function actived(){self.user=Object.assign({},entry.user),self.user.phone&&(self.splitPoint=self.user.phone.length-10,self.phoneCode="+"+self.user.phone.substring(0,self.splitPoint),self.user.phone=self.user.phone.substring(self.splitPoint)),self.mastersAdditional=global.get("masters").val.filter(function(m){return m._id!=self.entry.master._id})}function updateUser(){self.editingUser=!1;var o={_id:entry.user._id};return o["profile.phone"]=self.phoneCode.substring(1)+self.user.phone,o["profile.fio"]=self.user.name,o.email=self.user.email,update="profile.phone profile.fio email",$q.when().then(function(){if(o["profile.phone"])return $user.checkPhoneForExist(o["profile.phone"],entry.user._id);throw"phone is empty"}).then(function(res){if(res&&res.exist)throw"phone exist in base";if(o.email)return $user.checkEmailForExist(o.email,entry.user._id);o.email=o["profile.phone"]+"@gmall.io"}).then(function(res){if(res&&res.exist)throw"email exist in base"}).then(function(){return $user.save({update:update},o).$promise}).then(function(){entry.user=self.user,entry.user.phone=o["profile.phone"],saveField("user")}).catch(function(err){err&&exception.catcher("обновление данных")(err)})}function recordAgreed(user){delay||(delay=!0,$timeout(function(){delay=!1},2e3),entry.confirm=Date.now(),saveField("confirm"),Booking.sendMessage(entry,user))}function saveField(field){var o={_id:entry._id};o[field]=entry[field],Booking.save({update:field},o,function(err){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})}function changeDuration(){var delta=self.qty-self.entry.qty;if(delta<0){for(var i=self.entry.start+self.qty;i<self.entry.start+self.entry.qty;i++)self.master.entryTimeTable[i].busy=!1,delete self.master.entryTimeTable[i].entry,delete self.master.entryTimeTable[i].noBorder,console.log(i);self.entry.qty=self.qty,oldEntry.qty=self.qty,saveField("qty"),self.timeParts=_setTimeParts()}else{for(var start=self.entry.start+self.entry.qty,busy=!1,i=start;i<start+delta;i++)if(!self.master.entryTimeTable[i]||self.master.entryTimeTable[i].busy||self.master.entryTimeTable[i].out){busy=!0;break}if(busy)exception.catcher("изменение продолжительности")("недостаточно свободного времени"),self.qty=self.entry.qty;else{console.log(start,start+delta),self.master.entryTimeTable[start-1]&&(self.master.entryTimeTable[start-1].noBorder=!0);for(var i=start;i<start+delta;i++)console.log(i),self.master.entryTimeTable[i].busy=!0,self.master.entryTimeTable[i].entry=self.entry,self.master.entryTimeTable[i].noBorder=i<start+delta-1;self.entry.qty=self.qty,oldEntry.qty=self.qty,saveField("qty"),self.timeParts=_setTimeParts()}}}function changeStartPart(){var delta=self.entry.start-self.startPart,part={busy:!1,i:0,master:self.master._id};if(delta>0){for(var i=0;i<self.entry.qty;i++){var j=self.startPart+i;self.master.entryTimeTable[j]=self.master.entryTimeTable[j+delta],self.master.entryTimeTable[j].i=j}for(var i=self.startPart+self.entry.qty;i<self.startPart+self.entry.qty+delta;i++)self.master.entryTimeTable[i].busy&&self.master.entryTimeTable[i].entry&&self.master.entryTimeTable[i].entry._id==self.entry._id&&(self.master.entryTimeTable[i]=angular.copy(part),self.master.entryTimeTable[i].i=i)}else{for(var i=self.entry.qty;i>0;i--){var j=self.startPart+i-1;self.master.entryTimeTable[j]=self.master.entryTimeTable[j+delta],self.master.entryTimeTable[j].i=j}for(var i=self.entry.start;i<self.entry.start-delta;i++)self.master.entryTimeTable[i].busy&&self.master.entryTimeTable[i].entry&&self.master.entryTimeTable[i].entry._id==self.entry._id&&(self.master.entryTimeTable[i]=angular.copy(part),self.master.entryTimeTable[i].i=i)}self.entry.start=self.startPart,self.hour=parseInt(self.entry.start/4),self.minutes=15*(self.entry.start-4*self.hour),saveField("start")}function moveEntry(){self.entry.move=!self.entry.move,self.saveField("move"),self.entry.move&&$uibModalInstance.close()}function changeTimeFilter(p){return!(p.busy||p.part%delta)}function changeService(){self.service&&(entry.service={_id:self.service._id,name:self.service.name},self.service.backgroundcolor&&(entry.service.backgroundcolor=self.service.backgroundcolor),saveField("service"),entry.stuffName=self.service.name,saveField("name"),entry.stuffNameL=self.service.nameL,saveField("stuffNameL"),entry.stuffLink=self.service.link,saveField("stuffLink"))}var self=this;self.master=masters[entry.master],self.global=global,self.moment=moment,self.entry=entry;var currentDate=Booking.getDateStringFromEntry(entry,!0);self.dateEntry=moment(currentDate).format("LL")+","+moment(currentDate).format("dddd");var oldEntry=angular.copy(entry);self.qty=oldEntry.qty,self.remind=entry.remind,self.timeRemind=entry.timeRemind,self.hour=parseInt(entry.start/4),self.minutes=15*(entry.start-4*self.hour),self.timeRemindArr=timeRemindArr;var delta=0;if(global.get("store").val.seller&&global.get("store").val.seller.minDurationForService&&Number(global.get("store").val.seller.minDurationForService/15)){var delta=Number(global.get("store").val.seller.minDurationForService/15);1==delta&&(delta=0,console.log(delta)),self.timeDurationdArr=timeDurationdArr.filter(function(p){return!(p.part%delta)})}else self.timeDurationdArr=timeDurationdArr;self.phoneCodes=global.get("store").val.phoneCodes?global.get("store").val.phoneCodes:[{code:"+38",country:"Украина"}],self.phoneCode=global.get("store").val.phoneCode?global.get("store").val.phoneCode.code:"+38";var update="";self.updateUser=updateUser,self.recordAgreed=recordAgreed,self.saveField=saveField,self.changeDuration=changeDuration,self.changeStartPart=changeStartPart,self.moveEntry=moveEntry,self.timeParts=_setTimeParts(),self.changeTimeFilter=changeTimeFilter,self.addNewUser=addNewUser,self.refreshUsers=refreshUsers,self.deleteUser=deleteUser,self.addUser=addUser,self.changeService=changeService,self.startPart=oldEntry.start,actived();var delay;self.ok=function(){update="",$uibModalInstance.close({action:"save",update:update})},self.delete=function(){Confirm("удалить?").then(function(){$uibModalInstance.close({action:"delete"})})},self.cancel=function(){$uibModalInstance.dismiss()}},controllerAs:"$ctrl",resolve:{entry:function(){return entry},masters:function(){return masters}}}).result.then(function(action){resolve(action)},function(){reject()})})}function filterListServices(masters,items,selectedStuff){selectedStuff||(selectedStuff=[]),selectedStuff=selectedStuff.filter(function(s){return s});var stuffs=null,selectedMaster=masters.filter(function(m){return m.selected});stuffs=selectedMaster&&selectedMaster.length?selectedMaster[0].stuffs:masters.filter(function(m){return selectedStuff.length?(m.show=selectedStuff.every(function(s){return m.stuffs.indexOf(s._id)>-1}),m.show):(m.show=!0,!0)}).reduce(function(a,item){return Array.prototype.push.apply(a,item.stuffs),a},[]),selectedStuff&&selectedStuff.length&&masters.forEach(function(m){m.show=selectedStuff.every(function(s){return m.stuffs.indexOf(s._id)>-1})}),items.forEach(function(s){stuffs&&selectedMaster.length?stuffs.indexOf(s._id)>-1?s.show=!0:s.show=!1:s.show=!0})}function getDayOfYear(selectedMonth,day){return 1==selectedMonth?31+day:2==selectedMonth?60+day:3==selectedMonth?91+day:4==selectedMonth?121+day:5==selectedMonth?152+day:6==selectedMonth?182+day:7==selectedMonth?213+day:8==selectedMonth?244+day:9==selectedMonth?274+day:10==selectedMonth?305+day:11==selectedMonth?335+day:day}function getDaysOfMonth(x,y){return 28+(x+Math.floor(x/8))%2+2%x+Math.floor((1+(y%100+2)%(y%100+1)*(1-(y%4+2)%(y%4+1))+(1-(y%400+2)%(y%400+1)))/x)+Math.floor(1/x)-Math.floor(((y%100+2)%(y%100+1)*(1-(y%4+2)%(y%4+1))+(1-(y%400+2)%(y%400+1)))/x)}function selectService(items){return $uibModal.open({animation:!0,size:"lg",windowClass:"modalProject",templateUrl:"components/ORDERS/online/selectServiceInSite.html",controller:function($uibModalInstance,global,$timeout,items){var self=this;self.global=global,self.items=items,self.ok=function(item){$uibModalInstance.close(item)},self.cancel=function(){$uibModalInstance.dismiss()}},controllerAs:"$ctrl",resolve:{items:function(){return items}}}).result}function getUsedTime(start,qty){var end=start+qty,h=Math.floor(start/4),m=15*(start-4*h)||"00",h1=Math.floor(end/4);return h+"."+m+" - "+h1+"."+(15*(end-4*h1)||"00")}function getBookingWeek(queryWeek,selectedMaster,datesOfWeeks,ngClickOnEntry,admin){var storeScheduleWeek=angular.copy(global.get("store").val.timeTable);return getList(paginate,queryWeek).then(function(data){selectedMaster.week={},datesOfWeeks.forEach(function(d,dayOfWeek){selectedMaster.week[d.date]={},selectedMaster.week[d.date].entryTimeTable=angular.copy(timeParts),selectedMaster.week[d.date].entryTimeTable.forEach(function(p,i){if(p.date=d.date,p.ngClickOnEntry=ngClickOnEntry,storeScheduleWeek){var j=dayOfWeek+1;6==dayOfWeek&&(j=0),(!storeScheduleWeek[j].is||p.i<4*storeScheduleWeek[j].start||p.i>=4*storeScheduleWeek[j].end)&&(p.out=!0)}selectedMaster.timeTable&&selectedMaster.timeTable[d.dayOfYear]&&(!selectedMaster.timeTable[d.dayOfYear].is||p.i<4*selectedMaster.timeTable[d.dayOfYear].s||p.i>=4*selectedMaster.timeTable[d.dayOfYear].e)&&(p.out=!0)})}),data.forEach(function(e){for(var master=selectedMaster,i=e.start;i<e.start+e.qty;i++)master.week[e.date].entryTimeTable[i].busy=!0,i==e.start&&(master.week[e.date].entryTimeTable[i].usedTime=getUsedTime(e.start,e.qty),master.week[e.date].entryTimeTable[i].userId=e.user._id,master.week[e.date].entryTimeTable[i].service=e.service.name,master.week[e.date].entryTimeTable[i].new=!0,master.week[e.date].entryTimeTable[i].qty=e.qty,master.week[e.date].entryTimeTable[i].used=e.used,master.week[e.date].entryTimeTable[i].confirm=e.confirm,admin&&(master.week[e.date].entryTimeTable[i].user=e.user)),master.week[e.date].entryTimeTable[i].setColor=e.setColor,i!=e.start&&(master.week[e.date].entryTimeTable[i].noBorder=!0),master.week[e.date].entryTimeTable[i].entry=e,!global.get("store").val.onlineReservation||e.status&&1==e.status||(master.week[e.date].entryTimeTable[i].reservation=!0),e.start})})}function getBookingWeekScheldule(queryWeek,selectedWorkplace,datesOfWeeks,services,masters,ngClickOnEntry){var storeScheduleWeek=angular.copy(global.get("store").val.timeTable);return getList(paginate,queryWeek).then(function(data){selectedWorkplace.week={},datesOfWeeks.forEach(function(d,dayOfWeek){selectedWorkplace.week[d.date]={},selectedWorkplace.week[d.date].entryTimeTable=angular.copy(timeParts),selectedWorkplace.week[d.date].entryTimeTable.forEach(function(p,i){if(p.date=d.date,p.ngClickOnEntry=ngClickOnEntry,storeScheduleWeek){var j=dayOfWeek+1;6==dayOfWeek&&(j=0),(!storeScheduleWeek[j].is||p.i<4*storeScheduleWeek[j].start||p.i>=4*storeScheduleWeek[j].end)&&(p.out=!0)}})}),data.forEach(function(e){var serviseLink=null;if(e.service&&e.service._id&&services){var sTemp=services.getOFA("_id",e.service._id);sTemp&&(serviseLink=sTemp.link)}var masterLink=null,masterName="";if(e.master&&masters){var mTemp=masters.getOFA("_id",e.master);mTemp&&(masterLink="/master/"+mTemp.url,masterName=mTemp.name)}for(var workplace=selectedWorkplace,i=e.start;i<e.start+e.qty;i++)workplace.week[e.date].entryTimeTable[i].busy=!0,i==e.start&&(workplace.week[e.date].entryTimeTable[i]._id=e._id,workplace.week[e.date].entryTimeTable[i].usedTime=getUsedTime(e.start,e.qty),workplace.week[e.date].entryTimeTable[i].userId=e.user._id,workplace.week[e.date].entryTimeTable[i].service=e.service.name,workplace.week[e.date].entryTimeTable[i].serviceLink=serviseLink,workplace.week[e.date].entryTimeTable[i].masterLink=masterLink,workplace.week[e.date].entryTimeTable[i].masterName=masterName,e.masters&&e.masters.length&&(workplace.week[e.date].entryTimeTable[i].masters=e.masters.map(function(m){return masters.getOFA("_id",m)})),workplace.week[e.date].entryTimeTable[i].new=!0,workplace.week[e.date].entryTimeTable[i].qty=e.qty,workplace.week[e.date].entryTimeTable[i].used=e.used,workplace.week[e.date].entryTimeTable[i].confirm=e.confirm,workplace.week[e.date].entryTimeTable[i].comment=e.comment,workplace.week[e.date].entryTimeTable[i].zIndex=1),workplace.week[e.date].entryTimeTable[i].setColor=e.setColor,e.service.backgroundcolor?workplace.week[e.date].entryTimeTable[i].backgroundcolor=e.service.backgroundcolor:workplace.week[e.date].entryTimeTable[i].backgroundcolor=null,i!=e.start&&(workplace.week[e.date].entryTimeTable[i].noBorder=!0),workplace.week[e.date].entryTimeTable[i].entry=e,!global.get("store").val.onlineReservation||e.status&&1==e.status||(workplace.week[e.date].entryTimeTable[i].reservation=!0)})})}function getWeeksRange(today){today||(today=new Date);var weeksRange=[{},{},{},{},{},{},{}];return weeksRange.forEach(function(el,i){if(i){var date=new Date(today);date.setTime(date.getTime()+7*i*864e5),date.setHours(0)}else var date=today;var datesOfWeeks=getDatesForWeek(date);el.startDate=datesOfWeeks[0].d,el.startDateString=moment(datesOfWeeks[0].d).format("DD MMM"),el.endDate=datesOfWeeks[6].d,el.endDateString=moment(datesOfWeeks[6].d).format("DD MMM")}),weeksRange}function scheduleTransfer(){return $q(function(resolve,reject){$uibModal.open({animation:!0,size:"lg",templateUrl:"components/ORDERS/online/scheduleTransfer.html",controller:function(global,$uibModalInstance,Booking,$timeout,exception){var self=this;self.global=global,self.moment=moment,self.paginate={};var startdate=moment().subtract(42,"days"),td=new Date(startdate);self.weeksFrom=getWeeksRange(td),self.weeksFrom.forEach(function(el){el.date=el.startDateString+"/"+el.endDateString});var addDate=moment().add(7,"days"),addDate=moment().add(0,"days"),tdAdd=new Date(addDate);self.weeksTo=getWeeksRange(tdAdd),self.weeksTo.forEach(function(el){el.date=el.startDateString+"/"+el.endDateString}),self.ok=function(){if(!self.weekFrom||!self.weekTo)return void exception.catcher("ошибка")("не выбрана неделя");self.disabled=!0;var date=new Date(self.weekFrom.startDate);self.datesOfWeeks=Booking.getDatesForWeek(date),self.queryWeek={date:{$in:self.datesOfWeeks.map(function(item){return item.date})},"user.name":"schedule"};var dataFrom,dataTo;return Booking.getList(self.paginate,self.queryWeek).then(function(data){return data&&data.length&&data.shift(),dataFrom=data,date=new Date(self.weekTo.startDate),self.datesOfWeeks=Booking.getDatesForWeek(date),self.queryWeek={date:{$in:self.datesOfWeeks.map(function(item){return item.date})},"user.name":"schedule"},Booking.getList(self.paginate,self.queryWeek)}).then(function(data){data&&data.length&&data.shift(),dataTo=data;var acts=[];return data.forEach(function(d){var delEntryPromise=Booking.delete({_id:d._id});acts.push(delEntryPromise.$promise)}),$q.all(acts)}).then(function(){var start=moment(self.weekFrom.startDate),end=moment(self.weekTo.startDate),daysDelta=end.diff(start,"days"),acts=[];return dataFrom.forEach(function(d){delete d._id,delete d.__v,d.users=[];var newDate=getDateFromEntry(d);newDate.setDate(newDate.getDate()+daysDelta);var month=newDate.getMonth(),day=newDate.getDate(),year=newDate.getFullYear();month<10&&(month="0"+month),day<10&&(day="0"+day),d.date="date"+year+month+day;var newEntryPromise=Booking.save(d);acts.push(newEntryPromise.$promise)}),$q.all(acts)}).then(function(res){$uibModalInstance.close()}).catch(function(err){$uibModalInstance.close(err)});var date,date},self.cancel=function(){$uibModalInstance.dismiss()}},controllerAs:"$ctrl"}).result.then(function(){resolve()},function(){reject()})})}for(var Items=$resource("/api/collections/Booking/:_id",{_id:"@_id"}),timeRemindArr=timeRemindArrLang.map(function(el){return{time:el[global.get("store").val.lang],part:el.part}}),timeDurationdArr=timeDurationArrLang.map(function(el){return{time:el[global.get("store").val.lang],part:el.part}}),timeParts=[],i=0;i<96;i++)timeParts.push({busy:!1,i:i});var timeTable=["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],timeTable15min=["00:00","00:15","00:30","00:45","01:00","01:15","01:30","01:45","02:00","02:15","02:30","02:45","03:00","03:15","03:30","03:45","04:00","04:15","04:30","04:45","05:00","05:15","05:30","05:45","06:00","06:15","06:30","06:45","07:00","07:15","07:30","07:45","08:00","08:15","08:30","08:45","09:00","09:15","09:30","09:45","10:00","10:15","10:30","10:45","11:00","11:15","11:30","11:45","12:00","12:15","12:30","12:45","13:00","13:15","13:30","13:45","14:00","14:15","14:30","14:45","15:00","15:15","15:30","15:45","16:00","16:15","16:30","16:45","17:00","17:15","17:30","17:45","18:00","18:15","18:30","18:45","19:00","19:15","19:30","19:45","20:00","20:15","20:30","20:45","21:00","21:15","21:30","21:45","22:00","22:15","22:30","22:45","23:00","23:15","23:30","23:45"],paginate={page:0,rows:500,totalItems:0};return{getList:getList,getItem:getItem,query:Items.query,get:Items.get,save:Items.save,delete:Items.delete,timeTable:timeTable,timeTable15min:timeTable15min,timeParts:timeParts,startTimeParts:36,endTimeParts:72,newBooking:newBooking,editBooking:editBooking,filterListServices:filterListServices,timeRemindArr:timeRemindArr,getDayOfYear:getDayOfYear,getDaysOfMonth:getDaysOfMonth,sendMessage:sendMessage,getDateStringFromEntry:getDateStringFromEntry,getDateFromEntry:getDateFromEntry,getDateFromStrDateEntry:getDateFromStrDateEntry,getDatesForWeek:getDatesForWeek,selectService:selectService,getCheckOutLiqpayHtml:getCheckOutLiqpayHtml,getUsedTime:getUsedTime,getBookingWeek:getBookingWeek,getBookingWeekScheldule:getBookingWeekScheldule,getWeeksRange:getWeeksRange,scheduleTransfer:scheduleTransfer}}function serviceFoo($resource,$uibModal,$q,global){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}paginate||(paginate={page:0});var data={perPage:paginate.rows,page:paginate.page,query:query};return global.get("crawler")&&global.get("crawler").val&&(data.subDomain=global.get("store").val.subDomain),Items.query(data).$promise.then(getListComplete)}function getItem(id){function getItemComplete(response){return response}return Items.get({_id:id}).$promise.then(getItemComplete)}function create(){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/CONTENT/master/createMaster.html",controller:function($uibModalInstance){var self=this;self.name="",self.ok=function(){$uibModalInstance.close(self.name)},self.cancel=function(){$uibModalInstance.dismiss()}},controllerAs:"$ctrl"}).result.then(function(name){name?resolve(name.substring(0,50)):reject()},function(err){reject(err)})})}function selectService(master,timePart){return $q(function(resolve,reject){$uibModal.open({animation:!0,size:"lg",templateUrl:"components/ORDERS/online/selectService.html",controller:function($uibModalInstance,global,$user,UserEntry,exception,master,timePart){function selectUser(user){self.user=user,self.users=null}function refreshUsers(phone){phone.length<3||(self.oldPhone=phone,searchUser(phone))}function searchUser(phone){var q={$or:[{phone:phone},{name:phone},{email:phone}]};UserEntry.getList({page:0,rows:20},q).then(function(res){self.users=res})}function clearUser(){self.user=null}function addUser(){console.log("add user");self.userName,self.userEmail,self.phoneCode.substring(1),self.oldPhone.substring(0,10)}function allFieldCheck(){return!self.services.length||!self.user}function checkNameNewUser(){return!self.userName||self.userName.length<3}var self=this;self.phoneCodes=global.get("store").val.phoneCodes?global.get("store").val.phoneCodes:[{code:"+38",country:"Украина"}],self.phoneCode=global.get("store").val.phoneCode?global.get("store").val.phoneCode.code:"+38",self.hour=parseInt(timePart/4),self.minutes=15*(timePart-4*self.hour),self.timeRemindArr=timeRemindArr,master.services.forEach(function(s){s.used=!1}),self.userName="",self.master=master,self.oldPhone="",self.services=[];self.selectUser=selectUser,self.searchUser=searchUser,self.clearUser=clearUser,self.allFieldCheck=allFieldCheck,self.addUser=addUser,self.checkNameNewUser=checkNameNewUser,self.refreshUsers=refreshUsers,self.ok=function(){var item={services:self.services,user:{_id:self.user._id,name:self.user.name,phone:self.user.phone,email:self.user.email},remind:self.remind,timeRemind:self.timeRemind};$uibModalInstance.close(item)},self.cancel=function(){$uibModalInstance.dismiss()}},controllerAs:"$ctrl",resolve:{master:function(){return master},timePart:function(){return timePart}}}).result.then(function(item){resolve(item)},function(){reject()})})}function editEntry(master,entry,saveFoo){return $q(function(resolve,reject){$uibModal.open({animation:!0,size:"lg",templateUrl:"components/ORDERS/online/editOnline.html",controller:function($uibModalInstance,$user,UserEntry,master,entry){function actived(){self.user=Object.assign({},entry.user),self.splitPoint=self.user.phone.length-10,self.phoneCode="+"+self.user.phone.substring(0,self.splitPoint),self.user.phone=self.user.phone.substring(self.splitPoint)}function updateUser(){self.editingUser=!1;var o={_id:entry.user._id};o.phone=self.phoneCode.substring(1)+self.user.phone,o.name=self.user.name,o.email=self.user.email;var update="";"+"+entry.user.phone.substring(0,self.splitPoint)!=self.phoneCode?update="phone":entry.user.phone.substring(self.splitPoint)!=self.user.phone&&(update="phone"),entry.user.name!=self.user.name&&(update+=update?" name":"name"),entry.user.email!=self.user.email&&(update+=update?" email":"email"),UserEntry.save({update:update},o,function(){entry.user=o,actived()})}function changeDuration(){console.log(self.entry,master)}console.log(entry);var self=this;self.master=master,self.entry=entry,self.remind=entry.remind,self.timeRemind=entry.timeRemind,self.hour=parseInt(entry.start/4),self.minutes=15*(entry.start-4*self.hour),self.timeRemindArr=timeRemindArr,self.timeDuration=timeDuration,console.log(self.timeDuration),self.phoneCodes=global.get("store").val.phoneCodes?global.get("store").val.phoneCodes:[{code:"+38",country:"Украина"}],self.phoneCode=global.get("store").val.phoneCode?global.get("store").val.phoneCode.code:"+38",self.updateUser=updateUser,self.changeDuration=changeDuration,actived(),self.ok=function(){entry.remind=self.remind,entry.timeRemind=self.timeRemind,$uibModalInstance.close("save")},self.delete=function(){$uibModalInstance.close("delete")},self.cancel=function(){$uibModalInstance.dismiss()}},controllerAs:"$ctrl",resolve:{master:function(){return master},entry:function(){return entry}}}).result.then(function(action){resolve(action)},function(){reject()})})}function filterListServices(masters,items,selectedStuff){console.log(masters);var stuffs=null;stuffs=masters.filter(function(m){return selectedStuff.length?(m.show=selectedStuff.every(function(s){return m.stuffs.indexOf(s._id)>-1}),m.show):(m.show=!0,!0)}).reduce(function(a,item){return a.extend(item.stuffs),a},[]),console.log(stuffs),items.forEach(function(item){item.stuffs.forEach(function(s){stuffs?stuffs.indexOf(s._id)>-1?s.hide=!1:s.hide=!0:s.hide=!1}),console.log(item)})}for(var Items=$resource("/api/collections/Online/:_id",{_id:"@_id"}),timeRemindArr=[{time:"полчаса",part:2},{time:"час",part:4},{time:"два часа",part:8},{time:"три часа",part:12}],timeDuration=[{time:"15 мин",part:1},{time:"полчаса",part:2},{time:"45 мин",part:3},{time:"час",part:4},{time:"1 час 30 мин",part:6},{time:"два часа",part:8},{time:"два часа 30 мин",part:10},{time:"три часа",part:12},{time:"четыре часа",part:16}],timeParts=[],i=0;i<96;i++)timeParts.push({busy:!1,i:i});var timeTable=["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],timeTable15min=["00:00","00:15","00:30","00:45","01:00","01:15","01:30","01:45","02:00","02:15","02:30","02:45","03:00","03:15","03:30","03:45","04:00","04:15","04:30","04:45","05:00","05:15","05:30","05:45","06:00","06:15","06:30","06:45","07:00","07:15","07:30","07:45","08:00","08:15","08:30","08:45","09:00","09:15","09:30","09:45","10:00","10:15","10:30","10:45","11:00","11:15","11:30","11:45","12:00","12:15","12:30","12:45","13:00","13:15","13:30","13:45","14:00","14:15","14:30","14:45","15:00","15:15","15:30","15:45","16:00","16:15","16:30","16:45","17:00","17:15","17:30","17:45","18:00","18:15","18:30","18:45","19:00","19:15","19:30","19:45","20:00","20:15","20:30","20:45","21:00","21:15","21:30","21:45","22:00","22:15","22:30","22:45","23:00","23:15","23:30","23:45"];return{getList:getList,getItem:getItem,query:Items.query,get:Items.get,save:Items.save,delete:Items.delete,create:create,editEntry:editEntry,selectService:selectService,timeTable:timeTable,timeTable15min:timeTable15min,timeParts:timeParts,startTimeParts:36,endTimeParts:72,filterListServices:filterListServices}}angular.module("gmall.services").service("Online",serviceFoo).service("Booking",serviceBooking).directive("reminderOnline",function(){return{templateUrl:"components/ORDERS/online/reminderOnline.html"}}),serviceBooking.$inject=["$resource","$uibModal","$q","global","$http","exception"],serviceFoo.$inject=["$resource","$uibModal","$q","global"]}(),function(){function searchList(){return{template:"<div></div>",bindToController:!0,scope:{searchStr:"="},controllerAs:"$ctrl",controller:listCtrl}}function searchStuffList(){return{templateUrl:"views/template/header/search/list.html",scope:{searchStuffList:"=",searchStr:"="},controllerAs:"$ctrl",controller:controllersearchStuffList}}function listCtrl($scope,$http,$element,global,$stateParams,$q,$anchorScroll,$timeout,$compile){this.global=global;var url="api/search?searchStr="+$stateParams.searchStr;$q.when().then(function(){if(global.get("tempContent").val){var html=global.get("tempContent").val;$("#tempContent").empty(),global.set("tempContent",null);var o={data:{html:html}};return tempTitles&&(o.data.titles=tempTitles),o}return $http.get(url)}).then(function(response){var linkFn=$compile(response.data.html),content=linkFn($scope);if($element.append(content),$anchorScroll(),response.data.titles&&response.data.titles.title)for(var k in response.data.titles)response.data.titles[k]&&("title"==k?global.get("titles").val[k]+=response.data.titles[k]:global.get("titles").val[k]=response.data.titles[k])})}angular.module("gmall.directives").directive("searchList",searchList).directive("searchStuffList",searchStuffList);var controllersearchStuffList=["$scope","$rootScope","global",function($scope,$rootScope,global){var self=this;self.global=global,self.allResults=function(){$rootScope.$emit("closeSearchModal"),$rootScope.$state.go("search",{searchStr:$scope.searchStr},{reload:!0,inherit:!1,notify:!0})}}]}(),function(){function cabinetItem(global){return{scope:{},restrict:"EA",bindToController:!0,controller:itemCtrl,controllerAs:"$ctrl",templateUrl:"views/template/partials/cabinet/cabinet"+(global.get("store").val.template.addcomponents.cabinet&&global.get("store").val.template.addcomponents.cabinet.templ?global.get("store").val.template.addcomponents.cabinet.templ:"")+".html"}}function itemCtrl(global,$q,$timeout,$state,exception,Orders,CartInOrder,$order,$user,Coupon,Confirm,Booking,CreateContent,$notification,$http,$uibModal,$stateParams){function getOrders(){var payData=global.get("store").val.payData;return Orders.getList(self.paginate,self.query).then(function(res){self.orders=res.filter(function(o){return o}).map(function(o){return $order.initOrderInList(o)}),self.orders.forEach(function(o){o.date=moment(o.date).format("lll"),
2==o.status&&global.get("store").val.onlinePay?payData&&payData.liqPay&&payData.liqPay.is&&$order.getCheckOutLiqpayHtml(o):o.pay&&o.pay[0]&&(o.pay[0].date=moment(o.pay[0].date).format("lll"))})})}function getEntries(){var payData=global.get("store").val.payData;return Booking.getList(self.paginateEntry,self.queryEntry).then(function(res){self.entries=res.map(function(entry){entry.master=global.get("mastersO").val[entry.master],entry.dateOblect=Booking.getDateFromEntry(entry),entry.dateString=moment(entry.dateOblect).format("LLL");try{moment(entry.dateOblect).unix()-moment().unix()>3600&&(entry.cancel=!0)}catch(err){console.log(err)}if(entry.user&&"schedule"!=entry.user._id)entry.status&&1==entry.status||!global.get("store").val.onlinePayEntry?entry.pay&&entry.pay.date&&(entry.pay.date=moment(entry.pay.date).format("lll")):payData&&payData.liqPay&&payData.liqPay.is&&Booking.getCheckOutLiqpayHtml(entry);else if(entry.user&&"schedule"==entry.user._id&&entry.users){var userData=entry.users.getOFA("_id",global.get("user").val._id);global.get("store").val.onlinePayEntry&&(userData.pay&&userData.pay.date?userData.pay&&userData.pay.date&&(entry.pay.date=moment(userData.pay.date).format("lll")):Booking.getCheckOutLiqpayHtml(entry,userData))}return entry})})}function cancelEntry(entry){console.log(entry);try{entry.masterName=entry.master&&entry.master.name?entry.master.name:"?????",entry.dateForNote=entry.dateString;var content=CreateContent.dateTimeCancelNote(entry),o={addressee:"seller",type:"dateTime",content:content,seller:global.get("store").val.seller._id}}catch(err){console.log(err)}Confirm(global.get("lang").val.delete+"?").then(function(){return Booking.delete({_id:entry._id}).$promise}).then(function(){return getEntries(),$http.get("/api/newRecordOnSite/"+global.get("store").val._id+"/"+global.get("store").val.seller._id),$notification.save(o).$promise}).then(function(res){if(exception.showToaster("note",global.get("langNote").val.sent,""),global.get("store").val.seller.phone){var o={};return o.userId=global.get("user").val._id,o.text="удалена запись на "+entry.dateString+" "+entry.master.name,o.phone=global.get("store").val.seller.phone,$http.post("/api/users/sendMessageAboutDeal",o)}}).catch(function(err){err&&exception.catcher("error")(err)})}function orderDetail(order){order.collapse=!order.collapse,order.firsOpen||(order.firsOpen=!0,CartInOrder.get({_id:order.cart._id},function(res){order.setCart(res.stuffs),order.coupon&&Coupon.get({_id:order.coupon},function(res){res&&(order.coupon=res)})}))}function deleteOrder(order){Confirm(global.get("lang").val.delete+"?").then(function(){return order.status=6,Orders.save({update:"status"},{_id:order._id,status:order.status}).$promise}).then(function(){return self.paginate.page=0,Orders.getList(self.paginate,self.query)}).then(function(res){self.orders=res.filter(function(o){return o}).map(function(o){return $order.initOrderInList(o)})}).catch(function(err){err&&exception.catcher("cabinet")(err)})}function changePswd(_){$q.when().then(function(){return $user.changePswd(self.user.val._id)}).then(function(){exception.showToaster("succes","статус","обновлено!")}).catch(function(err){err&&(err=err.data||err,exception.catcher("смена пароля")(err))})}function saveProfile(form){var o={_id:self.user.val._id,profile:self.user.val.profile};$user.save({update:"profile"},o,function(){exception.showToaster("succes","статус","обновлено!")})}function changePhone(phone){phone?$q.when().then(function(){return $user.checkPhoneForExist(phone)}).then(function(res){if(console.log("done"),res&&res.exist)throw"phone exist in base";saveProfile()}).catch(function(err){err&&exception.catcher("change phone")(err)}):(self.user.val.profile.phone="",saveProfile())}function saveFieldUser(field){var o={_id:self.user.val._id},fieldFoDB="profile."+field;o[fieldFoDB]=self.user.val.profile[field],"cityId"==field&&(fieldFoDB+=" profile.city",o["profile.city"]=self.user.val.profile.city),$user.save({update:fieldFoDB},o,function(){exception.showToaster("succes","статус","обновлено!")})}function changeEmail(){$q.when().then(function(){return $user.changeEmail(global.get("user").val._id)}).then(function(res){console.log(res),global.get("user").val.email=res}).catch(function(err){err&&exception.catcher("change email")(err)})}function changeSubscription(){item.subscription=!subscription;var item=global.get("user").val,o={_id:item._id};return o.subscription=item.subscription,$user.save({update:"subscription"},o).$promise.then(function(){exception.showToaster("succes","статус","обновлено!")},function(err){console.log(err)})}var self=this;self.moment=moment,self.global=global,self.paginate={page:0,rows:20,items:0},self.paginateEntry={page:0,rows:5,items:0},self.query={},self.notOrders=global.get("store").val.texts&&global.get("store").val.texts.notOrdersText&&global.get("store").val.texts.notOrdersText[global.get("store").val.lang]?global.get("store").val.texts.notOrdersText[global.get("store").val.lang]:"",self.notDateTime=global.get("store").val.texts&&global.get("store").val.texts.notDateTimeText&&global.get("store").val.texts.notDateTimeText[global.get("store").val.lang]?global.get("store").val.texts.notDateTimeText[global.get("store").val.lang]:"",self.orderDetail=orderDetail,self.deleteOrder=deleteOrder,self.getOrders=getOrders,self.changePswd=changePswd,self.saveFieldUser=saveFieldUser,self.saveProfile=saveProfile,self.changeEmail=changeEmail,self.changeSubscription=changeSubscription,self.getEntries=getEntries,self.cancelEntry=cancelEntry,self.changePhone=changePhone,function(){$q.when().then(function(){if(!global.get("user").val)return $timeout(function(){},700)}).then(function(){if(!global.get("user").val)throw $state.go("home"),"there is not a user in the system"}).then(function(){return self.query.user=global.get("user").val._id,self.user=global.get("user"),getOrders()}).then(function(){return self.queryEntry={$or:[{},{}]},self.queryEntry.$or[0]["user._id"]=global.get("user").val._id,self.queryEntry.$or[1]["users._id"]=global.get("user").val._id,getEntries()}).then(function(){$stateParams&&$stateParams.sec?"order"==$stateParams.sec?self.activeTabIndex=0:"online"==$stateParams.sec?self.activeTabIndex=1:"personal"==$stateParams.sec?self.activeTabIndex=2:"subscription"==$stateParams.sec?self.activeTabIndex=3:self.activeTabIndex=0:(self.activeTabIndex=0,global.get("store").val.orderis&&(global.get("store").val.onlineis?self.activeTabIndex=2:self.activeTabIndex=1))}).catch(function(err){console.log(err),err&&exception.catcher("cabinet")(err)})}()}angular.module("gmall.directives").directive("cabinetItem",cabinetItem),itemCtrl.$inject=["global","$q","$timeout","$state","exception","Orders","CartInOrder","$order","$user","Coupon","Confirm","Booking","CreateContent","$notification","$http","$uibModal","$stateParams"]}(),function(){function itemCtrl($scope,Booking,$timeout,$element,$compile,global){function setDay(day){self.selectedDay=day,self.parent.td.setDate(day),self.parent.setDay()}function filterNumOfDays(item){var i=Number(item);if(i>=self.minDay||i<=self.daysOfMonth)return!0}function prev(){console.log("prev"),self.$owl.trigger("prev.owl.carousel",[self.selectedDay-3,300])}function next(){console.log("next"),self.$owl.trigger("next.owl.carousel",[self.selectedDay+3,300])}var self=this;self.setDay=setDay,self.filterNumOfDays=filterNumOfDays,self.prev=prev,self.next=next,self.moment=moment,self.global=global,self.daysOfMonth=[],this.$onInit=function(){self.$owl=$("body").find("#dayPicker"),self.$owl.on("initialized.owl.carousel",function(event){}),activate()};var carousel_Settings={items:10,nav:!1,dots:!1},activate=function(reload){var today=new Date,month=self.parent.td.getMonth();self.selectedDay=self.parent.td.getDate();var year=self.parent.td.getFullYear(),currentMonth=today.getMonth(),currentday=today.getDate();self.minDay=month<=currentMonth?currentday:1;var qtyDaysOfMonth=Booking.getDaysOfMonth(month+1,year);if(reload){for(var daysOfMonth=[],_i=self.minDay;_i<=qtyDaysOfMonth;_i++)daysOfMonth.push(_i);self.daysOfMonth=daysOfMonth;for(var _html="",_i2=self.minDay;_i2<=qtyDaysOfMonth;_i2++)_html+='<div class="item" ng-class="{\'active\':'+_i2+'==$ctrl.selectedDay}"><a  ng-click="$ctrl.setDay('+_i2+')">'+_i2+"</a></div>";$timeout(function(){self.$owl.trigger("replace.owl.carousel",_html).trigger("refresh.owl.carousel"),$timeout(function(){var html=$("#dayPicker .owl-stage-outer");$compile(html)($scope),self.$owl.trigger("to.owl.carousel",[Number(self.selectedDay)-Number(self.minDay),1,!0])})})}else{for(var html="",i=self.minDay;i<=qtyDaysOfMonth;i++)html+='<div class="item" ng-class="{\'active\':'+i+'==$ctrl.selectedDay}"><a  ng-click="$ctrl.setDay('+i+')">'+i+"</a></div>";var linkFn=$compile(html),content=linkFn($scope);self.$owl.append(content),$timeout(function(){carousel_Settings.startPosition=Number(self.selectedDay)-Number(self.minDay),self.$owl.owlCarousel(carousel_Settings)},100)}self.qtyDaysOfMonth=qtyDaysOfMonth};$scope.$watch(function(){return self.parent.td},function(n,o){if(n&&o){self.date=n;var nd=new Date(n),od=new Date(o);nd.getMonth()!=od.getMonth()?activate("reload"):self.selectedDay=self.parent.td.getDate()}})}angular.module("gmall.directives").component("dayOfMonth",{require:{parent:"^dateTimeEntry"},controller:itemCtrl,templateUrl:"views/template/partials/dateTime/dayOfMonth.html"}),itemCtrl.$inject=["$scope","Booking","$timeout","$element","$compile","global"]}(),function(){function goodsCtrl($scope,$element,$compile,$http,$stateParams,$state,$anchorScroll,global,$q,$rootScope,$location,$timeout,$sce){this.global=global,$q.when().then(function(){if(global.get("tempContent").val){var html=global.get("tempContent").val;$("#tempContent").empty(),global.set("tempContent",null);var o={data:{html:html}};return tempTitles&&(o.data.titles=tempTitles),o}return $http.get("views/template/partials/pricegoods.html")}).then(function(response){var linkFn=$compile(response.data.html),content=linkFn($scope);if($element.append(content),$anchorScroll(),response.data.titles&&response.data.titles.title)for(var k in response.data.titles)if(response.data.titles[k])if("title"==k)response.data.titles[k].indexOf(global.get("titles").val[k])<0?global.get("titles").val[k]=response.data.titles[k]+". "+global.get("titles").val[k]:global.get("titles").val[k]=response.data.titles[k];else if("canonical"==k)try{global.get("titles").val[k]=$sce.trustAsResourceUrl(response.data.titles[k])}catch(err){console.log(err)}else global.get("titles").val[k]=response.data.titles[k]})}function servicesCtrl($scope,$element,$compile,$http,$stateParams,$state,$anchorScroll,global,$q,$rootScope,$location,$timeout,$sce){function getNewPrice(){$q.when().then(function(){return $http.get("views/template/partials/priceservices.html?currency="+global.get("currency").val)}).then(function(response){var linkFn=$compile(response.data.html),content=linkFn($scope);$element.empty(),$element.append(content),$anchorScroll()})}this.global=global,$scope.$watch(function(){return global.get("currency").val},function(n,o){n!=o&&getNewPrice()}),$q.when().then(function(){if(global.get("tempContent").val){var html=global.get("tempContent").val;$("#tempContent").empty(),global.set("tempContent",null);var o={data:{html:html}};return tempTitles&&(o.data.titles=tempTitles),o}return $http.get("views/template/partials/priceservices.html?currency="+global.get("currency").val)}).then(function(response){var linkFn=$compile(response.data.html),content=linkFn($scope);if($element.append(content),$anchorScroll(),response.data.titles&&response.data.titles.title)for(var k in response.data.titles)if(response.data.titles[k])if("title"==k)response.data.titles[k].indexOf(global.get("titles").val[k])<0?global.get("titles").val[k]=response.data.titles[k]+". "+global.get("titles").val[k]:global.get("titles").val[k]=response.data.titles[k];else if("canonical"==k)try{global.get("titles").val[k]=$sce.trustAsResourceUrl(response.data.titles[k])}catch(err){console.log(err)}else global.get("titles").val[k]=response.data.titles[k]})}angular.module("gmall.directives").directive("priceGoods",function(){return{template:"<div></div>",controller:goodsCtrl}}).directive("priceServices",function(){return{template:"<div></div>",controller:servicesCtrl}})}(),function(){function schedulePlaceFromServerDirective(global){return{scope:!0,bindToController:!0,controller:schedulePlaceFromServerCtrl,controllerAs:"$ctrl",replace:!1}}function schedulePlaceFromServerCtrl($scope,$http,global,$q,$compile,$attrs){function changeWeek(week,service){return self.week=week,service||(service=$attrs.stuff),$q.when().then(function(){var url="views/template/partials/scheduleplace/"+week;return $http.get(url.trim()+".html",{params:{stuff:service,templ:$attrs.templ}})}).then(function(response){if(response){var atd1,addHtml=angular.element(response.data.html);atd1=addHtml.find("#innerDivInschedule").html()?$compile(addHtml.find("#innerDivInschedule").html())($scope):$compile(addHtml)($scope);var innerDivInschedule=$("#innerDivInschedule");innerDivInschedule[0]&&innerDivInschedule.empty().append(atd1)}}).catch(function(err){console.log(err)})}function chancheActiveSlide(direction){if(!delay){var week=self.week;if("right"==direction){if(!(week>0))return;week--}else{if(!(week<6))return;week++}delay=!0,changeWeek(week).then(function(){delay=!1})}}function changeService(s){self.stuff=s,delay||(delay=!0,changeWeek(self.week,s).then(function(){delay=!1}))}var self=this;self.moment=moment,self.mobile=global.get("mobile").val,self.global=global,self.changeWeek=changeWeek,self.chancheActiveSlide=chancheActiveSlide,self.changeService=changeService,self.week=0;var delay;if(self.services=null,$attrs.services)try{JSON.parse($attrs.services)}catch(err){console.log(err)}$attrs.stuff&&(self.stuff=$attrs.stuff),self.$onInit=function(){},$scope.$watch(function(){return self.week},function(n,o){n!=o&&self.changeWeek(n)})}angular.module("gmall.services").directive("schedulePlaceFromServer",schedulePlaceFromServerDirective).directive("ngRepeatEndWatch",function(){return{restrict:"A",scope:{},link:function(scope,element,attrs){if(!attrs.ngRepeat)throw"ngRepeatEndWatch: `ngRepeat` Directive required to use this Directive";scope.$parent.$last&&(""!==attrs.ngRepeatEndWatch?"function"==typeof scope.$parent.$parent[attrs.ngRepeatEndWatch]?scope.$parent.$parent[attrs.ngRepeatEndWatch]():scope.$parent.$parent[attrs.ngRepeatEndWatch]=!0:scope.$parent.$parent.ngRepeatEnd=!0)}}}).directive("setClassWhenAtTop",function($window,$timeout){var $win=angular.element($window);return{restrict:"A",link:function(scope,element,attrs){function mastersRepeatDone(){first?delay=500:first=!0,$timeout(function(){init()},delay)}function init(){var w=0,outerW=1;try{w=element.width(),outerW=element.parent().parent().width()}catch(err){}outerW>=w?$(window).scroll(scrollHandler):$(window).off("scroll",scrollHandler)}var topClass=attrs.setClassWhenAtTop,offsetTop=element.offset().top-60;scope.mastersRepeatDone=mastersRepeatDone;var first,delay=1e3,scrollHandler=function(e){$win.scrollTop()>=offsetTop?element.addClass(topClass):element.removeClass(topClass)}}}}),schedulePlaceFromServerCtrl.$inject=["$scope","$http","global","$q","$compile","$attrs"]}(),function(){function scheduleDirective(global){return{scope:{masterId:"@"},bindToController:!0,controller:listCtrl,controllerAs:"$ctrl",templateUrl:function(){return"views/template/partials/home/schedule/directive/schedule"+(global.get("mobile")&&global.get("mobile").val?"Mobile":"")+".html"}}}function schedulePlaceDirective(global){return{scope:{placeId:"@",scheduleStuff:"@"},bindToController:!0,controller:placeCtrl,controllerAs:"$ctrl",templateUrl:function(element,attrs){return"views/template/partials/home/scheduleplace/directive/scheduleplace"+(attrs&&attrs.templ&&"0"!=attrs.templ?attrs.templ:"")+(attrs&&attrs.mobile?"Mobile":"")+".html"}}}function schedulePlaceFromServerDirective(global){return{scope:!0,bindToController:!0,controller:schedulePlaceFromServerCtrl,controllerAs:"$ctrl",replace:!1}}function listCtrl($scope,Booking,Master,Stuff,$rootScope,global,Confirm,$q,exception,$state){function selectStuff(item){self.selectedStuff=item?[item]:[],self.selectedMaster=null,Booking.filterListServices(self.masters,self.items,self.selectedStuff),$scope.mastersRepeatDone()}function activate(){global.get("user").val||$scope.$on("logged",function(){setUserAtEntry()}),changeStartEndTimeParts(),setWeekDates(0),self.weeksRange=Booking.getWeeksRange(self.td),$q.when().then(function(){return getMasters()}).then(function(){if(self.selectedMaster=angular.copy(self.masters.getOFA("_id",self.masterId)),self.selectedMaster)self.query.master=self.selectedMaster._id;else{if(self.selectedMaster=angular.copy(self.masters.getOFA("url",self.masterId)),!self.selectedMaster)throw self.masters=null,"master doesn't match222";self.query.master=self.selectedMaster._id}return getBooking()}).then(function(){return getServices()}).catch(function(err){console.log(err),exception.catcher("инициализация")(err)})}function setWeekDates(week){if(self.week=week,week){var date=new Date(self.td);date.setTime(date.getTime()+7*week*864e5),date.setHours(0)}else var date=self.td;self.datesOfWeeks=Booking.getDatesForWeek(date);try{self.currentMonth=moment(date).format("MMMM")}catch(err){}self.currentDayOfWeek=self.date.getDay(),0==self.currentDayOfWeek&&(self.currentDayOfWeek=7),self.currentDayOfWeek--,week&&self.currentDayOfWeek,self.query={date:{$in:self.datesOfWeeks.map(function(item){return item.date})},master:self.masterId}}function changeWeek(week){setWeekDates(week),self.tempEntry=null,$q.when().then(function(){return getBooking()})}function getMasters(){return $q.when().then(function(){return global.get("masters").val}).then(function(data){self.masters=data.map(function(m){return m.stuffs||(m.stuffs=[]),m}).filter(function(m){return m.stuffs.length})}).catch(function(err){exception.catcher("получение списка мастеров")(err)})}function getBooking(){Booking.getBookingWeek(self.query,self.selectedMaster,self.datesOfWeeks,ngClickOnEntry).then(function(data){global.get("user").val&&setUserAtEntry()})}function clearTempBooking(){var e=self.tempEntry;if(e)for(var master=self.selectedMaster,i=e.start;i<e.start+e.qty;i++)master.week[e.date].entryTimeTable[i].busy=!1,delete master.week[e.date].entryTimeTable[i].temp,delete master.week[e.date].entryTimeTable[i].entry,delete master.week[e.date].entryTimeTable[i].user,delete master.week[e.date].entryTimeTable[i].phone,delete master.week[e.date].entryTimeTable[i].email,delete master.week[e.date].entryTimeTable[i].usedTime,delete master.week[e.date].entryTimeTable[i].service,delete master.week[e.date].entryTimeTable[i].qty,delete master.week[e.date].entryTimeTable[i].noBorder,delete master.week[e.date].entryTimeTable[i].new,delete master.week[e.date].entryTimeTable[i].ngClick}function setTempBooking(e){self.tempEntry=e;for(var master=self.selectedMaster,i=e.start;i<e.start+e.qty;i++)master.week[e.date].entryTimeTable[i].busy=!0,master.week[e.date].entryTimeTable[i].temp=!0,i==e.start&&(e.user&&(master.week[e.date].entryTimeTable[i].user=e.user.name,master.week[e.date].entryTimeTable[i].phone=e.user.phone,master.week[e.date].entryTimeTable[i].email=e.user.email||""),master.week[e.date].entryTimeTable[i].usedTime=Booking.getUsedTime(e.start,e.qty),master.week[e.date].entryTimeTable[i].service=e.service.name,master.week[e.date].entryTimeTable[i].new=!0,master.week[e.date].entryTimeTable[i].qty=e.qty),i!=e.start&&(master.week[e.date].entryTimeTable[i].noBorder=!0),master.week[e.date].entryTimeTable[i].entry=e}function ngClickOnEntry(date,index){var item=this;item.user||item.temp?item.user&&!item.temp&&item.uiSref?$state.go("cabinet",{sec:"online"}):item.temp&&clearTempBooking():newBooking(date,item,index)}function setUserAtEntry(){var user=global.get("user").val;for(var key in self.selectedMaster.week)self.selectedMaster.week[key].entryTimeTable.forEach(function(part){part.userId&&part.userId==user._id&&(part.user=global.get("langOrder").val.yourEntry||"Ваша запись",part.uiSref="cabinet({sec:'online'})")})}function getServices(){return $q.when().then(function(){return global.get("services").val?global.get("services").val:Stuff.getServicesForOnlineEntry()}).then(function(res){return global.get("services").val||global.set("services",res),self.items=res.map(function(s){return s.duration=15*s.timePart,s.currency||(s.currency=global.get("store").val.mainCurrency),s.currencyName=global.get("store").val.currency&&global.get("store").val.currency[s.currency]&&global.get("store").val.currency[s.currency][2]?global.get("store").val.currency[s.currency][2]:s.currency,s}).filter(function(s){return self.selectedMaster.stuffs.some(function(stuff){return stuff==s._id})})}).catch(function(err){console.log(err),exception.catcher("получение списка услуг")(err)})}function newBooking(date,part,index){if(!(part.busy||part.out||index<self.currentDayOfWeek&&!self.week)){if(!self.week&&index==self.currentDayOfWeek){var d=new Date,h=d.getHours(),p=Math.ceil(d.getMinutes()/15)-1;if(part.i-4*h+p<4)return void console.log("провека времени записи. просрочена")}$q.when().then(function(){return Booking.selectService(self.items)}).then(function(item){clearTempBooking();for(var val=part.i,i=0+val;i<item.timePart+val;i++)if(!self.selectedMaster.week[date].entryTimeTable[i]||self.selectedMaster.week[date].entryTimeTable[i].out||self.selectedMaster.week[date].entryTimeTable[i].busy)throw"Не хватает времени";setTempBooking({date:date,service:{name:item.name},stuffName:item.name,stuffNameL:item.nameL,stuffLink:item.link,backgroundcolor:item.backgroundcolor,masterName:self.selectedMaster.name,masterNameL:self.selectedMaster.nameL,masterUrl:self.selectedMaster.url,start:part.i,qty:item.timePart}),self.newEntry={};var tempDate=self.datesOfWeeks.getOFA("date",date);self.newEntry.stuff=item,self.newEntry.date=tempDate.d,self.newEntry.timePart={i:part.i,date:tempDate.date,master:self.selectedMaster._id}}).catch(function(err){console.log(err),err&&"backdrop click"!=err&&exception.catcher("запись на время")(err)})}}function changeDate(){self.date||(self.date=new Date);var date=new Date(self.date);changeStartEndTimeParts(date);var month=date.getMonth(),day=date.getDate(),year=date.getFullYear();month<10&&(month="0"+month),day<10&&(day="0"+day),self.query={date:"date"+year+month+day},getBooking()}function changeStartEndTimeParts(date){date||(date=self.date);var dayOfWeek=date.getDay(),month=date.getMonth(),day=date.getDate();if(self.currentDayOfYear=Booking.getDayOfYear(month,day-1),global.get("store").val.timeTable){self.storeSchedule=angular.copy(global.get("store").val.timeTable),self.dayoff=!self.storeSchedule[dayOfWeek]||!self.storeSchedule[dayOfWeek].is;var start=self.storeSchedule[dayOfWeek]&&self.storeSchedule[dayOfWeek].start?self.storeSchedule[dayOfWeek].start:6,end=self.storeSchedule[dayOfWeek]&&self.storeSchedule[dayOfWeek].end?self.storeSchedule[dayOfWeek].end:20;self.startTimeParts=4*start,self.endTimeParts=4*end;for(dayOfWeek in global.get("store").val.timeTable)global.get("store").val.timeTable[dayOfWeek].start<start&&(start=global.get("store").val.timeTable[dayOfWeek].start),global.get("store").val.timeTable[dayOfWeek].end>end&&(end=global.get("store").val.timeTable[dayOfWeek].end);self.startTimeParts=4*start,self.endTimeParts=4*end}}function filterTimePart(part){return part.i>=self.startTimeParts&&part.i<self.endTimeParts}function filterTimePartForMaster(part){if(!(self.timePartsI.indexOf(part.i)<0))return part.i>=self.startTimeParts&&part.i<self.endTimeParts}function booking(){self.newEntry&&(self.newEntry.master=self.selectedMaster._id,global.get("functions").val.witget("dateTime",self.newEntry))}function getDateObj(dateStr){var year=dateStr.substring(4,8),month=dateStr.substring(8,10),day=dateStr.substring(10);try{var date=new Date(year,month,day);return moment(date).format("ddd")+"/"+day}catch(err){return console.log(err),"error handle date"}}function disabledTimePart(part,index){if(index<self.currentDayOfWeek&&!self.week)return!0;if(!self.week&&index==self.currentDayOfWeek&&!part.busy){var d=new Date,h=d.getHours(),p=Math.ceil(d.getMinutes()/15)-1;if(part.i-4*h+p<4)return!0}}var self=this;self.moment=moment,self.mobile=global.get("mobile").val,self.global=global,self.$state=$rootScope.$state,self.Items=Booking,self.onlineEntr={},self.date=new Date,self.td=new Date;var d;self.datesFoeWeeks=[];for(var i=0;i<=7;i++)d=new Date(self.date),d.setTime(d.getTime()+7*i*864e5),d.setHours(0),self.datesFoeWeeks.push(d);var month=(self.date.getTimezoneOffset(),self.date.getMonth()),day=self.date.getDate();self.date.getFullYear();month<10&&(month="0"+month),day<10&&(day="0"+day),self.minDurationForService=global.get("store").val.seller.minDurationForService||15;var delta=0;switch(self.minDurationForService){case 30:delta=1;break;case 60:delta=3;break;case 90:delta=5;break;case 120:delta=7;break;default:delta=0}self.timeParts=Booking.timeParts,self.timePartsForTable=[],self.timePartsI=[];for(var i=0;i<96;i=i+1+delta)self.timePartsForTable.push(Booking.timeParts[i]),self.timePartsI.push(i);self.startTimeParts=Booking.startTimeParts,self.endTimeParts=Booking.endTimeParts,self.timeTable=Booking.timeTable,self.timeTable15min=Booking.timeTable15min,self.paginate={page:0,rows:100,totalItems:0},self.items=[],self.selectedStuff=[],self.selectedMaster,self.newItem={};self.datePickerOptions={locale:{applyClass:"btn-green",applyLabel:"Выбрать",fromLabel:"от",toLabel:"до",cancelLabel:"Отменить",customRangeLabel:"Прозвольный диапазон",format:"DD.MM.YY",daysOfWeek:["Пн","Вт","Ср","Чт","Пн","Сб","Вс"],firstDay:1,monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"]},singleDatePicker:!0,autoUpdateInput:!0,autoapply:!0,eventHandlers:{"apply.daterangepicker":function(ev,picker){changeDate()}}};var dtt=new Date;self.datePickerOptions={formatYear:"yy",maxDate:dtt.setDate(dtt.getDate()+30),startingDay:1},self.newBooking=newBooking,self.changeDate=changeDate,self.selectStuff=selectStuff,self.filterTimePart=filterTimePart,self.filterTimePartForMaster=filterTimePartForMaster,self.booking=booking,self.getDateObj=getDateObj,self.changeWeek=changeWeek,self.disabledTimePart=disabledTimePart,self.$onInit=function(){activate(),$scope.$on("time_is_buzy",function(){console.log("time_is_buzy"),getBooking()})}}function placeCtrl($scope,Booking,Master,Stuff,$rootScope,global,Confirm,$q,exception,$state,Workplace,$element){function swipeLeft(idx){idx.id<6?self.currentDayOfWeek++:self.currentDayOfWeek=0}function swipeRight(idx){0==idx.id?self.currentDayOfWeek=6:self.currentDayOfWeek--}function activate(){changeStartEndTimeParts(),setWeekDates(0),self.weeksRange=Booking.getWeeksRange(self.td),$q.when().then(function(){return getWorkplaces()}).then(function(){return getMasters()}).then(function(){return getServices()}).then(function(){return self.placeId&&(self.selectedWorkplace=angular.copy(self.workplaces.getOFA("_id",self.placeId))),self.selectedWorkplace?self.query.workplace=self.selectedWorkplace._id:self.selectedWorkplace={},self.stuff&&(self.query["service._id"]=self.stuff),getBooking()}).then(function(){return getServices()}).catch(function(err){console.log(err),exception.catcher("инициализация")(err)})}function setWeekDates(week){if(self.week=week,week){var date=new Date(self.td);date.setTime(date.getTime()+7*week*864e5),date.setHours(0)}else var date=self.td;self.datesOfWeeks=Booking.getDatesForWeek(date);try{self.currentMonth=moment(date).format("MMMM")}catch(err){}self.currentDayOfWeek=self.date.getDay(),0==self.currentDayOfWeek&&(self.currentDayOfWeek=7),self.currentDayOfWeek--,week&&self.currentDayOfWeek,self.query={date:{$in:self.datesOfWeeks.map(function(item){return item.date})},master:self.masterId}}function changeWeek(week){setWeekDates(week),self.tempEntry=null,$q.when().then(function(){return getBooking()})}function getWorkplaces(){return $q.when().then(function(){return Workplace.getList(null,{})}).then(function(data){self.workplaces=data}).catch(function(err){exception.catcher("получение списка рабочих мест")(err)})}function getMasters(){return $q.when().then(function(){return global.get("masters").val}).then(function(data){self.masters=data}).catch(function(err){exception.catcher("получение списка мастеров")(err)})}function getBooking(){Booking.getBookingWeekScheldule(self.query,self.selectedWorkplace,self.datesOfWeeks,self.items,self.masters).then(function(data){})}function getServices(){return $q.when().then(function(){return global.get("services").val?global.get("services").val:Stuff.getServicesForOnlineEntry()}).then(function(res){return global.get("services").val||global.set("services",res),self.items=res.map(function(s){return s.duration=15*s.timePart,s.currency||(s.currency=global.get("store").val.mainCurrency),s.currencyName=global.get("store").val.currency&&global.get("store").val.currency[s.currency]&&global.get("store").val.currency[s.currency][2]?global.get("store").val.currency[s.currency][2]:s.currency,s})}).catch(function(err){console.log(err),exception.catcher("получение списка услуг")(err)})}function changeDate(){self.date||(self.date=new Date);var date=new Date(self.date);changeStartEndTimeParts(date);var month=date.getMonth(),day=date.getDate(),year=date.getFullYear();month<10&&(month="0"+month),day<10&&(day="0"+day),self.query={date:"date"+year+month+day},getBooking()}function changeStartEndTimeParts(date){date||(date=self.date);var dayOfWeek=date.getDay(),month=date.getMonth(),day=date.getDate();if(self.currentDayOfYear=Booking.getDayOfYear(month,day-1),global.get("store").val.timeTable){self.storeSchedule=angular.copy(global.get("store").val.timeTable),self.dayoff=!self.storeSchedule[dayOfWeek]||!self.storeSchedule[dayOfWeek].is;var start=self.storeSchedule[dayOfWeek]&&self.storeSchedule[dayOfWeek].start?self.storeSchedule[dayOfWeek].start:6,end=self.storeSchedule[dayOfWeek]&&self.storeSchedule[dayOfWeek].end?self.storeSchedule[dayOfWeek].end:20;self.startTimeParts=4*start,self.endTimeParts=4*end;for(dayOfWeek in global.get("store").val.timeTable)global.get("store").val.timeTable[dayOfWeek].start<start&&(start=global.get("store").val.timeTable[dayOfWeek].start),global.get("store").val.timeTable[dayOfWeek].end>end&&(end=global.get("store").val.timeTable[dayOfWeek].end);self.startTimeParts=4*start,self.endTimeParts=4*end}}function filterTimePart(part){return part.i>=self.startTimeParts&&part.i<self.endTimeParts}function filterTimePartForMaster(part){if(!(self.timePartsI.indexOf(part.i)<0))return part.i>=self.startTimeParts&&part.i<self.endTimeParts}function getDateObj(dateStr){var year=dateStr.substring(4,8),month=dateStr.substring(8,10),day=dateStr.substring(10);try{var date=new Date(year,month,day);return moment(date).format("ddd")+"/"+day}catch(err){return console.log(err),"error handle date"}}function disabledTimePart(part,index){if(!self.week&&index==self.currentDayOfWeek){var d=new Date,h=d.getHours(),p=Math.ceil(d.getMinutes()/15)-1;if(part.i-4*h+p<4)return!0}}var self=this;angular.element($element).data("stuff")&&(self.stuff=angular.element($element).data("stuff")),self.moment=moment,self.mobile=global.get("mobile").val,self.global=global,self.$state=$rootScope.$state,self.Items=Booking,self.onlineEntr={},self.date=new Date,self.td=new Date;var d;self.datesFoeWeeks=[];for(var i=0;i<=7;i++)d=new Date(self.date),d.setTime(d.getTime()+7*i*864e5),d.setHours(0),self.datesFoeWeeks.push(d);var month=(self.date.getTimezoneOffset(),self.date.getMonth()),day=self.date.getDate();self.date.getFullYear();month<10&&(month="0"+month),day<10&&(day="0"+day),self.week=0,self.noWrapSlides=!0,$scope.$watch(function(){return self.week},function(n,o){n!=o&&self.changeWeek(n)}),self.minDurationForService=global.get("store").val.seller.minDurationForService||15;var delta=0
;switch(self.minDurationForService){case 30:delta=1;break;case 60:delta=3;break;case 90:delta=5;break;case 120:delta=7;break;default:delta=0}self.timeParts=Booking.timeParts,self.timePartsForTable=[],self.timePartsI=[];for(var i=0;i<96;i=i+1+delta)self.timePartsForTable.push(Booking.timeParts[i]),self.timePartsI.push(i);self.slideMasterWeekArry=[{id:0,active:!1},{id:1,active:!1},{id:2,active:!1},{id:3,active:!1},{id:4,active:!1},{id:5,active:!1},{id:6,active:!1}],self.currentDayOfWeek=5,self.startTimeParts=Booking.startTimeParts,self.endTimeParts=Booking.endTimeParts,self.timeTable=Booking.timeTable,self.timeTable15min=Booking.timeTable15min,self.paginate={page:0,rows:100,totalItems:0},self.items=[],self.selectedStuff=[],self.selectedMaster,self.newItem={};var dtt=new Date;self.datePickerOptions={formatYear:"yy",maxDate:dtt.setDate(dtt.getDate()+30),startingDay:1},self.changeDate=changeDate,self.filterTimePart=filterTimePart,self.filterTimePartForMaster=filterTimePartForMaster,self.getDateObj=getDateObj,self.changeWeek=changeWeek,self.disabledTimePart=disabledTimePart,self.swipeLeft=swipeLeft,self.swipeRight=swipeRight,self.$onInit=function(){activate()}}function schedulePlaceFromServerCtrl($scope,$http,global,$q,$compile,$attrs){function changeWeek(week,service){return self.week=week,service||(service=$attrs.stuff),$q.when().then(function(){var url="views/template/partials/scheduleplace/"+week;return $http.get(url.trim()+".html",{params:{stuff:service,templ:$attrs.templ}})}).then(function(response){if(response){var atd1,addHtml=angular.element(response.data.html);atd1=addHtml.find("#innerDivInschedule").html()?$compile(addHtml.find("#innerDivInschedule").html())($scope):$compile(addHtml)($scope);var innerDivInschedule=$("#innerDivInschedule");innerDivInschedule[0]&&innerDivInschedule.empty().append(atd1)}}).catch(function(err){console.log(err)})}function chancheActiveSlide(direction){if(!delay){var week=self.week;if("right"==direction){if(!(week>0))return;week--}else{if(!(week<6))return;week++}delay=!0,changeWeek(week).then(function(){delay=!1})}}function changeService(s){self.stuff=s,delay||(delay=!0,changeWeek(self.week,s).then(function(){delay=!1}))}var self=this;self.moment=moment,self.mobile=global.get("mobile").val,self.global=global,self.changeWeek=changeWeek,self.chancheActiveSlide=chancheActiveSlide,self.changeService=changeService,self.week=0;var delay;if(self.services=null,$attrs.services)try{JSON.parse($attrs.services)}catch(err){console.log(err)}$attrs.stuff&&(self.stuff=$attrs.stuff),self.$onInit=function(){},$scope.$watch(function(){return self.week},function(n,o){n!=o&&self.changeWeek(n)})}angular.module("gmall.services").directive("scheduleMaster",scheduleDirective).directive("schedulePlace",schedulePlaceDirective).directive("schedulePlaceFromServer22",schedulePlaceFromServerDirective).directive("ngRepeatEndWatch",function(){return{restrict:"A",scope:{},link:function(scope,element,attrs){if(!attrs.ngRepeat)throw"ngRepeatEndWatch: `ngRepeat` Directive required to use this Directive";scope.$parent.$last&&(""!==attrs.ngRepeatEndWatch?"function"==typeof scope.$parent.$parent[attrs.ngRepeatEndWatch]?scope.$parent.$parent[attrs.ngRepeatEndWatch]():scope.$parent.$parent[attrs.ngRepeatEndWatch]=!0:scope.$parent.$parent.ngRepeatEnd=!0)}}}).directive("setClassWhenAtTop",function($window,$timeout){var $win=angular.element($window);return{restrict:"A",link:function(scope,element,attrs){function mastersRepeatDone(){first?delay=500:first=!0,$timeout(function(){init()},delay)}function init(){var w=0,outerW=1;try{w=element.width(),outerW=element.parent().parent().width()}catch(err){}outerW>=w?$(window).scroll(scrollHandler):$(window).off("scroll",scrollHandler)}var topClass=attrs.setClassWhenAtTop,offsetTop=element.offset().top-60;scope.mastersRepeatDone=mastersRepeatDone;var first,delay=1e3,scrollHandler=function(e){$win.scrollTop()>=offsetTop?element.addClass(topClass):element.removeClass(topClass)}}}}),listCtrl.$inject=["$scope","Booking","Master","Stuff","$rootScope","global","Confirm","$q","exception","$state"],placeCtrl.$inject=["$scope","Booking","Master","Stuff","$rootScope","global","Confirm","$q","exception","$state","Workplace","$element"],schedulePlaceFromServerCtrl.$inject=["$scope","$http","global","$q","$compile","$attrs"]}(),function(){function itemListDirective(){return{scope:{},bindToController:!0,controller:itemListCtrl,controllerAs:"$ctrl",templateUrl:"components/CONTENT/workplace/workplaceList.html"}}function workplaceItemDirective(){return{scope:{},restrict:"E",bindToController:!0,controller:ItemCtrl,controllerAs:"$ctrl",templateUrl:"components/CONTENT/workplace/workplaceItem.html"}}function itemListCtrl(Items,$state,global,Confirm,$q,exception,Photo,$timeout){function getList(){return self.Items.getList(self.paginate,self.query).then(function(data){return self.items=data,self.items})}function searchItem(searchStr){return self.query=searchStr?{name:searchStr.substring(0,10)}:{},self.paginate.page=0,getList().then(function(){console.log("Activated list View")})}function saveField(item,field){var o={_id:item._id};o[field]=item[field],self.Items.save({update:field},o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})}function createItem(){self.Items.create().then(function(res){return self.newItem={},self.newItem.name=res,self.Items.save(self.newItem).$promise}).then(function(res){self.newItem._id=res.id,self.newItem.url=res.url,self.paginate.page=0,getList(self.paginate)}).then(function(){var id=self.newItem._id;delete self.newItem._id,setTimeout(function(){$state.go("frame.workplace.item",{id:id})},100)}).catch(function(err){err&&exception.catcher("создание мастера")(err)})}function cloneItem(item){var name;self.Items.create().then(function(res){return name=res,self.Items.getItem(item._id)}).then(function(master){return self.newItem=angular.copy(master),self.newItem.name=name,self.newItem.nameL={},delete self.newItem._id,delete self.newItem.__v,delete self.newItem.url,console.log(self.newItem),self.newItem.blocks.forEach(function(block){delete block.img,delete block._id,"stuffs"==block.type&&block.stuffs&&block.stuffs.length&&(block.stuffs=block.stuffs.map(function(s){return s._id})),block.imgs=[]}),self.Items.save(self.newItem).$promise}).then(function(res){self.newItem._id=res.id,self.newItem.url=res.url,self.paginate.page=0,getList(self.paginate)}).then(function(){var id=self.newItem._id;delete self.newItem._id,setTimeout(function(){$state.go("frame.workplace.item",{id:id})},100)}).catch(function(err){err&&exception.catcher("создание объекта")(err)})}function deleteItem(item){var folder="images/"+global.get("store").val.subDomain+"/Workplace/"+item.url;Confirm("удалить???").then(function(){return self.Items.delete({_id:item._id}).$promise}).then(function(){return self.getList()}).then(function(){Photo.deleteFolder("Workplace",folder)}).catch(function(err){err&&(err=err&&err.data||err)&&exception.catcher("удаление объекта")(err)})}function dropCallback(item){var i=0;return setTimeout(function(){self.items.reduce(function(p,item){return p.then(function(){return i++,item.index=i,saveField(item,"index")})},$q.when(!0)).then(function(){console.log(self.items.map(function(el){return el.index}))})},50),item}var self=this;self.mobile=global.get("mobile").val,self.global=global,self.$state=$state,self.Items=Items,self.query={},self.paginate={page:0,rows:20,totalItems:0},self.newItem={name:"наименование"},self.getList=getList,self.saveField=saveField,self.searchItem=searchItem,self.deleteItem=deleteItem,self.createItem=createItem,self.dropCallback=dropCallback,self.cloneItem=cloneItem,function(){getList().then(function(){})}()}function ItemCtrl(Items,$stateParams,$q,$uibModal,global,exception,Stuff,Photo,$scope,$timeout,Confirm,SetCSS){function activate(){return getItem($stateParams.id).then(function(){}).catch(function(err){err=err.data||err,exception.catcher("получение объекта")(err)})}function getItem(id){return self.Items.getItem(id).then(function(data){data&&!data.blocks&&(data.blocks=[],saveField("blocks",[]));var bl=data.blocks.filter(function(b){return b});return bl.length!=data.blocks.length&&(saveField("blocks",bl),data.blocks=bl),data.blocks.forEach(function(b,i){"stuffs"==b.type&&b.stuffs.length&&(b.stuffs=b.stuffs.map(function(s){return s._is||s})),b.i=i}),data.blocks.sort(function(a,b){return a.index-b.index}),self.item=data,self.item}).catch(function(err){return console.log(err),$q.reject(err)})}function setStyles(block,idx){$q.when().then(function(){return SetCSS.setStyles(block)}).then(function(){block.elements&&saveField("blocks."+block.i+".elements",block.elements),block.blockStyle&&saveField("blocks."+block.i+".blockStyle",block.blockStyle)})}function saveField(field,value,defer,indexImgs){field.indexOf("index")>-1&&(self.item.blocks.sort(function(a,b){return a.index-b.index}),self.item.blocks.forEach(function(b,i){b.i=i}),value=self.item.blocks,field="blocks"),defer=defer?defer:100,setTimeout(function(){"date"==field&&(value=new Date(self.item[field]));var o={_id:self.item._id};o[field]=value;var query={update:field};field.indexOf(".imgs")>-1&&void 0!==indexImgs&&(query.indexImgs=indexImgs),self.Items.save(query,o,function(){global.set("saving",!0),$timeout(function(){global.set("saving",!1)},1500)})},defer)}function refreshBlocks(){return self.Items.getItem($stateParams.id).then(function(data){data.blocks.forEach(function(b,i){b.i=i,b.desc||(b.desc=""),b.descL||(b.descL={}),b.desc1||(b.desc1=""),b.desc1L||(b.desc1L={}),b.name||(b.name=""),b.nameL||(b.nameL={}),b.name1||(b.name1=""),b.name1L||(b.name1L={}),b.videoLink||(b.videoLink="")}),self.item.blocks=data.blocks})}function addBlock(type){if(type){return $scope.$broadcast("addNewBlock",{type:type}),void(self.newBlock=null)}}function deleteBlock(block,index){var o={_id:self.item._id},update={update:"_id_id",embeddedName:"blocks"};o.id=block.id,update.embeddedPull=!0,Confirm("потверждаете?").then(function(){return self.item.blocks.splice(index,1),block._id?(o._id_id=block._id,update={update:"_id_id",embeddedName:"blocks"},update.embeddedPull=!0):(update={update:"blocks"},o.blocks=self.item.blocks),self.Items.save(update,o).$promise}).then(function(res){var images=[];if(block.img&&images.push(block.img),block.video&&images.push(block.video),block.videoCover&&images.push(block.videoCover),block.imgs&&block.imgs.length&&block.imgs.forEach(function(im){im.img&&images.push(im.img)}),images.length)return Photo.deleteFiles("Stat",images)}).then(function(){activate()})}function deleteSlide(block,index){Photo.deleteFiles("Workplace",[block.imgs[index].img]).then(function(response){block.imgs.splice(index,1),self.saveField("blocks."+block.i+".imgs",block.imgs,null,index)},function(err){console.log(err)})}function editSlide(block,index){$uibModal.open({animation:!0,templateUrl:"components/CONTENT/workplace/editSlide.html",controller:function(slide,$uibModalInstance){var self=this;self.item=slide,self.ok=function(){console.log(self.item),$uibModalInstance.close(self.item)},self.cancel=function(){$uibModalInstance.dismiss("cancel")}},controllerAs:"$ctrl",size:"lg",resolve:{slide:function(){return block.imgs[index]}}}).result.then(function(slide){self.saveField("blocks."+block.i+".imgs",block.imgs)},function(){})}function addItemInBlock(block,$index){var model;switch(block.type){case"stuffs":model=Stuff;break;case"campaign":model=Campaign;break;case"filterTags":model=FilterTags;break;case"brandTags":model=BrandTags;break;case"brands":model=Brans;break;case"categories":model=Category}$q.when().then(function(){return model.select()}).then(function(item){if("stuffs"==block.type&&block.stuffs&&block.stuffs.length&&block.stuffs.some(function(s){return s&&s._id?s._id==item._id:s==item._id}))throw"такой объект уже есть";block[block.type]||(block[block.type]=[]);var img,link;switch(name=item.name,block.type){case"stuffs":img=item.gallery[0]&&item.gallery[0].thumb?item.gallery[0].thumb:null,link=item.link,item.artikul&&(item.name+=" "+item.artikul);break;case"campaign":img=item.img?item.img:null,link="campaign/"+item.url;break;case"filterTags":img=item.img?item.img:null,link="/group/category?queryTag="+item.url;break;case"brandTags":img=item.img?item.img:null,link="/group/category?brandTag="+item.url;break;case"brands":img=item.img?item.img:null,link="/group/category?brand="+item.url;break;case"categories":img=item.img?item.img:null,link="/group/"+item.url}void 0!==$index?block.imgs[$index]={name:item.name,img:img,link:link,_id:item._id}:(block.imgs||(block.imgs=[]),block.imgs.push({name:item.name,img:img,link:link,_id:item._id})),saveField("blocks."+block.i+".imgs",block.imgs),"stuffs"==block.type&&(block.stuffs=block.imgs.map(function(img){return img._id}),saveField("blocks."+block.i+".stuffs",block.stuffs))}).catch(function(err){err&&exception.catcher("добавление")(err)})}function movedItem(block,item){return $timeout(function(){saveField("blocks."+block.i+".imgs",block.imgs),"stuffs"==block.type&&(block.stuffs=block.imgs.map(function(img){return img._id}),saveField("blocks."+block.i+".stuffs",block.stuffs))},100),item}function deleteItemFromBlock(block,$index){block.imgs.splice($index,1),saveField("blocks."+block.i+".imgs",block.imgs),"stuffs"==block.type&&(block.stuffs=block.imgs.map(function(img){return img._id}),saveField("blocks."+block.i+".stuffs",block.stuffs))}function changeItem(block,$index){addItemInBlock(block,$index)}var self=this;self.Items=Items,self.type="Workplace",self.item={},self.mobile=global.get("mobile").val,self.global=global,self.listOfBlocksForWorkplacePage=listOfBlocksForWorkplacePage,self.listOfBlocks=listOfBlocksForWorkplacePage,console.log(self.listOfBlocksForWorkplacePage),console.log(self.listOfBlocks),self.moment=moment,self.saveField=saveField,self.setStyles=setStyles,self.addBlock=addBlock,self.refreshBlocks=refreshBlocks,self.deleteBlock=deleteBlock,self.deleteSlide=deleteSlide,self.editSlide=editSlide,self.addItemInBlock=addItemInBlock,self.movedItem=movedItem,self.deleteItemFromBlock=deleteItemFromBlock,self.changeItem=changeItem,activate(),$scope.$on("changeLang",function(){activate()}),global.get("store").val.template.workplace||(global.get("store").val.template.workplace={parts:[]});global.get("store").val.template.workplace.parts.filter(function(el){return el.is}).map(function(el){return el.name})}function serviceFoo($resource,$uibModal,$q,global){function getList(paginate,query){function getListComplete(response){return 0==paginate.page&&(response&&response.length?paginate.items=response.shift().index:paginate.items=0),response}paginate||(paginate={page:0});var data={perPage:paginate.rows,page:paginate.page,query:query};return global.get("crawler")&&global.get("crawler").val&&(data.subDomain=global.get("store").val.subDomain),Items.query(data).$promise.then(getListComplete)}function getItem(id){function getItemComplete(response){return response&&response.blocks&&response.blocks.length&&response.blocks.forEach(function(b){"stuffs"==b.type&&(b.stuffs&&b.stuffs.length?b.imgs=b.stuffs.map(function(s){return s.gallery&&s.gallery.length&&s.gallery[0].img&&(s.img=s.gallery[0].img),s}):b.imgs=[])}),response}return Items.get({_id:id}).$promise.then(getItemComplete)}function create(){return $q(function(resolve,reject){$uibModal.open({animation:!0,templateUrl:"components/CONTENT/workplace/createItem.html",controller:function($uibModalInstance){var self=this;self.name="",self.ok=function(){$uibModalInstance.close(self.name)},self.cancel=function(){$uibModalInstance.dismiss()}},controllerAs:"$ctrl"}).result.then(function(name){name?resolve(name.substring(0,50)):reject()},function(err){reject(err)})})}var Items=$resource("/api/collections/Workplace/:_id",{_id:"@_id"});return{getList:getList,getItem:getItem,query:Items.query,get:Items.get,save:Items.save,delete:Items.delete,create:create}}angular.module("gmall.services").service("Workplace",serviceFoo),angular.module("gmall.directives").directive("workplaceList",itemListDirective).directive("workplaceItem",workplaceItemDirective),itemListCtrl.$inject=["Workplace","$state","global","Confirm","$q","exception","Photo","$timeout"],ItemCtrl.$inject=["Workplace","$stateParams","$q","$uibModal","global","exception","Stuff","Photo","$scope","$timeout","Confirm","SetCSS"],serviceFoo.$inject=["$resource","$uibModal","$q","global"]}();