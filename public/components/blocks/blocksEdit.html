<div class="cart-detail blocks-edit" ng-repeat="block in $ctrl.item.blocks|filter:$ctrl.filterBlocks|orderBy:'index'">
    <div>
        <div  class="col-lg-3 col-md-3 col-sm-4 col-xs-8">
            <p class="name-block" ng-click3="$ctrl.blockEditPermission[$index]=!$ctrl.blockEditPermission[$index]">
                <span>{{$ctrl.listOfBlocks[block.type]}} / {{block.type}}</span>
            </p>

        </div>
        <div  class="col-lg-1 col-md-1 col-sm-4 col-xs-4">
            <label>индекс</label>
            <ui-select ng-model="block.index" skip-focusser="true" search-enabled="false"
                       ng-change="$ctrl.saveField('blocks.'+block.i+'.index',block.index)">
                <ui-select-match placeholder="индекс">{{$select.selected}}</ui-select-match>
                <ui-select-choices repeat="opt in [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]">{{ opt }}</ui-select-choices>
            </ui-select>
        </div>

        <div  class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
            <a class="btn btn-fab btn-fab-mini btn-success" ng-click="$ctrl.blockEditTextPermission[$index]=!$ctrl.blockEditTextPermission[$index]" title="редактировать текстовый блок 1">
                <i class="material-icons">looks_one</i>
            </a>
            <a class="btn btn-fab btn-fab-mini btn-success" ng-click="$ctrl.blockEditText1Permission[$index]=!$ctrl.blockEditText1Permission[$index]" title="редактировать текстовый блок 2">
                <i class="material-icons">looks_two</i>
            </a>
            <a class="btn btn-fab btn-fab-mini btn-pink" ng-click="$ctrl.blockEditMediaPermission[$index]=!$ctrl.blockEditMediaPermission[$index]" title="редактировать фото/видео">
                <i class="material-icons">photo</i>
            </a>
            <a class="btn btn-fab btn-fab-mini btn-info" ng-click="$ctrl.blockEditMedia1Permission[$index]=!$ctrl.blockEditMedia1Permission[$index]" title="редактировать слайды">
                <i class="material-icons">photo_library</i>
            </a>

        </div>
        <div  class="col-lg-4 col-md-4 col-sm-8 col-xs-12">
            <a class="btn btn-fab btn-fab-mini btn-pink" ng-click="$ctrl.blockSettingPermission[$index]=!$ctrl.blockSettingPermission[$index]">
                <i class="material-icons">settings</i>
            </a>
            <a class="btn btn-fab btn-fab-mini btn-info" ng-click="$ctrl.setStyles(block,$index)" title="установить стили">
                <i class="material-icons">opacity</i>
            </a>
            <a class="btn btn-fab btn-fab-mini btn-primary" title="загрузить шаблон" ng-click="$ctrl.getBlockConfig(block)">
                <i class="material-icons">vertical_align_bottom</i>
            </a>
            <a class="btn btn-fab btn-fab-mini btn-violet" title="клонировать блок"  ng-click="$ctrl.cloneBlock(block)">
                <i class="material-icons">add_to_photos</i>
            </a>
            <a class="btn btn-fab btn-fab-mini pull-right btn-warning"  ng-click="$ctrl.deleteBlock(block)" title="удалить блок">
                <i class="material-icons">delete</i>
            </a>

        </div>

        <div class="clearfix"></div>
    </div>
    <div>
        <div  class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
            <div class="togglebutton form-group">
                <label for="block5{{$index}}">
                    <span ng-class="{'active':!block.is}">не опубликован</span>
                    <input type="checkbox"
                           id="block5{{$index}}"
                           ng-model="block.is"
                           ng-change="$ctrl.saveField('blocks.'+block.i+'.is',block.is)">
                    <span ng-class="{'active':!!block.is}">опубликован</span>
                </label>
                <!--<pre>{{block.is|json}}</pre>-->
            </div>
        </div>
        <div  class="col-lg-3 col-md-3 col-sm-3 col-xs-12">
            <div class="togglebutton form-group">
                <label for="block433f{{$index}}">
                    <span ng-class="{'active':!block.template}">обычный</span>
                    <input type="checkbox"
                           id="block433f{{$index}}"
                           ng-model="block.template"
                           ng-change="$ctrl.saveField('blocks.'+block.i+'.template',block.template)">
                    <span ng-class="{'active':block.template}">шаблон</span>
                </label>
            </div>
        </div>

        <div  class="col-lg-5 col-md-5 col-sm-5 col-xs-12">
            <div class="form-group label-floating" ng-show="block.template">
                <label class="control-label">название шаблона</label>
                <input class="form-control" ng-model="block.nameTemplate"
                       ng-model-options="{'updateOn': 'default blur',
                                'debounce': {'default': 700,'blur': 0}}"
                       ng-change="$ctrl.saveField('blocks.'+block.i+'.nameTemplate',block.nameTemplate)">
            </div>
        </div>
        <div class="clearfix"></div>
    </div>

    <div class="clearfix"></div>

    <div ng-if="$ctrl.blockSettingPermission[$index]">
        <hr>
        <style-block-page></style-block-page>
    </div>
    <div ng-if="$ctrl.blockEditTextPermission[$index]">
        <hr>
        <block-text-edit></block-text-edit>
    </div>
    <div ng-if="$ctrl.blockEditText1Permission[$index]">
        <hr>
        <block-text1-edit></block-text1-edit>
    </div>
    <div ng-if="$ctrl.blockEditMediaPermission[$index]">
        <hr>
        <block-media-edit></block-media-edit>
    </div>
    <div ng-if="$ctrl.blockEditMedia1Permission[$index]">
        <hr>
        <div directive="{{block.type}}"></div>
    </div>
    <div class="clearfix"></div>
</div>