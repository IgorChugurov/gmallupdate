<section class="order" ng-class="{'order-mobile':$ctrl.global.get('mobile').val}" ng-hide="$ctrl.$state.current.name!='frame.orders'" ng-cloak>
    <div class="nav-box-stuff">
        <div ng-hide="$ctrl.$state.current.name!='frame.orders'">
            <div ng-if="$ctrl.mobile">
                <div class="tab-nav-stuff">
                    <a class="btn btn-fab btn-fab-mini btn-violet" ui-sref="frame">
                        <i class="material-icons">reply</i>
                    </a>
                </div>
                <div class="tab-nav-stuff">
                    <a class="btn btn-fab btn-fab-mini btn-success"
                       ng-if="$ctrl.global.get('seller').val"
                       ng-click="$ctrl.newOrder()"
                       title="создать новый ордер">
                        <i class="material-icons">add</i>
                    </a>
                </div>
                <div class="tab-nav-stuff">
                    <div class="dropdown">
                        <a class="btn btn-fab btn-fab-mini btn-info dropdown-toggle" title="показывать по" data-toggle="dropdown" data-target="#">
                            <i class="material-icons">format_list_numbered</i>
                        </a>
                        <ul class="dropdown-menu">
                            <li>
                                <a ng-click="$ctrl.changeRows(50)">
                                    по 50 <span ng-bind="$ctrl.global.get('lang').val.position"></span>
                                </a>
                            </li>
                            <li>
                                <a ng-click="$ctrl.changeRows(100)">
                                    по 100 <span ng-bind="$ctrl.global.get('lang').val.position"></span>
                                </a>
                            </li>
                            <li>
                                <a ng-click="$ctrl.changeRows(200)">
                                    по 200 <span ng-bind="$ctrl.global.get('lang').val.position"></span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="tab-nav-stuff search" >
                    <form>
                        <input title="поиск ордера" type="text"
                               ng-model-options="{'updateOn':'default blur','debounce':{'default':1000,'blur':0}}"
                               ng-change="$ctrl.searchItem(searchStr)"
                               placeholder="поиск ордера"  class="search-fluid"  ng-model="searchStr"/>
                        <a ng-click="searchStr='';$ctrl.reloadOrders()" class="btn btn-fab btn-fab-mini btn-warning">
                            <i class="material-icons" title="очистить строку поиска">clear</i>
                        </a>
                    </form>
                </div>
                <div class="tab-nav-stuff pull-right calendar">
                    <p class="form-group input-group">
                        <span class="form-control" >
                            <span class="date-article"  ng-class="{'active-date':$ctrl.openStart}"
                                  ng-bind="$ctrl.datePicker.date.startDate|date"
                                  ng-click="$ctrl.openStart=true">
                        </span>
                        <input type="hidden"
                               uib-datepicker-popup="{{locale.DATETIME_FORMATS.shortDate}}"
                               ng-model="$ctrl.datePicker.date.startDate"
                               show-button-bar="false"
                               is-open="$ctrl.openStart"
                               ng-required="true"
                               ng-change="$ctrl.item.openEnd=true"/>
                        <span  class="date-article">&nbsp; - &nbsp;</span>
                        <span  class="date-article"  ng-class="{'active-date':$ctrl.openEnd}"ng-bind="$ctrl.datePicker.date.endDate|date" ng-click="$ctrl.openEnd=true"></span>
                            <!--datepicker-options="$ctrl.item.dateOptions"-->
                        <input type="hidden"
                               uib-datepicker-popup="{{locale.DATETIME_FORMATS.shortDate}}"
                               ng-model="$ctrl.datePicker.date.endDate"
                               is-open="$ctrl.openEnd"
                               show-button-bar="false"
                               ng-required="true" />
                        </span>

                        <span class="input-group-btn">
                            <a class="btn btn-fab btn-fab-mini btn-success" type="button"
                               ng-click="$ctrl.reloadOrders()" title="обновить список">
                                <i class="material-icons">cached</i>
                            </a>
                        </span>
                    </p>
                </div>
                <div class="tab-nav-stuff pull-right paginator-box">
                    <paginator-main
                            paginate="$ctrl.paginate"
                            getlist="$ctrl.getList()"
                            scroll="{{scrollId}}">
                    </paginator-main>
                </div>
                <div class="clearfix"></div>
            </div>
            <div ng-if="!$ctrl.mobile">
                <div class="tab-nav-stuff">
                    <a class="btn btn-fab btn-fab-mini btn-violet" ui-sref="frame">
                        <i class="material-icons">reply</i>
                    </a>
                </div>
                <div class="tab-nav-stuff">
                    <a class="btn btn-fab btn-fab-mini btn-success"
                       ng-if="$ctrl.global.get('seller').val"
                       ng-click="$ctrl.newOrder()"
                       title="создать новый ордер">
                        <i class="material-icons">add</i>
                    </a>
                </div>
                <div class="tab-nav-stuff">
                    <div class="dropdown">
                        <a class="btn btn-fab btn-fab-mini btn-info dropdown-toggle" title="показывать по" data-toggle="dropdown" data-target="#">
                            <i class="material-icons">format_list_numbered</i>
                        </a>
                        <ul class="dropdown-menu">
                            <li>
                                <a ng-click="$ctrl.changeRows(50)">
                                    по 50 <span ng-bind="$ctrl.global.get('lang').val.position"></span>
                                </a>
                            </li>
                            <li>
                                <a ng-click="$ctrl.changeRows(100)">
                                    по 100 <span ng-bind="$ctrl.global.get('lang').val.position"></span>
                                </a>
                            </li>
                            <li>
                                <a ng-click="$ctrl.changeRows(200)">
                                    по 200 <span ng-bind="$ctrl.global.get('lang').val.position"></span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="tab-nav-stuff search" >
                    <form>
                        <input title="поиск ордера" type="text"
                               ng-model-options="{'updateOn':'default blur','debounce':{'default':1000,'blur':0}}"
                               ng-change="$ctrl.searchItem(searchStr)"
                               placeholder="поиск ордера"  class="search-fluid"  ng-model="searchStr"/>
                        <a ng-click="searchStr='';$ctrl.reloadOrders()" class="btn btn-fab btn-fab-mini btn-warning">
                            <i class="material-icons" title="очистить строку поиска">clear</i>
                        </a>
                    </form>
                </div>
                <div class="tab-nav-stuff pull-right calendar">
                    <p class="form-group input-group">
                        <span class="form-control" >
                            <span class="date-article"  ng-class="{'active-date':$ctrl.openStart}"
                                  ng-bind="$ctrl.datePicker.date.startDate|date"
                                  ng-click="$ctrl.openStart=true">
                        </span>
                        <input type="hidden"
                               uib-datepicker-popup="{{locale.DATETIME_FORMATS.shortDate}}"
                               ng-model="$ctrl.datePicker.date.startDate"
                               show-button-bar="false"
                               is-open="$ctrl.openStart"
                               ng-required="true"
                               ng-change="$ctrl.item.openEnd=true"/>
                        <span  class="date-article">&nbsp; - &nbsp;</span>
                        <span  class="date-article"  ng-class="{'active-date':$ctrl.openEnd}"ng-bind="$ctrl.datePicker.date.endDate|date" ng-click="$ctrl.openEnd=true"></span>
                            <!--datepicker-options="$ctrl.item.dateOptions"-->
                        <input type="hidden"
                               uib-datepicker-popup="{{locale.DATETIME_FORMATS.shortDate}}"
                               ng-model="$ctrl.datePicker.date.endDate"
                               is-open="$ctrl.openEnd"
                               show-button-bar="false"
                               ng-required="true" />
                        </span>

                        <span class="input-group-btn">
                            <a class="btn btn-fab btn-fab-mini btn-success" type="button"
                               ng-click="$ctrl.reloadOrders()" title="обновить список">
                                <i class="material-icons">cached</i>
                            </a>
                        </span>
                    </p>
                </div>
                <div class="clearfix"></div>
                <div class="tab-nav-stuff action form-group">
                    <div class="checkbox">
                        <label>
                            <input  ng-model="$ctrl.mark" type="checkbox" ng-change="$ctrl.markAllStuffs($ctrl.mark)">
                         </label>
                    </div>
                </div>
                <div class="tab-nav-stuff  action-select">
                    <ui-select ng-model="$ctrl.action"
                               skip-focusser="true"
                               search-enabled="false"
                               title="выберите действие"
                               ng-change="$ctrl.changeAction($ctrl.action)">
                        <ui-select-match  placeholder="действие" style="width: 250px">{{$select.selected.value}}</ui-select-match>
                        <ui-select-choices repeat="opt.key as (key, opt) in $ctrl.listOfActions">{{ opt.value }}</ui-select-choices>
                    </ui-select>
                </div>
                <div class="tab-nav-stuff pull-right paginator-box">
                    <paginator-main
                            paginate="$ctrl.paginate"
                            getlist="$ctrl.getList()"
                            scroll="{{scrollId}}">
                    </paginator-main>
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
    </div>

    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <div  class="cart-detail">
            <div>
            <div  ng-repeat="order in $ctrl.orders|filter:$ctrl.filterOrderList"  ng-class="{bgcolor_one:($index%2==0),bgcolor_two:($index%2!=0)}" >
                <div bs-component>
                    <div  id="{{order._id}}">
                        <div class="col-lg-3 col-md-3 col-sm-4 col-xs-12 number-box">
                            <div class="col-lg-3 col-md-4 col-sm-4 col-xs-4 label-action">
                                <div  ng-class="{'checkbox':true}">
                                    <label>
                                        <input  type="checkbox" ng-model="order.select">
                                    </label>
                                </div>
                            </div>
                            <div class="col-lg-9 col-md-8 col-sm-8 col-xs-8 number-order" ng-click="$ctrl.$state.go('frame.orders.order',{id:order._id})">
                                <span>№ <strong  ng-bind="order.num"></strong> </span>
                                <span>сумма - <strong ng-bind="(order.paySum+((order.totalPay)?order.totalPay:0)).toFixed(2)"></strong>&nbsp{{order.currency}}</span>
                            </div>
                            <div class="clearfix"></div>
                        </div>

                        <div class="col-lg-7 col-md-7 col-sm-6 col-xs-9 item-block" ng-click="$ctrl.$state.go('frame.orders.order',{id:order._id})">
                            <div class="col-lg-4 col-sm-4 col-sm-4 col-xs-4 date-box">
                                <span class=" order-date"> от <span  ng-bind="$ctrl.moment(order.date).format('LLL')"></span></span><br>
                                    <span ng-switch="order.status">
                                        <span class="status" ng-switch-when="1">поступил</span>
                                        <span class="status" ng-switch-when="2">принят</span>
                                        <span class="status" ng-switch-when="3">оплачен</span>
                                        <span class="status" ng-switch-when="5">доставлен</span>
                                        <span class="status del" ng-switch-when="6">удален</span>
                                    </span>
                            </div>
                            <div class="col-lg-6 col-sm-6  col-sm-6 col-xs-6 name-box">
                                <span>
                                    <span> <strong ng-bind="order.profile.fio"> </strong></span><br>
                                    <span ng-if="order.online"><span class="link-success on-line">в сети</span></span>
                                </span>
                            </div>
                            <div class="col-lg-2 col-sm-2 col-sm-6 col-xs-2 danger-box">
                                <span ng-if="$ctrl.global.get('seller').val && order.priceSaleHandle" class="danger link-warning text-right">цена товара была изменена</span>
                                <span ng-if="$ctrl.global.get('seller').val && order.maxDiscountOver" class="danger link-warning text-right">превышен лимит скидки</span>
                            </div>
                            <div class="clearfix"></div>
                        </div>
                        <div class="col-lg-2 col-md-2 col-sm-2 col-xs-3 button-box">
                            <a class="pull-right btn btn-fab btn-fab-mini btn-warning"  ng-disabled="order.status>1"  ng-click="$ctrl.deleteItem(order,$event)">
                                <i class="material-icons">delete</i><!--ng-if="order.status<2"-->
                            </a>
                            <span class="pull-right chat-badge"  ng-if="order.chatMessages=$ctrl.getUnReadChatMessages(order)">
                                <a ng-click="$ctrl.$state.go('frame.orders.order',{id:order._id,block:'chat'})"
                                   class="btn btn-fab btn-fab-mini btn-info">
                                    <i class="material-icons" >message</i>
                                </a>
                                <span class="badge"ng-bind="order.chatMessages"></span>
                            </span>

                        </div>
                        <div class="clearfix"></div>
                    </div>
                </div>
            </div>
            <div class="clearfix"></div>

        </div>
        </div>
    </div>
    <empty-list items="$ctrl.itemsCount" message="На данный момент у Вас нет ни одного заказа."></empty-list>
    <div class="clearfix"></div>
    <paginator-main
            paginate="$ctrl.paginate"
            getlist="$ctrl.getList()"
            scroll="{{scrollId}}">
    </paginator-main>

</section>
<div ui-view>
</div>



