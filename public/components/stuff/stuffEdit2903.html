<div class="stuffEdit"  ng-class="{'stuffEdit-mobile':global.get('mobile').val}" id="filterBlock">
    <div class="nav-box-stuff">
        <div class="tab-nav-stuff text-center">
            <a class="btn btn-fab btn-fab-mini btn-violet" ui-sref="frame.stuffs($stateParams)">
                <i class="material-icons">reply</i>
            </a>
        </div>
        <div class="tab-nav-stuff text-center" title="ОПИСАНИЕ">
            <a  class="btn btn-fab btn-fab-mini" ng-click="cnahgeBlock('mainInfo')" ng-class="{'active':block=='mainInfo'}"><!-- ng-class="{'btn-fab-mini btn':global.get('mobile')}"-->
                <i class="material-icons link-success">description</i>
                <!--<p ng-if="global.get('mobile')">описание</p>-->
            </a>
        </div>
        <div class="tab-nav-stuff text-center" title="ХАРАКТЕРИСТИКИ" >
            <a  class="btn btn-fab btn-fab-mini"ng-click="cnahgeBlock('filter')" ng-class="{'active':block=='filter'}">
                <i class="material-icons link-success">filter_list</i>
            </a>
        </div>
        <div class="tab-nav-stuff text-center" title="ГАЛЕРЕЯ" >
            <a  class="btn btn-fab btn-fab-mini"ng-click="cnahgeBlock('gallery')" ng-class="{'active':block=='gallery'}">
                <i class="material-icons link-success">photo_library</i>
            </a>
        </div>
        <div class="tab-nav-stuff text-center" title="РАЗНОВИДНОСТИ" >
            <a  class="btn btn-fab btn-fab-mini"ng-click="cnahgeBlock('group')" ng-class="{'active':block=='group'}">
                <i class="material-icons link-success">group_work</i>
            </a>
        </div>
        <div class="tab-nav-stuff text-center" title="КОММЕНТАРИИ" >
            <a class="btn btn-fab btn-fab-mini" ng-click="cnahgeBlock('comments')" ng-class="{'active':block=='comments'}">
                <i class="material-icons link-success">insert_comment</i>
            </a>
        </div>
        <div class="tab-nav-stuff text-center" title="БЛОКИ" >
            <a class="btn btn-fab btn-fab-mini" ng-click="cnahgeBlock('blocks')" ng-class="{'active':block=='blocks'}">
                <i class="material-icons link-success">select_all</i>
            </a>
        </div>
        <div class="tab-nav-stuff text-center pull-right paginator-box" ng-show="block=='comments'">
            <paginator-main
                    ng-if="$ctrl.paginate1"
                    paginate="$ctrl.paginate1"
                    getlist="$ctrl.getComments()"
                    scroll="{{scrollId}}">
            </paginator-main>
        </div>
        <div class="tab-nav-stuff text-center pull-right" ng-show="block=='comments'">
            <a class="btn btn-fab btn-fab-mini btn-success" title="добавить новый комментарий"  ng-click="$ctrl.createNewComment()">
                <i class="material-icons">add</i>
            </a>
        </div>
        <div class="tab-nav-stuff add-block pull-right" ng-show="block=='blocks'">
            <ui-select ng-model="$ctrl.newBlock" skip-focusser="true" search-enabled2="false" ng-change="$ctrl.addBlock($ctrl.newBlock)">
                <ui-select-match placeholder="добавить блок">{{$select.selected.value}}</ui-select-match>
                <ui-select-choices repeat="opt.key as (key, opt) in $ctrl.listOfBlocks">{{ opt.value }}</ui-select-choices>
            </ui-select>
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="content-tab-box" ng-show="block=='mainInfo'"  ng-init="displayHelp=false">
        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 ">
            <div class="cart-detail">
                <h4 class="name-box text-center">товар/услуга</h4>
                <div class="form-group label-floating ">
                    <label for="name" class="control-label">наименование</label>
                    <input type="text" id="name" class="form-control"
                           ng-model="item.name"
                           required
                           placeholder="наименование"
                           ng-model-options="{'updateOn':'default blur','debounce':{'default':700,'blur':0}}"
                           ng-change="saveField(item,'name')"/>
                </div>
                <div class="row">
                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 ">
                        <div class="form-group label-static ">
                            <label  for="articul" class="control-label">артикул</label>
                            <input type="text" id="articul" class="form-control"
                                   ng-model="item.artikul"
                                   placeholder="артикул"
                                   ng-model-options="{'updateOn':'default blur','debounce':{'default':700,'blur':0}}"
                                   ng-change="saveField(item,'artikul')">
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 ">
                        <div class="form-group label-floating">
                            <label  for="index" class="control-label">индекс</label>
                            <input name="index" type="text" class="form-control" id="index" ng-model="item.index" pattern="[0-9-\.]{1,7}"
                                   ng-model-options="{'updateOn':'default blur','debounce':{'default':700,'blur':0}}"
                                   ng-change="saveField(item,'index')"><!--rur4-->
                        </div>
                    </div>
                    <div class="clearfix"></div>
                    <div class="col-lg-7 col-md-7 col-sm-7 col-xs-12 ">
                        <div class="form-group ">
                            <div class="togglebutton">
                                <label for="actived">
                                    <span ng-class="{'active':!item.actived}"> не опубликован</span>
                                    <input type="checkbox"
                                           id="actived"
                                           ng-model="item.actived"
                                           ng-change="saveField(item,'actived')">
                                    <span ng-class="{'active':item.actived}">опубликован</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-5 col-md-5 col-sm-5 col-xs-12 text-right">
                        <div class="form-group">
                            <div class="checkbox">
                                <label>
                                    <span ng-if="!item.archived">в архив</span>
                                    <span ng-if="item.archived">уже в архиве</span>
                                    <input type="checkbox" ng-model="item.archived" ng-change="saveField(item,'archived')">
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                </div>
            </div>
            <div class="cart-detail">
                <h4 class="name-box text-center">блок цен</h4>
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                    <p class="label-menu">валюта учета</p>
                    <div class="currency-chois" ng-if="global.get('store').val.currencyArr.length>1">
                        <ui-select ng-model="item.currency"
                                   ng-change="saveField(item,'currency')"
                                   on-select="onSelected($item)"
                                   append-to-body="true"
                                   search-enabled="false">
                            <ui-select-match allow-clear="true" placeholder="валюта учета">
                                <span ng-bind="$select.selected"></span>
                            </ui-select-match>
                            <ui-select-null-choice>по умолчанию</ui-select-null-choice>
                            <ui-select-choices repeat="opt in global.get('store').val.currencyArr">
                                <span ng-bind="opt"></span>
                            </ui-select-choices>
                        </ui-select>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12" ng-if="item.sortsOfStuff.filter">
                    <p class="info-text">активный признак при выборе для заказа тот, который стоит первым для данной характеристики</p>

                </div>
                <div class="clearfix"></div>
                <hr>
                <div>
                    <p class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                        <a class="form-group">
                            <drive-sale>
                                <span class="label-menu">управление ценой<br> SALE и скидкой</span>
                            </drive-sale>
                        </a>
                    </p>
                    <p class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                        <a class="form-group">
                            <drive-retail>
                                <span class="label-menu">управление <br>розничной ценой</span>
                            </drive-retail>
                        </a>
                    </p>
                    <div class="clearfix"></div>

                </div>
                <div ng-show="!item.sortsOfStuff.differentPrice">
                    <div class="col-lg-3  col-md-3 col-sm-6 col-xs-12">
                        <div class="form-group label-floating">
                            <label  for="price" class="control-label">цена</label>
                            <input name="price" type="text" class="form-control"
                                   ng-model-options="{'updateOn':'default blur','debounce':{'default':700,'blur':0}}"
                                   ng-change="saveField(item,'price')"
                                   id="price" ng-model="item.price" pattern="[0-9-\.]{1,7}" required>
                        </div>
                    </div>
                    <div class="col-lg-3  col-md-3 col-sm-6 col-xs-12">
                        <div ng-if="item.priceSale"
                             class="form-group label-floating">
                            <label  for="sale" class="control-label">SALE</label>
                            <input name="sale" type="text" class="form-control" id="sale"
                                   ng-model="item.priceSale" disabled>
                        </div>
                    </div>
                    <div class="col-lg-3  col-md-3 col-sm-6 col-xs-12">
                        <div ng-if="item.retail"
                             class="form-group label-floating">
                            <label  for="retail" class="control-label">розница</label>
                            <input name="retail" type="text" class="form-control"
                                   id="retail" ng-model="item.retail" disabled>
                        </div>
                    </div>

                    <div class="col-lg-3  col-md-3 col-sm-6 col-xs-12">
                        <div ng-if="item.priceCampaign"
                             class="form-group label-floating">
                            <label  for="campaign" class="control-label">акция</label>
                            <input name="campaign" type="text" class="form-control" id="campaign"
                                   ng-model="item.priceCampaign" disabled>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                    <p class="label-menu text-center">
                        <span>максимальная скидка на данный товар</span>
                        <span ng-bind="item.driveSalePrice.maxDiscount"></span><span> %</span>
                    </p>
                </div>
            </div>
            <div class="cart-detail">
                <div class="editor">
                    <h4 class="name-box">описание</h4>
                    <div class="form-group" ng-if="$ctrl.tinymceOption">
                        <textarea rows="12" ui-tinymce="$ctrl.tinymceOption" ng-model-options="{'updateOn': 'default blur','debounce': {'default': 700,'blur': 0}}"
                                  ng-change="saveField(item,'desc')"
                                  ng-model="item.desc">

                            </textarea>
                    </div>

                </div>
            </div>
            <div class="cart-detail">
                <div class="editor ">
                    <h4 class="name-box">описание 2</h4>
                    <div class="form-group" ng-if="$ctrl.tinymceOption">
                        <textarea rows="12" ui-tinymce="$ctrl.tinymceOption"
                                  ng-model-options="{'updateOn': 'default blur','debounce': {'default': 700,'blur': 0}}"
                                  ng-change="saveField(item,'desc1')"
                                  ng-model="item.desc1">
                                </textarea>
                    </div>
                </div>
            </div>
            <div class="cart-detail">
                <div class="editor">
                    <h4 class="name-box">описание 3</h4>
                    <div class="form-group" ng-if="$ctrl.tinymceOption">
                        <textarea rows="12" ui-tinymce="$ctrl.tinymceOption" ng-model-options="{'updateOn': 'default blur','debounce': {'default': 700,'blur': 0}}"
                                  ng-change="saveField(item,'desc2')"
                                  ng-model="item.desc2">

                                </textarea>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
            <div class="cart-detail">
                <div class="form-group">
                    <h4 class="name-box text-center">тип товара</h4>
                    <div class="togglebutton text-center">
                        <label for="service">
                            <span ng-class="{'active':!item.service}">товар</span>
                            <input type="checkbox"
                                   id="service"
                                   ng-model="item.service"
                                   ng-change="saveField(item,'service')">
                            <span ng-class="{'active':item.service}">услуга</span>
                        </label>
                    </div>
                    <div ng-if="item.service" style="margin-top: 10px">
                        <p class="info-text"> установите длительность услуги (1 деление - {{15*deltaTimePart}} мин)<br>
                            <rzslider rz-slider-model="slider.value" rz-slider-options="slider.options" ></rzslider></p>
                        <p> длительность услуги - <strong>{{15*slider.value*deltaTimePart}} мин</strong></p>

                        <p class="name-box text-center">цвет в расписании</p>


                        <div class="input-group">
                                    <span class="input-group-addon">
                                        <a colorpicker="rgba" colorpicker-position="bottom" ng-model="item.backgroundcolor">
                                            <i class="material-icons md-42 link-pink">color_lens</i>
                                        </a>
                                    </span>
                            <input type="text" class="form-control" placeholder="color" ng-model="item.backgroundcolor"
                                   ng-change="saveField(item,'backgroundcolor')">
                        </div>


                    </div>

                </div>
                <div class="clearfix"></div>
            </div>
            <div class="cart-detail">
                <div class="col-lg-7 col-md-7 col-sm-7 col-xs-12 ">

                    <h4 class="name-box text-center">связасть с</h4>
                    <div>
                        <div class="form-group">
                            <span class="label-menu">категорией</span>&nbsp;
                            <a ng-click="selectCategory()">
                                <span ng-bind="item.category[0].name"></span>&nbsp;
                                <i class="material-icons link-warning">cached</i>
                            </a>
                        </div>
                    </div>
                    <div ng-show="item.category[0].brands && item.category[0].brands.length">
                        <div class="form-group">
                            <span class="label-menu">брендом</span>&nbsp;
                            <a ng-click="selectBrand()">
                                <span ng-bind="item.brand.name"></span>&nbsp;
                                <i class="material-icons link-warning">cached</i>
                            </a>

                        </div>
                    </div>
                    <div   ng-if="item.brand.tags.length">
                        <div class="form-group">
                            <span class="label-menu">коллекцией</span>&nbsp;
                            <a ng-click="selectBrandTag()">
                                            <span ng-show="item.brandTag==brandTag._id" ng-repeat="brandTag in item.brand.tags track by $index">
                                                <span ng-bind="brandTag.name"></span>
                                            </span>&nbsp;
                                <i class="material-icons link-warning">cached</i>
                            </a>
                        </div>
                    </div>

                </div>
                <div class="col-lg-5 col-md-5 col-sm-5 col-xs-12 ">
                    <h4 class="name-box text-center">единица измерения</h4>
                    <ui-select ng-model="item.unitOfMeasure"
                               ng-change="saveField(item,'unitOfMeasure')"
                               on-select="onSelected($item)"
                               append-to-body="true"
                               search-enabled="false">
                        <ui-select-match allow-clear="true" placeholder="ед.измерения">
                            <span ng-bind="$select.selected"></span>
                        </ui-select-match>
                        <ui-select-null-choice>без единиц измерения</ui-select-null-choice>
                        <ui-select-choices repeat="opt in unitOfMeasure">
                            <span ng-bind="opt"></span>
                        </ui-select-choices>
                    </ui-select>
                </div>
                <div class="clearfix"></div>
            </div>
            <div class="cart-detail">
                <div class="form-group col-lg-6 col-md-6 col-sm-12 col-xs-12">
                    <h4 class="name-box text-center">тип заказа</h4>
                    <div class="radio ">
                        <label>
                            <input type="radio" ng-change="saveField(item,'orderType')"ng-model="item.orderType" name="optionsRadios" id="optionsRadios0" value="0" >
                            положить товар в корзину
                        </label>
                    </div>
                    <div class="radio ">
                        <label>
                            <input type="radio" ng-change="saveField(item,'orderType')"ng-model="item.orderType"name="optionsRadios" id="optionsRadios1" value="1">
                            заказ в один клик
                        </label>
                    </div>
                    <div class="radio ">
                        <label>
                            <input type="radio" ng-change="saveField(item,'orderType')"ng-model="item.orderType"name="optionsRadios" id="optionsRadios2" value="2">
                            запись на время
                        </label>
                    </div>
                    <div class="radio ">
                        <label>
                            <input type="radio" ng-change="saveField(item,'orderType')"ng-model="item.orderType"name="optionsRadios" id="optionsRadios7" value="7">
                            запись в расписании
                        </label>
                    </div>

                    <div class="radio ">
                        <label>
                            <input type="radio" ng-change="saveField(item,'orderType')"ng-model="item.orderType"name="optionsRadios" id="optionsRadios3" value="3">
                            только просмотр
                        </label>
                    </div>
                    <div class="radio ">
                        <label>
                            <input type="radio" ng-change="saveField(item,'orderType')"ng-model="item.orderType"name="optionsRadios" id="optionsRadios6" value="6">
                            заказ звонка
                        </label>
                    </div>
                    <div class="radio ">
                        <label>
                            <input type="radio" ng-change="saveField(item,'orderType')"ng-model="item.orderType"name="optionsRadios" id="optionsRadios4" value="4">
                            предоставление бонуса при заказе товаров
                        </label>
                    </div>
                    <div class="radio ">
                        <label>
                            <input type="radio" ng-change="saveField(item,'orderType')"ng-model="item.orderType"name="optionsRadios" id="optionsRadios5" value="5">
                            шаблон
                        </label>
                    </div>
                    <div class="radio ">
                        <label>
                            <input type="radio" ng-change="saveField(item,'orderType')"ng-model="item.orderType"name="optionsRadios" id="optionsRadios8" value="8">
                            скачивание видео
                        </label>
                    </div>


                </div>
                <div class="form-group col-lg-6 col-md-6 col-sm-12 col-xs-12">
                    <div>
                        <p class="name-box text-center">ASIN для Amazon</p>
                        <div class="form-group label-floating">
                            <label class="control-label">код товара </label>
                            <input class="form-control" type="text" ng-change="saveField(item,'asin')"ng-model="item.asin">
                        </div>
                    </div>
                    <div  ng-if="item.orderType==4">
                        <p class="name-box text-center">тип бонуса</p>
                        <div class="radio ">
                            <label>
                                <input type="radio" ng-change="saveField(item,'bonusType')"ng-model="item.bonusType" value="link" >
                                выслать ссылку для скачивания
                            </label>
                        </div>
                        <div class="radio ">
                            <label>
                                <input type="radio" ng-change="saveField(item,'bonusType')"ng-model="item.bonusType"value="img" >
                                выслать изображение
                            </label>
                        </div>
                        <div class="radio">
                            <label>
                                <input type="radio" ng-change="saveField(item,'bonusType')"ng-model="item.bonusType"value="file" >
                                выслать файл
                            </label>
                        </div>
                        <div class="radio">
                            <label>
                                <input type="radio" ng-change="saveSection(section,'bonusType')"ng-model="item.bonusType"value="media" >
                                скачать видео
                            </label>
                        </div>

                    </div>

                    <div  ng-if="item.orderType==5">
                        <p class="name-box text-center">поддомен шаблона</p>
                        <div class="form-group label-floating">
                            <label class="control-label">поддомен шаблона</label>
                            <input class="form-control" type="text" ng-change="saveField(item,'templateUrl')"ng-model="item.templateUrl">
                        </div>
                    </div>
                    <div  ng-if="item.orderType==8">
                        <p class="name-box text-center">ссылка для скачивания</p>
                        <div class="form-group label-floating">
                            <label class="control-label">ссылка для видео</label>
                            <input class="form-control" type="text" ng-change="saveField(item,'media')"ng-model="item.media">
                        </div>
                        <p class="name-box text-center">уровень доступа</p>
                        <ui-select ng-model="item.levelMedia"
                                   ng-change="saveField(item,'levelMedia')"
                                   on-select="onSelected($item)"
                                   append-to-body="true"
                                   search-enabled="false">
                            <ui-select-match allow-clear="true" placeholder="уровень доступа">
                                <span ng-bind="$select.selected"></span>
                            </ui-select-match>
                            <ui-select-null-choice>без единиц измерения</ui-select-null-choice>
                            <ui-select-choices repeat="opt in levelMedia">
                                <span ng-bind="opt"></span>
                            </ui-select-choices>
                        </ui-select>
                    </div>

                </div>
                <div class="clearfix"></div>
                <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                    <h4 class="name-box text-center">тип доступа</h4>
                    <ui-select ng-model="item.access.t"
                               ng-change="saveField(item,'access')"
                               append-to-body="true"
                               search-enabled="false">
                        <ui-select-match allow-clear="true" placeholder="тип доступа">
                            <span ng-bind="$select.selected"></span>
                        </ui-select-match>
                        <ui-select-null-choice>без типа доступа</ui-select-null-choice>
                        <ui-select-choices repeat="opt in [1]">
                            <span ng-bind="opt"></span>
                        </ui-select-choices>
                    </ui-select>
                </div>
                <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                    <h4 class="name-box text-center">длительность</h4>
                    <ui-select ng-model="item.access.d"
                               ng-change="saveField(item,'access')"
                               append-to-body="true"
                               search-enabled="false">
                        <ui-select-match allow-clear="true" placeholder="длительность">
                            <span ng-bind="$select.selected"></span>
                        </ui-select-match>
                        <ui-select-null-choice>безсросчаная</ui-select-null-choice>
                        <ui-select-choices repeat="opt in [31,365]">
                            <span ng-bind="opt"></span>
                        </ui-select-choices>
                    </ui-select>
                </div>
                <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                    <div class="form-group">
                        <div class="checkbox">
                            <label>
                                <span ng-if="!item.access.p">в приоритет</span>
                                <span ng-if="item.access.p">в приоритете</span>
                                <input type="checkbox" ng-model="item.access.p" ng-change="saveField(item,'access')">
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="cart-detail">
                <h4 class="text-center name-box"  ng-show="item.sortsOfStuff.differentPrice">наличие</h4>
                <div style="overflow-x: auto" >
                    <table class=" table table-striped table-hover different">
                        <thead>
                        <tr>
                            <th>признак</th>
                            <th class="text-center" >наличие</th>
                            <th class="text-center"   ng-if="item.sortsOfStuff.differentPrice">цена</th>
                            <th class="text-center"    ng-if="item.sale&&item.sortsOfStuff.differentPrice">sale</th>
                            <th class="text-center"    ng-if="global.get('store').val.seller.retail&&item.sortsOfStuff.differentPrice">розница</th>
                            <th class="text-center"    ng-if="item.priceCampaign&&item.sortsOfStuff.differentPrice">акция</th>
                        </tr>
                        </thead>
                        <tbody>

                        <tr ng-repeat="tag in item.stockKeysArray">
                            <td><span ng-show="tag!='notag'" ng-bind="tag.name"></span></td>
                            <td class="text-center">
                                <div class="checkbox">
                                    <label>
                                        <input type="checkbox" ng-model="tag.quantity" ng-true-value=1 ng-false-value=0 ng-change="$ctrl.changeStock(item,tag)">
                                    </label>
                                </div>

                            </td>

                            <td  class="price-box text-center"  ng-show="item.sortsOfStuff.differentPrice">
                                <input class="form-control"type="text" ng-model="item.stock[tag._id].price"  ng-change="saveField(item,'stock')">

                            </td>
                            <td class="price-box text-center" ng-if="item.sale&&item.sortsOfStuff.differentPrice">
                                <input class="form-control"type="text" ng-model="item.stock[tag._id].priceSale" disabled>

                            </td>
                            <td class="price-box text-center" ng-if="global.get('store').val.seller.retail&&item.sortsOfStuff.differentPrice">

                                <input class="form-control"type="text" ng-model="item.stock[tag._id].retail" disabled>

                            </td>
                            <td class="price-box text-center" ng-if="item.priceCampaign&&item.sortsOfStuff.differentPrice">

                                <input class="form-control"type="text" ng-model="item.stock[tag._id].priceCampaign" disabled>

                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="cart-detail">
                <h4 class="name-box text-center">дополнительные значения</h4>
                <div class="col-lg-8  col-md-8 col-sm-8 col-xs-12">
                    <div class="form-group text-center">
                        <p class="label-menu">минимальное количество для заказа</p>
                        <div class="togglebutton">
                            <label for="singlemin">
                                <span ng-class="{'active':!item.multiple}">без ограничения</span>
                                <input type="checkbox"
                                       id="singlemin"
                                       ng-model="item.multiple"
                                       ng-change="saveField(item,'multiple')">
                                <span ng-class="{'active':item.multiple}">ограничить</span>
                            </label>
                        </div>

                    </div>
                </div>
                <div class="col-lg-4  col-md-4 col-sm-4 col-xs-12">
                    <div class="form-group label-floating" ng-show="item.multiple">
                        <label class="control-label">min количество</label>
                        <input class="form-control"ng-model="item.minQty"ng-model-options="{'updateOn':'default blur','debounce':{'default':700,'blur':0}}"
                               ng-change="saveField(item,'minQty')">
                    </div>
                </div>
                <div class="clearfix"></div>
                <hr>
                <div class="col-lg-8  col-md-8 col-sm-8 col-xs-12">
                    <div class="form-group text-center">
                        <p class="label-menu">максимальное количество для заказа</p>
                        <div class="togglebutton">
                            <label for="single">
                                <span ng-class="{'active':!item.single}">без ограничения</span>
                                <input type="checkbox"
                                       id="single"
                                       ng-model="item.single"
                                       ng-change="saveField(item,'single')">
                                <span ng-class="{'active':item.single}">ограничить</span>
                            </label>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4  col-md-4 col-sm-4 col-xs-12">
                    <div class="form-group label-floating" ng-show="item.single">
                        <label class="control-label">max количество</label>
                        <input class="form-control" ng-model="item.maxQty"
                               ng-model-options="{'updateOn':'default blur','debounce':{'default':700,'blur':0}}"
                               ng-change="saveField(item,'maxQty')">
                    </div>
                </div>
                <div class="clearfix"></div>
                <hr>
                <div class="col-lg-8  col-md-8 col-sm-8 col-xs-12">
                    <div class="form-group text-center">
                        <p class="label-menu">отображение товара в каталоге</p>
                        <div class="togglebutton">
                            <label for="first">
                                <span ng-class="{'active':!item.checked}">по индексу</span>
                                <input type="checkbox"
                                       id="first"
                                       ng-model="item.checked"
                                       ng-change="ctrl.setBigIndex($ctrl.checked)">
                                <span ng-class="{'active':item.checked}">показывать первым</span>
                            </label>
                        </div>
                    </div>
                </div>
                <div class="clearfix"></div>
                <hr>
            </div>
            <div class="cart-detail">
                <div class="form-group text-center">
                    <h4 class="name-box">дополнительная таблица</h4>
                    <ui-select ng-model="item.addInfo"
                               ng-change="saveField(item,'addInfo')"
                               on-select="onSelected($item)"
                               append-to-body="true"
                               search-enabled="false">
                        <ui-select-match allow-clear="true" placeholder="без таблицы">
                            <span ng-bind="$select.selected.name"></span>
                        </ui-select-match>
                        <ui-select-null-choice>без доп таблицы</ui-select-null-choice>
                        <ui-select-choices repeat="opt._id as opt in item.addInfos">
                            <span ng-bind="opt.name"></span>
                        </ui-select-choices>
                    </ui-select>

                </div>
                <hr>

                <div class=" item-filter" ng-if="item.category.filters.length">
                    <div class="form-group">
                        <p class="info-text">Таблица параметров характеристики товара (например, таблица размеров) показывается на странице товара.</p>
                        <p class="text-center ">выбрать таблицу параметров для товара</p>
                        <ui-select ng-if="item.addInfos"
                                   ng-model="item.addInfo"
                                   append-to-body="true"
                                   skip-focusser="false"
                                   ng-change="saveField(item,'addInfo')"
                                   search-enabled="false">
                            <ui-select-match allow-clear="true" placeholder="без таблицы параметров">
                                <span ng-bind="$select.selected.name"></span>
                            </ui-select-match>
                            <ui-select-null-choice>без таблицы</ui-select-null-choice>
                            <ui-select-choices repeat="o._id as o  in item.addInfos">
                                <span ng-bind="o.name"></span>
                            </ui-select-choices>
                        </ui-select>
                    </div>
                </div>
            </div>
            <div class="cart-detail">
                <div class="form-inline text-center">
                    <h4 class="name-box text-center">структура страницы (разделение на столбцы шириной в %)</h4>
                    <div class="radio">
                        <label>
                            <input type="radio" ng-change="saveField(item,'grid')" ng-model="item.grid" name="optionsRatio" value="0" >
                            50/50
                        </label>
                    </div>
                    <div class="radio">
                        <label>
                            <input type="radio" ng-change="saveField(item,'grid')" ng-model="item.grid" name="optionsRatio" value="1">
                            40/60
                        </label>
                    </div>
                    <div class="radio">
                        <label>
                            <input type="radio" ng-change="saveField(item,'grid')" ng-model="item.grid" name="optionsRatio" value="2">
                            30/70
                        </label>
                    </div>
                    <div class="radio">
                        <label>
                            <input type="radio" ng-change="saveField(item,'grid')" ng-model="item.grid" name="optionsRatio" value="3">
                            60/40
                        </label>
                    </div>
                    <div class="radio">
                        <label>
                            <input type="radio" ng-change="saveField(item,'grid')" ng-model="item.grid" name="optionsRatio" value="4">
                            70/30
                        </label>
                    </div>
                    <div class="radio">
                        <label>
                            <input type="radio" ng-change="saveField(item,'grid')" ng-model="item.grid" name="optionsRatio" value="5">
                            100/0
                        </label>
                    </div>
                </div>
            </div>
            <div class="clearfix"></div>


        </div>
        <div class="clearfix"></div>
    </div>
    <div class="content-tab-box" ng-show="block=='filter'"  ng-init="displayHelp1=false" >
        <div class=" col-lg-6 col-md-6 col-sm-6 col-xs-12" ng-if="item.category" ng-repeat="filter in item.category[0].filters track by filter._id" ng-if="filter.tags.length">
            <div class="cart-detail item-filter">
                <h4 class="name-box text-center" for="filter{{filter._id}}" ng-bind="filter.name" ng-click="selectFilter(filter)"></h4>
                <div class=" select-filter">
                    <a class="btn btn-fab btn-fab-mini btn-success pull-left"  ng-click="selectFilter(filter)">
                        <i class="material-icons" title="выбрать характеристику">cached</i>
                    </a>
                    <span class="pull-left" ng-show="tag.set" ng-repeat="tag in filter.tags track by $index">
                            <span class="name-filtarTag" ng-bind="tag.name"></span>
                        </span>
                    <span ng-bind="itemfilter.name"></span>
                    <div class="clearfix"></div>
                    <div>
                        <input class="form-control" ng-if="filter.count"
                               ng-model="item.filters[filter._id]"
                               ng-model-options="{'updateOn':'default blur','debounce':{'default':700,'blur':0}}"
                               ng-change="saveField(item,'filters')" type="number"
                               placeholder="введите значение">

                    </div>
                    <a class="pull-right" ng-click="setAddInfos(filter,item.addInfo)">
                        <p class="label-menu">
                            <span class="link-success">создать/редактировать таблицу параметров</span>
                        </p>
                    </a>

                </div>
                <div class="clearfix"></div>
            </div>
        </div>
    </div>
    <div class="content-tab-box" ng-show="block=='gallery'"  ng-init="displayHelp2=false" >
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <div class=" gallery-photo">
                <!--<h3 class="text-center">галерея фото</h3>-->
                <div class="galleryWrapper">
                    <div class="galleryTable">
                        <div class="galleryRow">
                            <ul class="gallery-item-ul" ng-if="item.gallery.length<17">
                                <li  class="gallery-item">
                                    <span class="helper"></span>
                                    <load-image
                                            upload-url="/api/collections/Photo/fileUploadGallery?collectionName=Stuff"
                                            item-id="{{item._id}}"
                                            item-url="{{item.url}}"
                                            item-resourse="Items"
                                            file-src="fileSrc"
                                            name-img="gallery"
                                            gallery="item.gallery">
                                    </load-image>
                                </li>
                            </ul>
                            <ul dnd-list="item.gallery"
                                dnd-allowed-types="['image']"
                                dnd-external-sources="true"
                                dnd-effect-allowed="move"
                                dnd-horizontal-list="true" class="gallery-item-ul">
                                <li ng-repeat="image in item.gallery"
                                    dnd-draggable="image"
                                    dnd-type="'image'"
                                    dnd-effect-allowed="move"
                                    dnd-moved="item.gallery.splice($index, 1)"
                                    dnd-dragend="movedImage()">
                                    <span class="helper"></span>
                                    <img  ng-src="{{image.thumb}}">
                                    <a class="btn  btn-fab btn-fab-mini delete btn-warning" ng-click="deleteImage(image,$index)">
                                        <i class="material-icons">delete</i>
                                    </a>
                                </li>
                            </ul>
                            <div class="clearfix"></div>
                        </div>

                    </div>
                </div>
                <div class="clearfix"></div>
                <div ng-if="item.bonusType=='img'">
                    <h3 class="text-center">фотографии для бонуса</h3>
                    <div class="galleryWrapper">
                        <div class="galleryTable">
                            <div class="galleryRow">
                                <ul class="gallery-item-ul" ng-if="item.imgs.length<17">
                                    <li  class="gallery-item">
                                        <span class="helper"></span>
                                        <load-image
                                                upload-url="/api/collections/Photo/fileUpload?collectionName=Master"
                                                item-id="{{item._id}}"
                                                item-url="{{item.url}}"
                                                item-resourse="Items"
                                                file-src="fileSrc"
                                                name-img="imgs"
                                                gallery="item.imgs">
                                        </load-image>
                                    </li>
                                    <li ng-repeat="image in item.imgs track by $index" class="gallery-item">
                                        <span class="helper"></span>
                                        <img  ng-src="{{image.img}}">
                                        <h4 ng-bind="image.name"></h4>
                                        <p ng-bind="image.desc"></p>
                                        <a class="btn  btn-fab delete" ng-click="$ctrl.deleteSlideStuff(image,$index)">
                                            <i class="material-icons link-danger">delete</i>
                                        </a>
                                        <a class="btn  btn-fab edit" ng-click="$ctrl.editSlideStuff(image,$index)">
                                            <i class="material-icons link-success">edit</i>
                                        </a>
                                    </li>
                                </ul>
                                <div class="clearfix"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div ng-if="item.bonusType=='link'">
                    <h3 class="text-center">ссылка для бонуса</h3>
                    <div class="form-group label-floating " ng-if="">
                        <label class="control-label">ссылка</label>
                        <input class="form-control" ng-model="$ctrl.item.bonusLink" ng-model-options="{'updateOn':'default blur','debounce':{'default':700,'blur':0}}"
                               ng-change="$ctrl.saveField('bonusLink')">
                    </div>
                </div>
                <div ng-if="item.bonusType=='file'">

                </div>


                <!--todo вставить файл-->
            </div>
        </div>

        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 img-box">
            <div class="cart-detail">
                <a  class="btn btn-raised btn-success btn-block" ng-click="$ctrl.loadVideo(item,'video')">
                    <span>добавить<br>редактировать видео</span>
                </a>
                <div class="text-center upload-video" ng-show="item.video.link">
                    <div class="delete">
                        <a type="button" class="btn btn-fab btn-fab-mini btn-warning"  ng-click="$ctrl.deleteVideo(item,'video')" title="удалить видео">
                            <i class="material-icons">delete</i>
                        </a>
                    </div>
                    <div class="form-group text-center">
                        <video    class="fillHeigh" controls="controls">
                            <source ng-src="{{item.video.link| trustUrl}}" type="video/webm">
                        </video>
                    </div>
                </div>
                <div class="togglebutton">
                    <label>
                        <span ng-class="{'active':!item.video.audio}">отключить звук</span>
                        <input type="checkbox" ng-model="item.video.audio" ng-change="$ctrl.saveFieldStuff(item,'video')">
                        <span ng-class="{'active':item.video.audio}">включить звук</span>
                    </label>
                </div>
                <div class="togglebutton">
                    <label>
                        <span ng-class="{'active':!item.video.videoControl}">отключить управление проигрывателем</span>
                        <input type="checkbox" ng-model="item.video.videoControl" ng-change="$ctrl.saveFieldStuff(item,'video')">
                        <span ng-class="{'active':item.video.videoControl}">включить управление проигрывателем</span>
                    </label>
                </div>
            </div>

        </div>
        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 img-box">
            <div class="cart-detail">
                <a  class="btn btn-raised btn-success btn-block" ng-click="$ctrl.loadVideo(item,'video1')">
                    <span>добавить<br>редактировать видео</span>
                </a>
                <div class="text-center upload-video" ng-show="item.video1.link">
                    <div class="delete">
                        <a type="button" class="btn btn-fab btn-fab-mini btn-warning"  ng-click="$ctrl.deleteVideo(item,'video1')" title="удалить видео">
                            <i class="material-icons">delete</i>
                        </a>
                    </div>
                    <div class="form-group text-center">
                        <video    class="fillHeigh" controls="controls">
                            <source ng-src="{{item.video1.link| trustUrl}}" type="video/webm">
                        </video>
                    </div>
                </div>
                <div class="togglebutton">
                    <label>
                        <span ng-class="{'active':!item.video1.audio}">отключить звук</span>
                        <input type="checkbox" ng-model="item.video1.audio" ng-change="$ctrl.saveFieldStuff(item,'video1')">
                        <span ng-class="{'active':item.video1.audio}">включить звук</span>
                    </label>
                </div>
                <div class="togglebutton">
                    <label>
                        <span ng-class="{'active':!item.video1.videoControl}">отключить управление проигрывателем</span>
                        <input type="checkbox" ng-model="item.video1.videoControl" ng-change="$ctrl.saveFieldStuff(item,'video1')">
                        <span ng-class="{'active':item.video1.videoControl}">включить управление проигрывателем</span>
                    </label>
                </div>
            </div>

        </div>


       <!-- <div class="row">
            
            <div class="cart-detail gallery-photo">
                <h3 class="text-center">фотографии для товара</h3>
                <div class="galleryWrapper">
                    <div class="galleryTable">
                        <div class="galleryRow">
                            <div class="favicon thumbnail">
                                <load-image
                                        upload-url="/api/collections/Stuff/fileUploadSticker"
                                        item-id="{{item._id}}"
                                        item-resourse="Items"
                                        file-src="item.logo"
                                        name-img="logo">
                                </load-image>
                            </div>
                            <div class="clearfix"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>-->
        <div class="clearfix"></div>
    </div>
    <div class="content-tab-box" ng-show="block=='group'"  ng-init="displayHelp3=false" >
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <sorts-of-stuff stuff="item"></sorts-of-stuff>
        </div>
    </div>
    <div class="content-tab-box " ng-show="block=='comments'">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <div class="comments">
                <div class="comment-detail cart-detail" ng-repeat="item in $ctrl.comments track by $index">
                    <div class="col-lg-6  col-md-6 col-sm-5 col-xs-12">
                            <div class="text-right">
                                <span ng-bind="$ctrl.moment(item.date).format('LLL')" class="date"></span>
                            </div>
                            <div class="form-group label-floating">
                                <label class="control-label">имя</label>
                                <input class="form-control" ng-model="item.user" ng-model-options="{'updateOn':'default blur','debounce':{'default':700,'blur':0}}"
                                       ng-change="$ctrl.saveCommentField(item,'user')">
                            </div>
                            <div class="form-group label-floating">
                                <label class="control-label">комментарий</label>
                                <textarea rows="4" class="form-control" ng-model="item.text" ng-model-options="{'updateOn':'default blur','debounce':{'default':700,'blur':0}}"
                                          ng-change="$ctrl.saveCommentField(item,'text')">
                                                </textarea>
                            </div>

                    </div>
                    <div class="col-lg-5  col-md-5 col-sm-5 col-xs-8">
                        <span class="response-name">администратор</span>
                        <div class="form-group label-floating">
                            <label class="control-label">ответ</label>
                            <textarea rows="7" class="form-control" ng-model="item.response" ng-model-options="{'updateOn':'default blur','debounce':{'default':700,'blur':0}}"
                                      ng-change="$ctrl.saveCommentField(item,'response')">
                                            </textarea>
                        </div>
                    </div>
                    <div class="col-lg-1 col-md-1 col-sm-2 col-xs-4  text-right">
                        <a class="btn btn-fab btn-fab-mini btn-warning" ng-click="$ctrl.deleteComment(item._id)">
                            <i class="material-icons">delete</i>
                        </a>

                    </div>
                    <div class="clearfix"></div>
                </div>
            </div>
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="content-tab-box" ng-if="block=='blocks'">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <blocks-edit
                    item="item"
                    type="Stuff"
                    refresh-blocks="$ctrl.refreshBlocks()">
            </blocks-edit>
        </div>
        <div class="clearfix"></div>
    </div>
</div>