{"version":3,"sources":["babel/components/dayOfMonth/dayOfMonth.components.js"],"names":["angular","module","component","require","parent","controller","itemCtrl","templateUrl","$inject","$scope","Booking","$timeout","$element","$compile","global","self","setDay","filterNumOfDays","prev","next","moment","daysOfMonth","$onInit","$owl","$","find","on","event","activate","carousel_Settings","items","nav","dots","reload","today","Date","month","td","getMonth","selectedDay","getDate","year","getFullYear","currentMonth","currentday","minDay","qtyDaysOfMonth","getDaysOfMonth","html","i","linkFn","content","append","startPosition","Number","owlCarousel","push","trigger","$watch","n","o","date","nd","od","nM","oM","day","setDate","item","console","log"],"mappings":"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","file":"dayOfMonth.components.js","sourcesContent":["'use strict';\r\n(function(){\r\n    angular.module('gmall.directives').component('dayOfMonth',{\r\n        require: {\r\n            parent: '^dateTimeEntry'\r\n        },\r\n        controller: itemCtrl,\r\n        templateUrl: 'views/template/partials/dateTime/dayOfMonth.html',\r\n    })\r\n    itemCtrl.$inject=['$scope','Booking','$timeout','$element','$compile','global']\r\n    function itemCtrl($scope,Booking,$timeout,$element,$compile,global){\r\n        let self = this;\r\n        self.setDay=setDay;\r\n        self.filterNumOfDays=filterNumOfDays;\r\n        self.prev=prev;\r\n        self.next=next;\r\n        self.moment=moment;\r\n        self.global=global;\r\n        self.daysOfMonth=[];\r\n\r\n\r\n        this.$onInit = ()=>{\r\n            self.$owl=$('body').find('#dayPicker');\r\n            self.$owl.on('initialized.owl.carousel', function(event) {\r\n                //console.log('initialized.owl.carousel')\r\n            })\r\n            activate()\r\n        }\r\n        const carousel_Settings={\r\n            items: 10,\r\n            nav:false,\r\n            dots:false\r\n        };\r\n        const activate = (reload)=>{\r\n            if(reload){\r\n                //self.$owl.trigger('destroy.owl.carousel')\r\n                //return;\r\n            }\r\n            /*if(self.$owl.data('owlCarousel') && self.$owl.data('owlCarousel').destroy){\r\n                //console.log('destroy')\r\n                self.$owl.data('owlCarousel').destroy();\r\n                return;\r\n            }*/\r\n\r\n            /*if(self.$owl.data('owlCarousel') && self.$owl.data('owlCarousel').destroy){\r\n                //console.log('destroy')\r\n                self.$owl.data('owlCarousel').destroy();\r\n            }*/\r\n\r\n            let today= new Date();\r\n            let month = self.parent.td.getMonth()\r\n            self.selectedDay = self.parent.td.getDate();\r\n            let year = self.parent.td.getFullYear();\r\n            let currentMonth = today.getMonth()\r\n            let currentday =   today.getDate();\r\n            if(month<=currentMonth){\r\n                self.minDay=currentday;\r\n            }else{\r\n                self.minDay=1;\r\n            }\r\n            //console.log(month,year)\r\n            let qtyDaysOfMonth = Booking.getDaysOfMonth(month+1,year);\r\n\r\n\r\n            if(!reload){\r\n                let html=''\r\n                for(let i =self.minDay;i<=qtyDaysOfMonth;i++){\r\n                    html += '<div class=\"item\" ng-class=\"{\\'active\\':'+i+'==$ctrl.selectedDay}\"><a  ng-click=\"$ctrl.setDay('+i+')\">'+i+'</a></div>'\r\n                }\r\n                /*console.log('self.minDay',self.minDay,qtyDaysOfMonth)\r\n                console.log('html',html)*/\r\n                let linkFn = $compile(html);\r\n                let content = linkFn($scope);\r\n                self.$owl.append(content)\r\n                $timeout(()=>{\r\n                    carousel_Settings.startPosition=Number(self.selectedDay)-Number(self.minDay)\r\n                    self.$owl.owlCarousel( carousel_Settings );\r\n                    /*$timeout(()=>{\r\n                     self.$owl.trigger('to.owl.carousel',[Number(self.selectedDay),1,true])\r\n                     },500)*/\r\n                },100)\r\n            }else{\r\n                let daysOfMonth=[];\r\n                for(let i =self.minDay;i<=qtyDaysOfMonth;i++){\r\n                    daysOfMonth.push(i)\r\n                }\r\n                self.daysOfMonth=daysOfMonth\r\n                let html=''\r\n                for(let i =self.minDay;i<=qtyDaysOfMonth;i++){\r\n                    html += '<div class=\"item\" ng-class=\"{\\'active\\':'+i+'==$ctrl.selectedDay}\"><a  ng-click=\"$ctrl.setDay('+i+')\">'+i+'</a></div>'\r\n                }\r\n                //let linkFn = $compile(html);\r\n                //let content = linkFn($scope);\r\n                //console.log(content)\r\n                $timeout(()=>{\r\n                    self.$owl.trigger('replace.owl.carousel',html).trigger('refresh.owl.carousel');\r\n                    //self.$owl.owlCarousel( carousel_Settings );\r\n                    $timeout(()=>{\r\n                        let html = $('#dayPicker .owl-stage-outer')\r\n                        //console.log(html)\r\n                        $compile(html)($scope)\r\n                        self.$owl.trigger('to.owl.carousel',[Number(self.selectedDay)-Number(self.minDay),1,true])\r\n                    })\r\n\r\n\r\n                })\r\n\r\n\r\n                /*let delta =qtyDaysOfMonth-self.qtyDaysOfMonth;\r\n                if(delta>0){\r\n                    for(let i=1;i<=delta;i++){\r\n                        let html = '<div class=\"item\"><a  ng-click=\"$ctrl.setDay(day)\">'+Number(self.qtyDaysOfMonth)+i+'</a></div>'\r\n                        console.log(html)\r\n                        self.$owl.trigger('add.owl.carousel', [$(html), Number(self.qtyDaysOfMonth)+i])\r\n                           .trigger('refresh.owl.carousel')\r\n                    }\r\n                    //self.$owl.trigger('add.owl.carousel',[])\r\n                }else if(delta<0){\r\n\r\n                }*/\r\n            }\r\n            self.qtyDaysOfMonth=qtyDaysOfMonth\r\n\r\n\r\n        }\r\n        $scope.$watch(()=>self.parent.td,(n,o)=>{\r\n            if(n && o){\r\n                self.date=n;\r\n                //console.log(self.date)\r\n                let nd = new Date(n)\r\n                let od = new Date(o)\r\n                let nM= nd.getMonth()\r\n                let oM= od.getMonth()\r\n                if(nM!=oM){\r\n                    activate('reload')\r\n                }else{\r\n                    self.selectedDay = self.parent.td.getDate();\r\n                    //console.log(self.selectedDay)\r\n                }\r\n            }\r\n        })\r\n        function setDay(day) {\r\n            self.selectedDay=day;\r\n            self.parent.td.setDate(day)\r\n            self.parent.setDay()\r\n        }\r\n        function filterNumOfDays(item) {\r\n            //return true;\r\n            let i = Number(item);\r\n            if(i>=self.minDay || i<=self.daysOfMonth){return true}\r\n        }\r\n        function prev() {\r\n            console.log('prev')\r\n            self.$owl.trigger('prev.owl.carousel', [self.selectedDay-3,300]);\r\n        }\r\n        function next() {\r\n            console.log('next')\r\n            self.$owl.trigger('next.owl.carousel', [self.selectedDay+3,300]);\r\n        }\r\n    }\r\n\r\n})()\r\n"]}