{"version":3,"sources":["babel/SectionClass.js"],"names":["Section","sections","categories","reduce","a","s","categoriesO","forEach","cat","url","child","c","sectionUrl","i","l","length","j","ll","id","_id","_getParentSection","section","arr","push","apply","params","group","type","window","SectionClass","exports","init"],"mappings":"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","file":"SectionClass.js","sourcesContent":["'use strict';\r\n(function(){\r\n    class Section {\r\n        constructor (sections){\r\n            this.sections=sections;\r\n            this.categories=sections.reduce(function (a,s) {\r\n                s.categoriesO={}\r\n                if(s.categories){\r\n                    s.categories.forEach(function(cat){\r\n                        a[cat.url]=cat;\r\n                        s.categoriesO[cat.url]=cat;\r\n                    })\r\n                }\r\n                if(s.child){\r\n                    s.child.forEach(function (c) {\r\n                        c.categoriesO={}\r\n                        if(c.categories){\r\n                            c.categories.forEach(function(cat){\r\n                                a[cat.url]=cat\r\n                                c.categoriesO[cat.url]=cat;\r\n                            })\r\n                        }\r\n                    })\r\n                }\r\n                return a;\r\n            },{})\r\n        }\r\n        getSections(){\r\n            return this.sections;\r\n        }\r\n        getCategories(){\r\n            return this.categories;\r\n        }\r\n        getSection(sectionUrl) {\r\n            //console.log('sectionUrl',sectionUrl)\r\n            if(!this.sections) return  null;\r\n            let sections=this.sections;\r\n            for(var i=0,l=sections.length;i<l;i++){\r\n                //console.log('sections[i].url',sections[i].url)\r\n                if(sections[i].url && sections[i].url==sectionUrl){\r\n                    return sections[i];\r\n                    break\r\n                }\r\n                if (sections[i].child && sections[i].child.length){\r\n                    for(var j=0,ll=sections[i].child.length;j<ll;j++){\r\n                        if(sections[i].child[j].url && sections[i].child[j].url==sectionUrl){\r\n                            return sections[i].child[j];\r\n                            break\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n        getParentSection(sectionUrl,id){\r\n            //console.log(sectionUrl)\r\n            if(!this.sections) return  null;\r\n            let sections=this.sections;\r\n            for(var i=0,l=sections.length;i<l;i++){\r\n                if(id){\r\n                    if(sections[i]._id==sectionUrl){\r\n                        return sections[i];\r\n                        break\r\n                    }\r\n                }else{\r\n                    if(sections[i].url && sections[i].url==sectionUrl){\r\n                        return sections[i];\r\n                        break\r\n                    }\r\n                }\r\n\r\n                if (sections[i].child && sections[i].child.length){\r\n                    var categories;\r\n                    if(categories=_getParentSection(sections[i].child,sectionUrl,id)){\r\n                        return categories;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n\r\n        getEmbededCategories(section,arr){\r\n            if(section.categories && section.categories.length){\r\n                arr.push.apply(arr,section.categories);\r\n            }\r\n            if (section.child && section.child.length){\r\n                section.child.forEach(function(child,i){\r\n                    arr.push.apply(arr,section.child[i].categories);\r\n                })\r\n            }\r\n            return arr;\r\n        }\r\n        getListType(params){\r\n            if(!params.group){\r\n                return 'good'\r\n            }\r\n            for(let i=0;i<this.sections.length;i++){\r\n                if(this.sections[i].url==params.group){\r\n                    if(this.sections[i].type){\r\n                        return this.sections[i].type;\r\n                        break;\r\n                    }\r\n                }\r\n                if(this.sections[i].child && this.sections[i].child.length){\r\n                    for(let j=0;j<this.sections[i].child.length;j++){\r\n                        if(this.sections[i].child[j].url==params.group){\r\n                            if(this.sections[i].type){\r\n                                return this.sections[i].type;\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return 'good'\r\n        }\r\n    }\r\n\r\n    if(typeof window !== 'undefined'){\r\n        window.SectionClass = Section;\r\n    } else {\r\n        exports.init=Section;\r\n    }\r\n})()"]}